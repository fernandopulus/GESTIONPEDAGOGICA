var xfe=Object.defineProperty;var vfe=(e,t,r)=>t in e?xfe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var oT=(e,t,r)=>vfe(e,typeof t!="symbol"?t+"":t,r);function bfe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var bht=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function yfe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var lT={exports:{}},Vb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _7;function wfe(){if(_7)return Vb;_7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return Vb.Fragment=t,Vb.jsx=r,Vb.jsxs=r,Vb}var N7;function Efe(){return N7||(N7=1,lT.exports=wfe()),lT.exports}var l=Efe(),cT={exports:{}},ln={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S7;function Cfe(){if(S7)return ln;S7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(X){return X===null||typeof X!="object"?null:(X=f&&X[f]||X["@@iterator"],typeof X=="function"?X:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function b(X,ee,F){this.props=X,this.context=ee,this.refs=x,this.updater=F||p}b.prototype.isReactComponent={},b.prototype.setState=function(X,ee){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ee,"setState")},b.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function y(){}y.prototype=b.prototype;function w(X,ee,F){this.props=X,this.context=ee,this.refs=x,this.updater=F||p}var _=w.prototype=new y;_.constructor=w,g(_,b.prototype),_.isPureReactComponent=!0;var j=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},I=Object.prototype.hasOwnProperty;function E(X,ee,F,z,Y,te){return F=te.ref,{$$typeof:e,type:X,key:ee,ref:F!==void 0?F:null,props:te}}function N(X,ee){return E(X.type,ee,void 0,void 0,void 0,X.props)}function B(X){return typeof X=="object"&&X!==null&&X.$$typeof===e}function R(X){var ee={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(F){return ee[F]})}var P=/\/+/g;function D(X,ee){return typeof X=="object"&&X!==null&&X.key!=null?R(""+X.key):ee.toString(36)}function L(){}function M(X){switch(X.status){case"fulfilled":return X.value;case"rejected":throw X.reason;default:switch(typeof X.status=="string"?X.then(L,L):(X.status="pending",X.then(function(ee){X.status==="pending"&&(X.status="fulfilled",X.value=ee)},function(ee){X.status==="pending"&&(X.status="rejected",X.reason=ee)})),X.status){case"fulfilled":return X.value;case"rejected":throw X.reason}}throw X}function J(X,ee,F,z,Y){var te=typeof X;(te==="undefined"||te==="boolean")&&(X=null);var ae=!1;if(X===null)ae=!0;else switch(te){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(X.$$typeof){case e:case t:ae=!0;break;case d:return ae=X._init,J(ae(X._payload),ee,F,z,Y)}}if(ae)return Y=Y(X),ae=z===""?"."+D(X,0):z,j(Y)?(F="",ae!=null&&(F=ae.replace(P,"$&/")+"/"),J(Y,ee,F,"",function(ce){return ce})):Y!=null&&(B(Y)&&(Y=N(Y,F+(Y.key==null||X&&X.key===Y.key?"":(""+Y.key).replace(P,"$&/")+"/")+ae)),ee.push(Y)),1;ae=0;var le=z===""?".":z+":";if(j(X))for(var ie=0;ie<X.length;ie++)z=X[ie],te=le+D(z,ie),ae+=J(z,ee,F,te,Y);else if(ie=h(X),typeof ie=="function")for(X=ie.call(X),ie=0;!(z=X.next()).done;)z=z.value,te=le+D(z,ie++),ae+=J(z,ee,F,te,Y);else if(te==="object"){if(typeof X.then=="function")return J(M(X),ee,F,z,Y);throw ee=String(X),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return ae}function H(X,ee,F){if(X==null)return X;var z=[],Y=0;return J(X,z,"","",function(te){return ee.call(F,te,Y++)}),z}function K(X){if(X._status===-1){var ee=X._result;ee=ee(),ee.then(function(F){(X._status===0||X._status===-1)&&(X._status=1,X._result=F)},function(F){(X._status===0||X._status===-1)&&(X._status=2,X._result=F)}),X._status===-1&&(X._status=0,X._result=ee)}if(X._status===1)return X._result.default;throw X._result}var V=typeof reportError=="function"?reportError:function(X){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof X=="object"&&X!==null&&typeof X.message=="string"?String(X.message):String(X),error:X});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",X);return}console.error(X)};function G(){}return ln.Children={map:H,forEach:function(X,ee,F){H(X,function(){ee.apply(this,arguments)},F)},count:function(X){var ee=0;return H(X,function(){ee++}),ee},toArray:function(X){return H(X,function(ee){return ee})||[]},only:function(X){if(!B(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},ln.Component=b,ln.Fragment=r,ln.Profiler=a,ln.PureComponent=w,ln.StrictMode=n,ln.Suspense=c,ln.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,ln.__COMPILER_RUNTIME={__proto__:null,c:function(X){return k.H.useMemoCache(X)}},ln.cache=function(X){return function(){return X.apply(null,arguments)}},ln.cloneElement=function(X,ee,F){if(X==null)throw Error("The argument must be a React element, but you passed "+X+".");var z=g({},X.props),Y=X.key,te=void 0;if(ee!=null)for(ae in ee.ref!==void 0&&(te=void 0),ee.key!==void 0&&(Y=""+ee.key),ee)!I.call(ee,ae)||ae==="key"||ae==="__self"||ae==="__source"||ae==="ref"&&ee.ref===void 0||(z[ae]=ee[ae]);var ae=arguments.length-2;if(ae===1)z.children=F;else if(1<ae){for(var le=Array(ae),ie=0;ie<ae;ie++)le[ie]=arguments[ie+2];z.children=le}return E(X.type,Y,void 0,void 0,te,z)},ln.createContext=function(X){return X={$$typeof:i,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null},X.Provider=X,X.Consumer={$$typeof:s,_context:X},X},ln.createElement=function(X,ee,F){var z,Y={},te=null;if(ee!=null)for(z in ee.key!==void 0&&(te=""+ee.key),ee)I.call(ee,z)&&z!=="key"&&z!=="__self"&&z!=="__source"&&(Y[z]=ee[z]);var ae=arguments.length-2;if(ae===1)Y.children=F;else if(1<ae){for(var le=Array(ae),ie=0;ie<ae;ie++)le[ie]=arguments[ie+2];Y.children=le}if(X&&X.defaultProps)for(z in ae=X.defaultProps,ae)Y[z]===void 0&&(Y[z]=ae[z]);return E(X,te,void 0,void 0,null,Y)},ln.createRef=function(){return{current:null}},ln.forwardRef=function(X){return{$$typeof:o,render:X}},ln.isValidElement=B,ln.lazy=function(X){return{$$typeof:d,_payload:{_status:-1,_result:X},_init:K}},ln.memo=function(X,ee){return{$$typeof:u,type:X,compare:ee===void 0?null:ee}},ln.startTransition=function(X){var ee=k.T,F={};k.T=F;try{var z=X(),Y=k.S;Y!==null&&Y(F,z),typeof z=="object"&&z!==null&&typeof z.then=="function"&&z.then(G,V)}catch(te){V(te)}finally{k.T=ee}},ln.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},ln.use=function(X){return k.H.use(X)},ln.useActionState=function(X,ee,F){return k.H.useActionState(X,ee,F)},ln.useCallback=function(X,ee){return k.H.useCallback(X,ee)},ln.useContext=function(X){return k.H.useContext(X)},ln.useDebugValue=function(){},ln.useDeferredValue=function(X,ee){return k.H.useDeferredValue(X,ee)},ln.useEffect=function(X,ee,F){var z=k.H;if(typeof F=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return z.useEffect(X,ee)},ln.useId=function(){return k.H.useId()},ln.useImperativeHandle=function(X,ee,F){return k.H.useImperativeHandle(X,ee,F)},ln.useInsertionEffect=function(X,ee){return k.H.useInsertionEffect(X,ee)},ln.useLayoutEffect=function(X,ee){return k.H.useLayoutEffect(X,ee)},ln.useMemo=function(X,ee){return k.H.useMemo(X,ee)},ln.useOptimistic=function(X,ee){return k.H.useOptimistic(X,ee)},ln.useReducer=function(X,ee,F){return k.H.useReducer(X,ee,F)},ln.useRef=function(X){return k.H.useRef(X)},ln.useState=function(X){return k.H.useState(X)},ln.useSyncExternalStore=function(X,ee,F){return k.H.useSyncExternalStore(X,ee,F)},ln.useTransition=function(){return k.H.useTransition()},ln.version="19.1.1",ln}var k7;function C1(){return k7||(k7=1,cT.exports=Cfe()),cT.exports}var S=C1();const nt=Cl(S),_fe=bfe({__proto__:null,default:nt},[S]);var uT={exports:{}},zb={},dT={exports:{}},AT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B7;function Nfe(){return B7||(B7=1,function(e){function t(H,K){var V=H.length;H.push(K);e:for(;0<V;){var G=V-1>>>1,X=H[G];if(0<a(X,K))H[G]=K,H[V]=X,V=G;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var K=H[0],V=H.pop();if(V!==K){H[0]=V;e:for(var G=0,X=H.length,ee=X>>>1;G<ee;){var F=2*(G+1)-1,z=H[F],Y=F+1,te=H[Y];if(0>a(z,V))Y<X&&0>a(te,z)?(H[G]=te,H[Y]=V,G=Y):(H[G]=z,H[F]=V,G=F);else if(Y<X&&0>a(te,V))H[G]=te,H[Y]=V,G=Y;else break e}}return K}function a(H,K){var V=H.sortIndex-K.sortIndex;return V!==0?V:H.id-K.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,x=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function j(H){for(var K=r(u);K!==null;){if(K.callback===null)n(u);else if(K.startTime<=H)n(u),K.sortIndex=K.expirationTime,t(c,K);else break;K=r(u)}}function k(H){if(x=!1,j(H),!g)if(r(c)!==null)g=!0,I||(I=!0,D());else{var K=r(u);K!==null&&J(k,K.startTime-H)}}var I=!1,E=-1,N=5,B=-1;function R(){return b?!0:!(e.unstable_now()-B<N)}function P(){if(b=!1,I){var H=e.unstable_now();B=H;var K=!0;try{e:{g=!1,x&&(x=!1,w(E),E=-1),p=!0;var V=h;try{t:{for(j(H),f=r(c);f!==null&&!(f.expirationTime>H&&R());){var G=f.callback;if(typeof G=="function"){f.callback=null,h=f.priorityLevel;var X=G(f.expirationTime<=H);if(H=e.unstable_now(),typeof X=="function"){f.callback=X,j(H),K=!0;break t}f===r(c)&&n(c),j(H)}else n(c);f=r(c)}if(f!==null)K=!0;else{var ee=r(u);ee!==null&&J(k,ee.startTime-H),K=!1}}break e}finally{f=null,h=V,p=!1}K=void 0}}finally{K?D():I=!1}}}var D;if(typeof _=="function")D=function(){_(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,M=L.port2;L.port1.onmessage=P,D=function(){M.postMessage(null)}}else D=function(){y(P,0)};function J(H,K){E=y(function(){H(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(H){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var V=h;h=K;try{return H()}finally{h=V}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(H,K){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var V=h;h=H;try{return K()}finally{h=V}},e.unstable_scheduleCallback=function(H,K,V){var G=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?G+V:G):V=G,H){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=V+X,H={id:d++,callback:K,priorityLevel:H,startTime:V,expirationTime:X,sortIndex:-1},V>G?(H.sortIndex=V,t(u,H),r(c)===null&&H===r(u)&&(x?(w(E),E=-1):x=!0,J(k,V-G))):(H.sortIndex=X,t(c,H),g||p||(g=!0,I||(I=!0,D()))),H},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(H){var K=h;return function(){var V=h;h=K;try{return H.apply(this,arguments)}finally{h=V}}}}(AT)),AT}var T7;function Sfe(){return T7||(T7=1,dT.exports=Nfe()),dT.exports}var fT={exports:{}},Fo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j7;function kfe(){if(j7)return Fo;j7=1;var e=C1();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Fo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Fo.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},Fo.flushSync=function(c){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,c)return c()}finally{i.T=u,n.p=d,n.d.f()}},Fo.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},Fo.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},Fo.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:p}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Fo.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},Fo.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Fo.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},Fo.requestFormReset=function(c){n.d.r(c)},Fo.unstable_batchedUpdates=function(c,u){return c(u)},Fo.useFormState=function(c,u,d){return i.H.useFormState(c,u,d)},Fo.useFormStatus=function(){return i.H.useHostTransitionStatus()},Fo.version="19.1.1",Fo}var I7;function AY(){if(I7)return fT.exports;I7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),fT.exports=kfe(),fT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F7;function Bfe(){if(F7)return zb;F7=1;var e=Sfe(),t=C1(),r=AY();function n(A){var m="https://react.dev/errors/"+A;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+A+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var m=A,v=A;if(A.alternate)for(;m.return;)m=m.return;else{A=m;do m=A,(m.flags&4098)!==0&&(v=m.return),A=m.return;while(A)}return m.tag===3?v:null}function i(A){if(A.tag===13){var m=A.memoizedState;if(m===null&&(A=A.alternate,A!==null&&(m=A.memoizedState)),m!==null)return m.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function c(A){var m=A.alternate;if(!m){if(m=s(A),m===null)throw Error(n(188));return m!==A?null:A}for(var v=A,C=m;;){var U=v.return;if(U===null)break;var q=U.alternate;if(q===null){if(C=U.return,C!==null){v=C;continue}break}if(U.child===q.child){for(q=U.child;q;){if(q===v)return o(U),A;if(q===C)return o(U),m;q=q.sibling}throw Error(n(188))}if(v.return!==C.return)v=U,C=q;else{for(var ue=!1,be=U.child;be;){if(be===v){ue=!0,v=U,C=q;break}if(be===C){ue=!0,C=U,v=q;break}be=be.sibling}if(!ue){for(be=q.child;be;){if(be===v){ue=!0,v=q,C=U;break}if(be===C){ue=!0,C=q,v=U;break}be=be.sibling}if(!ue)throw Error(n(189))}}if(v.alternate!==C)throw Error(n(190))}if(v.tag!==3)throw Error(n(188));return v.stateNode.current===v?A:m}function u(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A;for(A=A.child;A!==null;){if(m=u(A),m!==null)return m;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),_=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function D(A){return A===null||typeof A!="object"?null:(A=P&&A[P]||A["@@iterator"],typeof A=="function"?A:null)}var L=Symbol.for("react.client.reference");function M(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===L?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case b:return"Profiler";case x:return"StrictMode";case k:return"Suspense";case I:return"SuspenseList";case B:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case p:return"Portal";case _:return(A.displayName||"Context")+".Provider";case w:return(A._context.displayName||"Context")+".Consumer";case j:var m=A.render;return A=A.displayName,A||(A=m.displayName||m.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case E:return m=A.displayName||null,m!==null?m:M(A.type)||"Memo";case N:m=A._payload,A=A._init;try{return M(A(m))}catch{}}return null}var J=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},G=[],X=-1;function ee(A){return{current:A}}function F(A){0>X||(A.current=G[X],G[X]=null,X--)}function z(A,m){X++,G[X]=A.current,A.current=m}var Y=ee(null),te=ee(null),ae=ee(null),le=ee(null);function ie(A,m){switch(z(ae,m),z(te,A),z(Y,null),m.nodeType){case 9:case 11:A=(A=m.documentElement)&&(A=A.namespaceURI)?ZU(A):0;break;default:if(A=m.tagName,m=m.namespaceURI)m=ZU(m),A=e7(m,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}F(Y),z(Y,A)}function ce(){F(Y),F(te),F(ae)}function pe(A){A.memoizedState!==null&&z(le,A);var m=Y.current,v=e7(m,A.type);m!==v&&(z(te,A),z(Y,v))}function Be(A){te.current===A&&(F(Y),F(te)),le.current===A&&(F(le),Lb._currentValue=V)}var ne=Object.prototype.hasOwnProperty,_e=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,Se=e.unstable_shouldYield,fe=e.unstable_requestPaint,Ie=e.unstable_now,Ue=e.unstable_getCurrentPriorityLevel,Ye=e.unstable_ImmediatePriority,ye=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,Re=e.unstable_LowPriority,qe=e.unstable_IdlePriority,Ze=e.log,ct=e.unstable_setDisableYieldValue,pt=null,It=null;function Mt(A){if(typeof Ze=="function"&&ct(A),It&&typeof It.setStrictMode=="function")try{It.setStrictMode(pt,A)}catch{}}var Pt=Math.clz32?Math.clz32:Br,Qt=Math.log,yt=Math.LN2;function Br(A){return A>>>=0,A===0?32:31-(Qt(A)/yt|0)|0}var tr=256,nn=4194304;function Nr(A){var m=A&42;if(m!==0)return m;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Vr(A,m,v){var C=A.pendingLanes;if(C===0)return 0;var U=0,q=A.suspendedLanes,ue=A.pingedLanes;A=A.warmLanes;var be=C&134217727;return be!==0?(C=be&~q,C!==0?U=Nr(C):(ue&=be,ue!==0?U=Nr(ue):v||(v=be&~A,v!==0&&(U=Nr(v))))):(be=C&~q,be!==0?U=Nr(be):ue!==0?U=Nr(ue):v||(v=C&~A,v!==0&&(U=Nr(v)))),U===0?0:m!==0&&m!==U&&(m&q)===0&&(q=U&-U,v=m&-m,q>=v||q===32&&(v&4194048)!==0)?m:U}function In(A,m){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&m)===0}function Or(A,m){switch(A){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fs(){var A=tr;return tr<<=1,(tr&4194048)===0&&(tr=256),A}function fn(){var A=nn;return nn<<=1,(nn&62914560)===0&&(nn=4194304),A}function oa(A){for(var m=[],v=0;31>v;v++)m.push(A);return m}function Ba(A,m){A.pendingLanes|=m,m!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function tn(A,m,v,C,U,q){var ue=A.pendingLanes;A.pendingLanes=v,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=v,A.entangledLanes&=v,A.errorRecoveryDisabledLanes&=v,A.shellSuspendCounter=0;var be=A.entanglements,Pe=A.expirationTimes,lt=A.hiddenUpdates;for(v=ue&~v;0<v;){var St=31-Pt(v),Ot=1<<St;be[St]=0,Pe[St]=-1;var At=lt[St];if(At!==null)for(lt[St]=null,St=0;St<At.length;St++){var ht=At[St];ht!==null&&(ht.lane&=-536870913)}v&=~Ot}C!==0&&pr(A,C,0),q!==0&&U===0&&A.tag!==0&&(A.suspendedLanes|=q&~(ue&~m))}function pr(A,m,v){A.pendingLanes|=m,A.suspendedLanes&=~m;var C=31-Pt(m);A.entangledLanes|=m,A.entanglements[C]=A.entanglements[C]|1073741824|v&4194090}function et(A,m){var v=A.entangledLanes|=m;for(A=A.entanglements;v;){var C=31-Pt(v),U=1<<C;U&m|A[C]&m&&(A[C]|=m),v&=~U}}function gt(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Je(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function xt(){var A=K.p;return A!==0?A:(A=window.event,A===void 0?32:v7(A.type))}function wt(A,m){var v=K.p;try{return K.p=A,m()}finally{K.p=v}}var bt=Math.random().toString(36).slice(2),nr="__reactFiber$"+bt,gr="__reactProps$"+bt,Kr="__reactContainer$"+bt,Jr="__reactEvents$"+bt,Gr="__reactListeners$"+bt,he="__reactHandles$"+bt,Te="__reactResources$"+bt,Ce="__reactMarker$"+bt;function we(A){delete A[nr],delete A[gr],delete A[Jr],delete A[Gr],delete A[he]}function Ne(A){var m=A[nr];if(m)return m;for(var v=A.parentNode;v;){if(m=v[Kr]||v[nr]){if(v=m.alternate,m.child!==null||v!==null&&v.child!==null)for(A=a7(A);A!==null;){if(v=A[nr])return v;A=a7(A)}return m}A=v,v=A.parentNode}return null}function je(A){if(A=A[nr]||A[Kr]){var m=A.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return A}return null}function Xe(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A.stateNode;throw Error(n(33))}function dt(A){var m=A[Te];return m||(m=A[Te]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function $e(A){A[Ce]=!0}var rt=new Set,it={};function Ft(A,m){Vt(A,m),Vt(A+"Capture",m)}function Vt(A,m){for(it[A]=m,A=0;A<m.length;A++)rt.add(m[A])}var Yt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ht={},$t={};function Sr(A){return ne.call($t,A)?!0:ne.call(Ht,A)?!1:Yt.test(A)?$t[A]=!0:(Ht[A]=!0,!1)}function an(A,m,v){if(Sr(m))if(v===null)A.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":A.removeAttribute(m);return;case"boolean":var C=m.toLowerCase().slice(0,5);if(C!=="data-"&&C!=="aria-"){A.removeAttribute(m);return}}A.setAttribute(m,""+v)}}function sn(A,m,v){if(v===null)A.removeAttribute(m);else{switch(typeof v){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(m);return}A.setAttribute(m,""+v)}}function dn(A,m,v,C){if(C===null)A.removeAttribute(v);else{switch(typeof C){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(v);return}A.setAttributeNS(m,v,""+C)}}var hs,wo;function ms(A){if(hs===void 0)try{throw Error()}catch(v){var m=v.stack.trim().match(/\n( *(at )?)/);hs=m&&m[1]||"",wo=-1<v.stack.indexOf(`
    at`)?" (<anonymous>)":-1<v.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hs+A+wo}var Js=!1;function js(A,m){if(!A||Js)return"";Js=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var C={DetermineComponentFrameRoot:function(){try{if(m){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(ht){var At=ht}Reflect.construct(A,[],Ot)}else{try{Ot.call()}catch(ht){At=ht}A.call(Ot.prototype)}}else{try{throw Error()}catch(ht){At=ht}(Ot=A())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(ht){if(ht&&At&&typeof ht.stack=="string")return[ht.stack,At.stack]}return[null,null]}};C.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(C.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(C.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=C.DetermineComponentFrameRoot(),ue=q[0],be=q[1];if(ue&&be){var Pe=ue.split(`
`),lt=be.split(`
`);for(U=C=0;C<Pe.length&&!Pe[C].includes("DetermineComponentFrameRoot");)C++;for(;U<lt.length&&!lt[U].includes("DetermineComponentFrameRoot");)U++;if(C===Pe.length||U===lt.length)for(C=Pe.length-1,U=lt.length-1;1<=C&&0<=U&&Pe[C]!==lt[U];)U--;for(;1<=C&&0<=U;C--,U--)if(Pe[C]!==lt[U]){if(C!==1||U!==1)do if(C--,U--,0>U||Pe[C]!==lt[U]){var St=`
`+Pe[C].replace(" at new "," at ");return A.displayName&&St.includes("<anonymous>")&&(St=St.replace("<anonymous>",A.displayName)),St}while(1<=C&&0<=U);break}}}finally{Js=!1,Error.prepareStackTrace=v}return(v=A?A.displayName||A.name:"")?ms(v):""}function pi(A){switch(A.tag){case 26:case 27:case 5:return ms(A.type);case 16:return ms("Lazy");case 13:return ms("Suspense");case 19:return ms("SuspenseList");case 0:case 15:return js(A.type,!1);case 11:return js(A.type.render,!1);case 1:return js(A.type,!0);case 31:return ms("Activity");default:return""}}function xa(A){try{var m="";do m+=pi(A),A=A.return;while(A);return m}catch(v){return`
Error generating stack: `+v.message+`
`+v.stack}}function Zs(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Gd(A){var m=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Mh(A){var m=Gd(A)?"checked":"value",v=Object.getOwnPropertyDescriptor(A.constructor.prototype,m),C=""+A[m];if(!A.hasOwnProperty(m)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var U=v.get,q=v.set;return Object.defineProperty(A,m,{configurable:!0,get:function(){return U.call(this)},set:function(ue){C=""+ue,q.call(this,ue)}}),Object.defineProperty(A,m,{enumerable:v.enumerable}),{getValue:function(){return C},setValue:function(ue){C=""+ue},stopTracking:function(){A._valueTracker=null,delete A[m]}}}}function Kc(A){A._valueTracker||(A._valueTracker=Mh(A))}function uf(A){if(!A)return!1;var m=A._valueTracker;if(!m)return!0;var v=m.getValue(),C="";return A&&(C=Gd(A)?A.checked?"true":"false":A.value),A=C,A!==v?(m.setValue(A),!0):!1}function gi(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Kd=/[\n"\\]/g;function Fn(A){return A.replace(Kd,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function xi(A,m,v,C,U,q,ue,be){A.name="",ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"?A.type=ue:A.removeAttribute("type"),m!=null?ue==="number"?(m===0&&A.value===""||A.value!=m)&&(A.value=""+Zs(m)):A.value!==""+Zs(m)&&(A.value=""+Zs(m)):ue!=="submit"&&ue!=="reset"||A.removeAttribute("value"),m!=null?Wc(A,ue,Zs(m)):v!=null?Wc(A,ue,Zs(v)):C!=null&&A.removeAttribute("value"),U==null&&q!=null&&(A.defaultChecked=!!q),U!=null&&(A.checked=U&&typeof U!="function"&&typeof U!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?A.name=""+Zs(be):A.removeAttribute("name")}function qc(A,m,v,C,U,q,ue,be){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(A.type=q),m!=null||v!=null){if(!(q!=="submit"&&q!=="reset"||m!=null))return;v=v!=null?""+Zs(v):"",m=m!=null?""+Zs(m):v,be||m===A.value||(A.value=m),A.defaultValue=m}C=C??U,C=typeof C!="function"&&typeof C!="symbol"&&!!C,A.checked=be?A.checked:!!C,A.defaultChecked=!!C,ue!=null&&typeof ue!="function"&&typeof ue!="symbol"&&typeof ue!="boolean"&&(A.name=ue)}function Wc(A,m,v){m==="number"&&gi(A.ownerDocument)===A||A.defaultValue===""+v||(A.defaultValue=""+v)}function Nl(A,m,v,C){if(A=A.options,m){m={};for(var U=0;U<v.length;U++)m["$"+v[U]]=!0;for(v=0;v<A.length;v++)U=m.hasOwnProperty("$"+A[v].value),A[v].selected!==U&&(A[v].selected=U),U&&C&&(A[v].defaultSelected=!0)}else{for(v=""+Zs(v),m=null,U=0;U<A.length;U++){if(A[U].value===v){A[U].selected=!0,C&&(A[U].defaultSelected=!0);return}m!==null||A[U].disabled||(m=A[U])}m!==null&&(m.selected=!0)}}function Hn(A,m,v){if(m!=null&&(m=""+Zs(m),m!==A.value&&(A.value=m),v==null)){A.defaultValue!==m&&(A.defaultValue=m);return}A.defaultValue=v!=null?""+Zs(v):""}function Xc(A,m,v,C){if(m==null){if(C!=null){if(v!=null)throw Error(n(92));if(J(C)){if(1<C.length)throw Error(n(93));C=C[0]}v=C}v==null&&(v=""),m=v}v=Zs(m),A.defaultValue=v,C=A.textContent,C===v&&C!==""&&C!==null&&(A.value=C)}function Eo(A,m){if(m){var v=A.firstChild;if(v&&v===A.lastChild&&v.nodeType===3){v.nodeValue=m;return}}A.textContent=m}var ic=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uh(A,m,v){var C=m.indexOf("--")===0;v==null||typeof v=="boolean"||v===""?C?A.setProperty(m,""):m==="float"?A.cssFloat="":A[m]="":C?A.setProperty(m,v):typeof v!="number"||v===0||ic.has(m)?m==="float"?A.cssFloat=v:A[m]=(""+v).trim():A[m]=v+"px"}function df(A,m,v){if(m!=null&&typeof m!="object")throw Error(n(62));if(A=A.style,v!=null){for(var C in v)!v.hasOwnProperty(C)||m!=null&&m.hasOwnProperty(C)||(C.indexOf("--")===0?A.setProperty(C,""):C==="float"?A.cssFloat="":A[C]="");for(var U in m)C=m[U],m.hasOwnProperty(U)&&v[U]!==C&&Uh(A,U,C)}else for(var q in m)m.hasOwnProperty(q)&&Uh(A,q,m[q])}function Af(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function lc(A){return qd.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var Sl=null;function la(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var cc=null,kl=null;function jr(A){var m=je(A);if(m&&(A=m.stateNode)){var v=A[gr]||null;e:switch(A=m.stateNode,m.type){case"input":if(xi(A,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name),m=v.name,v.type==="radio"&&m!=null){for(v=A;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll('input[name="'+Fn(""+m)+'"][type="radio"]'),m=0;m<v.length;m++){var C=v[m];if(C!==A&&C.form===A.form){var U=C[gr]||null;if(!U)throw Error(n(90));xi(C,U.value,U.defaultValue,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name)}}for(m=0;m<v.length;m++)C=v[m],C.form===A.form&&uf(C)}break e;case"textarea":Hn(A,v.value,v.defaultValue);break e;case"select":m=v.value,m!=null&&Nl(A,!!v.multiple,m,!1)}}}var Bl=!1;function Qh(A,m,v){if(Bl)return A(m,v);Bl=!0;try{var C=A(m);return C}finally{if(Bl=!1,(cc!==null||kl!==null)&&($E(),cc&&(m=cc,A=kl,kl=cc=null,jr(m),A)))for(m=0;m<A.length;m++)jr(A[m])}}function Ii(A,m){var v=A.stateNode;if(v===null)return null;var C=v[gr]||null;if(C===null)return null;v=C[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(A=A.type,C=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!C;break e;default:A=!1}if(A)return null;if(v&&typeof v!="function")throw Error(n(231,m,typeof v));return v}var Co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ro=!1;if(Co)try{var Tl={};Object.defineProperty(Tl,"passive",{get:function(){ro=!0}}),window.addEventListener("test",Tl,Tl),window.removeEventListener("test",Tl,Tl)}catch{ro=!1}var _o=null,Yc=null,uc=null;function ff(){if(uc)return uc;var A,m=Yc,v=m.length,C,U="value"in _o?_o.value:_o.textContent,q=U.length;for(A=0;A<v&&m[A]===U[A];A++);var ue=v-A;for(C=1;C<=ue&&m[v-C]===U[q-C];C++);return uc=U.slice(A,1<C?1-C:void 0)}function No(A){var m=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&m===13&&(A=13)):A=m,A===10&&(A=13),32<=A||A===13?A:0}function Fi(){return!0}function jl(){return!1}function ps(A){function m(v,C,U,q,ue){this._reactName=v,this._targetInst=U,this.type=C,this.nativeEvent=q,this.target=ue,this.currentTarget=null;for(var be in A)A.hasOwnProperty(be)&&(v=A[be],this[be]=v?v(q):q[be]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Fi:jl,this.isPropagationStopped=jl,this}return d(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),m}var vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jc=ps(vn),Il=d({},vn,{view:0,detail:0}),hf=ps(Il),Ku,qu,ll,Oi=d({},Il,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ru,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==ll&&(ll&&A.type==="mousemove"?(Ku=A.screenX-ll.screenX,qu=A.screenY-ll.screenY):qu=Ku=0,ll=A),Ku)},movementY:function(A){return"movementY"in A?A.movementY:qu}}),gs=ps(Oi),Hh=d({},Oi,{dataTransfer:0}),Zc=ps(Hh),vi=d({},Il,{relatedTarget:0}),eu=ps(vi),dc=d({},vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Wd=ps(dc),Wu=d({},vn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),Xd=ps(Wu),mf=d({},vn,{data:0}),Xu=ps(mf),tu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ju(A){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(A):(A=Yd[A])?!!m[A]:!1}function ru(){return Ju}var Vh=d({},Il,{key:function(A){if(A.key){var m=tu[A.key]||A.key;if(m!=="Unidentified")return m}return A.type==="keypress"?(A=No(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Yu[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ru,charCode:function(A){return A.type==="keypress"?No(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?No(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Ac=ps(Vh),nu=d({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zu=ps(nu),Di=d({},Il,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ru}),Jd=ps(Di),W=d({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ae=ps(W),Fe=d({},Oi,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=ps(Fe),Ge=d({},vn,{newState:0,oldState:0}),vt=ps(Ge),Lt=[9,13,27,32],Jt=Co&&"CompositionEvent"in window,O=null;Co&&"documentMode"in document&&(O=document.documentMode);var re=Co&&"TextEvent"in window&&!O,oe=Co&&(!Jt||O&&8<O&&11>=O),ve=" ",ze=!1;function ot(A,m){switch(A){case"keyup":return Lt.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var Ir=!1;function bn(A,m){switch(A){case"compositionend":return Ut(m);case"keypress":return m.which!==32?null:(ze=!0,ve);case"textInput":return A=m.data,A===ve&&ze?null:A;default:return null}}function qr(A,m){if(Ir)return A==="compositionend"||!Jt&&ot(A,m)?(A=ff(),uc=Yc=_o=null,Ir=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return oe&&m.locale!=="ko"?null:m.data;default:return null}}var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ea(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m==="input"?!!Vn[A.type]:m==="textarea"}function Fl(A,m,v,C){cc?kl?kl.push(C):kl=[C]:cc=C,m=YE(m,"onChange"),0<m.length&&(v=new Jc("onChange","change",null,v,C),A.push({event:v,listeners:m}))}var es=null,So=null;function au(A){qU(A,0)}function Zd(A){var m=Xe(A);if(uf(m))return A}function zh(A,m){if(A==="change")return m}var pf=!1;if(Co){var Is;if(Co){var eA="oninput"in document;if(!eA){var gf=document.createElement("div");gf.setAttribute("oninput","return;"),eA=typeof gf.oninput=="function"}Is=eA}else Is=!1;pf=Is&&(!document.documentMode||9<document.documentMode)}function xf(){es&&(es.detachEvent("onpropertychange",$h),So=es=null)}function $h(A){if(A.propertyName==="value"&&Zd(So)){var m=[];Fl(m,So,A,la(A)),Qh(au,m)}}function ko(A,m,v){A==="focusin"?(xf(),es=m,So=v,es.attachEvent("onpropertychange",$h)):A==="focusout"&&xf()}function sb(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Zd(So)}function $m(A,m){if(A==="click")return Zd(m)}function Vg(A,m){if(A==="input"||A==="change")return Zd(m)}function Ol(A,m){return A===m&&(A!==0||1/A===1/m)||A!==A&&m!==m}var ei=typeof Object.is=="function"?Object.is:Ol;function tA(A,m){if(ei(A,m))return!0;if(typeof A!="object"||A===null||typeof m!="object"||m===null)return!1;var v=Object.keys(A),C=Object.keys(m);if(v.length!==C.length)return!1;for(C=0;C<v.length;C++){var U=v[C];if(!ne.call(m,U)||!ei(A[U],m[U]))return!1}return!0}function Gm(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function ed(A,m){var v=Gm(A);A=0;for(var C;v;){if(v.nodeType===3){if(C=A+v.textContent.length,A<=m&&C>=m)return{node:v,offset:m-A};A=C}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=Gm(v)}}function rA(A,m){return A&&m?A===m?!0:A&&A.nodeType===3?!1:m&&m.nodeType===3?rA(A,m.parentNode):"contains"in A?A.contains(m):A.compareDocumentPosition?!!(A.compareDocumentPosition(m)&16):!1:!1}function no(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var m=gi(A.document);m instanceof A.HTMLIFrameElement;){try{var v=typeof m.contentWindow.location.href=="string"}catch{v=!1}if(v)A=m.contentWindow;else break;m=gi(A.document)}return m}function bi(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m&&(m==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||m==="textarea"||A.contentEditable==="true")}var nA=Co&&"documentMode"in document&&11>=document.documentMode,Bo=null,fc=null,su=null,hc=!1;function Ga(A,m,v){var C=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;hc||Bo==null||Bo!==gi(C)||(C=Bo,"selectionStart"in C&&bi(C)?C={start:C.selectionStart,end:C.selectionEnd}:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection(),C={anchorNode:C.anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset}),su&&tA(su,C)||(su=C,C=YE(fc,"onSelect"),0<C.length&&(m=new Jc("onSelect","select",null,m,v),A.push({event:m,listeners:C}),m.target=Bo)))}function mc(A,m){var v={};return v[A.toLowerCase()]=m.toLowerCase(),v["Webkit"+A]="webkit"+m,v["Moz"+A]="moz"+m,v}var xs={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionrun:mc("Transition","TransitionRun"),transitionstart:mc("Transition","TransitionStart"),transitioncancel:mc("Transition","TransitionCancel"),transitionend:mc("Transition","TransitionEnd")},To={},vf={};Co&&(vf=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function iu(A){if(To[A])return To[A];if(!xs[A])return A;var m=xs[A],v;for(v in m)if(m.hasOwnProperty(v)&&v in vf)return To[A]=m[v];return A}var Gh=iu("animationend"),aA=iu("animationiteration"),sA=iu("animationstart"),iA=iu("transitionrun"),bf=iu("transitionstart"),Kh=iu("transitioncancel"),oA=iu("transitionend"),td=new Map,yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yf.push("scrollEnd");function Ka(A,m){td.set(A,m),Ft(m,[A])}var cl=new WeakMap;function hn(A,m){if(typeof A=="object"&&A!==null){var v=cl.get(A);return v!==void 0?v:(m={value:A,source:m,stack:xa(m)},cl.set(A,m),m)}return{value:A,source:m,stack:xa(m)}}var mn=[],va=0,ts=0;function Dl(){for(var A=va,m=ts=va=0;m<A;){var v=mn[m];mn[m++]=null;var C=mn[m];mn[m++]=null;var U=mn[m];mn[m++]=null;var q=mn[m];if(mn[m++]=null,C!==null&&U!==null){var ue=C.pending;ue===null?U.next=U:(U.next=ue.next,ue.next=U),C.pending=U}q!==0&&zg(v,U,q)}}function lA(A,m,v,C){mn[va++]=A,mn[va++]=m,mn[va++]=v,mn[va++]=C,ts|=C,A.lanes|=C,A=A.alternate,A!==null&&(A.lanes|=C)}function cA(A,m,v,C){return lA(A,m,v,C),wf(A)}function rd(A,m){return lA(A,null,null,m),wf(A)}function zg(A,m,v){A.lanes|=v;var C=A.alternate;C!==null&&(C.lanes|=v);for(var U=!1,q=A.return;q!==null;)q.childLanes|=v,C=q.alternate,C!==null&&(C.childLanes|=v),q.tag===22&&(A=q.stateNode,A===null||A._visibility&1||(U=!0)),A=q,q=q.return;return A.tag===3?(q=A.stateNode,U&&m!==null&&(U=31-Pt(v),A=q.hiddenUpdates,C=A[U],C===null?A[U]=[m]:C.push(m),m.lane=v|536870912),q):null}function wf(A){if(50<Tb)throw Tb=0,jB=null,Error(n(185));for(var m=A.return;m!==null;)A=m,m=A.return;return A.tag===3?A.stateNode:null}var ti={};function Pl(A,m,v,C){this.tag=A,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(A,m,v,C){return new Pl(A,m,v,C)}function qh(A){return A=A.prototype,!(!A||!A.isReactComponent)}function ou(A,m){var v=A.alternate;return v===null?(v=Pi(A.tag,m,A.key,A.mode),v.elementType=A.elementType,v.type=A.type,v.stateNode=A.stateNode,v.alternate=A,A.alternate=v):(v.pendingProps=m,v.type=A.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=A.flags&65011712,v.childLanes=A.childLanes,v.lanes=A.lanes,v.child=A.child,v.memoizedProps=A.memoizedProps,v.memoizedState=A.memoizedState,v.updateQueue=A.updateQueue,m=A.dependencies,v.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},v.sibling=A.sibling,v.index=A.index,v.ref=A.ref,v.refCleanup=A.refCleanup,v}function Km(A,m){A.flags&=65011714;var v=A.alternate;return v===null?(A.childLanes=0,A.lanes=m,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=v.childLanes,A.lanes=v.lanes,A.child=v.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=v.memoizedProps,A.memoizedState=v.memoizedState,A.updateQueue=v.updateQueue,A.type=v.type,m=v.dependencies,A.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),A}function Ef(A,m,v,C,U,q){var ue=0;if(C=A,typeof A=="function")qh(A)&&(ue=1);else if(typeof A=="string")ue=sfe(A,v,Y.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case B:return A=Pi(31,v,m,U),A.elementType=B,A.lanes=q,A;case g:return nd(v.children,U,q,m);case x:ue=8,U|=24;break;case b:return A=Pi(12,v,m,U|2),A.elementType=b,A.lanes=q,A;case k:return A=Pi(13,v,m,U),A.elementType=k,A.lanes=q,A;case I:return A=Pi(19,v,m,U),A.elementType=I,A.lanes=q,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case _:ue=10;break e;case w:ue=9;break e;case j:ue=11;break e;case E:ue=14;break e;case N:ue=16,C=null;break e}ue=29,v=Error(n(130,A===null?"null":typeof A,"")),C=null}return m=Pi(ue,v,m,U),m.elementType=A,m.type=C,m.lanes=q,m}function nd(A,m,v,C){return A=Pi(7,A,C,m),A.lanes=v,A}function $g(A,m,v){return A=Pi(6,A,null,m),A.lanes=v,A}function qm(A,m,v){return m=Pi(4,A.children!==null?A.children:[],A.key,m),m.lanes=v,m.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},m}var uA=[],ad=0,Wh=null,Gg=0,Rl=[],ul=0,Cf=null,sd=1,id="";function _f(A,m){uA[ad++]=Gg,uA[ad++]=Wh,Wh=A,Gg=m}function mE(A,m,v){Rl[ul++]=sd,Rl[ul++]=id,Rl[ul++]=Cf,Cf=A;var C=sd;A=id;var U=32-Pt(C)-1;C&=~(1<<U),v+=1;var q=32-Pt(m)+U;if(30<q){var ue=U-U%5;q=(C&(1<<ue)-1).toString(32),C>>=ue,U-=ue,sd=1<<32-Pt(m)+U|v<<U|C,id=q+A}else sd=1<<q|v<<U|C,id=A}function Wm(A){A.return!==null&&(_f(A,1),mE(A,1,0))}function Xm(A){for(;A===Wh;)Wh=uA[--ad],uA[ad]=null,Gg=uA[--ad],uA[ad]=null;for(;A===Cf;)Cf=Rl[--ul],Rl[ul]=null,id=Rl[--ul],Rl[ul]=null,sd=Rl[--ul],Rl[ul]=null}var Fs=null,qa=null,Mn=!1,dA=null,lu=!1,ib=Error(n(519));function Nf(A){var m=Error(n(418,""));throw Xh(hn(m,A)),ib}function pE(A){var m=A.stateNode,v=A.type,C=A.memoizedProps;switch(m[nr]=A,m[gr]=C,v){case"dialog":_n("cancel",m),_n("close",m);break;case"iframe":case"object":case"embed":_n("load",m);break;case"video":case"audio":for(v=0;v<Ib.length;v++)_n(Ib[v],m);break;case"source":_n("error",m);break;case"img":case"image":case"link":_n("error",m),_n("load",m);break;case"details":_n("toggle",m);break;case"input":_n("invalid",m),qc(m,C.value,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name,!0),Kc(m);break;case"select":_n("invalid",m);break;case"textarea":_n("invalid",m),Xc(m,C.value,C.defaultValue,C.children),Kc(m)}v=C.children,typeof v!="string"&&typeof v!="number"&&typeof v!="bigint"||m.textContent===""+v||C.suppressHydrationWarning===!0||JU(m.textContent,v)?(C.popover!=null&&(_n("beforetoggle",m),_n("toggle",m)),C.onScroll!=null&&_n("scroll",m),C.onScrollEnd!=null&&_n("scrollend",m),C.onClick!=null&&(m.onclick=JE),m=!0):m=!1,m||Nf(A)}function od(A){for(Fs=A.return;Fs;)switch(Fs.tag){case 5:case 13:lu=!1;return;case 27:case 3:lu=!0;return;default:Fs=Fs.return}}function ao(A){if(A!==Fs)return!1;if(!Mn)return od(A),Mn=!0,!1;var m=A.tag,v;if((v=m!==3&&m!==27)&&((v=m===5)&&(v=A.type,v=!(v!=="form"&&v!=="button")||KB(A.type,A.memoizedProps)),v=!v),v&&qa&&Nf(A),od(A),m===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,m=0;A;){if(A.nodeType===8)if(v=A.data,v==="/$"){if(m===0){qa=md(A.nextSibling);break e}m--}else v!=="$"&&v!=="$!"&&v!=="$?"||m++;A=A.nextSibling}qa=null}}else m===27?(m=qa,f0(A.type)?(A=YB,YB=null,qa=A):qa=m):qa=Fs?md(A.stateNode.nextSibling):null;return!0}function dl(){qa=Fs=null,Mn=!1}function gE(){var A=dA;return A!==null&&(Ul===null?Ul=A:Ul.push.apply(Ul,A),dA=null),A}function Xh(A){dA===null?dA=[A]:dA.push(A)}var cu=ee(null),ri=null,ld=null;function AA(A,m,v){z(cu,m._currentValue),m._currentValue=v}function uu(A){A._currentValue=cu.current,F(cu)}function Kg(A,m,v){for(;A!==null;){var C=A.alternate;if((A.childLanes&m)!==m?(A.childLanes|=m,C!==null&&(C.childLanes|=m)):C!==null&&(C.childLanes&m)!==m&&(C.childLanes|=m),A===v)break;A=A.return}}function qg(A,m,v,C){var U=A.child;for(U!==null&&(U.return=A);U!==null;){var q=U.dependencies;if(q!==null){var ue=U.child;q=q.firstContext;e:for(;q!==null;){var be=q;q=U;for(var Pe=0;Pe<m.length;Pe++)if(be.context===m[Pe]){q.lanes|=v,be=q.alternate,be!==null&&(be.lanes|=v),Kg(q.return,v,A),C||(ue=null);break e}q=be.next}}else if(U.tag===18){if(ue=U.return,ue===null)throw Error(n(341));ue.lanes|=v,q=ue.alternate,q!==null&&(q.lanes|=v),Kg(ue,v,A),ue=null}else ue=U.child;if(ue!==null)ue.return=U;else for(ue=U;ue!==null;){if(ue===A){ue=null;break}if(U=ue.sibling,U!==null){U.return=ue.return,ue=U;break}ue=ue.return}U=ue}}function Yh(A,m,v,C){A=null;for(var U=m,q=!1;U!==null;){if(!q){if((U.flags&524288)!==0)q=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var ue=U.alternate;if(ue===null)throw Error(n(387));if(ue=ue.memoizedProps,ue!==null){var be=U.type;ei(U.pendingProps.value,ue.value)||(A!==null?A.push(be):A=[be])}}else if(U===le.current){if(ue=U.alternate,ue===null)throw Error(n(387));ue.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(A!==null?A.push(Lb):A=[Lb])}U=U.return}A!==null&&qg(m,A,v,C),m.flags|=262144}function Wg(A){for(A=A.firstContext;A!==null;){if(!ei(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function du(A){ri=A,ld=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Os(A){return Xg(ri,A)}function fA(A,m){return ri===null&&du(A),Xg(A,m)}function Xg(A,m){var v=m._currentValue;if(m={context:m,memoizedValue:v,next:null},ld===null){if(A===null)throw Error(n(308));ld=m,A.dependencies={lanes:0,firstContext:m},A.flags|=524288}else ld=ld.next=m;return v}var rB=typeof AbortController<"u"?AbortController:function(){var A=[],m=this.signal={aborted:!1,addEventListener:function(v,C){A.push(C)}};this.abort=function(){m.aborted=!0,A.forEach(function(v){return v()})}},xE=e.unstable_scheduleCallback,nB=e.unstable_NormalPriority,Ds={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ob(){return{controller:new rB,data:new Map,refCount:0}}function Ym(A){A.refCount--,A.refCount===0&&xE(nB,function(){A.controller.abort()})}var Jm=null,lb=0,Sf=0,cd=null;function aB(A,m){if(Jm===null){var v=Jm=[];lb=0,Sf=LB(),cd={status:"pending",value:void 0,then:function(C){v.push(C)}}}return lb++,m.then(vE,vE),m}function vE(){if(--lb===0&&Jm!==null){cd!==null&&(cd.status="fulfilled");var A=Jm;Jm=null,Sf=0,cd=null;for(var m=0;m<A.length;m++)(0,A[m])()}}function bE(A,m){var v=[],C={status:"pending",value:null,reason:null,then:function(U){v.push(U)}};return A.then(function(){C.status="fulfilled",C.value=m;for(var U=0;U<v.length;U++)(0,v[U])(m)},function(U){for(C.status="rejected",C.reason=U,U=0;U<v.length;U++)(0,v[U])(void 0)}),C}var T=H.S;H.S=function(A,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&aB(A,m),T!==null&&T(A,m)};var Q=ee(null);function Z(){var A=Q.current;return A!==null?A:ja.pooledCache}function se(A,m){m===null?z(Q,Q.current):z(Q,m.pool)}function de(){var A=Z();return A===null?null:{parent:Ds._currentValue,pool:A}}var me=Error(n(460)),ge=Error(n(474)),xe=Error(n(542)),Ee={then:function(){}};function ke(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Me(){}function st(A,m,v){switch(v=A[v],v===void 0?A.push(m):v!==m&&(m.then(Me,Me),m=v),m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Tt(A),A;default:if(typeof m.status=="string")m.then(Me,Me);else{if(A=ja,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=m,A.status="pending",A.then(function(C){if(m.status==="pending"){var U=m;U.status="fulfilled",U.value=C}},function(C){if(m.status==="pending"){var U=m;U.status="rejected",U.reason=C}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,Tt(A),A}throw tt=m,me}}var tt=null;function Ke(){if(tt===null)throw Error(n(459));var A=tt;return tt=null,A}function Tt(A){if(A===me||A===xe)throw Error(n(483))}var mt=!1;function Qe(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,m){A=A.updateQueue,m.updateQueue===A&&(m.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function _t(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function jt(A,m,v){var C=A.updateQueue;if(C===null)return null;if(C=C.shared,(ua&2)!==0){var U=C.pending;return U===null?m.next=m:(m.next=U.next,U.next=m),C.pending=m,m=wf(A),zg(A,null,v),m}return lA(A,C,m,v),wf(A)}function kt(A,m,v){if(m=m.updateQueue,m!==null&&(m=m.shared,(v&4194048)!==0)){var C=m.lanes;C&=A.pendingLanes,v|=C,m.lanes=v,et(A,v)}}function rr(A,m){var v=A.updateQueue,C=A.alternate;if(C!==null&&(C=C.updateQueue,v===C)){var U=null,q=null;if(v=v.firstBaseUpdate,v!==null){do{var ue={lane:v.lane,tag:v.tag,payload:v.payload,callback:null,next:null};q===null?U=q=ue:q=q.next=ue,v=v.next}while(v!==null);q===null?U=q=m:q=q.next=m}else U=q=m;v={baseState:C.baseState,firstBaseUpdate:U,lastBaseUpdate:q,shared:C.shared,callbacks:C.callbacks},A.updateQueue=v;return}A=v.lastBaseUpdate,A===null?v.firstBaseUpdate=m:A.next=m,v.lastBaseUpdate=m}var Xt=!1;function xr(){if(Xt){var A=cd;if(A!==null)throw A}}function Zt(A,m,v,C){Xt=!1;var U=A.updateQueue;mt=!1;var q=U.firstBaseUpdate,ue=U.lastBaseUpdate,be=U.shared.pending;if(be!==null){U.shared.pending=null;var Pe=be,lt=Pe.next;Pe.next=null,ue===null?q=lt:ue.next=lt,ue=Pe;var St=A.alternate;St!==null&&(St=St.updateQueue,be=St.lastBaseUpdate,be!==ue&&(be===null?St.firstBaseUpdate=lt:be.next=lt,St.lastBaseUpdate=Pe))}if(q!==null){var Ot=U.baseState;ue=0,St=lt=Pe=null,be=q;do{var At=be.lane&-536870913,ht=At!==be.lane;if(ht?(Rn&At)===At:(C&At)===At){At!==0&&At===Sf&&(Xt=!0),St!==null&&(St=St.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var zr=A,Fr=be;At=m;var ya=v;switch(Fr.tag){case 1:if(zr=Fr.payload,typeof zr=="function"){Ot=zr.call(ya,Ot,At);break e}Ot=zr;break e;case 3:zr.flags=zr.flags&-65537|128;case 0:if(zr=Fr.payload,At=typeof zr=="function"?zr.call(ya,Ot,At):zr,At==null)break e;Ot=d({},Ot,At);break e;case 2:mt=!0}}At=be.callback,At!==null&&(A.flags|=64,ht&&(A.flags|=8192),ht=U.callbacks,ht===null?U.callbacks=[At]:ht.push(At))}else ht={lane:At,tag:be.tag,payload:be.payload,callback:be.callback,next:null},St===null?(lt=St=ht,Pe=Ot):St=St.next=ht,ue|=At;if(be=be.next,be===null){if(be=U.shared.pending,be===null)break;ht=be,be=ht.next,ht.next=null,U.lastBaseUpdate=ht,U.shared.pending=null}}while(!0);St===null&&(Pe=Ot),U.baseState=Pe,U.firstBaseUpdate=lt,U.lastBaseUpdate=St,q===null&&(U.shared.lanes=0),c0|=ue,A.lanes=ue,A.memoizedState=Ot}}function Dn(A,m){if(typeof A!="function")throw Error(n(191,A));A.call(m)}function zn(A,m){var v=A.callbacks;if(v!==null)for(A.callbacks=null,A=0;A<v.length;A++)Dn(v[A],m)}var An=ee(null),on=ee(0);function ta(A,m){A=Rf,z(on,A),z(An,m),Rf=A|m.baseLanes}function $n(){z(on,Rf),z(An,An.current)}function Wr(){Rf=on.current,F(An),F(on)}var ca=0,kr=null,Lr=null,On=null,Pn=!1,ni=!1,Ps=!1,rs=0,ns=0,vs=null,Ll=0;function Gn(){throw Error(n(321))}function bs(A,m){if(m===null)return!1;for(var v=0;v<m.length&&v<A.length;v++)if(!ei(A[v],m[v]))return!1;return!0}function pc(A,m,v,C,U,q){return ca=q,kr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,H.H=A===null||A.memoizedState===null?IM:FM,Ps=!1,q=v(C,U),Ps=!1,ni&&(q=kf(m,v,C,U)),hA(A),q}function hA(A){H.H=IE;var m=Lr!==null&&Lr.next!==null;if(ca=0,On=Lr=kr=null,Pn=!1,ns=0,vs=null,m)throw Error(n(300));A===null||Ri||(A=A.dependencies,A!==null&&Wg(A)&&(Ri=!0))}function kf(A,m,v,C){kr=A;var U=0;do{if(ni&&(vs=null),ns=0,ni=!1,25<=U)throw Error(n(301));if(U+=1,On=Lr=null,A.updateQueue!=null){var q=A.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}H.H=pAe,q=m(v,C)}while(ni);return q}function mA(){var A=H.H,m=A.useState()[0];return m=typeof m.then=="function"?pA(m):m,A=A.useState()[0],(Lr!==null?Lr.memoizedState:null)!==A&&(kr.flags|=1024),m}function Ta(){var A=rs!==0;return rs=0,A}function Zm(A,m,v){m.updateQueue=A.updateQueue,m.flags&=-2053,A.lanes&=~v}function Yg(A){if(Pn){for(A=A.memoizedState;A!==null;){var m=A.queue;m!==null&&(m.pending=null),A=A.next}Pn=!1}ca=0,On=Lr=kr=null,ni=!1,ns=rs=0,vs=null}function so(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?kr.memoizedState=On=A:On=On.next=A,On}function Ra(){if(Lr===null){var A=kr.alternate;A=A!==null?A.memoizedState:null}else A=Lr.next;var m=On===null?kr.memoizedState:On.next;if(m!==null)On=m,Lr=A;else{if(A===null)throw kr.alternate===null?Error(n(467)):Error(n(310));Lr=A,A={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},On===null?kr.memoizedState=On=A:On=On.next=A}return On}function Bf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pA(A){var m=ns;return ns+=1,vs===null&&(vs=[]),A=st(vs,A,m),m=kr,(On===null?m.memoizedState:On.next)===null&&(m=m.alternate,H.H=m===null||m.memoizedState===null?IM:FM),A}function jo(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return pA(A);if(A.$$typeof===_)return Os(A)}throw Error(n(438,String(A)))}function gA(A){var m=null,v=kr.updateQueue;if(v!==null&&(m=v.memoCache),m==null){var C=kr.alternate;C!==null&&(C=C.updateQueue,C!==null&&(C=C.memoCache,C!=null&&(m={data:C.data.map(function(U){return U.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),v===null&&(v=Bf(),kr.updateQueue=v),v.memoCache=m,v=m.data[m.index],v===void 0)for(v=m.data[m.index]=Array(A),C=0;C<A;C++)v[C]=R;return m.index++,v}function Io(A,m){return typeof m=="function"?m(A):m}function ep(A){var m=Ra();return Jh(m,Lr,A)}function Jh(A,m,v){var C=A.queue;if(C===null)throw Error(n(311));C.lastRenderedReducer=v;var U=A.baseQueue,q=C.pending;if(q!==null){if(U!==null){var ue=U.next;U.next=q.next,q.next=ue}m.baseQueue=U=q,C.pending=null}if(q=A.baseState,U===null)A.memoizedState=q;else{m=U.next;var be=ue=null,Pe=null,lt=m,St=!1;do{var Ot=lt.lane&-536870913;if(Ot!==lt.lane?(Rn&Ot)===Ot:(ca&Ot)===Ot){var At=lt.revertLane;if(At===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Ot===Sf&&(St=!0);else if((ca&At)===At){lt=lt.next,At===Sf&&(St=!0);continue}else Ot={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Pe===null?(be=Pe=Ot,ue=q):Pe=Pe.next=Ot,kr.lanes|=At,c0|=At;Ot=lt.action,Ps&&v(q,Ot),q=lt.hasEagerState?lt.eagerState:v(q,Ot)}else At={lane:Ot,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Pe===null?(be=Pe=At,ue=q):Pe=Pe.next=At,kr.lanes|=Ot,c0|=Ot;lt=lt.next}while(lt!==null&&lt!==m);if(Pe===null?ue=q:Pe.next=be,!ei(q,A.memoizedState)&&(Ri=!0,St&&(v=cd,v!==null)))throw v;A.memoizedState=q,A.baseState=ue,A.baseQueue=Pe,C.lastRenderedState=q}return U===null&&(C.lanes=0),[A.memoizedState,C.dispatch]}function Jg(A){var m=Ra(),v=m.queue;if(v===null)throw Error(n(311));v.lastRenderedReducer=A;var C=v.dispatch,U=v.pending,q=m.memoizedState;if(U!==null){v.pending=null;var ue=U=U.next;do q=A(q,ue.action),ue=ue.next;while(ue!==U);ei(q,m.memoizedState)||(Ri=!0),m.memoizedState=q,m.baseQueue===null&&(m.baseState=q),v.lastRenderedState=q}return[q,C]}function tp(A,m,v){var C=kr,U=Ra(),q=Mn;if(q){if(v===void 0)throw Error(n(407));v=v()}else v=m();var ue=!ei((Lr||U).memoizedState,v);ue&&(U.memoizedState=v,Ri=!0),U=U.queue;var be=Zh.bind(null,C,U,A);if(r0(2048,8,be,[A]),U.getSnapshot!==m||ue||On!==null&&On.memoizedState.tag&1){if(C.flags|=2048,dd(9,sp(),rp.bind(null,C,U,v,m),null),ja===null)throw Error(n(349));q||(ca&124)!==0||Zg(C,m,v)}return v}function Zg(A,m,v){A.flags|=16384,A={getSnapshot:m,value:v},m=kr.updateQueue,m===null?(m=Bf(),kr.updateQueue=m,m.stores=[A]):(v=m.stores,v===null?m.stores=[A]:v.push(A))}function rp(A,m,v,C){m.value=v,m.getSnapshot=C,yE(m)&&wE(A)}function Zh(A,m,v){return v(function(){yE(m)&&wE(A)})}function yE(A){var m=A.getSnapshot;A=A.value;try{var v=m();return!ei(A,v)}catch{return!0}}function wE(A){var m=rd(A,2);m!==null&&wc(m,A,2)}function np(A){var m=so();if(typeof A=="function"){var v=A;if(A=v(),Ps){Mt(!0);try{v()}finally{Mt(!1)}}}return m.memoizedState=m.baseState=A,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:A},m}function ud(A,m,v,C){return A.baseState=v,Jh(A,Lr,typeof C=="function"?C:Io)}function sB(A,m,v,C,U){if(jE(A))throw Error(n(485));if(A=m.action,A!==null){var q={payload:U,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ue){q.listeners.push(ue)}};H.T!==null?v(!0):q.isTransition=!1,C(q),v=m.pending,v===null?(q.next=m.pending=q,EE(m,q)):(q.next=v.next,m.pending=v.next=q)}}function EE(A,m){var v=m.action,C=m.payload,U=A.state;if(m.isTransition){var q=H.T,ue={};H.T=ue;try{var be=v(U,C),Pe=H.S;Pe!==null&&Pe(ue,be),CE(A,m,be)}catch(lt){e0(A,m,lt)}finally{H.T=q}}else try{q=v(U,C),CE(A,m,q)}catch(lt){e0(A,m,lt)}}function CE(A,m,v){v!==null&&typeof v=="object"&&typeof v.then=="function"?v.then(function(C){cb(A,m,C)},function(C){return e0(A,m,C)}):cb(A,m,v)}function cb(A,m,v){m.status="fulfilled",m.value=v,ub(m),A.state=v,m=A.pending,m!==null&&(v=m.next,v===m?A.pending=null:(v=v.next,m.next=v,EE(A,v)))}function e0(A,m,v){var C=A.pending;if(A.pending=null,C!==null){C=C.next;do m.status="rejected",m.reason=v,ub(m),m=m.next;while(m!==C)}A.action=null}function ub(A){A=A.listeners;for(var m=0;m<A.length;m++)(0,A[m])()}function db(A,m){return m}function ap(A,m){if(Mn){var v=ja.formState;if(v!==null){e:{var C=kr;if(Mn){if(qa){t:{for(var U=qa,q=lu;U.nodeType!==8;){if(!q){U=null;break t}if(U=md(U.nextSibling),U===null){U=null;break t}}q=U.data,U=q==="F!"||q==="F"?U:null}if(U){qa=md(U.nextSibling),C=U.data==="F!";break e}}Nf(C)}C=!1}C&&(m=v[0])}}return v=so(),v.memoizedState=v.baseState=m,C={pending:null,lanes:0,dispatch:null,lastRenderedReducer:db,lastRenderedState:m},v.queue=C,v=BM.bind(null,kr,C),C.dispatch=v,C=np(!1),q=iB.bind(null,kr,!1,C.queue),C=so(),U={state:m,dispatch:null,action:A,pending:null},C.queue=U,v=sB.bind(null,kr,U,q,v),U.dispatch=v,C.memoizedState=A,[m,v,!1]}function ex(A){var m=Ra();return t0(m,Lr,A)}function t0(A,m,v){if(m=Jh(A,m,db)[0],A=ep(Io)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var C=pA(m)}catch(ue){throw ue===me?xe:ue}else C=m;m=Ra();var U=m.queue,q=U.dispatch;return v!==m.memoizedState&&(kr.flags|=2048,dd(9,sp(),_E.bind(null,U,v),null)),[C,q,A]}function _E(A,m){A.action=m}function NE(A){var m=Ra(),v=Lr;if(v!==null)return t0(m,v,A);Ra(),m=m.memoizedState,v=Ra();var C=v.queue.dispatch;return v.memoizedState=A,[m,C,!1]}function dd(A,m,v,C){return A={tag:A,create:v,deps:C,inst:m,next:null},m=kr.updateQueue,m===null&&(m=Bf(),kr.updateQueue=m),v=m.lastEffect,v===null?m.lastEffect=A.next=A:(C=v.next,v.next=A,A.next=C,m.lastEffect=A),A}function sp(){return{destroy:void 0,resource:void 0}}function tx(){return Ra().memoizedState}function gc(A,m,v,C){var U=so();C=C===void 0?null:C,kr.flags|=A,U.memoizedState=dd(1|m,sp(),v,C)}function r0(A,m,v,C){var U=Ra();C=C===void 0?null:C;var q=U.memoizedState.inst;Lr!==null&&C!==null&&bs(C,Lr.memoizedState.deps)?U.memoizedState=dd(m,q,v,C):(kr.flags|=A,U.memoizedState=dd(1|m,q,v,C))}function Ab(A,m){gc(8390656,8,A,m)}function SE(A,m){r0(2048,8,A,m)}function fb(A,m){return r0(4,2,A,m)}function Tf(A,m){return r0(4,4,A,m)}function kE(A,m){if(typeof m=="function"){A=A();var v=m(A);return function(){typeof v=="function"?v():m(null)}}if(m!=null)return A=A(),m.current=A,function(){m.current=null}}function hb(A,m,v){v=v!=null?v.concat([A]):null,r0(4,4,kE.bind(null,m,A),v)}function mb(){}function pb(A,m){var v=Ra();m=m===void 0?null:m;var C=v.memoizedState;return m!==null&&bs(m,C[1])?C[0]:(v.memoizedState=[A,m],A)}function BE(A,m){var v=Ra();m=m===void 0?null:m;var C=v.memoizedState;if(m!==null&&bs(m,C[1]))return C[0];if(C=A(),Ps){Mt(!0);try{A()}finally{Mt(!1)}}return v.memoizedState=[C,m],C}function jf(A,m,v){return v===void 0||(ca&1073741824)!==0?A.memoizedState=m:(A.memoizedState=v,A=_U(),kr.lanes|=A,c0|=A,v)}function rx(A,m,v,C){return ei(v,m)?v:An.current!==null?(A=jf(A,v,C),ei(A,m)||(Ri=!0),A):(ca&42)===0?(Ri=!0,A.memoizedState=v):(A=_U(),kr.lanes|=A,c0|=A,m)}function ip(A,m,v,C,U){var q=K.p;K.p=q!==0&&8>q?q:8;var ue=H.T,be={};H.T=be,iB(A,!1,m,v);try{var Pe=U(),lt=H.S;if(lt!==null&&lt(be,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var St=bE(Pe,C);bb(A,m,St,yc(A))}else bb(A,m,C,yc(A))}catch(Ot){bb(A,m,{then:function(){},status:"rejected",reason:Ot},yc())}finally{K.p=q,H.T=ue}}function Ad(){}function Au(A,m,v,C){if(A.tag!==5)throw Error(n(476));var U=fd(A).queue;ip(A,U,m,V,v===null?Ad:function(){return op(A),v(C)})}function fd(A){var m=A.memoizedState;if(m!==null)return m;m={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:V},next:null};var v={};return m.next={memoizedState:v,baseState:v,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:v},next:null},A.memoizedState=m,A=A.alternate,A!==null&&(A.memoizedState=m),m}function op(A){var m=fd(A).next.queue;bb(A,m,{},yc())}function lp(){return Os(Lb)}function gb(){return Ra().memoizedState}function TE(){return Ra().memoizedState}function xb(A){for(var m=A.return;m!==null;){switch(m.tag){case 24:case 3:var v=yc();A=_t(v);var C=jt(m,A,v);C!==null&&(wc(C,m,v),kt(C,m,v)),m={cache:ob()},A.payload=m;return}m=m.return}}function vb(A,m,v){var C=yc();v={lane:C,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null},jE(A)?TM(m,v):(v=cA(A,m,v,C),v!==null&&(wc(v,A,C),jM(v,m,C)))}function BM(A,m,v){var C=yc();bb(A,m,v,C)}function bb(A,m,v,C){var U={lane:C,revertLane:0,action:v,hasEagerState:!1,eagerState:null,next:null};if(jE(A))TM(m,U);else{var q=A.alternate;if(A.lanes===0&&(q===null||q.lanes===0)&&(q=m.lastRenderedReducer,q!==null))try{var ue=m.lastRenderedState,be=q(ue,v);if(U.hasEagerState=!0,U.eagerState=be,ei(be,ue))return lA(A,m,U,0),ja===null&&Dl(),!1}catch{}finally{}if(v=cA(A,m,U,C),v!==null)return wc(v,A,C),jM(v,m,C),!0}return!1}function iB(A,m,v,C){if(C={lane:2,revertLane:LB(),action:C,hasEagerState:!1,eagerState:null,next:null},jE(A)){if(m)throw Error(n(479))}else m=cA(A,v,C,2),m!==null&&wc(m,A,2)}function jE(A){var m=A.alternate;return A===kr||m!==null&&m===kr}function TM(A,m){ni=Pn=!0;var v=A.pending;v===null?m.next=m:(m.next=v.next,v.next=m),A.pending=m}function jM(A,m,v){if((v&4194048)!==0){var C=m.lanes;C&=A.pendingLanes,v|=C,m.lanes=v,et(A,v)}}var IE={readContext:Os,use:jo,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useLayoutEffect:Gn,useInsertionEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useSyncExternalStore:Gn,useId:Gn,useHostTransitionStatus:Gn,useFormState:Gn,useActionState:Gn,useOptimistic:Gn,useMemoCache:Gn,useCacheRefresh:Gn},IM={readContext:Os,use:jo,useCallback:function(A,m){return so().memoizedState=[A,m===void 0?null:m],A},useContext:Os,useEffect:Ab,useImperativeHandle:function(A,m,v){v=v!=null?v.concat([A]):null,gc(4194308,4,kE.bind(null,m,A),v)},useLayoutEffect:function(A,m){return gc(4194308,4,A,m)},useInsertionEffect:function(A,m){gc(4,2,A,m)},useMemo:function(A,m){var v=so();m=m===void 0?null:m;var C=A();if(Ps){Mt(!0);try{A()}finally{Mt(!1)}}return v.memoizedState=[C,m],C},useReducer:function(A,m,v){var C=so();if(v!==void 0){var U=v(m);if(Ps){Mt(!0);try{v(m)}finally{Mt(!1)}}}else U=m;return C.memoizedState=C.baseState=U,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:U},C.queue=A,A=A.dispatch=vb.bind(null,kr,A),[C.memoizedState,A]},useRef:function(A){var m=so();return A={current:A},m.memoizedState=A},useState:function(A){A=np(A);var m=A.queue,v=BM.bind(null,kr,m);return m.dispatch=v,[A.memoizedState,v]},useDebugValue:mb,useDeferredValue:function(A,m){var v=so();return jf(v,A,m)},useTransition:function(){var A=np(!1);return A=ip.bind(null,kr,A.queue,!0,!1),so().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,m,v){var C=kr,U=so();if(Mn){if(v===void 0)throw Error(n(407));v=v()}else{if(v=m(),ja===null)throw Error(n(349));(Rn&124)!==0||Zg(C,m,v)}U.memoizedState=v;var q={value:v,getSnapshot:m};return U.queue=q,Ab(Zh.bind(null,C,q,A),[A]),C.flags|=2048,dd(9,sp(),rp.bind(null,C,q,v,m),null),v},useId:function(){var A=so(),m=ja.identifierPrefix;if(Mn){var v=id,C=sd;v=(C&~(1<<32-Pt(C)-1)).toString(32)+v,m=""+m+"R"+v,v=rs++,0<v&&(m+="H"+v.toString(32)),m+=""}else v=Ll++,m=""+m+"r"+v.toString(32)+"";return A.memoizedState=m},useHostTransitionStatus:lp,useFormState:ap,useActionState:ap,useOptimistic:function(A){var m=so();m.memoizedState=m.baseState=A;var v={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=v,m=iB.bind(null,kr,!0,v),v.dispatch=m,[A,m]},useMemoCache:gA,useCacheRefresh:function(){return so().memoizedState=xb.bind(null,kr)}},FM={readContext:Os,use:jo,useCallback:pb,useContext:Os,useEffect:SE,useImperativeHandle:hb,useInsertionEffect:fb,useLayoutEffect:Tf,useMemo:BE,useReducer:ep,useRef:tx,useState:function(){return ep(Io)},useDebugValue:mb,useDeferredValue:function(A,m){var v=Ra();return rx(v,Lr.memoizedState,A,m)},useTransition:function(){var A=ep(Io)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:pA(A),m]},useSyncExternalStore:tp,useId:gb,useHostTransitionStatus:lp,useFormState:ex,useActionState:ex,useOptimistic:function(A,m){var v=Ra();return ud(v,Lr,A,m)},useMemoCache:gA,useCacheRefresh:TE},pAe={readContext:Os,use:jo,useCallback:pb,useContext:Os,useEffect:SE,useImperativeHandle:hb,useInsertionEffect:fb,useLayoutEffect:Tf,useMemo:BE,useReducer:Jg,useRef:tx,useState:function(){return Jg(Io)},useDebugValue:mb,useDeferredValue:function(A,m){var v=Ra();return Lr===null?jf(v,A,m):rx(v,Lr.memoizedState,A,m)},useTransition:function(){var A=Jg(Io)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:pA(A),m]},useSyncExternalStore:tp,useId:gb,useHostTransitionStatus:lp,useFormState:NE,useActionState:NE,useOptimistic:function(A,m){var v=Ra();return Lr!==null?ud(v,Lr,A,m):(v.baseState=A,[A,v.queue.dispatch])},useMemoCache:gA,useCacheRefresh:TE},nx=null,yb=0;function FE(A){var m=yb;return yb+=1,nx===null&&(nx=[]),st(nx,A,m)}function wb(A,m){m=m.props.ref,A.ref=m!==void 0?m:null}function OE(A,m){throw m.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(m),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":A)))}function OM(A){var m=A._init;return m(A._payload)}function DM(A){function m(We,He){if(A){var at=We.deletions;at===null?(We.deletions=[He],We.flags|=16):at.push(He)}}function v(We,He){if(!A)return null;for(;He!==null;)m(We,He),He=He.sibling;return null}function C(We){for(var He=new Map;We!==null;)We.key!==null?He.set(We.key,We):He.set(We.index,We),We=We.sibling;return He}function U(We,He){return We=ou(We,He),We.index=0,We.sibling=null,We}function q(We,He,at){return We.index=at,A?(at=We.alternate,at!==null?(at=at.index,at<He?(We.flags|=67108866,He):at):(We.flags|=67108866,He)):(We.flags|=1048576,He)}function ue(We){return A&&We.alternate===null&&(We.flags|=67108866),We}function be(We,He,at,Bt){return He===null||He.tag!==6?(He=$g(at,We.mode,Bt),He.return=We,He):(He=U(He,at),He.return=We,He)}function Pe(We,He,at,Bt){var fr=at.type;return fr===g?St(We,He,at.props.children,Bt,at.key):He!==null&&(He.elementType===fr||typeof fr=="object"&&fr!==null&&fr.$$typeof===N&&OM(fr)===He.type)?(He=U(He,at.props),wb(He,at),He.return=We,He):(He=Ef(at.type,at.key,at.props,null,We.mode,Bt),wb(He,at),He.return=We,He)}function lt(We,He,at,Bt){return He===null||He.tag!==4||He.stateNode.containerInfo!==at.containerInfo||He.stateNode.implementation!==at.implementation?(He=qm(at,We.mode,Bt),He.return=We,He):(He=U(He,at.children||[]),He.return=We,He)}function St(We,He,at,Bt,fr){return He===null||He.tag!==7?(He=nd(at,We.mode,Bt,fr),He.return=We,He):(He=U(He,at),He.return=We,He)}function Ot(We,He,at){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=$g(""+He,We.mode,at),He.return=We,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case h:return at=Ef(He.type,He.key,He.props,null,We.mode,at),wb(at,He),at.return=We,at;case p:return He=qm(He,We.mode,at),He.return=We,He;case N:var Bt=He._init;return He=Bt(He._payload),Ot(We,He,at)}if(J(He)||D(He))return He=nd(He,We.mode,at,null),He.return=We,He;if(typeof He.then=="function")return Ot(We,FE(He),at);if(He.$$typeof===_)return Ot(We,fA(We,He),at);OE(We,He)}return null}function At(We,He,at,Bt){var fr=He!==null?He.key:null;if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return fr!==null?null:be(We,He,""+at,Bt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case h:return at.key===fr?Pe(We,He,at,Bt):null;case p:return at.key===fr?lt(We,He,at,Bt):null;case N:return fr=at._init,at=fr(at._payload),At(We,He,at,Bt)}if(J(at)||D(at))return fr!==null?null:St(We,He,at,Bt,null);if(typeof at.then=="function")return At(We,He,FE(at),Bt);if(at.$$typeof===_)return At(We,He,fA(We,at),Bt);OE(We,at)}return null}function ht(We,He,at,Bt,fr){if(typeof Bt=="string"&&Bt!==""||typeof Bt=="number"||typeof Bt=="bigint")return We=We.get(at)||null,be(He,We,""+Bt,fr);if(typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case h:return We=We.get(Bt.key===null?at:Bt.key)||null,Pe(He,We,Bt,fr);case p:return We=We.get(Bt.key===null?at:Bt.key)||null,lt(He,We,Bt,fr);case N:var yn=Bt._init;return Bt=yn(Bt._payload),ht(We,He,at,Bt,fr)}if(J(Bt)||D(Bt))return We=We.get(at)||null,St(He,We,Bt,fr,null);if(typeof Bt.then=="function")return ht(We,He,at,FE(Bt),fr);if(Bt.$$typeof===_)return ht(We,He,at,fA(He,Bt),fr);OE(He,Bt)}return null}function zr(We,He,at,Bt){for(var fr=null,yn=null,yr=He,Dr=He=0,Mi=null;yr!==null&&Dr<at.length;Dr++){yr.index>Dr?(Mi=yr,yr=null):Mi=yr.sibling;var Kn=At(We,yr,at[Dr],Bt);if(Kn===null){yr===null&&(yr=Mi);break}A&&yr&&Kn.alternate===null&&m(We,yr),He=q(Kn,He,Dr),yn===null?fr=Kn:yn.sibling=Kn,yn=Kn,yr=Mi}if(Dr===at.length)return v(We,yr),Mn&&_f(We,Dr),fr;if(yr===null){for(;Dr<at.length;Dr++)yr=Ot(We,at[Dr],Bt),yr!==null&&(He=q(yr,He,Dr),yn===null?fr=yr:yn.sibling=yr,yn=yr);return Mn&&_f(We,Dr),fr}for(yr=C(yr);Dr<at.length;Dr++)Mi=ht(yr,We,Dr,at[Dr],Bt),Mi!==null&&(A&&Mi.alternate!==null&&yr.delete(Mi.key===null?Dr:Mi.key),He=q(Mi,He,Dr),yn===null?fr=Mi:yn.sibling=Mi,yn=Mi);return A&&yr.forEach(function(x0){return m(We,x0)}),Mn&&_f(We,Dr),fr}function Fr(We,He,at,Bt){if(at==null)throw Error(n(151));for(var fr=null,yn=null,yr=He,Dr=He=0,Mi=null,Kn=at.next();yr!==null&&!Kn.done;Dr++,Kn=at.next()){yr.index>Dr?(Mi=yr,yr=null):Mi=yr.sibling;var x0=At(We,yr,Kn.value,Bt);if(x0===null){yr===null&&(yr=Mi);break}A&&yr&&x0.alternate===null&&m(We,yr),He=q(x0,He,Dr),yn===null?fr=x0:yn.sibling=x0,yn=x0,yr=Mi}if(Kn.done)return v(We,yr),Mn&&_f(We,Dr),fr;if(yr===null){for(;!Kn.done;Dr++,Kn=at.next())Kn=Ot(We,Kn.value,Bt),Kn!==null&&(He=q(Kn,He,Dr),yn===null?fr=Kn:yn.sibling=Kn,yn=Kn);return Mn&&_f(We,Dr),fr}for(yr=C(yr);!Kn.done;Dr++,Kn=at.next())Kn=ht(yr,We,Dr,Kn.value,Bt),Kn!==null&&(A&&Kn.alternate!==null&&yr.delete(Kn.key===null?Dr:Kn.key),He=q(Kn,He,Dr),yn===null?fr=Kn:yn.sibling=Kn,yn=Kn);return A&&yr.forEach(function(gfe){return m(We,gfe)}),Mn&&_f(We,Dr),fr}function ya(We,He,at,Bt){if(typeof at=="object"&&at!==null&&at.type===g&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case h:e:{for(var fr=at.key;He!==null;){if(He.key===fr){if(fr=at.type,fr===g){if(He.tag===7){v(We,He.sibling),Bt=U(He,at.props.children),Bt.return=We,We=Bt;break e}}else if(He.elementType===fr||typeof fr=="object"&&fr!==null&&fr.$$typeof===N&&OM(fr)===He.type){v(We,He.sibling),Bt=U(He,at.props),wb(Bt,at),Bt.return=We,We=Bt;break e}v(We,He);break}else m(We,He);He=He.sibling}at.type===g?(Bt=nd(at.props.children,We.mode,Bt,at.key),Bt.return=We,We=Bt):(Bt=Ef(at.type,at.key,at.props,null,We.mode,Bt),wb(Bt,at),Bt.return=We,We=Bt)}return ue(We);case p:e:{for(fr=at.key;He!==null;){if(He.key===fr)if(He.tag===4&&He.stateNode.containerInfo===at.containerInfo&&He.stateNode.implementation===at.implementation){v(We,He.sibling),Bt=U(He,at.children||[]),Bt.return=We,We=Bt;break e}else{v(We,He);break}else m(We,He);He=He.sibling}Bt=qm(at,We.mode,Bt),Bt.return=We,We=Bt}return ue(We);case N:return fr=at._init,at=fr(at._payload),ya(We,He,at,Bt)}if(J(at))return zr(We,He,at,Bt);if(D(at)){if(fr=D(at),typeof fr!="function")throw Error(n(150));return at=fr.call(at),Fr(We,He,at,Bt)}if(typeof at.then=="function")return ya(We,He,FE(at),Bt);if(at.$$typeof===_)return ya(We,He,fA(We,at),Bt);OE(We,at)}return typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint"?(at=""+at,He!==null&&He.tag===6?(v(We,He.sibling),Bt=U(He,at),Bt.return=We,We=Bt):(v(We,He),Bt=$g(at,We.mode,Bt),Bt.return=We,We=Bt),ue(We)):v(We,He)}return function(We,He,at,Bt){try{yb=0;var fr=ya(We,He,at,Bt);return nx=null,fr}catch(yr){if(yr===me||yr===xe)throw yr;var yn=Pi(29,yr,null,We.mode);return yn.lanes=Bt,yn.return=We,yn}finally{}}}var ax=DM(!0),PM=DM(!1),fu=ee(null),xA=null;function n0(A){var m=A.alternate;z(yi,yi.current&1),z(fu,A),xA===null&&(m===null||An.current!==null||m.memoizedState!==null)&&(xA=A)}function RM(A){if(A.tag===22){if(z(yi,yi.current),z(fu,A),xA===null){var m=A.alternate;m!==null&&m.memoizedState!==null&&(xA=A)}}else a0()}function a0(){z(yi,yi.current),z(fu,fu.current)}function If(A){F(fu),xA===A&&(xA=null),F(yi)}var yi=ee(0);function DE(A){for(var m=A;m!==null;){if(m.tag===13){var v=m.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||XB(v)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function oB(A,m,v,C){m=A.memoizedState,v=v(C,m),v=v==null?m:d({},m,v),A.memoizedState=v,A.lanes===0&&(A.updateQueue.baseState=v)}var lB={enqueueSetState:function(A,m,v){A=A._reactInternals;var C=yc(),U=_t(C);U.payload=m,v!=null&&(U.callback=v),m=jt(A,U,C),m!==null&&(wc(m,A,C),kt(m,A,C))},enqueueReplaceState:function(A,m,v){A=A._reactInternals;var C=yc(),U=_t(C);U.tag=1,U.payload=m,v!=null&&(U.callback=v),m=jt(A,U,C),m!==null&&(wc(m,A,C),kt(m,A,C))},enqueueForceUpdate:function(A,m){A=A._reactInternals;var v=yc(),C=_t(v);C.tag=2,m!=null&&(C.callback=m),m=jt(A,C,v),m!==null&&(wc(m,A,v),kt(m,A,v))}};function LM(A,m,v,C,U,q,ue){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(C,q,ue):m.prototype&&m.prototype.isPureReactComponent?!tA(v,C)||!tA(U,q):!0}function MM(A,m,v,C){A=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(v,C),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(v,C),m.state!==A&&lB.enqueueReplaceState(m,m.state,null)}function cp(A,m){var v=m;if("ref"in m){v={};for(var C in m)C!=="ref"&&(v[C]=m[C])}if(A=A.defaultProps){v===m&&(v=d({},v));for(var U in A)v[U]===void 0&&(v[U]=A[U])}return v}var PE=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function UM(A){PE(A)}function QM(A){console.error(A)}function HM(A){PE(A)}function RE(A,m){try{var v=A.onUncaughtError;v(m.value,{componentStack:m.stack})}catch(C){setTimeout(function(){throw C})}}function VM(A,m,v){try{var C=A.onCaughtError;C(v.value,{componentStack:v.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function cB(A,m,v){return v=_t(v),v.tag=3,v.payload={element:null},v.callback=function(){RE(A,m)},v}function zM(A){return A=_t(A),A.tag=3,A}function $M(A,m,v,C){var U=v.type.getDerivedStateFromError;if(typeof U=="function"){var q=C.value;A.payload=function(){return U(q)},A.callback=function(){VM(m,v,C)}}var ue=v.stateNode;ue!==null&&typeof ue.componentDidCatch=="function"&&(A.callback=function(){VM(m,v,C),typeof U!="function"&&(u0===null?u0=new Set([this]):u0.add(this));var be=C.stack;this.componentDidCatch(C.value,{componentStack:be!==null?be:""})})}function gAe(A,m,v,C,U){if(v.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){if(m=v.alternate,m!==null&&Yh(m,v,U,!0),v=fu.current,v!==null){switch(v.tag){case 13:return xA===null?FB():v.alternate===null&&ys===0&&(ys=3),v.flags&=-257,v.flags|=65536,v.lanes=U,C===Ee?v.flags|=16384:(m=v.updateQueue,m===null?v.updateQueue=new Set([C]):m.add(C),DB(A,C,U)),!1;case 22:return v.flags|=65536,C===Ee?v.flags|=16384:(m=v.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([C])},v.updateQueue=m):(v=m.retryQueue,v===null?m.retryQueue=new Set([C]):v.add(C)),DB(A,C,U)),!1}throw Error(n(435,v.tag))}return DB(A,C,U),FB(),!1}if(Mn)return m=fu.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=U,C!==ib&&(A=Error(n(422),{cause:C}),Xh(hn(A,v)))):(C!==ib&&(m=Error(n(423),{cause:C}),Xh(hn(m,v))),A=A.current.alternate,A.flags|=65536,U&=-U,A.lanes|=U,C=hn(C,v),U=cB(A.stateNode,C,U),rr(A,U),ys!==4&&(ys=2)),!1;var q=Error(n(520),{cause:C});if(q=hn(q,v),Bb===null?Bb=[q]:Bb.push(q),ys!==4&&(ys=2),m===null)return!0;C=hn(C,v),v=m;do{switch(v.tag){case 3:return v.flags|=65536,A=U&-U,v.lanes|=A,A=cB(v.stateNode,C,A),rr(v,A),!1;case 1:if(m=v.type,q=v.stateNode,(v.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(u0===null||!u0.has(q))))return v.flags|=65536,U&=-U,v.lanes|=U,U=zM(U),$M(U,A,v,C),rr(v,U),!1}v=v.return}while(v!==null);return!1}var GM=Error(n(461)),Ri=!1;function io(A,m,v,C){m.child=A===null?PM(m,null,v,C):ax(m,A.child,v,C)}function KM(A,m,v,C,U){v=v.render;var q=m.ref;if("ref"in C){var ue={};for(var be in C)be!=="ref"&&(ue[be]=C[be])}else ue=C;return du(m),C=pc(A,m,v,ue,q,U),be=Ta(),A!==null&&!Ri?(Zm(A,m,U),Ff(A,m,U)):(Mn&&be&&Wm(m),m.flags|=1,io(A,m,C,U),m.child)}function qM(A,m,v,C,U){if(A===null){var q=v.type;return typeof q=="function"&&!qh(q)&&q.defaultProps===void 0&&v.compare===null?(m.tag=15,m.type=q,WM(A,m,q,C,U)):(A=Ef(v.type,null,C,m,m.mode,U),A.ref=m.ref,A.return=m,m.child=A)}if(q=A.child,!gB(A,U)){var ue=q.memoizedProps;if(v=v.compare,v=v!==null?v:tA,v(ue,C)&&A.ref===m.ref)return Ff(A,m,U)}return m.flags|=1,A=ou(q,C),A.ref=m.ref,A.return=m,m.child=A}function WM(A,m,v,C,U){if(A!==null){var q=A.memoizedProps;if(tA(q,C)&&A.ref===m.ref)if(Ri=!1,m.pendingProps=C=q,gB(A,U))(A.flags&131072)!==0&&(Ri=!0);else return m.lanes=A.lanes,Ff(A,m,U)}return uB(A,m,v,C,U)}function XM(A,m,v){var C=m.pendingProps,U=C.children,q=A!==null?A.memoizedState:null;if(C.mode==="hidden"){if((m.flags&128)!==0){if(C=q!==null?q.baseLanes|v:v,A!==null){for(U=m.child=A.child,q=0;U!==null;)q=q|U.lanes|U.childLanes,U=U.sibling;m.childLanes=q&~C}else m.childLanes=0,m.child=null;return YM(A,m,C,v)}if((v&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},A!==null&&se(m,q!==null?q.cachePool:null),q!==null?ta(m,q):$n(),RM(m);else return m.lanes=m.childLanes=536870912,YM(A,m,q!==null?q.baseLanes|v:v,v)}else q!==null?(se(m,q.cachePool),ta(m,q),a0(),m.memoizedState=null):(A!==null&&se(m,null),$n(),a0());return io(A,m,U,v),m.child}function YM(A,m,v,C){var U=Z();return U=U===null?null:{parent:Ds._currentValue,pool:U},m.memoizedState={baseLanes:v,cachePool:U},A!==null&&se(m,null),$n(),RM(m),A!==null&&Yh(A,m,C,!0),null}function LE(A,m){var v=m.ref;if(v===null)A!==null&&A.ref!==null&&(m.flags|=4194816);else{if(typeof v!="function"&&typeof v!="object")throw Error(n(284));(A===null||A.ref!==v)&&(m.flags|=4194816)}}function uB(A,m,v,C,U){return du(m),v=pc(A,m,v,C,void 0,U),C=Ta(),A!==null&&!Ri?(Zm(A,m,U),Ff(A,m,U)):(Mn&&C&&Wm(m),m.flags|=1,io(A,m,v,U),m.child)}function JM(A,m,v,C,U,q){return du(m),m.updateQueue=null,v=kf(m,C,v,U),hA(A),C=Ta(),A!==null&&!Ri?(Zm(A,m,q),Ff(A,m,q)):(Mn&&C&&Wm(m),m.flags|=1,io(A,m,v,q),m.child)}function ZM(A,m,v,C,U){if(du(m),m.stateNode===null){var q=ti,ue=v.contextType;typeof ue=="object"&&ue!==null&&(q=Os(ue)),q=new v(C,q),m.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=lB,m.stateNode=q,q._reactInternals=m,q=m.stateNode,q.props=C,q.state=m.memoizedState,q.refs={},Qe(m),ue=v.contextType,q.context=typeof ue=="object"&&ue!==null?Os(ue):ti,q.state=m.memoizedState,ue=v.getDerivedStateFromProps,typeof ue=="function"&&(oB(m,v,ue,C),q.state=m.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(ue=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),ue!==q.state&&lB.enqueueReplaceState(q,q.state,null),Zt(m,C,q,U),xr(),q.state=m.memoizedState),typeof q.componentDidMount=="function"&&(m.flags|=4194308),C=!0}else if(A===null){q=m.stateNode;var be=m.memoizedProps,Pe=cp(v,be);q.props=Pe;var lt=q.context,St=v.contextType;ue=ti,typeof St=="object"&&St!==null&&(ue=Os(St));var Ot=v.getDerivedStateFromProps;St=typeof Ot=="function"||typeof q.getSnapshotBeforeUpdate=="function",be=m.pendingProps!==be,St||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(be||lt!==ue)&&MM(m,q,C,ue),mt=!1;var At=m.memoizedState;q.state=At,Zt(m,C,q,U),xr(),lt=m.memoizedState,be||At!==lt||mt?(typeof Ot=="function"&&(oB(m,v,Ot,C),lt=m.memoizedState),(Pe=mt||LM(m,v,Pe,C,At,lt,ue))?(St||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(m.flags|=4194308)):(typeof q.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=C,m.memoizedState=lt),q.props=C,q.state=lt,q.context=ue,C=Pe):(typeof q.componentDidMount=="function"&&(m.flags|=4194308),C=!1)}else{q=m.stateNode,Ve(A,m),ue=m.memoizedProps,St=cp(v,ue),q.props=St,Ot=m.pendingProps,At=q.context,lt=v.contextType,Pe=ti,typeof lt=="object"&&lt!==null&&(Pe=Os(lt)),be=v.getDerivedStateFromProps,(lt=typeof be=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(ue!==Ot||At!==Pe)&&MM(m,q,C,Pe),mt=!1,At=m.memoizedState,q.state=At,Zt(m,C,q,U),xr();var ht=m.memoizedState;ue!==Ot||At!==ht||mt||A!==null&&A.dependencies!==null&&Wg(A.dependencies)?(typeof be=="function"&&(oB(m,v,be,C),ht=m.memoizedState),(St=mt||LM(m,v,St,C,At,ht,Pe)||A!==null&&A.dependencies!==null&&Wg(A.dependencies))?(lt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(C,ht,Pe),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(C,ht,Pe)),typeof q.componentDidUpdate=="function"&&(m.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof q.componentDidUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),m.memoizedProps=C,m.memoizedState=ht),q.props=C,q.state=ht,q.context=Pe,C=St):(typeof q.componentDidUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||ue===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),C=!1)}return q=C,LE(A,m),C=(m.flags&128)!==0,q||C?(q=m.stateNode,v=C&&typeof v.getDerivedStateFromError!="function"?null:q.render(),m.flags|=1,A!==null&&C?(m.child=ax(m,A.child,null,U),m.child=ax(m,null,v,U)):io(A,m,v,U),m.memoizedState=q.state,A=m.child):A=Ff(A,m,U),A}function eU(A,m,v,C){return dl(),m.flags|=256,io(A,m,v,C),m.child}var dB={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function AB(A){return{baseLanes:A,cachePool:de()}}function fB(A,m,v){return A=A!==null?A.childLanes&~v:0,m&&(A|=hu),A}function tU(A,m,v){var C=m.pendingProps,U=!1,q=(m.flags&128)!==0,ue;if((ue=q)||(ue=A!==null&&A.memoizedState===null?!1:(yi.current&2)!==0),ue&&(U=!0,m.flags&=-129),ue=(m.flags&32)!==0,m.flags&=-33,A===null){if(Mn){if(U?n0(m):a0(),Mn){var be=qa,Pe;if(Pe=be){e:{for(Pe=be,be=lu;Pe.nodeType!==8;){if(!be){be=null;break e}if(Pe=md(Pe.nextSibling),Pe===null){be=null;break e}}be=Pe}be!==null?(m.memoizedState={dehydrated:be,treeContext:Cf!==null?{id:sd,overflow:id}:null,retryLane:536870912,hydrationErrors:null},Pe=Pi(18,null,null,0),Pe.stateNode=be,Pe.return=m,m.child=Pe,Fs=m,qa=null,Pe=!0):Pe=!1}Pe||Nf(m)}if(be=m.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return XB(be)?m.lanes=32:m.lanes=536870912,null;If(m)}return be=C.children,C=C.fallback,U?(a0(),U=m.mode,be=ME({mode:"hidden",children:be},U),C=nd(C,U,v,null),be.return=m,C.return=m,be.sibling=C,m.child=be,U=m.child,U.memoizedState=AB(v),U.childLanes=fB(A,ue,v),m.memoizedState=dB,C):(n0(m),hB(m,be))}if(Pe=A.memoizedState,Pe!==null&&(be=Pe.dehydrated,be!==null)){if(q)m.flags&256?(n0(m),m.flags&=-257,m=mB(A,m,v)):m.memoizedState!==null?(a0(),m.child=A.child,m.flags|=128,m=null):(a0(),U=C.fallback,be=m.mode,C=ME({mode:"visible",children:C.children},be),U=nd(U,be,v,null),U.flags|=2,C.return=m,U.return=m,C.sibling=U,m.child=C,ax(m,A.child,null,v),C=m.child,C.memoizedState=AB(v),C.childLanes=fB(A,ue,v),m.memoizedState=dB,m=U);else if(n0(m),XB(be)){if(ue=be.nextSibling&&be.nextSibling.dataset,ue)var lt=ue.dgst;ue=lt,C=Error(n(419)),C.stack="",C.digest=ue,Xh({value:C,source:null,stack:null}),m=mB(A,m,v)}else if(Ri||Yh(A,m,v,!1),ue=(v&A.childLanes)!==0,Ri||ue){if(ue=ja,ue!==null&&(C=v&-v,C=(C&42)!==0?1:gt(C),C=(C&(ue.suspendedLanes|v))!==0?0:C,C!==0&&C!==Pe.retryLane))throw Pe.retryLane=C,rd(A,C),wc(ue,A,C),GM;be.data==="$?"||FB(),m=mB(A,m,v)}else be.data==="$?"?(m.flags|=192,m.child=A.child,m=null):(A=Pe.treeContext,qa=md(be.nextSibling),Fs=m,Mn=!0,dA=null,lu=!1,A!==null&&(Rl[ul++]=sd,Rl[ul++]=id,Rl[ul++]=Cf,sd=A.id,id=A.overflow,Cf=m),m=hB(m,C.children),m.flags|=4096);return m}return U?(a0(),U=C.fallback,be=m.mode,Pe=A.child,lt=Pe.sibling,C=ou(Pe,{mode:"hidden",children:C.children}),C.subtreeFlags=Pe.subtreeFlags&65011712,lt!==null?U=ou(lt,U):(U=nd(U,be,v,null),U.flags|=2),U.return=m,C.return=m,C.sibling=U,m.child=C,C=U,U=m.child,be=A.child.memoizedState,be===null?be=AB(v):(Pe=be.cachePool,Pe!==null?(lt=Ds._currentValue,Pe=Pe.parent!==lt?{parent:lt,pool:lt}:Pe):Pe=de(),be={baseLanes:be.baseLanes|v,cachePool:Pe}),U.memoizedState=be,U.childLanes=fB(A,ue,v),m.memoizedState=dB,C):(n0(m),v=A.child,A=v.sibling,v=ou(v,{mode:"visible",children:C.children}),v.return=m,v.sibling=null,A!==null&&(ue=m.deletions,ue===null?(m.deletions=[A],m.flags|=16):ue.push(A)),m.child=v,m.memoizedState=null,v)}function hB(A,m){return m=ME({mode:"visible",children:m},A.mode),m.return=A,A.child=m}function ME(A,m){return A=Pi(22,A,null,m),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function mB(A,m,v){return ax(m,A.child,null,v),A=hB(m,m.pendingProps.children),A.flags|=2,m.memoizedState=null,A}function rU(A,m,v){A.lanes|=m;var C=A.alternate;C!==null&&(C.lanes|=m),Kg(A.return,m,v)}function pB(A,m,v,C,U){var q=A.memoizedState;q===null?A.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:C,tail:v,tailMode:U}:(q.isBackwards=m,q.rendering=null,q.renderingStartTime=0,q.last=C,q.tail=v,q.tailMode=U)}function nU(A,m,v){var C=m.pendingProps,U=C.revealOrder,q=C.tail;if(io(A,m,C.children,v),C=yi.current,(C&2)!==0)C=C&1|2,m.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=m.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&rU(A,v,m);else if(A.tag===19)rU(A,v,m);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break e;for(;A.sibling===null;){if(A.return===null||A.return===m)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}C&=1}switch(z(yi,C),U){case"forwards":for(v=m.child,U=null;v!==null;)A=v.alternate,A!==null&&DE(A)===null&&(U=v),v=v.sibling;v=U,v===null?(U=m.child,m.child=null):(U=v.sibling,v.sibling=null),pB(m,!1,U,v,q);break;case"backwards":for(v=null,U=m.child,m.child=null;U!==null;){if(A=U.alternate,A!==null&&DE(A)===null){m.child=U;break}A=U.sibling,U.sibling=v,v=U,U=A}pB(m,!0,v,null,q);break;case"together":pB(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Ff(A,m,v){if(A!==null&&(m.dependencies=A.dependencies),c0|=m.lanes,(v&m.childLanes)===0)if(A!==null){if(Yh(A,m,v,!1),(v&m.childLanes)===0)return null}else return null;if(A!==null&&m.child!==A.child)throw Error(n(153));if(m.child!==null){for(A=m.child,v=ou(A,A.pendingProps),m.child=v,v.return=m;A.sibling!==null;)A=A.sibling,v=v.sibling=ou(A,A.pendingProps),v.return=m;v.sibling=null}return m.child}function gB(A,m){return(A.lanes&m)!==0?!0:(A=A.dependencies,!!(A!==null&&Wg(A)))}function xAe(A,m,v){switch(m.tag){case 3:ie(m,m.stateNode.containerInfo),AA(m,Ds,A.memoizedState.cache),dl();break;case 27:case 5:pe(m);break;case 4:ie(m,m.stateNode.containerInfo);break;case 10:AA(m,m.type,m.memoizedProps.value);break;case 13:var C=m.memoizedState;if(C!==null)return C.dehydrated!==null?(n0(m),m.flags|=128,null):(v&m.child.childLanes)!==0?tU(A,m,v):(n0(m),A=Ff(A,m,v),A!==null?A.sibling:null);n0(m);break;case 19:var U=(A.flags&128)!==0;if(C=(v&m.childLanes)!==0,C||(Yh(A,m,v,!1),C=(v&m.childLanes)!==0),U){if(C)return nU(A,m,v);m.flags|=128}if(U=m.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),z(yi,yi.current),C)break;return null;case 22:case 23:return m.lanes=0,XM(A,m,v);case 24:AA(m,Ds,A.memoizedState.cache)}return Ff(A,m,v)}function aU(A,m,v){if(A!==null)if(A.memoizedProps!==m.pendingProps)Ri=!0;else{if(!gB(A,v)&&(m.flags&128)===0)return Ri=!1,xAe(A,m,v);Ri=(A.flags&131072)!==0}else Ri=!1,Mn&&(m.flags&1048576)!==0&&mE(m,Gg,m.index);switch(m.lanes=0,m.tag){case 16:e:{A=m.pendingProps;var C=m.elementType,U=C._init;if(C=U(C._payload),m.type=C,typeof C=="function")qh(C)?(A=cp(C,A),m.tag=1,m=ZM(null,m,C,A,v)):(m.tag=0,m=uB(null,m,C,A,v));else{if(C!=null){if(U=C.$$typeof,U===j){m.tag=11,m=KM(null,m,C,A,v);break e}else if(U===E){m.tag=14,m=qM(null,m,C,A,v);break e}}throw m=M(C)||C,Error(n(306,m,""))}}return m;case 0:return uB(A,m,m.type,m.pendingProps,v);case 1:return C=m.type,U=cp(C,m.pendingProps),ZM(A,m,C,U,v);case 3:e:{if(ie(m,m.stateNode.containerInfo),A===null)throw Error(n(387));C=m.pendingProps;var q=m.memoizedState;U=q.element,Ve(A,m),Zt(m,C,null,v);var ue=m.memoizedState;if(C=ue.cache,AA(m,Ds,C),C!==q.cache&&qg(m,[Ds],v,!0),xr(),C=ue.element,q.isDehydrated)if(q={element:C,isDehydrated:!1,cache:ue.cache},m.updateQueue.baseState=q,m.memoizedState=q,m.flags&256){m=eU(A,m,C,v);break e}else if(C!==U){U=hn(Error(n(424)),m),Xh(U),m=eU(A,m,C,v);break e}else{switch(A=m.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(qa=md(A.firstChild),Fs=m,Mn=!0,dA=null,lu=!0,v=PM(m,null,C,v),m.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling}else{if(dl(),C===U){m=Ff(A,m,v);break e}io(A,m,C,v)}m=m.child}return m;case 26:return LE(A,m),A===null?(v=l7(m.type,null,m.pendingProps,null))?m.memoizedState=v:Mn||(v=m.type,A=m.pendingProps,C=ZE(ae.current).createElement(v),C[nr]=m,C[gr]=A,lo(C,v,A),$e(C),m.stateNode=C):m.memoizedState=l7(m.type,A.memoizedProps,m.pendingProps,A.memoizedState),null;case 27:return pe(m),A===null&&Mn&&(C=m.stateNode=s7(m.type,m.pendingProps,ae.current),Fs=m,lu=!0,U=qa,f0(m.type)?(YB=U,qa=md(C.firstChild)):qa=U),io(A,m,m.pendingProps.children,v),LE(A,m),A===null&&(m.flags|=4194304),m.child;case 5:return A===null&&Mn&&((U=C=qa)&&(C=GAe(C,m.type,m.pendingProps,lu),C!==null?(m.stateNode=C,Fs=m,qa=md(C.firstChild),lu=!1,U=!0):U=!1),U||Nf(m)),pe(m),U=m.type,q=m.pendingProps,ue=A!==null?A.memoizedProps:null,C=q.children,KB(U,q)?C=null:ue!==null&&KB(U,ue)&&(m.flags|=32),m.memoizedState!==null&&(U=pc(A,m,mA,null,null,v),Lb._currentValue=U),LE(A,m),io(A,m,C,v),m.child;case 6:return A===null&&Mn&&((A=v=qa)&&(v=KAe(v,m.pendingProps,lu),v!==null?(m.stateNode=v,Fs=m,qa=null,A=!0):A=!1),A||Nf(m)),null;case 13:return tU(A,m,v);case 4:return ie(m,m.stateNode.containerInfo),C=m.pendingProps,A===null?m.child=ax(m,null,C,v):io(A,m,C,v),m.child;case 11:return KM(A,m,m.type,m.pendingProps,v);case 7:return io(A,m,m.pendingProps,v),m.child;case 8:return io(A,m,m.pendingProps.children,v),m.child;case 12:return io(A,m,m.pendingProps.children,v),m.child;case 10:return C=m.pendingProps,AA(m,m.type,C.value),io(A,m,C.children,v),m.child;case 9:return U=m.type._context,C=m.pendingProps.children,du(m),U=Os(U),C=C(U),m.flags|=1,io(A,m,C,v),m.child;case 14:return qM(A,m,m.type,m.pendingProps,v);case 15:return WM(A,m,m.type,m.pendingProps,v);case 19:return nU(A,m,v);case 31:return C=m.pendingProps,v=m.mode,C={mode:C.mode,children:C.children},A===null?(v=ME(C,v),v.ref=m.ref,m.child=v,v.return=m,m=v):(v=ou(A.child,C),v.ref=m.ref,m.child=v,v.return=m,m=v),m;case 22:return XM(A,m,v);case 24:return du(m),C=Os(Ds),A===null?(U=Z(),U===null&&(U=ja,q=ob(),U.pooledCache=q,q.refCount++,q!==null&&(U.pooledCacheLanes|=v),U=q),m.memoizedState={parent:C,cache:U},Qe(m),AA(m,Ds,U)):((A.lanes&v)!==0&&(Ve(A,m),Zt(m,null,null,v),xr()),U=A.memoizedState,q=m.memoizedState,U.parent!==C?(U={parent:C,cache:C},m.memoizedState=U,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=U),AA(m,Ds,C)):(C=q.cache,AA(m,Ds,C),C!==U.cache&&qg(m,[Ds],v,!0))),io(A,m,m.pendingProps.children,v),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function Of(A){A.flags|=4}function sU(A,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!f7(m)){if(m=fu.current,m!==null&&((Rn&4194048)===Rn?xA!==null:(Rn&62914560)!==Rn&&(Rn&536870912)===0||m!==xA))throw tt=Ee,ge;A.flags|=8192}}function UE(A,m){m!==null&&(A.flags|=4),A.flags&16384&&(m=A.tag!==22?fn():536870912,A.lanes|=m,lx|=m)}function Eb(A,m){if(!Mn)switch(A.tailMode){case"hidden":m=A.tail;for(var v=null;m!==null;)m.alternate!==null&&(v=m),m=m.sibling;v===null?A.tail=null:v.sibling=null;break;case"collapsed":v=A.tail;for(var C=null;v!==null;)v.alternate!==null&&(C=v),v=v.sibling;C===null?m||A.tail===null?A.tail=null:A.tail.sibling=null:C.sibling=null}}function as(A){var m=A.alternate!==null&&A.alternate.child===A.child,v=0,C=0;if(m)for(var U=A.child;U!==null;)v|=U.lanes|U.childLanes,C|=U.subtreeFlags&65011712,C|=U.flags&65011712,U.return=A,U=U.sibling;else for(U=A.child;U!==null;)v|=U.lanes|U.childLanes,C|=U.subtreeFlags,C|=U.flags,U.return=A,U=U.sibling;return A.subtreeFlags|=C,A.childLanes=v,m}function vAe(A,m,v){var C=m.pendingProps;switch(Xm(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return as(m),null;case 1:return as(m),null;case 3:return v=m.stateNode,C=null,A!==null&&(C=A.memoizedState.cache),m.memoizedState.cache!==C&&(m.flags|=2048),uu(Ds),ce(),v.pendingContext&&(v.context=v.pendingContext,v.pendingContext=null),(A===null||A.child===null)&&(ao(m)?Of(m):A===null||A.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,gE())),as(m),null;case 26:return v=m.memoizedState,A===null?(Of(m),v!==null?(as(m),sU(m,v)):(as(m),m.flags&=-16777217)):v?v!==A.memoizedState?(Of(m),as(m),sU(m,v)):(as(m),m.flags&=-16777217):(A.memoizedProps!==C&&Of(m),as(m),m.flags&=-16777217),null;case 27:Be(m),v=ae.current;var U=m.type;if(A!==null&&m.stateNode!=null)A.memoizedProps!==C&&Of(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return as(m),null}A=Y.current,ao(m)?pE(m):(A=s7(U,C,v),m.stateNode=A,Of(m))}return as(m),null;case 5:if(Be(m),v=m.type,A!==null&&m.stateNode!=null)A.memoizedProps!==C&&Of(m);else{if(!C){if(m.stateNode===null)throw Error(n(166));return as(m),null}if(A=Y.current,ao(m))pE(m);else{switch(U=ZE(ae.current),A){case 1:A=U.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:A=U.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":A=U.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":A=U.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":A=U.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof C.is=="string"?U.createElement("select",{is:C.is}):U.createElement("select"),C.multiple?A.multiple=!0:C.size&&(A.size=C.size);break;default:A=typeof C.is=="string"?U.createElement(v,{is:C.is}):U.createElement(v)}}A[nr]=m,A[gr]=C;e:for(U=m.child;U!==null;){if(U.tag===5||U.tag===6)A.appendChild(U.stateNode);else if(U.tag!==4&&U.tag!==27&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===m)break e;for(;U.sibling===null;){if(U.return===null||U.return===m)break e;U=U.return}U.sibling.return=U.return,U=U.sibling}m.stateNode=A;e:switch(lo(A,v,C),v){case"button":case"input":case"select":case"textarea":A=!!C.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&Of(m)}}return as(m),m.flags&=-16777217,null;case 6:if(A&&m.stateNode!=null)A.memoizedProps!==C&&Of(m);else{if(typeof C!="string"&&m.stateNode===null)throw Error(n(166));if(A=ae.current,ao(m)){if(A=m.stateNode,v=m.memoizedProps,C=null,U=Fs,U!==null)switch(U.tag){case 27:case 5:C=U.memoizedProps}A[nr]=m,A=!!(A.nodeValue===v||C!==null&&C.suppressHydrationWarning===!0||JU(A.nodeValue,v)),A||Nf(m)}else A=ZE(A).createTextNode(C),A[nr]=m,m.stateNode=A}return as(m),null;case 13:if(C=m.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(U=ao(m),C!==null&&C.dehydrated!==null){if(A===null){if(!U)throw Error(n(318));if(U=m.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(n(317));U[nr]=m}else dl(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;as(m),U=!1}else U=gE(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=U),U=!0;if(!U)return m.flags&256?(If(m),m):(If(m),null)}if(If(m),(m.flags&128)!==0)return m.lanes=v,m;if(v=C!==null,A=A!==null&&A.memoizedState!==null,v){C=m.child,U=null,C.alternate!==null&&C.alternate.memoizedState!==null&&C.alternate.memoizedState.cachePool!==null&&(U=C.alternate.memoizedState.cachePool.pool);var q=null;C.memoizedState!==null&&C.memoizedState.cachePool!==null&&(q=C.memoizedState.cachePool.pool),q!==U&&(C.flags|=2048)}return v!==A&&v&&(m.child.flags|=8192),UE(m,m.updateQueue),as(m),null;case 4:return ce(),A===null&&HB(m.stateNode.containerInfo),as(m),null;case 10:return uu(m.type),as(m),null;case 19:if(F(yi),U=m.memoizedState,U===null)return as(m),null;if(C=(m.flags&128)!==0,q=U.rendering,q===null)if(C)Eb(U,!1);else{if(ys!==0||A!==null&&(A.flags&128)!==0)for(A=m.child;A!==null;){if(q=DE(A),q!==null){for(m.flags|=128,Eb(U,!1),A=q.updateQueue,m.updateQueue=A,UE(m,A),m.subtreeFlags=0,A=v,v=m.child;v!==null;)Km(v,A),v=v.sibling;return z(yi,yi.current&1|2),m.child}A=A.sibling}U.tail!==null&&Ie()>VE&&(m.flags|=128,C=!0,Eb(U,!1),m.lanes=4194304)}else{if(!C)if(A=DE(q),A!==null){if(m.flags|=128,C=!0,A=A.updateQueue,m.updateQueue=A,UE(m,A),Eb(U,!0),U.tail===null&&U.tailMode==="hidden"&&!q.alternate&&!Mn)return as(m),null}else 2*Ie()-U.renderingStartTime>VE&&v!==536870912&&(m.flags|=128,C=!0,Eb(U,!1),m.lanes=4194304);U.isBackwards?(q.sibling=m.child,m.child=q):(A=U.last,A!==null?A.sibling=q:m.child=q,U.last=q)}return U.tail!==null?(m=U.tail,U.rendering=m,U.tail=m.sibling,U.renderingStartTime=Ie(),m.sibling=null,A=yi.current,z(yi,C?A&1|2:A&1),m):(as(m),null);case 22:case 23:return If(m),Wr(),C=m.memoizedState!==null,A!==null?A.memoizedState!==null!==C&&(m.flags|=8192):C&&(m.flags|=8192),C?(v&536870912)!==0&&(m.flags&128)===0&&(as(m),m.subtreeFlags&6&&(m.flags|=8192)):as(m),v=m.updateQueue,v!==null&&UE(m,v.retryQueue),v=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(v=A.memoizedState.cachePool.pool),C=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==v&&(m.flags|=2048),A!==null&&F(Q),null;case 24:return v=null,A!==null&&(v=A.memoizedState.cache),m.memoizedState.cache!==v&&(m.flags|=2048),uu(Ds),as(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function bAe(A,m){switch(Xm(m),m.tag){case 1:return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 3:return uu(Ds),ce(),A=m.flags,(A&65536)!==0&&(A&128)===0?(m.flags=A&-65537|128,m):null;case 26:case 27:case 5:return Be(m),null;case 13:if(If(m),A=m.memoizedState,A!==null&&A.dehydrated!==null){if(m.alternate===null)throw Error(n(340));dl()}return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 19:return F(yi),null;case 4:return ce(),null;case 10:return uu(m.type),null;case 22:case 23:return If(m),Wr(),A!==null&&F(Q),A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 24:return uu(Ds),null;case 25:return null;default:return null}}function iU(A,m){switch(Xm(m),m.tag){case 3:uu(Ds),ce();break;case 26:case 27:case 5:Be(m);break;case 4:ce();break;case 13:If(m);break;case 19:F(yi);break;case 10:uu(m.type);break;case 22:case 23:If(m),Wr(),A!==null&&F(Q);break;case 24:uu(Ds)}}function Cb(A,m){try{var v=m.updateQueue,C=v!==null?v.lastEffect:null;if(C!==null){var U=C.next;v=U;do{if((v.tag&A)===A){C=void 0;var q=v.create,ue=v.inst;C=q(),ue.destroy=C}v=v.next}while(v!==U)}}catch(be){Ca(m,m.return,be)}}function s0(A,m,v){try{var C=m.updateQueue,U=C!==null?C.lastEffect:null;if(U!==null){var q=U.next;C=q;do{if((C.tag&A)===A){var ue=C.inst,be=ue.destroy;if(be!==void 0){ue.destroy=void 0,U=m;var Pe=v,lt=be;try{lt()}catch(St){Ca(U,Pe,St)}}}C=C.next}while(C!==q)}}catch(St){Ca(m,m.return,St)}}function oU(A){var m=A.updateQueue;if(m!==null){var v=A.stateNode;try{zn(m,v)}catch(C){Ca(A,A.return,C)}}}function lU(A,m,v){v.props=cp(A.type,A.memoizedProps),v.state=A.memoizedState;try{v.componentWillUnmount()}catch(C){Ca(A,m,C)}}function _b(A,m){try{var v=A.ref;if(v!==null){switch(A.tag){case 26:case 27:case 5:var C=A.stateNode;break;case 30:C=A.stateNode;break;default:C=A.stateNode}typeof v=="function"?A.refCleanup=v(C):v.current=C}}catch(U){Ca(A,m,U)}}function vA(A,m){var v=A.ref,C=A.refCleanup;if(v!==null)if(typeof C=="function")try{C()}catch(U){Ca(A,m,U)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof v=="function")try{v(null)}catch(U){Ca(A,m,U)}else v.current=null}function cU(A){var m=A.type,v=A.memoizedProps,C=A.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":v.autoFocus&&C.focus();break e;case"img":v.src?C.src=v.src:v.srcSet&&(C.srcset=v.srcSet)}}catch(U){Ca(A,A.return,U)}}function xB(A,m,v){try{var C=A.stateNode;QAe(C,A.type,v,m),C[gr]=m}catch(U){Ca(A,A.return,U)}}function uU(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&f0(A.type)||A.tag===4}function vB(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||uU(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&f0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function bB(A,m,v){var C=A.tag;if(C===5||C===6)A=A.stateNode,m?(v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v).insertBefore(A,m):(m=v.nodeType===9?v.body:v.nodeName==="HTML"?v.ownerDocument.body:v,m.appendChild(A),v=v._reactRootContainer,v!=null||m.onclick!==null||(m.onclick=JE));else if(C!==4&&(C===27&&f0(A.type)&&(v=A.stateNode,m=null),A=A.child,A!==null))for(bB(A,m,v),A=A.sibling;A!==null;)bB(A,m,v),A=A.sibling}function QE(A,m,v){var C=A.tag;if(C===5||C===6)A=A.stateNode,m?v.insertBefore(A,m):v.appendChild(A);else if(C!==4&&(C===27&&f0(A.type)&&(v=A.stateNode),A=A.child,A!==null))for(QE(A,m,v),A=A.sibling;A!==null;)QE(A,m,v),A=A.sibling}function dU(A){var m=A.stateNode,v=A.memoizedProps;try{for(var C=A.type,U=m.attributes;U.length;)m.removeAttributeNode(U[0]);lo(m,C,v),m[nr]=A,m[gr]=v}catch(q){Ca(A,A.return,q)}}var Df=!1,Rs=!1,yB=!1,AU=typeof WeakSet=="function"?WeakSet:Set,Li=null;function yAe(A,m){if(A=A.containerInfo,$B=sC,A=no(A),bi(A)){if("selectionStart"in A)var v={start:A.selectionStart,end:A.selectionEnd};else e:{v=(v=A.ownerDocument)&&v.defaultView||window;var C=v.getSelection&&v.getSelection();if(C&&C.rangeCount!==0){v=C.anchorNode;var U=C.anchorOffset,q=C.focusNode;C=C.focusOffset;try{v.nodeType,q.nodeType}catch{v=null;break e}var ue=0,be=-1,Pe=-1,lt=0,St=0,Ot=A,At=null;t:for(;;){for(var ht;Ot!==v||U!==0&&Ot.nodeType!==3||(be=ue+U),Ot!==q||C!==0&&Ot.nodeType!==3||(Pe=ue+C),Ot.nodeType===3&&(ue+=Ot.nodeValue.length),(ht=Ot.firstChild)!==null;)At=Ot,Ot=ht;for(;;){if(Ot===A)break t;if(At===v&&++lt===U&&(be=ue),At===q&&++St===C&&(Pe=ue),(ht=Ot.nextSibling)!==null)break;Ot=At,At=Ot.parentNode}Ot=ht}v=be===-1||Pe===-1?null:{start:be,end:Pe}}else v=null}v=v||{start:0,end:0}}else v=null;for(GB={focusedElem:A,selectionRange:v},sC=!1,Li=m;Li!==null;)if(m=Li,A=m.child,(m.subtreeFlags&1024)!==0&&A!==null)A.return=m,Li=A;else for(;Li!==null;){switch(m=Li,q=m.alternate,A=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&q!==null){A=void 0,v=m,U=q.memoizedProps,q=q.memoizedState,C=v.stateNode;try{var zr=cp(v.type,U,v.elementType===v.type);A=C.getSnapshotBeforeUpdate(zr,q),C.__reactInternalSnapshotBeforeUpdate=A}catch(Fr){Ca(v,v.return,Fr)}}break;case 3:if((A&1024)!==0){if(A=m.stateNode.containerInfo,v=A.nodeType,v===9)WB(A);else if(v===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":WB(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=m.sibling,A!==null){A.return=m.return,Li=A;break}Li=m.return}}function fU(A,m,v){var C=v.flags;switch(v.tag){case 0:case 11:case 15:i0(A,v),C&4&&Cb(5,v);break;case 1:if(i0(A,v),C&4)if(A=v.stateNode,m===null)try{A.componentDidMount()}catch(ue){Ca(v,v.return,ue)}else{var U=cp(v.type,m.memoizedProps);m=m.memoizedState;try{A.componentDidUpdate(U,m,A.__reactInternalSnapshotBeforeUpdate)}catch(ue){Ca(v,v.return,ue)}}C&64&&oU(v),C&512&&_b(v,v.return);break;case 3:if(i0(A,v),C&64&&(A=v.updateQueue,A!==null)){if(m=null,v.child!==null)switch(v.child.tag){case 27:case 5:m=v.child.stateNode;break;case 1:m=v.child.stateNode}try{zn(A,m)}catch(ue){Ca(v,v.return,ue)}}break;case 27:m===null&&C&4&&dU(v);case 26:case 5:i0(A,v),m===null&&C&4&&cU(v),C&512&&_b(v,v.return);break;case 12:i0(A,v);break;case 13:i0(A,v),C&4&&pU(A,v),C&64&&(A=v.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(v=TAe.bind(null,v),qAe(A,v))));break;case 22:if(C=v.memoizedState!==null||Df,!C){m=m!==null&&m.memoizedState!==null||Rs,U=Df;var q=Rs;Df=C,(Rs=m)&&!q?o0(A,v,(v.subtreeFlags&8772)!==0):i0(A,v),Df=U,Rs=q}break;case 30:break;default:i0(A,v)}}function hU(A){var m=A.alternate;m!==null&&(A.alternate=null,hU(m)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(m=A.stateNode,m!==null&&we(m)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Wa=null,Ml=!1;function Pf(A,m,v){for(v=v.child;v!==null;)mU(A,m,v),v=v.sibling}function mU(A,m,v){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(pt,v)}catch{}switch(v.tag){case 26:Rs||vA(v,m),Pf(A,m,v),v.memoizedState?v.memoizedState.count--:v.stateNode&&(v=v.stateNode,v.parentNode.removeChild(v));break;case 27:Rs||vA(v,m);var C=Wa,U=Ml;f0(v.type)&&(Wa=v.stateNode,Ml=!1),Pf(A,m,v),Ob(v.stateNode),Wa=C,Ml=U;break;case 5:Rs||vA(v,m);case 6:if(C=Wa,U=Ml,Wa=null,Pf(A,m,v),Wa=C,Ml=U,Wa!==null)if(Ml)try{(Wa.nodeType===9?Wa.body:Wa.nodeName==="HTML"?Wa.ownerDocument.body:Wa).removeChild(v.stateNode)}catch(q){Ca(v,m,q)}else try{Wa.removeChild(v.stateNode)}catch(q){Ca(v,m,q)}break;case 18:Wa!==null&&(Ml?(A=Wa,n7(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,v.stateNode),Hb(A)):n7(Wa,v.stateNode));break;case 4:C=Wa,U=Ml,Wa=v.stateNode.containerInfo,Ml=!0,Pf(A,m,v),Wa=C,Ml=U;break;case 0:case 11:case 14:case 15:Rs||s0(2,v,m),Rs||s0(4,v,m),Pf(A,m,v);break;case 1:Rs||(vA(v,m),C=v.stateNode,typeof C.componentWillUnmount=="function"&&lU(v,m,C)),Pf(A,m,v);break;case 21:Pf(A,m,v);break;case 22:Rs=(C=Rs)||v.memoizedState!==null,Pf(A,m,v),Rs=C;break;default:Pf(A,m,v)}}function pU(A,m){if(m.memoizedState===null&&(A=m.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Hb(A)}catch(v){Ca(m,m.return,v)}}function wAe(A){switch(A.tag){case 13:case 19:var m=A.stateNode;return m===null&&(m=A.stateNode=new AU),m;case 22:return A=A.stateNode,m=A._retryCache,m===null&&(m=A._retryCache=new AU),m;default:throw Error(n(435,A.tag))}}function wB(A,m){var v=wAe(A);m.forEach(function(C){var U=jAe.bind(null,A,C);v.has(C)||(v.add(C),C.then(U,U))})}function xc(A,m){var v=m.deletions;if(v!==null)for(var C=0;C<v.length;C++){var U=v[C],q=A,ue=m,be=ue;e:for(;be!==null;){switch(be.tag){case 27:if(f0(be.type)){Wa=be.stateNode,Ml=!1;break e}break;case 5:Wa=be.stateNode,Ml=!1;break e;case 3:case 4:Wa=be.stateNode.containerInfo,Ml=!0;break e}be=be.return}if(Wa===null)throw Error(n(160));mU(q,ue,U),Wa=null,Ml=!1,q=U.alternate,q!==null&&(q.return=null),U.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)gU(m,A),m=m.sibling}var hd=null;function gU(A,m){var v=A.alternate,C=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:xc(m,A),vc(A),C&4&&(s0(3,A,A.return),Cb(3,A),s0(5,A,A.return));break;case 1:xc(m,A),vc(A),C&512&&(Rs||v===null||vA(v,v.return)),C&64&&Df&&(A=A.updateQueue,A!==null&&(C=A.callbacks,C!==null&&(v=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=v===null?C:v.concat(C))));break;case 26:var U=hd;if(xc(m,A),vc(A),C&512&&(Rs||v===null||vA(v,v.return)),C&4){var q=v!==null?v.memoizedState:null;if(C=A.memoizedState,v===null)if(C===null)if(A.stateNode===null){e:{C=A.type,v=A.memoizedProps,U=U.ownerDocument||U;t:switch(C){case"title":q=U.getElementsByTagName("title")[0],(!q||q[Ce]||q[nr]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=U.createElement(C),U.head.insertBefore(q,U.querySelector("head > title"))),lo(q,C,v),q[nr]=A,$e(q),C=q;break e;case"link":var ue=d7("link","href",U).get(C+(v.href||""));if(ue){for(var be=0;be<ue.length;be++)if(q=ue[be],q.getAttribute("href")===(v.href==null||v.href===""?null:v.href)&&q.getAttribute("rel")===(v.rel==null?null:v.rel)&&q.getAttribute("title")===(v.title==null?null:v.title)&&q.getAttribute("crossorigin")===(v.crossOrigin==null?null:v.crossOrigin)){ue.splice(be,1);break t}}q=U.createElement(C),lo(q,C,v),U.head.appendChild(q);break;case"meta":if(ue=d7("meta","content",U).get(C+(v.content||""))){for(be=0;be<ue.length;be++)if(q=ue[be],q.getAttribute("content")===(v.content==null?null:""+v.content)&&q.getAttribute("name")===(v.name==null?null:v.name)&&q.getAttribute("property")===(v.property==null?null:v.property)&&q.getAttribute("http-equiv")===(v.httpEquiv==null?null:v.httpEquiv)&&q.getAttribute("charset")===(v.charSet==null?null:v.charSet)){ue.splice(be,1);break t}}q=U.createElement(C),lo(q,C,v),U.head.appendChild(q);break;default:throw Error(n(468,C))}q[nr]=A,$e(q),C=q}A.stateNode=C}else A7(U,A.type,A.stateNode);else A.stateNode=u7(U,C,A.memoizedProps);else q!==C?(q===null?v.stateNode!==null&&(v=v.stateNode,v.parentNode.removeChild(v)):q.count--,C===null?A7(U,A.type,A.stateNode):u7(U,C,A.memoizedProps)):C===null&&A.stateNode!==null&&xB(A,A.memoizedProps,v.memoizedProps)}break;case 27:xc(m,A),vc(A),C&512&&(Rs||v===null||vA(v,v.return)),v!==null&&C&4&&xB(A,A.memoizedProps,v.memoizedProps);break;case 5:if(xc(m,A),vc(A),C&512&&(Rs||v===null||vA(v,v.return)),A.flags&32){U=A.stateNode;try{Eo(U,"")}catch(ht){Ca(A,A.return,ht)}}C&4&&A.stateNode!=null&&(U=A.memoizedProps,xB(A,U,v!==null?v.memoizedProps:U)),C&1024&&(yB=!0);break;case 6:if(xc(m,A),vc(A),C&4){if(A.stateNode===null)throw Error(n(162));C=A.memoizedProps,v=A.stateNode;try{v.nodeValue=C}catch(ht){Ca(A,A.return,ht)}}break;case 3:if(rC=null,U=hd,hd=eC(m.containerInfo),xc(m,A),hd=U,vc(A),C&4&&v!==null&&v.memoizedState.isDehydrated)try{Hb(m.containerInfo)}catch(ht){Ca(A,A.return,ht)}yB&&(yB=!1,xU(A));break;case 4:C=hd,hd=eC(A.stateNode.containerInfo),xc(m,A),vc(A),hd=C;break;case 12:xc(m,A),vc(A);break;case 13:xc(m,A),vc(A),A.child.flags&8192&&A.memoizedState!==null!=(v!==null&&v.memoizedState!==null)&&(kB=Ie()),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,wB(A,C)));break;case 22:U=A.memoizedState!==null;var Pe=v!==null&&v.memoizedState!==null,lt=Df,St=Rs;if(Df=lt||U,Rs=St||Pe,xc(m,A),Rs=St,Df=lt,vc(A),C&8192)e:for(m=A.stateNode,m._visibility=U?m._visibility&-2:m._visibility|1,U&&(v===null||Pe||Df||Rs||up(A)),v=null,m=A;;){if(m.tag===5||m.tag===26){if(v===null){Pe=v=m;try{if(q=Pe.stateNode,U)ue=q.style,typeof ue.setProperty=="function"?ue.setProperty("display","none","important"):ue.display="none";else{be=Pe.stateNode;var Ot=Pe.memoizedProps.style,At=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;be.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(ht){Ca(Pe,Pe.return,ht)}}}else if(m.tag===6){if(v===null){Pe=m;try{Pe.stateNode.nodeValue=U?"":Pe.memoizedProps}catch(ht){Ca(Pe,Pe.return,ht)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===A)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break e;for(;m.sibling===null;){if(m.return===null||m.return===A)break e;v===m&&(v=null),m=m.return}v===m&&(v=null),m.sibling.return=m.return,m=m.sibling}C&4&&(C=A.updateQueue,C!==null&&(v=C.retryQueue,v!==null&&(C.retryQueue=null,wB(A,v))));break;case 19:xc(m,A),vc(A),C&4&&(C=A.updateQueue,C!==null&&(A.updateQueue=null,wB(A,C)));break;case 30:break;case 21:break;default:xc(m,A),vc(A)}}function vc(A){var m=A.flags;if(m&2){try{for(var v,C=A.return;C!==null;){if(uU(C)){v=C;break}C=C.return}if(v==null)throw Error(n(160));switch(v.tag){case 27:var U=v.stateNode,q=vB(A);QE(A,q,U);break;case 5:var ue=v.stateNode;v.flags&32&&(Eo(ue,""),v.flags&=-33);var be=vB(A);QE(A,be,ue);break;case 3:case 4:var Pe=v.stateNode.containerInfo,lt=vB(A);bB(A,lt,Pe);break;default:throw Error(n(161))}}catch(St){Ca(A,A.return,St)}A.flags&=-3}m&4096&&(A.flags&=-4097)}function xU(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var m=A;xU(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),A=A.sibling}}function i0(A,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)fU(A,m.alternate,m),m=m.sibling}function up(A){for(A=A.child;A!==null;){var m=A;switch(m.tag){case 0:case 11:case 14:case 15:s0(4,m,m.return),up(m);break;case 1:vA(m,m.return);var v=m.stateNode;typeof v.componentWillUnmount=="function"&&lU(m,m.return,v),up(m);break;case 27:Ob(m.stateNode);case 26:case 5:vA(m,m.return),up(m);break;case 22:m.memoizedState===null&&up(m);break;case 30:up(m);break;default:up(m)}A=A.sibling}}function o0(A,m,v){for(v=v&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var C=m.alternate,U=A,q=m,ue=q.flags;switch(q.tag){case 0:case 11:case 15:o0(U,q,v),Cb(4,q);break;case 1:if(o0(U,q,v),C=q,U=C.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(lt){Ca(C,C.return,lt)}if(C=q,U=C.updateQueue,U!==null){var be=C.stateNode;try{var Pe=U.shared.hiddenCallbacks;if(Pe!==null)for(U.shared.hiddenCallbacks=null,U=0;U<Pe.length;U++)Dn(Pe[U],be)}catch(lt){Ca(C,C.return,lt)}}v&&ue&64&&oU(q),_b(q,q.return);break;case 27:dU(q);case 26:case 5:o0(U,q,v),v&&C===null&&ue&4&&cU(q),_b(q,q.return);break;case 12:o0(U,q,v);break;case 13:o0(U,q,v),v&&ue&4&&pU(U,q);break;case 22:q.memoizedState===null&&o0(U,q,v),_b(q,q.return);break;case 30:break;default:o0(U,q,v)}m=m.sibling}}function EB(A,m){var v=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(v=A.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==v&&(A!=null&&A.refCount++,v!=null&&Ym(v))}function CB(A,m){A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Ym(A))}function bA(A,m,v,C){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)vU(A,m,v,C),m=m.sibling}function vU(A,m,v,C){var U=m.flags;switch(m.tag){case 0:case 11:case 15:bA(A,m,v,C),U&2048&&Cb(9,m);break;case 1:bA(A,m,v,C);break;case 3:bA(A,m,v,C),U&2048&&(A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&Ym(A)));break;case 12:if(U&2048){bA(A,m,v,C),A=m.stateNode;try{var q=m.memoizedProps,ue=q.id,be=q.onPostCommit;typeof be=="function"&&be(ue,m.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Pe){Ca(m,m.return,Pe)}}else bA(A,m,v,C);break;case 13:bA(A,m,v,C);break;case 23:break;case 22:q=m.stateNode,ue=m.alternate,m.memoizedState!==null?q._visibility&2?bA(A,m,v,C):Nb(A,m):q._visibility&2?bA(A,m,v,C):(q._visibility|=2,sx(A,m,v,C,(m.subtreeFlags&10256)!==0)),U&2048&&EB(ue,m);break;case 24:bA(A,m,v,C),U&2048&&CB(m.alternate,m);break;default:bA(A,m,v,C)}}function sx(A,m,v,C,U){for(U=U&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var q=A,ue=m,be=v,Pe=C,lt=ue.flags;switch(ue.tag){case 0:case 11:case 15:sx(q,ue,be,Pe,U),Cb(8,ue);break;case 23:break;case 22:var St=ue.stateNode;ue.memoizedState!==null?St._visibility&2?sx(q,ue,be,Pe,U):Nb(q,ue):(St._visibility|=2,sx(q,ue,be,Pe,U)),U&&lt&2048&&EB(ue.alternate,ue);break;case 24:sx(q,ue,be,Pe,U),U&&lt&2048&&CB(ue.alternate,ue);break;default:sx(q,ue,be,Pe,U)}m=m.sibling}}function Nb(A,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var v=A,C=m,U=C.flags;switch(C.tag){case 22:Nb(v,C),U&2048&&EB(C.alternate,C);break;case 24:Nb(v,C),U&2048&&CB(C.alternate,C);break;default:Nb(v,C)}m=m.sibling}}var Sb=8192;function ix(A){if(A.subtreeFlags&Sb)for(A=A.child;A!==null;)bU(A),A=A.sibling}function bU(A){switch(A.tag){case 26:ix(A),A.flags&Sb&&A.memoizedState!==null&&ofe(hd,A.memoizedState,A.memoizedProps);break;case 5:ix(A);break;case 3:case 4:var m=hd;hd=eC(A.stateNode.containerInfo),ix(A),hd=m;break;case 22:A.memoizedState===null&&(m=A.alternate,m!==null&&m.memoizedState!==null?(m=Sb,Sb=16777216,ix(A),Sb=m):ix(A));break;default:ix(A)}}function yU(A){var m=A.alternate;if(m!==null&&(A=m.child,A!==null)){m.child=null;do m=A.sibling,A.sibling=null,A=m;while(A!==null)}}function kb(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];Li=C,EU(C,A)}yU(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)wU(A),A=A.sibling}function wU(A){switch(A.tag){case 0:case 11:case 15:kb(A),A.flags&2048&&s0(9,A,A.return);break;case 3:kb(A);break;case 12:kb(A);break;case 22:var m=A.stateNode;A.memoizedState!==null&&m._visibility&2&&(A.return===null||A.return.tag!==13)?(m._visibility&=-3,HE(A)):kb(A);break;default:kb(A)}}function HE(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var v=0;v<m.length;v++){var C=m[v];Li=C,EU(C,A)}yU(A)}for(A=A.child;A!==null;){switch(m=A,m.tag){case 0:case 11:case 15:s0(8,m,m.return),HE(m);break;case 22:v=m.stateNode,v._visibility&2&&(v._visibility&=-3,HE(m));break;default:HE(m)}A=A.sibling}}function EU(A,m){for(;Li!==null;){var v=Li;switch(v.tag){case 0:case 11:case 15:s0(8,v,m);break;case 23:case 22:if(v.memoizedState!==null&&v.memoizedState.cachePool!==null){var C=v.memoizedState.cachePool.pool;C!=null&&C.refCount++}break;case 24:Ym(v.memoizedState.cache)}if(C=v.child,C!==null)C.return=v,Li=C;else e:for(v=A;Li!==null;){C=Li;var U=C.sibling,q=C.return;if(hU(C),C===v){Li=null;break e}if(U!==null){U.return=q,Li=U;break e}Li=q}}}var EAe={getCacheForType:function(A){var m=Os(Ds),v=m.data.get(A);return v===void 0&&(v=A(),m.data.set(A,v)),v}},CAe=typeof WeakMap=="function"?WeakMap:Map,ua=0,ja=null,Cn=null,Rn=0,da=0,bc=null,l0=!1,ox=!1,_B=!1,Rf=0,ys=0,c0=0,dp=0,NB=0,hu=0,lx=0,Bb=null,Ul=null,SB=!1,kB=0,VE=1/0,zE=null,u0=null,oo=0,d0=null,cx=null,ux=0,BB=0,TB=null,CU=null,Tb=0,jB=null;function yc(){if((ua&2)!==0&&Rn!==0)return Rn&-Rn;if(H.T!==null){var A=Sf;return A!==0?A:LB()}return xt()}function _U(){hu===0&&(hu=(Rn&536870912)===0||Mn?fs():536870912);var A=fu.current;return A!==null&&(A.flags|=32),hu}function wc(A,m,v){(A===ja&&(da===2||da===9)||A.cancelPendingCommit!==null)&&(dx(A,0),A0(A,Rn,hu,!1)),Ba(A,v),((ua&2)===0||A!==ja)&&(A===ja&&((ua&2)===0&&(dp|=v),ys===4&&A0(A,Rn,hu,!1)),yA(A))}function NU(A,m,v){if((ua&6)!==0)throw Error(n(327));var C=!v&&(m&124)===0&&(m&A.expiredLanes)===0||In(A,m),U=C?SAe(A,m):OB(A,m,!0),q=C;do{if(U===0){ox&&!C&&A0(A,m,0,!1);break}else{if(v=A.current.alternate,q&&!_Ae(v)){U=OB(A,m,!1),q=!1;continue}if(U===2){if(q=m,A.errorRecoveryDisabledLanes&q)var ue=0;else ue=A.pendingLanes&-536870913,ue=ue!==0?ue:ue&536870912?536870912:0;if(ue!==0){m=ue;e:{var be=A;U=Bb;var Pe=be.current.memoizedState.isDehydrated;if(Pe&&(dx(be,ue).flags|=256),ue=OB(be,ue,!1),ue!==2){if(_B&&!Pe){be.errorRecoveryDisabledLanes|=q,dp|=q,U=4;break e}q=Ul,Ul=U,q!==null&&(Ul===null?Ul=q:Ul.push.apply(Ul,q))}U=ue}if(q=!1,U!==2)continue}}if(U===1){dx(A,0),A0(A,m,0,!0);break}e:{switch(C=A,q=U,q){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:A0(C,m,hu,!l0);break e;case 2:Ul=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(U=kB+300-Ie(),10<U)){if(A0(C,m,hu,!l0),Vr(C,0,!0)!==0)break e;C.timeoutHandle=t7(SU.bind(null,C,v,Ul,zE,SB,m,hu,dp,lx,l0,q,2,-0,0),U);break e}SU(C,v,Ul,zE,SB,m,hu,dp,lx,l0,q,0,-0,0)}}break}while(!0);yA(A)}function SU(A,m,v,C,U,q,ue,be,Pe,lt,St,Ot,At,ht){if(A.timeoutHandle=-1,Ot=m.subtreeFlags,(Ot&8192||(Ot&16785408)===16785408)&&(Rb={stylesheets:null,count:0,unsuspend:ife},bU(m),Ot=lfe(),Ot!==null)){A.cancelPendingCommit=Ot(OU.bind(null,A,m,q,v,C,U,ue,be,Pe,St,1,At,ht)),A0(A,q,ue,!lt);return}OU(A,m,q,v,C,U,ue,be,Pe)}function _Ae(A){for(var m=A;;){var v=m.tag;if((v===0||v===11||v===15)&&m.flags&16384&&(v=m.updateQueue,v!==null&&(v=v.stores,v!==null)))for(var C=0;C<v.length;C++){var U=v[C],q=U.getSnapshot;U=U.value;try{if(!ei(q(),U))return!1}catch{return!1}}if(v=m.child,m.subtreeFlags&16384&&v!==null)v.return=m,m=v;else{if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function A0(A,m,v,C){m&=~NB,m&=~dp,A.suspendedLanes|=m,A.pingedLanes&=~m,C&&(A.warmLanes|=m),C=A.expirationTimes;for(var U=m;0<U;){var q=31-Pt(U),ue=1<<q;C[q]=-1,U&=~ue}v!==0&&pr(A,v,m)}function $E(){return(ua&6)===0?(jb(0),!1):!0}function IB(){if(Cn!==null){if(da===0)var A=Cn.return;else A=Cn,ld=ri=null,Yg(A),nx=null,yb=0,A=Cn;for(;A!==null;)iU(A.alternate,A),A=A.return;Cn=null}}function dx(A,m){var v=A.timeoutHandle;v!==-1&&(A.timeoutHandle=-1,VAe(v)),v=A.cancelPendingCommit,v!==null&&(A.cancelPendingCommit=null,v()),IB(),ja=A,Cn=v=ou(A.current,null),Rn=m,da=0,bc=null,l0=!1,ox=In(A,m),_B=!1,lx=hu=NB=dp=c0=ys=0,Ul=Bb=null,SB=!1,(m&8)!==0&&(m|=m&32);var C=A.entangledLanes;if(C!==0)for(A=A.entanglements,C&=m;0<C;){var U=31-Pt(C),q=1<<U;m|=A[U],C&=~q}return Rf=m,Dl(),v}function kU(A,m){kr=null,H.H=IE,m===me||m===xe?(m=Ke(),da=3):m===ge?(m=Ke(),da=4):da=m===GM?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,bc=m,Cn===null&&(ys=1,RE(A,hn(m,A.current)))}function BU(){var A=H.H;return H.H=IE,A===null?IE:A}function TU(){var A=H.A;return H.A=EAe,A}function FB(){ys=4,l0||(Rn&4194048)!==Rn&&fu.current!==null||(ox=!0),(c0&134217727)===0&&(dp&134217727)===0||ja===null||A0(ja,Rn,hu,!1)}function OB(A,m,v){var C=ua;ua|=2;var U=BU(),q=TU();(ja!==A||Rn!==m)&&(zE=null,dx(A,m)),m=!1;var ue=ys;e:do try{if(da!==0&&Cn!==null){var be=Cn,Pe=bc;switch(da){case 8:IB(),ue=6;break e;case 3:case 2:case 9:case 6:fu.current===null&&(m=!0);var lt=da;if(da=0,bc=null,Ax(A,be,Pe,lt),v&&ox){ue=0;break e}break;default:lt=da,da=0,bc=null,Ax(A,be,Pe,lt)}}NAe(),ue=ys;break}catch(St){kU(A,St)}while(!0);return m&&A.shellSuspendCounter++,ld=ri=null,ua=C,H.H=U,H.A=q,Cn===null&&(ja=null,Rn=0,Dl()),ue}function NAe(){for(;Cn!==null;)jU(Cn)}function SAe(A,m){var v=ua;ua|=2;var C=BU(),U=TU();ja!==A||Rn!==m?(zE=null,VE=Ie()+500,dx(A,m)):ox=In(A,m);e:do try{if(da!==0&&Cn!==null){m=Cn;var q=bc;t:switch(da){case 1:da=0,bc=null,Ax(A,m,q,1);break;case 2:case 9:if(ke(q)){da=0,bc=null,IU(m);break}m=function(){da!==2&&da!==9||ja!==A||(da=7),yA(A)},q.then(m,m);break e;case 3:da=7;break e;case 4:da=5;break e;case 7:ke(q)?(da=0,bc=null,IU(m)):(da=0,bc=null,Ax(A,m,q,7));break;case 5:var ue=null;switch(Cn.tag){case 26:ue=Cn.memoizedState;case 5:case 27:var be=Cn;if(!ue||f7(ue)){da=0,bc=null;var Pe=be.sibling;if(Pe!==null)Cn=Pe;else{var lt=be.return;lt!==null?(Cn=lt,GE(lt)):Cn=null}break t}}da=0,bc=null,Ax(A,m,q,5);break;case 6:da=0,bc=null,Ax(A,m,q,6);break;case 8:IB(),ys=6;break e;default:throw Error(n(462))}}kAe();break}catch(St){kU(A,St)}while(!0);return ld=ri=null,H.H=C,H.A=U,ua=v,Cn!==null?0:(ja=null,Rn=0,Dl(),ys)}function kAe(){for(;Cn!==null&&!Se();)jU(Cn)}function jU(A){var m=aU(A.alternate,A,Rf);A.memoizedProps=A.pendingProps,m===null?GE(A):Cn=m}function IU(A){var m=A,v=m.alternate;switch(m.tag){case 15:case 0:m=JM(v,m,m.pendingProps,m.type,void 0,Rn);break;case 11:m=JM(v,m,m.pendingProps,m.type.render,m.ref,Rn);break;case 5:Yg(m);default:iU(v,m),m=Cn=Km(m,Rf),m=aU(v,m,Rf)}A.memoizedProps=A.pendingProps,m===null?GE(A):Cn=m}function Ax(A,m,v,C){ld=ri=null,Yg(m),nx=null,yb=0;var U=m.return;try{if(gAe(A,U,m,v,Rn)){ys=1,RE(A,hn(v,A.current)),Cn=null;return}}catch(q){if(U!==null)throw Cn=U,q;ys=1,RE(A,hn(v,A.current)),Cn=null;return}m.flags&32768?(Mn||C===1?A=!0:ox||(Rn&536870912)!==0?A=!1:(l0=A=!0,(C===2||C===9||C===3||C===6)&&(C=fu.current,C!==null&&C.tag===13&&(C.flags|=16384))),FU(m,A)):GE(m)}function GE(A){var m=A;do{if((m.flags&32768)!==0){FU(m,l0);return}A=m.return;var v=vAe(m.alternate,m,Rf);if(v!==null){Cn=v;return}if(m=m.sibling,m!==null){Cn=m;return}Cn=m=A}while(m!==null);ys===0&&(ys=5)}function FU(A,m){do{var v=bAe(A.alternate,A);if(v!==null){v.flags&=32767,Cn=v;return}if(v=A.return,v!==null&&(v.flags|=32768,v.subtreeFlags=0,v.deletions=null),!m&&(A=A.sibling,A!==null)){Cn=A;return}Cn=A=v}while(A!==null);ys=6,Cn=null}function OU(A,m,v,C,U,q,ue,be,Pe){A.cancelPendingCommit=null;do KE();while(oo!==0);if((ua&6)!==0)throw Error(n(327));if(m!==null){if(m===A.current)throw Error(n(177));if(q=m.lanes|m.childLanes,q|=ts,tn(A,v,q,ue,be,Pe),A===ja&&(Cn=ja=null,Rn=0),cx=m,d0=A,ux=v,BB=q,TB=U,CU=C,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,IAe(Oe,function(){return MU(),null})):(A.callbackNode=null,A.callbackPriority=0),C=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||C){C=H.T,H.T=null,U=K.p,K.p=2,ue=ua,ua|=4;try{yAe(A,m,v)}finally{ua=ue,K.p=U,H.T=C}}oo=1,DU(),PU(),RU()}}function DU(){if(oo===1){oo=0;var A=d0,m=cx,v=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||v){v=H.T,H.T=null;var C=K.p;K.p=2;var U=ua;ua|=4;try{gU(m,A);var q=GB,ue=no(A.containerInfo),be=q.focusedElem,Pe=q.selectionRange;if(ue!==be&&be&&be.ownerDocument&&rA(be.ownerDocument.documentElement,be)){if(Pe!==null&&bi(be)){var lt=Pe.start,St=Pe.end;if(St===void 0&&(St=lt),"selectionStart"in be)be.selectionStart=lt,be.selectionEnd=Math.min(St,be.value.length);else{var Ot=be.ownerDocument||document,At=Ot&&Ot.defaultView||window;if(At.getSelection){var ht=At.getSelection(),zr=be.textContent.length,Fr=Math.min(Pe.start,zr),ya=Pe.end===void 0?Fr:Math.min(Pe.end,zr);!ht.extend&&Fr>ya&&(ue=ya,ya=Fr,Fr=ue);var We=ed(be,Fr),He=ed(be,ya);if(We&&He&&(ht.rangeCount!==1||ht.anchorNode!==We.node||ht.anchorOffset!==We.offset||ht.focusNode!==He.node||ht.focusOffset!==He.offset)){var at=Ot.createRange();at.setStart(We.node,We.offset),ht.removeAllRanges(),Fr>ya?(ht.addRange(at),ht.extend(He.node,He.offset)):(at.setEnd(He.node,He.offset),ht.addRange(at))}}}}for(Ot=[],ht=be;ht=ht.parentNode;)ht.nodeType===1&&Ot.push({element:ht,left:ht.scrollLeft,top:ht.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<Ot.length;be++){var Bt=Ot[be];Bt.element.scrollLeft=Bt.left,Bt.element.scrollTop=Bt.top}}sC=!!$B,GB=$B=null}finally{ua=U,K.p=C,H.T=v}}A.current=m,oo=2}}function PU(){if(oo===2){oo=0;var A=d0,m=cx,v=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||v){v=H.T,H.T=null;var C=K.p;K.p=2;var U=ua;ua|=4;try{fU(A,m.alternate,m)}finally{ua=U,K.p=C,H.T=v}}oo=3}}function RU(){if(oo===4||oo===3){oo=0,fe();var A=d0,m=cx,v=ux,C=CU;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?oo=5:(oo=0,cx=d0=null,LU(A,A.pendingLanes));var U=A.pendingLanes;if(U===0&&(u0=null),Je(v),m=m.stateNode,It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(pt,m,void 0,(m.current.flags&128)===128)}catch{}if(C!==null){m=H.T,U=K.p,K.p=2,H.T=null;try{for(var q=A.onRecoverableError,ue=0;ue<C.length;ue++){var be=C[ue];q(be.value,{componentStack:be.stack})}}finally{H.T=m,K.p=U}}(ux&3)!==0&&KE(),yA(A),U=A.pendingLanes,(v&4194090)!==0&&(U&42)!==0?A===jB?Tb++:(Tb=0,jB=A):Tb=0,jb(0)}}function LU(A,m){(A.pooledCacheLanes&=m)===0&&(m=A.pooledCache,m!=null&&(A.pooledCache=null,Ym(m)))}function KE(A){return DU(),PU(),RU(),MU()}function MU(){if(oo!==5)return!1;var A=d0,m=BB;BB=0;var v=Je(ux),C=H.T,U=K.p;try{K.p=32>v?32:v,H.T=null,v=TB,TB=null;var q=d0,ue=ux;if(oo=0,cx=d0=null,ux=0,(ua&6)!==0)throw Error(n(331));var be=ua;if(ua|=4,wU(q.current),vU(q,q.current,ue,v),ua=be,jb(0,!1),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(pt,q)}catch{}return!0}finally{K.p=U,H.T=C,LU(A,m)}}function UU(A,m,v){m=hn(v,m),m=cB(A.stateNode,m,2),A=jt(A,m,2),A!==null&&(Ba(A,2),yA(A))}function Ca(A,m,v){if(A.tag===3)UU(A,A,v);else for(;m!==null;){if(m.tag===3){UU(m,A,v);break}else if(m.tag===1){var C=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof C.componentDidCatch=="function"&&(u0===null||!u0.has(C))){A=hn(v,A),v=zM(2),C=jt(m,v,2),C!==null&&($M(v,C,m,A),Ba(C,2),yA(C));break}}m=m.return}}function DB(A,m,v){var C=A.pingCache;if(C===null){C=A.pingCache=new CAe;var U=new Set;C.set(m,U)}else U=C.get(m),U===void 0&&(U=new Set,C.set(m,U));U.has(v)||(_B=!0,U.add(v),A=BAe.bind(null,A,m,v),m.then(A,A))}function BAe(A,m,v){var C=A.pingCache;C!==null&&C.delete(m),A.pingedLanes|=A.suspendedLanes&v,A.warmLanes&=~v,ja===A&&(Rn&v)===v&&(ys===4||ys===3&&(Rn&62914560)===Rn&&300>Ie()-kB?(ua&2)===0&&dx(A,0):NB|=v,lx===Rn&&(lx=0)),yA(A)}function QU(A,m){m===0&&(m=fn()),A=rd(A,m),A!==null&&(Ba(A,m),yA(A))}function TAe(A){var m=A.memoizedState,v=0;m!==null&&(v=m.retryLane),QU(A,v)}function jAe(A,m){var v=0;switch(A.tag){case 13:var C=A.stateNode,U=A.memoizedState;U!==null&&(v=U.retryLane);break;case 19:C=A.stateNode;break;case 22:C=A.stateNode._retryCache;break;default:throw Error(n(314))}C!==null&&C.delete(m),QU(A,v)}function IAe(A,m){return _e(A,m)}var qE=null,fx=null,PB=!1,WE=!1,RB=!1,Ap=0;function yA(A){A!==fx&&A.next===null&&(fx===null?qE=fx=A:fx=fx.next=A),WE=!0,PB||(PB=!0,OAe())}function jb(A,m){if(!RB&&WE){RB=!0;do for(var v=!1,C=qE;C!==null;){if(A!==0){var U=C.pendingLanes;if(U===0)var q=0;else{var ue=C.suspendedLanes,be=C.pingedLanes;q=(1<<31-Pt(42|A)+1)-1,q&=U&~(ue&~be),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(v=!0,$U(C,q))}else q=Rn,q=Vr(C,C===ja?q:0,C.cancelPendingCommit!==null||C.timeoutHandle!==-1),(q&3)===0||In(C,q)||(v=!0,$U(C,q));C=C.next}while(v);RB=!1}}function FAe(){HU()}function HU(){WE=PB=!1;var A=0;Ap!==0&&(HAe()&&(A=Ap),Ap=0);for(var m=Ie(),v=null,C=qE;C!==null;){var U=C.next,q=VU(C,m);q===0?(C.next=null,v===null?qE=U:v.next=U,U===null&&(fx=v)):(v=C,(A!==0||(q&3)!==0)&&(WE=!0)),C=U}jb(A)}function VU(A,m){for(var v=A.suspendedLanes,C=A.pingedLanes,U=A.expirationTimes,q=A.pendingLanes&-62914561;0<q;){var ue=31-Pt(q),be=1<<ue,Pe=U[ue];Pe===-1?((be&v)===0||(be&C)!==0)&&(U[ue]=Or(be,m)):Pe<=m&&(A.expiredLanes|=be),q&=~be}if(m=ja,v=Rn,v=Vr(A,A===m?v:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C=A.callbackNode,v===0||A===m&&(da===2||da===9)||A.cancelPendingCommit!==null)return C!==null&&C!==null&&De(C),A.callbackNode=null,A.callbackPriority=0;if((v&3)===0||In(A,v)){if(m=v&-v,m===A.callbackPriority)return m;switch(C!==null&&De(C),Je(v)){case 2:case 8:v=ye;break;case 32:v=Oe;break;case 268435456:v=qe;break;default:v=Oe}return C=zU.bind(null,A),v=_e(v,C),A.callbackPriority=m,A.callbackNode=v,m}return C!==null&&C!==null&&De(C),A.callbackPriority=2,A.callbackNode=null,2}function zU(A,m){if(oo!==0&&oo!==5)return A.callbackNode=null,A.callbackPriority=0,null;var v=A.callbackNode;if(KE()&&A.callbackNode!==v)return null;var C=Rn;return C=Vr(A,A===ja?C:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),C===0?null:(NU(A,C,m),VU(A,Ie()),A.callbackNode!=null&&A.callbackNode===v?zU.bind(null,A):null)}function $U(A,m){if(KE())return null;NU(A,m,!0)}function OAe(){zAe(function(){(ua&6)!==0?_e(Ye,FAe):HU()})}function LB(){return Ap===0&&(Ap=fs()),Ap}function GU(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:lc(""+A)}function KU(A,m){var v=m.ownerDocument.createElement("input");return v.name=m.name,v.value=m.value,A.id&&v.setAttribute("form",A.id),m.parentNode.insertBefore(v,m),A=new FormData(A),v.parentNode.removeChild(v),A}function DAe(A,m,v,C,U){if(m==="submit"&&v&&v.stateNode===U){var q=GU((U[gr]||null).action),ue=C.submitter;ue&&(m=(m=ue[gr]||null)?GU(m.formAction):ue.getAttribute("formAction"),m!==null&&(q=m,ue=null));var be=new Jc("action","action",null,C,U);A.push({event:be,listeners:[{instance:null,listener:function(){if(C.defaultPrevented){if(Ap!==0){var Pe=ue?KU(U,ue):new FormData(U);Au(v,{pending:!0,data:Pe,method:U.method,action:q},null,Pe)}}else typeof q=="function"&&(be.preventDefault(),Pe=ue?KU(U,ue):new FormData(U),Au(v,{pending:!0,data:Pe,method:U.method,action:q},q,Pe))},currentTarget:U}]})}}for(var MB=0;MB<yf.length;MB++){var UB=yf[MB],PAe=UB.toLowerCase(),RAe=UB[0].toUpperCase()+UB.slice(1);Ka(PAe,"on"+RAe)}Ka(Gh,"onAnimationEnd"),Ka(aA,"onAnimationIteration"),Ka(sA,"onAnimationStart"),Ka("dblclick","onDoubleClick"),Ka("focusin","onFocus"),Ka("focusout","onBlur"),Ka(iA,"onTransitionRun"),Ka(bf,"onTransitionStart"),Ka(Kh,"onTransitionCancel"),Ka(oA,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),Ft("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ft("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ft("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ft("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ft("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ib="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LAe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ib));function qU(A,m){m=(m&4)!==0;for(var v=0;v<A.length;v++){var C=A[v],U=C.event;C=C.listeners;e:{var q=void 0;if(m)for(var ue=C.length-1;0<=ue;ue--){var be=C[ue],Pe=be.instance,lt=be.currentTarget;if(be=be.listener,Pe!==q&&U.isPropagationStopped())break e;q=be,U.currentTarget=lt;try{q(U)}catch(St){PE(St)}U.currentTarget=null,q=Pe}else for(ue=0;ue<C.length;ue++){if(be=C[ue],Pe=be.instance,lt=be.currentTarget,be=be.listener,Pe!==q&&U.isPropagationStopped())break e;q=be,U.currentTarget=lt;try{q(U)}catch(St){PE(St)}U.currentTarget=null,q=Pe}}}}function _n(A,m){var v=m[Jr];v===void 0&&(v=m[Jr]=new Set);var C=A+"__bubble";v.has(C)||(WU(m,A,2,!1),v.add(C))}function QB(A,m,v){var C=0;m&&(C|=4),WU(v,A,C,m)}var XE="_reactListening"+Math.random().toString(36).slice(2);function HB(A){if(!A[XE]){A[XE]=!0,rt.forEach(function(v){v!=="selectionchange"&&(LAe.has(v)||QB(v,!1,A),QB(v,!0,A))});var m=A.nodeType===9?A:A.ownerDocument;m===null||m[XE]||(m[XE]=!0,QB("selectionchange",!1,m))}}function WU(A,m,v,C){switch(v7(m)){case 2:var U=dfe;break;case 8:U=Afe;break;default:U=rT}v=U.bind(null,m,v,A),U=void 0,!ro||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(U=!0),C?U!==void 0?A.addEventListener(m,v,{capture:!0,passive:U}):A.addEventListener(m,v,!0):U!==void 0?A.addEventListener(m,v,{passive:U}):A.addEventListener(m,v,!1)}function VB(A,m,v,C,U){var q=C;if((m&1)===0&&(m&2)===0&&C!==null)e:for(;;){if(C===null)return;var ue=C.tag;if(ue===3||ue===4){var be=C.stateNode.containerInfo;if(be===U)break;if(ue===4)for(ue=C.return;ue!==null;){var Pe=ue.tag;if((Pe===3||Pe===4)&&ue.stateNode.containerInfo===U)return;ue=ue.return}for(;be!==null;){if(ue=Ne(be),ue===null)return;if(Pe=ue.tag,Pe===5||Pe===6||Pe===26||Pe===27){C=q=ue;continue e}be=be.parentNode}}C=C.return}Qh(function(){var lt=q,St=la(v),Ot=[];e:{var At=td.get(A);if(At!==void 0){var ht=Jc,zr=A;switch(A){case"keypress":if(No(v)===0)break e;case"keydown":case"keyup":ht=Ac;break;case"focusin":zr="focus",ht=eu;break;case"focusout":zr="blur",ht=eu;break;case"beforeblur":case"afterblur":ht=eu;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ht=gs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ht=Zc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ht=Jd;break;case Gh:case aA:case sA:ht=Wd;break;case oA:ht=Ae;break;case"scroll":case"scrollend":ht=hf;break;case"wheel":ht=Le;break;case"copy":case"cut":case"paste":ht=Xd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ht=Zu;break;case"toggle":case"beforetoggle":ht=vt}var Fr=(m&4)!==0,ya=!Fr&&(A==="scroll"||A==="scrollend"),We=Fr?At!==null?At+"Capture":null:At;Fr=[];for(var He=lt,at;He!==null;){var Bt=He;if(at=Bt.stateNode,Bt=Bt.tag,Bt!==5&&Bt!==26&&Bt!==27||at===null||We===null||(Bt=Ii(He,We),Bt!=null&&Fr.push(Fb(He,Bt,at))),ya)break;He=He.return}0<Fr.length&&(At=new ht(At,zr,null,v,St),Ot.push({event:At,listeners:Fr}))}}if((m&7)===0){e:{if(At=A==="mouseover"||A==="pointerover",ht=A==="mouseout"||A==="pointerout",At&&v!==Sl&&(zr=v.relatedTarget||v.fromElement)&&(Ne(zr)||zr[Kr]))break e;if((ht||At)&&(At=St.window===St?St:(At=St.ownerDocument)?At.defaultView||At.parentWindow:window,ht?(zr=v.relatedTarget||v.toElement,ht=lt,zr=zr?Ne(zr):null,zr!==null&&(ya=s(zr),Fr=zr.tag,zr!==ya||Fr!==5&&Fr!==27&&Fr!==6)&&(zr=null)):(ht=null,zr=lt),ht!==zr)){if(Fr=gs,Bt="onMouseLeave",We="onMouseEnter",He="mouse",(A==="pointerout"||A==="pointerover")&&(Fr=Zu,Bt="onPointerLeave",We="onPointerEnter",He="pointer"),ya=ht==null?At:Xe(ht),at=zr==null?At:Xe(zr),At=new Fr(Bt,He+"leave",ht,v,St),At.target=ya,At.relatedTarget=at,Bt=null,Ne(St)===lt&&(Fr=new Fr(We,He+"enter",zr,v,St),Fr.target=at,Fr.relatedTarget=ya,Bt=Fr),ya=Bt,ht&&zr)t:{for(Fr=ht,We=zr,He=0,at=Fr;at;at=hx(at))He++;for(at=0,Bt=We;Bt;Bt=hx(Bt))at++;for(;0<He-at;)Fr=hx(Fr),He--;for(;0<at-He;)We=hx(We),at--;for(;He--;){if(Fr===We||We!==null&&Fr===We.alternate)break t;Fr=hx(Fr),We=hx(We)}Fr=null}else Fr=null;ht!==null&&XU(Ot,At,ht,Fr,!1),zr!==null&&ya!==null&&XU(Ot,ya,zr,Fr,!0)}}e:{if(At=lt?Xe(lt):window,ht=At.nodeName&&At.nodeName.toLowerCase(),ht==="select"||ht==="input"&&At.type==="file")var fr=zh;else if(ea(At))if(pf)fr=Vg;else{fr=sb;var yn=ko}else ht=At.nodeName,!ht||ht.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?lt&&Af(lt.elementType)&&(fr=zh):fr=$m;if(fr&&(fr=fr(A,lt))){Fl(Ot,fr,v,St);break e}yn&&yn(A,At,lt),A==="focusout"&&lt&&At.type==="number"&&lt.memoizedProps.value!=null&&Wc(At,"number",At.value)}switch(yn=lt?Xe(lt):window,A){case"focusin":(ea(yn)||yn.contentEditable==="true")&&(Bo=yn,fc=lt,su=null);break;case"focusout":su=fc=Bo=null;break;case"mousedown":hc=!0;break;case"contextmenu":case"mouseup":case"dragend":hc=!1,Ga(Ot,v,St);break;case"selectionchange":if(nA)break;case"keydown":case"keyup":Ga(Ot,v,St)}var yr;if(Jt)e:{switch(A){case"compositionstart":var Dr="onCompositionStart";break e;case"compositionend":Dr="onCompositionEnd";break e;case"compositionupdate":Dr="onCompositionUpdate";break e}Dr=void 0}else Ir?ot(A,v)&&(Dr="onCompositionEnd"):A==="keydown"&&v.keyCode===229&&(Dr="onCompositionStart");Dr&&(oe&&v.locale!=="ko"&&(Ir||Dr!=="onCompositionStart"?Dr==="onCompositionEnd"&&Ir&&(yr=ff()):(_o=St,Yc="value"in _o?_o.value:_o.textContent,Ir=!0)),yn=YE(lt,Dr),0<yn.length&&(Dr=new Xu(Dr,A,null,v,St),Ot.push({event:Dr,listeners:yn}),yr?Dr.data=yr:(yr=Ut(v),yr!==null&&(Dr.data=yr)))),(yr=re?bn(A,v):qr(A,v))&&(Dr=YE(lt,"onBeforeInput"),0<Dr.length&&(yn=new Xu("onBeforeInput","beforeinput",null,v,St),Ot.push({event:yn,listeners:Dr}),yn.data=yr)),DAe(Ot,A,lt,v,St)}qU(Ot,m)})}function Fb(A,m,v){return{instance:A,listener:m,currentTarget:v}}function YE(A,m){for(var v=m+"Capture",C=[];A!==null;){var U=A,q=U.stateNode;if(U=U.tag,U!==5&&U!==26&&U!==27||q===null||(U=Ii(A,v),U!=null&&C.unshift(Fb(A,U,q)),U=Ii(A,m),U!=null&&C.push(Fb(A,U,q))),A.tag===3)return C;A=A.return}return[]}function hx(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function XU(A,m,v,C,U){for(var q=m._reactName,ue=[];v!==null&&v!==C;){var be=v,Pe=be.alternate,lt=be.stateNode;if(be=be.tag,Pe!==null&&Pe===C)break;be!==5&&be!==26&&be!==27||lt===null||(Pe=lt,U?(lt=Ii(v,q),lt!=null&&ue.unshift(Fb(v,lt,Pe))):U||(lt=Ii(v,q),lt!=null&&ue.push(Fb(v,lt,Pe)))),v=v.return}ue.length!==0&&A.push({event:m,listeners:ue})}var MAe=/\r\n?/g,UAe=/\u0000|\uFFFD/g;function YU(A){return(typeof A=="string"?A:""+A).replace(MAe,`
`).replace(UAe,"")}function JU(A,m){return m=YU(m),YU(A)===m}function JE(){}function ba(A,m,v,C,U,q){switch(v){case"children":typeof C=="string"?m==="body"||m==="textarea"&&C===""||Eo(A,C):(typeof C=="number"||typeof C=="bigint")&&m!=="body"&&Eo(A,""+C);break;case"className":sn(A,"class",C);break;case"tabIndex":sn(A,"tabindex",C);break;case"dir":case"role":case"viewBox":case"width":case"height":sn(A,v,C);break;case"style":df(A,C,q);break;case"data":if(m!=="object"){sn(A,"data",C);break}case"src":case"href":if(C===""&&(m!=="a"||v!=="href")){A.removeAttribute(v);break}if(C==null||typeof C=="function"||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(v);break}C=lc(""+C),A.setAttribute(v,C);break;case"action":case"formAction":if(typeof C=="function"){A.setAttribute(v,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(v==="formAction"?(m!=="input"&&ba(A,m,"name",U.name,U,null),ba(A,m,"formEncType",U.formEncType,U,null),ba(A,m,"formMethod",U.formMethod,U,null),ba(A,m,"formTarget",U.formTarget,U,null)):(ba(A,m,"encType",U.encType,U,null),ba(A,m,"method",U.method,U,null),ba(A,m,"target",U.target,U,null)));if(C==null||typeof C=="symbol"||typeof C=="boolean"){A.removeAttribute(v);break}C=lc(""+C),A.setAttribute(v,C);break;case"onClick":C!=null&&(A.onclick=JE);break;case"onScroll":C!=null&&_n("scroll",A);break;case"onScrollEnd":C!=null&&_n("scrollend",A);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=v}}break;case"multiple":A.multiple=C&&typeof C!="function"&&typeof C!="symbol";break;case"muted":A.muted=C&&typeof C!="function"&&typeof C!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(C==null||typeof C=="function"||typeof C=="boolean"||typeof C=="symbol"){A.removeAttribute("xlink:href");break}v=lc(""+C),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",v);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,""+C):A.removeAttribute(v);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":C&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,""):A.removeAttribute(v);break;case"capture":case"download":C===!0?A.setAttribute(v,""):C!==!1&&C!=null&&typeof C!="function"&&typeof C!="symbol"?A.setAttribute(v,C):A.removeAttribute(v);break;case"cols":case"rows":case"size":case"span":C!=null&&typeof C!="function"&&typeof C!="symbol"&&!isNaN(C)&&1<=C?A.setAttribute(v,C):A.removeAttribute(v);break;case"rowSpan":case"start":C==null||typeof C=="function"||typeof C=="symbol"||isNaN(C)?A.removeAttribute(v):A.setAttribute(v,C);break;case"popover":_n("beforetoggle",A),_n("toggle",A),an(A,"popover",C);break;case"xlinkActuate":dn(A,"http://www.w3.org/1999/xlink","xlink:actuate",C);break;case"xlinkArcrole":dn(A,"http://www.w3.org/1999/xlink","xlink:arcrole",C);break;case"xlinkRole":dn(A,"http://www.w3.org/1999/xlink","xlink:role",C);break;case"xlinkShow":dn(A,"http://www.w3.org/1999/xlink","xlink:show",C);break;case"xlinkTitle":dn(A,"http://www.w3.org/1999/xlink","xlink:title",C);break;case"xlinkType":dn(A,"http://www.w3.org/1999/xlink","xlink:type",C);break;case"xmlBase":dn(A,"http://www.w3.org/XML/1998/namespace","xml:base",C);break;case"xmlLang":dn(A,"http://www.w3.org/XML/1998/namespace","xml:lang",C);break;case"xmlSpace":dn(A,"http://www.w3.org/XML/1998/namespace","xml:space",C);break;case"is":an(A,"is",C);break;case"innerText":case"textContent":break;default:(!(2<v.length)||v[0]!=="o"&&v[0]!=="O"||v[1]!=="n"&&v[1]!=="N")&&(v=oc.get(v)||v,an(A,v,C))}}function zB(A,m,v,C,U,q){switch(v){case"style":df(A,C,q);break;case"dangerouslySetInnerHTML":if(C!=null){if(typeof C!="object"||!("__html"in C))throw Error(n(61));if(v=C.__html,v!=null){if(U.children!=null)throw Error(n(60));A.innerHTML=v}}break;case"children":typeof C=="string"?Eo(A,C):(typeof C=="number"||typeof C=="bigint")&&Eo(A,""+C);break;case"onScroll":C!=null&&_n("scroll",A);break;case"onScrollEnd":C!=null&&_n("scrollend",A);break;case"onClick":C!=null&&(A.onclick=JE);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!it.hasOwnProperty(v))e:{if(v[0]==="o"&&v[1]==="n"&&(U=v.endsWith("Capture"),m=v.slice(2,U?v.length-7:void 0),q=A[gr]||null,q=q!=null?q[v]:null,typeof q=="function"&&A.removeEventListener(m,q,U),typeof C=="function")){typeof q!="function"&&q!==null&&(v in A?A[v]=null:A.hasAttribute(v)&&A.removeAttribute(v)),A.addEventListener(m,C,U);break e}v in A?A[v]=C:C===!0?A.setAttribute(v,""):an(A,v,C)}}}function lo(A,m,v){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":_n("error",A),_n("load",A);var C=!1,U=!1,q;for(q in v)if(v.hasOwnProperty(q)){var ue=v[q];if(ue!=null)switch(q){case"src":C=!0;break;case"srcSet":U=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ba(A,m,q,ue,v,null)}}U&&ba(A,m,"srcSet",v.srcSet,v,null),C&&ba(A,m,"src",v.src,v,null);return;case"input":_n("invalid",A);var be=q=ue=U=null,Pe=null,lt=null;for(C in v)if(v.hasOwnProperty(C)){var St=v[C];if(St!=null)switch(C){case"name":U=St;break;case"type":ue=St;break;case"checked":Pe=St;break;case"defaultChecked":lt=St;break;case"value":q=St;break;case"defaultValue":be=St;break;case"children":case"dangerouslySetInnerHTML":if(St!=null)throw Error(n(137,m));break;default:ba(A,m,C,St,v,null)}}qc(A,q,be,Pe,lt,ue,U,!1),Kc(A);return;case"select":_n("invalid",A),C=ue=q=null;for(U in v)if(v.hasOwnProperty(U)&&(be=v[U],be!=null))switch(U){case"value":q=be;break;case"defaultValue":ue=be;break;case"multiple":C=be;default:ba(A,m,U,be,v,null)}m=q,v=ue,A.multiple=!!C,m!=null?Nl(A,!!C,m,!1):v!=null&&Nl(A,!!C,v,!0);return;case"textarea":_n("invalid",A),q=U=C=null;for(ue in v)if(v.hasOwnProperty(ue)&&(be=v[ue],be!=null))switch(ue){case"value":C=be;break;case"defaultValue":U=be;break;case"children":q=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(91));break;default:ba(A,m,ue,be,v,null)}Xc(A,C,U,q),Kc(A);return;case"option":for(Pe in v)if(v.hasOwnProperty(Pe)&&(C=v[Pe],C!=null))switch(Pe){case"selected":A.selected=C&&typeof C!="function"&&typeof C!="symbol";break;default:ba(A,m,Pe,C,v,null)}return;case"dialog":_n("beforetoggle",A),_n("toggle",A),_n("cancel",A),_n("close",A);break;case"iframe":case"object":_n("load",A);break;case"video":case"audio":for(C=0;C<Ib.length;C++)_n(Ib[C],A);break;case"image":_n("error",A),_n("load",A);break;case"details":_n("toggle",A);break;case"embed":case"source":case"link":_n("error",A),_n("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in v)if(v.hasOwnProperty(lt)&&(C=v[lt],C!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ba(A,m,lt,C,v,null)}return;default:if(Af(m)){for(St in v)v.hasOwnProperty(St)&&(C=v[St],C!==void 0&&zB(A,m,St,C,v,void 0));return}}for(be in v)v.hasOwnProperty(be)&&(C=v[be],C!=null&&ba(A,m,be,C,v,null))}function QAe(A,m,v,C){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var U=null,q=null,ue=null,be=null,Pe=null,lt=null,St=null;for(ht in v){var Ot=v[ht];if(v.hasOwnProperty(ht)&&Ot!=null)switch(ht){case"checked":break;case"value":break;case"defaultValue":Pe=Ot;default:C.hasOwnProperty(ht)||ba(A,m,ht,null,C,Ot)}}for(var At in C){var ht=C[At];if(Ot=v[At],C.hasOwnProperty(At)&&(ht!=null||Ot!=null))switch(At){case"type":q=ht;break;case"name":U=ht;break;case"checked":lt=ht;break;case"defaultChecked":St=ht;break;case"value":ue=ht;break;case"defaultValue":be=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(n(137,m));break;default:ht!==Ot&&ba(A,m,At,ht,C,Ot)}}xi(A,ue,be,Pe,lt,St,q,U);return;case"select":ht=ue=be=At=null;for(q in v)if(Pe=v[q],v.hasOwnProperty(q)&&Pe!=null)switch(q){case"value":break;case"multiple":ht=Pe;default:C.hasOwnProperty(q)||ba(A,m,q,null,C,Pe)}for(U in C)if(q=C[U],Pe=v[U],C.hasOwnProperty(U)&&(q!=null||Pe!=null))switch(U){case"value":At=q;break;case"defaultValue":be=q;break;case"multiple":ue=q;default:q!==Pe&&ba(A,m,U,q,C,Pe)}m=be,v=ue,C=ht,At!=null?Nl(A,!!v,At,!1):!!C!=!!v&&(m!=null?Nl(A,!!v,m,!0):Nl(A,!!v,v?[]:"",!1));return;case"textarea":ht=At=null;for(be in v)if(U=v[be],v.hasOwnProperty(be)&&U!=null&&!C.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:ba(A,m,be,null,C,U)}for(ue in C)if(U=C[ue],q=v[ue],C.hasOwnProperty(ue)&&(U!=null||q!=null))switch(ue){case"value":At=U;break;case"defaultValue":ht=U;break;case"children":break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(n(91));break;default:U!==q&&ba(A,m,ue,U,C,q)}Hn(A,At,ht);return;case"option":for(var zr in v)if(At=v[zr],v.hasOwnProperty(zr)&&At!=null&&!C.hasOwnProperty(zr))switch(zr){case"selected":A.selected=!1;break;default:ba(A,m,zr,null,C,At)}for(Pe in C)if(At=C[Pe],ht=v[Pe],C.hasOwnProperty(Pe)&&At!==ht&&(At!=null||ht!=null))switch(Pe){case"selected":A.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:ba(A,m,Pe,At,C,ht)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fr in v)At=v[Fr],v.hasOwnProperty(Fr)&&At!=null&&!C.hasOwnProperty(Fr)&&ba(A,m,Fr,null,C,At);for(lt in C)if(At=C[lt],ht=v[lt],C.hasOwnProperty(lt)&&At!==ht&&(At!=null||ht!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,m));break;default:ba(A,m,lt,At,C,ht)}return;default:if(Af(m)){for(var ya in v)At=v[ya],v.hasOwnProperty(ya)&&At!==void 0&&!C.hasOwnProperty(ya)&&zB(A,m,ya,void 0,C,At);for(St in C)At=C[St],ht=v[St],!C.hasOwnProperty(St)||At===ht||At===void 0&&ht===void 0||zB(A,m,St,At,C,ht);return}}for(var We in v)At=v[We],v.hasOwnProperty(We)&&At!=null&&!C.hasOwnProperty(We)&&ba(A,m,We,null,C,At);for(Ot in C)At=C[Ot],ht=v[Ot],!C.hasOwnProperty(Ot)||At===ht||At==null&&ht==null||ba(A,m,Ot,At,C,ht)}var $B=null,GB=null;function ZE(A){return A.nodeType===9?A:A.ownerDocument}function ZU(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function e7(A,m){if(A===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&m==="foreignObject"?0:A}function KB(A,m){return A==="textarea"||A==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var qB=null;function HAe(){var A=window.event;return A&&A.type==="popstate"?A===qB?!1:(qB=A,!0):(qB=null,!1)}var t7=typeof setTimeout=="function"?setTimeout:void 0,VAe=typeof clearTimeout=="function"?clearTimeout:void 0,r7=typeof Promise=="function"?Promise:void 0,zAe=typeof queueMicrotask=="function"?queueMicrotask:typeof r7<"u"?function(A){return r7.resolve(null).then(A).catch($Ae)}:t7;function $Ae(A){setTimeout(function(){throw A})}function f0(A){return A==="head"}function n7(A,m){var v=m,C=0,U=0;do{var q=v.nextSibling;if(A.removeChild(v),q&&q.nodeType===8)if(v=q.data,v==="/$"){if(0<C&&8>C){v=C;var ue=A.ownerDocument;if(v&1&&Ob(ue.documentElement),v&2&&Ob(ue.body),v&4)for(v=ue.head,Ob(v),ue=v.firstChild;ue;){var be=ue.nextSibling,Pe=ue.nodeName;ue[Ce]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&ue.rel.toLowerCase()==="stylesheet"||v.removeChild(ue),ue=be}}if(U===0){A.removeChild(q),Hb(m);return}U--}else v==="$"||v==="$?"||v==="$!"?U++:C=v.charCodeAt(0)-48;else C=0;v=q}while(v);Hb(m)}function WB(A){var m=A.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var v=m;switch(m=m.nextSibling,v.nodeName){case"HTML":case"HEAD":case"BODY":WB(v),we(v);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(v.rel.toLowerCase()==="stylesheet")continue}A.removeChild(v)}}function GAe(A,m,v,C){for(;A.nodeType===1;){var U=v;if(A.nodeName.toLowerCase()!==m.toLowerCase()){if(!C&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(C){if(!A[Ce])switch(m){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(q=A.getAttribute("rel"),q==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(q!==U.rel||A.getAttribute("href")!==(U.href==null||U.href===""?null:U.href)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin)||A.getAttribute("title")!==(U.title==null?null:U.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(q=A.getAttribute("src"),(q!==(U.src==null?null:U.src)||A.getAttribute("type")!==(U.type==null?null:U.type)||A.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin))&&q&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(m==="input"&&A.type==="hidden"){var q=U.name==null?null:""+U.name;if(U.type==="hidden"&&A.getAttribute("name")===q)return A}else return A;if(A=md(A.nextSibling),A===null)break}return null}function KAe(A,m,v){if(m==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!v||(A=md(A.nextSibling),A===null))return null;return A}function XB(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function qAe(A,m){var v=A.ownerDocument;if(A.data!=="$?"||v.readyState==="complete")m();else{var C=function(){m(),v.removeEventListener("DOMContentLoaded",C)};v.addEventListener("DOMContentLoaded",C),A._reactRetry=C}}function md(A){for(;A!=null;A=A.nextSibling){var m=A.nodeType;if(m===1||m===3)break;if(m===8){if(m=A.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return A}var YB=null;function a7(A){A=A.previousSibling;for(var m=0;A;){if(A.nodeType===8){var v=A.data;if(v==="$"||v==="$!"||v==="$?"){if(m===0)return A;m--}else v==="/$"&&m++}A=A.previousSibling}return null}function s7(A,m,v){switch(m=ZE(v),A){case"html":if(A=m.documentElement,!A)throw Error(n(452));return A;case"head":if(A=m.head,!A)throw Error(n(453));return A;case"body":if(A=m.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function Ob(A){for(var m=A.attributes;m.length;)A.removeAttributeNode(m[0]);we(A)}var mu=new Map,i7=new Set;function eC(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Lf=K.d;K.d={f:WAe,r:XAe,D:YAe,C:JAe,L:ZAe,m:efe,X:rfe,S:tfe,M:nfe};function WAe(){var A=Lf.f(),m=$E();return A||m}function XAe(A){var m=je(A);m!==null&&m.tag===5&&m.type==="form"?op(m):Lf.r(A)}var mx=typeof document>"u"?null:document;function o7(A,m,v){var C=mx;if(C&&typeof m=="string"&&m){var U=Fn(m);U='link[rel="'+A+'"][href="'+U+'"]',typeof v=="string"&&(U+='[crossorigin="'+v+'"]'),i7.has(U)||(i7.add(U),A={rel:A,crossOrigin:v,href:m},C.querySelector(U)===null&&(m=C.createElement("link"),lo(m,"link",A),$e(m),C.head.appendChild(m)))}}function YAe(A){Lf.D(A),o7("dns-prefetch",A,null)}function JAe(A,m){Lf.C(A,m),o7("preconnect",A,m)}function ZAe(A,m,v){Lf.L(A,m,v);var C=mx;if(C&&A&&m){var U='link[rel="preload"][as="'+Fn(m)+'"]';m==="image"&&v&&v.imageSrcSet?(U+='[imagesrcset="'+Fn(v.imageSrcSet)+'"]',typeof v.imageSizes=="string"&&(U+='[imagesizes="'+Fn(v.imageSizes)+'"]')):U+='[href="'+Fn(A)+'"]';var q=U;switch(m){case"style":q=px(A);break;case"script":q=gx(A)}mu.has(q)||(A=d({rel:"preload",href:m==="image"&&v&&v.imageSrcSet?void 0:A,as:m},v),mu.set(q,A),C.querySelector(U)!==null||m==="style"&&C.querySelector(Db(q))||m==="script"&&C.querySelector(Pb(q))||(m=C.createElement("link"),lo(m,"link",A),$e(m),C.head.appendChild(m)))}}function efe(A,m){Lf.m(A,m);var v=mx;if(v&&A){var C=m&&typeof m.as=="string"?m.as:"script",U='link[rel="modulepreload"][as="'+Fn(C)+'"][href="'+Fn(A)+'"]',q=U;switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=gx(A)}if(!mu.has(q)&&(A=d({rel:"modulepreload",href:A},m),mu.set(q,A),v.querySelector(U)===null)){switch(C){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(v.querySelector(Pb(q)))return}C=v.createElement("link"),lo(C,"link",A),$e(C),v.head.appendChild(C)}}}function tfe(A,m,v){Lf.S(A,m,v);var C=mx;if(C&&A){var U=dt(C).hoistableStyles,q=px(A);m=m||"default";var ue=U.get(q);if(!ue){var be={loading:0,preload:null};if(ue=C.querySelector(Db(q)))be.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":m},v),(v=mu.get(q))&&JB(A,v);var Pe=ue=C.createElement("link");$e(Pe),lo(Pe,"link",A),Pe._p=new Promise(function(lt,St){Pe.onload=lt,Pe.onerror=St}),Pe.addEventListener("load",function(){be.loading|=1}),Pe.addEventListener("error",function(){be.loading|=2}),be.loading|=4,tC(ue,m,C)}ue={type:"stylesheet",instance:ue,count:1,state:be},U.set(q,ue)}}}function rfe(A,m){Lf.X(A,m);var v=mx;if(v&&A){var C=dt(v).hoistableScripts,U=gx(A),q=C.get(U);q||(q=v.querySelector(Pb(U)),q||(A=d({src:A,async:!0},m),(m=mu.get(U))&&ZB(A,m),q=v.createElement("script"),$e(q),lo(q,"link",A),v.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},C.set(U,q))}}function nfe(A,m){Lf.M(A,m);var v=mx;if(v&&A){var C=dt(v).hoistableScripts,U=gx(A),q=C.get(U);q||(q=v.querySelector(Pb(U)),q||(A=d({src:A,async:!0,type:"module"},m),(m=mu.get(U))&&ZB(A,m),q=v.createElement("script"),$e(q),lo(q,"link",A),v.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},C.set(U,q))}}function l7(A,m,v,C){var U=(U=ae.current)?eC(U):null;if(!U)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof v.precedence=="string"&&typeof v.href=="string"?(m=px(v.href),v=dt(U).hoistableStyles,C=v.get(m),C||(C={type:"style",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};case"link":if(v.rel==="stylesheet"&&typeof v.href=="string"&&typeof v.precedence=="string"){A=px(v.href);var q=dt(U).hoistableStyles,ue=q.get(A);if(ue||(U=U.ownerDocument||U,ue={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(A,ue),(q=U.querySelector(Db(A)))&&!q._p&&(ue.instance=q,ue.state.loading=5),mu.has(A)||(v={rel:"preload",as:"style",href:v.href,crossOrigin:v.crossOrigin,integrity:v.integrity,media:v.media,hrefLang:v.hrefLang,referrerPolicy:v.referrerPolicy},mu.set(A,v),q||afe(U,A,v,ue.state))),m&&C===null)throw Error(n(528,""));return ue}if(m&&C!==null)throw Error(n(529,""));return null;case"script":return m=v.async,v=v.src,typeof v=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=gx(v),v=dt(U).hoistableScripts,C=v.get(m),C||(C={type:"script",instance:null,count:0,state:null},v.set(m,C)),C):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function px(A){return'href="'+Fn(A)+'"'}function Db(A){return'link[rel="stylesheet"]['+A+"]"}function c7(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function afe(A,m,v,C){A.querySelector('link[rel="preload"][as="style"]['+m+"]")?C.loading=1:(m=A.createElement("link"),C.preload=m,m.addEventListener("load",function(){return C.loading|=1}),m.addEventListener("error",function(){return C.loading|=2}),lo(m,"link",v),$e(m),A.head.appendChild(m))}function gx(A){return'[src="'+Fn(A)+'"]'}function Pb(A){return"script[async]"+A}function u7(A,m,v){if(m.count++,m.instance===null)switch(m.type){case"style":var C=A.querySelector('style[data-href~="'+Fn(v.href)+'"]');if(C)return m.instance=C,$e(C),C;var U=d({},v,{"data-href":v.href,"data-precedence":v.precedence,href:null,precedence:null});return C=(A.ownerDocument||A).createElement("style"),$e(C),lo(C,"style",U),tC(C,v.precedence,A),m.instance=C;case"stylesheet":U=px(v.href);var q=A.querySelector(Db(U));if(q)return m.state.loading|=4,m.instance=q,$e(q),q;C=c7(v),(U=mu.get(U))&&JB(C,U),q=(A.ownerDocument||A).createElement("link"),$e(q);var ue=q;return ue._p=new Promise(function(be,Pe){ue.onload=be,ue.onerror=Pe}),lo(q,"link",C),m.state.loading|=4,tC(q,v.precedence,A),m.instance=q;case"script":return q=gx(v.src),(U=A.querySelector(Pb(q)))?(m.instance=U,$e(U),U):(C=v,(U=mu.get(q))&&(C=d({},v),ZB(C,U)),A=A.ownerDocument||A,U=A.createElement("script"),$e(U),lo(U,"link",C),A.head.appendChild(U),m.instance=U);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(C=m.instance,m.state.loading|=4,tC(C,v.precedence,A));return m.instance}function tC(A,m,v){for(var C=v.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),U=C.length?C[C.length-1]:null,q=U,ue=0;ue<C.length;ue++){var be=C[ue];if(be.dataset.precedence===m)q=be;else if(q!==U)break}q?q.parentNode.insertBefore(A,q.nextSibling):(m=v.nodeType===9?v.head:v,m.insertBefore(A,m.firstChild))}function JB(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.title==null&&(A.title=m.title)}function ZB(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.integrity==null&&(A.integrity=m.integrity)}var rC=null;function d7(A,m,v){if(rC===null){var C=new Map,U=rC=new Map;U.set(v,C)}else U=rC,C=U.get(v),C||(C=new Map,U.set(v,C));if(C.has(A))return C;for(C.set(A,null),v=v.getElementsByTagName(A),U=0;U<v.length;U++){var q=v[U];if(!(q[Ce]||q[nr]||A==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var ue=q.getAttribute(m)||"";ue=A+ue;var be=C.get(ue);be?be.push(q):C.set(ue,[q])}}return C}function A7(A,m,v){A=A.ownerDocument||A,A.head.insertBefore(v,m==="title"?A.querySelector("head > title"):null)}function sfe(A,m,v){if(v===1||m.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return A=m.disabled,typeof m.precedence=="string"&&A==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function f7(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Rb=null;function ife(){}function ofe(A,m,v){if(Rb===null)throw Error(n(475));var C=Rb;if(m.type==="stylesheet"&&(typeof v.media!="string"||matchMedia(v.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var U=px(v.href),q=A.querySelector(Db(U));if(q){A=q._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(C.count++,C=nC.bind(C),A.then(C,C)),m.state.loading|=4,m.instance=q,$e(q);return}q=A.ownerDocument||A,v=c7(v),(U=mu.get(U))&&JB(v,U),q=q.createElement("link"),$e(q);var ue=q;ue._p=new Promise(function(be,Pe){ue.onload=be,ue.onerror=Pe}),lo(q,"link",v),m.instance=q}C.stylesheets===null&&(C.stylesheets=new Map),C.stylesheets.set(m,A),(A=m.state.preload)&&(m.state.loading&3)===0&&(C.count++,m=nC.bind(C),A.addEventListener("load",m),A.addEventListener("error",m))}}function lfe(){if(Rb===null)throw Error(n(475));var A=Rb;return A.stylesheets&&A.count===0&&eT(A,A.stylesheets),0<A.count?function(m){var v=setTimeout(function(){if(A.stylesheets&&eT(A,A.stylesheets),A.unsuspend){var C=A.unsuspend;A.unsuspend=null,C()}},6e4);return A.unsuspend=m,function(){A.unsuspend=null,clearTimeout(v)}}:null}function nC(){if(this.count--,this.count===0){if(this.stylesheets)eT(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var aC=null;function eT(A,m){A.stylesheets=null,A.unsuspend!==null&&(A.count++,aC=new Map,m.forEach(cfe,A),aC=null,nC.call(A))}function cfe(A,m){if(!(m.state.loading&4)){var v=aC.get(A);if(v)var C=v.get(null);else{v=new Map,aC.set(A,v);for(var U=A.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<U.length;q++){var ue=U[q];(ue.nodeName==="LINK"||ue.getAttribute("media")!=="not all")&&(v.set(ue.dataset.precedence,ue),C=ue)}C&&v.set(null,C)}U=m.instance,ue=U.getAttribute("data-precedence"),q=v.get(ue)||C,q===C&&v.set(null,U),v.set(ue,U),this.count++,C=nC.bind(this),U.addEventListener("load",C),U.addEventListener("error",C),q?q.parentNode.insertBefore(U,q.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(U,A.firstChild)),m.state.loading|=4}}var Lb={$$typeof:_,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function ufe(A,m,v,C,U,q,ue,be){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oa(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oa(0),this.hiddenUpdates=oa(null),this.identifierPrefix=C,this.onUncaughtError=U,this.onCaughtError=q,this.onRecoverableError=ue,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function h7(A,m,v,C,U,q,ue,be,Pe,lt,St,Ot){return A=new ufe(A,m,v,ue,be,Pe,lt,Ot),m=1,q===!0&&(m|=24),q=Pi(3,null,null,m),A.current=q,q.stateNode=A,m=ob(),m.refCount++,A.pooledCache=m,m.refCount++,q.memoizedState={element:C,isDehydrated:v,cache:m},Qe(q),A}function m7(A){return A?(A=ti,A):ti}function p7(A,m,v,C,U,q){U=m7(U),C.context===null?C.context=U:C.pendingContext=U,C=_t(m),C.payload={element:v},q=q===void 0?null:q,q!==null&&(C.callback=q),v=jt(A,C,m),v!==null&&(wc(v,A,m),kt(v,A,m))}function g7(A,m){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var v=A.retryLane;A.retryLane=v!==0&&v<m?v:m}}function tT(A,m){g7(A,m),(A=A.alternate)&&g7(A,m)}function x7(A){if(A.tag===13){var m=rd(A,67108864);m!==null&&wc(m,A,67108864),tT(A,67108864)}}var sC=!0;function dfe(A,m,v,C){var U=H.T;H.T=null;var q=K.p;try{K.p=2,rT(A,m,v,C)}finally{K.p=q,H.T=U}}function Afe(A,m,v,C){var U=H.T;H.T=null;var q=K.p;try{K.p=8,rT(A,m,v,C)}finally{K.p=q,H.T=U}}function rT(A,m,v,C){if(sC){var U=nT(C);if(U===null)VB(A,m,C,iC,v),b7(A,C);else if(hfe(U,A,m,v,C))C.stopPropagation();else if(b7(A,C),m&4&&-1<ffe.indexOf(A)){for(;U!==null;){var q=je(U);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var ue=Nr(q.pendingLanes);if(ue!==0){var be=q;for(be.pendingLanes|=2,be.entangledLanes|=2;ue;){var Pe=1<<31-Pt(ue);be.entanglements[1]|=Pe,ue&=~Pe}yA(q),(ua&6)===0&&(VE=Ie()+500,jb(0))}}break;case 13:be=rd(q,2),be!==null&&wc(be,q,2),$E(),tT(q,2)}if(q=nT(C),q===null&&VB(A,m,C,iC,v),q===U)break;U=q}U!==null&&C.stopPropagation()}else VB(A,m,C,null,v)}}function nT(A){return A=la(A),aT(A)}var iC=null;function aT(A){if(iC=null,A=Ne(A),A!==null){var m=s(A);if(m===null)A=null;else{var v=m.tag;if(v===13){if(A=i(m),A!==null)return A;A=null}else if(v===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;A=null}else m!==A&&(A=null)}}return iC=A,null}function v7(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ue()){case Ye:return 2;case ye:return 8;case Oe:case Re:return 32;case qe:return 268435456;default:return 32}default:return 32}}var sT=!1,h0=null,m0=null,p0=null,Mb=new Map,Ub=new Map,g0=[],ffe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function b7(A,m){switch(A){case"focusin":case"focusout":h0=null;break;case"dragenter":case"dragleave":m0=null;break;case"mouseover":case"mouseout":p0=null;break;case"pointerover":case"pointerout":Mb.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ub.delete(m.pointerId)}}function Qb(A,m,v,C,U,q){return A===null||A.nativeEvent!==q?(A={blockedOn:m,domEventName:v,eventSystemFlags:C,nativeEvent:q,targetContainers:[U]},m!==null&&(m=je(m),m!==null&&x7(m)),A):(A.eventSystemFlags|=C,m=A.targetContainers,U!==null&&m.indexOf(U)===-1&&m.push(U),A)}function hfe(A,m,v,C,U){switch(m){case"focusin":return h0=Qb(h0,A,m,v,C,U),!0;case"dragenter":return m0=Qb(m0,A,m,v,C,U),!0;case"mouseover":return p0=Qb(p0,A,m,v,C,U),!0;case"pointerover":var q=U.pointerId;return Mb.set(q,Qb(Mb.get(q)||null,A,m,v,C,U)),!0;case"gotpointercapture":return q=U.pointerId,Ub.set(q,Qb(Ub.get(q)||null,A,m,v,C,U)),!0}return!1}function y7(A){var m=Ne(A.target);if(m!==null){var v=s(m);if(v!==null){if(m=v.tag,m===13){if(m=i(v),m!==null){A.blockedOn=m,wt(A.priority,function(){if(v.tag===13){var C=yc();C=gt(C);var U=rd(v,C);U!==null&&wc(U,v,C),tT(v,C)}});return}}else if(m===3&&v.stateNode.current.memoizedState.isDehydrated){A.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}A.blockedOn=null}function oC(A){if(A.blockedOn!==null)return!1;for(var m=A.targetContainers;0<m.length;){var v=nT(A.nativeEvent);if(v===null){v=A.nativeEvent;var C=new v.constructor(v.type,v);Sl=C,v.target.dispatchEvent(C),Sl=null}else return m=je(v),m!==null&&x7(m),A.blockedOn=v,!1;m.shift()}return!0}function w7(A,m,v){oC(A)&&v.delete(m)}function mfe(){sT=!1,h0!==null&&oC(h0)&&(h0=null),m0!==null&&oC(m0)&&(m0=null),p0!==null&&oC(p0)&&(p0=null),Mb.forEach(w7),Ub.forEach(w7)}function lC(A,m){A.blockedOn===m&&(A.blockedOn=null,sT||(sT=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mfe)))}var cC=null;function E7(A){cC!==A&&(cC=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){cC===A&&(cC=null);for(var m=0;m<A.length;m+=3){var v=A[m],C=A[m+1],U=A[m+2];if(typeof C!="function"){if(aT(C||v)===null)continue;break}var q=je(v);q!==null&&(A.splice(m,3),m-=3,Au(q,{pending:!0,data:U,method:v.method,action:C},C,U))}}))}function Hb(A){function m(Pe){return lC(Pe,A)}h0!==null&&lC(h0,A),m0!==null&&lC(m0,A),p0!==null&&lC(p0,A),Mb.forEach(m),Ub.forEach(m);for(var v=0;v<g0.length;v++){var C=g0[v];C.blockedOn===A&&(C.blockedOn=null)}for(;0<g0.length&&(v=g0[0],v.blockedOn===null);)y7(v),v.blockedOn===null&&g0.shift();if(v=(A.ownerDocument||A).$$reactFormReplay,v!=null)for(C=0;C<v.length;C+=3){var U=v[C],q=v[C+1],ue=U[gr]||null;if(typeof q=="function")ue||E7(v);else if(ue){var be=null;if(q&&q.hasAttribute("formAction")){if(U=q,ue=q[gr]||null)be=ue.formAction;else if(aT(U)!==null)continue}else be=ue.action;typeof be=="function"?v[C+1]=be:(v.splice(C,3),C-=3),E7(v)}}}function iT(A){this._internalRoot=A}uC.prototype.render=iT.prototype.render=function(A){var m=this._internalRoot;if(m===null)throw Error(n(409));var v=m.current,C=yc();p7(v,C,A,m,null,null)},uC.prototype.unmount=iT.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var m=A.containerInfo;p7(A.current,2,null,A,null,null),$E(),m[Kr]=null}};function uC(A){this._internalRoot=A}uC.prototype.unstable_scheduleHydration=function(A){if(A){var m=xt();A={blockedOn:null,target:A,priority:m};for(var v=0;v<g0.length&&m!==0&&m<g0[v].priority;v++);g0.splice(v,0,A),v===0&&y7(A)}};var C7=t.version;if(C7!=="19.1.1")throw Error(n(527,C7,"19.1.1"));K.findDOMNode=function(A){var m=A._reactInternals;if(m===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=c(m),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var pfe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dC=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dC.isDisabled&&dC.supportsFiber)try{pt=dC.inject(pfe),It=dC}catch{}}return zb.createRoot=function(A,m){if(!a(A))throw Error(n(299));var v=!1,C="",U=UM,q=QM,ue=HM,be=null;return m!=null&&(m.unstable_strictMode===!0&&(v=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(U=m.onUncaughtError),m.onCaughtError!==void 0&&(q=m.onCaughtError),m.onRecoverableError!==void 0&&(ue=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(be=m.unstable_transitionCallbacks)),m=h7(A,1,!1,null,null,v,C,U,q,ue,be,null),A[Kr]=m.current,HB(A),new iT(m)},zb.hydrateRoot=function(A,m,v){if(!a(A))throw Error(n(299));var C=!1,U="",q=UM,ue=QM,be=HM,Pe=null,lt=null;return v!=null&&(v.unstable_strictMode===!0&&(C=!0),v.identifierPrefix!==void 0&&(U=v.identifierPrefix),v.onUncaughtError!==void 0&&(q=v.onUncaughtError),v.onCaughtError!==void 0&&(ue=v.onCaughtError),v.onRecoverableError!==void 0&&(be=v.onRecoverableError),v.unstable_transitionCallbacks!==void 0&&(Pe=v.unstable_transitionCallbacks),v.formState!==void 0&&(lt=v.formState)),m=h7(A,1,!0,m,v??null,C,U,q,ue,be,Pe,lt),m.context=m7(null),v=m.current,C=yc(),C=gt(C),U=_t(C),U.callback=null,jt(v,U,C),v=C,m.current.lanes=v,Ba(m,v),yA(m),A[Kr]=m.current,HB(A),new uC(m)},zb.version="19.1.1",zb}var O7;function Tfe(){if(O7)return uT.exports;O7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),uT.exports=Bfe(),uT.exports}var jfe=Tfe();const Ife=Cl(jfe),Ffe=()=>{};var D7={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},Ofe=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],o=e[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},hY={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,o=i?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;c||(p=64,i||(h=64)),n.push(r[d],r[f],r[h],r[p])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(fY(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Ofe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||o==null||u==null||f==null)throw new Dfe;const h=s<<2|o>>4;if(n.push(h),u!==64){const p=o<<4&240|u>>2;if(n.push(p),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Dfe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pfe=function(e){const t=fY(e);return hY.encodeByteArray(t,!0)},I5=function(e){return Pfe(e).replace(/\./g,"")},mY=function(e){try{return hY.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rfe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lfe=()=>Rfe().__FIREBASE_DEFAULTS__,Mfe=()=>{if(typeof process>"u"||typeof D7>"u")return;const e=D7.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Ufe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&mY(e[1]);return t&&JSON.parse(t)},MS=()=>{try{return Ffe()||Lfe()||Mfe()||Ufe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},pY=e=>{var t,r;return(r=(t=MS())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},dD=e=>{const t=pY(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},gY=()=>{var e;return(e=MS())==null?void 0:e.config},xY=e=>{var t;return(t=MS())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qfe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function US(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vY(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[I5(JSON.stringify(r)),I5(JSON.stringify(i)),""].join(".")}const Vy={};function Hfe(){const e={prod:[],emulator:[]};for(const t of Object.keys(Vy))Vy[t]?e.emulator.push(t):e.prod.push(t);return e}function Vfe(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let P7=!1;function QS(e,t){if(typeof window>"u"||typeof document>"u"||!Bh(window.location.host)||Vy[e]===t||Vy[e]||P7)return;Vy[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=Hfe().prod.length>0;function i(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{P7=!0,i()},h}function d(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=Vfe(n),p=r("text"),g=document.getElementById(p)||document.createElement("span"),x=r("learnmore"),b=document.getElementById(x)||document.createElement("a"),y=r("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const _=h.element;o(_),d(b,x);const j=u();c(w,y),_.append(w,g,b,j),document.body.appendChild(_)}s?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zfe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nl())}function $fe(){var t;const e=(t=MS())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gfe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kfe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function qfe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Wfe(){const e=nl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Xfe(){return!$fe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yfe(){try{return typeof indexedDB=="object"}catch{return!1}}function Jfe(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zfe="FirebaseError";class Md extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=Zfe,Object.setPrototypeOf(this,Md.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,x2.prototype.create)}}class x2{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?ehe(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new Md(a,o,n)}}function ehe(e,t){return e.replace(the,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const the=/\{\$([^}]+)}/g;function rhe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function dm(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(R7(s)&&R7(i)){if(!dm(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function R7(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function yy(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function wy(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function nhe(e,t){const r=new ahe(e,t);return r.subscribe.bind(r)}class ahe{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");she(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=hT),a.error===void 0&&(a.error=hT),a.complete===void 0&&(a.complete=hT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function she(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function hT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(e){return e&&e._delegate?e._delegate:e}class Ah{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ihe=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new Qfe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(lhe(t))try{this.getOrInitializeService({instanceIdentifier:xp})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=xp){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xp){return this.instances.has(t)}getOptions(t=xp){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:ohe(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=xp){return this.component?this.component.multipleInstances?t:xp:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function ohe(e){return e===xp?void 0:e}function lhe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class che{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new ihe(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Sn||(Sn={}));const uhe={debug:Sn.DEBUG,verbose:Sn.VERBOSE,info:Sn.INFO,warn:Sn.WARN,error:Sn.ERROR,silent:Sn.SILENT},dhe=Sn.INFO,Ahe={[Sn.DEBUG]:"log",[Sn.VERBOSE]:"log",[Sn.INFO]:"info",[Sn.WARN]:"warn",[Sn.ERROR]:"error"},fhe=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=Ahe[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let AD=class{constructor(t){this.name=t,this._logLevel=dhe,this._logHandler=fhe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Sn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?uhe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Sn.DEBUG,...t),this._logHandler(this,Sn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Sn.VERBOSE,...t),this._logHandler(this,Sn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Sn.INFO,...t),this._logHandler(this,Sn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Sn.WARN,...t),this._logHandler(this,Sn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Sn.ERROR,...t),this._logHandler(this,Sn.ERROR,...t)}};const hhe=(e,t)=>t.some(r=>e instanceof r);let L7,M7;function mhe(){return L7||(L7=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function phe(){return M7||(M7=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bY=new WeakMap,o6=new WeakMap,yY=new WeakMap,mT=new WeakMap,fD=new WeakMap;function ghe(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(Y0(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&bY.set(r,e)}).catch(()=>{}),fD.set(t,e),t}function xhe(e){if(o6.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});o6.set(e,t)}let l6={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return o6.get(e);if(t==="objectStoreNames")return e.objectStoreNames||yY.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Y0(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function vhe(e){l6=e(l6)}function bhe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(pT(this),t,...r);return yY.set(n,t.sort?t.sort():[t]),Y0(n)}:phe().includes(e)?function(...t){return e.apply(pT(this),t),Y0(bY.get(this))}:function(...t){return Y0(e.apply(pT(this),t))}}function yhe(e){return typeof e=="function"?bhe(e):(e instanceof IDBTransaction&&xhe(e),hhe(e,mhe())?new Proxy(e,l6):e)}function Y0(e){if(e instanceof IDBRequest)return ghe(e);if(mT.has(e))return mT.get(e);const t=yhe(e);return t!==e&&(mT.set(e,t),fD.set(t,e)),t}const pT=e=>fD.get(e);function whe(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=Y0(i);return n&&i.addEventListener("upgradeneeded",c=>{n(Y0(i.result),c.oldVersion,c.newVersion,Y0(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Ehe=["get","getKey","getAll","getAllKeys","count"],Che=["put","add","delete","clear"],gT=new Map;function U7(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(gT.get(t))return gT.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=Che.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Ehe.includes(r)))return;const s=async function(i,...o){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&c.done]))[0]};return gT.set(t,s),s}vhe(e=>({...e,get:(t,r,n)=>U7(t,r)||e.get(t,r,n),has:(t,r)=>!!U7(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _he{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(Nhe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function Nhe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const c6="@firebase/app",Q7="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new AD("@firebase/app"),She="@firebase/app-compat",khe="@firebase/analytics-compat",Bhe="@firebase/analytics",The="@firebase/app-check-compat",jhe="@firebase/app-check",Ihe="@firebase/auth",Fhe="@firebase/auth-compat",Ohe="@firebase/database",Dhe="@firebase/data-connect",Phe="@firebase/database-compat",Rhe="@firebase/functions",Lhe="@firebase/functions-compat",Mhe="@firebase/installations",Uhe="@firebase/installations-compat",Qhe="@firebase/messaging",Hhe="@firebase/messaging-compat",Vhe="@firebase/performance",zhe="@firebase/performance-compat",$he="@firebase/remote-config",Ghe="@firebase/remote-config-compat",Khe="@firebase/storage",qhe="@firebase/storage-compat",Whe="@firebase/firestore",Xhe="@firebase/ai",Yhe="@firebase/firestore-compat",Jhe="firebase",Zhe="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6="[DEFAULT]",e0e={[c6]:"fire-core",[She]:"fire-core-compat",[Bhe]:"fire-analytics",[khe]:"fire-analytics-compat",[jhe]:"fire-app-check",[The]:"fire-app-check-compat",[Ihe]:"fire-auth",[Fhe]:"fire-auth-compat",[Ohe]:"fire-rtdb",[Dhe]:"fire-data-connect",[Phe]:"fire-rtdb-compat",[Rhe]:"fire-fn",[Lhe]:"fire-fn-compat",[Mhe]:"fire-iid",[Uhe]:"fire-iid-compat",[Qhe]:"fire-fcm",[Hhe]:"fire-fcm-compat",[Vhe]:"fire-perf",[zhe]:"fire-perf-compat",[$he]:"fire-rc",[Ghe]:"fire-rc-compat",[Khe]:"fire-gcs",[qhe]:"fire-gcs-compat",[Whe]:"fire-fst",[Yhe]:"fire-fst-compat",[Xhe]:"fire-vertex","fire-js":"fire-js",[Jhe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=new Map,t0e=new Map,d6=new Map;function H7(e,t){try{e.container.addComponent(t)}catch(r){fh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function Am(e){const t=e.name;if(d6.has(t))return fh.debug(`There were multiple attempts to register component ${t}.`),!1;d6.set(t,e);for(const r of vw.values())H7(r,e);for(const r of t0e.values())H7(r,e);return!0}function b2(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function jc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0e={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},J0=new x2("app","Firebase",r0e);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0e{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ah("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw J0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg=Zhe;function hD(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:u6,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw J0.create("bad-app-name",{appName:String(a)});if(r||(r=gY()),!r)throw J0.create("no-options");const s=vw.get(a);if(s){if(dm(r,s.options)&&dm(n,s.config))return s;throw J0.create("duplicate-app",{appName:a})}const i=new che(a);for(const c of d6.values())i.addComponent(c);const o=new n0e(r,n,i);return vw.set(a,o),o}function HS(e=u6){const t=vw.get(e);if(!t&&e===u6&&gY())return hD();if(!t)throw J0.create("no-app",{appName:e});return t}function V7(){return Array.from(vw.values())}function Ru(e,t,r){let n=e0e[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),fh.warn(i.join(" "));return}Am(new Ah(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0e="firebase-heartbeat-database",s0e=1,bw="firebase-heartbeat-store";let xT=null;function wY(){return xT||(xT=whe(a0e,s0e,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(bw)}catch(r){console.warn(r)}}}}).catch(e=>{throw J0.create("idb-open",{originalErrorMessage:e.message})})),xT}async function i0e(e){try{const r=(await wY()).transaction(bw),n=await r.objectStore(bw).get(EY(e));return await r.done,n}catch(t){if(t instanceof Md)fh.warn(t.message);else{const r=J0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});fh.warn(r.message)}}}async function z7(e,t){try{const n=(await wY()).transaction(bw,"readwrite");await n.objectStore(bw).put(t,EY(e)),await n.done}catch(r){if(r instanceof Md)fh.warn(r.message);else{const n=J0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});fh.warn(n.message)}}}function EY(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0e=1024,l0e=30;class c0e{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new d0e(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$7();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>l0e){const i=A0e(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){fh.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=$7(),{heartbeatsToSend:n,unsentEntries:a}=u0e(this._heartbeatsCache.heartbeats),s=I5(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return fh.warn(r),""}}}function $7(){return new Date().toISOString().substring(0,10)}function u0e(e,t=o0e){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),G7(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),G7(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class d0e{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yfe()?Jfe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await i0e(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return z7(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return z7(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function G7(e){return I5(JSON.stringify({version:2,heartbeats:e})).length}function A0e(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0e(e){Am(new Ah("platform-logger",t=>new _he(t),"PRIVATE")),Am(new Ah("heartbeat",t=>new c0e(t),"PRIVATE")),Ru(c6,Q7,e),Ru(c6,Q7,"esm2020"),Ru("fire-js","")}f0e("");function CY(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h0e=CY,_Y=new x2("auth","Firebase",CY());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5=new AD("@firebase/auth");function m0e(e,...t){F5.logLevel<=Sn.WARN&&F5.warn(`Auth (${Cg}): ${e}`,...t)}function V_(e,...t){F5.logLevel<=Sn.ERROR&&F5.error(`Auth (${Cg}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(e,...t){throw mD(e,...t)}function VA(e,...t){return mD(e,...t)}function NY(e,t,r){const n={...h0e(),[t]:r};return new x2("auth","Firebase",n).create(t,{appName:e.name})}function Z0(e){return NY(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mD(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return _Y.create(e,...t)}function Qr(e,t,...r){if(!e)throw mD(t,...r)}function Wf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw V_(t),new Error(t)}function hh(e,t){e||Wf(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A6(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function p0e(){return K7()==="http:"||K7()==="https:"}function K7(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0e(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(p0e()||Kfe()||"connection"in navigator)?navigator.onLine:!0}function x0e(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(t,r){this.shortDelay=t,this.longDelay=r,hh(r>t,"Short delay should be less than long delay!"),this.isMobile=zfe()||qfe()}get(){return g0e()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(e,t){hh(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0e={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0e=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],y0e=new y2(3e4,6e4);function jm(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Th(e,t,r,n,a={}){return kY(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const o=v2({key:e.config.apiKey,...i}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return Gfe()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Bh(e.emulatorConfig.host)&&(u.credentials="include"),SY.fetch()(await BY(e,e.config.apiHost,r,o),u)})}async function kY(e,t,r){e._canInitEmulator=!1;const n={...v0e,...t};try{const a=new E0e(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw AC(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw AC(e,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw AC(e,"email-already-in-use",i);if(c==="USER_DISABLED")throw AC(e,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw NY(e,d,u);Pd(e,d)}}catch(a){if(a instanceof Md)throw a;Pd(e,"network-request-failed",{message:String(a)})}}async function VS(e,t,r,n,a={}){const s=await Th(e,t,r,n,a);return"mfaPendingCredential"in s&&Pd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function BY(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?pD(e.config,a):`${e.config.apiScheme}://${a}`;return b0e.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function w0e(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class E0e{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(VA(this.auth,"network-request-failed")),y0e.get())})}}function AC(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=VA(e,t,n);return a.customData._tokenResponse=r,a}function q7(e){return e!==void 0&&e.enterprise!==void 0}class C0e{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return w0e(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _0e(e,t){return Th(e,"GET","/v2/recaptchaConfig",jm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N0e(e,t){return Th(e,"POST","/v1/accounts:delete",t)}async function O5(e,t){return Th(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function S0e(e,t=!1){const r=Xn(e),n=await r.getIdToken(t),a=gD(n);Qr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:zy(vT(a.auth_time)),issuedAtTime:zy(vT(a.iat)),expirationTime:zy(vT(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function vT(e){return Number(e)*1e3}function gD(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return V_("JWT malformed, contained fewer than 3 sections"),null;try{const a=mY(r);return a?JSON.parse(a):(V_("Failed to decode base64 JWT payload"),null)}catch(a){return V_("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function W7(e){const t=gD(e);return Qr(t,"internal-error"),Qr(typeof t.exp<"u","internal-error"),Qr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yw(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Md&&k0e(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function k0e({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0e{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=zy(this.lastLoginAt),this.creationTime=zy(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D5(e){var f;const t=e.auth,r=await e.getIdToken(),n=await yw(e,O5(t,{idToken:r}));Qr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?TY(a.providerUserInfo):[],i=j0e(e.providerData,s),o=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new f6(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function T0e(e){const t=Xn(e);await D5(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function j0e(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function TY(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I0e(e,t){const r=await kY(e,{},async()=>{const n=v2({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await BY(e,a,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:n};return e.emulatorConfig&&Bh(e.emulatorConfig.host)&&(c.credentials="include"),SY.fetch()(i,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function F0e(e,t){return Th(e,"POST","/v2/accounts:revokeToken",jm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Qr(t.idToken,"internal-error"),Qr(typeof t.idToken<"u","internal-error"),Qr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):W7(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Qr(t.length!==0,"internal-error");const r=W7(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Qr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await I0e(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new hv;return n&&(Qr(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Qr(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Qr(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new hv,this.toJSON())}_performRefresh(){return Wf("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(e,t){Qr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class _d{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new B0e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new f6(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await yw(this,this.stsTokenManager.getToken(this.auth,t));return Qr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return S0e(this,t)}reload(){return T0e(this)}_assign(t){this!==t&&(Qr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new _d({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await D5(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jc(this.auth.app))return Promise.reject(Z0(this.auth));const t=await this.getIdToken();return await yw(this,N0e(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:p,providerData:g,stsTokenManager:x}=r;Qr(f&&x,t,"internal-error");const b=hv.fromJSON(this.name,x);Qr(typeof f=="string",t,"internal-error"),v0(n,t.name),v0(a,t.name),Qr(typeof h=="boolean",t,"internal-error"),Qr(typeof p=="boolean",t,"internal-error"),v0(s,t.name),v0(i,t.name),v0(o,t.name),v0(c,t.name),v0(u,t.name),v0(d,t.name);const y=new _d({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:p,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new hv;a.updateFromServerResponse(r);const s=new _d({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await D5(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Qr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?TY(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new hv;o.updateFromIdToken(n);const c=new _d({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new f6(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=new Map;function Xf(e){hh(e instanceof Function,"Expected a class definition");let t=X7.get(e);return t?(hh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,X7.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jY{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}jY.type="NONE";const Y7=jY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(e,t,r){return`firebase:${e}:${t}:${r}`}class mv{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=z_(this.userKey,a.apiKey,s),this.fullPersistenceKey=z_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await O5(this.auth,{idToken:t}).catch(()=>{});return r?_d._fromGetAccountInfoResponse(this.auth,r,t):null}return _d._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new mv(Xf(Y7),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Xf(Y7);const i=z_(n,t.config.apiKey,t.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let f;if(typeof d=="string"){const h=await O5(t,{idToken:d}).catch(()=>{});if(!h)break;f=await _d._fromGetAccountInfoResponse(t,h,d)}else f=_d._fromJSON(t,d);u!==s&&(o=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new mv(s,t,n):(s=c[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new mv(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(DY(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(IY(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(RY(t))return"Blackberry";if(LY(t))return"Webos";if(FY(t))return"Safari";if((t.includes("chrome/")||OY(t))&&!t.includes("edge/"))return"Chrome";if(PY(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function IY(e=nl()){return/firefox\//i.test(e)}function FY(e=nl()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function OY(e=nl()){return/crios\//i.test(e)}function DY(e=nl()){return/iemobile/i.test(e)}function PY(e=nl()){return/android/i.test(e)}function RY(e=nl()){return/blackberry/i.test(e)}function LY(e=nl()){return/webos/i.test(e)}function xD(e=nl()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function O0e(e=nl()){var t;return xD(e)&&!!((t=window.navigator)!=null&&t.standalone)}function D0e(){return Wfe()&&document.documentMode===10}function MY(e=nl()){return xD(e)||PY(e)||LY(e)||RY(e)||/windows phone/i.test(e)||DY(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UY(e,t=[]){let r;switch(e){case"Browser":r=J7(nl());break;case"Worker":r=`${J7(nl())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${Cg}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0e{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,o)=>{try{const c=t(s);i(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R0e(e,t={}){return Th(e,"GET","/v2/passwordPolicy",jm(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0e=6;class M0e{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??L0e,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0e{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Z7(this),this.idTokenSubscription=new Z7(this),this.beforeStateQueue=new P0e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_Y,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Xf(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await mv.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await O5(this,{idToken:t}),n=await _d._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(jc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!i||i===o)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await D5(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=x0e()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(jc(this.app))return Promise.reject(Z0(this));const r=t?Xn(t):null;return r&&Qr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Qr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return jc(this.app)?Promise.reject(Z0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return jc(this.app)?Promise.reject(Z0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xf(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await R0e(this),r=new M0e(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new x2("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await F0e(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Xf(t)||this._popupRedirectResolver;Qr(r,this,"argument-error"),this.redirectPersistenceManager=await mv.create(this,[Xf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Qr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=t.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=UY(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(jc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&m0e(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function _g(e){return Xn(e)}class Z7{constructor(t){this.auth=t,this.observer=null,this.addObserver=nhe(r=>this.observer=r)}get next(){return Qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Q0e(e){zS=e}function QY(e){return zS.loadJS(e)}function H0e(){return zS.recaptchaEnterpriseScript}function V0e(){return zS.gapiScript}function z0e(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class $0e{constructor(){this.enterprise=new G0e}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class G0e{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const K0e="recaptcha-enterprise",HY="NO_RECAPTCHA";class q0e{constructor(t){this.type=K0e,this.auth=_g(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{_0e(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new C0e(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{o(c)})})}function a(s,i,o){const c=window.grecaptcha;q7(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(HY)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $0e().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&q7(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=H0e();c.length!==0&&(c+=o),QY(c).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function e9(e,t,r,n=!1,a=!1){const s=new q0e(e);let i;if(a)i=HY;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function h6(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await e9(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await e9(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0e(e,t){const r=b2(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(dm(s,t??{}))return a;Pd(a,"already-initialized")}return r.initialize({options:t})}function X0e(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Xf);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function Y0e(e,t,r){const n=_g(e);Qr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=VY(t),{host:i,port:o}=J0e(t),c=o===null?"":`:${o}`,u={url:`${s}//${i}${c}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Qr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Qr(dm(u,n.config.emulator)&&dm(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Bh(i)?(US(`${s}//${i}${c}`),QS("Auth",!0)):Z0e()}function VY(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function J0e(e){const t=VY(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:t9(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:t9(i)}}}function t9(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Z0e(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return Wf("not implemented")}_getIdTokenResponse(t){return Wf("not implemented")}_linkToIdToken(t,r){return Wf("not implemented")}_getReauthenticationResolver(t){return Wf("not implemented")}}async function eme(e,t){return Th(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tme(e,t){return VS(e,"POST","/v1/accounts:signInWithPassword",jm(e,t))}async function rme(e,t){return Th(e,"POST","/v1/accounts:sendOobCode",jm(e,t))}async function nme(e,t){return rme(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ame(e,t){return VS(e,"POST","/v1/accounts:signInWithEmailLink",jm(e,t))}async function sme(e,t){return VS(e,"POST","/v1/accounts:signInWithEmailLink",jm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ww extends vD{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new ww(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new ww(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h6(t,r,"signInWithPassword",tme);case"emailLink":return ame(t,{email:this._email,oobCode:this._password});default:Pd(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return h6(t,n,"signUpPassword",eme);case"emailLink":return sme(t,{idToken:r,email:this._email,oobCode:this._password});default:Pd(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pv(e,t){return VS(e,"POST","/v1/accounts:signInWithIdp",jm(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ime="http://localhost";class ag extends vD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new ag(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Pd("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new ag(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return pv(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,pv(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,pv(t,r)}buildRequest(){const t={requestUri:ime,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=v2(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ome(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lme(e){const t=yy(wy(e)).link,r=t?yy(wy(t)).deep_link_id:null,n=yy(wy(e)).deep_link_id;return(n?yy(wy(n)).link:null)||n||r||t||e}class bD{constructor(t){const r=yy(wy(t)),n=r.apiKey??null,a=r.oobCode??null,s=ome(r.mode??null);Qr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=lme(t);try{return new bD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(){this.providerId=_1.PROVIDER_ID}static credential(t,r){return ww._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=bD.parseLink(r);return Qr(n,"argument-error"),ww._fromEmailAndCode(t,n.code,n.tenantId)}}_1.PROVIDER_ID="password";_1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2 extends zY{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends w2{constructor(){super("facebook.com")}static credential(t){return ag._fromParams({providerId:D0.PROVIDER_ID,signInMethod:D0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return D0.credentialFromTaggedObject(t)}static credentialFromError(t){return D0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return D0.credential(t.oauthAccessToken)}catch{return null}}}D0.FACEBOOK_SIGN_IN_METHOD="facebook.com";D0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0 extends w2{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return ag._fromParams({providerId:P0.PROVIDER_ID,signInMethod:P0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return P0.credentialFromTaggedObject(t)}static credentialFromError(t){return P0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return P0.credential(r,n)}catch{return null}}}P0.GOOGLE_SIGN_IN_METHOD="google.com";P0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0 extends w2{constructor(){super("github.com")}static credential(t){return ag._fromParams({providerId:R0.PROVIDER_ID,signInMethod:R0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return R0.credentialFromTaggedObject(t)}static credentialFromError(t){return R0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return R0.credential(t.oauthAccessToken)}catch{return null}}}R0.GITHUB_SIGN_IN_METHOD="github.com";R0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0 extends w2{constructor(){super("twitter.com")}static credential(t,r){return ag._fromParams({providerId:L0.PROVIDER_ID,signInMethod:L0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return L0.credentialFromTaggedObject(t)}static credentialFromError(t){return L0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return L0.credential(r,n)}catch{return null}}}L0.TWITTER_SIGN_IN_METHOD="twitter.com";L0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await _d._fromIdTokenResponse(t,n,a),i=r9(n);return new Lv({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=r9(n);return new Lv({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function r9(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5 extends Md{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,P5.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new P5(t,r,n,a)}}function $Y(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?P5._fromErrorAndOperation(e,s,t,n):s})}async function cme(e,t,r=!1){const n=await yw(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return Lv._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ume(e,t,r=!1){const{auth:n}=e;if(jc(n.app))return Promise.reject(Z0(n));const a="reauthenticate";try{const s=await yw(e,$Y(n,a,t,e),r);Qr(s.idToken,n,"internal-error");const i=gD(s.idToken);Qr(i,n,"internal-error");const{sub:o}=i;return Qr(e.uid===o,n,"user-mismatch"),Lv._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Pd(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GY(e,t,r=!1){if(jc(e.app))return Promise.reject(Z0(e));const n="signIn",a=await $Y(e,n,t),s=await Lv._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function dme(e,t){return GY(_g(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ame(e){const t=_g(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function fme(e,t,r){const n=_g(e);await h6(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",nme)}function hme(e,t,r){return jc(e.app)?Promise.reject(Z0(e)):dme(Xn(e),_1.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Ame(e),n})}function mme(e,t,r,n){return Xn(e).onIdTokenChanged(t,r,n)}function pme(e,t,r){return Xn(e).beforeAuthStateChanged(t,r)}function KY(e,t,r,n){return Xn(e).onAuthStateChanged(t,r,n)}function gme(e){return Xn(e).signOut()}const R5="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qY{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(R5,"1"),this.storage.removeItem(R5),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xme=1e3,vme=10;class WY extends qY{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MY(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,c)=>{this.notifyListeners(i,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);D0e()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,vme):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},xme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}WY.type="LOCAL";const bme=WY;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XY extends qY{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}XY.type="SESSION";const YY=XY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yme(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new $S(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),c=await yme(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$S.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wme{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,c)=>{const u=yD("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(){return window}function Eme(e){zA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JY(){return typeof zA().WorkerGlobalScope<"u"&&typeof zA().importScripts=="function"}async function Cme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _me(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function Nme(){return JY()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZY="firebaseLocalStorageDb",Sme=1,L5="firebaseLocalStorage",eJ="fbase_key";class E2{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function GS(e,t){return e.transaction([L5],t?"readwrite":"readonly").objectStore(L5)}function kme(){const e=indexedDB.deleteDatabase(ZY);return new E2(e).toPromise()}function m6(){const e=indexedDB.open(ZY,Sme);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(L5,{keyPath:eJ})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(L5)?t(n):(n.close(),await kme(),t(await m6()))})})}async function n9(e,t,r){const n=GS(e,!0).put({[eJ]:t,value:r});return new E2(n).toPromise()}async function Bme(e,t){const r=GS(e,!1).get(t),n=await new E2(r).toPromise();return n===void 0?null:n.value}function a9(e,t){const r=GS(e,!0).delete(t);return new E2(r).toPromise()}const Tme=800,jme=3;class tJ{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await m6(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>jme)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return JY()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$S._getInstance(Nme()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await Cme(),!this.activeServiceWorker)return;this.sender=new wme(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||_me()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await m6();return await n9(t,R5,"1"),await a9(t,R5),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>n9(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>Bme(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>a9(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=GS(a,!1).getAll();return new E2(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Tme)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}tJ.type="LOCAL";const Ime=tJ;new y2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fme(e,t){return t?Xf(t):(Qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD extends vD{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return pv(t,this._buildIdpRequest())}_linkToIdToken(t,r){return pv(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return pv(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function Ome(e){return GY(e.auth,new wD(e),e.bypassAuthState)}function Dme(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),ume(r,new wD(e),e.bypassAuthState)}async function Pme(e){const{auth:t,user:r}=e;return Qr(r,t,"internal-error"),cme(r,new wD(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=t;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Ome;case"linkViaPopup":case"linkViaRedirect":return Pme;case"reauthViaPopup":case"reauthViaRedirect":return Dme;default:Pd(this.auth,"internal-error")}}resolve(t){hh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){hh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rme=new y2(2e3,1e4);class ev extends rJ{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,ev.currentPopupAction&&ev.currentPopupAction.cancel(),ev.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Qr(t,this.auth,"internal-error"),t}async onExecution(){hh(this.filter.length===1,"Popup operations only handle one event");const t=yD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(VA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(VA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ev.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(VA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Rme.get())};t()}}ev.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lme="pendingRedirect",$_=new Map;class Mme extends rJ{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=$_.get(this.auth._key());if(!t){try{const n=await Ume(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}$_.set(this.auth._key(),t)}return this.bypassAuthState||$_.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ume(e,t){const r=Vme(t),n=Hme(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function Qme(e,t){$_.set(e._key(),t)}function Hme(e){return Xf(e._redirectPersistence)}function Vme(e){return z_(Lme,e.config.apiKey,e.name)}async function zme(e,t,r=!1){if(jc(e.app))return Promise.reject(Z0(e));const n=_g(e),a=Fme(n,t),i=await new Mme(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $me=600*1e3;class Gme{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Kme(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!nJ(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(VA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=$me&&this.cachedEventUids.clear(),this.cachedEventUids.has(s9(t))}saveEventToCache(t){this.cachedEventUids.add(s9(t)),this.lastProcessedEventTime=Date.now()}}function s9(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function nJ({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Kme(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nJ(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qme(e,t={}){return Th(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wme=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xme=/^https?/;async function Yme(e){if(e.config.emulator)return;const{authorizedDomains:t}=await qme(e);for(const r of t)try{if(Jme(r))return}catch{}Pd(e,"unauthorized-domain")}function Jme(e){const t=A6(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Xme.test(r))return!1;if(Wme.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zme=new y2(3e4,6e4);function i9(){const e=zA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function epe(e){return new Promise((t,r)=>{var a,s,i;function n(){i9(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{i9(),r(VA(e,"network-request-failed"))},timeout:Zme.get()})}if((s=(a=zA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=zA().gapi)!=null&&i.load)n();else{const o=z0e("iframefcb");return zA()[o]=()=>{gapi.load?n():r(VA(e,"network-request-failed"))},QY(`${V0e()}?onload=${o}`).catch(c=>r(c))}}).catch(t=>{throw G_=null,t})}let G_=null;function tpe(e){return G_=G_||epe(e),G_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rpe=new y2(5e3,15e3),npe="__/auth/iframe",ape="emulator/auth/iframe",spe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ipe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ope(e){const t=e.config;Qr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?pD(t,ape):`https://${e.config.authDomain}/${npe}`,n={apiKey:t.apiKey,appName:e.name,v:Cg},a=ipe.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${v2(n).slice(1)}`}async function lpe(e){const t=await tpe(e),r=zA().gapi;return Qr(r,e,"internal-error"),t.open({where:document.body,url:ope(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:spe,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=VA(e,"network-request-failed"),o=zA().setTimeout(()=>{s(i)},rpe.get());function c(){zA().clearTimeout(o),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cpe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},upe=500,dpe=600,Ape="_blank",fpe="http://localhost";class o9{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hpe(e,t,r,n=upe,a=dpe){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c={...cpe,width:n.toString(),height:a.toString(),top:s,left:i},u=nl().toLowerCase();r&&(o=OY(u)?Ape:r),IY(u)&&(t=t||fpe,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(O0e(u)&&o!=="_self")return mpe(t||"",o),new o9(null);const f=window.open(t||"",o,d);Qr(f,e,"popup-blocked");try{f.focus()}catch{}return new o9(f)}function mpe(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ppe="__/auth/handler",gpe="emulator/auth/handler",xpe=encodeURIComponent("fac");async function l9(e,t,r,n,a,s){Qr(e.config.authDomain,e,"auth-domain-config-required"),Qr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:Cg,eventId:a};if(t instanceof zY){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",rhe(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(t instanceof w2){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await e._getAppCheckToken(),u=c?`#${xpe}=${encodeURIComponent(c)}`:"";return`${vpe(e)}?${v2(o).slice(1)}${u}`}function vpe({config:e}){return e.emulator?pD(e,gpe):`https://${e.authDomain}/${ppe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="webStorageSupport";class bpe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=YY,this._completeRedirectFn=zme,this._overrideRedirectResult=Qme}async _openPopup(t,r,n,a){var i;hh((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await l9(t,r,n,A6(),a);return hpe(t,s,yD())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await l9(t,r,n,A6(),a);return Eme(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(hh(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await lpe(t),n=new Gme(t);return r.register("authEvent",a=>(Qr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(bT,{type:bT},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[bT];s!==void 0&&r(!!s),Pd(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Yme(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return MY()||FY()||xD()}}const ype=bpe;var c9="@firebase/auth",u9="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wpe{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Epe(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cpe(e){Am(new Ah("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Qr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:UY(e)},u=new U0e(n,a,s,c);return X0e(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),Am(new Ah("auth-internal",t=>{const r=_g(t.getProvider("auth").getImmediate());return(n=>new wpe(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ru(c9,u9,Epe(e)),Ru(c9,u9,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _pe=300,Npe=xY("authIdTokenMaxAge")||_pe;let d9=null;const Spe=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>Npe)return;const a=r==null?void 0:r.token;d9!==a&&(d9=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function aJ(e=HS()){const t=b2(e,"auth");if(t.isInitialized())return t.getImmediate();const r=W0e(e,{popupRedirectResolver:ype,persistence:[Ime,bme,YY]}),n=xY("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=Spe(s.toString());pme(r,i,()=>i(r.currentUser)),mme(r,o=>i(o))}}const a=pY("auth");return a&&Y0e(r,`http://${a}`),r}function kpe(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}Q0e({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=VA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",kpe().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cpe("Browser");var Bpe="firebase",Tpe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ru(Bpe,Tpe,"app");var A9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var em,sJ;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(E,N){function B(){}B.prototype=N.prototype,E.D=N.prototype,E.prototype=new B,E.prototype.constructor=E,E.C=function(R,P,D){for(var L=Array(arguments.length-2),M=2;M<arguments.length;M++)L[M-2]=arguments[M];return N.prototype[P].apply(R,L)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(E,N,B){B||(B=0);var R=Array(16);if(typeof N=="string")for(var P=0;16>P;++P)R[P]=N.charCodeAt(B++)|N.charCodeAt(B++)<<8|N.charCodeAt(B++)<<16|N.charCodeAt(B++)<<24;else for(P=0;16>P;++P)R[P]=N[B++]|N[B++]<<8|N[B++]<<16|N[B++]<<24;N=E.g[0],B=E.g[1],P=E.g[2];var D=E.g[3],L=N+(D^B&(P^D))+R[0]+3614090360&4294967295;N=B+(L<<7&4294967295|L>>>25),L=D+(P^N&(B^P))+R[1]+3905402710&4294967295,D=N+(L<<12&4294967295|L>>>20),L=P+(B^D&(N^B))+R[2]+606105819&4294967295,P=D+(L<<17&4294967295|L>>>15),L=B+(N^P&(D^N))+R[3]+3250441966&4294967295,B=P+(L<<22&4294967295|L>>>10),L=N+(D^B&(P^D))+R[4]+4118548399&4294967295,N=B+(L<<7&4294967295|L>>>25),L=D+(P^N&(B^P))+R[5]+1200080426&4294967295,D=N+(L<<12&4294967295|L>>>20),L=P+(B^D&(N^B))+R[6]+2821735955&4294967295,P=D+(L<<17&4294967295|L>>>15),L=B+(N^P&(D^N))+R[7]+4249261313&4294967295,B=P+(L<<22&4294967295|L>>>10),L=N+(D^B&(P^D))+R[8]+1770035416&4294967295,N=B+(L<<7&4294967295|L>>>25),L=D+(P^N&(B^P))+R[9]+2336552879&4294967295,D=N+(L<<12&4294967295|L>>>20),L=P+(B^D&(N^B))+R[10]+4294925233&4294967295,P=D+(L<<17&4294967295|L>>>15),L=B+(N^P&(D^N))+R[11]+2304563134&4294967295,B=P+(L<<22&4294967295|L>>>10),L=N+(D^B&(P^D))+R[12]+1804603682&4294967295,N=B+(L<<7&4294967295|L>>>25),L=D+(P^N&(B^P))+R[13]+4254626195&4294967295,D=N+(L<<12&4294967295|L>>>20),L=P+(B^D&(N^B))+R[14]+2792965006&4294967295,P=D+(L<<17&4294967295|L>>>15),L=B+(N^P&(D^N))+R[15]+1236535329&4294967295,B=P+(L<<22&4294967295|L>>>10),L=N+(P^D&(B^P))+R[1]+4129170786&4294967295,N=B+(L<<5&4294967295|L>>>27),L=D+(B^P&(N^B))+R[6]+3225465664&4294967295,D=N+(L<<9&4294967295|L>>>23),L=P+(N^B&(D^N))+R[11]+643717713&4294967295,P=D+(L<<14&4294967295|L>>>18),L=B+(D^N&(P^D))+R[0]+3921069994&4294967295,B=P+(L<<20&4294967295|L>>>12),L=N+(P^D&(B^P))+R[5]+3593408605&4294967295,N=B+(L<<5&4294967295|L>>>27),L=D+(B^P&(N^B))+R[10]+38016083&4294967295,D=N+(L<<9&4294967295|L>>>23),L=P+(N^B&(D^N))+R[15]+3634488961&4294967295,P=D+(L<<14&4294967295|L>>>18),L=B+(D^N&(P^D))+R[4]+3889429448&4294967295,B=P+(L<<20&4294967295|L>>>12),L=N+(P^D&(B^P))+R[9]+568446438&4294967295,N=B+(L<<5&4294967295|L>>>27),L=D+(B^P&(N^B))+R[14]+3275163606&4294967295,D=N+(L<<9&4294967295|L>>>23),L=P+(N^B&(D^N))+R[3]+4107603335&4294967295,P=D+(L<<14&4294967295|L>>>18),L=B+(D^N&(P^D))+R[8]+1163531501&4294967295,B=P+(L<<20&4294967295|L>>>12),L=N+(P^D&(B^P))+R[13]+2850285829&4294967295,N=B+(L<<5&4294967295|L>>>27),L=D+(B^P&(N^B))+R[2]+4243563512&4294967295,D=N+(L<<9&4294967295|L>>>23),L=P+(N^B&(D^N))+R[7]+1735328473&4294967295,P=D+(L<<14&4294967295|L>>>18),L=B+(D^N&(P^D))+R[12]+2368359562&4294967295,B=P+(L<<20&4294967295|L>>>12),L=N+(B^P^D)+R[5]+4294588738&4294967295,N=B+(L<<4&4294967295|L>>>28),L=D+(N^B^P)+R[8]+2272392833&4294967295,D=N+(L<<11&4294967295|L>>>21),L=P+(D^N^B)+R[11]+1839030562&4294967295,P=D+(L<<16&4294967295|L>>>16),L=B+(P^D^N)+R[14]+4259657740&4294967295,B=P+(L<<23&4294967295|L>>>9),L=N+(B^P^D)+R[1]+2763975236&4294967295,N=B+(L<<4&4294967295|L>>>28),L=D+(N^B^P)+R[4]+1272893353&4294967295,D=N+(L<<11&4294967295|L>>>21),L=P+(D^N^B)+R[7]+4139469664&4294967295,P=D+(L<<16&4294967295|L>>>16),L=B+(P^D^N)+R[10]+3200236656&4294967295,B=P+(L<<23&4294967295|L>>>9),L=N+(B^P^D)+R[13]+681279174&4294967295,N=B+(L<<4&4294967295|L>>>28),L=D+(N^B^P)+R[0]+3936430074&4294967295,D=N+(L<<11&4294967295|L>>>21),L=P+(D^N^B)+R[3]+3572445317&4294967295,P=D+(L<<16&4294967295|L>>>16),L=B+(P^D^N)+R[6]+76029189&4294967295,B=P+(L<<23&4294967295|L>>>9),L=N+(B^P^D)+R[9]+3654602809&4294967295,N=B+(L<<4&4294967295|L>>>28),L=D+(N^B^P)+R[12]+3873151461&4294967295,D=N+(L<<11&4294967295|L>>>21),L=P+(D^N^B)+R[15]+530742520&4294967295,P=D+(L<<16&4294967295|L>>>16),L=B+(P^D^N)+R[2]+3299628645&4294967295,B=P+(L<<23&4294967295|L>>>9),L=N+(P^(B|~D))+R[0]+4096336452&4294967295,N=B+(L<<6&4294967295|L>>>26),L=D+(B^(N|~P))+R[7]+1126891415&4294967295,D=N+(L<<10&4294967295|L>>>22),L=P+(N^(D|~B))+R[14]+2878612391&4294967295,P=D+(L<<15&4294967295|L>>>17),L=B+(D^(P|~N))+R[5]+4237533241&4294967295,B=P+(L<<21&4294967295|L>>>11),L=N+(P^(B|~D))+R[12]+1700485571&4294967295,N=B+(L<<6&4294967295|L>>>26),L=D+(B^(N|~P))+R[3]+2399980690&4294967295,D=N+(L<<10&4294967295|L>>>22),L=P+(N^(D|~B))+R[10]+4293915773&4294967295,P=D+(L<<15&4294967295|L>>>17),L=B+(D^(P|~N))+R[1]+2240044497&4294967295,B=P+(L<<21&4294967295|L>>>11),L=N+(P^(B|~D))+R[8]+1873313359&4294967295,N=B+(L<<6&4294967295|L>>>26),L=D+(B^(N|~P))+R[15]+4264355552&4294967295,D=N+(L<<10&4294967295|L>>>22),L=P+(N^(D|~B))+R[6]+2734768916&4294967295,P=D+(L<<15&4294967295|L>>>17),L=B+(D^(P|~N))+R[13]+1309151649&4294967295,B=P+(L<<21&4294967295|L>>>11),L=N+(P^(B|~D))+R[4]+4149444226&4294967295,N=B+(L<<6&4294967295|L>>>26),L=D+(B^(N|~P))+R[11]+3174756917&4294967295,D=N+(L<<10&4294967295|L>>>22),L=P+(N^(D|~B))+R[2]+718787259&4294967295,P=D+(L<<15&4294967295|L>>>17),L=B+(D^(P|~N))+R[9]+3951481745&4294967295,E.g[0]=E.g[0]+N&4294967295,E.g[1]=E.g[1]+(P+(L<<21&4294967295|L>>>11))&4294967295,E.g[2]=E.g[2]+P&4294967295,E.g[3]=E.g[3]+D&4294967295}n.prototype.u=function(E,N){N===void 0&&(N=E.length);for(var B=N-this.blockSize,R=this.B,P=this.h,D=0;D<N;){if(P==0)for(;D<=B;)a(this,E,D),D+=this.blockSize;if(typeof E=="string"){for(;D<N;)if(R[P++]=E.charCodeAt(D++),P==this.blockSize){a(this,R),P=0;break}}else for(;D<N;)if(R[P++]=E[D++],P==this.blockSize){a(this,R),P=0;break}}this.h=P,this.o+=N},n.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var N=1;N<E.length-8;++N)E[N]=0;var B=8*this.o;for(N=E.length-8;N<E.length;++N)E[N]=B&255,B/=256;for(this.u(E),E=Array(16),N=B=0;4>N;++N)for(var R=0;32>R;R+=8)E[B++]=this.g[N]>>>R&255;return E};function s(E,N){var B=o;return Object.prototype.hasOwnProperty.call(B,E)?B[E]:B[E]=N(E)}function i(E,N){this.h=N;for(var B=[],R=!0,P=E.length-1;0<=P;P--){var D=E[P]|0;R&&D==N||(B[P]=D,R=!1)}this.g=B}var o={};function c(E){return-128<=E&&128>E?s(E,function(N){return new i([N|0],0>N?-1:0)}):new i([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return b(u(-E));for(var N=[],B=1,R=0;E>=B;R++)N[R]=E/B|0,B*=4294967296;return new i(N,0)}function d(E,N){if(E.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(E.charAt(0)=="-")return b(d(E.substring(1),N));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(N,8)),R=f,P=0;P<E.length;P+=8){var D=Math.min(8,E.length-P),L=parseInt(E.substring(P,P+D),N);8>D?(D=u(Math.pow(N,D)),R=R.j(D).add(u(L))):(R=R.j(B),R=R.add(u(L)))}return R}var f=c(0),h=c(1),p=c(16777216);e=i.prototype,e.m=function(){if(x(this))return-b(this).m();for(var E=0,N=1,B=0;B<this.g.length;B++){var R=this.i(B);E+=(0<=R?R:4294967296+R)*N,N*=4294967296}return E},e.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(g(this))return"0";if(x(this))return"-"+b(this).toString(E);for(var N=u(Math.pow(E,6)),B=this,R="";;){var P=j(B,N).g;B=y(B,P.j(N));var D=((0<B.g.length?B.g[0]:B.h)>>>0).toString(E);if(B=P,g(B))return D+R;for(;6>D.length;)D="0"+D;R=D+R}},e.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function g(E){if(E.h!=0)return!1;for(var N=0;N<E.g.length;N++)if(E.g[N]!=0)return!1;return!0}function x(E){return E.h==-1}e.l=function(E){return E=y(this,E),x(E)?-1:g(E)?0:1};function b(E){for(var N=E.g.length,B=[],R=0;R<N;R++)B[R]=~E.g[R];return new i(B,~E.h).add(h)}e.abs=function(){return x(this)?b(this):this},e.add=function(E){for(var N=Math.max(this.g.length,E.g.length),B=[],R=0,P=0;P<=N;P++){var D=R+(this.i(P)&65535)+(E.i(P)&65535),L=(D>>>16)+(this.i(P)>>>16)+(E.i(P)>>>16);R=L>>>16,D&=65535,L&=65535,B[P]=L<<16|D}return new i(B,B[B.length-1]&-2147483648?-1:0)};function y(E,N){return E.add(b(N))}e.j=function(E){if(g(this)||g(E))return f;if(x(this))return x(E)?b(this).j(b(E)):b(b(this).j(E));if(x(E))return b(this.j(b(E)));if(0>this.l(p)&&0>E.l(p))return u(this.m()*E.m());for(var N=this.g.length+E.g.length,B=[],R=0;R<2*N;R++)B[R]=0;for(R=0;R<this.g.length;R++)for(var P=0;P<E.g.length;P++){var D=this.i(R)>>>16,L=this.i(R)&65535,M=E.i(P)>>>16,J=E.i(P)&65535;B[2*R+2*P]+=L*J,w(B,2*R+2*P),B[2*R+2*P+1]+=D*J,w(B,2*R+2*P+1),B[2*R+2*P+1]+=L*M,w(B,2*R+2*P+1),B[2*R+2*P+2]+=D*M,w(B,2*R+2*P+2)}for(R=0;R<N;R++)B[R]=B[2*R+1]<<16|B[2*R];for(R=N;R<2*N;R++)B[R]=0;return new i(B,0)};function w(E,N){for(;(E[N]&65535)!=E[N];)E[N+1]+=E[N]>>>16,E[N]&=65535,N++}function _(E,N){this.g=E,this.h=N}function j(E,N){if(g(N))throw Error("division by zero");if(g(E))return new _(f,f);if(x(E))return N=j(b(E),N),new _(b(N.g),b(N.h));if(x(N))return N=j(E,b(N)),new _(b(N.g),N.h);if(30<E.g.length){if(x(E)||x(N))throw Error("slowDivide_ only works with positive integers.");for(var B=h,R=N;0>=R.l(E);)B=k(B),R=k(R);var P=I(B,1),D=I(R,1);for(R=I(R,2),B=I(B,2);!g(R);){var L=D.add(R);0>=L.l(E)&&(P=P.add(B),D=L),R=I(R,1),B=I(B,1)}return N=y(E,P.j(N)),new _(P,N)}for(P=f;0<=E.l(N);){for(B=Math.max(1,Math.floor(E.m()/N.m())),R=Math.ceil(Math.log(B)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),D=u(B),L=D.j(N);x(L)||0<L.l(E);)B-=R,D=u(B),L=D.j(N);g(D)&&(D=h),P=P.add(D),E=y(E,L)}return new _(P,E)}e.A=function(E){return j(this,E).h},e.and=function(E){for(var N=Math.max(this.g.length,E.g.length),B=[],R=0;R<N;R++)B[R]=this.i(R)&E.i(R);return new i(B,this.h&E.h)},e.or=function(E){for(var N=Math.max(this.g.length,E.g.length),B=[],R=0;R<N;R++)B[R]=this.i(R)|E.i(R);return new i(B,this.h|E.h)},e.xor=function(E){for(var N=Math.max(this.g.length,E.g.length),B=[],R=0;R<N;R++)B[R]=this.i(R)^E.i(R);return new i(B,this.h^E.h)};function k(E){for(var N=E.g.length+1,B=[],R=0;R<N;R++)B[R]=E.i(R)<<1|E.i(R-1)>>>31;return new i(B,E.h)}function I(E,N){var B=N>>5;N%=32;for(var R=E.g.length-B,P=[],D=0;D<R;D++)P[D]=0<N?E.i(D+B)>>>N|E.i(D+B+1)<<32-N:E.i(D+B);return new i(P,E.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,sJ=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,em=i}).apply(typeof A9<"u"?A9:typeof self<"u"?self:typeof window<"u"?window:{});var fC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iJ,Ey,oJ,K_,p6,lJ,cJ,uJ;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,re,oe){return O==Array.prototype||O==Object.prototype||(O[re]=oe.value),O};function r(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof fC=="object"&&fC];for(var re=0;re<O.length;++re){var oe=O[re];if(oe&&oe.Math==Math)return oe}throw Error("Cannot find global object")}var n=r(this);function a(O,re){if(re)e:{var oe=n;O=O.split(".");for(var ve=0;ve<O.length-1;ve++){var ze=O[ve];if(!(ze in oe))break e;oe=oe[ze]}O=O[O.length-1],ve=oe[O],re=re(ve),re!=ve&&re!=null&&t(oe,O,{configurable:!0,writable:!0,value:re})}}function s(O,re){O instanceof String&&(O+="");var oe=0,ve=!1,ze={next:function(){if(!ve&&oe<O.length){var ot=oe++;return{value:re(ot,O[ot]),done:!1}}return ve=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(O){return O||function(){return s(this,function(re,oe){return oe})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(O){var re=typeof O;return re=re!="object"?re:O?Array.isArray(O)?"array":re:"null",re=="array"||re=="object"&&typeof O.length=="number"}function u(O){var re=typeof O;return re=="object"&&O!=null||re=="function"}function d(O,re,oe){return O.call.apply(O.bind,arguments)}function f(O,re,oe){if(!O)throw Error();if(2<arguments.length){var ve=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,ve),O.apply(re,ze)}}return function(){return O.apply(re,arguments)}}function h(O,re,oe){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function p(O,re){var oe=Array.prototype.slice.call(arguments,1);return function(){var ve=oe.slice();return ve.push.apply(ve,arguments),O.apply(this,ve)}}function g(O,re){function oe(){}oe.prototype=re.prototype,O.aa=re.prototype,O.prototype=new oe,O.prototype.constructor=O,O.Qb=function(ve,ze,ot){for(var Ut=Array(arguments.length-2),Ir=2;Ir<arguments.length;Ir++)Ut[Ir-2]=arguments[Ir];return re.prototype[ze].apply(ve,Ut)}}function x(O){const re=O.length;if(0<re){const oe=Array(re);for(let ve=0;ve<re;ve++)oe[ve]=O[ve];return oe}return[]}function b(O,re){for(let oe=1;oe<arguments.length;oe++){const ve=arguments[oe];if(c(ve)){const ze=O.length||0,ot=ve.length||0;O.length=ze+ot;for(let Ut=0;Ut<ot;Ut++)O[ze+Ut]=ve[Ut]}else O.push(ve)}}class y{constructor(re,oe){this.i=re,this.j=oe,this.h=0,this.g=null}get(){let re;return 0<this.h?(this.h--,re=this.g,this.g=re.next,re.next=null):re=this.i(),re}}function w(O){return/^[\s\xa0]*$/.test(O)}function _(){var O=o.navigator;return O&&(O=O.userAgent)?O:""}function j(O){return j[" "](O),O}j[" "]=function(){};var k=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function I(O,re,oe){for(const ve in O)re.call(oe,O[ve],ve,O)}function E(O,re){for(const oe in O)re.call(void 0,O[oe],oe,O)}function N(O){const re={};for(const oe in O)re[oe]=O[oe];return re}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(O,re){let oe,ve;for(let ze=1;ze<arguments.length;ze++){ve=arguments[ze];for(oe in ve)O[oe]=ve[oe];for(let ot=0;ot<B.length;ot++)oe=B[ot],Object.prototype.hasOwnProperty.call(ve,oe)&&(O[oe]=ve[oe])}}function P(O){var re=1;O=O.split(":");const oe=[];for(;0<re&&O.length;)oe.push(O.shift()),re--;return O.length&&oe.push(O.join(":")),oe}function D(O){o.setTimeout(()=>{throw O},0)}function L(){var O=G;let re=null;return O.g&&(re=O.g,O.g=O.g.next,O.g||(O.h=null),re.next=null),re}class M{constructor(){this.h=this.g=null}add(re,oe){const ve=J.get();ve.set(re,oe),this.h?this.h.next=ve:this.g=ve,this.h=ve}}var J=new y(()=>new H,O=>O.reset());class H{constructor(){this.next=this.g=this.h=null}set(re,oe){this.h=re,this.g=oe,this.next=null}reset(){this.next=this.g=this.h=null}}let K,V=!1,G=new M,X=()=>{const O=o.Promise.resolve(void 0);K=()=>{O.then(ee)}};var ee=()=>{for(var O;O=L();){try{O.h.call(O.g)}catch(oe){D(oe)}var re=J;re.j(O),100>re.h&&(re.h++,O.next=re.g,re.g=O)}V=!1};function F(){this.s=this.s,this.C=this.C}F.prototype.s=!1,F.prototype.ma=function(){this.s||(this.s=!0,this.N())},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(O,re){this.type=O,this.g=this.target=re,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var O=!1,re=Object.defineProperty({},"passive",{get:function(){O=!0}});try{const oe=()=>{};o.addEventListener("test",oe,re),o.removeEventListener("test",oe,re)}catch{}return O}();function te(O,re){if(z.call(this,O?O.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,O){var oe=this.type=O.type,ve=O.changedTouches&&O.changedTouches.length?O.changedTouches[0]:null;if(this.target=O.target||O.srcElement,this.g=re,re=O.relatedTarget){if(k){e:{try{j(re.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(re=null)}}else oe=="mouseover"?re=O.fromElement:oe=="mouseout"&&(re=O.toElement);this.relatedTarget=re,ve?(this.clientX=ve.clientX!==void 0?ve.clientX:ve.pageX,this.clientY=ve.clientY!==void 0?ve.clientY:ve.pageY,this.screenX=ve.screenX||0,this.screenY=ve.screenY||0):(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0),this.button=O.button,this.key=O.key||"",this.ctrlKey=O.ctrlKey,this.altKey=O.altKey,this.shiftKey=O.shiftKey,this.metaKey=O.metaKey,this.pointerId=O.pointerId||0,this.pointerType=typeof O.pointerType=="string"?O.pointerType:ae[O.pointerType]||"",this.state=O.state,this.i=O,O.defaultPrevented&&te.aa.h.call(this)}}g(te,z);var ae={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var O=this.i;O.preventDefault?O.preventDefault():O.returnValue=!1};var le="closure_listenable_"+(1e6*Math.random()|0),ie=0;function ce(O,re,oe,ve,ze){this.listener=O,this.proxy=null,this.src=re,this.type=oe,this.capture=!!ve,this.ha=ze,this.key=++ie,this.da=this.fa=!1}function pe(O){O.da=!0,O.listener=null,O.proxy=null,O.src=null,O.ha=null}function Be(O){this.src=O,this.g={},this.h=0}Be.prototype.add=function(O,re,oe,ve,ze){var ot=O.toString();O=this.g[ot],O||(O=this.g[ot]=[],this.h++);var Ut=_e(O,re,ve,ze);return-1<Ut?(re=O[Ut],oe||(re.fa=!1)):(re=new ce(re,this.src,ot,!!ve,ze),re.fa=oe,O.push(re)),re};function ne(O,re){var oe=re.type;if(oe in O.g){var ve=O.g[oe],ze=Array.prototype.indexOf.call(ve,re,void 0),ot;(ot=0<=ze)&&Array.prototype.splice.call(ve,ze,1),ot&&(pe(re),O.g[oe].length==0&&(delete O.g[oe],O.h--))}}function _e(O,re,oe,ve){for(var ze=0;ze<O.length;++ze){var ot=O[ze];if(!ot.da&&ot.listener==re&&ot.capture==!!oe&&ot.ha==ve)return ze}return-1}var De="closure_lm_"+(1e6*Math.random()|0),Se={};function fe(O,re,oe,ve,ze){if(Array.isArray(re)){for(var ot=0;ot<re.length;ot++)fe(O,re[ot],oe,ve,ze);return null}return oe=ct(oe),O&&O[le]?O.K(re,oe,u(ve)?!!ve.capture:!1,ze):Ie(O,re,oe,!1,ve,ze)}function Ie(O,re,oe,ve,ze,ot){if(!re)throw Error("Invalid event type");var Ut=u(ze)?!!ze.capture:!!ze,Ir=qe(O);if(Ir||(O[De]=Ir=new Be(O)),oe=Ir.add(re,oe,ve,Ut,ot),oe.proxy)return oe;if(ve=Ue(),oe.proxy=ve,ve.src=O,ve.listener=oe,O.addEventListener)Y||(ze=Ut),ze===void 0&&(ze=!1),O.addEventListener(re.toString(),ve,ze);else if(O.attachEvent)O.attachEvent(Oe(re.toString()),ve);else if(O.addListener&&O.removeListener)O.addListener(ve);else throw Error("addEventListener and attachEvent are unavailable.");return oe}function Ue(){function O(oe){return re.call(O.src,O.listener,oe)}const re=Re;return O}function Ye(O,re,oe,ve,ze){if(Array.isArray(re))for(var ot=0;ot<re.length;ot++)Ye(O,re[ot],oe,ve,ze);else ve=u(ve)?!!ve.capture:!!ve,oe=ct(oe),O&&O[le]?(O=O.i,re=String(re).toString(),re in O.g&&(ot=O.g[re],oe=_e(ot,oe,ve,ze),-1<oe&&(pe(ot[oe]),Array.prototype.splice.call(ot,oe,1),ot.length==0&&(delete O.g[re],O.h--)))):O&&(O=qe(O))&&(re=O.g[re.toString()],O=-1,re&&(O=_e(re,oe,ve,ze)),(oe=-1<O?re[O]:null)&&ye(oe))}function ye(O){if(typeof O!="number"&&O&&!O.da){var re=O.src;if(re&&re[le])ne(re.i,O);else{var oe=O.type,ve=O.proxy;re.removeEventListener?re.removeEventListener(oe,ve,O.capture):re.detachEvent?re.detachEvent(Oe(oe),ve):re.addListener&&re.removeListener&&re.removeListener(ve),(oe=qe(re))?(ne(oe,O),oe.h==0&&(oe.src=null,re[De]=null)):pe(O)}}}function Oe(O){return O in Se?Se[O]:Se[O]="on"+O}function Re(O,re){if(O.da)O=!0;else{re=new te(re,this);var oe=O.listener,ve=O.ha||O.src;O.fa&&ye(O),O=oe.call(ve,re)}return O}function qe(O){return O=O[De],O instanceof Be?O:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function ct(O){return typeof O=="function"?O:(O[Ze]||(O[Ze]=function(re){return O.handleEvent(re)}),O[Ze])}function pt(){F.call(this),this.i=new Be(this),this.M=this,this.F=null}g(pt,F),pt.prototype[le]=!0,pt.prototype.removeEventListener=function(O,re,oe,ve){Ye(this,O,re,oe,ve)};function It(O,re){var oe,ve=O.F;if(ve)for(oe=[];ve;ve=ve.F)oe.push(ve);if(O=O.M,ve=re.type||re,typeof re=="string")re=new z(re,O);else if(re instanceof z)re.target=re.target||O;else{var ze=re;re=new z(ve,O),R(re,ze)}if(ze=!0,oe)for(var ot=oe.length-1;0<=ot;ot--){var Ut=re.g=oe[ot];ze=Mt(Ut,ve,!0,re)&&ze}if(Ut=re.g=O,ze=Mt(Ut,ve,!0,re)&&ze,ze=Mt(Ut,ve,!1,re)&&ze,oe)for(ot=0;ot<oe.length;ot++)Ut=re.g=oe[ot],ze=Mt(Ut,ve,!1,re)&&ze}pt.prototype.N=function(){if(pt.aa.N.call(this),this.i){var O=this.i,re;for(re in O.g){for(var oe=O.g[re],ve=0;ve<oe.length;ve++)pe(oe[ve]);delete O.g[re],O.h--}}this.F=null},pt.prototype.K=function(O,re,oe,ve){return this.i.add(String(O),re,!1,oe,ve)},pt.prototype.L=function(O,re,oe,ve){return this.i.add(String(O),re,!0,oe,ve)};function Mt(O,re,oe,ve){if(re=O.i.g[String(re)],!re)return!0;re=re.concat();for(var ze=!0,ot=0;ot<re.length;++ot){var Ut=re[ot];if(Ut&&!Ut.da&&Ut.capture==oe){var Ir=Ut.listener,bn=Ut.ha||Ut.src;Ut.fa&&ne(O.i,Ut),ze=Ir.call(bn,ve)!==!1&&ze}}return ze&&!ve.defaultPrevented}function Pt(O,re,oe){if(typeof O=="function")oe&&(O=h(O,oe));else if(O&&typeof O.handleEvent=="function")O=h(O.handleEvent,O);else throw Error("Invalid listener argument");return 2147483647<Number(re)?-1:o.setTimeout(O,re||0)}function Qt(O){O.g=Pt(()=>{O.g=null,O.i&&(O.i=!1,Qt(O))},O.l);const re=O.h;O.h=null,O.m.apply(null,re)}class yt extends F{constructor(re,oe){super(),this.m=re,this.l=oe,this.h=null,this.i=!1,this.g=null}j(re){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Br(O){F.call(this),this.h=O,this.g={}}g(Br,F);var tr=[];function nn(O){I(O.g,function(re,oe){this.g.hasOwnProperty(oe)&&ye(re)},O),O.g={}}Br.prototype.N=function(){Br.aa.N.call(this),nn(this)},Br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nr=o.JSON.stringify,Vr=o.JSON.parse,In=class{stringify(O){return o.JSON.stringify(O,void 0)}parse(O){return o.JSON.parse(O,void 0)}};function Or(){}Or.prototype.h=null;function fs(O){return O.h||(O.h=O.i())}function fn(){}var oa={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ba(){z.call(this,"d")}g(Ba,z);function tn(){z.call(this,"c")}g(tn,z);var pr={},et=null;function gt(){return et=et||new pt}pr.La="serverreachability";function Je(O){z.call(this,pr.La,O)}g(Je,z);function xt(O){const re=gt();It(re,new Je(re))}pr.STAT_EVENT="statevent";function wt(O,re){z.call(this,pr.STAT_EVENT,O),this.stat=re}g(wt,z);function bt(O){const re=gt();It(re,new wt(re,O))}pr.Ma="timingevent";function nr(O,re){z.call(this,pr.Ma,O),this.size=re}g(nr,z);function gr(O,re){if(typeof O!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){O()},re)}function Kr(){this.g=!0}Kr.prototype.xa=function(){this.g=!1};function Jr(O,re,oe,ve,ze,ot){O.info(function(){if(O.g)if(ot)for(var Ut="",Ir=ot.split("&"),bn=0;bn<Ir.length;bn++){var qr=Ir[bn].split("=");if(1<qr.length){var Vn=qr[0];qr=qr[1];var ea=Vn.split("_");Ut=2<=ea.length&&ea[1]=="type"?Ut+(Vn+"="+qr+"&"):Ut+(Vn+"=redacted&")}}else Ut=null;else Ut=ot;return"XMLHTTP REQ ("+ve+") [attempt "+ze+"]: "+re+`
`+oe+`
`+Ut})}function Gr(O,re,oe,ve,ze,ot,Ut){O.info(function(){return"XMLHTTP RESP ("+ve+") [ attempt "+ze+"]: "+re+`
`+oe+`
`+ot+" "+Ut})}function he(O,re,oe,ve){O.info(function(){return"XMLHTTP TEXT ("+re+"): "+Ce(O,oe)+(ve?" "+ve:"")})}function Te(O,re){O.info(function(){return"TIMEOUT: "+re})}Kr.prototype.info=function(){};function Ce(O,re){if(!O.g)return re;if(!re)return null;try{var oe=JSON.parse(re);if(oe){for(O=0;O<oe.length;O++)if(Array.isArray(oe[O])){var ve=oe[O];if(!(2>ve.length)){var ze=ve[1];if(Array.isArray(ze)&&!(1>ze.length)){var ot=ze[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var Ut=1;Ut<ze.length;Ut++)ze[Ut]=""}}}}return Nr(oe)}catch{return re}}var we={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},je;function Xe(){}g(Xe,Or),Xe.prototype.g=function(){return new XMLHttpRequest},Xe.prototype.i=function(){return{}},je=new Xe;function dt(O,re,oe,ve){this.j=O,this.i=re,this.l=oe,this.R=ve||1,this.U=new Br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var rt={},it={};function Ft(O,re,oe){O.L=1,O.v=Xc(xi(re)),O.m=oe,O.P=!0,Vt(O,null)}function Vt(O,re){O.F=Date.now(),$t(O),O.A=xi(O.v);var oe=O.A,ve=O.R;Array.isArray(ve)||(ve=[String(ve)]),jr(oe.i,"t",ve),O.C=0,oe=O.j.J,O.h=new $e,O.g=Ae(O.j,oe?re:null,!O.m),0<O.O&&(O.M=new yt(h(O.Y,O,O.g),O.O)),re=O.U,oe=O.g,ve=O.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(tr[0]=ze.toString()),ze=tr);for(var ot=0;ot<ze.length;ot++){var Ut=fe(oe,ze[ot],ve||re.handleEvent,!1,re.h||re);if(!Ut)break;re.g[Ut.key]=Ut}re=O.H?N(O.H):{},O.m?(O.u||(O.u="POST"),re["Content-Type"]="application/x-www-form-urlencoded",O.g.ea(O.A,O.u,O.m,re)):(O.u="GET",O.g.ea(O.A,O.u,null,re)),xt(),Jr(O.i,O.u,O.A,O.l,O.R,O.m)}dt.prototype.ca=function(O){O=O.target;const re=this.M;re&&gs(O)==3?re.j():this.Y(O)},dt.prototype.Y=function(O){try{if(O==this.g)e:{const ea=gs(this.g);var re=this.g.Ba();const Fl=this.g.Z();if(!(3>ea)&&(ea!=3||this.g&&(this.h.h||this.g.oa()||Hh(this.g)))){this.J||ea!=4||re==7||(re==8||0>=Fl?xt(3):xt(2)),an(this);var oe=this.g.Z();this.X=oe;t:if(Yt(this)){var ve=Hh(this.g);O="";var ze=ve.length,ot=gs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),sn(this);var Ut="";break t}this.h.i=new o.TextDecoder}for(re=0;re<ze;re++)this.h.h=!0,O+=this.h.i.decode(ve[re],{stream:!(ot&&re==ze-1)});ve.length=0,this.h.g+=O,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=oe==200,Gr(this.i,this.u,this.A,this.l,this.R,ea,oe),this.o){if(this.T&&!this.K){t:{if(this.g){var Ir,bn=this.g;if((Ir=bn.g?bn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ir)){var qr=Ir;break t}}qr=null}if(oe=qr)he(this.i,this.l,oe,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,hs(this,oe);else{this.o=!1,this.s=3,bt(12),dn(this),sn(this);break e}}if(this.P){oe=!0;let es;for(;!this.J&&this.C<Ut.length;)if(es=Ht(this,Ut),es==it){ea==4&&(this.s=4,bt(14),oe=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(es==rt){this.s=4,bt(15),he(this.i,this.l,Ut,"[Invalid Chunk]"),oe=!1;break}else he(this.i,this.l,es,null),hs(this,es);if(Yt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ea!=4||Ut.length!=0||this.h.h||(this.s=1,bt(16),oe=!1),this.o=this.o&&oe,!oe)he(this.i,this.l,Ut,"[Invalid Chunked Response]"),dn(this),sn(this);else if(0<Ut.length&&!this.W){this.W=!0;var Vn=this.j;Vn.g==this&&Vn.ba&&!Vn.M&&(Vn.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),ru(Vn),Vn.M=!0,bt(11))}}else he(this.i,this.l,Ut,null),hs(this,Ut);ea==4&&dn(this),this.o&&!this.J&&(ea==4?nu(this.j,this):(this.o=!1,$t(this)))}else Zc(this.g),oe==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),dn(this),sn(this)}}}catch{}finally{}};function Yt(O){return O.g?O.u=="GET"&&O.L!=2&&O.j.Ca:!1}function Ht(O,re){var oe=O.C,ve=re.indexOf(`
`,oe);return ve==-1?it:(oe=Number(re.substring(oe,ve)),isNaN(oe)?rt:(ve+=1,ve+oe>re.length?it:(re=re.slice(ve,ve+oe),O.C=ve+oe,re)))}dt.prototype.cancel=function(){this.J=!0,dn(this)};function $t(O){O.S=Date.now()+O.I,Sr(O,O.I)}function Sr(O,re){if(O.B!=null)throw Error("WatchDog timer not null");O.B=gr(h(O.ba,O),re)}function an(O){O.B&&(o.clearTimeout(O.B),O.B=null)}dt.prototype.ba=function(){this.B=null;const O=Date.now();0<=O-this.S?(Te(this.i,this.A),this.L!=2&&(xt(),bt(17)),dn(this),this.s=2,sn(this)):Sr(this,this.S-O)};function sn(O){O.j.G==0||O.J||nu(O.j,O)}function dn(O){an(O);var re=O.M;re&&typeof re.ma=="function"&&re.ma(),O.M=null,nn(O.U),O.g&&(re=O.g,O.g=null,re.abort(),re.ma())}function hs(O,re){try{var oe=O.j;if(oe.G!=0&&(oe.g==O||pi(oe.h,O))){if(!O.K&&pi(oe.h,O)&&oe.G==3){try{var ve=oe.Da.g.parse(re)}catch{ve=null}if(Array.isArray(ve)&&ve.length==3){var ze=ve;if(ze[0]==0){e:if(!oe.u){if(oe.g)if(oe.g.F+3e3<O.F)Ac(oe),Wd(oe);else break e;Ju(oe),bt(18)}}else oe.za=ze[1],0<oe.za-oe.T&&37500>ze[2]&&oe.F&&oe.v==0&&!oe.C&&(oe.C=gr(h(oe.Za,oe),6e3));if(1>=js(oe.h)&&oe.ca){try{oe.ca()}catch{}oe.ca=void 0}}else Di(oe,11)}else if((O.K||oe.g==O)&&Ac(oe),!w(re))for(ze=oe.Da.g.parse(re),re=0;re<ze.length;re++){let qr=ze[re];if(oe.T=qr[0],qr=qr[1],oe.G==2)if(qr[0]=="c"){oe.K=qr[1],oe.ia=qr[2];const Vn=qr[3];Vn!=null&&(oe.la=Vn,oe.j.info("VER="+oe.la));const ea=qr[4];ea!=null&&(oe.Aa=ea,oe.j.info("SVER="+oe.Aa));const Fl=qr[5];Fl!=null&&typeof Fl=="number"&&0<Fl&&(ve=1.5*Fl,oe.L=ve,oe.j.info("backChannelRequestTimeoutMs_="+ve)),ve=oe;const es=O.g;if(es){const So=es.g?es.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(So){var ot=ve.h;ot.g||So.indexOf("spdy")==-1&&So.indexOf("quic")==-1&&So.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(xa(ot,ot.h),ot.h=null))}if(ve.D){const au=es.g?es.g.getResponseHeader("X-HTTP-Session-Id"):null;au&&(ve.ya=au,Hn(ve.I,ve.D,au))}}oe.G=3,oe.l&&oe.l.ua(),oe.ba&&(oe.R=Date.now()-O.F,oe.j.info("Handshake RTT: "+oe.R+"ms")),ve=oe;var Ut=O;if(ve.qa=W(ve,ve.J?ve.ia:null,ve.W),Ut.K){Zs(ve.h,Ut);var Ir=Ut,bn=ve.L;bn&&(Ir.I=bn),Ir.B&&(an(Ir),$t(Ir)),ve.g=Ut}else Yd(ve);0<oe.i.length&&Xd(oe)}else qr[0]!="stop"&&qr[0]!="close"||Di(oe,7);else oe.G==3&&(qr[0]=="stop"||qr[0]=="close"?qr[0]=="stop"?Di(oe,7):dc(oe):qr[0]!="noop"&&oe.l&&oe.l.ta(qr),oe.v=0)}}xt(4)}catch{}}var wo=class{constructor(O,re){this.g=O,this.map=re}};function ms(O){this.l=O||10,o.PerformanceNavigationTiming?(O=o.performance.getEntriesByType("navigation"),O=0<O.length&&(O[0].nextHopProtocol=="hq"||O[0].nextHopProtocol=="h2")):O=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=O?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Js(O){return O.h?!0:O.g?O.g.size>=O.j:!1}function js(O){return O.h?1:O.g?O.g.size:0}function pi(O,re){return O.h?O.h==re:O.g?O.g.has(re):!1}function xa(O,re){O.g?O.g.add(re):O.h=re}function Zs(O,re){O.h&&O.h==re?O.h=null:O.g&&O.g.has(re)&&O.g.delete(re)}ms.prototype.cancel=function(){if(this.i=Gd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const O of this.g.values())O.cancel();this.g.clear()}};function Gd(O){if(O.h!=null)return O.i.concat(O.h.D);if(O.g!=null&&O.g.size!==0){let re=O.i;for(const oe of O.g.values())re=re.concat(oe.D);return re}return x(O.i)}function Mh(O){if(O.V&&typeof O.V=="function")return O.V();if(typeof Map<"u"&&O instanceof Map||typeof Set<"u"&&O instanceof Set)return Array.from(O.values());if(typeof O=="string")return O.split("");if(c(O)){for(var re=[],oe=O.length,ve=0;ve<oe;ve++)re.push(O[ve]);return re}re=[],oe=0;for(ve in O)re[oe++]=O[ve];return re}function Kc(O){if(O.na&&typeof O.na=="function")return O.na();if(!O.V||typeof O.V!="function"){if(typeof Map<"u"&&O instanceof Map)return Array.from(O.keys());if(!(typeof Set<"u"&&O instanceof Set)){if(c(O)||typeof O=="string"){var re=[];O=O.length;for(var oe=0;oe<O;oe++)re.push(oe);return re}re=[],oe=0;for(const ve in O)re[oe++]=ve;return re}}}function uf(O,re){if(O.forEach&&typeof O.forEach=="function")O.forEach(re,void 0);else if(c(O)||typeof O=="string")Array.prototype.forEach.call(O,re,void 0);else for(var oe=Kc(O),ve=Mh(O),ze=ve.length,ot=0;ot<ze;ot++)re.call(void 0,ve[ot],oe&&oe[ot],O)}var gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kd(O,re){if(O){O=O.split("&");for(var oe=0;oe<O.length;oe++){var ve=O[oe].indexOf("="),ze=null;if(0<=ve){var ot=O[oe].substring(0,ve);ze=O[oe].substring(ve+1)}else ot=O[oe];re(ot,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function Fn(O){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,O instanceof Fn){this.h=O.h,qc(this,O.j),this.o=O.o,this.g=O.g,Wc(this,O.s),this.l=O.l;var re=O.i,oe=new Sl;oe.i=re.i,re.g&&(oe.g=new Map(re.g),oe.h=re.h),Nl(this,oe),this.m=O.m}else O&&(re=String(O).match(gi))?(this.h=!1,qc(this,re[1]||"",!0),this.o=Eo(re[2]||""),this.g=Eo(re[3]||"",!0),Wc(this,re[4]),this.l=Eo(re[5]||"",!0),Nl(this,re[6]||"",!0),this.m=Eo(re[7]||"")):(this.h=!1,this.i=new Sl(null,this.h))}Fn.prototype.toString=function(){var O=[],re=this.j;re&&O.push(ic(re,df,!0),":");var oe=this.g;return(oe||re=="file")&&(O.push("//"),(re=this.o)&&O.push(ic(re,df,!0),"@"),O.push(encodeURIComponent(String(oe)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),oe=this.s,oe!=null&&O.push(":",String(oe))),(oe=this.l)&&(this.g&&oe.charAt(0)!="/"&&O.push("/"),O.push(ic(oe,oe.charAt(0)=="/"?oc:Af,!0))),(oe=this.i.toString())&&O.push("?",oe),(oe=this.m)&&O.push("#",ic(oe,lc)),O.join("")};function xi(O){return new Fn(O)}function qc(O,re,oe){O.j=oe?Eo(re,!0):re,O.j&&(O.j=O.j.replace(/:$/,""))}function Wc(O,re){if(re){if(re=Number(re),isNaN(re)||0>re)throw Error("Bad port number "+re);O.s=re}else O.s=null}function Nl(O,re,oe){re instanceof Sl?(O.i=re,Qh(O.i,O.h)):(oe||(re=ic(re,qd)),O.i=new Sl(re,O.h))}function Hn(O,re,oe){O.i.set(re,oe)}function Xc(O){return Hn(O,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),O}function Eo(O,re){return O?re?decodeURI(O.replace(/%25/g,"%2525")):decodeURIComponent(O):""}function ic(O,re,oe){return typeof O=="string"?(O=encodeURI(O).replace(re,Uh),oe&&(O=O.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O):null}function Uh(O){return O=O.charCodeAt(0),"%"+(O>>4&15).toString(16)+(O&15).toString(16)}var df=/[#\/\?@]/g,Af=/[#\?:]/g,oc=/[#\?]/g,qd=/[#\?@]/g,lc=/#/g;function Sl(O,re){this.h=this.g=null,this.i=O||null,this.j=!!re}function la(O){O.g||(O.g=new Map,O.h=0,O.i&&Kd(O.i,function(re,oe){O.add(decodeURIComponent(re.replace(/\+/g," ")),oe)}))}e=Sl.prototype,e.add=function(O,re){la(this),this.i=null,O=Bl(this,O);var oe=this.g.get(O);return oe||this.g.set(O,oe=[]),oe.push(re),this.h+=1,this};function cc(O,re){la(O),re=Bl(O,re),O.g.has(re)&&(O.i=null,O.h-=O.g.get(re).length,O.g.delete(re))}function kl(O,re){return la(O),re=Bl(O,re),O.g.has(re)}e.forEach=function(O,re){la(this),this.g.forEach(function(oe,ve){oe.forEach(function(ze){O.call(re,ze,ve,this)},this)},this)},e.na=function(){la(this);const O=Array.from(this.g.values()),re=Array.from(this.g.keys()),oe=[];for(let ve=0;ve<re.length;ve++){const ze=O[ve];for(let ot=0;ot<ze.length;ot++)oe.push(re[ve])}return oe},e.V=function(O){la(this);let re=[];if(typeof O=="string")kl(this,O)&&(re=re.concat(this.g.get(Bl(this,O))));else{O=Array.from(this.g.values());for(let oe=0;oe<O.length;oe++)re=re.concat(O[oe])}return re},e.set=function(O,re){return la(this),this.i=null,O=Bl(this,O),kl(this,O)&&(this.h-=this.g.get(O).length),this.g.set(O,[re]),this.h+=1,this},e.get=function(O,re){return O?(O=this.V(O),0<O.length?String(O[0]):re):re};function jr(O,re,oe){cc(O,re),0<oe.length&&(O.i=null,O.g.set(Bl(O,re),x(oe)),O.h+=oe.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const O=[],re=Array.from(this.g.keys());for(var oe=0;oe<re.length;oe++){var ve=re[oe];const ot=encodeURIComponent(String(ve)),Ut=this.V(ve);for(ve=0;ve<Ut.length;ve++){var ze=ot;Ut[ve]!==""&&(ze+="="+encodeURIComponent(String(Ut[ve]))),O.push(ze)}}return this.i=O.join("&")};function Bl(O,re){return re=String(re),O.j&&(re=re.toLowerCase()),re}function Qh(O,re){re&&!O.j&&(la(O),O.i=null,O.g.forEach(function(oe,ve){var ze=ve.toLowerCase();ve!=ze&&(cc(this,ve),jr(this,ze,oe))},O)),O.j=re}function Ii(O,re){const oe=new Kr;if(o.Image){const ve=new Image;ve.onload=p(ro,oe,"TestLoadImage: loaded",!0,re,ve),ve.onerror=p(ro,oe,"TestLoadImage: error",!1,re,ve),ve.onabort=p(ro,oe,"TestLoadImage: abort",!1,re,ve),ve.ontimeout=p(ro,oe,"TestLoadImage: timeout",!1,re,ve),o.setTimeout(function(){ve.ontimeout&&ve.ontimeout()},1e4),ve.src=O}else re(!1)}function Co(O,re){const oe=new Kr,ve=new AbortController,ze=setTimeout(()=>{ve.abort(),ro(oe,"TestPingServer: timeout",!1,re)},1e4);fetch(O,{signal:ve.signal}).then(ot=>{clearTimeout(ze),ot.ok?ro(oe,"TestPingServer: ok",!0,re):ro(oe,"TestPingServer: server error",!1,re)}).catch(()=>{clearTimeout(ze),ro(oe,"TestPingServer: error",!1,re)})}function ro(O,re,oe,ve,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),ve(oe)}catch{}}function Tl(){this.g=new In}function _o(O,re,oe){const ve=oe||"";try{uf(O,function(ze,ot){let Ut=ze;u(ze)&&(Ut=Nr(ze)),re.push(ve+ot+"="+encodeURIComponent(Ut))})}catch(ze){throw re.push(ve+"type="+encodeURIComponent("_badmap")),ze}}function Yc(O){this.l=O.Ub||null,this.j=O.eb||!1}g(Yc,Or),Yc.prototype.g=function(){return new uc(this.l,this.j)},Yc.prototype.i=function(O){return function(){return O}}({});function uc(O,re){pt.call(this),this.D=O,this.o=re,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(uc,pt),e=uc.prototype,e.open=function(O,re){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=O,this.A=re,this.readyState=1,Fi(this)},e.send=function(O){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const re={headers:this.u,method:this.B,credentials:this.m,cache:void 0};O&&(re.body=O),(this.D||o).fetch(new Request(this.A,re)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,No(this)),this.readyState=0},e.Sa=function(O){if(this.g&&(this.l=O,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=O.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")O.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in O){if(this.j=O.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ff(this)}else O.text().then(this.Ra.bind(this),this.ga.bind(this))};function ff(O){O.j.read().then(O.Pa.bind(O)).catch(O.ga.bind(O))}e.Pa=function(O){if(this.g){if(this.o&&O.value)this.response.push(O.value);else if(!this.o){var re=O.value?O.value:new Uint8Array(0);(re=this.v.decode(re,{stream:!O.done}))&&(this.response=this.responseText+=re)}O.done?No(this):Fi(this),this.readyState==3&&ff(this)}},e.Ra=function(O){this.g&&(this.response=this.responseText=O,No(this))},e.Qa=function(O){this.g&&(this.response=O,No(this))},e.ga=function(){this.g&&No(this)};function No(O){O.readyState=4,O.l=null,O.j=null,O.v=null,Fi(O)}e.setRequestHeader=function(O,re){this.u.append(O,re)},e.getResponseHeader=function(O){return this.h&&this.h.get(O.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const O=[],re=this.h.entries();for(var oe=re.next();!oe.done;)oe=oe.value,O.push(oe[0]+": "+oe[1]),oe=re.next();return O.join(`\r
`)};function Fi(O){O.onreadystatechange&&O.onreadystatechange.call(O)}Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(O){this.m=O?"include":"same-origin"}});function jl(O){let re="";return I(O,function(oe,ve){re+=ve,re+=":",re+=oe,re+=`\r
`}),re}function ps(O,re,oe){e:{for(ve in oe){var ve=!1;break e}ve=!0}ve||(oe=jl(oe),typeof O=="string"?oe!=null&&encodeURIComponent(String(oe)):Hn(O,re,oe))}function vn(O){pt.call(this),this.headers=new Map,this.o=O||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(vn,pt);var Jc=/^https?$/i,Il=["POST","PUT"];e=vn.prototype,e.Ha=function(O){this.J=O},e.ea=function(O,re,oe,ve){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+O);re=re?re.toUpperCase():"GET",this.D=O,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():je.g(),this.v=this.o?fs(this.o):fs(je),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(re,String(O),!0),this.B=!1}catch(ot){hf(this,ot);return}if(O=oe||"",oe=new Map(this.headers),ve)if(Object.getPrototypeOf(ve)===Object.prototype)for(var ze in ve)oe.set(ze,ve[ze]);else if(typeof ve.keys=="function"&&typeof ve.get=="function")for(const ot of ve.keys())oe.set(ot,ve.get(ot));else throw Error("Unknown input type for opt_headers: "+String(ve));ve=Array.from(oe.keys()).find(ot=>ot.toLowerCase()=="content-type"),ze=o.FormData&&O instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Il,re,void 0))||ve||ze||oe.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,Ut]of oe)this.g.setRequestHeader(ot,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oi(this),this.u=!0,this.g.send(O),this.u=!1}catch(ot){hf(this,ot)}};function hf(O,re){O.h=!1,O.g&&(O.j=!0,O.g.abort(),O.j=!1),O.l=re,O.m=5,Ku(O),ll(O)}function Ku(O){O.A||(O.A=!0,It(O,"complete"),It(O,"error"))}e.abort=function(O){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=O||7,It(this,"complete"),It(this,"abort"),ll(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ll(this,!0)),vn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qu(this):this.bb())},e.bb=function(){qu(this)};function qu(O){if(O.h&&typeof i<"u"&&(!O.v[1]||gs(O)!=4||O.Z()!=2)){if(O.u&&gs(O)==4)Pt(O.Ea,0,O);else if(It(O,"readystatechange"),gs(O)==4){O.h=!1;try{const Ut=O.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var re=!0;break e;default:re=!1}var oe;if(!(oe=re)){var ve;if(ve=Ut===0){var ze=String(O.D).match(gi)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),ve=!Jc.test(ze?ze.toLowerCase():"")}oe=ve}if(oe)It(O,"complete"),It(O,"success");else{O.m=6;try{var ot=2<gs(O)?O.g.statusText:""}catch{ot=""}O.l=ot+" ["+O.Z()+"]",Ku(O)}}finally{ll(O)}}}}function ll(O,re){if(O.g){Oi(O);const oe=O.g,ve=O.v[0]?()=>{}:null;O.g=null,O.v=null,re||It(O,"ready");try{oe.onreadystatechange=ve}catch{}}}function Oi(O){O.I&&(o.clearTimeout(O.I),O.I=null)}e.isActive=function(){return!!this.g};function gs(O){return O.g?O.g.readyState:0}e.Z=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(O){if(this.g){var re=this.g.responseText;return O&&re.indexOf(O)==0&&(re=re.substring(O.length)),Vr(re)}};function Hh(O){try{if(!O.g)return null;if("response"in O.g)return O.g.response;switch(O.H){case"":case"text":return O.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in O.g)return O.g.mozResponseArrayBuffer}return null}catch{return null}}function Zc(O){const re={};O=(O.g&&2<=gs(O)&&O.g.getAllResponseHeaders()||"").split(`\r
`);for(let ve=0;ve<O.length;ve++){if(w(O[ve]))continue;var oe=P(O[ve]);const ze=oe[0];if(oe=oe[1],typeof oe!="string")continue;oe=oe.trim();const ot=re[ze]||[];re[ze]=ot,ot.push(oe)}E(re,function(ve){return ve.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(O,re,oe){return oe&&oe.internalChannelParams&&oe.internalChannelParams[O]||re}function eu(O){this.Aa=0,this.i=[],this.j=new Kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vi("failFast",!1,O),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vi("baseRetryDelayMs",5e3,O),this.cb=vi("retryDelaySeedMs",1e4,O),this.Wa=vi("forwardChannelMaxRetries",2,O),this.wa=vi("forwardChannelRequestTimeoutMs",2e4,O),this.pa=O&&O.xmlHttpFactory||void 0,this.Xa=O&&O.Tb||void 0,this.Ca=O&&O.useFetchStreams||!1,this.L=void 0,this.J=O&&O.supportsCrossDomainXhr||!1,this.K="",this.h=new ms(O&&O.concurrentRequestLimit),this.Da=new Tl,this.P=O&&O.fastHandshake||!1,this.O=O&&O.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=O&&O.Rb||!1,O&&O.xa&&this.j.xa(),O&&O.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&O&&O.detectBufferingProxy||!1,this.ja=void 0,O&&O.longPollingTimeout&&0<O.longPollingTimeout&&(this.ja=O.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=eu.prototype,e.la=8,e.G=1,e.connect=function(O,re,oe,ve){bt(0),this.W=O,this.H=re||{},oe&&ve!==void 0&&(this.H.OSID=oe,this.H.OAID=ve),this.F=this.X,this.I=W(this,null,this.W),Xd(this)};function dc(O){if(Wu(O),O.G==3){var re=O.U++,oe=xi(O.I);if(Hn(oe,"SID",O.K),Hn(oe,"RID",re),Hn(oe,"TYPE","terminate"),tu(O,oe),re=new dt(O,O.j,re),re.L=2,re.v=Xc(xi(oe)),oe=!1,o.navigator&&o.navigator.sendBeacon)try{oe=o.navigator.sendBeacon(re.v.toString(),"")}catch{}!oe&&o.Image&&(new Image().src=re.v,oe=!0),oe||(re.g=Ae(re.j,null),re.g.ea(re.v)),re.F=Date.now(),$t(re)}Jd(O)}function Wd(O){O.g&&(ru(O),O.g.cancel(),O.g=null)}function Wu(O){Wd(O),O.u&&(o.clearTimeout(O.u),O.u=null),Ac(O),O.h.cancel(),O.s&&(typeof O.s=="number"&&o.clearTimeout(O.s),O.s=null)}function Xd(O){if(!Js(O.h)&&!O.s){O.s=!0;var re=O.Ga;K||X(),V||(K(),V=!0),G.add(re,O),O.B=0}}function mf(O,re){return js(O.h)>=O.h.j-(O.s?1:0)?!1:O.s?(O.i=re.D.concat(O.i),!0):O.G==1||O.G==2||O.B>=(O.Va?0:O.Wa)?!1:(O.s=gr(h(O.Ga,O,re),Zu(O,O.B)),O.B++,!0)}e.Ga=function(O){if(this.s)if(this.s=null,this.G==1){if(!O){this.U=Math.floor(1e5*Math.random()),O=this.U++;const ze=new dt(this,this.j,O);let ot=this.o;if(this.S&&(ot?(ot=N(ot),R(ot,this.S)):ot=this.S),this.m!==null||this.O||(ze.H=ot,ot=null),this.P)e:{for(var re=0,oe=0;oe<this.i.length;oe++){t:{var ve=this.i[oe];if("__data__"in ve.map&&(ve=ve.map.__data__,typeof ve=="string")){ve=ve.length;break t}ve=void 0}if(ve===void 0)break;if(re+=ve,4096<re){re=oe;break e}if(re===4096||oe===this.i.length-1){re=oe+1;break e}}re=1e3}else re=1e3;re=Yu(this,ze,re),oe=xi(this.I),Hn(oe,"RID",O),Hn(oe,"CVER",22),this.D&&Hn(oe,"X-HTTP-Session-Id",this.D),tu(this,oe),ot&&(this.O?re="headers="+encodeURIComponent(String(jl(ot)))+"&"+re:this.m&&ps(oe,this.m,ot)),xa(this.h,ze),this.Ua&&Hn(oe,"TYPE","init"),this.P?(Hn(oe,"$req",re),Hn(oe,"SID","null"),ze.T=!0,Ft(ze,oe,null)):Ft(ze,oe,re),this.G=2}}else this.G==3&&(O?Xu(this,O):this.i.length==0||Js(this.h)||Xu(this))};function Xu(O,re){var oe;re?oe=re.l:oe=O.U++;const ve=xi(O.I);Hn(ve,"SID",O.K),Hn(ve,"RID",oe),Hn(ve,"AID",O.T),tu(O,ve),O.m&&O.o&&ps(ve,O.m,O.o),oe=new dt(O,O.j,oe,O.B+1),O.m===null&&(oe.H=O.o),re&&(O.i=re.D.concat(O.i)),re=Yu(O,oe,1e3),oe.I=Math.round(.5*O.wa)+Math.round(.5*O.wa*Math.random()),xa(O.h,oe),Ft(oe,ve,re)}function tu(O,re){O.H&&I(O.H,function(oe,ve){Hn(re,ve,oe)}),O.l&&uf({},function(oe,ve){Hn(re,ve,oe)})}function Yu(O,re,oe){oe=Math.min(O.i.length,oe);var ve=O.l?h(O.l.Na,O.l,O):null;e:{var ze=O.i;let ot=-1;for(;;){const Ut=["count="+oe];ot==-1?0<oe?(ot=ze[0].g,Ut.push("ofs="+ot)):ot=0:Ut.push("ofs="+ot);let Ir=!0;for(let bn=0;bn<oe;bn++){let qr=ze[bn].g;const Vn=ze[bn].map;if(qr-=ot,0>qr)ot=Math.max(0,ze[bn].g-100),Ir=!1;else try{_o(Vn,Ut,"req"+qr+"_")}catch{ve&&ve(Vn)}}if(Ir){ve=Ut.join("&");break e}}}return O=O.i.splice(0,oe),re.D=O,ve}function Yd(O){if(!O.g&&!O.u){O.Y=1;var re=O.Fa;K||X(),V||(K(),V=!0),G.add(re,O),O.v=0}}function Ju(O){return O.g||O.u||3<=O.v?!1:(O.Y++,O.u=gr(h(O.Fa,O),Zu(O,O.v)),O.v++,!0)}e.Fa=function(){if(this.u=null,Vh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var O=2*this.R;this.j.info("BP detection timer enabled: "+O),this.A=gr(h(this.ab,this),O)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Wd(this),Vh(this))};function ru(O){O.A!=null&&(o.clearTimeout(O.A),O.A=null)}function Vh(O){O.g=new dt(O,O.j,"rpc",O.Y),O.m===null&&(O.g.H=O.o),O.g.O=0;var re=xi(O.qa);Hn(re,"RID","rpc"),Hn(re,"SID",O.K),Hn(re,"AID",O.T),Hn(re,"CI",O.F?"0":"1"),!O.F&&O.ja&&Hn(re,"TO",O.ja),Hn(re,"TYPE","xmlhttp"),tu(O,re),O.m&&O.o&&ps(re,O.m,O.o),O.L&&(O.g.I=O.L);var oe=O.g;O=O.ia,oe.L=1,oe.v=Xc(xi(re)),oe.m=null,oe.P=!0,Vt(oe,O)}e.Za=function(){this.C!=null&&(this.C=null,Wd(this),Ju(this),bt(19))};function Ac(O){O.C!=null&&(o.clearTimeout(O.C),O.C=null)}function nu(O,re){var oe=null;if(O.g==re){Ac(O),ru(O),O.g=null;var ve=2}else if(pi(O.h,re))oe=re.D,Zs(O.h,re),ve=1;else return;if(O.G!=0){if(re.o)if(ve==1){oe=re.m?re.m.length:0,re=Date.now()-re.F;var ze=O.B;ve=gt(),It(ve,new nr(ve,oe)),Xd(O)}else Yd(O);else if(ze=re.s,ze==3||ze==0&&0<re.X||!(ve==1&&mf(O,re)||ve==2&&Ju(O)))switch(oe&&0<oe.length&&(re=O.h,re.i=re.i.concat(oe)),ze){case 1:Di(O,5);break;case 4:Di(O,10);break;case 3:Di(O,6);break;default:Di(O,2)}}}function Zu(O,re){let oe=O.Ta+Math.floor(Math.random()*O.cb);return O.isActive()||(oe*=2),oe*re}function Di(O,re){if(O.j.info("Error code "+re),re==2){var oe=h(O.fb,O),ve=O.Xa;const ze=!ve;ve=new Fn(ve||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||qc(ve,"https"),Xc(ve),ze?Ii(ve.toString(),oe):Co(ve.toString(),oe)}else bt(2);O.G=0,O.l&&O.l.sa(re),Jd(O),Wu(O)}e.fb=function(O){O?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Jd(O){if(O.G=0,O.ka=[],O.l){const re=Gd(O.h);(re.length!=0||O.i.length!=0)&&(b(O.ka,re),b(O.ka,O.i),O.h.i.length=0,x(O.i),O.i.length=0),O.l.ra()}}function W(O,re,oe){var ve=oe instanceof Fn?xi(oe):new Fn(oe);if(ve.g!="")re&&(ve.g=re+"."+ve.g),Wc(ve,ve.s);else{var ze=o.location;ve=ze.protocol,re=re?re+"."+ze.hostname:ze.hostname,ze=+ze.port;var ot=new Fn(null);ve&&qc(ot,ve),re&&(ot.g=re),ze&&Wc(ot,ze),oe&&(ot.l=oe),ve=ot}return oe=O.D,re=O.ya,oe&&re&&Hn(ve,oe,re),Hn(ve,"VER",O.la),tu(O,ve),ve}function Ae(O,re,oe){if(re&&!O.J)throw Error("Can't create secondary domain capable XhrIo object.");return re=O.Ca&&!O.pa?new vn(new Yc({eb:oe})):new vn(O.pa),re.Ha(O.J),re}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fe(){}e=Fe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Le(){}Le.prototype.g=function(O,re){return new Ge(O,re)};function Ge(O,re){pt.call(this),this.g=new eu(re),this.l=O,this.h=re&&re.messageUrlParams||null,O=re&&re.messageHeaders||null,re&&re.clientProtocolHeaderRequired&&(O?O["X-Client-Protocol"]="webchannel":O={"X-Client-Protocol":"webchannel"}),this.g.o=O,O=re&&re.initMessageHeaders||null,re&&re.messageContentType&&(O?O["X-WebChannel-Content-Type"]=re.messageContentType:O={"X-WebChannel-Content-Type":re.messageContentType}),re&&re.va&&(O?O["X-WebChannel-Client-Profile"]=re.va:O={"X-WebChannel-Client-Profile":re.va}),this.g.S=O,(O=re&&re.Sb)&&!w(O)&&(this.g.m=O),this.v=re&&re.supportsCrossDomainXhr||!1,this.u=re&&re.sendRawJson||!1,(re=re&&re.httpSessionIdParam)&&!w(re)&&(this.g.D=re,O=this.h,O!==null&&re in O&&(O=this.h,re in O&&delete O[re])),this.j=new Jt(this)}g(Ge,pt),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){dc(this.g)},Ge.prototype.o=function(O){var re=this.g;if(typeof O=="string"){var oe={};oe.__data__=O,O=oe}else this.u&&(oe={},oe.__data__=Nr(O),O=oe);re.i.push(new wo(re.Ya++,O)),re.G==3&&Xd(re)},Ge.prototype.N=function(){this.g.l=null,delete this.j,dc(this.g),delete this.g,Ge.aa.N.call(this)};function vt(O){Ba.call(this),O.__headers__&&(this.headers=O.__headers__,this.statusCode=O.__status__,delete O.__headers__,delete O.__status__);var re=O.__sm__;if(re){e:{for(const oe in re){O=oe;break e}O=void 0}(this.i=O)&&(O=this.i,re=re!==null&&O in re?re[O]:void 0),this.data=re}else this.data=O}g(vt,Ba);function Lt(){tn.call(this),this.status=1}g(Lt,tn);function Jt(O){this.g=O}g(Jt,Fe),Jt.prototype.ua=function(){It(this.g,"a")},Jt.prototype.ta=function(O){It(this.g,new vt(O))},Jt.prototype.sa=function(O){It(this.g,new Lt)},Jt.prototype.ra=function(){It(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,uJ=function(){return new Le},cJ=function(){return gt()},lJ=pr,p6={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},we.NO_ERROR=0,we.TIMEOUT=8,we.HTTP_ERROR=6,K_=we,Ne.COMPLETE="complete",oJ=Ne,fn.EventType=oa,oa.OPEN="a",oa.CLOSE="b",oa.ERROR="c",oa.MESSAGE="d",pt.prototype.listen=pt.prototype.K,Ey=fn,vn.prototype.listenOnce=vn.prototype.L,vn.prototype.getLastError=vn.prototype.Ka,vn.prototype.getLastErrorCode=vn.prototype.Ba,vn.prototype.getStatus=vn.prototype.Z,vn.prototype.getResponseJson=vn.prototype.Oa,vn.prototype.getResponseText=vn.prototype.oa,vn.prototype.send=vn.prototype.ea,vn.prototype.setWithCredentials=vn.prototype.Ha,iJ=vn}).apply(typeof fC<"u"?fC:typeof self<"u"?self:typeof window<"u"?window:{});const f9="@firebase/firestore",h9="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Ho.UNAUTHENTICATED=new Ho(null),Ho.GOOGLE_CREDENTIALS=new Ho("google-credentials-uid"),Ho.FIRST_PARTY=new Ho("first-party-uid"),Ho.MOCK_USER=new Ho("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N1="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=new AD("@firebase/firestore");function $x(){return sg.logLevel}function cr(e,...t){if(sg.logLevel<=Sn.DEBUG){const r=t.map(ED);sg.debug(`Firestore (${N1}): ${e}`,...r)}}function mh(e,...t){if(sg.logLevel<=Sn.ERROR){const r=t.map(ED);sg.error(`Firestore (${N1}): ${e}`,...r)}}function ig(e,...t){if(sg.logLevel<=Sn.WARN){const r=t.map(ED);sg.warn(`Firestore (${N1}): ${e}`,...r)}}function ED(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,dJ(e,n,r)}function dJ(e,t,r){let n=`FIRESTORE (${N1}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw mh(n),new Error(n)}function sa(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||dJ(t,a,n)}function en(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ct={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends Md{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJ{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fJ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Ho.UNAUTHENTICATED))}shutdown(){}}class jpe{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Ipe{constructor(t){this.t=t,this.currentUser=Ho.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){sa(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new nh;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new nh,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},o=c=>{cr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(cr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new nh)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(cr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(sa(typeof n.accessToken=="string",31837,{l:n}),new AJ(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return sa(t===null||typeof t=="string",2055,{h:t}),new Ho(t)}}class Fpe{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Ho.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ope{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new Fpe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Ho.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class m9{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dpe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){sa(this.o===void 0,3512);const n=s=>{s.error!=null&&cr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,cr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{cr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):cr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new m9(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(sa(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new m9(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ppe(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=Ppe(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function kn(e,t){return e<t?-1:e>t?1:0}function g6(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return yT(a)===yT(s)?kn(a,s):yT(a)?1:-1}return kn(e.length,t.length)}const Rpe=55296,Lpe=57343;function yT(e){const t=e.charCodeAt(0);return t>=Rpe&&t<=Lpe}function Mv(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p9="__name__";class BA{constructor(t,r,n){r===void 0?r=0:r>t.length&&Hr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Hr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return BA.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof BA?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=BA.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return kn(t.length,r.length)}static compareSegments(t,r){const n=BA.isNumericId(t),a=BA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?BA.extractNumericId(t).compare(BA.extractNumericId(r)):g6(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return em.fromString(t.substring(4,t.length-2))}}class Na extends BA{construct(t,r,n){return new Na(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Wt(Ct.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Na(r)}static emptyPath(){return new Na([])}}const Mpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gi extends BA{construct(t,r,n){return new Gi(t,r,n)}static isValidIdentifier(t){return Mpe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===p9}static keyField(){return new Gi([p9])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Wt(Ct.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new Wt(Ct.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Wt(Ct.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Wt(Ct.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Gi(r)}static emptyPath(){return new Gi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t){this.path=t}static fromPath(t){return new br(Na.fromString(t))}static fromName(t){return new br(Na.fromString(t).popFirst(5))}static empty(){return new br(Na.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Na.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Na.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new br(new Na(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hJ(e,t,r){if(!r)throw new Wt(Ct.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function mJ(e,t,r,n){if(t===!0&&n===!0)throw new Wt(Ct.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function g9(e){if(!br.isDocumentKey(e))throw new Wt(Ct.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function x9(e){if(br.isDocumentKey(e))throw new Wt(Ct.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function pJ(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function qS(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Hr(12329,{type:typeof e})}function el(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wt(Ct.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=qS(e);throw new Wt(Ct.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function Upe(e,t){if(t<=0)throw new Wt(Ct.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(e,t){const r={typeString:e};return t&&(r.value=t),r}function C2(e,t){if(!pJ(e))throw new Wt(Ct.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Wt(Ct.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v9=-62135596800,b9=1e6;class sr{static now(){return sr.fromMillis(Date.now())}static fromDate(t){return sr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*b9);return new sr(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Wt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Wt(Ct.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<v9)throw new Wt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wt(Ct.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/b9}_compareTo(t){return this.seconds===t.seconds?kn(this.nanoseconds,t.nanoseconds):kn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:sr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(C2(t,sr._jsonSchema))return new sr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-v9;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}sr._jsonSchemaVersion="firestore/timestamp/1.0",sr._jsonSchema={type:fi("string",sr._jsonSchemaVersion),seconds:fi("number"),nanoseconds:fi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{static fromTimestamp(t){return new Xr(t)}static min(){return new Xr(new sr(0,0))}static max(){return new Xr(new sr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=-1;function Qpe(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Xr.fromTimestamp(n===1e9?new sr(r+1,0):new sr(r,n));return new fm(a,br.empty(),t)}function Hpe(e){return new fm(e.readTime,e.key,Ew)}class fm{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new fm(Xr.min(),br.empty(),Ew)}static max(){return new fm(Xr.max(),br.empty(),Ew)}}function Vpe(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=br.comparator(e.documentKey,t.documentKey),r!==0?r:kn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zpe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $pe{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S1(e){if(e.code!==Ct.FAILED_PRECONDITION||e.message!==zpe)throw e;cr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Hr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Dt((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Dt?r:Dt.resolve(r)}catch(r){return Dt.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Dt.reject(r)}static resolve(t){return new Dt((r,n)=>{r(t)})}static reject(t){return new Dt((r,n)=>{n(t)})}static waitFor(t){return new Dt((r,n)=>{let a=0,s=0,i=!1;t.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(t){let r=Dt.resolve(!1);for(const n of t)r=r.next(a=>a?Dt.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Dt((n,a)=>{const s=t.length,i=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new Dt((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function Gpe(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function k1(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}WS.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=-1;function XS(e){return e==null}function M5(e){return e===0&&1/e==-1/0}function Kpe(e){return typeof e=="number"&&Number.isInteger(e)&&!M5(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gJ="";function qpe(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=y9(t)),t=Wpe(e.get(r),t);return y9(t)}function Wpe(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case gJ:r+="";break;default:r+=s}}return r}function y9(e){return e+gJ+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w9(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Im(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function xJ(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t,r){this.comparator=t,this.root=r||mo.EMPTY}insert(t,r){return new ls(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,mo.BLACK,null,null))}remove(t){return new ls(this.comparator,this.root.remove(t,this.comparator).copy(null,null,mo.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new hC(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new hC(this.root,t,this.comparator,!1)}getReverseIterator(){return new hC(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new hC(this.root,t,this.comparator,!0)}}class hC{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class mo{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??mo.RED,this.left=a??mo.EMPTY,this.right=s??mo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new mo(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return mo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return mo.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,mo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,mo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Hr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Hr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Hr(27949);return t+(this.isRed()?0:1)}}mo.EMPTY=null,mo.RED=!0,mo.BLACK=!1;mo.EMPTY=new class{constructor(){this.size=0}get key(){throw Hr(57766)}get value(){throw Hr(16141)}get color(){throw Hr(16727)}get left(){throw Hr(29726)}get right(){throw Hr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new mo(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t){this.comparator=t,this.data=new ls(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new E9(this.data.getIterator())}getIteratorFrom(t){return new E9(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof _i)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new _i(this.comparator);return r.data=t,r}}class E9{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(t){this.fields=t,t.sort(Gi.comparator)}static empty(){return new Pc([])}unionWith(t){let r=new _i(Gi.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Pc(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Mv(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vJ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vJ("Invalid base64 string: "+s):s}}(t);return new Yi(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new Yi(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return kn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Yi.EMPTY_BYTE_STRING=new Yi("");const Xpe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hm(e){if(sa(!!e,39018),typeof e=="string"){let t=0;const r=Xpe.exec(e);if(sa(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Hs(e.seconds),nanos:Hs(e.nanos)}}function Hs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function mm(e){return typeof e=="string"?Yi.fromBase64String(e):Yi.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bJ="server_timestamp",yJ="__type__",wJ="__previous_value__",EJ="__local_write_time__";function YS(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[yJ])==null?void 0:n.stringValue)===bJ}function JS(e){const t=e.mapValue.fields[wJ];return YS(t)?JS(t):t}function Cw(e){const t=hm(e.mapValue.fields[EJ].timestampValue);return new sr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ype{constructor(t,r,n,a,s,i,o,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const U5="(default)";class Uv{constructor(t,r){this.projectId=t,this.database=r||U5}static empty(){return new Uv("","")}get isDefaultDatabase(){return this.database===U5}isEqual(t){return t instanceof Uv&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CJ="__type__",Jpe="__max__",mC={mapValue:{}},_J="__vector__",Q5="value";function pm(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?YS(e)?4:ege(e)?9007199254740991:Zpe(e)?10:11:Hr(28295,{value:e})}function ZA(e,t){if(e===t)return!0;const r=pm(e);if(r!==pm(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Cw(e).isEqual(Cw(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=hm(a.timestampValue),o=hm(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return mm(a.bytesValue).isEqual(mm(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return Hs(a.geoPointValue.latitude)===Hs(s.geoPointValue.latitude)&&Hs(a.geoPointValue.longitude)===Hs(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return Hs(a.integerValue)===Hs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=Hs(a.doubleValue),o=Hs(s.doubleValue);return i===o?M5(i)===M5(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return Mv(e.arrayValue.values||[],t.arrayValue.values||[],ZA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(w9(i)!==w9(o))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(o[c]===void 0||!ZA(i[c],o[c])))return!1;return!0}(e,t);default:return Hr(52216,{left:e})}}function _w(e,t){return(e.values||[]).find(r=>ZA(r,t))!==void 0}function Qv(e,t){if(e===t)return 0;const r=pm(e),n=pm(t);if(r!==n)return kn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return kn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const o=Hs(s.integerValue||s.doubleValue),c=Hs(i.integerValue||i.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(e,t);case 3:return C9(e.timestampValue,t.timestampValue);case 4:return C9(Cw(e),Cw(t));case 5:return g6(e.stringValue,t.stringValue);case 6:return function(s,i){const o=mm(s),c=mm(i);return o.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const o=s.split("/"),c=i.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=kn(o[u],c[u]);if(d!==0)return d}return kn(o.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const o=kn(Hs(s.latitude),Hs(i.latitude));return o!==0?o:kn(Hs(s.longitude),Hs(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return _9(e.arrayValue,t.arrayValue);case 10:return function(s,i){var h,p,g,x;const o=s.fields||{},c=i.fields||{},u=(h=o[Q5])==null?void 0:h.arrayValue,d=(p=c[Q5])==null?void 0:p.arrayValue,f=kn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((x=d==null?void 0:d.values)==null?void 0:x.length)||0);return f!==0?f:_9(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===mC.mapValue&&i===mC.mapValue)return 0;if(s===mC.mapValue)return 1;if(i===mC.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=g6(c[f],d[f]);if(h!==0)return h;const p=Qv(o[c[f]],u[d[f]]);if(p!==0)return p}return kn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw Hr(23264,{he:r})}}function C9(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return kn(e,t);const r=hm(e),n=hm(t),a=kn(r.seconds,n.seconds);return a!==0?a:kn(r.nanos,n.nanos)}function _9(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=Qv(r[a],n[a]);if(s)return s}return kn(r.length,n.length)}function Hv(e){return x6(e)}function x6(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=hm(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return mm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return br.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=x6(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${x6(r.fields[i])}`;return a+"}"}(e.mapValue):Hr(61005,{value:e})}function q_(e){switch(pm(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=JS(e);return t?16+q_(t):16;case 5:return 2*e.stringValue.length;case 6:return mm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+q_(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return Im(n.fields,(s,i)=>{a+=s.length+q_(i)}),a}(e.mapValue);default:throw Hr(13486,{value:e})}}function H5(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function v6(e){return!!e&&"integerValue"in e}function _D(e){return!!e&&"arrayValue"in e}function N9(e){return!!e&&"nullValue"in e}function S9(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function W_(e){return!!e&&"mapValue"in e}function Zpe(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[CJ])==null?void 0:n.stringValue)===_J}function $y(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Im(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=$y(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=$y(e.arrayValue.values[r]);return t}return{...e}}function ege(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Jpe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t){this.value=t}static empty(){return new Wl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!W_(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=$y(r)}setAll(t){let r=Gi.emptyPath(),n={},a=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=$y(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());W_(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return ZA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];W_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){Im(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new Wl($y(this.value))}}function NJ(e){const t=[];return Im(e.fields,(r,n)=>{const a=new Gi([r]);if(W_(n)){const s=NJ(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new Pc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t,r,n,a,s,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new Go(t,0,Xr.min(),Xr.min(),Xr.min(),Wl.empty(),0)}static newFoundDocument(t,r,n,a){return new Go(t,1,r,Xr.min(),n,a,0)}static newNoDocument(t,r){return new Go(t,2,r,Xr.min(),Xr.min(),Wl.empty(),0)}static newUnknownDocument(t,r){return new Go(t,3,r,Xr.min(),Xr.min(),Wl.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Xr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Wl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Wl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Go&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Go(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(t,r){this.position=t,this.inclusive=r}}function k9(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=br.comparator(br.fromName(i.referenceValue),r.key):n=Qv(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function B9(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!ZA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(t,r="asc"){this.field=t,this.dir=r}}function tge(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SJ{}class Ai extends SJ{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new nge(t,r,n):r==="array-contains"?new ige(t,n):r==="in"?new oge(t,n):r==="not-in"?new lge(t,n):r==="array-contains-any"?new cge(t,n):new Ai(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new age(t,n):new sge(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Qv(r,this.value)):r!==null&&pm(this.value)===pm(r)&&this.matchesComparison(Qv(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Hr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rd extends SJ{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Rd(t,r)}matches(t){return kJ(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kJ(e){return e.op==="and"}function BJ(e){return rge(e)&&kJ(e)}function rge(e){for(const t of e.filters)if(t instanceof Rd)return!1;return!0}function b6(e){if(e instanceof Ai)return e.field.canonicalString()+e.op.toString()+Hv(e.value);if(BJ(e))return e.filters.map(t=>b6(t)).join(",");{const t=e.filters.map(r=>b6(r)).join(",");return`${e.op}(${t})`}}function TJ(e,t){return e instanceof Ai?function(n,a){return a instanceof Ai&&n.op===a.op&&n.field.isEqual(a.field)&&ZA(n.value,a.value)}(e,t):e instanceof Rd?function(n,a){return a instanceof Rd&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&TJ(i,a.filters[o]),!0):!1}(e,t):void Hr(19439)}function jJ(e){return e instanceof Ai?function(r){return`${r.field.canonicalString()} ${r.op} ${Hv(r.value)}`}(e):e instanceof Rd?function(r){return r.op.toString()+" {"+r.getFilters().map(jJ).join(" ,")+"}"}(e):"Filter"}class nge extends Ai{constructor(t,r,n){super(t,r,n),this.key=br.fromName(n.referenceValue)}matches(t){const r=br.comparator(t.key,this.key);return this.matchesComparison(r)}}class age extends Ai{constructor(t,r){super(t,"in",r),this.keys=IJ("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class sge extends Ai{constructor(t,r){super(t,"not-in",r),this.keys=IJ("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function IJ(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>br.fromName(n.referenceValue))}class ige extends Ai{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return _D(r)&&_w(r.arrayValue,this.value)}}class oge extends Ai{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&_w(this.value.arrayValue,r)}}class lge extends Ai{constructor(t,r){super(t,"not-in",r)}matches(t){if(_w(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!_w(this.value.arrayValue,r)}}class cge extends Ai{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!_D(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>_w(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uge{constructor(t,r=null,n=[],a=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function T9(e,t=null,r=[],n=[],a=null,s=null,i=null){return new uge(e,t,r,n,a,s,i)}function ND(e){const t=en(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>b6(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),XS(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>Hv(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>Hv(n)).join(",")),t.Te=r}return t.Te}function SD(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!tge(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!TJ(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!B9(e.startAt,t.startAt)&&B9(e.endAt,t.endAt)}function y6(e){return br.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t,r=null,n=[],a=[],s=null,i="F",o=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function dge(e,t,r,n,a,s,i,o){return new Ng(e,t,r,n,a,s,i,o)}function ZS(e){return new Ng(e)}function j9(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function kD(e){return e.collectionGroup!==null}function gv(e){const t=en(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new _i(Gi.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new Nw(s,n))}),r.has(Gi.keyField().canonicalString())||t.Ie.push(new Nw(Gi.keyField(),n))}return t.Ie}function $A(e){const t=en(e);return t.Ee||(t.Ee=Age(t,gv(e))),t.Ee}function Age(e,t){if(e.limitType==="F")return T9(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new Nw(a.field,s)});const r=e.endAt?new Vv(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new Vv(e.startAt.position,e.startAt.inclusive):null;return T9(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function w6(e,t){const r=e.filters.concat([t]);return new Ng(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function V5(e,t,r){return new Ng(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function e4(e,t){return SD($A(e),$A(t))&&e.limitType===t.limitType}function FJ(e){return`${ND($A(e))}|lt:${e.limitType}`}function Gx(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>jJ(a)).join(", ")}]`),XS(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Hv(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Hv(a)).join(",")),`Target(${n})`}($A(e))}; limitType=${e.limitType})`}function t4(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):br.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of gv(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,o,c){const u=k9(i,o,c);return i.inclusive?u<=0:u<0}(n.startAt,gv(n),a)||n.endAt&&!function(i,o,c){const u=k9(i,o,c);return i.inclusive?u>=0:u>0}(n.endAt,gv(n),a))}(e,t)}function fge(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function OJ(e){return(t,r)=>{let n=!1;for(const a of gv(e)){const s=hge(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function hge(e,t,r){const n=e.field.isKeyField()?br.comparator(t.key,r.key):function(s,i,o){const c=i.data.field(s),u=o.data.field(s);return c!==null&&u!==null?Qv(c,u):Hr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Hr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Im(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return xJ(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mge=new ls(br.comparator);function ph(){return mge}const DJ=new ls(br.comparator);function Cy(...e){let t=DJ;for(const r of e)t=t.insert(r.key,r);return t}function PJ(e){let t=DJ;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function Tp(){return Gy()}function RJ(){return Gy()}function Gy(){return new Sg(e=>e.toString(),(e,t)=>e.isEqual(t))}const pge=new ls(br.comparator),gge=new _i(br.comparator);function Bn(...e){let t=gge;for(const r of e)t=t.add(r);return t}const xge=new _i(kn);function vge(){return xge}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:M5(t)?"-0":t}}function LJ(e){return{integerValue:""+e}}function bge(e,t){return Kpe(t)?LJ(t):BD(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this._=void 0}}function yge(e,t,r){return e instanceof Sw?function(a,s){const i={fields:{[yJ]:{stringValue:bJ},[EJ]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&YS(s)&&(s=JS(s)),s&&(i.fields[wJ]=s),{mapValue:i}}(r,t):e instanceof zv?UJ(e,t):e instanceof kw?QJ(e,t):function(a,s){const i=MJ(a,s),o=I9(i)+I9(a.Ae);return v6(i)&&v6(a.Ae)?LJ(o):BD(a.serializer,o)}(e,t)}function wge(e,t,r){return e instanceof zv?UJ(e,t):e instanceof kw?QJ(e,t):r}function MJ(e,t){return e instanceof z5?function(n){return v6(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Sw extends r4{}class zv extends r4{constructor(t){super(),this.elements=t}}function UJ(e,t){const r=HJ(t);for(const n of e.elements)r.some(a=>ZA(a,n))||r.push(n);return{arrayValue:{values:r}}}class kw extends r4{constructor(t){super(),this.elements=t}}function QJ(e,t){let r=HJ(t);for(const n of e.elements)r=r.filter(a=>!ZA(a,n));return{arrayValue:{values:r}}}class z5 extends r4{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function I9(e){return Hs(e.integerValue||e.doubleValue)}function HJ(e){return _D(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VJ{constructor(t,r){this.field=t,this.transform=r}}function Ege(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof zv&&a instanceof zv||n instanceof kw&&a instanceof kw?Mv(n.elements,a.elements,ZA):n instanceof z5&&a instanceof z5?ZA(n.Ae,a.Ae):n instanceof Sw&&a instanceof Sw}(e.transform,t.transform)}class Cge{constructor(t,r){this.version=t,this.transformResults=r}}class yl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new yl}static exists(t){return new yl(void 0,t)}static updateTime(t){return new yl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function X_(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class n4{}function zJ(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new a4(e.key,yl.none()):new _2(e.key,e.data,yl.none());{const r=e.data,n=Wl.empty();let a=new _i(Gi.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Fm(e.key,n,new Pc(a.toArray()),yl.none())}}function _ge(e,t,r){e instanceof _2?function(a,s,i){const o=a.value.clone(),c=O9(a.fieldTransforms,s,i.transformResults);o.setAll(c),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof Fm?function(a,s,i){if(!X_(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=O9(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll($J(a)),c.setAll(o),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function Ky(e,t,r,n){return e instanceof _2?function(s,i,o,c){if(!X_(s.precondition,i))return o;const u=s.value.clone(),d=D9(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Fm?function(s,i,o,c){if(!X_(s.precondition,i))return o;const u=D9(s.fieldTransforms,c,i),d=i.data;return d.setAll($J(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,i,o){return X_(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function Nge(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=MJ(n.transform,a||null);s!=null&&(r===null&&(r=Wl.empty()),r.set(n.field,s))}return r||null}function F9(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Mv(n,a,(s,i)=>Ege(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class _2 extends n4{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Fm extends n4{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function $J(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function O9(e,t,r){const n=new Map;sa(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);n.set(s.field,wge(i,o,r[a]))}return n}function D9(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,yge(s,i,t))}return n}class a4 extends n4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sge extends n4{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kge{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&_ge(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=Ky(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=Ky(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=RJ();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const c=zJ(i,o);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Xr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Bn())}isEqual(t){return this.batchId===t.batchId&&Mv(this.mutations,t.mutations,(r,n)=>F9(r,n))&&Mv(this.baseMutations,t.baseMutations,(r,n)=>F9(r,n))}}class TD{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){sa(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return pge}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new TD(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bge{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tge{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,Ln;function jge(e){switch(e){case Ct.OK:return Hr(64938);case Ct.CANCELLED:case Ct.UNKNOWN:case Ct.DEADLINE_EXCEEDED:case Ct.RESOURCE_EXHAUSTED:case Ct.INTERNAL:case Ct.UNAVAILABLE:case Ct.UNAUTHENTICATED:return!1;case Ct.INVALID_ARGUMENT:case Ct.NOT_FOUND:case Ct.ALREADY_EXISTS:case Ct.PERMISSION_DENIED:case Ct.FAILED_PRECONDITION:case Ct.ABORTED:case Ct.OUT_OF_RANGE:case Ct.UNIMPLEMENTED:case Ct.DATA_LOSS:return!0;default:return Hr(15467,{code:e})}}function GJ(e){if(e===void 0)return mh("GRPC error has no .code"),Ct.UNKNOWN;switch(e){case si.OK:return Ct.OK;case si.CANCELLED:return Ct.CANCELLED;case si.UNKNOWN:return Ct.UNKNOWN;case si.DEADLINE_EXCEEDED:return Ct.DEADLINE_EXCEEDED;case si.RESOURCE_EXHAUSTED:return Ct.RESOURCE_EXHAUSTED;case si.INTERNAL:return Ct.INTERNAL;case si.UNAVAILABLE:return Ct.UNAVAILABLE;case si.UNAUTHENTICATED:return Ct.UNAUTHENTICATED;case si.INVALID_ARGUMENT:return Ct.INVALID_ARGUMENT;case si.NOT_FOUND:return Ct.NOT_FOUND;case si.ALREADY_EXISTS:return Ct.ALREADY_EXISTS;case si.PERMISSION_DENIED:return Ct.PERMISSION_DENIED;case si.FAILED_PRECONDITION:return Ct.FAILED_PRECONDITION;case si.ABORTED:return Ct.ABORTED;case si.OUT_OF_RANGE:return Ct.OUT_OF_RANGE;case si.UNIMPLEMENTED:return Ct.UNIMPLEMENTED;case si.DATA_LOSS:return Ct.DATA_LOSS;default:return Hr(39323,{code:e})}}(Ln=si||(si={}))[Ln.OK=0]="OK",Ln[Ln.CANCELLED=1]="CANCELLED",Ln[Ln.UNKNOWN=2]="UNKNOWN",Ln[Ln.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ln[Ln.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ln[Ln.NOT_FOUND=5]="NOT_FOUND",Ln[Ln.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ln[Ln.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ln[Ln.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ln[Ln.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ln[Ln.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ln[Ln.ABORTED=10]="ABORTED",Ln[Ln.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ln[Ln.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ln[Ln.INTERNAL=13]="INTERNAL",Ln[Ln.UNAVAILABLE=14]="UNAVAILABLE",Ln[Ln.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ige(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fge=new em([4294967295,4294967295],0);function P9(e){const t=Ige().encode(e),r=new sJ;return r.update(t),new Uint8Array(r.digest())}function R9(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new em([r,n],0),new em([a,s],0)]}class jD{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new _y(`Invalid padding: ${r}`);if(n<0)throw new _y(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new _y(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new _y(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=em.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(em.fromNumber(n)));return a.compare(Fge)===1&&(a=new em([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=P9(t),[n,a]=R9(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new jD(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.ge===0)return;const r=P9(t),[n,a]=R9(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class _y extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,N2.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new s4(Xr.min(),a,new ls(kn),ph(),Bn())}}class N2{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new N2(n,r,Bn(),Bn(),Bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class KJ{constructor(t,r){this.targetId=t,this.Ce=r}}class qJ{constructor(t,r,n=Yi.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class L9{constructor(){this.ve=0,this.Fe=M9(),this.Me=Yi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Bn(),r=Bn(),n=Bn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Hr(38017,{changeType:s})}}),new N2(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=M9()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,sa(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Oge{constructor(t){this.Ge=t,this.ze=new Map,this.je=ph(),this.Je=pC(),this.He=pC(),this.Ye=new ls(kn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Hr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(y6(s))if(n===0){const i=new br(s.path);this.et(r,i,Go.newNoDocument(i,Xr.min()))}else sa(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(t),c=o?this.ct(o,t,i):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=mm(n).toUint8Array()}catch(c){if(c instanceof vJ)return ig("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new jD(i,a,s)}catch(c){return ig(c instanceof _y?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&y6(o.target)){const c=new br(o.target.path);this.It(c).has(i)||this.Et(i,c)||this.et(i,c,Go.newNoDocument(c,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=Bn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new s4(t,r,this.Ye,this.je,n);return this.je=ph(),this.Je=pC(),this.He=pC(),this.Ye=new ls(kn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new L9,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new _i(kn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new _i(kn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||cr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new L9),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function pC(){return new ls(br.comparator)}function M9(){return new ls(br.comparator)}const Dge={asc:"ASCENDING",desc:"DESCENDING"},Pge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rge={and:"AND",or:"OR"};class Lge{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function E6(e,t){return e.useProto3Json||XS(t)?t:{value:t}}function $5(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function WJ(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Mge(e,t){return $5(e,t.toTimestamp())}function GA(e){return sa(!!e,49232),Xr.fromTimestamp(function(r){const n=hm(r);return new sr(n.seconds,n.nanos)}(e))}function ID(e,t){return C6(e,t).canonicalString()}function C6(e,t){const r=function(a){return new Na(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function XJ(e){const t=Na.fromString(e);return sa(tZ(t),10190,{key:t.toString()}),t}function _6(e,t){return ID(e.databaseId,t.path)}function wT(e,t){const r=XJ(t);if(r.get(1)!==e.databaseId.projectId)throw new Wt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Wt(Ct.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new br(JJ(r))}function YJ(e,t){return ID(e.databaseId,t)}function Uge(e){const t=XJ(e);return t.length===4?Na.emptyPath():JJ(t)}function N6(e){return new Na(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function JJ(e){return sa(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function U9(e,t,r){return{name:_6(e,t),fields:r.value.mapValue.fields}}function Qge(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Hr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(sa(d===void 0||typeof d=="string",58123),Yi.fromBase64String(d||"")):(sa(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Yi.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(u){const d=u.code===void 0?Ct.UNKNOWN:GJ(u.code);return new Wt(d,u.message||"")}(i);r=new qJ(n,a,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=wT(e,n.document.name),s=GA(n.document.updateTime),i=n.document.createTime?GA(n.document.createTime):Xr.min(),o=new Wl({mapValue:{fields:n.document.fields}}),c=Go.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new Y_(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=wT(e,n.document),s=n.readTime?GA(n.readTime):Xr.min(),i=Go.newNoDocument(a,s),o=n.removedTargetIds||[];r=new Y_([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=wT(e,n.document),s=n.removedTargetIds||[];r=new Y_([],s,a,null)}else{if(!("filter"in t))return Hr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new Tge(a,s),o=n.targetId;r=new KJ(o,i)}}return r}function Hge(e,t){let r;if(t instanceof _2)r={update:U9(e,t.key,t.value)};else if(t instanceof a4)r={delete:_6(e,t.key)};else if(t instanceof Fm)r={update:U9(e,t.key,t.data),updateMask:Yge(t.fieldMask)};else{if(!(t instanceof Sge))return Hr(16599,{Vt:t.type});r={verify:_6(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof Sw)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof zv)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof kw)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof z5)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Hr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:Mge(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Hr(27497)}(e,t.precondition)),r}function Vge(e,t){return e&&e.length>0?(sa(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?GA(a.updateTime):GA(s);return i.isEqual(Xr.min())&&(i=GA(s)),new Cge(i,a.transformResults||[])}(r,t))):[]}function zge(e,t){return{documents:[YJ(e,t.path)]}}function $ge(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=YJ(e,a);const s=function(u){if(u.length!==0)return eZ(Rd.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Kx(h.field),direction:qge(h.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=E6(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function Gge(e){let t=Uge(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){sa(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=ZJ(f);return h instanceof Rd&&BJ(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(g){return new Nw(qx(g.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,XS(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,p=f.values||[];return new Vv(p,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new Vv(p,h)}(r.endAt)),dge(t,a,i,s,o,"F",c,u)}function Kge(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function ZJ(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=qx(r.unaryFilter.field);return Ai.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=qx(r.unaryFilter.field);return Ai.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=qx(r.unaryFilter.field);return Ai.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=qx(r.unaryFilter.field);return Ai.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Hr(61313);default:return Hr(60726)}}(e):e.fieldFilter!==void 0?function(r){return Ai.create(qx(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Hr(58110);default:return Hr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Rd.create(r.compositeFilter.filters.map(n=>ZJ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Hr(1026)}}(r.compositeFilter.op))}(e):Hr(30097,{filter:e})}function qge(e){return Dge[e]}function Wge(e){return Pge[e]}function Xge(e){return Rge[e]}function Kx(e){return{fieldPath:e.canonicalString()}}function qx(e){return Gi.fromServerFormat(e.fieldPath)}function eZ(e){return e instanceof Ai?function(r){if(r.op==="=="){if(S9(r.value))return{unaryFilter:{field:Kx(r.field),op:"IS_NAN"}};if(N9(r.value))return{unaryFilter:{field:Kx(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(S9(r.value))return{unaryFilter:{field:Kx(r.field),op:"IS_NOT_NAN"}};if(N9(r.value))return{unaryFilter:{field:Kx(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kx(r.field),op:Wge(r.op),value:r.value}}}(e):e instanceof Rd?function(r){const n=r.getFilters().map(a=>eZ(a));return n.length===1?n[0]:{compositeFilter:{op:Xge(r.op),filters:n}}}(e):Hr(54877,{filter:e})}function Yge(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function tZ(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(t,r,n,a,s=Xr.min(),i=Xr.min(),o=Yi.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(t){return new H0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new H0(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new H0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new H0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jge{constructor(t){this.yt=t}}function Zge(e){const t=Gge({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?V5(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class exe{constructor(){this.Cn=new txe}addToCollectionParentIndex(t,r){return this.Cn.add(r),Dt.resolve()}getCollectionParents(t,r){return Dt.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Dt.resolve()}deleteFieldIndex(t,r){return Dt.resolve()}deleteAllFieldIndexes(t){return Dt.resolve()}createTargetIndexes(t,r){return Dt.resolve()}getDocumentsMatchingTarget(t,r){return Dt.resolve(null)}getIndexType(t,r){return Dt.resolve(0)}getFieldIndexes(t,r){return Dt.resolve([])}getNextCollectionGroupToUpdate(t){return Dt.resolve(null)}getMinOffset(t,r){return Dt.resolve(fm.min())}getMinOffsetFromCollectionGroup(t,r){return Dt.resolve(fm.min())}updateCollectionGroup(t,r,n){return Dt.resolve()}updateIndexEntries(t,r){return Dt.resolve()}}class txe{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new _i(Na.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new _i(Na.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q9={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rZ=41943040;class zl{static withCacheSize(t){return new zl(t,zl.DEFAULT_COLLECTION_PERCENTILE,zl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zl.DEFAULT_COLLECTION_PERCENTILE=10,zl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zl.DEFAULT=new zl(rZ,zl.DEFAULT_COLLECTION_PERCENTILE,zl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zl.DISABLED=new zl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new $v(0)}static cr(){return new $v(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H9="LruGarbageCollector",rxe=1048576;function V9([e,t],[r,n]){const a=kn(e,r);return a===0?kn(t,n):a}class nxe{constructor(t){this.Ir=t,this.buffer=new _i(V9),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();V9(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class axe{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){cr(H9,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){k1(r)?cr(H9,"Ignoring IndexedDB error during garbage collection: ",r):await S1(r)}await this.Vr(3e5)})}}class sxe{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Dt.resolve(WS.ce);const n=new nxe(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(cr("LruGarbageCollector","Garbage collection skipped; disabled"),Dt.resolve(Q9)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(cr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Q9):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,o,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(cr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,o=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),$x()<=Sn.DEBUG&&cr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function ixe(e,t){return new sxe(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oxe{constructor(){this.changes=new Sg(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,Go.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Dt.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lxe{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cxe{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&Ky(n.mutation,a,Pc.empty(),sr.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,Bn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=Bn()){const a=Tp();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=Cy();return s.forEach((o,c)=>{i=i.insert(o,c.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=Tp();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,Bn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,a){let s=ph();const i=Gy(),o=function(){return Gy()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Fm)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Ky(d.mutation,u,d.mutation.getFieldMask(),sr.now())):i.set(u.key,Pc.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new lxe(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(t,r){const n=Gy();let a=new ls((i,o)=>i-o),s=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Pc.empty();d=o.applyToLocalView(u,d),n.set(c,d);const f=(a.get(o.batchId)||Bn()).add(c);a=a.insert(o.batchId,f)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,f=RJ();d.forEach(h=>{if(!s.has(h)){const p=zJ(r.get(h),n.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Dt.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return br.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):kD(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Dt.resolve(Tp());let o=Ew,c=s;return i.next(u=>Dt.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?Dt.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,Bn())).next(d=>({batchId:o,changes:PJ(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new br(r)).next(n=>{let a=Cy();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=Cy();return this.indexManager.getCollectionParents(t,s).next(o=>Dt.forEach(o,c=>{const u=function(f,h){return new Ng(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,Go.newInvalidDocument(d)))});let o=Cy();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Ky(d.mutation,u,Pc.empty(),sr.now()),t4(r,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uxe{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Dt.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:GA(a.createTime)}}(r)),Dt.resolve()}getNamedQuery(t,r){return Dt.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Zge(a.bundledQuery),readTime:GA(a.readTime)}}(r)),Dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dxe{constructor(){this.overlays=new ls(br.comparator),this.qr=new Map}getOverlay(t,r){return Dt.resolve(this.overlays.get(r))}getOverlays(t,r){const n=Tp();return Dt.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Dt.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Dt.resolve()}getOverlaysForCollection(t,r,n){const a=Tp(),s=r.length+1,i=new br(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Dt.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new ls((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Tp(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Tp(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return Dt.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Bge(r,n));let s=this.qr.get(r);s===void 0&&(s=Bn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Axe{constructor(){this.sessionToken=Yi.EMPTY_BYTE_STRING}getSessionToken(t){return Dt.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(){this.Qr=new _i(Hi.$r),this.Ur=new _i(Hi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Hi(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Hi(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new br(new Na([])),n=new Hi(r,t),a=new Hi(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new br(new Na([])),n=new Hi(r,t),a=new Hi(r,t+1);let s=Bn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new Hi(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Hi{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return br.comparator(t.key,r.key)||kn(t.Yr,r.Yr)}static Kr(t,r){return kn(t.Yr,r.Yr)||br.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fxe{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new _i(Hi.$r)}checkEmpty(t){return Dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new kge(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Hi(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Dt.resolve(i)}lookupMutationBatch(t,r){return Dt.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Dt.resolve(this.mutationQueue.length===0?CD:this.tr-1)}getAllMutationBatches(t){return Dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Hi(r,0),a=new Hi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),Dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new _i(kn);return r.forEach(a=>{const s=new Hi(a,0),i=new Hi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),Dt.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;br.isDocumentKey(s)||(s=s.child(""));const i=new Hi(new br(s),0);let o=new _i(kn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(c.Yr)),!0)},i),Dt.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){sa(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Dt.forEach(r.mutations,a=>{const s=new Hi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Hi(r,0),a=this.Zr.firstAfterOrEqual(n);return Dt.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Dt.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hxe{constructor(t){this.ri=t,this.docs=function(){return new ls(br.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Dt.resolve(n?n.document.mutableCopy():Go.newInvalidDocument(r))}getEntries(t,r){let n=ph();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():Go.newInvalidDocument(a))}),Dt.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=ph();const i=r.path,o=new br(i.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||Vpe(Hpe(d),n)<=0||(a.has(d.key)||t4(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Dt.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Hr(9500)}ii(t,r){return Dt.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new mxe(this)}getSize(t){return Dt.resolve(this.size)}}class mxe extends oxe{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Dt.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pxe{constructor(t){this.persistence=t,this.si=new Sg(r=>ND(r),SD),this.lastRemoteSnapshotVersion=Xr.min(),this.highestTargetId=0,this.oi=0,this._i=new FD,this.targetCount=0,this.ai=$v.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Dt.resolve()}getLastRemoteSnapshotVersion(t){return Dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Dt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Dt.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Dt.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new $v(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Dt.resolve()}updateTargetData(t,r){return this.Pr(r),Dt.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Dt.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),Dt.waitFor(s).next(()=>a)}getTargetCount(t){return Dt.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Dt.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Dt.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),Dt.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Dt.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Dt.resolve(n)}containsKey(t,r){return Dt.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(t,r){this.ui={},this.overlays={},this.ci=new WS(0),this.li=!1,this.li=!0,this.hi=new Axe,this.referenceDelegate=t(this),this.Pi=new pxe(this),this.indexManager=new exe,this.remoteDocumentCache=function(a){return new hxe(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new Jge(r),this.Ii=new uxe(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new dxe,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new fxe(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){cr("MemoryPersistence","Starting transaction:",t);const a=new gxe(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Dt.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class gxe extends $pe{constructor(t){super(),this.currentSequenceNumber=t}}class OD{constructor(t){this.persistence=t,this.Ri=new FD,this.Vi=null}static mi(t){return new OD(t)}get fi(){if(this.Vi)return this.Vi;throw Hr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Dt.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Dt.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Dt.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Dt.forEach(this.fi,n=>{const a=br.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Xr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Dt.or([()=>Dt.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class G5{constructor(t,r){this.persistence=t,this.pi=new Sg(n=>qpe(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=ixe(this,r)}static mi(t,r){return new G5(t,r)}Ei(){}di(t){return Dt.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Dt.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Dt.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(o=>{o||(n++,s.removeEntry(i,Xr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Dt.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Dt.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=q_(t.data.value)),r}br(t,r,n){return Dt.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Dt.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=Bn(),a=Bn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new DD(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xxe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vxe{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Xfe()?8:Gpe(nl())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new xxe;return this.Ss(t,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(t,r,i,o.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?($x()<=Sn.DEBUG&&cr("QueryEngine","SDK will not create cache indexes for query:",Gx(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Dt.resolve()):($x()<=Sn.DEBUG&&cr("QueryEngine","Query:",Gx(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?($x()<=Sn.DEBUG&&cr("QueryEngine","The SDK decides to create cache indexes for query:",Gx(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,$A(r))):Dt.resolve())}ys(t,r){if(j9(r))return Dt.resolve(null);let n=$A(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=V5(r,null,"F"),n=$A(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=Bn(...s);return this.ps.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,o);return this.Cs(r,u,i,c.readTime)?this.ys(t,V5(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return j9(r)||a.isEqual(Xr.min())?Dt.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?Dt.resolve(null):($x()<=Sn.DEBUG&&cr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Gx(r)),this.vs(t,i,r,Qpe(a,Ew)).next(o=>o))})}Ds(t,r){let n=new _i(OJ(t));return r.forEach((a,s)=>{t4(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return $x()<=Sn.DEBUG&&cr("QueryEngine","Using full collection scan to execute query:",Gx(r)),this.ps.getDocumentsMatchingQuery(t,r,fm.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="LocalStore",bxe=3e8;class yxe{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new ls(kn),this.xs=new Sg(s=>ND(s),SD),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new cxe(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function wxe(e,t,r,n){return new yxe(e,t,r,n)}async function aZ(e,t){const r=en(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let c=Bn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function Exe(e,t){const r=en(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const f=u.batch,h=f.keys();let p=Dt.resolve();return h.forEach(g=>{p=p.next(()=>d.getEntry(c,g)).next(x=>{const b=u.docVersions.get(g);sa(b!==null,48541),x.version.compareTo(b)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let c=Bn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function sZ(e){const t=en(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function Cxe(e,t){const r=en(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(Yi.EMPTY_BYTE_STRING,Xr.min()).withLastLimboFreeSnapshotVersion(Xr.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),a=a.insert(f,p),function(x,b,y){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=bxe?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,p,d)&&o.push(r.Pi.updateTargetData(s,p))});let c=ph(),u=Bn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(_xe(s,i,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(Xr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return Dt.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function _xe(e,t,r){let n=Bn(),a=Bn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=ph();return r.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),c.isNoDocument()&&c.version.isEqual(Xr.min())?(t.removeEntry(o,c.readTime),i=i.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),i=i.insert(o,c)):cr(PD,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{ks:i,qs:a}})}function Nxe(e,t){const r=en(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=CD),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Sxe(e,t){const r=en(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Dt.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new H0(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function S6(e,t,r){const n=en(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!k1(i))throw i;cr(PD,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function z9(e,t,r){const n=en(e);let a=Xr.min(),s=Bn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const f=en(c),h=f.xs.get(d);return h!==void 0?Dt.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,i,$A(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Xr.min(),r?s:Bn())).next(o=>(kxe(n,fge(t),o),{documents:o,Qs:s})))}function kxe(e,t,r){let n=e.Os.get(t)||Xr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class $9{constructor(){this.activeTargetIds=vge()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Bxe{constructor(){this.Mo=new $9,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new $9,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Txe{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9="ConnectivityMonitor";class K9{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){cr(G9,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){cr(G9,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gC=null;function k6(){return gC===null?gC=function(){return 268435456+Math.round(2147483648*Math.random())}():gC++,"0x"+gC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="RestConnection",jxe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ixe{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===U5?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=k6(),o=this.zo(t,r.toUriEncodedString());cr(ET,`Sending RPC '${t}' ${i}:`,o,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(o),d=Bh(u);return this.Jo(t,o,c,n,d).then(f=>(cr(ET,`Received RPC '${t}' ${i}: `,f),f),f=>{throw ig(ET,`RPC '${t}' ${i} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+N1}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=jxe[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fxe{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oo="WebChannelConnection";class Oxe extends Ixe{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=k6();return new Promise((o,c)=>{const u=new iJ;u.setWithCredentials(!0),u.listenOnce(oJ.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case K_.NO_ERROR:const f=u.getResponseJson();cr(Oo,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(f)),o(f);break;case K_.TIMEOUT:cr(Oo,`RPC '${t}' ${i} timed out`),c(new Wt(Ct.DEADLINE_EXCEEDED,"Request time out"));break;case K_.HTTP_ERROR:const h=u.getStatus();if(cr(Oo,`RPC '${t}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const x=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(Ct).indexOf(w)>=0?w:Ct.UNKNOWN}(g.status);c(new Wt(x,g.message))}else c(new Wt(Ct.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Wt(Ct.UNAVAILABLE,"Connection failed."));break;default:Hr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{cr(Oo,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);cr(Oo,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=k6(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=uJ(),o=cJ(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");cr(Oo,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=i.createWebChannel(d,c);this.I_(f);let h=!1,p=!1;const g=new Fxe({Yo:b=>{p?cr(Oo,`Not sending because RPC '${t}' stream ${a} is closed:`,b):(h||(cr(Oo,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),cr(Oo,`RPC '${t}' stream ${a} sending:`,b),f.send(b))},Zo:()=>f.close()}),x=(b,y,w)=>{b.listen(y,_=>{try{w(_)}catch(j){setTimeout(()=>{throw j},0)}})};return x(f,Ey.EventType.OPEN,()=>{p||(cr(Oo,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),x(f,Ey.EventType.CLOSE,()=>{p||(p=!0,cr(Oo,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),x(f,Ey.EventType.ERROR,b=>{p||(p=!0,ig(Oo,`RPC '${t}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),g.a_(new Wt(Ct.UNAVAILABLE,"The operation could not be completed")))}),x(f,Ey.EventType.MESSAGE,b=>{var y;if(!p){const w=b.data[0];sa(!!w,16349);const _=w,j=(_==null?void 0:_.error)||((y=_[0])==null?void 0:y.error);if(j){cr(Oo,`RPC '${t}' stream ${a} received error:`,j);const k=j.status;let I=function(B){const R=si[B];if(R!==void 0)return GJ(R)}(k),E=j.message;I===void 0&&(I=Ct.INTERNAL,E="Unknown error status: "+k+" with message "+j.message),p=!0,g.a_(new Wt(I,E)),f.close()}else cr(Oo,`RPC '${t}' stream ${a} received:`,w),g.u_(w)}}),x(o,lJ.STAT_EVENT,b=>{b.stat===p6.PROXY?cr(Oo,`RPC '${t}' stream ${a} detected buffering proxy`):b.stat===p6.NOPROXY&&cr(Oo,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function CT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(e){return new Lge(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&cr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q9="PersistentStream";class oZ{constructor(t,r,n,a,s,i,o,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new iZ(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Ct.RESOURCE_EXHAUSTED?(mh(r.toString()),mh("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Ct.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Wt(Ct.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return cr(q9,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(cr(q9,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Dxe extends oZ{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=Qge(this.serializer,t),n=function(s){if(!("targetChange"in s))return Xr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Xr.min():i.readTime?GA(i.readTime):Xr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=N6(this.serializer),r.addTarget=function(s,i){let o;const c=i.target;if(o=y6(c)?{documents:zge(s,c)}:{query:$ge(s,c).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=WJ(s,i.resumeToken);const u=E6(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Xr.min())>0){o.readTime=$5(s,i.snapshotVersion.toTimestamp());const u=E6(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,t);const n=Kge(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=N6(this.serializer),r.removeTarget=t,this.q_(r)}}class Pxe extends oZ{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return sa(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,sa(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){sa(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=Vge(t.writeResults,t.commitTime),n=GA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=N6(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>Hge(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rxe{}class Lxe extends Rxe{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Wt(Ct.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,C6(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Wt(Ct.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(t,C6(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Ct.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Wt(Ct.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Mxe{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mh(r),this.aa=!1):cr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="RemoteStore";class Uxe{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{kg(this)&&(cr(og,"Restarting streams for network reachability change."),await async function(c){const u=en(c);u.Ea.add(4),await S2(u),u.Ra.set("Unknown"),u.Ea.delete(4),await o4(u)}(this))})}),this.Ra=new Mxe(n,a)}}async function o4(e){if(kg(e))for(const t of e.da)await t(!0)}async function S2(e){for(const t of e.da)await t(!1)}function lZ(e,t){const r=en(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),UD(r)?MD(r):B1(r).O_()&&LD(r,t))}function RD(e,t){const r=en(e),n=B1(r);r.Ia.delete(t),n.O_()&&cZ(r,t),r.Ia.size===0&&(n.O_()?n.L_():kg(r)&&r.Ra.set("Unknown"))}function LD(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Xr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}B1(e).Y_(t)}function cZ(e,t){e.Va.Ue(t),B1(e).Z_(t)}function MD(e){e.Va=new Oge({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),B1(e).start(),e.Ra.ua()}function UD(e){return kg(e)&&!B1(e).x_()&&e.Ia.size>0}function kg(e){return en(e).Ea.size===0}function uZ(e){e.Va=void 0}async function Qxe(e){e.Ra.set("Online")}async function Hxe(e){e.Ia.forEach((t,r)=>{LD(e,t)})}async function Vxe(e,t){uZ(e),UD(e)?(e.Ra.ha(t),MD(e)):e.Ra.set("Unknown")}async function zxe(e,t,r){if(e.Ra.set("Online"),t instanceof qJ&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){cr(og,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await K5(e,n)}else if(t instanceof Y_?e.Va.Ze(t):t instanceof KJ?e.Va.st(t):e.Va.tt(t),!r.isEqual(Xr.min()))try{const n=await sZ(e.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,i))}}),o.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(Yi.EMPTY_BYTE_STRING,d.snapshotVersion)),cZ(s,c);const f=new H0(d.target,c,u,d.sequenceNumber);LD(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){cr(og,"Failed to raise snapshot:",n),await K5(e,n)}}async function K5(e,t,r){if(!k1(t))throw t;e.Ea.add(1),await S2(e),e.Ra.set("Offline"),r||(r=()=>sZ(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{cr(og,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await o4(e)})}function dZ(e,t){return t().catch(r=>K5(e,r,t))}async function l4(e){const t=en(e),r=gm(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:CD;for(;$xe(t);)try{const a=await Nxe(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,Gxe(t,a)}catch(a){await K5(t,a)}AZ(t)&&fZ(t)}function $xe(e){return kg(e)&&e.Ta.length<10}function Gxe(e,t){e.Ta.push(t);const r=gm(e);r.O_()&&r.X_&&r.ea(t.mutations)}function AZ(e){return kg(e)&&!gm(e).x_()&&e.Ta.length>0}function fZ(e){gm(e).start()}async function Kxe(e){gm(e).ra()}async function qxe(e){const t=gm(e);for(const r of e.Ta)t.ea(r.mutations)}async function Wxe(e,t,r){const n=e.Ta.shift(),a=TD.from(n,t,r);await dZ(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await l4(e)}async function Xxe(e,t){t&&gm(e).X_&&await async function(n,a){if(function(i){return jge(i)&&i!==Ct.ABORTED}(a.code)){const s=n.Ta.shift();gm(n).B_(),await dZ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await l4(n)}}(e,t),AZ(e)&&fZ(e)}async function W9(e,t){const r=en(e);r.asyncQueue.verifyOperationInProgress(),cr(og,"RemoteStore received new credentials");const n=kg(r);r.Ea.add(3),await S2(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await o4(r)}async function Yxe(e,t){const r=en(e);t?(r.Ea.delete(2),await o4(r)):t||(r.Ea.add(2),await S2(r),r.Ra.set("Unknown"))}function B1(e){return e.ma||(e.ma=function(r,n,a){const s=en(r);return s.sa(),new Dxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:Qxe.bind(null,e),t_:Hxe.bind(null,e),r_:Vxe.bind(null,e),H_:zxe.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),UD(e)?MD(e):e.Ra.set("Unknown")):(await e.ma.stop(),uZ(e))})),e.ma}function gm(e){return e.fa||(e.fa=function(r,n,a){const s=en(r);return s.sa(),new Pxe(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Kxe.bind(null,e),r_:Xxe.bind(null,e),ta:qxe.bind(null,e),na:Wxe.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await l4(e)):(await e.fa.stop(),e.Ta.length>0&&(cr(og,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new nh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,o=new QD(t,r,i,a,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wt(Ct.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function HD(e,t){if(mh("AsyncQueue",`${t}: ${e}`),k1(e))return new Wt(Ct.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{static emptySet(t){return new xv(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||br.comparator(r.key,n.key):(r,n)=>br.comparator(r.key,n.key),this.keyedMap=Cy(),this.sortedSet=new ls(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof xv)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new xv;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X9{constructor(){this.ga=new ls(br.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Hr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class Gv{constructor(t,r,n,a,s,i,o,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Gv(t,r,xv.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&e4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jxe{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Zxe{constructor(){this.queries=Y9(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=en(r),s=a.queries;a.queries=Y9(),s.forEach((i,o)=>{for(const c of o.Sa)c.onError(n)})})(this,new Wt(Ct.ABORTED,"Firestore shutting down"))}}function Y9(){return new Sg(e=>FJ(e),e4)}async function VD(e,t){const r=en(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new Jxe,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=HD(i,`Initialization of query '${Gx(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&$D(r)}async function zD(e,t){const r=en(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function eve(e,t){const r=en(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&$D(r)}function tve(e,t,r){const n=en(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function $D(e){e.Ca.forEach(t=>{t.next()})}var B6,J9;(J9=B6||(B6={})).Ma="default",J9.Cache="cache";class GD{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new Gv(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Gv.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==B6.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hZ{constructor(t){this.key=t}}class mZ{constructor(t){this.key=t}}class rve{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Bn(),this.mutatedKeys=Bn(),this.eu=OJ(t),this.tu=new xv(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new X9,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),p=t4(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),x=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;h&&p?h.data.isEqual(p.data)?g!==x&&(n.track({type:3,doc:p}),b=!0):this.su(h,p)||(n.track({type:2,doc:p}),b=!0,(c&&this.eu(p,c)>0||u&&this.eu(p,u)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),b=!0):h&&!p&&(n.track({type:1,doc:h}),b=!0,(c||u)&&(o=!0)),b&&(p?(i=i.add(p),s=x?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,f)=>function(p,g){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hr(20277,{Rt:b})}};return x(p)-x(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,i.length!==0||u?{snapshot:new Gv(this.query,t.tu,s,i,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new X9,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Bn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new mZ(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new hZ(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=Bn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Gv.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const KD="SyncEngine";class nve{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class ave{constructor(t){this.key=t,this.hu=!1}}class sve{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Sg(o=>FJ(o),e4),this.Iu=new Map,this.Eu=new Set,this.du=new ls(br.comparator),this.Au=new Map,this.Ru=new FD,this.Vu={},this.mu=new Map,this.fu=$v.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ive(e,t,r=!0){const n=yZ(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await pZ(n,t,r,!0),a}async function ove(e,t){const r=yZ(e);await pZ(r,t,!0,!1)}async function pZ(e,t,r,n){const a=await Sxe(e.localStore,$A(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await lve(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&lZ(e.remoteStore,a),o}async function lve(e,t,r,n,a){e.pu=(f,h,p)=>async function(x,b,y,w){let _=b.view.ru(y);_.Cs&&(_=await z9(x.localStore,b.query,!1).then(({documents:E})=>b.view.ru(E,_)));const j=w&&w.targetChanges.get(b.targetId),k=w&&w.targetMismatches.get(b.targetId)!=null,I=b.view.applyChanges(_,x.isPrimaryClient,j,k);return eQ(x,b.targetId,I.au),I.snapshot}(e,f,h,p);const s=await z9(e.localStore,t,!0),i=new rve(t,s.Qs),o=i.ru(s.documents),c=N2.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(o,e.isPrimaryClient,c);eQ(e,r,u.au);const d=new nve(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function cve(e,t,r){const n=en(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!e4(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await S6(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&RD(n.remoteStore,a.targetId),T6(n,a.targetId)}).catch(S1)):(T6(n,a.targetId),await S6(n.localStore,a.targetId,!0))}async function uve(e,t){const r=en(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),RD(r.remoteStore,n.targetId))}async function dve(e,t,r){const n=xve(e);try{const a=await function(i,o){const c=en(i),u=sr.now(),d=o.reduce((p,g)=>p.add(g.key),Bn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=ph(),x=Bn();return c.Ns.getEntries(p,d).next(b=>{g=b,g.forEach((y,w)=>{w.isValidDocument()||(x=x.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,g)).next(b=>{f=b;const y=[];for(const w of o){const _=Nge(w,f.get(w.key).overlayedDocument);_!=null&&y.push(new Fm(w.key,_,NJ(_.value.mapValue),yl.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,y,o)}).next(b=>{h=b;const y=b.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(p,b.batchId,y)})}).then(()=>({batchId:h.batchId,changes:PJ(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,c){let u=i.Vu[i.currentUser.toKey()];u||(u=new ls(kn)),u=u.insert(o,c),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await k2(n,a.changes),await l4(n.remoteStore)}catch(a){const s=HD(a,"Failed to persist write");r.reject(s)}}async function gZ(e,t){const r=en(e);try{const n=await Cxe(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(sa(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?sa(i.hu,14607):a.removedDocuments.size>0&&(sa(i.hu,42227),i.hu=!1))}),await k2(r,n,t)}catch(n){await S1(n)}}function Z9(e,t,r){const n=en(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(i,o){const c=en(i);c.onlineState=o;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(o)&&(u=!0)}),u&&$D(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Ave(e,t,r){const n=en(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new ls(br.comparator);i=i.insert(s,Go.newNoDocument(s,Xr.min()));const o=Bn().add(s),c=new s4(Xr.min(),new Map,new ls(kn),i,o);await gZ(n,c),n.du=n.du.remove(s),n.Au.delete(t),qD(n)}else await S6(n.localStore,t,!1).then(()=>T6(n,t,r)).catch(S1)}async function fve(e,t){const r=en(e),n=t.batch.batchId;try{const a=await Exe(r.localStore,t);vZ(r,n,null),xZ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await k2(r,a)}catch(a){await S1(a)}}async function hve(e,t,r){const n=en(e);try{const a=await function(i,o){const c=en(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(f=>(sa(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);vZ(n,t,r),xZ(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await k2(n,a)}catch(a){await S1(a)}}function xZ(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function vZ(e,t,r){const n=en(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function T6(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||bZ(e,n)})}function bZ(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(RD(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),qD(e))}function eQ(e,t,r){for(const n of r)n instanceof hZ?(e.Ru.addReference(n.key,t),mve(e,n)):n instanceof mZ?(cr(KD,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||bZ(e,n.key)):Hr(19791,{wu:n})}function mve(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(cr(KD,"New document in limbo: "+r),e.Eu.add(n),qD(e))}function qD(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new br(Na.fromString(t)),n=e.fu.next();e.Au.set(n,new ave(r)),e.du=e.du.insert(r,n),lZ(e.remoteStore,new H0($A(ZS(r.path)),n,"TargetPurposeLimboResolution",WS.ce))}}async function k2(e,t,r){const n=en(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,c)=>{i.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=DD.As(c.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(c,u){const d=en(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Dt.forEach(u,h=>Dt.forEach(h.Es,p=>d.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Dt.forEach(h.ds,p=>d.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!k1(f))throw f;cr(PD,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=d.Ms.get(h),g=p.snapshotVersion,x=p.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,x)}}}(n.localStore,s))}async function pve(e,t){const r=en(e);if(!r.currentUser.isEqual(t)){cr(KD,"User change. New user:",t.toKey());const n=await aZ(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(o=>{o.forEach(c=>{c.reject(new Wt(Ct.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await k2(r,n.Ls)}}function gve(e,t){const r=en(e),n=r.Au.get(t);if(n&&n.hu)return Bn().add(n.key);{let a=Bn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function yZ(e){const t=en(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gZ.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=gve.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ave.bind(null,t),t.Pu.H_=eve.bind(null,t.eventManager),t.Pu.yu=tve.bind(null,t.eventManager),t}function xve(e){const t=en(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=fve.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hve.bind(null,t),t}class q5{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=i4(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return wxe(this.persistence,new vxe,t.initialUser,this.serializer)}Cu(t){return new nZ(OD.mi,this.serializer)}Du(t){return new Bxe}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}q5.provider={build:()=>new q5};class vve extends q5{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){sa(this.persistence.referenceDelegate instanceof G5,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new axe(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?zl.withCacheSize(this.cacheSizeBytes):zl.DEFAULT;return new nZ(n=>G5.mi(n,r),this.serializer)}}class j6{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Z9(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=pve.bind(null,this.syncEngine),await Yxe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Zxe}()}createDatastore(t){const r=i4(t.databaseInfo.databaseId),n=function(s){return new Oxe(s)}(t.databaseInfo);return function(s,i,o,c){return new Lxe(s,i,o,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,o){return new Uxe(n,a,s,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>Z9(this.syncEngine,r,0),function(){return K9.v()?new K9:new Txe}())}createSyncEngine(t,r){return function(a,s,i,o,c,u,d){const f=new sve(a,s,i,o,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=en(a);cr(og,"RemoteStore shutting down."),s.Ea.add(5),await S2(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}j6.provider={build:()=>new j6};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):mh("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xm="FirestoreClient";class bve{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Ho.UNAUTHENTICATED,this.clientId=KS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{cr(xm,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(cr(xm,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new nh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=HD(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function _T(e,t){e.asyncQueue.verifyOperationInProgress(),cr(xm,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await aZ(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function tQ(e,t){e.asyncQueue.verifyOperationInProgress();const r=await yve(e);cr(xm,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>W9(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>W9(t.remoteStore,a)),e._onlineComponents=t}async function yve(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){cr(xm,"Using user provided OfflineComponentProvider");try{await _T(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===Ct.FAILED_PRECONDITION||a.code===Ct.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;ig("Error using user provided cache. Falling back to memory cache: "+r),await _T(e,new q5)}}else cr(xm,"Using default OfflineComponentProvider"),await _T(e,new vve(void 0));return e._offlineComponents}async function wZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(cr(xm,"Using user provided OnlineComponentProvider"),await tQ(e,e._uninitializedComponentsProvider._online)):(cr(xm,"Using default OnlineComponentProvider"),await tQ(e,new j6))),e._onlineComponents}function wve(e){return wZ(e).then(t=>t.syncEngine)}async function W5(e){const t=await wZ(e),r=t.eventManager;return r.onListen=ive.bind(null,t.syncEngine),r.onUnlisten=cve.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=ove.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=uve.bind(null,t.syncEngine),r}function Eve(e,t,r={}){const n=new nh;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new WD({next:h=>{d.Nu(),i.enqueueAndForget(()=>zD(s,f));const p=h.docs.has(o);!p&&h.fromCache?u.reject(new Wt(Ct.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?u.reject(new Wt(Ct.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new GD(ZS(o.path),d,{includeMetadataChanges:!0,qa:!0});return VD(s,f)}(await W5(e),e.asyncQueue,t,r,n)),n.promise}function Cve(e,t,r={}){const n=new nh;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new WD({next:h=>{d.Nu(),i.enqueueAndForget(()=>zD(s,f)),h.fromCache&&c.source==="server"?u.reject(new Wt(Ct.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new GD(o,d,{includeMetadataChanges:!0,qa:!0});return VD(s,f)}(await W5(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EZ(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rQ=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CZ="firestore.googleapis.com",nQ=!0;class aQ{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Wt(Ct.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CZ,this.ssl=nQ}else this.host=t.host,this.ssl=t.ssl??nQ;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=rZ;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<rxe)throw new Wt(Ct.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}mJ("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=EZ(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Wt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Wt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Wt(Ct.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class c4{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aQ({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wt(Ct.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Wt(Ct.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aQ(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new fJ;switch(n.type){case"firstParty":return new Ope(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Wt(Ct.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=rQ.get(r);n&&(cr("ComponentProvider","Removing Datastore"),rQ.delete(r),n.terminate())}(this),Promise.resolve()}}function _Z(e,t,r,n={}){var u;e=el(e,c4);const a=Bh(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(US(`https://${o}`),QS("Firestore",!0)),s.host!==CZ&&s.host!==o&&ig("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:o,ssl:a,emulatorOptions:n};if(!dm(c,i)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=Ho.MOCK_USER;else{d=vY(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Wt(Ct.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Ho(h)}e._authCredentials=new jpe(new AJ(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Ud(this.firestore,t,this._query)}}class ss{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ah(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ss(this.firestore,t,this._key)}toJSON(){return{type:ss._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(C2(r,ss._jsonSchema))return new ss(t,n||null,new br(Na.fromString(r.referencePath)))}}ss._jsonSchemaVersion="firestore/documentReference/1.0",ss._jsonSchema={type:fi("string",ss._jsonSchemaVersion),referencePath:fi("string")};class ah extends Ud{constructor(t,r,n){super(t,r,ZS(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ss(this.firestore,null,new br(t))}withConverter(t){return new ah(this.firestore,t,this._path)}}function Nt(e,t,...r){if(e=Xn(e),hJ("collection","path",t),e instanceof c4){const n=Na.fromString(t,...r);return x9(n),new ah(e,null,n)}{if(!(e instanceof ss||e instanceof ah))throw new Wt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return x9(n),new ah(e.firestore,null,n)}}function dr(e,t,...r){if(e=Xn(e),arguments.length===1&&(t=KS.newId()),hJ("doc","path",t),e instanceof c4){const n=Na.fromString(t,...r);return g9(n),new ss(e,null,new br(n))}{if(!(e instanceof ss||e instanceof ah))throw new Wt(Ct.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return g9(n),new ss(e.firestore,e instanceof ah?e.converter:null,new br(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sQ="AsyncQueue";class iQ{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new iZ(this,"async_queue_retry"),this._c=()=>{const n=CT();n&&cr(sQ,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=CT();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=CT();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new nh;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!k1(t))throw t;cr(sQ,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,mh("INTERNAL UNHANDLED ERROR: ",oQ(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=QD.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Hr(47125,{Pc:oQ(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function oQ(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lQ(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Ld extends c4{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new iQ,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new iQ(t),this._firestoreClient=void 0,await t}}}function XD(e,t){const r=typeof e=="object"?e:HS(),n=typeof e=="string"?e:U5,a=b2(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=dD("firestore");s&&_Z(a,...s)}return a}function T1(e){if(e._terminated)throw new Wt(Ct.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||_ve(e),e._firestoreClient}function _ve(e){var n,a,s;const t=e._freezeSettings(),r=function(o,c,u,d){return new Ype(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,EZ(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new bve(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ic(Yi.fromBase64String(t))}catch(r){throw new Wt(Ct.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Ic(Yi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ic._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(C2(t,Ic._jsonSchema))return Ic.fromBase64String(t.bytes)}}Ic._jsonSchemaVersion="firestore/bytes/1.0",Ic._jsonSchema={type:fi("string",Ic._jsonSchemaVersion),bytes:fi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Wt(Ct.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Wt(Ct.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Wt(Ct.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return kn(this._lat,t._lat)||kn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bd._jsonSchemaVersion}}static fromJSON(t){if(C2(t,Bd._jsonSchema))return new Bd(t.latitude,t.longitude)}}Bd._jsonSchemaVersion="firestore/geoPoint/1.0",Bd._jsonSchema={type:fi("string",Bd._jsonSchemaVersion),latitude:fi("number"),longitude:fi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Td._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(C2(t,Td._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Td(t.vectorValues);throw new Wt(Ct.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Td._jsonSchemaVersion="firestore/vectorValue/1.0",Td._jsonSchema={type:fi("string",Td._jsonSchemaVersion),vectorValues:fi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nve=/^__.*__$/;class Sve{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Fm(t,this.data,this.fieldMask,r,this.fieldTransforms):new _2(t,this.data,r,this.fieldTransforms)}}class NZ{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Fm(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function SZ(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hr(40011,{Ac:e})}}class u4{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new u4({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return X5(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(SZ(this.Ac)&&Nve.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class kve{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||i4(t)}Cc(t,r,n,a=!1){return new u4({Ac:t,methodName:r,Dc:n,path:Gi.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function F1(e){const t=e._freezeSettings(),r=i4(e._databaseId);return new kve(e._databaseId,!!t.ignoreUndefinedProperties,r)}function YD(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);eP("Data must be an object, but it was:",i,n);const o=jZ(n,i);let c,u;if(s.merge)c=new Pc(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=I6(t,f,r);if(!i.contains(h))throw new Wt(Ct.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);FZ(d,h)||d.push(h)}c=new Pc(d),u=i.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=i.fieldTransforms;return new Sve(new Wl(o),c,u)}class d4 extends I1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof d4}}function Bve(e,t,r){return new u4({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class JD extends I1{_toFieldTransform(t){return new VJ(t.path,new Sw)}isEqual(t){return t instanceof JD}}class ZD extends I1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=Bve(this,t,!0),n=this.vc.map(s=>O1(s,r)),a=new zv(n);return new VJ(t.path,a)}isEqual(t){return t instanceof ZD&&dm(this.vc,t.vc)}}function kZ(e,t,r,n){const a=e.Cc(1,t,r);eP("Data must be an object, but it was:",a,n);const s=[],i=Wl.empty();Im(n,(c,u)=>{const d=tP(t,c,r);u=Xn(u);const f=a.yc(d);if(u instanceof d4)s.push(d);else{const h=O1(u,f);h!=null&&(s.push(d),i.set(d,h))}});const o=new Pc(s);return new NZ(i,o,a.fieldTransforms)}function BZ(e,t,r,n,a,s){const i=e.Cc(1,t,r),o=[I6(t,n,r)],c=[a];if(s.length%2!=0)throw new Wt(Ct.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(I6(t,s[h])),c.push(s[h+1]);const u=[],d=Wl.empty();for(let h=o.length-1;h>=0;--h)if(!FZ(u,o[h])){const p=o[h];let g=c[h];g=Xn(g);const x=i.yc(p);if(g instanceof d4)u.push(p);else{const b=O1(g,x);b!=null&&(u.push(p),d.set(p,b))}}const f=new Pc(u);return new NZ(d,f,i.fieldTransforms)}function TZ(e,t,r,n=!1){return O1(r,e.Cc(n?4:3,t))}function O1(e,t){if(IZ(e=Xn(e)))return eP("Unsupported field value:",t,e),jZ(e,t);if(e instanceof I1)return function(n,a){if(!SZ(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let c=O1(o,a.wc(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Xn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return bge(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=sr.fromDate(n);return{timestampValue:$5(a.serializer,s)}}if(n instanceof sr){const s=new sr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:$5(a.serializer,s)}}if(n instanceof Bd)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ic)return{bytesValue:WJ(a.serializer,n._byteString)};if(n instanceof ss){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ID(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Td)return function(i,o){return{mapValue:{fields:{[CJ]:{stringValue:_J},[Q5]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return BD(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${qS(n)}`)}(e,t)}function jZ(e,t){const r={};return xJ(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Im(e,(n,a)=>{const s=O1(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function IZ(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof sr||e instanceof Bd||e instanceof Ic||e instanceof ss||e instanceof I1||e instanceof Td)}function eP(e,t,r){if(!IZ(r)||!pJ(r)){const n=qS(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function I6(e,t,r){if((t=Xn(t))instanceof j1)return t._internalPath;if(typeof t=="string")return tP(e,t);throw X5("Field path arguments must be of type string or ",e,!1,void 0,r)}const Tve=new RegExp("[~\\*/\\[\\]]");function tP(e,t,r){if(t.search(Tve)>=0)throw X5(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new j1(...t.split("."))._internalPath}catch{throw X5(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function X5(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new Wt(Ct.INVALID_ARGUMENT,o+e+c)}function FZ(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new jve(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(A4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class jve extends rP{data(){return super.data()}}function A4(e,t){return typeof t=="string"?tP(e,t):t instanceof j1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OZ(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Wt(Ct.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class nP{}class B2 extends nP{}function zt(e,t,...r){let n=[];t instanceof nP&&n.push(t),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof f4).length,o=s.filter(c=>c instanceof T2).length;if(i>1||i>0&&o>0)throw new Wt(Ct.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class T2 extends B2{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new T2(t,r,n)}_apply(t){const r=this._parse(t);return PZ(t._query,r),new Ud(t.firestore,t.converter,w6(t._query,r))}_parse(t){const r=F1(t.firestore);return function(s,i,o,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Wt(Ct.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){uQ(f,d);const g=[];for(const x of f)g.push(cQ(c,s,x));h={arrayValue:{values:g}}}else h=cQ(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||uQ(f,d),h=TZ(o,i,f,d==="in"||d==="not-in");return Ai.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function Yr(e,t,r){const n=t,a=A4("where",e);return T2._create(a,n,r)}class f4 extends nP{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new f4(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Rd.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const c of o)PZ(i,c),i=w6(i,c)}(t._query,r),new Ud(t.firestore,t.converter,w6(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class h4 extends B2{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new h4(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Wt(Ct.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Wt(Ct.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nw(s,i)}(t._query,this._field,this._direction);return new Ud(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new Ng(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function _r(e,t="asc"){const r=t,n=A4("orderBy",e);return h4._create(n,r)}class m4 extends B2{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new m4(t,r,n)}_apply(t){return new Ud(t.firestore,t.converter,V5(t._query,this._limit,this._limitType))}}function jd(e){return Upe("limit",e),m4._create("limit",e,"F")}class p4 extends B2{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new p4(t,r,n)}_apply(t){const r=Ive(t,this.type,this._docOrFields,this._inclusive);return new Ud(t.firestore,t.converter,function(a,s){return new Ng(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function DZ(...e){return p4._create("startAfter",e,!1)}function Ive(e,t,r,n){if(r[0]=Xn(r[0]),r[0]instanceof rP)return function(s,i,o,c,u){if(!c)throw new Wt(Ct.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const f of gv(s))if(f.field.isKeyField())d.push(H5(i,c.key));else{const h=c.data.field(f.field);if(YS(h))throw new Wt(Ct.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=f.field.canonicalString();throw new Wt(Ct.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(h)}return new Vv(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=F1(e.firestore);return function(i,o,c,u,d,f){const h=i.explicitOrderBy;if(d.length>h.length)throw new Wt(Ct.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<d.length;g++){const x=d[g];if(h[g].field.isKeyField()){if(typeof x!="string")throw new Wt(Ct.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof x}`);if(!kD(i)&&x.indexOf("/")!==-1)throw new Wt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${x}' contains a slash.`);const b=i.path.child(Na.fromString(x));if(!br.isDocumentKey(b))throw new Wt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const y=new br(b);p.push(H5(o,y))}else{const b=TZ(c,u,x);p.push(b)}}return new Vv(p,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function cQ(e,t,r){if(typeof(r=Xn(r))=="string"){if(r==="")throw new Wt(Ct.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kD(t)&&r.indexOf("/")!==-1)throw new Wt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Na.fromString(r));if(!br.isDocumentKey(n))throw new Wt(Ct.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return H5(e,new br(n))}if(r instanceof ss)return H5(e,r._key);throw new Wt(Ct.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qS(r)}.`)}function uQ(e,t){if(!Array.isArray(e)||e.length===0)throw new Wt(Ct.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function PZ(e,t){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Wt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Wt(Ct.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class RZ{convertValue(t,r="none"){switch(pm(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Hs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(mm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Hr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return Im(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[Q5].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>Hs(i.doubleValue));return new Td(r)}convertGeoPoint(t){return new Bd(Hs(t.latitude),Hs(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=JS(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Cw(t));default:return null}}convertTimestamp(t){const r=hm(t);return new sr(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Na.fromString(t);sa(tZ(n),9688,{name:t});const a=new Uv(n.get(1),n.get(3)),s=new br(n.popFirst(5));return a.isEqual(r)||mh(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class tv{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class tm extends rP{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new qy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(A4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Ct.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=tm._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}tm._jsonSchemaVersion="firestore/documentSnapshot/1.0",tm._jsonSchema={type:fi("string",tm._jsonSchemaVersion),bundleSource:fi("string","DocumentSnapshot"),bundleName:fi("string"),bundle:fi("string")};class qy extends tm{data(t={}){return super.data(t)}}class rm{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new tv(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new qy(this._firestore,this._userDataWriter,n.key,n,new tv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Wt(Ct.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const c=new qy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new tv(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new qy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new tv(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:Fve(o.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Ct.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=rm._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=KS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Fve(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(e){e=el(e,ss);const t=el(e.firestore,Ld);return Eve(T1(t),e._key).then(r=>LZ(t,e,r))}rm._jsonSchemaVersion="firestore/querySnapshot/1.0",rm._jsonSchema={type:fi("string",rm._jsonSchemaVersion),bundleSource:fi("string","QuerySnapshot"),bundleName:fi("string"),bundle:fi("string")};class sP extends RZ{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ic(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new ss(this.firestore,null,r)}}function ga(e){e=el(e,Ud);const t=el(e.firestore,Ld),r=T1(t),n=new sP(t);return OZ(e._query),Cve(r,e._query).then(a=>new rm(t,n,e,a))}function Ji(e,t,r){e=el(e,ss);const n=el(e.firestore,Ld),a=aP(e.converter,t,r);return P1(n,[YD(F1(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,yl.none())])}function Vu(e,t,r,...n){e=el(e,ss);const a=el(e.firestore,Ld),s=F1(a);let i;return i=typeof(t=Xn(t))=="string"||t instanceof j1?BZ(s,"updateDoc",e._key,t,r,n):kZ(s,"updateDoc",e._key,t),P1(a,[i.toMutation(e._key,yl.exists(!0))])}function za(e){return P1(el(e.firestore,Ld),[new a4(e._key,yl.none())])}function Tn(e,t){const r=el(e.firestore,Ld),n=dr(e),a=aP(e.converter,t);return P1(r,[YD(F1(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,yl.exists(!1))]).then(()=>n)}function mr(e,...t){var c,u,d;e=Xn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||lQ(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(lQ(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,i,o;if(e instanceof ss)i=el(e.firestore,Ld),o=ZS(e._key.path),s={next:f=>{t[n]&&t[n](LZ(i,e,f))},error:t[n+1],complete:t[n+2]};else{const f=el(e,Ud);i=el(f.firestore,Ld),o=f._query;const h=new sP(i);s={next:p=>{t[n]&&t[n](new rm(i,h,f,p))},error:t[n+1],complete:t[n+2]},OZ(e._query)}return function(h,p,g,x){const b=new WD(x),y=new GD(p,b,g);return h.asyncQueue.enqueueAndForget(async()=>VD(await W5(h),y)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>zD(await W5(h),y))}}(T1(i),o,a,s)}function P1(e,t){return function(n,a){const s=new nh;return n.asyncQueue.enqueueAndForget(async()=>dve(await wve(n),a,s)),s.promise}(T1(e),t)}function LZ(e,t,r){const n=r.docs.get(t._key),a=new sP(e);return new tm(e,a,t._key,n,new tv(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MZ{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=F1(t)}set(t,r,n){this._verifyNotCommitted();const a=NT(t,this._firestore),s=aP(a.converter,r,n),i=YD(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,yl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=NT(t,this._firestore);let i;return i=typeof(r=Xn(r))=="string"||r instanceof j1?BZ(this._dataReader,"WriteBatch.update",s._key,r,n,a):kZ(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,yl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=NT(t,this._firestore);return this._mutations=this._mutations.concat(new a4(r._key,yl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wt(Ct.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function NT(e,t){if((e=Xn(e)).firestore!==t)throw new Wt(Ct.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function Ni(){return new JD("serverTimestamp")}function UZ(...e){return new ZD("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(e){return T1(e=el(e,Ld)),new MZ(e,t=>P1(e,t))}(function(t,r=!0){(function(a){N1=a})(Cg),Am(new Ah("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Ld(new Ipe(n.getProvider("auth-internal")),new Dpe(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Wt(Ct.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uv(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Ru(f9,h9,t),Ru(f9,h9,"esm2020")})();const Ove=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:RZ,Bytes:Ic,CollectionReference:ah,DocumentReference:ss,DocumentSnapshot:tm,FieldPath:j1,FieldValue:I1,Firestore:Ld,FirestoreError:Wt,GeoPoint:Bd,Query:Ud,QueryCompositeFilterConstraint:f4,QueryConstraint:B2,QueryDocumentSnapshot:qy,QueryFieldFilterConstraint:T2,QueryLimitConstraint:m4,QueryOrderByConstraint:h4,QuerySnapshot:rm,QueryStartAtConstraint:p4,SnapshotMetadata:tv,Timestamp:sr,VectorValue:Td,WriteBatch:MZ,_AutoId:KS,_ByteString:Yi,_DatabaseId:Uv,_DocumentKey:br,_EmptyAuthCredentialsProvider:fJ,_FieldPath:Gi,_cast:el,_logWarn:ig,_validateIsNotUsedTogether:mJ,addDoc:Tn,arrayUnion:UZ,collection:Nt,connectFirestoreEmulator:_Z,deleteDoc:za,doc:dr,ensureFirestoreConfigured:T1,executeWrite:P1,getDoc:D1,getDocs:ga,getFirestore:XD,limit:jd,onSnapshot:mr,orderBy:_r,query:zt,serverTimestamp:Ni,setDoc:Ji,startAfter:DZ,updateDoc:Vu,where:Yr,writeBatch:Bg},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QZ="firebasestorage.googleapis.com",HZ="storageBucket",Dve=120*1e3,Pve=600*1e3,Rve=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Md{constructor(t,r,n=0){super(ST(t),`Firebase Storage: ${r} (${ST(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,As.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return ST(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Va;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Va||(Va={}));function ST(e){return"storage/"+e}function iP(){const e="An unknown error occurred, please check the error payload for server response.";return new As(Va.UNKNOWN,e)}function Lve(e){return new As(Va.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Mve(e){return new As(Va.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Uve(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new As(Va.UNAUTHENTICATED,e)}function Qve(){return new As(Va.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Hve(e){return new As(Va.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function VZ(){return new As(Va.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zZ(){return new As(Va.CANCELED,"User canceled the upload/download.")}function Vve(e){return new As(Va.INVALID_URL,"Invalid URL '"+e+"'.")}function zve(e){return new As(Va.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function $ve(){return new As(Va.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+HZ+"' property when initializing the app?")}function $Z(){return new As(Va.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Gve(){return new As(Va.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Kve(){return new As(Va.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function qve(e){return new As(Va.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function F6(e){return new As(Va.INVALID_ARGUMENT,e)}function GZ(){return new As(Va.APP_DELETED,"The Firebase app was deleted.")}function Wve(e){return new As(Va.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Wy(e,t){return new As(Va.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function $b(e){throw new As(Va.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=xl.makeFromUrl(t,r)}catch{return new xl(t,"")}if(n.path==="")return n;throw zve(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+a+i,"i"),c={bucket:1,path:3};function u(j){j.path_=decodeURIComponent(j.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},x=r===QZ?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",y=new RegExp(`^https?://${x}/${a}/${b}`,"i"),_=[{regex:o,indices:c,postModify:s},{regex:p,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let j=0;j<_.length;j++){const k=_[j],I=k.regex.exec(t);if(I){const E=I[k.indices.bucket];let N=I[k.indices.path];N||(N=""),n=new xl(E,N),k.postModify(n);break}}if(n==null)throw Vve(t);return n}}class Xve{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yve(e,t,r){let n=1,a=null,s=null,i=!1,o=0;function c(){return o===2}let u=!1;function d(...b){u||(u=!0,t.apply(null,b))}function f(b){a=setTimeout(()=>{a=null,e(p,c())},b)}function h(){s&&clearTimeout(s)}function p(b,...y){if(u){h();return}if(b){h(),d.call(null,b,...y);return}if(c()||i){h(),d.call(null,b,...y);return}n<64&&(n*=2);let _;o===1?(o=2,_=0):_=(n+Math.random())*1e3,f(_)}let g=!1;function x(b){g||(g=!0,h(),!u&&(a!==null?(b||(o=2),clearTimeout(a),f(0)):b||(o=1)))}return f(0),s=setTimeout(()=>{i=!0,x(!0)},r),x}function Jve(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zve(e){return e!==void 0}function e1e(e){return typeof e=="function"}function t1e(e){return typeof e=="object"&&!Array.isArray(e)}function g4(e){return typeof e=="string"||e instanceof String}function dQ(e){return oP()&&e instanceof Blob}function oP(){return typeof Blob<"u"}function O6(e,t,r,n){if(n<t)throw F6(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw F6(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function KZ(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Hp;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Hp||(Hp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qZ(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1e{constructor(t,r,n,a,s,i,o,c,u,d,f,h=!0,p=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,x)=>{this.resolve_=g,this.reject_=x,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new xC(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=o=>{const c=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const o=s.getErrorCode()===Hp.NO_ERROR,c=s.getStatus();if(!o||qZ(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Hp.ABORT;n(!1,new xC(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new xC(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());Zve(c)?s(c):s()}catch(c){i(c)}else if(o!==null){const c=iP();c.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,c)):i(c)}else if(a.canceled){const c=this.appDelete_?GZ():zZ();i(c)}else{const c=VZ();i(c)}};this.canceled_?r(!1,new xC(!1,null,!0)):this.backoffId_=Yve(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Jve(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xC{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function n1e(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function a1e(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function s1e(e,t){t&&(e["X-Firebase-GMPID"]=t)}function i1e(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function o1e(e,t,r,n,a,s,i=!0,o=!1){const c=KZ(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return s1e(d,t),n1e(d,r),a1e(d,s),i1e(d,n),new r1e(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function c1e(...e){const t=l1e();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(oP())return new Blob(e);throw new As(Va.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function u1e(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1e(e){if(typeof atob>"u")throw qve("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class kT{constructor(t,r){this.data=t,this.contentType=r||null}}function A1e(e,t){switch(e){case RA.RAW:return new kT(WZ(t));case RA.BASE64:case RA.BASE64URL:return new kT(XZ(e,t));case RA.DATA_URL:return new kT(h1e(t),m1e(t))}throw iP()}function WZ(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function f1e(e){let t;try{t=decodeURIComponent(e)}catch{throw Wy(RA.DATA_URL,"Malformed data URL.")}return WZ(t)}function XZ(e,t){switch(e){case RA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw Wy(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case RA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw Wy(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=d1e(t)}catch(a){throw a.message.includes("polyfill")?a:Wy(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class YZ{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw Wy(RA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=p1e(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function h1e(e){const t=new YZ(e);return t.base64?XZ(RA.BASE64,t.rest):f1e(t.rest)}function m1e(e){return new YZ(e).contentType}function p1e(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(t,r){let n=0,a="";dQ(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if(dQ(this.data_)){const n=this.data_,a=u1e(n,t,r);return a===null?null:new $f(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new $f(n,!0)}}static getBlob(...t){if(oP()){const r=t.map(n=>n instanceof $f?n.data_:n);return new $f(c1e.apply(null,r))}else{const r=t.map(i=>g4(i)?A1e(RA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)a[s++]=i[o]}),new $f(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lP(e){let t;try{t=JSON.parse(e)}catch{return null}return t1e(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1e(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function x1e(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function JZ(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1e(e,t){return t}class Al{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||v1e}}let vC=null;function b1e(e){return!g4(e)||e.length<2?e:JZ(e)}function cP(){if(vC)return vC;const e=[];e.push(new Al("bucket")),e.push(new Al("generation")),e.push(new Al("metageneration")),e.push(new Al("name","fullPath",!0));function t(s,i){return b1e(i)}const r=new Al("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new Al("size");return a.xform=n,e.push(a),e.push(new Al("timeCreated")),e.push(new Al("updated")),e.push(new Al("md5Hash",null,!0)),e.push(new Al("cacheControl",null,!0)),e.push(new Al("contentDisposition",null,!0)),e.push(new Al("contentEncoding",null,!0)),e.push(new Al("contentLanguage",null,!0)),e.push(new Al("contentType",null,!0)),e.push(new Al("metadata","customMetadata",!0)),vC=e,vC}function y1e(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new xl(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function w1e(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return y1e(n,e),n}function ZZ(e,t,r){const n=lP(t);return n===null?null:w1e(e,n,r)}function E1e(e,t,r,n){const a=lP(t);if(a===null||!g4(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+i(d)+"/o/"+i(f),p=Tg(h,r,n),g=KZ({alt:"media",token:u});return p+g})[0]}function eee(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AQ="prefixes",fQ="items";function C1e(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[AQ])for(const a of r[AQ]){const s=a.replace(/\/$/,""),i=e._makeStorageReference(new xl(t,s));n.prefixes.push(i)}if(r[fQ])for(const a of r[fQ]){const s=e._makeStorageReference(new xl(t,a.name));n.items.push(s)}return n}function _1e(e,t,r){const n=lP(r);return n===null?null:C1e(e,t,n)}class Om{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(e){if(!e)throw iP()}function uP(e,t){function r(n,a){const s=ZZ(e,a,t);return KA(s!==null),s}return r}function N1e(e,t){function r(n,a){const s=_1e(e,t,a);return KA(s!==null),s}return r}function S1e(e,t){function r(n,a){const s=ZZ(e,a,t);return KA(s!==null),E1e(s,a,e.host,e._protocol)}return r}function R1(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=Qve():a=Uve():r.getStatus()===402?a=Mve(e.bucket):r.getStatus()===403?a=Hve(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function dP(e){const t=R1(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=Lve(e.path)),s.serverResponse=a.serverResponse,s}return r}function k1e(e,t,r){const n=t.fullServerUrl(),a=Tg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new Om(a,s,uP(e,r),i);return o.errorHandler=dP(t),o}function B1e(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const i=t.bucketOnlyServerUrl(),o=Tg(i,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new Om(o,c,N1e(e,t.bucket),u);return d.urlParams=s,d.errorHandler=R1(t),d}function T1e(e,t,r){const n=t.fullServerUrl(),a=Tg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new Om(a,s,S1e(e,r),i);return o.errorHandler=dP(t),o}function j1e(e,t){const r=t.fullServerUrl(),n=Tg(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function i(c,u){}const o=new Om(n,a,i,s);return o.successCodes=[200,204],o.errorHandler=dP(t),o}function I1e(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function tee(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=I1e(null,t)),n}function ree(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let _="";for(let j=0;j<2;j++)_=_+Math.random().toString().slice(2);return _}const c=o();i["Content-Type"]="multipart/related; boundary="+c;const u=tee(t,n,a),d=eee(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",p=$f.getBlob(f,n,h);if(p===null)throw $Z();const g={name:u.fullPath},x=Tg(s,e.host,e._protocol),b="POST",y=e.maxUploadRetryTime,w=new Om(x,b,uP(e,r),y);return w.urlParams=g,w.headers=i,w.body=p.uploadData(),w.errorHandler=R1(t),w}class Y5{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function AP(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{KA(!1)}return KA(!!r&&(t||["active"]).indexOf(r)!==-1),r}function F1e(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i=tee(t,n,a),o={name:i.fullPath},c=Tg(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":i.contentType,"Content-Type":"application/json; charset=utf-8"},f=eee(i,r),h=e.maxUploadRetryTime;function p(x){AP(x);let b;try{b=x.getResponseHeader("X-Goog-Upload-URL")}catch{KA(!1)}return KA(g4(b)),b}const g=new Om(c,u,p,h);return g.urlParams=o,g.headers=d,g.body=f,g.errorHandler=R1(t),g}function O1e(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=AP(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{KA(!1)}f||KA(!1);const h=Number(f);return KA(!isNaN(h)),new Y5(h,n.size(),d==="final")}const i="POST",o=e.maxUploadRetryTime,c=new Om(r,i,s,o);return c.headers=a,c.errorHandler=R1(t),c}const hQ=256*1024;function D1e(e,t,r,n,a,s,i,o){const c=new Y5(0,0);if(i?(c.current=i.current,c.total=i.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw Gve();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,h=f+d;let p="";d===0?p="finalize":u===d?p="upload, finalize":p="upload";const g={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${c.current}`},x=n.slice(f,h);if(x===null)throw $Z();function b(j,k){const I=AP(j,["active","final"]),E=c.current+d,N=n.size();let B;return I==="final"?B=uP(t,s)(j,k):B=null,new Y5(E,N,I==="final",B)}const y="POST",w=t.maxUploadRetryTime,_=new Om(r,y,b,w);return _.headers=g,_.body=x.uploadData(),_.progressCallback=o||null,_.errorHandler=R1(e),_}const $l={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function BT(e){switch(e){case"running":case"pausing":case"canceling":return $l.RUNNING;case"paused":return $l.PAUSED;case"success":return $l.SUCCESS;case"canceled":return $l.CANCELED;case"error":return $l.ERROR;default:return $l.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1e{constructor(t,r,n){if(e1e(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class R1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Hp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Hp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Hp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw $b("cannot .send() more than once");if(Bh(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw $b("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw $b("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw $b("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw $b("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class L1e extends R1e{initXhr(){this.xhr_.responseType="text"}}function Gf(){return new L1e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1e{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=cP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(Va.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(qZ(a.status,[]))if(s)a=VZ();else{this.sleepTime=Math.max(this.sleepTime*2,Rve),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(Va.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=F1e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Gf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=O1e(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,Gf,r,n);this._request=s,s.getPromise().then(i=>{i=i,this._request=void 0,this._updateProgress(i.current),this._needToFetchStatus=!1,i.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=hQ*this._chunkMultiplier,r=new Y5(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let i;try{i=D1e(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const o=this._ref.storage._makeRequest(i,Gf,a,s,!1);this._request=o,o.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){hQ*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=k1e(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,Gf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=ree(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Gf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=zZ(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=BT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new P1e(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(BT(this._state)){case $l.SUCCESS:xx(this._resolve.bind(null,this.snapshot))();break;case $l.CANCELED:case $l.ERROR:const r=this._reject;xx(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(BT(this._state)){case $l.RUNNING:case $l.PAUSED:t.next&&xx(t.next.bind(t,this.snapshot))();break;case $l.SUCCESS:t.complete&&xx(t.complete.bind(t))();break;case $l.CANCELED:case $l.ERROR:t.error&&xx(t.error.bind(t,this._error))();break;default:t.error&&xx(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,r){this._service=t,r instanceof xl?this._location=r:this._location=xl.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new lg(t,r)}get root(){const t=new xl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return JZ(this._location.path)}get storage(){return this._service}get parent(){const t=g1e(this._location.path);if(t===null)return null;const r=new xl(this._location.bucket,t);return new lg(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw Wve(t)}}function U1e(e,t,r){e._throwIfRoot("uploadBytes");const n=ree(e.storage,e._location,cP(),new $f(t,!0),r);return e.storage.makeRequestWithTokens(n,Gf).then(a=>({metadata:a,ref:e}))}function Q1e(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new M1e(e,new $f(t),r)}function H1e(e){const t={prefixes:[],items:[]};return nee(e,t).then(()=>t)}async function nee(e,t,r){const a=await V1e(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await nee(e,t,a.nextPageToken)}function V1e(e,t){t!=null&&typeof t.maxResults=="number"&&O6("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=B1e(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,Gf)}function z1e(e){e._throwIfRoot("getDownloadURL");const t=T1e(e.storage,e._location,cP());return e.storage.makeRequestWithTokens(t,Gf).then(r=>{if(r===null)throw Kve();return r})}function $1e(e){e._throwIfRoot("deleteObject");const t=j1e(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Gf)}function G1e(e,t){const r=x1e(e._location.path,t),n=new xl(e._location.bucket,r);return new lg(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1e(e){return/^[A-Za-z]+:\/\//.test(e)}function q1e(e,t){return new lg(e,t)}function aee(e,t){if(e instanceof fP){const r=e;if(r._bucket==null)throw $ve();const n=new lg(r,r._bucket);return t!=null?aee(n,t):n}else return t!==void 0?G1e(e,t):e}function W1e(e,t){if(t&&K1e(t)){if(e instanceof fP)return q1e(e,t);throw F6("To use ref(service, url), the first argument must be a Storage instance.")}else return aee(e,t)}function mQ(e,t){const r=t==null?void 0:t[HZ];return r==null?null:xl.makeFromBucketSpec(r,e)}function X1e(e,t,r,n={}){e.host=`${t}:${r}`;const a=Bh(t);a&&(US(`https://${e.host}/b`),QS("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:vY(s,e.app.options.projectId))}class fP{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=QZ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Dve,this._maxUploadRetryTime=Pve,this._requests=new Set,a!=null?this._bucket=xl.makeFromBucketSpec(a,this._host):this._bucket=mQ(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=xl.makeFromBucketSpec(this._url,t):this._bucket=mQ(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){O6("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){O6("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(jc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new lg(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new Xve(GZ());{const i=o1e(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const pQ="@firebase/storage",gQ="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const see="storage";function iee(e,t,r){return e=Xn(e),U1e(e,t,r)}function Y1e(e,t,r){return e=Xn(e),Q1e(e,t,r)}function J1e(e){return e=Xn(e),H1e(e)}function hP(e){return e=Xn(e),z1e(e)}function Z1e(e){return e=Xn(e),$1e(e)}function x4(e,t){return e=Xn(e),W1e(e,t)}function mP(e=HS(),t){e=Xn(e);const n=b2(e,see).getImmediate({identifier:t}),a=dD("storage");return a&&ebe(n,...a),n}function ebe(e,t,r,n={}){X1e(e,t,r,n)}function tbe(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new fP(r,n,a,t,Cg)}function rbe(){Am(new Ah(see,tbe,"PUBLIC").setMultipleInstances(!0)),Ru(pQ,gQ,""),Ru(pQ,gQ,"esm2020")}rbe();const nbe={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},pP=hD(nbe),j2=aJ(pP),xn=XD(pP),oee=mP(pP),lee=Object.freeze(Object.defineProperty({__proto__:null,auth:j2,db:xn,storage:oee},Symbol.toStringTag,{value:"Module"})),abe=async(e,t)=>{try{return(await hme(j2,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},TT=async()=>{try{await gme(j2)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},sbe=async e=>{try{await fme(j2,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},cee=async e=>{try{const t=dr(xn,"usuarios",e),r=await D1(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontr perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var qt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(qt||{}),un=(e=>(e.EVALUACION="Evaluacin",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedaggica",e))(un||{}),Cp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Gua de Aprendizaje",e.RUBRICA="Rbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(Cp||{});const ibe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),mi="w-6 h-6",v4="w-24 h-24",gP=()=>l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-32 h-32 object-contain"}),obe=()=>l.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M9 18h6"}),l.jsx("path",{d:"M10 22h4"}),l.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),lbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),cbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Ny=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Sy=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),uee=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),ube=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v4,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),dbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Abe=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:v4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),fbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:v4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),hbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),xQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),bC=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),jT=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),yC=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),IT=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),vQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),mbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),pbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),gbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),xbe=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),wC=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),vbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),FT=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),bbe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:mi,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),ybe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:mi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),bQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:mi,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),wbe=[{id:qt.SUBDIRECCION,label:"Subdireccin Pedaggica",icon:l.jsx(ube,{})},{id:qt.PROFESORADO,label:"Profesorado",icon:l.jsx(dbe,{})},{id:qt.COORDINACION_TP,label:"Coordinacin TP",icon:l.jsx(Abe,{})},{id:qt.ESTUDIANTE,label:"Estudiantes",icon:l.jsx(fbe,{})}],Ebe={[qt.SUBDIRECCION]:[{name:"Dashboard",icon:l.jsx(hbe,{})},{name:"Administracin",icon:l.jsx(xbe,{})},{name:"Seguimiento Curricular",icon:l.jsx(ybe,{})},{name:"Acompaamiento docente",icon:l.jsx(gbe,{})},{name:"Anlisis Taxonmico",icon:l.jsx(bQ,{})},{name:"Interdisciplinario",icon:l.jsx(FT,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:l.jsx(xQ,{})},{name:"Crear horarios",icon:l.jsx(jT,{})},{name:"Seguimiento de acciones pedaggicas",icon:l.jsx(yC,{})},{name:"Inclusin",icon:l.jsx(wC,{})},{name:"Calendario Acadmico",icon:l.jsx(bC,{})},{name:"Muro de Anuncios",icon:l.jsx(Ny,{})},{name:"Mensajera Interna",icon:l.jsx(Sy,{})},{name:"Generador de Actas",icon:l.jsx(IT,{})}],[qt.PROFESORADO]:[{name:"Planificacin",icon:l.jsx(vQ,{})},{name:"Mis Acompaamientos",icon:l.jsx(vbe,{})},{name:"Recursos de Aprendizaje",icon:l.jsx(mbe,{})},{name:"Anlisis Taxonmico",icon:l.jsx(bQ,{})},{name:"Interdisciplinario",icon:l.jsx(FT,{})},{name:"Inclusin",icon:l.jsx(wC,{})},{name:"Actividades Remotas",icon:l.jsx(pbe,{})},{name:"Evaluacin de Aprendizajes",icon:l.jsx(IT,{})},{name:"Evaluaciones Formativas",icon:l.jsx(yC,{})},{name:"Desarrollo Profesional",icon:l.jsx(wC,{})},{name:"Calendario Acadmico",icon:l.jsx(bC,{})},{name:"Muro de Anuncios",icon:l.jsx(Ny,{})},{name:"Mensajera Interna",icon:l.jsx(Sy,{})},{name:"Generador de Actas",icon:l.jsx(xQ,{})}],[qt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:l.jsx(yC,{})},{name:"Asistencia Dual",icon:l.jsx(jT,{})},{name:"Paol",icon:l.jsx(bbe,{})},{name:"Gestin de Empresas",icon:l.jsx(ibe,{})},{name:"Calendario Acadmico",icon:l.jsx(bC,{})},{name:"Muro de Anuncios",icon:l.jsx(Ny,{})},{name:"Mensajera Interna",icon:l.jsx(Sy,{})},{name:"Alternancia TP",icon:""},{name:"Desarrollo Profesional",icon:l.jsx(wC,{})},{name:"Generador de Actas",icon:l.jsx(IT,{})}],[qt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:l.jsx(vQ,{})},{name:"Evaluacin Formativa",icon:l.jsx(yC,{})},{name:"Tareas Interdisciplinarias",icon:l.jsx(FT,{})},{name:"Asistencia a Empresa",icon:l.jsx(jT,{})},{name:"Calendario Acadmico",icon:l.jsx(bC,{})},{name:"Muro de Anuncios",icon:l.jsx(Ny,{})},{name:"Mensajera Interna",icon:l.jsx(Sy,{})}]},yQ=["1 Medio","2 Medio","3 Medio","4 Medio"],qi=["Lengua y Literatura","Matemtica","Ingls","Filosofa","Historia y Geografa","Educacin Ciudadana","Ciencias","Ciencias para la Ciudadana","Artes","Msica","Educacin Fsica","Orientacin","Mecnica Industrial","Mecnica Automotriz","Emprendimiento","Tecnologa","Pensamiento Lgico","Competencia Lectora"],Ks=["1A","1B","1C","1D","1E","2A","2B","2C","2D","3A","3B","3C","3D","4A","4B","4C","4D"],D6=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],J_=["Lunes","Martes","Mircoles","Jueves","Viernes"],P6=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],Cbe={"1 y 2 medio":{"Lengua y Literatura":6,Matemtica:6,Ingls:3,"Historia y Geografa":4,"Educacin Fsica":2,Ciencias:4,"Artes/Msica":2,Tecnologa:2,Orientacin:1},"3 y 4 medio (Humanista-Cientfico)":{"Lengua y Literatura":4,Matemtica:4,Ingls:2,"Historia y Geografa":3,"Educacin Ciudadana":2,Filosofa:3,"Ciencias para la Ciudadana":2,"Educacin Fsica":2},"3 y 4 medio (Tcnico-Profesional)":{"Lengua y Literatura":2,Matemtica:2,Ingls:2,"Historia y Geografa":2,Filosofa:2,"Educacin Fsica":2,"Mdulo TP":18}},vv={[un.EVALUACION]:{label:"Evaluacin",icon:"",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[un.ACTO]:{label:"Acto",icon:"",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[un.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[un.SALIDA_PEDAGOGICA]:{label:"Salida Pedaggica",icon:"",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},_be=Object.values(Cp),OT=["Humanidades","TP","Ciencias","Interdisciplinario","Gestin Pedaggica","Equipo Directivo","Equipo de Gestin","Consejo Escolar"],DT=["Vinculado","Desvinculado","En proceso","Empresa"],Vp=["3A","3B","3C","3D","4A","4B","4C","4D"],Nbe=["Quiz","Comprensin de Lectura","Trminos Pareados","Desarrollo"],J5=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limtrofe","Trastorno Dficit Atencional (TDA)","Trastorno Dficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Especfica del Aprendizaje","Dificultad Especfica de Aprendizaje en Matemticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarizacin"],Xy=[{domain:"Dominio A: Preparacin de la Enseanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que ensea, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que ensea, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemolgicas o metodolgicas en su rea.","Conoce y comprende los principios y conceptos centrales de las disciplinas que ensea, atendiendo a la permanente actualizacin curricular en su rea.","Conoce, comprende y cuestiona los principios centrales de la disciplina que ensea a la luz de nuevos paradigmas epistemolgicos o tericos, permitiendo que el trabajo o la exposicin conceptual invite al desarrollo del pensamiento crtico o la investigacin continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificacin o gestin de la clase estndar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relacin al contexto y caractersticas del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que ensea en consonancia con el contexto y caractersticas propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Seleccin de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las caractersticas de sus estudiantes y a la relacin con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didcticos de aprendizaje, siendo congruentes al contenido pero no a las caractersticas de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejndose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didcticos de aprendizaje congruentes con la complejidad de los contenidos y las caractersticas de sus alumnos.","Conoce y selecciona distintos recursos didcticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisicin de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluacin",levels:["Establece estrategias de evaluacin incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo adems, las metodologas empleadas previamente en clases.","Establece estrategias de evaluacin coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluacin coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexin, y, la retroalimentacin descriptiva."]},{name:"Estrategias de enseanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes disean e implementan estrategias de enseanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes disean e implementan estrategias efectivas de enseanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes disean e implementan estrategias avanzadas de enseanza-aprendizaje tales como (ABP, ABD, Gamificacin, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creacin de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empata",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vnculos fundados en el respeto y/o en la empata.","Establece un clima de relaciones interpersonales respetuosas y empticas con la mayora de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empticas con todos sus alumnos, generando situaciones concretas de cooperacin y ayuda mutua entre l/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Inters por las especialidades",levels:["No transmite inters por las especialidades, centrndose exclusivamente en su rea de desempeo.","Transmite inters general por las especialidades, no obstante no es capaz de acercarse a las caractersticas concretas de los mdulos.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades.","Transmite inters por los contenidos y actividades de las asignaturas, mdulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha rea de desempeo."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implcitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello.","Promueve explcitamente actitudes de compromiso y solidaridad entre los alumnos, a travs de estrategias, instrucciones o anlisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estndar que implican un desarrollo mecnico y que no tienden hacia la consolidacin de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus caractersticas personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus caractersticas personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivacin por el aprendizaje",levels:["No transmite motivacin por el aprendizaje, la bsqueda o la indagacin.","Transmite una motivacin positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autnoma","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda.","Transmite una motivacin positiva por el aprendizaje, la indagacin y la bsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemtico en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participacin."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentacin de objetivos",levels:["Al iniciar las clases no presenta el objetivo o slo lo enuncia sin profundizar en l.","Al iniciar las clases presenta el objetivo de aprendizaje y el propsito, pero no logra dar cuenta de la relacin con el futuro laboral de los estudiantes o con otras reas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionndolo con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a travs de la relacin con el propsito que posee desde la disciplina, otras reas del conocimiento o para su desempeo laboral futuro."]},{name:"Clase en funcin de objetivos",levels:["No realiza su clase en funcin de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currculum nacional","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando slo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional.","Realiza sus clases en funcin de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currculum nacional y en el PEI."]},{name:"Introduccin de nueva informacin",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva informacin, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva informacin y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisin conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolacin que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentacin",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes slo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeo, de manera individual o grupal, a travs de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensin y desempeo de sus estudiantes.","Monitorea parcialmente el grado de comprensin y desempeo de sus estudiantes, no siempre a travs de evidencia.","Monitorea constantemente el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensin y el desempeo de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que estn aprendiendo."]},{name:"Orientacin a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales, no obstante, la orientacin es superficial y no predispone la construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores.","Orienta a sus estudiantes hacia temticas ligadas a los objetivos transversales del currculum, con el fin de favorecer su proceso de construccin de valores en consonancia a elementos propios del PEI."]},{name:"Conclusin de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicacin que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora adems preguntas de metacognicin y/o autoevaluacin."]},{name:"Abordaje de errores",levels:["No aborda los errores, nicamente los seala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a travs de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogneo, descuidando la diversidad y las caractersticas particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias segn nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos segn el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],dee=["Lder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],EC=[{nombre:"Aprendiz Emergente",emoji:"",promedioMin:1,promedioMax:3.9,mensaje:"Ests comenzando tu viaje de aprendizaje! Sigue esforzndote."},{nombre:"Explorador del Conocimiento",emoji:"",promedioMin:4,promedioMax:4.9,mensaje:"Buen trabajo! Ests construyendo una base slida."},{nombre:"Arquitecto de Ideas",emoji:"",promedioMin:5,promedioMax:5.9,mensaje:"Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"",promedioMin:6,promedioMax:6.5,mensaje:"Impresionante! Tu dedicacin te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"",promedioMin:6.6,promedioMax:7,mensaje:"Extraordinario! Eres una inspiracin para tus compaeros."}],Sbe=["Mecnica Industrial","Mecnica Automotriz"],kbe=["INACAP","UNAB","DUOC","Universidad de Las Amricas"],Bbe={"Mecnica Automotriz":["3A","3B","4A","4B"],"Mecnica Industrial":["3C","3D","4C","4D"]},Tbe=["Pasanta","Visita","Certificacin","Formacin en empresa"],jbe={"Mecnica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medicin y verificacin","Mecnica de banco","Torneado de piezas y conjuntos mecnicos","Fresado de piezas mecnicas","Taladrado de piezas mecnicas","Rectificado de piezas mecnicas","Fabricacin asistida por computador (CNC)"],"Mecnica Automotriz":["Ajuste de motores","Lectura de planos y manuales tcnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas elctricos y electrnicos","Mantenimiento de motores","Mantenimiento de sistemas hidrulicos y neumticos","Mantenimiento de los sistemas de transmisin y frenos","Mantenimiento de sistemas de direccin y suspensin","Emprendimiento y empleabilidad"]},Ibe={"Mecnica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, disel, gas e hbridos), incluyendo sistemas de control de emisiones, lubricacin y refrigeracin, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales tcnicos":["Leer e interpretar informacin tcnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnsticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulacin y disposicin de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatizacin, cierre centralizado, asientos elctricos) segn especificaciones tcnicas."],"Mantenimiento de sistemas elctricos y electrnicos":["Reemplazar, ajustar y probar sistemas elctricos y electrnicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parmetros operativos segn especificaciones."],"Mantenimiento de sistemas hidrulicos y neumticos":["Inspeccionar, diagnosticar y reparar sistemas hidrulicos y neumticos de vehculos automotrices."],"Mantenimiento de los sistemas de transmisin y frenos":["Verificar, ajustar o reemplazar componentes de transmisin y frenos, segn manual del fabricante."],"Mantenimiento de sistemas de direccin y suspensin":["Diagnosticar, alinear y corregir sistemas de direccin y suspensin, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestin, marketing y normativa vigente."]},"Mecnica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de mquinas, asegurando su operatividad y prolongando su vida til."],"Medicin y verificacin":["Utilizar instrumentos de medicin y verificacin para controlar dimensiones y tolerancias segn planos y especificaciones tcnicas."],"Mecnica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecnicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecnicos, cumpliendo con las especificaciones tcnicas y de seguridad."],"Fresado de piezas mecnicas":["Operar fresadoras para fabricar piezas mecnicas, seleccionando herramientas de corte y parmetros de mecanizado adecuados."],"Taladrado de piezas mecnicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones tcnicas y de seguridad."],"Rectificado de piezas mecnicas":["Utilizar rectificadoras para mejorar el acabado y precisin dimensional de piezas mecnicas, cumpliendo tolerancias indicadas."],"Fabricacin asistida por computador (CNC)":["Programar y operar mquinas CNC para fabricar piezas mecnicas con precisin, optimizando procesos y aplicando normas de seguridad."]}},Kf={"Liderazgo Curricular":["Planificacin y organizacin del currculo","Asegurar la cobertura y secuenciacin de los contenidos","Monitoreo del cumplimiento de los planes de estudio"],"Prcticas Pedaggicas en el Aula":["Estrategias de enseanza y metodologas activas","Evaluacin de los aprendizajes para retroalimentar el proceso","Uso de recursos y tecnologas para apoyar la enseanza"],"Acompaamiento y Desarrollo Profesional Docente":["Observacin de clases y retroalimentacin","Planes de formacin continua y actualizacin pedaggica","Fomento de comunidades de aprendizaje docente"],"Monitoreo y Evaluacin de los Aprendizajes":["Uso de datos e indicadores para tomar decisiones pedaggicas","Evaluaciones internas y externas","Ajuste de estrategias segn resultados y metas de aprendizaje"]},wQ=["Pendiente","En Proceso","Cumplida"],EQ=["PROFESORADO","SUBDIRECCION","COORDINACION_TP"],Fbe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(""),[o,c]=S.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),c("forgot_sent")},f=()=>o==="forgot"?l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico Registrado"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperacin"})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesin"})})]}):o==="forgot_sent"?l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",l.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contrasea."]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulacin, revise la consola del navegador para ver el enlace)."}),l.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:" Volver a Iniciar Sesin"})]}):l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrnico"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contrasea"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:l.jsx("p",{children:r})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Olvid su contrasea?"})}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(gP,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestin Pedaggica LIR"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesin":"Recuperacin de Contrasea"})]}),l.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},CC=({trigger:e,children:t,onOpen:r})=>{const[n,a]=S.useState(!1),s=S.useRef(null),i=()=>{const c=!n;a(c),c&&r&&r()},o=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return S.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),l.jsxs("div",{className:"relative",ref:s,children:[l.jsx("div",{onClick:i,children:e}),n&&l.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},CQ="usuariosLiceo",Obe=({user:e,onClose:t,onSave:r})=>{const[n,a]=S.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(CQ);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(CQ,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:l.jsxs("form",{onSubmit:i,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),l.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrnico"}),l.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Funcin"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},_Q="usuariosLiceo",Dbe=({user:e,onClose:t,onSave:r})=>{const[n,a]=S.useState(""),[s,i]=S.useState(""),[o,c]=S.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contrasea no puede estar en blanco.");return}if(n!==s){c("Las contraseas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(_Q);let p=h?JSON.parse(h):[];const g=p.findIndex(x=>x.id===e.id);g>-1?p[g]=f:p.push(f),localStorage.setItem(_Q,JSON.stringify(p)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contrasea.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:l.jsxs("form",{onSubmit:u,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuracin de Cuenta"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contrasea"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contrasea"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:l.jsx("p",{children:o})})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contrasea"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pbe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Rbe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),NQ=e=>{const t=Rbe(e);return t.charAt(0).toUpperCase()+t.slice(1)},Aee=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Lbe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Mbe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ube=S.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},c)=>S.createElement("svg",{ref:c,...Mbe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Aee("lucide",a),...!s&&!Lbe(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>S.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=(e,t)=>{const r=S.forwardRef(({className:n,...a},s)=>S.createElement(Ube,{ref:s,iconNode:t,className:Aee(`lucide-${Pbe(NQ(e))}`,`lucide-${e}`,n),...a}));return r.displayName=NQ(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qbe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Hbe=er("activity",Qbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vbe=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_C=er("arrow-left",Vbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zbe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],$be=er("bell-ring",zbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gbe=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],Kbe=er("book-open-check",Gbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qbe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],ef=er("book-open",qbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wbe=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],Xbe=er("brain-circuit",Wbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ybe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],xP=er("brain",Ybe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jbe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],fee=er("briefcase",Jbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zbe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Z5=er("building-2",Zbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eye=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],tye=er("building",eye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rye=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],nye=er("calendar-check",rye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aye=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Id=er("calendar",aye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sye=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Yf=er("chart-column",sye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iye=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],oye=er("chart-line",iye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lye=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],cye=er("chart-no-axes-column",lye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uye=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],hee=er("chart-pie",uye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dye=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Bw=er("chevron-left",dye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aye=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vP=er("chevron-right",Aye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],qA=er("circle-alert",fye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hye=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],bP=er("circle-check-big",hye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Zo=er("circle-check",mye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],NC=er("circle-plus",pye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gye=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],xye=er("clipboard-check",gye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vye=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Kv=er("clipboard-list",vye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bye=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],V0=er("clock",bye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yye=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],I2=er("download",yye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wye=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Eye=er("factory",wye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],_ye=er("file-check",Cye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Sye=er("file-spreadsheet",Nye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kye=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],WA=er("file-text",kye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bye=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M2 10h20",key:"1ir3d8"}]],Tye=er("folder-closed",Bye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jye=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],SQ=er("folder-open",jye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iye=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],yP=er("funnel",Iye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fye=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],eN=er("gauge",Fye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oye=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],cg=er("graduation-cap",Oye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dye=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Pye=er("hash",Dye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rye=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],mee=er("hourglass",Rye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Mye=er("info",Lye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uye=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Qye=er("layout-dashboard",Uye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hye=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],pee=er("layers",Hye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vye=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],zye=er("layout-grid",Vye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $ye=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],Gye=er("layout-list",$ye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kye=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],kQ=er("link-2",Kye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qye=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Wye=er("link",qye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xye=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Yy=er("list-checks",Xye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yye=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],z0=er("loader-circle",Yye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jye=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Zye=er("mail",Jye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ewe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],tN=er("map-pin",ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const twe=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],rwe=er("megaphone",twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nwe=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],awe=er("menu",nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const swe=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],gee=er("message-square",swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iwe=[["path",{d:"M13.4 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-7.4",key:"re6nr2"}],["path",{d:"M2 6h4",key:"aawbzj"}],["path",{d:"M2 10h4",key:"l0bgd4"}],["path",{d:"M2 14h4",key:"1gsvsf"}],["path",{d:"M2 18h4",key:"1bu2t1"}],["path",{d:"M21.378 5.626a1 1 0 1 0-3.004-3.004l-5.01 5.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"pqwjuv"}]],BQ=er("notebook-pen",iwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const owe=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],lwe=er("palette",owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cwe=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],R6=er("pen-line",cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uwe=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],wP=er("pencil",uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dwe=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Awe=er("percent",dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fwe=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Lu=er("plus",fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hwe=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],mwe=er("puzzle",hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pwe=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],gwe=er("refresh-ccw",pwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xwe=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],vwe=er("route",xwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bwe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],vm=er("save",bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ywe=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],PT=er("school",ywe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wwe=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],TQ=er("scroll-text",wwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ewe=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],b4=er("search",Ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cwe=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],_we=er("shield-check",Cwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nwe=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],bv=er("sparkles",Nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Swe=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xee=er("square-pen",Swe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kwe=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],L6=er("square-plus",kwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bwe=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Twe=er("star",Bwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jwe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],F2=er("target",jwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iwe=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],tl=er("trash-2",Iwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fwe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],EP=er("trending-up",Fwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Owe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],vee=er("upload",Owe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dwe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Pwe=er("user-minus",Dwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rwe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Lwe=er("user-plus",Rwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mwe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Tw=er("user",Mwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uwe=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],Gb=er("users-round",Uwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qwe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Zl=er("users",Qwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hwe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],_p=er("video",Hwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vwe=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],zwe=er("wand-sparkles",Vwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $we=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Z_=er("wrench",$we);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gwe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rN=er("x",Gwe);async function Kwe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:Ni()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await Tn(Nt(xn,"notificaciones"),t)).id}function qwe(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(c=>{c.id&&(i.has(c.id)||i.set(c.id,c))});const o=Array.from(i.values()).sort((c,u)=>{var h,p;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((p=u.createdAt)!=null&&p.toDate?u.createdAt.toDate().getTime():0)-d});t(o)};if(e.email){const i=zt(Nt(xn,"notificaciones"),Yr("docenteEmailLower","==",e.email.toLowerCase()),_r("createdAt","desc"));r.push(mr(i,o=>{n=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const i=zt(Nt(xn,"notificaciones"),Yr("docenteNombre","==",e.nombreCompleto),_r("createdAt","desc"));r.push(mr(i,o=>{a=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(i=>i())}async function Wwe(e){const t=dr(xn,"notificaciones",e);await Vu(t,{leida:!0})}async function Xwe(e){const t=dr(xn,"notificaciones",e);await za(t)}const jQ="anunciosMuro",IQ="mensajesInternos",FQ="lir-read-status",Ywe=({user:e})=>{if(e.fotoUrl)return l.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return l.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},Jwe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:c})=>{const[u,d]=S.useState([]),[f,h]=S.useState([]),[p,g]=S.useState(!1),[x,b]=S.useState(!1),[y,w]=S.useState([]),_=S.useCallback(()=>{try{const B=localStorage.getItem(`${FQ}-${e.id}`);return B?JSON.parse(B):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),j=S.useCallback(B=>{try{localStorage.setItem(`${FQ}-${e.id}`,JSON.stringify(B))}catch(R){console.error("Failed to set read status:",R)}},[e.id]);S.useEffect(()=>{const B=JSON.parse(localStorage.getItem(jQ)||"[]"),R=_();d(B.filter(D=>!R.announcements.includes(D.id)));const P=JSON.parse(localStorage.getItem(IQ)||"[]");h(P.filter(D=>D.para===e.email).sort((D,L)=>new Date(L.fecha).getTime()-new Date(D.fecha).getTime()).slice(0,5))},[e.id,_,o]),S.useEffect(()=>{if(!(e!=null&&e.email))return;const B=qwe({email:e.email,nombreCompleto:e.nombreCompleto},R=>{const P=R.filter(D=>D.tipo&&(D.tipo.toLowerCase()==="pie"||D.tipo==="nueva_intervencion"));w(P)});return()=>B()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const k=()=>{const B=_(),R=JSON.parse(localStorage.getItem(jQ)||"[]").map(P=>P.id);B.announcements=R,j(B),d([])},I=()=>{const B=_(),P=JSON.parse(localStorage.getItem(IQ)||"[]").filter(D=>D.para===e.email).map(D=>D.id);B.messages=[...new Set([...B.messages,...P])],j(B),c()},E=y.filter(B=>!B.leida).length,N=B=>{var R;try{const P=(R=B.createdAt)!=null&&R.toDate?B.createdAt.toDate():new Date(B.createdAt);return P?P.toLocaleString("es-CL"):""}catch{return""}};return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:l.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:l.jsx(lbe,{})}),l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[l.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),l.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),l.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestin LIR"})]})]}),l.jsx("div",{className:"flex-1 flex justify-center",children:l.jsx("button",{onClick:()=>r("Calendario Acadmico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Acadmico",children:l.jsx(cbe,{})})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),l.jsx(CC,{onOpen:k,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[l.jsx(Ny,{}),u.length>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),l.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(B=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsx("p",{className:"font-bold dark:text-slate-200",children:B.titulo}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.mensaje})]},B.id)),u.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),l.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),l.jsx(CC,{trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[l.jsx(mwe,{className:"w-5 h-5"}),E>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:E})]}),children:l.jsxs("div",{className:"p-2 w-80",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),l.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&l.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(B=>l.jsx("li",{className:"p-2 text-sm",children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:B.titulo}),l.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:B.mensaje}),B.estudianteNombre&&l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",l.jsx("b",{children:B.estudianteNombre})]}),l.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:N(B)})]}),l.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!B.leida&&l.jsx("button",{onClick:()=>B.id&&Wwe(B.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leda"}),l.jsx("button",{onClick:()=>B.id&&Xwe(B.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},B.id))]})]})}),l.jsx(CC,{onOpen:I,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[l.jsx(Sy,{}),o>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),l.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(B=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",B.de]}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:B.asunto})]},B.id)),f.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),l.jsx("button",{onClick:()=>r("Mensajera Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),l.jsx(CC,{trigger:l.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(Ywe,{user:e})}),children:l.jsxs("div",{className:"p-2",children:[l.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),l.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[l.jsx("li",{children:l.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),l.jsx("li",{children:l.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuracin"})}),s&&l.jsx("li",{children:l.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:" Cambiar Vista"})}),l.jsx("li",{children:l.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesin"})})]})]})})]})]})}),p&&l.jsx(Obe,{user:e,onClose:()=>g(!1),onSave:n}),x&&l.jsx(Dbe,{user:e,onClose:()=>b(!1),onSave:n})]})},Zwe={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},CP=V7().length?V7()[0]:hD(Zwe),ft=XD(CP),M6=aJ(CP),e2e=mP(CP),O2="reemplazos_docentes",t2e="usuarios",_P=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},r2e=e=>{const t=e.data();return{id:e.id,...t}},n2e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:sr.fromDate(new Date),fechaActualizacion:sr.fromDate(new Date)};return(await Tn(Nt(ft,O2),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},a2e=async(e,t)=>{try{const r=dr(ft,O2,e),n=await D1(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await za(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},s2e=(e,t,r=50)=>{try{const n=zt(Nt(ft,O2),Yr("userId","==",e),_r("diaAusencia","desc"),jd(r));return mr(n,a=>{const s=a.docs.map(_P);t(s)},a=>{console.error("Error en suscripcin a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripcin de reemplazos:",n),()=>{}}},i2e=e=>{try{const t=zt(Nt(ft,t2e),Yr("profile","==",qt.PROFESORADO));return mr(t,n=>{const a=n.docs.map(r2e);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripcin de profesores:",t),()=>{}}},o2e=async e=>{try{const t=zt(Nt(ft,O2),Yr("userId","==",e)),n=(await ga(t)).docs.map(_P),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadsticas:",t),new Error("No se pudieron obtener las estadsticas")}},l2e=async(e,t)=>{try{if(!t.trim())return[];const r=zt(Nt(ft,O2),Yr("userId","==",e),_r("diaAusencia","desc"),jd(100)),a=(await ga(r)).docs.map(_P),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en bsqueda de reemplazos:",r),[]}},c2e=Array.from({length:12},(e,t)=>t+1),OQ={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},u2e=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);S.useEffect(()=>e?s2e(e,f=>{r(f),a(!1)}):void 0,[e]);const o=S.useCallback(async d=>{try{return i(null),await n2e(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=S.useCallback(async d=>{try{i(null),await a2e(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=S.useCallback(async d=>{try{return i(null),d.trim()?await l2e(e,d):t}catch(f){return i(f instanceof Error?f.message:"Error en la bsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:o,remove:c,search:u}},d2e=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0);S.useEffect(()=>i2e(i=>{t(i),n(!1)}),[]);const a=S.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},vx=({label:e,icon:t,children:r})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),l.jsxs("div",{className:"relative",children:[t&&l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),A2e="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",f2e="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",h2e="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",b0=({title:e,value:t,icon:r})=>l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-gradient-to-br from-slate-100 to-slate-200 text-slate-700 dark:from-slate-700 dark:to-slate-600 dark:text-slate-200",children:r}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),l.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),m2e=({data:e})=>{const t=Math.max(1,...e.map(r=>r.value));return l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Distribucin (graficable)"}),l.jsx("div",{className:"grid gap-3",children:e.map(r=>l.jsxs("div",{children:[l.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:r.label}),l.jsx("span",{children:r.value})]}),l.jsx("div",{className:"h-2 w-full rounded bg-slate-200/60 dark:bg-slate-700",children:l.jsx("div",{className:"h-2 rounded bg-slate-900 dark:bg-amber-500",style:{width:`${r.value/t*100}%`}})})]},r.label))})]})},p2e=({data:e})=>{const t=Math.max(1,...e.map(n=>n.value)),r=["from-indigo-500 to-sky-500","from-emerald-500 to-lime-500","from-amber-500 to-orange-600","from-fuchsia-500 to-pink-500","from-cyan-500 to-teal-500","from-rose-500 to-red-500","from-violet-500 to-purple-500"];return l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[l.jsx(Yf,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Reemplazos / Inasistencias por curso (mes actual)"})]}),e.length===0?l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay registros este mes."}):l.jsx("div",{className:"grid gap-3",children:e.map((n,a)=>l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[l.jsx("span",{className:"font-medium",children:n.label}),l.jsx("span",{children:n.value})]}),l.jsx("div",{className:"h-3 w-full rounded-lg bg-slate-100 dark:bg-slate-700",children:l.jsx("div",{className:`h-3 rounded-lg bg-gradient-to-r ${r[a%r.length]}`,style:{width:`${n.value/t*100}%`}})})]},n.label))})]})},g2e=({userId:e,reemplazos:t})=>{const[r,n]=S.useState(null),[a,s]=S.useState(!1),i=S.useCallback(async()=>{try{s(!0);const b=await o2e(e);n(b)}finally{s(!1)}},[e]);S.useEffect(()=>{e&&i()},[e,i]);const o=new Date,c=o.getMonth(),u=o.getFullYear(),d=S.useMemo(()=>(t||[]).filter(b=>{const y=new Date(b.diaAusencia+"T00:00:00");return y.getMonth()===c&&y.getFullYear()===u}),[t,c,u]),f=new Set(d.map(b=>b.docenteAusente).filter(Boolean)),h=new Set(d.map(b=>b.docenteReemplazante).filter(Boolean)),p=new Set(d.map(b=>b.curso).filter(Boolean)),g=new Set(d.map(b=>b.asignaturaAusente).filter(Boolean)),x=[{label:"Prof. ausentes",value:f.size},{label:"Prof. que reemplazan",value:h.size},{label:"Cursos",value:p.size},{label:"Asignaturas ausentes",value:g.size}];return a||!r?l.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[l.jsx(z0,{className:"h-5 w-5 animate-spin"}),"Cargando estadsticas"]})}):l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(b0,{title:"Total",value:r.totalReemplazos,icon:l.jsx($be,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Realizadas",value:r.horasRealizadas,icon:l.jsx(Zo,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Cubiertas",value:r.horasCubiertas,icon:l.jsx(xye,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Efectividad",value:`${r.porcentajeRealizadas.toFixed(1)}%`,icon:l.jsx(Awe,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(b0,{title:"Profesores ausentes",value:f.size,icon:l.jsx(Pwe,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Profesores que reemplazan",value:h.size,icon:l.jsx(Lwe,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Cursos (nicos)",value:p.size,icon:l.jsx(Zl,{className:"h-6 w-6"})}),l.jsx(b0,{title:"Asignaturas ausentes",value:g.size,icon:l.jsx(ef,{className:"h-6 w-6"})})]}),l.jsx(m2e,{data:x})]})},x2e=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=u2e(t),{profesorNames:c,loading:u}=d2e(),[d,f]=S.useState(OQ),[h,p]=S.useState(""),[g,x]=S.useState([]),[b,y]=S.useState(null),[w,_]=S.useState(!1),[j,k]=S.useState(!1);S.useEffect(()=>{(async()=>{if(!h.trim())return x(r);k(!0);try{const V=await s(h);x(V)}finally{k(!1)}})()},[r,h,s]);const I=S.useCallback(K=>{const{name:V,value:G}=K.target;f(X=>({...X,[V]:G}))},[]),E=S.useCallback(K=>{f(V=>{const X=V.bloquesAfectados.includes(K)?V.bloquesAfectados.filter(ee=>ee!==K):[...V.bloquesAfectados,K].sort((ee,F)=>ee-F);return{...V,bloquesAfectados:X}})},[]),N=S.useCallback(async K=>{K.preventDefault(),y(null),_(!0);const{docenteAusente:V,asignaturaAusente:G,curso:X,diaAusencia:ee,bloquesAfectados:F,docenteReemplazante:z,asignaturaReemplazante:Y}=d;if(!V||!G||!X||!ee||!z||!Y||F.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),_(!1);return}if(V===z){y("El docente ausente y el reemplazante no pueden ser la misma persona."),_(!1);return}try{const te=G.trim().toLowerCase()===Y.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",ae={...d,resultado:te};await n(ae),f(OQ);const le=document.createElement("div");le.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",le.textContent=te==="Hora realizada"?" Reemplazo registrado  Hora realizada":" Reemplazo registrado  Hora cubierta, no realizada",document.body.appendChild(le),setTimeout(()=>{document.body.contains(le)&&document.body.removeChild(le)},2500)}catch(te){console.error(te),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{_(!1)}},[d,n]),B=S.useCallback(async K=>{if(window.confirm("Eliminar este registro?"))try{await a(K)}catch(V){console.error(V),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),R="w-full rounded-lg border bg-white px-10 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";if(!e||!e.email&&!e.id)return l.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})});const P=new Date,D=P.getMonth(),L=P.getFullYear(),M=S.useMemo(()=>(r||[]).filter(K=>{if(!K.diaAusencia)return!1;const V=new Date(K.diaAusencia+"T00:00:00");return V.getMonth()===D&&V.getFullYear()===L}),[r,D,L]),J=S.useMemo(()=>{const K={};for(const V of M){const G=V.curso||"Sin curso";K[G]=(K[G]||0)+1}return K},[M]),H=S.useMemo(()=>Object.entries(J).sort(([K],[V])=>K.localeCompare(V,"es")).map(([K,V])=>({label:K,value:V})),[J]);return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"mb-1 text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadsticas del Mes"}),l.jsx(g2e,{userId:t,reemplazos:r})]}),l.jsx(p2e,{data:H}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[l.jsx(z0,{className:"h-5 w-5 animate-spin"})," Cargando profesores"]}):l.jsxs("form",{onSubmit:N,className:"space-y-8",children:[l.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Zl,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),l.jsx(vx,{label:"Nombre",icon:l.jsx(cg,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(vx,{label:"Asignatura",icon:l.jsx(ef,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(vx,{label:"Curso",icon:l.jsx(Zl,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"curso",value:d.curso,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(vx,{label:"Da de ausencia",icon:l.jsx(Id,{className:"h-5 w-5"}),children:l.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:I,className:R,required:!0,disabled:w})}),l.jsxs("div",{children:[l.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[l.jsx(V0,{className:"h-5 w-5 text-slate-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),l.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:c2e.map(K=>{const V=d.bloquesAfectados.includes(K);return l.jsx("button",{type:"button",onClick:()=>E(K),disabled:w,className:`${A2e} ${V?f2e:h2e}`,"aria-pressed":V,children:K},K)})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Zl,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),l.jsx(vx,{label:"Nombre",icon:l.jsx(cg,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(K=>l.jsx("option",{value:K,children:K},K))]})}),l.jsx(vx,{label:"Asignatura",icon:l.jsx(ef,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:I,className:R,required:!0,disabled:w,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(K=>l.jsx("option",{value:K,children:K},K))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&l.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(Zo,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(b||o)&&l.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:b||o}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:w||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:w?l.jsxs(l.Fragment,{children:[l.jsx(z0,{className:"h-4 w-4 animate-spin"})," Registrando"]}):l.jsxs(l.Fragment,{children:[l.jsx(vm,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:j?l.jsx(z0,{className:"h-5 w-5 animate-spin"}):l.jsx(b4,{className:"h-5 w-5"})}),l.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)",value:h,onChange:K=>p(K.target.value),className:R,disabled:j})]})]}),i?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[l.jsx(z0,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos"]}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Fecha","Curso","Docente Ausente","Docente Reemplazante","Bloques","Resultado","Acciones"].map(K=>l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:K},K))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:g.length>0?g.map(K=>l.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(K.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:K.curso}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[K.docenteAusente,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:K.asignaturaAusente})]}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[K.docenteReemplazante,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:K.asignaturaReemplazante})]}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:K.bloquesAfectados.join(", ")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${K.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(Zo,{className:"h-4 w-4"}),K.resultado]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsx("button",{onClick:()=>B(K.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:w,children:l.jsx(tl,{className:"h-4 w-4"})})})]},K.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu bsqueda.":"An no hay registros."})})})]}),g.length>0&&!h&&l.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los ltimos ",g.length," registros"]})]})]})]})},v2e=e=>{console.log(" Iniciando suscripcin a todos los reemplazos...");try{const t=Nt(xn,"reemplazos"),r=zt(t,_r("fecha","desc"));return mr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar reemplazos:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a reemplazos:",t),t}},b2e=e=>{console.log(" Iniciando suscripcin a todos los acompaamientos...");try{const t=Nt(xn,"acompanamientos"),r=zt(t,_r("fecha","desc"));return mr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Acompaamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar acompaamientos:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a acompaamientos:",t),t}},y2e=e=>{console.log(" Iniciando suscripcin a todos los eventos del calendario...");try{const t=Nt(xn,"calendar_events"),r=zt(t,_r("date","asc"));return mr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error(" Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a eventos del calendario:",t),t}},wA=({title:e,value:t,description:r,isLoading:n=!1})=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),fp=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=S.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),i=S.useMemo(()=>Math.max(...s,1),[s]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):l.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,c)=>(typeof c.value=="number"?c.value:0)-(typeof o.value=="number"?o.value:0)).map((o,c)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+c)}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},w2e=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState(!0),[c,u]=S.useState(null);return S.useEffect(()=>{console.log(" Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(o(!1),console.log(" Todos los datos del dashboard cargados"))};try{const p=v2e(b=>{t(b),h()}),g=b2e(b=>{n(b),h()}),x=y2e(b=>{s(b),h()});return()=>{p(),g(),x()}}catch(p){console.error(" Error al configurar suscripciones del dashboard:",p),u(p instanceof Error?p.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:c}},E2e=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log(" Dashboard - currentUser completo:",e),console.log(" Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log(" Dashboard - Verificacin de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log(" Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log(" Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log(" Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - Comparacin con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=w2e(),[i,o]=S.useState(Xy);if(console.log(" Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),S.useEffect(()=>{try{const p=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(p?JSON.parse(p):Xy)}catch(p){console.error("Error al leer rbrica personalizada",p),o(Xy)}},[]),console.log(" Dashboard - Verificando permisos..."),console.log(" Dashboard - currentUser existe:",!!e),console.log(" Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log(" Dashboard - comparacin exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log(" Dashboard - currentUser es null/undefined"),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log(" Dashboard - Perfil no autorizado:",e.profile),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard est disponible solo para usuarios con perfil de Subdireccin."}),l.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[l.jsx("p",{children:l.jsx("strong",{children:"Debug Info:"})}),l.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),l.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),l.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log(" Dashboard - Permisos verificados correctamente"),s)return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),l.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Pgina"})]});const c=S.useMemo(()=>{const p=t.length;if(p===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(k=>k.resultado==="Hora realizada").length,x=p-g,b=`${(g/p*100).toFixed(1)}%`,y=(k,I)=>k.reduce((E,N)=>{const B=N[I];return typeof B=="string"&&(E[B]=(E[B]||0)+1),E},{}),w=y(t,"docenteAusente"),_=y(t,"docenteReemplazante"),j=y(t,"curso");return{totalInasistencias:p,horasRealizadas:g,horasCubiertas:x,tasaCobertura:b,inasistenciasPorDocente:Object.entries(w).map(([k,I])=>({label:k,value:I})),reemplazosPorDocente:Object.entries(_).map(([k,I])=>({label:k,value:I})),inasistenciasPorCurso:Object.entries(j).map(([k,I])=>({label:k,value:I})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:x}]}},[t]),u=S.useMemo(()=>{const p=r.length;if(p===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;i.forEach(I=>{I.criteria.forEach(E=>{g.set(E.name,I.domain)})});let x=0,b=0;const y={},w={};r.forEach(I=>{y[I.docente]||(y[I.docente]={total:0,count:0}),Object.entries(I.rubricaResultados).forEach(([E,N])=>{x+=N,b++,y[I.docente].total+=N,y[I.docente].count++;const B=g.get(E);B&&(w[B]||(w[B]={total:0,count:0}),w[B].total+=N,w[B].count++)})});const _=b>0?(x/b).toFixed(2):"N/A",j=Object.entries(y).map(([I,E])=>({label:I,value:E.count>0?(E.total/E.count).toFixed(2):0})),k=Object.entries(w).map(([I,E])=>({label:I,value:E.count>0?(E.total/E.count).toFixed(2):0}));return{totalAcompanamientos:p,promedioGeneral:_,desempenoPorDocente:j,desempenoPorDominio:k}},[r,i]),d=S.useMemo(()=>{const p={[un.EVALUACION]:0,[un.ACTO]:0,[un.ACTIVIDAD_FOCALIZADA]:0,[un.SALIDA_PEDAGOGICA]:0};for(const x of n)p.hasOwnProperty(x.type)&&p[x.type]++;const g=Object.entries(p).map(([x,b])=>({label:vv[x].label,value:b}));return{totalEvaluaciones:p[un.EVALUACION],totalActos:p[un.ACTO],totalActividadesFocalizadas:p[un.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:p[un.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:""}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdireccin"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"An no hay datos para mostrar. Comience por aadir registros en los mdulos correspondientes."}),l.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[l.jsx("p",{children:" Mdulo de Inasistencias y Reemplazos"}),l.jsx("p",{children:" Mdulo de Acompaamiento Docente"}),l.jsx("p",{children:" Calendario Acadmico"})]})]}):l.jsxs("div",{className:"space-y-12 animate-fade-in",children:[l.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdireccin"}),l.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),l.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["ltima actualizacin: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Inasistencias y Reemplazos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(wA,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),l.jsx(wA,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),l.jsx(wA,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),l.jsx(wA,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(fp,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),l.jsx(fp,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),l.jsx(fp,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),l.jsx(fp,{title:"Distribucin de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Dashboard de Acompaamiento Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(wA,{title:"Total Acompaamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),l.jsx(wA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificacin promedio (1-4)",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(fp,{title:"Desempeo Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a}),l.jsx(fp,{title:"Desempeo Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a})]})]}),n.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:" Resumen del Calendario Acadmico"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(wA,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),l.jsx(wA,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),l.jsx(wA,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),l.jsx(wA,{title:"Salidas Pedaggicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(fp,{title:"Distribucin de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Prximos Eventos"}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(p=>new Date(p.date)>=new Date).slice(0,5).map((p,g)=>{var x,b;return l.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:p.responsables||"Evento sin ttulo"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(p.date).toLocaleDateString("es-CL")}),p.ubicacion&&l.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:[" ",p.ubicacion]})]}),l.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((x=vv[p.type])==null?void 0:x.color)||"bg-gray-100 text-gray-800"}`,children:((b=vv[p.type])==null?void 0:b.label)||p.type})]})},p.id||g)}),n.filter(p=>new Date(p.date)>=new Date).length===0&&l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos prximos programados"})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:" Resumen Ejecutivo"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(p=>p.docenteAusente),...r.map(p=>p.docente)]).size}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(p=>p.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),l.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[l.jsx("p",{children:"Dashboard de Subdireccin - Sistema de Gestin Pedaggica"}),l.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var DQ;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(DQ||(DQ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var PQ;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(PQ||(PQ={}));var RQ;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(RQ||(RQ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LQ=["user","model","function","system"];var MQ;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(MQ||(MQ={}));var UQ;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(UQ||(UQ={}));var QQ;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(QQ||(QQ={}));var HQ;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(HQ||(HQ={}));var Jy;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Jy||(Jy={}));var VQ;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(VQ||(VQ={}));var zQ;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(zQ||(zQ={}));var $Q;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})($Q||($Q={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class bx extends Xo{constructor(t,r){super(t),this.response=r}}class bee extends Xo{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class nm extends Xo{}class yee extends Xo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2e="https://generativelanguage.googleapis.com",_2e="v1beta",N2e="0.24.1",S2e="genai-js";var ug;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(ug||(ug={}));class k2e{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||_2e;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||C2e}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function B2e(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${S2e}/${N2e}`),t.join(" ")}async function T2e(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",B2e(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new nm(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new nm(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new nm(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function j2e(e,t,r,n,a,s){const i=new k2e(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},D2e(s)),{method:"POST",headers:await T2e(i),body:a})}}async function D2(e,t,r,n,a,s={},i=fetch){const{url:o,fetchOptions:c}=await j2e(e,t,r,n,a,s);return I2e(o,c,i)}async function I2e(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){F2e(a,e)}return n.ok||await O2e(n,e),n}function F2e(e,t){let r=e;throw r.name==="AbortError"?(r=new yee(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof bee||e instanceof nm||(r=new Xo(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function O2e(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new bee(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function D2e(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),e5(e.candidates[0]))throw new bx(`${j0(e)}`,e);return P2e(e)}else if(e.promptFeedback)throw new bx(`Text not available. ${j0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),e5(e.candidates[0]))throw new bx(`${j0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),GQ(e)[0]}else if(e.promptFeedback)throw new bx(`Function call not available. ${j0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),e5(e.candidates[0]))throw new bx(`${j0(e)}`,e);return GQ(e)}else if(e.promptFeedback)throw new bx(`Function call not available. ${j0(e)}`,e)},e}function P2e(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function GQ(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const R2e=[Jy.RECITATION,Jy.SAFETY,Jy.LANGUAGE];function e5(e){return!!e.finishReason&&R2e.includes(e.finishReason)}function j0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];e5(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function jw(e){return this instanceof jw?(this.v=e,this):new jw(e)}function L2e(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(p){return new Promise(function(g,x){s.push([h,p,g,x])>1||o(h,p)})})}function o(h,p){try{c(n[h](p))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof jw?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){o("next",h)}function d(h){o("throw",h)}function f(h,p){h(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KQ=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function M2e(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=H2e(t),[n,a]=r.tee();return{stream:Q2e(n),response:U2e(a)}}async function U2e(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return NP(V2e(t));t.push(a)}}function Q2e(e){return L2e(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield jw(r.read());if(a)break;yield yield jw(NP(n))}})}function H2e(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new Xo("Failed to parse stream"));return}n.close();return}a+=i;let c=a.match(KQ),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new Xo(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(KQ)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new yee("Request aborted when reading from the stream"):o=new Xo("Error reading from the stream"),o})}}})}function V2e(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wee(e,t,r,n){const a=await D2(t,ug.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return M2e(a)}async function Eee(e,t,r,n){const s=await(await D2(t,ug.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:NP(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cee(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function Iw(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return z2e(t)}function z2e(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new Xo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new Xo("No content is provided for sending chat message.");return n?t:r}function $2e(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new nm("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=Iw(e);n.contents=[s]}return{generateContentRequest:n}}function qQ(e){let t;return e.contents?t=e:t={contents:[Iw(e)]},e.systemInstruction&&(t.systemInstruction=Cee(e.systemInstruction)),t}function G2e(e){return typeof e=="string"||Array.isArray(e)?{content:Iw(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WQ=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],K2e={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function q2e(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new Xo(`First content should be with role 'user', got ${n}`);if(!LQ.includes(n))throw new Xo(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(LQ)}`);if(!Array.isArray(a))throw new Xo("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new Xo("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const c of WQ)c in o&&(s[c]+=1);const i=K2e[n];for(const o of WQ)if(!i.includes(o)&&s[o]>0)throw new Xo(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function XQ(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ="SILENT_ERROR";class W2e{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(q2e(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=Iw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>Eee(this._apiKey,this.model,d,f)).then(p=>{var g;if(XQ(p.response)){this._history.push(u);const x=Object.assign({parts:[],role:"model"},(g=p.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(x)}else{const x=j0(p.response);x&&console.warn(`sendMessage() was unsuccessful. ${x}. Inspect response object for details.`)}h=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=Iw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=wee(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(p=>{throw new Error(YQ)}).then(p=>p.response).then(p=>{if(XQ(p)){this._history.push(u);const g=Object.assign({},p.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=j0(p);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(p=>{p.message!==YQ&&console.error(p)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2e(e,t,r,n){return(await D2(t,ug.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2e(e,t,r,n){return(await D2(t,ug.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function J2e(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await D2(t,ug.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Cee(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=qQ(t),s=Object.assign(Object.assign({},this._requestOptions),r);return Eee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=qQ(t),s=Object.assign(Object.assign({},this._requestOptions),r);return wee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new W2e(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=$2e(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return X2e(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=G2e(t),a=Object.assign(Object.assign({},this._requestOptions),r);return Y2e(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return J2e(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Xo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new JQ(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new nm("Cached content must contain a `name` field.");if(!t.model)throw new nm("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===c)continue}throw new nm(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new JQ(this.apiKey,s,n)}}const SP="horario_asignaciones",_ee="horarios_generados",Z2e="usuarios",Nee=e=>{const t=e.data();return{id:e.id,...t}},eEe=e=>{const t=zt(Nt(ft,SP));return mr(t,n=>{const a=n.docs.map(s=>Nee(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},tEe=async e=>{try{return(await Tn(Nt(ft,SP),e)).id}catch(t){throw console.error("Error al agregar asignacin:",t),new Error("No se pudo agregar la asignacin.")}},rEe=async e=>{try{const t=dr(ft,SP,e);await za(t)}catch(t){throw console.error("Error al eliminar asignacin:",t),new Error("No se pudo eliminar la asignacin.")}},ZQ=async e=>{try{const t=dr(ft,_ee,"global");await Ji(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},nEe=e=>{const t=dr(ft,_ee,"global");return mr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})},aEe=e=>{const t=zt(Nt(ft,Z2e),Yr("profile","==",qt.PROFESORADO));return mr(t,n=>{const a=n.docs.map(s=>Nee(s));e(a)},n=>{console.error("Error al suscribirse a los profesores:",n),e([])})},sEe=({horarios:e})=>Object.keys(e).length===0?l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'An no se ha generado ningn horario. Utilice la pestaa de "Configuracin" para generar uno.'})}):l.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),Ks.map(t=>l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:t},t))]})}),l.jsx("tbody",{children:J_.map(t=>l.jsxs(nt.Fragment,{children:[l.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:l.jsx("th",{colSpan:2+Ks.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:t.toUpperCase()})}),P6.map(({bloque:r,inicio:n,fin:a})=>l.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),Ks.map(s=>{var o,c;const i=(c=(o=e[s])==null?void 0:o[t])==null?void 0:c[r];return l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?l.jsxs("div",{className:"flex flex-col justify-center h-full",children:[l.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),l.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):l.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${t}-${r}`)})]},`${t}-${r}`))]},t))})]})}),iEe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState({curso:"",asignatura:"",profesor:""}),[a,s]=S.useState([]),[i,o]=S.useState({}),[c,u]=S.useState(Ks[0]),[d,f]=S.useState(!1),[h,p]=S.useState(!0),[g,x]=S.useState(null),[b,y]=S.useState(null),[w,_]=S.useState(null),[j,k]=S.useState({asignatura:"",profesor:""}),[I,E]=S.useState("edicion"),[N,B]=S.useState("");S.useEffect(()=>{p(!0);const V=eEe(t),G=nEe(o),X=aEe(ee=>{const F=ee.map(z=>z.nombreCompleto).sort();s(F),p(!1)});return()=>{V(),G(),X()}},[]);const R=async V=>{if(V.preventDefault(),x(null),!r.curso||!r.asignatura||!r.profesor){x("Todos los campos de la asignacin son obligatorios.");return}try{await tEe({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(G){x(G instanceof Error?G.message:"Error al guardar la asignacin.")}},P=async V=>{try{await rEe(V)}catch(G){x(G instanceof Error?G.message:"Error al eliminar la asignacin.")}},D=async()=>{if(e.length===0){x("Debe agregar al menos una asignacin de profesor antes de generar el horario.");return}f(!0),x(null),y(null);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=new cs(V),X=`
                Eres un asistente experto en planificacin de horarios escolares para un liceo tcnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Das de la semana: ${J_.join(", ")}
                - Bloques horarios por da: 10 bloques con los siguientes horarios: ${JSON.stringify(P6,null,2)}
                - Cursos del liceo: ${Ks.join(", ")}

                **Contexto Adicional de Especialidades (3 y 4 Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecnica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecnica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3/4 Medio Automotriz" y "3/4 Medio Industrial" correctamente.

                **Reglas de Asignacin de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura segn el nivel del curso:
                ${JSON.stringify(Cbe,null,2)}
                Notas sobre las reglas:
                - '1 y 2 medio' aplica a cursos que empiezan con '1' o '2'.
                - '3 y 4 medio' aplica a cursos que empiezan con '3' o '4'.
                - Algunas reglas aplican a cursos especficos (ej. Mecnica).

                **Asignaciones de Profesores (Input):**
                Aqu est la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(e,null,2)}

                **REGLA CRTICA INVIOLABLE:**
                La restriccin ms importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo da y mismo bloque horario. Es fsicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las dems. No deben existir topes de horario para ningn profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${N||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma ms balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo da si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un nico objeto JSON vlido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1A": {
                    "Lunes": { "1": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemtica", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1B": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada da de la semana. Cada da tiene claves para cada bloque del 1 al 10. Si un bloque est vaco, usa \`{ "asignatura": null, "profesor": null }\`.
            `,te=(await(await G.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(X)).response).text().replace(/^```json\s*|```\s*$/g,""),ae=JSON.parse(te);await ZQ(ae),y("Horario generado y guardado con xito!")}catch(V){console.error("Error al generar horario con IA:",V),x("Ocurri un error al contactar con la IA o al procesar la respuesta. Revisa la consola para ms detalles.")}finally{f(!1)}},L=(V,G,X)=>{_({dia:V,bloque:G}),k({asignatura:(X==null?void 0:X.asignatura)||"",profesor:(X==null?void 0:X.profesor)||""})},M=async()=>{if(!w)return;const{dia:V,bloque:G}=w,X=JSON.parse(JSON.stringify(i));X[c]||(X[c]={}),X[c][V]||(X[c][V]={}),X[c][V][G]={asignatura:j.asignatura||null,profesor:j.profesor||null};try{await ZQ(X),_(null)}catch(ee){x(ee instanceof Error?ee.message:"Error al guardar la edicin.")}},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",H=()=>{const V=i[c]||{};return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),J_.map(G=>l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:G},G))]})}),l.jsx("tbody",{children:P6.map(({bloque:G,inicio:X,fin:ee})=>l.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[l.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:G}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${X} - ${ee}`})]}),J_.map(F=>{var te;const z=(w==null?void 0:w.dia)===F&&(w==null?void 0:w.bloque)===G,Y=(te=V[F])==null?void 0:te[G];return l.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!z&&L(F,G,Y),children:z?l.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[l.jsx("input",{type:"text",placeholder:"Asignatura",value:j.asignatura,onChange:ae=>k(le=>({...le,asignatura:ae.target.value})),className:J+" text-xs mb-1"}),l.jsx("input",{type:"text",placeholder:"Profesor",value:j.profesor,onChange:ae=>k(le=>({...le,profesor:ae.target.value})),className:J+" text-xs"}),l.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[l.jsx("button",{onClick:()=>_(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),l.jsx("button",{onClick:M,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):Y!=null&&Y.asignatura?l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:Y.asignatura}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",Y.profesor,")"]})]}):l.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${F}-${G}`)})]},G))})]})})},K=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 1. Configuracin de Asignaciones"}),l.jsxs("form",{onSubmit:R,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:r.curso,onChange:V=>n(G=>({...G,curso:V.target.value})),className:J,children:[l.jsx("option",{value:"",children:"Seleccione"}),Ks.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:V=>n(G=>({...G,asignatura:V.target.value})),className:J,children:[l.jsx("option",{value:"",children:"Seleccione"}),qi.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),l.jsxs("select",{name:"profesor",value:r.profesor,onChange:V=>n(G=>({...G,profesor:V.target.value})),className:J,children:[l.jsx("option",{value:"",children:"Seleccione"}),a.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),l.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:l.jsx("ul",{className:"space-y-2",children:e.map(V=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[l.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[V.curso," - ",V.asignatura," - ",l.jsx("strong",{children:V.profesor})]}),l.jsx("button",{onClick:()=>P(V.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:""})]},V.id))})})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 2. Generacin Automtica con IA"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),l.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:N,onChange:V=>B(V.target.value),rows:3,placeholder:"Ej: Dejar los mdulos tericos en la maana y los prcticos en la tarde. Evitar poner 2 bloques de matemtica seguidos.",className:J})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:D,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),g&&l.jsx("p",{className:"text-red-600",children:g}),b&&l.jsx("p",{className:"text-green-600",children:b})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:" 3. Visualizacin y Edicin por Curso"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),l.jsx("select",{id:"selectCurso",value:c,onChange:V=>u(V.target.value),className:J+" md:w-1/3",children:Ks.map(V=>l.jsx("option",{value:V,children:V},V))})]}),Object.keys(i).length>0?H():l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"An no se ha generado ningn horario. Utilice el botn de generacin con IA."})})]})]});return h?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>E("edicion"),className:`${I==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuracin y Edicin por Curso"}),l.jsx("button",{onClick:()=>E("global"),className:`${I==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),I==="edicion"?K():l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),l.jsx(sEe,{horarios:i})]})]})},y4="acciones_pedagogicas",oEe=(e,t)=>{var a,s,i,o;if(t.dimension||t.subdimension||t.indicadores||t.avance!==void 0)return{id:e,fechaRegistro:t.fechaRegistro??"",responsable:t.responsable??"",dimension:t.dimension??"",subdimension:t.subdimension??"",descripcion:t.descripcion??"",objetivos:t.objetivos??"",indicadores:Array.isArray(t.indicadores)?t.indicadores:t.indicadores?String(t.indicadores).split(",").map(c=>c.trim()).filter(Boolean):[],cobertura:t.cobertura??"",fechaInicio:t.fechaInicio??"",fechaCumplimiento:t.fechaCumplimiento??"",estado:t.estado??"Pendiente",avance:typeof t.avance=="number"?t.avance:0,enlaces:Array.isArray(t.enlaces)?t.enlaces:t.enlaces?[String(t.enlaces)]:[],creadoTs:typeof t.creadoTs=="number"?t.creadoTs:((s=(a=t.creadoTs)==null?void 0:a.toMillis)==null?void 0:s.call(a))??Date.now()};const r=t,n=r.enlaceDocumento?[String(r.enlaceDocumento)]:[];return{id:e,fechaRegistro:r.fechaRegistro??"",responsable:r.responsable??"",dimension:r.area??"",subdimension:"",descripcion:r.descripcion??"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:r.fechaCumplimiento??"",estado:r.estado??"Pendiente",avance:0,enlaces:n,creadoTs:typeof r.creadoTs=="number"?r.creadoTs:((o=(i=r.creadoTs)==null?void 0:i.toMillis)==null?void 0:o.call(i))??Date.now()}};async function lEe(){const e=[];try{const t=zt(Nt(ft,y4),_r("creadoTs","desc"));(await ga(t)).docs.forEach(n=>e.push(oEe(n.id,n.data())))}catch{}return e.sort((t,r)=>(r.creadoTs??0)-(t.creadoTs??0))}async function cEe(e){const t={fechaRegistro:e.fechaRegistro??new Date().toISOString().slice(0,10),responsable:e.responsable??"",dimension:e.dimension??e.area??"",subdimension:e.subdimension??"",descripcion:e.descripcion??"",objetivos:e.objetivos??"",indicadores:Array.isArray(e.indicadores)?e.indicadores:e.indicadores?String(e.indicadores).split(",").map(r=>r.trim()).filter(Boolean):[],cobertura:e.cobertura??"",fechaInicio:e.fechaInicio??"",fechaCumplimiento:e.fechaCumplimiento??"",estado:e.estado??"Pendiente",avance:typeof e.avance=="number"?e.avance:0,enlaces:Array.isArray(e.enlaces)?e.enlaces:e.enlaces?[String(e.enlaces)]:e.enlaceDocumento?[String(e.enlaceDocumento)]:[],creadoTs:sr.now()};await Tn(Nt(ft,y4),t)}async function uEe(e,t){const r=dr(Nt(ft,y4),e),n={...t};n.area&&!n.dimension&&(n.dimension=n.area,delete n.area),n.enlaceDocumento&&(n.enlaces=[String(n.enlaceDocumento)],delete n.enlaceDocumento),Array.isArray(n.indicadores)===!1&&typeof n.indicadores=="string"&&(n.indicadores=String(n.indicadores).split(",").map(a=>a.trim()).filter(Boolean)),await Vu(r,n)}async function dEe(e){const t=dr(Nt(ft,y4),e);await za(t)}function See(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=See(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function gn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=See(e))&&(n&&(n+=" "),n+=t);return n}var RT={},LT={},eH;function AEe(){return eH||(eH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(LT)),LT}var MT={},tH;function kee(){return tH||(tH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(MT)),MT}var UT={},rH;function Bee(){return rH||(rH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(UT)),UT}var QT={},nH;function kP(){return nH||(nH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",o="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];o?u==="\\"&&s+1<a?(s++,i+=r[s]):u===o?o="":i+=u:c?u==='"'||u==="'"?o=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(QT)),QT}var aH;function BP(){return aH||(aH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AEe(),r=kee(),n=Bee(),a=kP();function s(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?s(o,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function i(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(RT)),RT}var HT,sH;function fEe(){return sH||(sH=1,HT=BP().get),HT}var hEe=fEe();const bm=Cl(hEe);var VT={exports:{}},ra={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iH;function mEe(){if(iH)return ra;iH=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,x=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function _(k){if(typeof k=="object"&&k!==null){var I=k.$$typeof;switch(I){case t:switch(k=k.type,k){case c:case u:case n:case s:case a:case f:return k;default:switch(k=k&&k.$$typeof,k){case o:case d:case g:case p:case i:return k;default:return I}}case r:return I}}}function j(k){return _(k)===u}return ra.AsyncMode=c,ra.ConcurrentMode=u,ra.ContextConsumer=o,ra.ContextProvider=i,ra.Element=t,ra.ForwardRef=d,ra.Fragment=n,ra.Lazy=g,ra.Memo=p,ra.Portal=r,ra.Profiler=s,ra.StrictMode=a,ra.Suspense=f,ra.isAsyncMode=function(k){return j(k)||_(k)===c},ra.isConcurrentMode=j,ra.isContextConsumer=function(k){return _(k)===o},ra.isContextProvider=function(k){return _(k)===i},ra.isElement=function(k){return typeof k=="object"&&k!==null&&k.$$typeof===t},ra.isForwardRef=function(k){return _(k)===d},ra.isFragment=function(k){return _(k)===n},ra.isLazy=function(k){return _(k)===g},ra.isMemo=function(k){return _(k)===p},ra.isPortal=function(k){return _(k)===r},ra.isProfiler=function(k){return _(k)===s},ra.isStrictMode=function(k){return _(k)===a},ra.isSuspense=function(k){return _(k)===f},ra.isValidElementType=function(k){return typeof k=="string"||typeof k=="function"||k===n||k===u||k===s||k===a||k===f||k===h||typeof k=="object"&&k!==null&&(k.$$typeof===g||k.$$typeof===p||k.$$typeof===i||k.$$typeof===o||k.$$typeof===d||k.$$typeof===b||k.$$typeof===y||k.$$typeof===w||k.$$typeof===x)},ra.typeOf=_,ra}var oH;function pEe(){return oH||(oH=1,VT.exports=mEe()),VT.exports}var gEe=pEe(),Wi=e=>e===0?0:e>0?1:-1,Uc=e=>typeof e=="number"&&e!=+e,jp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ur=e=>(typeof e=="number"||e instanceof Number)&&!Uc(e),tf=e=>ur(e)||typeof e=="string",xEe=0,Fw=e=>{var t=++xEe;return"".concat(e||"").concat(t)},wl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&typeof t!="string")return n;var s;if(jp(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return Uc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},Tee=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},rv=(e,t)=>ur(e)&&ur(t)?r=>e+r*(t-e):()=>t;function yx(e,t,r){return ur(e)&&ur(t)?e+r*(t-e):t}function vEe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):bm(n,t))===r)}var ks=e=>e===null||typeof e>"u",P2=e=>ks(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),bEe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function TP(e){if(typeof e!="string")return!1;var t=bEe;return t.includes(e)}var yEe=["viewBox","children"],lH=["points","pathLength"],zT={svg:yEe,polygon:lH,polyline:lH},jP=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(S.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{TP(a)&&(n[a]=s=>r[a](r,s))}),n},wEe=(e,t,r)=>n=>(e(t,r,n),null),jg=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];TP(a)&&typeof s=="function"&&(n||(n={}),n[a]=wEe(s,t,r))}),n},EEe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function jee(e){if(typeof e!="string")return!1;var t=EEe;return t.includes(e)}function il(e){var t=Object.entries(e).filter(r=>{var[n]=r;return jee(n)});return Object.fromEntries(t)}var cH=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",uH=null,$T=null,Iee=e=>{if(e===uH&&Array.isArray($T))return $T;var t=[];return S.Children.forEach(e,r=>{ks(r)||(gEe.isFragment(r)?t=t.concat(Iee(r.props.children)):t.push(r))}),$T=t,uH=e,t};function R2(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>cH(a)):n=[cH(t)],Iee(e).forEach(a=>{var s=bm(a,"type.displayName")||bm(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var CEe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(zT==null?void 0:zT[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&s.includes(t)||jee(t)),c=!!r&&TP(t);return i||o||c},Wn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(S.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;CEe((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},_Ee=["children","width","height","viewBox","className","style","title","desc"];function U6(){return U6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U6.apply(null,arguments)}function NEe(e,t){if(e==null)return{};var r,n,a=SEe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function SEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var IP=S.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:c,desc:u}=e,d=NEe(e,_Ee),f=s||{width:n,height:a,x:0,y:0},h=gn("recharts-surface",i);return S.createElement("svg",U6({},Wn(d,!0,"svg"),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),S.createElement("title",null,c),S.createElement("desc",null,u),r)}),kEe=["children","className"];function Q6(){return Q6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q6.apply(null,arguments)}function BEe(e,t){if(e==null)return{};var r,n,a=TEe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function TEe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var us=S.forwardRef((e,t)=>{var{children:r,className:n}=e,a=BEe(e,kEe),s=gn("recharts-layer",n);return S.createElement("g",Q6({className:s},Wn(a,!0),{ref:t}),r)}),FP=AY(),Fee=S.createContext(null),jEe=()=>S.useContext(Fee);function Oa(e){return function(){return e}}const Oee=Math.cos,nN=Math.sin,Qd=Math.sqrt,aN=Math.PI,w4=2*aN,H6=Math.PI,V6=2*H6,vp=1e-6,IEe=V6-vp;function Dee(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function FEe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Dee;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class OEe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Dee:FEe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,c=n-t,u=a-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>vp)if(!(Math.abs(f*c-u*d)>vp)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,g=a-o,x=c*c+u*u,b=p*p+g*g,y=Math.sqrt(x),w=Math.sqrt(h),_=s*Math.tan((H6-Math.acos((x+h-b)/(2*y*w)))/2),j=_/w,k=_/y;Math.abs(j-1)>vp&&this._append`L${t+j*d},${r+j*f}`,this._append`A${s},${s},0,0,${+(f*p>d*g)},${this._x1=t+k*c},${this._y1=r+k*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>vp||Math.abs(this._y1-d)>vp)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%V6+V6),h>IEe?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>vp&&this._append`A${n},${n},0,${+(h>=H6)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function OP(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new OEe(t)}function DP(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Pee(e){this._context=e}Pee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function E4(e){return new Pee(e)}function Ree(e){return e[0]}function Lee(e){return e[1]}function Mee(e,t){var r=Oa(!0),n=null,a=E4,s=null,i=OP(o);e=typeof e=="function"?e:e===void 0?Ree:Oa(e),t=typeof t=="function"?t:t===void 0?Lee:Oa(t);function o(c){var u,d=(c=DP(c)).length,f,h=!1,p;for(n==null&&(s=a(p=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(p)return s=null,p+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Oa(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Oa(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Oa(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),o):n},o}function SC(e,t,r){var n=null,a=Oa(!0),s=null,i=E4,o=null,c=OP(u);e=typeof e=="function"?e:e===void 0?Ree:Oa(+e),t=typeof t=="function"?t:Oa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Lee:Oa(+r);function u(f){var h,p,g,x=(f=DP(f)).length,b,y=!1,w,_=new Array(x),j=new Array(x);for(s==null&&(o=i(w=c())),h=0;h<=x;++h){if(!(h<x&&a(b=f[h],h,f))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(_[g],j[g]);o.lineEnd(),o.areaEnd()}y&&(_[h]=+e(b,h,f),j[h]=+t(b,h,f),o.point(n?+n(b,h,f):_[h],r?+r(b,h,f):j[h]))}if(w)return o=null,w+""||null}function d(){return Mee().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Oa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Oa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Oa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Oa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Oa(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(o=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=o=null:o=i(s=f),u):s},u}class Uee{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function DEe(e){return new Uee(e,!0)}function PEe(e){return new Uee(e,!1)}const PP={draw(e,t){const r=Qd(t/aN);e.moveTo(r,0),e.arc(0,0,r,0,w4)}},REe={draw(e,t){const r=Qd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Qee=Qd(1/3),LEe=Qee*2,MEe={draw(e,t){const r=Qd(t/LEe),n=r*Qee;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},UEe={draw(e,t){const r=Qd(t),n=-r/2;e.rect(n,n,r,r)}},QEe=.8908130915292852,Hee=nN(aN/10)/nN(7*aN/10),HEe=nN(w4/10)*Hee,VEe=-Oee(w4/10)*Hee,zEe={draw(e,t){const r=Qd(t*QEe),n=HEe*r,a=VEe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=w4*s/5,o=Oee(i),c=nN(i);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},GT=Qd(3),$Ee={draw(e,t){const r=-Qd(t/(GT*3));e.moveTo(0,r*2),e.lineTo(-GT*r,-r),e.lineTo(GT*r,-r),e.closePath()}},pu=-.5,gu=Qd(3)/2,z6=1/Qd(12),GEe=(z6/2+1)*3,KEe={draw(e,t){const r=Qd(t/GEe),n=r/2,a=r*z6,s=n,i=r*z6+r,o=-s,c=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,c),e.lineTo(pu*n-gu*a,gu*n+pu*a),e.lineTo(pu*s-gu*i,gu*s+pu*i),e.lineTo(pu*o-gu*c,gu*o+pu*c),e.lineTo(pu*n+gu*a,pu*a-gu*n),e.lineTo(pu*s+gu*i,pu*i-gu*s),e.lineTo(pu*o+gu*c,pu*c-gu*o),e.closePath()}};function qEe(e,t){let r=null,n=OP(a);e=typeof e=="function"?e:Oa(e||PP),t=typeof t=="function"?t:Oa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Oa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function sN(){}function iN(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Vee(e){this._context=e}Vee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:iN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:iN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function WEe(e){return new Vee(e)}function zee(e){this._context=e}zee.prototype={areaStart:sN,areaEnd:sN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:iN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function XEe(e){return new zee(e)}function $ee(e){this._context=e}$ee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:iN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YEe(e){return new $ee(e)}function Gee(e){this._context=e}Gee.prototype={areaStart:sN,areaEnd:sN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function JEe(e){return new Gee(e)}function dH(e){return e<0?-1:1}function AH(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(dH(s)+dH(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function fH(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function KT(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function oN(e){this._context=e}oN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:KT(this,this._t0,fH(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,KT(this,fH(this,r=AH(this,e,t)),r);break;default:KT(this,this._t0,r=AH(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Kee(e){this._context=new qee(e)}(Kee.prototype=Object.create(oN.prototype)).point=function(e,t){oN.prototype.point.call(this,t,e)};function qee(e){this._context=e}qee.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function ZEe(e){return new oN(e)}function eCe(e){return new Kee(e)}function Wee(e){this._context=e}Wee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=hH(e),a=hH(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function hH(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function tCe(e){return new Wee(e)}function C4(e,t){this._context=e,this._t=t}C4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function rCe(e){return new C4(e,.5)}function nCe(e){return new C4(e,0)}function aCe(e){return new C4(e,1)}function qv(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,o=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function $6(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function sCe(e,t){return e[t]}function iCe(e){const t=[];return t.key=e,t}function oCe(){var e=Oa([]),t=$6,r=qv,n=sCe;function a(s){var i=Array.from(e.apply(this,arguments),iCe),o,c=i.length,u=-1,d;for(const f of s)for(o=0,++u;o<c;++o)(i[o][u]=[0,+n(f,i[o].key,u,s)]).data=f;for(o=0,d=DP(t(i));o<c;++o)i[d[o]].index=o;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Oa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Oa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?$6:typeof s=="function"?s:Oa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??qv,a):r},a}function lCe(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}qv(e,t)}}function cCe(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,o=0;i<a;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}qv(e,t)}}function uCe(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var o=0,c=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var x=e[t[g]],b=x[n][1]||0,y=x[n-1][1]||0;p+=b-y}c+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,qv(e,t)}}var dCe=["type","size","sizeType"];function G6(){return G6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G6.apply(null,arguments)}function mH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function pH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mH(Object(r),!0).forEach(function(n){ACe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ACe(e,t,r){return(t=fCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fCe(e){var t=hCe(e,"string");return typeof t=="symbol"?t:t+""}function hCe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mCe(e,t){if(e==null)return{};var r,n,a=pCe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function pCe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Xee={symbolCircle:PP,symbolCross:REe,symbolDiamond:MEe,symbolSquare:UEe,symbolStar:zEe,symbolTriangle:$Ee,symbolWye:KEe},gCe=Math.PI/180,xCe=e=>{var t="symbol".concat(P2(e));return Xee[t]||PP},vCe=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*gCe;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},bCe=(e,t)=>{Xee["symbol".concat(P2(e))]=t},RP=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=mCe(e,dCe),s=pH(pH({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var f=xCe(t),h=qEe().type(f).size(vCe(r,n,t));return h()},{className:o,cx:c,cy:u}=s,d=Wn(s,!0);return c===+c&&u===+u&&r===+r?S.createElement("path",G6({},d,{className:gn("recharts-symbols",o),transform:"translate(".concat(c,", ").concat(u,")"),d:i()})):null};RP.registerSymbol=bCe;function K6(){return K6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},K6.apply(null,arguments)}function gH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yCe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gH(Object(r),!0).forEach(function(n){LP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gH(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LP(e,t,r){return(t=wCe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wCe(e){var t=ECe(e,"string");return typeof t=="symbol"?t:t+""}function ECe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xu=32;class MP extends S.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=xu/2,s=xu/6,i=xu/3,o=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return S.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:xu,y2:a,className:"recharts-legend-icon"});if(c==="line")return S.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(xu,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return S.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(xu/8,"h").concat(xu,"v").concat(xu*3/4,"h").concat(-xu,"z"),className:"recharts-legend-icon"});if(S.isValidElement(t.legendIcon)){var u=yCe({},t);return delete u.legendIcon,S.cloneElement(t.legendIcon,u)}return S.createElement(RP,{fill:o,cx:a,cy:a,size:xu,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=this.props,o={x:0,y:0,width:xu,height:xu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,p=gn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,x=h?h(d.value,d,f):d.value;return S.createElement("li",K6({className:p,style:c,key:"legend-item-".concat(f)},jg(this.props,d,f)),S.createElement(IP,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(x," legend icon")},this.renderIcon(d,i)),S.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return S.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}LP(MP,"displayName","Legend");LP(MP,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var qT={},WT={},xH;function CCe(){return xH||(xH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],o=n(i);a.has(o)||a.set(o,i)}return Array.from(a.values())}e.uniqBy=t}(WT)),WT}var XT={},vH;function _4(){return vH||(vH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(XT)),XT}var YT={},JT={},ZT={},bH;function _Ce(){return bH||(bH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(ZT)),ZT}var yH;function UP(){return yH||(yH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_Ce();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(JT)),JT}var ej={},wH;function NCe(){return wH||(wH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(ej)),ej}var EH;function SCe(){return EH||(EH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=UP(),r=NCe();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(YT)),YT}var tj={},rj={},CH;function kCe(){return CH||(CH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BP();function r(n){return function(a){return t.get(a,n)}}e.property=r}(rj)),rj}var nj={},aj={},sj={},ij={},_H;function Yee(){return _H||(_H=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(ij)),ij}var oj={},NH;function Jee(){return NH||(NH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(oj)),oj}var lj={},SH;function QP(){return SH||(SH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(lj)),lj}var kH;function BCe(){return kH||(kH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP(),r=Yee(),n=Jee(),a=QP();function s(f,h,p){return typeof p!="function"?t.isMatch(f,h):i(f,h,function g(x,b,y,w,_,j){const k=p(x,b,y,w,_,j);return k!==void 0?!!k:i(x,b,g,j)},new Map)}function i(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,p,g);case"function":return Object.keys(h).length>0?i(f,{...h},p,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function o(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,g);if(h instanceof Map)return c(f,h,p,g);if(h instanceof Set)return d(f,h,p,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let b=0;b<x.length;b++){const y=x[b];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!p(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,b]of h.entries()){const y=f.get(x);if(p(y,b,x,f,h,g)===!1)return!1}return!0}function u(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let b=0;b<h.length;b++){const y=h[b];let w=!1;for(let _=0;_<f.length;_++){if(x.has(_))continue;const j=f[_];let k=!1;if(p(j,y,b,f,h,g)&&(k=!0),k){x.add(_),w=!0;break}}if(!w)return!1}return!0}function d(f,h,p,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,g):!1}e.isMatchWith=s,e.isSetMatch=d}(sj)),sj}var BH;function HP(){return BH||(BH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=BCe();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(aj)),aj}var cj={},uj={},dj={},TH;function Zee(){return TH||(TH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(dj)),dj}var Aj={},jH;function VP(){return jH||(jH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(Aj)),Aj}var fj={},IH;function zP(){return IH||(IH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",g="[object Error]",x="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",w="[object Uint16Array]",_="[object Uint32Array]",j="[object BigUint64Array]",k="[object Int8Array]",I="[object Int16Array]",E="[object Int32Array]",N="[object BigInt64Array]",B="[object Float32Array]",R="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=N,e.bigUint64ArrayTag=j,e.booleanTag=a,e.dataViewTag=x,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=B,e.float64ArrayTag=R,e.functionTag=f,e.int16ArrayTag=I,e.int32ArrayTag=E,e.int8ArrayTag=k,e.mapTag=c,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=w,e.uint32ArrayTag=_,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(fj)),fj}var hj={},FH;function TCe(){return FH||(FH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(hj)),hj}var OH;function ete(){return OH||(OH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zee(),r=VP(),n=zP(),a=Jee(),s=TCe();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,p=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,p);if(x!=null)return x;if(a.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const b=new Array(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;p.set(d,b);for(const[y,w]of d)b.set(y,o(w,y,h,p,g));return b}if(d instanceof Set){const b=new Set;p.set(d,b);for(const y of d)b.add(o(y,void 0,h,p,g));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,b),c(b,d,h,p,g),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return p.set(d,b),c(b,d,h,p,g),b}if(d instanceof Blob){const b=new Blob([d],{type:d.type});return p.set(d,b),c(b,d,h,p,g),b}if(d instanceof Error){const b=new d.constructor;return p.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,c(b,d,h,p,g),b}if(typeof d=="object"&&u(d)){const b=Object.create(Object.getPrototypeOf(d));return p.set(d,b),c(b,d,h,p,g),b}return d}function c(d,f,h=d,p,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<x.length;b++){const y=x[b],w=Object.getOwnPropertyDescriptor(d,y);(w==null||w.writable)&&(d[y]=o(f[y],y,h,p,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=c}(uj)),uj}var DH;function jCe(){return DH||(DH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ete();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(cj)),cj}var PH;function ICe(){return PH||(PH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP(),r=jCe();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(nj)),nj}var mj={},pj={},gj={},RH;function FCe(){return RH||(RH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ete(),r=zP();function n(a,s){return t.cloneDeepWith(a,(i,o,c,u)=>{const d=s==null?void 0:s(i,o,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(gj)),gj}var LH;function OCe(){return LH||(LH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FCe();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(pj)),pj}var xj={},vj={},MH;function tte(){return MH||(MH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(vj)),vj}var bj={},UH;function DCe(){return UH||(UH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VP();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(bj)),bj}var QH;function PCe(){return QH||(QH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kee(),r=tte(),n=DCe(),a=kP();function s(i,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(i==null?void 0:i[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(xj)),xj}var HH;function RCe(){return HH||(HH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HP(),r=Bee(),n=OCe(),a=BP(),s=PCe();function i(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,o);return d===void 0?s.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i}(mj)),mj}var VH;function $P(){return VH||(VH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_4(),r=kCe(),n=ICe(),a=RCe();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(tj)),tj}var zH;function LCe(){return zH||(zH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CCe(),r=_4(),n=SCe(),a=$P();function s(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(o)):[]}e.uniqBy=s}(qT)),qT}var yj,$H;function MCe(){return $H||($H=1,yj=LCe().uniqBy),yj}var UCe=MCe();const GH=Cl(UCe);function rte(e,t,r){return t===!0?GH(e,r):typeof t=="function"?GH(e,t):e}var wj={exports:{}},Ej={},Cj={exports:{}},_j={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KH;function QCe(){if(KH)return _j;KH=1;var e=C1();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var p=h(),g=n({inst:{value:p,getSnapshot:h}}),x=g[0].inst,b=g[1];return s(function(){x.value=p,x.getSnapshot=h,c(x)&&b({inst:x})},[f,p,h]),a(function(){return c(x)&&b({inst:x}),f(function(){c(x)&&b({inst:x})})},[f]),i(p),p}function c(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!r(f,p)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return _j.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,_j}var qH;function HCe(){return qH||(qH=1,Cj.exports=QCe()),Cj.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WH;function VCe(){if(WH)return Ej;WH=1;var e=C1(),t=HCe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return Ej.useSyncExternalStoreWithSelector=function(u,d,f,h,p){var g=s(null);if(g.current===null){var x={hasValue:!1,value:null};g.current=x}else x=g.current;g=o(function(){function y(I){if(!w){if(w=!0,_=I,I=h(I),p!==void 0&&x.hasValue){var E=x.value;if(p(E,I))return j=E}return j=I}if(E=j,n(_,I))return E;var N=h(I);return p!==void 0&&p(E,N)?(_=I,E):(_=I,j=N)}var w=!1,_,j,k=f===void 0?null:f;return[function(){return y(d())},k===null?void 0:function(){return y(k())}]},[d,f,h,p]);var b=a(u,g[0],g[1]);return i(function(){x.hasValue=!0,x.value=b},[b]),c(b),b},Ej}var XH;function zCe(){return XH||(XH=1,wj.exports=VCe()),wj.exports}var nte=zCe();const $Ce=Cl(nte);var GP=S.createContext(null),GCe=e=>e,$a=()=>{var e=S.useContext(GP);return e?e.store.dispatch:GCe},t5=()=>{},KCe=()=>t5,qCe=(e,t)=>e===t;function ir(e){var t=S.useContext(GP);return nte.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:KCe,t?t.store.getState:t5,t?t.store.getState:t5,t?e:t5,qCe)}function WCe(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function XCe(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function YCe(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var YH=e=>Array.isArray(e)?e:[e];function JCe(e){const t=Array.isArray(e[0])?e[0]:e;return YCe(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function ZCe(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var e_e=class{constructor(e){this.value=e}deref(){return this.value}},t_e=typeof WeakRef<"u"?WeakRef:e_e,r_e=0,JH=1;function kC(){return{s:r_e,v:void 0,o:null,p:null}}function ate(e,t={}){let r=kC();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var f;let o=r;const{length:c}=arguments;for(let h=0,p=c;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=o.o;x===null&&(o.o=x=new WeakMap);const b=x.get(g);b===void 0?(o=kC(),x.set(g,o)):o=b}else{let x=o.p;x===null&&(o.p=x=new Map);const b=x.get(g);b===void 0?(o=kC(),x.set(g,o)):o=b}}const u=o;let d;if(o.s===JH)d=o.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new t_e(d):d}return u.s=JH,u.v=d,d}return i.clearCache=()=>{r=kC(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function n_e(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,o,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),WCe(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:p=ate,argsMemoizeOptions:g=[]}=d,x=YH(h),b=YH(g),y=JCe(a),w=f(function(){return s++,u.apply(null,arguments)},...x),_=p(function(){i++;const k=ZCe(y,arguments);return o=w.apply(null,k),o},...b);return Object.assign(_,{resultFunc:u,memoizedResultFunc:w,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var ut=n_e(ate),a_e=Object.assign((e,t=ut)=>{XCe(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,c)=>(i[r[c]]=o,i),{}))},{withTypes:()=>a_e}),Nj={},Sj={},kj={},ZH;function s_e(){return ZH||(ZH=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),o=t(a);if(i===o&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-i:i-o}return 0};e.compareValues=r}(kj)),kj}var Bj={},Tj={},eV;function ste(){return eV||(eV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(Tj)),Tj}var tV;function i_e(){return tV||(tV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ste(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(Bj)),Bj}var rV;function o_e(){return rV||(rV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s_e(),r=i_e(),n=kP();function a(s,i,o,c){if(s==null)return[];o=c?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,g)=>{let x=p;for(let b=0;b<g.length&&x!=null;++b)x=x[g[b]];return x},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:u(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?u(g,p):typeof g=="object"?g[p]:g,f=i.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let x=0;x<f.length;x++){const b=t.compareValues(p.criteria[x],g.criteria[x],o[x]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=a}(Sj)),Sj}var jj={},nV;function l_e(){return nV||(nV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}e.flatten=t}(jj)),jj}var Ij={},aV;function ite(){return aV||(aV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=tte(),r=UP(),n=Yee(),a=QP();function s(i,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],i):!1}e.isIterateeCall=s}(Ij)),Ij}var sV;function c_e(){return sV||(sV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o_e(),r=l_e(),n=ite();function a(s,...i){const o=i.length;return o>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(Nj)),Nj}var Fj,iV;function u_e(){return iV||(iV=1,Fj=c_e().sortBy),Fj}var d_e=u_e();const N4=Cl(d_e);var ote=e=>e.legend.settings,A_e=e=>e.legend.size,f_e=e=>e.legend.payload,h_e=ut([f_e,ote],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?N4(n,r):n});function m_e(){return ir(h_e)}var BC=1;function lte(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=S.useState({height:0,left:0,top:0,width:0}),n=S.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>BC||Math.abs(i.left-t.left)>BC||Math.abs(i.top-t.top)>BC||Math.abs(i.width-t.width)>BC)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Ao(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var p_e=typeof Symbol=="function"&&Symbol.observable||"@@observable",oV=p_e,Oj=()=>Math.random().toString(36).substring(7).split("").join("."),g_e={INIT:`@@redux/INIT${Oj()}`,REPLACE:`@@redux/REPLACE${Oj()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Oj()}`},lN=g_e;function KP(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function cte(e,t,r){if(typeof e!="function")throw new Error(Ao(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Ao(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Ao(1));return r(cte)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((b,y)=>{i.set(y,b)}))}function d(){if(c)throw new Error(Ao(3));return a}function f(b){if(typeof b!="function")throw new Error(Ao(4));if(c)throw new Error(Ao(5));let y=!0;u();const w=o++;return i.set(w,b),function(){if(y){if(c)throw new Error(Ao(6));y=!1,u(),i.delete(w),s=null}}}function h(b){if(!KP(b))throw new Error(Ao(7));if(typeof b.type>"u")throw new Error(Ao(8));if(typeof b.type!="string")throw new Error(Ao(17));if(c)throw new Error(Ao(9));try{c=!0,a=n(a,b)}finally{c=!1}return(s=i).forEach(w=>{w()}),b}function p(b){if(typeof b!="function")throw new Error(Ao(10));n=b,h({type:lN.REPLACE})}function g(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Ao(11));function w(){const j=y;j.next&&j.next(d())}return w(),{unsubscribe:b(w)}},[oV](){return this}}}return h({type:lN.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[oV]:g}}function x_e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:lN.INIT})>"u")throw new Error(Ao(12));if(typeof r(void 0,{type:lN.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ao(13))})}function ute(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{x_e(r)}catch(s){a=s}return function(i={},o){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],p=i[f],g=h(p,o);if(typeof g>"u")throw o&&o.type,new Error(Ao(14));u[f]=g,c=c||g!==p}return c=c||n.length!==Object.keys(i).length,c?u:i}}function cN(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function v_e(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(Ao(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},o=e.map(c=>c(i));return s=cN(...o)(a.dispatch),{...a,dispatch:s}}}function dte(e){return KP(e)&&"type"in e&&typeof e.type=="string"}var Ate=Symbol.for("immer-nothing"),lV=Symbol.for("immer-draftable"),Qc=Symbol.for("immer-state");function wd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Wv=Object.getPrototypeOf;function dg(e){return!!e&&!!e[Qc]}function gh(e){var t;return e?fte(e)||Array.isArray(e)||!!e[lV]||!!((t=e.constructor)!=null&&t[lV])||k4(e)||B4(e):!1}var b_e=Object.prototype.constructor.toString();function fte(e){if(!e||typeof e!="object")return!1;const t=Wv(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===b_e}function uN(e,t){S4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function S4(e){const t=e[Qc];return t?t.type_:Array.isArray(e)?1:k4(e)?2:B4(e)?3:0}function q6(e,t){return S4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function hte(e,t,r){const n=S4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function y_e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function k4(e){return e instanceof Map}function B4(e){return e instanceof Set}function bp(e){return e.copy_||e.base_}function W6(e,t){if(k4(e))return new Map(e);if(B4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=fte(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Qc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Wv(e),n)}else{const n=Wv(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function qP(e,t=!1){return T4(e)||dg(e)||!gh(e)||(S4(e)>1&&(e.set=e.add=e.clear=e.delete=w_e),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>qP(n,!0))),e}function w_e(){wd(2)}function T4(e){return Object.isFrozen(e)}var E_e={};function Ag(e){const t=E_e[e];return t||wd(0,e),t}var Ow;function mte(){return Ow}function C_e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cV(e,t){t&&(Ag("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function X6(e){Y6(e),e.drafts_.forEach(__e),e.drafts_=null}function Y6(e){e===Ow&&(Ow=e.parent_)}function uV(e){return Ow=C_e(Ow,e)}function __e(e){const t=e[Qc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function dV(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Qc].modified_&&(X6(t),wd(4)),gh(e)&&(e=dN(t,e),t.parent_||AN(t,e)),t.patches_&&Ag("Patches").generateReplacementPatches_(r[Qc].base_,e,t.patches_,t.inversePatches_)):e=dN(t,r,[]),X6(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ate?e:void 0}function dN(e,t,r){if(T4(t))return t;const n=t[Qc];if(!n)return uN(t,(a,s)=>AV(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return AN(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),uN(s,(o,c)=>AV(e,n,a,o,c,r,i)),AN(e,a,!1),r&&e.patches_&&Ag("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function AV(e,t,r,n,a,s,i){if(dg(a)){const o=s&&t&&t.type_!==3&&!q6(t.assigned_,n)?s.concat(n):void 0,c=dN(e,a,o);if(hte(r,n,c),dg(c))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(gh(a)&&!T4(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;dN(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&AN(e,a)}}function AN(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&qP(t,r)}function N_e(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:mte(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=WP;r&&(a=[n],s=Dw);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}var WP={get(e,t){if(t===Qc)return e;const r=bp(e);if(!q6(r,t))return S_e(e,r,t);const n=r[t];return e.finalized_||!gh(n)?n:n===Dj(e.base_,t)?(Pj(e),e.copy_[t]=Z6(n,e)):n},has(e,t){return t in bp(e)},ownKeys(e){return Reflect.ownKeys(bp(e))},set(e,t,r){const n=pte(bp(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Dj(bp(e),t),s=a==null?void 0:a[Qc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(y_e(r,a)&&(r!==void 0||q6(e.base_,t)))return!0;Pj(e),J6(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Dj(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Pj(e),J6(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=bp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){wd(11)},getPrototypeOf(e){return Wv(e.base_)},setPrototypeOf(){wd(12)}},Dw={};uN(WP,(e,t)=>{Dw[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Dw.deleteProperty=function(e,t){return Dw.set.call(this,e,t,void 0)};Dw.set=function(e,t,r){return WP.set.call(this,e[0],t,r,e[0])};function Dj(e,t){const r=e[Qc];return(r?bp(r):e)[t]}function S_e(e,t,r){var a;const n=pte(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function pte(e,t){if(!(t in e))return;let r=Wv(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Wv(r)}}function J6(e){e.modified_||(e.modified_=!0,e.parent_&&J6(e.parent_))}function Pj(e){e.copy_||(e.copy_=W6(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var k_e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&wd(6),n!==void 0&&typeof n!="function"&&wd(7);let a;if(gh(t)){const s=uV(this),i=Z6(t,void 0);let o=!0;try{a=r(i),o=!1}finally{o?X6(s):Y6(s)}return cV(s,n),dV(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===Ate&&(a=void 0),this.autoFreeze_&&qP(a,!0),n){const s=[],i=[];Ag("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else wd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,c=>t(c,...o));let n,a;return[this.produce(t,r,(i,o)=>{n=i,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){gh(e)||wd(8),dg(e)&&(e=sh(e));const t=uV(this),r=Z6(e,void 0);return r[Qc].isManual_=!0,Y6(t),r}finishDraft(e,t){const r=e&&e[Qc];(!r||!r.isManual_)&&wd(9);const{scope_:n}=r;return cV(n,t),dV(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=Ag("Patches").applyPatches_;return dg(e)?n(e,t):this.produce(e,a=>n(a,t))}};function Z6(e,t){const r=k4(e)?Ag("MapSet").proxyMap_(e,t):B4(e)?Ag("MapSet").proxySet_(e,t):N_e(e,t);return(t?t.scope_:mte()).drafts_.push(r),r}function sh(e){return dg(e)||wd(10,e),gte(e)}function gte(e){if(!gh(e)||T4(e))return e;const t=e[Qc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=W6(e,t.scope_.immer_.useStrictShallowCopy_)}else r=W6(e,!0);return uN(r,(n,a)=>{hte(r,n,gte(a))}),t&&(t.finalized_=!1),r}var Hc=new k_e,xte=Hc.produce;Hc.produceWithPatches.bind(Hc);Hc.setAutoFreeze.bind(Hc);Hc.setUseStrictShallowCopy.bind(Hc);Hc.applyPatches.bind(Hc);Hc.createDraft.bind(Hc);Hc.finishDraft.bind(Hc);function vte(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var B_e=vte(),T_e=vte,j_e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?cN:cN.apply(null,arguments)};function Uu(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Lc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>dte(n)&&n.type===e,r}var bte=class ky extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,ky.prototype)}static get[Symbol.species](){return ky}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new ky(...t[0].concat(this)):new ky(...t.concat(this))}};function fV(e){return gh(e)?xte(e,()=>{}):e}function TC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function I_e(e){return typeof e=="boolean"}var F_e=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new bte;return r&&(I_e(r)?i.push(B_e):i.push(T_e(r.extraArgument))),i},O_e="RTK_autoBatch",hV=e=>t=>{setTimeout(t,e)},D_e=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:hV(10):e.type==="callback"?e.queueNotification:hV(e.timeout),u=()=>{i=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[O_e]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},P_e=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new bte(e);return n&&a.push(D_e(typeof n=="object"?n:void 0)),a};function R_e(e){const t=F_e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(KP(r))o=ute(r);else throw new Error(Lc(1));let c;typeof n=="function"?c=n(t):c=t();let u=cN;a&&(u=j_e({trace:!1,...typeof a=="object"&&a}));const d=v_e(...c),f=P_e(d);let h=typeof i=="function"?i(f):f();const p=u(...h);return cte(o,s,p)}function yte(e){const t={},r=[];let n;const a={addCase(s,i){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Lc(28));if(o in t)throw new Error(Lc(29));return t[o]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function L_e(e){return typeof e=="function"}function M_e(e,t){let[r,n,a]=yte(t),s;if(L_e(e))s=()=>fV(e());else{const o=fV(e);s=()=>o}function i(o=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(dg(d)){const p=f(d,c);return p===void 0?d:p}else{if(gh(d))return xte(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=s,i}var U_e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Q_e=(e=21)=>{let t="",r=e;for(;r--;)t+=U_e[Math.random()*64|0];return t},H_e=Symbol.for("rtk-slice-createasyncthunk");function V_e(e,t){return`${e}/${t}`}function z_e({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[H_e];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Lc(11));const o=(typeof a.reducers=="function"?a.reducers(G_e()):a.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,k){const I=typeof j=="string"?j:j.type;if(!I)throw new Error(Lc(12));if(I in u.sliceCaseReducersByType)throw new Error(Lc(13));return u.sliceCaseReducersByType[I]=k,d},addMatcher(j,k){return u.sliceMatchers.push({matcher:j,reducer:k}),d},exposeAction(j,k){return u.actionCreators[j]=k,d},exposeCaseReducer(j,k){return u.sliceCaseReducersByName[j]=k,d}};c.forEach(j=>{const k=o[j],I={reducerName:j,type:V_e(s,j),createNotation:typeof a.reducers=="function"};q_e(k)?X_e(I,k,d,t):K_e(I,k,d)});function f(){const[j={},k=[],I=void 0]=typeof a.extraReducers=="function"?yte(a.extraReducers):[a.extraReducers],E={...j,...u.sliceCaseReducersByType};return M_e(a.initialState,N=>{for(let B in E)N.addCase(B,E[B]);for(let B of u.sliceMatchers)N.addMatcher(B.matcher,B.reducer);for(let B of k)N.addMatcher(B.matcher,B.reducer);I&&N.addDefaultCase(I)})}const h=j=>j,p=new Map,g=new WeakMap;let x;function b(j,k){return x||(x=f()),x(j,k)}function y(){return x||(x=f()),x.getInitialState()}function w(j,k=!1){function I(N){let B=N[j];return typeof B>"u"&&k&&(B=TC(g,I,y)),B}function E(N=h){const B=TC(p,k,()=>new WeakMap);return TC(B,N,()=>{const R={};for(const[P,D]of Object.entries(a.selectors??{}))R[P]=$_e(D,N,()=>TC(g,N,y),k);return R})}return{reducerPath:j,getSelectors:E,get selectors(){return E(I)},selectSlice:I}}const _={name:s,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...w(i),injectInto(j,{reducerPath:k,...I}={}){const E=k??i;return j.inject({reducerPath:E,reducer:b},I),{..._,...w(E,!0)}}};return _}}function $_e(e,t,r,n){function a(s,...i){let o=t(s);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return a.unwrapped=e,a}var Gc=z_e();function G_e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function K_e({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!W_e(n))throw new Error(Lc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?Uu(e,i):Uu(e))}function q_e(e){return e._reducerDefinitionType==="asyncThunk"}function W_e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function X_e({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Lc(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||jC,pending:o||jC,rejected:c||jC,settled:u||jC})}function jC(){}var Y_e="task",wte="listener",Ete="completed",XP="cancelled",J_e=`task-${XP}`,Z_e=`task-${Ete}`,eF=`${wte}-${XP}`,e5e=`${wte}-${Ete}`,j4=class{constructor(e){oT(this,"name","TaskAbortError");oT(this,"message");this.code=e,this.message=`${Y_e} ${XP} (reason: ${e})`}},YP=(e,t)=>{if(typeof e!="function")throw new TypeError(Lc(32))},fN=()=>{},Cte=(e,t=fN)=>(e.catch(t),e),_te=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),zp=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},$p=e=>{if(e.aborted){const{reason:t}=e;throw new j4(t)}};function Nte(e,t){let r=fN;return new Promise((n,a)=>{const s=()=>a(new j4(e.reason));if(e.aborted){s();return}r=_te(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=fN})}var t5e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof j4?"cancelled":"rejected",error:r}}finally{t==null||t()}},hN=e=>t=>Cte(Nte(e,t).then(r=>($p(e),r))),Ste=e=>{const t=hN(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:yv}=Object,mV={},I4="listenerMiddleware",r5e=(e,t)=>{const r=n=>_te(e,()=>zp(n,e.reason));return(n,a)=>{YP(n);const s=new AbortController;r(s);const i=t5e(async()=>{$p(e),$p(s.signal);const o=await n({pause:hN(s.signal),delay:Ste(s.signal),signal:s.signal});return $p(s.signal),o},()=>zp(s,Z_e));return a!=null&&a.autoJoin&&t.push(i.catch(fN)),{result:hN(e)(i),cancel(){zp(s,J_e)}}}},n5e=(e,t)=>{const r=async(n,a)=>{$p(t);let s=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Nte(t,Promise.race(o));return $p(t),c}finally{s()}};return(n,a)=>Cte(r(n,a))},kte=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Uu(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Lc(21));return YP(s),{predicate:a,type:t,effect:s}},Bte=yv(e=>{const{type:t,predicate:r,effect:n}=kte(e);return{id:Q_e(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Lc(22))}}},{withTypes:()=>Bte}),pV=(e,t)=>{const{type:r,effect:n,predicate:a}=kte(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},tF=e=>{e.pending.forEach(t=>{zp(t,eF)})},a5e=e=>()=>{e.forEach(tF),e.clear()},gV=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},Tte=yv(Uu(`${I4}/add`),{withTypes:()=>Tte}),s5e=Uu(`${I4}/removeAll`),jte=yv(Uu(`${I4}/remove`),{withTypes:()=>jte}),i5e=(...e)=>{console.error(`${I4}/error`,...e)},L2=(e={})=>{const t=new Map,{extra:r,onError:n=i5e}=e;YP(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&tF(d)}),s=d=>{const f=pV(t,d)??Bte(d);return a(f)};yv(s,{withTypes:()=>s});const i=d=>{const f=pV(t,d);return f&&(f.unsubscribe(),d.cancelActive&&tF(f)),!!f};yv(i,{withTypes:()=>i});const o=async(d,f,h,p)=>{const g=new AbortController,x=n5e(s,g.signal),b=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,yv({},h,{getOriginalState:p,condition:(y,w)=>x(y,w).then(Boolean),take:x,delay:Ste(g.signal),pause:hN(g.signal),extra:r,signal:g.signal,fork:r5e(g.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,w,_)=>{y!==g&&(zp(y,eF),_.delete(y))})},cancel:()=>{zp(g,eF),d.pending.delete(g)},throwIfCancelled:()=>{$p(g.signal)}})))}catch(y){y instanceof j4||gV(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),zp(g,e5e),d.pending.delete(g)}},c=a5e(t);return{middleware:d=>f=>h=>{if(!dte(h))return f(h);if(Tte.match(h))return s(h.payload);if(s5e.match(h)){c();return}if(jte.match(h))return i(h.payload);let p=d.getState();const g=()=>{if(p===mV)throw new Error(Lc(23));return p};let x;try{if(x=f(h),t.size>0){const b=d.getState(),y=Array.from(t.values());for(const w of y){let _=!1;try{_=w.predicate(h,b,p)}catch(j){_=!1,gV(n,j,{raisedBy:"predicate"})}_&&o(w,h,d,g)}}}finally{p=mV}return x},startListening:s,stopListening:i,clearListeners:c}};function Lc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var o5e={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Ite=Gc({name:"chartLayout",initialState:o5e,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:l5e,setLayout:c5e,setChartSize:u5e,setScale:d5e}=Ite.actions,A5e=Ite.reducer;function xV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xV(Object(r),!0).forEach(function(n){f5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function f5e(e,t,r){return(t=h5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h5e(e){var t=m5e(e,"string");return typeof t=="symbol"?t:t+""}function m5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mN=Math.PI/180,p5e=e=>e*180/Math.PI,Zn=(e,t,r,n)=>({x:e+Math.cos(-mN*n)*r,y:t+Math.sin(-mN*n)*r}),Fte=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},g5e=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},x5e=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=g5e({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,c=Math.acos(o);return n>s&&(c=2*Math.PI-c),{radius:i,angle:p5e(c),angleInRadian:c}},v5e=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},b5e=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},y5e=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=x5e({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o||a===0)return null;var{startAngle:c,endAngle:u}=v5e(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?vV(vV({},t),{},{radius:a,angle:b5e(d,t)}):null},Ote=e=>!S.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Dte(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function bV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ku(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bV(Object(r),!0).forEach(function(n){w5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w5e(e,t,r){return(t=E5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E5e(e){var t=C5e(e,"string");return typeof t=="symbol"?t:t+""}function C5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pa(e,t,r){return ks(e)||ks(t)?r:tf(t)?bm(e,t,r):typeof t=="function"?t(e):r}var _5e=(e,t,r,n,a)=>{var s,i=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(Wi(d-u)!==Wi(f-d)){var p=[];if(Wi(f-d)===Wi(a[1]-a[0])){h=f;var g=d+a[1]-a[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{h=u;var x=f+a[1]-a[0];p[0]=Math.min(d,(x+d)/2),p[1]=Math.max(d,(x+d)/2)}var b=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:i}=r[c]);break}}else{var y=Math.min(u,f),w=Math.max(u,f);if(e>(y+d)/2&&e<=(w+d)/2){({index:i}=r[c]);break}}}else if(t){for(var _=0;_<o;_++)if(_===0&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_>0&&_<o-1&&e>(t[_].coordinate+t[_-1].coordinate)/2&&e<=(t[_].coordinate+t[_+1].coordinate)/2||_===o-1&&e>(t[_].coordinate+t[_-1].coordinate)/2){({index:i}=t[_]);break}}return i},N5e=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&s!=="center"&&ur(e[s]))return ku(ku({},e),{},{[s]:e[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&i!=="middle"&&ur(e[i]))return ku(ku({},e),{},{[i]:e[i]+(a||0)})}return e},Dm=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Pte=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,s,i=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(s=!0),o.coordinate));return a||i.push(t),s||i.push(r),i},Rte=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!i)return null;var g=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,x=a==="category"&&i.bandwidth?i.bandwidth()/g:0;if(x=p==="angleAxis"&&s&&s.length>=2?Wi(s[0]-s[1])*2*x:x,f||h){var b=(f||h||[]).map((y,w)=>{var _=n?n.indexOf(y):y;return{coordinate:i(_)+x,value:y,offset:x,index:w}});return b.filter(y=>!Uc(y.coordinate))}return c&&u?u.map((y,w)=>({coordinate:i(y)+x,value:y,index:w,offset:x})):i.ticks&&d!=null?i.ticks(d).map((y,w)=>({coordinate:i(y)+x,value:y,offset:x,index:w})):i.domain().map((y,w)=>({coordinate:i(y)+x,value:n?n[y]:y,index:w,offset:x}))},yV=1e-4,S5e=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-yV,s=Math.max(n[0],n[1])+yV,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},k5e=(e,t)=>{if(!t||t.length!==2||!ur(t[0])||!ur(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!ur(e[0])||e[0]<r)&&(a[0]=r),(!ur(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},B5e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=Uc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},T5e=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=Uc(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},j5e={sign:B5e,expand:lCe,none:qv,silhouette:cCe,wiggle:uCe,positive:T5e},I5e=(e,t,r)=>{var n=j5e[r],a=oCe().keys(t).value((s,i)=>+Pa(s,i,0)).order($6).offset(n);return a(e)};function F5e(e){return e==null?void 0:String(e)}var wV=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var o=Pa(s,t.dataKey,t.scale.domain()[i]);return ks(o)?null:t.scale(o)-a/2+n},O5e=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},D5e=e=>{var t=e.flat(2).filter(ur);return[Math.min(...t),Math.max(...t)]},P5e=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],R5e=(e,t,r)=>{if(e!=null)return P5e(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((c,u)=>{var d=Dte(u,t,r),f=D5e(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},EV=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,CV=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Pw=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=N4(t,d=>d.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var c=a[i],u=a[i-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function _V(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return ku(ku({},t),{},{dataKey:r,payload:n,value:a,name:s})}function L1(e,t){if(e)return String(e);if(typeof t=="string")return t}function L5e(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?y5e({x:e,y:t},n):null}var M5e=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return ku(ku(ku({},n),Zn(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:c}=n;return ku(ku(ku({},n),Zn(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},U5e=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,jh=e=>e.layout.width,Ih=e=>e.layout.height,Q5e=e=>e.layout.scale,Lte=e=>e.layout.margin,JP=ut(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ZP=ut(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Mte="data-recharts-item-index",Ute="data-recharts-item-data-key",F4=60;function NV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function y0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NV(Object(r),!0).forEach(function(n){H5e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H5e(e,t,r){return(t=V5e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V5e(e){var t=z5e(e,"string");return typeof t=="symbol"?t:t+""}function z5e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $5e=e=>e.brush.height,ki=ut([jh,Ih,Lte,$5e,JP,ZP,ote,A_e],(e,t,r,n,a,s,i,o)=>{var c=s.reduce((g,x)=>{var{orientation:b}=x;if(!x.mirror&&!x.hide){var y=typeof x.width=="number"?x.width:F4;return y0(y0({},g),{},{[b]:g[b]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,x)=>{var{orientation:b}=x;return!x.mirror&&!x.hide?y0(y0({},g),{},{[b]:bm(g,"".concat(b))+x.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=y0(y0({},u),c),f=d.bottom;d.bottom+=n,d=N5e(d,i,o);var h=e-d.left-d.right,p=t-d.top-d.bottom;return y0(y0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(p,0)})}),G5e=ut(ki,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Qte=ut(jh,Ih,(e,t)=>({x:0,y:0,width:e,height:t})),K5e=S.createContext(null),ac=()=>S.useContext(K5e)!=null,O4=e=>e.brush,D4=ut([O4,ki,Lte],(e,t,r)=>({height:e.height,x:ur(e.x)?e.x:t.left,y:ur(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ur(e.width)?e.width:t.width})),eR=()=>{var e,t=ac(),r=ir(G5e),n=ir(D4),a=(e=ir(O4))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},q5e={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Hte=()=>{var e;return(e=ir(ki))!==null&&e!==void 0?e:q5e},tR=()=>ir(jh),rR=()=>ir(Ih),W5e={top:0,right:0,bottom:0,left:0},X5e=()=>{var e;return(e=ir(t=>t.layout.margin))!==null&&e!==void 0?e:W5e},jn=e=>e.layout.layoutType,nR=()=>ir(jn),Y5e={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Vte=Gc({name:"legend",initialState:Y5e,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=sh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:SV,setLegendSettings:J5e,addLegendPayload:zte,removeLegendPayload:$te}=Vte.actions,Z5e=Vte.reducer,eNe=["contextPayload"];function rF(){return rF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rF.apply(null,arguments)}function kV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kV(Object(r),!0).forEach(function(n){aR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aR(e,t,r){return(t=tNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tNe(e){var t=rNe(e,"string");return typeof t=="symbol"?t:t+""}function rNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nNe(e,t){if(e==null)return{};var r,n,a=aNe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function sNe(e){return e.value}function iNe(e){var{contextPayload:t}=e,r=nNe(e,eNe),n=rte(t,e.payloadUniqBy,sNe),a=Xv(Xv({},r),{},{payload:n});return S.isValidElement(e.content)?S.cloneElement(e.content,a):typeof e.content=="function"?S.createElement(e.content,a):S.createElement(MP,a)}function oNe(e,t,r,n,a,s){var{layout:i,align:o,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Xv(Xv({},u),d)}function lNe(e){var t=$a();return S.useEffect(()=>{t(J5e(e))},[t,e]),null}function cNe(e){var t=$a();return S.useEffect(()=>(t(SV(e)),()=>{t(SV({width:0,height:0}))}),[t,e]),null}function uNe(e){var t=m_e(),r=jEe(),n=X5e(),{width:a,height:s,wrapperStyle:i,portal:o}=e,[c,u]=lte([t]),d=tR(),f=rR(),h=d-(n.left||0)-(n.right||0),p=M2.getWidthOrHeight(e.layout,s,a,h),g=o?i:Xv(Xv({position:"absolute",width:(p==null?void 0:p.width)||a||"auto",height:(p==null?void 0:p.height)||s||"auto"},oNe(i,e,n,d,f,c)),i),x=o??r;if(x==null)return null;var b=S.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},S.createElement(lNe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),S.createElement(cNe,{width:c.width,height:c.height}),S.createElement(iNe,rF({},e,p,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return FP.createPortal(b,x)}class M2 extends S.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&ur(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return S.createElement(uNe,this.props)}}aR(M2,"displayName","Legend");aR(M2,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function nF(){return nF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nF.apply(null,arguments)}function BV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Rj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BV(Object(r),!0).forEach(function(n){dNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dNe(e,t,r){return(t=ANe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ANe(e){var t=fNe(e,"string");return typeof t=="symbol"?t:t+""}function fNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hNe(e){return Array.isArray(e)&&tf(e[0])&&tf(e[1])?e.join(" ~ "):e}var mNe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(s&&s.length){var k={padding:0,margin:0},I=(o?N4(s,o):s).map((E,N)=>{if(E.type==="none")return null;var B=E.formatter||i||hNe,{value:R,name:P}=E,D=R,L=P;if(B){var M=B(R,P,E,N,s);if(Array.isArray(M))[D,L]=M;else if(M!=null)D=M;else return null}var J=Rj({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return S.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(N),style:J},tf(L)?S.createElement("span",{className:"recharts-tooltip-item-name"},L):null,tf(L)?S.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,S.createElement("span",{className:"recharts-tooltip-item-value"},D),S.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return S.createElement("ul",{className:"recharts-tooltip-item-list",style:k},I)}return null},g=Rj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=Rj({margin:0},a),b=!ks(d),y=b?d:"",w=gn("recharts-default-tooltip",c),_=gn("recharts-tooltip-label",u);b&&f&&s!==void 0&&s!==null&&(y=f(d,s));var j=h?{role:"status","aria-live":"assertive"}:{};return S.createElement("div",nF({className:w,style:g},j),S.createElement("p",{className:_,style:x},S.isValidElement(y)?y:"".concat(y)),p())},Kb="recharts-tooltip-wrapper",pNe={visibility:"hidden"};function gNe(e){var{coordinate:t,translateX:r,translateY:n}=e;return gn(Kb,{["".concat(Kb,"-right")]:ur(r)&&t&&ur(t.x)&&r>=t.x,["".concat(Kb,"-left")]:ur(r)&&t&&ur(t.x)&&r<t.x,["".concat(Kb,"-bottom")]:ur(n)&&t&&ur(t.y)&&n>=t.y,["".concat(Kb,"-top")]:ur(n)&&t&&ur(t.y)&&n<t.y})}function TV(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(s&&ur(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var p=d,g=h;return p<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+o,b=h+u;return x>b?Math.max(d,h):Math.max(f,h)}function xNe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function vNe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:o,viewBox:c}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=TV({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=TV({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=xNe({translateX:d,translateY:f,useTranslate3d:o})):u=pNe,{cssProperties:u,cssClasses:gNe({translateX:d,translateY:f,coordinate:r})}}function jV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jV(Object(r),!0).forEach(function(n){aF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aF(e,t,r){return(t=bNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bNe(e){var t=yNe(e,"string");return typeof t=="symbol"?t:t+""}function yNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class wNe extends S.PureComponent{constructor(){super(...arguments),aF(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),aF(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:g,lastBoundingBox:x,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:w,cssProperties:_}=vNe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:p}),j=y?{}:IC(IC({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},_),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),k=IC(IC({},j),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return S.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:w,style:k,ref:b},s)}}var ENe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ig={isSsr:ENe()},Gte=()=>ir(e=>e.rootProps.accessibilityLayer);function Vc(e){return Number.isFinite(e)}function Yv(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function sF(){return sF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sF.apply(null,arguments)}function IV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FV(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IV(Object(r),!0).forEach(function(n){CNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CNe(e,t,r){return(t=_Ne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Ne(e){var t=NNe(e,"string");return typeof t=="symbol"?t:t+""}function NNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OV={curveBasisClosed:XEe,curveBasisOpen:YEe,curveBasis:WEe,curveBumpX:DEe,curveBumpY:PEe,curveLinearClosed:JEe,curveLinear:E4,curveMonotoneX:ZEe,curveMonotoneY:eCe,curveNatural:tCe,curveStep:rCe,curveStepAfter:aCe,curveStepBefore:nCe},FC=e=>Vc(e.x)&&Vc(e.y),qb=e=>e.x,Wb=e=>e.y,SNe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(P2(e));return(r==="curveMonotone"||r==="curveBump")&&t?OV["".concat(r).concat(t==="vertical"?"Y":"X")]:OV[r]||E4},kNe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=SNe(t,a),o=s?r.filter(FC):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>FC(f)):n,d=o.map((f,h)=>FV(FV({},f),{},{base:u[h]}));return a==="vertical"?c=SC().y(Wb).x1(qb).x0(f=>f.base.x):c=SC().x(qb).y1(Wb).y0(f=>f.base.y),c.defined(FC).curve(i),c(d)}return a==="vertical"&&ur(n)?c=SC().y(Wb).x1(qb).x0(n):ur(n)?c=SC().x(qb).y1(Wb).y0(n):c=Mee().x(qb).y(Wb),c.defined(FC).curve(i),c(o)},Kte=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?kNe(e):n;return S.createElement("path",sF({},il(e),jP(e),{className:gn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},BNe=["x","y","top","left","width","height","className"];function iF(){return iF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iF.apply(null,arguments)}function DV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TNe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DV(Object(r),!0).forEach(function(n){jNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jNe(e,t,r){return(t=INe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function INe(e){var t=FNe(e,"string");return typeof t=="symbol"?t:t+""}function FNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ONe(e,t){if(e==null)return{};var r,n,a=DNe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function DNe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var PNe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),RNe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=e,c=ONe(e,BNe),u=TNe({x:t,y:r,top:n,left:a,width:s,height:i},c);return!ur(t)||!ur(r)||!ur(s)||!ur(i)||!ur(n)||!ur(a)?null:S.createElement("path",iF({},Wn(u,!0),{className:gn("recharts-cross",o),d:PNe(t,r,s,i,n,a)}))};function LNe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function PV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MNe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PV(Object(r),!0).forEach(function(n){UNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UNe(e,t,r){return(t=QNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QNe(e){var t=HNe(e,"string");return typeof t=="symbol"?t:t+""}function HNe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zu(e,t){var r=MNe({},e),n=t,a=Object.keys(t),s=a.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return s}var Lj={},Mj={},Uj={},RV;function VNe(){return RV||(RV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(Uj)),Uj}var LV;function zNe(){return LV||(LV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=VNe(),r=Zee(),n=VP(),a=zP(),s=QP();function i(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,h,p,g,x){const b=x(u,d,f,h,p,g);if(b!==void 0)return b;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,x)}return c(u,d,g,x)}function c(u,d,f,h){if(Object.is(u,d))return!0;let p=n.getTag(u),g=n.getTag(d);if(p===a.argumentsTag&&(p=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),p!==g)return!1;switch(p){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),w=d.valueOf();return s.eq(y,w)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const x=f.get(u),b=f.get(d);if(x!=null&&b!=null)return x===d;f.set(u,d),f.set(d,u);try{switch(p){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,w]of u.entries())if(!d.has(y)||!o(w,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),w=Array.from(d.values());for(let _=0;_<y.length;_++){const j=y[_],k=w.findIndex(I=>o(j,I,void 0,u,d,f,h));if(k===-1)return!1;w.splice(k,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const w=[...Object.keys(u),...r.getSymbols(u)],_=[...Object.keys(d),...r.getSymbols(d)];if(w.length!==_.length)return!1;for(let j=0;j<w.length;j++){const k=w[j],I=u[k];if(!Object.hasOwn(d,k))return!1;const E=d[k];if(!o(I,E,k,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=i}(Mj)),Mj}var Qj={},MV;function $Ne(){return MV||(MV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(Qj)),Qj}var UV;function GNe(){return UV||(UV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zNe(),r=$Ne();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(Lj)),Lj}var Hj,QV;function KNe(){return QV||(QV=1,Hj=GNe().isEqual),Hj}var qNe=KNe();const WNe=Cl(qNe);var pN=1e-4,qte=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Wte=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),HV=(e,t)=>r=>{var n=qte(e,t);return Wte(n,r)},XNe=(e,t)=>r=>{var n=qte(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return Wte(a,r)},VV=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else i.length===4&&([t,n,r,a]=i);var u=HV(t,r),d=HV(n,a),f=XNe(t,r),h=g=>g>1?1:g<0?0:g,p=g=>{for(var x=g>1?1:g,b=x,y=0;y<8;++y){var w=u(b)-x,_=f(b);if(Math.abs(w-x)<pN||_<pN)return d(b);b=h(b-w/_)}return d(b)};return p.isStepper=!1,p},YNe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,o,c)=>{var u=-(i-o)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-o)<pN&&Math.abs(f)<pN?[o,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},Xte=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return VV(e);case"spring":return YNe();default:if(e.split("(")[0]==="cubic-bezier")return VV(e)}return typeof e=="function"?e:null};function zV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function $V(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zV(Object(r),!0).forEach(function(n){JNe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JNe(e,t,r){return(t=ZNe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZNe(e){var t=eSe(e,"string");return typeof t=="symbol"?t:t+""}function eSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tSe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),rSe=(e,t,r)=>e.map(n=>"".concat(tSe(n)," ").concat(t,"ms ").concat(r)).join(","),nSe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Rw=(e,t)=>Object.keys(t).reduce((r,n)=>$V($V({},r),{},{[n]:e(n,t[n])}),{});function GV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function po(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GV(Object(r),!0).forEach(function(n){aSe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aSe(e,t,r){return(t=sSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sSe(e){var t=iSe(e,"string");return typeof t=="symbol"?t:t+""}function iSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gN=(e,t,r)=>e+(t-e)*r,oF=e=>{var{from:t,to:r}=e;return t!==r},Yte=(e,t,r)=>{var n=Rw((a,s)=>{if(oF(s)){var[i,o]=e(s.from,s.to,s.velocity);return po(po({},s),{},{from:i,velocity:o})}return s},t);return r<1?Rw((a,s)=>oF(s)?po(po({},s),{},{velocity:gN(s.velocity,n[a].velocity,r),from:gN(s.from,n[a].from,r)}):s,t):Yte(e,n,r-1)};function oSe(e,t,r,n,a,s){var i,o=n.reduce((h,p)=>po(po({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>Rw((h,p)=>p.from,o),u=()=>!Object.values(o).filter(oF).length,d=null,f=h=>{i||(i=h);var p=h-i,g=p/r.dt;o=Yte(r,o,g),a(po(po(po({},e),t),c())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function lSe(e,t,r,n,a,s,i){var o=null,c=a.reduce((f,h)=>po(po({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,p=Rw((x,b)=>gN(...b,r(h)),c);if(s(po(po(po({},e),t),p)),h<1)o=i.setTimeout(d);else{var g=Rw((x,b)=>gN(...b,r(1)),c);s(po(po(po({},e),t),g))}};return()=>(o=i.setTimeout(d),()=>{o()})}const Jte=(e,t,r,n,a,s)=>{var i=nSe(e,t);return r.isStepper===!0?oSe(e,t,r,i,a,s):lSe(e,t,r,n,i,a,s)};function cSe(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[c,...u]=o;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class uSe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function dSe(){return cSe(new uSe)}var ASe=S.createContext(dSe);function Zte(e,t){var r=S.useContext(ASe);return S.useMemo(()=>t??r(e),[e,t,r])}var fSe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function lF(){return lF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lF.apply(null,arguments)}function hSe(e,t){if(e==null)return{};var r,n,a=mSe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function mSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function KV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KV(Object(r),!0).forEach(function(n){Ip(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KV(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ip(e,t,r){return(t=pSe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pSe(e){var t=gSe(e,"string");return typeof t=="symbol"?t:t+""}function gSe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class sR extends S.PureComponent{constructor(t,r){super(t,r),Ip(this,"mounted",!1),Ip(this,"manager",void 0),Ip(this,"stopJSAnimation",null),Ip(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:o,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:i});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:o}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&c&&(a&&c[a]!==i||!a&&c!==i)&&this.setState(u);return}if(!(WNe(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(w0(w0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c}=t,u=Jte(r,n,Xte(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,i,d,a,o])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:o,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=rSe(Object.keys(d),n,i);this.manager.start([o,r,w0(w0({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:o,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:p,animationManager:g}=t,x=hSe(t,fSe),b=S.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!o||b===0||a<=0)return r;var w=_=>{var{style:j={},className:k}=_.props,I=S.cloneElement(_,w0(w0({},x),{},{style:w0(w0({},j),y),className:k}));return I};return b===1?w(S.Children.only(r)):S.createElement("div",null,S.Children.map(r,_=>w(_)))}}Ip(sR,"displayName","Animate");Ip(sR,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function xN(e){var t,r=Zte((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return S.createElement(sR,lF({},e,{animationManager:r}))}function vN(){return vN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vN.apply(null,arguments)}var qV=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var p=Math.min(s,a);u="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+r-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*p,`
            L `).concat(e+r,",").concat(t+n-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-o*p,",").concat(t+n,`
            L `).concat(e+o*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},xSe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ere=e=>{var t=zu(e,xSe),r=S.useRef(null),[n,a]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:x}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||o===0||c===0)return null;var b=gn("recharts-rectangle",d);return x?S.createElement(xN,{canBegin:n>0,from:{width:o,height:c,x:s,y:i},to:{width:o,height:c,x:s,y:i},duration:h,animationEasing:f,isActive:x},y=>{var{width:w,height:_,x:j,y:k}=y;return S.createElement(xN,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:g,easing:f},S.createElement("path",vN({},Wn(t,!0),{className:b,d:qV(j,k,w,_,u),ref:r})))}):S.createElement("path",vN({},Wn(t,!0),{className:b,d:qV(s,i,o,c,u)}))};function tre(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=Zn(t,r,n,a),o=Zn(t,r,n,s);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function cF(){return cF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cF.apply(null,arguments)}var vSe=(e,t)=>{var r=Wi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},OC=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:c}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/mN,f=c?a:a+s*d,h=Zn(t,r,u,f),p=Zn(t,r,n,f),g=c?a-s*d:a,x=Zn(t,r,u*Math.cos(d*mN),g);return{center:h,circleTangency:p,lineTangency:x,theta:d}},rre=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=vSe(s,i),c=s+o,u=Zn(t,r,a,s),d=Zn(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=Zn(t,r,n,s),p=Zn(t,r,n,c);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},bSe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=Wi(u-c),{circleTangency:f,lineTangency:h,theta:p}=OC({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:g,lineTangency:x,theta:b}=OC({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(c-u):Math.abs(c-u)-p-b;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):rre({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var w="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(x.x,",").concat(x.y,`
  `);if(n>0){var{circleTangency:_,lineTangency:j,theta:k}=OC({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:I,lineTangency:E,theta:N}=OC({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),B=o?Math.abs(c-u):Math.abs(c-u)-k-N;if(B<0&&s===0)return"".concat(w,"L").concat(t,",").concat(r,"Z");w+="L".concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(I.x,",").concat(I.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(B>180),",").concat(+(d>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"Z")}else w+="L".concat(t,",").concat(r,"Z");return w},ySe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},nre=e=>{var t=zu(e,ySe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=gn("recharts-sector",f),p=s-a,g=wl(i,p,0,!0),x;return g>0&&Math.abs(u-d)<360?x=bSe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):x=rre({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),S.createElement("path",cF({},Wn(t,!0),{className:h,d:x}))};function wSe(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=Zn(o,c,u,f),p=Zn(o,c,d,f);n=h.x,a=h.y,s=p.x,i=p.y}else return tre(t);return[{x:n,y:a},{x:s,y:i}]}var Vj={},zj={},$j={},WV;function ESe(){return WV||(WV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ste();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}($j)),$j}var XV;function CSe(){return XV||(XV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ESe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(zj)),zj}var YV;function _Se(){return YV||(YV=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ite(),r=CSe();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=a,a+=i;return c}e.range=n}(Vj)),Vj}var Gj,JV;function NSe(){return JV||(JV=1,Gj=_Se().range),Gj}var SSe=NSe();const are=Cl(SSe);function am(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kSe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function iR(e){let t,r,n;e.length!==2?(t=am,r=(o,c)=>am(e(o),c),n=(o,c)=>e(o)-c):(t=e===am||e===kSe?e:BSe,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:i,right:s}}function BSe(){return 0}function sre(e){return e===null?NaN:+e}function*TSe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const jSe=iR(am),U2=jSe.right;iR(sre).center;class ZV extends Map{constructor(t,r=OSe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(ez(this,t))}has(t){return super.has(ez(this,t))}set(t,r){return super.set(ISe(this,t),r)}delete(t){return super.delete(FSe(this,t))}}function ez({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function ISe({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function FSe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function OSe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function DSe(e=am){if(e===am)return ire;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ire(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const PSe=Math.sqrt(50),RSe=Math.sqrt(10),LSe=Math.sqrt(2);function bN(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=PSe?10:s>=RSe?5:s>=LSe?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/i,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*i,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?bN(e,t,r*2):[o,c,u]}function uF(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?bN(t,e,r):bN(e,t,r);if(!(s>=a))return[];const o=s-a+1,c=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)c[u]=(s-u)/-i;else for(let u=0;u<o;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<o;++u)c[u]=(a+u)/-i;else for(let u=0;u<o;++u)c[u]=(a+u)*i;return c}function dF(e,t,r){return t=+t,e=+e,r=+r,bN(e,t,r)[2]}function AF(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?dF(t,e,r):dF(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function tz(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function rz(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function ore(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?ire:DSe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));ore(e,t,p,g,a)}const s=e[t];let i=r,o=n;for(Xb(e,r,t),a(e[n],s)>0&&Xb(e,r,n);i<o;){for(Xb(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}a(e[r],s)===0?Xb(e,r,o):(++o,Xb(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function Xb(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function MSe(e,t,r){if(e=Float64Array.from(TSe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return rz(e);if(t>=1)return tz(e);var n,a=(n-1)*t,s=Math.floor(a),i=tz(ore(e,s).subarray(0,s+1)),o=rz(e.subarray(s+1));return i+(o-i)*(a-s)}}function USe(e,t,r=sre){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return i+(o-i)*(a-s)}}function QSe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function $u(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Fh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const fF=Symbol("implicit");function P4(){var e=new ZV,t=[],r=[],n=fF;function a(s){let i=e.get(s);if(i===void 0){if(n!==fF)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ZV;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return P4(t,r).unknown(n)},$u.apply(a,arguments),a}function oR(){var e=P4().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,g=p?a:n,x=p?n:a;s=(x-g)/Math.max(1,h-c+u*2),o&&(s=Math.floor(s)),g+=(x-g-s*(h-c))*d,i=s*(1-c),o&&(g=Math.round(g),i=Math.round(i));var b=QSe(h).map(function(y){return g+s*y});return r(p?b.reverse():b)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return oR(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},$u.apply(f(),arguments)}function lre(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return lre(t())},e}function HSe(){return lre(oR.apply(null,arguments).paddingInner(1))}function lR(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function cre(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Q2(){}var Lw=.7,yN=1/Lw,wv="\\s*([+-]?\\d+)\\s*",Mw="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",XA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VSe=/^#([0-9a-f]{3,8})$/,zSe=new RegExp(`^rgb\\(${wv},${wv},${wv}\\)$`),$Se=new RegExp(`^rgb\\(${XA},${XA},${XA}\\)$`),GSe=new RegExp(`^rgba\\(${wv},${wv},${wv},${Mw}\\)$`),KSe=new RegExp(`^rgba\\(${XA},${XA},${XA},${Mw}\\)$`),qSe=new RegExp(`^hsl\\(${Mw},${XA},${XA}\\)$`),WSe=new RegExp(`^hsla\\(${Mw},${XA},${XA},${Mw}\\)$`),nz={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lR(Q2,fg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:az,formatHex:az,formatHex8:XSe,formatHsl:YSe,formatRgb:sz,toString:sz});function az(){return this.rgb().formatHex()}function XSe(){return this.rgb().formatHex8()}function YSe(){return ure(this).formatHsl()}function sz(){return this.rgb().formatRgb()}function fg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=VSe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?iz(t):r===3?new Xl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?DC(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?DC(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=zSe.exec(e))?new Xl(t[1],t[2],t[3],1):(t=$Se.exec(e))?new Xl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=GSe.exec(e))?DC(t[1],t[2],t[3],t[4]):(t=KSe.exec(e))?DC(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=qSe.exec(e))?cz(t[1],t[2]/100,t[3]/100,1):(t=WSe.exec(e))?cz(t[1],t[2]/100,t[3]/100,t[4]):nz.hasOwnProperty(e)?iz(nz[e]):e==="transparent"?new Xl(NaN,NaN,NaN,0):null}function iz(e){return new Xl(e>>16&255,e>>8&255,e&255,1)}function DC(e,t,r,n){return n<=0&&(e=t=r=NaN),new Xl(e,t,r,n)}function JSe(e){return e instanceof Q2||(e=fg(e)),e?(e=e.rgb(),new Xl(e.r,e.g,e.b,e.opacity)):new Xl}function hF(e,t,r,n){return arguments.length===1?JSe(e):new Xl(e,t,r,n??1)}function Xl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}lR(Xl,hF,cre(Q2,{brighter(e){return e=e==null?yN:Math.pow(yN,e),new Xl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Lw:Math.pow(Lw,e),new Xl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Xl(Gp(this.r),Gp(this.g),Gp(this.b),wN(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oz,formatHex:oz,formatHex8:ZSe,formatRgb:lz,toString:lz}));function oz(){return`#${Fp(this.r)}${Fp(this.g)}${Fp(this.b)}`}function ZSe(){return`#${Fp(this.r)}${Fp(this.g)}${Fp(this.b)}${Fp((isNaN(this.opacity)?1:this.opacity)*255)}`}function lz(){const e=wN(this.opacity);return`${e===1?"rgb(":"rgba("}${Gp(this.r)}, ${Gp(this.g)}, ${Gp(this.b)}${e===1?")":`, ${e})`}`}function wN(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Gp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fp(e){return e=Gp(e),(e<16?"0":"")+e.toString(16)}function cz(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Ed(e,t,r,n)}function ure(e){if(e instanceof Ed)return new Ed(e.h,e.s,e.l,e.opacity);if(e instanceof Q2||(e=fg(e)),!e)return new Ed;if(e instanceof Ed)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,c=(s+a)/2;return o?(t===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-t)/o+2:i=(t-r)/o+4,o/=c<.5?s+a:2-s-a,i*=60):o=c>0&&c<1?0:i,new Ed(i,o,c,e.opacity)}function e4e(e,t,r,n){return arguments.length===1?ure(e):new Ed(e,t,r,n??1)}function Ed(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}lR(Ed,e4e,cre(Q2,{brighter(e){return e=e==null?yN:Math.pow(yN,e),new Ed(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Lw:Math.pow(Lw,e),new Ed(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Xl(Kj(e>=240?e-240:e+120,a,n),Kj(e,a,n),Kj(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new Ed(uz(this.h),PC(this.s),PC(this.l),wN(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wN(this.opacity);return`${e===1?"hsl(":"hsla("}${uz(this.h)}, ${PC(this.s)*100}%, ${PC(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uz(e){return e=(e||0)%360,e<0?e+360:e}function PC(e){return Math.max(0,Math.min(1,e||0))}function Kj(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const cR=e=>()=>e;function t4e(e,t){return function(r){return e+r*t}}function r4e(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function n4e(e){return(e=+e)==1?dre:function(t,r){return r-t?r4e(t,r,e):cR(isNaN(t)?r:t)}}function dre(e,t){var r=t-e;return r?t4e(e,r):cR(isNaN(e)?t:e)}const EN=function e(t){var r=n4e(t);function n(a,s){var i=r((a=hF(a)).r,(s=hF(s)).r),o=r(a.g,s.g),c=r(a.b,s.b),u=dre(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function a4e(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function s4e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function i4e(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=M1(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(o){for(i=0;i<n;++i)s[i]=a[i](o);return s}}function o4e(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function yd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function l4e(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=M1(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var mF=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qj=new RegExp(mF.source,"g");function c4e(e){return function(){return e}}function u4e(e){return function(t){return e(t)+""}}function Are(e,t){var r=mF.lastIndex=qj.lastIndex=0,n,a,s,i=-1,o=[],c=[];for(e=e+"",t=t+"";(n=mF.exec(e))&&(a=qj.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,c.push({i,x:yd(n,a)})),r=qj.lastIndex;return r<t.length&&(s=t.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?c[0]?u4e(c[0].x):c4e(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function M1(e,t){var r=typeof t,n;return t==null||r==="boolean"?cR(t):(r==="number"?yd:r==="string"?(n=fg(t))?(t=n,EN):Are:t instanceof fg?EN:t instanceof Date?o4e:s4e(t)?a4e:Array.isArray(t)?i4e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?l4e:yd)(e,t)}function uR(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var dz=180/Math.PI,pF={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function fre(e,t,r,n,a,s){var i,o,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,c/=o),e*n<t*r&&(e=-e,t=-t,c=-c,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*dz,skewX:Math.atan(c)*dz,scaleX:i,scaleY:o}}var RC;function d4e(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?pF:fre(t.a,t.b,t.c,t.d,t.e,t.f)}function A4e(e){return e==null||(RC||(RC=document.createElementNS("http://www.w3.org/2000/svg","g")),RC.setAttribute("transform",e),!(e=RC.transform.baseVal.consolidate()))?pF:(e=e.matrix,fre(e.a,e.b,e.c,e.d,e.e,e.f))}function hre(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,g){if(u!==f||d!==h){var x=p.push("translate(",null,t,null,r);g.push({i:x-4,x:yd(u,f)},{i:x-2,x:yd(d,h)})}else(f||h)&&p.push("translate("+f+t+h+r)}function i(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:yd(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function o(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:yd(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,h,p,g){if(u!==f||d!==h){var x=p.push(a(p)+"scale(",null,",",null,")");g.push({i:x-4,x:yd(u,f)},{i:x-2,x:yd(d,h)})}else(f!==1||h!==1)&&p.push(a(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),i(u.rotate,d.rotate,f,h),o(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var g=-1,x=h.length,b;++g<x;)f[(b=h[g]).i]=b.x(p);return f.join("")}}}var f4e=hre(d4e,"px, ","px)","deg)"),h4e=hre(A4e,", ",")",")"),m4e=1e-12;function Az(e){return((e=Math.exp(e))+1/e)/2}function p4e(e){return((e=Math.exp(e))-1/e)/2}function g4e(e){return((e=Math.exp(2*e))-1)/(e+1)}const x4e=function e(t,r,n){function a(s,i){var o=s[0],c=s[1],u=s[2],d=i[0],f=i[1],h=i[2],p=d-o,g=f-c,x=p*p+g*g,b,y;if(x<m4e)y=Math.log(h/u)/t,b=function(E){return[o+E*p,c+E*g,u*Math.exp(t*E*y)]};else{var w=Math.sqrt(x),_=(h*h-u*u+n*x)/(2*u*r*w),j=(h*h-u*u-n*x)/(2*h*r*w),k=Math.log(Math.sqrt(_*_+1)-_),I=Math.log(Math.sqrt(j*j+1)-j);y=(I-k)/t,b=function(E){var N=E*y,B=Az(k),R=u/(r*w)*(B*g4e(t*N+k)-p4e(k));return[o+R*p,c+R*g,u*B/Az(t*N+k)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,c=o*o;return e(i,o,c)},a}(Math.SQRT2,2,4);function v4e(e,t){t===void 0&&(t=e,e=M1);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[o](i-o)}}function b4e(e){return function(){return e}}function CN(e){return+e}var fz=[0,1];function vl(e){return e}function gF(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:b4e(isNaN(t)?NaN:.5)}function y4e(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function w4e(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=gF(a,n),s=r(i,s)):(n=gF(n,a),s=r(s,i)),function(o){return s(n(o))}}function E4e(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=gF(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(o){var c=U2(e,o,1,n)-1;return s[c](a[c](o))}}function H2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function R4(){var e=fz,t=fz,r=M1,n,a,s,i=vl,o,c,u;function d(){var h=Math.min(e.length,t.length);return i!==vl&&(i=y4e(e[0],e[h-1])),o=h>2?E4e:w4e,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=o(t,e.map(n),yd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,CN),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=uR,d()},f.clamp=function(h){return arguments.length?(i=h?!0:vl,d()):i!==vl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return n=h,a=p,d()}}function dR(){return R4()(vl,vl)}function C4e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function _N(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Jv(e){return e=_N(Math.abs(e)),e?e[1]:NaN}function _4e(e,t){return function(r,n){for(var a=r.length,s=[],i=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),s.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[i=(i+1)%e.length];return s.reverse().join(t)}}function N4e(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var S4e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uw(e){if(!(t=S4e.exec(e)))throw new Error("invalid format: "+e);var t;return new AR({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Uw.prototype=AR.prototype;function AR(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}AR.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function k4e(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var mre;function B4e(e,t){var r=_N(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(mre=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+_N(e,Math.max(0,t+s-1))[0]}function hz(e,t){var r=_N(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const mz={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:C4e,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hz(e*100,t),r:hz,s:B4e,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pz(e){return e}var gz=Array.prototype.map,xz=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function T4e(e){var t=e.grouping===void 0||e.thousands===void 0?pz:_4e(gz.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?pz:N4e(gz.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Uw(f);var h=f.fill,p=f.align,g=f.sign,x=f.symbol,b=f.zero,y=f.width,w=f.comma,_=f.precision,j=f.trim,k=f.type;k==="n"?(w=!0,k="g"):mz[k]||(_===void 0&&(_=12),j=!0,k="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var I=x==="$"?r:x==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",E=x==="$"?n:/[%p]/.test(k)?i:"",N=mz[k],B=/[defgprs%]/.test(k);_=_===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function R(P){var D=I,L=E,M,J,H;if(k==="c")L=N(P)+L,P="";else{P=+P;var K=P<0||1/P<0;if(P=isNaN(P)?c:N(Math.abs(P),_),j&&(P=k4e(P)),K&&+P==0&&g!=="+"&&(K=!1),D=(K?g==="("?g:o:g==="-"||g==="("?"":g)+D,L=(k==="s"?xz[8+mre/3]:"")+L+(K&&g==="("?")":""),B){for(M=-1,J=P.length;++M<J;)if(H=P.charCodeAt(M),48>H||H>57){L=(H===46?a+P.slice(M+1):P.slice(M))+L,P=P.slice(0,M);break}}}w&&!b&&(P=t(P,1/0));var V=D.length+P.length+L.length,G=V<y?new Array(y-V+1).join(h):"";switch(w&&b&&(P=t(G+P,G.length?y-L.length:1/0),G=""),p){case"<":P=D+P+L+G;break;case"=":P=D+G+P+L;break;case"^":P=G.slice(0,V=G.length>>1)+D+P+L+G.slice(V);break;default:P=G+D+P+L;break}return s(P)}return R.toString=function(){return f+""},R}function d(f,h){var p=u((f=Uw(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Jv(h)/3)))*3,x=Math.pow(10,-g),b=xz[8+g/3];return function(y){return p(x*y)+b}}return{format:u,formatPrefix:d}}var LC,fR,pre;j4e({thousands:",",grouping:[3],currency:["$",""]});function j4e(e){return LC=T4e(e),fR=LC.format,pre=LC.formatPrefix,LC}function I4e(e){return Math.max(0,-Jv(Math.abs(e)))}function F4e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jv(t)/3)))*3-Jv(Math.abs(e)))}function O4e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jv(t)-Jv(e))+1}function gre(e,t,r,n){var a=AF(e,t,r),s;switch(n=Uw(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=F4e(a,i))&&(n.precision=s),pre(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=O4e(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=I4e(a))&&(n.precision=s-(n.type==="%")*2);break}}return fR(n)}function Pm(e){var t=e.domain;return e.ticks=function(r){var n=t();return uF(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return gre(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],o=n[s],c,u,d=10;for(o<i&&(u=i,i=o,o=u,u=a,a=s,s=u);d-- >0;){if(u=dF(i,o,r),u===c)return n[a]=i,n[s]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function xre(){var e=dR();return e.copy=function(){return H2(e,xre())},$u.apply(e,arguments),Pm(e)}function vre(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,CN),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return vre(e).unknown(t)},e=arguments.length?Array.from(e,CN):[0,1],Pm(r)}function bre(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function vz(e){return Math.log(e)}function bz(e){return Math.exp(e)}function D4e(e){return-Math.log(-e)}function P4e(e){return-Math.exp(-e)}function R4e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function L4e(e){return e===10?R4e:e===Math.E?Math.exp:t=>Math.pow(e,t)}function M4e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function yz(e){return(t,r)=>-e(-t,r)}function hR(e){const t=e(vz,bz),r=t.domain;let n=10,a,s;function i(){return a=M4e(n),s=L4e(n),r()[0]<0?(a=yz(a),s=yz(s),e(D4e,P4e)):e(vz,bz),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),g,x;const b=o==null?10:+o;let y=[];if(!(n%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<n;++g)if(x=h<0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/s(-h):g*s(h),!(x<u)){if(x>d)break;y.push(x)}y.length*2<b&&(y=uF(u,d,b))}else y=uF(h,p,Math.min(p-h,b)).map(s);return f?y.reverse():y},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Uw(c)).precision==null&&(c.trim=!0),c=fR(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(bre(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),t}function yre(){const e=hR(R4()).domain([1,10]);return e.copy=()=>H2(e,yre()).base(e.base()),$u.apply(e,arguments),e}function wz(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ez(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function mR(e){var t=1,r=e(wz(t),Ez(t));return r.constant=function(n){return arguments.length?e(wz(t=+n),Ez(t)):t},Pm(r)}function wre(){var e=mR(R4());return e.copy=function(){return H2(e,wre()).constant(e.constant())},$u.apply(e,arguments)}function Cz(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function U4e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Q4e(e){return e<0?-e*e:e*e}function pR(e){var t=e(vl,vl),r=1;function n(){return r===1?e(vl,vl):r===.5?e(U4e,Q4e):e(Cz(r),Cz(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Pm(t)}function gR(){var e=pR(R4());return e.copy=function(){return H2(e,gR()).exponent(e.exponent())},$u.apply(e,arguments),e}function H4e(){return gR.apply(null,arguments).exponent(.5)}function _z(e){return Math.sign(e)*e*e}function V4e(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Ere(){var e=dR(),t=[0,1],r=!1,n;function a(s){var i=V4e(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(_z(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,CN)).map(_z)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return Ere(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},$u.apply(a,arguments),Pm(a)}function Cre(){var e=[],t=[],r=[],n;function a(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=USe(e,i/o);return s}function s(i){return i==null||isNaN(i=+i)?n:t[U2(r,i)]}return s.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(am),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return Cre().domain(e).range(t).unknown(n)},$u.apply(s,arguments)}function _re(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[U2(n,c,0,r)]:s}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return _re().domain([e,t]).range(a).unknown(s)},$u.apply(Pm(i),arguments)}function Nre(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[U2(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Nre().domain(e).range(t).unknown(r)},$u.apply(a,arguments)}const Wj=new Date,Xj=new Date;function Bi(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),o=a.ceil(s);return s-i<o-s?i:o},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,o)=>{const c=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<i)||!(o>0))return c;let u;do c.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<i);return c},a.filter=s=>Bi(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!s(i););else for(;--o>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>(Wj.setTime(+s),Xj.setTime(+i),e(Wj),e(Xj),Math.floor(r(Wj,Xj))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const NN=Bi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);NN.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Bi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):NN);NN.range;const Jf=1e3,Iu=Jf*60,Zf=Iu*60,xh=Zf*24,xR=xh*7,Nz=xh*30,Yj=xh*365,Op=Bi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Jf)},(e,t)=>(t-e)/Jf,e=>e.getUTCSeconds());Op.range;const vR=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jf)},(e,t)=>{e.setTime(+e+t*Iu)},(e,t)=>(t-e)/Iu,e=>e.getMinutes());vR.range;const bR=Bi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Iu)},(e,t)=>(t-e)/Iu,e=>e.getUTCMinutes());bR.range;const yR=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Jf-e.getMinutes()*Iu)},(e,t)=>{e.setTime(+e+t*Zf)},(e,t)=>(t-e)/Zf,e=>e.getHours());yR.range;const wR=Bi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Zf)},(e,t)=>(t-e)/Zf,e=>e.getUTCHours());wR.range;const V2=Bi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Iu)/xh,e=>e.getDate()-1);V2.range;const L4=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xh,e=>e.getUTCDate()-1);L4.range;const Sre=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xh,e=>Math.floor(e/xh));Sre.range;function Fg(e){return Bi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Iu)/xR)}const M4=Fg(0),SN=Fg(1),z4e=Fg(2),$4e=Fg(3),Zv=Fg(4),G4e=Fg(5),K4e=Fg(6);M4.range;SN.range;z4e.range;$4e.range;Zv.range;G4e.range;K4e.range;function Og(e){return Bi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/xR)}const U4=Og(0),kN=Og(1),q4e=Og(2),W4e=Og(3),e1=Og(4),X4e=Og(5),Y4e=Og(6);U4.range;kN.range;q4e.range;W4e.range;e1.range;X4e.range;Y4e.range;const ER=Bi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());ER.range;const CR=Bi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());CR.range;const vh=Bi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());vh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});vh.range;const bh=Bi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());bh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});bh.range;function kre(e,t,r,n,a,s){const i=[[Op,1,Jf],[Op,5,5*Jf],[Op,15,15*Jf],[Op,30,30*Jf],[s,1,Iu],[s,5,5*Iu],[s,15,15*Iu],[s,30,30*Iu],[a,1,Zf],[a,3,3*Zf],[a,6,6*Zf],[a,12,12*Zf],[n,1,xh],[n,2,2*xh],[r,1,xR],[t,1,Nz],[t,3,3*Nz],[e,1,Yj]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,p=iR(([,,b])=>b).right(i,h);if(p===i.length)return e.every(AF(u/Yj,d/Yj,f));if(p===0)return NN.every(Math.max(AF(u,d,f),1));const[g,x]=i[h/i[p-1][2]<i[p][2]/h?p-1:p];return g.every(x)}return[o,c]}const[J4e,Z4e]=kre(bh,CR,U4,Sre,wR,bR),[eke,tke]=kre(vh,ER,M4,V2,yR,vR);function Jj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Zj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Yb(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function rke(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,c=e.shortMonths,u=Jb(a),d=Zb(a),f=Jb(s),h=Zb(s),p=Jb(i),g=Zb(i),x=Jb(o),b=Zb(o),y=Jb(c),w=Zb(c),_={a:K,A:V,b:G,B:X,c:null,d:Iz,e:Iz,f:_ke,g:Dke,G:Rke,H:wke,I:Eke,j:Cke,L:Bre,m:Nke,M:Ske,p:ee,q:F,Q:Dz,s:Pz,S:kke,u:Bke,U:Tke,V:jke,w:Ike,W:Fke,x:null,X:null,y:Oke,Y:Pke,Z:Lke,"%":Oz},j={a:z,A:Y,b:te,B:ae,c:null,d:Fz,e:Fz,f:Hke,g:Jke,G:eBe,H:Mke,I:Uke,j:Qke,L:jre,m:Vke,M:zke,p:le,q:ie,Q:Dz,s:Pz,S:$ke,u:Gke,U:Kke,V:qke,w:Wke,W:Xke,x:null,X:null,y:Yke,Y:Zke,Z:tBe,"%":Oz},k={a:R,A:P,b:D,B:L,c:M,d:Tz,e:Tz,f:xke,g:Bz,G:kz,H:jz,I:jz,j:hke,L:gke,m:fke,M:mke,p:B,q:Ake,Q:bke,s:yke,S:pke,u:oke,U:lke,V:cke,w:ike,W:uke,x:J,X:H,y:Bz,Y:kz,Z:dke,"%":vke};_.x=I(r,_),_.X=I(n,_),_.c=I(t,_),j.x=I(r,j),j.X=I(n,j),j.c=I(t,j);function I(ce,pe){return function(Be){var ne=[],_e=-1,De=0,Se=ce.length,fe,Ie,Ue;for(Be instanceof Date||(Be=new Date(+Be));++_e<Se;)ce.charCodeAt(_e)===37&&(ne.push(ce.slice(De,_e)),(Ie=Sz[fe=ce.charAt(++_e)])!=null?fe=ce.charAt(++_e):Ie=fe==="e"?" ":"0",(Ue=pe[fe])&&(fe=Ue(Be,Ie)),ne.push(fe),De=_e+1);return ne.push(ce.slice(De,_e)),ne.join("")}}function E(ce,pe){return function(Be){var ne=Yb(1900,void 0,1),_e=N(ne,ce,Be+="",0),De,Se;if(_e!=Be.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(pe&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(De=Zj(Yb(ne.y,0,1)),Se=De.getUTCDay(),De=Se>4||Se===0?kN.ceil(De):kN(De),De=L4.offset(De,(ne.V-1)*7),ne.y=De.getUTCFullYear(),ne.m=De.getUTCMonth(),ne.d=De.getUTCDate()+(ne.w+6)%7):(De=Jj(Yb(ne.y,0,1)),Se=De.getDay(),De=Se>4||Se===0?SN.ceil(De):SN(De),De=V2.offset(De,(ne.V-1)*7),ne.y=De.getFullYear(),ne.m=De.getMonth(),ne.d=De.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),Se="Z"in ne?Zj(Yb(ne.y,0,1)).getUTCDay():Jj(Yb(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(Se+5)%7:ne.w+ne.U*7-(Se+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,Zj(ne)):Jj(ne)}}function N(ce,pe,Be,ne){for(var _e=0,De=pe.length,Se=Be.length,fe,Ie;_e<De;){if(ne>=Se)return-1;if(fe=pe.charCodeAt(_e++),fe===37){if(fe=pe.charAt(_e++),Ie=k[fe in Sz?pe.charAt(_e++):fe],!Ie||(ne=Ie(ce,Be,ne))<0)return-1}else if(fe!=Be.charCodeAt(ne++))return-1}return ne}function B(ce,pe,Be){var ne=u.exec(pe.slice(Be));return ne?(ce.p=d.get(ne[0].toLowerCase()),Be+ne[0].length):-1}function R(ce,pe,Be){var ne=p.exec(pe.slice(Be));return ne?(ce.w=g.get(ne[0].toLowerCase()),Be+ne[0].length):-1}function P(ce,pe,Be){var ne=f.exec(pe.slice(Be));return ne?(ce.w=h.get(ne[0].toLowerCase()),Be+ne[0].length):-1}function D(ce,pe,Be){var ne=y.exec(pe.slice(Be));return ne?(ce.m=w.get(ne[0].toLowerCase()),Be+ne[0].length):-1}function L(ce,pe,Be){var ne=x.exec(pe.slice(Be));return ne?(ce.m=b.get(ne[0].toLowerCase()),Be+ne[0].length):-1}function M(ce,pe,Be){return N(ce,t,pe,Be)}function J(ce,pe,Be){return N(ce,r,pe,Be)}function H(ce,pe,Be){return N(ce,n,pe,Be)}function K(ce){return i[ce.getDay()]}function V(ce){return s[ce.getDay()]}function G(ce){return c[ce.getMonth()]}function X(ce){return o[ce.getMonth()]}function ee(ce){return a[+(ce.getHours()>=12)]}function F(ce){return 1+~~(ce.getMonth()/3)}function z(ce){return i[ce.getUTCDay()]}function Y(ce){return s[ce.getUTCDay()]}function te(ce){return c[ce.getUTCMonth()]}function ae(ce){return o[ce.getUTCMonth()]}function le(ce){return a[+(ce.getUTCHours()>=12)]}function ie(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var pe=I(ce+="",_);return pe.toString=function(){return ce},pe},parse:function(ce){var pe=E(ce+="",!1);return pe.toString=function(){return ce},pe},utcFormat:function(ce){var pe=I(ce+="",j);return pe.toString=function(){return ce},pe},utcParse:function(ce){var pe=E(ce+="",!0);return pe.toString=function(){return ce},pe}}}var Sz={"-":"",_:" ",0:"0"},Zi=/^\s*\d+/,nke=/^%/,ake=/[\\^$*+?|[\]().{}]/g;function Yn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function ske(e){return e.replace(ake,"\\$&")}function Jb(e){return new RegExp("^(?:"+e.map(ske).join("|")+")","i")}function Zb(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function ike(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function oke(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function lke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function cke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function uke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function kz(e,t,r){var n=Zi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Bz(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function dke(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Ake(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function fke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Tz(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function hke(e,t,r){var n=Zi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function jz(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function mke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function pke(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function gke(e,t,r){var n=Zi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function xke(e,t,r){var n=Zi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function vke(e,t,r){var n=nke.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function bke(e,t,r){var n=Zi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function yke(e,t,r){var n=Zi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Iz(e,t){return Yn(e.getDate(),t,2)}function wke(e,t){return Yn(e.getHours(),t,2)}function Eke(e,t){return Yn(e.getHours()%12||12,t,2)}function Cke(e,t){return Yn(1+V2.count(vh(e),e),t,3)}function Bre(e,t){return Yn(e.getMilliseconds(),t,3)}function _ke(e,t){return Bre(e,t)+"000"}function Nke(e,t){return Yn(e.getMonth()+1,t,2)}function Ske(e,t){return Yn(e.getMinutes(),t,2)}function kke(e,t){return Yn(e.getSeconds(),t,2)}function Bke(e){var t=e.getDay();return t===0?7:t}function Tke(e,t){return Yn(M4.count(vh(e)-1,e),t,2)}function Tre(e){var t=e.getDay();return t>=4||t===0?Zv(e):Zv.ceil(e)}function jke(e,t){return e=Tre(e),Yn(Zv.count(vh(e),e)+(vh(e).getDay()===4),t,2)}function Ike(e){return e.getDay()}function Fke(e,t){return Yn(SN.count(vh(e)-1,e),t,2)}function Oke(e,t){return Yn(e.getFullYear()%100,t,2)}function Dke(e,t){return e=Tre(e),Yn(e.getFullYear()%100,t,2)}function Pke(e,t){return Yn(e.getFullYear()%1e4,t,4)}function Rke(e,t){var r=e.getDay();return e=r>=4||r===0?Zv(e):Zv.ceil(e),Yn(e.getFullYear()%1e4,t,4)}function Lke(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Yn(t/60|0,"0",2)+Yn(t%60,"0",2)}function Fz(e,t){return Yn(e.getUTCDate(),t,2)}function Mke(e,t){return Yn(e.getUTCHours(),t,2)}function Uke(e,t){return Yn(e.getUTCHours()%12||12,t,2)}function Qke(e,t){return Yn(1+L4.count(bh(e),e),t,3)}function jre(e,t){return Yn(e.getUTCMilliseconds(),t,3)}function Hke(e,t){return jre(e,t)+"000"}function Vke(e,t){return Yn(e.getUTCMonth()+1,t,2)}function zke(e,t){return Yn(e.getUTCMinutes(),t,2)}function $ke(e,t){return Yn(e.getUTCSeconds(),t,2)}function Gke(e){var t=e.getUTCDay();return t===0?7:t}function Kke(e,t){return Yn(U4.count(bh(e)-1,e),t,2)}function Ire(e){var t=e.getUTCDay();return t>=4||t===0?e1(e):e1.ceil(e)}function qke(e,t){return e=Ire(e),Yn(e1.count(bh(e),e)+(bh(e).getUTCDay()===4),t,2)}function Wke(e){return e.getUTCDay()}function Xke(e,t){return Yn(kN.count(bh(e)-1,e),t,2)}function Yke(e,t){return Yn(e.getUTCFullYear()%100,t,2)}function Jke(e,t){return e=Ire(e),Yn(e.getUTCFullYear()%100,t,2)}function Zke(e,t){return Yn(e.getUTCFullYear()%1e4,t,4)}function eBe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?e1(e):e1.ceil(e),Yn(e.getUTCFullYear()%1e4,t,4)}function tBe(){return"+0000"}function Oz(){return"%"}function Dz(e){return+e}function Pz(e){return Math.floor(+e/1e3)}var wx,Fre,Ore;rBe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function rBe(e){return wx=rke(e),Fre=wx.format,wx.parse,Ore=wx.utcFormat,wx.utcParse,wx}function nBe(e){return new Date(e)}function aBe(e){return e instanceof Date?+e:+new Date(+e)}function _R(e,t,r,n,a,s,i,o,c,u){var d=dR(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),x=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),w=u("%b %d"),_=u("%B"),j=u("%Y");function k(I){return(c(I)<I?p:o(I)<I?g:i(I)<I?x:s(I)<I?b:n(I)<I?a(I)<I?y:w:r(I)<I?_:j)(I)}return d.invert=function(I){return new Date(f(I))},d.domain=function(I){return arguments.length?h(Array.from(I,aBe)):h().map(nBe)},d.ticks=function(I){var E=h();return e(E[0],E[E.length-1],I??10)},d.tickFormat=function(I,E){return E==null?k:u(E)},d.nice=function(I){var E=h();return(!I||typeof I.range!="function")&&(I=t(E[0],E[E.length-1],I??10)),I?h(bre(E,I)):d},d.copy=function(){return H2(d,_R(e,t,r,n,a,s,i,o,c,u))},d}function sBe(){return $u.apply(_R(eke,tke,vh,ER,M4,V2,yR,vR,Op,Fre).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function iBe(){return $u.apply(_R(J4e,Z4e,bh,CR,U4,L4,wR,bR,Op,Ore).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Q4(){var e=0,t=1,r,n,a,s,i=vl,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(s(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,i=f(p,g),u):[i(0),i(1)]}}return u.range=d(M1),u.rangeRound=d(uR),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Rm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Dre(){var e=Pm(Q4()(vl));return e.copy=function(){return Rm(e,Dre())},Fh.apply(e,arguments)}function Pre(){var e=hR(Q4()).domain([1,10]);return e.copy=function(){return Rm(e,Pre()).base(e.base())},Fh.apply(e,arguments)}function Rre(){var e=mR(Q4());return e.copy=function(){return Rm(e,Rre()).constant(e.constant())},Fh.apply(e,arguments)}function NR(){var e=pR(Q4());return e.copy=function(){return Rm(e,NR()).exponent(e.exponent())},Fh.apply(e,arguments)}function oBe(){return NR.apply(null,arguments).exponent(.5)}function Lre(){var e=[],t=vl;function r(n){if(n!=null&&!isNaN(n=+n))return t((U2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(am),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>MSe(e,s/n))},r.copy=function(){return Lre(t).domain(e)},Fh.apply(r,arguments)}function H4(){var e=0,t=.5,r=1,n=1,a,s,i,o,c,u=vl,d,f=!1,h;function p(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-s)*(n*x<n*s?o:c),u(f?Math.max(0,Math.min(1,x)):x))}p.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),s=d(t=+t),i=d(r=+r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,p):[e,t,r]},p.clamp=function(x){return arguments.length?(f=!!x,p):f},p.interpolator=function(x){return arguments.length?(u=x,p):u};function g(x){return function(b){var y,w,_;return arguments.length?([y,w,_]=b,u=v4e(x,[y,w,_]),p):[u(0),u(.5),u(1)]}}return p.range=g(M1),p.rangeRound=g(uR),p.unknown=function(x){return arguments.length?(h=x,p):h},function(x){return d=x,a=x(e),s=x(t),i=x(r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,p}}function Mre(){var e=Pm(H4()(vl));return e.copy=function(){return Rm(e,Mre())},Fh.apply(e,arguments)}function Ure(){var e=hR(H4()).domain([.1,1,10]);return e.copy=function(){return Rm(e,Ure()).base(e.base())},Fh.apply(e,arguments)}function Qre(){var e=mR(H4());return e.copy=function(){return Rm(e,Qre()).constant(e.constant())},Fh.apply(e,arguments)}function SR(){var e=pR(H4());return e.copy=function(){return Rm(e,SR()).exponent(e.exponent())},Fh.apply(e,arguments)}function lBe(){return SR.apply(null,arguments).exponent(.5)}const By=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:oR,scaleDiverging:Mre,scaleDivergingLog:Ure,scaleDivergingPow:SR,scaleDivergingSqrt:lBe,scaleDivergingSymlog:Qre,scaleIdentity:vre,scaleImplicit:fF,scaleLinear:xre,scaleLog:yre,scaleOrdinal:P4,scalePoint:HSe,scalePow:gR,scaleQuantile:Cre,scaleQuantize:_re,scaleRadial:Ere,scaleSequential:Dre,scaleSequentialLog:Pre,scaleSequentialPow:NR,scaleSequentialQuantile:Lre,scaleSequentialSqrt:oBe,scaleSequentialSymlog:Rre,scaleSqrt:H4e,scaleSymlog:wre,scaleThreshold:Nre,scaleTime:sBe,scaleUtc:iBe,tickFormat:gre},Symbol.toStringTag,{value:"Module"}));var Lm=e=>e.chartData,V4=ut([Lm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),kR=(e,t,r,n)=>n?V4(e):Lm(e);function t1(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Vc(t)&&Vc(r))return!0}return!1}function Rz(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function cBe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Vc(r))a=r;else if(typeof r=="function")return;if(Vc(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(t1(i))return i}}function uBe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(t1(n))return Rz(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,o;if(a==="auto")t!=null&&(i=Math.min(...t));else if(ur(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&EV.test(a)){var c=EV.exec(a);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(ur(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&CV.test(s)){var d=CV.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[i,o];if(t1(h))return t==null?h:Rz(h,t,r)}}}var U1=1e9,dBe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},TR,Za=!0,Qu="[DecimalError] ",Kp=Qu+"Invalid argument: ",BR=Qu+"Exponent out of range: ",Q1=Math.floor,yp=Math.pow,ABe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Fc,Vi=1e7,La=7,Hre=9007199254740991,BN=Q1(Hre/La),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*La;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return ih(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return Sa(ih(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return hi(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Fc))throw Error(Qu+"NaN");if(r.s<1)throw Error(Qu+(r.s?"NaN":"-Infinity"));return r.eq(Fc)?new n(0):(Za=!1,t=ih(Qw(r,s),Qw(e,s),s),Za=!0,Sa(t,a))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?$re(t,e):Vre(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Qu+"NaN");return r.s?(Za=!1,t=ih(r,e,0,1).times(e),Za=!0,r.minus(t)):Sa(new n(r),a)};Ar.naturalExponential=Ar.exp=function(){return zre(this)};Ar.naturalLogarithm=Ar.ln=function(){return Qw(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Vre(t,e):$re(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Kp+e);if(t=hi(a)+1,n=a.d.length-1,r=n*La+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,n,a,s,i,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Qu+"NaN")}for(e=hi(o),Za=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=LA(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Q1((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(ih(o,s,i+2)).times(.5),LA(s.d).slice(0,i)===(t=LA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(Sa(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;i+=4}return Za=!0,Sa(n,r)};Ar.times=Ar.mul=function(e){var t,r,n,a,s,i,o,c,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=p.length,c<u&&(s=h,h=p,p=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=s[a]+p[n]*h[a-n-1]+t,s[a--]=o%Vi|0,t=o/Vi|0;s[a]=(s[a]+t)%Vi|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,Za?Sa(e,f.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(rf(e,0,U1),t===void 0?t=n.rounding:rf(t,0,8),Sa(r,e+hi(r)+1,t))};Ar.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=hg(n,!0):(rf(e,0,U1),t===void 0?t=a.rounding:rf(t,0,8),n=Sa(new a(n),e+1,t),r=hg(n,!0,e+1)),r};Ar.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?hg(a):(rf(e,0,U1),t===void 0?t=s.rounding:rf(t,0,8),n=Sa(new s(a),e+hi(a)+1,t),r=hg(n.abs(),!1,e+hi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return Sa(new t(e),hi(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,n,a,s,i,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Fc);if(o=new c(o),!o.s){if(e.s<1)throw Error(Qu+"Infinity");return o}if(o.eq(Fc))return o;if(n=c.precision,e.eq(Fc))return Sa(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=o.s,i){if((r=d<0?-d:d)<=Hre){for(a=new c(Fc),t=Math.ceil(n/La+4),Za=!1;r%2&&(a=a.times(o),Mz(a.d,t)),r=Q1(r/2),r!==0;)o=o.times(o),Mz(o.d,t);return Za=!0,e.s<0?new c(Fc).div(a):Sa(a,n)}}else if(s<0)throw Error(Qu+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,Za=!1,a=e.times(Qw(o,n+u)),Za=!0,a=zre(a),a.s=s,a};Ar.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=hi(a),n=hg(a,r<=s.toExpNeg||r>=s.toExpPos)):(rf(e,1,U1),t===void 0?t=s.rounding:rf(t,0,8),a=Sa(new s(a),e,t),r=hi(a),n=hg(a,e<=r||r<=s.toExpNeg,e)),n};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(rf(e,1,U1),t===void 0?t=n.rounding:rf(t,0,8)),Sa(new n(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=hi(e),r=e.constructor;return hg(e,t<=r.toExpNeg||t>=r.toExpPos)};function Vre(e,t){var r,n,a,s,i,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Za?Sa(t,f):t;if(c=e.d,u=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,o=u.length):(n=u,a=i,o=c.length),i=Math.ceil(f/La),o=i>o?i+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=c.length,s=u.length,o-s<0&&(s=o,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/Vi|0,c[s]%=Vi;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,Za?Sa(t,f):t}function rf(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Kp+e)}function LA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=La-n.length,r&&(s+=I0(r)),s+=n;i=e[t],n=i+"",r=La-n.length,r&&(s+=I0(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var ih=function(){function e(n,a){var s,i=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+i,n[o]=s%Vi|0,i=s/Vi|0;return i&&n.unshift(i),n}function t(n,a,s,i){var o,c;if(s!=i)c=s>i?1:-1;else for(o=c=0;o<s;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*Vi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var o,c,u,d,f,h,p,g,x,b,y,w,_,j,k,I,E,N,B=n.constructor,R=n.s==a.s?1:-1,P=n.d,D=a.d;if(!n.s)return new B(n);if(!a.s)throw Error(Qu+"Division by zero");for(c=n.e-a.e,E=D.length,k=P.length,p=new B(R),g=p.d=[],u=0;D[u]==(P[u]||0);)++u;if(D[u]>(P[u]||0)&&--c,s==null?w=s=B.precision:i?w=s+(hi(n)-hi(a))+1:w=s,w<0)return new B(0);if(w=w/La+2|0,u=0,E==1)for(d=0,D=D[0],w++;(u<k||d)&&w--;u++)_=d*Vi+(P[u]||0),g[u]=_/D|0,d=_%D|0;else{for(d=Vi/(D[0]+1)|0,d>1&&(D=e(D,d),P=e(P,d),E=D.length,k=P.length),j=E,x=P.slice(0,E),b=x.length;b<E;)x[b++]=0;N=D.slice(),N.unshift(0),I=D[0],D[1]>=Vi/2&&++I;do d=0,o=t(D,x,E,b),o<0?(y=x[0],E!=b&&(y=y*Vi+(x[1]||0)),d=y/I|0,d>1?(d>=Vi&&(d=Vi-1),f=e(D,d),h=f.length,b=x.length,o=t(f,x,h,b),o==1&&(d--,r(f,E<h?N:D,h))):(d==0&&(o=d=1),f=D.slice()),h=f.length,h<b&&f.unshift(0),r(x,f,b),o==-1&&(b=x.length,o=t(D,x,E,b),o<1&&(d++,r(x,E<b?N:D,b))),b=x.length):o===0&&(d++,x=[0]),g[u++]=d,o&&x[0]?x[b++]=P[j]||0:(x=[P[j]],b=1);while((j++<k||x[0]!==void 0)&&w--)}return g[0]||g.shift(),p.e=c,Sa(p,i?s+hi(p)+1:s)}}();function zre(e,t){var r,n,a,s,i,o,c=0,u=0,d=e.constructor,f=d.precision;if(hi(e)>16)throw Error(BR+hi(e));if(!e.s)return new d(Fc);for(Za=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(yp(2,u))/Math.LN10*2+5|0,o+=n,r=a=s=new d(Fc),d.precision=o;;){if(a=Sa(a.times(e),o),r=r.times(++c),i=s.plus(ih(a,r,o)),LA(i.d).slice(0,o)===LA(s.d).slice(0,o)){for(;u--;)s=Sa(s.times(s),o);return d.precision=f,t==null?(Za=!0,Sa(s,f)):s}s=i}}function hi(e){for(var t=e.e*La,r=e.d[0];r>=10;r/=10)t++;return t}function e3(e,t,r){if(t>e.LN10.sd())throw Za=!0,r&&(e.precision=r),Error(Qu+"LN10 precision limit exceeded");return Sa(new e(e.LN10),t)}function I0(e){for(var t="";e--;)t+="0";return t}function Qw(e,t){var r,n,a,s,i,o,c,u,d,f=1,h=10,p=e,g=p.d,x=p.constructor,b=x.precision;if(p.s<1)throw Error(Qu+(p.s?"NaN":"-Infinity"));if(p.eq(Fc))return new x(0);if(t==null?(Za=!1,u=b):u=t,p.eq(10))return t==null&&(Za=!0),e3(x,u);if(u+=h,x.precision=u,r=LA(g),n=r.charAt(0),s=hi(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=LA(p.d),n=r.charAt(0),f++;s=hi(p),n>1?(p=new x("0."+r),s++):p=new x(n+"."+r.slice(1))}else return c=e3(x,u+2,b).times(s+""),p=Qw(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=b,t==null?(Za=!0,Sa(p,b)):p;for(o=i=p=ih(p.minus(Fc),p.plus(Fc),u),d=Sa(p.times(p),u),a=3;;){if(i=Sa(i.times(d),u),c=o.plus(ih(i,new x(a),u)),LA(c.d).slice(0,u)===LA(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus(e3(x,u+2,b).times(s+""))),o=ih(o,new x(f),u),x.precision=b,t==null?(Za=!0,Sa(o,b)):o;o=c,a+=2}}function Lz(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Q1(r/La),e.d=[],n=(r+1)%La,r<0&&(n+=La),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=La;n<a;)e.d.push(+t.slice(n,n+=La));t=t.slice(n),n=La-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),Za&&(e.e>BN||e.e<-BN))throw Error(BR+r)}else e.s=0,e.e=0,e.d=[0];return e}function Sa(e,t,r){var n,a,s,i,o,c,u,d,f=e.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=La,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/La),s=f.length,d>=s)return e;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=La,a=n-La+i}if(r!==void 0&&(s=yp(10,i-a-1),o=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/yp(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=hi(e),f.length=1,t=t-s-1,f[0]=yp(10,(La-t%La)%La),e.e=Q1(-t/La)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=yp(10,La-n),f[d]=a>0?(u/yp(10,i-a)%yp(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==Vi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=Vi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(Za&&(e.e>BN||e.e<-BN))throw Error(BR+hi(e));return e}function $re(e,t){var r,n,a,s,i,o,c,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Za?Sa(t,p):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(p/La),o)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=Vi-1;--c[s],c[a]+=Vi}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Za?Sa(t,p):t):new h(0)}function hg(e,t,r){var n,a=hi(e),s=LA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+I0(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+I0(-a-1)+s,r&&(n=r-i)>0&&(s+=I0(n))):a>=i?(s+=I0(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+I0(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=I0(n))),e.s<0?"-"+s:s}function Mz(e,t){if(e.length>t)return e.length=t,!0}function Gre(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(Kp+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return Lz(i,s.toString())}else if(typeof s!="string")throw Error(Kp+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,ABe.test(s))Lz(i,s);else throw Error(Kp+s)}if(a.prototype=Ar,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Gre,a.config=a.set=fBe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function fBe(e){if(!e||typeof e!="object")throw Error(Qu+"Object expected");var t,r,n,a=["precision",1,U1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Q1(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(Kp+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Kp+r+": "+n);return this}var TR=Gre(dBe);Fc=new TR(1);const ha=TR;var hBe=e=>e,Kre={},qre=e=>e===Kre,Uz=e=>function t(){return arguments.length===0||arguments.length===1&&qre(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Wre=(e,t)=>e===1?t:Uz(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==Kre).length;return s>=e?t(...n):Wre(e-s,Uz(function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=n.map(d=>qre(d)?o.shift():d);return t(...u,...o)}))}),z4=e=>Wre(e.length,e),xF=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},mBe=z4((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),pBe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return hBe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((o,c)=>c(o),s(...arguments))}},vF=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Xre=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,o)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[o])})||(t=a,r=e(...a)),r}};function Yre(e){var t;return e===0?t=1:t=Math.floor(new ha(e).abs().log(10).toNumber())+1,t}function Jre(e,t,r){for(var n=new ha(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}z4((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});z4((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});z4((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Zre=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},ene=(e,t,r)=>{if(e.lte(0))return new ha(0);var n=Yre(e.toNumber()),a=new ha(10).pow(n),s=e.div(a),i=n!==1?.05:.1,o=new ha(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=o.mul(a);return t?new ha(c.toNumber()):new ha(Math.ceil(c.toNumber()))},gBe=(e,t,r)=>{var n=new ha(1),a=new ha(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new ha(10).pow(Yre(e)-1),a=new ha(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new ha(Math.floor(e)))}else e===0?a=new ha(Math.floor((t-1)/2)):r||(a=new ha(Math.floor(e)));var i=Math.floor((t-1)/2),o=pBe(mBe(c=>a.add(new ha(c-i).mul(n)).toNumber()),xF);return o(0,t)},tne=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ha(0),tickMin:new ha(0),tickMax:new ha(0)};var i=ene(new ha(r).sub(t).div(n-1),a,s),o;t<=0&&r>=0?o=new ha(0):(o=new ha(t).add(r).div(2),o=o.sub(new ha(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new ha(r).sub(o).div(i).toNumber()),d=c+u+1;return d>n?tne(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:o.sub(new ha(c).mul(i)),tickMax:o.add(new ha(u).mul(i))})};function xBe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,o]=Zre([t,r]);if(i===-1/0||o===1/0){var c=o===1/0?[i,...xF(0,n-1).map(()=>1/0)]:[...xF(0,n-1).map(()=>-1/0),o];return t>r?vF(c):c}if(i===o)return gBe(i,n,a);var{step:u,tickMin:d,tickMax:f}=tne(i,o,s,a,0),h=Jre(d,f.add(new ha(.1).mul(u)),u);return t>r?vF(h):h}function vBe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=Zre([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),c=ene(new ha(i).sub(s).div(o-1),a,0),u=[...Jre(new ha(s),new ha(i),c),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?vF(u):u}var bBe=Xre(xBe),yBe=Xre(vBe),rne=e=>e.rootProps.maxBarSize,wBe=e=>e.rootProps.barGap,nne=e=>e.rootProps.barCategoryGap,EBe=e=>e.rootProps.barSize,z2=e=>e.rootProps.stackOffset,jR=e=>e.options.chartName,IR=e=>e.rootProps.syncId,ane=e=>e.rootProps.syncMethod,FR=e=>e.options.eventEmitter,OA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},Gl={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},$4=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},CBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:OA.angleAxisId,includeHidden:!1,name:void 0,reversed:OA.reversed,scale:OA.scale,tick:OA.tick,tickCount:void 0,ticks:void 0,type:OA.type,unit:void 0},_Be={allowDataOverflow:Gl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gl.scale,tick:Gl.tick,tickCount:Gl.tickCount,ticks:void 0,type:Gl.type,unit:void 0},NBe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:OA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:OA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:OA.scale,tick:OA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},SBe={allowDataOverflow:Gl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Gl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Gl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Gl.scale,tick:Gl.tick,tickCount:Gl.tickCount,ticks:void 0,type:"category",unit:void 0},H1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?NBe:CBe,$2=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?SBe:_Be,G4=e=>e.polarOptions,OR=ut([jh,Ih,ki],Fte),sne=ut([G4,OR],(e,t)=>{if(e!=null)return wl(e.innerRadius,t,0)}),ine=ut([G4,OR],(e,t)=>{if(e!=null)return wl(e.outerRadius,t,t*.8)}),kBe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},one=ut([G4],kBe),BBe=ut([H1,one],$4),lne=ut([OR,sne,ine],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),TBe=ut([$2,lne],$4),V1=ut([jn,G4,sne,ine,jh,Ih],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:c,endAngle:u}=t;return{cx:wl(i,a,a/2),cy:wl(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),ka=(e,t)=>t,G2=(e,t,r)=>r;function DR(e){return e==null?void 0:e.id}var Ti=e=>{var t=jn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},z1=e=>e.tooltip.settings.axisId,ji=e=>{var t=Ti(e),r=z1(e);return $1(e,t,r)};function cne(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var o,c=(o=i.data)!==null&&o!==void 0?o:n;if(!(c==null||c.length===0)){var u=DR(i);c.forEach((d,f)=>{var h=a==null?f:String(Pa(d,a,null)),p=Pa(d,i.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:p}),s.set(h,g)})}}),Array.from(s.values())}function K4(e){return e.stackId!=null&&e.dataKey!=null}function Qz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qz(Object(r),!0).forEach(function(n){jBe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jBe(e,t,r){return(t=IBe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IBe(e){var t=FBe(e,"string");return typeof t=="symbol"?t:t+""}function FBe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bF=[0,"auto"],Sc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Oh=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Sc},kc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:bF,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:F4},Mm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??kc},OBe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},PR=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??OBe},Xs=(e,t,r)=>{switch(t){case"xAxis":return Oh(e,r);case"yAxis":return Mm(e,r);case"zAxis":return PR(e,r);case"angleAxis":return H1(e,r);case"radiusAxis":return $2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},DBe=(e,t,r)=>{switch(t){case"xAxis":return Oh(e,r);case"yAxis":return Mm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},$1=(e,t,r)=>{switch(t){case"xAxis":return Oh(e,r);case"yAxis":return Mm(e,r);case"angleAxis":return H1(e,r);case"radiusAxis":return $2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},une=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function RR(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var LR=e=>e.graphicalItems.cartesianItems,PBe=ut([ka,G2],RR),MR=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),K2=ut([LR,Xs,PBe],MR),dne=ut([K2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(K4)),Ane=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),fne=ut([K2],Ane),UR=e=>e.map(t=>t.data).filter(Boolean).flat(1),RBe=ut([K2],UR),QR=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},HR=ut([RBe,kR],QR),VR=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Pa(a,n)}))):e.map(n=>({value:n})),q4=ut([HR,Xs,K2],VR);function hne(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Dg(e){return e.filter(t=>tf(t)||t instanceof Date).map(Number).filter(t=>Uc(t)===!1)}function LBe(e,t,r){return!r||typeof t!="number"||Uc(t)?[]:r.length?Dg(r.flatMap(n=>{var a=Pa(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Vc(s)||!Vc(i)))return[t-s,t+i]})):[]}var MBe=ut([dne,kR,ji],cne),mne=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,o]=s,c=o.map(DR);return[i,{stackedData:I5e(e,c,r),graphicalItems:o}]}))},yF=ut([MBe,dne,z2],mne),pne=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=R5e(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},UBe=ut([yF,Lm,ka],pne),gne=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,c,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>hne(a,f)),d=Pa(s,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:LBe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Pa(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),W4=e=>e.errorBars,xne=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>hne(r,n));ut([fne,W4,ka],xne);var QBe=ut([HR,Xs,fne,W4,ka],gne);function HBe(e){var{value:t}=e;if(tf(t)||t instanceof Date)return t}var Hz=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Dg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},VBe=(e,t,r)=>{var n=e.map(HBe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&Tee(n))?are(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},zR=e=>{var t;if(e==null||!("domain"in e))return bF;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Dg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:bF},jN=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},vne=e=>e.referenceElements.dots,G1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),zBe=ut([vne,ka,G2],G1),bne=e=>e.referenceElements.areas,$Be=ut([bne,ka,G2],G1),yne=e=>e.referenceElements.lines,GBe=ut([yne,ka,G2],G1),wne=(e,t)=>{var r=Dg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},KBe=ut(zBe,ka,wne),Ene=(e,t)=>{var r=Dg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},qBe=ut([$Be,ka],Ene),Cne=(e,t)=>{var r=Dg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},WBe=ut(GBe,ka,Cne),XBe=ut(KBe,WBe,qBe,(e,t,r)=>jN(e,r,t)),_ne=ut([Xs],zR),$R=(e,t,r,n,a,s,i)=>{var o=cBe(t,e.allowDataOverflow);if(o!=null)return o;var c=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=c?jN(r,a,Hz(n)):jN(a,Hz(n));return uBe(t,u,e.allowDataOverflow)},YBe=ut([Xs,_ne,UBe,QBe,XBe,jn,ka],$R),JBe=[0,1],GR=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:c}=e,u=Dm(t,s);return u&&o==null?are(0,r.length):c==="category"?VBe(n,e,u):a==="expand"?JBe:i}},KR=ut([Xs,jn,HR,q4,z2,ka,YBe],GR),Nne=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(P2(s));return o in By?o:"point"}}},Um=ut([Xs,jn,une,jR,ka],Nne);function ZBe(e){if(e!=null){if(e in By)return By[e]();var t="scale".concat(P2(e));if(t in By)return By[t]()}}function X4(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=ZBe(t);if(a!=null){var s=a.domain(r).range(n);return S5e(s),s}}}var qR=(e,t,r)=>{var n=zR(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&t1(e))return bBe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&t1(e))return yBe(e,t.tickCount,t.allowDecimals)}},WR=ut([KR,$1,Um],qR),XR=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&t1(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},eTe=ut([Xs,KR,WR,ka],XR),tTe=ut(q4,Xs,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Dg(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),Sne=ut(tTe,jn,nne,ki,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Vc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=wl(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),rTe=(e,t)=>{var r=Oh(e,t);return r==null||typeof r.padding!="string"?0:Sne(e,"xAxis",t,r.padding)},nTe=(e,t)=>{var r=Mm(e,t);return r==null||typeof r.padding!="string"?0:Sne(e,"yAxis",t,r.padding)},aTe=ut(Oh,rTe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),sTe=ut(Mm,nTe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),iTe=ut([ki,aTe,D4,O4,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),oTe=ut([ki,jn,sTe,D4,O4,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),q2=(e,t,r,n)=>{var a;switch(t){case"xAxis":return iTe(e,r,n);case"yAxis":return oTe(e,r,n);case"zAxis":return(a=PR(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return one(e);case"radiusAxis":return lne(e,r);default:return}},kne=ut([Xs,q2],$4),K1=ut([Xs,Um,eTe,kne],X4);ut([K2,W4,ka],xne);function Bne(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Y4=(e,t)=>t,J4=(e,t,r)=>r,lTe=ut(JP,Y4,J4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Bne)),cTe=ut(ZP,Y4,J4,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Bne)),Tne=(e,t)=>({width:e.width,height:t.height}),uTe=(e,t)=>{var r=typeof t.width=="number"?t.width:F4;return{width:r,height:e.height}},jne=ut(ki,Oh,Tne),dTe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},ATe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},fTe=ut(Ih,ki,lTe,Y4,J4,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=Tne(t,o);i==null&&(i=dTe(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[o.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),hTe=ut(jh,ki,cTe,Y4,J4,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=uTe(t,o);i==null&&(i=ATe(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[o.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),mTe=(e,t)=>{var r=ki(e),n=Oh(e,t);if(n!=null){var a=fTe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},pTe=(e,t)=>{var r=ki(e),n=Mm(e,t);if(n!=null){var a=hTe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Ine=ut(ki,Mm,(e,t)=>{var r=typeof t.width=="number"?t.width:F4;return{width:r,height:e.height}}),Vz=(e,t,r)=>{switch(t){case"xAxis":return jne(e,r).width;case"yAxis":return Ine(e,r).height;default:return}},Fne=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=Dm(e,n),c=t.map(u=>u.value);if(i&&o&&s==="category"&&a&&Tee(c))return c}},W2=ut([jn,q4,Xs,ka],Fne),YR=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=Dm(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(o=>o.value)}},JR=ut([jn,q4,$1,ka],YR),zz=ut([jn,DBe,Um,K1,W2,JR,q2,WR,ka],(e,t,r,n,a,s,i,o,c)=>{if(t==null)return null;var u=Dm(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),One=(e,t,r,n,a,s,i,o,c)=>{if(!(t==null||n==null)){var u=Dm(e,c),{type:d,ticks:f,tickCount:h}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=c==="angleAxis"&&s!=null&&s.length>=2?Wi(s[0]-s[1])*2*g:g;var x=f||a;if(x){var b=x.map((y,w)=>{var _=i?i.indexOf(y):y;return{index:w,coordinate:n(_)+g,value:y,offset:g}});return b.filter(y=>!Uc(y.coordinate))}return u&&o?o.map((y,w)=>({coordinate:n(y)+g,value:y,index:w,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,w)=>({coordinate:n(y)+g,value:i?i[y]:y,index:w,offset:g}))}},Dne=ut([jn,$1,Um,K1,WR,q2,W2,JR,ka],One),Pne=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Dm(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Wi(n[0]-n[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},r1=ut([jn,$1,K1,q2,W2,JR,ka],Pne),n1=ut(Xs,K1,(e,t)=>{if(!(e==null||t==null))return TN(TN({},e),{},{scale:t})}),gTe=ut([Xs,Um,KR,kne],X4);ut((e,t,r)=>PR(e,r),gTe,(e,t)=>{if(!(e==null||t==null))return TN(TN({},e),{},{scale:t})});var xTe=ut([jn,JP,ZP],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Rne=e=>e.options.defaultTooltipEventType,Lne=e=>e.options.validateTooltipEventTypes;function Mne(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function ZR(e,t){var r=Rne(e),n=Lne(e);return Mne(t,r,n)}function vTe(e){return ir(t=>ZR(t,e))}var Une=(e,t)=>{var r,n=Number(t);if(!(Uc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},bTe=e=>e.tooltip.settings,M0={active:!1,index:null,dataKey:void 0,coordinate:void 0},yTe={itemInteraction:{click:M0,hover:M0},axisInteraction:{click:M0,hover:M0},keyboardInteraction:M0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Qne=Gc({name:"tooltip",initialState:yTe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=sh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:wTe,removeTooltipEntrySettings:ETe,setTooltipSettingsState:CTe,setActiveMouseOverItemIndex:Hne,mouseLeaveItem:_Te,mouseLeaveChart:Vne,setActiveClickItemIndex:NTe,setMouseOverAxisIndex:zne,setMouseClickAxisIndex:STe,setSyncInteraction:wF,setKeyboardInteraction:EF}=Qne.actions,kTe=Qne.reducer;function $z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$z(Object(r),!0).forEach(function(n){BTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$z(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BTe(e,t,r){return(t=TTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TTe(e){var t=jTe(e,"string");return typeof t=="symbol"?t:t+""}function jTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ITe(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function FTe(e){return e.index!=null}var $ne=(e,t,r,n)=>{if(t==null)return M0;var a=ITe(e,t,r);if(a==null)return M0;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(FTe(a)){if(s)return MC(MC({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return MC(MC({},M0),{},{coordinate:a.coordinate})},e8=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Vc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},Gne=(e,t,r,n,a,s,i,o)=>{if(!(s==null||o==null)){var c=i[0],u=c==null?void 0:o(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},Kne=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},X2=e=>e.options.tooltipPayloadSearcher,q1=e=>e.tooltip;function Gz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gz(Object(r),!0).forEach(function(n){OTe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function OTe(e,t,r){return(t=DTe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DTe(e){var t=PTe(e,"string");return typeof t=="symbol"?t:t+""}function PTe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RTe(e,t){return e??t}var qne=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,p)=>{var g,{dataDefinedOnItem:x,settings:b}=p,y=RTe(x,o),w=Array.isArray(y)?Dte(y,u,d):y,_=(g=b==null?void 0:b.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,j=b==null?void 0:b.nameKey,k;if(n!=null&&n.dataKey&&Array.isArray(w)&&!Array.isArray(w[0])&&i==="axis"?k=vEe(w,n.dataKey,a):k=s(w,t,c,j),Array.isArray(k))k.forEach(E=>{var N=Kz(Kz({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});h.push(_V({tooltipEntrySettings:N,dataKey:E.dataKey,payload:E.payload,value:Pa(E.payload,E.dataKey),name:E.name}))});else{var I;h.push(_V({tooltipEntrySettings:b,dataKey:_,payload:k,value:Pa(k,_),name:(I=Pa(k,j))!==null&&I!==void 0?I:b==null?void 0:b.name}))}return h},f)}},t8=ut([ji,jn,une,jR,Ti],Nne),LTe=ut([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),MTe=ut([Ti,z1],RR),Y2=ut([LTe,ji,MTe],MR),UTe=ut([Y2],e=>e.filter(K4)),QTe=ut([Y2],UR),W1=ut([QTe,Lm],QR),HTe=ut([UTe,Lm,ji],cne),r8=ut([W1,ji,Y2],VR),VTe=ut([ji],zR),zTe=ut([Y2],e=>e.filter(K4)),$Te=ut([HTe,zTe,z2],mne),GTe=ut([$Te,Lm,Ti],pne),KTe=ut([Y2],Ane),qTe=ut([W1,ji,KTe,W4,Ti],gne),WTe=ut([vne,Ti,z1],G1),XTe=ut([WTe,Ti],wne),YTe=ut([bne,Ti,z1],G1),JTe=ut([YTe,Ti],Ene),ZTe=ut([yne,Ti,z1],G1),eje=ut([ZTe,Ti],Cne),tje=ut([XTe,eje,JTe],jN),rje=ut([ji,VTe,GTe,qTe,tje,jn,Ti],$R),Wne=ut([ji,jn,W1,r8,z2,Ti,rje],GR),nje=ut([Wne,ji,t8],qR),aje=ut([ji,Wne,nje,Ti],XR),Xne=e=>{var t=Ti(e),r=z1(e),n=!1;return q2(e,t,r,n)},Yne=ut([ji,Xne],$4),Jne=ut([ji,t8,aje,Yne],X4),sje=ut([jn,r8,ji,Ti],Fne),ije=ut([jn,r8,ji,Ti],YR),oje=(e,t,r,n,a,s,i,o)=>{if(t){var{type:c}=t,u=Dm(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Wi(a[0]-a[1])*2*f:f,u&&i?i.map((h,p)=>({coordinate:n(h)+f,value:h,index:p,offset:f})):n.domain().map((h,p)=>({coordinate:n(h)+f,value:s?s[h]:h,index:p,offset:f}))}}},Dh=ut([jn,ji,t8,Jne,Xne,sje,ije,Ti],oje),n8=ut([Rne,Lne,bTe],(e,t,r)=>Mne(r.shared,e,t)),Zne=e=>e.tooltip.settings.trigger,a8=e=>e.tooltip.settings.defaultIndex,Z4=ut([q1,n8,Zne,a8],$ne),ym=ut([Z4,W1],e8),eae=ut([Dh,ym],Une),tae=ut([Z4],e=>{if(e)return e.dataKey}),rae=ut([q1,n8,Zne,a8],Kne),lje=ut([jh,Ih,jn,ki,Dh,a8,rae,X2],Gne),cje=ut([Z4,lje],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),uje=ut([Z4],e=>e.active),dje=ut([rae,ym,Lm,ji,eae,X2,n8],qne),Aje=ut([dje],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function qz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qz(Object(r),!0).forEach(function(n){fje(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fje(e,t,r){return(t=hje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hje(e){var t=mje(e,"string");return typeof t=="symbol"?t:t+""}function mje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pje=()=>ir(ji),gje=()=>{var e=pje(),t=ir(Dh),r=ir(Jne);return Pw(Wz(Wz({},e),{},{scale:r}),t)},xje=()=>ir(jR),s8=(e,t)=>t,nae=(e,t,r)=>r,i8=(e,t,r,n)=>n,vje=ut(Dh,e=>N4(e,t=>t.coordinate)),o8=ut([q1,s8,nae,i8],$ne),aae=ut([o8,W1],e8),bje=(e,t,r)=>{if(t!=null){var n=q1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},sae=ut([q1,s8,nae,i8],Kne),IN=ut([jh,Ih,jn,ki,Dh,i8,sae,X2],Gne),yje=ut([o8,IN],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),iae=ut(Dh,aae,Une),wje=ut([sae,aae,Lm,ji,iae,X2,s8],qne),Eje=ut([o8],e=>({isActive:e.active,activeIndex:e.index})),Cje=(e,t,r,n,a,s,i,o)=>{if(!(!e||!t||!n||!a||!s)){var c=L5e(e.chartX,e.chartY,t,r,o);if(c){var u=U5e(c,t),d=_5e(u,i,s,n,a),f=M5e(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function CF(){return CF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},CF.apply(null,arguments)}function Xz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xz(Object(r),!0).forEach(function(n){_je(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xz(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _je(e,t,r){return(t=Nje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nje(e){var t=Sje(e,"string");return typeof t=="symbol"?t:t+""}function Sje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kje(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:o,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&c!=="axis")return null;var p,g;if(u==="ScatterChart")p=d,g=RNe;else if(u==="BarChart")p=LNe(i,d,a,s),g=ere;else if(i==="radial"){var{cx:x,cy:b,radius:y,startAngle:w,endAngle:_}=tre(d);p={cx:x,cy:b,startAngle:w,endAngle:_,innerRadius:y,outerRadius:y},g=nre}else p={points:wSe(i,d,a)},g=Kte;var j=typeof o=="object"&&"className"in o?o.className:void 0,k=UC(UC(UC(UC({stroke:"#ccc",pointerEvents:"none"},a),p),Wn(o,!1)),{},{payload:f,payloadIndex:h,className:gn("recharts-tooltip-cursor",j)});return S.isValidElement(o)?S.cloneElement(o,k):S.createElement(g,k)}function Bje(e){var t=gje(),r=Hte(),n=nR(),a=xje();return S.createElement(kje,CF({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var oae=S.createContext(null),Tje=()=>S.useContext(oae),t3={exports:{}},Yz;function jje(){return Yz||(Yz=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,g){var x=r?r+u:u;if(!this._events[x])return!1;var b=this._events[x],y=arguments.length,w,_;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,h),!0;case 5:return b.fn.call(b.context,d,f,h,p),!0;case 6:return b.fn.call(b.context,d,f,h,p,g),!0}for(_=1,w=new Array(y-1);_<y;_++)w[_-1]=arguments[_];b.fn.apply(b.context,w)}else{var j=b.length,k;for(_=0;_<j;_++)switch(b[_].once&&this.removeListener(u,b[_].fn,void 0,!0),y){case 1:b[_].fn.call(b[_].context);break;case 2:b[_].fn.call(b[_].context,d);break;case 3:b[_].fn.call(b[_].context,d,f);break;case 4:b[_].fn.call(b[_].context,d,f,h);break;default:if(!w)for(k=1,w=new Array(y-1);k<y;k++)w[k-1]=arguments[k];b[_].fn.apply(b[_].context,w)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&i(this,p);else{for(var x=0,b=[],y=g.length;x<y;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&b.push(g[x]);b.length?this._events[p]=b.length===1?b[0]:b:i(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(t3)),t3.exports}var Ije=jje();const Fje=Cl(Ije);var Hw=new Fje,_F="recharts.syncEvent.tooltip",Jz="recharts.syncEvent.brush";function l8(e,t){if(t){var r=Number.parseInt(t,10);if(!Uc(r))return e==null?void 0:e[r]}}var Oje={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},lae=Gc({name:"options",initialState:Oje,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Dje=lae.reducer,{createEventEmitter:Pje}=lae.actions;function Rje(e){return e.tooltip.syncInteraction}var Lje={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},cae=Gc({name:"chartData",initialState:Lje,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:Zz,setDataStartEndIndexes:Mje,setComputedData:_ht}=cae.actions,Uje=cae.reducer,uae=()=>{};function Qje(){var e=ir(IR),t=ir(FR),r=$a(),n=ir(ane),a=ir(Dh),s=nR(),i=eR(),o=ir(c=>c.rootProps.className);S.useEffect(()=>{if(e==null)return uae;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var p={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,p);h=a[g]}else n==="value"&&(h=a.find(I=>String(I.value)===d.payload.label));var{coordinate:x}=d.payload;if(h==null||d.payload.active===!1||x==null||i==null){r(wF({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=x,w=Math.min(b,i.x+i.width),_=Math.min(y,i.y+i.height),j={x:s==="horizontal"?h.coordinate:w,y:s==="horizontal"?_:h.coordinate},k=wF({active:d.payload.active,coordinate:j,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(k)}}};return Hw.on(_F,c),()=>{Hw.off(_F,c)}},[o,r,t,e,n,a,s,i])}function Hje(){var e=ir(IR),t=ir(FR),r=$a();S.useEffect(()=>{if(e==null)return uae;var n=(a,s,i)=>{t!==i&&e===a&&r(Mje(s))};return Hw.on(Jz,n),()=>{Hw.off(Jz,n)}},[r,t,e])}function Vje(){var e=$a();S.useEffect(()=>{e(Pje())},[e]),Qje(),Hje()}function zje(e,t,r,n,a,s){var i=ir(h=>bje(h,e,t)),o=ir(FR),c=ir(IR),u=ir(ane),d=ir(Rje),f=d==null?void 0:d.active;S.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=wF({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});Hw.emit(_F,c,h,o)}},[f,r,i,a,n,o,c,u,s])}function e$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function t$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e$(Object(r),!0).forEach(function(n){$je(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $je(e,t,r){return(t=Gje(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gje(e){var t=Kje(e,"string");return typeof t=="symbol"?t:t+""}function Kje(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qje(e){return e.dataKey}function Wje(e,t){return S.isValidElement(e)?S.cloneElement(e,t):typeof e=="function"?S.createElement(e,t):S.createElement(mNe,t)}var r$=[],Xje={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ig.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Dp(e){var t=zu(e,Xje),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:o,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:p,wrapperStyle:g,cursor:x,shared:b,trigger:y,defaultIndex:w,portal:_,axisId:j}=t,k=$a(),I=typeof w=="number"?String(w):w;S.useEffect(()=>{k(CTe({shared:b,trigger:y,axisId:j,active:r,defaultIndex:I}))},[k,b,y,j,r,I]);var E=eR(),N=Gte(),B=vTe(b),{activeIndex:R,isActive:P}=ir(te=>Eje(te,B,y,I)),D=ir(te=>wje(te,B,y,I)),L=ir(te=>iae(te,B,y,I)),M=ir(te=>yje(te,B,y,I)),J=D,H=Tje(),K=r??P,[V,G]=lte([J,K]),X=B==="axis"?L:void 0;zje(B,y,M,X,R,K);var ee=_??H;if(ee==null)return null;var F=J??r$;K||(F=r$),o&&F.length&&(F=rte(J.filter(te=>te.value!=null&&(te.hide!==!0||t.includeHidden)),d,qje));var z=F.length>0,Y=S.createElement(wNe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:K,coordinate:M,hasPayload:z,offset:u,position:f,reverseDirection:h,useTranslate3d:p,viewBox:E,wrapperStyle:g,lastBoundingBox:V,innerRef:G,hasPortalFromProps:!!_},Wje(i,t$(t$({},t),{},{payload:F,label:X,active:K,coordinate:M,accessibilityLayer:N})));return S.createElement(S.Fragment,null,FP.createPortal(Y,ee),K&&S.createElement(Bje,{cursor:x,tooltipEventType:B,coordinate:M,payload:J,index:R}))}var r3={},n3={},a3={},n$;function Yje(){return n$||(n$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,o=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),x()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),i=void 0,o=null},b=()=>{d()},y=function(...w){if(a!=null&&a.aborted)return;i=this,o=w;const _=h==null;p(),c&&_&&d()};return y.schedule=p,y.cancel=x,y.flush=b,a==null||a.addEventListener("abort",x,{once:!0}),y}e.debounce=t}(a3)),a3}var a$;function Jje(){return a$||(a$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yje();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:o=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),p=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=g,p}e.debounce=r}(n3)),n3}var s$;function Zje(){return s$||(s$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jje();function r(n,a=0,s={}){const{leading:i=!0,trailing:o=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:o})}e.throttle=r}(r3)),r3}var s3,i$;function e3e(){return i$||(i$=1,s3=Zje().throttle),s3}var t3e=e3e();const r3e=Cl(t3e);var Zy=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function o$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function i3(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o$(Object(r),!0).forEach(function(n){n3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n3e(e,t,r){return(t=a3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a3e(e){var t=s3e(e,"string");return typeof t=="symbol"?t:t+""}function s3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pp=S.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:p,style:g={}}=e,x=S.useRef(null),b=S.useRef();b.current=p,S.useImperativeHandle(t,()=>x.current);var[y,w]=S.useState({containerWidth:n.width,containerHeight:n.height}),_=S.useCallback((k,I)=>{w(E=>{var N=Math.round(k),B=Math.round(I);return E.containerWidth===N&&E.containerHeight===B?E:{containerWidth:N,containerHeight:B}})},[]);S.useEffect(()=>{var k=B=>{var R,{width:P,height:D}=B[0].contentRect;_(P,D),(R=b.current)===null||R===void 0||R.call(b,P,D)};d>0&&(k=r3e(k,d,{trailing:!0,leading:!1}));var I=new ResizeObserver(k),{width:E,height:N}=x.current.getBoundingClientRect();return _(E,N),I.observe(x.current),()=>{I.disconnect()}},[_,d]);var j=S.useMemo(()=>{var{containerWidth:k,containerHeight:I}=y;if(k<0||I<0)return null;Zy(jp(a)||jp(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),Zy(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=jp(a)?k:a,N=jp(s)?I:s;return r&&r>0&&(E?N=E/r:N&&(E=N*r),c&&N>c&&(N=c)),Zy(E>0||N>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,N,a,s,i,o,r),S.Children.map(u,B=>S.cloneElement(B,{width:E,height:N,style:i3({width:E,height:N},B.props.style)}))},[r,u,s,c,o,i,y,a]);return S.createElement("div",{id:f?"".concat(f):void 0,className:gn("recharts-responsive-container",h),style:i3(i3({},g),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:c}),ref:x},S.createElement("div",{style:{width:0,height:0,overflow:"visible"}},j))}),mg=e=>null;mg.displayName="Cell";function i3e(e,t,r){return(t=o3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o3e(e){var t=l3e(e,"string");return typeof t=="symbol"?t:t+""}function l3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class c3e{constructor(t){i3e(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function l$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function u3e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l$(Object(r),!0).forEach(function(n){d3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d3e(e,t,r){return(t=A3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A3e(e){var t=f3e(e,"string");return typeof t=="symbol"?t:t+""}function f3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h3e={cacheSize:2e3,enableCache:!0},dae=u3e({},h3e),c$=new c3e(dae.cacheSize),m3e={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},u$="recharts_measurement_span";function p3e(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}var d$=(e,t)=>{try{var r=document.getElementById(u$);r||(r=document.createElement("span"),r.setAttribute("id",u$),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,m3e,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},ew=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ig.isSsr)return{width:0,height:0};if(!dae.enableCache)return d$(t,r);var n=p3e(t,r),a=c$.get(n);if(a)return a;var s=d$(t,r);return c$.set(n,s),s},A$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,f$=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,g3e=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,x3e=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Aae={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},v3e=Object.keys(Aae),nv="NaN";function b3e(e,t){return e*Aae[t]}class Hl{static parse(t){var r,[,n,a]=(r=x3e.exec(t))!==null&&r!==void 0?r:[];return new Hl(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Uc(t)&&(this.unit=""),r!==""&&!g3e.test(r)&&(this.num=NaN,this.unit=""),v3e.includes(r)&&(this.num=b3e(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Hl(NaN,""):new Hl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Hl(NaN,""):new Hl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hl(NaN,""):new Hl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Hl(NaN,""):new Hl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Uc(this.num)}}function fae(e){if(e.includes(nv))return nv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=A$.exec(t))!==null&&r!==void 0?r:[],i=Hl.parse(n??""),o=Hl.parse(s??""),c=a==="*"?i.multiply(o):i.divide(o);if(c.isNaN())return nv;t=t.replace(A$,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=f$.exec(t))!==null&&u!==void 0?u:[],p=Hl.parse(d??""),g=Hl.parse(h??""),x=f==="+"?p.add(g):p.subtract(g);if(x.isNaN())return nv;t=t.replace(f$,x.toString())}return t}var h$=/\(([^()]*)\)/;function y3e(e){for(var t=e,r;(r=h$.exec(t))!=null;){var[,n]=r;t=t.replace(h$,fae(n))}return t}function w3e(e){var t=e.replace(/\s+/g,"");return t=y3e(t),t=fae(t),t}function E3e(e){try{return w3e(e)}catch{return nv}}function o3(e){var t=E3e(e.slice(5,-1));return t===nv?"":t}var C3e=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_3e=["dx","dy","angle","className","breakAll"];function NF(){return NF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},NF.apply(null,arguments)}function m$(e,t){if(e==null)return{};var r,n,a=N3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function N3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hae=/[ \f\n\r\t\v\u2028\u2029]+/,mae=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];ks(t)||(r?a=t.toString().split(""):a=t.toString().split(hae));var s=a.map(o=>({word:o,width:ew(o,n).width})),i=r?0:ew("",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},S3e=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:c}=e,u=ur(s),d=i,f=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((D,L)=>{var{word:M,width:J}=L,H=D[D.length-1];if(H&&(n==null||a||H.width+J+r<Number(n)))H.words.push(M),H.width+=J+r;else{var K={words:[M],width:J};D.push(K)}return D},[])},h=f(t),p=R=>R.reduce((P,D)=>P.width>D.width?P:D);if(!u||a)return h;var g=h.length>s||p(h).width>Number(n);if(!g)return h;for(var x="",b=R=>{var P=d.slice(0,R),D=mae({breakAll:c,style:o,children:P+x}).wordsWithComputedWidth,L=f(D),M=L.length>s||p(L).width>Number(n);return[M,L]},y=0,w=d.length-1,_=0,j;y<=w&&_<=d.length-1;){var k=Math.floor((y+w)/2),I=k-1,[E,N]=b(I),[B]=b(k);if(!E&&!B&&(y=k+1),E&&B&&(w=k-1),!E&&B){j=N;break}_++}return j||h},p$=e=>{var t=ks(e)?[]:e.toString().split(hae);return[{words:t}]},k3e=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!Ig.isSsr){var o,c,u=mae({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return p$(n);return S3e({breakAll:s,children:n,maxLines:i,style:a},o,c,t,r)}return p$(n)},g$="#808080",X1=S.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:c="end",fill:u=g$}=e,d=m$(e,C3e),f=S.useMemo(()=>k3e({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:p,angle:g,className:x,breakAll:b}=d,y=m$(d,_3e);if(!tf(r)||!tf(n))return null;var w=r+(ur(h)?h:0),_=n+(ur(p)?p:0),j;switch(c){case"start":j=o3("calc(".concat(s,")"));break;case"middle":j=o3("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:j=o3("calc(".concat(f.length-1," * -").concat(a,")"));break}var k=[];if(i){var I=f[0].width,{width:E}=d;k.push("scale(".concat(ur(E)?E/I:1,")"))}return g&&k.push("rotate(".concat(g,", ").concat(w,", ").concat(_,")")),k.length&&(y.transform=k.join(" ")),S.createElement("text",NF({},Wn(y,!0),{ref:t,x:w,y:_,className:gn("recharts-text",x),textAnchor:o,fill:u.includes("url")?g$:u}),f.map((N,B)=>{var R=N.words.join(b?"":" ");return S.createElement("tspan",{x:w,dy:B===0?j:a,key:"".concat(R,"-").concat(B)},R)}))});X1.displayName="Text";var B3e=["offset"],T3e=["labelRef"];function x$(e,t){if(e==null)return{};var r,n,a=j3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function j3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function v$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ws(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?v$(Object(r),!0).forEach(function(n){I3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I3e(e,t,r){return(t=F3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F3e(e){var t=O3e(e,"string");return typeof t=="symbol"?t:t+""}function O3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qf.apply(null,arguments)}var D3e=e=>{var{value:t,formatter:r}=e,n=ks(e.children)?t:e.children;return typeof r=="function"?r(n):n},c8=e=>e!=null&&typeof e=="function",P3e=(e,t)=>{var r=Wi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},R3e=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=n,g=(u+d)/2,x=P3e(f,h),b=x>=0?1:-1,y,w;a==="insideStart"?(y=f+b*s,w=p):a==="insideEnd"?(y=h-b*s,w=!p):a==="end"&&(y=h+b*s,w=p),w=x<=0?w:!w;var _=Zn(o,c,g,y),j=Zn(o,c,g,y+(w?1:-1)*359),k="M".concat(_.x,",").concat(_.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(j.x,",").concat(j.y),I=ks(e.id)?Fw("recharts-radial-line-"):e.id;return S.createElement("text",qf({},r,{dominantBaseline:"central",className:gn("recharts-radial-bar-label",i)}),S.createElement("defs",null,S.createElement("path",{id:I,d:k})),S.createElement("textPath",{xlinkHref:"#".concat(I)},t))},L3e=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=Zn(n,a,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:p,y:g}=Zn(n,a,h,u);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},M3e=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:o,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",p=o>=0?1:-1,g=p*n,x=p>0?"end":"start",b=p>0?"start":"end";if(a==="top"){var y={x:s+o/2,y:i-u*n,textAnchor:"middle",verticalAnchor:f};return ws(ws({},y),r?{height:Math.max(i-r.y,0),width:o}:{})}if(a==="bottom"){var w={x:s+o/2,y:i+c+d,textAnchor:"middle",verticalAnchor:h};return ws(ws({},w),r?{height:Math.max(r.y+r.height-(i+c),0),width:o}:{})}if(a==="left"){var _={x:s-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"};return ws(ws({},_),r?{width:Math.max(_.x-r.x,0),height:c}:{})}if(a==="right"){var j={x:s+o+g,y:i+c/2,textAnchor:b,verticalAnchor:"middle"};return ws(ws({},j),r?{width:Math.max(r.x+r.width-j.x,0),height:c}:{})}var k=r?{width:o,height:c}:{};return a==="insideLeft"?ws({x:s+g,y:i+c/2,textAnchor:b,verticalAnchor:"middle"},k):a==="insideRight"?ws({x:s+o-g,y:i+c/2,textAnchor:x,verticalAnchor:"middle"},k):a==="insideTop"?ws({x:s+o/2,y:i+d,textAnchor:"middle",verticalAnchor:h},k):a==="insideBottom"?ws({x:s+o/2,y:i+c-d,textAnchor:"middle",verticalAnchor:f},k):a==="insideTopLeft"?ws({x:s+g,y:i+d,textAnchor:b,verticalAnchor:h},k):a==="insideTopRight"?ws({x:s+o-g,y:i+d,textAnchor:x,verticalAnchor:h},k):a==="insideBottomLeft"?ws({x:s+g,y:i+c-d,textAnchor:b,verticalAnchor:f},k):a==="insideBottomRight"?ws({x:s+o-g,y:i+c-d,textAnchor:x,verticalAnchor:f},k):a&&typeof a=="object"&&(ur(a.x)||jp(a.x))&&(ur(a.y)||jp(a.y))?ws({x:s+wl(a.x,o),y:i+wl(a.y,c),textAnchor:"end",verticalAnchor:"end"},k):ws({x:s+o/2,y:i+c/2,textAnchor:"middle",verticalAnchor:"middle"},k)},U3e=e=>"cx"in e&&ur(e.cx);function ql(e){var{offset:t=5}=e,r=x$(e,B3e),n=ws({offset:t},r),{viewBox:a,position:s,value:i,children:o,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=ir(V1),p=eR(),g=s==="center"?p:h??p,x=a||g;if(!x||ks(i)&&ks(o)&&!S.isValidElement(c)&&typeof c!="function")return null;var b=ws(ws({},n),{},{viewBox:x});if(S.isValidElement(c)){var{labelRef:y}=b,w=x$(b,T3e);return S.cloneElement(c,w)}var _;if(typeof c=="function"){if(_=S.createElement(c,b),S.isValidElement(_))return _}else _=D3e(n);var j=U3e(x),k=Wn(n,!0);if(j&&(s==="insideStart"||s==="insideEnd"||s==="end"))return R3e(n,_,k,x);var I=j?L3e(x,n.offset,n.position):M3e(n,x);return S.createElement(X1,qf({ref:f,className:gn("recharts-label",u)},k,I,{breakAll:d}),_)}ql.displayName="Label";var pae=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:o,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:p,width:g,height:x,clockWise:b,labelViewBox:y}=e;if(y)return y;if(ur(g)&&ur(x)){if(ur(d)&&ur(f))return{x:d,y:f,width:g,height:x};if(ur(h)&&ur(p))return{x:h,y:p,width:g,height:x}}if(ur(d)&&ur(f))return{x:d,y:f,width:0,height:0};if(ur(t)&&ur(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||o||i||0,clockWise:b};if(e.viewBox)return e.viewBox},Q3e=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?S.createElement(ql,qf({key:"label-implicit"},n)):tf(e)?S.createElement(ql,qf({key:"label-implicit",value:e},n)):S.isValidElement(e)?e.type===ql?S.cloneElement(e,ws({key:"label-implicit"},n)):S.createElement(ql,qf({key:"label-implicit",content:e},n)):c8(e)?S.createElement(ql,qf({key:"label-implicit",content:e},n)):e&&typeof e=="object"?S.createElement(ql,qf({},e,{key:"label-implicit"},n)):null},H3e=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=pae(t),o=R2(a,ql).map((u,d)=>S.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return o;var c=Q3e(t.label,r||i,s);return[c,...o]};ql.parseViewBox=pae;ql.renderCallByParent=H3e;var l3={},c3={},b$;function V3e(){return b$||(b$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(c3)),c3}var u3={},y$;function z3e(){return y$||(y$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(u3)),u3}var w$;function $3e(){return w$||(w$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=V3e(),r=z3e(),n=UP();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(l3)),l3}var d3,E$;function G3e(){return E$||(E$=1,d3=$3e().last),d3}var K3e=G3e();const gae=Cl(K3e);var q3e=["valueAccessor"],W3e=["data","dataKey","clockWise","id","textBreakAll"];function FN(){return FN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FN.apply(null,arguments)}function C$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?C$(Object(r),!0).forEach(function(n){X3e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X3e(e,t,r){return(t=Y3e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Y3e(e){var t=J3e(e,"string");return typeof t=="symbol"?t:t+""}function J3e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N$(e,t){if(e==null)return{};var r,n,a=Z3e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Z3e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var eIe=e=>Array.isArray(e.value)?gae(e.value):e.value;function sm(e){var{valueAccessor:t=eIe}=e,r=N$(e,q3e),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:o}=r,c=N$(r,W3e);return!n||!n.length?null:S.createElement(us,{className:"recharts-label-list"},n.map((u,d)=>{var f=ks(a)?t(u,d):Pa(u&&u.payload,a),h=ks(i)?{}:{id:"".concat(i,"-").concat(d)};return S.createElement(ql,FN({},Wn(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:ql.parseViewBox(ks(s)?u:_$(_$({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}sm.displayName="LabelList";function tIe(e,t){return e?e===!0?S.createElement(sm,{key:"labelList-implicit",data:t}):S.isValidElement(e)||c8(e)?S.createElement(sm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?S.createElement(sm,FN({data:t},e,{key:"labelList-implicit"})):null:null}function rIe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=R2(n,sm).map((i,o)=>S.cloneElement(i,{data:t,key:"labelList-".concat(o)}));if(!r)return a;var s=tIe(e.label,t);return[s,...a]}sm.renderCallByParent=rIe;var nIe=["points","className","baseLinePoints","connectNulls"];function av(){return av=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},av.apply(null,arguments)}function aIe(e,t){if(e==null)return{};var r,n,a=sIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function sIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var S$=e=>e&&e.x===+e.x&&e.y===+e.y,iIe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{S$(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),S$(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},tw=(e,t)=>{var r=iIe(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,o)=>"".concat(s).concat(o===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},oIe=(e,t,r)=>{var n=tw(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(tw(t.reverse(),r).slice(1))},xae=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=aIe(e,nIe);if(!t||!t.length)return null;var i=gn("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&s.stroke!=="none",c=oIe(t,n,a);return S.createElement("g",{className:i},S.createElement("path",av({},Wn(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),o?S.createElement("path",av({},Wn(s,!0),{fill:"none",d:tw(t,a)})):null,o?S.createElement("path",av({},Wn(s,!0),{fill:"none",d:tw(n,a)})):null)}var u=tw(t,a);return S.createElement("path",av({},Wn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function SF(){return SF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},SF.apply(null,arguments)}var u8=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=gn("recharts-dot",a);return t===+t&&r===+r&&n===+n?S.createElement("circle",SF({},il(e),jP(e),{className:s,cx:t,cy:r,r:n})):null},d8=e=>e.graphicalItems.polarItems,lIe=ut([ka,G2],RR),A8=ut([d8,Xs,lIe],MR),cIe=ut([A8],UR),f8=ut([cIe,V4],QR),vae=ut([f8,Xs,A8],VR),uIe=ut([f8,Xs,A8],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Pa(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Pa(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),k$=()=>{},dIe=ut([Xs,_ne,k$,uIe,k$,jn,ka],$R),bae=ut([Xs,jn,f8,vae,z2,ka,dIe],GR),yae=ut([bae,Xs,Um],qR),AIe=ut([Xs,bae,yae,ka],XR),h8=(e,t,r)=>{switch(t){case"angleAxis":return H1(e,r);case"radiusAxis":return $2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},m8=(e,t,r)=>{switch(t){case"angleAxis":return BBe(e,r);case"radiusAxis":return TBe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Y1=ut([h8,Um,AIe,m8],X4),wae=ut([jn,vae,$1,ka],YR),J1=ut([jn,h8,Um,Y1,yae,m8,W2,wae,ka],One);ut([jn,h8,Y1,m8,W2,wae,ka],Pne);var fIe=(e,t)=>J1(e,"angleAxis",t,!1),hIe=ut([fIe],e=>{if(e)return e.map(t=>t.coordinate)}),mIe=(e,t)=>J1(e,"radiusAxis",t,!1),pIe=ut([mIe],e=>{if(e)return e.map(t=>t.coordinate)}),gIe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function xIe(e,t){if(e==null)return{};var r,n,a=vIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function vIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function yh(){return yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yh.apply(null,arguments)}function B$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function a1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B$(Object(r),!0).forEach(function(n){bIe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bIe(e,t,r){return(t=yIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yIe(e){var t=wIe(e,"string");return typeof t=="symbol"?t:t+""}function wIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EIe=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var o=Zn(t,r,e,s);i?a+="L ".concat(o.x,",").concat(o.y):a+="M ".concat(o.x,",").concat(o.y)}),a+="Z",a},CIe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var o=a1({stroke:"#ccc"},il(e));return S.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=Zn(t,r,n,c),d=Zn(t,r,a,c);return S.createElement("line",yh({},o,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},_Ie=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=a1(a1({stroke:"#ccc"},il(e)),{},{fill:"none"});return S.createElement("circle",yh({},s,{className:gn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},NIe=e=>{var{radius:t,index:r}=e,n=a1(a1({stroke:"#ccc"},il(e)),{},{fill:"none"});return S.createElement("path",yh({},n,{className:gn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:EIe(t,e.cx,e.cy,e.polarAngles)}))},SIe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:S.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?S.createElement(_Ie,yh({key:s},e,{radius:n,index:a})):S.createElement(NIe,yh({key:s},e,{radius:n,index:a}))}))},Eae=e=>{var t,r,n,a,s,i,o,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:p,cy:g,innerRadius:x,outerRadius:b}=e,y=xIe(e,gIe),w=ir(V1),_=a1({cx:(t=(r=w==null?void 0:w.cx)!==null&&r!==void 0?r:p)!==null&&t!==void 0?t:0,cy:(n=(a=w==null?void 0:w.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(i=w==null?void 0:w.innerRadius)!==null&&i!==void 0?i:x)!==null&&s!==void 0?s:0,outerRadius:(o=(c=w==null?void 0:w.outerRadius)!==null&&c!==void 0?c:b)!==null&&o!==void 0?o:0},y),{polarAngles:j,polarRadius:k,cx:I,cy:E,innerRadius:N,outerRadius:B}=_,R=ir(M=>hIe(M,f)),P=ir(M=>pIe(M,h)),D=Array.isArray(j)?j:R,L=Array.isArray(k)?k:P;return B<=0||D==null||L==null?null:S.createElement("g",{className:"recharts-polar-grid"},S.createElement(CIe,yh({cx:I,cy:E,innerRadius:N,outerRadius:B,gridType:u,radialLines:d},_,{polarAngles:D,polarRadius:L})),S.createElement(SIe,yh({cx:I,cy:E,innerRadius:N,outerRadius:B,gridType:u,radialLines:d},_,{polarAngles:D,polarRadius:L})))};Eae.displayName="PolarGrid";var A3={},f3={},T$;function kIe(){return T$||(T$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c>s&&(s=c,a=o)}return a}e.maxBy=t}(f3)),f3}var j$;function BIe(){return j$||(j$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=kIe(),r=_4(),n=$P();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(A3)),A3}var h3,I$;function TIe(){return I$||(I$=1,h3=BIe().maxBy),h3}var jIe=TIe();const IIe=Cl(jIe);var m3={},p3={},F$;function FIe(){return F$||(F$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c<s&&(s=c,a=o)}return a}e.minBy=t}(p3)),p3}var O$;function OIe(){return O$||(O$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FIe(),r=_4(),n=$P();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(m3)),m3}var g3,D$;function DIe(){return D$||(D$=1,g3=OIe().minBy),g3}var PIe=DIe();const RIe=Cl(PIe);var LIe={radiusAxis:{},angleAxis:{}},Cae=Gc({name:"polarAxis",initialState:LIe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:MIe,removeRadiusAxis:UIe,addAngleAxis:QIe,removeAngleAxis:HIe}=Cae.actions,VIe=Cae.reducer,zIe=["cx","cy","angle","axisLine"],$Ie=["angle","tickFormatter","stroke","tick"];function Vw(){return Vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vw.apply(null,arguments)}function P$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?P$(Object(r),!0).forEach(function(n){ek(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ek(e,t,r){return(t=GIe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GIe(e){var t=KIe(e,"string");return typeof t=="symbol"?t:t+""}function KIe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _ae(e,t){if(e==null)return{};var r,n,a=qIe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qIe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Nae="radiusAxis";function WIe(e){var t=$a();return S.useEffect(()=>(t(MIe(e)),()=>{t(UIe(e))})),null}var XIe=(e,t,r,n)=>{var{coordinate:a}=e;return Zn(r,n,a,t)},YIe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},JIe=(e,t,r,n)=>{var a=IIe(n,i=>i.coordinate||0),s=RIe(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},ZIe=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=_ae(e,zIe),o=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=Zn(r,n,o[0],a),u=Zn(r,n,o[1],a),d=MA(MA(MA({},il(i)),{},{fill:"none"},Wn(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return S.createElement("line",Vw({className:"recharts-polar-radius-axis-line"},d))},e6e=(e,t,r)=>{var n;return S.isValidElement(e)?n=S.cloneElement(e,t):typeof e=="function"?n=e(t):n=S.createElement(X1,Vw({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},t6e=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=_ae(e,$Ie),o=YIe(e.orientation),c=il(i),u=Wn(s,!1),d=t.map((f,h)=>{var p=XIe(f,e.angle,e.cx,e.cy),g=MA(MA(MA(MA({textAnchor:o,transform:"rotate(".concat(90-r,", ").concat(p.x,", ").concat(p.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:h},p),{},{payload:f});return S.createElement(us,Vw({className:gn("recharts-polar-radius-axis-tick",Ote(s)),key:"tick-".concat(f.coordinate)},jg(e,f,h)),e6e(s,g,n?n(f.value,h):f.value))});return S.createElement(us,{className:"recharts-polar-radius-axis-ticks"},d)},r6e=e=>{var{radiusAxisId:t}=e,r=ir(V1),n=ir(c=>Y1(c,"radiusAxis",t)),a=ir(c=>J1(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=MA(MA(MA({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:o}=s;return S.createElement(us,{className:gn("recharts-polar-radius-axis",Nae,s.className)},o&&ZIe(s,a),i&&t6e(s,a),ql.renderCallByParent(s,JIe(s.angle,s.cx,s.cy,a)))};class tk extends S.PureComponent{render(){return S.createElement(S.Fragment,null,S.createElement(WIe,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),S.createElement(r6e,this.props))}}ek(tk,"displayName","PolarRadiusAxis");ek(tk,"axisType",Nae);ek(tk,"defaultProps",Gl);var n6e=["children"];function wh(){return wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wh.apply(null,arguments)}function R$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?R$(Object(r),!0).forEach(function(n){rk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rk(e,t,r){return(t=a6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a6e(e){var t=s6e(e,"string");return typeof t=="symbol"?t:t+""}function s6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i6e(e,t){if(e==null)return{};var r,n,a=o6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function o6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var l6e=Math.PI/180,L$=1e-5,Sae="angleAxis";function c6e(e){var t=$a(),r=S.useMemo(()=>{var{children:s}=e,i=i6e(e,n6e);return i},[e]),n=ir(s=>H1(s,r.id)),a=r===n;return S.useEffect(()=>(t(QIe(r)),()=>{t(HIe(r))}),[t,r]),a?e.children:null}var u6e=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,o=i||8,c=Zn(r,n,a,e.coordinate),u=Zn(r,n,a+(s==="inner"?-1:1)*o,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},d6e=(e,t)=>{var r=Math.cos(-e.coordinate*l6e);return r>L$?t==="outer"?"start":"end":r<-L$?t==="outer"?"end":"start":"middle"},A6e=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var o=DA(DA({},il(e)),{},{fill:"none"},Wn(s,!1));if(a==="circle")return S.createElement(u8,wh({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:n}));var c=i.map(u=>Zn(t,r,n,u.coordinate));return S.createElement(xae,wh({className:"recharts-polar-angle-axis-line"},o,{points:c}))},f6e=e=>{var{tick:t,tickProps:r,value:n}=e;return t?S.isValidElement(t)?S.cloneElement(t,r):typeof t=="function"?t(r):S.createElement(X1,wh({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},h6e=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=il(e),o=Wn(t,!1),c=DA(DA({},i),{},{fill:"none"},Wn(r,!1)),u=s.map((d,f)=>{var h=u6e(d,e),p=d6e(d,e.orientation),g=DA(DA(DA({},i),{},{textAnchor:p,stroke:"none",fill:a},o),{},{index:f,payload:d,x:h.x2,y:h.y2});return S.createElement(us,wh({className:gn("recharts-polar-angle-axis-tick",Ote(t)),key:"tick-".concat(d.coordinate)},jg(e,d,f)),r&&S.createElement("line",wh({className:"recharts-polar-angle-axis-tick-line"},c,h)),S.createElement(f6e,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return S.createElement(us,{className:"recharts-polar-angle-axis-ticks"},u)},m6e=e=>{var{angleAxisId:t}=e,r=ir(V1),n=ir(o=>Y1(o,"angleAxis",t)),a=ac(),s=ir(o=>J1(o,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=DA(DA(DA({},e),{},{scale:n},r),{},{radius:r.outerRadius});return S.createElement(us,{className:gn("recharts-polar-angle-axis",Sae,i.className)},S.createElement(A6e,wh({},i,{ticks:s})),S.createElement(h6e,wh({},i,{ticks:s})))};class nk extends S.PureComponent{render(){return this.props.radius<=0?null:S.createElement(c6e,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},S.createElement(m6e,this.props))}}rk(nk,"displayName","PolarAngleAxis");rk(nk,"axisType",Sae);rk(nk,"defaultProps",OA);function M$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function U$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M$(Object(r),!0).forEach(function(n){p6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p6e(e,t,r){return(t=g6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g6e(e){var t=x6e(e,"string");return typeof t=="symbol"?t:t+""}function x6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v6e=(e,t)=>t,p8=ut([d8,v6e],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),b6e=[],g8=(e,t,r)=>(r==null?void 0:r.length)===0?b6e:r,kae=ut([V4,p8,g8],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>U$(U$({},t.presentationProps),s.props))),a!=null)return a}}),y6e=ut([kae,p8,g8],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Pa(n,t.nameKey,t.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:L1(i,t.dataKey),color:o,payload:n,type:t.legendType}})}),w6e=ut([kae,p8,g8,ki],(e,t,r,n)=>{if(!(t==null||e==null))return mFe({offset:n,pieSettings:t,displayedData:e,cells:r})}),x3={},Q$;function E6e(){return Q$||(Q$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(x3)),x3}var v3,H$;function C6e(){return H$||(H$=1,v3=E6e().isPlainObject),v3}var _6e=C6e();const N6e=Cl(_6e);function ON(){return ON=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ON.apply(null,arguments)}var V$=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},S6e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},k6e=e=>{var t=zu(e,S6e),r=S.useRef(),[n,a]=S.useState(-1);S.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var{x:s,y:i,upperWidth:o,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||u!==+u||o===0&&c===0||u===0)return null;var x=gn("recharts-trapezoid",d);return g?S.createElement(xN,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:o,lowerWidth:c,height:u,x:s,y:i},duration:h,animationEasing:f,isActive:g},b=>{var{upperWidth:y,lowerWidth:w,height:_,x:j,y:k}=b;return S.createElement(xN,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:f},S.createElement("path",ON({},Wn(t,!0),{className:x,d:V$(j,k,y,w,_),ref:r})))}):S.createElement("g",null,S.createElement("path",ON({},Wn(t,!0),{className:x,d:V$(s,i,o,c,u)})))},B6e=["option","shapeType","propTransformer","activeClassName","isActive"];function T6e(e,t){if(e==null)return{};var r,n,a=j6e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function j6e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z$(Object(r),!0).forEach(function(n){I6e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I6e(e,t,r){return(t=F6e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F6e(e){var t=O6e(e,"string");return typeof t=="symbol"?t:t+""}function O6e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function D6e(e,t){return DN(DN({},t),e)}function P6e(e,t){return e==="symbols"}function $$(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return S.createElement(ere,r);case"trapezoid":return S.createElement(k6e,r);case"sector":return S.createElement(nre,r);case"symbols":if(P6e(t))return S.createElement(RP,r);break;default:return null}}function R6e(e){return S.isValidElement(e)?e.props:e}function Bae(e){var{option:t,shapeType:r,propTransformer:n=D6e,activeClassName:a="recharts-active-shape",isActive:s}=e,i=T6e(e,B6e),o;if(S.isValidElement(t))o=S.cloneElement(t,DN(DN({},i),R6e(t)));else if(typeof t=="function")o=t(i);else if(N6e(t)&&typeof t!="boolean"){var c=n(t,i);o=S.createElement($$,{shapeType:r,elementProps:c})}else{var u=i;o=S.createElement($$,{shapeType:r,elementProps:u})}return s?S.createElement(us,{className:a},o):o}var x8=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(Hne({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},v8=e=>{var t=$a();return(r,n)=>a=>{e==null||e(r,n,a),t(_Te())}},b8=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(NTe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function y8(e){var{fn:t,args:r}=e,n=$a(),a=ac();return S.useEffect(()=>{if(!a){var s=t(r);return n(wTe(s)),()=>{n(ETe(s))}}},[t,r,n,a]),null}var Tae=()=>{};function L6e(e){var{legendPayload:t}=e,r=$a(),n=ac();return S.useEffect(()=>n?Tae:(r(zte(t)),()=>{r($te(t))}),[r,n,t]),null}function jae(e){var{legendPayload:t}=e,r=$a(),n=ir(jn);return S.useEffect(()=>n!=="centric"&&n!=="radial"?Tae:(r(zte(t)),()=>{r($te(t))}),[r,n,t]),null}function w8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=S.useRef(Fw(t)),n=S.useRef(e);return n.current!==e&&(r.current=Fw(t),n.current=e),r.current}var b3,M6e=()=>{var[e]=S.useState(()=>Fw("uid-"));return e},U6e=(b3=_fe.useId)!==null&&b3!==void 0?b3:M6e;function Q6e(e,t){var r=U6e();return t||(e?"".concat(e,"-").concat(r):r)}var H6e=S.createContext(void 0),E8=e=>{var{id:t,type:r,children:n}=e,a=Q6e("recharts-".concat(r),t);return S.createElement(H6e.Provider,{value:a},n(a))},V6e={cartesianItems:[],polarItems:[]},Iae=Gc({name:"graphicalItems",initialState:V6e,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=sh(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=sh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=sh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:z6e,replaceCartesianGraphicalItem:$6e,removeCartesianGraphicalItem:G6e,addPolarGraphicalItem:K6e,removePolarGraphicalItem:q6e}=Iae.actions,W6e=Iae.reducer;function X6e(e){var t=$a(),r=S.useRef(null);return S.useEffect(()=>{r.current===null?t(z6e(e)):r.current!==e&&t($6e({prev:r.current,next:e})),r.current=e},[t,e]),S.useEffect(()=>()=>{r.current&&(t(G6e(r.current)),r.current=null)},[t]),null}function Fae(e){var t=$a();return S.useEffect(()=>(t(K6e(e)),()=>{t(q6e(e))}),[t,e]),null}function Y6e(){}var J6e={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},G$={t:0},y3={t:1};function C8(e){var t=zu(e,J6e),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=Zte("JavascriptAnimate",t.animationManager),[f,h]=S.useState(r?G$:y3),p=S.useRef(null);return S.useEffect(()=>{r||h(y3)},[r]),S.useEffect(()=>{if(!r||!n)return Y6e;var g=Jte(G$,y3,Xte(s),a,h,d.getTimeoutController()),x=()=>{p.current=g()};return d.start([c,i,x,a,o]),()=>{d.stop(),p.current&&p.current(),o()}},[r,n,a,s,i,c,o,d]),u(f.t)}var Z6e=["onMouseEnter","onClick","onMouseLeave"],eFe=["id"],tFe=["id"];function _8(e,t){if(e==null)return{};var r,n,a=rFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function K$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _s(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K$(Object(r),!0).forEach(function(n){nFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nFe(e,t,r){return(t=aFe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aFe(e){var t=sFe(e,"string");return typeof t=="symbol"?t:t+""}function sFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eh(){return Eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eh.apply(null,arguments)}function iFe(e){var t=S.useMemo(()=>R2(e.children,mg),[e.children]),r=ir(n=>y6e(n,e.id,t));return r==null?null:S.createElement(jae,{legendPayload:r})}function oFe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:L1(o,t),hide:c,type:u,color:i,unit:""}}}var lFe=(e,t)=>e>t?"start":e<t?"end":"middle",cFe=(e,t,r)=>typeof t=="function"?t(e):wl(t,r,r*.8),uFe=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=Fte(s,i),c=a+wl(e.cx,s,s/2),u=n+wl(e.cy,i,i/2),d=wl(e.innerRadius,o,0),f=cFe(r,e.outerRadius,o),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},dFe=(e,t)=>{var r=Wi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},AFe=(e,t)=>{if(S.isValidElement(e))return S.cloneElement(e,t);if(typeof e=="function")return e(t);var r=gn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return S.createElement(Kte,Eh({},t,{type:"linear",className:r}))},fFe=(e,t,r)=>{if(S.isValidElement(e))return S.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),S.isValidElement(n)))return n;var a=gn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return S.createElement(X1,Eh({},t,{alignmentBaseline:"middle",className:a}),n)};function hFe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var o=il(r),c=Wn(a,!1),u=Wn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,p)=>{var g=(h.startAngle+h.endAngle)/2,x=Zn(h.cx,h.cy,h.outerRadius+d,g),b=_s(_s(_s(_s({},o),h),{},{stroke:"none"},c),{},{index:p,textAnchor:lFe(x.x,h.cx)},x),y=_s(_s(_s(_s({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:p,points:[Zn(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return S.createElement(us,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},s&&AFe(s,y),fFe(a,b,Pa(h,i)))});return S.createElement(us,{className:"recharts-pie-labels"},f)}function Oae(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=ir(ym),{onMouseEnter:o,onClick:c,onMouseLeave:u}=a,d=_8(a,Z6e),f=x8(o,a.dataKey),h=v8(u),p=b8(c,a.dataKey);return t==null?null:S.createElement(S.Fragment,null,t.map((g,x)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var b=r&&String(x)===i,y=i?n:null,w=b?r:y,_=_s(_s({},g),{},{stroke:g.stroke,tabIndex:-1,[Mte]:x,[Ute]:a.dataKey});return S.createElement(us,Eh({tabIndex:-1,className:"recharts-pie-sector"},jg(d,g,x),{onMouseEnter:f(g,x),onMouseLeave:h(g,x),onClick:p(g,x),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(x)}),S.createElement(Bae,Eh({option:w,isActive:b,shapeType:"sector"},_)))}),S.createElement(hFe,{sectors:t,props:a,showLabels:s}))}function mFe(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:o,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),p=dFe(o,c),g=Math.abs(p),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(I=>Pa(I,u,0)!==0).length,y=(g>=360?b:b-1)*x,w=g-b*h-y,_=n.reduce((I,E)=>{var N=Pa(E,u,0);return I+(ur(N)?N:0)},0),j;if(_>0){var k;j=n.map((I,E)=>{var N=Pa(I,u,0),B=Pa(I,d,E),R=uFe(r,s,I),P=(ur(N)?N:0)/_,D,L=_s(_s({},I),a&&a[E]&&a[E].props);E?D=k.endAngle+Wi(p)*x*(N!==0?1:0):D=o;var M=D+Wi(p)*((N!==0?h:0)+P*w),J=(D+M)/2,H=(R.innerRadius+R.outerRadius)/2,K=[{name:B,value:N,payload:L,dataKey:u,type:f}],V=Zn(R.cx,R.cy,H,J);return k=_s(_s(_s(_s({},r.presentationProps),{},{percent:P,cornerRadius:i,name:B,tooltipPayload:K,midAngle:J,middleRadius:H,tooltipPosition:V},L),R),{},{value:Pa(I,u),startAngle:D,endAngle:M,payload:L,paddingAngle:Wi(p)*x}),k})}return j}function pFe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=w8(t,"recharts-pie-"),p=r.current,[g,x]=S.useState(!0),b=S.useCallback(()=>{typeof f=="function"&&f(),x(!1)},[f]),y=S.useCallback(()=>{typeof d=="function"&&d(),x(!0)},[d]);return S.createElement(C8,{begin:s,duration:i,isActive:a,easing:o,onAnimationStart:y,onAnimationEnd:b,key:h},w=>{var _=[],j=n&&n[0],k=j.startAngle;return n.forEach((I,E)=>{var N=p&&p[E],B=E>0?bm(I,"paddingAngle",0):0;if(N){var R=rv(N.endAngle-N.startAngle,I.endAngle-I.startAngle),P=_s(_s({},I),{},{startAngle:k+B,endAngle:k+R(w)+B});_.push(P),k=P.endAngle}else{var{endAngle:D,startAngle:L}=I,M=rv(0,D-L),J=M(w),H=_s(_s({},I),{},{startAngle:k+B,endAngle:k+J+B});_.push(H),k=H.endAngle}}),r.current=_,S.createElement(us,null,S.createElement(Oae,{sectors:_,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function gFe(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=S.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?S.createElement(pFe,{props:e,previousSectorsRef:s}):S.createElement(Oae,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function xFe(e){var{hide:t,className:r,rootTabIndex:n}=e,a=gn("recharts-pie",r);return t?null:S.createElement(us,{tabIndex:n,className:a},S.createElement(gFe,e))}var vFe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Ig.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function bFe(e){var{id:t}=e,r=_8(e,eFe),n=S.useMemo(()=>R2(e.children,mg),[e.children]),a=ir(s=>w6e(s,t,n));return S.createElement(S.Fragment,null,S.createElement(y8,{fn:oFe,args:_s(_s({},e),{},{sectors:a})}),S.createElement(xFe,Eh({},r,{sectors:a})))}function N8(e){var t=zu(e,vFe),{id:r}=t,n=_8(t,tFe),a=il(n);return S.createElement(E8,{id:r,type:"pie"},s=>S.createElement(S.Fragment,null,S.createElement(Fae,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),S.createElement(iFe,Eh({},n,{id:s})),S.createElement(bFe,Eh({},n,{id:s})),n.children))}N8.displayName="Pie";var yFe=ut([ki],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),wFe=ut([yFe,jh,Ih],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Dae=()=>ir(wFe),EFe=()=>ir(Aje);function q$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function W$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q$(Object(r),!0).forEach(function(n){CFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CFe(e,t,r){return(t=_Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Fe(e){var t=NFe(e,"string");return typeof t=="symbol"?t:t+""}function NFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var SFe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=W$(W$({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Wn(a,!1)),jP(a)),o;return S.isValidElement(a)?o=S.cloneElement(a,i):typeof a=="function"?o=a(i):o=S.createElement(u8,i),S.createElement(us,{className:"recharts-active-dot"},o)};function kFe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=ir(ym),i=EFe();if(t==null||i==null)return null;var o=t.find(c=>i.includes(c.payload));return ks(o)?null:SFe({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function X$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function PN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?X$(Object(r),!0).forEach(function(n){BFe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BFe(e,t,r){return(t=TFe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TFe(e){var t=jFe(e,"string");return typeof t=="symbol"?t:t+""}function jFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pae=(e,t)=>Y1(e,"radiusAxis",t),IFe=ut([Pae],e=>{if(e!=null)return{scale:e}}),FFe=ut([$2,Pae],(e,t)=>{if(!(e==null||t==null))return PN(PN({},e),{},{scale:t})}),OFe=(e,t,r,n)=>J1(e,"radiusAxis",t,n),Rae=(e,t,r)=>H1(e,r),Lae=(e,t,r)=>Y1(e,"angleAxis",r),DFe=ut([Rae,Lae],(e,t)=>{if(!(e==null||t==null))return PN(PN({},e),{},{scale:t})}),PFe=(e,t,r,n)=>J1(e,"angleAxis",r,n),RFe=ut([Rae,Lae,V1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),LFe=(e,t,r,n,a)=>a,MFe=ut([jn,FFe,OFe,DFe,PFe],(e,t,r,n,a)=>Dm(e,"radiusAxis")?Pw(t,r,!1):Pw(n,a,!1)),UFe=ut([d8,LFe],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),QFe=ut([IFe,RFe,V4,UFe,MFe],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:o}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(i,o+1);return XFe({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),HFe=["id"];function VFe(e,t){if(e==null)return{};var r,n,a=zFe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function zFe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Y$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function bl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y$(Object(r),!0).forEach(function(n){S8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S8(e,t,r){return(t=$Fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Fe(e){var t=GFe(e,"string");return typeof t=="symbol"?t:t+""}function GFe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function s1(){return s1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s1.apply(null,arguments)}function k8(e,t){return e&&e!=="none"?e:t}var KFe=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:k8(n,a),value:L1(r,t),payload:e}]};function qFe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:L1(s,t),hide:i,type:o,color:k8(r,a),unit:""}}}function WFe(e,t){var r;return S.isValidElement(e)?r=S.cloneElement(e,t):typeof e=="function"?r=e(t):r=S.createElement(u8,s1({},t,{className:gn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function XFe(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:o}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,p)=>{var g=Pa(h,r.dataKey,p),x=Pa(h,a),b=r.scale(g)+d,y=Array.isArray(x)?gae(x):x,w=ks(y)?void 0:t.scale(y);Array.isArray(x)&&x.length>=2&&(c=!0),u.push(bl(bl({},Zn(i,o,w,b)),{},{name:g,value:x,cx:i,cy:o,radius:w,angle:b,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var p=h.value[0],g=ks(p)?void 0:t.scale(p);f.push(bl(bl({},h),{},{radius:g},Zn(i,o,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function YFe(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=VFe(r,HFe),o=il(i),c=Wn(n,!0),u=t.map((d,f)=>{var h=bl(bl(bl({key:"dot-".concat(f),r:3},o),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return WFe(n,h)});return S.createElement(us,{className:"recharts-radar-dots"},u)}function Mae(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:o}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return S.isValidElement(a)?d=S.cloneElement(a,bl(bl({},r),{},{points:t})):typeof a=="function"?d=a(bl(bl({},r),{},{points:t})):d=S.createElement(xae,s1({},Wn(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:o})),S.createElement(us,{className:"recharts-radar-polygon"},d,S.createElement(YFe,{props:r,points:t}),n&&sm.renderCallByParent(r,t))}function JFe(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=w8(t,"recharts-radar-"),[h,p]=S.useState(!0),g=S.useCallback(()=>{typeof c=="function"&&c(),p(!1)},[c]),x=S.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return S.createElement(C8,{begin:s,duration:i,isActive:a,easing:o,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:x},b=>{var y=d&&d.length/n.length,w=b===1?n:n.map((_,j)=>{var k=d&&d[Math.floor(j*y)];if(k){var I=rv(k.x,_.x),E=rv(k.y,_.y);return bl(bl({},_),{},{x:I(b),y:E(b)})}var N=rv(_.cx,_.x),B=rv(_.cy,_.y);return bl(bl({},_),{},{x:N(b),y:B(b)})});return b>0&&(r.current=w),S.createElement(Mae,{points:w,props:t,showLabels:!h})})}function ZFe(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=S.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?S.createElement(JFe,{props:e,previousPointsRef:a}):S.createElement(Mae,{points:t,props:e,showLabels:!0})}var eOe={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Ig.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class tOe extends S.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=gn("recharts-radar",r);return S.createElement(S.Fragment,null,S.createElement(us,{className:a},S.createElement(ZFe,this.props)),S.createElement(kFe,{points:n,mainColor:k8(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function rOe(e){var t=ac(),r=ir(n=>QFe(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return S.createElement(tOe,s1({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class B8 extends S.PureComponent{render(){return S.createElement(E8,{id:this.props.id,type:"radar"},t=>S.createElement(S.Fragment,null,S.createElement(Fae,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),S.createElement(jae,{legendPayload:KFe(this.props)}),S.createElement(y8,{fn:qFe,args:this.props}),S.createElement(rOe,s1({},this.props,{id:t}))))}}S8(B8,"displayName","Radar");S8(B8,"defaultProps",eOe);var nOe="Invariant failed";function aOe(e,t){throw new Error(nOe)}var sOe=["x","y"];function kF(){return kF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kF.apply(null,arguments)}function J$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ey(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?J$(Object(r),!0).forEach(function(n){iOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iOe(e,t,r){return(t=oOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oOe(e){var t=lOe(e,"string");return typeof t=="symbol"?t:t+""}function lOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cOe(e,t){if(e==null)return{};var r,n,a=uOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function dOe(e,t){var{x:r,y:n}=e,a=cOe(e,sOe),s="".concat(r),i=parseInt(s,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return ey(ey(ey(ey(ey({},t),a),i?{x:i}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Uae(e){return S.createElement(Bae,kF({shapeType:"rectangle",propTransformer:dOe,activeClassName:"recharts-active-bar"},e))}var AOe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(ur(t))return t;var s=ur(n)||ks(n);return s?t(n,a):(s||aOe(),r)}},fOe={},Qae=Gc({name:"errorBars",initialState:fOe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:Nht,removeErrorBar:Sht}=Qae.actions,hOe=Qae.reducer,mOe=["children"];function pOe(e,t){if(e==null)return{};var r,n,a=gOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function gOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var xOe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},vOe=S.createContext(xOe);function bOe(e){var{children:t}=e,r=pOe(e,mOe);return S.createElement(vOe.Provider,{value:r},t)}function Hae(e,t){var r,n,a=ir(u=>Oh(u,e)),s=ir(u=>Mm(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Sc.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:kc.allowDataOverflow,c=i||o;return{needClip:c,needClipX:i,needClipY:o}}function yOe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Dae(),{needClipX:s,needClipY:i,needClip:o}=Hae(t,r);if(!o)return null;var{x:c,y:u,width:d,height:f}=a;return S.createElement("clipPath",{id:"clipPath-".concat(n)},S.createElement("rect",{x:s?c:c-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var wOe=["onMouseEnter","onMouseLeave","onClick"],EOe=["value","background","tooltipPosition"],COe=["id"],_Oe=["onMouseEnter","onClick","onMouseLeave"];function i1(){return i1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i1.apply(null,arguments)}function Z$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z$(Object(r),!0).forEach(function(n){NOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NOe(e,t,r){return(t=SOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SOe(e){var t=kOe(e,"string");return typeof t=="symbol"?t:t+""}function kOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RN(e,t){if(e==null)return{};var r,n,a=BOe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function BOe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TOe=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:L1(r,t),payload:e}]};function jOe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:L1(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:o}}}function IOe(e){var t=ir(ym),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:o,onClick:c}=s,u=RN(s,wOe),d=x8(i,n),f=v8(o),h=b8(c,n);if(!a||r==null)return null;var p=Wn(a,!1);return S.createElement(S.Fragment,null,r.map((g,x)=>{var{value:b,background:y,tooltipPosition:w}=g,_=RN(g,EOe);if(!y)return null;var j=d(g,x),k=f(g,x),I=h(g,x),E=Ko(Ko(Ko(Ko(Ko({option:a,isActive:String(x)===t},_),{},{fill:"#eee"},y),p),jg(u,g,x)),{},{onMouseEnter:j,onMouseLeave:k,onClick:I,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return S.createElement(Uae,i1({key:"background-bar-".concat(x)},E))}))}function Vae(e){var{data:t,props:r,showLabels:n}=e,a=il(r),{id:s}=a,i=RN(a,COe),{shape:o,dataKey:c,activeBar:u}=r,d=ir(ym),f=ir(tae),{onMouseEnter:h,onClick:p,onMouseLeave:g}=r,x=RN(r,_Oe),b=x8(h,c),y=v8(g),w=b8(p,c);return t?S.createElement(S.Fragment,null,t.map((_,j)=>{var k=u&&String(j)===d&&(f==null||c===f),I=k?u:o,E=Ko(Ko(Ko({},i),_),{},{isActive:k,option:I,index:j,dataKey:c});return S.createElement(us,i1({className:"recharts-bar-rectangle"},jg(x,_,j),{onMouseEnter:b(_,j),onMouseLeave:y(_,j),onClick:w(_,j),key:"rectangle-".concat(_==null?void 0:_.x,"-").concat(_==null?void 0:_.y,"-").concat(_==null?void 0:_.value,"-").concat(j)}),S.createElement(Uae,E))}),n&&sm.renderCallByParent(r,t)):null}function FOe(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=w8(t,"recharts-bar-"),[p,g]=S.useState(!1),x=S.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),b=S.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return S.createElement(C8,{begin:i,duration:o,isActive:s,easing:c,onAnimationEnd:x,onAnimationStart:b,key:h},y=>{var w=y===1?n:n==null?void 0:n.map((_,j)=>{var k=f&&f[j];if(k)return Ko(Ko({},_),{},{x:yx(k.x,_.x,y),y:yx(k.y,_.y,y),width:yx(k.width,_.width,y),height:yx(k.height,_.height,y)});if(a==="horizontal"){var I=yx(0,_.height,y);return Ko(Ko({},_),{},{y:_.y+_.height-I,height:I})}var E=yx(0,_.width,y);return Ko(Ko({},_),{},{width:E})});return y>0&&(r.current=w??null),w==null?null:S.createElement(us,null,S.createElement(Vae,{props:t,data:w,showLabels:!p}))})}function OOe(e){var{data:t,isAnimationActive:r}=e,n=S.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?S.createElement(FOe,{previousRectanglesRef:n,props:e}):S.createElement(Vae,{props:e,data:t,showLabels:!0})}var zae=0,DOe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Pa(e,t)}};class POe extends S.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:o,background:c,id:u}=this.props;if(t)return null;var d=gn("recharts-bar",a),f=u;return S.createElement(us,{className:d,id:u},o&&S.createElement("defs",null,S.createElement(yOe,{clipPathId:f,xAxisId:s,yAxisId:i})),S.createElement(us,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},S.createElement(IOe,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),S.createElement(OOe,this.props)),this.props.children)}}var ROe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ig.isSsr,legendType:"rect",minPointSize:zae,xAxisId:0,yAxisId:0};function LOe(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Hae(t,r),h=nR(),p=ac(),g=R2(e.children,mg),x=ir(w=>dDe(w,t,r,p,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var b,y=x==null?void 0:x[0];return y==null||y.height==null||y.width==null?b=0:b=h==="vertical"?y.height/2:y.width/2,S.createElement(bOe,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:DOe,errorBarOffset:b},S.createElement(POe,i1({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function MOe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p}=e,g=t==="horizontal"?o:i,x=d?g.scale.domain():null,b=O5e({numericAxis:g});return f.map((y,w)=>{var _,j,k,I,E,N;d?_=k5e(d[w],x):(_=Pa(y,r),Array.isArray(_)||(_=[b,_]));var B=AOe(n,zae)(_[1],w);if(t==="horizontal"){var R,[P,D]=[o.scale(_[0]),o.scale(_[1])];j=wV({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:y,index:w}),k=(R=D??P)!==null&&R!==void 0?R:void 0,I=a.size;var L=P-D;if(E=Uc(L)?0:L,N={x:j,y:h.top,width:I,height:h.height},Math.abs(B)>0&&Math.abs(E)<Math.abs(B)){var M=Wi(E||B)*(Math.abs(B)-Math.abs(E));k-=M,E+=M}}else{var[J,H]=[i.scale(_[0]),i.scale(_[1])];if(j=J,k=wV({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:y,index:w}),I=H-J,E=a.size,N={x:h.left,y:k,width:h.width,height:E},Math.abs(B)>0&&Math.abs(I)<Math.abs(B)){var K=Wi(I||B)*(Math.abs(B)-Math.abs(I));I+=K}}if(j==null||k==null||I==null||E==null)return null;var V=Ko(Ko({},y),{},{x:j,y:k,width:I,height:E,value:d?_:_[1],payload:y,background:N,tooltipPosition:{x:j+I/2,y:k+E/2}},p&&p[w]&&p[w].props);return V}).filter(Boolean)}function zw(e){var t=zu(e,ROe),r=ac();return S.createElement(E8,{id:t.id,type:"bar"},n=>S.createElement(S.Fragment,null,S.createElement(L6e,{legendPayload:TOe(t)}),S.createElement(y8,{fn:jOe,args:t}),S.createElement(X6e,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:F5e(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),S.createElement(LOe,i1({},t,{id:n}))))}zw.displayName="Bar";function eG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eG(Object(r),!0).forEach(function(n){UOe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UOe(e,t,r){return(t=QOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QOe(e){var t=HOe(e,"string");return typeof t=="symbol"?t:t+""}function HOe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var VOe=(e,t)=>t,zOe=(e,t,r)=>r,$Oe=(e,t,r,n)=>n,GOe=(e,t,r,n,a)=>a,J2=ut([LR,GOe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),KOe=ut([J2],e=>e==null?void 0:e.maxBarSize),qOe=(e,t,r,n,a,s)=>s,tG=(e,t,r)=>{var n=r??e;if(!ks(n))return wl(n,t,0)},WOe=ut([jn,LR,VOe,zOe,$Oe],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),XOe=(e,t,r,n)=>{var a=jn(e);return a==="horizontal"?yF(e,"yAxis",r,n):yF(e,"xAxis",t,n)},YOe=(e,t,r)=>{var n=jn(e);return n==="horizontal"?Vz(e,"xAxis",t):Vz(e,"yAxis",r)},JOe=(e,t,r)=>{var n={},a=e.filter(K4),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),p=tG(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=tG(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]},ZOe=ut([WOe,EBe,YOe],JOe),eDe=(e,t,r,n,a)=>{var s,i,o=J2(e,t,r,n,a);if(o!=null){var c=jn(e),u=rne(e),{maxBarSize:d}=o,f=ks(d)?u:d,h,p;return c==="horizontal"?(h=n1(e,"xAxis",t,n),p=r1(e,"xAxis",t,n)):(h=n1(e,"yAxis",r,n),p=r1(e,"yAxis",r,n)),(s=(i=Pw(h,p,!0))!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:0}},$ae=(e,t,r,n)=>{var a=jn(e),s,i;return a==="horizontal"?(s=n1(e,"xAxis",t,n),i=r1(e,"xAxis",t,n)):(s=n1(e,"yAxis",r,n),i=r1(e,"yAxis",r,n)),Pw(s,i)};function tDe(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=wl(e,r,0,!0),o,c=[];if(Vc(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,w)=>y+(w.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,p={offset:h-i,size:0};o=n.reduce((y,w)=>{var _,j={stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:p.offset+p.size+i,size:u?d:(_=w.barSize)!==null&&_!==void 0?_:0}},k=[...y,j];return p=k[k.length-1].position,k},c)}else{var g=wl(t,r,0,!0);r-2*g-(s-1)*i<=0&&(i=0);var x=(r-2*g-(s-1)*i)/s;x>1&&(x>>=0);var b=Vc(a)?Math.min(x,a):x;o=n.reduce((y,w,_)=>[...y,{stackId:w.stackId,dataKeys:w.dataKeys,position:{offset:g+(x+i)*_+(x-b)/2,size:b}}],c)}return o}}var rDe=(e,t,r,n,a,s,i)=>{var o=ks(i)?t:i,c=tDe(r,n,a!==s?a:s,e,o);return a!==s&&c!=null&&(c=c.map(u=>QC(QC({},u),{},{position:QC(QC({},u.position),{},{offset:u.position.offset-a/2})}))),c},nDe=ut([ZOe,rne,wBe,nne,eDe,$ae,KOe],rDe),aDe=(e,t,r,n)=>n1(e,"xAxis",t,n),sDe=(e,t,r,n)=>n1(e,"yAxis",r,n),iDe=(e,t,r,n)=>r1(e,"xAxis",t,n),oDe=(e,t,r,n)=>r1(e,"yAxis",r,n),lDe=ut([nDe,J2],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),cDe=(e,t)=>{var r=DR(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},uDe=ut([XOe,J2],cDe),dDe=ut([ki,aDe,sDe,iDe,oDe,lDe,jn,kR,$ae,uDe,J2,qOe],(e,t,r,n,a,s,i,o,c,u,d,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:g}=o;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:x}=d,b;if(x!=null&&x.length>0?b=x:b=h==null?void 0:h.slice(p,g+1),b!=null)return MOe({layout:i,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:b,offset:e,cells:f})}}),Gae=e=>{var{chartData:t}=e,r=$a(),n=ac();return S.useEffect(()=>n?()=>{}:(r(Zz(t)),()=>{r(Zz(void 0))}),[t,r,n]),null},rG={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Kae=Gc({name:"brush",initialState:rG,reducers:{setBrushSettings(e,t){return t.payload==null?rG:t.payload}}}),{setBrushSettings:kht}=Kae.actions,ADe=Kae.reducer;function fDe(e,t,r){return(t=hDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hDe(e){var t=mDe(e,"string");return typeof t=="symbol"?t:t+""}function mDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class T8{static create(t){return new T8(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}fDe(T8,"EPS",1e-4);function pDe(e){return(e%180+180)%180}var gDe=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=pDe(a),i=s*Math.PI/180,o=Math.atan(n/r),c=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},xDe={dots:[],areas:[],lines:[]},qae=Gc({name:"referenceElements",initialState:xDe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=sh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=sh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=sh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:Bht,removeDot:Tht,addArea:jht,removeArea:Iht,addLine:Fht,removeLine:Oht}=qae.actions,vDe=qae.reducer,bDe=S.createContext(void 0),yDe=e=>{var{children:t}=e,[r]=S.useState("".concat(Fw("recharts"),"-clip")),n=Dae();if(n==null)return null;var{x:a,y:s,width:i,height:o}=n;return S.createElement(bDe.Provider,{value:r},S.createElement("defs",null,S.createElement("clipPath",{id:r},S.createElement("rect",{x:a,y:s,height:o,width:i}))),t)};function w3(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Wae(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function wDe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return gDe(n,r)}function EDe(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:o}=e;return t===1?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}function LN(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function CDe(e,t){return Wae(e,t+1)}function _De(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:o}=t,c=0,u=1,d=i,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:Wae(n,u)};var x=c,b,y=()=>(b===void 0&&(b=r(g,x)),b),w=g.coordinate,_=c===0||LN(e,w,y,d,o);_||(c=0,d=i,u+=1),_&&(d=w+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function nG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nG(Object(r),!0).forEach(function(n){NDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NDe(e,t,r){return(t=SDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SDe(e){var t=kDe(e,"string");return typeof t=="symbol"?t:t+""}function kDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BDe(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:c}=t,u=function(h){var p=s[h],g,x=()=>(g===void 0&&(g=r(p,h)),g);if(h===i-1){var b=e*(p.coordinate+e*x()/2-c);s[h]=p=Qo(Qo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else s[h]=p=Qo(Qo({},p),{},{tickCoord:p.coordinate});var y=LN(e,p.tickCoord,x,o,c);y&&(c=p.tickCoord-e*(x()/2+a),s[h]=Qo(Qo({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function TDe(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:c,end:u}=t;if(s){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=Qo(Qo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=LN(e,d.tickCoord,()=>f,c,u);p&&(u=d.tickCoord-e*(f/2+a),i[o-1]=Qo(Qo({},d),{},{isShow:!0}))}for(var g=s?o-1:o,x=function(w){var _=i[w],j,k=()=>(j===void 0&&(j=r(_,w)),j);if(w===0){var I=e*(_.coordinate-e*k()/2-c);i[w]=_=Qo(Qo({},_),{},{tickCoord:I<0?_.coordinate-I*e:_.coordinate})}else i[w]=_=Qo(Qo({},_),{},{tickCoord:_.coordinate});var E=LN(e,_.tickCoord,k,c,u);E&&(c=_.tickCoord+e*(k()/2+a),i[w]=Qo(Qo({},_),{},{isShow:!0}))},b=0;b<g;b++)x(b);return i}function j8(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(ur(c)||Ig.isSsr){var h;return(h=CDe(a,ur(c)?c:0))!==null&&h!==void 0?h:[]}var p=[],g=o==="top"||o==="bottom"?"width":"height",x=d&&g==="width"?ew(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(_,j)=>{var k=typeof u=="function"?u(_.value,j):_.value;return g==="width"?wDe(ew(k,{fontSize:t,letterSpacing:r}),x,f):ew(k,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?Wi(a[1].coordinate-a[0].coordinate):1,w=EDe(s,y,g);return c==="equidistantPreserveStart"?_De(y,w,b,a,i):(c==="preserveStart"||c==="preserveStartEnd"?p=TDe(y,w,b,a,i,c==="preserveStartEnd"):p=BDe(y,w,b,a,i),p.filter(_=>_.isShow))}var jDe=["viewBox"],IDe=["viewBox"];function sv(){return sv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sv.apply(null,arguments)}function aG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aG(Object(r),!0).forEach(function(n){I8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sG(e,t){if(e==null)return{};var r,n,a=FDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function FDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function I8(e,t,r){return(t=ODe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ODe(e){var t=DDe(e,"string");return typeof t=="symbol"?t:t+""}function DDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Qm extends S.Component{constructor(t){super(t),this.tickRefs=S.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=sG(t,jDe),s=this.props,{viewBox:i}=s,o=sG(s,IDe);return!w3(n,i)||!w3(a,o)||!w3(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:o,mirror:c,tickMargin:u}=this.props,d,f,h,p,g,x,b=c?-1:1,y=t.tickSize||o,w=ur(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=f=t.coordinate,p=n+ +!c*s,h=p-b*y,x=h-b*u,g=w;break;case"left":h=p=t.coordinate,f=r+ +!c*a,d=f-b*y,g=d-b*u,x=w;break;case"right":h=p=t.coordinate,f=r+ +c*a,d=f+b*y,g=d+b*u,x=w;break;default:d=f=t.coordinate,p=n+ +c*s,h=p+b*y,x=h+b*u,g=w;break}return{line:{x1:d,y1:h,x2:f,y2:p},tick:{x:g,y:x}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o}=this.props,c=wi(wi(wi({},Wn(this.props,!1)),Wn(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);c=wi(wi({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);c=wi(wi({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return S.createElement("line",sv({},c,{className:gn("recharts-cartesian-axis-line",bm(o,"className"))}))}static renderTickItem(t,r,n){var a,s=gn(r.className,"recharts-cartesian-axis-tick-value");if(S.isValidElement(t))a=S.cloneElement(t,wi(wi({},r),{},{className:s}));else if(typeof t=="function")a=t(wi(wi({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=gn(i,t.className)),a=S.createElement(X1,sv({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:o,unit:c,padding:u}=this.props,d=j8(wi(wi({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=il(this.props),g=Wn(i,!1),x=wi(wi({},p),{},{fill:"none"},Wn(a,!1)),b=d.map((y,w)=>{var{line:_,tick:j}=this.getTickLineCoord(y),k=wi(wi(wi(wi({textAnchor:f,verticalAnchor:h},p),{},{stroke:"none",fill:s},g),j),{},{index:w,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return S.createElement(us,sv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},jg(this.props,y,w)),a&&S.createElement("line",sv({},x,_,{className:gn("recharts-cartesian-axis-tick-line",bm(a,"className"))})),i&&Qm.renderTickItem(i,k,"".concat(typeof o=="function"?o(y.value,w):y.value).concat(c||"")))});return b.length>0?S.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:S.createElement(us,{className:gn("recharts-cartesian-axis",a),ref:o=>{if(o){var c=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),ql.renderCallByParent(this.props))}}I8(Qm,"displayName","CartesianAxis");I8(Qm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var PDe=["x1","y1","x2","y2","key"],RDe=["offset"],LDe=["xAxisId","yAxisId"],MDe=["xAxisId","yAxisId"];function iG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iG(Object(r),!0).forEach(function(n){UDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UDe(e,t,r){return(t=QDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QDe(e){var t=HDe(e,"string");return typeof t=="symbol"?t:t+""}function HDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Rp(){return Rp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rp.apply(null,arguments)}function MN(e,t){if(e==null)return{};var r,n,a=VDe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VDe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var zDe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:o}=e;return S.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Xae(e,t){var r;if(S.isValidElement(e))r=S.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:o}=t,c=MN(t,PDe),u=il(c),{offset:d}=u,f=MN(u,RDe);r=S.createElement("line",Rp({},f,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function $De(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=MN(e,LDe),c=a.map((u,d)=>{var f=qo(qo({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Xae(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function GDe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=MN(e,MDe),c=a.map((u,d)=>{var f=qo(qo({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Xae(n,f)});return S.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function KDe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return S.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function qDe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return S.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:o,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return S.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var WDe=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return Pte(j8(qo(qo(qo({},Qm.defaultProps),r),{},{ticks:Rte(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},XDe=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return Pte(j8(qo(qo(qo({},Qm.defaultProps),r),{},{ticks:Rte(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},YDe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function $w(e){var t=tR(),r=rR(),n=Hte(),a=qo(qo({},zu(e,YDe)),{},{x:ur(e.x)?e.x:n.left,y:ur(e.y)?e.y:n.top,width:ur(e.width)?e.width:n.width,height:ur(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=a,g=ac(),x=ir(B=>zz(B,"xAxis",s,g)),b=ir(B=>zz(B,"yAxis",i,g));if(!ur(u)||u<=0||!ur(d)||d<=0||!ur(o)||o!==+o||!ur(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||WDe,w=a.horizontalCoordinatesGenerator||XDe,{horizontalPoints:_,verticalPoints:j}=a;if((!_||!_.length)&&typeof w=="function"){var k=h&&h.length,I=w({yAxis:b?qo(qo({},b),{},{ticks:k?h:b.ticks}):void 0,width:t,height:r,offset:n},k?!0:f);Zy(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof I,"]")),Array.isArray(I)&&(_=I)}if((!j||!j.length)&&typeof y=="function"){var E=p&&p.length,N=y({xAxis:x?qo(qo({},x),{},{ticks:E?p:x.ticks}):void 0,width:t,height:r,offset:n},E?!0:f);Zy(Array.isArray(N),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(j=N)}return S.createElement("g",{className:"recharts-cartesian-grid"},S.createElement(zDe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),S.createElement(KDe,Rp({},a,{horizontalPoints:_})),S.createElement(qDe,Rp({},a,{verticalPoints:j})),S.createElement($De,Rp({},a,{offset:n,horizontalPoints:_,xAxis:x,yAxis:b})),S.createElement(GDe,Rp({},a,{offset:n,verticalPoints:j,xAxis:x,yAxis:b})))}$w.displayName="CartesianGrid";function oG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oG(Object(r),!0).forEach(function(n){JDe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JDe(e,t,r){return(t=ZDe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZDe(e){var t=ePe(e,"string");return typeof t=="symbol"?t:t+""}function ePe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tPe={xAxis:{},yAxis:{},zAxis:{}},Yae=Gc({name:"cartesianAxis",initialState:tPe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=lG(lG({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:rPe,removeXAxis:nPe,addYAxis:aPe,removeYAxis:sPe,addZAxis:Dht,removeZAxis:Pht,updateYAxisWidth:iPe}=Yae.actions,oPe=Yae.reducer,lPe=["children"],cPe=["dangerouslySetInnerHTML","ticks"];function Jae(e,t,r){return(t=uPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uPe(e){var t=dPe(e,"string");return typeof t=="symbol"?t:t+""}function dPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BF(){return BF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BF.apply(null,arguments)}function Zae(e,t){if(e==null)return{};var r,n,a=APe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function APe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fPe(e){var t=$a(),r=S.useMemo(()=>{var{children:s}=e,i=Zae(e,lPe);return i},[e]),n=ir(s=>Oh(s,r.id)),a=r===n;return S.useEffect(()=>(t(rPe(r)),()=>{t(nPe(r))}),[r,t]),a?e.children:null}var hPe=e=>{var{xAxisId:t,className:r}=e,n=ir(Qte),a=ac(),s="xAxis",i=ir(p=>K1(p,s,t,a)),o=ir(p=>Dne(p,s,t,a)),c=ir(p=>jne(p,t)),u=ir(p=>mTe(p,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=Zae(e,cPe);return S.createElement(Qm,BF({},h,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:gn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},mPe=e=>{var t,r,n,a,s;return S.createElement(fPe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},S.createElement(hPe,e))};class o1 extends S.Component{render(){return S.createElement(mPe,this.props)}}Jae(o1,"displayName","XAxis");Jae(o1,"defaultProps",{allowDataOverflow:Sc.allowDataOverflow,allowDecimals:Sc.allowDecimals,allowDuplicatedCategory:Sc.allowDuplicatedCategory,height:Sc.height,hide:!1,mirror:Sc.mirror,orientation:Sc.orientation,padding:Sc.padding,reversed:Sc.reversed,scale:Sc.scale,tickCount:Sc.tickCount,type:Sc.type,xAxisId:0});var pPe=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+o+(r?n:0);return Math.round(u)}return 0},gPe=["dangerouslySetInnerHTML","ticks"];function ese(e,t,r){return(t=xPe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xPe(e){var t=vPe(e,"string");return typeof t=="symbol"?t:t+""}function vPe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TF(){return TF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},TF.apply(null,arguments)}function bPe(e,t){if(e==null)return{};var r,n,a=yPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function yPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function wPe(e){var t=$a();return S.useEffect(()=>(t(aPe(e)),()=>{t(sPe(e))}),[e,t]),null}var EPe=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=S.useRef(null),o=S.useRef(null),c=ir(Qte),u=ac(),d=$a(),f="yAxis",h=ir(_=>K1(_,f,r,u)),p=ir(_=>Ine(_,r)),g=ir(_=>pTe(_,r)),x=ir(_=>Dne(_,f,r,u));if(S.useLayoutEffect(()=>{var _;if(!(a!=="auto"||!p||c8(s)||S.isValidElement(s))){var j=i.current,k=j==null||(_=j.tickRefs)===null||_===void 0?void 0:_.current,{tickSize:I,tickMargin:E}=j.props,N=pPe({ticks:k,label:o.current,labelGapWithTick:5,tickSize:I,tickMargin:E});Math.round(p.width)!==Math.round(N)&&d(iPe({id:r,width:N}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,d,s,r,a]),p==null||g==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,w=bPe(e,gPe);return S.createElement(Qm,TF({},w,{ref:i,labelRef:o,scale:h,x:g.x,y:g.y,width:p.width,height:p.height,className:gn("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:x}))},CPe=e=>{var t,r,n,a,s;return S.createElement(S.Fragment,null,S.createElement(wPe,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),S.createElement(EPe,e))},_Pe={allowDataOverflow:kc.allowDataOverflow,allowDecimals:kc.allowDecimals,allowDuplicatedCategory:kc.allowDuplicatedCategory,hide:!1,mirror:kc.mirror,orientation:kc.orientation,padding:kc.padding,reversed:kc.reversed,scale:kc.scale,tickCount:kc.tickCount,type:kc.type,width:kc.width,yAxisId:0};class l1 extends S.Component{render(){return S.createElement(CPe,this.props)}}ese(l1,"displayName","YAxis");ese(l1,"defaultProps",_Pe);var E3={exports:{}},C3={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cG;function NPe(){if(cG)return C3;cG=1;var e=C1();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,o=e.useDebugValue;return C3.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var p=a(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=i(function(){function b(k){if(!y){if(y=!0,w=k,k=f(k),h!==void 0&&g.hasValue){var I=g.value;if(h(I,k))return _=I}return _=k}if(I=_,r(w,k))return I;var E=f(k);return h!==void 0&&h(I,E)?(w=k,I):(w=k,_=E)}var y=!1,w,_,j=d===void 0?null:d;return[function(){return b(u())},j===null?void 0:function(){return b(j())}]},[u,d,f,h]);var x=n(c,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=x},[x]),o(x),x},C3}var uG;function SPe(){return uG||(uG=1,E3.exports=NPe()),E3.exports}SPe();function kPe(e){e()}function BPe(){let e=null,t=null;return{clear(){e=null,t=null},notify(){kPe(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var dG={notify(){},get:()=>[]};function TPe(e,t){let r,n=dG,a=0,s=!1;function i(x){d();const b=n.subscribe(x);let y=!1;return()=>{y||(y=!0,b(),f())}}function o(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=BPe())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=dG)}function h(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const g={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var jPe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IPe=jPe(),FPe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",OPe=FPe(),DPe=()=>IPe||OPe?S.useLayoutEffect:S.useEffect,PPe=DPe(),_3=Symbol.for("react-redux-context"),N3=typeof globalThis<"u"?globalThis:{};function RPe(){if(!S.createContext)return{};const e=N3[_3]??(N3[_3]=new Map);let t=e.get(S.createContext);return t||(t=S.createContext(null),e.set(S.createContext,t)),t}var LPe=RPe();function MPe(e){const{children:t,context:r,serverState:n,store:a}=e,s=S.useMemo(()=>{const c=TPe(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=S.useMemo(()=>a.getState(),[a]);PPe(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const o=r||LPe;return S.createElement(o.Provider,{value:s},t)}var UPe=MPe,QPe=(e,t)=>t,F8=ut([QPe,jn,V1,Ti,Yne,Dh,vje,ki],Cje),O8=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},tse=Uu("mouseClick"),rse=L2();rse.startListening({actionCreator:tse,effect:(e,t)=>{var r=e.payload,n=F8(t.getState(),O8(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(STe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var jF=Uu("mouseMove"),nse=L2();nse.startListening({actionCreator:jF,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=ZR(n,n.tooltip.settings.shared),s=F8(n,O8(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(zne({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Vne()))}});function HPe(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var AG={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},ase=Gc({name:"rootProps",initialState:AG,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:AG.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),VPe=ase.reducer,{updateOptions:zPe}=ase.actions,sse=Gc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:$Pe}=sse.actions,GPe=sse.reducer,ise=Uu("keyDown"),ose=Uu("focus"),D8=L2();D8.startListening({actionCreator:ise,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(e8(a,W1(r))),o=Dh(r);if(s==="Enter"){var c=IN(r,"axis","hover",String(a.index));t.dispatch(EF({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=xTe(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var p=IN(r,"axis","hover",String(h));t.dispatch(EF({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});D8.startListening({actionCreator:ose,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=IN(r,"axis","hover",String(s));t.dispatch(EF({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var yu=Uu("externalEvent"),lse=L2();lse.startListening({actionCreator:yu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:cje(r),activeDataKey:tae(r),activeIndex:ym(r),activeLabel:eae(r),activeTooltipIndex:ym(r),isTooltipActive:uje(r)};e.payload.handler(n,e.payload.reactEvent)}}});var KPe=ut([q1],e=>e.tooltipItemPayloads),qPe=ut([KPe,X2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),cse=Uu("touchMove"),use=L2();use.startListening({actionCreator:cse,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=ZR(n,n.tooltip.settings.shared);if(a==="axis"){var s=F8(n,O8({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(zne({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Mte),d=(i=c.getAttribute(Ute))!==null&&i!==void 0?i:void 0,f=qPe(t.getState(),u,d);t.dispatch(Hne({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var WPe=ute({brush:ADe,cartesianAxis:oPe,chartData:Uje,errorBars:hOe,graphicalItems:W6e,layout:A5e,legend:Z5e,options:Dje,polarAxis:VIe,polarOptions:GPe,referenceElements:vDe,rootProps:VPe,tooltip:kTe}),XPe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return R_e({reducer:WPe,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([rse.middleware,nse.middleware,D8.middleware,lse.middleware,use.middleware]),devTools:{serialize:{replacer:HPe},name:"recharts-".concat(r)}})};function dse(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=ac(),s=S.useRef(null);if(a)return r;s.current==null&&(s.current=XPe(t,n));var i=GP;return S.createElement(UPe,{context:i,store:s.current},r)}function Ase(e){var{layout:t,width:r,height:n,margin:a}=e,s=$a(),i=ac();return S.useEffect(()=>{i||(s(c5e(t)),s(u5e({width:r,height:n})),s(l5e(a)))},[s,i,t,r,n,a]),null}function fse(e){var t=$a();return S.useEffect(()=>{t(zPe(e))},[t,e]),null}var YPe=["children"];function JPe(e,t){if(e==null)return{};var r,n,a=ZPe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ZPe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function UN(){return UN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},UN.apply(null,arguments)}var eRe={width:"100%",height:"100%"},tRe=S.forwardRef((e,t)=>{var r=tR(),n=rR(),a=Gte();if(!Yv(r)||!Yv(n))return null;var{children:s,otherAttributes:i,title:o,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,S.createElement(IP,UN({},i,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:eRe,ref:t}),s)}),rRe=e=>{var{children:t}=e,r=ir(D4);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return S.createElement(IP,{width:n,height:a,x:i,y:s},t)},fG=S.forwardRef((e,t)=>{var{children:r}=e,n=JPe(e,YPe),a=ac();return a?S.createElement(rRe,null,r):S.createElement(tRe,UN({ref:t},n),r)});function nRe(){var e=$a(),[t,r]=S.useState(null),n=ir(Q5e);return S.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Vc(s)&&s!==n&&e(d5e(s))}},[t,e,n]),r}function hG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aRe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hG(Object(r),!0).forEach(function(n){sRe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sRe(e,t,r){return(t=iRe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iRe(e){var t=oRe(e,"string");return typeof t=="symbol"?t:t+""}function oRe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lRe=S.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:g,onTouchStart:x,style:b,width:y}=e,w=$a(),[_,j]=S.useState(null),[k,I]=S.useState(null);Vje();var E=nRe(),N=S.useCallback(F=>{E(F),typeof t=="function"&&t(F),j(F),I(F)},[E,t,j,I]),B=S.useCallback(F=>{w(tse(F)),w(yu({handler:s,reactEvent:F}))},[w,s]),R=S.useCallback(F=>{w(jF(F)),w(yu({handler:u,reactEvent:F}))},[w,u]),P=S.useCallback(F=>{w(Vne()),w(yu({handler:d,reactEvent:F}))},[w,d]),D=S.useCallback(F=>{w(jF(F)),w(yu({handler:f,reactEvent:F}))},[w,f]),L=S.useCallback(()=>{w(ose())},[w]),M=S.useCallback(F=>{w(ise(F.key))},[w]),J=S.useCallback(F=>{w(yu({handler:i,reactEvent:F}))},[w,i]),H=S.useCallback(F=>{w(yu({handler:o,reactEvent:F}))},[w,o]),K=S.useCallback(F=>{w(yu({handler:c,reactEvent:F}))},[w,c]),V=S.useCallback(F=>{w(yu({handler:h,reactEvent:F}))},[w,h]),G=S.useCallback(F=>{w(yu({handler:x,reactEvent:F}))},[w,x]),X=S.useCallback(F=>{w(cse(F)),w(yu({handler:g,reactEvent:F}))},[w,g]),ee=S.useCallback(F=>{w(yu({handler:p,reactEvent:F}))},[w,p]);return S.createElement(oae.Provider,{value:_},S.createElement(Fee.Provider,{value:k},S.createElement("div",{className:gn("recharts-wrapper",n),style:aRe({position:"relative",cursor:"default",width:y,height:a},b),onClick:B,onContextMenu:J,onDoubleClick:H,onFocus:L,onKeyDown:M,onMouseDown:K,onMouseEnter:R,onMouseLeave:P,onMouseMove:D,onMouseUp:V,onTouchEnd:ee,onTouchMove:X,onTouchStart:G,ref:N},r)))}),cRe=["children","className","width","height","style","compact","title","desc"];function uRe(e,t){if(e==null)return{};var r,n,a=dRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var hse=S.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:o,title:c,desc:u}=e,d=uRe(e,cRe),f=il(d);return o?S.createElement(fG,{otherAttributes:f,title:c,desc:u},r):S.createElement(lRe,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},S.createElement(fG,{otherAttributes:f,title:c,desc:u,ref:t},S.createElement(yDe,null,r)))}),ARe=["width","height"];function IF(){return IF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},IF.apply(null,arguments)}function fRe(e,t){if(e==null)return{};var r,n,a=hRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function hRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mRe={top:5,right:5,bottom:5,left:5},pRe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:mRe,reverseStackOrder:!1,syncMethod:"index"},gRe=S.forwardRef(function(t,r){var n,a=zu(t.categoricalChartProps,pRe),{width:s,height:i}=a,o=fRe(a,ARe);if(!Yv(s)||!Yv(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return S.createElement(dse,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},S.createElement(Gae,{chartData:h.data}),S.createElement(Ase,{width:s,height:i,layout:a.layout,margin:a.margin}),S.createElement(fse,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),S.createElement(hse,IF({},o,{width:s,height:i,ref:r})))}),xRe=["axis","item"],QN=S.forwardRef((e,t)=>S.createElement(gRe,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:xRe,tooltipPayloadSearcher:l8,categoricalChartProps:e,ref:t}));function vRe(e){var t=$a();return S.useEffect(()=>{t($Pe(e))},[t,e]),null}var bRe=["width","height","layout"];function FF(){return FF=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},FF.apply(null,arguments)}function yRe(e,t){if(e==null)return{};var r,n,a=wRe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wRe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ERe={top:5,right:5,bottom:5,left:5},CRe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ERe,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},mse=S.forwardRef(function(t,r){var n,a=zu(t.categoricalChartProps,CRe),{width:s,height:i,layout:o}=a,c=yRe(a,bRe);if(!Yv(s)||!Yv(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,p={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return S.createElement(dse,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},S.createElement(Gae,{chartData:a.data}),S.createElement(Ase,{width:s,height:i,layout:o,margin:a.margin}),S.createElement(fse,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),S.createElement(vRe,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),S.createElement(hse,FF({width:s,height:i},c,{ref:r})))}),_Re=["item"],NRe={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},pse=S.forwardRef((e,t)=>{var r=zu(e,NRe);return S.createElement(mse,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:_Re,tooltipPayloadSearcher:l8,categoricalChartProps:r,ref:t})}),SRe=["axis"],kRe={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},BRe=S.forwardRef((e,t)=>{var r=zu(e,kRe);return S.createElement(mse,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:SRe,tooltipPayloadSearcher:l8,categoricalChartProps:r,ref:t})});const E0=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6","#14b8a6","#a3e635","#f472b6"],mG={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",dimension:"",subdimension:"",descripcion:"",objetivos:"",indicadores:[],cobertura:"",fechaInicio:"",fechaCumplimiento:"",estado:"Pendiente",avance:0,enlaces:[]},ty="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/60 shadow-sm backdrop-blur",co="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-fuchsia-500/70 focus:border-fuchsia-500/70 transition",Ec="block text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400 mb-2",S3="inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition",k3="bg-gradient-to-r from-fuchsia-600 to-rose-500 text-white shadow-sm",B3="bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200 hover:bg-slate-200/80 dark:hover:bg-slate-700",HC="rounded-2xl p-5 text-white shadow-md bg-gradient-to-br",TRe="from-sky-500 to-indigo-500",jRe="from-emerald-500 to-lime-500",IRe="from-amber-500 to-rose-500",FRe="from-fuchsia-500 to-purple-600",T3={Pendiente:{badge:"bg-rose-50 text-rose-700 ring-1 ring-rose-200 dark:bg-rose-900/30 dark:text-rose-200 dark:ring-rose-800",icon:qA,dot:"bg-rose-500"},"En Proceso":{badge:"bg-amber-50 text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/30 dark:text-amber-200 dark:ring-amber-800",icon:mee,dot:"bg-amber-500"},Cumplida:{badge:"bg-emerald-50 text-emerald-700 ring-1 ring-emerald-200 dark:bg-emerald-900/30 dark:text-emerald-200 dark:ring-emerald-800",icon:Zo,dot:"bg-emerald-500"}},ORe=e=>{const t=T3[e].icon;return l.jsxs("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold ${T3[e].badge}`,children:[l.jsx("span",{className:`h-2 w-2 rounded-full ${T3[e].dot}`}),l.jsx(t,{className:"h-4 w-4"})," ",e]})},DRe=()=>{var G,X;const[e,t]=S.useState("registro"),[r,n]=S.useState([]),[a,s]=S.useState(mG),[i,o]=S.useState(null),[c,u]=S.useState(null),[d,f]=S.useState(!1),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState(""),[w,_]=S.useState(""),j=S.useMemo(()=>Kf[a.dimension]??[],[a.dimension]),k=S.useCallback(async()=>{f(!0);try{const ee=await lEe();n(ee)}catch(ee){console.error(ee),u("No se pudieron cargar las acciones.")}finally{f(!1)}},[]);S.useEffect(()=>{k()},[k]);const I=ee=>{const{name:F,value:z}=ee.target;s(Y=>({...Y,[F]:z}))},E=ee=>{const F=ee.split(",").map(z=>z.trim()).filter(Boolean);s(z=>({...z,indicadores:F}))},N=ee=>{const F=ee.split(",").map(z=>z.trim()).filter(Boolean);s(z=>({...z,enlaces:F}))},B=()=>{s(mG),o(null),u(null)},R=async ee=>{if(ee.preventDefault(),!a.responsable||!a.dimension||!a.subdimension||!a.descripcion||!a.fechaCumplimiento){u("Responsable, dimensin, subdimensin, descripcin y fecha de cumplimiento son obligatorios.");return}try{i?await uEe(i,a):await cEe(a),await k(),B(),t("seguimiento")}catch(F){console.error(F),u("Error al guardar la accin.")}},P=ee=>{o(ee.id),s({...ee,enlaces:ee.enlaces??[],indicadores:ee.indicadores??[]}),window.scrollTo({top:0,behavior:"smooth"}),t("registro")},D=async ee=>{confirm("Eliminar esta accin?")&&(await dEe(ee),await k())},L=S.useMemo(()=>r.filter(ee=>{const F=!h||ee.responsable.toLowerCase().includes(h.toLowerCase())||ee.descripcion.toLowerCase().includes(h.toLowerCase())||ee.subdimension.toLowerCase().includes(h.toLowerCase()),z=!g||ee.dimension===g,Y=!b||ee.subdimension===b,te=!w||ee.estado===w;return F&&z&&Y&&te}),[r,h,g,b,w]),M=S.useMemo(()=>{const ee=new Map;return r.forEach(F=>ee.set(F.dimension,(ee.get(F.dimension)??0)+1)),Array.from(ee.entries()).map(([F,z])=>({name:F,value:z}))},[r]),J=S.useMemo(()=>{const ee=new Map;return r.forEach(F=>ee.set(F.estado,(ee.get(F.estado)??0)+1)),Array.from(ee.entries()).map(([F,z])=>({name:F,value:z}))},[r]),H=S.useMemo(()=>{const ee=r.map(F=>F.avance??0);return ee.length?Math.round(ee.reduce((F,z)=>F+z,0)/ee.length):0},[r]),K=S.useMemo(()=>{const ee=new Map;return r.forEach(F=>ee.set(F.subdimension,(ee.get(F.subdimension)??0)+1)),Array.from(ee.entries()).map(([F,z])=>({name:F,value:z})).sort((F,z)=>z.value-F.value).slice(0,6)},[r]),V=()=>{const ee=["id","fechaRegistro","responsable","dimension","subdimension","descripcion","objetivos","indicadores","cobertura","fechaInicio","fechaCumplimiento","estado","avance","enlaces"],F=r.map(le=>[le.id,le.fechaRegistro,le.responsable,le.dimension,le.subdimension,le.descripcion.replace(/\n/g," "),le.objetivos??"",(le.indicadores??[]).join("|"),le.cobertura??"",le.fechaInicio??"",le.fechaCumplimiento,le.estado,le.avance??0,(le.enlaces??[]).join("|")]),z=[ee.join(","),...F.map(le=>le.map(ie=>`"${String(ie).replace(/"/g,'""')}"`).join(","))].join(`
`),Y=new Blob([z],{type:"text/csv;charset=utf-8"}),te=URL.createObjectURL(Y),ae=document.createElement("a");ae.href=te,ae.download=`pme_acciones_${new Date().toISOString().slice(0,10)}.csv`,ae.click(),URL.revokeObjectURL(te)};return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"relative overflow-hidden rounded-3xl border border-fuchsia-200/60 dark:border-fuchsia-700/30",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-fuchsia-500/20 via-rose-500/20 to-amber-400/20 blur-3xl"}),l.jsxs("div",{className:"relative p-6 md:p-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4 bg-white/60 dark:bg-slate-900/40 backdrop-blur",children:[l.jsxs("div",{children:[l.jsxs("h1",{className:"text-2xl md:text-3xl font-black bg-gradient-to-r from-fuchsia-600 via-rose-600 to-amber-600 bg-clip-text text-transparent flex items-center gap-3",children:[l.jsx(bv,{className:"h-6 w-6 text-fuchsia-600"})," Seguimiento de Acciones (PME)"]}),l.jsxs("p",{className:"text-slate-600 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(lwe,{className:"h-4 w-4"})," Registro, seguimiento y dashboard por Dimensin/Subdimensin."]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white/70 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 hover:bg-white",children:[l.jsx(gwe,{className:"h-4 w-4"})," Refrescar"]}),l.jsxs("button",{onClick:V,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 to-rose-500 hover:opacity-90",children:[l.jsx(I2,{className:"h-4 w-4"})," CSV"]})]})]})]}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[l.jsxs("button",{onClick:()=>t("registro"),className:`${S3} ${e==="registro"?k3:B3}`,children:[l.jsx(Kv,{className:"h-4 w-4"})," Registro"]}),l.jsxs("button",{onClick:()=>t("seguimiento"),className:`${S3} ${e==="seguimiento"?k3:B3}`,children:[l.jsx(Yy,{className:"h-4 w-4"})," Seguimiento"]}),l.jsxs("button",{onClick:()=>t("dashboard"),className:`${S3} ${e==="dashboard"?k3:B3}`,children:[l.jsx(oye,{className:"h-4 w-4"})," Dashboard"]})]}),e==="registro"&&l.jsx("div",{className:ty,children:l.jsxs("form",{onSubmit:R,className:"p-6 md:p-8 space-y-6",children:[c&&l.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-rose-200 bg-rose-50 p-3 text-rose-700 dark:bg-rose-900/30 dark:text-rose-200 dark:border-rose-800",children:[l.jsx(qA,{className:"h-5 w-5"}),l.jsx("span",{children:c})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Fecha de Registro"}),l.jsxs("div",{className:"relative",children:[l.jsx(Id,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-500"}),l.jsx("input",{type:"date",name:"fechaRegistro",value:a.fechaRegistro,onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Responsable"}),l.jsxs("div",{className:"relative",children:[l.jsx(Tw,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-rose-500"}),l.jsx("input",{type:"text",name:"responsable",placeholder:"Nombre",value:a.responsable,onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Cobertura (niveles/cursos)"}),l.jsxs("div",{className:"relative",children:[l.jsx(F2,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-amber-500"}),l.jsx("input",{type:"text",name:"cobertura",placeholder:"2A, 2B, 3Mecnica...",value:a.cobertura??"",onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Dimensin PME"}),l.jsxs("div",{className:"relative",children:[l.jsx(zye,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),l.jsxs("select",{name:"dimension",value:a.dimension,onChange:I,className:co+" pl-10",children:[l.jsx("option",{value:"",children:"Selecciona una dimensin"}),Object.keys(Kf).map(ee=>l.jsx("option",{value:ee,children:ee},ee))]})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:Ec,children:"Subdimensin"}),l.jsxs("div",{className:"relative",children:[l.jsx(yP,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-sky-500"}),l.jsxs("select",{name:"subdimension",value:a.subdimension,onChange:I,className:co+" pl-10",disabled:!a.dimension,children:[l.jsx("option",{value:"",children:a.dimension?"Selecciona una subdimensin":"Primero elige una dimensin"}),j.map(ee=>l.jsx("option",{value:ee,children:ee},ee))]})]})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{className:Ec,children:"Descripcin de la Accin"}),l.jsxs("div",{className:"relative",children:[l.jsx(WA,{className:"absolute left-3 top-3 h-4 w-4 text-fuchsia-500"}),l.jsx("textarea",{name:"descripcion",value:a.descripcion,onChange:I,rows:3,placeholder:"Qu se har? Dnde y con quin?",className:co+" pl-10"})]})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{className:Ec,children:"Objetivos (opcional)"}),l.jsx("textarea",{name:"objetivos",value:a.objetivos??"",onChange:I,rows:2,placeholder:"Propsitos pedaggicos",className:co})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Indicadores (separados por coma)"}),l.jsx("input",{type:"text",value:(a.indicadores??[]).join(", "),onChange:ee=>E(ee.target.value),placeholder:"Cobertura OA, asistencia, resultados...",className:co})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Fecha de Inicio"}),l.jsxs("div",{className:"relative",children:[l.jsx(Id,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-violet-500"}),l.jsx("input",{type:"date",name:"fechaInicio",value:a.fechaInicio??"",onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Fecha de Cumplimiento"}),l.jsxs("div",{className:"relative",children:[l.jsx(Id,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),l.jsx("input",{type:"date",name:"fechaCumplimiento",value:a.fechaCumplimiento,onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Estado"}),l.jsx("select",{name:"estado",value:a.estado,onChange:I,className:co,children:wQ.map(ee=>l.jsx("option",{value:ee,children:ee},ee))})]}),l.jsxs("div",{children:[l.jsx("label",{className:Ec,children:"Avance (%)"}),l.jsxs("div",{className:"relative",children:[l.jsx(eN,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-emerald-500"}),l.jsx("input",{type:"number",min:0,max:100,name:"avance",value:a.avance??0,onChange:I,className:co+" pl-10"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:Ec,children:"Enlaces de evidencia (separados por coma)"}),l.jsxs("div",{className:"relative",children:[l.jsx(kQ,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-indigo-500"}),l.jsx("input",{type:"text",value:(a.enlaces??[]).join(", "),onChange:ee=>N(ee.target.value),placeholder:"https://..., https://...",className:co+" pl-10"})]})]})]}),l.jsxs("div",{className:"flex items-center justify-end gap-3",children:[i&&l.jsx("button",{type:"button",onClick:B,className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl bg-white border border-slate-200 hover:bg-slate-50 dark:bg-slate-800 dark:border-slate-700",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 px-4 py-2 rounded-xl text-white bg-gradient-to-r from-fuchsia-600 via-rose-500 to-amber-500 hover:opacity-90",children:[i?l.jsx(vm,{className:"h-4 w-4"}):l.jsx(Lu,{className:"h-4 w-4"}),i?"Guardar cambios":"Registrar accin"]})]})]})}),e==="seguimiento"&&l.jsx("div",{className:ty,children:l.jsxs("div",{className:"p-4 md:p-6 space-y-5",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[l.jsxs("div",{className:"relative md:col-span-2",children:[l.jsx(b4,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-fuchsia-600"}),l.jsx("input",{className:co+" pl-10",placeholder:"Buscar por responsable, descripcin o subdimensin...",value:h,onChange:ee=>p(ee.target.value)})]}),l.jsxs("select",{value:g,onChange:ee=>{x(ee.target.value),y("")},className:co,children:[l.jsx("option",{value:"",children:"Todas las dimensiones"}),Object.keys(Kf).map(ee=>l.jsx("option",{value:ee,children:ee},ee))]}),l.jsxs("select",{value:b,onChange:ee=>y(ee.target.value),className:co,children:[l.jsx("option",{value:"",children:"Todas las subdimensiones"}),(Kf[g]??Object.values(Kf).flat()).map(ee=>l.jsx("option",{value:ee,children:ee},ee))]}),l.jsxs("select",{value:w,onChange:ee=>_(ee.target.value),className:co,children:[l.jsx("option",{value:"",children:"Todos los estados"}),wQ.map(ee=>l.jsx("option",{value:ee,children:ee},ee))]})]}),l.jsx("div",{className:"overflow-x-auto rounded-xl border border-slate-100 dark:border-slate-800",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-gradient-to-r from-fuchsia-50 to-rose-50 dark:from-slate-800 dark:to-slate-800",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-fuchsia-700 dark:text-fuchsia-300",children:"Responsable"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-rose-700 dark:text-rose-300",children:"Dimensin / Subdimensin"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-indigo-700 dark:text-indigo-300",children:"Descripcin"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-bold uppercase tracking-wider text-amber-700 dark:text-amber-300",children:"Fechas"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-emerald-700 dark:text-emerald-300",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-sky-700 dark:text-sky-300",children:"Avance"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-bold uppercase tracking-wider text-slate-700 dark:text-slate-300",children:"Acciones"})]})}),l.jsxs("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800 bg-white dark:bg-slate-900/40",children:[L.map(ee=>{var F,z;return l.jsxs("tr",{className:"hover:bg-fuchsia-50/50 dark:hover:bg-slate-800/60 transition",children:[l.jsx("td",{className:"px-4 py-4 align-top text-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-fuchsia-500 to-rose-500 text-white flex items-center justify-center font-bold shadow-sm",children:((z=(F=ee.responsable)==null?void 0:F.slice(0,1))==null?void 0:z.toUpperCase())||"?"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-slate-900 dark:text-slate-100",children:ee.responsable}),l.jsx("div",{className:"text-xs text-slate-500",children:ee.cobertura})]})]})}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm",children:[l.jsx("div",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:ee.dimension}),l.jsx("div",{className:"text-xs text-slate-500",children:ee.subdimension})]}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm max-w-md",children:[l.jsx("div",{className:"text-slate-700 dark:text-slate-200",children:ee.descripcion}),ee.enlaces&&ee.enlaces.length>0&&l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:ee.enlaces.map((Y,te)=>l.jsxs("a",{href:Y,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-fuchsia-700 hover:text-fuchsia-900 dark:text-fuchsia-300",children:[l.jsx(kQ,{className:"h-3.5 w-3.5"})," Evidencia ",te+1]},te))})]}),l.jsxs("td",{className:"px-4 py-4 align-top text-sm whitespace-nowrap",children:[l.jsxs("div",{className:"text-xs text-slate-500",children:["Reg: ",ee.fechaRegistro||"-"]}),l.jsxs("div",{className:"text-xs text-slate-500",children:["Ini: ",ee.fechaInicio||"-"]}),l.jsxs("div",{className:"text-xs font-semibold text-emerald-700 dark:text-emerald-300",children:["Fin: ",ee.fechaCumplimiento]})]}),l.jsx("td",{className:"px-4 py-4 align-top text-center",children:ORe(ee.estado)}),l.jsxs("td",{className:"px-4 py-4 align-top",children:[l.jsx("div",{className:"w-28 h-2.5 rounded-full bg-slate-200 dark:bg-slate-700 overflow-hidden",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-fuchsia-500 via-rose-500 to-amber-500",style:{width:`${Math.min(Math.max(ee.avance??0,0),100)}%`}})}),l.jsxs("div",{className:"text-xs text-center mt-1",children:[ee.avance??0,"%"]})]}),l.jsx("td",{className:"px-4 py-4 align-top text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[l.jsx("button",{onClick:()=>P(ee),className:"p-2 rounded-lg hover:bg-amber-50 dark:hover:bg-slate-800",title:"Editar",children:l.jsx(wP,{className:"h-5 w-5 text-amber-600"})}),l.jsx("button",{onClick:()=>D(ee.id),className:"p-2 rounded-lg hover:bg-rose-50 dark:hover:bg-slate-800",title:"Eliminar",children:l.jsx(tl,{className:"h-5 w-5 text-rose-600"})})]})})]},ee.id)}),L.length===0&&l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-4 py-12 text-center text-slate-500",children:"Sin registros"})})]})]})})]})}),e==="dashboard"&&l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"xl:col-span-3 grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsx("div",{className:`${HC} ${TRe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Yf,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Acciones totales"}),l.jsx("div",{className:"text-2xl font-black",children:r.length})]})]})}),l.jsx("div",{className:`${HC} ${jRe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(Zo,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Cumplidas"}),l.jsx("div",{className:"text-2xl font-black",children:((G=J.find(ee=>ee.name==="Cumplida"))==null?void 0:G.value)??0})]})]})}),l.jsx("div",{className:`${HC} ${IRe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(mee,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"En proceso"}),l.jsx("div",{className:"text-2xl font-black",children:((X=J.find(ee=>ee.name==="En Proceso"))==null?void 0:X.value)??0})]})]})}),l.jsx("div",{className:`${HC} ${FRe}`,children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(eN,{className:"h-10 w-10 opacity-90"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase/relaxed",children:"Avance promedio"}),l.jsxs("div",{className:"text-2xl font-black",children:[H,"%"]})]})]})})]}),l.jsxs("div",{className:ty+" p-5",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:"Acciones por dimensin"})}),l.jsx("div",{className:"h-64",children:l.jsx(Pp,{width:"100%",height:"100%",children:l.jsxs(QN,{data:M,children:[l.jsx($w,{strokeDasharray:"3 3"}),l.jsx(o1,{dataKey:"name",hide:!0}),l.jsx(l1,{allowDecimals:!1}),l.jsx(Dp,{}),l.jsx(zw,{dataKey:"value",children:M.map((ee,F)=>l.jsx(mg,{fill:E0[F%E0.length]},F))})]})})}),l.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1",children:M.map((ee,F)=>l.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"inline-block h-3 w-3 rounded-sm",style:{background:E0[F%E0.length]}}),l.jsx("span",{className:"flex-1",children:ee.name}),l.jsx("span",{className:"font-semibold",children:ee.value})]},F))})]}),l.jsxs("div",{className:ty+" p-5",children:[l.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Distribucin por estado"}),l.jsx("div",{className:"h-64",children:l.jsx(Pp,{width:"100%",height:"100%",children:l.jsxs(pse,{children:[l.jsx(N8,{data:J,dataKey:"value",nameKey:"name",outerRadius:90,label:!0,children:J.map((ee,F)=>l.jsx(mg,{fill:E0[F%E0.length]},F))}),l.jsx(M2,{}),l.jsx(Dp,{})]})})})]}),l.jsxs("div",{className:ty+" p-5",children:[l.jsx("h3",{className:"font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Subdimensiones ms trabajadas"}),l.jsxs("ul",{className:"space-y-2",children:[K.map((ee,F)=>l.jsxs("li",{className:"flex items-center justify-between text-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"inline-block h-2.5 w-2.5 rounded-full",style:{background:E0[F%E0.length]}}),ee.name]}),l.jsx("span",{className:"font-semibold",children:ee.value})]},F)),K.length===0&&l.jsx("li",{className:"text-slate-500",children:"Sin datos"})]})]})]})]})},ak="planificaciones",gse="actividades_calendario",xse=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},PRe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:sr.fromDate(new Date),fechaActualizacion:sr.fromDate(new Date)};return(await Tn(Nt(ft,ak),r)).id}catch(r){throw console.error("Error al guardar planificacin:",r),new Error("No se pudo guardar la planificacin")}},RRe=async(e,t,r)=>{try{const n=dr(ft,ak,e),a=await D1(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificacin");await Vu(n,{...t,fechaActualizacion:sr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificacin:",n),new Error("No se pudo actualizar la planificacin")}},LRe=async(e,t)=>{try{const r=dr(ft,ak,e),n=await D1(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificacin");await za(r)}catch(r){throw console.error("Error al eliminar planificacin:",r),new Error("No se pudo eliminar la planificacin")}},MRe=(e,t)=>{const r=zt(Nt(ft,ak),Yr("userId","==",e),_r("fechaCreacion","desc"));return mr(r,n=>{const a=n.docs.map(xse);t(a)},n=>{console.error("Error en suscripcin a planificaciones:",n)})},URe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:sr.fromDate(new Date),fechaActualizacion:sr.fromDate(new Date)};return(await Tn(Nt(ft,gse),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},QRe=(e,t)=>{const r=zt(Nt(ft,gse),Yr("userId","==",e),_r("fecha","desc"));return mr(r,n=>{const a=n.docs.map(xse);t(a)},n=>{console.error("Error en suscripcin a actividades:",n)})},HRe=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);return S.useEffect(()=>e?(a(!0),MRe(e,f=>{r(f),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await PRe(d,e)}catch(f){throw i(f.message||"Error al guardar planificacin"),f}},update:async(d,f)=>{try{i(null),await RRe(d,f,e)}catch(h){throw i(h.message||"Error al actualizar planificacin"),h}},remove:async d=>{try{i(null),await LRe(d,e)}catch(f){throw i(f.message||"Error al eliminar planificacin"),f}}}},OF=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},VRe=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null);S.useEffect(()=>e?QRe(e,u=>{r(u),a(!1)}):void 0,[e]);const o=S.useCallback(async c=>{try{return i(null),await URe(c,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:o}},zRe=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=S.useState(e),i=c=>{s({...a,[c.target.name]:c.target.value})},o=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar leccin:",c)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Leccin"}),l.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),l.jsx("textarea",{name:c,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),l.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},$Re=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=S.useState(e.progreso??0),[o,c]=S.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);i(f),c(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log(" Progreso actualizado exitosamente"))}catch(h){console.error(" Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),i(e.progreso??0)}finally{c(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:o||n}),l.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),o&&l.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),l.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),l.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},GRe=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=S.useState(e),[o,c]=S.useState(!1),u=f=>{const{name:h,value:p}=f.target,[g,x]=h.split(".");i(g==="momentosClase"?b=>({...b,momentosClase:{...b.momentosClase,[x]:p}}):b=>({...b,[h]:p}))},d=async()=>{c(!0);try{await r(s)}catch(f){console.error("Error al guardar plan de clase:",f)}finally{c(!1)}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),l.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:" Volver"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),l.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),l.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),l.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),l.jsx("div",{className:"text-right mt-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:" Eliminar Plan"}),l.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},KRe=({userId:e})=>{const{actividades:t,save:r}=VRe(e),[n,a]=S.useState("list"),[s,i]=S.useState(null),[o,c]=S.useState(!1),[u,d]=S.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,p]=S.useState(f);S.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(I){console.error("Error al verificar evento en calendario:",I)}},x=I=>{const{name:E,value:N}=I.target;p(B=>({...B,[E]:N}))},b=(I,E,N)=>{p(B=>({...B,tareas:B.tareas.map(R=>R.id===I?{...R,[E]:N}:R)}))},y=()=>{p(I=>({...I,tareas:[...I.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},w=I=>{p(E=>({...E,tareas:E.tareas.filter(N=>N.id!==I)}))},_=async I=>{I.preventDefault(),c(!0);const E=`Basado en la siguiente informacin de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripcin: ${h.descripcion}
    - Tareas: ${h.tareas.map(N=>N.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propsito principal de la actividad.`;try{OF("Planificacin - Actividad Calendario");const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",L=(await(await new cs(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(E)).response).text(),M={...h,objetivo:L.replace(/(\*\*|\*)/g,"")},J=await r(M),H={...M,id:J};i(H),a("summary")}catch(N){console.error("Error al generar objetivo con IA:",N),alert("Hubo un error al generar el objetivo. La actividad se guardar sin l.");try{const B={...h,objetivo:"No generado"},R=await r(B),P={...B,id:R};i(P),a("summary")}catch(B){console.error("Error al guardar actividad:",B),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{c(!1)}},j=async I=>{if(I)try{d(!0),alert("Actividad marcada como aadida al calendario (funcionalidad en desarrollo).")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},k="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsxs("form",{onSubmit:_,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Informacin General"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{name:"nombre",value:h.nombre,onChange:x,placeholder:"Nombre de la Actividad",className:k,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:x,className:k,required:!0,disabled:o}),l.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:x,className:k,required:!0,disabled:o})]}),l.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:x,placeholder:"Descripcin (objetivos, contenidos, metodologa)",rows:4,className:k,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:x,placeholder:"Ubicacin",className:k,required:!0,disabled:o}),l.jsx("input",{name:"participantes",value:h.participantes,onChange:x,placeholder:"Participantes",className:k,required:!0,disabled:o})]}),l.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:x,placeholder:"Recursos Generales Necesarios",rows:2,className:k,disabled:o})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),l.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),l.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((I,E)=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[l.jsx("button",{type:"button",onClick:()=>w(I.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:""}),l.jsx("textarea",{value:I.descripcion,onChange:N=>b(I.id,"descripcion",N.target.value),placeholder:`Descripcin de la Tarea ${E+1}`,rows:2,className:k,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[l.jsx("input",{value:I.responsable,onChange:N=>b(I.id,"responsable",N.target.value),placeholder:"Responsable",className:k,required:!0,disabled:o}),l.jsx("input",{value:I.recursos,onChange:N=>b(I.id,"recursos",N.target.value),placeholder:"Recursos Necesarios",className:k,disabled:o})]})]},I.id))})]}),l.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[l.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),l.jsx("p",{className:"text-sm",children:"Este objetivo se generar automticamente a partir de la descripcin y las tareas ingresadas. Una vez guardada la actividad, podr revisar y ajustar el objetivo propuesto por el sistema."})]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-lg",children:"Actividad Planificada con xito!"}),l.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuacin."})]})]}),l.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),l.jsxs("div",{className:"space-y-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),l.jsx("span",{children:s.nombre})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),l.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Descripcin:"}),l.jsx("p",{children:s.descripcion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Ubicacin:"}),l.jsx("span",{children:s.ubicacion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),l.jsx("span",{children:s.participantes})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),l.jsx("p",{children:s.recursosGenerales})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),l.jsx("p",{children:s.objetivo})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[l.jsx("p",{className:"text-sm",children:"Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),l.jsx("button",{onClick:()=>j(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?" Aadido al Calendario":"Aadir al Calendario"})]})]}),l.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),l.jsx("button",{onClick:()=>{a("form"),p(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),l.jsx("div",{className:"space-y-3",children:t.length>0?t.map(I=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:I.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(I.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",I.ubicacion]})]},I.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},qRe=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=HRe(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[c,u]=S.useState(o),[d,f]=S.useState(null),[h,p]=S.useState(!1),[g,x]=S.useState(null),[b,y]=S.useState("unidad"),[w,_]=S.useState(null),[j,k]=S.useState(null),I=S.useMemo(()=>e.asignaturas||[],[e.asignaturas]),E=S.useMemo(()=>{const X=e.cursos||[],ee=new Set;return X.forEach(F=>{F.startsWith("1")?ee.add("1 Medio"):F.startsWith("2")?ee.add("2 Medio"):F.startsWith("3")?ee.add("3 Medio"):F.startsWith("4")&&ee.add("4 Medio")}),Array.from(ee)},[e.cursos]);S.useEffect(()=>{u(X=>({...X,asignatura:I[0]||"",nivel:E[0]||""})),console.log(" Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(X=>({id:X.id,autor:X.autor,tipo:X.tipo,coincideConUserId:X.autor===t}))})},[I,E,e,t,r]);const N=X=>{const{name:ee,value:F}=X.target;u(z=>({...z,[ee]:ee==="cantidadClases"?parseInt(F,10):F}))},B=()=>{const{asignatura:X,nivel:ee,nombreUnidad:F,contenidos:z,cantidadClases:Y,observaciones:te,ideasParaUnidad:ae}=c;return`Eres un experto diseador curricular para la educacin media tcnico profesional en Chile. Tu tarea es generar una planificacin de unidad didctica completa en formato JSON estructurado, basndote en la informacin proporcionada.

    **Informacin Base:**
    - Asignatura: ${X}
    - Nivel: ${ee}
    - Nombre de la Unidad: "${F}"
    - Contenidos clave a trabajar (insumo principal): "${z}"
    - Cantidad de clases para la unidad: ${Y}
    - Ideas y perspectiva del docente para la unidad: "${ae||"Ninguna. S creativo."}"
    - Observaciones y nfasis del docente: "${te||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluacin general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Y} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje especfico para la leccin, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarn en la leccin.
        - **habilidadesBloom**: La habilidad principal de la Taxonoma de Bloom que se trabajar (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la leccin con una habilidad del perfil de egreso (ej: "Pensamiento crtico", "Colaboracin").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el nmero de clase entre parntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podra realizar un trabajo interdisciplinario.

    Asegrate de que el contenido generado sea coherente, pedaggicamente slido y est directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},R=async X=>{if(X.preventDefault(),p(!0),x(null),!c.contenidos||!c.nombreUnidad){x("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),p(!1);return}try{OF("Planificacin - Unidad");const ee="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new cs(ee).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Y=B(),te={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},ie=(await(await z.generateContent({contents:[{parts:[{text:Y}]}],generationConfig:{responseMimeType:"application/json",responseSchema:te}})).response).text(),ce=JSON.parse(ie),pe={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:c.asignatura,nivel:c.nivel,nombreUnidad:c.nombreUnidad,contenidos:c.contenidos,cantidadClases:c.cantidadClases,observaciones:c.observaciones,ideasParaUnidad:c.ideasParaUnidad,objetivosAprendizaje:ce.objetivosAprendizaje,indicadoresEvaluacion:ce.indicadoresEvaluacion,detallesLeccion:ce.detallesLeccion};if(d)await a(d.id,pe),f({...pe,id:d.id});else{const Be=await n(pe);f({...pe,id:Be})}}catch(ee){console.error("Error al generar planificacin con IA",ee),x("Ocurri un error al contactar con la IA. Verifique la configuracin y reintente.")}finally{p(!1)}},P=async(X,ee)=>{p(!0),x(null);const F=`A partir de la siguiente informacin de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${ee.asignatura}
    - Nivel: ${ee.nivel}
    - Objetivo de la clase: ${X.objetivosAprendizaje}
    - Contenidos: ${X.contenidosConceptuales}
    - Actividades sugeridas: ${X.actividades}
    
    Responde SLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{OF("Planificacin - Utilizar Clase");const z="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",te=new cs(z).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ae={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},ce=(await(await te.generateContent({contents:[{parts:[{text:F}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ae}})).response).text(),pe=JSON.parse(ce),Be={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:ee.asignatura,nivel:ee.nivel,contenidos:X.contenidosConceptuales,observaciones:"",nombreClase:X.actividades,duracionClase:80,momentosClase:pe,detalleLeccionOrigen:X};await n(Be),alert('Plan de clase generado y guardado en la pestaa "Clase"!'),y("clase")}catch(z){console.error("Error al generar plan de clase con IA",z),x("No se pudo generar el plan de clase. Intntelo de nuevo.")}finally{p(!1)}},D=X=>{X.tipo==="Unidad"&&(u({asignatura:X.asignatura,nivel:X.nivel,nombreUnidad:X.nombreUnidad,contenidos:X.contenidos,cantidadClases:X.cantidadClases,observaciones:X.observaciones,ideasParaUnidad:X.ideasParaUnidad||""}),f(X),window.scrollTo({top:0,behavior:"smooth"}))},L=async X=>{if(window.confirm("Est seguro de que desea eliminar esta planificacin?"))try{await s(X),(d==null?void 0:d.id)===X&&(f(null),u(o))}catch(ee){console.error("Error al eliminar planificacin:",ee),alert("Error al eliminar la planificacin. Por favor, intente nuevamente.")}},M=async X=>{if(window.confirm("Est seguro de que desea eliminar este plan de clase?"))try{await s(X),(w==null?void 0:w.id)===X&&_(null),console.log(" Plan de clase eliminado exitosamente")}catch(ee){console.error("Error al eliminar plan de clase:",ee),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},J=(X,ee)=>{d&&k({planId:d.id,lessonIndex:X,lessonData:ee})},H=async X=>{if(j)try{const{planId:ee,lessonIndex:F}=j,z=r.find(ae=>ae.id===ee&&ae.tipo==="Unidad");if(!z)return;const Y=[...z.detallesLeccion];Y[F]=X;const te={...z,detallesLeccion:Y};await a(ee,te),f(te),k(null)}catch(ee){console.error("Error al actualizar leccin:",ee),alert("Error al actualizar la leccin. Por favor, intente nuevamente.")}},K="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificacin de unidad estructurada."}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("form",{onSubmit:R,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:c.asignatura,onChange:N,className:K,disabled:h,children:I.length>0?I.map(X=>l.jsx("option",{value:X,children:X},X)):l.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:c.nivel,onChange:N,className:K,disabled:h,children:E.length>0?E.map(X=>l.jsx("option",{value:X,children:X},X)):l.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombreUnidad",value:c.nombreUnidad,onChange:N,className:K,placeholder:"Ej: La Clula y sus procesos",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenidos",value:c.contenidos,onChange:N,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificacin debe abordar.",className:K,disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),l.jsx("textarea",{name:"ideasParaUnidad",value:c.ideasParaUnidad,onChange:N,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificacin (ej: enfocar en trabajo colaborativo, usar casos prcticos, conectar con la actualidad).",className:K,disabled:h})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),l.jsx("input",{type:"number",name:"cantidadClases",value:c.cantidadClases,onChange:N,className:K,min:"1",max:"20",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (nfasis)"}),l.jsx("textarea",{name:"observaciones",value:c.observaciones,onChange:N,rows:1,placeholder:"Ej: clase prctica, modelo ABP, juego, reforzamiento...",className:K,disabled:h})]})]}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:h||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:h?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),g&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g})]})]}),d&&l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisin y Edicin"}),l.jsx($Re,{plan:d,onEditLesson:J,onUseLesson:P,onUpdatePlan:a,isLoading:h})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:r.filter(X=>X.tipo==="Unidad").length>0?r.filter(X=>X.tipo==="Unidad").map(X=>l.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===X.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:X.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(X.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",X.contenidos]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>D(X),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:h,children:"Ver y Editar"}),l.jsx("button",{onClick:()=>L(X.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:h,children:""})]})]})},X.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),G=()=>{const X=r.filter(ee=>ee.tipo==="Clase").sort((ee,F)=>new Date(F.fechaCreacion).getTime()-new Date(ee.fechaCreacion).getTime());return w?l.jsx(GRe,{plan:w,onBack:()=>_(null),onDelete:M,onSave:async ee=>{try{await a(ee.id,ee),_(ee)}catch(F){console.error("Error al actualizar plan de clase:",F),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:h}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:X.length>0?X.map(ee=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ee.nombreClase}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(ee.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",ee.contenidos]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>_(ee),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},ee.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaa 'Unidad'."})})]})};return!e||!e.email&&!e.id?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificacin"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>y("unidad"),className:`${b==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),l.jsx("button",{onClick:()=>y("clase"),className:`${b==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),l.jsx("button",{onClick:()=>y("calendario"),className:`${b==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),b==="unidad"&&V(),b==="clase"&&G(),b==="calendario"&&l.jsx(KRe,{userId:t}),j&&l.jsx(zRe,{lesson:j.lessonData,onClose:()=>k(null),onSave:H,isLoading:h})]})},sk="events",WRe=async()=>{try{const e=zt(Nt(xn,sk),_r("date","asc"));return(await ga(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},XRe=async e=>{try{return{id:(await Tn(Nt(xn,sk),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},YRe=async(e,t)=>{try{const r=dr(xn,sk,e);await Vu(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},JRe=async e=>{try{const t=dr(xn,sk,e);await za(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},ZRe=["Dom","Lun","Mar","Mi","Jue","Vie","Sb"],pG={[un.EVALUACION]:l.jsx(ef,{className:"h-4 w-4"}),[un.ACTO]:l.jsx(rwe,{className:"h-4 w-4"}),[un.ACTIVIDAD_FOCALIZADA]:l.jsx(F2,{className:"h-4 w-4"}),[un.SALIDA_PEDAGOGICA]:l.jsx(vwe,{className:"h-4 w-4"})},e8e=e=>{switch(e.type){case un.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case un.ACTO:return`Acto: ${e.ubicacion}`;case un.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case un.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},t8e=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,c]=S.useState({});S.useEffect(()=>{c(a||{type:un.EVALUACION,subtype:Cp.PRUEBA_PARCIAL,asignatura:qi[0],curso:Ks[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=x=>{const{name:b,value:y}=x.target;c(w=>({...w,[b]:y}))},f=x=>{c(b=>{if(b.type===un.SALIDA_PEDAGOGICA){const y=b.cursos||[],w=y.includes(x)?y.filter(_=>_!==x):[...y,x];return{...b,cursos:w.sort()}}return b})},h=x=>{var y;x.preventDefault();let b;switch(o.type){case un.EVALUACION:{const w={date:s,type:un.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===Cp.RUBRICA||o.subtype===Cp.PAUTA_COTEJO)&&((y=o.enlace)!=null&&y.trim())&&(w.enlace=o.enlace.trim()),b=w;break}case un.ACTO:b={date:s,type:un.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case un.ACTIVIDAD_FOCALIZADA:b={date:s,type:un.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case un.SALIDA_PEDAGOGICA:b={date:s,type:un.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(b)};if(!e)return null;const p=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(o.type){case un.EVALUACION:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),l.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:_be.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:qi.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:Ks.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),l.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===Cp.RUBRICA||o.subtype===Cp.PAUTA_COTEJO)&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),l.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case un.ACTO:case un.ACTIVIDAD_FOCALIZADA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),l.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin"}),l.jsxs("div",{className:"relative",children:[l.jsx(tN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),l.jsxs("div",{className:"relative",children:[l.jsx(V0,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case un.SALIDA_PEDAGOGICA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),l.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicacin/Destino"}),l.jsxs("div",{className:"relative",children:[l.jsx(tN,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("fieldset",{children:[l.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),l.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:Ks.map(x=>l.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(x),onChange:()=>f(x),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),l.jsx("span",{children:x})]},x))})]})]});default:return null}};return l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:l.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:x=>x.stopPropagation(),children:l.jsxs("form",{onSubmit:h,children:[l.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:p})]}),l.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:l.jsx(rN,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),l.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(un).map(x=>l.jsx("option",{value:x,children:x},x))})]}),g()]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[l.jsx("div",{children:a&&n&&l.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[l.jsx(tl,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[l.jsx(rN,{className:"h-4 w-4"}),"Cancelar"]}),l.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[l.jsx(vm,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},r8e=({profile:e})=>{const[t,r]=S.useState(new Date),[n,a]=S.useState([]),[s,i]=S.useState(!1),[o,c]=S.useState(null),[u,d]=S.useState(!1),[f,h]=S.useState(Object.values(un)),[p,g]=S.useState(!1),[x,b]=S.useState(null),[y,w]=S.useState(null),_=S.useCallback(async()=>{i(!0);try{const P=await WRe();a(P),c(null)}catch(P){console.error("Error al cargar eventos desde Firestore",P),c("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);S.useEffect(()=>{_()},[_]);const j=S.useMemo(()=>{const P=t.getFullYear(),D=t.getMonth(),L=new Date(P,D,1).getDay(),M=new Date(P,D+1,0).getDate(),J=[];let H=1;for(let K=0;K<6;K++){const V=[];for(let G=0;G<7;G++)K===0&&G<L||H>M?V.push(null):(V.push(new Date(P,D,H)),H++);if(J.push(V),H>M)break}return J},[t]),k=P=>{h(D=>D.includes(P)?D.filter(L=>L!==P):[...D,P])},I=()=>{f.length===Object.values(un).length?h([]):h(Object.values(un))},E=P=>{e!==qt.ESTUDIANTE&&(b(P.toISOString().split("T")[0]),w(null),g(!0))},N=(P,D)=>{D.stopPropagation(),e!==qt.ESTUDIANTE&&(b(P.date),w(P),g(!0))},B=async P=>{d(!0);try{y?await YRe(y.id,P):await XRe(P),await _(),g(!1)}catch(D){console.error("Error al guardar evento:",D);const L=D instanceof Error?D.message:"Error desconocido";c(`Error al guardar el evento: ${L}`)}finally{d(!1)}},R=async()=>{if(y){d(!0);try{await JRe(y.id),await _(),g(!1)}catch(P){console.error("Error al eliminar evento:",P);const D=P instanceof Error?P.message:"Error desconocido";c(`No se pudo eliminar el evento: ${D}`)}finally{d(!1)}}};return l.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),l.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Acadmico"}),l.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&l.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando"})})]}),o&&l.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:o}),!s&&n.length===0&&l.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[l.jsx(Mye,{className:"h-5 w-5 mt-0.5"}),l.jsx("p",{children:"No hay eventos registrados en la nube."})]}),l.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[l.jsx(yP,{className:"h-4 w-4"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[l.jsx("button",{onClick:I,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(un).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(un).map(P=>l.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(P)?`shadow-sm ${vv[P].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[l.jsx("input",{type:"checkbox",checked:f.includes(P),onChange:()=>k(P),className:"hidden"}),l.jsx("span",{className:"shrink-0",children:pG[P]}),l.jsx("span",{children:vv[P].label})]},P))]})]}),l.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[l.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(Bw,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(vP,{className:"h-5 w-5"})})]}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),l.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),l.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:ZRe.map(P=>l.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:P},P))}),l.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:j.flat().map((P,D)=>{const L=P&&P.toDateString()===new Date().toDateString(),M=P==null?void 0:P.toISOString().split("T")[0],J=M?n.filter(H=>H.date===M&&f.includes(H.type)):[];return l.jsx("div",{onClick:()=>P&&E(P),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${P?e!==qt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:P&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:`self-end text-sm font-semibold ${L?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:P.getDate()}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:J.map(H=>l.jsxs("div",{onClick:K=>N(H,K),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${vv[H.type].color}`,children:[l.jsx("span",{className:"shrink-0",children:pG[H.type]}),l.jsx("span",{className:"truncate",children:e8e(H)})]},H.id))}),e!==qt.ESTUDIANTE&&l.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:l.jsx(Lu,{className:"h-4 w-4"})})]})},D)})})]}),p&&l.jsx(t8e,{isOpen:p,onClose:()=>g(!1),onSave:B,onDelete:R,event:y,date:x,isLoading:u})]})},ik="anuncios",n8e=async()=>{try{const e=zt(Nt(xn,ik),_r("fechaPublicacion","desc"));return(await ga(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},a8e=async e=>{try{return{id:(await Tn(Nt(xn,ik),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},s8e=async(e,t)=>{try{const r=dr(xn,ik,e);await Vu(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},i8e=async e=>{try{const t=dr(xn,ik,e);await za(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},gG=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],o8e=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=S.useState({tipo:"Todos",cursos:[]}),f=S.useCallback(async()=>{a(!0);try{const E=await n8e();r(E),i(null)}catch(E){console.error("Error al cargar anuncios desde Firestore",E),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);S.useEffect(()=>{f()},[f]);const h=E=>{const{name:N,value:B}=E.target;c(R=>({...R,[N]:B}))},p=E=>{d({tipo:E,cursos:E==="Cursos"?[]:void 0})},g=E=>{d(N=>{var R;if(N.tipo!=="Cursos")return N;const B=(R=N.cursos)!=null&&R.includes(E)?N.cursos.filter(P=>P!==E):[...N.cursos||[],E];return{...N,cursos:B}})},x=async E=>{if(E.preventDefault(),!o.titulo||!o.mensaje){alert("Ttulo y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const N={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...o};await a8e(N),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(N){console.error("Error al crear anuncio:",N),i("Error al publicar el anuncio en la nube.")}},b=async E=>{if(window.confirm("Est seguro de que desea eliminar este anuncio?"))try{await i8e(E),await f()}catch(N){console.error("Error al eliminar anuncio:",N),i("No se pudo eliminar el anuncio en la nube.")}},y=async E=>{try{const N=t.find(B=>B.id===E);N&&(await s8e(E,{destacado:!N.destacado}),await f())}catch(N){console.error("Error al actualizar anuncio:",N),i("No se pudo actualizar el estado del anuncio en la nube.")}},w=S.useMemo(()=>[...t].sort((E,N)=>E.destacado&&!N.destacado?-1:!E.destacado&&N.destacado?1:new Date(N.fechaPublicacion).getTime()-new Date(E.fechaPublicacion).getTime()),[t]),_=S.useMemo(()=>{const E=e.profile,N=e.curso;return w.filter(B=>{if(E===qt.SUBDIRECCION)return!0;if(!B.destinatarios)return E!==qt.ESTUDIANTE;const{tipo:R,cursos:P}=B.destinatarios;return R==="Todos"||R==="Profesores"&&E===qt.PROFESORADO||R==="Coordinacin TP"&&E===qt.COORDINACION_TP?!0:R==="Cursos"?E===qt.ESTUDIANTE?P==null?void 0:P.includes(N||""):!0:!1})},[w,e]),j=E=>e.profile===qt.ESTUDIANTE?!1:e.profile===qt.SUBDIRECCION||e.profile===E.profileCreador,k=()=>e.profile===qt.SUBDIRECCION||e.profile===qt.PROFESORADO,I="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==qt.ESTUDIANTE?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),l.jsxs("form",{onSubmit:x,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ttulo"}),l.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:h,required:!0,className:I})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),l.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:h,required:!0,rows:4,className:I})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),l.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinacin TP"].map(E=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"destinatarioTipo",value:E,checked:u.tipo===E,onChange:()=>p(E),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),l.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:E.replace("Coordinacin TP","Coord. TP")})]},E))})]}),u.tipo==="Cursos"&&l.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:Ks.map(E=>{var N;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(N=u.cursos)==null?void 0:N.includes(E),onChange:()=>g(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:E})]},E)})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),l.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:I})]}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este mdulo es de solo lectura."})]}),!n&&_.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&_.length>0&&_.map((E,N)=>{const B=gG[N%gG.length];return l.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${B.bg} ${B.rotate}`,children:[E.destacado&&l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:l.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:""})}),l.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:E.titulo}),l.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:E.mensaje}),E.adjunto&&l.jsx("div",{className:"font-sans text-sm mb-4",children:l.jsxs("a",{href:E.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),l.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:E.autor}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(E.fechaPublicacion).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"flex items-center",children:[k()&&l.jsx("button",{onClick:()=>y(E.id),title:E.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("span",{className:`text-xl transition-opacity ${E.destacado?"opacity-100":"opacity-30"}`,children:""})}),j(E)&&l.jsx("button",{onClick:()=>b(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},E.id)})})]})},vse="api_logs",l8e=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:sr.fromDate(new Date)};await Tn(Nt(ft,vse),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},c8e=e=>{const t=zt(Nt(ft,vse),_r("timestamp","desc"));return mr(t,n=>{const a=n.docs.map(s=>{var o,c;const i=s.data();return{id:s.id,...i,timestamp:((c=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:c.call(o).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},c1=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es invlido o no est en sesin.");return}l8e(e,t)},P8="actas_de_reunion",u8e=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},d8e=e=>{const t=zt(Nt(ft,P8),_r("fechaCreacion","desc"));return mr(t,n=>{const a=n.docs.map(s=>u8e(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},A8e=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:sr.fromDate(new Date(e.fechaCreacion))};return(await Tn(Nt(ft,P8),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},f8e=async e=>{try{const t=dr(ft,P8,e);await za(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},bse=window.SpeechRecognition||window.webkitSpeechRecognition,xG=!!bse,h8e=({isListening:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),m8e=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(null),[s,i]=S.useState({tipoReunion:OT[0],asistentes:"",textoReunion:""}),[o,c]=S.useState(!1),[u,d]=S.useState(!1),[f,h]=S.useState(!0),[p,g]=S.useState(null),x=S.useRef(null);S.useEffect(()=>{h(!0);const E=d8e(N=>{r(N),!n&&N.length>0&&a(N[0]),h(!1)});return()=>E()},[n]);const b=E=>{const{name:N,value:B}=E.target;i(R=>({...R,[N]:B}))},y=S.useCallback(()=>{var E;if(!xG){g("El reconocimiento de voz no es compatible con este navegador.");return}o?(E=x.current)==null||E.stop():(x.current=new bse,x.current.lang="es-CL",x.current.continuous=!0,x.current.interimResults=!0,x.current.onresult=N=>{let B="";for(let R=N.resultIndex;R<N.results.length;++R)N.results[R].isFinal&&(B+=N.results[R][0].transcript+". ");i(R=>({...R,textoReunion:R.textoReunion+B}))},x.current.onstart=()=>c(!0),x.current.onend=()=>c(!1),x.current.onerror=N=>{console.error("Speech recognition error",N.error),g(`Error de reconocimiento: ${N.error}`),c(!1)},x.current.start())},[o]),w=async E=>{E.preventDefault();const{tipoReunion:N,asistentes:B,textoReunion:R}=s;if(!N||!B.trim()||!R.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{c1("Generador de Actas");const P="",L=new globalThis.GoogleGenerativeAI(P).getGenerativeModel({model:"gemini-pro"}),M=`
                Analiza el siguiente texto de un acta de reunin y extrae la informacin clave.
                El texto es una transcripcin de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones especficas tomadas.
                - Lista cualquier plazo o fecha lmite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${R}"
                
                Asistentes a la reunin para referencia de nombres: ${B}
            `,V=(await(await L.generateContent(M)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(V),X={fechaCreacion:new Date().toISOString(),...s,...G},ee=await A8e(X,e);i({tipoReunion:OT[0],asistentes:"",textoReunion:""})}catch(P){console.error("Error al analizar acta con IA:",P),g("Ocurri un error al procesar el acta con la IA. Por favor, revise el texto e intntelo de nuevo.")}finally{d(!1)}},_=async E=>{if(window.confirm("Est seguro de que desea eliminar esta acta?"))try{await f8e(E),(n==null?void 0:n.id)===E&&a(t.length>1?t[1]:null)}catch(N){console.error("Error deleting acta:",N),alert("No se pudo eliminar el acta.")}},j=E=>{a(E)},k=E=>E.temas||E.acuerdos||E.plazos||E.responsables?l.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Anlisis con IA"}),E.temas&&E.temas.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.temas.map((B,R)=>l.jsx("li",{children:B},R))})]}),E.acuerdos&&E.acuerdos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.acuerdos.map((B,R)=>l.jsx("li",{children:B},R))})]}),E.plazos&&E.plazos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.plazos.map((B,R)=>l.jsx("li",{children:B},R))})]}),E.responsables&&E.responsables.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:E.responsables.map((B,R)=>l.jsx("li",{children:B},R))})]})]}):null,I="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?l.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[l.jsxs("div",{className:"md:col-span-1 space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),l.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",l.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es slo una herramienta para agilizar redaccin."]})})]})}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunin"}),l.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:b,required:!0,className:I,children:OT.map(E=>l.jsx("option",{value:E,children:E},E))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),l.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:b,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:I})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunin"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:b,required:!0,rows:6,placeholder:"Escriba o use el micrfono para dictar...",className:I}),xG&&l.jsx("button",{type:"button",onClick:y,title:o?"Detener grabacin":"Iniciar grabacin",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:l.jsx(h8e,{isListening:o})})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(E=>l.jsxs("button",{onClick:()=>j(E),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===E.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.tipoReunion}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(E.fechaCreacion).toLocaleDateString("es-CL")})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),l.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunin: ${n.tipoReunion}`}),l.jsx("button",{onClick:()=>_(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[l.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),l.jsx("h2",{children:"Asistentes"}),l.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((E,N)=>E.trim()&&l.jsx("li",{children:E.trim()},N))}),k(n),l.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripcin Original"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:l.jsx("p",{children:n.textoReunion})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[l.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:""}),l.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aqu, o cree una nueva usando el formulario."})]})})]})},p8e="modulepreload",g8e=function(e){return"/"+e},vG={},u1=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=g8e(u),u in vG)return;vG[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":p8e,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function ma(e){"@babel/helpers - typeof";return ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ma(e)}var Yo=Uint8Array,Rc=Uint16Array,R8=Int32Array,ok=new Yo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lk=new Yo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),DF=new Yo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),yse=function(e,t){for(var r=new Rc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new R8(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},wse=yse(ok,2),Ese=wse.b,PF=wse.r;Ese[28]=258,PF[258]=28;var Cse=yse(lk,0),x8e=Cse.b,bG=Cse.r,RF=new Rc(32768);for(var Ua=0;Ua<32768;++Ua){var C0=(Ua&43690)>>1|(Ua&21845)<<1;C0=(C0&52428)>>2|(C0&13107)<<2,C0=(C0&61680)>>4|(C0&3855)<<4,RF[Ua]=((C0&65280)>>8|(C0&255)<<8)>>1}var YA=function(e,t,r){for(var n=e.length,a=0,s=new Rc(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new Rc(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new Rc(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=i[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)o[RF[f]>>c]=u}else for(o=new Rc(n),a=0;a<n;++a)e[a]&&(o[a]=RF[i[e[a]-1]++]>>15-e[a]);return o},wm=new Yo(288);for(var Ua=0;Ua<144;++Ua)wm[Ua]=8;for(var Ua=144;Ua<256;++Ua)wm[Ua]=9;for(var Ua=256;Ua<280;++Ua)wm[Ua]=7;for(var Ua=280;Ua<288;++Ua)wm[Ua]=8;var Gw=new Yo(32);for(var Ua=0;Ua<32;++Ua)Gw[Ua]=5;var v8e=YA(wm,9,0),b8e=YA(wm,9,1),y8e=YA(Gw,5,0),w8e=YA(Gw,5,1),j3=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},pd=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},I3=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},L8=function(e){return(e+7)/8|0},_se=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Yo(e.subarray(t,r))},E8e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],bd=function(e,t,r){var n=new Error(t||E8e[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,bd),!r)throw n;return n},C8e=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Yo(0);var i=!r,o=i||t.i!=2,c=t.i;i&&(r=new Yo(a*3));var u=function(Be){var ne=r.length;if(Be>ne){var _e=new Yo(Math.max(ne*2,Be));_e.set(r),r=_e}},d=t.f||0,f=t.p||0,h=t.b||0,p=t.l,g=t.d,x=t.m,b=t.n,y=a*8;do{if(!p){d=pd(e,f,1);var w=pd(e,f+1,3);if(f+=3,w)if(w==1)p=b8e,g=w8e,x=9,b=5;else if(w==2){var I=pd(e,f,31)+257,E=pd(e,f+10,15)+4,N=I+pd(e,f+5,31)+1;f+=14;for(var B=new Yo(N),R=new Yo(19),P=0;P<E;++P)R[DF[P]]=pd(e,f+P*3,7);f+=E*3;for(var D=j3(R),L=(1<<D)-1,M=YA(R,D,1),P=0;P<N;){var J=M[pd(e,f,L)];f+=J&15;var _=J>>4;if(_<16)B[P++]=_;else{var H=0,K=0;for(_==16?(K=3+pd(e,f,3),f+=2,H=B[P-1]):_==17?(K=3+pd(e,f,7),f+=3):_==18&&(K=11+pd(e,f,127),f+=7);K--;)B[P++]=H}}var V=B.subarray(0,I),G=B.subarray(I);x=j3(V),b=j3(G),p=YA(V,x,1),g=YA(G,b,1)}else bd(1);else{var _=L8(f)+4,j=e[_-4]|e[_-3]<<8,k=_+j;if(k>a){c&&bd(0);break}o&&u(h+j),r.set(e.subarray(_,k),h),t.b=h+=j,t.p=f=k*8,t.f=d;continue}if(f>y){c&&bd(0);break}}o&&u(h+131072);for(var X=(1<<x)-1,ee=(1<<b)-1,F=f;;F=f){var H=p[I3(e,f)&X],z=H>>4;if(f+=H&15,f>y){c&&bd(0);break}if(H||bd(2),z<256)r[h++]=z;else if(z==256){F=f,p=null;break}else{var Y=z-254;if(z>264){var P=z-257,te=ok[P];Y=pd(e,f,(1<<te)-1)+Ese[P],f+=te}var ae=g[I3(e,f)&ee],le=ae>>4;ae||bd(3),f+=ae&15;var G=x8e[le];if(le>3){var te=lk[le];G+=I3(e,f)&(1<<te)-1,f+=te}if(f>y){c&&bd(0);break}o&&u(h+131072);var ie=h+Y;if(h<G){var ce=s-G,pe=Math.min(G,ie);for(ce+h<0&&bd(3);h<pe;++h)r[h]=n[ce+h]}for(;h<ie;++h)r[h]=r[h-G]}}t.l=p,t.p=F,t.b=h,t.f=d,p&&(d=1,t.m=x,t.d=g,t.n=b)}while(!d);return h!=r.length&&i?_se(r,0,h):r.subarray(0,h)},Mf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},ry=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},F3=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:Sse,l:0};if(a==1){var i=new Yo(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(k,I){return k.f-I.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var p=new Rc(h+1),g=LF(r[d-1],p,0);if(g>t){var n=0,x=0,b=g-t,y=1<<b;for(s.sort(function(I,E){return p[E.s]-p[I.s]||I.f-E.f});n<a;++n){var w=s[n].s;if(p[w]>t)x+=y-(1<<g-p[w]),p[w]=t;else break}for(x>>=b;x>0;){var _=s[n].s;p[_]<t?x-=1<<t-p[_]++-1:++n}for(;n>=0&&x;--n){var j=s[n].s;p[j]==t&&(--p[j],++x)}g=t}return{t:new Yo(p),l:g}},LF=function(e,t,r){return e.s==-1?Math.max(LF(e.l,t,r+1),LF(e.r,t,r+1)):t[e.s]=r},yG=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Rc(++t),n=0,a=e[0],s=1,i=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},ny=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},Nse=function(e,t,r){var n=r.length,a=L8(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},wG=function(e,t,r,n,a,s,i,o,c,u,d){Mf(t,d++,r),++a[256];for(var f=F3(a,15),h=f.t,p=f.l,g=F3(s,15),x=g.t,b=g.l,y=yG(h),w=y.c,_=y.n,j=yG(x),k=j.c,I=j.n,E=new Rc(19),N=0;N<w.length;++N)++E[w[N]&31];for(var N=0;N<k.length;++N)++E[k[N]&31];for(var B=F3(E,7),R=B.t,P=B.l,D=19;D>4&&!R[DF[D-1]];--D);var L=u+5<<3,M=ny(a,wm)+ny(s,Gw)+i,J=ny(a,h)+ny(s,x)+i+14+3*D+ny(E,R)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&L<=M&&L<=J)return Nse(t,d,e.subarray(c,c+u));var H,K,V,G;if(Mf(t,d,1+(J<M)),d+=2,J<M){H=YA(h,p,0),K=h,V=YA(x,b,0),G=x;var X=YA(R,P,0);Mf(t,d,_-257),Mf(t,d+5,I-1),Mf(t,d+10,D-4),d+=14;for(var N=0;N<D;++N)Mf(t,d+3*N,R[DF[N]]);d+=3*D;for(var ee=[w,k],F=0;F<2;++F)for(var z=ee[F],N=0;N<z.length;++N){var Y=z[N]&31;Mf(t,d,X[Y]),d+=R[Y],Y>15&&(Mf(t,d,z[N]>>5&127),d+=z[N]>>12)}}else H=v8e,K=wm,V=y8e,G=Gw;for(var N=0;N<o;++N){var te=n[N];if(te>255){var Y=te>>18&31;ry(t,d,H[Y+257]),d+=K[Y+257],Y>7&&(Mf(t,d,te>>23&31),d+=ok[Y]);var ae=te&31;ry(t,d,V[ae]),d+=G[ae],ae>3&&(ry(t,d,te>>5&8191),d+=lk[ae])}else ry(t,d,H[te]),d+=K[te]}return ry(t,d,H[256]),d+K[256]},_8e=new R8([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Sse=new Yo(0),N8e=function(e,t,r,n,a,s){var i=s.z||e.length,o=new Yo(n+i+5*(1+Math.ceil(i/7e3))+a),c=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=_8e[t-1],h=f>>13,p=f&8191,g=(1<<r)-1,x=s.p||new Rc(32768),b=s.h||new Rc(g+1),y=Math.ceil(r/3),w=2*y,_=function(De){return(e[De]^e[De+1]<<y^e[De+2]<<w)&g},j=new R8(25e3),k=new Rc(288),I=new Rc(32),E=0,N=0,B=s.i||0,R=0,P=s.w||0,D=0;B+2<i;++B){var L=_(B),M=B&32767,J=b[L];if(x[M]=J,b[L]=M,P<=B){var H=i-B;if((E>7e3||R>24576)&&(H>423||!u)){d=wG(e,c,0,j,k,I,N,R,D,B-D,d),R=E=N=0,D=B;for(var K=0;K<286;++K)k[K]=0;for(var K=0;K<30;++K)I[K]=0}var V=2,G=0,X=p,ee=M-J&32767;if(H>2&&L==_(B-ee))for(var F=Math.min(h,H)-1,z=Math.min(32767,B),Y=Math.min(258,H);ee<=z&&--X&&M!=J;){if(e[B+V]==e[B+V-ee]){for(var te=0;te<Y&&e[B+te]==e[B+te-ee];++te);if(te>V){if(V=te,G=ee,te>F)break;for(var ae=Math.min(ee,te-2),le=0,K=0;K<ae;++K){var ie=B-ee+K&32767,ce=x[ie],pe=ie-ce&32767;pe>le&&(le=pe,J=ie)}}}M=J,J=x[M],ee+=M-J&32767}if(G){j[R++]=268435456|PF[V]<<18|bG[G];var Be=PF[V]&31,ne=bG[G]&31;N+=ok[Be]+lk[ne],++k[257+Be],++I[ne],P=B+V,++E}else j[R++]=e[B],++k[e[B]]}}for(B=Math.max(B,P);B<i;++B)j[R++]=e[B],++k[e[B]];d=wG(e,c,u,j,k,I,N,R,D,B-D,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=b,s.p=x,s.i=B,s.w=P)}else{for(var B=s.w||0;B<i+u;B+=65535){var _e=B+65535;_e>=i&&(c[d/8|0]=u,_e=i),d=Nse(c,d+1,e.subarray(B,_e))}s.i=i}return _se(o,0,n+L8(d)+a)},kse=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},S8e=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new Yo(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return N8e(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},Bse=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},k8e=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=kse();a.p(t.dictionary),Bse(e,2,a.d())}},B8e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&bd(6,"invalid zlib data"),(e[1]>>5&1)==1&&bd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function MF(e,t){t||(t={});var r=kse();r.p(e);var n=S8e(e,t,t.dictionary?6:2,4);return k8e(n,t),Bse(n,n.length-4,r.d()),n}function T8e(e,t){return C8e(e.subarray(B8e(e),-4),{i:2},t,t)}var j8e=typeof TextDecoder<"u"&&new TextDecoder,I8e=0;try{j8e.decode(Sse,{stream:!0}),I8e=1}catch{}var Mr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function O3(){Mr.console&&typeof Mr.console.log=="function"&&Mr.console.log.apply(Mr.console,arguments)}var _a={log:O3,warn:function(e){Mr.console&&(typeof Mr.console.warn=="function"?Mr.console.warn.apply(Mr.console,arguments):O3.call(null,arguments))},error:function(e){Mr.console&&(typeof Mr.console.error=="function"?Mr.console.error.apply(Mr.console,arguments):O3(e))}};function D3(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){wp(n.response,t,r)},n.onerror=function(){_a.error("could not download file")},n.send()}function EG(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function VC(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var rw,UF,wp=Mr.saveAs||((typeof window>"u"?"undefined":ma(window))!=="object"||window!==Mr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Mr.URL||Mr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?EG(a.href)?D3(e,t,r):VC(a,a.target="_blank"):VC(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){VC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(EG(e))D3(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){VC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ma(s)!=="object"&&(_a.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return D3(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Mr.HTMLElement)||Mr.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":ma(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=Mr.URL||Mr.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Tse(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function P3(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Do(r,n,a,s,t[0],7,-680876936),s=Do(s,r,n,a,t[1],12,-389564586),a=Do(a,s,r,n,t[2],17,606105819),n=Do(n,a,s,r,t[3],22,-1044525330),r=Do(r,n,a,s,t[4],7,-176418897),s=Do(s,r,n,a,t[5],12,1200080426),a=Do(a,s,r,n,t[6],17,-1473231341),n=Do(n,a,s,r,t[7],22,-45705983),r=Do(r,n,a,s,t[8],7,1770035416),s=Do(s,r,n,a,t[9],12,-1958414417),a=Do(a,s,r,n,t[10],17,-42063),n=Do(n,a,s,r,t[11],22,-1990404162),r=Do(r,n,a,s,t[12],7,1804603682),s=Do(s,r,n,a,t[13],12,-40341101),a=Do(a,s,r,n,t[14],17,-1502002290),r=Po(r,n=Do(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Po(s,r,n,a,t[6],9,-1069501632),a=Po(a,s,r,n,t[11],14,643717713),n=Po(n,a,s,r,t[0],20,-373897302),r=Po(r,n,a,s,t[5],5,-701558691),s=Po(s,r,n,a,t[10],9,38016083),a=Po(a,s,r,n,t[15],14,-660478335),n=Po(n,a,s,r,t[4],20,-405537848),r=Po(r,n,a,s,t[9],5,568446438),s=Po(s,r,n,a,t[14],9,-1019803690),a=Po(a,s,r,n,t[3],14,-187363961),n=Po(n,a,s,r,t[8],20,1163531501),r=Po(r,n,a,s,t[13],5,-1444681467),s=Po(s,r,n,a,t[2],9,-51403784),a=Po(a,s,r,n,t[7],14,1735328473),r=Ro(r,n=Po(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Ro(s,r,n,a,t[8],11,-2022574463),a=Ro(a,s,r,n,t[11],16,1839030562),n=Ro(n,a,s,r,t[14],23,-35309556),r=Ro(r,n,a,s,t[1],4,-1530992060),s=Ro(s,r,n,a,t[4],11,1272893353),a=Ro(a,s,r,n,t[7],16,-155497632),n=Ro(n,a,s,r,t[10],23,-1094730640),r=Ro(r,n,a,s,t[13],4,681279174),s=Ro(s,r,n,a,t[0],11,-358537222),a=Ro(a,s,r,n,t[3],16,-722521979),n=Ro(n,a,s,r,t[6],23,76029189),r=Ro(r,n,a,s,t[9],4,-640364487),s=Ro(s,r,n,a,t[12],11,-421815835),a=Ro(a,s,r,n,t[15],16,530742520),r=Lo(r,n=Ro(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Lo(s,r,n,a,t[7],10,1126891415),a=Lo(a,s,r,n,t[14],15,-1416354905),n=Lo(n,a,s,r,t[5],21,-57434055),r=Lo(r,n,a,s,t[12],6,1700485571),s=Lo(s,r,n,a,t[3],10,-1894986606),a=Lo(a,s,r,n,t[10],15,-1051523),n=Lo(n,a,s,r,t[1],21,-2054922799),r=Lo(r,n,a,s,t[8],6,1873313359),s=Lo(s,r,n,a,t[15],10,-30611744),a=Lo(a,s,r,n,t[6],15,-1560198380),n=Lo(n,a,s,r,t[13],21,1309151649),r=Lo(r,n,a,s,t[4],6,-145523070),s=Lo(s,r,n,a,t[11],10,-1120210379),a=Lo(a,s,r,n,t[2],15,718787259),n=Lo(n,a,s,r,t[9],21,-343485551),e[0]=$0(r,e[0]),e[1]=$0(n,e[1]),e[2]=$0(a,e[2]),e[3]=$0(s,e[3])}function ck(e,t,r,n,a,s){return t=$0($0(t,e),$0(n,s)),$0(t<<a|t>>>32-a,r)}function Do(e,t,r,n,a,s,i){return ck(t&r|~t&n,e,t,a,s,i)}function Po(e,t,r,n,a,s,i){return ck(t&n|r&~n,e,t,a,s,i)}function Ro(e,t,r,n,a,s,i){return ck(t^r^n,e,t,a,s,i)}function Lo(e,t,r,n,a,s,i){return ck(r^(t|~n),e,t,a,s,i)}function jse(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)P3(n,F8e(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(P3(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,P3(n,a),n}function F8e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}rw=Mr.atob.bind(Mr),UF=Mr.btoa.bind(Mr);var CG="0123456789abcdef".split("");function O8e(e){for(var t="",r=0;r<4;r++)t+=CG[e>>8*r+4&15]+CG[e>>8*r&15];return t}function D8e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function QF(e){return jse(e).map(D8e).join("")}var P8e=function(e){for(var t=0;t<e.length;t++)e[t]=O8e(e[t]);return e.join("")}(jse("hello"))!="5d41402abc4b2a76b9719d911017c592";function $0(e,t){if(P8e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function HF(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+i.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,h=0,p=0,g="";for(c=0;c<f;c++)p=(p+(d=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=d,i=o[(o[h]+o[p])%256],g+=String.fromCharCode(t.charCodeAt(c)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var _G={print:4,modify:8,copy:16,"annot-forms":32};function Wx(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(_G.perm!==void 0)throw new Error("Invalid permission: "+o);a+=_G[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=QF(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=HF(this.encryptionKey,this.padding)}function Xx(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function NG(e){if(ma(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(o){Mr.console&&_a.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function HN(e){if(!(this instanceof HN))return new HN(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function Ise(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Np(e,t,r,n,a){if(!(this instanceof Np))return new Np(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,Ise.call(this,n,a)}function iv(e,t,r,n,a){if(!(this instanceof iv))return new iv(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,Ise.call(this,n,a)}function vr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,c=16,u="S",d=null;ma(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=NG;var g="1.3",x=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(W){g=W};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(W){return b[W]};a=a||"a4";var w={COMPAT:"compat",ADVANCED:"advanced"},_=w.COMPAT;function j(){this.saveGraphicsState(),fe(new bt(yt,0,0,-yt,0,Di()*yt).toString()+" cm"),this.setFontSize(this.getFontSize()/yt),u="n",_=w.ADVANCED}function k(){this.restoreGraphicsState(),u="S",_=w.COMPAT}var I=p.__private__.combineFontStyleAndFontWeight=function(W,Ae){if(W=="bold"&&Ae=="normal"||W=="bold"&&Ae==400||W=="normal"&&Ae=="italic"||W=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(W=Ae==400||Ae==="normal"?W==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||W!=="normal"?(Ae==700?"bold":Ae)+""+W:"bold"),W};p.advancedAPI=function(W){var Ae=_===w.COMPAT;return Ae&&j.call(this),typeof W!="function"||(W(this),Ae&&k.call(this)),this},p.compatAPI=function(W){var Ae=_===w.ADVANCED;return Ae&&k.call(this),typeof W!="function"||(W(this),Ae&&j.call(this)),this},p.isAdvancedAPI=function(){return _===w.ADVANCED};var E,N=function(W){if(_!==w.ADVANCED)throw new Error(W+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=p.roundToPrecision=p.__private__.roundToPrecision=function(W,Ae){var Fe=t||Ae;if(isNaN(W)||isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return W.toFixed(Fe).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof c=="number"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return B(W,c)}:c==="smart"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return B(W,W>-1&&W<1?16:5)}:function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return B(W,16)};var R=p.f2=p.__private__.f2=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f2");return B(W,2)},P=p.__private__.f3=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f3");return B(W,3)},D=p.scale=p.__private__.scale=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.scale");return _===w.COMPAT?W*yt:_===w.ADVANCED?W:void 0},L=function(W){return _===w.COMPAT?Di()-W:_===w.ADVANCED?W:void 0},M=function(W){return D(L(W))};p.__private__.setPrecision=p.setPrecision=function(W){typeof parseInt(W,10)=="number"&&(t=parseInt(W,10))};var J,H="00000000000000000000000000000000",K=p.__private__.getFileId=function(){return H},V=p.__private__.setFileId=function(W){return H=W!==void 0&&/^[a-fA-F0-9]{32}$/.test(W)?W.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(la=new Wx(d.userPermissions,d.userPassword,d.ownerPassword,H)),H};p.setFileId=function(W){return V(W),this},p.getFileId=function(){return K()};var G=p.__private__.convertDateToPDFDate=function(W){var Ae=W.getTimezoneOffset(),Fe=Ae<0?"+":"-",Le=Math.floor(Math.abs(Ae/60)),Ge=Math.abs(Ae%60),vt=[Fe,Y(Le),"'",Y(Ge),"'"].join("");return["D:",W.getFullYear(),Y(W.getMonth()+1),Y(W.getDate()),Y(W.getHours()),Y(W.getMinutes()),Y(W.getSeconds()),vt].join("")},X=p.__private__.convertPDFDateToDate=function(W){var Ae=parseInt(W.substr(2,4),10),Fe=parseInt(W.substr(6,2),10)-1,Le=parseInt(W.substr(8,2),10),Ge=parseInt(W.substr(10,2),10),vt=parseInt(W.substr(12,2),10),Lt=parseInt(W.substr(14,2),10);return new Date(Ae,Fe,Le,Ge,vt,Lt,0)},ee=p.__private__.setCreationDate=function(W){var Ae;if(W===void 0&&(W=new Date),W instanceof Date)Ae=G(W);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(W))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=W}return J=Ae},F=p.__private__.getCreationDate=function(W){var Ae=J;return W==="jsDate"&&(Ae=X(J)),Ae};p.setCreationDate=function(W){return ee(W),this},p.getCreationDate=function(W){return F(W)};var z,Y=p.__private__.padd2=function(W){return("0"+parseInt(W)).slice(-2)},te=p.__private__.padd2Hex=function(W){return("00"+(W=W.toString())).substr(W.length)},ae=0,le=[],ie=[],ce=0,pe=[],Be=[],ne=!1,_e=ie,De=function(){ae=0,ce=0,ie=[],le=[],pe=[],Ce=Gr(),we=Gr()};p.__private__.setCustomOutputDestination=function(W){ne=!0,_e=W};var Se=function(W){ne||(_e=W)};p.__private__.resetCustomOutputDestination=function(){ne=!1,_e=ie};var fe=p.__private__.out=function(W){return W=W.toString(),ce+=W.length+1,_e.push(W),_e},Ie=p.__private__.write=function(W){return fe(arguments.length===1?W.toString():Array.prototype.join.call(arguments," "))},Ue=p.__private__.getArrayBuffer=function(W){for(var Ae=W.length,Fe=new ArrayBuffer(Ae),Le=new Uint8Array(Fe);Ae--;)Le[Ae]=W.charCodeAt(Ae);return Fe},Ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ye};var ye=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(W){return ye=_===w.ADVANCED?W/yt:W,this};var Oe,Re=p.__private__.getFontSize=p.getFontSize=function(){return _===w.COMPAT?ye:ye*yt},qe=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(W){return qe=W,this},p.__private__.getR2L=p.getR2L=function(){return qe};var Ze,ct=p.__private__.setZoomMode=function(W){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(W))Oe=W;else if(isNaN(W)){if(Ae.indexOf(W)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+W+'" is not recognized.');Oe=W}else Oe=parseInt(W,10)};p.__private__.getZoomMode=function(){return Oe};var pt,It=p.__private__.setPageMode=function(W){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(W)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+W+'" is not recognized.');Ze=W};p.__private__.getPageMode=function(){return Ze};var Mt=p.__private__.setLayoutMode=function(W){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(W)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+W+'" is not recognized.');pt=W};p.__private__.getLayoutMode=function(){return pt},p.__private__.setDisplayMode=p.setDisplayMode=function(W,Ae,Fe){return ct(W),Mt(Ae),It(Fe),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(W){if(Object.keys(Pt).indexOf(W)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[W]},p.__private__.getDocumentProperties=function(){return Pt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(W){for(var Ae in Pt)Pt.hasOwnProperty(Ae)&&W[Ae]&&(Pt[Ae]=W[Ae]);return this},p.__private__.setDocumentProperty=function(W,Ae){if(Object.keys(Pt).indexOf(W)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[W]=Ae};var Qt,yt,Br,tr,nn,Nr={},Vr={},In=[],Or={},fs={},fn={},oa={},Ba=null,tn=0,pr=[],et=new NG(p),gt=e.hotfixes||[],Je={},xt={},wt=[],bt=function W(Ae,Fe,Le,Ge,vt,Lt){if(!(this instanceof W))return new W(Ae,Fe,Le,Ge,vt,Lt);isNaN(Ae)&&(Ae=1),isNaN(Fe)&&(Fe=0),isNaN(Le)&&(Le=0),isNaN(Ge)&&(Ge=1),isNaN(vt)&&(vt=0),isNaN(Lt)&&(Lt=0),this._matrix=[Ae,Fe,Le,Ge,vt,Lt]};Object.defineProperty(bt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty(bt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty(bt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty(bt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty(bt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty(bt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty(bt.prototype,"a",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty(bt.prototype,"b",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty(bt.prototype,"c",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty(bt.prototype,"d",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty(bt.prototype,"e",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty(bt.prototype,"f",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty(bt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(bt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(bt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(bt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),bt.prototype.join=function(W){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(W)},bt.prototype.multiply=function(W){var Ae=W.sx*this.sx+W.shy*this.shx,Fe=W.sx*this.shy+W.shy*this.sy,Le=W.shx*this.sx+W.sy*this.shx,Ge=W.shx*this.shy+W.sy*this.sy,vt=W.tx*this.sx+W.ty*this.shx+this.tx,Lt=W.tx*this.shy+W.ty*this.sy+this.ty;return new bt(Ae,Fe,Le,Ge,vt,Lt)},bt.prototype.decompose=function(){var W=this.sx,Ae=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,vt=this.ty,Lt=Math.sqrt(W*W+Ae*Ae),Jt=(W/=Lt)*Fe+(Ae/=Lt)*Le;Fe-=W*Jt,Le-=Ae*Jt;var O=Math.sqrt(Fe*Fe+Le*Le);return Jt/=O,W*(Le/=O)<Ae*(Fe/=O)&&(W=-W,Ae=-Ae,Jt=-Jt,Lt=-Lt),{scale:new bt(Lt,0,0,O,0,0),translate:new bt(1,0,0,1,Ge,vt),rotate:new bt(W,Ae,-Ae,W,0,0),skew:new bt(1,0,Jt,1,0,0)}},bt.prototype.toString=function(W){return this.join(" ")},bt.prototype.inversed=function(){var W=this.sx,Ae=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,vt=this.ty,Lt=1/(W*Le-Ae*Fe),Jt=Le*Lt,O=-Ae*Lt,re=-Fe*Lt,oe=W*Lt;return new bt(Jt,O,re,oe,-Jt*Ge-re*vt,-O*Ge-oe*vt)},bt.prototype.applyToPoint=function(W){var Ae=W.x*this.sx+W.y*this.shx+this.tx,Fe=W.x*this.shy+W.y*this.sy+this.ty;return new Yu(Ae,Fe)},bt.prototype.applyToRectangle=function(W){var Ae=this.applyToPoint(W),Fe=this.applyToPoint(new Yu(W.x+W.w,W.y+W.h));return new Yd(Ae.x,Ae.y,Fe.x-Ae.x,Fe.y-Ae.y)},bt.prototype.clone=function(){var W=this.sx,Ae=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,vt=this.ty;return new bt(W,Ae,Fe,Le,Ge,vt)},p.Matrix=bt;var nr=p.matrixMult=function(W,Ae){return Ae.multiply(W)},gr=new bt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=gr;var Kr=function(W,Ae){if(!fs[W]){var Fe=(Ae instanceof Np?"Sh":"P")+(Object.keys(Or).length+1).toString(10);Ae.id=Fe,fs[W]=Fe,Or[Fe]=Ae,et.publish("addPattern",Ae)}};p.ShadingPattern=Np,p.TilingPattern=iv,p.addShadingPattern=function(W,Ae){return N("addShadingPattern()"),Kr(W,Ae),this},p.beginTilingPattern=function(W){N("beginTilingPattern()"),ru(W.boundingBox[0],W.boundingBox[1],W.boundingBox[2]-W.boundingBox[0],W.boundingBox[3]-W.boundingBox[1],W.matrix)},p.endTilingPattern=function(W,Ae){N("endTilingPattern()"),Ae.stream=Be[z].join(`
`),Kr(W,Ae),et.publish("endTilingPattern",Ae),wt.pop().restore()};var Jr=p.__private__.newObject=function(){var W=Gr();return he(W,!0),W},Gr=p.__private__.newObjectDeferred=function(){return ae++,le[ae]=function(){return ce},ae},he=function(W,Ae){return Ae=typeof Ae=="boolean"&&Ae,le[W]=ce,Ae&&fe(W+" 0 obj"),W},Te=p.__private__.newAdditionalObject=function(){var W={objId:Gr(),content:""};return pe.push(W),W},Ce=Gr(),we=Gr(),Ne=p.__private__.decodeColorString=function(W){var Ae=W.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var Fe=parseFloat(Ae[0]);Ae=[Fe,Fe,Fe,"r"]}for(var Le="#",Ge=0;Ge<3;Ge++)Le+=("0"+Math.floor(255*parseFloat(Ae[Ge])).toString(16)).slice(-2);return Le},je=p.__private__.encodeColorString=function(W){var Ae;typeof W=="string"&&(W={ch1:W});var Fe=W.ch1,Le=W.ch2,Ge=W.ch3,vt=W.ch4,Lt=W.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Fe=="string"&&Fe.charAt(0)!=="#"){var Jt=new Tse(Fe);if(Jt.ok)Fe=Jt.toHex();else if(!/^\d*\.?\d*$/.test(Fe))throw new Error('Invalid color "'+Fe+'" passed to jsPDF.encodeColorString.')}if(typeof Fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Fe)&&(Fe="#"+Fe[1]+Fe[1]+Fe[2]+Fe[2]+Fe[3]+Fe[3]),typeof Fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Fe)){var O=parseInt(Fe.substr(1),16);Fe=O>>16&255,Le=O>>8&255,Ge=255&O}if(Le===void 0||vt===void 0&&Fe===Le&&Le===Ge)if(typeof Fe=="string")Ae=Fe+" "+Lt[0];else switch(W.precision){case 2:Ae=R(Fe/255)+" "+Lt[0];break;case 3:default:Ae=P(Fe/255)+" "+Lt[0]}else if(vt===void 0||ma(vt)==="object"){if(vt&&!isNaN(vt.a)&&vt.a===0)return Ae=["1.","1.","1.",Lt[1]].join(" ");if(typeof Fe=="string")Ae=[Fe,Le,Ge,Lt[1]].join(" ");else switch(W.precision){case 2:Ae=[R(Fe/255),R(Le/255),R(Ge/255),Lt[1]].join(" ");break;default:case 3:Ae=[P(Fe/255),P(Le/255),P(Ge/255),Lt[1]].join(" ")}}else if(typeof Fe=="string")Ae=[Fe,Le,Ge,vt,Lt[2]].join(" ");else switch(W.precision){case 2:Ae=[R(Fe),R(Le),R(Ge),R(vt),Lt[2]].join(" ");break;case 3:default:Ae=[P(Fe),P(Le),P(Ge),P(vt),Lt[2]].join(" ")}return Ae},Xe=p.__private__.getFilters=function(){return i},dt=p.__private__.putStream=function(W){var Ae=(W=W||{}).data||"",Fe=W.filters||Xe(),Le=W.alreadyAppliedFilters||[],Ge=W.addLength1||!1,vt=Ae.length,Lt=W.objectId,Jt=function(Ir){return Ir};if(d!==null&&Lt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Jt=la.encryptor(Lt,0));var O={};Fe===!0&&(Fe=["FlateEncode"]);var re=W.additionalKeyValues||[],oe=(O=vr.API.processDataByFilters!==void 0?vr.API.processDataByFilters(Ae,Fe):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(O.data.length!==0&&(re.push({key:"Length",value:O.data.length}),Ge===!0&&re.push({key:"Length1",value:vt})),oe.length!=0)if(oe.split("/").length-1==1)re.push({key:"Filter",value:oe});else{re.push({key:"Filter",value:"["+oe+"]"});for(var ve=0;ve<re.length;ve+=1)if(re[ve].key==="DecodeParms"){for(var ze=[],ot=0;ot<O.reverseChain.split("/").length-1;ot+=1)ze.push("null");ze.push(re[ve].value),re[ve].value="["+ze.join(" ")+"]"}}fe("<<");for(var Ut=0;Ut<re.length;Ut++)fe("/"+re[Ut].key+" "+re[Ut].value);fe(">>"),O.data.length!==0&&(fe("stream"),fe(Jt(O.data)),fe("endstream"))},$e=p.__private__.putPage=function(W){var Ae=W.number,Fe=W.data,Le=W.objId,Ge=W.contentsObjId;he(Le,!0),fe("<</Type /Page"),fe("/Parent "+W.rootDictionaryObjId+" 0 R"),fe("/Resources "+W.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(E(W.mediaBox.bottomLeftX))+" "+parseFloat(E(W.mediaBox.bottomLeftY))+" "+E(W.mediaBox.topRightX)+" "+E(W.mediaBox.topRightY)+"]"),W.cropBox!==null&&fe("/CropBox ["+E(W.cropBox.bottomLeftX)+" "+E(W.cropBox.bottomLeftY)+" "+E(W.cropBox.topRightX)+" "+E(W.cropBox.topRightY)+"]"),W.bleedBox!==null&&fe("/BleedBox ["+E(W.bleedBox.bottomLeftX)+" "+E(W.bleedBox.bottomLeftY)+" "+E(W.bleedBox.topRightX)+" "+E(W.bleedBox.topRightY)+"]"),W.trimBox!==null&&fe("/TrimBox ["+E(W.trimBox.bottomLeftX)+" "+E(W.trimBox.bottomLeftY)+" "+E(W.trimBox.topRightX)+" "+E(W.trimBox.topRightY)+"]"),W.artBox!==null&&fe("/ArtBox ["+E(W.artBox.bottomLeftX)+" "+E(W.artBox.bottomLeftY)+" "+E(W.artBox.topRightX)+" "+E(W.artBox.topRightY)+"]"),typeof W.userUnit=="number"&&W.userUnit!==1&&fe("/UserUnit "+W.userUnit),et.publish("putPage",{objId:Le,pageContext:pr[Ae],pageNumber:Ae,page:Fe}),fe("/Contents "+Ge+" 0 R"),fe(">>"),fe("endobj");var vt=Fe.join(`
`);return _===w.ADVANCED&&(vt+=`
Q`),he(Ge,!0),dt({data:vt,filters:Xe(),objectId:Ge}),fe("endobj"),Le},rt=p.__private__.putPages=function(){var W,Ae,Fe=[];for(W=1;W<=tn;W++)pr[W].objId=Gr(),pr[W].contentsObjId=Gr();for(W=1;W<=tn;W++)Fe.push($e({number:W,data:Be[W],objId:pr[W].objId,contentsObjId:pr[W].contentsObjId,mediaBox:pr[W].mediaBox,cropBox:pr[W].cropBox,bleedBox:pr[W].bleedBox,trimBox:pr[W].trimBox,artBox:pr[W].artBox,userUnit:pr[W].userUnit,rootDictionaryObjId:Ce,resourceDictionaryObjId:we}));he(Ce,!0),fe("<</Type /Pages");var Le="/Kids [";for(Ae=0;Ae<tn;Ae++)Le+=Fe[Ae]+" 0 R ";fe(Le+"]"),fe("/Count "+tn),fe(">>"),fe("endobj"),et.publish("postPutPages")},it=function(W){et.publish("putFont",{font:W,out:fe,newObject:Jr,putStream:dt}),W.isAlreadyPutted!==!0&&(W.objectNumber=Jr(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+Xx(W.postScriptName)),fe("/Subtype /Type1"),typeof W.encoding=="string"&&fe("/Encoding /"+W.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},Ft=function(){for(var W in Nr)Nr.hasOwnProperty(W)&&(f===!1||f===!0&&h.hasOwnProperty(W))&&it(Nr[W])},Vt=function(W){W.objectNumber=Jr();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[E(W.x),E(W.y),E(W.x+W.width),E(W.y+W.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+W.matrix.toString()+"]"});var Fe=W.pages[1].join(`
`);dt({data:Fe,additionalKeyValues:Ae,objectId:W.objectNumber}),fe("endobj")},Yt=function(){for(var W in Je)Je.hasOwnProperty(W)&&Vt(Je[W])},Ht=function(W,Ae){var Fe,Le=[],Ge=1/(Ae-1);for(Fe=0;Fe<1;Fe+=Ge)Le.push(Fe);if(Le.push(1),W[0].offset!=0){var vt={offset:0,color:W[0].color};W.unshift(vt)}if(W[W.length-1].offset!=1){var Lt={offset:1,color:W[W.length-1].color};W.push(Lt)}for(var Jt="",O=0,re=0;re<Le.length;re++){for(Fe=Le[re];Fe>W[O+1].offset;)O++;var oe=W[O].offset,ve=(Fe-oe)/(W[O+1].offset-oe),ze=W[O].color,ot=W[O+1].color;Jt+=te(Math.round((1-ve)*ze[0]+ve*ot[0]).toString(16))+te(Math.round((1-ve)*ze[1]+ve*ot[1]).toString(16))+te(Math.round((1-ve)*ze[2]+ve*ot[2]).toString(16))}return Jt.trim()},$t=function(W,Ae){Ae||(Ae=21);var Fe=Jr(),Le=Ht(W.colors,Ae),Ge=[];Ge.push({key:"FunctionType",value:"0"}),Ge.push({key:"Domain",value:"[0.0 1.0]"}),Ge.push({key:"Size",value:"["+Ae+"]"}),Ge.push({key:"BitsPerSample",value:"8"}),Ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),dt({data:Le,additionalKeyValues:Ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Fe}),fe("endobj"),W.objectNumber=Jr(),fe("<< /ShadingType "+W.type),fe("/ColorSpace /DeviceRGB");var vt="/Coords ["+E(parseFloat(W.coords[0]))+" "+E(parseFloat(W.coords[1]))+" ";W.type===2?vt+=E(parseFloat(W.coords[2]))+" "+E(parseFloat(W.coords[3])):vt+=E(parseFloat(W.coords[2]))+" "+E(parseFloat(W.coords[3]))+" "+E(parseFloat(W.coords[4]))+" "+E(parseFloat(W.coords[5])),fe(vt+="]"),W.matrix&&fe("/Matrix ["+W.matrix.toString()+"]"),fe("/Function "+Fe+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},Sr=function(W,Ae){var Fe=Gr(),Le=Jr();Ae.push({resourcesOid:Fe,objectOid:Le}),W.objectNumber=Le;var Ge=[];Ge.push({key:"Type",value:"/Pattern"}),Ge.push({key:"PatternType",value:"1"}),Ge.push({key:"PaintType",value:"1"}),Ge.push({key:"TilingType",value:"1"}),Ge.push({key:"BBox",value:"["+W.boundingBox.map(E).join(" ")+"]"}),Ge.push({key:"XStep",value:E(W.xStep)}),Ge.push({key:"YStep",value:E(W.yStep)}),Ge.push({key:"Resources",value:Fe+" 0 R"}),W.matrix&&Ge.push({key:"Matrix",value:"["+W.matrix.toString()+"]"}),dt({data:W.stream,additionalKeyValues:Ge,objectId:W.objectNumber}),fe("endobj")},an=function(W){var Ae;for(Ae in Or)Or.hasOwnProperty(Ae)&&(Or[Ae]instanceof Np?$t(Or[Ae]):Or[Ae]instanceof iv&&Sr(Or[Ae],W))},sn=function(W){for(var Ae in W.objectNumber=Jr(),fe("<<"),W)switch(Ae){case"opacity":fe("/ca "+R(W[Ae]));break;case"stroke-opacity":fe("/CA "+R(W[Ae]))}fe(">>"),fe("endobj")},dn=function(){var W;for(W in fn)fn.hasOwnProperty(W)&&sn(fn[W])},hs=function(){for(var W in fe("/XObject <<"),Je)Je.hasOwnProperty(W)&&Je[W].objectNumber>=0&&fe("/"+W+" "+Je[W].objectNumber+" 0 R");et.publish("putXobjectDict"),fe(">>")},wo=function(){la.oid=Jr(),fe("<<"),fe("/Filter /Standard"),fe("/V "+la.v),fe("/R "+la.r),fe("/U <"+la.toHexString(la.U)+">"),fe("/O <"+la.toHexString(la.O)+">"),fe("/P "+la.P),fe(">>"),fe("endobj")},ms=function(){for(var W in fe("/Font <<"),Nr)Nr.hasOwnProperty(W)&&(f===!1||f===!0&&h.hasOwnProperty(W))&&fe("/"+W+" "+Nr[W].objectNumber+" 0 R");fe(">>")},Js=function(){if(Object.keys(Or).length>0){for(var W in fe("/Shading <<"),Or)Or.hasOwnProperty(W)&&Or[W]instanceof Np&&Or[W].objectNumber>=0&&fe("/"+W+" "+Or[W].objectNumber+" 0 R");et.publish("putShadingPatternDict"),fe(">>")}},js=function(W){if(Object.keys(Or).length>0){for(var Ae in fe("/Pattern <<"),Or)Or.hasOwnProperty(Ae)&&Or[Ae]instanceof p.TilingPattern&&Or[Ae].objectNumber>=0&&Or[Ae].objectNumber<W&&fe("/"+Ae+" "+Or[Ae].objectNumber+" 0 R");et.publish("putTilingPatternDict"),fe(">>")}},pi=function(){if(Object.keys(fn).length>0){var W;for(W in fe("/ExtGState <<"),fn)fn.hasOwnProperty(W)&&fn[W].objectNumber>=0&&fe("/"+W+" "+fn[W].objectNumber+" 0 R");et.publish("putGStateDict"),fe(">>")}},xa=function(W){he(W.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ms(),Js(),js(W.objectOid),pi(),hs(),fe(">>"),fe("endobj")},Zs=function(){var W=[];Ft(),dn(),Yt(),an(W),et.publish("putResources"),W.forEach(xa),xa({resourcesOid:we,objectOid:Number.MAX_SAFE_INTEGER}),et.publish("postPutResources")},Gd=function(){et.publish("putAdditionalObjects");for(var W=0;W<pe.length;W++){var Ae=pe[W];he(Ae.objId,!0),fe(Ae.content),fe("endobj")}et.publish("postPutAdditionalObjects")},Mh=function(W){Vr[W.fontName]=Vr[W.fontName]||{},Vr[W.fontName][W.fontStyle]=W.id},Kc=function(W,Ae,Fe,Le,Ge){var vt={id:"F"+(Object.keys(Nr).length+1).toString(10),postScriptName:W,fontName:Ae,fontStyle:Fe,encoding:Le,isStandardFont:Ge||!1,metadata:{}};return et.publish("addFont",{font:vt,instance:this}),Nr[vt.id]=vt,Mh(vt),vt.id},uf=function(W){for(var Ae=0,Fe=Ye.length;Ae<Fe;Ae++){var Le=Kc.call(this,W[Ae][0],W[Ae][1],W[Ae][2],Ye[Ae][3],!0);f===!1&&(h[Le]=!0);var Ge=W[Ae][0].split("-");Mh({id:Le,fontName:Ge[0],fontStyle:Ge[1]||""})}et.publish("addFonts",{fonts:Nr,dictionary:Vr})},gi=function(W){return W.foo=function(){try{return W.apply(this,arguments)}catch(Le){var Ae=Le.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var Fe="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Mr.console)throw new Error(Fe);Mr.console.error(Fe,Le),Mr.alert&&alert(Fe)}},W.foo.bar=W,W.foo},Kd=function(W,Ae){var Fe,Le,Ge,vt,Lt,Jt,O,re,oe;if(Ge=(Ae=Ae||{}).sourceEncoding||"Unicode",Lt=Ae.outputEncoding,(Ae.autoencode||Lt)&&Nr[Qt].metadata&&Nr[Qt].metadata[Ge]&&Nr[Qt].metadata[Ge].encoding&&(vt=Nr[Qt].metadata[Ge].encoding,!Lt&&Nr[Qt].encoding&&(Lt=Nr[Qt].encoding),!Lt&&vt.codePages&&(Lt=vt.codePages[0]),typeof Lt=="string"&&(Lt=vt[Lt]),Lt)){for(O=!1,Jt=[],Fe=0,Le=W.length;Fe<Le;Fe++)(re=Lt[W.charCodeAt(Fe)])?Jt.push(String.fromCharCode(re)):Jt.push(W[Fe]),Jt[Fe].charCodeAt(0)>>8&&(O=!0);W=Jt.join("")}for(Fe=W.length;O===void 0&&Fe!==0;)W.charCodeAt(Fe-1)>>8&&(O=!0),Fe--;if(!O)return W;for(Jt=Ae.noBOM?[]:[254,255],Fe=0,Le=W.length;Fe<Le;Fe++){if((oe=(re=W.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+W+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Jt.push(oe),Jt.push(re-(oe<<8))}return String.fromCharCode.apply(void 0,Jt)},Fn=p.__private__.pdfEscape=p.pdfEscape=function(W,Ae){return Kd(W,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xi=p.__private__.beginPage=function(W){Be[++tn]=[],pr[tn]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(W[0]),topRightY:Number(W[1])}},Nl(tn),Se(Be[z])},qc=function(W,Ae){var Fe,Le,Ge;switch(r=Ae||r,typeof W=="string"&&(Fe=y(W.toLowerCase()),Array.isArray(Fe)&&(Le=Fe[0],Ge=Fe[1])),Array.isArray(W)&&(Le=W[0]*yt,Ge=W[1]*yt),isNaN(Le)&&(Le=a[0],Ge=a[1]),(Le>14400||Ge>14400)&&(_a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Ge=Math.min(14400,Ge)),a=[Le,Ge],r.substr(0,1)){case"l":Ge>Le&&(a=[Ge,Le]);break;case"p":Le>Ge&&(a=[Ge,Le])}xi(a),hf(Jc),fe(vi),mf!==0&&fe(mf+" J"),Xu!==0&&fe(Xu+" j"),et.publish("addPage",{pageNumber:tn})},Wc=function(W){W>0&&W<=tn&&(Be.splice(W,1),pr.splice(W,1),tn--,z>tn&&(z=tn),this.setPage(z))},Nl=function(W){W>0&&W<=tn&&(z=W)},Hn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Be.length-1},Xc=function(W,Ae,Fe){var Le,Ge=void 0;return Fe=Fe||{},W=W!==void 0?W:Nr[Qt].fontName,Ae=Ae!==void 0?Ae:Nr[Qt].fontStyle,Le=W.toLowerCase(),Vr[Le]!==void 0&&Vr[Le][Ae]!==void 0?Ge=Vr[Le][Ae]:Vr[W]!==void 0&&Vr[W][Ae]!==void 0?Ge=Vr[W][Ae]:Fe.disableWarning===!1&&_a.warn("Unable to look up font label for font '"+W+"', '"+Ae+"'. Refer to getFontList() for available fonts."),Ge||Fe.noFallback||(Ge=Vr.times[Ae])==null&&(Ge=Vr.times.normal),Ge},Eo=p.__private__.putInfo=function(){var W=Jr(),Ae=function(Le){return Le};for(var Fe in d!==null&&(Ae=la.encryptor(W,0)),fe("<<"),fe("/Producer ("+Fn(Ae("jsPDF "+vr.version))+")"),Pt)Pt.hasOwnProperty(Fe)&&Pt[Fe]&&fe("/"+Fe.substr(0,1).toUpperCase()+Fe.substr(1)+" ("+Fn(Ae(Pt[Fe]))+")");fe("/CreationDate ("+Fn(Ae(J))+")"),fe(">>"),fe("endobj")},ic=p.__private__.putCatalog=function(W){var Ae=(W=W||{}).rootDictionaryObjId||Ce;switch(Jr(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+Ae+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Fe=""+Oe;Fe.substr(Fe.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+R(Oe)+"]")}switch(pt||(pt="continuous"),pt){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}Ze&&fe("/PageMode /"+Ze),et.publish("putCatalog"),fe(">>"),fe("endobj")},Uh=p.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(ae+1)),fe("/Root "+ae+" 0 R"),fe("/Info "+(ae-1)+" 0 R"),d!==null&&fe("/Encrypt "+la.oid+" 0 R"),fe("/ID [ <"+H+"> <"+H+"> ]"),fe(">>")},df=p.__private__.putHeader=function(){fe("%PDF-"+g),fe("%")},Af=p.__private__.putXRef=function(){var W="0000000000";fe("xref"),fe("0 "+(ae+1)),fe("0000000000 65535 f ");for(var Ae=1;Ae<=ae;Ae++)typeof le[Ae]=="function"?fe((W+le[Ae]()).slice(-10)+" 00000 n "):le[Ae]!==void 0?fe((W+le[Ae]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},oc=p.__private__.buildDocument=function(){De(),Se(ie),et.publish("buildDocument"),df(),rt(),Gd(),Zs(),d!==null&&wo(),Eo(),ic();var W=ce;return Af(),Uh(),fe("startxref"),fe(""+W),fe("%%EOF"),Se(Be[z]),ie.join(`
`)},qd=p.__private__.getBlob=function(W){return new Blob([Ue(W)],{type:"application/pdf"})},lc=p.output=p.__private__.output=gi(function(W,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",W){case void 0:return oc();case"save":p.save(Ae.filename);break;case"arraybuffer":return Ue(oc());case"blob":return qd(oc());case"bloburi":case"bloburl":if(Mr.URL!==void 0&&typeof Mr.URL.createObjectURL=="function")return Mr.URL&&Mr.URL.createObjectURL(qd(oc()))||void 0;_a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Fe="",Le=oc();try{Fe=UF(Le)}catch{Fe=UF(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+Fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var Ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",vt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(Ge=Ae.pdfObjectUrl,vt="");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ge+'"'+vt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",Jt=Mr.open();return Jt!==null&&Jt.document.write(Lt),Jt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mr)==="[object Window]"){var O='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',re=Mr.open();if(re!==null){re.document.write(O);var oe=this;re.document.documentElement.querySelector("#pdfViewer").onload=function(){re.document.title=Ae.filename,re.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(oe.output("bloburl"))}}return re}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',ze=Mr.open();if(ze!==null&&(ze.document.write(ve),ze.document.title=Ae.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return Mr.document.location.href=this.output("datauristring",Ae);default:return null}}),Sl=function(W){return Array.isArray(gt)===!0&&gt.indexOf(W)>-1};switch(n){case"pt":yt=1;break;case"mm":yt=72/25.4;break;case"cm":yt=72/2.54;break;case"in":yt=72;break;case"px":yt=Sl("px_scaling")==1?.75:96/72;break;case"pc":case"em":yt=12;break;case"ex":yt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);yt=n}var la=null;ee(),V();var cc=function(W){return d!==null?la.encryptor(W,0):function(Ae){return Ae}},kl=p.__private__.getPageInfo=p.getPageInfo=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:pr[W].objId,pageNumber:W,pageContext:pr[W]}},jr=p.__private__.getPageInfoByObjId=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in pr)if(pr[Ae].objId===W)break;return kl(Ae)},Bl=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:pr[z].objId,pageNumber:z,pageContext:pr[z]}};p.addPage=function(){return qc.apply(this,arguments),this},p.setPage=function(){return Nl.apply(this,arguments),Se.call(this,Be[z]),this},p.insertPage=function(W){return this.addPage(),this.movePage(z,W),this},p.movePage=function(W,Ae){var Fe,Le;if(W>Ae){Fe=Be[W],Le=pr[W];for(var Ge=W;Ge>Ae;Ge--)Be[Ge]=Be[Ge-1],pr[Ge]=pr[Ge-1];Be[Ae]=Fe,pr[Ae]=Le,this.setPage(Ae)}else if(W<Ae){Fe=Be[W],Le=pr[W];for(var vt=W;vt<Ae;vt++)Be[vt]=Be[vt+1],pr[vt]=pr[vt+1];Be[Ae]=Fe,pr[Ae]=Le,this.setPage(Ae)}return this},p.deletePage=function(){return Wc.apply(this,arguments),this},p.__private__.text=p.text=function(W,Ae,Fe,Le,Ge){var vt,Lt,Jt,O,re,oe,ve,ze,ot,Ut=(Le=Le||{}).scope||this;if(typeof W=="number"&&typeof Ae=="number"&&(typeof Fe=="string"||Array.isArray(Fe))){var Ir=Fe;Fe=Ae,Ae=W,W=Ir}if(arguments[3]instanceof bt?(N("The transform parameter of text() with a Matrix value"),ot=Ge):(Jt=arguments[4],O=arguments[5],ma(ve=arguments[3])==="object"&&ve!==null||(typeof Jt=="string"&&(O=Jt,Jt=null),typeof ve=="string"&&(O=ve,ve=null),typeof ve=="number"&&(Jt=ve,ve=null),Le={flags:ve,angle:Jt,align:O})),isNaN(Ae)||isNaN(Fe)||W==null)throw new Error("Invalid arguments passed to jsPDF.text");if(W.length===0)return Ut;var bn="",qr=!1,Vn=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:vn,ea=Ut.internal.scaleFactor;function Fl(hn){return hn=hn.split("	").join(Array(Le.TabLen||9).join(" ")),Fn(hn,ve)}function es(hn){for(var mn,va=hn.concat(),ts=[],Dl=va.length;Dl--;)typeof(mn=va.shift())=="string"?ts.push(mn):Array.isArray(hn)&&(mn.length===1||mn[1]===void 0&&mn[2]===void 0)?ts.push(mn[0]):ts.push([mn[0],mn[1],mn[2]]);return ts}function So(hn,mn){var va;if(typeof hn=="string")va=mn(hn)[0];else if(Array.isArray(hn)){for(var ts,Dl,lA=hn.concat(),cA=[],rd=lA.length;rd--;)typeof(ts=lA.shift())=="string"?cA.push(mn(ts)[0]):Array.isArray(ts)&&typeof ts[0]=="string"&&(Dl=mn(ts[0],ts[1],ts[2]),cA.push([Dl[0],Dl[1],Dl[2]]));va=cA}return va}var au=!1,Zd=!0;if(typeof W=="string")au=!0;else if(Array.isArray(W)){var zh=W.concat();Lt=[];for(var pf,Is=zh.length;Is--;)(typeof(pf=zh.shift())!="string"||Array.isArray(pf)&&typeof pf[0]!="string")&&(Zd=!1);au=Zd}if(au===!1)throw new Error('Type of text must be string or Array. "'+W+'" is not recognized.');typeof W=="string"&&(W=W.match(/[\r?\n]/)?W.split(/\r\n|\r|\n/g):[W]);var eA=ye/Ut.internal.scaleFactor,gf=eA*(Vn-1);switch(Le.baseline){case"bottom":Fe-=gf;break;case"top":Fe+=eA-gf;break;case"hanging":Fe+=eA-2*gf;break;case"middle":Fe+=eA/2-gf}if((oe=Le.maxWidth||0)>0&&(typeof W=="string"?W=Ut.splitTextToSize(W,oe):Object.prototype.toString.call(W)==="[object Array]"&&(W=W.reduce(function(hn,mn){return hn.concat(Ut.splitTextToSize(mn,oe))},[]))),vt={text:W,x:Ae,y:Fe,options:Le,mutex:{pdfEscape:Fn,activeFontKey:Qt,fonts:Nr,activeFontSize:ye}},et.publish("preProcessText",vt),W=vt.text,Jt=(Le=vt.options).angle,!(ot instanceof bt)&&Jt&&typeof Jt=="number"){Jt*=Math.PI/180,Le.rotationDirection===0&&(Jt=-Jt),_===w.ADVANCED&&(Jt=-Jt);var xf=Math.cos(Jt),$h=Math.sin(Jt);ot=new bt(xf,$h,-$h,xf,0,0)}else Jt&&Jt instanceof bt&&(ot=Jt);_!==w.ADVANCED||ot||(ot=gr),(re=Le.charSpace||Wu)!==void 0&&(bn+=E(D(re))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Le.horizontalScale)!==void 0&&(bn+=E(100*ze)+` Tz
`),Le.lang;var ko=-1,sb=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,$m=Ut.internal.getCurrentPageInfo().pageContext;switch(sb){case 0:case!1:case"fill":ko=0;break;case 1:case!0:case"stroke":ko=1;break;case 2:case"fillThenStroke":ko=2;break;case 3:case"invisible":ko=3;break;case 4:case"fillAndAddForClipping":ko=4;break;case 5:case"strokeAndAddPathForClipping":ko=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ko=6;break;case 7:case"addToPathForClipping":ko=7}var Vg=$m.usedRenderingMode!==void 0?$m.usedRenderingMode:-1;ko!==-1?bn+=ko+` Tr
`:Vg!==-1&&(bn+=`0 Tr
`),ko!==-1&&($m.usedRenderingMode=ko),O=Le.align||"left";var Ol,ei=ye*Vn,tA=Ut.internal.pageSize.getWidth(),Gm=Nr[Qt];re=Le.charSpace||Wu,oe=Le.maxWidth||0,ve=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var ed=[],rA=function(hn){return Ut.getStringUnitWidth(hn,{font:Gm,charSpace:re,fontSize:ye,doKerning:!1})*ye/ea};if(Object.prototype.toString.call(W)==="[object Array]"){var no;Lt=es(W),O!=="left"&&(Ol=Lt.map(rA));var bi,nA=0;if(O==="right"){Ae-=Ol[0],W=[],Is=Lt.length;for(var Bo=0;Bo<Is;Bo++)Bo===0?(bi=Oi(Ae),no=gs(Fe)):(bi=D(nA-Ol[Bo]),no=-ei),W.push([Lt[Bo],bi,no]),nA=Ol[Bo]}else if(O==="center"){Ae-=Ol[0]/2,W=[],Is=Lt.length;for(var fc=0;fc<Is;fc++)fc===0?(bi=Oi(Ae),no=gs(Fe)):(bi=D((nA-Ol[fc])/2),no=-ei),W.push([Lt[fc],bi,no]),nA=Ol[fc]}else if(O==="left"){W=[],Is=Lt.length;for(var su=0;su<Is;su++)W.push(Lt[su])}else if(O==="justify"&&Gm.encoding==="Identity-H"){W=[],Is=Lt.length,oe=oe!==0?oe:tA;for(var hc=0,Ga=0;Ga<Is;Ga++)if(no=Ga===0?gs(Fe):-ei,bi=Ga===0?Oi(Ae):hc,Ga<Is-1){var mc=D((oe-Ol[Ga])/(Lt[Ga].split(" ").length-1)),xs=Lt[Ga].split(" ");W.push([xs[0]+" ",bi,no]),hc=0;for(var To=1;To<xs.length;To++){var vf=(rA(xs[To-1]+" "+xs[To])-rA(xs[To]))*ea+mc;To==xs.length-1?W.push([xs[To],vf,0]):W.push([xs[To]+" ",vf,0]),hc-=vf}}else W.push([Lt[Ga],bi,no]);W.push(["",hc,0])}else{if(O!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(W=[],Is=Lt.length,oe=oe!==0?oe:tA,Ga=0;Ga<Is;Ga++)no=Ga===0?gs(Fe):-ei,bi=Ga===0?Oi(Ae):0,Ga<Is-1?ed.push(E(D((oe-Ol[Ga])/(Lt[Ga].split(" ").length-1)))):ed.push(0),W.push([Lt[Ga],bi,no])}}var iu=typeof Le.R2L=="boolean"?Le.R2L:qe;iu===!0&&(W=So(W,function(hn,mn,va){return[hn.split("").reverse().join(""),mn,va]})),vt={text:W,x:Ae,y:Fe,options:Le,mutex:{pdfEscape:Fn,activeFontKey:Qt,fonts:Nr,activeFontSize:ye}},et.publish("postProcessText",vt),W=vt.text,qr=vt.mutex.isHex||!1;var Gh=Nr[Qt].encoding;Gh!=="WinAnsiEncoding"&&Gh!=="StandardEncoding"||(W=So(W,function(hn,mn,va){return[Fl(hn),mn,va]})),Lt=es(W),W=[];for(var aA,sA,iA,bf=0,Kh=1,oA=Array.isArray(Lt[0])?Kh:bf,td="",yf=function(hn,mn,va){var ts="";return va instanceof bt?(va=typeof Le.angle=="number"?nr(va,new bt(1,0,0,1,hn,mn)):nr(new bt(1,0,0,1,hn,mn),va),_===w.ADVANCED&&(va=nr(new bt(1,0,0,-1,0,0),va)),ts=va.join(" ")+` Tm
`):ts=E(hn)+" "+E(mn)+` Td
`,ts},Ka=0;Ka<Lt.length;Ka++){switch(td="",oA){case Kh:iA=(qr?"<":"(")+Lt[Ka][0]+(qr?">":")"),aA=parseFloat(Lt[Ka][1]),sA=parseFloat(Lt[Ka][2]);break;case bf:iA=(qr?"<":"(")+Lt[Ka]+(qr?">":")"),aA=Oi(Ae),sA=gs(Fe)}ed!==void 0&&ed[Ka]!==void 0&&(td=ed[Ka]+` Tw
`),Ka===0?W.push(td+yf(aA,sA,ot)+iA):oA===bf?W.push(td+iA):oA===Kh&&W.push(td+yf(aA,sA,ot)+iA)}W=oA===bf?W.join(` Tj
T* `):W.join(` Tj
`),W+=` Tj
`;var cl=`BT
/`;return cl+=Qt+" "+ye+` Tf
`,cl+=E(ye*Vn)+` TL
`,cl+=dc+`
`,cl+=bn,cl+=W,fe(cl+="ET"),h[Qt]=!0,Ut};var Qh=p.__private__.clip=p.clip=function(W){return fe(W==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Qh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return fe("n"),this};var Ii=p.__private__.isValidStyle=function(W){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(W)!==-1&&(Ae=!0),Ae};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(W){return Ii(W)&&(u=W),this};var Co=p.__private__.getStyle=p.getStyle=function(W){var Ae=u;switch(W){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=W}return Ae},ro=p.close=function(){return fe("h"),this};p.stroke=function(){return fe("S"),this},p.fill=function(W){return Tl("f",W),this},p.fillEvenOdd=function(W){return Tl("f*",W),this},p.fillStroke=function(W){return Tl("B",W),this},p.fillStrokeEvenOdd=function(W){return Tl("B*",W),this};var Tl=function(W,Ae){ma(Ae)==="object"?uc(Ae,W):fe(W)},_o=function(W){W===null||_===w.ADVANCED&&W===void 0||(W=Co(W),fe(W))};function Yc(W,Ae,Fe,Le,Ge){var vt=new iv(Ae||this.boundingBox,Fe||this.xStep,Le||this.yStep,this.gState,Ge||this.matrix);vt.stream=this.stream;var Lt=W+"$$"+this.cloneIndex+++"$$";return Kr(Lt,vt),vt}var uc=function(W,Ae){var Fe=fs[W.key],Le=Or[Fe];if(Le instanceof Np)fe("q"),fe(ff(Ae)),Le.gState&&p.setGState(Le.gState),fe(W.matrix.toString()+" cm"),fe("/"+Fe+" sh"),fe("Q");else if(Le instanceof iv){var Ge=new bt(1,0,0,-1,0,Di());W.matrix&&(Ge=Ge.multiply(W.matrix||gr),Fe=Yc.call(Le,W.key,W.boundingBox,W.xStep,W.yStep,Ge).id),fe("q"),fe("/Pattern cs"),fe("/"+Fe+" scn"),Le.gState&&p.setGState(Le.gState),fe(Ae),fe("Q")}},ff=function(W){switch(W){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},No=p.moveTo=function(W,Ae){return fe(E(D(W))+" "+E(M(Ae))+" m"),this},Fi=p.lineTo=function(W,Ae){return fe(E(D(W))+" "+E(M(Ae))+" l"),this},jl=p.curveTo=function(W,Ae,Fe,Le,Ge,vt){return fe([E(D(W)),E(M(Ae)),E(D(Fe)),E(M(Le)),E(D(Ge)),E(M(vt)),"c"].join(" ")),this};p.__private__.line=p.line=function(W,Ae,Fe,Le,Ge){if(isNaN(W)||isNaN(Ae)||isNaN(Fe)||isNaN(Le)||!Ii(Ge))throw new Error("Invalid arguments passed to jsPDF.line");return _===w.COMPAT?this.lines([[Fe-W,Le-Ae]],W,Ae,[1,1],Ge||"S"):this.lines([[Fe-W,Le-Ae]],W,Ae,[1,1]).stroke()},p.__private__.lines=p.lines=function(W,Ae,Fe,Le,Ge,vt){var Lt,Jt,O,re,oe,ve,ze,ot,Ut,Ir,bn,qr;if(typeof W=="number"&&(qr=Fe,Fe=Ae,Ae=W,W=qr),Le=Le||[1,1],vt=vt||!1,isNaN(Ae)||isNaN(Fe)||!Array.isArray(W)||!Array.isArray(Le)||!Ii(Ge)||typeof vt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(No(Ae,Fe),Lt=Le[0],Jt=Le[1],re=W.length,Ir=Ae,bn=Fe,O=0;O<re;O++)(oe=W[O]).length===2?(Ir=oe[0]*Lt+Ir,bn=oe[1]*Jt+bn,Fi(Ir,bn)):(ve=oe[0]*Lt+Ir,ze=oe[1]*Jt+bn,ot=oe[2]*Lt+Ir,Ut=oe[3]*Jt+bn,Ir=oe[4]*Lt+Ir,bn=oe[5]*Jt+bn,jl(ve,ze,ot,Ut,Ir,bn));return vt&&ro(),_o(Ge),this},p.path=function(W){for(var Ae=0;Ae<W.length;Ae++){var Fe=W[Ae],Le=Fe.c;switch(Fe.op){case"m":No(Le[0],Le[1]);break;case"l":Fi(Le[0],Le[1]);break;case"c":jl.apply(this,Le);break;case"h":ro()}}return this},p.__private__.rect=p.rect=function(W,Ae,Fe,Le,Ge){if(isNaN(W)||isNaN(Ae)||isNaN(Fe)||isNaN(Le)||!Ii(Ge))throw new Error("Invalid arguments passed to jsPDF.rect");return _===w.COMPAT&&(Le=-Le),fe([E(D(W)),E(M(Ae)),E(D(Fe)),E(D(Le)),"re"].join(" ")),_o(Ge),this},p.__private__.triangle=p.triangle=function(W,Ae,Fe,Le,Ge,vt,Lt){if(isNaN(W)||isNaN(Ae)||isNaN(Fe)||isNaN(Le)||isNaN(Ge)||isNaN(vt)||!Ii(Lt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Fe-W,Le-Ae],[Ge-Fe,vt-Le],[W-Ge,Ae-vt]],W,Ae,[1,1],Lt,!0),this},p.__private__.roundedRect=p.roundedRect=function(W,Ae,Fe,Le,Ge,vt,Lt){if(isNaN(W)||isNaN(Ae)||isNaN(Fe)||isNaN(Le)||isNaN(Ge)||isNaN(vt)||!Ii(Lt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Jt=4/3*(Math.SQRT2-1);return Ge=Math.min(Ge,.5*Fe),vt=Math.min(vt,.5*Le),this.lines([[Fe-2*Ge,0],[Ge*Jt,0,Ge,vt-vt*Jt,Ge,vt],[0,Le-2*vt],[0,vt*Jt,-Ge*Jt,vt,-Ge,vt],[2*Ge-Fe,0],[-Ge*Jt,0,-Ge,-vt*Jt,-Ge,-vt],[0,2*vt-Le],[0,-vt*Jt,Ge*Jt,-vt,Ge,-vt]],W+Ge,Ae,[1,1],Lt,!0),this},p.__private__.ellipse=p.ellipse=function(W,Ae,Fe,Le,Ge){if(isNaN(W)||isNaN(Ae)||isNaN(Fe)||isNaN(Le)||!Ii(Ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var vt=4/3*(Math.SQRT2-1)*Fe,Lt=4/3*(Math.SQRT2-1)*Le;return No(W+Fe,Ae),jl(W+Fe,Ae-Lt,W+vt,Ae-Le,W,Ae-Le),jl(W-vt,Ae-Le,W-Fe,Ae-Lt,W-Fe,Ae),jl(W-Fe,Ae+Lt,W-vt,Ae+Le,W,Ae+Le),jl(W+vt,Ae+Le,W+Fe,Ae+Lt,W+Fe,Ae),_o(Ge),this},p.__private__.circle=p.circle=function(W,Ae,Fe,Le){if(isNaN(W)||isNaN(Ae)||isNaN(Fe)||!Ii(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(W,Ae,Fe,Fe,Le)},p.setFont=function(W,Ae,Fe){return Fe&&(Ae=I(Ae,Fe)),Qt=Xc(W,Ae,{disableWarning:!1}),this};var ps=p.__private__.getFont=p.getFont=function(){return Nr[Xc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var W,Ae,Fe={};for(W in Vr)if(Vr.hasOwnProperty(W))for(Ae in Fe[W]=[],Vr[W])Vr[W].hasOwnProperty(Ae)&&Fe[W].push(Ae);return Fe},p.addFont=function(W,Ae,Fe,Le,Ge){var vt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&vt.indexOf(arguments[3])!==-1?Ge=arguments[3]:arguments[3]&&vt.indexOf(arguments[3])==-1&&(Fe=I(Fe,Le)),Ge=Ge||"Identity-H",Kc.call(this,W,Ae,Fe,Ge)};var vn,Jc=e.lineWidth||.200025,Il=p.__private__.getLineWidth=p.getLineWidth=function(){return Jc},hf=p.__private__.setLineWidth=p.setLineWidth=function(W){return Jc=W,fe(E(D(W))+" w"),this};p.__private__.setLineDash=vr.API.setLineDash=vr.API.setLineDashPattern=function(W,Ae){if(W=W||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(W))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return W=W.map(function(Fe){return E(D(Fe))}).join(" "),Ae=E(D(Ae)),fe("["+W+"] "+Ae+" d"),this};var Ku=p.__private__.getLineHeight=p.getLineHeight=function(){return ye*vn};p.__private__.getLineHeight=p.getLineHeight=function(){return ye*vn};var qu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(W){return typeof(W=W||1.15)=="number"&&(vn=W),this},ll=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return vn};qu(e.lineHeight);var Oi=p.__private__.getHorizontalCoordinate=function(W){return D(W)},gs=p.__private__.getVerticalCoordinate=function(W){return _===w.ADVANCED?W:pr[z].mediaBox.topRightY-pr[z].mediaBox.bottomLeftY-D(W)},Hh=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(W){return E(Oi(W))},Zc=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(W){return E(gs(W))},vi=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ne(vi)},p.__private__.setStrokeColor=p.setDrawColor=function(W,Ae,Fe,Le){return vi=je({ch1:W,ch2:Ae,ch3:Fe,ch4:Le,pdfColorType:"draw",precision:2}),fe(vi),this};var eu=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ne(eu)},p.__private__.setFillColor=p.setFillColor=function(W,Ae,Fe,Le){return eu=je({ch1:W,ch2:Ae,ch3:Fe,ch4:Le,pdfColorType:"fill",precision:2}),fe(eu),this};var dc=e.textColor||"0 g",Wd=p.__private__.getTextColor=p.getTextColor=function(){return Ne(dc)};p.__private__.setTextColor=p.setTextColor=function(W,Ae,Fe,Le){return dc=je({ch1:W,ch2:Ae,ch3:Fe,ch4:Le,pdfColorType:"text",precision:3}),this};var Wu=e.charSpace,Xd=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Wu||0)};p.__private__.setCharSpace=p.setCharSpace=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Wu=W,this};var mf=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(W){var Ae=p.CapJoinStyles[W];if(Ae===void 0)throw new Error("Line cap style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mf=Ae,fe(Ae+" J"),this};var Xu=0;p.__private__.setLineJoin=p.setLineJoin=function(W){var Ae=p.CapJoinStyles[W];if(Ae===void 0)throw new Error("Line join style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xu=Ae,fe(Ae+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(W){if(W=W||0,isNaN(W))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(E(D(W))+" M"),this},p.GState=HN,p.setGState=function(W){(W=typeof W=="string"?fn[oa[W]]:tu(null,W)).equals(Ba)||(fe("/"+W.id+" gs"),Ba=W)};var tu=function(W,Ae){if(!W||!oa[W]){var Fe=!1;for(var Le in fn)if(fn.hasOwnProperty(Le)&&fn[Le].equals(Ae)){Fe=!0;break}if(Fe)Ae=fn[Le];else{var Ge="GS"+(Object.keys(fn).length+1).toString(10);fn[Ge]=Ae,Ae.id=Ge}return W&&(oa[W]=Ae.id),et.publish("addGState",Ae),Ae}};p.addGState=function(W,Ae){return tu(W,Ae),this},p.saveGraphicsState=function(){return fe("q"),In.push({key:Qt,size:ye,color:dc}),this},p.restoreGraphicsState=function(){fe("Q");var W=In.pop();return Qt=W.key,ye=W.size,dc=W.color,Ba=null,this},p.setCurrentTransformationMatrix=function(W){return fe(W.toString()+" cm"),this},p.comment=function(W){return fe("#"+W),this};var Yu=function(W,Ae){var Fe=W||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Fe},set:function(vt){isNaN(vt)||(Fe=parseFloat(vt))}});var Le=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(vt){isNaN(vt)||(Le=parseFloat(vt))}});var Ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ge},set:function(vt){Ge=vt.toString()}}),this},Yd=function(W,Ae,Fe,Le){Yu.call(this,W,Ae),this.type="rect";var Ge=Fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ge},set:function(Lt){isNaN(Lt)||(Ge=parseFloat(Lt))}});var vt=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return vt},set:function(Lt){isNaN(Lt)||(vt=parseFloat(Lt))}}),this},Ju=function(){this.page=tn,this.currentPage=z,this.pages=Be.slice(0),this.pagesContext=pr.slice(0),this.x=Br,this.y=tr,this.matrix=nn,this.width=nu(z),this.height=Di(z),this.outputDestination=_e,this.id="",this.objectNumber=-1};Ju.prototype.restore=function(){tn=this.page,z=this.currentPage,pr=this.pagesContext,Be=this.pages,Br=this.x,tr=this.y,nn=this.matrix,Zu(z,this.width),Jd(z,this.height),_e=this.outputDestination};var ru=function(W,Ae,Fe,Le,Ge){wt.push(new Ju),tn=z=0,Be=[],Br=W,tr=Ae,nn=Ge,xi([Fe,Le])},Vh=function(W){if(xt[W])wt.pop().restore();else{var Ae=new Ju,Fe="Xo"+(Object.keys(Je).length+1).toString(10);Ae.id=Fe,xt[W]=Fe,Je[Fe]=Ae,et.publish("addFormObject",Ae),wt.pop().restore()}};for(var Ac in p.beginFormObject=function(W,Ae,Fe,Le,Ge){return ru(W,Ae,Fe,Le,Ge),this},p.endFormObject=function(W){return Vh(W),this},p.doFormObject=function(W,Ae){var Fe=Je[xt[W]];return fe("q"),fe(Ae.toString()+" cm"),fe("/"+Fe.id+" Do"),fe("Q"),this},p.getFormObject=function(W){var Ae=Je[xt[W]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},p.save=function(W,Ae){return W=W||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(wp(qd(oc()),W),typeof wp.unload=="function"&&Mr.setTimeout&&setTimeout(wp.unload,911),this):new Promise(function(Fe,Le){try{var Ge=wp(qd(oc()),W);typeof wp.unload=="function"&&Mr.setTimeout&&setTimeout(wp.unload,911),Fe(Ge)}catch(vt){Le(vt.message)}})},vr.API)vr.API.hasOwnProperty(Ac)&&(Ac==="events"&&vr.API.events.length?function(W,Ae){var Fe,Le,Ge;for(Ge=Ae.length-1;Ge!==-1;Ge--)Fe=Ae[Ge][0],Le=Ae[Ge][1],W.subscribe.apply(W,[Fe].concat(typeof Le=="function"?[Le]:Le))}(et,vr.API.events):p[Ac]=vr.API[Ac]);var nu=p.getPageWidth=function(W){return(pr[W=W||z].mediaBox.topRightX-pr[W].mediaBox.bottomLeftX)/yt},Zu=p.setPageWidth=function(W,Ae){pr[W].mediaBox.topRightX=Ae*yt+pr[W].mediaBox.bottomLeftX},Di=p.getPageHeight=function(W){return(pr[W=W||z].mediaBox.topRightY-pr[W].mediaBox.bottomLeftY)/yt},Jd=p.setPageHeight=function(W,Ae){pr[W].mediaBox.topRightY=Ae*yt+pr[W].mediaBox.bottomLeftY};return p.internal={pdfEscape:Fn,getStyle:Co,getFont:ps,getFontSize:Re,getCharSpace:Xd,getTextColor:Wd,getLineHeight:Ku,getLineHeightFactor:ll,getLineWidth:Il,write:Ie,getHorizontalCoordinate:Oi,getVerticalCoordinate:gs,getCoordinateString:Hh,getVerticalCoordinateString:Zc,collections:{},newObject:Jr,newAdditionalObject:Te,newObjectDeferred:Gr,newObjectDeferredBegin:he,getFilters:Xe,putStream:dt,events:et,scaleFactor:yt,pageSize:{getWidth:function(){return nu(z)},setWidth:function(W){Zu(z,W)},getHeight:function(){return Di(z)},setHeight:function(W){Jd(z,W)}},encryptionOptions:d,encryption:la,getEncryptor:cc,output:lc,getNumberOfPages:Hn,pages:Be,out:fe,f2:R,f3:P,getPageInfo:kl,getPageInfoByObjId:jr,getCurrentPageInfo:Bl,getPDFVersion:x,Point:Yu,Rectangle:Yd,Matrix:bt,hasHotfix:Sl},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return nu(z)},set:function(W){Zu(z,W)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Di(z)},set:function(W){Jd(z,W)},enumerable:!0,configurable:!0}),uf.call(p,Ye),Qt="F1",qc(a,r),et.publish("initialized"),p}Wx.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Wx.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Wx.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Wx.prototype.processOwnerPassword=function(e,t){return HF(QF(t).substr(0,5),e)},Wx.prototype.encryptor=function(e,t){var r=QF(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return HF(r,n)}},HN.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ma(e)!==ma(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},vr.API={events:[]},vr.version="2.5.2";var Cs=vr.API,M8=1,Pg=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ex=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Zr=function(e){return e.toFixed(2)},_0=function(e){return e.toFixed(5)};Cs.__acroform__={};var sc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},SG=function(e){return e*M8},NA=function(e){var t=new Ose,r=hr.internal.getHeight(e)||0,n=hr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Zr(n)),Number(Zr(r))],t},R8e=Cs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},L8e=Cs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},M8e=Cs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},zs=Cs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return M8e(e,t-1)},$s=Cs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return R8e(e,t-1)},Gs=Cs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return L8e(e,t-1)},U8e=Cs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(Zr(c.lowerLeft_X)),Number(Zr(c.lowerLeft_Y)),Number(Zr(c.upperRight_X)),Number(Zr(c.upperRight_Y))]},Q8e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=VF(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Zr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=NA(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},VF=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(P){return P.split(`
`)}):a.map(function(P){return[P]});var s=r,i=hr.internal.getHeight(e)||0;i=i<0?-i:i;var o=hr.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(P,D,L){if(P+1<a.length){var M=D+" "+a[P+1][0];return zC(M,e,L).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=zC("3",e,s).height,h=e.multiline?i-s:(i-f)/2,p=h+=2,g=0,x=0,b=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+zC(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",w=0,_=0;_<a.length;_++)if(a.hasOwnProperty(_)){var j=!1;if(a[_].length!==1&&b!==a[_].length-1){if((f+2)*(w+2)+2>i)continue e;y+=a[_][b],j=!0,x=_,_--}else{y=(y+=a[_][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var k=parseInt(_),I=c(k,y,s),E=_>=a.length-1;if(I&&!E){y+=" ",b=0;continue}if(I||E){if(E)x=k;else if(e.multiline&&(f+2)*(w+2)+2>i)continue e}else{if(!e.multiline||(f+2)*(w+2)+2>i)continue e;x=k}}for(var N="",B=g;B<=x;B++){var R=a[B];if(e.multiline){if(B===x){N+=R[b]+" ",b=(b+1)%R.length;continue}if(B===g){N+=R[R.length-1]+" ";continue}}N+=R[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,d=zC(N,e,s).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}t+=Zr(u)+" "+Zr(p)+` Td
`,t+="("+Pg(N)+`) Tj
`,t+=-Zr(u)+` 0 Td
`,p=-(s+2),d=0,g=j?x:x+1,w++,y=""}break}return n.text=t,n.fontSize=s,n},zC=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},H8e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},V8e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},z8e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ma(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},$8e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Hd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(H8e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");M8=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new Dse,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&V8e(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],c=[],u=o.Rect;if(o.Rect&&(o.Rect=U8e(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=hr.createDefaultAppearanceStream(o),ma(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Q8e(o);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var p=o.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var g=p[i];typeof g=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=p)=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}s&&z8e(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Fse=Cs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ma(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+Pg(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},R3=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Pg(n(e))+")"},UA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};UA.prototype.toString=function(){return this.objId+" 0 R"},UA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},UA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:Fse(a,this.objId,this.scope)}):a instanceof UA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var Ose=function(){UA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};sc(Ose,UA);var Dse=function(){UA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Pg(r(e))+")"}},set:function(r){e=r}})};sc(Dse,UA);var Hd=function e(){UA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zs(t,3)},set:function(y){y?this.F=$s(t,3):this.F=Gs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof VN)return;s="FieldObject"+e.FieldNum++}var y=function(w){return w};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Pg(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/M8:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof VN||this instanceof qp))return R3(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof $i?h:R3(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof $i?y:y.substr(0,1)==="("?Ex(y.substr(1,y.length-2)):Ex(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i?Ex(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof $i?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof $i?p:R3(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof $i?y:y.substr(0,1)==="("?Ex(y.substr(1,y.length-2)):Ex(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i?Ex(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof $i?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(y){y=!!y,x=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,1)},set:function(y){y?this.Ff=$s(this.Ff,1):this.Ff=Gs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,2)},set:function(y){y?this.Ff=$s(this.Ff,2):this.Ff=Gs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,3)},set:function(y){y?this.Ff=$s(this.Ff,3):this.Ff=Gs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};sc(Hd,UA);var Ev=function(){Hd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Fse(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var c,u=[];c=i.exec(s);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,18)},set:function(r){r?this.Ff=$s(this.Ff,18):this.Ff=Gs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=$s(this.Ff,19):this.Ff=Gs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,20)},set:function(r){r?(this.Ff=$s(this.Ff,20),t.sort()):this.Ff=Gs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,22)},set:function(r){r?this.Ff=$s(this.Ff,22):this.Ff=Gs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(r){r?this.Ff=$s(this.Ff,23):this.Ff=Gs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,27)},set:function(r){r?this.Ff=$s(this.Ff,27):this.Ff=Gs(this.Ff,27)}}),this.hasAppearanceStream=!1};sc(Ev,Hd);var Cv=function(){Ev.call(this),this.fontName="helvetica",this.combo=!1};sc(Cv,Ev);var _v=function(){Cv.call(this),this.combo=!0};sc(_v,Cv);var r5=function(){_v.call(this),this.edit=!0};sc(r5,_v);var $i=function(){Hd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,15)},set:function(r){r?this.Ff=$s(this.Ff,15):this.Ff=Gs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,16)},set:function(r){r?this.Ff=$s(this.Ff,16):this.Ff=Gs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,17)},set:function(r){r?this.Ff=$s(this.Ff,17):this.Ff=Gs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(r){r?this.Ff=$s(this.Ff,26):this.Ff=Gs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Pg(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ma(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};sc($i,Hd);var n5=function(){$i.call(this),this.pushButton=!0};sc(n5,$i);var Nv=function(){$i.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};sc(Nv,$i);var VN=function(){var e,t;Hd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+Pg(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){ma(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=hr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};sc(VN,Hd),Nv.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Nv.prototype.createOption=function(e){var t=new VN;return t.Parent=this,t.optionName=e,this.Kids.push(t),G8e.call(this.scope,t),t};var a5=function(){$i.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=hr.CheckBox.createAppearanceStream()};sc(a5,$i);var qp=function(){Hd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,13)},set:function(t){t?this.Ff=$s(this.Ff,13):this.Ff=Gs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,21)},set:function(t){t?this.Ff=$s(this.Ff,21):this.Ff=Gs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,23)},set:function(t){t?this.Ff=$s(this.Ff,23):this.Ff=Gs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,24)},set:function(t){t?this.Ff=$s(this.Ff,24):this.Ff=Gs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,25)},set:function(t){t?this.Ff=$s(this.Ff,25):this.Ff=Gs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,26)},set:function(t){t?this.Ff=$s(this.Ff,26):this.Ff=Gs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};sc(qp,Hd);var s5=function(){qp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zs(this.Ff,14)},set:function(e){e?this.Ff=$s(this.Ff,14):this.Ff=Gs(this.Ff,14)}}),this.password=!0};sc(s5,qp);var hr={CheckBox:{createAppearanceStream:function(){return{N:{On:hr.CheckBox.YesNormal},D:{On:hr.CheckBox.YesPushDown,Off:hr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=NA(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=VF(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Zr(hr.internal.getWidth(e))+" "+Zr(hr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Zr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=NA(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=hr.internal.getHeight(e),i=hr.internal.getWidth(e),o=VF(e,e.caption);return a.push("1 g"),a.push("0 0 "+Zr(i)+" "+Zr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Zr(i-1)+" "+Zr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Zr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=NA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Zr(hr.internal.getWidth(e))+" "+Zr(hr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:hr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=hr.RadioButton.Circle.YesNormal,t.D[e]=hr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=NA(e);t.scope=e.scope;var r=[],n=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=hr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+_0(hr.internal.getWidth(e)/2)+" "+_0(hr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=NA(e);t.scope=e.scope;var r=[],n=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*hr.internal.Bezier_C).toFixed(5)),i=Number((n*hr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+_0(hr.internal.getWidth(e)/2)+" "+_0(hr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+_0(hr.internal.getWidth(e)/2)+" "+_0(hr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=NA(e);t.scope=e.scope;var r=[],n=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*hr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+_0(hr.internal.getWidth(e)/2)+" "+_0(hr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:hr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=hr.RadioButton.Cross.YesNormal,t.D[e]=hr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=NA(e);t.scope=e.scope;var r=[],n=hr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Zr(hr.internal.getWidth(e)-2)+" "+Zr(hr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Zr(n.x1.x)+" "+Zr(n.x1.y)+" m"),r.push(Zr(n.x2.x)+" "+Zr(n.x2.y)+" l"),r.push(Zr(n.x4.x)+" "+Zr(n.x4.y)+" m"),r.push(Zr(n.x3.x)+" "+Zr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=NA(e);t.scope=e.scope;var r=hr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Zr(hr.internal.getWidth(e))+" "+Zr(hr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Zr(hr.internal.getWidth(e)-2)+" "+Zr(hr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Zr(r.x1.x)+" "+Zr(r.x1.y)+" m"),n.push(Zr(r.x2.x)+" "+Zr(r.x2.y)+" l"),n.push(Zr(r.x4.x)+" "+Zr(r.x4.y)+" m"),n.push(Zr(r.x3.x)+" "+Zr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=NA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Zr(hr.internal.getWidth(e))+" "+Zr(hr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};hr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=hr.internal.getWidth(e),r=hr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},hr.internal.getWidth=function(e){var t=0;return ma(e)==="object"&&(t=SG(e.Rect[2])),t},hr.internal.getHeight=function(e){var t=0;return ma(e)==="object"&&(t=SG(e.Rect[3])),t};var G8e=Cs.addField=function(e){if($8e(this,e),!(e instanceof Hd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Cs.AcroFormChoiceField=Ev,Cs.AcroFormListBox=Cv,Cs.AcroFormComboBox=_v,Cs.AcroFormEditBox=r5,Cs.AcroFormButton=$i,Cs.AcroFormPushButton=n5,Cs.AcroFormRadioButton=Nv,Cs.AcroFormCheckBox=a5,Cs.AcroFormTextField=qp,Cs.AcroFormPasswordField=s5,Cs.AcroFormAppearance=hr,Cs.AcroForm={ChoiceField:Ev,ListBox:Cv,ComboBox:_v,EditBox:r5,Button:$i,PushButton:n5,RadioButton:Nv,CheckBox:a5,TextField:qp,PasswordField:s5,Appearance:hr},vr.AcroForm={ChoiceField:Ev,ListBox:Cv,ComboBox:_v,EditBox:r5,Button:$i,PushButton:n5,RadioButton:Nv,CheckBox:a5,TextField:qp,PasswordField:s5,Appearance:hr};vr.AcroForm;function Pse(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(P,D){var L,M,J,H,K,V=t;if((D=D||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(I(P))for(K in r)for(J=r[K],L=0;L<J.length;L+=1){for(H=!0,M=0;M<J[L].length;M+=1)if(J[L][M]!==void 0&&J[L][M]!==P[M]){H=!1;break}if(H===!0){V=K;break}}else for(K in r)for(J=r[K],L=0;L<J.length;L+=1){for(H=!0,M=0;M<J[L].length;M+=1)if(J[L][M]!==void 0&&J[L][M]!==P.charCodeAt(M)){H=!1;break}if(H===!0){V=K;break}}return V===t&&D!==t&&(V=D),V},a=function P(D){for(var L=this.internal.write,M=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);D.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:D.width}),H.push({key:"Height",value:D.height}),D.colorSpace===b.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(D.palette.length/3-1)+" "+("sMask"in D&&D.sMask!==void 0?D.objectId+2:D.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+D.colorSpace}),D.colorSpace===b.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:D.bitsPerComponent}),"decodeParameters"in D&&D.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+D.decodeParameters+">>"}),"transparency"in D&&Array.isArray(D.transparency)){for(var K="",V=0,G=D.transparency.length;V<G;V++)K+=D.transparency[V]+" "+D.transparency[V]+" ";H.push({key:"Mask",value:"["+K+"]"})}D.sMask!==void 0&&H.push({key:"SMask",value:D.objectId+1+" 0 R"});var X=D.filter!==void 0?["/"+D.filter]:void 0;if(M({data:D.data,additionalKeyValues:H,alreadyAppliedFilters:X,objectId:D.objectId}),L("endobj"),"sMask"in D&&D.sMask!==void 0){var ee="/Predictor "+D.predictor+" /Colors 1 /BitsPerComponent "+D.bitsPerComponent+" /Columns "+D.width,F={width:D.width,height:D.height,colorSpace:"DeviceGray",bitsPerComponent:D.bitsPerComponent,decodeParameters:ee,data:D.sMask};"filter"in D&&(F.filter=D.filter),P.call(this,F)}if(D.colorSpace===b.INDEXED){var z=this.internal.newObject();M({data:N(new Uint8Array(D.palette)),objectId:z}),L("endobj")}},s=function(){var P=this.internal.collections.addImage_images;for(var D in P)a.call(this,P[D])},i=function(){var P,D=this.internal.collections.addImage_images,L=this.internal.write;for(var M in D)L("/I"+(P=D[M]).index,P.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var P=this.internal.collections.addImage_images;return o.call(this),P},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(P){return typeof e["process"+P.toUpperCase()]=="function"},f=function(P){return ma(P)==="object"&&P.nodeType===1},h=function(P,D){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var L=""+P.getAttribute("src");if(L.indexOf("data:image/")===0)return rw(unescape(L).split("base64,").pop());var M=e.loadFile(L,!0);if(M!==void 0)return M}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var J;switch(D){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;case"JPEG":case"JPG":default:J="image/jpeg"}return rw(P.toDataURL(J,1).split("base64,").pop())}},p=function(P){var D=this.internal.collections.addImage_images;if(D){for(var L in D)if(P===D[L].alias)return D[L]}},g=function(P,D,L){return P||D||(P=-96,D=-96),P<0&&(P=-1*L.width*72/P/this.internal.scaleFactor),D<0&&(D=-1*L.height*72/D/this.internal.scaleFactor),P===0&&(P=D*L.width/L.height),D===0&&(D=P*L.height/L.width),[P,D]},x=function(P,D,L,M,J,H){var K=g.call(this,L,M,J),V=this.internal.getCoordinateString,G=this.internal.getVerticalCoordinateString,X=c.call(this);if(L=K[0],M=K[1],X[J.index]=J,H){H*=Math.PI/180;var ee=Math.cos(H),F=Math.sin(H),z=function(te){return te.toFixed(4)},Y=[z(ee),z(F),z(-1*F),z(ee),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,V(P),G(D+M),"cm"].join(" ")),this.internal.write(Y.join(" ")),this.internal.write([V(L),"0","0",V(M),"0","0","cm"].join(" "))):this.internal.write([V(L),"0","0",V(M),V(P),G(D+M),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},w=e.__addimage__.sHashCode=function(P){var D,L,M=0;if(typeof P=="string")for(L=P.length,D=0;D<L;D++)M=(M<<5)-M+P.charCodeAt(D),M|=0;else if(I(P))for(L=P.byteLength/2,D=0;D<L;D++)M=(M<<5)-M+P[D],M|=0;return M},_=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var D=!0;return P.length===0&&(D=!1),P.length%4!=0&&(D=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(D=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(D=!1),D},j=e.__addimage__.extractImageFromDataUrl=function(P){var D=(P=P||"").split("base64,"),L=null;if(D.length===2){var M=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(D[0]);Array.isArray(M)&&(L={mimeType:M[1],charset:M[2],data:D[1]})}return L},k=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return k()&&P instanceof ArrayBuffer};var I=e.__addimage__.isArrayBufferView=function(P){return k()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(P){for(var D=P.length,L=new Uint8Array(D),M=0;M<D;M++)L[M]=P.charCodeAt(M);return L},N=e.__addimage__.arrayBufferToBinaryString=function(P){for(var D="",L=I(P)?P:new Uint8Array(P),M=0;M<L.length;M+=8192)D+=String.fromCharCode.apply(null,L.subarray(M,M+8192));return D};e.addImage=function(){var P,D,L,M,J,H,K,V,G;if(typeof arguments[1]=="number"?(D=t,L=arguments[1],M=arguments[2],J=arguments[3],H=arguments[4],K=arguments[5],V=arguments[6],G=arguments[7]):(D=arguments[1],L=arguments[2],M=arguments[3],J=arguments[4],H=arguments[5],K=arguments[6],V=arguments[7],G=arguments[8]),ma(P=arguments[0])==="object"&&!f(P)&&"imageData"in P){var X=P;P=X.imageData,D=X.format||D||t,L=X.x||L||0,M=X.y||M||0,J=X.w||X.width||J,H=X.h||X.height||H,K=X.alias||K,V=X.compression||V,G=X.rotation||X.angle||G}var ee=this.internal.getFilters();if(V===void 0&&ee.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(L)||isNaN(M))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var F=B.call(this,P,D,K,V);return x.call(this,L,M,J,H,F,G),this};var B=function(P,D,L,M){var J,H,K;if(typeof P=="string"&&n(P)===t){P=unescape(P);var V=R(P,!1);(V!==""||(V=e.loadFile(P,!0))!==void 0)&&(P=V)}if(f(P)&&(P=h(P,D)),D=n(P,D),!d(D))throw new Error("addImage does not support files of type '"+D+"', please ensure that a plugin for '"+D+"' support is added.");if(((K=L)==null||K.length===0)&&(L=function(G){return typeof G=="string"||I(G)?w(G):I(G.data)?w(G.data):null}(P)),(J=p.call(this,L))||(k()&&(P instanceof Uint8Array||D==="RGBA"||(H=P,P=E(P))),J=this["process"+D.toUpperCase()](P,u.call(this),L,function(G){return G&&typeof G=="string"&&(G=G.toUpperCase()),G in e.image_compression?G:y.NONE}(M),H)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},R=e.__addimage__.convertBase64ToBinaryString=function(P,D){var L;D=typeof D!="boolean"||D;var M,J="";if(typeof P=="string"){M=(L=j(P))!==null?L.data:P;try{J=rw(M)}catch(H){if(D)throw _(M)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return J};e.getImageProperties=function(P){var D,L,M="";if(f(P)&&(P=h(P)),typeof P=="string"&&n(P)===t&&((M=R(P,!1))===""&&(M=e.loadFile(P)||""),P=M),L=n(P),!d(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(!k()||P instanceof Uint8Array||(P=E(P)),!(D=this["process"+L.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return D.fileType=L,D}})(vr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};vr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var p=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(x.objId),w=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+p(y(w))+") >>",x.content=s;var _=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+_,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(x.objId,"0 R",b.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var j=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var k=this.annotations._nameMap[n.options.name];n.options.pageNumber=k.page,n.options.top=k.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var I=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+I+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,o,i,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(vr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(x){return t[x.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},o=e.__arabicParser__.isArabicEndLetter=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(x){return i(x)&&a.indexOf(x.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(x){return i(x)&&s(x)&&t[x.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(x){var b=0,y=r,w="",_=0;for(b=0;b<x.length;b+=1)y[x.charCodeAt(b)]!==void 0?(_++,typeof(y=y[x.charCodeAt(b)])=="number"&&(w+=String.fromCharCode(y),y=r,_=0),b===x.length-1&&(y=r,w+=x.charAt(b-(_-1)),b-=_-1,_=0)):(y=r,w+=x.charAt(b-_),b-=_,_=0);return w};e.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&n[x.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(x,b,y){return i(x)?s(x)===!1?-1:!u(x)||!i(b)&&!i(y)||!i(y)&&o(b)||o(x)&&!i(b)||o(x)&&c(b)||o(x)&&o(b)?0:d(x)&&i(b)&&!o(b)&&i(y)&&u(y)?3:o(x)||!i(y)?1:2:-1},p=function(x){var b=0,y=0,w=0,_="",j="",k="",I=(x=x||"").split("\\s+"),E=[];for(b=0;b<I.length;b+=1){for(E.push(""),y=0;y<I[b].length;y+=1)_=I[b][y],j=I[b][y-1],k=I[b][y+1],i(_)?(w=h(_,j,k),E[b]+=w!==-1?String.fromCharCode(t[_.charCodeAt(0)][w]):_):E[b]+=_;E[b]=f(E[b])}return E.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var x,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var w=0;for(y=[],w=0;w<b.length;w+=1)Array.isArray(b[w])?y.push([p(b[w][0]),b[w][1],b[w][2]]):y.push([p(b[w])]);x=y}else x=p(b);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};e.events.push(["preProcessText",g])}(vr.API),vr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(vr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(x){p=x}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(x){g=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,p=0,g=0,x=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(_,j){return _.concat(b.splitTextToSize(j,y))},[])):c=Array.isArray(c)?c:[c];for(var w=0;w<c.length;w++)p<(x=this.getStringUnitWidth(c[w],{font:f})*d)&&(p=x);return p!==0&&(g=c.length),{w:p/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,p&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var p,g,x,b,y=[],w=[],_=[],j={},k={},I=[],E=[],N=(h=h||{}).autoSize||!1,B=h.printHeaders!==!1,R=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,P=h.margins||Object.assign({width:this.getPageWidth()},t),D=typeof h.padding=="number"?h.padding:3,L=h.headerBackgroundColor||"#c8c8c8",M=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=R,this.internal.__cell__.padding=D,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=M,this.setFontSize(R),f==null)w=y=Object.keys(d[0]),_=y.map(function(){return"left"});else if(Array.isArray(f)&&ma(f[0])==="object")for(y=f.map(function(X){return X.name}),w=f.map(function(X){return X.prompt||X.name||""}),_=f.map(function(X){return X.align||"left"}),p=0;p<f.length;p+=1)k[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(w=y=f,_=y.map(function(){return"left"}));if(N||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<y.length;p+=1){for(j[b=y[p]]=d.map(function(X){return X[b]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(w[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=j[b],this.setFont(void 0,"normal"),x=0;x<g.length;x+=1)I.push(this.getTextDimensions(g[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);k[b]=Math.max.apply(null,I)+D+D,I=[]}if(B){var J={};for(p=0;p<y.length;p+=1)J[y[p]]={},J[y[p]].text=w[p],J[y[p]].align=_[p];var H=o.call(this,J,k);E=y.map(function(X){return new s(c,u,k[X],H,J[X].text,void 0,J[X].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var K=f.reduce(function(X,ee){return X[ee.name]=ee.align,X},{});for(p=0;p<d.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:d[p]},this);var V=o.call(this,d[p],k);for(x=0;x<y.length;x+=1){var G=d[p][y[x]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:x,data:G},this),i.call(this,new s(c,u,k[y[x]],V,G,p+2,K[y[x]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(p){var g=c[p];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/h+d+d},this).reduce(function(p,g){return Math.max(p,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(vr.API);var Rse={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Lse=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],zF=Pse(Lse),Mse=[100,200,300,400,500,600,700,800,900],K8e=Pse(Mse);function $F(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Rse[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof zF[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function kG(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var q8e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},BG={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function TG(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function W8e(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},q8e,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=$F(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+TG(s)+"' and default family '"+n+"'.");if(i=function(c,u){if(u[c])return u[c];var d=zF[c],f=d<=zF.normal?-1:1,h=kG(u,Lse,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,i),i=function(c,u){if(u[c])return u[c];for(var d=Rse[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,i),!(i=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=K8e[c],f=kG(u,Mse,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+TG(s)+"'.");return i}function jG(e){return e.trimLeft()}function X8e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Y8e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var $C,IG,FG,L3=["times"];(function(e){var t,r,n,a,s,i,o,c,u,d=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new c,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new i,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new i,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var z=F;Object.defineProperty(this,"pdf",{get:function(){return z}});var Y=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Y},set:function(Se){Y=!!Se}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Se){te=!!Se}});var ae=0;Object.defineProperty(this,"posX",{get:function(){return ae},set:function(Se){isNaN(Se)||(ae=Se)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(Se){isNaN(Se)||(le=Se)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Se){var fe;typeof Se=="number"?fe=[Se,Se,Se,Se]:((fe=new Array(4))[0]=Se[0],fe[1]=Se.length>=2?Se[1]:fe[0],fe[2]=Se.length>=3?Se[2]:fe[0],fe[3]=Se.length>=4?Se[3]:fe[1]),u.margin=fe}});var ie=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ie},set:function(Se){ie=Se}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(Se){ce=Se}});var pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pe},set:function(Se){pe=Se}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Se){Se instanceof d&&(u=Se)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Se){u.path=Se}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(Se){Be=Se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Se){var fe;fe=h(Se),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Se){var fe=h(Se);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Se){["butt","round","square"].indexOf(Se)!==-1&&(this.ctx.lineCap=Se,this.pdf.setLineCap(Se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Se){isNaN(Se)||(this.ctx.lineWidth=Se,this.pdf.setLineWidth(Se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Se){["bevel","round","miter"].indexOf(Se)!==-1&&(this.ctx.lineJoin=Se,this.pdf.setLineJoin(Se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Se){isNaN(Se)||(this.ctx.miterLimit=Se,this.pdf.setMiterLimit(Se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Se){this.ctx.textBaseline=Se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Se){["right","end","center","left","start"].indexOf(Se)!==-1&&(this.ctx.textAlign=Se)}});var ne=null;function _e(Se,fe){if(ne===null){var Ie=function(Ue){var Ye=[];return Object.keys(Ue).forEach(function(ye){Ue[ye].forEach(function(Oe){var Re=null;switch(Oe){case"bold":Re={family:ye,weight:"bold"};break;case"italic":Re={family:ye,style:"italic"};break;case"bolditalic":Re={family:ye,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:ye}}Re!==null&&(Re.ref={name:ye,style:Oe},Ye.push(Re))})}),Ye}(Se.getFontList());ne=function(Ue){for(var Ye={},ye=0;ye<Ue.length;++ye){var Oe=$F(Ue[ye]),Re=Oe.family,qe=Oe.stretch,Ze=Oe.style,ct=Oe.weight;Ye[Re]=Ye[Re]||{},Ye[Re][qe]=Ye[Re][qe]||{},Ye[Re][qe][Ze]=Ye[Re][qe][Ze]||{},Ye[Re][qe][Ze][ct]=Oe}return Ye}(Ie.concat(fe))}return ne}var De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(Se){ne=null,De=Se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Se){var fe;if(this.ctx.font=Se,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Se))!==null){var Ie=fe[1],Ue=(fe[2],fe[3]),Ye=fe[4],ye=(fe[5],fe[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ye)[2];Ye=Math.floor(Oe==="px"?parseFloat(Ye)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Ye)*this.pdf.getFontSize():parseFloat(Ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ye);var Re=function(Pt){var Qt,yt,Br=[],tr=Pt.trim();if(tr==="")return L3;if(tr in BG)return[BG[tr]];for(;tr!=="";){switch(yt=null,Qt=(tr=jG(tr)).charAt(0)){case'"':case"'":yt=X8e(tr.substring(1),Qt);break;default:yt=Y8e(tr)}if(yt===null||(Br.push(yt[0]),(tr=jG(yt[1]))!==""&&tr.charAt(0)!==","))return L3;tr=tr.replace(/^,/,"")}return Br}(ye);if(this.fontFaces){var qe=W8e(_e(this.pdf,this.fontFaces),Re.map(function(Pt){return{family:Pt,stretch:"normal",weight:Ue,style:Ie}}));this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var Ze="";(Ue==="bold"||parseInt(Ue,10)>=700||Ie==="bold")&&(Ze="bold"),Ie==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ct="",pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},It=0;It<Re.length;It++){if(this.pdf.internal.getFont(Re[It],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ct=Re[It];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Re[It],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ct=Re[It],Ze="bold";else if(this.pdf.internal.getFont(Re[It],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ct=Re[It],Ze="normal";break}}if(ct===""){for(var Mt=0;Mt<Re.length;Mt++)if(pt[Re[Mt]]){ct=pt[Re[Mt]];break}}ct=ct===""?"Times":ct,this.pdf.setFont(ct,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Se){this.ctx.globalCompositeOperation=Se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Se){this.ctx.globalAlpha=Se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Se){this.ctx.lineDashOffset=Se,ee.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Se){this.ctx.lineDash=Se,ee.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Se){this.ctx.ignoreClearRect=!!Se}})};f.prototype.setLineDash=function(F){this.lineDash=F},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){j.call(this,"fill",!1)},f.prototype.stroke=function(){j.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(F,z){if(isNaN(F)||isNaN(z))throw _a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Y=this.ctx.transform.applyToPoint(new i(F,z));this.path.push({type:"mt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(F,z)},f.prototype.closePath=function(){var F=new i(0,0),z=0;for(z=this.path.length-1;z!==-1;z--)if(this.path[z].type==="begin"&&ma(this.path[z+1])==="object"&&typeof this.path[z+1].x=="number"){F=new i(this.path[z+1].x,this.path[z+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(F.x,F.y)},f.prototype.lineTo=function(F,z){if(isNaN(F)||isNaN(z))throw _a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Y=this.ctx.transform.applyToPoint(new i(F,z));this.path.push({type:"lt",x:Y.x,y:Y.y}),this.ctx.lastPoint=new i(Y.x,Y.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},f.prototype.quadraticCurveTo=function(F,z,Y,te){if(isNaN(Y)||isNaN(te)||isNaN(F)||isNaN(z))throw _a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ae=this.ctx.transform.applyToPoint(new i(Y,te)),le=this.ctx.transform.applyToPoint(new i(F,z));this.path.push({type:"qct",x1:le.x,y1:le.y,x:ae.x,y:ae.y}),this.ctx.lastPoint=new i(ae.x,ae.y)},f.prototype.bezierCurveTo=function(F,z,Y,te,ae,le){if(isNaN(ae)||isNaN(le)||isNaN(F)||isNaN(z)||isNaN(Y)||isNaN(te))throw _a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ie=this.ctx.transform.applyToPoint(new i(ae,le)),ce=this.ctx.transform.applyToPoint(new i(F,z)),pe=this.ctx.transform.applyToPoint(new i(Y,te));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:pe.x,y2:pe.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new i(ie.x,ie.y)},f.prototype.arc=function(F,z,Y,te,ae,le){if(isNaN(F)||isNaN(z)||isNaN(Y)||isNaN(te)||isNaN(ae))throw _a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ie=this.ctx.transform.applyToPoint(new i(F,z));F=ie.x,z=ie.y;var ce=this.ctx.transform.applyToPoint(new i(0,Y)),pe=this.ctx.transform.applyToPoint(new i(0,0));Y=Math.sqrt(Math.pow(ce.x-pe.x,2)+Math.pow(ce.y-pe.y,2))}Math.abs(ae-te)>=2*Math.PI&&(te=0,ae=2*Math.PI),this.path.push({type:"arc",x:F,y:z,radius:Y,startAngle:te,endAngle:ae,counterclockwise:le})},f.prototype.arcTo=function(F,z,Y,te,ae){throw new Error("arcTo not implemented.")},f.prototype.rect=function(F,z,Y,te){if(isNaN(F)||isNaN(z)||isNaN(Y)||isNaN(te))throw _a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,z),this.lineTo(F+Y,z),this.lineTo(F+Y,z+te),this.lineTo(F,z+te),this.lineTo(F,z),this.lineTo(F+Y,z),this.lineTo(F,z)},f.prototype.fillRect=function(F,z,Y,te){if(isNaN(F)||isNaN(z)||isNaN(Y)||isNaN(te))throw _a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ae={};this.lineCap!=="butt"&&(ae.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ae.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,z,Y,te),this.fill(),ae.hasOwnProperty("lineCap")&&(this.lineCap=ae.lineCap),ae.hasOwnProperty("lineJoin")&&(this.lineJoin=ae.lineJoin)}},f.prototype.strokeRect=function(F,z,Y,te){if(isNaN(F)||isNaN(z)||isNaN(Y)||isNaN(te))throw _a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(F,z,Y,te),this.stroke())},f.prototype.clearRect=function(F,z,Y,te){if(isNaN(F)||isNaN(z)||isNaN(Y)||isNaN(te))throw _a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,z,Y,te))},f.prototype.save=function(F){F=typeof F!="boolean"||F;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("q");if(this.pdf.setPage(z),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var z=this.pdf.internal.getCurrentPageInfo().pageNumber,Y=0;Y<this.pdf.internal.getNumberOfPages();Y++)this.pdf.setPage(Y+1),this.pdf.internal.out("Q");this.pdf.setPage(z),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(F){var z,Y,te,ae;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))z=0,Y=0,te=0,ae=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(le!==null)z=parseInt(le[1]),Y=parseInt(le[2]),te=parseInt(le[3]),ae=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)z=parseInt(le[1]),Y=parseInt(le[2]),te=parseInt(le[3]),ae=parseFloat(le[4]);else{if(ae=1,typeof F=="string"&&F.charAt(0)!=="#"){var ie=new Tse(F);F=ie.ok?ie.toHex():"#000000"}F.length===4?(z=F.substring(1,2),z+=z,Y=F.substring(2,3),Y+=Y,te=F.substring(3,4),te+=te):(z=F.substring(1,3),Y=F.substring(3,5),te=F.substring(5,7)),z=parseInt(z,16),Y=parseInt(Y,16),te=parseInt(te,16)}}return{r:z,g:Y,b:te,a:ae,style:F}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(F,z,Y,te){if(isNaN(z)||isNaN(Y)||typeof F!="string")throw _a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!p.call(this)){var ae=V(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;D.call(this,{text:F,x:z,y:Y,scale:le,angle:ae,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(F,z,Y,te){if(isNaN(z)||isNaN(Y)||typeof F!="string")throw _a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){te=isNaN(te)?void 0:te;var ae=V(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;D.call(this,{text:F,x:z,y:Y,scale:le,renderingMode:"stroke",angle:ae,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(F){if(typeof F!="string")throw _a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var z=this.pdf,Y=this.pdf.internal.scaleFactor,te=z.internal.getFontSize(),ae=z.getStringUnitWidth(F)*te/z.internal.scaleFactor,le=function(ie){var ce=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new le({width:ae*=Math.round(96*Y/72*1e4)/1e4})},f.prototype.scale=function(F,z){if(isNaN(F)||isNaN(z))throw _a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Y=new c(F,0,0,z,0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.rotate=function(F){if(isNaN(F))throw _a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var z=new c(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(z)},f.prototype.translate=function(F,z){if(isNaN(F)||isNaN(z))throw _a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Y=new c(1,0,0,1,F,z);this.ctx.transform=this.ctx.transform.multiply(Y)},f.prototype.transform=function(F,z,Y,te,ae,le){if(isNaN(F)||isNaN(z)||isNaN(Y)||isNaN(te)||isNaN(ae)||isNaN(le))throw _a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ie=new c(F,z,Y,te,ae,le);this.ctx.transform=this.ctx.transform.multiply(ie)},f.prototype.setTransform=function(F,z,Y,te,ae,le){F=isNaN(F)?1:F,z=isNaN(z)?0:z,Y=isNaN(Y)?0:Y,te=isNaN(te)?1:te,ae=isNaN(ae)?0:ae,le=isNaN(le)?0:le,this.ctx.transform=new c(F,z,Y,te,ae,le)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(F,z,Y,te,ae,le,ie,ce,pe){var Be=this.pdf.getImageProperties(F),ne=1,_e=1,De=1,Se=1;te!==void 0&&ce!==void 0&&(De=ce/te,Se=pe/ae,ne=Be.width/te*ce/te,_e=Be.height/ae*pe/ae),le===void 0&&(le=z,ie=Y,z=0,Y=0),te!==void 0&&ce===void 0&&(ce=te,pe=ae),te===void 0&&ce===void 0&&(ce=Be.width,pe=Be.height);for(var fe,Ie=this.ctx.transform.decompose(),Ue=V(Ie.rotate.shx),Ye=new c,ye=(Ye=(Ye=(Ye=Ye.multiply(Ie.translate)).multiply(Ie.skew)).multiply(Ie.scale)).applyToRectangle(new o(le-z*De,ie-Y*Se,te*ne,ae*_e)),Oe=b.call(this,ye),Re=[],qe=0;qe<Oe.length;qe+=1)Re.indexOf(Oe[qe])===-1&&Re.push(Oe[qe]);if(_(Re),this.autoPaging)for(var Ze=Re[0],ct=Re[Re.length-1],pt=Ze;pt<ct+1;pt++){this.pdf.setPage(pt);var It=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=pt===1?this.posY+this.margin[0]:this.margin[0],Pt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yt=pt===1?0:Pt+(pt-2)*Qt;if(this.ctx.clip_path.length!==0){var Br=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(fe,this.posX+this.margin[3],-yt+Mt+this.ctx.prevPageLastElemOffset),k.call(this,"fill",!0),this.path=Br}var tr=JSON.parse(JSON.stringify(ye));tr=w([tr],this.posX+this.margin[3],-yt+Mt+this.ctx.prevPageLastElemOffset)[0];var nn=(pt>Ze||pt<ct)&&x.call(this);nn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,Qt,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",tr.x,tr.y,tr.w,tr.h,null,null,Ue),nn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",ye.x,ye.y,ye.w,ye.h,null,null,Ue)};var b=function(F,z,Y){var te=[];z=z||this.pdf.internal.pageSize.width,Y=Y||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ae=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":te.push(Math.floor((F.y+ae)/Y)+1);break;case"arc":te.push(Math.floor((F.y+ae-F.radius)/Y)+1),te.push(Math.floor((F.y+ae+F.radius)/Y)+1);break;case"qct":var le=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);te.push(Math.floor((le.y+ae)/Y)+1),te.push(Math.floor((le.y+le.h+ae)/Y)+1);break;case"bct":var ie=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);te.push(Math.floor((ie.y+ae)/Y)+1),te.push(Math.floor((ie.y+ie.h+ae)/Y)+1);break;case"rect":te.push(Math.floor((F.y+ae)/Y)+1),te.push(Math.floor((F.y+F.h+ae)/Y)+1)}for(var ce=0;ce<te.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<te[ce];)y.call(this);return te},y=function(){var F=this.fillStyle,z=this.strokeStyle,Y=this.font,te=this.lineCap,ae=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=z,this.font=Y,this.lineCap=te,this.lineWidth=ae,this.lineJoin=le},w=function(F,z,Y){for(var te=0;te<F.length;te++)switch(F[te].type){case"bct":F[te].x2+=z,F[te].y2+=Y;case"qct":F[te].x1+=z,F[te].y1+=Y;case"mt":case"lt":case"arc":default:F[te].x+=z,F[te].y+=Y}return F},_=function(F){return F.sort(function(z,Y){return z-Y})},j=function(F,z){for(var Y,te,ae=this.fillStyle,le=this.strokeStyle,ie=this.lineCap,ce=this.lineWidth,pe=Math.abs(ce*this.ctx.transform.scaleX),Be=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),_e=JSON.parse(JSON.stringify(this.path)),De=[],Se=0;Se<_e.length;Se++)if(_e[Se].x!==void 0)for(var fe=b.call(this,_e[Se]),Ie=0;Ie<fe.length;Ie+=1)De.indexOf(fe[Ie])===-1&&De.push(fe[Ie]);for(var Ue=0;Ue<De.length;Ue++)for(;this.pdf.internal.getNumberOfPages()<De[Ue];)y.call(this);if(_(De),this.autoPaging)for(var Ye=De[0],ye=De[De.length-1],Oe=Ye;Oe<ye+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=ae,this.strokeStyle=le,this.lineCap=ie,this.lineWidth=pe,this.lineJoin=Be;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=Oe===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=Oe===1?0:Ze+(Oe-2)*ct;if(this.ctx.clip_path.length!==0){var It=this.path;Y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(Y,this.posX+this.margin[3],-pt+qe+this.ctx.prevPageLastElemOffset),k.call(this,F,!0),this.path=It}if(te=JSON.parse(JSON.stringify(ne)),this.path=w(te,this.posX+this.margin[3],-pt+qe+this.ctx.prevPageLastElemOffset),z===!1||Oe===0){var Mt=(Oe>Ye||Oe<ye)&&x.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,ct,null).clip().discardPath()),k.call(this,F,z),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=pe,k.call(this,F,z),this.lineWidth=ce;this.path=ne},k=function(F,z){if((F!=="stroke"||z||!g.call(this))&&(F==="stroke"||z||!p.call(this))){for(var Y,te,ae=[],le=this.path,ie=0;ie<le.length;ie++){var ce=le[ie];switch(ce.type){case"begin":ae.push({begin:!0});break;case"close":ae.push({close:!0});break;case"mt":ae.push({start:ce,deltas:[],abs:[]});break;case"lt":var pe=ae.length;if(le[ie-1]&&!isNaN(le[ie-1].x)&&(Y=[ce.x-le[ie-1].x,ce.y-le[ie-1].y],pe>0)){for(;pe>=0;pe--)if(ae[pe-1].close!==!0&&ae[pe-1].begin!==!0){ae[pe-1].deltas.push(Y),ae[pe-1].abs.push(ce);break}}break;case"bct":Y=[ce.x1-le[ie-1].x,ce.y1-le[ie-1].y,ce.x2-le[ie-1].x,ce.y2-le[ie-1].y,ce.x-le[ie-1].x,ce.y-le[ie-1].y],ae[ae.length-1].deltas.push(Y);break;case"qct":var Be=le[ie-1].x+2/3*(ce.x1-le[ie-1].x),ne=le[ie-1].y+2/3*(ce.y1-le[ie-1].y),_e=ce.x+2/3*(ce.x1-ce.x),De=ce.y+2/3*(ce.y1-ce.y),Se=ce.x,fe=ce.y;Y=[Be-le[ie-1].x,ne-le[ie-1].y,_e-le[ie-1].x,De-le[ie-1].y,Se-le[ie-1].x,fe-le[ie-1].y],ae[ae.length-1].deltas.push(Y);break;case"arc":ae.push({deltas:[],abs:[],arc:!0}),Array.isArray(ae[ae.length-1].abs)&&ae[ae.length-1].abs.push(ce)}}te=z?null:F==="stroke"?"stroke":"fill";for(var Ie=!1,Ue=0;Ue<ae.length;Ue++)if(ae[Ue].arc)for(var Ye=ae[Ue].abs,ye=0;ye<Ye.length;ye++){var Oe=Ye[ye];Oe.type==="arc"?N.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,z,!Ie):L.call(this,Oe.x,Oe.y),Ie=!0}else if(ae[Ue].close===!0)this.pdf.internal.out("h"),Ie=!1;else if(ae[Ue].begin!==!0){var Re=ae[Ue].start.x,qe=ae[Ue].start.y;M.call(this,ae[Ue].deltas,Re,qe),Ie=!0}te&&B.call(this,te),z&&R.call(this)}},I=function(F){var z=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Y=z*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-Y;case"top":return F+z-Y;case"hanging":return F+z-2*Y;case"middle":return F+z/2-Y;case"ideographic":return F;case"alphabetic":default:return F}},E=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(z,Y){this.colorStops.push([z,Y])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(F,z,Y,te,ae,le,ie,ce,pe){for(var Be=H.call(this,Y,te,ae,le),ne=0;ne<Be.length;ne++){var _e=Be[ne];ne===0&&(pe?P.call(this,_e.x1+F,_e.y1+z):L.call(this,_e.x1+F,_e.y1+z)),J.call(this,F,z,_e.x2,_e.y2,_e.x3,_e.y3,_e.x4,_e.y4)}ce?R.call(this):B.call(this,ie)},B=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},R=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(F,z){this.pdf.internal.out(r(F)+" "+n(z)+" m")},D=function(F){var z;switch(F.align){case"right":case"end":z="right";break;case"center":z="center";break;case"left":case"start":default:z="left"}var Y=this.pdf.getTextDimensions(F.text),te=I.call(this,F.y),ae=E.call(this,te)-Y.h,le=this.ctx.transform.applyToPoint(new i(F.x,te)),ie=this.ctx.transform.decompose(),ce=new c;ce=(ce=(ce=ce.multiply(ie.translate)).multiply(ie.skew)).multiply(ie.scale);for(var pe,Be,ne,_e=this.ctx.transform.applyToRectangle(new o(F.x,te,Y.w,Y.h)),De=ce.applyToRectangle(new o(F.x,ae,Y.w,Y.h)),Se=b.call(this,De),fe=[],Ie=0;Ie<Se.length;Ie+=1)fe.indexOf(Se[Ie])===-1&&fe.push(Se[Ie]);if(_(fe),this.autoPaging)for(var Ue=fe[0],Ye=fe[fe.length-1],ye=Ue;ye<Ye+1;ye++){this.pdf.setPage(ye);var Oe=ye===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],Ze=qe-this.margin[0],ct=this.pdf.internal.pageSize.width-this.margin[1],pt=ct-this.margin[3],It=ye===1?0:Re+(ye-2)*Ze;if(this.ctx.clip_path.length!==0){var Mt=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=w(pe,this.posX+this.margin[3],-1*It+Oe),k.call(this,"fill",!0),this.path=Mt}var Pt=w([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-It+Oe+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*F.scale),ne=this.lineWidth,this.lineWidth=ne*F.scale);var Qt=this.autoPaging!=="text";if(Qt||Pt.y+Pt.h<=qe){if(Qt||Pt.y>=Oe&&Pt.x<=ct){var yt=Qt?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||ct-Pt.x)[0],Br=w([JSON.parse(JSON.stringify(_e))],this.posX+this.margin[3],-It+Oe+this.ctx.prevPageLastElemOffset)[0],tr=Qt&&(ye>Ue||ye<Ye)&&x.call(this);tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,Ze,null).clip().discardPath()),this.pdf.text(yt,Br.x,Br.y,{angle:F.angle,align:z,renderingMode:F.renderingMode}),tr&&this.pdf.restoreGraphicsState()}}else Pt.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-Pt.y);F.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=ne)}else F.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*F.scale),ne=this.lineWidth,this.lineWidth=ne*F.scale),this.pdf.text(F.text,le.x+this.posX,le.y+this.posY,{angle:F.angle,align:z,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=ne)},L=function(F,z,Y,te){Y=Y||0,te=te||0,this.pdf.internal.out(r(F+Y)+" "+n(z+te)+" l")},M=function(F,z,Y){return this.pdf.lines(F,z,Y,null,null)},J=function(F,z,Y,te,ae,le,ie,ce){this.pdf.internal.out([t(a(Y+F)),t(s(te+z)),t(a(ae+F)),t(s(le+z)),t(a(ie+F)),t(s(ce+z)),"c"].join(" "))},H=function(F,z,Y,te){for(var ae=2*Math.PI,le=Math.PI/2;z>Y;)z-=ae;var ie=Math.abs(Y-z);ie<ae&&te&&(ie=ae-ie);for(var ce=[],pe=te?-1:1,Be=z;ie>1e-5;){var ne=Be+pe*Math.min(ie,le);ce.push(K.call(this,F,Be,ne)),ie-=Math.abs(ne-Be),Be=ne}return ce},K=function(F,z,Y){var te=(Y-z)/2,ae=F*Math.cos(te),le=F*Math.sin(te),ie=ae,ce=-le,pe=ie*ie+ce*ce,Be=pe+ie*ae+ce*le,ne=4/3*(Math.sqrt(2*pe*Be)-Be)/(ie*le-ce*ae),_e=ie-ne*ce,De=ce+ne*ie,Se=_e,fe=-De,Ie=te+z,Ue=Math.cos(Ie),Ye=Math.sin(Ie);return{x1:F*Math.cos(z),y1:F*Math.sin(z),x2:_e*Ue-De*Ye,y2:_e*Ye+De*Ue,x3:Se*Ue-fe*Ye,y3:Se*Ye+fe*Ue,x4:F*Math.cos(Y),y4:F*Math.sin(Y)}},V=function(F){return 180*F/Math.PI},G=function(F,z,Y,te,ae,le){var ie=F+.5*(Y-F),ce=z+.5*(te-z),pe=ae+.5*(Y-ae),Be=le+.5*(te-le),ne=Math.min(F,ae,ie,pe),_e=Math.max(F,ae,ie,pe),De=Math.min(z,le,ce,Be),Se=Math.max(z,le,ce,Be);return new o(ne,De,_e-ne,Se-De)},X=function(F,z,Y,te,ae,le,ie,ce){var pe,Be,ne,_e,De,Se,fe,Ie,Ue,Ye,ye,Oe,Re,qe,Ze=Y-F,ct=te-z,pt=ae-Y,It=le-te,Mt=ie-ae,Pt=ce-le;for(Be=0;Be<41;Be++)Ue=(fe=(ne=F+(pe=Be/40)*Ze)+pe*((De=Y+pe*pt)-ne))+pe*(De+pe*(ae+pe*Mt-De)-fe),Ye=(Ie=(_e=z+pe*ct)+pe*((Se=te+pe*It)-_e))+pe*(Se+pe*(le+pe*Pt-Se)-Ie),Be==0?(ye=Ue,Oe=Ye,Re=Ue,qe=Ye):(ye=Math.min(ye,Ue),Oe=Math.min(Oe,Ye),Re=Math.max(Re,Ue),qe=Math.max(qe,Ye));return new o(Math.round(ye),Math.round(Oe),Math.round(Re-ye),Math.round(qe-Oe))},ee=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,z,Y=(F=this.ctx.lineDash,z=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:z}));this.prevLineDash!==Y&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Y)}}})(vr.API),function(e){var t=function(s){var i,o,c,u,d,f,h,p,g,x;for(o=[],c=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(x=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)-(h=d%85))/85)%85,o.push(f+33,h+33,p+33,g+33,x+33)):o.push(122);return function(b,y){for(var w=y;w>0;w--)b.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,c,u,d,f=String,h="length",p=255,g="charCodeAt",x="slice",b="replace";for(s[x](-2),s=s[x](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],u=0,d=(s+=i="uuuuu"[x](s[h]%5||5))[h];d>u;u+=5)o=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(y,w){for(var _=w;_>0;_--)y.pop()}(c,i[h]),f.fromCharCode.apply(f,c)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=MF(i)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var o=0,c=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(vr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,h=0,p=function(g){var x=g.length,b=[],y=String.fromCharCode;for(h=0;h<x;h+=1)b.push(y(255&g.charCodeAt(h)));return b.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(p(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(a,s,i)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(vr.API),function(e){function t(){return(Mr.html2canvas?Promise.resolve(Mr.html2canvas):u1(()=>Promise.resolve().then(()=>dft),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Mr.DOMPurify?Promise.resolve(Mr.DOMPurify):u1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=ma(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var c=document.createElement(i);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function i(o){var c=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:i,dompurify:c})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],g=p.src.find(function(x){return x.format==="truetype"});g&&c.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=i[c]};switch(c){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[c]=i[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var c=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(c):c})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(i=i||vr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,c,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,c,u){return this.setProgress(i?this.progress.val+i:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var c=this;return this.thenCore(i,o,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(i,o,c){c=c||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,vr.getPageSize=function(i,o,c){if(ma(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",i=(""+(i||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,g=0,x=0;if(h.hasOwnProperty(f))g=h[f][1]/d,x=h[f][0]/d;else try{g=c[1],x=c[0]}catch{throw new Error("Invalid format: "+c)}if(i==="p"||i==="portrait")i="p",x>g&&(p=x,x=g,g=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>x&&(p=x,x=g,g=p)}return{width:x,height:g,unit:o,k:d,orientation:i}},e.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map($F):null;var c=new s(o);return o.worker?c:c.from(i).doCallback()}}(vr.API),vr.API.addJS=function(e){return FG=e,this.internal.events.subscribe("postPutResources",function(){$C=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($C+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),IG=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+FG+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){$C!==void 0&&IG!==void 0&&this.internal.out("/Names <</JavaScript "+$C+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(vr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,p=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,x={width:0,height:0,numcomponents:1},b=4;b<g;b+=2){if(b+=p,t.indexOf(f.charCodeAt(b+1))!==-1){h=256*f.charCodeAt(b+5)+f.charCodeAt(b+6),x={width:256*f.charCodeAt(b+7)+f.charCodeAt(b+8),height:h,numcomponents:f.charCodeAt(b+9)};break}p=256*f.charCodeAt(b+2)+f.charCodeAt(b+3)}return x}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(vr.API);var Cx,GC,OG,DG,PG,J8e=function(){var e,t,r;function n(s){var i,o,c,u,d,f,h,p,g,x,b,y,w,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),g=(function(){var j,k;for(k=[],j=0;j<4;++j)k.push(String.fromCharCode(this.data[this.pos++]));return k}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((x=c-this.transparency.indexed.length)>0)for(w=0;0<=x?w<x:w>x;0<=x?++w:--w)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(b=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,b.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,p,g){var x,b,y,w,_,j,k,I,E,N,B,R,P,D,L,M,J,H,K,V,G,X=Math.ceil((u.width-f)/p),ee=Math.ceil((u.height-h)/g),F=u.width==X&&u.height==ee;for(D=i*X,R=F?o:new Uint8Array(D*ee),j=s.length,P=0,b=0;P<ee&&c<j;){switch(s[c++]){case 0:for(w=J=0;J<D;w=J+=1)R[b++]=s[c++];break;case 1:for(w=H=0;H<D;w=H+=1)x=s[c++],_=w<i?0:R[b-i],R[b++]=(x+_)%256;break;case 2:for(w=K=0;K<D;w=K+=1)x=s[c++],y=(w-w%i)/i,L=P&&R[(P-1)*D+y*i+w%i],R[b++]=(L+x)%256;break;case 3:for(w=V=0;V<D;w=V+=1)x=s[c++],y=(w-w%i)/i,_=w<i?0:R[b-i],L=P&&R[(P-1)*D+y*i+w%i],R[b++]=(x+Math.floor((_+L)/2))%256;break;case 4:for(w=G=0;G<D;w=G+=1)x=s[c++],y=(w-w%i)/i,_=w<i?0:R[b-i],P===0?L=M=0:(L=R[(P-1)*D+y*i+w%i],M=y&&R[(P-1)*D+(y-1)*i+w%i]),k=_+L-M,I=Math.abs(k-_),N=Math.abs(k-L),B=Math.abs(k-M),E=I<=N&&I<=B?_:N<=B?L:M,R[b++]=(x+E)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!F){var z=((h+P*g)*u.width+f)*i,Y=P*D;for(w=0;w<X;w+=1){for(var te=0;te<i;te+=1)o[z++]=R[Y++];z+=(p-1)*i}}P++}}return s=T8e(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,c,u,d,f,h,p;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),c=0,s=0,i=f=0,h=o.length;f<h;i=f+=3)u[c++]=o[i],u[c++]=o[i+1],u[c++]=o[i+2],u[c++]=(p=d[s++])!=null?p:255;return u},n.prototype.copyToImageData=function(s,i){var o,c,u,d,f,h,p,g,x,b,y;if(c=this.colors,x=null,o=this.hasAlphaChannel,this.palette.length&&(x=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,o=!0),g=(u=s.data||s).length,f=x||i,d=h=0,c===1)for(;d<g;)p=x?4*i[d/4]:h,b=f[p++],u[d++]=b,u[d++]=b,u[d++]=b,u[d++]=o?f[p++]:255,h=p;else for(;d<g;)p=x?4*i[d/4]:h,u[d++]=f[p++],u[d++]=f[p++],u[d++]=f[p++],u[d++]=o?f[p++]:255,h=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Mr)==="[object Window]"){try{t=Mr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,c,u,d,f,h,p;if(this.animation){for(p=[],o=d=0,f=(h=this.animation.frames).length;d<f;o=++d)i=h[o],c=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(c,u),i.imageData=c,p.push(i.image=e(c));return p}},n.prototype.renderFrame=function(s,i){var o,c,u;return o=(c=this.animation.frames)[i],u=c[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,c,u,d,f,h=this;return o=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(i=function(){var p,g;if(p=o++%u,g=c[p],h.renderFrame(s,p),u>1&&o/u<d)return h.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Z8e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var o=null,c=null;s&&(o=t,c=i,t+=3*i);var u=!0,d=[],f=0,h=null,p=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var x=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&x)==0&&(h=null),p=x>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,j=e[t++],k=j>>6&1,I=1<<(7&j)+1,E=o,N=c,B=!1;j>>7&&(B=!0,E=t,N=I,t+=3*I);var R=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}d.push({x:b,y,width:w,height:_,has_local_palette:B,palette_offset:E,palette_size:N,data_offset:R,data_length:t-R,transparent_index:h,interlaced:!!k,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(D){if(D<0||D>=d.length)throw new Error("Frame index out of range.");return d[D]},this.decodeAndBlitFrameBGRA=function(D,L){var M=this.frameInfo(D),J=M.width*M.height,H=new Uint8Array(J);RG(e,M.data_offset,H,J);var K=M.palette_offset,V=M.transparent_index;V===null&&(V=256);var G=M.width,X=r-G,ee=G,F=4*(M.y*r+M.x),z=4*((M.y+M.height)*r+M.x),Y=F,te=4*X;M.interlaced===!0&&(te+=4*r*7);for(var ae=8,le=0,ie=H.length;le<ie;++le){var ce=H[le];if(ee===0&&(ee=G,(Y+=te)>=z&&(te=4*X+4*r*(ae-1),Y=F+(G+X)*(ae<<1),ae>>=1)),ce===V)Y+=4;else{var pe=e[K+3*ce],Be=e[K+3*ce+1],ne=e[K+3*ce+2];L[Y++]=ne,L[Y++]=Be,L[Y++]=pe,L[Y++]=255}--ee}},this.decodeAndBlitFrameRGBA=function(D,L){var M=this.frameInfo(D),J=M.width*M.height,H=new Uint8Array(J);RG(e,M.data_offset,H,J);var K=M.palette_offset,V=M.transparent_index;V===null&&(V=256);var G=M.width,X=r-G,ee=G,F=4*(M.y*r+M.x),z=4*((M.y+M.height)*r+M.x),Y=F,te=4*X;M.interlaced===!0&&(te+=4*r*7);for(var ae=8,le=0,ie=H.length;le<ie;++le){var ce=H[le];if(ee===0&&(ee=G,(Y+=te)>=z&&(te=4*X+4*r*(ae-1),Y=F+(G+X)*(ae<<1),ae>>=1)),ce===V)Y+=4;else{var pe=e[K+3*ce],Be=e[K+3*ce+1],ne=e[K+3*ce+2];L[Y++]=pe,L[Y++]=Be,L[Y++]=ne,L[Y++]=255}--ee}}}function RG(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,p=e[t++],g=new Int32Array(4096),x=null;;){for(;d<16&&p!==0;)f|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<c)break;var b=f&u;if(f>>=c,d-=c,b!==s){if(b===i)break;for(var y=b<o?b:x,w=0,_=y;_>s;)_=g[_]>>8,++w;var j=_;if(h+w+(y!==b?1:0)>n)return void _a.log("Warning, gif stream longer than expected.");r[h++]=j;var k=h+=w;for(y!==b&&(r[h++]=j),_=y;w--;)_=g[_],r[--k]=255&_,_>>=8;x!==null&&o<4096&&(g[o++]=x<<8|j,o>=u+1&&c<12&&(++c,u=u<<1|1)),x=b}else o=i+1,u=(1<<(c=a+1))-1,x=null}return h!==n&&_a.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function M3(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),p=new Array(64),g=new Array(64),x=[],b=0,y=7,w=new Array(64),_=new Array(64),j=new Array(64),k=new Array(256),I=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],D=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(F,z){for(var Y=0,te=0,ae=new Array,le=1;le<=16;le++){for(var ie=1;ie<=F[le];ie++)ae[z[te]]=[],ae[z[te]][0]=Y,ae[z[te]][1]=le,te++,Y++;Y*=2}return ae}function K(F){for(var z=F[0],Y=F[1]-1;Y>=0;)z&1<<Y&&(b|=1<<y),Y--,--y<0&&(b==255?(V(255),V(0)):V(b),y=7,b=0)}function V(F){x.push(F)}function G(F){V(F>>8&255),V(255&F)}function X(F,z,Y,te,ae){for(var le,ie=ae[0],ce=ae[240],pe=function(Ye,ye){var Oe,Re,qe,Ze,ct,pt,It,Mt,Pt,Qt,yt=0;for(Pt=0;Pt<8;++Pt){Oe=Ye[yt],Re=Ye[yt+1],qe=Ye[yt+2],Ze=Ye[yt+3],ct=Ye[yt+4],pt=Ye[yt+5],It=Ye[yt+6];var Br=Oe+(Mt=Ye[yt+7]),tr=Oe-Mt,nn=Re+It,Nr=Re-It,Vr=qe+pt,In=qe-pt,Or=Ze+ct,fs=Ze-ct,fn=Br+Or,oa=Br-Or,Ba=nn+Vr,tn=nn-Vr;Ye[yt]=fn+Ba,Ye[yt+4]=fn-Ba;var pr=.707106781*(tn+oa);Ye[yt+2]=oa+pr,Ye[yt+6]=oa-pr;var et=.382683433*((fn=fs+In)-(tn=Nr+tr)),gt=.5411961*fn+et,Je=1.306562965*tn+et,xt=.707106781*(Ba=In+Nr),wt=tr+xt,bt=tr-xt;Ye[yt+5]=bt+gt,Ye[yt+3]=bt-gt,Ye[yt+1]=wt+Je,Ye[yt+7]=wt-Je,yt+=8}for(yt=0,Pt=0;Pt<8;++Pt){Oe=Ye[yt],Re=Ye[yt+8],qe=Ye[yt+16],Ze=Ye[yt+24],ct=Ye[yt+32],pt=Ye[yt+40],It=Ye[yt+48];var nr=Oe+(Mt=Ye[yt+56]),gr=Oe-Mt,Kr=Re+It,Jr=Re-It,Gr=qe+pt,he=qe-pt,Te=Ze+ct,Ce=Ze-ct,we=nr+Te,Ne=nr-Te,je=Kr+Gr,Xe=Kr-Gr;Ye[yt]=we+je,Ye[yt+32]=we-je;var dt=.707106781*(Xe+Ne);Ye[yt+16]=Ne+dt,Ye[yt+48]=Ne-dt;var $e=.382683433*((we=Ce+he)-(Xe=Jr+gr)),rt=.5411961*we+$e,it=1.306562965*Xe+$e,Ft=.707106781*(je=he+Jr),Vt=gr+Ft,Yt=gr-Ft;Ye[yt+40]=Yt+rt,Ye[yt+24]=Yt-rt,Ye[yt+8]=Vt+it,Ye[yt+56]=Vt-it,yt++}for(Pt=0;Pt<64;++Pt)Qt=Ye[Pt]*ye[Pt],p[Pt]=Qt>0?Qt+.5|0:Qt-.5|0;return p}(F,z),Be=0;Be<64;++Be)g[E[Be]]=pe[Be];var ne=g[0]-Y;Y=g[0],ne==0?K(te[0]):(K(te[h[le=32767+ne]]),K(f[le]));for(var _e=63;_e>0&&g[_e]==0;)_e--;if(_e==0)return K(ie),Y;for(var De,Se=1;Se<=_e;){for(var fe=Se;g[Se]==0&&Se<=_e;)++Se;var Ie=Se-fe;if(Ie>=16){De=Ie>>4;for(var Ue=1;Ue<=De;++Ue)K(ce);Ie&=15}le=32767+g[Se],K(ae[(Ie<<4)+h[le]]),K(f[le]),Se++}return _e!=63&&K(ie),Y}function ee(F){F=Math.min(Math.max(F,1),100),s!=F&&(function(z){for(var Y=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ae=i((Y[te]*z+50)/100);ae=Math.min(Math.max(ae,1),255),o[E[te]]=ae}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ie=0;ie<64;ie++){var ce=i((le[ie]*z+50)/100);ce=Math.min(Math.max(ce,1),255),c[E[ie]]=ce}for(var pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,ne=0;ne<8;ne++)for(var _e=0;_e<8;_e++)u[Be]=1/(o[E[Be]]*pe[ne]*pe[_e]*8),d[Be]=1/(c[E[Be]]*pe[ne]*pe[_e]*8),Be++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),s=F)}this.encode=function(F,z){z&&ee(z),x=new Array,b=0,y=7,G(65496),G(65504),G(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),G(1),G(1),V(0),V(0),function(){G(65499),G(132),V(0);for(var Re=0;Re<64;Re++)V(o[Re]);V(1);for(var qe=0;qe<64;qe++)V(c[qe])}(),function(Re,qe){G(65472),G(17),V(8),G(qe),G(Re),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(F.width,F.height),function(){G(65476),G(418),V(0);for(var Re=0;Re<16;Re++)V(N[Re+1]);for(var qe=0;qe<=11;qe++)V(B[qe]);V(16);for(var Ze=0;Ze<16;Ze++)V(R[Ze+1]);for(var ct=0;ct<=161;ct++)V(P[ct]);V(1);for(var pt=0;pt<16;pt++)V(D[pt+1]);for(var It=0;It<=11;It++)V(L[It]);V(17);for(var Mt=0;Mt<16;Mt++)V(M[Mt+1]);for(var Pt=0;Pt<=161;Pt++)V(J[Pt])}(),G(65498),G(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var Y=0,te=0,ae=0;b=0,y=7,this.encode.displayName="_encode_";for(var le,ie,ce,pe,Be,ne,_e,De,Se,fe=F.data,Ie=F.width,Ue=F.height,Ye=4*Ie,ye=0;ye<Ue;){for(le=0;le<Ye;){for(Be=Ye*ye+le,_e=-1,De=0,Se=0;Se<64;Se++)ne=Be+(De=Se>>3)*Ye+(_e=4*(7&Se)),ye+De>=Ue&&(ne-=Ye*(ye+1+De-Ue)),le+_e>=Ye&&(ne-=le+_e-Ye+4),ie=fe[ne++],ce=fe[ne++],pe=fe[ne++],w[Se]=(I[ie]+I[ce+256>>0]+I[pe+512>>0]>>16)-128,_[Se]=(I[ie+768>>0]+I[ce+1024>>0]+I[pe+1280>>0]>>16)-128,j[Se]=(I[ie+1280>>0]+I[ce+1536>>0]+I[pe+1792>>0]>>16)-128;Y=X(w,u,Y,t,n),te=X(_,d,te,r,a),ae=X(j,d,ae,r,a),le+=32}ye+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,K(Oe)}return G(65497),new Uint8Array(x)},e=e||50,function(){for(var F=String.fromCharCode,z=0;z<256;z++)k[z]=F(z)}(),t=H(N,B),r=H(D,L),n=H(R,P),a=H(M,J),function(){for(var F=1,z=2,Y=1;Y<=15;Y++){for(var te=F;te<z;te++)h[32767+te]=Y,f[32767+te]=[],f[32767+te][1]=Y,f[32767+te][0]=te;for(var ae=-(z-1);ae<=-F;ae++)h[32767+ae]=Y,f[32767+ae]=[],f[32767+ae][1]=Y,f[32767+ae][0]=z-1+ae;F<<=1,z<<=1}}(),function(){for(var F=0;F<256;F++)I[F]=19595*F,I[F+256>>0]=38470*F,I[F+512>>0]=7471*F+32768,I[F+768>>0]=-11059*F,I[F+1024>>0]=-21709*F,I[F+1280>>0]=32768*F+8421375,I[F+1536>>0]=-27439*F,I[F+1792>>0]=-5329*F}(),ee(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function gd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function LG(e){function t(N){if(!N)throw Error("assert :P")}function r(N,B,R){for(var P=0;4>P;P++)if(N[B+P]!=R.charCodeAt(P))return!0;return!1}function n(N,B,R,P,D){for(var L=0;L<D;L++)N[B+L]=R[P+L]}function a(N,B,R,P){for(var D=0;D<P;D++)N[B+D]=R}function s(N){return new Int32Array(N)}function i(N,B){for(var R=[],P=0;P<N;P++)R.push(new B);return R}function o(N,B){var R=[];return function P(D,L,M){for(var J=M[L],H=0;H<J&&(D.push(M.length>L+1?[]:new B),!(M.length<L+1));H++)P(D[H],L+1,M)}(R,0,N),R}var c=function(){var N=this;function B(T,Q){for(var Z=1<<Q-1>>>0;T&Z;)Z>>>=1;return Z?(T&Z-1)+Z:T}function R(T,Q,Z,se,de){t(!(se%Z));do T[Q+(se-=Z)]=de;while(0<se)}function P(T,Q,Z,se,de){if(t(2328>=de),512>=de)var me=s(512);else if((me=s(de))==null)return 0;return function(ge,xe,Ee,ke,Me,st){var tt,Ke,Tt=xe,mt=1<<Ee,Qe=s(16),Ve=s(16);for(t(Me!=0),t(ke!=null),t(ge!=null),t(0<Ee),Ke=0;Ke<Me;++Ke){if(15<ke[Ke])return 0;++Qe[ke[Ke]]}if(Qe[0]==Me)return 0;for(Ve[1]=0,tt=1;15>tt;++tt){if(Qe[tt]>1<<tt)return 0;Ve[tt+1]=Ve[tt]+Qe[tt]}for(Ke=0;Ke<Me;++Ke)tt=ke[Ke],0<ke[Ke]&&(st[Ve[tt]++]=Ke);if(Ve[15]==1)return(ke=new D).g=0,ke.value=st[0],R(ge,Tt,1,mt,ke),mt;var _t,jt=-1,kt=mt-1,rr=0,Xt=1,xr=1,Zt=1<<Ee;for(Ke=0,tt=1,Me=2;tt<=Ee;++tt,Me<<=1){if(Xt+=xr<<=1,0>(xr-=Qe[tt]))return 0;for(;0<Qe[tt];--Qe[tt])(ke=new D).g=tt,ke.value=st[Ke++],R(ge,Tt+rr,Me,Zt,ke),rr=B(rr,tt)}for(tt=Ee+1,Me=2;15>=tt;++tt,Me<<=1){if(Xt+=xr<<=1,0>(xr-=Qe[tt]))return 0;for(;0<Qe[tt];--Qe[tt]){if(ke=new D,(rr&kt)!=jt){for(Tt+=Zt,_t=1<<(jt=tt)-Ee;15>jt&&!(0>=(_t-=Qe[jt]));)++jt,_t<<=1;mt+=Zt=1<<(_t=jt-Ee),ge[xe+(jt=rr&kt)].g=_t+Ee,ge[xe+jt].value=Tt-xe-jt}ke.g=tt-Ee,ke.value=st[Ke++],R(ge,Tt+(rr>>Ee),Me,Zt,ke),rr=B(rr,tt)}}return Xt!=2*Ve[15]-1?0:mt}(T,Q,Z,se,de,me)}function D(){this.value=this.g=0}function L(){this.value=this.g=0}function M(){this.G=i(5,D),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Is,L)}function J(T,Q,Z,se){t(T!=null),t(Q!=null),t(2147483648>se),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=Q,T.pa=Z,T.Jd=Q,T.Yc=Z+se,T.Zc=4<=se?Z+se-4+1:Z,le(T)}function H(T,Q){for(var Z=0;0<Q--;)Z|=ce(T,128)<<Q;return Z}function K(T,Q){var Z=H(T,Q);return ie(T)?-Z:Z}function V(T,Q,Z,se){var de,me=0;for(t(T!=null),t(Q!=null),t(4294967288>se),T.Sb=se,T.Ra=0,T.u=0,T.h=0,4<se&&(se=4),de=0;de<se;++de)me+=Q[Z+de]<<8*de;T.Ra=me,T.bb=se,T.oa=Q,T.pa=Z}function G(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<xf-8>>>0,++T.bb,T.u-=8;Y(T)&&(T.h=1,T.u=0)}function X(T,Q){if(t(0<=Q),!T.h&&Q<=gf){var Z=z(T)&eA[Q];return T.u+=Q,G(T),Z}return T.h=1,T.u=0}function ee(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function z(T){return T.Ra>>>(T.u&xf-1)>>>0}function Y(T){return t(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>xf}function te(T,Q){T.u=Q,T.h=Y(T)}function ae(T){T.u>=$h&&(t(T.u>=$h),G(T))}function le(T){t(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(t(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function ie(T){return H(T,1)}function ce(T,Q){var Z=T.Ca;0>T.b&&le(T);var se=T.b,de=Z*Q>>>8,me=(T.I>>>se>de)+0;for(me?(Z-=de,T.I-=de+1<<se>>>0):Z=de+1,se=Z,de=0;256<=se;)de+=8,se>>=8;return se=7^de+ko[se],T.b-=se,T.Ca=(Z<<se)-1,me}function pe(T,Q,Z){T[Q+0]=Z>>24&255,T[Q+1]=Z>>16&255,T[Q+2]=Z>>8&255,T[Q+3]=Z>>0&255}function Be(T,Q){return T[Q+0]<<0|T[Q+1]<<8}function ne(T,Q){return Be(T,Q)|T[Q+2]<<16}function _e(T,Q){return Be(T,Q)|Be(T,Q+2)<<16}function De(T,Q){var Z=1<<Q;return t(T!=null),t(0<Q),T.X=s(Z),T.X==null?0:(T.Mb=32-Q,T.Xa=Q,1)}function Se(T,Q){t(T!=null),t(Q!=null),t(T.Xa==Q.Xa),n(Q.X,0,T.X,0,1<<Q.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function Ie(T,Q,Z,se){t(Z!=null),t(se!=null);var de=Z[0],me=se[0];return de==0&&(de=(T*me+Q/2)/Q),me==0&&(me=(Q*de+T/2)/T),0>=de||0>=me?0:(Z[0]=de,se[0]=me,1)}function Ue(T,Q){return T+(1<<Q)-1>>>Q}function Ye(T,Q){return((4278255360&T)+(4278255360&Q)>>>0&4278255360)+((16711935&T)+(16711935&Q)>>>0&16711935)>>>0}function ye(T,Q){N[Q]=function(Z,se,de,me,ge,xe,Ee){var ke;for(ke=0;ke<ge;++ke){var Me=N[T](xe[Ee+ke-1],de,me+ke);xe[Ee+ke]=Ye(Z[se+ke],Me)}}}function Oe(){this.ud=this.hd=this.jd=0}function Re(T,Q){return((4278124286&(T^Q))>>>1)+(T&Q)>>>0}function qe(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function Ze(T,Q){return qe(T+(T-Q+.5>>1))}function ct(T,Q,Z){return Math.abs(Q-Z)-Math.abs(T-Z)}function pt(T,Q,Z,se,de,me,ge){for(se=me[ge-1],Z=0;Z<de;++Z)me[ge+Z]=se=Ye(T[Q+Z],se)}function It(T,Q,Z,se,de){var me;for(me=0;me<Z;++me){var ge=T[Q+me],xe=ge>>8&255,Ee=16711935&(Ee=(Ee=16711935&ge)+((xe<<16)+xe));se[de+me]=(4278255360&ge)+Ee>>>0}}function Mt(T,Q){Q.jd=T>>0&255,Q.hd=T>>8&255,Q.ud=T>>16&255}function Pt(T,Q,Z,se,de,me){var ge;for(ge=0;ge<se;++ge){var xe=Q[Z+ge],Ee=xe>>>8,ke=xe,Me=255&(Me=(Me=xe>>>16)+((T.jd<<24>>24)*(Ee<<24>>24)>>>5));ke=255&(ke=(ke=ke+((T.hd<<24>>24)*(Ee<<24>>24)>>>5))+((T.ud<<24>>24)*(Me<<24>>24)>>>5)),de[me+ge]=(4278255360&xe)+(Me<<16)+ke}}function Qt(T,Q,Z,se,de){N[Q]=function(me,ge,xe,Ee,ke,Me,st,tt,Ke){for(Ee=st;Ee<tt;++Ee)for(st=0;st<Ke;++st)ke[Me++]=de(xe[se(me[ge++])])},N[T]=function(me,ge,xe,Ee,ke,Me,st){var tt=8>>me.b,Ke=me.Ea,Tt=me.K[0],mt=me.w;if(8>tt)for(me=(1<<me.b)-1,mt=(1<<tt)-1;ge<xe;++ge){var Qe,Ve=0;for(Qe=0;Qe<Ke;++Qe)Qe&me||(Ve=se(Ee[ke++])),Me[st++]=de(Tt[Ve&mt]),Ve>>=tt}else N["VP8LMapColor"+Z](Ee,ke,Tt,mt,Me,st,ge,xe,Ke)}}function yt(T,Q,Z,se,de){for(Z=Q+Z;Q<Z;){var me=T[Q++];se[de++]=me>>16&255,se[de++]=me>>8&255,se[de++]=me>>0&255}}function Br(T,Q,Z,se,de){for(Z=Q+Z;Q<Z;){var me=T[Q++];se[de++]=me>>16&255,se[de++]=me>>8&255,se[de++]=me>>0&255,se[de++]=me>>24&255}}function tr(T,Q,Z,se,de){for(Z=Q+Z;Q<Z;){var me=(ge=T[Q++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;se[de++]=me,se[de++]=ge}}function nn(T,Q,Z,se,de){for(Z=Q+Z;Q<Z;){var me=(ge=T[Q++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;se[de++]=me,se[de++]=ge}}function Nr(T,Q,Z,se,de){for(Z=Q+Z;Q<Z;){var me=T[Q++];se[de++]=me>>0&255,se[de++]=me>>8&255,se[de++]=me>>16&255}}function Vr(T,Q,Z,se,de,me){if(me==0)for(Z=Q+Z;Q<Z;)pe(se,((me=T[Q++])[0]>>24|me[1]>>8&65280|me[2]<<8&16711680|me[3]<<24)>>>0),de+=32;else n(se,de,T,Q,Z)}function In(T,Q){N[Q][0]=N[T+"0"],N[Q][1]=N[T+"1"],N[Q][2]=N[T+"2"],N[Q][3]=N[T+"3"],N[Q][4]=N[T+"4"],N[Q][5]=N[T+"5"],N[Q][6]=N[T+"6"],N[Q][7]=N[T+"7"],N[Q][8]=N[T+"8"],N[Q][9]=N[T+"9"],N[Q][10]=N[T+"10"],N[Q][11]=N[T+"11"],N[Q][12]=N[T+"12"],N[Q][13]=N[T+"13"],N[Q][14]=N[T+"0"],N[Q][15]=N[T+"0"]}function Or(T){return T==qm||T==uA||T==ad||T==Wh}function fs(){this.eb=[],this.size=this.A=this.fb=0}function fn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function oa(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new fs,this.f.kb=new fn,this.sd=null}function Ba(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function tn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function pr(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function et(T,Q){var Z=T.T,se=Q.ba.f.RGBA,de=se.eb,me=se.fb+T.ka*se.A,ge=ri[Q.ba.S],xe=T.y,Ee=T.O,ke=T.f,Me=T.N,st=T.ea,tt=T.W,Ke=Q.cc,Tt=Q.dc,mt=Q.Mc,Qe=Q.Nc,Ve=T.ka,_t=T.ka+T.T,jt=T.U,kt=jt+1>>1;for(Ve==0?ge(xe,Ee,null,null,ke,Me,st,tt,ke,Me,st,tt,de,me,null,null,jt):(ge(Q.ec,Q.fc,xe,Ee,Ke,Tt,mt,Qe,ke,Me,st,tt,de,me-se.A,de,me,jt),++Z);Ve+2<_t;Ve+=2)Ke=ke,Tt=Me,mt=st,Qe=tt,Me+=T.Rc,tt+=T.Rc,me+=2*se.A,ge(xe,(Ee+=2*T.fa)-T.fa,xe,Ee,Ke,Tt,mt,Qe,ke,Me,st,tt,de,me-se.A,de,me,jt);return Ee+=T.fa,T.j+_t<T.o?(n(Q.ec,Q.fc,xe,Ee,jt),n(Q.cc,Q.dc,ke,Me,kt),n(Q.Mc,Q.Nc,st,tt,kt),Z--):1&_t||ge(xe,Ee,null,null,ke,Me,st,tt,ke,Me,st,tt,de,me+se.A,null,null,jt),Z}function gt(T,Q,Z){var se=T.F,de=[T.J];if(se!=null){var me=T.U,ge=Q.ba.S,xe=ge==Ef||ge==ad;Q=Q.ba.f.RGBA;var Ee=[0],ke=T.ka;Ee[0]=T.T,T.Kb&&(ke==0?--Ee[0]:(--ke,de[0]-=T.width),T.j+T.ka+T.T==T.o&&(Ee[0]=T.o-T.j-ke));var Me=Q.eb;ke=Q.fb+ke*Q.A,T=mn(se,de[0],T.width,me,Ee,Me,ke+(xe?0:3),Q.A),t(Z==Ee),T&&Or(ge)&&cl(Me,ke,xe,me,Ee,Q.A)}return 0}function Je(T){var Q=T.ma,Z=Q.ba.S,se=11>Z,de=Z==qh||Z==Km||Z==Ef||Z==nd||Z==12||Or(Z);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!Zd(Q.Oa,T,de?11:12))return 0;if(de&&Or(Z)&&Lt(),T.da)alert("todo:use_scaling");else{if(se){if(Q.Ib=pr,T.Kb){if(Z=T.U+1>>1,Q.memory=s(T.U+2*Z),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+T.U,Q.Mc=Q.cc,Q.Nc=Q.dc+Z,Q.Ib=et,Lt()}}else alert("todo:EmitYUV");de&&(Q.Jb=gt,se&&Ge())}if(se&&!xE){for(T=0;256>T;++T)nB[T]=89858*(T-128)+Os>>du,Ym[T]=-22014*(T-128)+Os,ob[T]=-45773*(T-128),Ds[T]=113618*(T-128)+Os>>du;for(T=fA;T<Xg;++T)Q=76283*(T-16)+Os>>du,Jm[T-fA]=Vn(Q,255),lb[T-fA]=Vn(Q+8>>4,15);xE=1}return 1}function xt(T){var Q=T.ma,Z=T.U,se=T.T;return t(!(1&T.ka)),0>=Z||0>=se?0:(Z=Q.Ib(T,Q),Q.Jb!=null&&Q.Jb(T,Q,Z),Q.Dc+=Z,1)}function wt(T){T.ma.memory=null}function bt(T,Q,Z,se){return X(T,8)!=47?0:(Q[0]=X(T,14)+1,Z[0]=X(T,14)+1,se[0]=X(T,1),X(T,3)!=0?0:!T.h)}function nr(T,Q){if(4>T)return T+1;var Z=T-2>>1;return(2+(1&T)<<Z)+X(Q,Z)+1}function gr(T,Q){return 120<Q?Q-120:1<=(Z=((Z=id[Q-1])>>4)*T+(8-(15&Z)))?Z:1;var Z}function Kr(T,Q,Z){var se=z(Z),de=T[Q+=255&se].g-8;return 0<de&&(te(Z,Z.u+8),se=z(Z),Q+=T[Q].value,Q+=se&(1<<de)-1),te(Z,Z.u+T[Q].g),T[Q].value}function Jr(T,Q,Z){return Z.g+=T.g,Z.value+=T.value<<Q>>>0,t(8>=Z.g),T.g}function Gr(T,Q,Z){var se=T.xc;return t((Q=se==0?0:T.vc[T.md*(Z>>se)+(Q>>se)])<T.Wb),T.Ya[Q]}function he(T,Q,Z,se){var de=T.ab,me=T.c*Q,ge=T.C;Q=ge+Q;var xe=Z,Ee=se;for(se=T.Ta,Z=T.Ua;0<de--;){var ke=T.gc[de],Me=ge,st=Q,tt=xe,Ke=Ee,Tt=(Ee=se,xe=Z,ke.Ea);switch(t(Me<st),t(st<=ke.nc),ke.hc){case 2:Vg(tt,Ke,(st-Me)*Tt,Ee,xe);break;case 0:var mt=Me,Qe=st,Ve=Ee,_t=xe,jt=(Zt=ke).Ea;mt==0&&(sb(tt,Ke,null,null,1,Ve,_t),pt(tt,Ke+1,0,0,jt-1,Ve,_t+1),Ke+=jt,_t+=jt,++mt);for(var kt=1<<Zt.b,rr=kt-1,Xt=Ue(jt,Zt.b),xr=Zt.K,Zt=Zt.w+(mt>>Zt.b)*Xt;mt<Qe;){var Dn=xr,zn=Zt,An=1;for($m(tt,Ke,Ve,_t-jt,1,Ve,_t);An<jt;){var on=(An&~rr)+kt;on>jt&&(on=jt),(0,ed[Dn[zn++]>>8&15])(tt,Ke+ +An,Ve,_t+An-jt,on-An,Ve,_t+An),An=on}Ke+=jt,_t+=jt,++mt&rr||(Zt+=Xt)}st!=ke.nc&&n(Ee,xe-Tt,Ee,xe+(st-Me-1)*Tt,Tt);break;case 1:for(Tt=tt,Qe=Ke,jt=(tt=ke.Ea)-(_t=tt&~(Ve=(Ke=1<<ke.b)-1)),mt=Ue(tt,ke.b),kt=ke.K,ke=ke.w+(Me>>ke.b)*mt;Me<st;){for(rr=kt,Xt=ke,xr=new Oe,Zt=Qe+_t,Dn=Qe+tt;Qe<Zt;)Mt(rr[Xt++],xr),rA(xr,Tt,Qe,Ke,Ee,xe),Qe+=Ke,xe+=Ke;Qe<Dn&&(Mt(rr[Xt++],xr),rA(xr,Tt,Qe,jt,Ee,xe),Qe+=jt,xe+=jt),++Me&Ve||(ke+=mt)}break;case 3:if(tt==Ee&&Ke==xe&&0<ke.b){for(Qe=Ee,tt=Tt=xe+(st-Me)*Tt-(_t=(st-Me)*Ue(ke.Ea,ke.b)),Ke=Ee,Ve=xe,mt=[],_t=(jt=_t)-1;0<=_t;--_t)mt[_t]=Ke[Ve+_t];for(_t=jt-1;0<=_t;--_t)Qe[tt+_t]=mt[_t];Ol(ke,Me,st,Ee,Tt,Ee,xe)}else Ol(ke,Me,st,tt,Ke,Ee,xe)}xe=se,Ee=Z}Ee!=Z&&n(se,Z,xe,Ee,me)}function Te(T,Q){var Z=T.V,se=T.Ba+T.c*T.C,de=Q-T.C;if(t(Q<=T.l.o),t(16>=de),0<de){var me=T.l,ge=T.Ta,xe=T.Ua,Ee=me.width;if(he(T,de,Z,se),de=xe=[xe],t((Z=T.C)<(se=Q)),t(me.v<me.va),se>me.o&&(se=me.o),Z<me.j){var ke=me.j-Z;Z=me.j,de[0]+=ke*Ee}if(Z>=se?Z=0:(de[0]+=4*me.v,me.ka=Z-me.j,me.U=me.va-me.v,me.T=se-Z,Z=1),Z){if(xe=xe[0],11>(Z=T.ca).S){var Me=Z.f.RGBA,st=(se=Z.S,de=me.U,me=me.T,ke=Me.eb,Me.A),tt=me;for(Me=Me.fb+T.Ma*Me.A;0<tt--;){var Ke=ge,Tt=xe,mt=de,Qe=ke,Ve=Me;switch(se){case Pi:no(Ke,Tt,mt,Qe,Ve);break;case qh:bi(Ke,Tt,mt,Qe,Ve);break;case qm:bi(Ke,Tt,mt,Qe,Ve),cl(Qe,Ve,0,mt,1,0);break;case ou:fc(Ke,Tt,mt,Qe,Ve);break;case Km:Vr(Ke,Tt,mt,Qe,Ve,1);break;case uA:Vr(Ke,Tt,mt,Qe,Ve,1),cl(Qe,Ve,0,mt,1,0);break;case Ef:Vr(Ke,Tt,mt,Qe,Ve,0);break;case ad:Vr(Ke,Tt,mt,Qe,Ve,0),cl(Qe,Ve,1,mt,1,0);break;case nd:nA(Ke,Tt,mt,Qe,Ve);break;case Wh:nA(Ke,Tt,mt,Qe,Ve),hn(Qe,Ve,mt,1,0);break;case $g:Bo(Ke,Tt,mt,Qe,Ve);break;default:t(0)}xe+=Ee,Me+=st}T.Ma+=me}else alert("todo:EmitRescaledRowsYUVA");t(T.Ma<=Z.height)}}T.C=Q,t(T.C<=T.i)}function Ce(T){var Q;if(0<T.ua)return 0;for(Q=0;Q<T.Wb;++Q){var Z=T.Ya[Q].G,se=T.Ya[Q].H;if(0<Z[1][se[1]+0].g||0<Z[2][se[2]+0].g||0<Z[3][se[3]+0].g)return 0}return 1}function we(T,Q,Z,se,de,me){if(T.Z!=0){var ge=T.qd,xe=T.rd;for(t(cu[T.Z]!=null);Q<Z;++Q)cu[T.Z](ge,xe,se,de,se,de,me),ge=se,xe=de,de+=me;T.qd=ge,T.rd=xe}}function Ne(T,Q){var Z=T.l.ma,se=Z.Z==0||Z.Z==1?T.l.j:T.C;if(se=T.C<se?se:T.C,t(Q<=T.l.o),Q>se){var de=T.l.width,me=Z.ca,ge=Z.tb+de*se,xe=T.V,Ee=T.Ba+T.c*se,ke=T.gc;t(T.ab==1),t(ke[0].hc==3),tA(ke[0],se,Q,xe,Ee,me,ge),we(Z,se,Q,me,ge,de)}T.C=T.Ma=Q}function je(T,Q,Z,se,de,me,ge){var xe=T.$/se,Ee=T.$%se,ke=T.m,Me=T.s,st=Z+T.$,tt=st;de=Z+se*de;var Ke=Z+se*me,Tt=280+Me.ua,mt=T.Pb?xe:16777216,Qe=0<Me.ua?Me.Wa:null,Ve=Me.wc,_t=st<Ke?Gr(Me,Ee,xe):null;t(T.C<me),t(Ke<=de);var jt=!1;e:for(;;){for(;jt||st<Ke;){var kt=0;if(xe>=mt){var rr=st-Z;t((mt=T).Pb),mt.wd=mt.m,mt.xd=rr,0<mt.s.ua&&Se(mt.s.Wa,mt.s.vb),mt=xe+mE}if(Ee&Ve||(_t=Gr(Me,Ee,xe)),t(_t!=null),_t.Qb&&(Q[st]=_t.qb,jt=!0),!jt)if(ae(ke),_t.jc){kt=ke,rr=Q;var Xt=st,xr=_t.pd[z(kt)&Is-1];t(_t.jc),256>xr.g?(te(kt,kt.u+xr.g),rr[Xt]=xr.value,kt=0):(te(kt,kt.u+xr.g-256),t(256<=xr.value),kt=xr.value),kt==0&&(jt=!0)}else kt=Kr(_t.G[0],_t.H[0],ke);if(ke.h)break;if(jt||256>kt){if(!jt)if(_t.nd)Q[st]=(_t.qb|kt<<8)>>>0;else{if(ae(ke),jt=Kr(_t.G[1],_t.H[1],ke),ae(ke),rr=Kr(_t.G[2],_t.H[2],ke),Xt=Kr(_t.G[3],_t.H[3],ke),ke.h)break;Q[st]=(Xt<<24|jt<<16|kt<<8|rr)>>>0}if(jt=!1,++st,++Ee>=se&&(Ee=0,++xe,ge!=null&&xe<=me&&!(xe%16)&&ge(T,xe),Qe!=null))for(;tt<st;)kt=Q[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt}else if(280>kt){if(kt=nr(kt-256,ke),rr=Kr(_t.G[4],_t.H[4],ke),ae(ke),rr=gr(se,rr=nr(rr,ke)),ke.h)break;if(st-Z<rr||de-st<kt)break e;for(Xt=0;Xt<kt;++Xt)Q[st+Xt]=Q[st+Xt-rr];for(st+=kt,Ee+=kt;Ee>=se;)Ee-=se,++xe,ge!=null&&xe<=me&&!(xe%16)&&ge(T,xe);if(t(st<=de),Ee&Ve&&(_t=Gr(Me,Ee,xe)),Qe!=null)for(;tt<st;)kt=Q[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt}else{if(!(kt<Tt))break e;for(jt=kt-280,t(Qe!=null);tt<st;)kt=Q[tt++],Qe.X[(506832829*kt&4294967295)>>>Qe.Mb]=kt;kt=st,t(!(jt>>>(rr=Qe).Xa)),Q[kt]=rr.X[jt],jt=!0}jt||t(ke.h==Y(ke))}if(T.Pb&&ke.h&&st<de)t(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&Se(T.s.vb,T.s.Wa);else{if(ke.h)break e;ge!=null&&ge(T,xe>me?me:xe),T.a=0,T.$=st-Z}return 1}return T.a=3,0}function Xe(T){t(T!=null),T.vc=null,T.yc=null,T.Ya=null;var Q=T.Wa;Q!=null&&(Q.X=null),T.vb=null,t(T!=null)}function dt(){var T=new Vh;return T==null?null:(T.a=0,T.xb=Xh,In("Predictor","VP8LPredictors"),In("Predictor","VP8LPredictors_C"),In("PredictorAdd","VP8LPredictorsAdd"),In("PredictorAdd","VP8LPredictorsAdd_C"),Vg=It,rA=Pt,no=yt,bi=Br,nA=tr,Bo=nn,fc=Nr,N.VP8LMapColor32b=ei,N.VP8LMapColor8b=Gm,T)}function $e(T,Q,Z,se,de){var me=1,ge=[T],xe=[Q],Ee=se.m,ke=se.s,Me=null,st=0;e:for(;;){if(Z)for(;me&&X(Ee,1);){var tt=ge,Ke=xe,Tt=se,mt=1,Qe=Tt.m,Ve=Tt.gc[Tt.ab],_t=X(Qe,2);if(Tt.Oc&1<<_t)me=0;else{switch(Tt.Oc|=1<<_t,Ve.hc=_t,Ve.Ea=tt[0],Ve.nc=Ke[0],Ve.K=[null],++Tt.ab,t(4>=Tt.ab),_t){case 0:case 1:Ve.b=X(Qe,3)+2,mt=$e(Ue(Ve.Ea,Ve.b),Ue(Ve.nc,Ve.b),0,Tt,Ve.K),Ve.K=Ve.K[0];break;case 3:var jt,kt=X(Qe,8)+1,rr=16<kt?0:4<kt?1:2<kt?2:3;if(tt[0]=Ue(Ve.Ea,rr),Ve.b=rr,jt=mt=$e(kt,1,0,Tt,Ve.K)){var Xt,xr=kt,Zt=Ve,Dn=1<<(8>>Zt.b),zn=s(Dn);if(zn==null)jt=0;else{var An=Zt.K[0],on=Zt.w;for(zn[0]=Zt.K[0][0],Xt=1;Xt<1*xr;++Xt)zn[Xt]=Ye(An[on+Xt],zn[Xt-1]);for(;Xt<4*Dn;++Xt)zn[Xt]=0;Zt.K[0]=null,Zt.K[0]=zn,jt=1}}mt=jt;break;case 2:break;default:t(0)}me=mt}}if(ge=ge[0],xe=xe[0],me&&X(Ee,1)&&!(me=1<=(st=X(Ee,4))&&11>=st)){se.a=3;break e}var ta;if(ta=me)t:{var $n,Wr,ca,kr=se,Lr=ge,On=xe,Pn=st,ni=Z,Ps=kr.m,rs=kr.s,ns=[null],vs=1,Ll=0,Gn=_f[Pn];r:for(;;){if(ni&&X(Ps,1)){var bs=X(Ps,3)+2,pc=Ue(Lr,bs),hA=Ue(On,bs),kf=pc*hA;if(!$e(pc,hA,0,kr,ns))break r;for(ns=ns[0],rs.xc=bs,$n=0;$n<kf;++$n){var mA=ns[$n]>>8&65535;ns[$n]=mA,mA>=vs&&(vs=mA+1)}}if(Ps.h)break r;for(Wr=0;5>Wr;++Wr){var Ta=ul[Wr];!Wr&&0<Pn&&(Ta+=1<<Pn),Ll<Ta&&(Ll=Ta)}var Zm=i(vs*Gn,D),Yg=vs,so=i(Yg,M);if(so==null)var Ra=null;else t(65536>=Yg),Ra=so;var Bf=s(Ll);if(Ra==null||Bf==null||Zm==null){kr.a=1;break r}var pA=Zm;for($n=ca=0;$n<vs;++$n){var jo=Ra[$n],gA=jo.G,Io=jo.H,ep=0,Jh=1,Jg=0;for(Wr=0;5>Wr;++Wr){Ta=ul[Wr],gA[Wr]=pA,Io[Wr]=ca,!Wr&&0<Pn&&(Ta+=1<<Pn);a:{var tp,Zg=Ta,rp=kr,Zh=Bf,yE=pA,wE=ca,np=0,ud=rp.m,sB=X(ud,1);if(a(Zh,0,0,Zg),sB){var EE=X(ud,1)+1,CE=X(ud,1),cb=X(ud,CE==0?1:8);Zh[cb]=1,EE==2&&(Zh[cb=X(ud,8)]=1);var e0=1}else{var ub=s(19),db=X(ud,4)+4;if(19<db){rp.a=3;var ap=0;break a}for(tp=0;tp<db;++tp)ub[sd[tp]]=X(ud,3);var ex=void 0,t0=void 0,_E=rp,NE=ub,dd=Zg,sp=Zh,tx=0,gc=_E.m,r0=8,Ab=i(128,D);n:for(;P(Ab,0,7,NE,19);){if(X(gc,1)){var SE=2+2*X(gc,3);if((ex=2+X(gc,SE))>dd)break n}else ex=dd;for(t0=0;t0<dd&&ex--;){ae(gc);var fb=Ab[0+(127&z(gc))];te(gc,gc.u+fb.g);var Tf=fb.value;if(16>Tf)sp[t0++]=Tf,Tf!=0&&(r0=Tf);else{var kE=Tf==16,hb=Tf-16,mb=Rl[hb],pb=X(gc,Gg[hb])+mb;if(t0+pb>dd)break n;for(var BE=kE?r0:0;0<pb--;)sp[t0++]=BE}}tx=1;break n}tx||(_E.a=3),e0=tx}(e0=e0&&!ud.h)&&(np=P(yE,wE,8,Zh,Zg)),e0&&np!=0?ap=np:(rp.a=3,ap=0)}if(ap==0)break r;if(Jh&&Cf[Wr]==1&&(Jh=pA[ca].g==0),ep+=pA[ca].g,ca+=ap,3>=Wr){var jf,rx=Bf[0];for(jf=1;jf<Ta;++jf)Bf[jf]>rx&&(rx=Bf[jf]);Jg+=rx}}if(jo.nd=Jh,jo.Qb=0,Jh&&(jo.qb=(gA[3][Io[3]+0].value<<24|gA[1][Io[1]+0].value<<16|gA[2][Io[2]+0].value)>>>0,ep==0&&256>gA[0][Io[0]+0].value&&(jo.Qb=1,jo.qb+=gA[0][Io[0]+0].value<<8)),jo.jc=!jo.Qb&&6>Jg,jo.jc){var ip,Ad=jo;for(ip=0;ip<Is;++ip){var Au=ip,fd=Ad.pd[Au],op=Ad.G[0][Ad.H[0]+Au];256<=op.value?(fd.g=op.g+256,fd.value=op.value):(fd.g=0,fd.value=0,Au>>=Jr(op,8,fd),Au>>=Jr(Ad.G[1][Ad.H[1]+Au],16,fd),Au>>=Jr(Ad.G[2][Ad.H[2]+Au],0,fd),Jr(Ad.G[3][Ad.H[3]+Au],24,fd))}}}rs.vc=ns,rs.Wb=vs,rs.Ya=Ra,rs.yc=Zm,ta=1;break t}ta=0}if(!(me=ta)){se.a=3;break e}if(0<st){if(ke.ua=1<<st,!De(ke.Wa,st)){se.a=1,me=0;break e}}else ke.ua=0;var lp=se,gb=ge,TE=xe,xb=lp.s,vb=xb.xc;if(lp.c=gb,lp.i=TE,xb.md=Ue(gb,vb),xb.wc=vb==0?-1:(1<<vb)-1,Z){se.xb=gE;break e}if((Me=s(ge*xe))==null){se.a=1,me=0;break e}me=(me=je(se,Me,0,ge,xe,xe,null))&&!Ee.h;break e}return me?(de!=null?de[0]=Me:(t(Me==null),t(Z)),se.$=0,Z||Xe(ke)):Xe(ke),me}function rt(T,Q){var Z=T.c*T.i,se=Z+Q+16*Q;return t(T.c<=Q),T.V=s(se),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+Z+Q,1)}function it(T,Q){var Z=T.C,se=Q-Z,de=T.V,me=T.Ba+T.c*Z;for(t(Q<=T.l.o);0<se;){var ge=16<se?16:se,xe=T.l.ma,Ee=T.l.width,ke=Ee*ge,Me=xe.ca,st=xe.tb+Ee*Z,tt=T.Ta,Ke=T.Ua;he(T,ge,de,me),va(tt,Ke,Me,st,ke),we(xe,Z,Z+ge,Me,st,Ee),se-=ge,de+=ge*T.c,Z+=ge}t(Z==Q),T.C=T.Ma=Q}function Ft(){this.ub=this.yd=this.td=this.Rb=0}function Vt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Yt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var T=[];return function Q(Z,se,de){for(var me=de[se],ge=0;ge<me&&(Z.push(de.length>se+1?[]:0),!(de.length<se+1));ge++)Q(Z[ge],se+1,de)}(T,0,[3,11]),T}()}function $t(){this.jb=s(3),this.Wc=o([4,8],Ht),this.Xc=o([4,17],Ht)}function Sr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function an(){this.ld=this.La=this.dd=this.tc=0}function sn(){this.Na=this.la=0}function dn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function hs(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function wo(){this.uc=this.M=this.Nb=0,this.wa=Array(new an),this.Y=0,this.ya=Array(new hs),this.aa=0,this.l=new js}function ms(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Js(){this.cb=this.a=0,this.sc="",this.m=new ee,this.Od=new Ft,this.Kc=new Vt,this.ed=new Sr,this.Qa=new Yt,this.Ic=this.$c=this.Aa=0,this.D=new wo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ee),this.ia=0,this.pb=i(4,dn),this.Pa=new $t,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ms),this.Hd=0,this.rb=Array(new sn),this.sb=0,this.wa=Array(new an),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new hs),this.L=this.aa=0,this.gd=o([4,2],an),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function js(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function pi(){var T=new Js;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,Fs||(Fs=Mh)),T}function xa(T,Q,Z){return T.a==0&&(T.a=Q,T.sc=Z,T.cb=0),0}function Zs(T,Q,Z){return 3<=Z&&T[Q+0]==157&&T[Q+1]==1&&T[Q+2]==42}function Gd(T,Q){if(T==null)return 0;if(T.a=0,T.sc="OK",Q==null)return xa(T,2,"null VP8Io passed to VP8GetHeaders()");var Z=Q.data,se=Q.w,de=Q.ha;if(4>de)return xa(T,7,"Truncated header.");var me=Z[se+0]|Z[se+1]<<8|Z[se+2]<<16,ge=T.Od;if(ge.Rb=!(1&me),ge.td=me>>1&7,ge.yd=me>>4&1,ge.ub=me>>5,3<ge.td)return xa(T,3,"Incorrect keyframe parameters.");if(!ge.yd)return xa(T,4,"Frame not displayable.");se+=3,de-=3;var xe=T.Kc;if(ge.Rb){if(7>de)return xa(T,7,"cannot parse picture header");if(!Zs(Z,se,de))return xa(T,3,"Bad code word");xe.c=16383&(Z[se+4]<<8|Z[se+3]),xe.Td=Z[se+4]>>6,xe.i=16383&(Z[se+6]<<8|Z[se+5]),xe.Ud=Z[se+6]>>6,se+=7,de-=7,T.za=xe.c+15>>4,T.Ub=xe.i+15>>4,Q.width=xe.c,Q.height=xe.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,a((me=T.Pa).jb,0,255,me.jb.length),t((me=T.Qa)!=null),me.Cb=0,me.Bb=0,me.Fb=1,a(me.Zb,0,0,me.Zb.length),a(me.Lb,0,0,me.Lb)}if(ge.ub>de)return xa(T,7,"bad partition length");J(me=T.m,Z,se,ge.ub),se+=ge.ub,de-=ge.ub,ge.Rb&&(xe.Ld=ie(me),xe.Kd=ie(me)),xe=T.Qa;var Ee,ke=T.Pa;if(t(me!=null),t(xe!=null),xe.Cb=ie(me),xe.Cb){if(xe.Bb=ie(me),ie(me)){for(xe.Fb=ie(me),Ee=0;4>Ee;++Ee)xe.Zb[Ee]=ie(me)?K(me,7):0;for(Ee=0;4>Ee;++Ee)xe.Lb[Ee]=ie(me)?K(me,6):0}if(xe.Bb)for(Ee=0;3>Ee;++Ee)ke.jb[Ee]=ie(me)?H(me,8):255}else xe.Bb=0;if(me.Ka)return xa(T,3,"cannot parse segment header");if((xe=T.ed).zd=ie(me),xe.Tb=H(me,6),xe.wb=H(me,3),xe.Pc=ie(me),xe.Pc&&ie(me)){for(ke=0;4>ke;++ke)ie(me)&&(xe.vd[ke]=K(me,6));for(ke=0;4>ke;++ke)ie(me)&&(xe.od[ke]=K(me,6))}if(T.L=xe.Tb==0?0:xe.zd?1:2,me.Ka)return xa(T,3,"cannot parse filter header");var Me=de;if(de=Ee=se,se=Ee+Me,xe=Me,T.Xb=(1<<H(T.m,2))-1,Me<3*(ke=T.Xb))Z=7;else{for(Ee+=3*ke,xe-=3*ke,Me=0;Me<ke;++Me){var st=Z[de+0]|Z[de+1]<<8|Z[de+2]<<16;st>xe&&(st=xe),J(T.Jc[+Me],Z,Ee,st),Ee+=st,xe-=st,de+=3}J(T.Jc[+ke],Z,Ee,xe),Z=Ee<se?0:5}if(Z!=0)return xa(T,Z,"cannot parse partitions");for(Z=H(Ee=T.m,7),de=ie(Ee)?K(Ee,4):0,se=ie(Ee)?K(Ee,4):0,xe=ie(Ee)?K(Ee,4):0,ke=ie(Ee)?K(Ee,4):0,Ee=ie(Ee)?K(Ee,4):0,Me=T.Qa,st=0;4>st;++st){if(Me.Cb){var tt=Me.Zb[st];Me.Fb||(tt+=Z)}else{if(0<st){T.pb[st]=T.pb[0];continue}tt=Z}var Ke=T.pb[st];Ke.Sc[0]=Wm[Vn(tt+de,127)],Ke.Sc[1]=Xm[Vn(tt+0,127)],Ke.Eb[0]=2*Wm[Vn(tt+se,127)],Ke.Eb[1]=101581*Xm[Vn(tt+xe,127)]>>16,8>Ke.Eb[1]&&(Ke.Eb[1]=8),Ke.Qc[0]=Wm[Vn(tt+ke,117)],Ke.Qc[1]=Xm[Vn(tt+Ee,127)],Ke.lc=tt+Ee}if(!ge.Rb)return xa(T,4,"Not a key frame.");for(ie(me),ge=T.Pa,Z=0;4>Z;++Z){for(de=0;8>de;++de)for(se=0;3>se;++se)for(xe=0;11>xe;++xe)ke=ce(me,Nf[Z][de][se][xe])?H(me,8):lu[Z][de][se][xe],ge.Wc[Z][de].Yb[se][xe]=ke;for(de=0;17>de;++de)ge.Xc[Z][de]=ge.Wc[Z][pE[de]]}return T.kc=ie(me),T.kc&&(T.Bd=H(me,8)),T.cb=1}function Mh(T,Q,Z,se,de,me,ge){var xe=Q[de].Yb[Z];for(Z=0;16>de;++de){if(!ce(T,xe[Z+0]))return de;for(;!ce(T,xe[Z+1]);)if(xe=Q[++de].Yb[0],Z=0,de==16)return 16;var Ee=Q[de+1].Yb;if(ce(T,xe[Z+2])){var ke=T,Me=0;if(ce(ke,(tt=xe)[(st=Z)+3]))if(ce(ke,tt[st+6])){for(xe=0,st=2*(Me=ce(ke,tt[st+8]))+(tt=ce(ke,tt[st+9+Me])),Me=0,tt=qa[st];tt[xe];++xe)Me+=Me+ce(ke,tt[xe]);Me+=3+(8<<st)}else ce(ke,tt[st+7])?(Me=7+2*ce(ke,165),Me+=ce(ke,145)):Me=5+ce(ke,159);else Me=ce(ke,tt[st+4])?3+ce(ke,tt[st+5]):2;xe=Ee[2]}else Me=1,xe=Ee[1];Ee=ge+Mn[de],0>(ke=T).b&&le(ke);var st,tt=ke.b,Ke=(st=ke.Ca>>1)-(ke.I>>tt)>>31;--ke.b,ke.Ca+=Ke,ke.Ca|=1,ke.I-=(st+1&Ke)<<tt,me[Ee]=((Me^Ke)-Ke)*se[(0<de)+0]}return 16}function Kc(T){var Q=T.rb[T.sb-1];Q.la=0,Q.Na=0,a(T.zc,0,0,T.zc.length),T.ja=0}function uf(T,Q){if(T==null)return 0;if(Q==null)return xa(T,2,"NULL VP8Io parameter in VP8Decode().");if(!T.cb&&!Gd(T,Q))return 0;if(t(T.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(T.L=0);var Z=cd[T.L];if(T.L==2?(T.yb=0,T.zb=0):(T.yb=Q.v-Z>>4,T.zb=Q.j-Z>>4,0>T.yb&&(T.yb=0),0>T.zb&&(T.zb=0)),T.Va=Q.o+15+Z>>4,T.Hb=Q.va+15+Z>>4,T.Hb>T.za&&(T.Hb=T.za),T.Va>T.Ub&&(T.Va=T.Ub),0<T.L){var se=T.ed;for(Z=0;4>Z;++Z){var de;if(T.Qa.Cb){var me=T.Qa.Lb[Z];T.Qa.Fb||(me+=se.Tb)}else me=se.Tb;for(de=0;1>=de;++de){var ge=T.gd[Z][de],xe=me;if(se.Pc&&(xe+=se.vd[0],de&&(xe+=se.od[0])),0<(xe=0>xe?0:63<xe?63:xe)){var Ee=xe;0<se.wb&&(Ee=4<se.wb?Ee>>2:Ee>>1)>9-se.wb&&(Ee=9-se.wb),1>Ee&&(Ee=1),ge.dd=Ee,ge.tc=2*xe+Ee,ge.ld=40<=xe?2:15<=xe?1:0}else ge.tc=0;ge.La=de}}}Z=0}else xa(T,6,"Frame setup failed"),Z=T.a;if(Z=Z==0){if(Z){T.$c=0,0<T.Aa||(T.Ic=vE);e:{Z=T.Ic,se=4*(Ee=T.za);var ke=32*Ee,Me=Ee+1,st=0<T.L?Ee*(0<T.Aa?2:1):0,tt=(T.Aa==2?2:1)*Ee;if((ge=se+832+(de=3*(16*Z+cd[T.L])/2*ke)+(me=T.Fa!=null&&0<T.Fa.length?T.Kc.c*T.Kc.i:0))!=ge)Z=0;else{if(ge>T.Vb){if(T.Vb=0,T.Ec=s(ge),T.Fc=0,T.Ec==null){Z=xa(T,1,"no memory during frame initialization.");break e}T.Vb=ge}ge=T.Ec,xe=T.Fc,T.Ac=ge,T.Bc=xe,xe+=se,T.Gd=i(ke,ms),T.Hd=0,T.rb=i(Me+1,sn),T.sb=1,T.wa=st?i(st,an):null,T.Y=0,T.D.Nb=0,T.D.wa=T.wa,T.D.Y=T.Y,0<T.Aa&&(T.D.Y+=Ee),t(!0),T.oc=ge,T.pc=xe,xe+=832,T.ya=i(tt,hs),T.aa=0,T.D.ya=T.ya,T.D.aa=T.aa,T.Aa==2&&(T.D.aa+=Ee),T.R=16*Ee,T.B=8*Ee,Ee=(ke=cd[T.L])*T.R,ke=ke/2*T.B,T.sa=ge,T.ta=xe+Ee,T.qa=T.sa,T.ra=T.ta+16*Z*T.R+ke,T.Ha=T.qa,T.Ia=T.ra+8*Z*T.B+ke,T.$c=0,xe+=de,T.mb=me?ge:null,T.nb=me?xe:null,t(xe+me<=T.Fc+T.Vb),Kc(T),a(T.Ac,T.Bc,0,se),Z=1}}if(Z){if(Q.ka=0,Q.y=T.sa,Q.O=T.ta,Q.f=T.qa,Q.N=T.ra,Q.ea=T.Ha,Q.Vd=T.Ia,Q.fa=T.R,Q.Rc=T.B,Q.F=null,Q.J=0,!rd){for(Z=-255;255>=Z;++Z)ts[255+Z]=0>Z?-Z:Z;for(Z=-1020;1020>=Z;++Z)Dl[1020+Z]=-128>Z?-128:127<Z?127:Z;for(Z=-112;112>=Z;++Z)lA[112+Z]=-16>Z?-16:15<Z?15:Z;for(Z=-255;510>=Z;++Z)cA[255+Z]=0>Z?0:255<Z?255:Z;rd=1}su=Eo,hc=Wc,mc=Nl,xs=Hn,To=Xc,Ga=qc,vf=eu,iu=dc,Gh=Xd,aA=mf,sA=Wd,iA=Wu,bf=Xu,Kh=tu,oA=ll,td=Oi,yf=gs,Ka=Hh,ao[0]=Ii,ao[1]=Uh,ao[2]=Bl,ao[3]=Qh,ao[4]=Co,ao[5]=Tl,ao[6]=ro,ao[7]=_o,ao[8]=uc,ao[9]=Yc,od[0]=Sl,od[1]=Af,od[2]=oc,od[3]=qd,od[4]=la,od[5]=cc,od[6]=kl,dl[0]=jl,dl[1]=df,dl[2]=ff,dl[3]=No,dl[4]=vn,dl[5]=ps,dl[6]=Jc,Z=1}else Z=0}Z&&(Z=function(Ke,Tt){for(Ke.M=0;Ke.M<Ke.Va;++Ke.M){var mt,Qe=Ke.Jc[Ke.M&Ke.Xb],Ve=Ke.m,_t=Ke;for(mt=0;mt<_t.za;++mt){var jt=Ve,kt=_t,rr=kt.Ac,Xt=kt.Bc+4*mt,xr=kt.zc,Zt=kt.ya[kt.aa+mt];if(kt.Qa.Bb?Zt.$b=ce(jt,kt.Pa.jb[0])?2+ce(jt,kt.Pa.jb[2]):ce(jt,kt.Pa.jb[1]):Zt.$b=0,kt.kc&&(Zt.Ad=ce(jt,kt.Bd)),Zt.Za=!ce(jt,145)+0,Zt.Za){var Dn=Zt.Ob,zn=0;for(kt=0;4>kt;++kt){var An,on=xr[0+kt];for(An=0;4>An;++An){on=ib[rr[Xt+An]][on];for(var ta=dA[ce(jt,on[0])];0<ta;)ta=dA[2*ta+ce(jt,on[ta])];on=-ta,rr[Xt+An]=on}n(Dn,zn,rr,Xt,4),zn+=4,xr[0+kt]=on}}else on=ce(jt,156)?ce(jt,128)?1:3:ce(jt,163)?2:0,Zt.Ob[0]=on,a(rr,Xt,on,4),a(xr,0,on,4);Zt.Dd=ce(jt,142)?ce(jt,114)?ce(jt,183)?1:3:2:0}if(_t.m.Ka)return xa(Ke,7,"Premature end-of-partition0 encountered.");for(;Ke.ja<Ke.za;++Ke.ja){if(_t=Qe,jt=(Ve=Ke).rb[Ve.sb-1],rr=Ve.rb[Ve.sb+Ve.ja],mt=Ve.ya[Ve.aa+Ve.ja],Xt=Ve.kc?mt.Ad:0)jt.la=rr.la=0,mt.Za||(jt.Na=rr.Na=0),mt.Hc=0,mt.Gc=0,mt.ia=0;else{var $n,Wr;if(jt=rr,rr=_t,Xt=Ve.Pa.Xc,xr=Ve.ya[Ve.aa+Ve.ja],Zt=Ve.pb[xr.$b],kt=xr.ad,Dn=0,zn=Ve.rb[Ve.sb-1],on=An=0,a(kt,Dn,0,384),xr.Za)var ca=0,kr=Xt[3];else{ta=s(16);var Lr=jt.Na+zn.Na;if(Lr=Fs(rr,Xt[1],Lr,Zt.Eb,0,ta,0),jt.Na=zn.Na=(0<Lr)+0,1<Lr)su(ta,0,kt,Dn);else{var On=ta[0]+3>>3;for(ta=0;256>ta;ta+=16)kt[Dn+ta]=On}ca=1,kr=Xt[0]}var Pn=15&jt.la,ni=15&zn.la;for(ta=0;4>ta;++ta){var Ps=1&ni;for(On=Wr=0;4>On;++On)Pn=Pn>>1|(Ps=(Lr=Fs(rr,kr,Lr=Ps+(1&Pn),Zt.Sc,ca,kt,Dn))>ca)<<7,Wr=Wr<<2|(3<Lr?3:1<Lr?2:kt[Dn+0]!=0),Dn+=16;Pn>>=4,ni=ni>>1|Ps<<7,An=(An<<8|Wr)>>>0}for(kr=Pn,ca=ni>>4,$n=0;4>$n;$n+=2){for(Wr=0,Pn=jt.la>>4+$n,ni=zn.la>>4+$n,ta=0;2>ta;++ta){for(Ps=1&ni,On=0;2>On;++On)Lr=Ps+(1&Pn),Pn=Pn>>1|(Ps=0<(Lr=Fs(rr,Xt[2],Lr,Zt.Qc,0,kt,Dn)))<<3,Wr=Wr<<2|(3<Lr?3:1<Lr?2:kt[Dn+0]!=0),Dn+=16;Pn>>=2,ni=ni>>1|Ps<<5}on|=Wr<<4*$n,kr|=Pn<<4<<$n,ca|=(240&ni)<<$n}jt.la=kr,zn.la=ca,xr.Hc=An,xr.Gc=on,xr.ia=43690&on?0:Zt.ia,Xt=!(An|on)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[mt.$b][mt.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Xt),_t.Ka)return xa(Ke,7,"Premature end-of-file encountered.")}if(Kc(Ke),Ve=Tt,_t=1,mt=(Qe=Ke).D,jt=0<Qe.L&&Qe.M>=Qe.zb&&Qe.M<=Qe.Va,Qe.Aa==0)e:{if(mt.M=Qe.M,mt.uc=jt,So(Qe,mt),_t=1,mt=(Wr=Qe.D).Nb,jt=(on=cd[Qe.L])*Qe.R,rr=on/2*Qe.B,ta=16*mt*Qe.R,On=8*mt*Qe.B,Xt=Qe.sa,xr=Qe.ta-jt+ta,Zt=Qe.qa,kt=Qe.ra-rr+On,Dn=Qe.Ha,zn=Qe.Ia-rr+On,ni=(Pn=Wr.M)==0,An=Pn>=Qe.Va-1,Qe.Aa==2&&So(Qe,Wr),Wr.uc)for(Ps=(Lr=Qe).D.M,t(Lr.D.uc),Wr=Lr.yb;Wr<Lr.Hb;++Wr){ca=Wr,kr=Ps;var rs=(ns=(Ta=Lr).D).Nb;$n=Ta.R;var ns=ns.wa[ns.Y+ca],vs=Ta.sa,Ll=Ta.ta+16*rs*$n+16*ca,Gn=ns.dd,bs=ns.tc;if(bs!=0)if(t(3<=bs),Ta.L==1)0<ca&&td(vs,Ll,$n,bs+4),ns.La&&Ka(vs,Ll,$n,bs),0<kr&&oA(vs,Ll,$n,bs+4),ns.La&&yf(vs,Ll,$n,bs);else{var pc=Ta.B,hA=Ta.qa,kf=Ta.ra+8*rs*pc+8*ca,mA=Ta.Ha,Ta=Ta.Ia+8*rs*pc+8*ca;rs=ns.ld,0<ca&&(iu(vs,Ll,$n,bs+4,Gn,rs),aA(hA,kf,mA,Ta,pc,bs+4,Gn,rs)),ns.La&&(iA(vs,Ll,$n,bs,Gn,rs),Kh(hA,kf,mA,Ta,pc,bs,Gn,rs)),0<kr&&(vf(vs,Ll,$n,bs+4,Gn,rs),Gh(hA,kf,mA,Ta,pc,bs+4,Gn,rs)),ns.La&&(sA(vs,Ll,$n,bs,Gn,rs),bf(hA,kf,mA,Ta,pc,bs,Gn,rs))}}if(Qe.ia&&alert("todo:DitherRow"),Ve.put!=null){if(Wr=16*Pn,Pn=16*(Pn+1),ni?(Ve.y=Qe.sa,Ve.O=Qe.ta+ta,Ve.f=Qe.qa,Ve.N=Qe.ra+On,Ve.ea=Qe.Ha,Ve.W=Qe.Ia+On):(Wr-=on,Ve.y=Xt,Ve.O=xr,Ve.f=Zt,Ve.N=kt,Ve.ea=Dn,Ve.W=zn),An||(Pn-=on),Pn>Ve.o&&(Pn=Ve.o),Ve.F=null,Ve.J=null,Qe.Fa!=null&&0<Qe.Fa.length&&Wr<Pn&&(Ve.J=Jd(Qe,Ve,Wr,Pn-Wr),Ve.F=Qe.mb,Ve.F==null&&Ve.F.length==0)){_t=xa(Qe,3,"Could not decode alpha data.");break e}Wr<Ve.j&&(on=Ve.j-Wr,Wr=Ve.j,t(!(1&on)),Ve.O+=Qe.R*on,Ve.N+=Qe.B*(on>>1),Ve.W+=Qe.B*(on>>1),Ve.F!=null&&(Ve.J+=Ve.width*on)),Wr<Pn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=Wr-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Pn-Wr,_t=Ve.put(Ve))}mt+1!=Qe.Ic||An||(n(Qe.sa,Qe.ta-jt,Xt,xr+16*Qe.R,jt),n(Qe.qa,Qe.ra-rr,Zt,kt+8*Qe.B,rr),n(Qe.Ha,Qe.Ia-rr,Dn,zn+8*Qe.B,rr))}if(!_t)return xa(Ke,6,"Output aborted.")}return 1}(T,Q)),Q.bc!=null&&Q.bc(Q),Z&=1}return Z?(T.cb=0,Z):0}function gi(T,Q,Z,se,de){de=T[Q+Z+32*se]+(de>>3),T[Q+Z+32*se]=-256&de?0>de?0:255:de}function Kd(T,Q,Z,se,de,me){gi(T,Q,0,Z,se+de),gi(T,Q,1,Z,se+me),gi(T,Q,2,Z,se-me),gi(T,Q,3,Z,se-de)}function Fn(T){return(20091*T>>16)+T}function xi(T,Q,Z,se){var de,me=0,ge=s(16);for(de=0;4>de;++de){var xe=T[Q+0]+T[Q+8],Ee=T[Q+0]-T[Q+8],ke=(35468*T[Q+4]>>16)-Fn(T[Q+12]),Me=Fn(T[Q+4])+(35468*T[Q+12]>>16);ge[me+0]=xe+Me,ge[me+1]=Ee+ke,ge[me+2]=Ee-ke,ge[me+3]=xe-Me,me+=4,Q++}for(de=me=0;4>de;++de)xe=(T=ge[me+0]+4)+ge[me+8],Ee=T-ge[me+8],ke=(35468*ge[me+4]>>16)-Fn(ge[me+12]),gi(Z,se,0,0,xe+(Me=Fn(ge[me+4])+(35468*ge[me+12]>>16))),gi(Z,se,1,0,Ee+ke),gi(Z,se,2,0,Ee-ke),gi(Z,se,3,0,xe-Me),me++,se+=32}function qc(T,Q,Z,se){var de=T[Q+0]+4,me=35468*T[Q+4]>>16,ge=Fn(T[Q+4]),xe=35468*T[Q+1]>>16;Kd(Z,se,0,de+ge,T=Fn(T[Q+1]),xe),Kd(Z,se,1,de+me,T,xe),Kd(Z,se,2,de-me,T,xe),Kd(Z,se,3,de-ge,T,xe)}function Wc(T,Q,Z,se,de){xi(T,Q,Z,se),de&&xi(T,Q+16,Z,se+4)}function Nl(T,Q,Z,se){hc(T,Q+0,Z,se,1),hc(T,Q+32,Z,se+128,1)}function Hn(T,Q,Z,se){var de;for(T=T[Q+0]+4,de=0;4>de;++de)for(Q=0;4>Q;++Q)gi(Z,se,Q,de,T)}function Xc(T,Q,Z,se){T[Q+0]&&xs(T,Q+0,Z,se),T[Q+16]&&xs(T,Q+16,Z,se+4),T[Q+32]&&xs(T,Q+32,Z,se+128),T[Q+48]&&xs(T,Q+48,Z,se+128+4)}function Eo(T,Q,Z,se){var de,me=s(16);for(de=0;4>de;++de){var ge=T[Q+0+de]+T[Q+12+de],xe=T[Q+4+de]+T[Q+8+de],Ee=T[Q+4+de]-T[Q+8+de],ke=T[Q+0+de]-T[Q+12+de];me[0+de]=ge+xe,me[8+de]=ge-xe,me[4+de]=ke+Ee,me[12+de]=ke-Ee}for(de=0;4>de;++de)ge=(T=me[0+4*de]+3)+me[3+4*de],xe=me[1+4*de]+me[2+4*de],Ee=me[1+4*de]-me[2+4*de],ke=T-me[3+4*de],Z[se+0]=ge+xe>>3,Z[se+16]=ke+Ee>>3,Z[se+32]=ge-xe>>3,Z[se+48]=ke-Ee>>3,se+=64}function ic(T,Q,Z){var se,de=Q-32,me=ti,ge=255-T[de-1];for(se=0;se<Z;++se){var xe,Ee=me,ke=ge+T[Q-1];for(xe=0;xe<Z;++xe)T[Q+xe]=Ee[ke+T[de+xe]];Q+=32}}function Uh(T,Q){ic(T,Q,4)}function df(T,Q){ic(T,Q,8)}function Af(T,Q){ic(T,Q,16)}function oc(T,Q){var Z;for(Z=0;16>Z;++Z)n(T,Q+32*Z,T,Q-32,16)}function qd(T,Q){var Z;for(Z=16;0<Z;--Z)a(T,Q,T[Q-1],16),Q+=32}function lc(T,Q,Z){var se;for(se=0;16>se;++se)a(Q,Z+32*se,T,16)}function Sl(T,Q){var Z,se=16;for(Z=0;16>Z;++Z)se+=T[Q-1+32*Z]+T[Q+Z-32];lc(se>>5,T,Q)}function la(T,Q){var Z,se=8;for(Z=0;16>Z;++Z)se+=T[Q-1+32*Z];lc(se>>4,T,Q)}function cc(T,Q){var Z,se=8;for(Z=0;16>Z;++Z)se+=T[Q+Z-32];lc(se>>4,T,Q)}function kl(T,Q){lc(128,T,Q)}function jr(T,Q,Z){return T+2*Q+Z+2>>2}function Bl(T,Q){var Z,se=Q-32;for(se=new Uint8Array([jr(T[se-1],T[se+0],T[se+1]),jr(T[se+0],T[se+1],T[se+2]),jr(T[se+1],T[se+2],T[se+3]),jr(T[se+2],T[se+3],T[se+4])]),Z=0;4>Z;++Z)n(T,Q+32*Z,se,0,se.length)}function Qh(T,Q){var Z=T[Q-1],se=T[Q-1+32],de=T[Q-1+64],me=T[Q-1+96];pe(T,Q+0,16843009*jr(T[Q-1-32],Z,se)),pe(T,Q+32,16843009*jr(Z,se,de)),pe(T,Q+64,16843009*jr(se,de,me)),pe(T,Q+96,16843009*jr(de,me,me))}function Ii(T,Q){var Z,se=4;for(Z=0;4>Z;++Z)se+=T[Q+Z-32]+T[Q-1+32*Z];for(se>>=3,Z=0;4>Z;++Z)a(T,Q+32*Z,se,4)}function Co(T,Q){var Z=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],me=T[Q-1-32],ge=T[Q+0-32],xe=T[Q+1-32],Ee=T[Q+2-32],ke=T[Q+3-32];T[Q+0+96]=jr(se,de,T[Q-1+96]),T[Q+1+96]=T[Q+0+64]=jr(Z,se,de),T[Q+2+96]=T[Q+1+64]=T[Q+0+32]=jr(me,Z,se),T[Q+3+96]=T[Q+2+64]=T[Q+1+32]=T[Q+0+0]=jr(ge,me,Z),T[Q+3+64]=T[Q+2+32]=T[Q+1+0]=jr(xe,ge,me),T[Q+3+32]=T[Q+2+0]=jr(Ee,xe,ge),T[Q+3+0]=jr(ke,Ee,xe)}function ro(T,Q){var Z=T[Q+1-32],se=T[Q+2-32],de=T[Q+3-32],me=T[Q+4-32],ge=T[Q+5-32],xe=T[Q+6-32],Ee=T[Q+7-32];T[Q+0+0]=jr(T[Q+0-32],Z,se),T[Q+1+0]=T[Q+0+32]=jr(Z,se,de),T[Q+2+0]=T[Q+1+32]=T[Q+0+64]=jr(se,de,me),T[Q+3+0]=T[Q+2+32]=T[Q+1+64]=T[Q+0+96]=jr(de,me,ge),T[Q+3+32]=T[Q+2+64]=T[Q+1+96]=jr(me,ge,xe),T[Q+3+64]=T[Q+2+96]=jr(ge,xe,Ee),T[Q+3+96]=jr(xe,Ee,Ee)}function Tl(T,Q){var Z=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],me=T[Q-1-32],ge=T[Q+0-32],xe=T[Q+1-32],Ee=T[Q+2-32],ke=T[Q+3-32];T[Q+0+0]=T[Q+1+64]=me+ge+1>>1,T[Q+1+0]=T[Q+2+64]=ge+xe+1>>1,T[Q+2+0]=T[Q+3+64]=xe+Ee+1>>1,T[Q+3+0]=Ee+ke+1>>1,T[Q+0+96]=jr(de,se,Z),T[Q+0+64]=jr(se,Z,me),T[Q+0+32]=T[Q+1+96]=jr(Z,me,ge),T[Q+1+32]=T[Q+2+96]=jr(me,ge,xe),T[Q+2+32]=T[Q+3+96]=jr(ge,xe,Ee),T[Q+3+32]=jr(xe,Ee,ke)}function _o(T,Q){var Z=T[Q+0-32],se=T[Q+1-32],de=T[Q+2-32],me=T[Q+3-32],ge=T[Q+4-32],xe=T[Q+5-32],Ee=T[Q+6-32],ke=T[Q+7-32];T[Q+0+0]=Z+se+1>>1,T[Q+1+0]=T[Q+0+64]=se+de+1>>1,T[Q+2+0]=T[Q+1+64]=de+me+1>>1,T[Q+3+0]=T[Q+2+64]=me+ge+1>>1,T[Q+0+32]=jr(Z,se,de),T[Q+1+32]=T[Q+0+96]=jr(se,de,me),T[Q+2+32]=T[Q+1+96]=jr(de,me,ge),T[Q+3+32]=T[Q+2+96]=jr(me,ge,xe),T[Q+3+64]=jr(ge,xe,Ee),T[Q+3+96]=jr(xe,Ee,ke)}function Yc(T,Q){var Z=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],me=T[Q-1+96];T[Q+0+0]=Z+se+1>>1,T[Q+2+0]=T[Q+0+32]=se+de+1>>1,T[Q+2+32]=T[Q+0+64]=de+me+1>>1,T[Q+1+0]=jr(Z,se,de),T[Q+3+0]=T[Q+1+32]=jr(se,de,me),T[Q+3+32]=T[Q+1+64]=jr(de,me,me),T[Q+3+64]=T[Q+2+64]=T[Q+0+96]=T[Q+1+96]=T[Q+2+96]=T[Q+3+96]=me}function uc(T,Q){var Z=T[Q-1+0],se=T[Q-1+32],de=T[Q-1+64],me=T[Q-1+96],ge=T[Q-1-32],xe=T[Q+0-32],Ee=T[Q+1-32],ke=T[Q+2-32];T[Q+0+0]=T[Q+2+32]=Z+ge+1>>1,T[Q+0+32]=T[Q+2+64]=se+Z+1>>1,T[Q+0+64]=T[Q+2+96]=de+se+1>>1,T[Q+0+96]=me+de+1>>1,T[Q+3+0]=jr(xe,Ee,ke),T[Q+2+0]=jr(ge,xe,Ee),T[Q+1+0]=T[Q+3+32]=jr(Z,ge,xe),T[Q+1+32]=T[Q+3+64]=jr(se,Z,ge),T[Q+1+64]=T[Q+3+96]=jr(de,se,Z),T[Q+1+96]=jr(me,de,se)}function ff(T,Q){var Z;for(Z=0;8>Z;++Z)n(T,Q+32*Z,T,Q-32,8)}function No(T,Q){var Z;for(Z=0;8>Z;++Z)a(T,Q,T[Q-1],8),Q+=32}function Fi(T,Q,Z){var se;for(se=0;8>se;++se)a(Q,Z+32*se,T,8)}function jl(T,Q){var Z,se=8;for(Z=0;8>Z;++Z)se+=T[Q+Z-32]+T[Q-1+32*Z];Fi(se>>4,T,Q)}function ps(T,Q){var Z,se=4;for(Z=0;8>Z;++Z)se+=T[Q+Z-32];Fi(se>>3,T,Q)}function vn(T,Q){var Z,se=4;for(Z=0;8>Z;++Z)se+=T[Q-1+32*Z];Fi(se>>3,T,Q)}function Jc(T,Q){Fi(128,T,Q)}function Il(T,Q,Z){var se=T[Q-Z],de=T[Q+0],me=3*(de-se)+zg[1020+T[Q-2*Z]-T[Q+Z]],ge=wf[112+(me+4>>3)];T[Q-Z]=ti[255+se+wf[112+(me+3>>3)]],T[Q+0]=ti[255+de-ge]}function hf(T,Q,Z,se){var de=T[Q+0],me=T[Q+Z];return Pl[255+T[Q-2*Z]-T[Q-Z]]>se||Pl[255+me-de]>se}function Ku(T,Q,Z,se){return 4*Pl[255+T[Q-Z]-T[Q+0]]+Pl[255+T[Q-2*Z]-T[Q+Z]]<=se}function qu(T,Q,Z,se,de){var me=T[Q-3*Z],ge=T[Q-2*Z],xe=T[Q-Z],Ee=T[Q+0],ke=T[Q+Z],Me=T[Q+2*Z],st=T[Q+3*Z];return 4*Pl[255+xe-Ee]+Pl[255+ge-ke]>se?0:Pl[255+T[Q-4*Z]-me]<=de&&Pl[255+me-ge]<=de&&Pl[255+ge-xe]<=de&&Pl[255+st-Me]<=de&&Pl[255+Me-ke]<=de&&Pl[255+ke-Ee]<=de}function ll(T,Q,Z,se){var de=2*se+1;for(se=0;16>se;++se)Ku(T,Q+se,Z,de)&&Il(T,Q+se,Z)}function Oi(T,Q,Z,se){var de=2*se+1;for(se=0;16>se;++se)Ku(T,Q+se*Z,1,de)&&Il(T,Q+se*Z,1)}function gs(T,Q,Z,se){var de;for(de=3;0<de;--de)ll(T,Q+=4*Z,Z,se)}function Hh(T,Q,Z,se){var de;for(de=3;0<de;--de)Oi(T,Q+=4,Z,se)}function Zc(T,Q,Z,se,de,me,ge,xe){for(me=2*me+1;0<de--;){if(qu(T,Q,Z,me,ge))if(hf(T,Q,Z,xe))Il(T,Q,Z);else{var Ee=T,ke=Q,Me=Z,st=Ee[ke-2*Me],tt=Ee[ke-Me],Ke=Ee[ke+0],Tt=Ee[ke+Me],mt=Ee[ke+2*Me],Qe=27*(_t=zg[1020+3*(Ke-tt)+zg[1020+st-Tt]])+63>>7,Ve=18*_t+63>>7,_t=9*_t+63>>7;Ee[ke-3*Me]=ti[255+Ee[ke-3*Me]+_t],Ee[ke-2*Me]=ti[255+st+Ve],Ee[ke-Me]=ti[255+tt+Qe],Ee[ke+0]=ti[255+Ke-Qe],Ee[ke+Me]=ti[255+Tt-Ve],Ee[ke+2*Me]=ti[255+mt-_t]}Q+=se}}function vi(T,Q,Z,se,de,me,ge,xe){for(me=2*me+1;0<de--;){if(qu(T,Q,Z,me,ge))if(hf(T,Q,Z,xe))Il(T,Q,Z);else{var Ee=T,ke=Q,Me=Z,st=Ee[ke-Me],tt=Ee[ke+0],Ke=Ee[ke+Me],Tt=wf[112+((mt=3*(tt-st))+4>>3)],mt=wf[112+(mt+3>>3)],Qe=Tt+1>>1;Ee[ke-2*Me]=ti[255+Ee[ke-2*Me]+Qe],Ee[ke-Me]=ti[255+st+mt],Ee[ke+0]=ti[255+tt-Tt],Ee[ke+Me]=ti[255+Ke-Qe]}Q+=se}}function eu(T,Q,Z,se,de,me){Zc(T,Q,Z,1,16,se,de,me)}function dc(T,Q,Z,se,de,me){Zc(T,Q,1,Z,16,se,de,me)}function Wd(T,Q,Z,se,de,me){var ge;for(ge=3;0<ge;--ge)vi(T,Q+=4*Z,Z,1,16,se,de,me)}function Wu(T,Q,Z,se,de,me){var ge;for(ge=3;0<ge;--ge)vi(T,Q+=4,1,Z,16,se,de,me)}function Xd(T,Q,Z,se,de,me,ge,xe){Zc(T,Q,de,1,8,me,ge,xe),Zc(Z,se,de,1,8,me,ge,xe)}function mf(T,Q,Z,se,de,me,ge,xe){Zc(T,Q,1,de,8,me,ge,xe),Zc(Z,se,1,de,8,me,ge,xe)}function Xu(T,Q,Z,se,de,me,ge,xe){vi(T,Q+4*de,de,1,8,me,ge,xe),vi(Z,se+4*de,de,1,8,me,ge,xe)}function tu(T,Q,Z,se,de,me,ge,xe){vi(T,Q+4,1,de,8,me,ge,xe),vi(Z,se+4,1,de,8,me,ge,xe)}function Yu(){this.ba=new oa,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new tn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Yd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ju(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ru(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new M,this.yc=new D}function Vh(){this.xb=this.a=0,this.l=new js,this.ca=new oa,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ru,this.ab=0,this.gc=i(4,Ju),this.Oc=0}function Ac(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new js,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function nu(T,Q,Z,se,de,me,ge){for(T=T==null?0:T[Q+0],Q=0;Q<ge;++Q)de[me+Q]=T+Z[se+Q]&255,T=de[me+Q]}function Zu(T,Q,Z,se,de,me,ge){var xe;if(T==null)nu(null,null,Z,se,de,me,ge);else for(xe=0;xe<ge;++xe)de[me+xe]=T[Q+xe]+Z[se+xe]&255}function Di(T,Q,Z,se,de,me,ge){if(T==null)nu(null,null,Z,se,de,me,ge);else{var xe,Ee=T[Q+0],ke=Ee,Me=Ee;for(xe=0;xe<ge;++xe)ke=Me+(Ee=T[Q+xe])-ke,Me=Z[se+xe]+(-256&ke?0>ke?0:255:ke)&255,ke=Ee,de[me+xe]=Me}}function Jd(T,Q,Z,se){var de=Q.width,me=Q.o;if(t(T!=null&&Q!=null),0>Z||0>=se||Z+se>me)return null;if(!T.Cc){if(T.ga==null){var ge;if(T.ga=new Ac,(ge=T.ga==null)||(ge=Q.width*Q.o,t(T.Gb.length==0),T.Gb=s(ge),T.Uc=0,T.Gb==null?ge=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,ge=1),ge=!ge),!ge){ge=T.ga;var xe=T.Fa,Ee=T.P,ke=T.qc,Me=T.mb,st=T.nb,tt=Ee+1,Ke=ke-1,Tt=ge.l;if(t(xe!=null&&Me!=null&&Q!=null),cu[0]=null,cu[1]=nu,cu[2]=Zu,cu[3]=Di,ge.ca=Me,ge.tb=st,ge.c=Q.width,ge.i=Q.height,t(0<ge.c&&0<ge.i),1>=ke)Q=0;else if(ge.$a=xe[Ee+0]>>0&3,ge.Z=xe[Ee+0]>>2&3,ge.Lc=xe[Ee+0]>>4&3,Ee=xe[Ee+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||Ee)Q=0;else if(Tt.put=xt,Tt.ac=Je,Tt.bc=wt,Tt.ma=ge,Tt.width=Q.width,Tt.height=Q.height,Tt.Da=Q.Da,Tt.v=Q.v,Tt.va=Q.va,Tt.j=Q.j,Tt.o=Q.o,ge.$a)e:{t(ge.$a==1),Q=dt();t:for(;;){if(Q==null){Q=0;break e}if(t(ge!=null),ge.mc=Q,Q.c=ge.c,Q.i=ge.i,Q.l=ge.l,Q.l.ma=ge,Q.l.width=ge.c,Q.l.height=ge.i,Q.a=0,V(Q.m,xe,tt,Ke),!$e(ge.c,ge.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Ce(Q.s)?(ge.ic=1,xe=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=s(xe),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(ge.ic=0,Q=rt(Q,ge.c)),!Q))break t;Q=1;break e}ge.mc=null,Q=0}else Q=Ke>=ge.c*ge.i;ge=!Q}if(ge)return null;T.ga.Lc!=1?T.Ga=0:se=me-Z}t(T.ga!=null),t(Z+se<=me);e:{if(Q=(xe=T.ga).c,me=xe.l.o,xe.$a==0){if(tt=T.rc,Ke=T.Vc,Tt=T.Fa,Ee=T.P+1+Z*Q,ke=T.mb,Me=T.nb+Z*Q,t(Ee<=T.P+T.qc),xe.Z!=0)for(t(cu[xe.Z]!=null),ge=0;ge<se;++ge)cu[xe.Z](tt,Ke,Tt,Ee,ke,Me,Q),tt=ke,Ke=Me,Me+=Q,Ee+=Q;else for(ge=0;ge<se;++ge)n(ke,Me,Tt,Ee,Q),tt=ke,Ke=Me,Me+=Q,Ee+=Q;T.rc=tt,T.Vc=Ke}else{if(t(xe.mc!=null),Q=Z+se,t((ge=xe.mc)!=null),t(Q<=ge.i),ge.C>=Q)Q=1;else if(xe.ic||Ge(),xe.ic){xe=ge.V,tt=ge.Ba,Ke=ge.c;var mt=ge.i,Qe=(Tt=1,Ee=ge.$/Ke,ke=ge.$%Ke,Me=ge.m,st=ge.s,ge.$),Ve=Ke*mt,_t=Ke*Q,jt=st.wc,kt=Qe<_t?Gr(st,ke,Ee):null;t(Qe<=Ve),t(Q<=mt),t(Ce(st));t:for(;;){for(;!Me.h&&Qe<_t;){if(ke&jt||(kt=Gr(st,ke,Ee)),t(kt!=null),ae(Me),256>(mt=Kr(kt.G[0],kt.H[0],Me)))xe[tt+Qe]=mt,++Qe,++ke>=Ke&&(ke=0,++Ee<=Q&&!(Ee%16)&&Ne(ge,Ee));else{if(!(280>mt)){Tt=0;break t}mt=nr(mt-256,Me);var rr,Xt=Kr(kt.G[4],kt.H[4],Me);if(ae(Me),!(Qe>=(Xt=gr(Ke,Xt=nr(Xt,Me)))&&Ve-Qe>=mt)){Tt=0;break t}for(rr=0;rr<mt;++rr)xe[tt+Qe+rr]=xe[tt+Qe+rr-Xt];for(Qe+=mt,ke+=mt;ke>=Ke;)ke-=Ke,++Ee<=Q&&!(Ee%16)&&Ne(ge,Ee);Qe<_t&&ke&jt&&(kt=Gr(st,ke,Ee))}t(Me.h==Y(Me))}Ne(ge,Ee>Q?Q:Ee);break t}!Tt||Me.h&&Qe<Ve?(Tt=0,ge.a=Me.h?5:3):ge.$=Qe,Q=Tt}else Q=je(ge,ge.V,ge.Ba,ge.c,ge.i,Q,it);if(!Q){se=0;break e}}Z+se>=me&&(T.Cc=1),se=1}if(!se)return null;if(T.Cc&&((se=T.ga)!=null&&(se.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+Z*de}function W(T,Q,Z,se,de,me){for(;0<de--;){var ge,xe=T,Ee=Q+(Z?1:0),ke=T,Me=Q+(Z?0:3);for(ge=0;ge<se;++ge){var st=ke[Me+4*ge];st!=255&&(st*=32897,xe[Ee+4*ge+0]=xe[Ee+4*ge+0]*st>>23,xe[Ee+4*ge+1]=xe[Ee+4*ge+1]*st>>23,xe[Ee+4*ge+2]=xe[Ee+4*ge+2]*st>>23)}Q+=me}}function Ae(T,Q,Z,se,de){for(;0<se--;){var me;for(me=0;me<Z;++me){var ge=T[Q+2*me+0],xe=15&(ke=T[Q+2*me+1]),Ee=4369*xe,ke=(240&ke|ke>>4)*Ee>>16;T[Q+2*me+0]=(240&ge|ge>>4)*Ee>>16&240|(15&ge|ge<<4)*Ee>>16>>4&15,T[Q+2*me+1]=240&ke|xe}Q+=de}}function Fe(T,Q,Z,se,de,me,ge,xe){var Ee,ke,Me=255;for(ke=0;ke<de;++ke){for(Ee=0;Ee<se;++Ee){var st=T[Q+Ee];me[ge+4*Ee]=st,Me&=st}Q+=Z,ge+=xe}return Me!=255}function Le(T,Q,Z,se,de){var me;for(me=0;me<de;++me)Z[se+me]=T[Q+me]>>8}function Ge(){cl=W,hn=Ae,mn=Fe,va=Le}function vt(T,Q,Z){N[T]=function(se,de,me,ge,xe,Ee,ke,Me,st,tt,Ke,Tt,mt,Qe,Ve,_t,jt){var kt,rr=jt-1>>1,Xt=xe[Ee+0]|ke[Me+0]<<16,xr=st[tt+0]|Ke[Tt+0]<<16;t(se!=null);var Zt=3*Xt+xr+131074>>2;for(Q(se[de+0],255&Zt,Zt>>16,mt,Qe),me!=null&&(Zt=3*xr+Xt+131074>>2,Q(me[ge+0],255&Zt,Zt>>16,Ve,_t)),kt=1;kt<=rr;++kt){var Dn=xe[Ee+kt]|ke[Me+kt]<<16,zn=st[tt+kt]|Ke[Tt+kt]<<16,An=Xt+Dn+xr+zn+524296,on=An+2*(Dn+xr)>>3;Zt=on+Xt>>1,Xt=(An=An+2*(Xt+zn)>>3)+Dn>>1,Q(se[de+2*kt-1],255&Zt,Zt>>16,mt,Qe+(2*kt-1)*Z),Q(se[de+2*kt-0],255&Xt,Xt>>16,mt,Qe+(2*kt-0)*Z),me!=null&&(Zt=An+xr>>1,Xt=on+zn>>1,Q(me[ge+2*kt-1],255&Zt,Zt>>16,Ve,_t+(2*kt-1)*Z),Q(me[ge+2*kt+0],255&Xt,Xt>>16,Ve,_t+(2*kt+0)*Z)),Xt=Dn,xr=zn}1&jt||(Zt=3*Xt+xr+131074>>2,Q(se[de+jt-1],255&Zt,Zt>>16,mt,Qe+(jt-1)*Z),me!=null&&(Zt=3*xr+Xt+131074>>2,Q(me[ge+jt-1],255&Zt,Zt>>16,Ve,_t+(jt-1)*Z)))}}function Lt(){ri[Pi]=ld,ri[qh]=uu,ri[ou]=AA,ri[Km]=Kg,ri[Ef]=qg,ri[nd]=Yh,ri[$g]=Wg,ri[qm]=uu,ri[uA]=Kg,ri[ad]=qg,ri[Wh]=Yh}function Jt(T){return T&-16384?0>T?0:255:T>>rB}function O(T,Q){return Jt((19077*T>>8)+(26149*Q>>8)-14234)}function re(T,Q,Z){return Jt((19077*T>>8)-(6419*Q>>8)-(13320*Z>>8)+8708)}function oe(T,Q){return Jt((19077*T>>8)+(33050*Q>>8)-17685)}function ve(T,Q,Z,se,de){se[de+0]=O(T,Z),se[de+1]=re(T,Q,Z),se[de+2]=oe(T,Q)}function ze(T,Q,Z,se,de){se[de+0]=oe(T,Q),se[de+1]=re(T,Q,Z),se[de+2]=O(T,Z)}function ot(T,Q,Z,se,de){var me=re(T,Q,Z);Q=me<<3&224|oe(T,Q)>>3,se[de+0]=248&O(T,Z)|me>>5,se[de+1]=Q}function Ut(T,Q,Z,se,de){var me=240&oe(T,Q)|15;se[de+0]=240&O(T,Z)|re(T,Q,Z)>>4,se[de+1]=me}function Ir(T,Q,Z,se,de){se[de+0]=255,ve(T,Q,Z,se,de+1)}function bn(T,Q,Z,se,de){ze(T,Q,Z,se,de),se[de+3]=255}function qr(T,Q,Z,se,de){ve(T,Q,Z,se,de),se[de+3]=255}function Vn(T,Q){return 0>T?0:T>Q?Q:T}function ea(T,Q,Z){N[T]=function(se,de,me,ge,xe,Ee,ke,Me,st){for(var tt=Me+(-2&st)*Z;Me!=tt;)Q(se[de+0],me[ge+0],xe[Ee+0],ke,Me),Q(se[de+1],me[ge+0],xe[Ee+0],ke,Me+Z),de+=2,++ge,++Ee,Me+=2*Z;1&st&&Q(se[de+0],me[ge+0],xe[Ee+0],ke,Me)}}function Fl(T,Q,Z){return Z==0?T==0?Q==0?6:5:Q==0?4:0:Z}function es(T,Q,Z,se,de){switch(T>>>30){case 3:hc(Q,Z,se,de,0);break;case 2:Ga(Q,Z,se,de);break;case 1:xs(Q,Z,se,de)}}function So(T,Q){var Z,se,de=Q.M,me=Q.Nb,ge=T.oc,xe=T.pc+40,Ee=T.oc,ke=T.pc+584,Me=T.oc,st=T.pc+600;for(Z=0;16>Z;++Z)ge[xe+32*Z-1]=129;for(Z=0;8>Z;++Z)Ee[ke+32*Z-1]=129,Me[st+32*Z-1]=129;for(0<de?ge[xe-1-32]=Ee[ke-1-32]=Me[st-1-32]=129:(a(ge,xe-32-1,127,21),a(Ee,ke-32-1,127,9),a(Me,st-32-1,127,9)),se=0;se<T.za;++se){var tt=Q.ya[Q.aa+se];if(0<se){for(Z=-1;16>Z;++Z)n(ge,xe+32*Z-4,ge,xe+32*Z+12,4);for(Z=-1;8>Z;++Z)n(Ee,ke+32*Z-4,Ee,ke+32*Z+4,4),n(Me,st+32*Z-4,Me,st+32*Z+4,4)}var Ke=T.Gd,Tt=T.Hd+se,mt=tt.ad,Qe=tt.Hc;if(0<de&&(n(ge,xe-32,Ke[Tt].y,0,16),n(Ee,ke-32,Ke[Tt].f,0,8),n(Me,st-32,Ke[Tt].ea,0,8)),tt.Za){var Ve=ge,_t=xe-32+16;for(0<de&&(se>=T.za-1?a(Ve,_t,Ke[Tt].y[15],4):n(Ve,_t,Ke[Tt+1].y,0,4)),Z=0;4>Z;Z++)Ve[_t+128+Z]=Ve[_t+256+Z]=Ve[_t+384+Z]=Ve[_t+0+Z];for(Z=0;16>Z;++Z,Qe<<=2)Ve=ge,_t=xe+Sf[Z],ao[tt.Ob[Z]](Ve,_t),es(Qe,mt,16*+Z,Ve,_t)}else if(Ve=Fl(se,de,tt.Ob[0]),od[Ve](ge,xe),Qe!=0)for(Z=0;16>Z;++Z,Qe<<=2)es(Qe,mt,16*+Z,ge,xe+Sf[Z]);for(Z=tt.Gc,Ve=Fl(se,de,tt.Dd),dl[Ve](Ee,ke),dl[Ve](Me,st),Qe=mt,Ve=Ee,_t=ke,255&(tt=Z>>0)&&(170&tt?mc(Qe,256,Ve,_t):To(Qe,256,Ve,_t)),tt=Me,Qe=st,255&(Z>>=8)&&(170&Z?mc(mt,320,tt,Qe):To(mt,320,tt,Qe)),de<T.Ub-1&&(n(Ke[Tt].y,0,ge,xe+480,16),n(Ke[Tt].f,0,Ee,ke+224,8),n(Ke[Tt].ea,0,Me,st+224,8)),Z=8*me*T.B,Ke=T.sa,Tt=T.ta+16*se+16*me*T.R,mt=T.qa,tt=T.ra+8*se+Z,Qe=T.Ha,Ve=T.Ia+8*se+Z,Z=0;16>Z;++Z)n(Ke,Tt+Z*T.R,ge,xe+32*Z,16);for(Z=0;8>Z;++Z)n(mt,tt+Z*T.B,Ee,ke+32*Z,8),n(Qe,Ve+Z*T.B,Me,st+32*Z,8)}}function au(T,Q,Z,se,de,me,ge,xe,Ee){var ke=[0],Me=[0],st=0,tt=Ee!=null?Ee.kd:0,Ke=Ee??new Yd;if(T==null||12>Z)return 7;Ke.data=T,Ke.w=Q,Ke.ha=Z,Q=[Q],Z=[Z],Ke.gb=[Ke.gb];e:{var Tt=Q,mt=Z,Qe=Ke.gb;if(t(T!=null),t(mt!=null),t(Qe!=null),Qe[0]=0,12<=mt[0]&&!r(T,Tt[0],"RIFF")){if(r(T,Tt[0]+8,"WEBP")){Qe=3;break e}var Ve=_e(T,Tt[0]+4);if(12>Ve||4294967286<Ve){Qe=3;break e}if(tt&&Ve>mt[0]-8){Qe=7;break e}Qe[0]=Ve,Tt[0]+=12,mt[0]-=12}Qe=0}if(Qe!=0)return Qe;for(Ve=0<Ke.gb[0],Z=Z[0];;){e:{var _t=T;mt=Q,Qe=Z;var jt=ke,kt=Me,rr=Tt=[0];if((Zt=st=[st])[0]=0,8>Qe[0])Qe=7;else{if(!r(_t,mt[0],"VP8X")){if(_e(_t,mt[0]+4)!=10){Qe=3;break e}if(18>Qe[0]){Qe=7;break e}var Xt=_e(_t,mt[0]+8),xr=1+ne(_t,mt[0]+12);if(2147483648<=xr*(_t=1+ne(_t,mt[0]+15))){Qe=3;break e}rr!=null&&(rr[0]=Xt),jt!=null&&(jt[0]=xr),kt!=null&&(kt[0]=_t),mt[0]+=18,Qe[0]-=18,Zt[0]=1}Qe=0}}if(st=st[0],Tt=Tt[0],Qe!=0)return Qe;if(mt=!!(2&Tt),!Ve&&st)return 3;if(me!=null&&(me[0]=!!(16&Tt)),ge!=null&&(ge[0]=mt),xe!=null&&(xe[0]=0),ge=ke[0],Tt=Me[0],st&&mt&&Ee==null){Qe=0;break}if(4>Z){Qe=7;break}if(Ve&&st||!Ve&&!st&&!r(T,Q[0],"ALPH")){Z=[Z],Ke.na=[Ke.na],Ke.P=[Ke.P],Ke.Sa=[Ke.Sa];e:{Xt=T,Qe=Q,Ve=Z;var Zt=Ke.gb;jt=Ke.na,kt=Ke.P,rr=Ke.Sa,xr=22,t(Xt!=null),t(Ve!=null),_t=Qe[0];var Dn=Ve[0];for(t(jt!=null),t(rr!=null),jt[0]=null,kt[0]=null,rr[0]=0;;){if(Qe[0]=_t,Ve[0]=Dn,8>Dn){Qe=7;break e}var zn=_e(Xt,_t+4);if(4294967286<zn){Qe=3;break e}var An=8+zn+1&-2;if(xr+=An,0<Zt&&xr>Zt){Qe=3;break e}if(!r(Xt,_t,"VP8 ")||!r(Xt,_t,"VP8L")){Qe=0;break e}if(Dn[0]<An){Qe=7;break e}r(Xt,_t,"ALPH")||(jt[0]=Xt,kt[0]=_t+8,rr[0]=zn),_t+=An,Dn-=An}}if(Z=Z[0],Ke.na=Ke.na[0],Ke.P=Ke.P[0],Ke.Sa=Ke.Sa[0],Qe!=0)break}Z=[Z],Ke.Ja=[Ke.Ja],Ke.xa=[Ke.xa];e:if(Zt=T,Qe=Q,Ve=Z,jt=Ke.gb[0],kt=Ke.Ja,rr=Ke.xa,Xt=Qe[0],_t=!r(Zt,Xt,"VP8 "),xr=!r(Zt,Xt,"VP8L"),t(Zt!=null),t(Ve!=null),t(kt!=null),t(rr!=null),8>Ve[0])Qe=7;else{if(_t||xr){if(Zt=_e(Zt,Xt+4),12<=jt&&Zt>jt-12){Qe=3;break e}if(tt&&Zt>Ve[0]-8){Qe=7;break e}kt[0]=Zt,Qe[0]+=8,Ve[0]-=8,rr[0]=xr}else rr[0]=5<=Ve[0]&&Zt[Xt+0]==47&&!(Zt[Xt+4]>>5),kt[0]=Ve[0];Qe=0}if(Z=Z[0],Ke.Ja=Ke.Ja[0],Ke.xa=Ke.xa[0],Q=Q[0],Qe!=0)break;if(4294967286<Ke.Ja)return 3;if(xe==null||mt||(xe[0]=Ke.xa?2:1),ge=[ge],Tt=[Tt],Ke.xa){if(5>Z){Qe=7;break}xe=ge,tt=Tt,mt=me,T==null||5>Z?T=0:5<=Z&&T[Q+0]==47&&!(T[Q+4]>>5)?(Ve=[0],Zt=[0],jt=[0],V(kt=new F,T,Q,Z),bt(kt,Ve,Zt,jt)?(xe!=null&&(xe[0]=Ve[0]),tt!=null&&(tt[0]=Zt[0]),mt!=null&&(mt[0]=jt[0]),T=1):T=0):T=0}else{if(10>Z){Qe=7;break}xe=Tt,T==null||10>Z||!Zs(T,Q+3,Z-3)?T=0:(tt=T[Q+0]|T[Q+1]<<8|T[Q+2]<<16,mt=16383&(T[Q+7]<<8|T[Q+6]),T=16383&(T[Q+9]<<8|T[Q+8]),1&tt||3<(tt>>1&7)||!(tt>>4&1)||tt>>5>=Ke.Ja||!mt||!T?T=0:(ge&&(ge[0]=mt),xe&&(xe[0]=T),T=1))}if(!T||(ge=ge[0],Tt=Tt[0],st&&(ke[0]!=ge||Me[0]!=Tt)))return 3;Ee!=null&&(Ee[0]=Ke,Ee.offset=Q-Ee.w,t(4294967286>Q-Ee.w),t(Ee.offset==Ee.ha-Z));break}return Qe==0||Qe==7&&st&&Ee==null?(me!=null&&(me[0]|=Ke.na!=null&&0<Ke.na.length),se!=null&&(se[0]=ge),de!=null&&(de[0]=Tt),0):Qe}function Zd(T,Q,Z){var se=Q.width,de=Q.height,me=0,ge=0,xe=se,Ee=de;if(Q.Da=T!=null&&0<T.Da,Q.Da&&(xe=T.cd,Ee=T.bd,me=T.v,ge=T.j,11>Z||(me&=-2,ge&=-2),0>me||0>ge||0>=xe||0>=Ee||me+xe>se||ge+Ee>de))return 0;if(Q.v=me,Q.j=ge,Q.va=me+xe,Q.o=ge+Ee,Q.U=xe,Q.T=Ee,Q.da=T!=null&&0<T.da,Q.da){if(!Ie(xe,Ee,Z=[T.ib],me=[T.hb]))return 0;Q.ib=Z[0],Q.hb=me[0]}return Q.ob=T!=null&&T.ob,Q.Kb=T==null||!T.Sd,Q.da&&(Q.ob=Q.ib<3*se/4&&Q.hb<3*de/4,Q.Kb=0),1}function zh(T){if(T==null)return 2;if(11>T.S){var Q=T.f.RGBA;Q.fb+=(T.height-1)*Q.A,Q.A=-Q.A}else Q=T.f.kb,T=T.height,Q.O+=(T-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(T-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(T-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(T-1)*Q.lb,Q.lb=-Q.lb);return 0}function pf(T,Q,Z,se){if(se==null||0>=T||0>=Q)return 2;if(Z!=null){if(Z.Da){var de=Z.cd,me=Z.bd,ge=-2&Z.v,xe=-2&Z.j;if(0>ge||0>xe||0>=de||0>=me||ge+de>T||xe+me>Q)return 2;T=de,Q=me}if(Z.da){if(!Ie(T,Q,de=[Z.ib],me=[Z.hb]))return 2;T=de[0],Q=me[0]}}se.width=T,se.height=Q;e:{var Ee=se.width,ke=se.height;if(T=se.S,0>=Ee||0>=ke||!(T>=Pi&&13>T))T=2;else{if(0>=se.Rd&&se.sd==null){ge=me=de=Q=0;var Me=(xe=Ee*bE[T])*ke;if(11>T||(me=(ke+1)/2*(Q=(Ee+1)/2),T==12&&(ge=(de=Ee)*ke)),(ke=s(Me+2*me+ge))==null){T=1;break e}se.sd=ke,11>T?((Ee=se.f.RGBA).eb=ke,Ee.fb=0,Ee.A=xe,Ee.size=Me):((Ee=se.f.kb).y=ke,Ee.O=0,Ee.fa=xe,Ee.Fd=Me,Ee.f=ke,Ee.N=0+Me,Ee.Ab=Q,Ee.Cd=me,Ee.ea=ke,Ee.W=0+Me+me,Ee.Db=Q,Ee.Ed=me,T==12&&(Ee.F=ke,Ee.J=0+Me+2*me),Ee.Tc=ge,Ee.lb=de)}if(Q=1,de=se.S,me=se.width,ge=se.height,de>=Pi&&13>de)if(11>de)T=se.f.RGBA,Q&=(xe=Math.abs(T.A))*(ge-1)+me<=T.size,Q&=xe>=me*bE[de],Q&=T.eb!=null;else{T=se.f.kb,xe=(me+1)/2,Me=(ge+1)/2,Ee=Math.abs(T.fa),ke=Math.abs(T.Ab);var st=Math.abs(T.Db),tt=Math.abs(T.lb),Ke=tt*(ge-1)+me;Q&=Ee*(ge-1)+me<=T.Fd,Q&=ke*(Me-1)+xe<=T.Cd,Q=(Q&=st*(Me-1)+xe<=T.Ed)&Ee>=me&ke>=xe&st>=xe,Q&=T.y!=null,Q&=T.f!=null,Q&=T.ea!=null,de==12&&(Q&=tt>=me,Q&=Ke<=T.Tc,Q&=T.F!=null)}else Q=0;T=Q?0:2}}return T!=0||Z!=null&&Z.fd&&(T=zh(se)),T}var Is=64,eA=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],gf=24,xf=32,$h=8,ko=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ye("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(T){return T},N.Predictor2=function(T,Q,Z){return Q[Z+0]},N.Predictor3=function(T,Q,Z){return Q[Z+1]},N.Predictor4=function(T,Q,Z){return Q[Z-1]},N.Predictor5=function(T,Q,Z){return Re(Re(T,Q[Z+1]),Q[Z+0])},N.Predictor6=function(T,Q,Z){return Re(T,Q[Z-1])},N.Predictor7=function(T,Q,Z){return Re(T,Q[Z+0])},N.Predictor8=function(T,Q,Z){return Re(Q[Z-1],Q[Z+0])},N.Predictor9=function(T,Q,Z){return Re(Q[Z+0],Q[Z+1])},N.Predictor10=function(T,Q,Z){return Re(Re(T,Q[Z-1]),Re(Q[Z+0],Q[Z+1]))},N.Predictor11=function(T,Q,Z){var se=Q[Z+0];return 0>=ct(se>>24&255,T>>24&255,(Q=Q[Z-1])>>24&255)+ct(se>>16&255,T>>16&255,Q>>16&255)+ct(se>>8&255,T>>8&255,Q>>8&255)+ct(255&se,255&T,255&Q)?se:T},N.Predictor12=function(T,Q,Z){var se=Q[Z+0];return(qe((T>>24&255)+(se>>24&255)-((Q=Q[Z-1])>>24&255))<<24|qe((T>>16&255)+(se>>16&255)-(Q>>16&255))<<16|qe((T>>8&255)+(se>>8&255)-(Q>>8&255))<<8|qe((255&T)+(255&se)-(255&Q)))>>>0},N.Predictor13=function(T,Q,Z){var se=Q[Z-1];return(Ze((T=Re(T,Q[Z+0]))>>24&255,se>>24&255)<<24|Ze(T>>16&255,se>>16&255)<<16|Ze(T>>8&255,se>>8&255)<<8|Ze(T>>0&255,se>>0&255))>>>0};var sb=N.PredictorAdd0;N.PredictorAdd1=pt,ye("Predictor2","PredictorAdd2"),ye("Predictor3","PredictorAdd3"),ye("Predictor4","PredictorAdd4"),ye("Predictor5","PredictorAdd5"),ye("Predictor6","PredictorAdd6"),ye("Predictor7","PredictorAdd7"),ye("Predictor8","PredictorAdd8"),ye("Predictor9","PredictorAdd9"),ye("Predictor10","PredictorAdd10"),ye("Predictor11","PredictorAdd11"),ye("Predictor12","PredictorAdd12"),ye("Predictor13","PredictorAdd13");var $m=N.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var Vg,Ol=N.ColorIndexInverseTransform,ei=N.MapARGB,tA=N.VP8LColorIndexInverseTransformAlpha,Gm=N.MapAlpha,ed=N.VP8LPredictorsAdd=[];ed.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var rA,no,bi,nA,Bo,fc,su,hc,Ga,mc,xs,To,vf,iu,Gh,aA,sA,iA,bf,Kh,oA,td,yf,Ka,cl,hn,mn,va,ts=s(511),Dl=s(2041),lA=s(225),cA=s(767),rd=0,zg=Dl,wf=lA,ti=cA,Pl=ts,Pi=0,qh=1,ou=2,Km=3,Ef=4,nd=5,$g=6,qm=7,uA=8,ad=9,Wh=10,Gg=[2,3,7],Rl=[3,3,11],ul=[280,256,256,256,40],Cf=[0,1,1,1,0],sd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],id=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],_f=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],mE=8,Wm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Xm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Fs=null,qa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Mn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],dA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],lu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ib=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Nf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],pE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],od=[],ao=[],dl=[],gE=1,Xh=2,cu=[],ri=[];vt("UpsampleRgbLinePair",ve,3),vt("UpsampleBgrLinePair",ze,3),vt("UpsampleRgbaLinePair",qr,4),vt("UpsampleBgraLinePair",bn,4),vt("UpsampleArgbLinePair",Ir,4),vt("UpsampleRgba4444LinePair",Ut,2),vt("UpsampleRgb565LinePair",ot,2);var ld=N.UpsampleRgbLinePair,AA=N.UpsampleBgrLinePair,uu=N.UpsampleRgbaLinePair,Kg=N.UpsampleBgraLinePair,qg=N.UpsampleArgbLinePair,Yh=N.UpsampleRgba4444LinePair,Wg=N.UpsampleRgb565LinePair,du=16,Os=1<<du-1,fA=-227,Xg=482,rB=6,xE=0,nB=s(256),Ds=s(256),ob=s(256),Ym=s(256),Jm=s(Xg-fA),lb=s(Xg-fA);ea("YuvToRgbRow",ve,3),ea("YuvToBgrRow",ze,3),ea("YuvToRgbaRow",qr,4),ea("YuvToBgraRow",bn,4),ea("YuvToArgbRow",Ir,4),ea("YuvToRgba4444Row",Ut,2),ea("YuvToRgb565Row",ot,2);var Sf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],cd=[0,2,8],aB=[8,7,6,4,4,2,2,2,1,1,1,1],vE=1;this.WebPDecodeRGBA=function(T,Q,Z,se,de){var me=qh,ge=new Yu,xe=new oa;ge.ba=xe,xe.S=me,xe.width=[xe.width],xe.height=[xe.height];var Ee=xe.width,ke=xe.height,Me=new Ba;if(Me==null||T==null)var st=2;else t(Me!=null),st=au(T,Q,Z,Me.width,Me.height,Me.Pd,Me.Qd,Me.format,null);if(st!=0?Ee=0:(Ee!=null&&(Ee[0]=Me.width[0]),ke!=null&&(ke[0]=Me.height[0]),Ee=1),Ee){xe.width=xe.width[0],xe.height=xe.height[0],se!=null&&(se[0]=xe.width),de!=null&&(de[0]=xe.height);e:{if(se=new js,(de=new Yd).data=T,de.w=Q,de.ha=Z,de.kd=1,Q=[0],t(de!=null),((T=au(de.data,de.w,de.ha,null,null,null,Q,null,de))==0||T==7)&&Q[0]&&(T=4),(Q=T)==0){if(t(ge!=null),se.data=de.data,se.w=de.w+de.offset,se.ha=de.ha-de.offset,se.put=xt,se.ac=Je,se.bc=wt,se.ma=ge,de.xa){if((T=dt())==null){ge=1;break e}if(function(tt,Ke){var Tt=[0],mt=[0],Qe=[0];t:for(;;){if(tt==null)return 0;if(Ke==null)return tt.a=2,0;if(tt.l=Ke,tt.a=0,V(tt.m,Ke.data,Ke.w,Ke.ha),!bt(tt.m,Tt,mt,Qe)){tt.a=3;break t}if(tt.xb=Xh,Ke.width=Tt[0],Ke.height=mt[0],!$e(Tt[0],mt[0],1,tt,null))break t;return 1}return t(tt.a!=0),0}(T,se)){if(se=(Q=pf(se.width,se.height,ge.Oa,ge.ba))==0){t:{se=T;r:for(;;){if(se==null){se=0;break t}if(t(se.s.yc!=null),t(se.s.Ya!=null),t(0<se.s.Wb),t((Z=se.l)!=null),t((de=Z.ma)!=null),se.xb!=0){if(se.ca=de.ba,se.tb=de.tb,t(se.ca!=null),!Zd(de.Oa,Z,Km)){se.a=2;break r}if(!rt(se,Z.width)||Z.da)break r;if((Z.da||Or(se.ca.S))&&Ge(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&Ge()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!De(se.s.vb,se.s.Wa.Xa)){se.a=1;break r}se.xb=0}if(!je(se,se.V,se.Ba,se.c,se.i,Z.o,Te))break r;de.Dc=se.Ma,se=1;break t}t(se.a!=0),se=0}se=!se}se&&(Q=T.a)}else Q=T.a}else{if((T=new pi)==null){ge=1;break e}if(T.Fa=de.na,T.P=de.P,T.qc=de.Sa,Gd(T,se)){if((Q=pf(se.width,se.height,ge.Oa,ge.ba))==0){if(T.Aa=0,Z=ge.Oa,t((de=T)!=null),Z!=null){if(0<(Ee=0>(Ee=Z.Md)?0:100<Ee?255:255*Ee/100)){for(ke=Me=0;4>ke;++ke)12>(st=de.pb[ke]).lc&&(st.ia=Ee*aB[0>st.lc?0:st.lc]>>3),Me|=st.ia;Me&&(alert("todo:VP8InitRandom"),de.ia=1)}de.Ga=Z.Id,100<de.Ga?de.Ga=100:0>de.Ga&&(de.Ga=0)}uf(T,se)||(Q=T.a)}}else Q=T.a}Q==0&&ge.Oa!=null&&ge.Oa.fd&&(Q=zh(ge.ba))}ge=Q}me=ge!=0?null:11>me?xe.f.RGBA.eb:xe.f.kb.y}else me=null;return me};var bE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(N,B){for(var R="",P=0;P<4;P++)R+=String.fromCharCode(N[B++]);return R}function d(N,B){return(N[B+0]<<0|N[B+1]<<8|N[B+2]<<16)>>>0}function f(N,B){return(N[B+0]<<0|N[B+1]<<8|N[B+2]<<16|N[B+3]<<24)>>>0}new c;var h=[0],p=[0],g=[],x=new c,b=e,y=function(N,B){var R={},P=0,D=!1,L=0,M=0;if(R.frames=[],!function(z,Y,te,ae){for(var le=0;le<ae;le++)if(z[Y+le]!=te.charCodeAt(le))return!0;return!1}(N,B,"RIFF",4)){var J,H;for(f(N,B+=4),B+=8;B<N.length;){var K=u(N,B),V=f(N,B+=4);B+=4;var G=V+(1&V);switch(K){case"VP8 ":case"VP8L":R.frames[P]===void 0&&(R.frames[P]={}),(F=R.frames[P]).src_off=D?M:B-8,F.src_size=L+V+8,P++,D&&(D=!1,L=0,M=0);break;case"VP8X":(F=R.header={}).feature_flags=N[B];var X=B+4;F.canvas_width=1+d(N,X),X+=3,F.canvas_height=1+d(N,X),X+=3;break;case"ALPH":D=!0,L=G+8,M=B-8;break;case"ANIM":(F=R.header).bgcolor=f(N,B),X=B+4,F.loop_count=(J=N)[(H=X)+0]<<0|J[H+1]<<8,X+=2;break;case"ANMF":var ee,F;(F=R.frames[P]={}).offset_x=2*d(N,B),B+=3,F.offset_y=2*d(N,B),B+=3,F.width=1+d(N,B),B+=3,F.height=1+d(N,B),B+=3,F.duration=d(N,B),B+=3,ee=N[B++],F.dispose=1&ee,F.blend=ee>>1&1}K!="ANMF"&&(B+=G)}return R}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var w=y.header?y.header:null,_=y.frames?y.frames:null;if(w){w.loop_counter=w.loop_count,h=[w.canvas_height],p=[w.canvas_width];for(var j=0;j<_.length&&_[j].blend!=0;j++);}var k=_[0],I=x.WebPDecodeRGBA(b,k.src_off,k.src_size,p,h);k.rgba=I,k.imgwidth=p[0],k.imgheight=h[0];for(var E=0;E<p[0]*h[0]*4;E++)g[E]=I[E];return this.width=p,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof MF=="function"},r=function(h,p,g,x){var b=4,y=i;switch(x){case e.image_compression.FAST:b=1,y=s;break;case e.image_compression.MEDIUM:b=6,y=o;break;case e.image_compression.SLOW:b=9,y=c}h=n(h,p,g,y);var w=MF(h,{level:b});return e.__addimage__.arrayBufferToBinaryString(w)},n=function(h,p,g,x){for(var b,y,w,_=h.length/p,j=new Uint8Array(h.length+_),k=d(),I=0;I<_;I+=1){if(w=I*p,b=h.subarray(w,w+p),x)j.set(x(b,g,y),w+I);else{for(var E,N=k.length,B=[];E<N;E+=1)B[E]=k[E](b,g,y);var R=f(B.concat());j.set(B[R],w+I)}y=b}return j},a=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var g,x=[],b=h.length;x[0]=1;for(var y=0;y<b;y+=1)g=h[y-p]||0,x[y+1]=h[y]-g+256&255;return x},i=function(h,p,g){var x,b=[],y=h.length;b[0]=2;for(var w=0;w<y;w+=1)x=g&&g[w]||0,b[w+1]=h[w]-x+256&255;return b},o=function(h,p,g){var x,b,y=[],w=h.length;y[0]=3;for(var _=0;_<w;_+=1)x=h[_-p]||0,b=g&&g[_]||0,y[_+1]=h[_]+256-(x+b>>>1)&255;return y},c=function(h,p,g){var x,b,y,w,_=[],j=h.length;_[0]=4;for(var k=0;k<j;k+=1)x=h[k-p]||0,b=g&&g[k]||0,y=g&&g[k-p]||0,w=u(x,b,y),_[k+1]=h[k]-w+256&255;return _},u=function(h,p,g){if(h===p&&p===g)return h;var x=Math.abs(p-g),b=Math.abs(h-g),y=Math.abs(h+p-g-g);return x<=b&&x<=y?h:b<=y?p:g},d=function(){return[a,s,i,o,c]},f=function(h){var p=h.map(function(g){return g.reduce(function(x,b){return x+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(h,p,g,x){var b,y,w,_,j,k,I,E,N,B,R,P,D,L,M,J=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(w=new J8e(h)).imgData,y=w.bits,b=w.colorSpace,j=w.colors,[4,6].indexOf(w.colorType)!==-1){if(w.bits===8){N=(E=w.pixelBitlength==32?new Uint32Array(w.decodePixels().buffer):w.pixelBitlength==16?new Uint16Array(w.decodePixels().buffer):new Uint8Array(w.decodePixels().buffer)).length,R=new Uint8Array(N*w.colors),B=new Uint8Array(N);var K,V=w.pixelBitlength-w.bits;for(L=0,M=0;L<N;L++){for(D=E[L],K=0;K<V;)R[M++]=D>>>K&255,K+=w.bits;B[L]=D>>>K&255}}if(w.bits===16){N=(E=new Uint32Array(w.decodePixels().buffer)).length,R=new Uint8Array(N*(32/w.pixelBitlength)*w.colors),B=new Uint8Array(N*(32/w.pixelBitlength)),P=w.colors>1,L=0,M=0;for(var G=0;L<N;)D=E[L++],R[M++]=D>>>0&255,P&&(R[M++]=D>>>16&255,D=E[L++],R[M++]=D>>>0&255),B[G++]=D>>>16&255;y=8}x!==e.image_compression.NONE&&t()?(h=r(R,w.width*w.colors,w.colors,x),I=r(B,w.width,1,x)):(h=R,I=B,J=void 0)}if(w.colorType===3&&(b=this.color_spaces.INDEXED,k=w.palette,w.transparency.indexed)){var X=w.transparency.indexed,ee=0;for(L=0,N=X.length;L<N;++L)ee+=X[L];if((ee/=255)===N-1&&X.indexOf(0)!==-1)_=[X.indexOf(0)];else if(ee!==N){for(E=w.decodePixels(),B=new Uint8Array(E.length),L=0,N=E.length;L<N;L++)B[L]=X[E[L]];I=r(B,w.width,1)}}var F=function(z){var Y;switch(z){case e.image_compression.FAST:Y=11;break;case e.image_compression.MEDIUM:Y=13;break;case e.image_compression.SLOW:Y=14;break;default:Y=12}return Y}(x);return J===this.decode.FLATE_DECODE&&(H="/Predictor "+F+" "),H+="/Colors "+j+" /BitsPerComponent "+y+" /Columns "+w.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:g,data:h,index:p,filter:J,decodeParameters:H,transparency:_,palette:k,sMask:I,predictor:F,width:w.width,height:w.height,bitsPerComponent:y,colorSpace:b}}}})(vr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new Z8e(t),i=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:o},d=new M3(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(vr.API),gd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},gd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){_a.log("bit decode error:"+r)}},gd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[i+4*o]=c.blue,this.data[i+4*o+1]=c.green,this.data[i+4*o+2]=c.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},gd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},gd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},gd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},gd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},gd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},gd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},gd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new gd(t,!1),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new M3(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),LG.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new LG(t),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new M3(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(vr.API),vr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],p=n[u+3];s[o++]=d,s[o++]=f,s[o++]=h,i[c++]=p}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},vr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Cx=vr.API,GC=Cx.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,p=e.length,g=0,x=o[0]||c,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?b.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&ma(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,b.push((o[n]||x)/c+h)),g=n;return b},OG=Cx.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Cx.processArabic&&(e=Cx.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:GC.apply(this,arguments).reduce(function(s,i){return s+i},0)},DG=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var c=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(c,s)),o=0,c=s),o+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},PG=function(e,t,r){r||(r={});var n,a,s,i,o,c,u,d=[],f=[d],h=r.textIndent||0,p=0,g=0,x=e.split(" "),b=GC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?x[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),w=[];x.map(function(j){(j=j.split(/\s*\n/)).length>1?w=w.concat(j.map(function(k,I){return(I&&k.length?`
`:"")+k})):w.push(j[0])}),x=w,c=OG.apply(this,[y,r])}for(s=0,i=x.length;s<i;s++){var _=0;if(n=x[s],c&&n[0]==`
`&&(n=n.substr(1),_=1),h+p+(g=(a=GC.apply(this,[n,r])).reduce(function(j,k){return j+k},0))>t||_){if(g>t){for(o=DG.apply(this,[n,a,t-(h+p),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(j,k){return j+k},0)}else d=[n];f.push(d),h=g+c,p=b}else d.push(n),h+=p+g,p=b}return u=c?function(j,k){return(k?y:"")+j.join(" ")}:function(j){return j.join(" ")},f.map(u)},Cx.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(PG.apply(this,[n[o],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},i=e.__fontmetrics__.compress=function(f){var h,p,g,x,b=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=s(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),x="-"):(g=s(h).slice(2),x=""),g=x+g.slice(0,-1)+n[g.slice(-1)];else{if(ma(h)!=="object")throw new Error("Don't know what to do with value type "+ma(h)+".");g=i(h)}b.push(p+g)}return b.push("}"),b.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,g,x,b={},y=1,w=b,_=[],j="",k="",I=f.length-1,E=1;E<I;E+=1)(x=f[E])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(x):x=="{"?(_.push([w,g]),w={},g=void 0):x=="}"?((p=_.pop())[0][p[1]]=w,g=void 0,w=p[0]):x=="-"?y=-1:g===void 0?r.hasOwnProperty(x)?(j+=r[x],g=parseInt(j,16)*y,y=1,j=""):j+=x:r.hasOwnProperty(x)?(k+=r[x],w[g]=parseInt(k,16)*y,y=1,g=void 0,k=""):k+=x;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(vr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(rw(o)),i.metadata=e.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(vr),function(e){function t(){return(Mr.canvg?Promise.resolve(Mr.canvg):u1(()=>import("./index.es-D5_M-kZ_.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}vr.API.addSvgAsImage=function(r,n,a,s,i,o,c,u){if(isNaN(n)||isNaN(a))throw _a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw _a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,c,u)})}}(),vr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},vr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),c=[],u=0,d=0,f=0;function h(g,x){var b,y=!1;for(b=0;b<g.length;b+=1)g[b]===x&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=o.length;for(f=0;f<p;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(ma(e)==="object"){for(a in e)if(s=e[a],h(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,x=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?x.push("/"+g+" /"+r[g].value):x.push("/"+g+" "+r[g].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(vr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var o,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(o=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(o=Object.keys(s).sort(function(p,g){return p-g})).length;f<h;f++)i=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var x=u();d({data:p,addLength1:!0,objectId:x}),c("endobj");var b=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Xx(o.fontName)),c("/FontFile2 "+x+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var w=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Xx(o.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+Xx(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+w+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var x=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var b=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Xx(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+Xx(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,p=f.activeFontKey,g=f.fonts,x=p,b="",y=0,w="",_=g[x].encoding;if(g[x].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(w=o,x=p,Array.isArray(o)&&(w=o[0]),y=0;y<w.length;y+=1)g[x].metadata.hasOwnProperty("cmap")&&(i=g[x].metadata.cmap.unicode.codeMap[w[y].charCodeAt(0)]),i||w[y].charCodeAt(0)<256&&g[x].metadata.hasOwnProperty("Unicode")?b+=w[y]:b+="";var j="";return parseInt(x.slice(1))<14||_==="WinAnsiEncoding"?j=h(b,x).split("").map(function(k){return k.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(j=r(b,g[x])),f.isHex=!0,{text:j,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var i=s.text||"",o=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},c,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},c,{text:i})).text}])}(vr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(vr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,o,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),w=!1,_=0;this.__bidiEngine__={};var j=function(P){var D=P.charCodeAt(),L=D>>8,M=x[L];return M!==void 0?f[256*M+(255&D)]:L===252||L===253?"AL":y.test(L)?"L":L===8?"R":"N"},k=function(P){for(var D,L=0;L<P.length;L++){if((D=j(P.charAt(L)))==="L")return!1;if(D==="R")return!0}return!1},I=function(P,D,L,M){var J,H,K,V,G=D[M];switch(G){case"L":case"R":w=!1;break;case"N":case"AN":break;case"EN":w&&(G="AN");break;case"AL":w=!0,G="R";break;case"WS":G="N";break;case"CS":M<1||M+1>=D.length||(J=L[M-1])!=="EN"&&J!=="AN"||(H=D[M+1])!=="EN"&&H!=="AN"?G="N":w&&(H="AN"),G=H===J?H:"N";break;case"ES":G=(J=M>0?L[M-1]:"B")==="EN"&&M+1<D.length&&D[M+1]==="EN"?"EN":"N";break;case"ET":if(M>0&&L[M-1]==="EN"){G="EN";break}if(w){G="N";break}for(K=M+1,V=D.length;K<V&&D[K]==="ET";)K++;G=K<V&&D[K]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(V=D.length,K=M+1;K<V&&D[K]==="NSM";)K++;if(K<V){var X=P[M],ee=X>=1425&&X<=2303||X===64286;if(J=D[K],ee&&(J==="R"||J==="AL")){G="R";break}}}G=M<1||(J=D[M-1])==="B"?"N":L[M-1];break;case"B":w=!1,a=!0,G=_;break;case"S":s=!0,G="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":w=!1;break;case"BN":G="N"}return G},E=function(P,D,L){var M=P.split("");return L&&N(M,L,{hiLevel:_}),M.reverse(),D&&D.reverse(),M.join("")},N=function(P,D,L){var M,J,H,K,V,G=-1,X=P.length,ee=0,F=[],z=_?p:h,Y=[];for(w=!1,a=!1,s=!1,J=0;J<X;J++)Y[J]=j(P[J]);for(H=0;H<X;H++){if(V=ee,F[H]=I(P,Y,F,H),M=240&(ee=z[V][g[F[H]]]),ee&=15,D[H]=K=z[ee][5],M>0)if(M===16){for(J=G;J<H;J++)D[J]=1;G=-1}else G=-1;if(z[ee][6])G===-1&&(G=H);else if(G>-1){for(J=G;J<H;J++)D[J]=K;G=-1}Y[H]==="B"&&(D[H]=0),L.hiLevel|=K}s&&function(te,ae,le){for(var ie=0;ie<le;ie++)if(te[ie]==="S"){ae[ie]=_;for(var ce=ie-1;ce>=0&&te[ce]==="WS";ce--)ae[ce]=_}}(Y,D,X)},B=function(P,D,L,M,J){if(!(J.hiLevel<P)){if(P===1&&_===1&&!a)return D.reverse(),void(L&&L.reverse());for(var H,K,V,G,X=D.length,ee=0;ee<X;){if(M[ee]>=P){for(V=ee+1;V<X&&M[V]>=P;)V++;for(G=ee,K=V-1;G<K;G++,K--)H=D[G],D[G]=D[K],D[K]=H,L&&(H=L[G],L[G]=L[K],L[K]=H);ee=V}ee++}}},R=function(P,D,L){var M=P.split(""),J={hiLevel:_};return L||(L=[]),N(M,L,J),function(H,K,V){if(V.hiLevel!==0&&d)for(var G,X=0;X<H.length;X++)K[X]===1&&(G=b.indexOf(H[X]))>=0&&(H[X]=b[G+1])}(M,L,J),B(2,M,D,L,J),B(1,M,D,L,J),M.join("")};return this.__bidiEngine__.doBidiReorder=function(P,D,L){if(function(J,H){if(H)for(var K=0;K<J.length;K++)H[K]=K;o===void 0&&(o=k(J)),u===void 0&&(u=k(J))}(P,D),i||!c||u)if(i&&c&&o^u)_=o?1:0,P=E(P,D,L);else if(!i&&c&&u)_=o?1:0,P=R(P,D,L),P=E(P,D);else if(!i||o||c||u){if(i&&!c&&o^u)P=E(P,D),o?(_=0,P=R(P,D,L)):(_=1,P=R(P,D,L),P=E(P,D));else if(i&&o&&!c&&u)_=1,P=R(P,D,L),P=E(P,D);else if(!i&&!c&&o^u){var M=d;o?(_=1,P=R(P,D,L),_=0,d=!1,P=R(P,D,L),d=M):(_=0,P=R(P,D,L),P=E(P,D),_=1,d=!1,P=R(P,D,L),d=M,P=E(P,D))}}else _=0,P=R(P,D,L);else _=o?1:0,P=R(P,D,L);return P},this.__bidiEngine__.setOptions=function(P){P&&(i=P.isInputVisual,c=P.isOutputVisual,o=P.isInputRtl,u=P.isOutputRtl,d=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(vr),vr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Em(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new hLe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new eLe(this.contents),this.head=new rLe(this),this.name=new oLe(this),this.cmap=new Use(this),this.toUnicode={},this.hhea=new nLe(this),this.maxp=new lLe(this),this.hmtx=new cLe(this),this.post=new sLe(this),this.os2=new aLe(this),this.loca=new fLe(this),this.glyf=new uLe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,c,u;for(u=[],i=0,o=(c=this.bbox).length;i<o;i++)t=c[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,o;for(i=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Vd,Em=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),eLe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,o,c,u,d,f,h,p,g,x;for(x in p=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(p)/c),i=Math.floor(f/c),d=16*p-f,(a=new Em).writeInt(this.scalarType),a.writeShort(p),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*p,u=a.pos+s,o=null,g=[],r)for(h=r[x],a.writeString(x),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),x==="head"&&(o=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=Qse.call(r);r.length%4;)r.push(0);for(s=new Em(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),tLe={}.hasOwnProperty,nf=function(e,t){for(var r in t)tLe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Vd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var rLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,Vd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Em).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),MG=function(){function e(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,s=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),t.pos+=2,x=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),u=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),d=function(){var j,k;for(k=[],c=j=0;0<=h?j<h:j>h;c=0<=h?++j:--j)k.push(t.readUInt16());return k}(),a=(this.length-t.pos+this.offset)/2,o=function(){var j,k;for(k=[],c=j=0;0<=a?j<a:j>a;c=0<=a?++j:--j)k.push(t.readUInt16());return k}(),c=y=0,_=s.length;y<_;c=++y)for(b=s[c],n=w=g=x[c];g<=b?w<=b:w>=b;n=g<=b?++w:--w)d[c]===0?i=n+u[c]:(i=o[d[c]/2+(n-g)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}t.pos=f}return e.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,_,j,k,I,E,N,B,R,P,D,L,M,J,H,K,V,G,X,ee,F,z,Y,te,ae,le,ie,ce,pe,Be,ne;switch(M=new Em,i=Object.keys(t).sort(function(_e,De){return _e-De}),r){case"macroman":for(x=0,b=function(){var _e=[];for(g=0;g<256;++g)_e.push(0);return _e}(),w={0:0},s={},J=0,G=i.length;J<G;J++)w[ce=t[a=i[J]]]==null&&(w[ce]=++x),s[a]={old:t[a],new:w[t[a]]},b[a]=w[t[a]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(b),{charMap:s,subtable:M.data,maxGlyphID:x+1};case"unicode":for(D=[],f=[],_=0,w={},n={},y=u=null,H=0,X=i.length;H<X;H++)w[k=t[a=i[H]]]==null&&(w[k]=++_),n[a]={old:k,new:w[k]},o=w[k]-a,y!=null&&o===u||(y&&f.push(y),D.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),D.push(65535),R=2*(B=D.length),N=2*Math.pow(Math.log(B)/Math.LN2,2),h=Math.log(N/2)/Math.LN2,E=2*B-N,c=[],I=[],p=[],g=K=0,ee=D.length;K<ee;g=++K){if(P=D[g],d=f[g],P===65535){c.push(0),I.push(0);break}if(P-(L=n[P].new)>=32768)for(c.push(0),I.push(2*(p.length+B-g)),a=V=P;P<=d?V<=d:V>=d;a=P<=d?++V:--V)p.push(n[a].new);else c.push(L-P),I.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*B+2*p.length),M.writeUInt16(0),M.writeUInt16(R),M.writeUInt16(N),M.writeUInt16(h),M.writeUInt16(E),le=0,F=f.length;le<F;le++)a=f[le],M.writeUInt16(a);for(M.writeUInt16(0),ie=0,z=D.length;ie<z;ie++)a=D[ie],M.writeUInt16(a);for(pe=0,Y=c.length;pe<Y;pe++)o=c[pe],M.writeUInt16(o);for(Be=0,te=I.length;Be<te;Be++)j=I[Be],M.writeUInt16(j);for(ne=0,ae=p.length;ne<ae;ne++)x=p[ne],M.writeUInt16(x);return{charMap:n,subtable:M.data,maxGlyphID:_+1}}},e}(),Use=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,Vd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new MG(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=MG.encode(r,n),(s=new Em).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),nLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,Vd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),aLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,Vd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),sLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,Vd),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t}(),iLe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},oLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,Vd),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,o,c,u,d,f,h,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},i=f=0,h=a.length;f<h;i=++f)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new iLe(d,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),lLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,Vd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),cLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,Vd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,o,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,p;for(p=[],d=0,f=(h=this.metrics).length;d<f;d++)i=h[d],p.push(i.advance);return p}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),Qse=[].slice,uLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,Vd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,o,c,u,d,f,h;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(c=new Em(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=o===-1?new ALe(c,d,h,u,f):new dLe(c,o,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,o,c,u;for(o=[],i=[],c=0,u=n.length;c<u;c++)s=r[n[c]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},t}(),dLe=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),ALe=function(){function e(t,r,n,a,s){var i,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Em(Qse.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),fLe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return nf(t,Vd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),hLe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,o,c;for(a={},i=0,o=t.length;i<o;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,x,b,y;for(a in n=Use.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),p={0:0},y=n.charMap)p[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,i)g in p||(p[g]=h++);return d=function(w){var _,j;for(_ in j={},w)j[w[_]]=_;return j}(p),f=Object.keys(d).sort(function(w,_){return w-_}),x=function(){var w,_,j;for(j=[],w=0,_=f.length;w<_;w++)o=f[w],j.push(d[o]);return j}(),s=this.font.glyf.encode(i,x,p),u=this.font.loca.encode(s.offsets,x),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();vr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function Hse(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=o*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*p,r),r+=u;return a}t-=a.getStringUnitWidth(e)*p}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var UG={},Sv=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:UG=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,c=i.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return UG||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),GF=function(e,t){return GF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},GF(e,t)};function Vse(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");GF(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var zse=function(e){Vse(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function mLe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function pLe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function zN(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function $se(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=Gse(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function Gse(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function uk(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Kse(e,t){var r=uk(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function gLe(e,t,r,n,a){var s={},i=1.3333333333333333,o=U3(t,function(_){return a.getComputedStyle(_).backgroundColor});o!=null&&(s.fillColor=o);var c=U3(t,function(_){return a.getComputedStyle(_).color});c!=null&&(s.textColor=c);var u=vLe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=i*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var p=(parseFloat(h)||0)/f;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=U3(t,function(_){return a.getComputedStyle(_)[d]});g!=null&&(s.lineColor=g);var x=["left","right","center","justify"];x.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),x=["middle","bottom","top"],x.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/i);var y=xLe(n);y&&(s.fontStyle=y);var w=(n.fontFamily||"").toLowerCase();return e.indexOf(w)!==-1&&(s.font=w),s}function xLe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function U3(e,t){var r=qse(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function qse(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:qse(e.parentElement,t):r}function vLe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=uk(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function Wse(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var p=0;p<o.rows.length;p++){var g=o.rows[p],x=(i=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),b=bLe(c,u,r,g,n,a);b&&(x==="thead"?d.push(b):x==="tfoot"?h.push(b):f.push(b))}return{head:d,body:f,foot:h}}function bLe(e,t,r,n,a,s){for(var i=new zse(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=gLe(e,c,t,u,r)),i.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:yLe(c)})}}var f=r.getComputedStyle(n);if(i.length>0&&(a||f.display!=="none"))return i}function yLe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function wLe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function eh(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s}function Xse(e,t){var r=new Sv(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();wLe(a,n,t);var s=eh({},a,n,t),i;typeof window<"u"&&(i=window);var o=ELe(a,n,t),c=CLe(a,n,t),u=_Le(r,s),d=SLe(r,s,i);return{id:t.tableId,content:d,hooks:c,styles:o,settings:u}}function ELe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=eh({},u,d,f)}else{var h=[e,t,r],p=h.map(function(g){return g[c]||{}});n[c]=eh({},p[0],p[1],p[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function CLe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function _Le(e,t){var r,n,a,s,i,o,c,u,d,f,h,p,g=uk(t.margin,40/e.scaleFactor()),x=(r=NLe(e,t.startY))!==null&&r!==void 0?r:g.top,b;t.showFoot===!0?b="everyPage":t.showFoot===!1?b="never":b=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var w=(s=t.useCss)!==null&&s!==void 0?s:!1,_=t.theme||(w?"plain":"striped"),j=!!t.horizontalPageBreak,k=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:w,theme:_,startY:x,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:b,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:j,horizontalPageBreakRepeat:k,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function NLe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function SLe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var o=Wse(e,t.html,r,i,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||kLe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function kLe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var c=0;c<i;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var KF=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),BLe=function(e){Vse(t,e);function t(r,n,a,s,i,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=s,c.column=i,c.section=s.section,c}return t}(KF),TLe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var o=0,c=r;o<c.length;o++){var u=c[o],d=new BLe(t,this,n,a,s,i),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new KF(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new KF(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),Yse=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof zse&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),c=i.padding("vertical"),u=c+o;return u>a?u:a},0)},e}(),Jse=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=uk(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),jLe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function ILe(e,t){FLe(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=qF(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=qF(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),DLe(t),PLe(t,e),OLe(t)}function FLe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=Kse(e,t);t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=zN(u.text,u.styles,e)+f;var h=zN(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/r;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function qF(e,t,r){for(var n=t,a=e.reduce(function(p,g){return p+g.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],o=i.wrappedWidth/a,c=n*o,u=i.width+c,d=r(i),f=u<d?d:u;t-=f-i.width,i.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(p){return t<0?p.width>r(p):!0});h.length&&(t=qF(h,t,r))}return t}function OLe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function DLe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(i-=1,i>1&&e.columns[o+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function PLe(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=QG(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=QG(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function QG(e,t,r,n,a){return e.map(function(s){return RLe(s,t,r,n,a)})}function RLe(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=zN(e,r,n))return e;for(;t<zN(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function Zse(e,t){var r=new Sv(e),n=LLe(t,r.scaleFactor()),a=new TLe(t,n);return ILe(r,a),r.applyStyles(r.userStyles),a}function LLe(e,t){var r=e.content,n=ULe(r.columns);if(r.head.length===0){var a=HG(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=HG(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:Q3("head",r.head,n,i,s,t),body:Q3("body",r.body,n,i,s,t),foot:Q3("foot",r.foot,n,i,s,t)}}function Q3(e,t,r,n,a,s){var i={},o=t.map(function(c,u){for(var d=0,f={},h=0,p=0,g=0,x=r;g<x.length;g++){var b=x[g];if(i[b.index]==null||i[b.index].left===0)if(p===0){var y=void 0;Array.isArray(c)?y=c[b.index-h-d]:y=c[b.dataKey];var w={};typeof y=="object"&&!Array.isArray(y)&&(w=(y==null?void 0:y.styles)||{});var _=QLe(e,b,u,a,n,s,w),j=new Jse(y,_,e);f[b.dataKey]=j,f[b.index]=j,p=j.colSpan-1,i[b.index]={left:j.rowSpan-1,times:p}}else p--,h++;else i[b.index].left--,p=i[b.index].times,d++}return new Yse(c,u,e,f)});return o}function HG(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=MLe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function MLe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function ULe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new jLe(a,t,r)})}function QLe(e,t,r,n,a,s,i){var o=pLe(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=eh({},o.table,o[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?eh({},o.alternateRow,a.alternateRowStyles):{},p=mLe(s),g=eh({},p,u,h,f);return eh(g,i)}function HLe(e,t,r){var n;r===void 0&&(r={});var a=Kse(e,t),s=new Map,i=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var p=t.columns.find(function(g){return g.dataKey===h||g.index===h});p&&!s.has(p.index)&&(s.set(p.index,!0),i.push(p.index),o.push(t.columns[p.index]),a-=p.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,i.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function VLe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=HLe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function eie(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,p){return h+p.height},0);o+=u}var d=new Sv(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(rie(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=eh({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?zLe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return Ch(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,p){var g=p===t.body.length-1;$N(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return Ch(d,t,h,s,t.columns)})),$se(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function zLe(e,t,r,n){var a=VLe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?nw(e,t,r,n,u.columns,!0):VG(e,t,n,u.columns),$Le(e,t,r,n,u.columns),H3(e,t,n,u.columns)});else for(var i=-1,o=a[0],c=function(){var u=i;if(o){e.applyStyles(e.userStyles);var d=o.columns;i>=0?nw(e,t,r,n,d,!0):VG(e,t,n,d),u=zG(e,t,i+1,n,d),H3(e,t,n,d)}var f=u-i;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),nw(e,t,r,n,h.columns,!0),zG(e,t,i+1,n,h.columns,f),H3(e,t,n,h.columns)}),i=u};i<t.body.length-1;)c()}function VG(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return Ch(e,t,s,r,n)})}function $Le(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;$N(e,t,s,o,r,n,a)})}function zG(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(c,u){var d=r+u===t.body.length-1,f=tie(e,t,d,n);c.canEntireRowFit(f,a)&&(Ch(e,t,c,n,a),o=r+u)}),o}function H3(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return Ch(e,t,s,r,n)})}function GLe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function KLe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var c=o[i],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new Jse(u.raw,u.styles,u.section);d=eh(d,u),d.text=[];var f=GLe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),p=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,p),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,p),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new Yse(e.raw,-1,e.section,a,!0);g.height=s;for(var x=0,b=r.columns;x<b.length;x++){var c=b[x],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function qLe(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function $N(e,t,r,n,a,s,i){var o=tie(e,t,n,s);if(r.canEntireRowFit(o,i))Ch(e,t,r,s,i);else if(qLe(e,r,o,t)){var c=KLe(r,o,t,e);Ch(e,t,r,s,i),nw(e,t,a,s,i),$N(e,t,c,n,a,s,i)}else nw(e,t,a,s,i),$N(e,t,r,n,a,s,i)}function Ch(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}WLe(e,c,n);var d=c.getTextPos();Hse(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function WLe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=Gse(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),XLe(e,t,r,n.lineWidth))}function XLe(e,t,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,s,i,o));function c(u,d,f,h,p){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,p,"S")}}function tie(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function nw(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return Ch(e,t,o,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;$se(e,t,r,n),rie(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return Ch(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function rie(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function YLe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=Xse(this,n),s=Zse(this,a);return eie(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){Hse(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return Sv.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){Sv.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new Sv(this),s=Wse(a,t,window,r,!1),i=s.head,o=s.body,c=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var V3;function vo(e,t){var r=Xse(e,t),n=Zse(e,r);eie(e,n)}try{if(typeof window<"u"&&window){var $G=window,GG=$G.jsPDF||((V3=$G.jspdf)===null||V3===void 0?void 0:V3.jsPDF);GG&&YLe(GG)}}catch(e){console.error("Could not apply autoTable plugin",e)}const U8="evaluaciones_pruebas",Q8="evaluaciones_rubricas_estaticas",H8="evaluaciones_rubricas_interactivas",JLe="usuarios",dk=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},ZLe=e=>{const t=zt(Nt(ft,U8),_r("fechaCreacion","desc"));return mr(t,n=>{e(n.docs.map(a=>dk(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},eMe=async e=>{try{const{id:t,...r}=e,n=dr(ft,U8,t);await Ji(n,{...r,fechaCreacion:sr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},tMe=async e=>{try{await za(dr(ft,U8,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},rMe=e=>{const t=zt(Nt(ft,Q8),_r("fechaCreacion","desc"));return mr(t,n=>{e(n.docs.map(a=>dk(a)))},n=>{console.error("Error al suscribirse a las rbricas estticas:",n),e([])})},nMe=async e=>{try{const{id:t,...r}=e,n=dr(ft,Q8,t);await Ji(n,{...r,fechaCreacion:sr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rbrica esttica:",t),new Error("No se pudo guardar la rbrica.")}},aMe=async e=>{try{await za(dr(ft,Q8,e))}catch(t){throw console.error("Error al eliminar la rbrica esttica:",t),new Error("No se pudo eliminar la rbrica.")}},sMe=e=>{const t=zt(Nt(ft,H8));return mr(t,n=>{e(n.docs.map(a=>dk(a)))},n=>{console.error("Error al suscribirse a las rbricas interactivas:",n),e([])})},iMe=async e=>{try{const{id:t,...r}=e,n=dr(ft,H8,t);await Ji(n,r)}catch(t){throw console.error("Error al guardar la rbrica interactiva:",t),new Error("No se pudo guardar la rbrica interactiva.")}},oMe=async e=>{try{return(await Tn(Nt(ft,H8),e)).id}catch(t){throw console.error("Error al crear la rbrica interactiva:",t),new Error("No se pudo crear la rbrica interactiva.")}},lMe=e=>{const t=zt(Nt(ft,JLe));return mr(t,n=>{e(n.docs.map(a=>dk(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},cMe=["Seleccin mltiple","Verdadero o Falso","Desarrollo","Trminos pareados","Comprensin de lectura"],KG={"Seleccin mltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Trminos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de lectura":[1,2,3]},i5=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},uMe=({open:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):l.jsxs(l.Fragment,{children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),dMe=({item:e,index:t,showAnswers:r})=>{const n=S.useMemo(()=>e.tipo==="Trminos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Seleccin mltiple"&&l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&l.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[l.jsx("span",{children:"V ___ F ___"}),r&&l.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Trminos pareados"&&l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),l.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definicin"}),l.jsx("div",{className:"space-y-2",children:n.map((a,s)=>l.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[l.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),l.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>l.jsxs("li",{children:[l.jsx("strong",{children:a.concepto}),"  ",a.definicion]},s))})]})]}),e.tipo==="Comprensin de lectura"&&l.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Seleccin mltiple"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,c)=>{const u=r&&c===i.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+c),") ",o]})]},c)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},AMe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(null),[a,s]=S.useState(!1),[i,o]=S.useState(!1),[c,u]=S.useState(null),[d,f]=S.useState(!1),h={nombre:"",asignatura:qi[0],nivel:yQ[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[p,g]=S.useState(h);S.useEffect(()=>{const E=ZLe(t);return()=>E()},[]);const x=E=>{const{name:N,value:B}=E.target;g(R=>({...R,[N]:B}))},b=E=>{g(N=>{const B={...N.tiposActividad};return B[E]?delete B[E]:B[E]=KG[E][0],{...N,tiposActividad:B}})},y=(E,N)=>{g(B=>({...B,tiposActividad:{...B.tiposActividad,[E]:N}}))},w=E=>{g(N=>{const B=N.selectedNee.includes(E)?N.selectedNee.filter(R=>R!==E):[...N.selectedNee,E];return{...N,selectedNee:B}})},_=async E=>{if(E.preventDefault(),!p.nombre.trim()||!p.contenido.trim()||Object.keys(p.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const N=Object.entries(p.tiposActividad).map(([P,D])=>`- ${D} tem(s) de tipo '${P}'`).join(`
`),B=p.isNee&&p.selectedNee.length>0?`
            **Adaptacin CRTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes caractersticas: ${p.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negacin o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes ms pequeas si es posible.
            - Para 'Comprensin de Lectura', usa textos ms cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Seleccin Mltiple', asegrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",R=`
            Eres un experto en evaluacin educativa para la educacin media en Chile.
            Genera una prueba o gua de trabajo completa en formato JSON estructurado.
            
            Informacin base:
            - Nombre de la prueba: ${p.nombre}
            - Asignatura: ${p.asignatura}
            - Nivel: ${p.nivel}
            - Contenido a evaluar: "${p.contenido}"
            - Tipos y cantidad de tems solicitados:
              ${N}
            - Nivel de Dificultad General: ${p.dificultad}. 'Fcil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicacin y anlisis simple. 'Avanzado' requiere sntesis, evaluacin y resolucin de problemas complejos.
            
            ${B}

            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluacin.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de tem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un ttulo descriptivo (ej: "Actividad 1: Seleccin Mltiple").
               - 'instrucciones': Instrucciones para esa actividad especfica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de tem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numrico.
                   - 'habilidadBloom': La habilidad principal de la Taxonoma de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales segn el tipo:
                       - Para 'Seleccin mltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (ndice numrico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Trminos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensin de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Seleccin mltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{c1("Evaluacin - Pruebas");const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=(await(await new cs(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(R)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(K);let G=0;V.actividades.forEach(ee=>{ee.items.forEach(F=>{G+=F.puntaje||0,F.tipo==="Comprensin de lectura"&&F.preguntas&&F.preguntas.forEach(z=>{G+=z.puntaje||0})})});const X={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:p.nombre,asignatura:p.asignatura,nivel:p.nivel,contenidoOriginal:p.contenido,tiposActividadOriginal:p.tiposActividad,objetivo:V.objetivo,instruccionesGenerales:V.instruccionesGenerales,puntajeIdeal:G,actividades:V.actividades,dificultad:p.dificultad,...p.isNee&&{adaptacionNEE:p.selectedNee}};n(X),f(!1)}catch(P){console.error(P),u("Error al generar la prueba con IA. Revisa la consola para ms detalles.")}finally{s(!1)}},j=async()=>{if(r)try{await eMe(r),alert("Prueba guardada con xito.")}catch(E){console.error(E),alert("No se pudo guardar la prueba.")}},k=async E=>{if(window.confirm("Eliminar esta prueba?"))try{await tMe(E),(r==null?void 0:r.id)===E&&n(null)}catch(N){console.error(N),alert("No se pudo eliminar la prueba.")}},I=async E=>{o(!0);const N=new vr("p","mm","a4"),B=20,R=N.internal.pageSize.getHeight(),P=N.internal.pageSize.getWidth(),D=P-B*2;let L=B;const M=K=>{K.setFillColor(230,230,230),K.rect(0,0,P,25,"F"),K.setFontSize(9),K.setTextColor(0,0,0),K.text("LICEO INDUSTRIAL DE RECOLETA",B,15,{align:"left"}),K.text("SUBDIRECCIN DE GESTIN PEDAGGICA",P-B,15,{align:"right"})};M(N),L=30,N.setTextColor(0,0,0),N.setFont("helvetica","bold"),N.setFontSize(16),N.text(E.nombre,P/2,L,{align:"center"}),L+=10,vo(N,{startY:L,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},E.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},E.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},E.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:E.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:E.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:K=>{M(N)}}),L=N.lastAutoTable.finalY+10;const J=K=>{L+K>R-B&&(N.addPage(),M(N),L=B+15,N.setTextColor(0,0,0))},H=(K,V)=>{N.setFont("helvetica",V.isBold?"bold":"normal"),N.setFontSize(V.fontSize);const G=Array.isArray(K)?K.join(`
`):K;return N.getTextDimensions(G,{maxWidth:V.width}).h};for(const K of E.actividades){let V=H(K.titulo,{fontSize:12,width:D,isBold:!0})+H(K.instrucciones,{fontSize:10,width:D})+12;J(V),N.setFont("helvetica","bold"),N.setFontSize(12),N.setTextColor(0,0,0),N.text(K.titulo,B,L),L+=8,N.setFont("helvetica","normal"),N.setFontSize(10);const G=N.splitTextToSize(K.instrucciones,D);N.text(G,B,L),L+=G.length*(10*.35*1.15)+4;for(const[X,ee]of K.items.entries()){let F=0;const z=`${X+1}. ${ee.pregunta} (${ee.puntaje} pts)`;switch(F+=H(z,{fontSize:10,width:D,isBold:!0}),ee.tipo){case"Seleccin mltiple":ee.opciones.forEach(ae=>{F+=H(ae,{fontSize:10,width:D-5})+3}),F+=7;break;case"Verdadero o Falso":F+=10;break;case"Desarrollo":F+=30;break;case"Trminos pareados":F+=ee.pares.length*12+20;break;case"Comprensin de lectura":const te=ee;F+=H(te.texto,{fontSize:10,width:D-10})+10,te.preguntas.forEach(ae=>{const le=`${ae.pregunta} (${ae.puntaje} pts)`;F+=H(le,{fontSize:10,width:D-5,isBold:!0}),ae.tipo==="Seleccin mltiple"?(ae.opciones.forEach(ie=>{F+=H(ie,{fontSize:10,width:D-10})+3}),F+=7):ae.tipo==="Desarrollo"&&(F+=30),F+=5}),F+=15;break}J(F),N.setFont("helvetica","bold"),N.setFontSize(10),N.setTextColor(0,0,0);const Y=N.splitTextToSize(z,D);if(N.text(Y,B,L),L+=Y.length*5+4,N.setFont("helvetica","normal"),ee.tipo==="Seleccin mltiple")ee.opciones.forEach((te,ae)=>{N.text(`${String.fromCharCode(65+ae)}) ${te}`,B+5,L),L+=7});else if(ee.tipo==="Verdadero o Falso")N.text("V ______    F ______",B+5,L),L+=10;else if(ee.tipo==="Desarrollo")N.setDrawColor(200,200,200),N.setFillColor(245,245,245),N.rect(B,L,D,25,"FD"),L+=30;else if(ee.tipo==="Trminos pareados"){const te=[...ee.pares.map(le=>le.definicion)].sort(()=>Math.random()-.5),ae=ee.pares.map((le,ie)=>[`${ie+1}. ${le.concepto}`,`(   ) ${te[ie]}`]);vo(N,{startY:L,head:[["Columna A: Concepto","Columna B: Definicin"]],body:ae,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:le=>M(N)}),L=N.lastAutoTable.finalY+10}else if(ee.tipo==="Comprensin de lectura"){const te=ee;N.setFillColor(240,240,240),N.setDrawColor(200,200,200);const ae=N.splitTextToSize(te.texto,D-10),le=ae.length*(10*.35*1.15)+8;N.rect(B,L,D,le,"FD"),L+=4,N.setFont("helvetica","normal"),N.setFontSize(10),N.setTextColor(0,0,0),N.text(ae,B+5,L),L+=le;for(const[ie,ce]of te.preguntas.entries()){const pe=`${ie+1}. ${ce.pregunta} (${ce.puntaje} pts)`;N.setFont("helvetica","bold");const Be=N.splitTextToSize(pe,D-5);N.text(Be,B+5,L),L+=Be.length*5+4,N.setFont("helvetica","normal"),ce.tipo==="Seleccin mltiple"?ce.opciones.forEach((ne,_e)=>{N.text(`${String.fromCharCode(65+_e)}) ${ne}`,B+10,L),L+=7}):ce.tipo==="Desarrollo"&&(N.setDrawColor(200,200,200),N.setFillColor(245,245,245),N.rect(B+5,L,D-5,25,"FD"),L+=30)}}L+=5}}N.save(`${E.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[l.jsx(uMe,{open:!d})," ",l.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),l.jsx("button",{onClick:j,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),l.jsxs("button",{onClick:()=>I(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":l.jsx(uee,{})," PDF"]})]})]}),l.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),l.jsx("span",{children:"SUBDIRECCIN DE GESTIN PEDAGGICA"})]}),l.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),l.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),l.jsxs("p",{className:"text-right",children:[l.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[l.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&l.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(E=>l.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:E.titulo}),l.jsx("p",{className:"italic text-sm mb-4",children:E.instrucciones}),l.jsx("div",{className:"space-y-6",children:E.items.map((N,B)=>l.jsx(dMe,{item:N,index:B,showAnswers:d},N.id))})]},E.id))]})]}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Gua"}),l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Gua ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombre",value:p.nombre,onChange:x,placeholder:"Ej: Gua N1 - La Clula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),l.jsx("div",{}),l.jsx("select",{name:"asignatura",value:p.asignatura,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:qi.map(E=>l.jsx("option",{children:E},E))}),l.jsx("select",{name:"nivel",value:p.nivel,onChange:x,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:yQ.map(E=>l.jsx("option",{children:E},E))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),l.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fcil","Intermedio","Avanzado"].map((E,N)=>l.jsx("button",{type:"button",onClick:()=>g(B=>({...B,dificultad:E})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${N===0?"rounded-l-lg":""} ${N===2?"rounded-r-lg":""}
                                            ${p.dificultad===E?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:E},E))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.isNee,onChange:E=>g(N=>({...N,isNee:E.target.checked,selectedNee:E.target.checked?N.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),p.isNee&&l.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:J5.map(E=>l.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.selectedNee.includes(E),onChange:()=>w(E),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:E})]},E))})]})]})]}),l.jsx("textarea",{name:"contenido",value:p.contenido,onChange:x,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"space-y-3",children:cMe.map(E=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:!!p.tiposActividad[E],onChange:()=>b(E),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:E})]}),p.tiposActividad[E]&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),KG[E].map(N=>l.jsx("button",{type:"button",onClick:()=>y(E,N),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${p.tiposActividad[E]===N?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:N},N))]})]},E))}),c&&l.jsx("p",{className:"text-red-500 text-sm",children:c}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),l.jsx("div",{className:"space-y-2",children:e.length>0?e.map(E=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:E.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.asignatura," - ",E.nivel," (",new Date(E.fechaCreacion).toLocaleDateString(),")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n(E),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),l.jsx("button",{onClick:()=>k(E.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},E.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},fMe=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=S.useState(null),[i,o]=S.useState("list"),[c,u]=S.useState(!1),[d,f]=S.useState(""),h=async(k,I)=>{if(!k.trim()||!I.trim()){alert("El ttulo y la descripcin son obligatorios.");return}u(!0);const E=`Crea una rbrica de evaluacin detallada sobre "${k}" con el propsito de "${I}". Genera entre 3 y 5 dimensiones de evaluacin. Para cada dimensin, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,N={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{c1("Evaluacin - Rbricas");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new cs(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:N}})).response).text(),J=JSON.parse(M),H={id:crypto.randomUUID(),titulo:k,descripcion:I,fechaCreacion:new Date().toISOString(),dimensiones:J.map(K=>({id:crypto.randomUUID(),nombre:K.dimension,niveles:{insuficiente:K.insuficiente,suficiente:K.suficiente,competente:K.competente,avanzado:K.avanzado}}))};s(H)}catch(B){console.error(B),alert("Error al generar la rbrica con IA.")}finally{u(!1)}},p=async()=>{if(!d.trim()||!a)return;const k=crypto.randomUUID(),I={id:k,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(B=>B?{...B,dimensiones:[...B.dimensiones,I]}:null),f("");const E=`Para una rbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensin: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(B=>B.nombre).join(", ")}. Tu respuesta DEBE ser un nico objeto JSON vlido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,N={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{c1("Evaluacin - Rbricas (Aadir Dimensin)");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",M=(await(await new cs(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:E}]}],generationConfig:{responseMimeType:"application/json",responseSchema:N}})).response).text(),J=JSON.parse(M);s(H=>H?{...H,dimensiones:H.dimensiones.map(K=>K.id===k?{...K,niveles:J,isLoading:!1}:K)}:null)}catch(B){console.error("Error generating dimension descriptors:",B),alert("No se pudieron generar los descriptores."),s(R=>R?{...R,dimensiones:R.dimensiones.filter(P=>P.id!==k)}:null)}},g=()=>{if(!a)return;e.some(I=>I.id===a.id)?t(a):n(a),o("list"),s(null)},x=k=>{s(k),o("form")},b=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},y=(k,I,E)=>{a&&s(N=>N?{...N,dimensiones:N.dimensiones.map(B=>B.id!==k?B:I==="nombre"?{...B,nombre:E}:{...B,niveles:{...B.niveles,[I]:E}})}:null)},w=(k,I)=>{s(E=>E?{...E,[k]:I}:null)},_=k=>{a&&s(I=>I?{...I,dimensiones:I.dimensiones.filter(E=>E.id!==k)}:null)},j=()=>{if(!a)return null;const k="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",I=`${k} resize-none text-sm`;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rbrica de Aprendizaje"}),l.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Ttulo de la Rbrica"}),l.jsx("input",{value:a.titulo,onChange:E=>w("titulo",E.target.value),placeholder:"Ej. Rbrica de Presentaciones Orales",className:`${k} mt-1`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripcin de la Rbrica"}),l.jsx("textarea",{value:a.descripcion,onChange:E=>w("descripcion",E.target.value),placeholder:"Describe el propsito y los criterios de evaluacin de esta rbrica.",rows:3,className:`${k} mt-1`})]})]}),a.dimensiones.length===0&&l.jsx("div",{className:"text-center py-4",children:l.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:c||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:c?"Generando...":" Generar Rbrica con IA"})}),a.dimensiones.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Dimensin","Insuficiente","Suficiente","Competente","Avanzado",""].map(E=>l.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:E},E))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(E=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 w-1/5",children:l.jsx("textarea",{value:E.nombre,onChange:N=>y(E.id,"nombre",N.target.value),rows:4,className:I})}),Object.keys(E.niveles).map(N=>l.jsx("td",{className:"p-2 w-1/5",children:E.isLoading?l.jsx("div",{className:"flex justify-center items-center h-full",children:l.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):l.jsx("textarea",{value:E.niveles[N],onChange:B=>y(E.id,N,B.target.value),rows:4,className:I})},N)),l.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:l.jsx("button",{onClick:()=>_(E.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:""})})]},E.id))})]})}),l.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{className:"text-sm font-medium",children:"Aadir Dimensin"}),l.jsx("input",{value:d,onChange:E=>f(E.target.value),placeholder:"Escribe el nombre de la nueva dimensin...",className:`${k} mt-1`})]}),l.jsx("button",{onClick:p,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),l.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:l.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rbrica"})})]})};return i==="list"?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rbricas"}),l.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(k=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:k.titulo}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:k.descripcion})]}),l.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>x(k),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>r(k.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},k.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rbricas guardadas."})]}):j()},hMe=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState(null),[i,o]=S.useState(null),[c,u]=S.useState({rubricaEstaticaId:"",curso:""}),[d,f]=S.useState(null);S.useEffect(()=>{const w=sMe(n);return()=>w()},[]);const h=async w=>{w.preventDefault();const _=t.find(k=>k.id===c.rubricaEstaticaId);if(!_||!c.curso){alert("Debe seleccionar una rbrica y un curso.");return}const j={nombre:_.titulo,curso:c.curso,asignatura:"N/A",rubricaEstaticaId:_.id,resultados:{}};try{await oMe(j),u({rubricaEstaticaId:"",curso:""})}catch(k){console.error(k),alert("No se pudo crear la evaluacin con rbrica.")}},p=w=>{s(w),o(JSON.parse(JSON.stringify(w)))},g=(w,_,j)=>{i&&o(k=>{if(!k)return null;const I=JSON.parse(JSON.stringify(k));return I.resultados[w]||(I.resultados[w]={puntajes:{},feedback:""}),I.resultados[w].puntajes[_]=j,I})},x=async()=>{if(i)try{await iMe(i),s(i),alert("Cambios guardados.")}catch(w){console.error(w),alert("No se pudieron guardar los cambios.")}},b=S.useCallback(w=>{const _=i,j=t.find(R=>R.id===(_==null?void 0:_.rubricaEstaticaId));if(!_||!j)return{score:0,maxScore:0,grade:"N/A"};const k=j.dimensiones.length*4,I=_.resultados[w];if(!I)return{score:0,maxScore:k,grade:"1.0"};const E=Object.values(I.puntajes).reduce((R,P)=>R+P,0),N=1+6*(E/k),B=k>0?N.toFixed(1):"1.0";return{score:E,maxScore:k,grade:B}},[i,t]),y=async w=>{if(!i)return;const _=t.find(E=>E.id===i.rubricaEstaticaId),j=i.resultados[w];if(!_||!j||Object.keys(j.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(w);const I=`Genera una retroalimentacin constructiva para un estudiante basada en estos puntajes de rbrica (de 1 a 4): ${_.dimensiones.map(E=>`${E.nombre}: ${j.puntajes[E.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluacin es "${_.titulo}". Destaca fortalezas y sugiere 1-2 reas de mejora concretas. S breve y motivador.`;try{c1("Evaluacin - Rbricas Interactivas (Feedback)");const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",D=(await(await new cs(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(I)).response).text();o(L=>{if(!L)return null;const M=JSON.parse(JSON.stringify(L));return M.resultados[w].feedback=D.replace(/(\*\*|\*)/g,""),M})}catch(E){console.error(E),alert("Error al generar feedback.")}finally{f(null)}};if(a&&i){const w=t.find(j=>j.id===a.rubricaEstaticaId),_=e.filter(j=>j.profile===qt.ESTUDIANTE&&i5(j.curso||"")===a.curso).map(j=>j.nombreCompleto).sort();return w?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),l.jsx("p",{className:"text-slate-500",children:a.curso})]}),l.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:" Volver"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),w.dimensiones.map(j=>l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:j.nombre},j.id)),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentacin"})]})}),l.jsx("tbody",{children:_.map(j=>{var N;const{score:k,maxScore:I,grade:E}=b(j);return l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:j}),w.dimensiones.map(B=>l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:l.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(R=>{var P;return l.jsx("button",{onClick:()=>g(j,B.id,R),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((P=i.resultados[j])==null?void 0:P.puntajes[B.id])===R?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:R},R)})})},B.id)),l.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[k,"/",I]}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:E}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[l.jsx("p",{className:"text-xs w-full",children:((N=i.resultados[j])==null?void 0:N.feedback)||"Sin generar"}),l.jsx("button",{onClick:()=>y(j),disabled:d===j,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===j?"...":"Generar IA"})]})})]},j)})})]})}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:x,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):l.jsxs("div",{children:["Error: Rbrica base no encontrada. ",l.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluacin con Rbrica"}),l.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("select",{value:c.rubricaEstaticaId,onChange:w=>u({...c,rubricaEstaticaId:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una Rbrica Guardada"}),t.map(w=>l.jsx("option",{value:w.id,children:w.titulo},w.id))]}),l.jsxs("select",{value:c.curso,onChange:w=>u({...c,curso:w.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un Curso"}),Ks.map(w=>l.jsx("option",{value:w,children:w},w))]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluacin"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),l.jsx("div",{className:"space-y-2",children:r.map(w=>l.jsxs("button",{onClick:()=>p(w),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[l.jsx("p",{className:"font-semibold",children:w.nombre}),l.jsx("p",{className:"text-sm text-slate-500",children:w.curso})]},w.id))})]})]})},mMe=({allUsers:e})=>{const[t,r]=S.useState(""),n=S.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===qt.ESTUDIANTE&&s.curso).map(s=>i5(s.curso)))).sort(),[e]),a=S.useMemo(()=>{const s=e.filter(i=>i.profile===qt.ESTUDIANTE);return t?s.filter(i=>i5(i.curso||"")===t).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nminas de Cursos"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el mdulo de ",l.jsx("strong",{className:"font-semibold",children:"Administracin"}),"."]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),l.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>l.jsx("option",{value:s,children:s},s))]})]}),l.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:i5(s.curso||"")}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},pMe=()=>{const[e,t]=S.useState("pruebas"),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState(!0);S.useEffect(()=>{o(!0);const f=lMe(n),h=rMe(p=>{s(p),o(!1)});return()=>{f(),h()}},[]);const c=async f=>{try{await nMe(f)}catch(h){console.error(h),alert("No se pudo guardar la rbrica.")}},u=async f=>{try{await aMe(f)}catch(h){console.error(h),alert("No se pudo eliminar la rbrica.")}},d=({tabName:f,label:h})=>l.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return i?l.jsx("div",{className:"text-center py-10",children:"Cargando mdulo de evaluaciones..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluacin de Aprendizajes"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(d,{tabName:"pruebas",label:"Pruebas y Guas"}),l.jsx(d,{tabName:"rubricas",label:"Generador de Rbricas"}),l.jsx(d,{tabName:"rubricasInteractivas",label:"Rbricas Interactivas"}),l.jsx(d,{tabName:"nominas",label:"Gestin de Nminas"})]})}),l.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&l.jsx(AMe,{}),e==="rubricas"&&l.jsx(fMe,{rubricas:a,onSave:c,onDelete:u,onCreate:c}),e==="rubricasInteractivas"&&l.jsx(hMe,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&l.jsx(mMe,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var GN={};GN.version="0.18.5";var nie=1252,gMe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],V8={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},z8=function(e){gMe.indexOf(e)!=-1&&(nie=V8[0]=e)};function xMe(){z8(1252)}var Nd=function(e){z8(e)};function $8(){Nd(1200),xMe()}function qG(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function vMe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function aie(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Ty=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?vMe(e.slice(2)):t==254&&r==255?aie(e.slice(2)):t==65279?e.slice(1):e},KC=function(t){return String.fromCharCode(t)},WG=function(t){return String.fromCharCode(t)},Kw,G0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function qw(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=G0.charAt(s)+G0.charAt(i)+G0.charAt(o)+G0.charAt(c);return t}function zc(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=G0.indexOf(e.charAt(u++)),i=G0.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),o=G0.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=G0.indexOf(e.charAt(u++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var pn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Ph=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Cm(e){return pn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function XG(e){return pn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Oc=function(t){return pn?Ph(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function Ak(e){if(typeof ArrayBuffer>"u")return Oc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Hm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function bMe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function G8(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return G8(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Ki=pn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Ph(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function yMe(e){for(var t=[],r=0,n=e.length+250,a=Cm(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=Cm(65535),n=65530)}return t.push(a.slice(0,r)),Ki(t)}var El=/\u0000/g,jy=/[\u0001-\u0006]/g;function kv(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Sd(e,t){var r=""+e;return r.length>=t?r:Ns("0",t-r.length)+r}function K8(e,t){var r=""+e;return r.length>=t?r:Ns(" ",t-r.length)+r}function KN(e,t){var r=""+e;return r.length>=t?r:r+Ns(" ",t-r.length)}function wMe(e,t){var r=""+Math.round(e);return r.length>=t?r:Ns("0",t-r.length)+r}function EMe(e,t){var r=""+e;return r.length>=t?r:Ns("0",t-r.length)+r}var YG=Math.pow(2,32);function _x(e,t){if(e>YG||e<-YG)return wMe(e,t);var r=Math.round(e);return EMe(r,t)}function qN(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var JG=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],z3=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function CMe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Rr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},ZG={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},_Me={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function WN(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*i+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=i,i=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=s):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function Lp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=jMe(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var sie=new Date(1899,11,31,0,0,0),NMe=sie.getTime(),SMe=new Date(1900,2,1,0,0,0);function iie(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=SMe&&(r+=1440*60*1e3),(r-(NMe+(e.getTimezoneOffset()-sie.getTimezoneOffset())*6e4))/(1440*60*1e3)}function q8(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function kMe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function BMe(e){var t=e<0?12:11,r=q8(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function TMe(e){var t=q8(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Ww(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=BMe(e):t===10?r=e.toFixed(10).substr(0,12):r=TMe(e),q8(kMe(r.toUpperCase()))}function pg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Ww(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Hu(14,iie(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function jMe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function IMe(e,t,r,n){var a="",s=0,i=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return z3[r.m-1][1];case 5:return z3[r.m-1][0];default:return z3[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return JG[r.q][0];default:return JG[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Sd(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=Sd(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?Sd(c,u):"";return d}function K0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var oie=/%/g;function FMe(e,t,r){var n=t.replace(oie,""),a=t.length-n.length;return oh(e,n,r*Math.pow(10,2*a))+Ns("%",a)}function OMe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return oh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function lie(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+lie(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var cie=/# (\?+)( ?)\/( ?)(\d+)/;function DMe(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Ns(" ",e[1].length+1+e[4].length):K8(i,e[1].length)+e[2]+"/"+e[3]+Sd(o,e[4].length))}function PMe(e,t,r){return r+(t===0?"":""+t)+Ns(" ",e[1].length+2+e[4].length)}var uie=/^#*0*\.([0#]+)/,die=/\).*[0#]/,Aie=/\(###\) ###\\?-####/;function ml(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function eK(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function tK(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function RMe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function LMe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function wu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(die)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?wu("n",n,r):"("+wu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return OMe(e,t,r);if(t.indexOf("%")!==-1)return FMe(e,t,r);if(t.indexOf("E")!==-1)return lie(t,r);if(t.charCodeAt(0)===36)return"$"+wu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+_x(c,t.length);if(t.match(/^[#?]+$/))return a=_x(r,0),a==="0"&&(a=""),a.length>t.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(cie))return DMe(s,c,u);if(t.match(/^#+0+$/))return u+_x(c,t.length-t.indexOf("0"));if(s=t.match(uie))return a=eK(r,s[1].length).replace(/^([^\.]+)$/,"$1."+ml(s[1])).replace(/\.$/,"."+ml(s[1])).replace(/\.(\d*)$/,function(g,x){return"."+x+Ns("0",ml(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+eK(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+K0(_x(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+wu(e,t,-r):K0(""+(Math.floor(r)+RMe(r,s[1].length)))+"."+Sd(tK(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return wu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=kv(wu(e,t.replace(/[\\-]/g,""),r)),i=0,kv(kv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(Aie))return a=wu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=WN(c,Math.pow(10,i)-1,!1),a=""+u,d=oh("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=KN(o[2],i),d.length<s[4].length&&(d=ml(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=WN(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?K8(o[1],i)+s[2]+"/"+s[3]+KN(o[2],i):Ns(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=_x(r,0),t.length<=a.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return ml(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=tK(r,s[1].length),r<0?"-"+wu(e,t,-r):K0(LMe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Sd(0,3-g.length):"")+g})+"."+Sd(i,s[1].length);switch(t){case"###,##0.00":return wu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=K0(_x(c,0));return p!=="0"?u+p:"";case"###,###.00":return wu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return wu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function MMe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return oh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function UMe(e,t,r){var n=t.replace(oie,""),a=t.length-n.length;return oh(e,n,r*Math.pow(10,2*a))+Ns("%",a)}function fie(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+fie(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function SA(e,t,r){if(e.charCodeAt(0)===40&&!t.match(die)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?SA("n",n,r):"("+SA("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return MMe(e,t,r);if(t.indexOf("%")!==-1)return UMe(e,t,r);if(t.indexOf("E")!==-1)return fie(t,r);if(t.charCodeAt(0)===36)return"$"+SA(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Sd(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(cie))return PMe(s,c,u);if(t.match(/^#+0+$/))return u+Sd(c,t.length-t.indexOf("0"));if(s=t.match(uie))return a=(""+r).replace(/^([^\.]+)$/,"$1."+ml(s[1])).replace(/\.$/,"."+ml(s[1])),a=a.replace(/\.(\d*)$/,function(g,x){return"."+x+Ns("0",ml(s[1]).length-x.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+K0(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+SA(e,t,-r):K0(""+r)+"."+Ns("0",s[1].length);if(s=t.match(/^#,#*,#0/))return SA(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=kv(SA(e,t.replace(/[\\-]/g,""),r)),i=0,kv(kv(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(Aie))return a=SA(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=WN(c,Math.pow(10,i)-1,!1),a=""+u,d=oh("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=KN(o[2],i),d.length<s[4].length&&(d=ml(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=WN(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?K8(o[1],i)+s[2]+"/"+s[3]+KN(o[2],i):Ns(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:ml(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return ml(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+SA(e,t,-r):K0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Sd(0,3-g.length):"")+g})+"."+Sd(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=K0(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return SA(e,t.slice(0,t.lastIndexOf(".")),r)+ml(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function oh(e,t,r){return(r|0)===r?SA(e,t,r):wu(e,t,r)}function QMe(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var hie=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Z1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":qN(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(hie))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function HMe(e,t,r,n){for(var a=[],s="",i=0,o="",c="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!qN(e,i))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var p=e.charAt(++i),g=p==="("||p===")"?p:"t";a[a.length]={t:g,v:p},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Lp(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Lp(t,r),u==null))return"";for(s=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:s},c=o;break;case"A":case"a":case"":var x={t:o,v:o};if(u==null&&(u=Lp(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(x.v=u.H>=12?"P":"A"),x.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(x.v=u.H>=12?"PM":"AM"),x.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="/"?(u!=null&&(x.v=u.H>=12?"":""),x.t="T",i+=5,h="h"):(x.t="t",++i),u==null&&x.t==="T")return"";a[a.length]=x,c=o;break;case"[":for(s=o;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(hie)){if(u==null&&(u=Lp(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",Z1(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<e.length&&(o=e.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},c=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++i;break}var b=0,y=0,w;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",b<1&&(b=1);break;case"s":(w=a[i].v.match(/\.0+$/))&&(y=Math.max(y,w[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[i].v.match(/[Hh]/)&&(b=1),b<2&&a[i].v.match(/[Mm]/)&&(b=2),b<3&&a[i].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var _="",j;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=IMe(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(j=i+1;a[j]!=null&&((o=a[j].t)==="?"||o==="D"||(o===" "||o==="t")&&a[j+1]!=null&&(a[j+1].t==="?"||a[j+1].t==="t"&&a[j+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[j].v==="/"||a[j].v===" "&&a[j+1]!=null&&a[j+1].t=="?"));)a[i].v+=a[j].v,a[j]={v:"",t:";"},++j;_+=a[i].v,i=j-1;break;case"G":a[i].t="t",a[i].v=pg(t,r);break}var k="",I,E;if(_.length>0){_.charCodeAt(0)==40?(I=t<0&&_.charCodeAt(0)===45?-t:t,E=oh("n",_,I)):(I=t<0&&n>1?-t:t,E=oh("n",_,I),I<0&&a[0]&&a[0].t=="t"&&(E=E.substr(1),a[0].v="-"+a[0].v)),j=E.length-1;var N=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){N=i;break}var B=a.length;if(N===a.length&&E.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(j>=a[i].v.length-1?(j-=a[i].v.length,a[i].v=E.substr(j+1,a[i].v.length)):j<0?a[i].v="":(a[i].v=E.substr(0,j+1),j=-1),a[i].t="t",B=i);j>=0&&B<a.length&&(a[B].v=E.substr(0,j+1)+a[B].v)}else if(N!==a.length&&E.indexOf("E")===-1){for(j=E.indexOf(".")-1,i=N;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===N?a[i].v.indexOf(".")-1:a[i].v.length-1,k=a[i].v.substr(d+1);d>=0;--d)j>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(k=E.charAt(j--)+k);a[i].v=k,a[i].t="t",B=i}for(j>=0&&B<a.length&&(a[B].v=E.substr(0,j+1)+a[B].v),j=E.indexOf(".")+1,i=N;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==N)){for(d=a[i].v.indexOf(".")>-1&&i===N?a[i].v.indexOf(".")+1:0,k=a[i].v.substr(0,d);d<a[i].v.length;++d)j<E.length&&(k+=E.charAt(j++));a[i].v=k,a[i].t="t",B=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(I=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=oh(a[i].t,a[i].v,I),a[i].t="t");var R="";for(i=0;i!==a.length;++i)a[i]!=null&&(R+=a[i].v);return R}var rK=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function nK(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function VMe(e,t){var r=QMe(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(rK),o=r[1].match(rK);return nK(t,i)?[n,r[0]]:nK(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function Hu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Rr)[e],n==null&&(n=r.table&&r.table[ZG[e]]||Rr[ZG[e]]),n==null&&(n=_Me[e]||"General");break}if(qN(n,0))return pg(t,r);t instanceof Date&&(t=iie(t,r.date1904));var a=VMe(n,t);if(qN(a[1]))return pg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return HMe(a[1],t,r,a[0])}function lh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Rr[r]==null){t<0&&(t=r);continue}if(Rr[r]==e){t=r;break}}t<0&&(t=391)}return Rr[t]=e,t}function fk(e){for(var t=0;t!=392;++t)e[t]!==void 0&&lh(e[t],t)}function eb(){Rr=CMe()}var zMe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},mie=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function $Me(e){var t=typeof e=="number"?Rr[e]:e;return t=t.replace(mie,"(\\d+)"),new RegExp("^"+t+"$")}function GMe(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,c=-1;(t.match(mie)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":i=p;break;case"s":c=p;break;case"m":i>=0?o=p:a=p;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var KMe=function(){var e={};e.version="1.2.0";function t(){for(var E=0,N=new Array(256),B=0;B!=256;++B)E=B,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,N[B]=E;return typeof Int32Array<"u"?new Int32Array(N):N}var r=t();function n(E){var N=0,B=0,R=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(R=0;R!=256;++R)P[R]=E[R];for(R=0;R!=256;++R)for(B=E[R],N=256+R;N<4096;N+=256)B=P[N]=B>>>8^E[B&255];var D=[];for(R=1;R!=16;++R)D[R-1]=typeof Int32Array<"u"?P.subarray(R*256,R*256+256):P.slice(R*256,R*256+256);return D}var a=n(r),s=a[0],i=a[1],o=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],g=a[9],x=a[10],b=a[11],y=a[12],w=a[13],_=a[14];function j(E,N){for(var B=N^-1,R=0,P=E.length;R<P;)B=B>>>8^r[(B^E.charCodeAt(R++))&255];return~B}function k(E,N){for(var B=N^-1,R=E.length-15,P=0;P<R;)B=_[E[P++]^B&255]^w[E[P++]^B>>8&255]^y[E[P++]^B>>16&255]^b[E[P++]^B>>>24]^x[E[P++]]^g[E[P++]]^p[E[P++]]^h[E[P++]]^f[E[P++]]^d[E[P++]]^u[E[P++]]^c[E[P++]]^o[E[P++]]^i[E[P++]]^s[E[P++]]^r[E[P++]];for(R+=15;P<R;)B=B>>>8^r[(B^E[P++])&255];return~B}function I(E,N){for(var B=N^-1,R=0,P=E.length,D=0,L=0;R<P;)D=E.charCodeAt(R++),D<128?B=B>>>8^r[(B^D)&255]:D<2048?(B=B>>>8^r[(B^(192|D>>6&31))&255],B=B>>>8^r[(B^(128|D&63))&255]):D>=55296&&D<57344?(D=(D&1023)+64,L=E.charCodeAt(R++)&1023,B=B>>>8^r[(B^(240|D>>8&7))&255],B=B>>>8^r[(B^(128|D>>2&63))&255],B=B>>>8^r[(B^(128|L>>6&15|(D&3)<<4))&255],B=B>>>8^r[(B^(128|L&63))&255]):(B=B>>>8^r[(B^(224|D>>12&15))&255],B=B>>>8^r[(B^(128|D>>6&63))&255],B=B>>>8^r[(B^(128|D&63))&255]);return~B}return e.table=r,e.bstr=j,e.buf=k,e.str=I,e}(),Cr=function(){var t={};t.version="1.2.1";function r(he,Te){for(var Ce=he.split("/"),we=Te.split("/"),Ne=0,je=0,Xe=Math.min(Ce.length,we.length);Ne<Xe;++Ne){if(je=Ce[Ne].length-we[Ne].length)return je;if(Ce[Ne]!=we[Ne])return Ce[Ne]<we[Ne]?-1:1}return Ce.length-we.length}function n(he){if(he.charAt(he.length-1)=="/")return he.slice(0,-1).indexOf("/")===-1?he:n(he.slice(0,-1));var Te=he.lastIndexOf("/");return Te===-1?he:he.slice(0,Te+1)}function a(he){if(he.charAt(he.length-1)=="/")return a(he.slice(0,-1));var Te=he.lastIndexOf("/");return Te===-1?he:he.slice(Te+1)}function s(he,Te){typeof Te=="string"&&(Te=new Date(Te));var Ce=Te.getHours();Ce=Ce<<6|Te.getMinutes(),Ce=Ce<<5|Te.getSeconds()>>>1,he.write_shift(2,Ce);var we=Te.getFullYear()-1980;we=we<<4|Te.getMonth()+1,we=we<<5|Te.getDate(),he.write_shift(2,we)}function i(he){var Te=he.read_shift(2)&65535,Ce=he.read_shift(2)&65535,we=new Date,Ne=Ce&31;Ce>>>=5;var je=Ce&15;Ce>>>=4,we.setMilliseconds(0),we.setFullYear(Ce+1980),we.setMonth(je-1),we.setDate(Ne);var Xe=Te&31;Te>>>=5;var dt=Te&63;return Te>>>=6,we.setHours(Te),we.setMinutes(dt),we.setSeconds(Xe<<1),we}function o(he){go(he,0);for(var Te={},Ce=0;he.l<=he.length-4;){var we=he.read_shift(2),Ne=he.read_shift(2),je=he.l+Ne,Xe={};switch(we){case 21589:Ce=he.read_shift(1),Ce&1&&(Xe.mtime=he.read_shift(4)),Ne>5&&(Ce&2&&(Xe.atime=he.read_shift(4)),Ce&4&&(Xe.ctime=he.read_shift(4))),Xe.mtime&&(Xe.mt=new Date(Xe.mtime*1e3));break}he.l=je,Te[we]=Xe}return Te}var c;function u(){return c||(c={})}function d(he,Te){if(he[0]==80&&he[1]==75)return fn(he,Te);if((he[0]|32)==109&&(he[1]|32)==105)return wt(he,Te);if(he.length<512)throw new Error("CFB file size "+he.length+" < 512");var Ce=3,we=512,Ne=0,je=0,Xe=0,dt=0,$e=0,rt=[],it=he.slice(0,512);go(it,0);var Ft=f(it);switch(Ce=Ft[0],Ce){case 3:we=512;break;case 4:we=4096;break;case 0:if(Ft[1]==0)return fn(he,Te);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ce)}we!==512&&(it=he.slice(0,we),go(it,28));var Vt=he.slice(0,we);h(it,Ce);var Yt=it.read_shift(4,"i");if(Ce===3&&Yt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Yt);it.l+=4,Xe=it.read_shift(4,"i"),it.l+=4,it.chk("00100000","Mini Stream Cutoff Size: "),dt=it.read_shift(4,"i"),Ne=it.read_shift(4,"i"),$e=it.read_shift(4,"i"),je=it.read_shift(4,"i");for(var Ht=-1,$t=0;$t<109&&(Ht=it.read_shift(4,"i"),!(Ht<0));++$t)rt[$t]=Ht;var Sr=p(he,we);b($e,je,Sr,we,rt);var an=w(Sr,Xe,rt,we);an[Xe].name="!Directory",Ne>0&&dt!==L&&(an[dt].name="!MiniFAT"),an[rt[0]].name="!FAT",an.fat_addrs=rt,an.ssz=we;var sn={},dn=[],hs=[],wo=[];_(Xe,an,Sr,dn,Ne,sn,hs,dt),g(hs,wo,dn),dn.shift();var ms={FileIndex:hs,FullPaths:wo};return Te&&Te.raw&&(ms.raw={header:Vt,sectors:Sr}),ms}function f(he){if(he[he.l]==80&&he[he.l+1]==75)return[0,0];he.chk(M,"Header Signature: "),he.l+=16;var Te=he.read_shift(2,"u");return[he.read_shift(2,"u"),Te]}function h(he,Te){var Ce=9;switch(he.l+=2,Ce=he.read_shift(2)){case 9:if(Te!=3)throw new Error("Sector Shift: Expected 9 saw "+Ce);break;case 12:if(Te!=4)throw new Error("Sector Shift: Expected 12 saw "+Ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ce)}he.chk("0600","Mini Sector Shift: "),he.chk("000000000000","Reserved: ")}function p(he,Te){for(var Ce=Math.ceil(he.length/Te)-1,we=[],Ne=1;Ne<Ce;++Ne)we[Ne-1]=he.slice(Ne*Te,(Ne+1)*Te);return we[Ce-1]=he.slice(Ce*Te),we}function g(he,Te,Ce){for(var we=0,Ne=0,je=0,Xe=0,dt=0,$e=Ce.length,rt=[],it=[];we<$e;++we)rt[we]=it[we]=we,Te[we]=Ce[we];for(;dt<it.length;++dt)we=it[dt],Ne=he[we].L,je=he[we].R,Xe=he[we].C,rt[we]===we&&(Ne!==-1&&rt[Ne]!==Ne&&(rt[we]=rt[Ne]),je!==-1&&rt[je]!==je&&(rt[we]=rt[je])),Xe!==-1&&(rt[Xe]=we),Ne!==-1&&we!=rt[we]&&(rt[Ne]=rt[we],it.lastIndexOf(Ne)<dt&&it.push(Ne)),je!==-1&&we!=rt[we]&&(rt[je]=rt[we],it.lastIndexOf(je)<dt&&it.push(je));for(we=1;we<$e;++we)rt[we]===we&&(je!==-1&&rt[je]!==je?rt[we]=rt[je]:Ne!==-1&&rt[Ne]!==Ne&&(rt[we]=rt[Ne]));for(we=1;we<$e;++we)if(he[we].type!==0){if(dt=we,dt!=rt[dt])do dt=rt[dt],Te[we]=Te[dt]+"/"+Te[we];while(dt!==0&&rt[dt]!==-1&&dt!=rt[dt]);rt[we]=-1}for(Te[0]+="/",we=1;we<$e;++we)he[we].type!==2&&(Te[we]+="/")}function x(he,Te,Ce){for(var we=he.start,Ne=he.size,je=[],Xe=we;Ce&&Ne>0&&Xe>=0;)je.push(Te.slice(Xe*D,Xe*D+D)),Ne-=D,Xe=Sp(Ce,Xe*4);return je.length===0?Et(0):Ki(je).slice(0,he.size)}function b(he,Te,Ce,we,Ne){var je=L;if(he===L){if(Te!==0)throw new Error("DIFAT chain shorter than expected")}else if(he!==-1){var Xe=Ce[he],dt=(we>>>2)-1;if(!Xe)return;for(var $e=0;$e<dt&&(je=Sp(Xe,$e*4))!==L;++$e)Ne.push(je);b(Sp(Xe,we-4),Te-1,Ce,we,Ne)}}function y(he,Te,Ce,we,Ne){var je=[],Xe=[];Ne||(Ne=[]);var dt=we-1,$e=0,rt=0;for($e=Te;$e>=0;){Ne[$e]=!0,je[je.length]=$e,Xe.push(he[$e]);var it=Ce[Math.floor($e*4/we)];if(rt=$e*4&dt,we<4+rt)throw new Error("FAT boundary crossed: "+$e+" 4 "+we);if(!he[it])break;$e=Sp(he[it],rt)}return{nodes:je,data:mK([Xe])}}function w(he,Te,Ce,we){var Ne=he.length,je=[],Xe=[],dt=[],$e=[],rt=we-1,it=0,Ft=0,Vt=0,Yt=0;for(it=0;it<Ne;++it)if(dt=[],Vt=it+Te,Vt>=Ne&&(Vt-=Ne),!Xe[Vt]){$e=[];var Ht=[];for(Ft=Vt;Ft>=0;){Ht[Ft]=!0,Xe[Ft]=!0,dt[dt.length]=Ft,$e.push(he[Ft]);var $t=Ce[Math.floor(Ft*4/we)];if(Yt=Ft*4&rt,we<4+Yt)throw new Error("FAT boundary crossed: "+Ft+" 4 "+we);if(!he[$t]||(Ft=Sp(he[$t],Yt),Ht[Ft]))break}je[Vt]={nodes:dt,data:mK([$e])}}return je}function _(he,Te,Ce,we,Ne,je,Xe,dt){for(var $e=0,rt=we.length?2:0,it=Te[he].data,Ft=0,Vt=0,Yt;Ft<it.length;Ft+=128){var Ht=it.slice(Ft,Ft+128);go(Ht,64),Vt=Ht.read_shift(2),Yt=tL(Ht,0,Vt-rt),we.push(Yt);var $t={name:Yt,type:Ht.read_shift(1),color:Ht.read_shift(1),L:Ht.read_shift(4,"i"),R:Ht.read_shift(4,"i"),C:Ht.read_shift(4,"i"),clsid:Ht.read_shift(16),state:Ht.read_shift(4,"i"),start:0,size:0},Sr=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);Sr!==0&&($t.ct=j(Ht,Ht.l-8));var an=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);an!==0&&($t.mt=j(Ht,Ht.l-8)),$t.start=Ht.read_shift(4,"i"),$t.size=Ht.read_shift(4,"i"),$t.size<0&&$t.start<0&&($t.size=$t.type=0,$t.start=L,$t.name=""),$t.type===5?($e=$t.start,Ne>0&&$e!==L&&(Te[$e].name="!StreamData")):$t.size>=4096?($t.storage="fat",Te[$t.start]===void 0&&(Te[$t.start]=y(Ce,$t.start,Te.fat_addrs,Te.ssz)),Te[$t.start].name=$t.name,$t.content=Te[$t.start].data.slice(0,$t.size)):($t.storage="minifat",$t.size<0?$t.size=0:$e!==L&&$t.start!==L&&Te[$e]&&($t.content=x($t,Te[$e].data,(Te[dt]||{}).data))),$t.content&&go($t.content,0),je[Yt]=$t,Xe.push($t)}}function j(he,Te){return new Date((Tc(he,Te+4)/1e7*Math.pow(2,32)+Tc(he,Te)/1e7-11644473600)*1e3)}function k(he,Te){return u(),d(c.readFileSync(he),Te)}function I(he,Te){var Ce=Te&&Te.type;switch(Ce||pn&&Buffer.isBuffer(he)&&(Ce="buffer"),Ce||"base64"){case"file":return k(he,Te);case"base64":return d(Oc(zc(he)),Te);case"binary":return d(Oc(he),Te)}return d(he,Te)}function E(he,Te){var Ce=Te||{},we=Ce.root||"Root Entry";if(he.FullPaths||(he.FullPaths=[]),he.FileIndex||(he.FileIndex=[]),he.FullPaths.length!==he.FileIndex.length)throw new Error("inconsistent CFB structure");he.FullPaths.length===0&&(he.FullPaths[0]=we+"/",he.FileIndex[0]={name:we,type:5}),Ce.CLSID&&(he.FileIndex[0].clsid=Ce.CLSID),N(he)}function N(he){var Te="Sh33tJ5";if(!Cr.find(he,"/"+Te)){var Ce=Et(4);Ce[0]=55,Ce[1]=Ce[3]=50,Ce[2]=54,he.FileIndex.push({name:Te,type:2,content:Ce,size:4,L:69,R:69,C:69}),he.FullPaths.push(he.FullPaths[0]+Te),B(he)}}function B(he,Te){E(he);for(var Ce=!1,we=!1,Ne=he.FullPaths.length-1;Ne>=0;--Ne){var je=he.FileIndex[Ne];switch(je.type){case 0:we?Ce=!0:(he.FileIndex.pop(),he.FullPaths.pop());break;case 1:case 2:case 5:we=!0,isNaN(je.R*je.L*je.C)&&(Ce=!0),je.R>-1&&je.L>-1&&je.R==je.L&&(Ce=!0);break;default:Ce=!0;break}}if(!(!Ce&&!Te)){var Xe=new Date(1987,1,19),dt=0,$e=Object.create?Object.create(null):{},rt=[];for(Ne=0;Ne<he.FullPaths.length;++Ne)$e[he.FullPaths[Ne]]=!0,he.FileIndex[Ne].type!==0&&rt.push([he.FullPaths[Ne],he.FileIndex[Ne]]);for(Ne=0;Ne<rt.length;++Ne){var it=n(rt[Ne][0]);we=$e[it],we||(rt.push([it,{name:a(it).replace("/",""),type:1,clsid:H,ct:Xe,mt:Xe,content:null}]),$e[it]=!0)}for(rt.sort(function(Yt,Ht){return r(Yt[0],Ht[0])}),he.FullPaths=[],he.FileIndex=[],Ne=0;Ne<rt.length;++Ne)he.FullPaths[Ne]=rt[Ne][0],he.FileIndex[Ne]=rt[Ne][1];for(Ne=0;Ne<rt.length;++Ne){var Ft=he.FileIndex[Ne],Vt=he.FullPaths[Ne];if(Ft.name=a(Vt).replace("/",""),Ft.L=Ft.R=Ft.C=-(Ft.color=1),Ft.size=Ft.content?Ft.content.length:0,Ft.start=0,Ft.clsid=Ft.clsid||H,Ne===0)Ft.C=rt.length>1?1:-1,Ft.size=0,Ft.type=5;else if(Vt.slice(-1)=="/"){for(dt=Ne+1;dt<rt.length&&n(he.FullPaths[dt])!=Vt;++dt);for(Ft.C=dt>=rt.length?-1:dt,dt=Ne+1;dt<rt.length&&n(he.FullPaths[dt])!=n(Vt);++dt);Ft.R=dt>=rt.length?-1:dt,Ft.type=1}else n(he.FullPaths[Ne+1]||"")==n(Vt)&&(Ft.R=Ne+1),Ft.type=2}}}function R(he,Te){var Ce=Te||{};if(Ce.fileType=="mad")return bt(he,Ce);switch(B(he),Ce.fileType){case"zip":return Ba(he,Ce)}var we=function(Yt){for(var Ht=0,$t=0,Sr=0;Sr<Yt.FileIndex.length;++Sr){var an=Yt.FileIndex[Sr];if(an.content){var sn=an.content.length;sn>0&&(sn<4096?Ht+=sn+63>>6:$t+=sn+511>>9)}}for(var dn=Yt.FullPaths.length+3>>2,hs=Ht+7>>3,wo=Ht+127>>7,ms=hs+$t+dn+wo,Js=ms+127>>7,js=Js<=109?0:Math.ceil((Js-109)/127);ms+Js+js+127>>7>Js;)js=++Js<=109?0:Math.ceil((Js-109)/127);var pi=[1,js,Js,wo,dn,$t,Ht,0];return Yt.FileIndex[0].size=Ht<<6,pi[7]=(Yt.FileIndex[0].start=pi[0]+pi[1]+pi[2]+pi[3]+pi[4]+pi[5])+(pi[6]+7>>3),pi}(he),Ne=Et(we[7]<<9),je=0,Xe=0;{for(je=0;je<8;++je)Ne.write_shift(1,J[je]);for(je=0;je<8;++je)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),je=0;je<3;++je)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,we[2]),Ne.write_shift(4,we[0]+we[1]+we[2]+we[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,we[3]?we[0]+we[1]+we[2]-1:L),Ne.write_shift(4,we[3]),Ne.write_shift(-4,we[1]?we[0]-1:L),Ne.write_shift(4,we[1]),je=0;je<109;++je)Ne.write_shift(-4,je<we[2]?we[1]+je:-1)}if(we[1])for(Xe=0;Xe<we[1];++Xe){for(;je<236+Xe*127;++je)Ne.write_shift(-4,je<we[2]?we[1]+je:-1);Ne.write_shift(-4,Xe===we[1]-1?L:Xe+1)}var dt=function(Yt){for(Xe+=Yt;je<Xe-1;++je)Ne.write_shift(-4,je+1);Yt&&(++je,Ne.write_shift(-4,L))};for(Xe=je=0,Xe+=we[1];je<Xe;++je)Ne.write_shift(-4,K.DIFSECT);for(Xe+=we[2];je<Xe;++je)Ne.write_shift(-4,K.FATSECT);dt(we[3]),dt(we[4]);for(var $e=0,rt=0,it=he.FileIndex[0];$e<he.FileIndex.length;++$e)it=he.FileIndex[$e],it.content&&(rt=it.content.length,!(rt<4096)&&(it.start=Xe,dt(rt+511>>9)));for(dt(we[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,K.ENDOFCHAIN);for(Xe=je=0,$e=0;$e<he.FileIndex.length;++$e)it=he.FileIndex[$e],it.content&&(rt=it.content.length,!(!rt||rt>=4096)&&(it.start=Xe,dt(rt+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,K.ENDOFCHAIN);for(je=0;je<we[4]<<2;++je){var Ft=he.FullPaths[je];if(!Ft||Ft.length===0){for($e=0;$e<17;++$e)Ne.write_shift(4,0);for($e=0;$e<3;++$e)Ne.write_shift(4,-1);for($e=0;$e<12;++$e)Ne.write_shift(4,0);continue}it=he.FileIndex[je],je===0&&(it.start=it.size?it.start-1:L);var Vt=je===0&&Ce.root||it.name;if(rt=2*(Vt.length+1),Ne.write_shift(64,Vt,"utf16le"),Ne.write_shift(2,rt),Ne.write_shift(1,it.type),Ne.write_shift(1,it.color),Ne.write_shift(-4,it.L),Ne.write_shift(-4,it.R),Ne.write_shift(-4,it.C),it.clsid)Ne.write_shift(16,it.clsid,"hex");else for($e=0;$e<4;++$e)Ne.write_shift(4,0);Ne.write_shift(4,it.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,it.start),Ne.write_shift(4,it.size),Ne.write_shift(4,0)}for(je=1;je<he.FileIndex.length;++je)if(it=he.FileIndex[je],it.size>=4096)if(Ne.l=it.start+1<<9,pn&&Buffer.isBuffer(it.content))it.content.copy(Ne,Ne.l,0,it.size),Ne.l+=it.size+511&-512;else{for($e=0;$e<it.size;++$e)Ne.write_shift(1,it.content[$e]);for(;$e&511;++$e)Ne.write_shift(1,0)}for(je=1;je<he.FileIndex.length;++je)if(it=he.FileIndex[je],it.size>0&&it.size<4096)if(pn&&Buffer.isBuffer(it.content))it.content.copy(Ne,Ne.l,0,it.size),Ne.l+=it.size+63&-64;else{for($e=0;$e<it.size;++$e)Ne.write_shift(1,it.content[$e]);for(;$e&63;++$e)Ne.write_shift(1,0)}if(pn)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function P(he,Te){var Ce=he.FullPaths.map(function($e){return $e.toUpperCase()}),we=Ce.map(function($e){var rt=$e.split("/");return rt[rt.length-($e.slice(-1)=="/"?2:1)]}),Ne=!1;Te.charCodeAt(0)===47?(Ne=!0,Te=Ce[0].slice(0,-1)+Te):Ne=Te.indexOf("/")!==-1;var je=Te.toUpperCase(),Xe=Ne===!0?Ce.indexOf(je):we.indexOf(je);if(Xe!==-1)return he.FileIndex[Xe];var dt=!je.match(jy);for(je=je.replace(El,""),dt&&(je=je.replace(jy,"!")),Xe=0;Xe<Ce.length;++Xe)if((dt?Ce[Xe].replace(jy,"!"):Ce[Xe]).replace(El,"")==je||(dt?we[Xe].replace(jy,"!"):we[Xe]).replace(El,"")==je)return he.FileIndex[Xe];return null}var D=64,L=-2,M="d0cf11e0a1b11ae1",J=[208,207,17,224,161,177,26,225],H="00000000000000000000000000000000",K={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:L,FREESECT:-1,HEADER_SIGNATURE:M,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:H,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function V(he,Te,Ce){u();var we=R(he,Ce);c.writeFileSync(Te,we)}function G(he){for(var Te=new Array(he.length),Ce=0;Ce<he.length;++Ce)Te[Ce]=String.fromCharCode(he[Ce]);return Te.join("")}function X(he,Te){var Ce=R(he,Te);switch(Te&&Te.type||"buffer"){case"file":return u(),c.writeFileSync(Te.filename,Ce),Ce;case"binary":return typeof Ce=="string"?Ce:G(Ce);case"base64":return qw(typeof Ce=="string"?Ce:G(Ce));case"buffer":if(pn)return Buffer.isBuffer(Ce)?Ce:Ph(Ce);case"array":return typeof Ce=="string"?Oc(Ce):Ce}return Ce}var ee;function F(he){try{var Te=he.InflateRaw,Ce=new Te;if(Ce._processChunk(new Uint8Array([3,0]),Ce._finishFlushFlag),Ce.bytesRead)ee=he;else throw new Error("zlib does not expose bytesRead")}catch(we){console.error("cannot use native zlib: "+(we.message||we))}}function z(he,Te){if(!ee)return Or(he,Te);var Ce=ee.InflateRaw,we=new Ce,Ne=we._processChunk(he.slice(he.l),we._finishFlushFlag);return he.l+=we.bytesRead,Ne}function Y(he){return ee?ee.deflateRawSync(he):Qt(he)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ie(he){var Te=(he<<1|he<<11)&139536|(he<<5|he<<15)&558144;return(Te>>16|Te>>8|Te)&255}for(var ce=typeof Uint8Array<"u",pe=ce?new Uint8Array(256):[],Be=0;Be<256;++Be)pe[Be]=ie(Be);function ne(he,Te){var Ce=pe[he&255];return Te<=8?Ce>>>8-Te:(Ce=Ce<<8|pe[he>>8&255],Te<=16?Ce>>>16-Te:(Ce=Ce<<8|pe[he>>16&255],Ce>>>24-Te))}function _e(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=6?0:he[we+1]<<8))>>>Ce&3}function De(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=5?0:he[we+1]<<8))>>>Ce&7}function Se(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=4?0:he[we+1]<<8))>>>Ce&15}function fe(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=3?0:he[we+1]<<8))>>>Ce&31}function Ie(he,Te){var Ce=Te&7,we=Te>>>3;return(he[we]|(Ce<=1?0:he[we+1]<<8))>>>Ce&127}function Ue(he,Te,Ce){var we=Te&7,Ne=Te>>>3,je=(1<<Ce)-1,Xe=he[Ne]>>>we;return Ce<8-we||(Xe|=he[Ne+1]<<8-we,Ce<16-we)||(Xe|=he[Ne+2]<<16-we,Ce<24-we)||(Xe|=he[Ne+3]<<24-we),Xe&je}function Ye(he,Te,Ce){var we=Te&7,Ne=Te>>>3;return we<=5?he[Ne]|=(Ce&7)<<we:(he[Ne]|=Ce<<we&255,he[Ne+1]=(Ce&7)>>8-we),Te+3}function ye(he,Te,Ce){var we=Te&7,Ne=Te>>>3;return Ce=(Ce&1)<<we,he[Ne]|=Ce,Te+1}function Oe(he,Te,Ce){var we=Te&7,Ne=Te>>>3;return Ce<<=we,he[Ne]|=Ce&255,Ce>>>=8,he[Ne+1]=Ce,Te+8}function Re(he,Te,Ce){var we=Te&7,Ne=Te>>>3;return Ce<<=we,he[Ne]|=Ce&255,Ce>>>=8,he[Ne+1]=Ce&255,he[Ne+2]=Ce>>>8,Te+16}function qe(he,Te){var Ce=he.length,we=2*Ce>Te?2*Ce:Te+5,Ne=0;if(Ce>=Te)return he;if(pn){var je=XG(we);if(he.copy)he.copy(je);else for(;Ne<he.length;++Ne)je[Ne]=he[Ne];return je}else if(ce){var Xe=new Uint8Array(we);if(Xe.set)Xe.set(he);else for(;Ne<Ce;++Ne)Xe[Ne]=he[Ne];return Xe}return he.length=we,he}function Ze(he){for(var Te=new Array(he),Ce=0;Ce<he;++Ce)Te[Ce]=0;return Te}function ct(he,Te,Ce){var we=1,Ne=0,je=0,Xe=0,dt=0,$e=he.length,rt=ce?new Uint16Array(32):Ze(32);for(je=0;je<32;++je)rt[je]=0;for(je=$e;je<Ce;++je)he[je]=0;$e=he.length;var it=ce?new Uint16Array($e):Ze($e);for(je=0;je<$e;++je)rt[Ne=he[je]]++,we<Ne&&(we=Ne),it[je]=0;for(rt[0]=0,je=1;je<=we;++je)rt[je+16]=dt=dt+rt[je-1]<<1;for(je=0;je<$e;++je)dt=he[je],dt!=0&&(it[je]=rt[dt+16]++);var Ft=0;for(je=0;je<$e;++je)if(Ft=he[je],Ft!=0)for(dt=ne(it[je],we)>>we-Ft,Xe=(1<<we+4-Ft)-1;Xe>=0;--Xe)Te[dt|Xe<<Ft]=Ft&15|je<<4;return we}var pt=ce?new Uint16Array(512):Ze(512),It=ce?new Uint16Array(32):Ze(32);if(!ce){for(var Mt=0;Mt<512;++Mt)pt[Mt]=0;for(Mt=0;Mt<32;++Mt)It[Mt]=0}(function(){for(var he=[],Te=0;Te<32;Te++)he.push(5);ct(he,It,32);var Ce=[];for(Te=0;Te<=143;Te++)Ce.push(8);for(;Te<=255;Te++)Ce.push(9);for(;Te<=279;Te++)Ce.push(7);for(;Te<=287;Te++)Ce.push(8);ct(Ce,pt,288)})();var Pt=function(){for(var Te=ce?new Uint8Array(32768):[],Ce=0,we=0;Ce<le.length-1;++Ce)for(;we<le[Ce+1];++we)Te[we]=Ce;for(;we<32768;++we)Te[we]=29;var Ne=ce?new Uint8Array(259):[];for(Ce=0,we=0;Ce<ae.length-1;++Ce)for(;we<ae[Ce+1];++we)Ne[we]=Ce;function je(dt,$e){for(var rt=0;rt<dt.length;){var it=Math.min(65535,dt.length-rt),Ft=rt+it==dt.length;for($e.write_shift(1,+Ft),$e.write_shift(2,it),$e.write_shift(2,~it&65535);it-- >0;)$e[$e.l++]=dt[rt++]}return $e.l}function Xe(dt,$e){for(var rt=0,it=0,Ft=ce?new Uint16Array(32768):[];it<dt.length;){var Vt=Math.min(65535,dt.length-it);if(Vt<10){for(rt=Ye($e,rt,+(it+Vt==dt.length)),rt&7&&(rt+=8-(rt&7)),$e.l=rt/8|0,$e.write_shift(2,Vt),$e.write_shift(2,~Vt&65535);Vt-- >0;)$e[$e.l++]=dt[it++];rt=$e.l*8;continue}rt=Ye($e,rt,+(it+Vt==dt.length)+2);for(var Yt=0;Vt-- >0;){var Ht=dt[it];Yt=(Yt<<5^Ht)&32767;var $t=-1,Sr=0;if(($t=Ft[Yt])&&($t|=it&-32768,$t>it&&($t-=32768),$t<it))for(;dt[$t+Sr]==dt[it+Sr]&&Sr<250;)++Sr;if(Sr>2){Ht=Ne[Sr],Ht<=22?rt=Oe($e,rt,pe[Ht+1]>>1)-1:(Oe($e,rt,3),rt+=5,Oe($e,rt,pe[Ht-23]>>5),rt+=3);var an=Ht<8?0:Ht-4>>2;an>0&&(Re($e,rt,Sr-ae[Ht]),rt+=an),Ht=Te[it-$t],rt=Oe($e,rt,pe[Ht]>>3),rt-=3;var sn=Ht<4?0:Ht-2>>1;sn>0&&(Re($e,rt,it-$t-le[Ht]),rt+=sn);for(var dn=0;dn<Sr;++dn)Ft[Yt]=it&32767,Yt=(Yt<<5^dt[it])&32767,++it;Vt-=Sr-1}else Ht<=143?Ht=Ht+48:rt=ye($e,rt,1),rt=Oe($e,rt,pe[Ht]),Ft[Yt]=it&32767,++it}rt=Oe($e,rt,0)-1}return $e.l=(rt+7)/8|0,$e.l}return function($e,rt){return $e.length<8?je($e,rt):Xe($e,rt)}}();function Qt(he){var Te=Et(50+Math.floor(he.length*1.1)),Ce=Pt(he,Te);return Te.slice(0,Ce)}var yt=ce?new Uint16Array(32768):Ze(32768),Br=ce?new Uint16Array(32768):Ze(32768),tr=ce?new Uint16Array(128):Ze(128),nn=1,Nr=1;function Vr(he,Te){var Ce=fe(he,Te)+257;Te+=5;var we=fe(he,Te)+1;Te+=5;var Ne=Se(he,Te)+4;Te+=4;for(var je=0,Xe=ce?new Uint8Array(19):Ze(19),dt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$e=1,rt=ce?new Uint8Array(8):Ze(8),it=ce?new Uint8Array(8):Ze(8),Ft=Xe.length,Vt=0;Vt<Ne;++Vt)Xe[te[Vt]]=je=De(he,Te),$e<je&&($e=je),rt[je]++,Te+=3;var Yt=0;for(rt[0]=0,Vt=1;Vt<=$e;++Vt)it[Vt]=Yt=Yt+rt[Vt-1]<<1;for(Vt=0;Vt<Ft;++Vt)(Yt=Xe[Vt])!=0&&(dt[Vt]=it[Yt]++);var Ht=0;for(Vt=0;Vt<Ft;++Vt)if(Ht=Xe[Vt],Ht!=0){Yt=pe[dt[Vt]]>>8-Ht;for(var $t=(1<<7-Ht)-1;$t>=0;--$t)tr[Yt|$t<<Ht]=Ht&7|Vt<<3}var Sr=[];for($e=1;Sr.length<Ce+we;)switch(Yt=tr[Ie(he,Te)],Te+=Yt&7,Yt>>>=3){case 16:for(je=3+_e(he,Te),Te+=2,Yt=Sr[Sr.length-1];je-- >0;)Sr.push(Yt);break;case 17:for(je=3+De(he,Te),Te+=3;je-- >0;)Sr.push(0);break;case 18:for(je=11+Ie(he,Te),Te+=7;je-- >0;)Sr.push(0);break;default:Sr.push(Yt),$e<Yt&&($e=Yt);break}var an=Sr.slice(0,Ce),sn=Sr.slice(Ce);for(Vt=Ce;Vt<286;++Vt)an[Vt]=0;for(Vt=we;Vt<30;++Vt)sn[Vt]=0;return nn=ct(an,yt,286),Nr=ct(sn,Br,30),Te}function In(he,Te){if(he[0]==3&&!(he[1]&3))return[Cm(Te),2];for(var Ce=0,we=0,Ne=XG(Te||1<<18),je=0,Xe=Ne.length>>>0,dt=0,$e=0;(we&1)==0;){if(we=De(he,Ce),Ce+=3,we>>>1)we>>1==1?(dt=9,$e=5):(Ce=Vr(he,Ce),dt=nn,$e=Nr);else{Ce&7&&(Ce+=8-(Ce&7));var rt=he[Ce>>>3]|he[(Ce>>>3)+1]<<8;if(Ce+=32,rt>0)for(!Te&&Xe<je+rt&&(Ne=qe(Ne,je+rt),Xe=Ne.length);rt-- >0;)Ne[je++]=he[Ce>>>3],Ce+=8;continue}for(;;){!Te&&Xe<je+32767&&(Ne=qe(Ne,je+32767),Xe=Ne.length);var it=Ue(he,Ce,dt),Ft=we>>>1==1?pt[it]:yt[it];if(Ce+=Ft&15,Ft>>>=4,(Ft>>>8&255)===0)Ne[je++]=Ft;else{if(Ft==256)break;Ft-=257;var Vt=Ft<8?0:Ft-4>>2;Vt>5&&(Vt=0);var Yt=je+ae[Ft];Vt>0&&(Yt+=Ue(he,Ce,Vt),Ce+=Vt),it=Ue(he,Ce,$e),Ft=we>>>1==1?It[it]:Br[it],Ce+=Ft&15,Ft>>>=4;var Ht=Ft<4?0:Ft-2>>1,$t=le[Ft];for(Ht>0&&($t+=Ue(he,Ce,Ht),Ce+=Ht),!Te&&Xe<Yt&&(Ne=qe(Ne,Yt+100),Xe=Ne.length);je<Yt;)Ne[je]=Ne[je-$t],++je}}}return Te?[Ne,Ce+7>>>3]:[Ne.slice(0,je),Ce+7>>>3]}function Or(he,Te){var Ce=he.slice(he.l||0),we=In(Ce,Te);return he.l+=we[1],we[0]}function fs(he,Te){if(he)typeof console<"u"&&console.error(Te);else throw new Error(Te)}function fn(he,Te){var Ce=he;go(Ce,0);var we=[],Ne=[],je={FileIndex:we,FullPaths:Ne};E(je,{root:Te.root});for(var Xe=Ce.length-4;(Ce[Xe]!=80||Ce[Xe+1]!=75||Ce[Xe+2]!=5||Ce[Xe+3]!=6)&&Xe>=0;)--Xe;Ce.l=Xe+4,Ce.l+=4;var dt=Ce.read_shift(2);Ce.l+=6;var $e=Ce.read_shift(4);for(Ce.l=$e,Xe=0;Xe<dt;++Xe){Ce.l+=20;var rt=Ce.read_shift(4),it=Ce.read_shift(4),Ft=Ce.read_shift(2),Vt=Ce.read_shift(2),Yt=Ce.read_shift(2);Ce.l+=8;var Ht=Ce.read_shift(4),$t=o(Ce.slice(Ce.l+Ft,Ce.l+Ft+Vt));Ce.l+=Ft+Vt+Yt;var Sr=Ce.l;Ce.l=Ht+4,oa(Ce,rt,it,je,$t),Ce.l=Sr}return je}function oa(he,Te,Ce,we,Ne){he.l+=2;var je=he.read_shift(2),Xe=he.read_shift(2),dt=i(he);if(je&8257)throw new Error("Unsupported ZIP encryption");for(var $e=he.read_shift(4),rt=he.read_shift(4),it=he.read_shift(4),Ft=he.read_shift(2),Vt=he.read_shift(2),Yt="",Ht=0;Ht<Ft;++Ht)Yt+=String.fromCharCode(he[he.l++]);if(Vt){var $t=o(he.slice(he.l,he.l+Vt));($t[21589]||{}).mt&&(dt=$t[21589].mt),((Ne||{})[21589]||{}).mt&&(dt=Ne[21589].mt)}he.l+=Vt;var Sr=he.slice(he.l,he.l+rt);switch(Xe){case 8:Sr=z(he,it);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Xe)}var an=!1;je&8&&($e=he.read_shift(4),$e==134695760&&($e=he.read_shift(4),an=!0),rt=he.read_shift(4),it=he.read_shift(4)),rt!=Te&&fs(an,"Bad compressed size: "+Te+" != "+rt),it!=Ce&&fs(an,"Bad uncompressed size: "+Ce+" != "+it),gr(we,Yt,Sr,{unsafe:!0,mt:dt})}function Ba(he,Te){var Ce=Te||{},we=[],Ne=[],je=Et(1),Xe=Ce.compression?8:0,dt=0,$e=0,rt=0,it=0,Ft=0,Vt=he.FullPaths[0],Yt=Vt,Ht=he.FileIndex[0],$t=[],Sr=0;for($e=1;$e<he.FullPaths.length;++$e)if(Yt=he.FullPaths[$e].slice(Vt.length),Ht=he.FileIndex[$e],!(!Ht.size||!Ht.content||Yt=="Sh33tJ5")){var an=it,sn=Et(Yt.length);for(rt=0;rt<Yt.length;++rt)sn.write_shift(1,Yt.charCodeAt(rt)&127);sn=sn.slice(0,sn.l),$t[Ft]=KMe.buf(Ht.content,0);var dn=Ht.content;Xe==8&&(dn=Y(dn)),je=Et(30),je.write_shift(4,67324752),je.write_shift(2,20),je.write_shift(2,dt),je.write_shift(2,Xe),Ht.mt?s(je,Ht.mt):je.write_shift(4,0),je.write_shift(-4,$t[Ft]),je.write_shift(4,dn.length),je.write_shift(4,Ht.content.length),je.write_shift(2,sn.length),je.write_shift(2,0),it+=je.length,we.push(je),it+=sn.length,we.push(sn),it+=dn.length,we.push(dn),je=Et(46),je.write_shift(4,33639248),je.write_shift(2,0),je.write_shift(2,20),je.write_shift(2,dt),je.write_shift(2,Xe),je.write_shift(4,0),je.write_shift(-4,$t[Ft]),je.write_shift(4,dn.length),je.write_shift(4,Ht.content.length),je.write_shift(2,sn.length),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(4,0),je.write_shift(4,an),Sr+=je.l,Ne.push(je),Sr+=sn.length,Ne.push(sn),++Ft}return je=Et(22),je.write_shift(4,101010256),je.write_shift(2,0),je.write_shift(2,0),je.write_shift(2,Ft),je.write_shift(2,Ft),je.write_shift(4,Sr),je.write_shift(4,it),je.write_shift(2,0),Ki([Ki(we),Ki(Ne),je])}var tn={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function pr(he,Te){if(he.ctype)return he.ctype;var Ce=he.name||"",we=Ce.match(/\.([^\.]+)$/);return we&&tn[we[1]]||Te&&(we=(Ce=Te).match(/[\.\\]([^\.\\])+$/),we&&tn[we[1]])?tn[we[1]]:"application/octet-stream"}function et(he){for(var Te=qw(he),Ce=[],we=0;we<Te.length;we+=76)Ce.push(Te.slice(we,we+76));return Ce.join(`\r
`)+`\r
`}function gt(he){var Te=he.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(rt){var it=rt.charCodeAt(0).toString(16).toUpperCase();return"="+(it.length==1?"0"+it:it)});Te=Te.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Te.charAt(0)==`
`&&(Te="=0D"+Te.slice(1)),Te=Te.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ce=[],we=Te.split(`\r
`),Ne=0;Ne<we.length;++Ne){var je=we[Ne];if(je.length==0){Ce.push("");continue}for(var Xe=0;Xe<je.length;){var dt=76,$e=je.slice(Xe,Xe+dt);$e.charAt(dt-1)=="="?dt--:$e.charAt(dt-2)=="="?dt-=2:$e.charAt(dt-3)=="="&&(dt-=3),$e=je.slice(Xe,Xe+dt),Xe+=dt,Xe<je.length&&($e+="="),Ce.push($e)}}return Ce.join(`\r
`)}function Je(he){for(var Te=[],Ce=0;Ce<he.length;++Ce){for(var we=he[Ce];Ce<=he.length&&we.charAt(we.length-1)=="=";)we=we.slice(0,we.length-1)+he[++Ce];Te.push(we)}for(var Ne=0;Ne<Te.length;++Ne)Te[Ne]=Te[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(je){return String.fromCharCode(parseInt(je.slice(1),16))});return Oc(Te.join(`\r
`))}function xt(he,Te,Ce){for(var we="",Ne="",je="",Xe,dt=0;dt<10;++dt){var $e=Te[dt];if(!$e||$e.match(/^\s*$/))break;var rt=$e.match(/^(.*?):\s*([^\s].*)$/);if(rt)switch(rt[1].toLowerCase()){case"content-location":we=rt[2].trim();break;case"content-type":je=rt[2].trim();break;case"content-transfer-encoding":Ne=rt[2].trim();break}}switch(++dt,Ne.toLowerCase()){case"base64":Xe=Oc(zc(Te.slice(dt).join("")));break;case"quoted-printable":Xe=Je(Te.slice(dt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var it=gr(he,we.slice(Ce.length),Xe,{unsafe:!0});je&&(it.ctype=je)}function wt(he,Te){if(G(he.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ce=Te&&Te.root||"",we=(pn&&Buffer.isBuffer(he)?he.toString("binary"):G(he)).split(`\r
`),Ne=0,je="";for(Ne=0;Ne<we.length;++Ne)if(je=we[Ne],!!/^Content-Location:/i.test(je)&&(je=je.slice(je.indexOf("file")),Ce||(Ce=je.slice(0,je.lastIndexOf("/")+1)),je.slice(0,Ce.length)!=Ce))for(;Ce.length>0&&(Ce=Ce.slice(0,Ce.length-1),Ce=Ce.slice(0,Ce.lastIndexOf("/")+1),je.slice(0,Ce.length)!=Ce););var Xe=(we[1]||"").match(/boundary="(.*?)"/);if(!Xe)throw new Error("MAD cannot find boundary");var dt="--"+(Xe[1]||""),$e=[],rt=[],it={FileIndex:$e,FullPaths:rt};E(it);var Ft,Vt=0;for(Ne=0;Ne<we.length;++Ne){var Yt=we[Ne];Yt!==dt&&Yt!==dt+"--"||(Vt++&&xt(it,we.slice(Ft,Ne),Ce),Ft=Ne)}return it}function bt(he,Te){var Ce=Te||{},we=Ce.boundary||"SheetJS";we="------="+we;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+we.slice(2)+'"',"","",""],je=he.FullPaths[0],Xe=je,dt=he.FileIndex[0],$e=1;$e<he.FullPaths.length;++$e)if(Xe=he.FullPaths[$e].slice(je.length),dt=he.FileIndex[$e],!(!dt.size||!dt.content||Xe=="Sh33tJ5")){Xe=Xe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Sr){return"_x"+Sr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Sr){return"_u"+Sr.charCodeAt(0).toString(16)+"_"});for(var rt=dt.content,it=pn&&Buffer.isBuffer(rt)?rt.toString("binary"):G(rt),Ft=0,Vt=Math.min(1024,it.length),Yt=0,Ht=0;Ht<=Vt;++Ht)(Yt=it.charCodeAt(Ht))>=32&&Yt<128&&++Ft;var $t=Ft>=Vt*4/5;Ne.push(we),Ne.push("Content-Location: "+(Ce.root||"file:///C:/SheetJS/")+Xe),Ne.push("Content-Transfer-Encoding: "+($t?"quoted-printable":"base64")),Ne.push("Content-Type: "+pr(dt,Xe)),Ne.push(""),Ne.push($t?gt(it):et(it))}return Ne.push(we+`--\r
`),Ne.join(`\r
`)}function nr(he){var Te={};return E(Te,he),Te}function gr(he,Te,Ce,we){var Ne=we&&we.unsafe;Ne||E(he);var je=!Ne&&Cr.find(he,Te);if(!je){var Xe=he.FullPaths[0];Te.slice(0,Xe.length)==Xe?Xe=Te:(Xe.slice(-1)!="/"&&(Xe+="/"),Xe=(Xe+Te).replace("//","/")),je={name:a(Te),type:2},he.FileIndex.push(je),he.FullPaths.push(Xe),Ne||Cr.utils.cfb_gc(he)}return je.content=Ce,je.size=Ce?Ce.length:0,we&&(we.CLSID&&(je.clsid=we.CLSID),we.mt&&(je.mt=we.mt),we.ct&&(je.ct=we.ct)),je}function Kr(he,Te){E(he);var Ce=Cr.find(he,Te);if(Ce){for(var we=0;we<he.FileIndex.length;++we)if(he.FileIndex[we]==Ce)return he.FileIndex.splice(we,1),he.FullPaths.splice(we,1),!0}return!1}function Jr(he,Te,Ce){E(he);var we=Cr.find(he,Te);if(we){for(var Ne=0;Ne<he.FileIndex.length;++Ne)if(he.FileIndex[Ne]==we)return he.FileIndex[Ne].name=a(Ce),he.FullPaths[Ne]=Ce,!0}return!1}function Gr(he){B(he,!0)}return t.find=P,t.read=I,t.parse=d,t.write=X,t.writeFile=V,t.utils={cfb_new:nr,cfb_add:gr,cfb_del:Kr,cfb_mov:Jr,cfb_gc:Gr,ReadShift:aw,CheckField:Rie,prep_blob:go,bconcat:Ki,use_zlib:F,_deflateRaw:Qt,_inflateRaw:Or,consts:K},t}();function qMe(e){return typeof e=="string"?Ak(e):Array.isArray(e)?bMe(e):e}function Z2(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=Ak(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?QA(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([qMe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Hm(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function WMe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ts(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function aK(e,t){for(var r=[],n=Ts(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function hk(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function mk(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function XMe(e){for(var t=[],r=Ts(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var XN=new Date(1899,11,30,0,0,0);function Si(e,t){var r=e.getTime(),n=XN.getTime()+(e.getTimezoneOffset()-XN.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var pie=new Date,YMe=XN.getTime()+(pie.getTimezoneOffset()-XN.getTimezoneOffset())*6e4,sK=pie.getTimezoneOffset();function pk(e){var t=new Date;return t.setTime(e*24*60*60*1e3+YMe),t.getTimezoneOffset()!==sK&&t.setTime(t.getTime()+(t.getTimezoneOffset()-sK)*6e4),t}function JMe(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var iK=new Date("2017-02-19T19:06:09.000Z"),gie=isNaN(iK.getFullYear())?new Date("2/19/17"):iK,ZMe=gie.getFullYear()==2017;function Qa(e,t){var r=new Date(e);if(ZMe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(gie.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function gg(e,t){if(pn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return QA(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return QA(aie(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return QA(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return QA(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Ha(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Ha(e[r]));return t}function Ns(e,t){for(var r="";r.length<t;)r+=e;return r}function Fd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var eUe=["january","february","march","april","may","june","july","august","september","october","november","december"];function d1(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&eUe.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var tUe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function xie(e){return e?e.content&&e.type?gg(e.content,!0):e.data?Ty(e.data):e.asNodeBuffer&&pn?Ty(e.asNodeBuffer().toString("binary")):e.asBinary?Ty(e.asBinary()):e._data&&e._data.getContent?Ty(gg(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function vie(e){if(!e)return null;if(e.data)return qG(e.data);if(e.asNodeBuffer&&pn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?qG(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function rUe(e){return e&&e.name.slice(-4)===".bin"?vie(e):xie(e)}function _u(e,t){for(var r=e.FullPaths||Ts(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function W8(e,t){var r=_u(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function oi(e,t,r){if(!r)return rUe(W8(e,t));if(!t)return null;try{return oi(e,t)}catch{return null}}function Dc(e,t,r){if(!r)return xie(W8(e,t));if(!t)return null;try{return Dc(e,t)}catch{return null}}function nUe(e,t,r){return vie(W8(e,t))}function oK(e){for(var t=e.FullPaths||Ts(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function cn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return pn?n=Ph(r):n=yMe(r),Cr.utils.cfb_add(e,t,n)}Cr.utils.cfb_add(e,t,r)}else e.file(t,r)}function X8(){return Cr.utils.cfb_new()}function bie(e,t){switch(t.type){case"base64":return Cr.read(e,{type:"base64"});case"binary":return Cr.read(e,{type:"binary"});case"buffer":case"array":return Cr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Iy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Ys=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,aUe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,lK=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,sUe=/<[^>]*>/g,ol=Ys.match(lK)?lK:sUe,iUe=/<\w*:/,oUe=/<(\/?)\w+:/;function $r(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(aUe),o=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function af(e){return e.replace(oUe,"<$1")}var yie={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Y8=hk(yie),Un=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,c){return yie[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),J8=/[&<>'"]/g,lUe=/[\u0000-\u0008\u000b-\u001f]/g;function pa(e){var t=e+"";return t.replace(J8,function(r){return Y8[r]}).replace(lUe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function cK(e){return pa(e).replace(/ /g,"_x0020_")}var wie=/[\u0000-\u001f]/g;function Z8(e){var t=e+"";return t.replace(J8,function(r){return Y8[r]}).replace(/\n/g,"<br/>").replace(wie,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function cUe(e){var t=e+"";return t.replace(J8,function(r){return Y8[r]}).replace(wie,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var uK=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function uUe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ma(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function $3(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function dK(e){var t=Cm(2*e.length),r,n,a=1,s=0,i=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function AK(e){return Ph(e,"binary").toString("utf8")}var qC="foo bar baz",Ea=pn&&(AK(qC)==$3(qC)&&AK||dK(qC)==$3(qC)&&dK)||$3,QA=pn?function(e){return Ph(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Xw=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Eie=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),dUe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),AUe=/<\/?(?:vt:)?variant>/g,fUe=/<(?:vt:)([^>]*)>([\s\S]*)</;function fK(e,t){var r=$r(e),n=e.match(dUe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(AUe,"").match(fUe);i&&a.push({v:Ea(i[2]),t:i[1]})}),a}var Cie=/(^\s|\s$|\n)/;function xo(e,t){return"<"+e+(t.match(Cie)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Yw(e){return Ts(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Gt(e,t,r){return"<"+e+(r!=null?Yw(r):"")+(t!=null?(t.match(Cie)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function WF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function hUe(e,t){switch(typeof e){case"string":var r=Gt("vt:lpwstr",pa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Gt((e|0)==e?"vt:i4":"vt:r8",pa(String(e)));case"boolean":return Gt("vt:bool",e?"true":"false")}if(e instanceof Date)return Gt("vt:filetime",WF(e));throw new Error("Unable to serialize "+e)}function eL(e){if(pn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ea(Hm(G8(e)));throw new Error("Bad input format: expected Buffer or string")}var Jw=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ci={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Rg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Bc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function mUe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function pUe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var hK=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},mK=pn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Ph(t)})):hK(e)}:hK,pK=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(th(e,a)));return n.join("").replace(El,"")},tL=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(El,""):pK(e,t,r)}:pK,gK=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},_ie=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):gK(e,t,r)}:gK,xK=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Yx(e,a)));return n.join("")},eE=pn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):xK(t,r,n)}:xK,Nie=function(e,t){var r=Tc(e,t);return r>0?eE(e,t+4,t+4+r-1):""},Sie=Nie,kie=function(e,t){var r=Tc(e,t);return r>0?eE(e,t+4,t+4+r-1):""},Bie=kie,Tie=function(e,t){var r=2*Tc(e,t);return r>0?eE(e,t+4,t+4+r-1):""},jie=Tie,Iie=function(t,r){var n=Tc(t,r);return n>0?tL(t,r+4,r+4+n):""},Fie=Iie,Oie=function(e,t){var r=Tc(e,t);return r>0?eE(e,t+4,t+4+r):""},Die=Oie,Pie=function(e,t){return mUe(e,t)},YN=Pie,rL=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pn&&(Sie=function(t,r){if(!Buffer.isBuffer(t))return Nie(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},Bie=function(t,r){if(!Buffer.isBuffer(t))return kie(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},jie=function(t,r){if(!Buffer.isBuffer(t))return Tie(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Fie=function(t,r){if(!Buffer.isBuffer(t))return Iie(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},Die=function(t,r){if(!Buffer.isBuffer(t))return Oie(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},YN=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Pie(t,r)},rL=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Yx=function(e,t){return e[t]},th=function(e,t){return e[t+1]*256+e[t]},gUe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Tc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Sp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},xUe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function aw(e,t){var r="",n,a,s=[],i,o,c,u;switch(t){case"dbcs":if(u=this.l,pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(th(this,u)),u+=2;e*=2;break;case"utf8":r=eE(this,this.l,this.l+e);break;case"utf16le":e*=2,r=tL(this,this.l,this.l+e);break;case"wstr":return aw.call(this,e,"dbcs");case"lpstr-ansi":r=Sie(this,this.l),e=4+Tc(this,this.l);break;case"lpstr-cp":r=Bie(this,this.l),e=4+Tc(this,this.l);break;case"lpwstr":r=jie(this,this.l),e=4+2*Tc(this,this.l);break;case"lpp4":e=4+Tc(this,this.l),r=Fie(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Tc(this,this.l),r=Die(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=Yx(this,this.l+e++))!==0;)s.push(KC(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=th(this,this.l+e))!==0;)s.push(KC(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Yx(this,u),this.l=u+1,o=aw.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(KC(th(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Yx(this,u),this.l=u+1,o=aw.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(KC(Yx(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=Yx(this,this.l),this.l++,n;case 2:return n=(t==="i"?gUe:th)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Sp:xUe)(this,this.l),this.l+=4,n):(a=Tc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=YN(this,this.l):a=YN([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=_ie(this,this.l,e);break}}return this.l+=e,r}var vUe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},bUe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},yUe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function wUe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)yUe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,vUe(this,t,this.l);break;case 8:if(n=8,r==="f"){pUe(this,t,this.l);break}case 16:break;case-4:n=4,bUe(this,t,this.l);break}return this.l+=n,this}function Rie(e,t){var r=_ie(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function go(e,t){e.l=t,e.read_shift=aw,e.chk=Rie,e.write_shift=wUe}function al(e,t){e.l+=t}function Et(e){var t=Cm(e);return go(t,0),t}function Rh(e,t,r){if(e){var n,a,s;go(e,e.l||0);for(var i=e.length,o=0,c=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=a2[o]||a2[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,o))return}}}function ec(){var e=[],t=pn?256:2048,r=function(u){var d=Et(u);return go(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),Ki(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:i,_bufs:e}}function Rt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=a2[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&rL(r)&&e.push(r)}}function sw(e,t,r){var n=Ha(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function vK(e,t,r){var n=Ha(e);return n.s=sw(n.s,t.s,r),n.e=sw(n.e,t.s,r),n}function iw(e,t){if(e.cRel&&e.c<0)for(e=Ha(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Ha(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Ur(e);return!e.cRel&&e.cRel!=null&&(r=_Ue(r)),!e.rRel&&e.rRel!=null&&(r=EUe(r)),r}function G3(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+is(e.s.c)+":"+(e.e.cRel?"":"$")+is(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+qs(e.s.r)+":"+(e.e.rRel?"":"$")+qs(e.e.r):iw(e.s,t.biff)+":"+iw(e.e,t.biff)}function nL(e){return parseInt(CUe(e),10)-1}function qs(e){return""+(e+1)}function EUe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function CUe(e){return e.replace(/\$(\d+)$/,"$1")}function aL(e){for(var t=NUe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function is(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function _Ue(e){return e.replace(/^([A-Z])/,"$$$1")}function NUe(e){return e.replace(/^\$([A-Z])/,"$1")}function SUe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function os(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Ur(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function rc(e){var t=e.indexOf(":");return t==-1?{s:os(e),e:os(e)}:{s:os(e.slice(0,t)),e:os(e.slice(t+1))}}function rn(e,t){return typeof t>"u"||typeof t=="number"?rn(e.s,e.e):(typeof e!="string"&&(e=Ur(e)),typeof t!="string"&&(t=Ur(t)),e==t?e:e+":"+t)}function Qn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function bK(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Hu(e.z,r?Si(t):t)}catch{}try{return e.w=Hu((e.XF||{}).numFmtId||(r?14:0),r?Si(t):t)}catch{return""+t}}function _h(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Lh[e.v]||e.v:t==null?bK(e,e.v):bK(e,t))}function Vm(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function Lie(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?os(n.origin):n.origin;i=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Qn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},g=i+f,x=o+h;if(u.s.r>g&&(u.s.r=g),u.s.c>x&&(u.s.c=x),u.e.r<g&&(u.e.r=g),u.e.c<x&&(u.e.c=x),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Rr[14],n.cellDates?(p.t="d",p.w=Hu(p.z,Si(p.v))):(p.t="n",p.v=Si(p.v),p.w=Hu(p.z,p.v))):p.t="s";if(a)s[g]||(s[g]=[]),s[g][x]&&s[g][x].z&&(p.z=s[g][x].z),s[g][x]=p;else{var b=Ur({c:x,r:g});s[b]&&s[b].z&&(p.z=s[b].z),s[b]=p}}}return u.s.c<1e7&&(s["!ref"]=rn(u)),s}function tb(e,t){return Lie(null,e,t)}function kUe(e){return e.read_shift(4,"i")}function Od(e,t){return t||(t=Et(4)),t.write_shift(4,e),t}function rl(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Xi(e,t){var r=!1;return t==null&&(r=!0,t=Et(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function BUe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function TUe(e,t){return t||(t=Et(4)),t.write_shift(2,0),t.write_shift(2,0),t}function sL(e,t){var r=e.l,n=e.read_shift(1),a=rl(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)s.push(BUe(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function jUe(e,t){var r=!1;return t==null&&(r=!0,t=Et(15+4*e.t.length)),t.write_shift(1,0),Xi(e.t,t),r?t.slice(0,t.l):t}var IUe=sL;function FUe(e,t){var r=!1;return t==null&&(r=!0,t=Et(23+4*e.t.length)),t.write_shift(1,1),Xi(e.t,t),t.write_shift(4,1),TUe({},t),r?t.slice(0,t.l):t}function Gu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Lg(e,t){return t==null&&(t=Et(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Mg(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Ug(e,t){return t==null&&(t=Et(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var OUe=rl,Mie=Xi;function iL(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function JN(e,t){var r=!1;return t==null&&(r=!0,t=Et(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var DUe=rl,XF=iL,oL=JN;function lL(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?YN([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Sp(t,0)>>2;return r?a/100:a}function Uie(e,t){t==null&&(t=Et(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function Qie(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function PUe(e,t){return t||(t=Et(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Qg=Qie,rb=PUe;function Jo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function xg(e,t){return(t||Et(8)).write_shift(8,e,"f")}function RUe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Wp[a];u&&(t.rgb=e2(u));break;case 2:t.rgb=e2([i,o,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function ZN(e,t){if(t||(t=Et(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function LUe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function MUe(e,t){t||(t=Et(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Hie(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function UUe(e){return Hie(e,1)}function QUe(e){return Hie(e,2)}var cL=2,Vl=3,WC=11,yK=12,eS=19,XC=64,HUe=65,VUe=71,zUe=4108,$Ue=4126,zi=80,Vie=81,GUe=[zi,Vie],YF={1:{n:"CodePage",t:cL},2:{n:"Category",t:zi},3:{n:"PresentationFormat",t:zi},4:{n:"ByteCount",t:Vl},5:{n:"LineCount",t:Vl},6:{n:"ParagraphCount",t:Vl},7:{n:"SlideCount",t:Vl},8:{n:"NoteCount",t:Vl},9:{n:"HiddenCount",t:Vl},10:{n:"MultimediaClipCount",t:Vl},11:{n:"ScaleCrop",t:WC},12:{n:"HeadingPairs",t:zUe},13:{n:"TitlesOfParts",t:$Ue},14:{n:"Manager",t:zi},15:{n:"Company",t:zi},16:{n:"LinksUpToDate",t:WC},17:{n:"CharacterCount",t:Vl},19:{n:"SharedDoc",t:WC},22:{n:"HyperlinksChanged",t:WC},23:{n:"AppVersion",t:Vl,p:"version"},24:{n:"DigSig",t:HUe},26:{n:"ContentType",t:zi},27:{n:"ContentStatus",t:zi},28:{n:"Language",t:zi},29:{n:"Version",t:zi},255:{},2147483648:{n:"Locale",t:eS},2147483651:{n:"Behavior",t:eS},1919054434:{}},JF={1:{n:"CodePage",t:cL},2:{n:"Title",t:zi},3:{n:"Subject",t:zi},4:{n:"Author",t:zi},5:{n:"Keywords",t:zi},6:{n:"Comments",t:zi},7:{n:"Template",t:zi},8:{n:"LastAuthor",t:zi},9:{n:"RevNumber",t:zi},10:{n:"EditTime",t:XC},11:{n:"LastPrinted",t:XC},12:{n:"CreatedDate",t:XC},13:{n:"ModifiedDate",t:XC},14:{n:"PageCount",t:Vl},15:{n:"WordCount",t:Vl},16:{n:"CharCount",t:Vl},17:{n:"Thumbnail",t:VUe},18:{n:"Application",t:zi},19:{n:"DocSecurity",t:Vl},255:{},2147483648:{n:"Locale",t:eS},2147483651:{n:"Behavior",t:eS},1919054434:{}},wK={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},KUe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function qUe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var WUe=qUe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Wp=Ha(WUe),Lh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},zie={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ZF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},YC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function uL(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function XUe(e){var t=uL();if(!e||!e.match)return t;var r={};if((e.match(ol)||[]).forEach(function(n){var a=$r(n);switch(a[0].replace(iUe,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[ZF[a.ContentType]]!==void 0&&t[ZF[a.ContentType]].push(a.PartName);break}}),t.xmlns!==Ci.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function $ie(e,t){var r=XMe(ZF),n=[],a;n[n.length]=Ys,n[n.length]=Gt("Types",null,{xmlns:Ci.CT,"xmlns:xsd":Ci.xsd,"xmlns:xsi":Ci.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Gt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Gt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:YC[c][t.bookType]||YC[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Gt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:YC[c][t.bookType]||YC[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Gt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var En={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Zw(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function ow(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(ol)||[]).forEach(function(a){var s=$r(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:Iy(s.Target,t);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function Bv(e){var t=[Ys,Gt("Relationships",null,{xmlns:Ci.RELS})];return Ts(e["!id"]).forEach(function(r){t[t.length]=Gt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function fa(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[En.HLINK,En.XPATH,En.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var YUe="application/vnd.oasis.opendocument.spreadsheet";function JUe(e,t){for(var r=eL(e),n,a;n=Jw.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=$r(n[0],!1),a.path=="/"&&a.type!==YUe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function ZUe(e){var t=[Ys];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function EK(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function e7e(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function t7e(e){var t=[Ys];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(EK(e[r][0],e[r][1])),t.push(e7e("",e[r][0]));return t.push(EK("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Gie(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+GN.version+"</meta:generator></office:meta></office:document-meta>"}var Mu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],r7e=function(){for(var e=new Array(Mu.length),t=0;t<Mu.length;++t){var r=Mu[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Kie(e){var t={};e=Ea(e);for(var r=0;r<Mu.length;++r){var n=Mu[r],a=e.match(r7e[r]);a!=null&&a.length>0&&(t[n[1]]=Un(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Qa(t[n[1]]))}return t}function K3(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=pa(t),n[n.length]=r?Gt(e,t,r):xo(e,t))}function qie(e,t){var r=t||{},n=[Ys,Gt("cp:coreProperties",null,{"xmlns:cp":Ci.CORE_PROPS,"xmlns:dc":Ci.dc,"xmlns:dcterms":Ci.dcterms,"xmlns:dcmitype":Ci.dcmitype,"xmlns:xsi":Ci.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&K3("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:WF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&K3("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:WF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Mu.length;++s){var i=Mu[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&K3(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Xp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Wie=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Xie(e,t,r,n){var a=[];if(typeof e=="string")a=fK(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?fK(t,n).map(function(d){return d.v}):t,o=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function n7e(e,t,r){var n={};return t||(t={}),e=Ea(e),Xp.forEach(function(a){var s=(e.match(Xw(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Un(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Xie(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Yie(e){var t=[],r=Gt;return e||(e={}),e.Application="SheetJS",t[t.length]=Ys,t[t.length]=Gt("Properties",null,{xmlns:Ci.EXT_PROPS,"xmlns:vt":Ci.vt}),Xp.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=pa(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+pa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var a7e=/<[^>]+>[^<]*/g;function s7e(e,t){var r={},n="",a=e.match(a7e);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=$r(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Un(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Un(d);break;case"bool":r[n]=Ma(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Qa(d);break;case"cy":case"error":r[n]=Un(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function Jie(e){var t=[Ys,Gt("Properties",null,{xmlns:Ci.CUST_PROPS,"xmlns:vt":Ci.vt})];if(!e)return t.join("");var r=1;return Ts(e).forEach(function(a){++r,t[t.length]=Gt("property",hUe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:pa(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var eO={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},q3;function i7e(e,t,r){q3||(q3=hk(eO)),t=q3[t]||t,e[t]=r}function o7e(e,t){var r=[];return Ts(eO).map(function(n){for(var a=0;a<Mu.length;++a)if(Mu[a][1]==n)return Mu[a];for(a=0;a<Xp.length;++a)if(Xp[a][1]==n)return Xp[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(xo(eO[n[1]]||n[1],a))}}),Gt("DocumentProperties",r.join(""),{xmlns:Bc.o})}function l7e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Ts(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<Mu.length;++i)if(s==Mu[i][1])return;for(i=0;i<Xp.length;++i)if(s==Xp[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=e[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(Gt(cK(s),o,{"dt:dt":c}))}}),t&&Ts(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Gt(cK(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+Bc.o+'">'+a.join("")+"</"+n+">"}function dL(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function c7e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=Et(8);return i.write_shift(4,n),i.write_shift(4,a),i}function Zie(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function eoe(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function toe(e,t,r){return t===31?eoe(e):Zie(e,t,r)}function tO(e,t,r){return toe(e,t,r===!1?0:4)}function u7e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return toe(e,t,0)}function d7e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(El,""),e.l-a&2&&(e.l+=2)}return r}function A7e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(El,"");return r}function f7e(e){var t=e.l,r=tS(e,Vie);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=tS(e,Vl);return[r,n]}function h7e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(f7e(e));return r}function CK(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(El,"").replace(jy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function roe(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function m7e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function tS(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==yK&&n!==t&&GUe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===yK?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return Zie(e,n,4).replace(El,"");case 31:return eoe(e);case 64:return dL(e);case 65:return roe(e);case 71:return m7e(e);case 80:return tO(e,n,!s.raw).replace(El,"");case 81:return u7e(e,n).replace(El,"");case 4108:return h7e(e);case 4126:case 4127:return n==4127?d7e(e):A7e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function _K(e,t){var r=Et(4),n=Et(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Et(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=c7e(t);break;case 31:case 80:for(n=Et(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Ki([r,n])}function NK(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,c=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),f=e.read_shift(4);s[i]=[d,f+r]}s.sort(function(w,_){return w[1]-_[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var p=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(p=!1,e.l=s[i][1]),p)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var g=t[s[i][0]];if(h[g.n]=tS(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Nd(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[i][0]===1){if(o=h.CodePage=tS(e,cL),Nd(o),c!==-1){var x=e.l;e.l=s[c][1],u=CK(e,o),e.l=x}}else if(s[i][0]===0){if(o===0){c=i,e.l=s[i+1][1];continue}u=CK(e,o)}else{var b=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=roe(e);break;case 30:e.l+=4,y=tO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=tO(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Ms(e,4);break;case 64:e.l+=4,y=Qa(dL(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[b]=y}}return e.l=r+n,h}var noe=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function p7e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function SK(e,t,r){var n=Et(8),a=[],s=[],i=8,o=0,c=Et(8),u=Et(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!t){u=Et(8),u.write_shift(4,0),a.unshift(u);var d=[Et(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=Et(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Ki(d),s.unshift(c),i+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(noe.indexOf(e[o][0])>-1||Wie.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],p=0;if(t){p=+t[e[o][0]];var g=r[p];if(g.p=="version"&&typeof h=="string"){var x=h.split(".");h=(+x[0]<<16)+(+x[1]||0)}c=_K(g.t,h)}else{var b=p7e(h);b==-1&&(b=31,h=String(h)),c=_K(b,h)}s.push(c),u=Et(8),u.write_shift(4,t?p:2+o),a.push(u),i+=8+c.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,y),y+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Ki([n].concat(a).concat(s))}function kK(e,t,r){var n=e.content;if(!n)return{};go(n,0);var a,s,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Cr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=NK(n,t),h={SystemIdentifier:u};for(var p in f)h[p]=f[p];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=NK(n,null)}catch{}for(p in g)h[p]=g[p];return h.FMTID=[s,i],h}function BK(e,t,r,n,a,s){var i=Et(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Cr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var c=SK(e,r,n);if(o.push(c),a){var u=SK(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),o.push(u)}return Ki(o)}function N0(e,t){return e.read_shift(t),null}function g7e(e,t){t||(t=Et(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function x7e(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Ms(e,t){return e.read_shift(t)===1}function pl(e,t){return t||(t=Et(2)),t.write_shift(2,+!!e),t}function li(e){return e.read_shift(2,"u")}function Su(e,t){return t||(t=Et(2)),t.write_shift(2,e),t}function aoe(e,t){return x7e(e,t,li)}function v7e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function soe(e,t,r){return r||(r=Et(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function tE(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function b7e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,c={};a&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=o),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function y7e(e){var t=e.t||"",r=Et(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Et(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Ki(a)}function vg(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function rE(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):vg(e,n,r)}function Hg(e,t,r){if(r.biff>5)return rE(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function ioe(e,t,r){return r||(r=Et(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function w7e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function E7e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(El,"");return n&&(e.l+=24),a}function C7e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(El,"");return r+i}function _7e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return E7e(e);case"0303000000000000c000000000000046":return C7e(e);default:throw new Error("Unsupported Moniker "+r)}}function JC(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(El,""):"";return r}function TK(e,t){t||(t=Et(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function N7e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,c,u="",d,f;a&16&&(s=JC(e,r-e.l)),a&128&&(i=JC(e,r-e.l)),(a&257)===257&&(o=JC(e,r-e.l)),(a&257)===1&&(c=_7e(e,r-e.l)),a&8&&(u=JC(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=dL(e)),e.l=r;var h=i||o||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return d&&(p.guid=d),f&&(p.time=f),s&&(p.Tooltip=s),p}function S7e(e){var t=Et(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),TK(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&TK(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function ooe(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function loe(e,t){var r=ooe(e);return r[3]=0,r}function sf(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function bg(e,t,r,n){return n||(n=Et(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function k7e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function B7e(e,t,r){return t===0?"":Hg(e,t,r)}function T7e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function coe(e){var t=e.read_shift(2),r=lL(e);return[t,r]}function j7e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=tE(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function gk(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function uoe(e,t){return t||(t=Et(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function doe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var I7e=doe;function Aoe(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function F7e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function O7e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Mo(e){e.l+=2,e.l+=e.read_shift(2)}var D7e={0:Mo,4:Mo,5:Mo,6:Mo,7:O7e,8:Mo,9:Mo,10:Mo,11:Mo,12:Mo,13:F7e,14:Mo,15:Mo,16:Mo,17:Mo,18:Mo,19:Mo,20:Mo,21:Aoe};function P7e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(D7e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function ZC(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function AL(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Et(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function R7e(e,t){return t===0||e.read_shift(2),1200}function L7e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=Hg(e,0,r);return e.read_shift(t+n-e.l),a}function M7e(e,t){var r=!t||t.biff==8,n=Et(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function U7e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Q7e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=tE(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function H7e(e,t){var r=!t||t.biff>=8?2:1,n=Et(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function V7e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(b7e(e));return s.Count=n,s.Unique=a,s}function z7e(e,t){var r=Et(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=y7e(e[a]);var s=Ki([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function $7e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function G7e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function K7e(e){var t=k7e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function q7e(e){return e.read_shift(2),e.read_shift(4)}function jK(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function W7e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function X7e(){var e=Et(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Y7e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function J7e(e){var t=Et(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Z7e(){}function e9e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=tE(e,0,r),n}function t9e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=Et(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function r9e(e){var t=sf(e);return t.isst=e.read_shift(4),t}function n9e(e,t,r,n){var a=Et(10);return bg(e,t,n,a),a.write_shift(4,r),a}function a9e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=sf(e);r.biff==2&&e.l++;var s=rE(e,n-e.l,r);return a.val=s,a}function s9e(e,t,r,n,a){var s=!a||a.biff==8,i=Et(8+ +s+(1+s)*r.length);return bg(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function i9e(e,t,r){var n=e.read_shift(2),a=Hg(e,0,r);return[n,a]}function o9e(e,t,r,n){var a=r&&r.biff==5;n||(n=Et(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var l9e=Hg;function IK(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c}}}function c9e(e,t){var r=t.biff==8||!t.biff?4:2,n=Et(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function u9e(e){var t=e.read_shift(2),r=e.read_shift(2),n=coe(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function d9e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(coe(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function A9e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function f9e(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=KUe[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function h9e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=f9e(e,t,n.fStyle,r),n}function FK(e,t,r,n){var a=r&&r.biff==5;n||(n=Et(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function m9e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function p9e(e){var t=Et(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function OK(e,t,r){var n=sf(e);(r.biff==2||t==9)&&++e.l;var a=v7e(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function g9e(e,t,r,n,a,s){var i=Et(8);return bg(e,t,n,i),soe(r,s,i),i}function x9e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=sf(e),a=Jo(e);return n.val=a,n}function v9e(e,t,r,n){var a=Et(14);return bg(e,t,n,a),xg(r,a),a}var DK=B7e;function b9e(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=vg(e,s),o=[];n>e.l;)o.push(rE(e));return[s,a,i,o]}function PK(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=j7e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var y9e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function RK(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=vg(e,i,r);a&32&&(u=y9e[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:Pze(e,d,r,o);return{chKey:s,Name:u,itab:c,rgce:f}}function foe(e,t,r){if(r.biff<8)return w9e(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(T7e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function w9e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=tE(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function E9e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=vg(e,n,r),i=vg(e,a,r);return[s,i]}function C9e(e,t,r){var n=doe(e);e.l++;var a=e.read_shift(1);return t-=8,[Rze(e,t,r),a,n]}function LK(e,t,r){var n=I7e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,Oze(e,t,r)]}function _9e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function N9e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=Hg(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}function S9e(e,t,r){return N9e(e,t,r)}function k9e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(gk(e));return r}function B9e(e){var t=Et(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)uoe(e[r],t);return t}function T9e(e,t,r){if(r&&r.biff<8)return I9e(e,t,r);var n=Aoe(e),a=P7e(e,t-22,n[1]);return{cmo:n,ft:a}}var j9e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function I9e(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((j9e[n]||al)(e,t,r)),{cmo:[a,n,s],ft:i}}function F9e(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=w7e(e,6,r);var o=e.read_shift(2);e.read_shift(2),li(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=vg(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function O9e(e,t){var r=gk(e);e.l+=16;var n=N7e(e,t-24);return[r,n]}function D9e(e){var t=Et(24),r=os(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Ki([t,S7e(e[1])])}function P9e(e,t){e.read_shift(2);var r=gk(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(El,""),[r,n]}function R9e(e){var t=e[1].Tooltip,r=Et(10+2*(t.length+1));r.write_shift(2,2048);var n=os(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function L9e(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=wK[r]||r,r=e.read_shift(2),t[1]=wK[r]||r,t}function M9e(e){return e||(e=Et(4)),e.write_shift(2,1),e.write_shift(2,1),e}function U9e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(loe(e));return r}function Q9e(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(loe(e));return r}function H9e(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function hoe(e,t,r){if(!r.cellStyles)return al(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function V9e(e,t){var r=Et(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function z9e(e,t){var r={};return t<32||(e.l+=16,r.header=Jo(e),r.footer=Jo(e),e.l+=2),r}function $9e(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function G9e(e){for(var t=Et(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var K9e=sf,q9e=aoe,W9e=rE;function X9e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function Y9e(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=sf(e);++e.l;var a=Hg(e,t-7,r);return n.t="str",n.val=a,n}function J9e(e){var t=sf(e);++e.l;var r=Jo(e);return t.t="n",t.val=r,t}function Z9e(e,t,r){var n=Et(15);return iE(n,e,t),n.write_shift(8,r,"f"),n}function eQe(e){var t=sf(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function tQe(e,t,r){var n=Et(9);return iE(n,e,t),n.write_shift(2,r),n}function rQe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function nQe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function aQe(e,t,r){var n=e.l+t,a=sf(e),s=e.read_shift(2),i=vg(e,s,r);return e.l=n,a.t="str",a.val=i,a}var sQe=[2,3,48,49,131,139,140,245],rO=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=hk({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=Cm(1);switch(c.type){case"base64":d=Oc(zc(o));break;case"binary":d=Oc(o);break;case"buffer":case"array":d=o;break}go(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var x=0,b=521;f==2&&(x=d.read_shift(2)),d.l+=3,f!=2&&(x=d.read_shift(4)),x>1048576&&(x=1e6),f!=2&&(b=d.read_shift(2));var y=d.read_shift(2),w=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(w=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var _=[],j={},k=Math.min(d.length,f==2?521:b-10-(p?264:0)),I=g?32:11;d.l<k&&d[d.l]!=13;)switch(j={},j.name=Kw.utils.decode(w,d.slice(d.l,d.l+I)).replace(/[\u0000\r\n].*$/g,""),d.l+=I,j.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(j.offset=d.read_shift(4)),j.len=d.read_shift(1),f==2&&(j.offset=d.read_shift(2)),j.dec=d.read_shift(1),j.name.length&&_.push(j),f!=2&&(d.l+=g?13:14),j.type){case"B":(!p||j.len!=8)&&c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var E=0,N=0;for(u[0]=[],N=0;N!=_.length;++N)u[0][N]=_[N].name;for(;x-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++E]=[],N=0,N=0;N!=_.length;++N){var B=d.slice(d.l,d.l+_[N].len);d.l+=_[N].len,go(B,0);var R=Kw.utils.decode(w,B);switch(_[N].type){case"C":R.trim().length&&(u[E][N]=R.replace(/\s+$/,""));break;case"D":R.length===8?u[E][N]=new Date(+R.slice(0,4),+R.slice(4,6)-1,+R.slice(6,8)):u[E][N]=R;break;case"F":u[E][N]=parseFloat(R.trim());break;case"+":case"I":u[E][N]=g?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(R.trim().toUpperCase()){case"Y":case"T":u[E][N]=!0;break;case"N":case"F":u[E][N]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+R+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[E][N]="##MEMO##"+(g?parseInt(R.trim(),10):B.read_shift(4));break;case"N":R=R.replace(/\u0000/g,"").trim(),R&&R!="."&&(u[E][N]=+R||0);break;case"@":u[E][N]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[E][N]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[E][N]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[E][N]=-B.read_shift(-8,"f");break;case"B":if(p&&_[N].len==8){u[E][N]=B.read_shift(8,"f");break}case"G":case"P":B.l+=_[N].len;break;case"0":if(_[N].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+_[N].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=_,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=tb(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,c){try{return Vm(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&Nd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=ec(),f=aS(o,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),g=o["!cols"]||[],x=0,b=0,y=0,w=1;for(x=0;x<h.length;++x){if(((g[x]||{}).DBF||{}).name){h[x]=g[x].DBF.name,++y;continue}if(h[x]!=null){if(++y,typeof h[x]=="number"&&(h[x]=h[x].toString(10)),typeof h[x]!="string")throw new Error("DBF Invalid column name "+h[x]+" |"+typeof h[x]+"|");if(h.indexOf(h[x])!==x){for(b=0;b<1024;++b)if(h.indexOf(h[x]+"_"+b)==-1){h[x]+="_"+b;break}}}}var _=Qn(o["!ref"]),j=[],k=[],I=[];for(x=0;x<=_.e.c-_.s.c;++x){var E="",N="",B=0,R=[];for(b=0;b<p.length;++b)p[b][x]!=null&&R.push(p[b][x]);if(R.length==0||h[x]==null){j[x]="?";continue}for(b=0;b<R.length;++b){switch(typeof R[b]){case"number":N="B";break;case"string":N="C";break;case"boolean":N="L";break;case"object":N=R[b]instanceof Date?"D":"C";break;default:N="C"}B=Math.max(B,String(R[b]).length),E=E&&E!=N?"C":N}B>250&&(B=250),N=((g[x]||{}).DBF||{}).type,N=="C"&&g[x].DBF.len>B&&(B=g[x].DBF.len),E=="B"&&N=="N"&&(E="N",I[x]=g[x].DBF.dec,B=g[x].DBF.len),k[x]=E=="C"||N=="N"?B:s[E]||0,w+=k[x],j[x]=E}var P=d.next(32);for(P.write_shift(4,318902576),P.write_shift(4,p.length),P.write_shift(2,296+32*y),P.write_shift(2,w),x=0;x<4;++x)P.write_shift(4,0);for(P.write_shift(4,0|(+t[nie]||3)<<8),x=0,b=0;x<h.length;++x)if(h[x]!=null){var D=d.next(32),L=(h[x].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);D.write_shift(1,L,"sbcs"),D.write_shift(1,j[x]=="?"?"C":j[x],"sbcs"),D.write_shift(4,b),D.write_shift(1,k[x]||s[j[x]]||0),D.write_shift(1,I[x]||0),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(1,0),D.write_shift(4,0),D.write_shift(4,0),b+=k[x]||s[j[x]]||0}var M=d.next(264);for(M.write_shift(4,13),x=0;x<65;++x)M.write_shift(4,0);for(x=0;x<p.length;++x){var J=d.next(w);for(J.write_shift(1,0),b=0;b<h.length;++b)if(h[b]!=null)switch(j[b]){case"L":J.write_shift(1,p[x][b]==null?63:p[x][b]?84:70);break;case"B":J.write_shift(8,p[x][b]||0,"f");break;case"N":var H="0";for(typeof p[x][b]=="number"&&(H=p[x][b].toFixed(I[b]||0)),y=0;y<k[b]-H.length;++y)J.write_shift(1,32);J.write_shift(1,H,"sbcs");break;case"D":p[x][b]?(J.write_shift(4,("0000"+p[x][b].getFullYear()).slice(-4),"sbcs"),J.write_shift(2,("00"+(p[x][b].getMonth()+1)).slice(-2),"sbcs"),J.write_shift(2,("00"+p[x][b].getDate()).slice(-2),"sbcs")):J.write_shift(8,"00000000","sbcs");break;case"C":var K=String(p[x][b]!=null?p[x][b]:"").slice(0,k[b]);for(J.write_shift(1,K,"sbcs"),y=0;y<k[b]-K.length;++y)J.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),moe=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ts(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var g=e[p];return typeof g=="number"?WG(g):g},n=function(h,p,g){var x=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return x==59?h:WG(x)};e["|"]=254;function a(h,p){switch(p.type){case"base64":return s(zc(h),p);case"binary":return s(h,p);case"buffer":return s(pn&&Buffer.isBuffer(h)?h.toString("binary"):Hm(h),p);case"array":return s(gg(h),p)}throw new Error("Unrecognized type "+p.type)}function s(h,p){var g=h.split(/[\n\r]+/),x=-1,b=-1,y=0,w=0,_=[],j=[],k=null,I={},E=[],N=[],B=[],R=0,P;for(+p.codepage>=0&&Nd(+p.codepage);y!==g.length;++y){R=0;var D=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),L=D.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),M=L[0],J;if(D.length>0)switch(M){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":L[1].charAt(0)=="P"&&j.push(D.slice(3).replace(/;;/g,";"));break;case"C":var H=!1,K=!1,V=!1,G=!1,X=-1,ee=-1;for(w=1;w<L.length;++w)switch(L[w].charAt(0)){case"A":break;case"X":b=parseInt(L[w].slice(1))-1,K=!0;break;case"Y":for(x=parseInt(L[w].slice(1))-1,K||(b=0),P=_.length;P<=x;++P)_[P]=[];break;case"K":J=L[w].slice(1),J.charAt(0)==='"'?J=J.slice(1,J.length-1):J==="TRUE"?J=!0:J==="FALSE"?J=!1:isNaN(Fd(J))?isNaN(d1(J).getDate())||(J=Qa(J)):(J=Fd(J),k!==null&&Z1(k)&&(J=pk(J))),H=!0;break;case"E":G=!0;var F=Tv(L[w].slice(1),{r:x,c:b});_[x][b]=[_[x][b],F];break;case"S":V=!0,_[x][b]=[_[x][b],"S5S"];break;case"G":break;case"R":X=parseInt(L[w].slice(1))-1;break;case"C":ee=parseInt(L[w].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}if(H&&(_[x][b]&&_[x][b].length==2?_[x][b][0]=J:_[x][b]=J,k=null),V){if(G)throw new Error("SYLK shared formula cannot have own formula");var z=X>-1&&_[X][ee];if(!z||!z[1])throw new Error("SYLK shared formula cannot find base");_[x][b][1]=Foe(z[1],{r:x-X,c:b-ee})}break;case"F":var Y=0;for(w=1;w<L.length;++w)switch(L[w].charAt(0)){case"X":b=parseInt(L[w].slice(1))-1,++Y;break;case"Y":for(x=parseInt(L[w].slice(1))-1,P=_.length;P<=x;++P)_[P]=[];break;case"M":R=parseInt(L[w].slice(1))/20;break;case"F":break;case"G":break;case"P":k=j[parseInt(L[w].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=L[w].slice(1).split(" "),P=parseInt(B[0],10);P<=parseInt(B[1],10);++P)R=parseInt(B[2],10),N[P-1]=R===0?{hidden:!0}:{wch:R},_m(N[P-1]);break;case"C":b=parseInt(L[w].slice(1))-1,N[b]||(N[b]={});break;case"R":x=parseInt(L[w].slice(1))-1,E[x]||(E[x]={}),R>0?(E[x].hpt=R,E[x].hpx=f1(R)):R===0&&(E[x].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}Y<1&&(k=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+D)}}return E.length>0&&(I["!rows"]=E),N.length>0&&(I["!cols"]=N),p&&p.sheetRows&&(_=_.slice(0,p.sheetRows)),[_,I]}function i(h,p){var g=a(h,p),x=g[0],b=g[1],y=tb(x,p);return Ts(b).forEach(function(w){y[w]=b[w]}),y}function o(h,p){return Vm(i(h,p),p)}function c(h,p,g,x){var b="C;Y"+(g+1)+";X"+(x+1)+";K";switch(h.t){case"n":b+=h.v||0,h.f&&!h.F&&(b+=";E"+xL(h.f,{r:g,c:x}));break;case"b":b+=h.v?"TRUE":"FALSE";break;case"e":b+=h.w||h.v;break;case"d":b+='"'+(h.w||h.v)+'"';break;case"s":b+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(h,p){p.forEach(function(g,x){var b="F;W"+(x+1)+" "+(x+1)+" ";g.hidden?b+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=t2(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=r2(g.wpx)),typeof g.wch=="number"&&(b+=Math.round(g.wch))),b.charAt(b.length-1)!=" "&&h.push(b)})}function d(h,p){p.forEach(function(g,x){var b="F;";g.hidden?b+="M0;":g.hpt?b+="M"+20*g.hpt+";":g.hpx&&(b+="M"+20*n2(g.hpx)+";"),b.length>2&&h.push(b+"R"+(x+1))})}function f(h,p){var g=["ID;PWXL;N;E"],x=[],b=Qn(h["!ref"]),y,w=Array.isArray(h),_=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var j=b.s.r;j<=b.e.r;++j)for(var k=b.s.c;k<=b.e.c;++k){var I=Ur({r:j,c:k});y=w?(h[j]||[])[k]:h[I],!(!y||y.v==null&&(!y.f||y.F))&&x.push(c(y,h,j,k))}return g.join(_)+_+x.join(_)+_+"E"+_}return{to_workbook:o,to_sheet:i,from_sheet:f}}(),poe=function(){function e(s,i){switch(i.type){case"base64":return t(zc(s),i);case"binary":return t(s,i);case"buffer":return t(pn&&Buffer.isBuffer(s)?s.toString("binary"):Hm(s),i);case"array":return t(gg(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var o=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=o[d].trim().split(","),p=h[0],g=h[1];++d;for(var x=o[d]||"";(x.match(/["]/g)||[]).length&1&&d<o.length-1;)x+=`
`+o[++d];switch(x=x.trim(),+p){case-1:if(x==="BOT"){f[++c]=[],u=0;continue}else if(x!=="EOD")throw new Error("Unrecognized DIF special command "+x);break;case 0:x==="TRUE"?f[c][u]=!0:x==="FALSE"?f[c][u]=!1:isNaN(Fd(g))?isNaN(d1(g).getDate())?f[c][u]=g:f[c][u]=Qa(g):f[c][u]=Fd(g),++u;break;case 1:x=x.slice(1,x.length-1),x=x.replace(/""/g,'"'),x&&x.match(/^=".*"$/)&&(x=x.slice(2,-1)),f[c][u++]=x!==""?x:null;break}if(x==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return tb(e(s,i),i)}function n(s,i){return Vm(r(s,i),i)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Qn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var x=Ur({r:p,c:g});if(f=h?(c[p]||[])[g]:c[x],!f){i(u,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,b,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Hu(f.z||Rr[14],Si(Qa(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,w=u.join(y);return w}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),goe=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),g=-1,x=-1,b=0,y=[];b!==p.length;++b){var w=p[b].trim().split(":");if(w[0]==="cell"){var _=os(w[1]);if(y.length<=_.r)for(g=y.length;g<=_.r;++g)y[g]||(y[g]=[]);switch(g=_.r,x=_.c,w[2]){case"t":y[g][x]=e(w[3]);break;case"v":y[g][x]=+w[3];break;case"vtf":var j=w[w.length-1];case"vtc":switch(w[3]){case"nl":y[g][x]=!!+w[4];break;default:y[g][x]=+w[4];break}w[2]=="vtf"&&(y[g][x]=[y[g][x],j])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return tb(r(f,h),h)}function a(f,h){return Vm(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,x="",b=rc(f["!ref"]),y=Array.isArray(f),w=b.s.r;w<=b.e.r;++w)for(var _=b.s.c;_<=b.e.c;++_)if(x=Ur({r:w,c:_}),g=y?(f[w]||[])[_]:f[x],!(!g||g.v==null||g.t==="z")){switch(p=["cell",x,"t"],g.t){case"s":case"str":p.push(t(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var j=Si(Qa(g.v));p[2]="vtc",p[3]="nd",p[4]=""+j,p[5]=g.w||Hu(g.z||Rr[14],j);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,o,i,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),A1=function(){function e(d,f,h,p,g){g.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(Fd(d))?isNaN(d1(d).getDate())?f[h][p]=d:f[h][p]=Qa(d):f[h][p]=Fd(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var g=d.split(/[\r\n]/),x=g.length-1;x>=0&&g[x].length===0;)--x;for(var b=10,y=0,w=0;w<=x;++w)y=g[w].indexOf(" "),y==-1?y=g[w].length:y++,b=Math.max(b,y);for(w=0;w<=x;++w){p[w]=[];var _=0;for(e(g[w].slice(0,b).trim(),p,w,_,h),_=1;_<=(g[w].length-b)/10+1;++_)e(g[w].slice(b+(_-1)*10,b+_*10).trim(),p,w,_,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,p=0,g=0;p<d.length;++p)(g=d.charCodeAt(p))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(x,b){return x[0]-b[0]||n[x[1]]-n[b[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},p="",g=h.dense?[]:{},x={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):h&&h.FS?p=h.FS:p=a(d.slice(0,1024));var b=0,y=0,w=0,_=0,j=0,k=p.charCodeAt(0),I=!1,E=0,N=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=h.dateNF!=null?$Me(h.dateNF):null;function R(){var P=d.slice(_,j),D={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)D.t="z";else if(h.raw)D.t="s",D.v=P;else if(P.trim().length===0)D.t="s",D.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(D.t="s",D.v=P.slice(2,-1).replace(/""/g,'"')):bVe(P)?(D.t="n",D.f=P.slice(1)):(D.t="s",D.v=P);else if(P=="TRUE")D.t="b",D.v=!0;else if(P=="FALSE")D.t="b",D.v=!1;else if(!isNaN(w=Fd(P)))D.t="n",h.cellText!==!1&&(D.w=P),D.v=w;else if(!isNaN(d1(P).getDate())||B&&P.match(B)){D.z=h.dateNF||Rr[14];var L=0;B&&P.match(B)&&(P=GMe(P,h.dateNF,P.match(B)||[]),L=1),h.cellDates?(D.t="d",D.v=Qa(P,L)):(D.t="n",D.v=Si(Qa(P,L))),h.cellText!==!1&&(D.w=Hu(D.z,D.v instanceof Date?Si(D.v):D.v)),h.cellNF||delete D.z}else D.t="s",D.v=P;if(D.t=="z"||(h.dense?(g[b]||(g[b]=[]),g[b][y]=D):g[Ur({c:y,r:b})]=D),_=j+1,N=d.charCodeAt(_),x.e.c<y&&(x.e.c=y),x.e.r<b&&(x.e.r=b),E==k)++y;else if(y=0,++b,h.sheetRows&&h.sheetRows<=b)return!0}e:for(;j<d.length;++j)switch(E=d.charCodeAt(j)){case 34:N===34&&(I=!I);break;case k:case 10:case 13:if(!I&&R())break e;break}return j-_>0&&R(),g["!ref"]=rn(x),g}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):tb(t(d,f),f)}function o(d,f){var h="",p=f.type=="string"?[0,0,0,0]:NL(d,f);switch(f.type){case"base64":h=zc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof Kw<"u"||(h=pn&&Buffer.isBuffer(d)?d.toString("binary"):Hm(d));break;case"array":h=gg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=Ea(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ea(h):f.type=="binary"&&typeof Kw<"u",h.slice(0,19)=="socialcalc:version:"?goe.to_sheet(f.type=="string"?h:Ea(h),f):i(h,f)}function c(d,f){return Vm(o(d,f),f)}function u(d){for(var f=[],h=Qn(d["!ref"]),p,g=Array.isArray(d),x=h.s.r;x<=h.e.r;++x){for(var b=[],y=h.s.c;y<=h.e.c;++y){var w=Ur({r:x,c:y});if(p=g?(d[x]||[])[y]:d[w],!p||p.v==null){b.push("          ");continue}for(var _=(p.w||(_h(p),p.w)||"").slice(0,10);_.length<10;)_+=" ";b.push(_+(y===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function iQe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=moe.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return A1.to_workbook(e,t)}}var Yp=function(){function e(F,z,Y){if(F){go(F,F.l||0);for(var te=Y.Enum||X;F.l<F.length;){var ae=F.read_shift(2),le=te[ae]||te[65535],ie=F.read_shift(2),ce=F.l+ie,pe=le.f&&le.f(F,ie,Y);if(F.l=ce,z(pe,le,ae))return}}}function t(F,z){switch(z.type){case"base64":return r(Oc(zc(F)),z);case"binary":return r(Oc(F),z);case"buffer":case"array":return r(F,z)}throw"Unsupported type "+z.type}function r(F,z){if(!F)return F;var Y=z||{},te=Y.dense?[]:{},ae="Sheet1",le="",ie=0,ce={},pe=[],Be=[],ne={s:{r:0,c:0},e:{r:0,c:0}},_e=Y.sheetRows||0;if(F[2]==0&&(F[3]==8||F[3]==9)&&F.length>=16&&F[14]==5&&F[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(F[2]==2)Y.Enum=X,e(F,function(Ie,Ue,Ye){switch(Ye){case 0:Y.vers=Ie,Ie>=4096&&(Y.qpro=!0);break;case 6:ne=Ie;break;case 204:Ie&&(le=Ie);break;case 222:le=Ie;break;case 15:case 51:Y.qpro||(Ie[1].v=Ie[1].v.slice(1));case 13:case 14:case 16:Ye==14&&(Ie[2]&112)==112&&(Ie[2]&15)>1&&(Ie[2]&15)<15&&(Ie[1].z=Y.dateNF||Rr[14],Y.cellDates&&(Ie[1].t="d",Ie[1].v=pk(Ie[1].v))),Y.qpro&&Ie[3]>ie&&(te["!ref"]=rn(ne),ce[ae]=te,pe.push(ae),te=Y.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},ie=Ie[3],ae=le||"Sheet"+(ie+1),le="");var ye=Y.dense?(te[Ie[0].r]||[])[Ie[0].c]:te[Ur(Ie[0])];if(ye){ye.t=Ie[1].t,ye.v=Ie[1].v,Ie[1].z!=null&&(ye.z=Ie[1].z),Ie[1].f!=null&&(ye.f=Ie[1].f);break}Y.dense?(te[Ie[0].r]||(te[Ie[0].r]=[]),te[Ie[0].r][Ie[0].c]=Ie[1]):te[Ur(Ie[0])]=Ie[1];break}},Y);else if(F[2]==26||F[2]==14)Y.Enum=ee,F[2]==14&&(Y.qpro=!0,F.l=0),e(F,function(Ie,Ue,Ye){switch(Ye){case 204:ae=Ie;break;case 22:Ie[1].v=Ie[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ie[3]>ie&&(te["!ref"]=rn(ne),ce[ae]=te,pe.push(ae),te=Y.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},ie=Ie[3],ae="Sheet"+(ie+1)),_e>0&&Ie[0].r>=_e)break;Y.dense?(te[Ie[0].r]||(te[Ie[0].r]=[]),te[Ie[0].r][Ie[0].c]=Ie[1]):te[Ur(Ie[0])]=Ie[1],ne.e.c<Ie[0].c&&(ne.e.c=Ie[0].c),ne.e.r<Ie[0].r&&(ne.e.r=Ie[0].r);break;case 27:Ie[14e3]&&(Be[Ie[14e3][0]]=Ie[14e3][1]);break;case 1537:Be[Ie[0]]=Ie[1],Ie[0]==ie&&(ae=Ie[1]);break}},Y);else throw new Error("Unrecognized LOTUS BOF "+F[2]);if(te["!ref"]=rn(ne),ce[le||ae]=te,pe.push(le||ae),!Be.length)return{SheetNames:pe,Sheets:ce};for(var De={},Se=[],fe=0;fe<Be.length;++fe)ce[pe[fe]]?(Se.push(Be[fe]||pe[fe]),De[Be[fe]]=ce[Be[fe]]||ce[pe[fe]]):(Se.push(Be[fe]),De[Be[fe]]={"!ref":"A1"});return{SheetNames:Se,Sheets:De}}function n(F,z){var Y=z||{};if(+Y.codepage>=0&&Nd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK1 to JS string");var te=ec(),ae=Qn(F["!ref"]),le=Array.isArray(F),ie=[];Kt(te,0,s(1030)),Kt(te,6,c(ae));for(var ce=Math.min(ae.e.r,8191),pe=ae.s.r;pe<=ce;++pe)for(var Be=qs(pe),ne=ae.s.c;ne<=ae.e.c;++ne){pe===ae.s.r&&(ie[ne]=is(ne));var _e=ie[ne]+Be,De=le?(F[pe]||[])[ne]:F[_e];if(!(!De||De.t=="z"))if(De.t=="n")(De.v|0)==De.v&&De.v>=-32768&&De.v<=32767?Kt(te,13,p(pe,ne,De.v)):Kt(te,14,x(pe,ne,De.v));else{var Se=_h(De);Kt(te,15,f(pe,ne,Se.slice(0,239)))}}return Kt(te,1),te.end()}function a(F,z){var Y=z||{};if(+Y.codepage>=0&&Nd(+Y.codepage),Y.type=="string")throw new Error("Cannot write WK3 to JS string");var te=ec();Kt(te,0,i(F));for(var ae=0,le=0;ae<F.SheetNames.length;++ae)(F.Sheets[F.SheetNames[ae]]||{})["!ref"]&&Kt(te,27,G(F.SheetNames[ae],le++));var ie=0;for(ae=0;ae<F.SheetNames.length;++ae){var ce=F.Sheets[F.SheetNames[ae]];if(!(!ce||!ce["!ref"])){for(var pe=Qn(ce["!ref"]),Be=Array.isArray(ce),ne=[],_e=Math.min(pe.e.r,8191),De=pe.s.r;De<=_e;++De)for(var Se=qs(De),fe=pe.s.c;fe<=pe.e.c;++fe){De===pe.s.r&&(ne[fe]=is(fe));var Ie=ne[fe]+Se,Ue=Be?(ce[De]||[])[fe]:ce[Ie];if(!(!Ue||Ue.t=="z"))if(Ue.t=="n")Kt(te,23,R(De,fe,ie,Ue.v));else{var Ye=_h(Ue);Kt(te,22,E(De,fe,ie,Ye.slice(0,239)))}}++ie}}return Kt(te,1),te.end()}function s(F){var z=Et(2);return z.write_shift(2,F),z}function i(F){var z=Et(26);z.write_shift(2,4096),z.write_shift(2,4),z.write_shift(4,0);for(var Y=0,te=0,ae=0,le=0;le<F.SheetNames.length;++le){var ie=F.SheetNames[le],ce=F.Sheets[ie];if(!(!ce||!ce["!ref"])){++ae;var pe=rc(ce["!ref"]);Y<pe.e.r&&(Y=pe.e.r),te<pe.e.c&&(te=pe.e.c)}}return Y>8191&&(Y=8191),z.write_shift(2,Y),z.write_shift(1,ae),z.write_shift(1,te),z.write_shift(2,0),z.write_shift(2,0),z.write_shift(1,1),z.write_shift(1,2),z.write_shift(4,0),z.write_shift(4,0),z}function o(F,z,Y){var te={s:{c:0,r:0},e:{c:0,r:0}};return z==8&&Y.qpro?(te.s.c=F.read_shift(1),F.l++,te.s.r=F.read_shift(2),te.e.c=F.read_shift(1),F.l++,te.e.r=F.read_shift(2),te):(te.s.c=F.read_shift(2),te.s.r=F.read_shift(2),z==12&&Y.qpro&&(F.l+=2),te.e.c=F.read_shift(2),te.e.r=F.read_shift(2),z==12&&Y.qpro&&(F.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function c(F){var z=Et(8);return z.write_shift(2,F.s.c),z.write_shift(2,F.s.r),z.write_shift(2,F.e.c),z.write_shift(2,F.e.r),z}function u(F,z,Y){var te=[{c:0,r:0},{t:"n",v:0},0,0];return Y.qpro&&Y.vers!=20768?(te[0].c=F.read_shift(1),te[3]=F.read_shift(1),te[0].r=F.read_shift(2),F.l+=2):(te[2]=F.read_shift(1),te[0].c=F.read_shift(2),te[0].r=F.read_shift(2)),te}function d(F,z,Y){var te=F.l+z,ae=u(F,z,Y);if(ae[1].t="s",Y.vers==20768){F.l++;var le=F.read_shift(1);return ae[1].v=F.read_shift(le,"utf8"),ae}return Y.qpro&&F.l++,ae[1].v=F.read_shift(te-F.l,"cstr"),ae}function f(F,z,Y){var te=Et(7+Y.length);te.write_shift(1,255),te.write_shift(2,z),te.write_shift(2,F),te.write_shift(1,39);for(var ae=0;ae<te.length;++ae){var le=Y.charCodeAt(ae);te.write_shift(1,le>=128?95:le)}return te.write_shift(1,0),te}function h(F,z,Y){var te=u(F,z,Y);return te[1].v=F.read_shift(2,"i"),te}function p(F,z,Y){var te=Et(7);return te.write_shift(1,255),te.write_shift(2,z),te.write_shift(2,F),te.write_shift(2,Y,"i"),te}function g(F,z,Y){var te=u(F,z,Y);return te[1].v=F.read_shift(8,"f"),te}function x(F,z,Y){var te=Et(13);return te.write_shift(1,255),te.write_shift(2,z),te.write_shift(2,F),te.write_shift(8,Y,"f"),te}function b(F,z,Y){var te=F.l+z,ae=u(F,z,Y);if(ae[1].v=F.read_shift(8,"f"),Y.qpro)F.l=te;else{var le=F.read_shift(2);j(F.slice(F.l,F.l+le),ae),F.l+=le}return ae}function y(F,z,Y){var te=z&32768;return z&=-32769,z=(te?F:0)+(z>=8192?z-16384:z),(te?"":"$")+(Y?is(z):qs(z))}var w={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},_=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(F,z){go(F,0);for(var Y=[],te=0,ae="",le="",ie="",ce="";F.l<F.length;){var pe=F[F.l++];switch(pe){case 0:Y.push(F.read_shift(8,"f"));break;case 1:le=y(z[0].c,F.read_shift(2),!0),ae=y(z[0].r,F.read_shift(2),!1),Y.push(le+ae);break;case 2:{var Be=y(z[0].c,F.read_shift(2),!0),ne=y(z[0].r,F.read_shift(2),!1);le=y(z[0].c,F.read_shift(2),!0),ae=y(z[0].r,F.read_shift(2),!1),Y.push(Be+ne+":"+le+ae)}break;case 3:if(F.l<F.length){console.error("WK1 premature formula end");return}break;case 4:Y.push("("+Y.pop()+")");break;case 5:Y.push(F.read_shift(2));break;case 6:{for(var _e="";pe=F[F.l++];)_e+=String.fromCharCode(pe);Y.push('"'+_e.replace(/"/g,'""')+'"')}break;case 8:Y.push("-"+Y.pop());break;case 23:Y.push("+"+Y.pop());break;case 22:Y.push("NOT("+Y.pop()+")");break;case 20:case 21:ce=Y.pop(),ie=Y.pop(),Y.push(["AND","OR"][pe-20]+"("+ie+","+ce+")");break;default:if(pe<32&&_[pe])ce=Y.pop(),ie=Y.pop(),Y.push(ie+_[pe]+ce);else if(w[pe]){if(te=w[pe][1],te==69&&(te=F[F.l++]),te>Y.length){console.error("WK1 bad formula parse 0x"+pe.toString(16)+":|"+Y.join("|")+"|");return}var De=Y.slice(-te);Y.length-=te,Y.push(w[pe][0]+"("+De.join(",")+")")}else return pe<=7?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=24?console.error("WK1 unsupported op "+pe.toString(16)):pe<=30?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=115?console.error("WK1 unsupported function opcode "+pe.toString(16)):console.error("WK1 unrecognized opcode "+pe.toString(16))}}Y.length==1?z[1].f=""+Y[0]:console.error("WK1 bad formula parse |"+Y.join("|")+"|")}function k(F){var z=[{c:0,r:0},{t:"n",v:0},0];return z[0].r=F.read_shift(2),z[3]=F[F.l++],z[0].c=F[F.l++],z}function I(F,z){var Y=k(F);return Y[1].t="s",Y[1].v=F.read_shift(z-4,"cstr"),Y}function E(F,z,Y,te){var ae=Et(6+te.length);ae.write_shift(2,F),ae.write_shift(1,Y),ae.write_shift(1,z),ae.write_shift(1,39);for(var le=0;le<te.length;++le){var ie=te.charCodeAt(le);ae.write_shift(1,ie>=128?95:ie)}return ae.write_shift(1,0),ae}function N(F,z){var Y=k(F);Y[1].v=F.read_shift(2);var te=Y[1].v>>1;if(Y[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return Y[1].v=te,Y}function B(F,z){var Y=k(F),te=F.read_shift(4),ae=F.read_shift(4),le=F.read_shift(2);if(le==65535)return te===0&&ae===3221225472?(Y[1].t="e",Y[1].v=15):te===0&&ae===3489660928?(Y[1].t="e",Y[1].v=42):Y[1].v=0,Y;var ie=le&32768;return le=(le&32767)-16446,Y[1].v=(1-ie*2)*(ae*Math.pow(2,le+32)+te*Math.pow(2,le)),Y}function R(F,z,Y,te){var ae=Et(14);if(ae.write_shift(2,F),ae.write_shift(1,Y),ae.write_shift(1,z),te==0)return ae.write_shift(4,0),ae.write_shift(4,0),ae.write_shift(2,65535),ae;var le=0,ie=0,ce=0,pe=0;return te<0&&(le=1,te=-te),ie=Math.log2(te)|0,te/=Math.pow(2,ie-31),pe=te>>>0,(pe&2147483648)==0&&(te/=2,++ie,pe=te>>>0),te-=pe,pe|=2147483648,pe>>>=0,te*=Math.pow(2,32),ce=te>>>0,ae.write_shift(4,ce),ae.write_shift(4,pe),ie+=16383+(le?32768:0),ae.write_shift(2,ie),ae}function P(F,z){var Y=B(F);return F.l+=z-14,Y}function D(F,z){var Y=k(F),te=F.read_shift(4);return Y[1].v=te>>6,Y}function L(F,z){var Y=k(F),te=F.read_shift(8,"f");return Y[1].v=te,Y}function M(F,z){var Y=L(F);return F.l+=z-10,Y}function J(F,z){return F[F.l+z-1]==0?F.read_shift(z,"cstr"):""}function H(F,z){var Y=F[F.l++];Y>z-1&&(Y=z-1);for(var te="";te.length<Y;)te+=String.fromCharCode(F[F.l++]);return te}function K(F,z,Y){if(!(!Y.qpro||z<21)){var te=F.read_shift(1);F.l+=17,F.l+=1,F.l+=2;var ae=F.read_shift(z-21,"cstr");return[te,ae]}}function V(F,z){for(var Y={},te=F.l+z;F.l<te;){var ae=F.read_shift(2);if(ae==14e3){for(Y[ae]=[0,""],Y[ae][0]=F.read_shift(2);F[F.l];)Y[ae][1]+=String.fromCharCode(F[F.l]),F.l++;F.l++}}return Y}function G(F,z){var Y=Et(5+F.length);Y.write_shift(2,14e3),Y.write_shift(2,z);for(var te=0;te<F.length;++te){var ae=F.charCodeAt(te);Y[Y.l++]=ae>127?95:ae}return Y[Y.l++]=0,Y}var X={0:{n:"BOF",f:li},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:J},222:{n:"SHEETNAMELP",f:H},65535:{n:""}},ee={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:I},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:N},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:V},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:D},38:{n:"??"},39:{n:"NUMBER27",f:L},40:{n:"FORMULA28",f:M},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:J},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:K},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function oQe(e){var t={},r=e.match(ol),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=$r(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=V8[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var lQe=function(){var e=Xw("t"),t=Xw("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Un(i[1])},c=s.match(t);return c&&(o.s=oQe(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),cQe=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),uQe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,dQe=/<(?:\w+:)?r>/,AQe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function fL(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Un(Ea(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ea(e),r&&(n.h=Z8(n.t))):e.match(dQe)&&(n.r=Ea(e),n.t=Un(Ea((e.replace(AQe,"").match(uQe)||[]).join("").replace(ol,""))),r&&(n.h=cQe(lQe(n.r)))),n):{t:""}}var fQe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,hQe=/<(?:\w+:)?(?:si|sstItem)>/g,mQe=/<\/(?:\w+:)?(?:si|sstItem)>/;function pQe(e,t){var r=[],n="";if(!e)return r;var a=e.match(fQe);if(a){n=a[2].replace(hQe,"").split(mQe);for(var s=0;s!=n.length;++s){var i=fL(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=$r(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var gQe=/^\s|\s$|[\t\n\r]/;function xoe(e,t){if(!t.bookSST)return"";var r=[Ys];r[r.length]=Gt("sst",null,{xmlns:Rg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(gQe)&&(s+=' xml:space="preserve"'),s+=">"+pa(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function xQe(e){return[e.read_shift(4),e.read_shift(4)]}function vQe(e,t){var r=[],n=!1;return Rh(e,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function bQe(e,t){return t||(t=Et(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var yQe=jUe;function wQe(e){var t=ec();Rt(t,159,bQe(e));for(var r=0;r<e.length;++r)Rt(t,19,yQe(e[r]));return Rt(t,160),t.end()}function voe(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function ch(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function EQe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=ch(e,4),t.U=ch(e,4),t.W=ch(e,4),t}function CQe(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function _Qe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(CQe(e));return t}function NQe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function SQe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=ch(e,4),t.U=ch(e,4),t.W=ch(e,4),t}function kQe(e){var t=SQe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function boe(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function yoe(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function BQe(e){var t=ch(e);switch(t.Minor){case 2:return[t.Minor,TQe(e)];case 3:return[t.Minor,jQe()];case 4:return[t.Minor,IQe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function TQe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=boe(e,r),a=yoe(e,e.length-e.l);return{t:"Std",h:n,v:a}}function jQe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function IQe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(ol,function(s){var i=$r(s);switch(af(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function FQe(e,t){var r={},n=r.EncryptionVersionInfo=ch(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=boe(e,a),t-=a,r.EncryptionVerifier=yoe(e,t),r}function OQe(e){var t={},r=t.EncryptionVersionInfo=ch(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function hL(e){var t=0,r,n=voe(e),a=n.length+1,s,i,o,c,u;for(r=Cm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(t&16384)===0?0:1,c=t<<1&32767,u=o|c,t=u^i;return t^52811}var woe=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=voe(i),c=s(o),u=o.length,d=Cm(16),f=0;f!=16;++f)d[f]=0;var h,p,g;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,p=o[o.length-1],d[u]=a(p,h));u>0;)--u,h=c>>8,d[u]=a(o[u],h),--u,h=c&255,d[u]=a(o[u],h);for(u=15,g=15-o.length;g>0;)h=c>>8,d[u]=a(e[g],h),--u,--g,h=c&255,d[u]=a(o[u],h),--u,--g;return d}}(),DQe=function(e,t,r,n,a){a||(a=t),n||(n=woe(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},PQe=function(e){var t=0,r=woe(e);return function(n){var a=DQe("",n,t,r);return t=a[1],a[0]}};function RQe(e,t,r,n){var a={key:li(e),verificationBytes:li(e)};return r.password&&(a.verifier=hL(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=PQe(r.password)),a}function LQe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=OQe(e):n.Data=FQe(e,t),n}function MQe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?LQe(e,t-2,n):RQe(e,r.biff>=8?t:t-2,r,n),n}var Eoe=function(){function e(a,s){switch(s.type){case"base64":return t(zc(a),s);case"binary":return t(a,s);case"buffer":return t(pn&&Buffer.isBuffer(a)?a.toString("binary"):Hm(a),s);case"array":return t(gg(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},o=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,p=0,g,x=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var b=d.slice(p,h.lastIndex-g[0].length);if(b[0]==" "&&(b=b.slice(1)),++x,b.length){var y={v:b,t:"s"};Array.isArray(o)?o[f][x]=y:o[Ur({r:f,c:x})]=y}break}p=h.lastIndex}x>u.e.c&&(u.e.c=x)}),o["!ref"]=rn(u),o}function r(a,s){return Vm(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Qn(a["!ref"]),o,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Ur({r:u,c:d});o=c?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(_h(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function UQe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function e2(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function QQe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var o=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,c,u/2]}function HQe(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-o),i[0]+=c,i[1]+=a;break;case 2:c=a*(o-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-o),i[1]+=c,i[2]+=a;break;case 4:c=a*(o-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-o),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function rS(e,t){if(t===0)return e;var r=QQe(UQe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),e2(HQe(r))}var Coe=6,VQe=15,zQe=1,Wo=Coe;function t2(e){return Math.floor((e+Math.round(128/Wo)/256)*Wo)}function r2(e){return Math.floor((e-5)/Wo*100+.5)/100}function nS(e){return Math.round((e*Wo+5)/Wo*256)/256}function W3(e){return nS(r2(t2(e)))}function mL(e){var t=Math.abs(e-W3(e)),r=Wo;if(t>.005)for(Wo=zQe;Wo<VQe;++Wo)Math.abs(e-W3(e))<=t&&(t=Math.abs(e-W3(e)),r=Wo);Wo=r}function _m(e){e.width?(e.wpx=t2(e.width),e.wch=r2(e.wpx),e.MDW=Wo):e.wpx?(e.wch=r2(e.wpx),e.width=nS(e.wch),e.MDW=Wo):typeof e.wch=="number"&&(e.width=nS(e.wch),e.wpx=t2(e.width),e.MDW=Wo),e.customWidth&&delete e.customWidth}var $Qe=96,_oe=$Qe;function n2(e){return e*96/_oe}function f1(e){return e*_oe/96}var GQe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function KQe(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var o=$r(i);switch(af(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Ma(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Ma(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function qQe(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var o=$r(i);switch(af(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function WQe(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(ol)||[]).forEach(function(i){var o=$r(i);switch(af(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Ea(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Ma(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Ma(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Ma(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Ma(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Ma(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Ma(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Ma(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=V8[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Ma(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=Wp[a.color.index];a.color.index==81&&(c=Wp[1]),c||(c=Wp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=rS(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function XQe(e,t,r){t.NumberFmt=[];for(var n=Ts(Rr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Rr[n[a]];var s=e[0].match(ol);if(s)for(a=0;a<s.length;++a){var i=$r(s[a]);switch(af(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Un(Ea(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}lh(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function YQe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Gt("numFmt",null,{numFmtId:n,formatCode:pa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Gt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var e_=["numFmtId","fillId","fontId","borderId","xfId"],t_=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function JQe(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(ol)||[]).forEach(function(s){var i=$r(s),o=0;switch(af(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<e_.length;++o)n[e_[o]]&&(n[e_[o]]=parseInt(n[e_[o]],10));for(o=0;o<t_.length;++o)n[t_[o]]&&(n[t_[o]]=Ma(n[t_[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Ma(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function ZQe(e){var t=[];return t[t.length]=Gt("cellXfs",null),e.forEach(function(r){t[t.length]=Gt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Gt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var eHe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&XQe(f,d,u),(f=o.match(a))&&WQe(f,d,c,u),(f=o.match(n))&&qQe(f,d,c,u),(f=o.match(s))&&KQe(f,d,c,u),(f=o.match(r))&&JQe(f,d,u),d}}();function Noe(e,t){var r=[Ys,Gt("styleSheet",null,{xmlns:Rg[0],"xmlns:vt":Ci.vt})],n;return e.SSF&&(n=YQe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=ZQe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function tHe(e,t){var r=e.read_shift(2),n=rl(e);return[r,n]}function rHe(e,t,r){r||(r=Et(6+4*t.length)),r.write_shift(2,e),Xi(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function nHe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=LUe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=RUe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=rl(e),n}function aHe(e,t){t||(t=Et(153)),t.write_shift(2,e.sz*20),MUe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),ZN(e.color,t);var n=0;return n=2,t.write_shift(1,n),Xi(e.name,t),t.length>t.l?t.slice(0,t.l):t}var sHe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],X3,iHe=al;function MK(e,t){t||(t=Et(84)),X3||(X3=hk(sHe));var r=X3[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(ZN({auto:1},t),ZN({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function oHe(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function Soe(e,t,r){r||(r=Et(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function ay(e,t){return t||(t=Et(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var lHe=al;function cHe(e,t){return t||(t=Et(51)),t.write_shift(1,0),ay(null,t),ay(null,t),ay(null,t),ay(null,t),ay(null,t),t.length>t.l?t.slice(0,t.l):t}function uHe(e,t){return t||(t=Et(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),JN(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function dHe(e,t,r){var n=Et(2052);return n.write_shift(4,e),JN(t,n),JN(r,n),n.length>n.l?n.slice(0,n.l):n}function AHe(e,t,r){var n={};n.NumberFmt=[];for(var a in Rr)n.NumberFmt[a]=Rr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Rh(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],lh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=rS(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function fHe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Rt(e,615,Od(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Rt(e,44,rHe(a,t[a]))}),Rt(e,616))}}function hHe(e){var t=1;Rt(e,611,Od(t)),Rt(e,43,aHe({sz:12,color:{theme:1},name:"Calibri",family:2})),Rt(e,612)}function mHe(e){var t=2;Rt(e,603,Od(t)),Rt(e,45,MK({patternType:"none"})),Rt(e,45,MK({patternType:"gray125"})),Rt(e,604)}function pHe(e){var t=1;Rt(e,613,Od(t)),Rt(e,46,cHe()),Rt(e,614)}function gHe(e){var t=1;Rt(e,626,Od(t)),Rt(e,47,Soe({numFmtId:0},65535)),Rt(e,627)}function xHe(e,t){Rt(e,617,Od(t.length)),t.forEach(function(r){Rt(e,47,Soe(r,0))}),Rt(e,618)}function vHe(e){var t=1;Rt(e,619,Od(t)),Rt(e,48,uHe({xfId:0,name:"Normal"})),Rt(e,620)}function bHe(e){var t=0;Rt(e,505,Od(t)),Rt(e,506)}function yHe(e){var t=0;Rt(e,508,dHe(t,"TableStyleMedium9","PivotStyleMedium4")),Rt(e,509)}function wHe(e,t){var r=ec();return Rt(r,278),fHe(r,e.SSF),hHe(r),mHe(r),pHe(r),gHe(r),xHe(r,t.cellXfs),vHe(r),bHe(r),yHe(r),Rt(r,279),r.end()}var EHe=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function CHe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(ol)||[]).forEach(function(a){var s=$r(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[EHe.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function _He(){}function NHe(){}var SHe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,kHe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,BHe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function THe(e,t,r){t.themeElements={};var n;[["clrScheme",SHe,CHe],["fontScheme",kHe,_He],["fmtScheme",BHe,NHe]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var jHe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function koe(e,t){(!e||e.length===0)&&(e=pL());var r,n={};if(!(r=e.match(jHe)))throw new Error("themeElements not found in theme");return THe(r[0],n,t),n.raw=e,n}function pL(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Ys];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function IHe(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=bie(s,{type:"array"})}catch{return}var o=Dc(i,"theme/theme/theme1.xml",!0);if(o)return koe(o,r)}}function FHe(e){return e.read_shift(4)}function OHe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=DHe(e,4);break;case 2:t.xclrValue=ooe(e);break;case 3:t.xclrValue=FHe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function DHe(e,t){return al(e,t)}function PHe(e,t){return al(e,t)}function RHe(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=OHe(e);break;case 6:n[1]=PHe(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function LHe(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(RHe(e,r-e.l));return{ixfe:n,ext:s}}function MHe(e,t){t.forEach(function(r){r[0]})}function UHe(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:rl(e)}}function QHe(e){var t=Et(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Xi(e.name,t),t.slice(0,t.l)}function HHe(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function VHe(e){var t=Et(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function zHe(e,t){var r=Et(8+2*t.length);return r.write_shift(4,e),Xi(t,r),r.slice(0,r.l)}function $He(e){return e.l+=4,e.read_shift(4)!=0}function GHe(e,t){var r=Et(8);return r.write_shift(4,e),r.write_shift(4,1),r}function KHe(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return Rh(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function qHe(){var e=ec();return Rt(e,332),Rt(e,334,Od(1)),Rt(e,335,QHe({name:"XLDAPR",version:12e4,flags:3496657072})),Rt(e,336),Rt(e,339,zHe(1,"XLDAPR")),Rt(e,52),Rt(e,35,Od(514)),Rt(e,4096,Od(0)),Rt(e,4097,Su(1)),Rt(e,36),Rt(e,53),Rt(e,340),Rt(e,337,GHe(1)),Rt(e,51,VHe([[1,0]])),Rt(e,338),Rt(e,333),e.end()}function WHe(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(ol,function(o){var c=$r(o);switch(af(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function Boe(){var e=[Ys];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function XHe(e){var t=[];if(!e)return t;var r=1;return(e.match(ol)||[]).forEach(function(n){var a=$r(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function YHe(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Ur(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function JHe(e,t,r){var n=[];return Rh(e,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function ZHe(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Rh(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function eVe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var ov=1024;function Toe(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Gt("xml",null,{"xmlns:v":Bc.v,"xmlns:o":Bc.o,"xmlns:x":Bc.x,"xmlns:mv":Bc.mv}).replace(/\/>/,">"),Gt("o:shapelayout",Gt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Gt("v:shapetype",[Gt("v:stroke",null,{joinstyle:"miter"}),Gt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];ov<e*1e3;)ov+=1e3;return t.forEach(function(s){var i=os(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?Gt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Gt("v:fill",c,o),d={on:"t",obscured:"t"};++ov,a=a.concat(["<v:shape"+Yw({id:"_x0000_s"+ov,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Gt("v:shadow",null,d),Gt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",xo("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),xo("x:AutoFill","False"),xo("x:Row",String(i.r)),xo("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function UK(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var o=os(i.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[i.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[i.ref]=s;var c=Qn(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=rn(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function tVe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=$r(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=os(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&fL(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function joe(e){var t=[Ys,Gt("comments",null,{xmlns:Rg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=pa(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(pa(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(xo("t",pa(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;t.push(xo("t",pa(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function rVe(e,t){var r=[],n=!1,a={},s=0;return e.replace(ol,function(o,c){var u=$r(o);switch(af(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function nVe(e,t,r){var n=[Ys,Gt("ThreadedComments",null,{xmlns:Ci.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Gt("threadedComment",xo("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function aVe(e,t){var r=[],n=!1;return e.replace(ol,function(s){var i=$r(s);switch(af(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function sVe(e){var t=[Ys,Gt("personList",null,{xmlns:Ci.TCMNT,"xmlns:x":Rg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Gt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function iVe(e){var t={};t.iauthor=e.read_shift(4);var r=Qg(e);return t.rfx=r.s,t.ref=Ur(r.s),e.l+=16,t}function oVe(e,t){return t==null&&(t=Et(36)),t.write_shift(4,e[1].iauthor),rb(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var lVe=rl;function cVe(e){return Xi(e.slice(0,54))}function uVe(e,t){var r=[],n=[],a={},s=!1;return Rh(e,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function dVe(e){var t=ec(),r=[];return Rt(t,628),Rt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Rt(t,632,cVe(a.a)))})}),Rt(t,631),Rt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:os(n[0]),e:os(n[0])};Rt(t,635,oVe([s,a])),a.t&&a.t.length>0&&Rt(t,637,FUe(a)),Rt(t,636),delete a.iauthor})}),Rt(t,634),Rt(t,629),t.end()}var AVe="application/vnd.ms-office.vbaProject";function fVe(e){var t=Cr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Cr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Cr.write(t)}function hVe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Cr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var Ioe=["xlsb","xlsm","xlam","biff8","xla"];function mVe(){return{"!type":"dialog"}}function pVe(){return{"!type":"dialog"}}function gVe(){return{"!type":"macro"}}function xVe(){return{"!type":"macro"}}var Tv=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,a+(o?"":"$")+is(d)+(c?"":"$")+qs(u)}return function(a,s){return t=s,a.replace(e,r)}}(),gL=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,xL=function(){return function(t,r){return t.replace(gL,function(n,a,s,i,o,c){var u=aL(i)-(s?0:r.c),d=nL(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function Foe(e,t){return e.replace(gL,function(r,n,a,s,i,o){return n+(a=="$"?a+s:is(aL(s)+t.c))+(i=="$"?i+o:qs(nL(o)+t.r))})}function vVe(e,t,r){var n=rc(t),a=n.s,s=os(r),i={r:s.r-a.r,c:s.c-a.c};return Foe(e,i)}function bVe(e){return e.length!=1}function QK(e){return e.replace(/_xlfn\./g,"")}function ai(e){e.l+=1}function Nm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Ooe(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return Doe(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=Nm(e),o=Nm(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function Doe(e){var t=Nm(e),r=Nm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function yVe(e,t,r){if(r.biff<8)return Doe(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=Nm(e),i=Nm(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Poe(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return wVe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=Nm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function wVe(e){var t=Nm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function EVe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function CVe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return _Ve(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function _Ve(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function NVe(e,t,r){var n=(e[e.l++]&96)>>5,a=Ooe(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function SVe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=Ooe(e,s,r);return[n,a,i]}function kVe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function BVe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function TVe(e,t,r){var n=(e[e.l++]&96)>>5,a=yVe(e,t-1,r);return[n,a]}function jVe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function HK(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function IVe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function FVe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function OVe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function DVe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function PVe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Roe(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function RVe(e){return e.read_shift(2),Roe(e)}function LVe(e){return e.read_shift(2),Roe(e)}function MVe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Poe(e,0,r);return[n,a]}function UVe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=CVe(e,0,r);return[n,a]}function QVe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=Poe(e,0,r);return[n,a,s]}function HVe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[$ze[a],Uoe[a],n]}function VVe(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:zVe(e);return[a,(s[0]===0?Uoe:zze)[s[1]]]}function zVe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function $Ve(e,t,r){e.l+=r&&r.biff==2?3:4}function GVe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function KVe(e){return e.l++,Lh[e.read_shift(1)]}function qVe(e){return e.l++,e.read_shift(2)}function WVe(e){return e.l++,e.read_shift(1)!==0}function XVe(e){return e.l++,Jo(e)}function YVe(e,t,r){return e.l++,tE(e,t-1,r)}function JVe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ms(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Lh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Jo(e);break;case 2:r[1]=Hg(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function ZVe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Qg:gk)(e));return a}function eze(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=JVe(e,r.biff);return i}function tze(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function rze(e,t,r){if(r.biff==5)return nze(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function nze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function aze(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function sze(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function ize(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function oze(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var lze=al,cze=al,uze=al;function nE(e,t,r){return e.l+=2,[EVe(e)]}function vL(e){return e.l+=6,[]}var dze=nE,Aze=vL,fze=vL,hze=nE;function Loe(e){return e.l+=2,[li(e),e.read_shift(2)&1]}var mze=nE,pze=Loe,gze=vL,xze=nE,vze=nE,bze=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function yze(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=bze[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function wze(e){return e.l+=2,[e.read_shift(4)]}function Eze(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function Cze(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function _ze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Nze(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Sze(e){return e.l+=4,[0,0]}var VK={1:{n:"PtgExp",f:GVe},2:{n:"PtgTbl",f:uze},3:{n:"PtgAdd",f:ai},4:{n:"PtgSub",f:ai},5:{n:"PtgMul",f:ai},6:{n:"PtgDiv",f:ai},7:{n:"PtgPower",f:ai},8:{n:"PtgConcat",f:ai},9:{n:"PtgLt",f:ai},10:{n:"PtgLe",f:ai},11:{n:"PtgEq",f:ai},12:{n:"PtgGe",f:ai},13:{n:"PtgGt",f:ai},14:{n:"PtgNe",f:ai},15:{n:"PtgIsect",f:ai},16:{n:"PtgUnion",f:ai},17:{n:"PtgRange",f:ai},18:{n:"PtgUplus",f:ai},19:{n:"PtgUminus",f:ai},20:{n:"PtgPercent",f:ai},21:{n:"PtgParen",f:ai},22:{n:"PtgMissArg",f:ai},23:{n:"PtgStr",f:YVe},26:{n:"PtgSheet",f:Eze},27:{n:"PtgEndSheet",f:Cze},28:{n:"PtgErr",f:KVe},29:{n:"PtgBool",f:WVe},30:{n:"PtgInt",f:qVe},31:{n:"PtgNum",f:XVe},32:{n:"PtgArray",f:jVe},33:{n:"PtgFunc",f:HVe},34:{n:"PtgFuncVar",f:VVe},35:{n:"PtgName",f:tze},36:{n:"PtgRef",f:MVe},37:{n:"PtgArea",f:NVe},38:{n:"PtgMemArea",f:aze},39:{n:"PtgMemErr",f:lze},40:{n:"PtgMemNoMem",f:cze},41:{n:"PtgMemFunc",f:sze},42:{n:"PtgRefErr",f:ize},43:{n:"PtgAreaErr",f:kVe},44:{n:"PtgRefN",f:UVe},45:{n:"PtgAreaN",f:TVe},46:{n:"PtgMemAreaN",f:_ze},47:{n:"PtgMemNoMemN",f:Nze},57:{n:"PtgNameX",f:rze},58:{n:"PtgRef3d",f:QVe},59:{n:"PtgArea3d",f:SVe},60:{n:"PtgRefErr3d",f:oze},61:{n:"PtgAreaErr3d",f:BVe},255:{}},kze={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Bze={1:{n:"PtgElfLel",f:Loe},2:{n:"PtgElfRw",f:xze},3:{n:"PtgElfCol",f:dze},6:{n:"PtgElfRwV",f:vze},7:{n:"PtgElfColV",f:hze},10:{n:"PtgElfRadical",f:mze},11:{n:"PtgElfRadicalS",f:gze},13:{n:"PtgElfColS",f:Aze},15:{n:"PtgElfColSV",f:fze},16:{n:"PtgElfRadicalLel",f:pze},25:{n:"PtgList",f:yze},29:{n:"PtgSxName",f:wze},255:{}},Tze={0:{n:"PtgAttrNoop",f:Sze},1:{n:"PtgAttrSemi",f:PVe},2:{n:"PtgAttrIf",f:OVe},4:{n:"PtgAttrChoose",f:IVe},8:{n:"PtgAttrGoto",f:FVe},16:{n:"PtgAttrSum",f:$Ve},32:{n:"PtgAttrBaxcel",f:HK},33:{n:"PtgAttrBaxcel",f:HK},64:{n:"PtgAttrSpace",f:RVe},65:{n:"PtgAttrSpaceSemi",f:LVe},128:{n:"PtgAttrIfError",f:DVe},255:{}};function aE(e,t,r,n){if(n.biff<8)return al(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=eze(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=ZVe(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(al(e,t)),s}function sE(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=VK[s]||VK[kze[s]],(s===24||s===25)&&(a=(s===24?Bze:Tze)[e[e.l+1]]),!a||!a.f?al(e,t):i.push([a.n,a.f(e,t,r)]);return i}function jze(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var Ize={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Fze(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Moe(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function zK(e,t,r){var n=Moe(e,t,r);return n=="#REF"?n:Fze(n,r)}function zo(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],c,u,d,f=0,h=0,p,g="";if(!e[0]||!e[0][0])return"";for(var x=-1,b="",y=0,w=e[0].length;y<w;++y){var _=e[0][y];switch(_[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),x>=0){switch(e[0][x][1][0]){case 0:b=Ns(" ",e[0][x][1][1]);break;case 1:b=Ns("\r",e[0][x][1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}u=u+b,x=-1}o.push(u+Ize[_[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=sw(_[1][1],i,a),o.push(iw(d,s));break;case"PtgRefN":d=r?sw(_[1][1],r,a):_[1][1],o.push(iw(d,s));break;case"PtgRef3d":f=_[1][1],d=sw(_[1][2],i,a),g=zK(n,f,a),o.push(g+"!"+iw(d,s));break;case"PtgFunc":case"PtgFuncVar":var j=_[1][0],k=_[1][1];j||(j=0),j&=127;var I=j==0?[]:o.slice(-j);o.length-=j,k==="User"&&(k=I.shift()),o.push(k+"("+I.join(",")+")");break;case"PtgBool":o.push(_[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(_[1]);break;case"PtgNum":o.push(String(_[1]));break;case"PtgStr":o.push('"'+_[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(_[1]);break;case"PtgAreaN":p=vK(_[1][1],r?{s:r}:i,a),o.push(G3(p,a));break;case"PtgArea":p=vK(_[1][1],i,a),o.push(G3(p,a));break;case"PtgArea3d":f=_[1][1],p=_[1][2],g=zK(n,f,a),o.push(g+"!"+G3(p,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=_[1][2];var E=(n.names||[])[h-1]||(n[0]||[])[h],N=E?E.Name:"SH33TJSNAME"+String(h);N&&N.slice(0,6)=="_xlfn."&&!a.xlfn&&(N=N.slice(6)),o.push(N);break;case"PtgNameX":var B=_[1][1];h=_[1][2];var R;if(a.biff<=5)B<0&&(B=-B),n[B]&&(R=n[B][h]);else{var P="";if(((n[B]||[])[0]||[])[0]==14849||(((n[B]||[])[0]||[])[0]==1025?n[B][h]&&n[B][h].itab>0&&(P=n.SheetNames[n[B][h].itab-1]+"!"):P=n.SheetNames[h-1]+"!"),n[B]&&n[B][h])P+=n[B][h].Name;else if(n[0]&&n[0][h])P+=n[0][h].Name;else{var D=(Moe(n,B,a)||"").split(";;");D[h-1]?P=D[h-1]:P+="SH33TJSERRX"}o.push(P);break}R||(R={Name:"SH33TJSERRY"}),o.push(R.Name);break;case"PtgParen":var L="(",M=")";if(x>=0){switch(b="",e[0][x][1][0]){case 2:L=Ns(" ",e[0][x][1][1])+L;break;case 3:L=Ns("\r",e[0][x][1][1])+L;break;case 4:M=Ns(" ",e[0][x][1][1])+M;break;case 5:M=Ns("\r",e[0][x][1][1])+M;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][x][1][0])}x=-1}o.push(L+o.pop()+M);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:_[1][1],r:_[1][0]};var J={c:r.c,r:r.r};if(n.sharedf[Ur(d)]){var H=n.sharedf[Ur(d)];o.push(zo(H,i,J,n,a))}else{var K=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(zo(u[1],i,J,n,a)),K=!0;break}K||o.push(_[1])}break;case"PtgArray":o.push("{"+jze(_[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":x=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+_[1].idx+"[#"+_[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(_));default:throw new Error("Unrecognized Formula Token: "+String(_))}var V=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&x>=0&&V.indexOf(e[0][y][0])==-1){_=e[0][x];var G=!0;switch(_[1][0]){case 4:G=!1;case 0:b=Ns(" ",_[1][1]);break;case 5:G=!1;case 1:b=Ns("\r",_[1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+_[1][0])}o.push((G?b:"")+o.pop()+(G?"":b)),x=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function Oze(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],al(e,t-2)];var o=sE(e,i,r);return t!==i+a&&(s=aE(e,t-i-a,o,r)),e.l=n,[o,s]}function Dze(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],al(e,t-2)];var o=sE(e,i,r);return t!==i+a&&(s=aE(e,t-i-a,o,r)),e.l=n,[o,s]}function Pze(e,t,r,n){var a=e.l+t,s=sE(e,n,r),i;return a!==e.l&&(i=aE(e,a-e.l,s,r)),[s,i]}function Rze(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=sE(e,s,r);return s==65535?[[],al(e,t-2)]:(t!==s+2&&(a=aE(e,n-s-2,i,r)),[i,a])}function Lze(e){var t;if(th(e,e.l+6)!==65535)return[Jo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Mze(e){if(e==null){var t=Et(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return xg(e);return xg(0)}function Y3(e,t,r){var n=e.l+t,a=sf(e);r.biff==2&&++e.l;var s=Lze(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=Dze(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function Uze(e,t,r,n,a){var s=bg(t,r,a),i=Mze(e.v),o=Et(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Et(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Ki([s,i,o,u]);return f}function xk(e,t,r){var n=e.read_shift(4),a=sE(e,n,r),s=e.read_shift(4),i=s>0?aE(e,s,a,r):null;return[a,i]}var Qze=xk,vk=xk,Hze=xk,Vze=xk,zze={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Uoe={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},$ze={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function $K(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Gze(e){var t="of:="+e.replace(gL,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function J3(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Kze(e){return e.replace(/\./,"!")}var lw={},jv={},cw=typeof Map<"u";function bL(e,t,r){var n=0,a=e.length;if(r){if(cw?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=cw?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(cw?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function bk(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Wo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=r2(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=nS(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Jp(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function zm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){lh(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function Qoe(e,t,r,n,a,s){try{n.cellNF&&(e.z=Rr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Qa(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Rr[t]==null&&lh(zMe[t]||"General",t),e.t==="e")e.w=e.w||Lh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ww(e.v);else if(e.t==="d"){var i=Si(e.v);(i|0)===i?e.w=i.toString(10):e.w=Ww(i)}else{if(e.v===void 0)return"";e.w=pg(e.v,jv)}else e.t==="d"?e.w=Hu(t,Si(e.v),jv):e.w=Hu(t,e.v,jv)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=rS(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=rS(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function qze(e,t,r){if(e&&e["!ref"]){var n=Qn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Wze(e,t){var r=Qn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=rn(r))}var Xze=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Yze=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Jze=/<(?:\w:)?hyperlink [^>]*>/mg,Zze=/"(\w*:\w*)"/,e$e=/<(?:\w:)?col\b[^>]*[\/]?>/g,t$e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,r$e=/<(?:\w:)?pageMargins[^>]*\/>/g,Hoe=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,n$e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,a$e=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function s$e(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(Yze);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(Hoe);h?yL(h[0],o,a,r):(h=u.match(n$e))&&o$e(h[0],h[1]||"",o,a,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var g=u.slice(p,p+50).match(Zze);g&&Wze(o,g[1])}var x=u.match(a$e);x&&x[1]&&b$e(x[1],a);var b=[];if(t.cellStyles){var y=u.match(e$e);y&&m$e(b,y)}f&&E$e(f[1],o,t,c,s,i);var w=d.match(t$e);w&&(o["!autofilter"]=g$e(w[0]));var _=[],j=d.match(Xze);if(j)for(p=0;p!=j.length;++p)_[p]=Qn(j[p].slice(j[p].indexOf('"')+1));var k=d.match(Jze);k&&A$e(o,k,n);var I=d.match(r$e);if(I&&(o["!margins"]=f$e($r(I[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=rn(c)),t.sheetRows>0&&o["!ref"]){var E=Qn(o["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),o["!fullref"]=o["!ref"],o["!ref"]=rn(E))}return b.length>0&&(o["!cols"]=b),_.length>0&&(o["!merges"]=_),o}function i$e(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+rn(e[r])+'"/>';return t+"</mergeCells>"}function yL(e,t,r,n){var a=$r(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Un(Ea(a.codeName)))}function o$e(e,t,r,n,a){yL(e.slice(0,e.indexOf(">")),r,n,a)}function l$e(e,t,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=QA(pa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+Gt("outlinePr",null,u)}!s&&!o||(a[a.length]=Gt("sheetPr",o,i))}var c$e=["objects","scenarios","selectLockedCells","selectUnlockedCells"],u$e=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function d$e(e){var t={sheet:1};return c$e.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),u$e.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=hL(e.password).toString(16).toUpperCase()),Gt("sheetProtection",null,t)}function A$e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=$r(Ea(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Un(s.location))):(s.Target="#"+Un(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Qn(s.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=Ur({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function f$e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function h$e(e){return Jp(e),Gt("pageMargins",null,e)}function m$e(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=$r(t[n],!0);a.hidden&&(a.hidden=Ma(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,mL(a.width)),_m(a);s<=i;)e[s++]=Ha(a)}}function p$e(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Gt("col",null,bk(a,n)));return r[r.length]="</cols>",r.join("")}function g$e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function x$e(e,t,r,n){var a=typeof e.ref=="string"?e.ref:rn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=rc(a);i.s.r==i.e.r&&(i.e.r=rc(t["!ref"]).e.r,a=rn(i));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Gt("autoFilter",null,{ref:a})}var v$e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function b$e(e,t){t.Views||(t.Views=[{}]),(e.match(v$e)||[]).forEach(function(r,n){var a=$r(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ma(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function y$e(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Gt("sheetViews",Gt("sheetView",null,a),{})}function w$e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=Lh[e.v];break;case"d":n&&n.cellDates?a=Qa(e.v,-1).toISOString():(e=Ha(e),e.t="n",a=""+(e.v=Si(Qa(e.v)))),typeof e.z>"u"&&(e.z=Rr[14]);break;default:a=e.v;break}var o=xo("v",pa(a)),c={r:t},u=zm(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=xo("v",""+bL(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Gt("f",pa(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Gt("c",o,c)}var E$e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=Xw("v"),i=Xw("f");return function(c,u,d,f,h,p){for(var g=0,x="",b=[],y=[],w=0,_=0,j=0,k="",I,E,N=0,B=0,R,P,D=0,L=0,M=Array.isArray(p.CellXf),J,H=[],K=[],V=Array.isArray(u),G=[],X={},ee=!1,F=!!d.sheetStubs,z=c.split(t),Y=0,te=z.length;Y!=te;++Y){x=z[Y].trim();var ae=x.length;if(ae!==0){var le=0;e:for(g=0;g<ae;++g)switch(x[g]){case">":if(x[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(E=$r(x.slice(le,g),!0),N=E.r!=null?parseInt(E.r,10):N+1,B=-1,d.sheetRows&&d.sheetRows<N)continue;X={},ee=!1,E.ht&&(ee=!0,X.hpt=parseFloat(E.ht),X.hpx=f1(X.hpt)),E.hidden=="1"&&(ee=!0,X.hidden=!0),E.outlineLevel!=null&&(ee=!0,X.level=+E.outlineLevel),ee&&(G[N-1]=X)}break;case"<":le=g;break}if(le>=g)break;if(E=$r(x.slice(le,g),!0),N=E.r!=null?parseInt(E.r,10):N+1,B=-1,!(d.sheetRows&&d.sheetRows<N)){f.s.r>N-1&&(f.s.r=N-1),f.e.r<N-1&&(f.e.r=N-1),d&&d.cellStyles&&(X={},ee=!1,E.ht&&(ee=!0,X.hpt=parseFloat(E.ht),X.hpx=f1(X.hpt)),E.hidden=="1"&&(ee=!0,X.hidden=!0),E.outlineLevel!=null&&(ee=!0,X.level=+E.outlineLevel),ee&&(G[N-1]=X)),b=x.slice(g).split(e);for(var ie=0;ie!=b.length&&b[ie].trim().charAt(0)=="<";++ie);for(b=b.slice(ie),g=0;g!=b.length;++g)if(x=b[g].trim(),x.length!==0){if(y=x.match(r),w=g,_=0,j=0,x="<c "+(x.slice(0,1)=="<"?">":"")+x,y!=null&&y.length===2){for(w=0,k=y[1],_=0;_!=k.length&&!((j=k.charCodeAt(_)-64)<1||j>26);++_)w=26*w+j;--w,B=w}else++B;for(_=0;_!=x.length&&x.charCodeAt(_)!==62;++_);if(++_,E=$r(x.slice(0,_),!0),E.r||(E.r=Ur({r:N-1,c:B})),k=x.slice(_),I={t:""},(y=k.match(s))!=null&&y[1]!==""&&(I.v=Un(y[1])),d.cellFormula){if((y=k.match(i))!=null&&y[1]!==""){if(I.f=Un(Ea(y[1])).replace(/\r\n/g,`
`),d.xlfn||(I.f=QK(I.f)),y[0].indexOf('t="array"')>-1)I.F=(k.match(a)||[])[1],I.F.indexOf(":")>-1&&H.push([Qn(I.F),I.F]);else if(y[0].indexOf('t="shared"')>-1){P=$r(y[0]);var ce=Un(Ea(y[1]));d.xlfn||(ce=QK(ce)),K[parseInt(P.si,10)]=[P,ce,E.r]}}else(y=k.match(/<f[^>]*\/>/))&&(P=$r(y[0]),K[P.si]&&(I.f=vVe(K[P.si][1],K[P.si][2],E.r)));var pe=os(E.r);for(_=0;_<H.length;++_)pe.r>=H[_][0].s.r&&pe.r<=H[_][0].e.r&&pe.c>=H[_][0].s.c&&pe.c<=H[_][0].e.c&&(I.F=H[_][1])}if(E.t==null&&I.v===void 0)if(I.f||I.F)I.v=0,I.t="n";else if(F)I.t="z";else continue;else I.t=E.t||"n";switch(f.s.c>B&&(f.s.c=B),f.e.c<B&&(f.e.c=B),I.t){case"n":if(I.v==""||I.v==null){if(!F)continue;I.t="z"}else I.v=parseFloat(I.v);break;case"s":if(typeof I.v>"u"){if(!F)continue;I.t="z"}else R=lw[parseInt(I.v,10)],I.v=R.t,I.r=R.r,d.cellHTML&&(I.h=R.h);break;case"str":I.t="s",I.v=I.v!=null?Ea(I.v):"",d.cellHTML&&(I.h=Z8(I.v));break;case"inlineStr":y=k.match(n),I.t="s",y!=null&&(R=fL(y[1]))?(I.v=R.t,d.cellHTML&&(I.h=R.h)):I.v="";break;case"b":I.v=Ma(I.v);break;case"d":d.cellDates?I.v=Qa(I.v,1):(I.v=Si(Qa(I.v,1)),I.t="n");break;case"e":(!d||d.cellText!==!1)&&(I.w=I.v),I.v=zie[I.v];break}if(D=L=0,J=null,M&&E.s!==void 0&&(J=p.CellXf[E.s],J!=null&&(J.numFmtId!=null&&(D=J.numFmtId),d.cellStyles&&J.fillId!=null&&(L=J.fillId))),Qoe(I,D,L,d,h,p),d.cellDates&&M&&I.t=="n"&&Z1(Rr[D])&&(I.t="d",I.v=pk(I.v)),E.cm&&d.xlmeta){var Be=(d.xlmeta.Cell||[])[+E.cm-1];Be&&Be.type=="XLDAPR"&&(I.D=!0)}if(V){var ne=os(E.r);u[ne.r]||(u[ne.r]=[]),u[ne.r][ne.c]=I}else u[E.r]=I}}}}G.length>0&&(u["!rows"]=G)}}();function C$e(e,t,r,n){var a=[],s=[],i=Qn(e["!ref"]),o="",c,u="",d=[],f=0,h=0,p=e["!rows"],g=Array.isArray(e),x={r:u},b,y=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=is(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=qs(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var w=g?(e[f]||[])[h]:e[c];w!==void 0&&(o=w$e(w,c,e,t))!=null&&s.push(o)}(s.length>0||p&&p[f])&&(x={r:u},p&&p[f]&&(b=p[f],b.hidden&&(x.hidden=1),y=-1,b.hpx?y=n2(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(x.ht=y,x.customHeight=1),b.level&&(x.outlineLevel=b.level)),a[a.length]=Gt("row",s.join(""),x))}if(p)for(;f<p.length;++f)p&&p[f]&&(x={r:f+1},b=p[f],b.hidden&&(x.hidden=1),y=-1,b.hpx?y=n2(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(x.ht=y,x.customHeight=1),b.level&&(x.outlineLevel=b.level),a[a.length]=Gt("row","",x));return a.join("")}function Voe(e,t,r,n){var a=[Ys,Gt("worksheet",null,{xmlns:Rg[0],"xmlns:r":Ci.r})],s=r.SheetNames[e],i=0,o="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Qn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=rn(d)}n||(n={}),c["!comments"]=[];var f=[];l$e(c,r,e,t,a),a[a.length]=Gt("dimension",null,{ref:u}),a[a.length]=y$e(c,t,e,r),t.sheetFormat&&(a[a.length]=Gt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=p$e(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=C$e(c,t),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=d$e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=x$e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=i$e(c["!merges"]));var h=-1,p,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(x){x[1].Target&&(p={ref:x[0]},x[1].Target.charAt(0)!="#"&&(g=fa(n,-1,pa(x[1].Target).replace(/#.*$/,""),En.HLINK),p["r:id"]="rId"+g),(h=x[1].Target.indexOf("#"))>-1&&(p.location=pa(x[1].Target.slice(h+1))),x[1].Tooltip&&(p.tooltip=pa(x[1].Tooltip)),a[a.length]=Gt("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=h$e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=xo("ignoredErrors",Gt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=fa(n,-1,"../drawings/drawing"+(e+1)+".xml",En.DRAW),a[a.length]=Gt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=fa(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",En.VML),a[a.length]=Gt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function _$e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function N$e(e,t,r){var n=Et(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=n2(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Ur(u)];g&&(f<0&&(f=p),h=p)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var x=n.l;return n.l=c,n.write_shift(4,o),n.l=x,n.length>n.l?n.slice(0,n.l):n}function S$e(e,t,r,n){var a=N$e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Rt(e,0,a)}var k$e=Qg,B$e=rb;function T$e(){}function j$e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=OUe(e),r}function I$e(e,t,r){r==null&&(r=Et(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return ZN({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Mie(e,r),r.slice(0,r.l)}function F$e(e){var t=Gu(e);return[t]}function O$e(e,t,r){return r==null&&(r=Et(8)),Lg(t,r)}function D$e(e){var t=Mg(e);return[t]}function P$e(e,t,r){return r==null&&(r=Et(4)),Ug(t,r)}function R$e(e){var t=Gu(e),r=e.read_shift(1);return[t,r,"b"]}function L$e(e,t,r){return r==null&&(r=Et(9)),Lg(t,r),r.write_shift(1,e.v?1:0),r}function M$e(e){var t=Mg(e),r=e.read_shift(1);return[t,r,"b"]}function U$e(e,t,r){return r==null&&(r=Et(5)),Ug(t,r),r.write_shift(1,e.v?1:0),r}function Q$e(e){var t=Gu(e),r=e.read_shift(1);return[t,r,"e"]}function H$e(e,t,r){return r==null&&(r=Et(9)),Lg(t,r),r.write_shift(1,e.v),r}function V$e(e){var t=Mg(e),r=e.read_shift(1);return[t,r,"e"]}function z$e(e,t,r){return r==null&&(r=Et(8)),Ug(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function $$e(e){var t=Gu(e),r=e.read_shift(4);return[t,r,"s"]}function G$e(e,t,r){return r==null&&(r=Et(12)),Lg(t,r),r.write_shift(4,t.v),r}function K$e(e){var t=Mg(e),r=e.read_shift(4);return[t,r,"s"]}function q$e(e,t,r){return r==null&&(r=Et(8)),Ug(t,r),r.write_shift(4,t.v),r}function W$e(e){var t=Gu(e),r=Jo(e);return[t,r,"n"]}function X$e(e,t,r){return r==null&&(r=Et(16)),Lg(t,r),xg(e.v,r),r}function zoe(e){var t=Mg(e),r=Jo(e);return[t,r,"n"]}function Y$e(e,t,r){return r==null&&(r=Et(12)),Ug(t,r),xg(e.v,r),r}function J$e(e){var t=Gu(e),r=lL(e);return[t,r,"n"]}function Z$e(e,t,r){return r==null&&(r=Et(12)),Lg(t,r),Uie(e.v,r),r}function eGe(e){var t=Mg(e),r=lL(e);return[t,r,"n"]}function tGe(e,t,r){return r==null&&(r=Et(8)),Ug(t,r),Uie(e.v,r),r}function rGe(e){var t=Gu(e),r=sL(e);return[t,r,"is"]}function nGe(e){var t=Gu(e),r=rl(e);return[t,r,"str"]}function aGe(e,t,r){return r==null&&(r=Et(12+4*e.v.length)),Lg(t,r),Xi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function sGe(e){var t=Mg(e),r=rl(e);return[t,r,"str"]}function iGe(e,t,r){return r==null&&(r=Et(8+4*e.v.length)),Ug(t,r),Xi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function oGe(e,t,r){var n=e.l+t,a=Gu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=vk(e,n-e.l,r);i[3]=zo(o,null,a,r.supbooks,r)}else e.l=n;return i}function lGe(e,t,r){var n=e.l+t,a=Gu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=vk(e,n-e.l,r);i[3]=zo(o,null,a,r.supbooks,r)}else e.l=n;return i}function cGe(e,t,r){var n=e.l+t,a=Gu(e);a.r=r["!row"];var s=Jo(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=vk(e,n-e.l,r);i[3]=zo(o,null,a,r.supbooks,r)}else e.l=n;return i}function uGe(e,t,r){var n=e.l+t,a=Gu(e);a.r=r["!row"];var s=rl(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=vk(e,n-e.l,r);i[3]=zo(o,null,a,r.supbooks,r)}else e.l=n;return i}var dGe=Qg,AGe=rb;function fGe(e,t){return t==null&&(t=Et(4)),t.write_shift(4,e),t}function hGe(e,t){var r=e.l+t,n=Qg(e),a=iL(e),s=rl(e),i=rl(e),o=rl(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:o};return i&&(c.Tooltip=i),c}function mGe(e,t){var r=Et(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));rb({s:os(e[0]),e:os(e[0])},r),oL("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Xi(a||"",r),Xi(e[1].Tooltip||"",r),Xi("",r),r.slice(0,r.l)}function pGe(){}function gGe(e,t,r){var n=e.l+t,a=Qie(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=Qze(e,n-e.l,r);i[1]=o}else e.l=n;return i}function xGe(e,t,r){var n=e.l+t,a=Qg(e),s=[a];if(r.cellFormula){var i=Vze(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function vGe(e,t,r){r==null&&(r=Et(18));var n=bk(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var $oe=["left","right","top","bottom","header","footer"];function bGe(e){var t={};return $oe.forEach(function(r){t[r]=Jo(e)}),t}function yGe(e,t){return t==null&&(t=Et(48)),Jp(e),$oe.forEach(function(r){xg(e[r],t)}),t}function wGe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function EGe(e,t,r){r==null&&(r=Et(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function CGe(e){var t=Et(24);return t.write_shift(4,4),t.write_shift(4,1),rb(e,t),t}function _Ge(e,t){return t==null&&(t=Et(66)),t.write_shift(2,e.password?hL(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function NGe(){}function SGe(){}function kGe(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,g,x,b,y,w,_,j,k,I=[];o.biff=12,o["!row"]=0;var E=0,N=!1,B=[],R={},P=o.supbooks||a.supbooks||[[]];if(P.sharedf=R,P.arrayf=B,P.SheetNames=a.SheetNames||a.Sheets.map(function(V){return V.name}),!o.supbooks&&(o.supbooks=P,a.Names))for(var D=0;D<a.Names.length;++D)P[0][D+1]=a.Names[D];var L=[],M=[],J=!1;a2[16]={n:"BrtShortReal",f:zoe};var H;if(Rh(e,function(G,X,ee){if(!h)switch(ee){case 148:u=G;break;case 0:p=G,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),j=qs(b=p.r),o["!row"]=p.r,(G.hidden||G.hpt||G.level!=null)&&(G.hpt&&(G.hpx=f1(G.hpt)),M[G.r]=G);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:G[2]},G[2]){case"n":g.v=G[1];break;case"s":_=lw[G[1]],g.v=_.t,g.r=_.r;break;case"b":g.v=!!G[1];break;case"e":g.v=G[1],o.cellText!==!1&&(g.w=Lh[g.v]);break;case"str":g.t="s",g.v=G[1];break;case"is":g.t="s",g.v=G[1].t;break}if((x=i.CellXf[G[0].iStyleRef])&&Qoe(g,x.numFmtId,null,o,s,i),y=G[0].c==-1?y+1:G[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=g):c[is(y)+j]=g,o.cellFormula){for(N=!1,E=0;E<B.length;++E){var F=B[E];p.r>=F[0].s.r&&p.r<=F[0].e.r&&y>=F[0].s.c&&y<=F[0].e.c&&(g.F=rn(F[0]),N=!0)}!N&&G.length>3&&(g.f=G[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),o.cellDates&&x&&g.t=="n"&&Z1(Rr[x.numFmtId])){var z=Lp(g.v);z&&(g.t="d",g.v=new Date(z.y,z.m-1,z.d,z.H,z.M,z.S,z.u))}H&&(H.type=="XLDAPR"&&(g.D=!0),H=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},y=G[0].c==-1?y+1:G[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=g):c[is(y)+j]=g,d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),H&&(H.type=="XLDAPR"&&(g.D=!0),H=void 0);break;case 176:I.push(G);break;case 49:H=((o.xlmeta||{}).Cell||[])[G-1];break;case 494:var Y=n["!id"][G.relId];for(Y?(G.Target=Y.Target,G.loc&&(G.Target+="#"+G.loc),G.Rel=Y):G.relId==""&&(G.Target="#"+G.loc),b=G.rfx.s.r;b<=G.rfx.e.r;++b)for(y=G.rfx.s.c;y<=G.rfx.e.c;++y)o.dense?(c[b]||(c[b]=[]),c[b][y]||(c[b][y]={t:"z",v:void 0}),c[b][y].l=G):(w=Ur({c:y,r:b}),c[w]||(c[w]={t:"z",v:void 0}),c[w].l=G);break;case 426:if(!o.cellFormula)break;B.push(G),k=o.dense?c[b][y]:c[is(y)+j],k.f=zo(G[1],d,{r:p.r,c:y},P,o),k.F=rn(G[0]);break;case 427:if(!o.cellFormula)break;R[Ur(G[0].s)]=G[1],k=o.dense?c[b][y]:c[is(y)+j],k.f=zo(G[1],d,{r:p.r,c:y},P,o);break;case 60:if(!o.cellStyles)break;for(;G.e>=G.s;)L[G.e--]={width:G.w/256,hidden:!!(G.flags&1),level:G.level},J||(J=!0,mL(G.w/256)),_m(L[G.e+1]);break;case 161:c["!autofilter"]={ref:rn(G)};break;case 476:c["!margins"]=G;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),G.name&&(a.Sheets[r].CodeName=G.name),(G.above||G.left)&&(c["!outline"]={above:G.above,left:G.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),G.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!X.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+ee.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=rn(u||d)),o.sheetRows&&c["!ref"]){var K=Qn(c["!ref"]);o.sheetRows<=+K.e.r&&(K.e.r=o.sheetRows-1,K.e.r>d.e.r&&(K.e.r=d.e.r),K.e.r<K.s.r&&(K.s.r=K.e.r),K.e.c>d.e.c&&(K.e.c=d.e.c),K.e.c<K.s.c&&(K.s.c=K.e.c),c["!fullref"]=c["!ref"],c["!ref"]=rn(K))}return I.length>0&&(c["!merges"]=I),L.length>0&&(c["!cols"]=L),M.length>0&&(c["!rows"]=M),c}function BGe(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Ha(t),t.z=t.z||Rr[14],t.v=Si(Qa(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=zm(a.cellXfs,t,a),t.l&&s["!links"].push([Ur(c),t.l]),t.c&&s["!comments"].push([Ur(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=bL(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,i?Rt(e,18,q$e(t,c)):Rt(e,7,G$e(t,c))):(c.t="str",i?Rt(e,17,iGe(t,c)):Rt(e,6,aGe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Rt(e,13,tGe(t,c)):Rt(e,2,Z$e(t,c)):i?Rt(e,16,Y$e(t,c)):Rt(e,5,X$e(t,c)),!0;case"b":return c.t="b",i?Rt(e,15,U$e(t,c)):Rt(e,4,L$e(t,c)),!0;case"e":return c.t="e",i?Rt(e,14,z$e(t,c)):Rt(e,3,H$e(t,c)),!0}return i?Rt(e,12,P$e(t,c)):Rt(e,1,O$e(t,c)),!0}function TGe(e,t,r,n){var a=Qn(t["!ref"]||"A1"),s,i="",o=[];Rt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=qs(d),S$e(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=is(h)),s=o[h]+i;var p=c?(t[d]||[])[h]:t[s];if(!p){f=!1;continue}f=BGe(e,p,d,h,n,t,f)}}Rt(e,146)}function jGe(e,t){!t||!t["!merges"]||(Rt(e,177,fGe(t["!merges"].length)),t["!merges"].forEach(function(r){Rt(e,176,AGe(r))}),Rt(e,178))}function IGe(e,t){!t||!t["!cols"]||(Rt(e,390),t["!cols"].forEach(function(r,n){r&&Rt(e,60,vGe(n,r))}),Rt(e,391))}function FGe(e,t){!t||!t["!ref"]||(Rt(e,648),Rt(e,649,CGe(Qn(t["!ref"]))),Rt(e,650))}function OGe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=fa(r,-1,n[1].Target.replace(/#.*$/,""),En.HLINK);Rt(e,494,mGe(n,a))}}),delete t["!links"]}function DGe(e,t,r,n){if(t["!comments"].length>0){var a=fa(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",En.VML);Rt(e,551,oL("rId"+a)),t["!legacy"]=a}}function PGe(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:rn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=rc(s);o.s.r==o.e.r&&(o.e.r=rc(t["!ref"]).e.r,s=rn(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Rt(e,161,rb(Qn(s))),Rt(e,162)}}function RGe(e,t,r){Rt(e,133),Rt(e,137,EGe(t,r)),Rt(e,138),Rt(e,134)}function LGe(e,t){t["!protect"]&&Rt(e,535,_Ge(t["!protect"]))}function MGe(e,t,r,n){var a=ec(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Qn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Rt(a,129),(r.vbaraw||i["!outline"])&&Rt(a,147,I$e(o,i["!outline"])),Rt(a,148,B$e(c)),RGe(a,i,r.Workbook),IGe(a,i),TGe(a,i,e,t),LGe(a,i),PGe(a,i,r,e),jGe(a,i),OGe(a,i,n),i["!margins"]&&Rt(a,476,yGe(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&FGe(a,i),DGe(a,i,e,n),Rt(a,130),a.end()}function UGe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=Un((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function QGe(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=UGe(f);d.s.r=d.s.c=0,d.e.c=o,u=is(o),h[0].forEach(function(p,g){i[u+qs(g)]={t:"n",v:p,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=rn(d)),i}function HGe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(Hoe);return o&&yL(o[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function VGe(e,t){e.l+=10;var r=rl(e);return{name:r}}function zGe(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Rh(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var wL=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],$Ge=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],GGe=[],KGe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function GK(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ma(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function KK(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ma(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function Goe(e){KK(e.WBProps,wL),KK(e.CalcPr,KGe),GK(e.WBView,$Ge),GK(e.Sheets,GGe),jv.date1904=Ma(e.WBProps.date1904)}function qGe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ma(e.Workbook.WBProps.date1904)?"true":"false"}var WGe="][*?/\\".split("");function Koe(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return WGe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function XGe(e,t,r){e.forEach(function(n,a){Koe(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function YGe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];XGe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)qze(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var JGe=/<\w+:workbook/;function ZGe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(ol,function(c,u){var d=$r(c);switch(af(d[0])){case"<?xml":break;case"<workbook":c.match(JGe)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":wL.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ma(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ea(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Un(Ea(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ea(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ma(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=Un(Ea(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Rg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Goe(r),r}function qoe(e){var t=[Ys];t[t.length]=Gt("workbook",null,{xmlns:Rg[0],"xmlns:r":Ci.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(wL.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Gt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:pa(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Gt("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=Gt("definedName",pa(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function eKe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=XF(e),r.name=rl(e),r}function tKe(e,t){return t||(t=Et(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),oL(e.strRelID,t),Xi(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function rKe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?rl(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function nKe(e,t){t||(t=Et(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Mie(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function aKe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function sKe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=DUe(e),i=Hze(e,0,r),o=iL(e);e.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function iKe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],a2[16]={n:"BrtFRTArchID$",f:aKe},Rh(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=zo(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),Goe(r),r.Names=s,r.supbooks=i,r}function oKe(e,t){Rt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Rt(e,156,tKe(a))}Rt(e,144)}function lKe(e,t){t||(t=Et(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Xi("SheetJS",t),Xi(GN.version,t),Xi(GN.version,t),Xi("7262",t),t.length>t.l?t.slice(0,t.l):t}function cKe(e,t){t||(t=Et(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function uKe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Rt(e,135),Rt(e,158,cKe(a)),Rt(e,136))}}function dKe(e,t){var r=ec();return Rt(r,131),Rt(r,128,lKe()),Rt(r,153,nKe(e.Workbook&&e.Workbook.WBProps||null)),uKe(r,e),oKe(r,e),Rt(r,132),r.end()}function AKe(e,t,r){return t.slice(-4)===".bin"?iKe(e,r):ZGe(e,r)}function fKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?kGe(e,n,r,a,s,i,o):s$e(e,n,r,a,s,i,o)}function hKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?zGe(e,n,r,a,s):HGe(e,n,r,a,s)}function mKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?gVe():xVe()}function pKe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?mVe():pVe()}function gKe(e,t,r,n){return t.slice(-4)===".bin"?AHe(e,r,n):eHe(e,r,n)}function xKe(e,t,r){return koe(e,r)}function vKe(e,t,r){return t.slice(-4)===".bin"?vQe(e,r):pQe(e,r)}function bKe(e,t,r){return t.slice(-4)===".bin"?uVe(e,r):tVe(e,r)}function yKe(e,t,r){return t.slice(-4)===".bin"?JHe(e):XHe(e)}function wKe(e,t,r,n){return r.slice(-4)===".bin"?ZHe(e,t,r,n):void 0}function EKe(e,t,r){return t.slice(-4)===".bin"?KHe(e,t,r):WHe(e,t,r)}function CKe(e,t,r){return(t.slice(-4)===".bin"?dKe:qoe)(e)}function _Ke(e,t,r,n,a){return(t.slice(-4)===".bin"?MGe:Voe)(e,r,n,a)}function NKe(e,t,r){return(t.slice(-4)===".bin"?wHe:Noe)(e,r)}function SKe(e,t,r){return(t.slice(-4)===".bin"?wQe:xoe)(e,r)}function kKe(e,t,r){return(t.slice(-4)===".bin"?dVe:joe)(e)}function BKe(e){return(e.slice(-4)===".bin"?qHe:Boe)()}var Woe=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Xoe=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function xd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(Woe),s,i,o,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(Xoe),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function TKe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(Woe),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(Xoe),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var uw;function jKe(e,t){var r=uw[e]||Un(e);return r==="General"?pg(t):Hu(r,t)}function IKe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ma(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Qa(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Un(t)]=a}function FKe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Lh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ww(e.v):e.w=pg(e.v):e.w=jKe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=uw[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Z1(n)){var a=Lp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function OKe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=GQe[n.Pattern]||n.Pattern)}e[t.ID]=t}function DKe(e,t,r,n,a,s,i,o,c,u){var d="General",f=n.StyleID,h={};u=u||{};var p=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&p.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ma(e);break;case"String":n.t="s",n.r=uK(Un(e)),n.v=e.indexOf("<")>-1?Un(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Qa(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Un(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=zie[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=uK(t||e));break}if(FKe(n,d,u),u.cellFormula!==!1)if(n.Formula){var x=Un(n.Formula);x.charCodeAt(0)==61&&(x=x.slice(1)),n.f=Tv(x,a),delete n.Formula,n.ArrayRange=="RC"?n.F=Tv("RC:RC",a):n.ArrayRange&&(n.F=Tv(n.ArrayRange,a),c.push([Qn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(p.forEach(function(b){!h.patternType&&b.patternType&&(h.patternType=b.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function PKe(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function Z3(e,t){var r=t||{};eb();var n=Ty(eL(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ea(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Ha(r);return i.type="string",A1.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ue){a.indexOf("<"+Ue)>=0&&(s=!0)}),s)return yqe(n,r);uw={"General Number":"General","General Date":Rr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Rr[15],"Short Date":Rr[14],"Long Time":Rr[19],"Medium Time":Rr[18],"Short Time":Rr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Rr[2],Standard:Rr[4],Percent:Rr[10],Scientific:Rr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],h=r.dense?[]:{},p="",g={},x={},b=xd('<Data ss:Type="String">'),y=0,w=0,_=0,j={s:{r:2e6,c:2e6},e:{r:0,c:0}},k={},I={},E="",N=0,B=[],R={},P={},D=0,L=[],M=[],J={},H=[],K,V=!1,G=[],X=[],ee={},F=0,z=0,Y={Sheets:[],WBProps:{date1904:!1}},te={};Jw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ae="";o=Jw.exec(n);)switch(o[3]=(ae=o[3]).toLowerCase()){case"data":if(ae=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?DKe(n.slice(y,o.index),E,b,c[c.length-1][0]=="comment"?J:g,{c:w,r:_},k,H[w],x,G,r):(E="",b=xd(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(M.length>0&&(g.c=M),(!r.sheetRows||r.sheetRows>_)&&g.v!==void 0&&(r.dense?(h[_]||(h[_]=[]),h[_][w]=g):h[is(w)+qs(_)]=g),g.HRef&&(g.l={Target:Un(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(F=w+(parseInt(g.MergeAcross,10)|0),z=_+(parseInt(g.MergeDown,10)|0),B.push({s:{c:w,r:_},e:{c:F,r:z}})),!r.sheetStubs)g.MergeAcross?w=F+1:++w;else if(g.MergeAcross||g.MergeDown){for(var le=w;le<=F;++le)for(var ie=_;ie<=z;++ie)(le>w||ie>_)&&(r.dense?(h[ie]||(h[ie]=[]),h[ie][le]={t:"z"}):h[is(le)+qs(ie)]={t:"z"});w=F+1}else++w;else g=TKe(o[0]),g.Index&&(w=+g.Index-1),w<j.s.c&&(j.s.c=w),w>j.e.c&&(j.e.c=w),o[0].slice(-2)==="/>"&&++w,M=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(_<j.s.r&&(j.s.r=_),_>j.e.r&&(j.e.r=_),o[0].slice(-2)==="/>"&&(x=xd(o[0]),x.Index&&(_=+x.Index-1)),w=0,++_):(x=xd(o[0]),x.Index&&(_=+x.Index-1),ee={},(x.AutoFitHeight=="0"||x.Height)&&(ee.hpx=parseInt(x.Height,10),ee.hpt=n2(ee.hpx),X[_]=ee),x.Hidden=="1"&&(ee.hidden=!0,X[_]=ee));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),j.s.r<=j.e.r&&j.s.c<=j.e.c&&(h["!ref"]=rn(j),r.sheetRows&&r.sheetRows<=j.e.r&&(h["!fullref"]=h["!ref"],j.e.r=r.sheetRows-1,h["!ref"]=rn(j))),B.length&&(h["!merges"]=B),H.length>0&&(h["!cols"]=H),X.length>0&&(h["!rows"]=X),d[p]=h}else j={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=w=0,c.push([o[3],!1]),u=xd(o[0]),p=Un(u.Name),h=r.dense?[]:{},B=[],G=[],X=[],te={name:p,Hidden:0},Y.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),H=[],V=!1}break;case"style":o[1]==="/"?OKe(k,I,r):I=xd(o[0]);break;case"numberformat":I.nf=Un(xd(o[0]).Format||"General"),uw[I.nf]&&(I.nf=uw[I.nf]);for(var ce=0;ce!=392&&Rr[ce]!=I.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Rr[ce]==null){lh(I.nf,ce);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(K=xd(o[0]),K.Hidden&&(K.hidden=!0,delete K.Hidden),K.Width&&(K.wpx=parseInt(K.Width,10)),!V&&K.wpx>10){V=!0,Wo=Coe;for(var pe=0;pe<H.length;++pe)H[pe]&&_m(H[pe])}V&&_m(K),H[K.Index-1||H.length]=K;for(var Be=0;Be<+K.Span;++Be)H[H.length]=Ha(K);break;case"namedrange":if(o[1]==="/")break;Y.Names||(Y.Names=[]);var ne=$r(o[0]),_e={Name:ne.Name,Ref:Tv(ne.RefersTo.slice(1),{r:0,c:0})};Y.Sheets.length>0&&(_e.Sheet=Y.Sheets.length-1),Y.Names.push(_e);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?E+=n.slice(N,o.index):N=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;I.Interior=xd(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?i7e(R,ae,n.slice(D,o.index)):D=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));PKe(J),M.push(J)}else c.push([o[3],!1]),u=xd(o[0]),J={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var De=xd(o[0]);h["!autofilter"]={ref:Tv(De.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return JK(n,r);var Se=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Se=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Se=!1}break;case"excelworkbook":switch(o[3]){case"date1904":Y.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Se=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Se=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(D,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else D=o.index+o[0].length;break;case"header":h["!margins"]||Jp(h["!margins"]={},"xlml"),isNaN(+$r(o[0]).Margin)||(h["!margins"].header=+$r(o[0]).Margin);break;case"footer":h["!margins"]||Jp(h["!margins"]={},"xlml"),isNaN(+$r(o[0]).Margin)||(h["!margins"].footer=+$r(o[0]).Margin);break;case"pagemargins":var fe=$r(o[0]);h["!margins"]||Jp(h["!margins"]={},"xlml"),isNaN(+fe.Top)||(h["!margins"].top=+fe.Top),isNaN(+fe.Left)||(h["!margins"].left=+fe.Left),isNaN(+fe.Right)||(h["!margins"].right=+fe.Right),isNaN(+fe.Bottom)||(h["!margins"].bottom=+fe.Bottom);break;case"displayrighttoleft":Y.Views||(Y.Views=[]),Y.Views[0]||(Y.Views[0]={}),Y.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Se=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Se=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Se=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Se=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Se=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Se=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Se=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Se=!1}break;case"smarttags":break;default:Se=!1;break}if(Se||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?IKe(P,ae,L,n.slice(D,o.index)):(L=o,D=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Ie={};return!r.bookSheets&&!r.bookProps&&(Ie.Sheets=d),Ie.SheetNames=f,Ie.Workbook=Y,Ie.SSF=Ha(Rr),Ie.Props=R,Ie.Custprops=P,Ie}function nO(e,t){switch(CL(t=t||{}),t.type||"base64"){case"base64":return Z3(zc(e),t);case"binary":case"buffer":case"file":return Z3(e,t);case"array":return Z3(Hm(e),t)}}function RKe(e,t){var r=[];return e.Props&&r.push(o7e(e.Props,t)),e.Custprops&&r.push(l7e(e.Props,e.Custprops)),r.join("")}function LKe(){return""}function MKe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Gt("NumberFormat",null,{"ss:Format":pa(Rr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Gt("Style",s.join(""),i))}),Gt("Styles",r.join(""))}function Yoe(e){return Gt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+xL(e.Ref,{r:0,c:0})})}function UKe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Yoe(a)))}return Gt("Names",r.join(""))}function QKe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(Yoe(o)))}return s.join("")}function HKe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Gt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Gt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Gt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Gt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(xo("ProtectContents","True")),e["!protect"].objects&&a.push(xo("ProtectObjects","True")),e["!protect"].scenarios&&a.push(xo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(xo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(xo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Gt("WorksheetOptions",a.join(""),{xmlns:Bc.x})}function VKe(e){return e.map(function(t){var r=uUe(t.t||""),n=Gt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Gt("Comment",n,{"ss:Author":t.a})}).join("")}function zKe(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+pa(xL(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=os(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=pa(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=pa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=Lh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Rr[14]);break;case"s":f="String",h=cUe(e.v||"");break}var p=zm(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var g=e.v!=null?h:"",x=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(x+=VKe(e.c)),Gt("Cell",x,o)}function $Ke(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=f1(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function GKe(e,t,r,n){if(!e["!ref"])return"";var a=Qn(e["!ref"]),s=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,y){_m(b);var w=!!b.width,_=bk(y,b),j={"ss:Index":y+1};w&&(j["ss:Width"]=t2(_.width)),b.hidden&&(j["ss:Hidden"]="1"),o.push(Gt("Column",null,j))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[$Ke(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:f},g=Ur(p),x=c?(e[u]||[])[f]:e[g];d.push(zKe(x,g,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function KKe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?QKe(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?GKe(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(HKe(s,t,e,r)),n.join("")}function qKe(e,t){t||(t={}),e.SSF||(e.SSF=Ha(Rr)),e.SSF&&(eb(),fk(e.SSF),t.revssf=mk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],zm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(RKe(e,t)),r.push(LKe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Gt("Worksheet",KKe(n,t,e),{"ss:Name":pa(e.SheetNames[n])}));return r[2]=MKe(e,t),r[3]=UKe(e),Ys+Gt("Workbook",r.join(""),{xmlns:Bc.ss,"xmlns:o":Bc.o,"xmlns:x":Bc.x,"xmlns:ss":Bc.ss,"xmlns:dt":Bc.dt,"xmlns:html":Bc.html})}function WKe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=UUe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=QUe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var XKe=[60,1084,2066,2165,2175];function YKe(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var c=th(r,r.l),u=aO[c],d=0;u!=null&&XKe.indexOf(c)>-1;)s=th(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=aO[c=th(r,r.l)];var f=Ki(i);go(f,0);var h=0;f.lens=[];for(var p=0;p<i.length;++p)f.lens.push(h),h+=i[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function EA(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Rr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Lh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Ww(e.v):e.w=pg(e.v):e.w=Hu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&Z1(Rr[n]||String(n))){var a=Lp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function r_(e,t,r){return{v:e,ixfe:t,t:r}}function JKe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},o=null,c=[],u="",d={},f,h="",p,g,x,b,y={},w=[],_,j,k=[],I=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},N={},B=function(Qt){return Qt<8?Wp[Qt]:Qt<64&&I[Qt-8]||Wp[Qt]},R=function(Qt,yt,Br){var tr=yt.XF.data;if(!(!tr||!tr.patternType||!Br||!Br.cellStyles)){yt.s={},yt.s.patternType=tr.patternType;var nn;(nn=e2(B(tr.icvFore)))&&(yt.s.fgColor={rgb:nn}),(nn=e2(B(tr.icvBack)))&&(yt.s.bgColor={rgb:nn})}},P=function(Qt,yt,Br){if(!(ee>1)&&!(Br.sheetRows&&Qt.r>=Br.sheetRows)){if(Br.cellStyles&&yt.XF&&yt.XF.data&&R(Qt,yt,Br),delete yt.ixfe,delete yt.XF,f=Qt,h=Ur(Qt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Qt.r<i.s.r&&(i.s.r=Qt.r),Qt.c<i.s.c&&(i.s.c=Qt.c),Qt.r+1>i.e.r&&(i.e.r=Qt.r+1),Qt.c+1>i.e.c&&(i.e.c=Qt.c+1),Br.cellFormula&&yt.f){for(var tr=0;tr<w.length;++tr)if(!(w[tr][0].s.c>Qt.c||w[tr][0].s.r>Qt.r)&&!(w[tr][0].e.c<Qt.c||w[tr][0].e.r<Qt.r)){yt.F=rn(w[tr][0]),(w[tr][0].s.c!=Qt.c||w[tr][0].s.r!=Qt.r)&&delete yt.f,yt.f&&(yt.f=""+zo(w[tr][1],i,Qt,G,D));break}}Br.dense?(a[Qt.r]||(a[Qt.r]=[]),a[Qt.r][Qt.c]=yt):a[h]=yt}},D={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:w,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(D.password=t.password);var L,M=[],J=[],H=[],K=[],V=!1,G=[];G.SheetNames=D.snames,G.sharedf=D.sharedf,G.arrayf=D.arrayf,G.names=[],G.XTI=[];var X=0,ee=0,F=0,z=[],Y=[],te;D.codepage=1200,Nd(1200);for(var ae=!1;e.l<e.length-1;){var le=e.l,ie=e.read_shift(2);if(ie===0&&X===10)break;var ce=e.l===e.length?0:e.read_shift(2),pe=aO[ie];if(pe&&pe.f){if(t.bookSheets&&X===133&&ie!==133)break;if(X=ie,pe.r===2||pe.r==12){var Be=e.read_shift(2);if(ce-=2,!D.enc&&Be!==ie&&((Be&255)<<8|Be>>8)!==ie)throw new Error("rt mismatch: "+Be+"!="+ie);pe.r==12&&(e.l+=10,ce-=10)}var ne={};if(ie===10?ne=pe.f(e,ce,D):ne=YKe(ie,pe,e,ce,D),ee==0&&[9,521,1033,2057].indexOf(X)===-1)continue;switch(ie){case 34:r.opts.Date1904=E.WBProps.date1904=ne;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(D.enc||(e.l=0),D.enc=ne,!t.password)throw new Error("File is password-protected");if(ne.valid==null)throw new Error("Encryption scheme unsupported");if(!ne.valid)throw new Error("Password is incorrect");break;case 92:D.lastuser=ne;break;case 66:var _e=Number(ne);switch(_e){case 21010:_e=1200;break;case 32768:_e=1e4;break;case 32769:_e=1252;break}Nd(D.codepage=_e),ae=!0;break;case 317:D.rrtabid=ne;break;case 25:D.winlocked=ne;break;case 439:r.opts.RefreshAll=ne;break;case 12:r.opts.CalcCount=ne;break;case 16:r.opts.CalcDelta=ne;break;case 17:r.opts.CalcIter=ne;break;case 13:r.opts.CalcMode=ne;break;case 14:r.opts.CalcPrecision=ne;break;case 95:r.opts.CalcSaveRecalc=ne;break;case 15:D.CalcRefMode=ne;break;case 2211:r.opts.FullCalc=ne;break;case 129:ne.fDialog&&(a["!type"]="dialog"),ne.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ne.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:k.push(ne);break;case 430:G.push([ne]),G[G.length-1].XTI=[];break;case 35:case 547:G[G.length-1].push(ne);break;case 24:case 536:te={Name:ne.Name,Ref:zo(ne.rgce,i,null,G,D)},ne.itab>0&&(te.Sheet=ne.itab-1),G.names.push(te),G[0]||(G[0]=[],G[0].XTI=[]),G[G.length-1].push(ne),ne.Name=="_xlnm._FilterDatabase"&&ne.itab>0&&ne.rgce&&ne.rgce[0]&&ne.rgce[0][0]&&ne.rgce[0][0][0]=="PtgArea3d"&&(Y[ne.itab-1]={ref:rn(ne.rgce[0][0][1][2])});break;case 22:D.ExternCount=ne;break;case 23:G.length==0&&(G[0]=[],G[0].XTI=[]),G[G.length-1].XTI=G[G.length-1].XTI.concat(ne),G.XTI=G.XTI.concat(ne);break;case 2196:if(D.biff<8)break;te!=null&&(te.Comment=ne[1]);break;case 18:a["!protect"]=ne;break;case 19:ne!==0&&D.WTF&&console.error("Password verifier: "+ne);break;case 133:s[ne.pos]=ne,D.snames.push(ne.name);break;case 10:{if(--ee)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=rn(i),t.sheetRows&&t.sheetRows<=i.e.r){var De=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=rn(i),i.e.r=De}i.e.r++,i.e.c++}M.length>0&&(a["!merges"]=M),J.length>0&&(a["!objects"]=J),H.length>0&&(a["!cols"]=H),K.length>0&&(a["!rows"]=K),E.Sheets.push(N)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(D.biff===8&&(D.biff={9:2,521:3,1033:4}[ie]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ne.BIFFVer]||8),D.biffguess=ne.BIFFVer==0,ne.BIFFVer==0&&ne.dt==4096&&(D.biff=5,ae=!0,Nd(D.codepage=28591)),D.biff==8&&ne.BIFFVer==0&&ne.dt==16&&(D.biff=2),ee++)break;if(a=t.dense?[]:{},D.biff<8&&!ae&&(ae=!0,Nd(D.codepage=t.codepage||1252)),D.biff<5||ne.BIFFVer==0&&ne.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Se={pos:e.l-ce,name:u};s[Se.pos]=Se,D.snames.push(u)}else u=(s[le]||{name:""}).name;ne.dt==32&&(a["!type"]="chart"),ne.dt==64&&(a["!type"]="macro"),M=[],J=[],D.arrayf=w=[],H=[],K=[],V=!1,N={Hidden:(s[le]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ne.r]||[])[ne.c]:a[Ur({c:ne.c,r:ne.r})])&&++ne.c,_={ixfe:ne.ixfe,XF:k[ne.ixfe]||{},v:ne.val,t:"n"},F>0&&(_.z=z[_.ixfe>>8&63]),EA(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t);break;case 5:case 517:_={ixfe:ne.ixfe,XF:k[ne.ixfe],v:ne.val,t:ne.t},F>0&&(_.z=z[_.ixfe>>8&63]),EA(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t);break;case 638:_={ixfe:ne.ixfe,XF:k[ne.ixfe],v:ne.rknum,t:"n"},F>0&&(_.z=z[_.ixfe>>8&63]),EA(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t);break;case 189:for(var fe=ne.c;fe<=ne.C;++fe){var Ie=ne.rkrec[fe-ne.c][0];_={ixfe:Ie,XF:k[Ie],v:ne.rkrec[fe-ne.c][1],t:"n"},F>0&&(_.z=z[_.ixfe>>8&63]),EA(_,t,r.opts.Date1904),P({c:fe,r:ne.r},_,t)}break;case 6:case 518:case 1030:{if(ne.val=="String"){o=ne;break}if(_=r_(ne.val,ne.cell.ixfe,ne.tt),_.XF=k[_.ixfe],t.cellFormula){var Ue=ne.formula;if(Ue&&Ue[0]&&Ue[0][0]&&Ue[0][0][0]=="PtgExp"){var Ye=Ue[0][0][1][0],ye=Ue[0][0][1][1],Oe=Ur({r:Ye,c:ye});y[Oe]?_.f=""+zo(ne.formula,i,ne.cell,G,D):_.F=((t.dense?(a[Ye]||[])[ye]:a[Oe])||{}).F}else _.f=""+zo(ne.formula,i,ne.cell,G,D)}F>0&&(_.z=z[_.ixfe>>8&63]),EA(_,t,r.opts.Date1904),P(ne.cell,_,t),o=ne}break;case 7:case 519:if(o)o.val=ne,_=r_(ne,o.cell.ixfe,"s"),_.XF=k[_.ixfe],t.cellFormula&&(_.f=""+zo(o.formula,i,o.cell,G,D)),F>0&&(_.z=z[_.ixfe>>8&63]),EA(_,t,r.opts.Date1904),P(o.cell,_,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{w.push(ne);var Re=Ur(ne[0].s);if(p=t.dense?(a[ne[0].s.r]||[])[ne[0].s.c]:a[Re],t.cellFormula&&p){if(!o||!Re||!p)break;p.f=""+zo(ne[1],i,ne[0],G,D),p.F=rn(ne[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;y[Ur(o.cell)]=ne[0],p=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Ur(o.cell)],(p||{}).f=""+zo(ne[0],i,f,G,D)}}break;case 253:_=r_(c[ne.isst].t,ne.ixfe,"s"),c[ne.isst].h&&(_.h=c[ne.isst].h),_.XF=k[_.ixfe],F>0&&(_.z=z[_.ixfe>>8&63]),EA(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t);break;case 513:t.sheetStubs&&(_={ixfe:ne.ixfe,XF:k[ne.ixfe],t:"z"},F>0&&(_.z=z[_.ixfe>>8&63]),EA(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t));break;case 190:if(t.sheetStubs)for(var qe=ne.c;qe<=ne.C;++qe){var Ze=ne.ixfe[qe-ne.c];_={ixfe:Ze,XF:k[Ze],t:"z"},F>0&&(_.z=z[_.ixfe>>8&63]),EA(_,t,r.opts.Date1904),P({c:qe,r:ne.r},_,t)}break;case 214:case 516:case 4:_=r_(ne.val,ne.ixfe,"s"),_.XF=k[_.ixfe],F>0&&(_.z=z[_.ixfe>>8&63]),EA(_,t,r.opts.Date1904),P({c:ne.c,r:ne.r},_,t);break;case 0:case 512:ee===1&&(i=ne);break;case 252:c=ne;break;case 1054:if(D.biff==4){z[F++]=ne[1];for(var ct=0;ct<F+163&&Rr[ct]!=ne[1];++ct);ct>=163&&lh(ne[1],F+163)}else lh(ne[1],ne[0]);break;case 30:{z[F++]=ne;for(var pt=0;pt<F+163&&Rr[pt]!=ne;++pt);pt>=163&&lh(ne,F+163)}break;case 229:M=M.concat(ne);break;case 93:J[ne.cmo[0]]=D.lastobj=ne;break;case 438:D.lastobj.TxO=ne;break;case 127:D.lastobj.ImData=ne;break;case 440:for(b=ne[0].s.r;b<=ne[0].e.r;++b)for(x=ne[0].s.c;x<=ne[0].e.c;++x)p=t.dense?(a[b]||[])[x]:a[Ur({c:x,r:b})],p&&(p.l=ne[1]);break;case 2048:for(b=ne[0].s.r;b<=ne[0].e.r;++b)for(x=ne[0].s.c;x<=ne[0].e.c;++x)p=t.dense?(a[b]||[])[x]:a[Ur({c:x,r:b})],p&&p.l&&(p.l.Tooltip=ne[1]);break;case 28:{if(D.biff<=5&&D.biff>=2)break;p=t.dense?(a[ne[0].r]||[])[ne[0].c]:a[Ur(ne[0])];var It=J[ne[2]];p||(t.dense?(a[ne[0].r]||(a[ne[0].r]=[]),p=a[ne[0].r][ne[0].c]={t:"z"}):p=a[Ur(ne[0])]={t:"z"},i.e.r=Math.max(i.e.r,ne[0].r),i.s.r=Math.min(i.s.r,ne[0].r),i.e.c=Math.max(i.e.c,ne[0].c),i.s.c=Math.min(i.s.c,ne[0].c)),p.c||(p.c=[]),g={a:ne[1],t:It.TxO.t},p.c.push(g)}break;case 2173:MHe(k[ne.ixfe],ne.ext);break;case 125:{if(!D.cellStyles)break;for(;ne.e>=ne.s;)H[ne.e--]={width:ne.w/256,level:ne.level||0,hidden:!!(ne.flags&1)},V||(V=!0,mL(ne.w/256)),_m(H[ne.e+1])}break;case 520:{var Mt={};ne.level!=null&&(K[ne.r]=Mt,Mt.level=ne.level),ne.hidden&&(K[ne.r]=Mt,Mt.hidden=!0),ne.hpt&&(K[ne.r]=Mt,Mt.hpt=ne.hpt,Mt.hpx=f1(ne.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Jp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ie]]=ne;break;case 161:a["!margins"]||Jp(a["!margins"]={}),a["!margins"].header=ne.header,a["!margins"].footer=ne.footer;break;case 574:ne.RTL&&(E.Views[0].RTL=!0);break;case 146:I=ne;break;case 2198:L=ne;break;case 140:j=ne;break;case 442:u?N.CodeName=ne||N.name:E.WBProps.CodeName=ne||"ThisWorkbook";break}}else pe||console.error("Missing Info for XLS Record 0x"+ie.toString(16)),e.l+=ce}return r.SheetNames=Ts(s).sort(function(Pt,Qt){return Number(Pt)-Number(Qt)}).map(function(Pt){return s[Pt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&Y.forEach(function(Pt,Qt){r.Sheets[r.SheetNames[Qt]]["!autofilter"]=Pt}),r.Strings=c,r.SSF=Ha(Rr),D.enc&&(r.Encryption=D.enc),L&&(r.Themes=L),r.Metadata={},j!==void 0&&(r.Metadata.Country=j),G.names.length>0&&(E.Names=G.names),r.Workbook=E,r}var dw={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function ZKe(e,t,r){var n=Cr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=kK(n,YF,dw.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Cr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=kK(i,JF,dw.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(Xie(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function eqe(e,t){var r=[],n=[],a=[],s=0,i,o=aK(YF,"n"),c=aK(JF,"n");if(e.Props)for(i=Ts(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=Ts(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)noe.indexOf(a[s][0])>-1||Wie.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Cr.utils.cfb_add(t,"/SummaryInformation",BK(n,dw.SI,c,JF)),(r.length||u.length)&&Cr.utils.cfb_add(t,"/DocumentSummaryInformation",BK(r,dw.DSI,o,YF,u.length?u:null,dw.UDI))}function Joe(e,t){t||(t={}),CL(t),$8(),t.codepage&&z8(t.codepage);var r,n;if(e.FullPaths){if(Cr.find(e,"/encryption"))throw new Error("File is password-protected");r=Cr.find(e,"!CompObj"),n=Cr.find(e,"/Workbook")||Cr.find(e,"/Book")}else{switch(t.type){case"base64":e=Oc(zc(e));break;case"binary":e=Oc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}go(e,0),n={content:e}}var a,s;if(r&&WKe(r),t.bookProps&&!t.bookSheets)a={};else{var i=pn?"buffer":"array";if(n&&n.content)a=JKe(n.content,t);else if((s=Cr.find(e,"PerfectOffice_MAIN"))&&s.content)a=Yp.to_workbook(s.content,(t.type=i,t));else if((s=Cr.find(e,"NativeContent_MAIN"))&&s.content)a=Yp.to_workbook(s.content,(t.type=i,t));else throw(s=Cr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Cr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=fVe(e))}var o={};return e.FullPaths&&ZKe(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function tqe(e,t){var r=t||{},n=Cr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Cr.utils.cfb_add(n,a,Zoe(e,r)),r.biff==8&&(e.Props||e.Custprops)&&eqe(e,n),r.biff==8&&e.vbaraw&&hVe(n,Cr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var a2={0:{f:_$e},1:{f:F$e},2:{f:J$e},3:{f:Q$e},4:{f:R$e},5:{f:W$e},6:{f:nGe},7:{f:$$e},8:{f:uGe},9:{f:cGe},10:{f:oGe},11:{f:lGe},12:{f:D$e},13:{f:eGe},14:{f:V$e},15:{f:M$e},16:{f:zoe},17:{f:sGe},18:{f:K$e},19:{f:sL},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:sKe},40:{},42:{},43:{f:nHe},44:{f:tHe},45:{f:iHe},46:{f:lHe},47:{f:oHe},48:{},49:{f:kUe},50:{},51:{f:HHe},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:hoe},62:{f:rGe},63:{f:YHe},64:{f:NGe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:al,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:wGe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:j$e},148:{f:k$e,p:16},151:{f:pGe},152:{},153:{f:rKe},154:{},155:{},156:{f:eKe},157:{},158:{},159:{T:1,f:xQe},160:{T:-1},161:{T:1,f:Qg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:dGe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:UHe},336:{T:-1},337:{f:$He,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:XF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:foe},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:gGe},427:{f:xGe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:bGe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:T$e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:hGe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:XF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:lVe},633:{T:1},634:{T:-1},635:{T:1,f:iVe},636:{T:-1},637:{f:IUe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:VGe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:SGe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},aO={6:{f:Y3},10:{f:N0},12:{f:li},13:{f:li},14:{f:Ms},15:{f:Ms},16:{f:Jo},17:{f:Ms},18:{f:Ms},19:{f:li},20:{f:DK},21:{f:DK},23:{f:foe},24:{f:RK},25:{f:Ms},26:{},27:{},28:{f:S9e},29:{},34:{f:Ms},35:{f:PK},38:{f:Jo},39:{f:Jo},40:{f:Jo},41:{f:Jo},42:{f:Ms},43:{f:Ms},47:{f:MQe},49:{f:e9e},51:{f:li},60:{},61:{f:W7e},64:{f:Ms},65:{f:Z7e},66:{f:li},77:{},80:{},81:{},82:{},85:{f:li},89:{},90:{},91:{},92:{f:L7e},93:{f:T9e},94:{},95:{f:Ms},96:{},97:{},99:{f:Ms},125:{f:hoe},128:{f:m9e},129:{f:U7e},130:{f:li},131:{f:Ms},132:{f:Ms},133:{f:Q7e},134:{},140:{f:L9e},141:{f:li},144:{},146:{f:Q9e},151:{},152:{},153:{},154:{},155:{},156:{f:li},157:{},158:{},160:{f:q9e},161:{f:z9e},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:d9e},190:{f:A9e},193:{f:N0},197:{},198:{},199:{},200:{},201:{},202:{f:Ms},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:li},220:{},221:{f:Ms},222:{},224:{f:h9e},225:{f:R7e},226:{f:N0},227:{},229:{f:k9e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:V7e},253:{f:r9e},255:{f:$7e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:aoe},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ms},353:{f:N0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:b9e},431:{f:Ms},432:{},433:{},434:{},437:{},438:{f:F9e},439:{f:Ms},440:{f:O9e},441:{},442:{f:rE},443:{},444:{f:li},445:{},446:{},448:{f:N0},449:{f:q7e,r:2},450:{f:N0},512:{f:IK},513:{f:K9e},515:{f:x9e},516:{f:a9e},517:{f:OK},519:{f:W9e},520:{f:G7e},523:{},545:{f:LK},549:{f:jK},566:{},574:{f:Y7e},638:{f:u9e},659:{},1048:{},1054:{f:i9e},1084:{},1212:{f:C9e},2048:{f:P9e},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:ZC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:N0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:H9e,r:12},2173:{f:LHe,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ms,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:E9e,r:12},2197:{},2198:{f:IHe,r:12},2199:{},2200:{},2201:{},2202:{f:_9e,r:12},2203:{f:N0},2204:{},2205:{},2206:{},2207:{},2211:{f:K7e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:li},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:$9e},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:U9e},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:IK},1:{},2:{f:eQe},3:{f:J9e},4:{f:Y9e},5:{f:OK},7:{f:rQe},8:{},9:{f:ZC},11:{},22:{f:li},30:{f:l9e},31:{},32:{},33:{f:LK},36:{},37:{f:jK},50:{f:nQe},62:{},52:{},67:{},68:{f:li},69:{},86:{},126:{},127:{f:X9e},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:aQe},223:{},234:{},354:{},421:{},518:{f:Y3},521:{f:ZC},536:{f:RK},547:{f:PK},561:{},579:{},1030:{f:Y3},1033:{f:ZC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Kt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&rL(r)&&e.push(r)}}function rqe(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return Kt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function iE(e,t,r){return e||(e=Et(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function nqe(e,t,r,n){var a=Et(9);return iE(a,e,t),soe(r,n||"b",a),a}function aqe(e,t,r){var n=Et(8+2*r.length);return iE(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function sqe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Si(Qa(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?Kt(e,2,tQe(r,n,a)):Kt(e,3,Z9e(r,n,a));return;case"b":case"e":Kt(e,5,nqe(r,n,t.v,t.t));return;case"s":case"str":Kt(e,4,aqe(r,n,(t.v||"").slice(0,255)));return}Kt(e,1,iE(null,r,n))}function iqe(e,t,r,n){var a=Array.isArray(t),s=Qn(t["!ref"]||"A1"),i,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=rn(s)}for(var u=s.s.r;u<=s.e.r;++u){o=qs(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=is(d)),i=c[d]+o;var f=a?(t[u]||[])[d]:t[i];f&&sqe(e,f,u,d)}}}function oqe(e,t){for(var r=t||{},n=ec(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Kt(n,r.biff==4?1033:r.biff==3?521:9,AL(e,16,r)),iqe(n,e.Sheets[e.SheetNames[a]],a,r),Kt(n,10),n.end()}function lqe(e,t,r){Kt(e,49,t9e({sz:12,name:"Arial"},r))}function cqe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Kt(e,1054,o9e(a,t[a],r))})}function uqe(e,t){var r=Et(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Kt(e,2151,r),r=Et(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),uoe(Qn(t["!ref"]||"A1"),r),r.write_shift(4,4),Kt(e,2152,r)}function dqe(e,t){for(var r=0;r<16;++r)Kt(e,224,FK({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){Kt(e,224,FK(n,0,t))})}function Aqe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];Kt(e,440,D9e(n)),n[1].Tooltip&&Kt(e,2048,R9e(n))}delete t["!links"]}function fqe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&Kt(e,125,V9e(bk(a,n),a))})}}function hqe(e,t,r,n,a){var s=16+zm(a.cellXfs,t,a);if(t.v==null&&!t.bf){Kt(e,513,bg(r,n,s));return}if(t.bf)Kt(e,6,Uze(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?Si(Qa(t.v)):t.v;Kt(e,515,v9e(r,n,i,s));break;case"b":case"e":Kt(e,517,g9e(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=bL(a.Strings,t.v,a.revStrings);Kt(e,253,n9e(r,n,o,s))}else Kt(e,516,s9e(r,n,(t.v||"").slice(0,255),s,a));break;default:Kt(e,513,bg(r,n,s))}}function mqe(e,t,r){var n=ec(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",h=[],p=Qn(s["!ref"]||"A1"),g=u?65536:16384;if(p.e.c>255||p.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,g-1)}Kt(n,2057,AL(r,16,t)),Kt(n,13,Su(1)),Kt(n,12,Su(100)),Kt(n,15,pl(!0)),Kt(n,17,pl(!1)),Kt(n,16,xg(.001)),Kt(n,95,pl(!0)),Kt(n,42,pl(!1)),Kt(n,43,pl(!1)),Kt(n,130,Su(1)),Kt(n,128,p9e()),Kt(n,131,pl(!1)),Kt(n,132,pl(!1)),u&&fqe(n,s["!cols"]),Kt(n,512,c9e(p,t)),u&&(s["!links"]=[]);for(var x=p.s.r;x<=p.e.r;++x){f=qs(x);for(var b=p.s.c;b<=p.e.c;++b){x===p.s.r&&(h[b]=is(b)),d=h[b]+f;var y=c?(s[x]||[])[b]:s[d];y&&(hqe(n,y,x,b,t),u&&y.l&&s["!links"].push([d,y.l]))}}var w=o.CodeName||o.name||a;return u&&Kt(n,574,J7e((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&Kt(n,229,B9e(s["!merges"])),u&&Aqe(n,s),Kt(n,442,ioe(w)),u&&uqe(n,s),Kt(n,10),n.end()}function pqe(e,t,r){var n=ec(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(Kt(n,2057,AL(e,5,r)),r.bookType=="xla"&&Kt(n,135),Kt(n,225,o?Su(1200):null),Kt(n,193,g7e(2)),c&&Kt(n,191),c&&Kt(n,192),Kt(n,226),Kt(n,92,M7e("SheetJS",r)),Kt(n,66,Su(o?1200:1252)),o&&Kt(n,353,Su(0)),o&&Kt(n,448),Kt(n,317,G9e(e.SheetNames.length)),o&&e.vbaraw&&Kt(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";Kt(n,442,ioe(u))}Kt(n,156,Su(17)),Kt(n,25,pl(!1)),Kt(n,18,pl(!1)),Kt(n,19,Su(0)),o&&Kt(n,431,pl(!1)),o&&Kt(n,444,Su(0)),Kt(n,61,X7e()),Kt(n,64,pl(!1)),Kt(n,141,Su(0)),Kt(n,34,pl(qGe(e)=="true")),Kt(n,14,pl(!0)),o&&Kt(n,439,pl(!1)),Kt(n,218,Su(0)),lqe(n,e,r),cqe(n,e.SSF,r),dqe(n,r),o&&Kt(n,352,pl(!1));var d=n.end(),f=ec();o&&Kt(f,140,M9e()),o&&r.Strings&&rqe(f,252,z7e(r.Strings)),Kt(f,10);var h=f.end(),p=ec(),g=0,x=0;for(x=0;x<e.SheetNames.length;++x)g+=(o?12:11)+(o?2:1)*e.SheetNames[x].length;var b=d.length+g+h.length;for(x=0;x<e.SheetNames.length;++x){var y=s[x]||{};Kt(p,133,H7e({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[x]},r)),b+=t[x].length}var w=p.end();if(g!=w.length)throw new Error("BS8 "+g+" != "+w.length);var _=[];return d.length&&_.push(d),w.length&&_.push(w),h.length&&_.push(h),Ki(_)}function gqe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Ha(Rr)),e&&e.SSF&&(eb(),fk(e.SSF),r.revssf=mk(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,_L(r),r.cellXfs=[],zm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=mqe(a,r,e);return n.unshift(pqe(e,n,r)),Ki(n)}function Zoe(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=rc(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return gqe(e,t);case 4:case 3:case 2:return oqe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function qK(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,c=tUe(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(i=0;i<c.length;++i){var x=c[i].trim(),b=x.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var y=x.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var w=y[o].trim();if(w.match(/<t[dh]/i)){for(var _=w,j=0;_.charAt(0)=="<"&&(j=_.indexOf(">"))>-1;)_=_.slice(j+1);for(var k=0;k<g.length;++k){var I=g[k];I.s.c==d&&I.s.r<u&&u<=I.e.r&&(d=I.e.c+1,k=-1)}var E=$r(w.slice(0,w.indexOf(">")));h=E.colspan?+E.colspan:1,((f=+E.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var N=E.t||E["data-t"]||"";if(!_.length){d+=h;continue}if(_=Eie(_),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!_.length){d+=h;continue}var B={t:"s",v:_};r.raw||!_.trim().length||N=="s"||(_==="TRUE"?B={t:"b",v:!0}:_==="FALSE"?B={t:"b",v:!1}:isNaN(Fd(_))?isNaN(d1(_).getDate())||(B={t:"d",v:Qa(_)},r.cellDates||(B={t:"n",v:Si(B.v)}),B.z=r.dateNF||Rr[14]):B={t:"n",v:Fd(_)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=B):n[Ur({r:u,c:d})]=B,d+=h}}}}return n["!ref"]=rn(p),g.length&&(n["!merges"]=g),n}function xqe(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Ur({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||Z8(f.w||(_h(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,s.push(Gt("td",h,p))}}var g="<tr>";return g+s.join("")+"</tr>"}var vqe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',bqe="</body></html>";function yqe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Vm(qK(r[0],t),t);var n=BL();return r.forEach(function(a,s){TL(n,qK(a,t),"Sheet"+(s+1))}),n}function wqe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function ele(e,t){var r=t||{},n=r.header!=null?r.header:vqe,a=r.footer!=null?r.footer:bqe,s=[n],i=rc(e["!ref"]);r.dense=Array.isArray(e),s.push(wqe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(xqe(e,i,o,r));return s.push("</table>"+a),s.join("")}function tle(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?os(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=rc(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),g=0,x=0,b=0,y=0,w=0,_=0;for(e["!cols"]||(e["!cols"]=[]);g<o.length&&x<c;++g){var j=o[g];if(WK(j)){if(n.display)continue;p[x]={hidden:!0}}var k=j.children;for(b=y=0;b<k.length;++b){var I=k[b];if(!(n.display&&WK(I))){var E=I.hasAttribute("data-v")?I.getAttribute("data-v"):I.hasAttribute("v")?I.getAttribute("v"):Eie(I.innerHTML),N=I.getAttribute("data-z")||I.getAttribute("z");for(h=0;h<f.length;++h){var B=f[h];B.s.c==y+s&&B.s.r<x+a&&x+a<=B.e.r&&(y=B.e.c+1-s,h=-1)}_=+I.getAttribute("colspan")||1,((w=+I.getAttribute("rowspan")||1)>1||_>1)&&f.push({s:{r:x+a,c:y+s},e:{r:x+a+(w||1)-1,c:y+s+(_||1)-1}});var R={t:"s",v:E},P=I.getAttribute("data-t")||I.getAttribute("t")||"";E!=null&&(E.length==0?R.t=P||"z":n.raw||E.trim().length==0||P=="s"||(E==="TRUE"?R={t:"b",v:!0}:E==="FALSE"?R={t:"b",v:!1}:isNaN(Fd(E))?isNaN(d1(E).getDate())||(R={t:"d",v:Qa(E)},n.cellDates||(R={t:"n",v:Si(R.v)}),R.z=n.dateNF||Rr[14]):R={t:"n",v:Fd(E)})),R.z===void 0&&N!=null&&(R.z=N);var D="",L=I.getElementsByTagName("A");if(L&&L.length)for(var M=0;M<L.length&&!(L[M].hasAttribute("href")&&(D=L[M].getAttribute("href"),D.charAt(0)!="#"));++M);D&&D.charAt(0)!="#"&&(R.l={Target:D}),n.dense?(e[x+a]||(e[x+a]=[]),e[x+a][y+s]=R):e[Ur({c:y+s,r:x+a})]=R,u.e.c<y+s&&(u.e.c=y+s),y+=_}}++x}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,x-1+a),e["!ref"]=rn(u),x>=c&&(e["!fullref"]=rn((u.e.r=o.length-g+x-1+a,u))),e}function rle(e,t){var r=t||{},n=r.dense?[]:{};return tle(n,e,t)}function Eqe(e,t){return Vm(rle(e,t),t)}function WK(e){var t="",r=Cqe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function Cqe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function _qe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Un(t.replace(/<[^>]*>/g,""));return[r]}var XK={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function nle(e,t){var r=t||{},n=eL(e),a=[],s,i,o={name:""},c="",u=0,d,f,h={},p=[],g=r.dense?[]:{},x,b,y={value:""},w="",_=0,j=[],k=-1,I=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},N=0,B={},R=[],P={},D=0,L=0,M=[],J=1,H=1,K=[],V={Names:[]},G={},X=["",""],ee=[],F={},z="",Y=0,te=!1,ae=!1,le=0;for(Jw.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");x=Jw.exec(n);)switch(x[3]=x[3].replace(/_.*$/,"")){case"table":case"":x[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?g["!ref"]=rn(E):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(g["!fullref"]=g["!ref"],E.e.r=r.sheetRows-1,g["!ref"]=rn(E)),R.length&&(g["!merges"]=R),M.length&&(g["!rows"]=M),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),h[d.name]=g,ae=!1):x[0].charAt(x[0].length-2)!=="/"&&(d=$r(x[0],!1),k=I=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,g=r.dense?[]:{},R=[],M=[],ae=!0);break;case"table-row-group":x[1]==="/"?--N:++N;break;case"table-row":case"":if(x[1]==="/"){k+=J,J=1;break}if(f=$r(x[0],!1),f.?k=f.-1:k==-1&&(k=0),J=+f["number-rows-repeated"]||1,J<10)for(le=0;le<J;++le)N>0&&(M[k+le]={level:N});I=-1;break;case"covered-table-cell":x[1]!=="/"&&++I,r.sheetStubs&&(r.dense?(g[k]||(g[k]=[]),g[k][I]={t:"z"}):g[Ur({r:k,c:I})]={t:"z"}),w="",j=[];break;case"table-cell":case"":if(x[0].charAt(x[0].length-2)==="/")++I,y=$r(x[0],!1),H=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=$K(Un(y.formula))),(y.||y["value-type"])=="string"&&(b.t="s",b.v=Un(y["string-value"]||""),r.dense?(g[k]||(g[k]=[]),g[k][I]=b):g[Ur({r:k,c:I})]=b),I+=H-1;else if(x[1]!=="/"){++I,w="",_=0,j=[],H=1;var ie=J?k+J-1:k;if(I>E.e.c&&(E.e.c=I),I<E.s.c&&(E.s.c=I),k<E.s.r&&(E.s.r=k),ie>E.e.r&&(E.e.r=ie),y=$r(x[0],!1),ee=[],F={},b={t:y.||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Un(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(D=parseInt(y["number-matrix-rows-spanned"],10)||0,L=parseInt(y["number-matrix-columns-spanned"],10)||0,P={s:{r:k,c:I},e:{r:k+D-1,c:I+L-1}},b.F=rn(P),K.push([P,b.F])),y.formula)b.f=$K(y.formula);else for(le=0;le<K.length;++le)k>=K[le][0].s.r&&k<=K[le][0].e.r&&I>=K[le][0].s.c&&I<=K[le][0].e.c&&(b.F=K[le][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(D=parseInt(y["number-rows-spanned"],10)||0,L=parseInt(y["number-columns-spanned"],10)||0,P={s:{r:k,c:I},e:{r:k+D-1,c:I+L-1}},R.push(P)),y["number-columns-repeated"]&&(H=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Ma(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Qa(y["date-value"]),r.cellDates||(b.t="n",b.v=Si(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=JMe(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=pk(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(w=Un(y["string-value"]),j=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(te=!1,b.t==="s"&&(b.v=w||"",j.length&&(b.R=j),te=_==0),G.Target&&(b.l=G),ee.length>0&&(b.c=ee,ee=[]),w&&r.cellText!==!1&&(b.w=w),te&&(b.t="z",delete b.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=k))for(var ce=0;ce<J;++ce){if(H=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[k+ce]||(g[k+ce]=[]),g[k+ce][I]=ce==0?b:Ha(b);--H>0;)g[k+ce][I+H]=Ha(b);else for(g[Ur({r:k+ce,c:I})]=b;--H>0;)g[Ur({r:k+ce,c:I+H})]=Ha(b);E.e.c<=I&&(E.e.c=I)}H=parseInt(y["number-columns-repeated"]||"1",10),I+=H-1,H=0,b={},w="",j=[]}G={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!0]);break;case"annotation":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s;F.t=w,j.length&&(F.R=j),F.a=z,ee.push(F)}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);z="",Y=0,w="",_=0,j=[];break;case"creator":x[1]==="/"?z=n.slice(Y,x.index):Y=x.index+x[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(x[1]==="/"){if((s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&a.push([x[3],!1]);w="",_=0,j=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(x[1]==="/"){if(B[o.name]=c,(s=a.pop())[0]!==x[3])throw"Bad state: "+s}else x[0].charAt(x[0].length-2)!=="/"&&(c="",o=$r(x[0],!1),a.push([x[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=$r(x[0],!1),c+=XK[x[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=$r(x[0],!1),c+=XK[x[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(x[0].slice(-2)==="/>")break;if(x[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,x.index);break}else u=x.index+x[0].length;break;case"named-range":i=$r(x[0],!1),X=J3(i["cell-range-address"]);var pe={Name:i.name,Ref:X[0]+"!"+X[1]};ae&&(pe.Sheet=p.length),V.Names.push(pe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(x[1]==="/"&&(!y||!y["string-value"])){var Be=_qe(n.slice(_,x.index));w=(w.length>0?w+`
`:"")+Be[0]}else $r(x[0],!1),_=x.index+x[0].length;break;case"s":break;case"database-range":if(x[1]==="/")break;try{X=J3($r(x[0])["target-range-address"]),h[X[0]]["!autofilter"]={ref:X[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(x[1]!=="/"){if(G=$r(x[0],!1),!G.href)break;G.Target=Un(G.href),delete G.href,G.Target.charAt(0)=="#"&&G.Target.indexOf(".")>-1?(X=J3(G.Target.slice(1)),G.Target="#"+X[0]+"!"+X[1]):G.Target.match(/^\.\.[\\\/]/)&&(G.Target=G.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(x[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(x)}}var ne={Sheets:h,SheetNames:p,Workbook:V};return r.bookSheets&&delete ne.Sheets,ne}function YK(e,t){t=t||{},_u(e,"META-INF/manifest.xml")&&JUe(oi(e,"META-INF/manifest.xml"),t);var r=Dc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=nle(Ea(r),t);return _u(e,"meta.xml")&&(n.Props=Kie(oi(e,"meta.xml"))),n}function JK(e,t){return nle(e,t)}var Nqe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Yw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ys+t}}(),ZK=function(){var e=function(s){return pa(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var c=[];c.push('      <table:table table:name="'+pa(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=rc(s["!ref"]||"A1"),h=s["!merges"]||[],p=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var x="",b=s["!rows"]||[];for(u=0;u<f.s.r;++u)x=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+x+`></table:table-row>
`);for(;u<=f.e.r;++u){for(x=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+x+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,w={},_="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>d)&&!(h[p].s.r>u)&&!(h[p].e.c<d)&&!(h[p].e.r<u)){(h[p].s.c!=d||h[p].s.r!=u)&&(y=!0),w["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,w["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(y){c.push(r);continue}var j=Ur({r:u,c:d}),k=g?(s[u]||[])[d]:s[j];if(k&&k.f&&(w["table:formula"]=pa(Gze(k.f)),k.F&&k.F.slice(0,j.length)==j)){var I=rc(k.F);w["table:number-matrix-columns-spanned"]=I.e.c-I.s.c+1,w["table:number-matrix-rows-spanned"]=I.e.r-I.s.r+1}if(!k){c.push(t);continue}switch(k.t){case"b":_=k.v?"TRUE":"FALSE",w["office:value-type"]="boolean",w["office:boolean-value"]=k.v?"true":"false";break;case"n":_=k.w||String(k.v||0),w["office:value-type"]="float",w["office:value"]=k.v||0;break;case"s":case"str":_=k.v==null?"":k.v,w["office:value-type"]="string";break;case"d":_=k.w||Qa(k.v).toISOString(),w["office:value-type"]="date",w["office:date-value"]=Qa(k.v).toISOString(),w["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(_);if(k.l&&k.l.Target){var N=k.l.Target;N=N.charAt(0)=="#"?"#"+Kze(N.slice(1)):N,N.charAt(0)!="#"&&!N.match(/^\w+:/)&&(N="../"+N),E=Gt("text:a",E,{"xlink:href":N.replace(/&/g,"&amp;")})}c.push("          "+Gt("table:table-cell",Gt("text:p",E,{}),w)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;_m(f),f.ods=o;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var c=[Ys],u=Yw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Yw({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Gie().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function ale(e,t){if(t.bookType=="fods")return ZK(e,t);var r=X8(),n="",a=[],s=[];return n="mimetype",cn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",cn(r,n,ZK(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",cn(r,n,Nqe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",cn(r,n,Ys+Gie()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",cn(r,n,t7e(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",cn(r,n,ZUe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function yg(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function sO(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ea(Hm(e))}function Sqe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Oc(QA(e))}function kqe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function Sm(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function eq(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Bqe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Tqe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function s2(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Aa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Bs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function qn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=s2(e,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=s2(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function uo(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(Aa(n*8+a.type)),a.type==2&&t.push(Aa(a.data.length)),t.push(a.data))})}),Sm(t)}function EL(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function Eu(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=s2(e,n),s=qn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Bs(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=qn(o.data),u=Bs(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=Bs(s[3][0].data)>>>0>0),r.push(i)}return r}function Nx(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Aa(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Aa(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:Aa(i.data.length)}],n[2].push({data:uo(i.meta),type:2})});var s=uo(n);t.push(Aa(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),Sm(t)}function jqe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=s2(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[Sm(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=Sm(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Cu(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(jqe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return Sm(t)}function Sx(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=Aa(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return Sm(t)}function Iqe(e,t,r,n){var a=yg(e),s=a.getUint32(4,!0),i=(n>1?12:8)+eq(s&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=eq(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Fqe(e,t,r){var n=yg(e),a=n.getUint32(8,!0),s=12,i=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=Bqe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function eI(e,t){var r=new Uint8Array(32),n=yg(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,Tqe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function tI(e,t){var r=new Uint8Array(32),n=yg(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function Oqe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Iqe(e,t,r,e[0]);case 5:return Fqe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Vo(e){var t=qn(e);return s2(t[1][0].data)}function tq(e,t){var r=qn(t.data),n=Bs(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=qn(i.data),c=Bs(o[1][0].data)>>>0;switch(n){case 1:s[c]=sO(o[3][0].data);break;case 8:{var u=e[Vo(o[9][0].data)][0],d=qn(u.data),f=e[Vo(d[1][0].data)][0],h=Bs(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=qn(f.data);s[c]=p[3].map(function(g){return sO(g.data)}).join("")}break}}),s}function Dqe(e,t){var r,n,a,s,i,o,c,u,d,f,h,p,g,x,b=qn(e),y=Bs(b[1][0].data)>>>0,w=Bs(b[2][0].data)>>>0,_=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Bs(b[8][0].data)>0||!1,j,k;if((s=(a=b[7])==null?void 0:a[0])!=null&&s.data&&t!=0)j=(o=(i=b[7])==null?void 0:i[0])==null?void 0:o.data,k=(u=(c=b[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)j=(p=(h=b[4])==null?void 0:h[0])==null?void 0:p.data,k=(x=(g=b[3])==null?void 0:g[0])==null?void 0:x.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var I=_?4:1,E=yg(j),N=[],B=0;B<j.length/2;++B){var R=E.getUint16(B*2,!0);R<65535&&N.push([B,R])}if(N.length!=w)throw"Expected ".concat(w," cells, found ").concat(N.length);var P=[];for(B=0;B<N.length-1;++B)P[N[B][0]]=k.subarray(N[B][1]*I,N[B+1][1]*I);return N.length>=1&&(P[N[N.length-1][0]]=k.subarray(N[N.length-1][1]*I)),{R:y,cells:P}}function Pqe(e,t){var r,n=qn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Bs(n[7][0].data)>>>0>0?1:0:-1,s=EL(n[5],function(i){return Dqe(i,a)});return{nrows:Bs(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function Rqe(e,t,r){var n,a=qn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Bs(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Bs(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=rn(s);var i=qn(a[4][0].data),o=tq(e,e[Vo(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?tq(e,e[Vo(i[17][0].data)][0]):[],u=qn(i[3][0].data),d=0;u[1].forEach(function(f){var h=qn(f.data),p=e[Vo(h[2][0].data)][0],g=Bs(p.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var x=Pqe(e,p);x.data.forEach(function(b,y){b.forEach(function(w,_){var j=Ur({r:d+y,c:_}),k=Oqe(w,o,c);k&&(r[j]=k)})}),d+=x.nrows})}function Lqe(e,t){var r=qn(t.data),n={"!ref":"A1"},a=e[Vo(r[2][0].data)],s=Bs(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return Rqe(e,a[0],n),n}function Mqe(e,t){var r,n=qn(t.data),a={name:(r=n[1])!=null&&r[0]?sO(n[1][0].data):"",sheets:[]},s=EL(n[2],Vo);return s.forEach(function(i){e[i].forEach(function(o){var c=Bs(o.meta[1][0].data);c==6e3&&a.sheets.push(Lqe(e,o))})}),a}function Uqe(e,t){var r=BL(),n=qn(t.data),a=EL(n[1],Vo);if(a.forEach(function(s){e[s].forEach(function(i){var o=Bs(i.meta[1][0].data);if(o==2){var c=Mqe(e,i);c.sheets.forEach(function(u,d){TL(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function rI(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Cu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=Eu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Bs(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(c){s[c].forEach(function(u){var d=Bs(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Uqe(s,o)}function Qqe(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&Bs(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=yg(e[7][0].data),d=0,f=[],h=yg(e[4][0].data),p=0,g=[],x=0;x<t.length;++x){if(t[x]==null){u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535);continue}u.setUint16(x*2,d,!0),h.setUint16(x*2,p,!0);var b,y;switch(typeof t[x]){case"string":b=eI({t:"s",v:t[x]},r),y=tI({t:"s",v:t[x]},r);break;case"number":b=eI({t:"n",v:t[x]},r),y=tI({t:"n",v:t[x]},r);break;case"boolean":b=eI({t:"b",v:t[x]},r),y=tI({t:"b",v:t[x]},r);break;default:throw new Error("Unsupported value "+t[x])}f.push(b),d+=b.length,g.push(y),p+=y.length,++c}for(e[2][0].data=Aa(c);x<e[7][0].data.length/2;++x)u.setUint16(x*2,65535,!0),h.setUint16(x*2,65535,!0);return e[6][0].data=Sm(f),e[3][0].data=Sm(g),c}function Hqe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=rc(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(rn(n)));var s=aS(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(z){return z.forEach(function(Y){typeof Y=="string"&&i.push(Y)})});var o={},c=[],u=Cr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(z,Y){return[z,u.FullPaths[Y]]}).forEach(function(z){var Y=z[0],te=z[1];if(Y.type==2&&Y.name.match(/\.iwa/)){var ae=Y.content,le=Cu(ae),ie=Eu(le);ie.forEach(function(ce){c.push(ce.id),o[ce.id]={deps:[],location:te,type:Bs(ce.messages[0].meta[1][0].data)}})}}),c.sort(function(z,Y){return z-Y});var d=c.filter(function(z){return z>1}).map(function(z){return[z,Aa(z)]});u.FileIndex.map(function(z,Y){return[z,u.FullPaths[Y]]}).forEach(function(z){var Y=z[0];if(z[1],!!Y.name.match(/\.iwa/)){var te=Eu(Cu(Y.content));te.forEach(function(ae){ae.messages.forEach(function(le){d.forEach(function(ie){ae.messages.some(function(ce){return Bs(ce.meta[1][0].data)!=11006&&kqe(ce.data,ie[1])})&&o[ie[0]].deps.push(ae.id)})})})}});for(var f=Cr.find(u,o[1].location),h=Eu(Cu(f.content)),p,g=0;g<h.length;++g){var x=h[g];x.id==1&&(p=x)}var b=Vo(qn(p.messages[0].data)[1][0].data);for(f=Cr.find(u,o[b].location),h=Eu(Cu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);for(b=Vo(qn(p.messages[0].data)[2][0].data),f=Cr.find(u,o[b].location),h=Eu(Cu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);for(b=Vo(qn(p.messages[0].data)[2][0].data),f=Cr.find(u,o[b].location),h=Eu(Cu(f.content)),g=0;g<h.length;++g)x=h[g],x.id==b&&(p=x);var y=qn(p.messages[0].data);{y[6][0].data=Aa(n.e.r+1),y[7][0].data=Aa(n.e.c+1);var w=Vo(y[46][0].data),_=Cr.find(u,o[w].location),j=Eu(Cu(_.content));{for(var k=0;k<j.length&&j[k].id!=w;++k);if(j[k].id!=w)throw"Bad ColumnRowUIDMapArchive";var I=qn(j[k].messages[0].data);I[1]=[],I[2]=[],I[3]=[];for(var E=0;E<=n.e.c;++E){var N=[];N[1]=N[2]=[{type:0,data:Aa(E+420690)}],I[1].push({type:2,data:uo(N)}),I[2].push({type:0,data:Aa(E)}),I[3].push({type:0,data:Aa(E)})}I[4]=[],I[5]=[],I[6]=[];for(var B=0;B<=n.e.r;++B)N=[],N[1]=N[2]=[{type:0,data:Aa(B+726270)}],I[4].push({type:2,data:uo(N)}),I[5].push({type:0,data:Aa(B)}),I[6].push({type:0,data:Aa(B)});j[k].messages[0].data=uo(I)}_.content=Sx(Nx(j)),_.size=_.content.length,delete y[46];var R=qn(y[4][0].data);{R[7][0].data=Aa(n.e.r+1);var P=qn(R[1][0].data),D=Vo(P[2][0].data);_=Cr.find(u,o[D].location),j=Eu(Cu(_.content));{if(j[0].id!=D)throw"Bad HeaderStorageBucket";var L=qn(j[0].messages[0].data);for(B=0;B<s.length;++B){var M=qn(L[2][0].data);M[1][0].data=Aa(B),M[4][0].data=Aa(s[B].length),L[2][B]={type:L[2][0].type,data:uo(M)}}j[0].messages[0].data=uo(L)}_.content=Sx(Nx(j)),_.size=_.content.length;var J=Vo(R[2][0].data);_=Cr.find(u,o[J].location),j=Eu(Cu(_.content));{if(j[0].id!=J)throw"Bad HeaderStorageBucket";for(L=qn(j[0].messages[0].data),E=0;E<=n.e.c;++E)M=qn(L[2][0].data),M[1][0].data=Aa(E),M[4][0].data=Aa(n.e.r+1),L[2][E]={type:L[2][0].type,data:uo(M)};j[0].messages[0].data=uo(L)}_.content=Sx(Nx(j)),_.size=_.content.length;var H=Vo(R[4][0].data);(function(){for(var z=Cr.find(u,o[H].location),Y=Eu(Cu(z.content)),te,ae=0;ae<Y.length;++ae){var le=Y[ae];le.id==H&&(te=le)}var ie=qn(te.messages[0].data);{ie[3]=[];var ce=[];i.forEach(function(ne,_e){ce[1]=[{type:0,data:Aa(_e)}],ce[2]=[{type:0,data:Aa(1)}],ce[3]=[{type:2,data:Sqe(ne)}],ie[3].push({type:2,data:uo(ce)})})}te.messages[0].data=uo(ie);var pe=Nx(Y),Be=Sx(pe);z.content=Be,z.size=z.content.length})();var K=qn(R[3][0].data);{var V=K[1][0];delete K[2];var G=qn(V.data);{var X=Vo(G[2][0].data);(function(){for(var z=Cr.find(u,o[X].location),Y=Eu(Cu(z.content)),te,ae=0;ae<Y.length;++ae){var le=Y[ae];le.id==X&&(te=le)}var ie=qn(te.messages[0].data);{delete ie[6],delete K[7];var ce=new Uint8Array(ie[5][0].data);ie[5]=[];for(var pe=0,Be=0;Be<=n.e.r;++Be){var ne=qn(ce);pe+=Qqe(ne,s[Be],i),ne[1][0].data=Aa(Be),ie[5].push({data:uo(ne),type:2})}ie[1]=[{type:0,data:Aa(n.e.c+1)}],ie[2]=[{type:0,data:Aa(n.e.r+1)}],ie[3]=[{type:0,data:Aa(pe)}],ie[4]=[{type:0,data:Aa(n.e.r+1)}]}te.messages[0].data=uo(ie);var _e=Nx(Y),De=Sx(_e);z.content=De,z.size=z.content.length})()}V.data=uo(G)}R[3][0].data=uo(K)}y[4][0].data=uo(R)}p.messages[0].data=uo(y);var ee=Nx(h),F=Sx(ee);return f.content=F,f.size=f.content.length,u}function sle(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function CL(e){sle([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function _L(e){sle([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function Vqe(e){return En.WS.indexOf(e)>-1?"sheet":e==En.CS?"chart":e==En.DS?"dialog":e==En.MS?"macro":e&&e.length?e:"sheet"}function zqe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,Vqe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function $qe(e,t,r,n,a,s,i,o,c,u,d,f){try{s[n]=ow(Dc(e,r,!0),t);var h=oi(e,t),p;switch(o){case"sheet":p=fKe(h,t,a,c,s[n],u,d,f);break;case"chart":if(p=hKe(h,t,a,c,s[n],u,d,f),!p||!p["!drawel"])break;var g=Iy(p["!drawel"].Target,t),x=Zw(g),b=eVe(Dc(e,g,!0),ow(Dc(e,x,!0),g)),y=Iy(b,g),w=Zw(y);p=QGe(Dc(e,y,!0),y,c,ow(Dc(e,w,!0),y),u,p);break;case"macro":p=mKe(h,t,a,c,s[n],u,d,f);break;case"dialog":p=pKe(h,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var _=[];s&&s[n]&&Ts(s[n]).forEach(function(j){var k="";if(s[n][j].Type==En.CMNT){k=Iy(s[n][j].Target,t);var I=bKe(oi(e,k,!0),k,c);if(!I||!I.length)return;UK(p,I,!1)}s[n][j].Type==En.TCMNT&&(k=Iy(s[n][j].Target,t),_=_.concat(rVe(oi(e,k,!0),c)))}),_&&_.length&&UK(p,_,!0,c.people||[])}catch(j){if(c.WTF)throw j}}function vu(e){return e.charAt(0)=="/"?e.slice(1):e}function Gqe(e,t){if(eb(),t=t||{},CL(t),_u(e,"META-INF/manifest.xml")||_u(e,"objectdata.xml"))return YK(e,t);if(_u(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof rI<"u"){if(e.FileIndex)return rI(e);var r=Cr.utils.cfb_new();return oK(e).forEach(function(M){cn(r,M,nUe(e,M))}),rI(r)}throw new Error("Unsupported NUMBERS file")}if(!_u(e,"[Content_Types].xml"))throw _u(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):_u(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=oK(e),a=XUe(Dc(e,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",oi(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!oi(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(lw=[],a.sst)try{lw=vKe(oi(e,vu(a.sst)),a.sst,t)}catch(M){if(t.WTF)throw M}t.cellStyles&&a.themes.length&&(c=xKe(Dc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=gKe(oi(e,vu(a.style)),a.style,c,t))}a.links.map(function(M){try{var J=ow(Dc(e,Zw(vu(M))),M);return wKe(oi(e,vu(M)),J,M,t)}catch{}});var d=AKe(oi(e,vu(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=oi(e,vu(a.coreprops[0]),!0),h&&(f=Kie(h)),a.extprops.length!==0&&(h=oi(e,vu(a.extprops[0]),!0),h&&n7e(h,f,t)));var p={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Dc(e,vu(a.custprops[0]),!0),h&&(p=s7e(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(J){return J.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=p),t.bookSheets&&typeof i<"u"&&(g.SheetNames=i),t.bookSheets?g.SheetNames:t.bookProps))return g;i={};var x={};t.bookDeps&&a.calcchain&&(x=yKe(oi(e,vu(a.calcchain)),a.calcchain));var b=0,y={},w,_;{var j=d.Sheets;f.Worksheets=j.length,f.SheetNames=[];for(var k=0;k!=j.length;++k)f.SheetNames[k]=j[k].name}var I=s?"bin":"xml",E=a.workbooks[0].lastIndexOf("/"),N=(a.workbooks[0].slice(0,E+1)+"_rels/"+a.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");_u(e,N)||(N="xl/_rels/workbook."+I+".rels");var B=ow(Dc(e,N,!0),N.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=EKe(oi(e,vu(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=aVe(oi(e,vu(a.people[0])),t)),B&&(B=zqe(B,d.Sheets));var R=oi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var P="sheet";if(B&&B[b]?(w="xl/"+B[b][1].replace(/[\/]?xl\//,""),_u(e,w)||(w=B[b][1]),_u(e,w)||(w=N.replace(/_rels\/.*$/,"")+B[b][1]),P=B[b][2]):(w="xl/worksheets/sheet"+(b+1-R)+"."+I,w=w.replace(/sheet0\./,"sheet.")),_=w.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var D=!1,L=0;L!=t.sheets.length;++L)typeof t.sheets[L]=="number"&&t.sheets[L]==b&&(D=1),typeof t.sheets[L]=="string"&&t.sheets[L].toLowerCase()==f.SheetNames[b].toLowerCase()&&(D=1);if(!D)continue e}}$qe(e,w,_,f.SheetNames[b],b,y,i,P,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:p,Deps:x,Sheets:i,SheetNames:f.SheetNames,Strings:lw,Styles:u,Themes:c,SSF:Ha(Rr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(M,J){M=M.replace(/^Root Entry[\/]/,""),g.keys.push(M),g.files[M]=e.FileIndex[J]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=oi(e,vu(a.vba[0]),!0):a.defaults&&a.defaults.bin===AVe&&(g.vbaraw=oi(e,"xl/vbaProject.bin",!0))),g}function Kqe(e,t){var r=t||{},n="Workbook",a=Cr.find(e,n);try{if(n="/!DataSpaces/Version",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(EQe(a.content),n="/!DataSpaces/DataSpaceMap",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=_Qe(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=NQe(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);kQe(a.content)}catch{}if(n="/EncryptionInfo",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=BQe(a.content);if(n="/EncryptedPackage",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function qqe(e,t){return t.bookType=="ods"?ale(e,t):t.bookType=="numbers"?Hqe(e,t):t.bookType=="xlsb"?Wqe(e,t):Xqe(e,t)}function Wqe(e,t){ov=1024,e&&!e.SSF&&(e.SSF=Ha(Rr)),e&&e.SSF&&(eb(),fk(e.SSF),t.revssf=mk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=Ioe.indexOf(t.bookType)>-1,a=uL();_L(t=t||{});var s=X8(),i="",o=0;if(t.cellXfs=[],zm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",cn(s,i,qie(e.Props,t)),a.coreprops.push(i),fa(t.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,cn(s,i,Yie(e.Props)),a.extprops.push(i),fa(t.rels,3,i,En.EXT_PROPS),e.Custprops!==e.Props&&Ts(e.Custprops||{}).length>0&&(i="docProps/custom.xml",cn(s,i,Jie(e.Custprops)),a.custprops.push(i),fa(t.rels,4,i,En.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,cn(s,i,_Ke(o-1,i,t,e,d)),a.sheets.push(i),fa(t.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(f){var p=f["!comments"],g=!1,x="";p&&p.length>0&&(x="xl/comments"+o+"."+r,cn(s,x,kKe(p,x)),a.comments.push(x),fa(d,-1,"../comments"+o+"."+r,En.CMNT),g=!0),f["!legacy"]&&g&&cn(s,"xl/drawings/vmlDrawing"+o+".vml",Toe(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&cn(s,Zw(i),Bv(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,cn(s,i,SKe(t.Strings,i,t)),a.strs.push(i),fa(t.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,cn(s,i,CKe(e,i)),a.workbooks.push(i),fa(t.rels,1,i,En.WB),i="xl/theme/theme1.xml",cn(s,i,pL(e.Themes,t)),a.themes.push(i),fa(t.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,cn(s,i,NKe(e,i,t)),a.styles.push(i),fa(t.wbrels,-1,"styles."+r,En.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",cn(s,i,e.vbaraw),a.vba.push(i),fa(t.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,cn(s,i,BKe(i)),a.metadata.push(i),fa(t.wbrels,-1,"metadata."+r,En.XLMETA),cn(s,"[Content_Types].xml",$ie(a,t)),cn(s,"_rels/.rels",Bv(t.rels)),cn(s,"xl/_rels/workbook."+r+".rels",Bv(t.wbrels)),delete t.revssf,delete t.ssf,s}function Xqe(e,t){ov=1024,e&&!e.SSF&&(e.SSF=Ha(Rr)),e&&e.SSF&&(eb(),fk(e.SSF),t.revssf=mk(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,cw?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=Ioe.indexOf(t.bookType)>-1,a=uL();_L(t=t||{});var s=X8(),i="",o=0;if(t.cellXfs=[],zm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",cn(s,i,qie(e.Props,t)),a.coreprops.push(i),fa(t.rels,2,i,En.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,cn(s,i,Yie(e.Props)),a.extprops.push(i),fa(t.rels,3,i,En.EXT_PROPS),e.Custprops!==e.Props&&Ts(e.Custprops||{}).length>0&&(i="docProps/custom.xml",cn(s,i,Jie(e.Custprops)),a.custprops.push(i),fa(t.rels,4,i,En.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,cn(s,i,Voe(o-1,t,e,f)),a.sheets.push(i),fa(t.wbrels,-1,"worksheets/sheet"+o+"."+r,En.WS[0])}if(h){var g=h["!comments"],x=!1,b="";if(g&&g.length>0){var y=!1;g.forEach(function(w){w[1].forEach(function(_){_.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+o+"."+r,cn(s,b,nVe(g,d,t)),a.threadedcomments.push(b),fa(f,-1,"../threadedComments/threadedComment"+o+"."+r,En.TCMNT)),b="xl/comments"+o+"."+r,cn(s,b,joe(g)),a.comments.push(b),fa(f,-1,"../comments"+o+"."+r,En.CMNT),x=!0}h["!legacy"]&&x&&cn(s,"xl/drawings/vmlDrawing"+o+".vml",Toe(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&cn(s,Zw(i),Bv(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,cn(s,i,xoe(t.Strings,t)),a.strs.push(i),fa(t.wbrels,-1,"sharedStrings."+r,En.SST)),i="xl/workbook."+r,cn(s,i,qoe(e)),a.workbooks.push(i),fa(t.rels,1,i,En.WB),i="xl/theme/theme1.xml",cn(s,i,pL(e.Themes,t)),a.themes.push(i),fa(t.wbrels,-1,"theme/theme1.xml",En.THEME),i="xl/styles."+r,cn(s,i,Noe(e,t)),a.styles.push(i),fa(t.wbrels,-1,"styles."+r,En.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",cn(s,i,e.vbaraw),a.vba.push(i),fa(t.wbrels,-1,"vbaProject.bin",En.VBA)),i="xl/metadata."+r,cn(s,i,Boe()),a.metadata.push(i),fa(t.wbrels,-1,"metadata."+r,En.XLMETA),d.length>1&&(i="xl/persons/person.xml",cn(s,i,sVe(d)),a.people.push(i),fa(t.wbrels,-1,"persons/person.xml",En.PEOPLE)),cn(s,"[Content_Types].xml",$ie(a,t)),cn(s,"_rels/.rels",Bv(t.rels)),cn(s,"xl/_rels/workbook."+r+".rels",Bv(t.wbrels)),delete t.revssf,delete t.ssf,s}function NL(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=zc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Yqe(e,t){return Cr.find(e,"EncryptedPackage")?Kqe(e,t):Joe(e,t)}function Jqe(e,t){var r,n=e,a=t||{};return a.type||(a.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r=bie(n,a),Gqe(r,a)}function ile(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return nO(e.slice(r),t);default:break e}return A1.to_workbook(e,t)}function Zqe(e,t){var r="",n=NL(e,t);switch(t.type){case"base64":r=zc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=gg(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ea(r)),t.type="binary",ile(r,t)}function eWe(e,t){var r=e;return t.type=="base64"&&(r=zc(r)),r=Kw.utils.decode(1200,r.slice(2),"str"),t.type="binary",ile(r,t)}function tWe(e){return e.match(/[^\x00-\x7F]/)?QA(e):e}function nI(e,t,r,n){return n?(r.type="string",A1.to_workbook(e,r)):A1.to_workbook(t,r)}function i2(e,t){$8();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return i2(new Uint8Array(e),(r=Ha(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),jv={},r.dateNF&&(jv.dateNF=r.dateNF),r.type||(r.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=pn?"buffer":"binary",n=WMe(e),typeof Uint8Array<"u"&&!pn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=tWe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Ha(r),r.type="array",i2(G8(n),r)}switch((a=NL(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return Yqe(Cr.read(n,r),r);break;case 9:if(a[1]<=8)return Joe(n,r);break;case 60:return nO(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return iQe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return poe.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?Jqe(n,r):nI(e,n,r,s);case 239:return a[3]===60?nO(n,r):nI(e,n,r,s);case 255:if(a[1]===254)return eWe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Yp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Yp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return rO.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return Eoe.to_workbook(n,r);break;case 10:case 13:case 32:return Zqe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return sQe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?rO.to_workbook(n,r):nI(e,n,r,s)}function ole(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Z2(t.file,Cr.write(e,{type:pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Cr.write(e,t)}function rWe(e,t){var r=Ha(t||{}),n=qqe(e,r);return nWe(n,r)}function nWe(e,t){var r={},n=pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Cr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(Ak(a))}return t.password&&typeof encrypt_agile<"u"?ole(encrypt_agile(a,t.password),t):t.type==="file"?Z2(t.file,a):t.type=="string"?Ea(a):a}function aWe(e,t){var r=t||{},n=tqe(e,r);return ole(n,r)}function kA(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return qw(QA(n));case"binary":return QA(n);case"string":return e;case"file":return Z2(t.file,n,"utf8");case"buffer":return pn?Ph(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):kA(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function sWe(e,t){switch(t.type){case"base64":return qw(e);case"binary":return e;case"string":return e;case"file":return Z2(t.file,e,"binary");case"buffer":return pn?Ph(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function n_(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?qw(r):t.type=="string"?Ea(r):r;case"file":return Z2(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function lle(e,t){$8(),YGe(e);var r=Ha(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=lle(e,r);return r.type="array",Ak(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return kA(qKe(e,r),r);case"slk":case"sylk":return kA(moe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return kA(ele(e.Sheets[e.SheetNames[a]],r),r);case"txt":return sWe(cle(e.Sheets[e.SheetNames[a]],r),r);case"csv":return kA(kL(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return kA(poe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return n_(rO.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return kA(A1.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return kA(Eoe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return kA(goe.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return kA(ale(e,r),r);case"wk1":return n_(Yp.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return n_(Yp.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),n_(Zoe(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),aWe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return rWe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function iWe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function SL(e,t,r){var n={};return n.type="file",n.file=t,iWe(n),lle(e,n)}function oWe(e,t,r,n,a,s,i,o){var c=qs(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var g=i?e[r][p]:e[n[p]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[p]!=null&&(h[s[p]]=u);continue}var x=g.v;switch(g.t){case"z":if(x==null)break;continue;case"e":x=x==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[p]!=null){if(x==null)if(g.t=="e"&&x===null)h[s[p]]=null;else if(u!==void 0)h[s[p]]=u;else if(d&&x===null)h[s[p]]=null;else continue;else h[s[p]]=d&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?x:_h(g,x,o);x!=null&&(f=!1)}}return{row:h,isempty:f}}function aS(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Qn(d);break;case"number":c=Qn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=qs(c.s.r),h=[],p=[],g=0,x=0,b=Array.isArray(e),y=c.s.r,w=0,_={};b&&!e[y]&&(e[y]=[]);var j=u.skipHidden&&e["!cols"]||[],k=u.skipHidden&&e["!rows"]||[];for(w=c.s.c;w<=c.e.c;++w)if(!(j[w]||{}).hidden)switch(h[w]=is(w),r=b?e[y][w]:e[h[w]+f],n){case 1:s[w]=w-c.s.c;break;case 2:s[w]=h[w];break;case 3:s[w]=u.header[w-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=_h(r,null,u),x=_[i]||0,!x)_[i]=1;else{do o=i+"_"+x++;while(_[o]);_[i]=x,_[o]=1}s[w]=o}for(y=c.s.r+a;y<=c.e.r;++y)if(!(k[y]||{}).hidden){var I=oWe(e,c,y,h,n,s,b,u);(I.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[g++]=I.row)}return p.length=g,p}var rq=/"/g;function lWe(e,t,r,n,a,s,i,o){for(var c=!0,u=[],d="",f=qs(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=o.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:_h(p,null,o));for(var g=0,x=0;g!==d.length;++g)if((x=d.charCodeAt(g))===a||x===s||x===34||o.forceQuotes){d='"'+d.replace(rq,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(rq,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(i)}function kL(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Qn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=is(g));for(var x=0,b=a.s.r;b<=a.e.r;++b)(p[b]||{}).hidden||(d=lWe(e,a,b,f,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((x++?o:"")+d)));return delete n.dense,r.join("")}function cle(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=kL(e,t);return r}function cWe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Qn(e["!ref"]),s="",i=[],o,c=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)i[o]=is(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=qs(d),o=a.s.c;o<=a.e.c;++o)if(t=i[o]+s,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function ule(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?os(n.origin):n.origin;i=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+a}};if(s["!ref"]){var f=Qn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var h=n.header||[],p=0;t.forEach(function(x,b){Ts(x).forEach(function(y){(p=h.indexOf(y))==-1&&(h[p=h.length]=y);var w=x[y],_="z",j="",k=Ur({c:o+p,r:i+b+a});u=o2(s,k),w&&typeof w=="object"&&!(w instanceof Date)?s[k]=w:(typeof w=="number"?_="n":typeof w=="boolean"?_="b":typeof w=="string"?_="s":w instanceof Date?(_="d",n.cellDates||(_="n",w=Si(w)),j=n.dateNF||Rr[14]):w===null&&n.nullError&&(_="e",w=0),u?(u.t=_,u.v=w,delete u.w,delete u.R,j&&(u.z=j)):s[k]=u={t:_,v:w},j&&(u.z=j))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var g=qs(i);if(a)for(p=0;p<h.length;++p)s[is(p+o)+g]={t:"s",v:h[p]};return s["!ref"]=rn(d),s}function uWe(e,t){return ule(null,e,t)}function o2(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=os(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?o2(e,Ur(t)):o2(e,Ur({r:t,c:r||0}))}function dWe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function BL(){return{SheetNames:[],Sheets:{}}}function TL(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Koe(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function AWe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=dWe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function fWe(e,t){return e.z=t,e}function dle(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function hWe(e,t,r){return dle(e,"#"+t,r)}function mWe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function pWe(e,t,r,n){for(var a=typeof t!="string"?t:Qn(t),s=typeof t=="string"?t:rn(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var c=o2(e,i,o);c.t="n",c.F=s,delete c.v,i==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Fu={encode_col:is,encode_row:qs,encode_cell:Ur,encode_range:rn,decode_col:aL,decode_row:nL,split_cell:SUe,decode_cell:os,decode_range:rc,format_cell:_h,sheet_add_aoa:Lie,sheet_add_json:ule,sheet_add_dom:tle,aoa_to_sheet:tb,json_to_sheet:uWe,table_to_sheet:rle,table_to_book:Eqe,sheet_to_csv:kL,sheet_to_txt:cle,sheet_to_json:aS,sheet_to_html:ele,sheet_to_formulae:cWe,sheet_to_row_object_array:aS,sheet_get_cell:o2,book_new:BL,book_append_sheet:TL,book_set_sheet_visibility:AWe,cell_set_number_format:fWe,cell_set_hyperlink:dle,cell_set_internal_link:hWe,cell_add_comment:mWe,sheet_set_array_formula:pWe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const gWe=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=Nt(xn,c),d=await ga(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(p=>{const g=p.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a coleccin ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const i=[];try{const c=Nt(xn,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=zt(c,Yr("timestamp",">=",u.toISOString()),_r("timestamp","desc")),f=await ga(d),h={};f.docs.forEach(p=>{const g=p.data(),x=new Date(g.timestamp).toLocaleDateString("es-CL");h[x]=(h[x]||0)+1}),Object.entries(h).sort(([p],[g])=>new Date(p).getTime()-new Date(g).getTime()).forEach(([p,g])=>{i.push({label:p,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadsticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},nq=500,kx=({title:e,value:t,description:r,alert:n})=>l.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),l.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),aI=({title:e,data:t,colorClass:r})=>{const n=S.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),l.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},xWe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),[a,s]=S.useState(null),[i,o]=S.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});S.useEffect(()=>{n(!0);const f=c8e(g=>{t(g),n(!1)}),h=async()=>{try{const g=await gWe();o(g)}catch(g){console.error("Error al cargar estadsticas de Firestore:",g)}};h();const p=setInterval(h,300*1e3);return()=>{f(),clearInterval(p)}},[]);const{stats:c,userStats:u,moduleStats:d}=S.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),p=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),x={today:0,week:0,month:0},b={},y={};e.forEach(j=>{const k=new Date(j.timestamp).getTime();k>=h&&x.today++,k>=p&&x.week++,k>=g&&x.month++;const I=j.userEmail||"Desconocido";b[I]||(b[I]={email:I,today:0,month:0,total:0}),b[I].total++,k>=h&&b[I].today++,k>=g&&b[I].month++,y[j.module]=(y[j.module]||0)+1});const w=Object.values(b).sort((j,k)=>k.total-j.total),_=Object.entries(y).map(([j,k])=>({label:j,value:k})).sort((j,k)=>k.value-j.value);return{stats:x,userStats:w,moduleStats:_}},[e]);return l.jsxs("div",{className:"space-y-8",children:[a&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadsticas..."}),!r&&e.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsx(kx,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Lmite recomendado: ${nq}`,alert:c.today>nq}),l.jsx(kx,{title:"Llamadas esta Semana",value:r?"--":c.week}),l.jsx(kx,{title:"Llamadas este Mes",value:r?"--":c.month})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(aI,{title:"Uso por Mdulo",data:d,colorClass:"bg-sky-500"}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),l.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadsticas de uso de Firestore (simuladas)."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(kx,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),l.jsx(kx,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),l.jsx(kx,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(aI,{title:"Actividad por Coleccin",data:i.collectionsActivity,colorClass:"bg-green-500"}),l.jsx(aI,{title:"Actividad Diaria (ltimos 7 das)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vWe="type.googleapis.com/google.protobuf.Int64Value",bWe="type.googleapis.com/google.protobuf.UInt64Value";function Ale(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function sS(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>sS(t));if(typeof e=="function"||typeof e=="object")return Ale(e,t=>sS(t));throw new Error("Data cannot be encoded in JSON: "+e)}function h1(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case vWe:case bWe:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>h1(t)):typeof e=="function"||typeof e=="object"?Ale(e,t=>h1(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aq={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yl extends Md{constructor(t,r,n){super(`${jL}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,Yl.prototype)}}function yWe(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function iS(e,t){let r=yWe(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!aq[i])return new Yl("internal","internal");r=aq[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=h1(a))}}catch{}return r==="ok"?null:new Yl(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wWe{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,jc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="us-central1",EWe=/^data: (.*?)(?:\n|$)/;function CWe(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new Yl("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class _We{constructor(t,r,n,a,s=iO,i=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new wWe(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=iO}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function NWe(e,t,r){const n=Bh(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(US(e.emulatorOrigin),QS("Functions",!0))}function SWe(e,t,r){const n=a=>BWe(e,t,a,{});return n.stream=(a,s)=>jWe(e,t,a,s),n}async function kWe(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function fle(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function BWe(e,t,r,n){const a=e._url(t);return TWe(e,a,r,n)}async function TWe(e,t,r,n){r=sS(r);const a={data:r},s=await fle(e,n),i=n.timeout||7e4,o=CWe(i),c=await Promise.race([kWe(t,a,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!c)throw new Yl("cancelled","Firebase Functions instance was deleted.");const u=iS(c.status,c.json);if(u)throw u;if(!c.json)throw new Yl("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new Yl("internal","Response is missing data field.");return{data:h1(d)}}function jWe(e,t,r,n){const a=e._url(t);return IWe(e,a,r,n||{})}async function IWe(e,t,r,n){var h;r=sS(r);const a={data:r},s=await fle(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const x=new Yl("cancelled","Request was cancelled.");return{data:Promise.reject(x),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(x)}}}}}}const g=iS(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let o,c;const u=new Promise((p,g)=>{o=p,c=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const p=new Yl("cancelled","Request was cancelled.");c(p)});const d=i.body.getReader(),f=FWe(d,o,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const p=f.getReader();return{async next(){const{value:g,done:x}=await p.read();return{value:g,done:x}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:u}}function FWe(e,t,r,n){const a=(i,o)=>{const c=i.match(EWe);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(h1(d.result));return}if("message"in d){o.enqueue(h1(d.message));return}if("error"in d){const f=iS(0,d);o.error(f),r(f);return}}catch(d){if(d instanceof Yl){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return c();async function c(){if(n!=null&&n.aborted){const u=new Yl("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const h=new Yl("cancelled","Request was cancelled");i.error(h),r(h),await e.cancel();return}o+=s.decode(u,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),i);return c()}catch(u){const d=u instanceof Yl?u:iS(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const sq="@firebase/functions",iq="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OWe="auth-internal",DWe="app-check-internal",PWe="messaging-internal";function RWe(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(OWe),i=r.getProvider(PWe),o=r.getProvider(DWe);return new _We(a,s,i,o,n)};Am(new Ah(jL,t,"PUBLIC").setMultipleInstances(!0)),Ru(sq,iq,e),Ru(sq,iq,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(e=HS(),t=iO){const n=b2(Xn(e),jL).getImmediate({identifier:t}),a=dD("functions");return a&&LWe(n,...a),n}function LWe(e,t,r){NWe(Xn(e),t,r)}function Bx(e,t,r){return SWe(Xn(e),t)}RWe();const oq=Nt(xn,"usuarios");async function hle(){try{console.log(" [DEBUG] Obteniendo usuarios de Firestore..."),console.log(" [DEBUG] Collection ref:",oq);const e=await ga(oq);if(console.log(` [DEBUG] Encontrados ${e.docs.length} documentos en la coleccin usuarios`),e.empty)return console.log("  [DEBUG] La coleccin usuarios est vaca"),[];const t=e.docs.map(r=>{const n=r.data();return console.log(" [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log(" [DEBUG] Usuarios procesados correctamente:",t.length),console.log(" [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error(" [DEBUG] Error al obtener usuarios:",e),console.error(" [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const lq=Object.values(qt),sI=e=>e?e.trim().toLowerCase().replace(//g,"").replace(/\s+(medio|bsico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1").replace(/^(\d)(?![])/,"$1").replace(/\s+/g,"").toUpperCase():"",MWe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!1),[a,s]=S.useState("Usuarios"),[i,o]=S.useState({nombreCompleto:"",email:"",rut:"",profile:qt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=S.useState(null),[d,f]=S.useState(""),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState(null),[w,_]=S.useState(null),[j,k]=S.useState(null),I=S.useCallback(async()=>{n(!0);try{const V=await hle();t(V)}catch(V){console.error("Error al cargar usuarios",V),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);S.useEffect(()=>{I()},[I]);const E=S.useCallback(V=>{const{name:G,value:X}=V.target;o(ee=>({...ee,[G]:X,curso:G==="profile"&&X!==qt.ESTUDIANTE?"":ee.curso,cursos:G==="profile"&&X!==qt.PROFESORADO?[]:ee.cursos,asignaturas:G==="profile"&&X!==qt.PROFESORADO?[]:ee.asignaturas}))},[]),N=S.useCallback((V,G)=>{o(X=>{const ee=X[V]||[],F=ee.includes(G)?ee.filter(z=>z!==G):[...ee,G];return{...X,[V]:F}})},[]),B=S.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:qt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),R=S.useCallback(async V=>{V.preventDefault(),y(null);const{nombreCompleto:G,email:X,profile:ee,curso:F,password:z}=i;if(!G.trim()||!X.trim()){y("Nombre Completo y Email son obligatorios.");return}if(ee===qt.ESTUDIANTE&&!F){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(z!=null&&z.trim())){y("La contrasea es obligatoria al crear un nuevo usuario.");return}const Y=sy();try{if(c){const te=Bx(Y,"updateUser"),ae={...i,password:(z==null?void 0:z.trim())||void 0,curso:ee===qt.ESTUDIANTE?sI(F||""):void 0};await te(ae)}else{const te=Bx(Y,"createUser"),ae={...i,curso:ee===qt.ESTUDIANTE?sI(F||""):void 0};await te(ae)}await I(),B()}catch(te){console.error("Error al guardar usuario:",te),y(te.message||"Error al guardar el usuario.")}},[i,c,I,B]),P=S.useCallback(V=>{u(V.email),o({nombreCompleto:V.nombreCompleto,email:V.email,rut:V.rut||"",profile:V.profile,password:"",curso:V.curso||"",cursos:V.cursos||[],asignaturas:V.asignaturas||[]}),setTimeout(()=>{const G=document.querySelector("form");G&&G.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),D=S.useCallback(async V=>{if(window.confirm(`Est seguro de que desea eliminar al usuario ${V}? Esta accin es irreversible.`))try{const G=sy();await Bx(G,"deleteUser")({email:V}),await I()}catch(G){console.error("Error al eliminar usuario:",G),y(G.message||"No se pudo borrar el usuario.")}},[I]),L=async V=>{var z;const G=(z=V.target.files)==null?void 0:z[0];if(!G)return;_({message:"Procesando archivo...",isError:!1});const X=sy(),ee=Bx(X,"createUser"),F=new FileReader;F.onload=async Y=>{var te;try{const ae=new Uint8Array((te=Y.target)==null?void 0:te.result),le=i2(ae,{type:"array"}),ie=le.Sheets[le.SheetNames[0]],ce=Fu.sheet_to_json(ie);if(ce.length===0){_({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const pe=ce.map(Se=>{const fe=Se.Nombre||Se.nombre,Ie=Se.Correo||Se.correo||Se.Email||Se.email,Ue=Se.Curso||Se.curso,Ye=Se.RUT||Se.rut;return!fe||!Ie||!Ue?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ee({nombreCompleto:String(fe).trim(),email:String(Ie).trim(),profile:qt.ESTUDIANTE,curso:sI(String(Ue).trim()),rut:Ye?String(Ye).trim():"",password:"recoleta"}).catch(ye=>({email:Ie,error:ye.message}))}),Be=await Promise.all(pe),ne=Be.filter(Se=>!Se.error).length,_e=Be.filter(Se=>Se.error);let De=`Carga completada. ${ne} estudiantes agregados.`;_e.length>0&&(De+=` ${_e.length} fallaron.`,console.error("Errores en carga masiva:",_e)),_({message:De,isError:_e.length>0}),await I()}catch(ae){_({message:`Error: ${ae.message}`,isError:!0})}},F.readAsArrayBuffer(G),V.target.value=""},M=async V=>{var z;const G=(z=V.target.files)==null?void 0:z[0];if(!G)return;k({message:"Procesando archivo...",isError:!1});const X=sy(),ee=Bx(X,"createUser"),F=new FileReader;F.onload=async Y=>{var te;try{const ae=new Uint8Array((te=Y.target)==null?void 0:te.result),le=i2(ae,{type:"array"}),ie=le.Sheets[le.SheetNames[0]],ce=Fu.sheet_to_json(ie);if(ce.length===0){k({message:"El archivo est vaco o no tiene el formato correcto.",isError:!0});return}const pe=ce.map(Se=>{const fe=Se.Nombre||Se.nombre,Ie=Se.Correo||Se.correo||Se.Email||Se.email,Ue=Se.Perfil||Se.perfil||Se.Profile||Se.profile,Ye=Se.RUT||Se.rut;return!fe||!Ie||!Ue?Promise.resolve({email:Ie||"Sin email",error:"Datos incompletos"}):ee({nombreCompleto:String(fe).trim(),email:String(Ie).trim(),profile:Ue,rut:Ye?String(Ye).trim():"",password:"recoleta"}).catch(ye=>({email:Ie,error:ye.message}))}),Be=await Promise.all(pe),ne=Be.filter(Se=>!Se.error).length,_e=Be.filter(Se=>Se.error);let De=`Carga completada. ${ne} usuarios agregados.`;_e.length>0&&(De+=` ${_e.length} fallaron.`,console.error("Errores en carga masiva:",_e)),k({message:De,isError:_e.length>0}),await I()}catch(ae){k({message:`Error: ${ae.message}`,isError:!0})}},F.readAsArrayBuffer(G),V.target.value=""},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",H=S.useMemo(()=>Array.from(new Set(e.filter(V=>V.profile===qt.ESTUDIANTE&&V.curso).map(V=>V.curso))).sort(),[e]),K=S.useMemo(()=>e.filter(V=>(d===""||V.nombreCompleto.toLowerCase().includes(d.toLowerCase())||V.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||V.profile===h)&&(g===""||V.curso===g)),[e,d,h,g]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administracin"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestin de Usuarios"}),l.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:L,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),w&&l.jsx("p",{className:`text-sm mt-2 ${w.isError?"text-red-600":"text-green-600"}`,children:w.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:M,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),j&&l.jsx("p",{className:`text-sm mt-2 ${j.isError?"text-red-600":"text-green-600"}`,children:j.message})]})]})]}),l.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),l.jsxs("form",{onSubmit:R,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:E,className:J,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:E,className:J,required:!0,readOnly:!!c})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contrasea"}),l.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:E,placeholder:c?"Dejar en blanco para no cambiar":"Contrasea temporal",className:J})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),l.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:E,placeholder:"12.345.678-9",className:J})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),l.jsx("select",{name:"profile",value:i.profile,onChange:E,className:J,required:!0,children:lq.map(V=>l.jsx("option",{value:V,children:V},V))})]}),i.profile===qt.ESTUDIANTE&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:i.curso,onChange:E,className:J,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(V=>l.jsx("option",{value:V,children:V},V))]})]})]}),i.profile===qt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Cursos"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:Ks.map(V=>{var G;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[l.jsx("input",{type:"checkbox",checked:((G=i.cursos)==null?void 0:G.includes(V))||!1,onChange:()=>N("cursos",V),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),i.profile===qt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:""}),"Asignacin de Asignaturas"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:qi.map(V=>{var G;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[l.jsx("input",{type:"checkbox",checked:((G=i.asignaturas)==null?void 0:G.includes(V))||!1,onChange:()=>N("asignaturas",V),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),b&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),l.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&l.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:async()=>{try{console.log(" Agregando custom claim...");const V=sy(),X=await Bx(V,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log(" Custom claim agregado:",X),y(" Custom claim agregado exitosamente")}catch(V){console.error(" Error al agregar custom claim:",V),y(`Error: ${V.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:" Claim"}),l.jsx("button",{type:"button",onClick:async()=>{var V,G,X,ee,F;try{const{auth:z}=await u1(async()=>{const{auth:ae}=await Promise.resolve().then(()=>lee);return{auth:ae}},void 0);console.log(" Usuario actual:",(V=z.currentUser)==null?void 0:V.email);const Y=await((G=z.currentUser)==null?void 0:G.getIdToken(!0));console.log(" Token refreshed:",!!Y);const te=await((X=z.currentUser)==null?void 0:X.getIdTokenResult());console.log(" Claims completos:",te==null?void 0:te.claims),console.log(" Profile claim:",(ee=te==null?void 0:te.claims)==null?void 0:ee.profile),((F=te==null?void 0:te.claims)==null?void 0:F.profile)==="SUBDIRECCION"?y(" Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(` Custom claim faltante. Claims: ${JSON.stringify(te==null?void 0:te.claims)}`)}catch(z){console.error(" Error verificando token:",z),y(`Error verificando token: ${z.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:" Token"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsx("div",{children:l.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:V=>f(V.target.value),className:J})}),l.jsx("div",{children:l.jsxs("select",{value:h,onChange:V=>p(V.target.value),className:J,children:[l.jsx("option",{value:"",children:"Todos los perfiles"}),lq.map(V=>l.jsx("option",{value:V,children:V},V))]})}),l.jsx("div",{children:l.jsxs("select",{value:g,onChange:V=>x(V.target.value),className:J,children:[l.jsx("option",{value:"",children:"Todos los cursos"}),H.map(V=>l.jsx("option",{value:V,children:V},V))]})})]}),r?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:K.map(V=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:V.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:V.email}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.profile===qt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":V.profile===qt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:V.profile})}),l.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[V.profile===qt.ESTUDIANTE&&l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:V.curso||"Sin curso"}),V.profile===qt.PROFESORADO&&l.jsxs("div",{className:"space-y-1",children:[V.cursos&&V.cursos.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.cursos.slice(0,3).map(G=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:G},G)),V.cursos.length>3&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.cursos.length-3]})]})]}),V.asignaturas&&V.asignaturas.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.asignaturas.slice(0,2).map(G=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:G},G)),V.asignaturas.length>2&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.asignaturas.length-2]})]})]}),(!V.cursos||V.cursos.length===0)&&(!V.asignaturas||V.asignaturas.length===0)&&l.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),V.profile!==qt.ESTUDIANTE&&V.profile!==qt.PROFESORADO&&l.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[l.jsx("button",{onClick:()=>P(V),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:""}),l.jsx("button",{onClick:()=>D(V.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:""})]})]},V.email))})]}),K.length===0&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&l.jsx(xWe,{})]})},m1="seguimiento_dual_records",UWe=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},QWe=e=>{const t=zt(Nt(ft,m1),_r("nombreEstudiante","asc"));return mr(t,n=>{const a=n.docs.map(s=>UWe(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},oS=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=sr.fromDate(new Date(t[n]+"T00:00:00")))}),t},HWe=async e=>{try{const t=oS(e);return(await Tn(Nt(ft,m1),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},cq=async(e,t)=>{try{const r=dr(ft,m1,e),n=oS(t);await Ji(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},VWe=async e=>{try{const t=dr(ft,m1,e);await za(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},zWe=async e=>{const t=Bg(ft),r=Nt(ft,m1);let n=0,a=0;for(const s of e){const i=zt(r,Yr("rutEstudiante","==",s.rutEstudiante)),o=await ga(i);if(o.empty){const c=dr(r);t.set(c,oS(s)),a++}else{const c=o.docs[0].id,u=dr(ft,m1,c);t.set(u,oS(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},$We={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},GWe=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},KWe=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","s","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},qWe=({record:e,onSave:t,onClose:r})=>{const[n,a]=S.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=c=>{const{name:u,value:d,type:f,checked:h}=c.target;a(p=>({...p,[u]:f==="checkbox"?h:d}))},o=()=>{t(n)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisin"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),l.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),l.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),l.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisin"}),l.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisin"}),l.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisin Excepcional"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisin"}),l.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Gua (Empresa)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Gua"}),l.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Telfono)"}),l.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),l.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},WWe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState(!0),a=S.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Vp[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:DT[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=S.useState(a),[o,c]=S.useState(null),[u,d]=S.useState(""),[f,h]=S.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[p,g]=S.useState(null),[x,b]=S.useState(null),[y,w]=S.useState(!1),[_,j]=S.useState(null);S.useEffect(()=>{n(!0);const V=QWe(G=>{t(G),n(!1)});return()=>V()},[]);const k=S.useCallback(V=>{const{name:G,value:X}=V.target;i(ee=>({...ee,[G]:X}))},[]),I=S.useCallback(V=>{const{name:G,value:X}=V.target;h(ee=>({...ee,[G]:X}))},[]),E=S.useCallback(()=>{i(a),c(null),g(null)},[a]),N=async V=>{V.preventDefault(),g(null);const X=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ee=>{var F;return!((F=s[ee])!=null&&F.trim())});if(X){g(`El campo '${X}' es obligatorio.`);return}try{o?await cq(o,s):await HWe(s),E()}catch(ee){console.error(ee),g("No se pudo guardar el registro.")}},B=S.useCallback(V=>{window.scrollTo({top:0,behavior:"smooth"}),c(V.id),i(V)},[]),R=async V=>{if(window.confirm("Est seguro de que desea eliminar este registro?"))try{await VWe(V)}catch(G){console.error(G),g("No se pudo eliminar el registro.")}},P=V=>{j(V),w(!0)},D=()=>{j(null),w(!1)},L=async V=>{try{await cq(V.id,V),D()}catch(G){console.error(G),alert("No se pudieron guardar los cambios de supervisin.")}},M=()=>{const V=["Nombre","RUT","Curso 2025","Profesor Tutor","1 Visita 1 Semestre","Realizada 1 Visita S1","2 Visita 1 Semestre","Realizada 2 Visita S1","Visita Emergencia 1 Semestre","3 Visita","Realizada 3 Visita S2","4 Visita","Realizada 4 Visita S2","Empresa","RUT-Empresa","Direccin","Comuna","Estado","Fecha de Desvinculacin","Motivo Desvinculacin","Maestro Gua","Correo maestro gua"],G=Fu.aoa_to_sheet([V]),X=Fu.book_new();Fu.book_append_sheet(X,G,"Plantilla"),SL(X,"Plantilla_Seguimiento_Dual.xlsx")},J=V=>{var ee;const G=(ee=V.target.files)==null?void 0:ee[0];if(!G)return;b({message:"Procesando archivo...",isError:!1});const X=new FileReader;X.onload=async F=>{var z;try{const Y=new Uint8Array((z=F.target)==null?void 0:z.result),te=i2(Y,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ae=te.SheetNames[0],le=te.Sheets[ae],ie=Fu.sheet_to_json(le,{raw:!1,dateNF:"yyyy-mm-dd"});if(ie.length===0)throw new Error("El archivo est vaco.");const ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1 visita 1 semestre":"fecha1raSupervision1erSemestre","realizada 1 visita s1":"realizada1raSupervision1erSemestre","2 visita 1 semestre":"fecha2daSupervision1erSemestre","realizada 2 visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1 semestre":"fechaSupervisionExcepcional","3 visita":"fecha1raSupervision2doSemestre","realizada 3 visita s2":"realizada1raSupervision2doSemestre","4 visita":"fecha2daSupervision2doSemestre","realizada 4 visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",direccin:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculacin":"fechaDesvinculacion","motivo desvinculacin":"motivoDesvinculacion","maestro gua":"nombreMaestroGuia","correo maestro gua":"contactoMaestroGuia"},pe=Object.keys(ie[0]).map(De=>De.trim().toLowerCase()),ne=["nombre","rut","curso 2025","empresa","estado"].find(De=>!pe.includes(De));if(ne)throw new Error(`Falta la columna requerida: '${ne}'`);const _e=ie.map((De,Se)=>{try{const fe={};for(const Ie in De){const Ue=ce[Ie.trim().toLowerCase()];if(Ue){let Ye=De[Ie];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Ue)?(Ye=GWe(Ye),Ye&&(fe[Ue]=Ye)):Ue.includes("realizada")?fe[Ue]=KWe(Ye):Ye!=null&&Ye!==""&&(fe[Ue]=String(Ye).trim())}}return!fe.nombreEstudiante||!fe.rutEstudiante?(console.warn(`Fila ${Se+2}: Faltan campos requeridos`),null):fe}catch(fe){return console.error(`Error procesando fila ${Se+2}:`,fe),null}}).filter(De=>De!==null);if(console.log("Registros procesados:",_e),_e.length>0){const{updated:De,created:Se}=await zWe(_e);b({message:`Carga exitosa. ${Se} registros creados, ${De} actualizados.`,isError:!1})}else b({message:"No se encontraron registros vlidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(Y){console.error("Error completo:",Y),b({message:`Error al procesar el archivo: ${Y.message}. Verifique que las fechas estn en formato correcto.`,isError:!0})}},X.readAsArrayBuffer(G)},H="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",K=S.useMemo(()=>e.filter(V=>(u===""||V.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||V.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||V.rutEstudiante.includes(u))&&(f.curso===""||V.curso===f.curso)&&(f.empresa===""||V.nombreEmpresa===f.empresa)&&(f.estado===""||V.estado===f.estado)&&(f.comuna===""||V.comuna===f.comuna)&&(f.profesor===""||V.profesorTutorEmpresa===f.profesor)).sort((V,G)=>V.nombreEstudiante.localeCompare(G.nombreEstudiante)),[e,u,f]);return S.useMemo(()=>{const V=new Set,G=new Set;return e.forEach(X=>{X.nombreEmpresa&&V.add(X.nombreEmpresa),X.comuna&&G.add(X.comuna)}),{empresas:Array.from(V).sort(),comunas:Array.from(G).sort()}},[e]),r?l.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestin Pedaggica LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Prctica Dual"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en prctica."})]})]}),l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),l.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:k,className:H,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),l.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:k,className:H,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{name:"curso",value:s.curso,onChange:k,className:H,required:!0,children:Vp.map(V=>l.jsx("option",{value:V,children:V},V))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),l.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:k,className:H,children:[l.jsx("option",{value:"",children:"Seleccione un profesor"}),D6.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),l.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:k,className:H,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),l.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:k,className:H})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Direccin Empresa"}),l.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:k,className:H})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),l.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:k,className:H})]}),l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),l.jsx("select",{name:"estado",value:s.estado,onChange:k,className:H,children:DT.map(V=>l.jsx("option",{value:V,children:V},V))})]})]}),s.estado==="Desvinculado"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculacin"}),l.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:k,className:`${H} border-red-300`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculacin"}),l.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:k,className:`${H} border-red-300`})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:p}),l.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&l.jsx("button",{type:"button",onClick:E,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[l.jsx("button",{onClick:M,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),l.jsx("input",{type:"file",onChange:J,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),x&&l.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${x.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:x.message})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:V=>d(V.target.value),className:`${H} md:col-span-2 lg:col-span-1`}),l.jsxs("select",{name:"curso",value:f.curso,onChange:I,className:H,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Vp.map(V=>l.jsx("option",{children:V},V))]}),l.jsxs("select",{name:"estado",value:f.estado,onChange:I,className:H,children:[l.jsx("option",{value:"",children:"Todos los Estados"}),DT.map(V=>l.jsx("option",{children:V},V))]}),l.jsxs("select",{name:"profesor",value:f.profesor,onChange:I,className:H,children:[l.jsx("option",{value:"",children:"Todos los Profesores"}),D6.map(V=>l.jsx("option",{children:V},V))]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:K.map(V=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:V.nombreEstudiante}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:V.curso})]}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.nombreEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.profesorTutorEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${$We[V.estado]}`,children:V.estado})}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[l.jsx("button",{onClick:()=>P(V),className:"text-blue-600 hover:underline",children:"Supervisin"}),l.jsx("button",{onClick:()=>B(V),className:"text-yellow-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>R(V.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},V.id))})]})})]}),y&&_&&l.jsx(qWe,{record:_,onClose:D,onSave:L})]})},mle="actividades_remotas",ple="respuestas_actividades",gle="pruebas_estandarizadas",XWe="usuarios",xle=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},IL=e=>{const t=xle(e);return t?t.toISOString():void 0},lS=e=>{const t=xle(e);return t?t.toISOString().split("T")[0]:void 0},vle=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:sr.fromDate(t)},ble=e=>sr.fromDate(new Date(e||new Date().toISOString())),YWe=e=>!!e&&/^data:/.test(e),l2=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(l2);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=l2(n))}),t},JWe=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL invlida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const o=typeof Buffer<"u"?Buffer:null;if(o)a=o.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,i=new Uint8Array(s);for(let o=0;o<s;o++)i[o]=a.charCodeAt(o);return{bytes:i,contentType:r}},ZWe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:IL(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:lS(t.plazoEntrega)||lS(new Date)}},eXe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:IL(t.fechaCompletado)||new Date().toISOString()}},tXe=e=>{const t=e.data()||{};return{id:e.id,...t}},rXe=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:IL(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:lS(t.plazoEntrega)||lS(new Date)}},nXe=e=>{const t=zt(Nt(ft,mle),_r("fechaCreacion","desc"));return mr(t,r=>e(r.docs.map(ZWe)),r=>{console.error("subscribeToActividades error:",r),e([])})},aXe=(e,t)=>{const r=Nt(ft,ple),n=zt(r,_r("fechaCompletado","desc"));return mr(n,a=>e(a.docs.map(eXe)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},sXe=e=>{const t=zt(Nt(ft,XWe),_r("nombreCompleto","asc"));return mr(t,r=>e(r.docs.map(tXe)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},iXe=e=>{const t=zt(Nt(ft,gle),_r("fechaCreacion","desc"));return mr(t,r=>e(r.docs.map(rXe)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},oXe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=l2({...a,fechaCreacion:ble(r),plazoEntrega:vle(n)});return(await Tn(Nt(ft,mle),s)).id},lXe=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=l2({...a,fechaCreacion:ble(r),plazoEntrega:vle(n)});return(await Tn(Nt(ft,gle),s)).id},cXe=async(e,t)=>{const r=l2(t);await Vu(dr(ft,ple,e),r)},uXe=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},dXe=async(e,t,r)=>{const{bytes:n,contentType:a}=JWe(e),s=Date.now(),i=t.replace(/\s+/g,"_"),c=`recursos/${r!==""?r:"general"}/${s}/${i}`,u=x4(e2e,c);await iee(u,n,{contentType:a});const d=await hP(u);return{nombre:t,url:d}},AXe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(i,o)=>{if(YWe(i==null?void 0:i.url)){const c=(i==null?void 0:i.nombre)||`archivo_${o}.bin`;return dXe(i.url,c,t)}return{nombre:(i==null?void 0:i.nombre)||`archivo_${o}`,url:i==null?void 0:i.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return oXe(a)},iy=e=>e?new Date(e).toLocaleDateString("es-CL"):"",fXe=e=>e?new Date(e).toLocaleString("es-CL"):"",hXe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),yle=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(` OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},ii=(e,t)=>{if(t&&yle(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>ii(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rbrica de evaluacin]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Ql=(e,t,...r)=>{if(yle(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=ii(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},Ia=({content:e,context:t="unknown"})=>{try{const r=ii(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}},iI={Quiz:[5,10,15],"Trminos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensin de Lectura":[1,2,3,4,5]},oI=["Localizar informacin","Interpretar y relacionar","Reflexionar","Extraer informacin explcita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],mXe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState([]),[i,o]=S.useState([]),[c,u]=S.useState(null),[d,f]=S.useState(null),[h,p]=S.useState(!1),[g,x]=S.useState(!1),[b,y]=S.useState(!1),[w,_]=S.useState(!1),[j,k]=S.useState(!1),[I,E]=S.useState(!0),[N,B]=S.useState(null),[R,P]=S.useState(""),[D,L]=S.useState(null),[M,J]=S.useState(null),[H,K]=S.useState([]),[V,G]=S.useState("carpetas"),[X,ee]=S.useState(null),[F,z]=S.useState(null),[Y,te]=S.useState([]),[ae,le]=S.useState(""),ie={asignatura:qi[0],nivel:"",contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[ce,pe]=S.useState(ie),Be={asignatura:qi[0],nivel:"",contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[ne,_e]=S.useState(Be);S.useEffect(()=>{E(!0);const et=nXe(t),gt=iXe(n),Je=aXe(s),xt=sXe(wt=>{o(wt),E(!1)});return()=>{et(),gt(),Je(),xt()}},[]);const De=et=>{pe(gt=>({...gt,[et.target.name]:et.target.value}))},Se=et=>{_e(gt=>({...gt,[et.target.name]:et.target.value}))},fe=et=>{pe(gt=>({...gt,recursos:{...gt.recursos,[et.target.name]:et.target.value}}))},Ie=et=>{et.target.files&&K(Array.from(et.target.files))},Ue=et=>{pe(gt=>{const Je=gt.tipos.includes(et)?gt.tipos.filter(wt=>wt!==et):[...gt.tipos,et],xt={...gt.cantidadPreguntas};return Je.includes(et)?xt[et]||(xt[et]=iI[et][0]):delete xt[et],{...gt,tipos:Je,cantidadPreguntas:xt}})},Ye=(et,gt)=>{pe(Je=>({...Je,cantidadPreguntas:{...Je.cantidadPreguntas,[et]:gt}}))},ye=(et,gt=!1)=>{(gt?_e:pe)(xt=>{const wt=xt.estudiantesDestino||[],bt=wt.includes(et)?wt.filter(nr=>nr!==et):[...wt,et];return{...xt,estudiantesDestino:bt}})},Oe=()=>{const{tipos:et,contenido:gt,asignatura:Je,nivel:xt,cantidadPreguntas:wt}=ce;let bt=`Eres un experto diseador de actividades pedaggicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${gt}"
Asignatura: ${Je}
Nivel: ${xt}

Genera los siguientes elementos:
- introduccion: breve y motivadora
- actividades: objeto con propiedades por tipo:
`;return et.forEach(nr=>{const gr=wt[nr]||iI[nr][0];switch(nr){case"Quiz":bt+=`- "Quiz": Array de ${gr} objetos { pregunta, opciones[4], respuestaCorrecta, puntaje(1) }
`;break;case"Comprensin de Lectura":bt+=`- "Comprensin de Lectura": Objeto { texto(150-200 palabras), preguntas: Array de ${gr} { pregunta, opciones[4], respuestaCorrecta, puntaje } }
`;break;case"Trminos Pareados":bt+=`- "Trminos Pareados": Array de ${gr} { concepto, definicion }
`;break;case"Desarrollo":bt+=`- "Desarrollo": Array de ${gr} { pregunta, rubrica }
`;break}}),bt},Re=()=>{const{contenido:et,objetivosAprendizaje:gt,asignatura:Je,nivel:xt}=ne;return`Eres experto en evaluacin educativa y diseo de pruebas SIMCE.
Responde SOLO con JSON vlido.

INFORMACIN:
- Asignatura: ${Je}
- Nivel: ${xt}
- Contenido: ${et}
- Objetivos: ${gt}

{
  "titulo": "Ttulo",
  "instrucciones": "Instrucciones",
  "textos": [
    {
      "id": 1,
      "titulo": "Ttulo del texto",
      "contenido": "200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado",
      "opciones": ["Opcin A", "Opcin B", "Opcin C", "Opcin D"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar informacin",
      "justificacion": "Breve explicacin",
      "textoId": 1
    }
  ]
}

Reglas:
- ${Je==="Lenguaje y Comunicacin"||Je==="Lengua y Literatura"?"3-4 textos de distintos tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas 1..30
- 4 opciones por pregunta (A-D)
- Habilidades vlidas: ${oI.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios fuera del JSON`};function qe(et,gt){if(et==="Desarrollo"&&Array.isArray(gt))return gt.map((Je,xt)=>{if(typeof Je=="string"){const wt=Je.match(/^(.*?)(?:R[u]brica:|RUBRICA:|Rubrica:)(.*)$/is);return wt?{pregunta:Ql(wt[1],`desarrollo-pregunta-${xt}`),rubrica:Ql(wt[2],`desarrollo-rubrica-${xt}`)}:{pregunta:Ql(Je,`desarrollo-pregunta-simple-${xt}`),rubrica:""}}if(Je&&typeof Je=="object"){const wt=Ql(Je,`desarrollo-obj-pregunta-${xt}`,"pregunta","Pregunta","texto");let bt="";if(Je.rubrica||Je.Rubrica||Je.rbrica||Je.Rbrica){const nr=Je.rubrica||Je.Rubrica||Je.rbrica||Je.Rbrica;bt=ii(nr,`desarrollo-rubrica-${xt}`)}return{pregunta:wt,rubrica:bt}}return{pregunta:ii(Je,`desarrollo-fallback-${xt}`),rubrica:""}});if(et==="Trminos Pareados"&&Array.isArray(gt))return gt.map((Je,xt)=>{if(typeof Je=="string"){const wt=Je.match(/^(.+?)[\s:-]+(.+)$/);return wt?{id:xt,concepto:Ql(wt[1],`pareados-concepto-${xt}`),definicion:Ql(wt[2],`pareados-definicion-${xt}`)}:{id:xt,concepto:Ql(Je,`pareados-concepto-simple-${xt}`),definicion:""}}return Je&&typeof Je=="object"?{id:xt,concepto:Ql(Je,`pareados-obj-concepto-${xt}`,"concepto","termino"),definicion:Ql(Je,`pareados-obj-definicion-${xt}`,"definicion","significado")}:{id:xt,concepto:ii(Je,`pareados-fallback-${xt}`),definicion:""}});if(et==="Comprensin de Lectura"){if(gt&&typeof gt=="object"&&!Array.isArray(gt)&&Array.isArray(gt.preguntas))return{texto:Ql(gt,"comprension-texto","texto"),preguntas:gt.preguntas.map((Je,xt)=>({pregunta:Ql(Je,`comprension-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(wt=>ii(wt,`comprension-opcion-${xt}`)):[],respuestaCorrecta:ii(Je.respuestaCorrecta,`comprension-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1}))};if(Array.isArray(gt)){const Je=gt.map((wt,bt)=>Ql(wt,`comprension-bloque-${bt}`,"texto")).join(`

---

`),xt=gt.flatMap(wt=>Array.isArray(wt.preguntas)?wt.preguntas:[]);return{texto:Je,preguntas:xt.map((wt,bt)=>({pregunta:Ql(wt,`comprension-combined-pregunta-${bt}`,"pregunta"),opciones:Array.isArray(wt.opciones)?wt.opciones.map(nr=>ii(nr,`comprension-combined-opcion-${bt}`)):[],respuestaCorrecta:ii(wt.respuestaCorrecta,`comprension-combined-respuesta-${bt}`),puntaje:typeof wt.puntaje=="number"?wt.puntaje:1}))}}}return et==="Quiz"&&Array.isArray(gt)?gt.map((Je,xt)=>({pregunta:Ql(Je,`quiz-pregunta-${xt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map(wt=>ii(wt,`quiz-opcion-${xt}`)):[],respuestaCorrecta:ii(Je.respuestaCorrecta,`quiz-respuesta-${xt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1})):gt}const Ze=async et=>{var gt;if(et.preventDefault(),!ce.contenido.trim()||ce.tipos.length===0){B("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),B(null);try{const Je=await Promise.all(H.map(async we=>({nombre:we.name,url:await hXe(we)}))),xt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",bt=new cs(xt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),nr=Oe();let Jr=await(await(await bt.generateContent(nr)).response).text();Jr=Jr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const Gr=Jr.match(/\{[\s\S]*\}/);if(!Gr)throw new Error("La IA no devolvi JSON vlido.");const he=JSON.parse(Gr[0]),Te={};for(const we of ce.tipos){const Ne=(gt=he.actividades)==null?void 0:gt[we];Te[we]=qe(we,Ne)}const Ce={id:"",fechaCreacion:new Date().toISOString(),...ce,recursos:{...ce.recursos,archivos:Je},introduccion:ii(he.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",generatedContent:Te};L(Ce)}catch(Je){B(`Error al generar la actividad: ${(Je==null?void 0:Je.message)||Je}`)}finally{y(!1)}},ct=async et=>{if(et.preventDefault(),!ne.contenido.trim()||!ne.objetivosAprendizaje.trim()){B("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),B(null);try{const gt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",xt=new cs(gt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),wt=Re();let gr=await(await(await xt.generateContent(wt)).response).text();gr=gr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const Kr=gr.match(/\{[\s\S]*\}/);if(!Kr)throw new Error("No se encontr JSON vlido en la respuesta.");const Jr=Kr[0].replace(/,(\s*[}\]])/g,"$1"),Gr=JSON.parse(Jr);if(!Gr.preguntas||!Array.isArray(Gr.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas vlido");const he=(Gr.textos||[]).map((we,Ne)=>({id:we.id||Ne+1,titulo:ii(we.titulo,`texto-titulo-${Ne}`)||`Texto ${Ne+1}`,contenido:ii(we.contenido,`texto-contenido-${Ne}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(we.tipo)?we.tipo:"informativo",palabras:we.palabras||(we.contenido?String(we.contenido).split(" ").length:0)})),Te=Gr.preguntas.slice(0,30).map((we,Ne)=>({numero:we.numero||Ne+1,pregunta:ii(we.pregunta,`pregunta-${Ne}`)||`Pregunta ${Ne+1}`,opciones:Array.isArray(we.opciones)&&we.opciones.length>=4?we.opciones.slice(0,4).map((je,Xe)=>ii(je,`pregunta-opcion-${Ne}-${Xe}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(we.respuestaCorrecta)?we.respuestaCorrecta:"A",habilidad:oI.includes(we.habilidad)?we.habilidad:oI[0],justificacion:ii(we.justificacion,`justificacion-${Ne}`)||"Justificacin no disponible",...we.textoId&&typeof we.textoId=="number"?{textoId:we.textoId}:{}})),Ce={id:"",fechaCreacion:new Date().toISOString(),...ne,titulo:ii(Gr.titulo,"prueba-titulo")||`Prueba ${ne.asignatura}`,instrucciones:ii(Gr.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:he,preguntas:Te};J(Ce)}catch(gt){B(`Error al generar la prueba: ${(gt==null?void 0:gt.message)||gt}`)}finally{y(!1)}},pt=async()=>{if(D)try{_(!0),await AXe(D),pe(ie),K([]),p(!1),L(null)}catch(et){console.error("Error al guardar la actividad con archivos:",et),B("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{_(!1)}},It=async()=>{if(M)try{_(!0);const et={...M,cursosDestino:M.cursosDestino||[],estudiantesDestino:M.estudiantesDestino||[],textos:M.textos||[],preguntas:M.preguntas.map(gt=>({...gt,textoId:gt.textoId||null}))};await lXe(et),_e(Be),x(!1),J(null)}catch(et){console.error("Error al guardar la prueba:",et),B("No se pudo guardar la prueba.")}finally{_(!1)}},Mt=S.useMemo(()=>{var Je,xt,wt;const et=c||d;if(!et||!i.length)return[];const gt=new Map;return!((Je=et.cursosDestino)!=null&&Je.length)&&!((xt=et.estudiantesDestino)!=null&&xt.length)?[]:((wt=et.estudiantesDestino)!=null&&wt.length&&i.filter(bt=>bt.profile===qt.ESTUDIANTE&&et.estudiantesDestino.includes(bt.nombreCompleto)).forEach(bt=>gt.set(bt.id,bt)),Array.from(gt.values()).sort((bt,nr)=>bt.nombreCompleto.localeCompare(nr.nombreCompleto)))},[c,d,i]),Pt=S.useMemo(()=>{const et=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(gt=>gt.actividadId===et)},[a,c,d]),Qt=S.useMemo(()=>i.filter(et=>et.profile===qt.ESTUDIANTE).sort((et,gt)=>et.nombreCompleto.localeCompare(gt.nombreCompleto)),[i]),yt=S.useMemo(()=>R.trim()?Qt.filter(et=>et.nombreCompleto.toLowerCase().includes(R.toLowerCase())):Qt,[Qt,R]),Br=S.useMemo(()=>{const et=new Set;return e.forEach(gt=>{(gt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(wt=>wt.profile===qt.ESTUDIANTE&&wt.nombreCompleto===Je);xt&&et.add(xt.id)})}),r.forEach(gt=>{(gt.estudiantesDestino||[]).forEach(Je=>{const xt=i.find(wt=>wt.profile===qt.ESTUDIANTE&&wt.nombreCompleto===Je);xt&&et.add(xt.id)})}),a.forEach(gt=>et.add(gt.estudianteId)),i.filter(gt=>gt.profile===qt.ESTUDIANTE&&et.has(gt.id)).sort((gt,Je)=>gt.nombreCompleto.localeCompare(Je.nombreCompleto))},[e,r,a,i]),tr=S.useMemo(()=>i.find(et=>et.id===X)||null,[i,X]),nn=S.useMemo(()=>{if(!tr)return{asignadas:[],respuestas:[]};const et=[...e.filter(Je=>(Je.estudiantesDestino||[]).includes(tr.nombreCompleto)).map(Je=>({tipo:"Actividad",item:Je})),...r.filter(Je=>(Je.estudiantesDestino||[]).includes(tr.nombreCompleto)).map(Je=>({tipo:"Prueba",item:Je}))],gt=a.filter(Je=>Je.estudianteId===tr.id);return{asignadas:et,respuestas:gt}},[tr,e,r,a]),Nr=()=>l.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[["carpetas","actividades","pruebas"].map(et=>l.jsxs("button",{onClick:()=>{G(et),u(null),f(null),ee(null)},className:`inline-flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition
            ${V===et?"bg-amber-500 text-white shadow":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:[et==="carpetas"&&l.jsx(SQ,{size:18}),et==="actividades"&&l.jsx(WA,{size:18}),et==="pruebas"&&l.jsx(cye,{size:18}),et==="carpetas"?"Carpetas de Estudiantes":et==="actividades"?"Actividades Remotas":"Pruebas Estandarizadas"]},et)),l.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(b4,{className:"absolute left-3 top-1/2 -translate-y-1/2 opacity-60",size:18}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:et=>P(et.target.value),className:"pl-10 pr-3 py-2 rounded-xl bg-white border border-slate-200 focus:outline-none focus:ring-2 focus:ring-amber-400"})]}),V==="actividades"&&!D&&!c&&l.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[l.jsx(NC,{size:18})," Nueva"]}),V==="pruebas"&&!M&&!d&&l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-semibold py-2 px-3 rounded-xl hover:bg-amber-600",children:[l.jsx(NC,{size:18})," Nueva"]})]})]}),Vr=()=>{const et=R?yt:Br;return et.length?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-4",children:et.map(gt=>{const Je=a.filter(bt=>bt.estudianteId===gt.id),xt=Je.length,wt=e.filter(bt=>(bt.estudiantesDestino||[]).includes(gt.nombreCompleto)).length+r.filter(bt=>(bt.estudiantesDestino||[]).includes(gt.nombreCompleto)).length;return l.jsxs("button",{onClick:()=>ee(gt.id),className:"group text-left rounded-2xl border border-slate-200 bg-white hover:shadow-md transition overflow-hidden",children:[l.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gradient-to-br from-amber-50 to-white",children:[l.jsx("div",{className:"rounded-xl p-3 bg-amber-100 text-amber-700",children:l.jsx(SQ,{})}),l.jsxs("div",{className:"min-w-0",children:[l.jsx("p",{className:"font-semibold text-slate-800 truncate",children:gt.nombreCompleto}),l.jsxs("p",{className:"text-xs text-slate-500 flex items-center gap-1",children:[l.jsx(Tw,{size:14})," ",gt.curso||""]})]})]}),l.jsxs("div",{className:"p-4 grid grid-cols-3 text-center text-sm text-slate-600",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:wt}),l.jsx("p",{className:"text-xs",children:"Asignadas"})]}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold",children:xt}),l.jsx("p",{className:"text-xs",children:"Entregas"})]}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx(V0,{size:16,className:"opacity-70"}),l.jsx("span",{className:"text-xs mt-1",children:Je.length?iy(Je.sort((bt,nr)=>(bt.fechaCompletado||"").localeCompare(nr.fechaCompletado||"")).slice(-1)[0].fechaCompletado):""})]})]})]},gt.id)})}):l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow text-center text-slate-500",children:"No hay estudiantes asignados an."})},In=()=>{if(!tr)return null;const{asignadas:et,respuestas:gt}=nn;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsxs("button",{onClick:()=>ee(null),className:"inline-flex items-center gap-2 text-slate-600 hover:text-slate-900",children:[l.jsx(_C,{size:18})," Volver"]}),l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Historial  ",tr.nombreCompleto]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Ttulo / Asignatura"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Plazo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:et.map(({tipo:Je,item:xt})=>{var gr;const wt=gt.find(Kr=>Kr.actividadId===xt.id),bt=Je==="Actividad"?`${xt.asignatura}  ${(gr=xt.tipos)==null?void 0:gr.join(", ")}`:xt.titulo,nr=xt.plazoEntrega?iy(xt.plazoEntrega):"";return l.jsxs("tr",{className:"hover:bg-slate-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm",children:Je}),l.jsx("td",{className:"px-4 py-3 text-sm font-medium text-slate-800",children:l.jsx(Ia,{content:bt,context:"hist-titulo"})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:nr}),l.jsx("td",{className:"px-4 py-3 text-sm",children:wt?l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[l.jsx(Zo,{size:14})," Completado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:[l.jsx(V0,{size:14})," Pendiente"]})}),l.jsx("td",{className:"px-4 py-3 text-sm",children:wt?`${wt.puntaje}/${wt.puntajeMaximo}`:""}),l.jsx("td",{className:"px-4 py-3 text-sm font-semibold",children:wt?wt.nota:""})]},xt.id)})})]})})]})},Or=()=>{var et,gt,Je;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?l.jsxs(l.Fragment,{children:[l.jsx(Ia,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):l.jsx(Ia,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Plazo:"," ",iy((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duracin: ${d.duracionMinutos} min`]})]}),l.jsxs("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(_C,{size:18})," Volver al listado"]})]}),l.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((et=c==null?void 0:c.tipos)==null?void 0:et.includes("Desarrollo"))&&l.jsx("th",{className:"px-4 py-3"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Mt.map(xt=>{var bt;const wt=Pt.find(nr=>nr.estudianteId===xt.id);return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:xt.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:wt?l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:wt?`${wt.puntaje}/${wt.puntajeMaximo}`:"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:wt?l.jsx("span",{className:parseFloat(wt.nota)>=4?"text-green-600":"text-red-600",children:wt.nota}):"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:wt?fXe(wt.fechaCompletado):"-"}),((bt=c==null?void 0:c.tipos)==null?void 0:bt.includes("Desarrollo"))&&l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:wt?l.jsx("button",{onClick:()=>{var gr,Kr,Jr;z(wt);const nr=Array.from({length:((Kr=(gr=c.generatedContent)==null?void 0:gr.Desarrollo)==null?void 0:Kr.length)||0},(Gr,he)=>({index:he,puntaje:0,observacion:""}));te(nr),le(((Jr=wt==null?void 0:wt.revisionDocente)==null?void 0:Jr.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):l.jsx("span",{className:"text-slate-400",children:"-"})})]},xt.id)})})]})})]}),F&&((gt=c==null?void 0:c.tipos)==null?void 0:gt.includes("Desarrollo"))&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisin de Desarrollo  ",(F==null?void 0:F.estudianteNombre)||""]}),l.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Je=c.generatedContent)==null?void 0:Je.Desarrollo)||[]).map((xt,wt)=>{var bt,nr;return l.jsxs("div",{className:"p-3 border rounded-lg",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`revision-pregunta-${wt}`})]}),xt.rubrica&&l.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[l.jsx("strong",{children:"Rbrica:"})," ",l.jsx(Ia,{content:xt.rubrica,context:`revision-rubrica-${wt}`})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),l.jsx("input",{type:"number",min:0,step:.5,value:((bt=Y[wt])==null?void 0:bt.puntaje)??0,onChange:gr=>{const Kr=Number(gr.target.value)||0;te(Jr=>{const Gr=[...Jr];return Gr[wt]={...Gr[wt]||{index:wt,puntaje:0},puntaje:Kr},Gr})},className:"w-24 border-slate-300 rounded-md"}),l.jsx("input",{type:"text",placeholder:"Observacin (opcional)",value:((nr=Y[wt])==null?void 0:nr.observacion)||"",onChange:gr=>{const Kr=gr.target.value;te(Jr=>{const Gr=[...Jr];return Gr[wt]={...Gr[wt]||{index:wt,puntaje:0},observacion:Kr},Gr})},className:"flex-1 border-slate-300 rounded-md"})]})]},wt)})}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),l.jsx("textarea",{rows:3,value:ae,onChange:xt=>le(xt.target.value),className:"w-full border-slate-300 rounded-md"})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>{z(null),te([]),le("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:async()=>{if(F)try{k(!0);const xt=Number(F.puntaje)||0,wt=Number(F.puntajeMaximo)||0,bt=(Y||[]).reduce((Kr,Jr)=>Kr+(Number(Jr.puntaje)||0),0),nr=xt+bt,gr=uXe(nr,wt);await cXe(F.id,{puntaje:nr,puntajeMaximo:wt,nota:gr,revisionDocente:{completada:!0,observacionesGenerales:ae||"",detalle:Y||[],puntajeDocente:bt}}),z(null),te([]),le("")}catch(xt){console.error("Error guardando revisin:",xt),B("No se pudo guardar la revisin del docente.")}finally{k(!1)}},disabled:j,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:j?"Guardando...":"Guardar Revisin"})]})]})})]})},fs=()=>{var et,gt;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),l.jsxs("button",{onClick:()=>p(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(_C,{size:18})," Volver"]})]}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generar una actividad."}),l.jsxs("form",{onSubmit:Ze,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:ce.asignatura,onChange:De,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(Je=>l.jsx("option",{value:Je,children:Je},Je))})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),l.jsx("textarea",{name:"instrucciones",value:(et=ce.recursos)==null?void 0:et.instrucciones,onChange:fe,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),l.jsx("textarea",{name:"enlaces",value:(gt=ce.recursos)==null?void 0:gt.enlaces,onChange:fe,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por lnea..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),l.jsx("input",{type:"file",multiple:!0,onChange:Ie,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Slo estudiantes)"}),l.jsxs("div",{children:[l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:Je=>P(Je.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(R?yt:Qt).map(Je=>{var xt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(xt=ce.estudiantesDestino)==null?void 0:xt.includes(Je.nombreCompleto),onChange:()=>ye(Je.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Je.nombreCompleto,children:Je.nombreCompleto})]},Je.id)})})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenido",value:ce.contenido,onChange:De,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:ce.plazoEntrega,onChange:De,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),l.jsx("div",{className:"space-y-3",children:Nbe.map(Je=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:ce.tipos.includes(Je),onChange:()=>Ue(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Je})]}),ce.tipos.includes(Je)&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),iI[Je].map(xt=>l.jsx("button",{type:"button",onClick:()=>Ye(Je,xt),className:`px-3 py-1 rounded-full font-semibold text-xs ${ce.cantidadPreguntas[Je]===xt?"bg-amber-500 text-white":"bg-slate-200"}`,children:xt},xt))]})]},Je))})]})]}),N&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-2",children:N}),l.jsx("div",{className:"pt-2 text-right",children:l.jsxs("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center justify-center gap-2",children:[b?l.jsx(V0,{className:"animate-spin",size:18}):null,b?"Generando...":"Generar y Previsualizar"]})})]})]})},fn=()=>{var et;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin de la Actividad"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo est correcto, confirma para asignar."}),l.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introduccin para el Estudiante"}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:D==null?void 0:D.introduccion,context:"preview-introduccion"})})]}),(D==null?void 0:D.recursos)&&(D.recursos.instrucciones||D.recursos.enlaces||((et=D.recursos.archivos)==null?void 0:et.length))&&l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),l.jsxs("div",{className:"space-y-3",children:[D.recursos.instrucciones&&l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:D.recursos.instrucciones,context:"preview-instrucciones"})}),D.recursos.enlaces&&l.jsx("div",{children:D.recursos.enlaces.split(`
`).map((gt,Je)=>gt.trim()&&l.jsx("a",{href:gt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:gt},Je))}),D.recursos.archivos&&D.recursos.archivos.length>0&&l.jsx("ul",{className:"list-disc list-inside",children:D.recursos.archivos.map(gt=>l.jsx("li",{className:"text-slate-700",children:gt.nombre},gt.nombre))})]})]}),D==null?void 0:D.tipos.map(gt=>{const Je=D.generatedContent[gt];return Je?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:gt}),l.jsxs("div",{className:"space-y-4 text-sm",children:[gt==="Quiz"&&Array.isArray(Je)&&Je.map((xt,wt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`preview-quiz-pregunta-${wt}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,nr)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",l.jsx(Ia,{content:bt,context:`preview-quiz-opcion-${wt}-${nr}`})]},nr))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(Ia,{content:xt.respuestaCorrecta,context:`preview-quiz-respuesta-${wt}`})]})]},wt)),gt==="Comprensin de Lectura"&&Je&&typeof Je=="object"&&"preguntas"in Je&&Array.isArray(Je.preguntas)&&l.jsxs("div",{children:[l.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:l.jsx(Ia,{content:Je.texto,context:"preview-lectura-texto"})}),Je.preguntas.map((xt,wt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`preview-lectura-pregunta-${wt}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:xt.opciones.map((bt,nr)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+nr),"."]})," ",l.jsx(Ia,{content:bt,context:`preview-lectura-opcion-${wt}-${nr}`})]},nr))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(Ia,{content:xt.respuestaCorrecta,context:`preview-lectura-respuesta-${wt}`})]})]},wt))]}),gt==="Trminos Pareados"&&Array.isArray(Je)&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border border-slate-200",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definicin"})]})}),l.jsx("tbody",{children:Je.map((xt,wt)=>l.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[l.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:l.jsx(Ia,{content:xt.concepto,context:`preview-pareado-concepto-${wt}`})}),l.jsx("td",{className:"p-2 align-top text-slate-700",children:l.jsx(Ia,{content:xt.definicion,context:`preview-pareado-definicion-${wt}`})})]},xt.id))})]})}),gt==="Desarrollo"&&Array.isArray(Je)&&Je.map((xt,wt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[wt+1,". ",l.jsx(Ia,{content:xt.pregunta,context:`preview-desarrollo-pregunta-${wt}`})]}),l.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[l.jsx("strong",{className:"font-semibold",children:"Rbrica:"})," ",l.jsx(Ia,{content:xt.rubrica,context:`preview-desarrollo-rubrica-${wt}`})]})]},wt))]})]},gt):null})]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>L(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:pt,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},oa=()=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify_between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),l.jsxs("button",{onClick:()=>x(!1),className:"text-slate-600 hover:text-slate-900 font-semibold inline-flex items-center gap-2",children:[l.jsx(_C,{size:18})," Volver"]})]}),l.jsxs("form",{onSubmit:ct,className:"space-y-6 mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:ne.asignatura,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(et=>l.jsx("option",{value:et,children:et},et))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),l.jsx("textarea",{name:"objetivosAprendizaje",value:ne.objetivosAprendizaje,onChange:Se,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),l.jsx("textarea",{name:"contenido",value:ne.contenido,onChange:Se,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:ne.plazoEntrega,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios (Slo estudiantes)"}),l.jsxs("div",{children:[l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:R,onChange:et=>P(et.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-56 overflow-y-auto p-2 bg-white rounded",children:(R?yt:Qt).map(et=>{var gt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(gt=ne.estudiantesDestino)==null?void 0:gt.includes(et.nombreCompleto),onChange:()=>ye(et.nombreCompleto,!0),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:et.nombreCompleto,children:et.nombreCompleto})]},et.id)})})]})]})]}),N&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:N}),l.jsx("div",{className:"text-right",children:l.jsxs("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 inline-flex items-center gap-2",children:[b?l.jsx(V0,{className:"animate-spin",size:18}):null,b?"Generando...":"Generar y Previsualizar"]})})]})]}),Ba=()=>{var et,gt;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualizacin Prueba"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),l.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:l.jsx(Ia,{content:M==null?void 0:M.titulo,context:"preview-prueba-titulo"})}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(Ia,{content:M==null?void 0:M.instrucciones,context:"preview-prueba-instrucciones"})})]}),(et=M==null?void 0:M.textos)!=null&&et.length?l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),l.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:M.textos.map((Je,xt)=>l.jsxs("li",{children:[l.jsxs("p",{className:"font-semibold",children:[l.jsx(Ia,{content:Je.titulo,context:`preview-texto-titulo-${xt}`}),l.jsxs("span",{className:"text-xs text-slate-500",children:["(",Je.tipo,")"]})]}),l.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:l.jsx(Ia,{content:Je.contenido,context:`preview-texto-contenido-${xt}`})})]},Je.id))})]}):null,(gt=M==null?void 0:M.preguntas)!=null&&gt.length?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),M.preguntas.slice(0,10).map((Je,xt)=>l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[Je.numero,". ",l.jsx(Ia,{content:Je.pregunta,context:`preview-pregunta-texto-${xt}`})]}),l.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Je.opciones.map((wt,bt)=>l.jsx("li",{children:l.jsx(Ia,{content:wt,context:`preview-pregunta-opcion-${xt}-${bt}`})},bt))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Je.respuestaCorrecta]})]},Je.numero))]}):null]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>J(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:It,disabled:w,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:w?"Guardando...":"Confirmar y Asignar"})]})]})},tn=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),l.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[l.jsx(NC,{size:18})," Crear Nueva"]})]}),l.jsx("div",{className:"space-y-4",children:e.length>0?e.map(et=>{var xt;const gt=[];(xt=et.estudiantesDestino)!=null&&xt.length&&gt.push(`Estudiantes: ${et.estudiantesDestino.length}`);const Je=gt.length?gt.join(" | "):"Estudiantes seleccionados";return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(Ia,{content:et.asignatura,context:`lista-asignatura-${et.id}`}),"  ",et.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Je," | Creado: ",iy(et.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>u(et),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},et.id)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),pr=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),l.jsxs("button",{onClick:()=>x(!0),className:"inline-flex items-center gap-2 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:[l.jsx(NC,{size:18})," Crear Nueva"]})]}),l.jsx("div",{className:"space-y-4",children:r.length>0?r.map(et=>l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800",children:l.jsx(Ia,{content:et.titulo,context:`lista-prueba-titulo-${et.id}`})}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Creado: ",iy(et.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>f(et),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},et.id)):l.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return I?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"animate-fade-in",children:[Nr(),X?In():M?Ba():D?fn():c||d?Or():V==="pruebas"?g?oa():pr():V==="actividades"?h?fs():tn():Vr()]})},pXe="actividades_remotas",FL="respuestas_actividades",wle=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},uq=e=>{const t=wle(e);return t?t.toISOString():void 0},gXe=e=>{const t=wle(e);return t?t.toISOString().split("T")[0]:void 0},OL=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:uq(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:gXe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:uq(t.fechaCompletado)||t.fechaCompletado}},p1=(e,t)=>{var n,a;console.error(` Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un ndice en la base de datos. Contacta al administrador.",console.log(" Enlace para crear ndice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},xXe=e=>new Promise(t=>setTimeout(t,e)),vXe=async(e,t=3,r="operacin")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(` Intento ${n} fall en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(` Reintentando en ${s}ms...`),await xXe(s)}else throw a}throw new Error("Max retries exceeded")},bXe=(e,t,r)=>{console.log(" Suscribindose a actividades disponibles para:",e.nombreCompleto);const n=zt(Nt(ft,pXe),_r("fechaCreacion","desc"));return mr(n,{next:s=>{try{console.log(" Actividades recibidas desde Firestore:",s.docs.length);const o=s.docs.map(c=>OL(c)).filter(c=>{var u,d,f,h,p;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(p=c.estudiantesDestino)!=null&&p.includes(e.nombreCompleto))});console.log(" Actividades filtradas para el estudiante:",o.length),t(o)}catch(i){console.error(" Error procesando datos de actividades:",i);const o=p1(i,"procesamiento de actividades");r==null||r(o)}},error:s=>{const i=p1(s,"suscripcin a actividades");r==null||r(i)}})},yXe=(e,t,r)=>{console.log(" Suscribindose a respuestas del estudiante:",e);const n=zt(Nt(ft,FL),Yr("estudianteId","==",e),_r("fechaCompletado","desc"));return mr(n,{next:s=>{try{console.log(" Respuestas recibidas desde Firestore:",s.docs.length);const i=s.docs.map(o=>{var u;const c=OL(o);return console.log(` Respuesta ${o.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log(" Enviando respuestas procesadas al componente:",i.length),t(i)}catch(i){console.error(" Error procesando respuestas:",i);const o=p1(i,"procesamiento de respuestas");r==null||r(o)}},error:s=>{var o;const i=p1(s,"suscripcin a respuestas");if(s.code==="failed-precondition"&&((o=s.message)!=null&&o.includes("requires an index")))return console.log(" Error de ndice detectado, intentando consulta alternativa..."),wXe(e,t,r);r==null||r(i)}})},wXe=(e,t,r)=>{console.log(" Usando consulta alternativa sin ordenamiento...");const n=zt(Nt(ft,FL),Yr("estudianteId","==",e));return mr(n,{next:s=>{try{console.log(" Respuestas recibidas (consulta alternativa):",s.docs.length);const i=s.docs.map(o=>OL(o)).sort((o,c)=>new Date(c.fechaCompletado).getTime()-new Date(o.fechaCompletado).getTime());console.log(" Respuestas ordenadas manualmente:",i.length),t(i)}catch(i){console.error(" Error procesando respuestas (alternativa):",i);const o=p1(i,"procesamiento de respuestas alternativo");r==null||r(o)}},error:s=>{const i=p1(s,"suscripcin alternativa a respuestas");r==null||r(i)}})},EXe=async e=>vXe(async()=>{console.log(" Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:sr.fromDate(new Date(e.fechaCompletado))},r=await Tn(Nt(ft,FL),t);return console.log(" Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),CXe=.6,_Xe=(e,t,r=CXe,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},oO=({className:e="w-5 h-5"})=>l.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),NXe=async(e,t,r=3)=>{var i;const n="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",s=new cs(n).getGenerativeModel({model:"gemini-1.5-flash-latest"});for(let o=1;o<=r;o++)try{console.log(` Intento ${o} de generar feedback con IA`);const c=kXe(e,t);let f=(await(await s.generateContent(c)).response).text().trim();f=f.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const h=f.match(/\{[\s\S]*\}$/);try{const p=JSON.parse(h?h[0]:f);return console.log(` Feedback generado exitosamente en intento ${o}`),p}catch(p){throw console.warn(` Error al parsear JSON en intento ${o}:`,p),new Error("JSON parsing failed")}}catch(c){if(console.log(` Error en intento ${o}:`,c.message),(i=c.message)!=null&&i.includes("503")&&o<r){const u=Math.pow(2,o)*1e3;console.log(` Esperando ${u}ms antes del siguiente intento...`),await new Promise(d=>setTimeout(d,u));continue}if(o===r)return console.log(" Todos los intentos fallaron. Procediendo sin IA."),null}return null},SXe=async(e,t,r)=>{console.log(" Iniciando guardado de respuesta...");try{const n=await EXe(e);console.log(" Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await NXe(t,r);if(s){const{updateDoc:i,doc:o}=await u1(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>Ove);return{updateDoc:u,doc:d}},void 0),{db:c}=await u1(async()=>{const{db:u}=await Promise.resolve().then(()=>lee);return{db:u}},void 0);return await i(o(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log(" Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn(" No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error(" Error crtico al guardar respuesta:",n),n}},bo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(` OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},Vs=(e,t)=>{if(t&&bo(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>Vs(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluacin]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},kd=(e,t,...r)=>{if(bo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=Vs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=Vs(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},ci=({content:e,context:t="unknown"})=>{try{const r=Vs(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}};function dq(e){if(console.log(" Normalizando lectura:",e),bo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{bo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,i)=>Vs(s,`opcion-${n}-${i}`)).filter(Boolean):[];return{pregunta:kd(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:Vs(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:kd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>kd(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(bo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function Aq(e){return console.log(" Normalizando pareados:",e),bo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(bo(t,`pareado-${r}`),{izquierda:kd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:kd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(bo(t,`pareado-array-${r}`),{izquierda:kd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:kd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function fq(e){return console.log(" Normalizando desarrollo:",e),bo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(bo(t,`desarrollo-pregunta-${r}`),{enunciado:kd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(bo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(` Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:kd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const kXe=(e,t)=>{const r=t.items.filter(i=>i.esCorrecta===!1),n=t.items.filter(i=>i.tipo==="Desarrollo"),a=r.map(i=>`- Pregunta: "${Vs(i.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${Vs(i.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${Vs(i.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),s=n.map(i=>`- Pregunta abierta: "${Vs(i.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${Vs(i.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedaggico. Actividad de "${Vs(e.asignatura,"feedback-prompt-asignatura")}" sobre "${Vs(e.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 prrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "50 palabras, por qu la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${a||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${s||"- Sin preguntas de desarrollo."}
`.trim()},BXe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=S.useState({}),[s,i]=S.useState(!1),o=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{i(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(p=>{const g=e.generatedContent[p],x=n[p];if(console.log(` Procesando tipo: ${p}`,g),bo(g,`handleSubmit-${p}`),!!g){if((p==="Quiz"||p==="Comprensin de Lectura")&&(p==="Quiz"?Array.isArray(g)?g.map((y,w)=>(bo(y,`quiz-question-${w}`),{pregunta:kd(y,`quiz-pregunta-${w}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((_,j)=>Vs(_,`quiz-opcion-${w}-${j}`)):[],respuestaCorrecta:Vs(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${w}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:dq(g).preguntas).forEach((y,w)=>{const _=x==null?void 0:x[w],j=_===y.respuestaCorrecta,k=y.puntaje??1;j&&(u+=k),d+=k,f.items.push({pregunta:y.pregunta,respuestaUsuario:Vs(_,`feedback-respuesta-${w}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:j,puntajeObtenido:j?k:0,tipo:p})}),p==="Trminos Pareados"){const b=Aq(g),y=x||{};b.forEach((w,_)=>{const j=y[_],k=j===w.derecha,I=w.puntaje??1;k&&(u+=I),d+=I,f.items.push({pregunta:`${w.izquierda}  ?`,respuestaUsuario:Vs(j,`pareado-feedback-${_}`)||"No respondida",respuestaCorrecta:w.derecha,esCorrecta:k,puntajeObtenido:k?I:0,tipo:p})})}if(p==="Desarrollo"){const b=fq(g),y=x||{};b.forEach((w,_)=>{const j=Vs(y[_],`desarrollo-feedback-${_}`).trim();f.items.push({pregunta:w.enunciado,respuestaUsuario:j||"No respondida",respuestaCorrecta:"Revisin docente",esCorrecta:null,puntajeObtenido:0,tipo:p})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:_Xe(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:l.jsx(ci,{content:e.asignatura,context:"actividad-asignatura"})}),l.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(ci,{content:e.introduccion,context:"actividad-introduccion"})})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(` Renderizando tipo: ${u}`,d),bo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,p)=>(bo(h,`render-quiz-question-${p}`),{pregunta:kd(h,`render-quiz-pregunta-${p}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,x)=>Vs(g,`render-quiz-opcion-${p}-${x}`)):[],respuestaCorrecta:Vs(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${p}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),l.jsx("div",{className:"space-y-6",children:f.map((h,p)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",l.jsx(ci,{content:h.pregunta,context:`quiz-pregunta-${p}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var b;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(ci,{content:g,context:`quiz-opcion-${p}-${x}`})})]},x)})})]},p))})]},u)}case"Comprensin de Lectura":{const f=dq(d);return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensin de Lectura"}),l.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:l.jsx(ci,{content:f.texto,context:"lectura-texto"})}),l.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,p)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",l.jsx(ci,{content:h.pregunta,context:`lectura-pregunta-${p}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,x)=>{var b;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(ci,{content:g,context:`lectura-opcion-${p}-${x}`})})]},x)})})]},p))})]},u)}case"Trminos Pareados":{const f=Aq(d),h=n[u]||{},p=[...new Set(f.map(g=>g.derecha))];for(let g=p.length-1;g>0;g--){const x=Math.floor(Math.random()*(g+1));[p[g],p[x]]=[p[x],p[g]]}return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Trminos Pareados"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,x)=>l.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[l.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[x+1,". ",l.jsx(ci,{content:g.izquierda,context:`pareado-izq-${x}`})]}),l.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[x]??"",onChange:b=>o(u,{...h,[x]:b.target.value}),children:[l.jsx("option",{value:"",children:" Selecciona la pareja "}),p.map((b,y)=>l.jsx("option",{value:b,children:Vs(b,`pareado-opcion-${x}-${y}`)},y))]})]},`${g.izquierda}-${x}`))})]},u)}case"Desarrollo":{const f=fq(d),h=n[u]||{};return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),l.jsx("div",{className:"space-y-6",children:f.map((p,g)=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",l.jsx(ci,{content:p.enunciado,context:`desarrollo-enunciado-${g}`})]}),l.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta",value:h[g]??"",onChange:x=>o(u,{...h,[g]:x.target.value})})]},g))}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado ser revisado y calificado por tu profesor/a."})]},u)}default:return null}}),l.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:l.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?l.jsx(oO,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},TXe=({currentUser:e})=>{var B,R,P;const[t,r]=S.useState(!0),[n,a]=S.useState("list"),[s,i]=S.useState(!1),[o,c]=S.useState([]),[u,d]=S.useState([]),[f,h]=S.useState(null),[p,g]=S.useState(null),[x,b]=S.useState(null),[y,w]=S.useState("connecting");S.useEffect(()=>{console.log(" Iniciando carga de datos para usuario:",e.nombreCompleto);let D=!1,L=!1,M=!1,J=!1;const H=()=>{(D||M)&&(L||J)&&(M&&J?(w("error"),b("Error al cargar datos. Verifica tu conexin e intenta nuevamente.")):w("connected"),r(!1),console.log(" Carga completada - Actividades:",D,"Respuestas:",L))},K=bXe(e,G=>{console.log(" Actividades recibidas:",G.length),G.forEach((X,ee)=>{console.log(`  ${ee+1}. ${X.asignatura} (ID: ${X.id})`),bo(X,`actividad-${ee}`)}),c(G),D=!0,H()},G=>{console.error(" Error en suscripcin de actividades:",G),M=!0,H()}),V=yXe(e.id,G=>{console.log(" Respuestas del estudiante recibidas:",G.length),G.forEach((X,ee)=>{var F;console.log(`  ${ee+1}. Actividad ${X.actividadId} - Nota: ${X.nota} - Fecha: ${X.fechaCompletado}`),(F=X.revisionDocente)!=null&&F.completada&&console.log("     Con revisin docente completada"),bo(X,`respuesta-${ee}`)}),d(G),L=!0,H()},G=>{var X;console.error(" Error en suscripcin de respuestas:",G),(X=G.message)!=null&&X.includes("requires an index")&&(console.log(" Detectado error de ndice, intentando consulta alternativa..."),b("Se detect un problema de configuracin. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),J=!0,H()});return()=>{console.log(" Limpiando subscripciones"),K==null||K(),V==null||V()}},[e]),S.useEffect(()=>{t||console.log(" ESTADO ACTUALIZADO:",{actividades:o.length,respuestas:u.length,vista:n,conexion:y})},[o.length,u.length,n,y,t]);const _=D=>{console.log(" Iniciando actividad:",D.asignatura),h(D),a("activity"),b(null)},j=D=>{console.log(" Viendo resultado:",D.actividadId);const L=o.find(M=>M.id===D.actividadId);L?(h(L),g(D),a("result"),b(null)):b("No se pudieron cargar los detalles de esta actividad completada.")},k=S.useCallback(async(D,L)=>{if(!f)return;console.log(" COMPLETANDO ACTIVIDAD:",{actividadId:f.id,estudianteId:e.id,puntaje:D.puntaje,nota:D.nota}),a("result"),i(!0),b(null);const M={actividadId:f.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...D,retroalimentacionDetallada:L};console.log(" Guardando respuesta...");try{const J=await SXe(M,f,L);console.log(" Respuesta completada con ID:",J.id),g(J),setTimeout(()=>{console.log(" Datos sincronizados")},1500)}catch(J){console.error(" Error crtico al completar actividad:",J),b("Ocurri un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),g({id:"error-temp",...M,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema tcnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{i(!1)}},[f,e.id]),I=S.useMemo(()=>{if(u.length===0)return new Set;const D=new Set(u.map(L=>L.actividadId));return console.log(" IDs completados calculados:",D.size),D},[u]),E=S.useMemo(()=>{if(o.length===0)return[];const D=o.filter(L=>!I.has(L.id));return console.log(" Actividades pendientes:",D.length),D},[o,I]),N=S.useMemo(()=>{if(u.length===0)return[];const D=u.map(L=>{const M=o.find(J=>J.id===L.actividadId);return{...L,asignatura:(M==null?void 0:M.asignatura)||"Actividad no disponible",tipos:(M==null?void 0:M.tipos)||[]}}).sort((L,M)=>new Date(M.fechaCompletado).getTime()-new Date(L.fechaCompletado).getTime());return console.log(" Historial preparado:",D.length),D},[u,o]);return t?l.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[l.jsx(oO,{className:"w-8 h-8 text-slate-500"}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),l.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",y==="connecting"?"Conectando...":y==="connected"?"Conectado":"Error de conexin"]})]})]}):y==="error"&&o.length===0&&u.length===0?l.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexin"}),l.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&f?l.jsx(BXe,{actividad:f,onComplete:k,currentUser:e}):n==="result"&&p?(console.log(" Renderizando resultado:",p),l.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),l.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",l.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[p.puntaje," / ",p.puntajeMaximo]})]}),l.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",l.jsx("span",{className:`font-bold text-2xl ${parseFloat(p.nota)>=4?"text-green-600":"text-red-600"}`,children:p.nota})]})]}),x&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("p",{className:"text-red-700 font-medium",children:[" ",x]})}),s&&l.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[l.jsx(oO,{className:"w-8 h-8 text-blue-500"}),l.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),l.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),p.retroalimentacionAI&&!s&&l.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeo "}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-green-700",children:" Principales Logros"}),l.jsx("p",{className:"text-slate-700 mt-1",children:l.jsx(ci,{content:p.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((B=p.retroalimentacionAI.desafios)==null?void 0:B.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-amber-700",children:" reas de Mejora"}),l.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.desafios.map((D,L)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(ci,{content:D.pregunta,context:`feedback-desafio-pregunta-${L}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(ci,{content:D.explicacionDelError,context:`feedback-desafio-explicacion-${L}`})})]},L))})]}),((P=(R=p.retroalimentacionAI)==null?void 0:R.comentariosDesarrollo)==null?void 0:P.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-sky-700",children:" Retroalimentacin de Desarrollo"}),l.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.comentariosDesarrollo.map((D,L)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(ci,{content:D.pregunta,context:`feedback-desarrollo-pregunta-${L}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(ci,{content:D.retroalimentacionBreve,context:`feedback-desarrollo-retro-${L}`})})]},L))})]})]}),p.retroalimentacionDetallada&&l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisin Detallada"}),p.retroalimentacionDetallada.items.map((D,L)=>{const M=D.esCorrecta===null,J=M?"border-slate-400 bg-slate-50":D.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",H=M?"":D.esCorrecta?"":"";return l.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${J}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[L+1,". ",l.jsx(ci,{content:D.pregunta,context:`feedback-item-pregunta-${L}`})]}),l.jsx("span",{className:"font-bold text-lg",children:H})]}),l.jsxs("div",{className:"mt-2 text-sm pl-4",children:[l.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",l.jsx("span",{className:"font-medium",children:l.jsx(ci,{content:D.respuestaUsuario,context:`feedback-item-respuesta-${L}`})})]}),!M&&!D.esCorrecta&&l.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",l.jsx("span",{className:"font-medium text-green-700",children:l.jsx(ci,{content:D.respuestaCorrecta,context:`feedback-item-correcta-${L}`})})]}),M&&l.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisin docente."})]})]},L)})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>{a("list"),h(null),g(null),b(null)},className:"flex-1 bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"}),f&&l.jsx("button",{onClick:()=>{a("activity"),g(null),b(null)},className:"flex-1 bg-amber-600 text-white font-bold py-3 rounded-lg hover:bg-amber-700 transition-colors",children:"Repetir Actividad"})]})]})):l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[x&&l.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:l.jsxs("p",{className:"text-amber-800",children:[" ",x]})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),l.jsx("div",{className:"space-y-4",children:E.length>0?E.map(D=>l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(ci,{content:D.asignatura,context:`actividad-asignatura-${D.id}`})," - ",D.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",l.jsx(ci,{content:typeof D.plazoEntrega=="string"?D.plazoEntrega:"",context:`actividad-plazo-${D.id}`})]})]}),l.jsx("button",{onClick:()=>_(D),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},D.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Todo al da!"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentacin de las actividades completadas."}),l.jsx("div",{className:"space-y-4",children:N.length>0?N.map(D=>l.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(ci,{content:D.asignatura,context:`completada-asignatura-${D.id}`})," - ",D.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(D.fechaCompletado).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",l.jsx("span",{className:`font-bold text-lg ${parseFloat(D.nota)>=4?"text-green-600":"text-red-600"}`,children:D.nota})]}),l.jsx("button",{onClick:()=>j(D),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},D.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"An no hay historial"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecern aqu."})]})})]})]})},yk="estudiantes_inclusion",jXe="usuarios",Ele=e=>{const t=e.data();return{id:e.id,...t}},IXe=e=>{const t=zt(Nt(ft,yk));return mr(t,n=>{const a=n.docs.map(s=>Ele(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusin:",n),e([])})},FXe=e=>{const t=zt(Nt(ft,jXe));return mr(t,n=>{const a=n.docs.map(s=>Ele(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},OXe=async e=>{try{return(await Tn(Nt(ft,yk),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusin:",t),new Error("No se pudo agregar al estudiante.")}},DXe=async(e,t)=>{try{const{id:r,...n}=t,a=dr(ft,yk,e);await Ji(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusin:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},PXe=async e=>{try{const t=dr(ft,yk,e);await za(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusin:",t),new Error("No se pudo eliminar al estudiante.")}},RXe=({estudiantes:e})=>{const t=S.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=S.useMemo(()=>{const o=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(o).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=S.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=S.useMemo(()=>{const o=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(o/e.length).toFixed(1):"0";return{total:o,promedio:c}},[e]),s=S.useMemo(()=>e.reduce((o,c)=>o+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(o=>o.cantidad),...r.map(o=>o.cantidad),...n.map(o=>o.cantidad));return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),l.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),l.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),l.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),l.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),l.jsx("div",{className:"space-y-2",children:t.map(({curso:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),l.jsx("div",{className:"space-y-2",children:r.map(({nivel:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[o,""]}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnstico"}),l.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:o,children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]})]})]})},hq=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=S.useState(""),[a,s]=S.useState(""),[i,o]=S.useState(!1),c=S.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),p=a===""||f.curso===a;return h&&p}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=S.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),o(!1)};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),l.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),o(f.target.value.length>0||a!=="")},onFocus:()=>o(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),l.jsxs("select",{value:a,onChange:f=>{s(f.target.value),o(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>l.jsx("option",{value:f,children:f},f))]})]})]}),l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),l.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),l.jsx("button",{onClick:()=>o(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),i&&l.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?l.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de bsqueda.":"No hay estudiantes disponibles."}):l.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>l.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),l.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:""})]})},f.id))})}),r&&c.length===1&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:" Solo hay un resultado! Haga clic para agregarlo directamente:"}),l.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},LXe=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=S.useState(J5[0]),s=()=>r(e,n);return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),l.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:J5.map(i=>l.jsx("option",{value:i,children:i},i))})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},MXe=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=S.useState("intervenciones"),[o,c]=S.useState(e);S.useEffect(()=>c(e),[e]);const[u,d]=S.useState(null),f={responsable:"",accion:"",observaciones:""},[h,p]=S.useState(f),[g,x]=S.useState({trimestre:"T1",meta:""}),[b,y]=S.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[w,_]=S.useState(null),[j,k]=S.useState(!1),I={motivo:"",acuerdos:"",asistentes:""},[E,N]=S.useState(I),B=()=>{r(o),t()},R=async()=>{var Se;if(!h.responsable||!h.accion){alert("Responsable y Accin son campos obligatorios.");return}let ne,_e=!1;u?ne=(o.intervenciones||[]).map(fe=>fe.id===u.id?{...fe,...h}:fe):(_e=!0,ne=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...o.intervenciones||[]]);const De=ne.sort((fe,Ie)=>new Date(Ie.fecha).getTime()-new Date(fe.fecha).getTime());if(c(fe=>({...fe,intervenciones:De})),_e)try{await Kwe({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(Se=a?a(h.responsable):void 0)==null?void 0:Se.toLowerCase(),tipo:"nueva_intervencion",titulo:" Nueva Intervencin Asignada",mensaje:`Se te ha asignado una nueva intervencin para el estudiante ${o.nombre}. Accin: ${h.accion}`,estudianteNombre:o.nombre,estudianteId:o.id,accionRequerida:h.accion}),alert(` Intervencin registrada y notificacin enviada a ${h.responsable}`)}catch(fe){console.error("Error al crear notificacin:",fe),alert(" Intervencin guardada, pero no se pudo enviar la notificacin al docente.")}p(f),d(null)},P=ne=>{d(ne),p({responsable:ne.responsable,accion:ne.accion,observaciones:ne.observaciones})},D=ne=>{window.confirm("Eliminar esta intervencin?")&&c(_e=>({..._e,intervenciones:(_e.intervenciones||[]).filter(De=>De.id!==ne)}))},L=ne=>{const{name:_e,value:De}=ne.target;c(Se=>({...Se,[_e]:De,fechaActualizacionApoyos:new Date().toISOString()}))},M=()=>{if(!g.meta.trim())return;const ne={...g,id:crypto.randomUUID(),cumplida:!1};c(_e=>({..._e,metasProgreso:[..._e.metasProgreso||[],ne]})),x({trimestre:"T1",meta:""})},J=ne=>{c(_e=>({..._e,metasProgreso:(_e.metasProgreso||[]).map(De=>De.id===ne?{...De,cumplida:!De.cumplida}:De)}))},H=ne=>{c(_e=>({..._e,metasProgreso:(_e.metasProgreso||[]).filter(De=>De.id!==ne)}))},K=S.useMemo(()=>{const ne=o.metasProgreso||[];if(ne.length===0)return{percent:0,color:"bg-slate-300"};const _e=ne.filter(fe=>fe.cumplida).length,De=Math.round(_e/ne.length*100),Se=De<40?"bg-red-500":De<75?"bg-yellow-500":"bg-green-500";return{percent:De,color:Se}},[o.metasProgreso]),V=S.useMemo(()=>{if(!o.fechaActualizacionApoyos)return!0;const ne=new Date(o.fechaActualizacionApoyos),_e=new Date;return _e.setMonth(_e.getMonth()-3),ne<_e},[o.fechaActualizacionApoyos]),G=()=>{if(!b.titulo.trim()||!b.fecha)return;const ne={...b,id:crypto.randomUUID(),resuelta:!1};c(_e=>({..._e,alertas:[..._e.alertas||[],ne].sort((De,Se)=>new Date(De.fecha).getTime()-new Date(Se.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},X=ne=>{c(_e=>({..._e,alertas:(_e.alertas||[]).map(De=>De.id===ne?{...De,resuelta:!De.resuelta}:De)}))},ee=ne=>{c(_e=>({..._e,alertas:(_e.alertas||[]).filter(De=>De.id!==ne)}))},F=ne=>{ne.target.files&&ne.target.files[0]&&_(ne.target.files[0])},z=()=>{if(!w)return;k(!0);const ne=new FileReader;ne.readAsDataURL(w),ne.onloadend=()=>{const _e={id:crypto.randomUUID(),nombre:w.name,url:ne.result,fechaSubida:new Date().toISOString()};c(De=>({...De,archivos:[_e,...De.archivos||[]]})),_(null),k(!1)},ne.onerror=()=>{alert("Error al leer el archivo."),k(!1)}},Y=ne=>{window.confirm("Eliminar este archivo?")&&c(_e=>({..._e,archivos:(_e.archivos||[]).filter(De=>De.id!==ne)}))},te=()=>{if(!E.motivo.trim()||!E.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ne={...E,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(_e=>({..._e,reuniones:[ne,..._e.reuniones||[]].sort((De,Se)=>new Date(Se.fecha).getTime()-new Date(De.fecha).getTime())})),N(I)},ae=ne=>{window.confirm("Eliminar este registro de reunin?")&&c(_e=>({..._e,reuniones:(_e.reuniones||[]).filter(De=>De.id!==ne)}))},le=()=>{var ye,Oe,Re;const ne=new vr("p","mm","a4"),_e=20,De=ne.internal.pageSize.getWidth(),Se=ne.internal.pageSize.getHeight();let fe=_e;const Ie=qe=>{qe.setFontSize(10),qe.setTextColor(100),qe.text("Ficha de Seguimiento - Mdulo Inclusin",_e,15)};Ie(ne),ne.setFontSize(18),ne.setFont("helvetica","bold"),ne.setTextColor(40),ne.text(o.nombre,_e,fe+10),fe+=15,ne.setFontSize(11),ne.setFont("helvetica","normal"),ne.setTextColor(80),ne.text(`Curso: ${o.curso}`,_e,fe),ne.text(`Dificultad: ${o.dificultad}`,_e,fe+6),fe+=15;const Ue=qe=>{fe+qe>Se-_e&&(ne.addPage(),Ie(ne),fe=_e)},Ye=qe=>{Ue(15),ne.setFontSize(14),ne.setFont("helvetica","bold"),ne.text(qe,_e,fe),fe+=10};if((ye=o.intervenciones)!=null&&ye.length&&(Ye("Historial de Intervenciones"),vo(ne,{startY:fe,head:[["Fecha","Responsable","Accin","Observaciones"]],body:o.intervenciones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.responsable,qe.accion,qe.observaciones||""]),theme:"grid",didDrawPage:()=>Ie(ne)}),fe=ne.lastAutoTable.finalY+10),o.adaptacionesCurriculares||o.apoyosRecibidos){Ue(30),Ye("Seguimiento y Apoyos"),ne.setFontSize(11),ne.setFont("helvetica","normal");const qe=`Adaptaciones: ${o.adaptacionesCurriculares||"No registradas."}
Apoyos: ${o.apoyosRecibidos||"No registrados."}`,Ze=ne.splitTextToSize(qe,De-_e*2);ne.text(Ze,_e,fe),fe+=Ze.length*5+10}(Oe=o.metasProgreso)!=null&&Oe.length&&(Ue(30),Ye("Metas de Progreso"),vo(ne,{startY:fe,head:[["Trimestre","Meta","Estado"]],body:o.metasProgreso.map(qe=>[qe.trimestre,qe.meta,qe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>Ie(ne)}),fe=ne.lastAutoTable.finalY+10),(Re=o.reuniones)!=null&&Re.length&&(Ye("Reuniones con Apoderados"),vo(ne,{startY:fe,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:o.reuniones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.motivo,qe.acuerdos||"",qe.asistentes]),theme:"grid",didDrawPage:()=>Ie(ne)})),ne.save(`Ficha_Inclusion_${o.nombre.replace(/\s/g,"_")}.pdf`)},ie=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervencin":"Registrar Nueva Intervencin"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviar notificacin automtica)"]}),l.jsxs("select",{value:h.responsable,onChange:ne=>p(_e=>({..._e,responsable:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ne=>l.jsx("option",{value:ne,children:ne},ne))]}),h.responsable&&!u&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:[" Se enviar una notificacin a ",h.responsable," cuando se guarde la intervencin"]})]}),l.jsx("textarea",{value:h.accion,onChange:ne=>p(_e=>({..._e,accion:ne.target.value})),placeholder:"Accin realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:h.observaciones,onChange:ne=>p(_e=>({..._e,observaciones:ne.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"flex justify-end gap-2",children:[u&&l.jsx("button",{onClick:()=>{d(null),p(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edicin"}),l.jsx("button",{onClick:R,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.intervenciones||[]).map(ne=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.accion}),ne.observaciones&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:ne.observaciones}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(ne.fecha).toLocaleString("es-CL")," - ",ne.responsable]}),l.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:" Notificado"})]})]}),l.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[l.jsx("button",{onClick:()=>P(ne),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervencin",children:""}),l.jsx("button",{onClick:()=>D(ne.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervencin",children:""})]})]})},ne.id)),(!o.intervenciones||o.intervenciones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{children:"No hay intervenciones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera intervencin arriba"})]})]})]}),ce=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),V&&l.jsx("span",{title:"Informacin no actualizada en los ltimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:""})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),l.jsx("textarea",{name:"adaptacionesCurriculares",value:o.adaptacionesCurriculares||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),l.jsx("textarea",{name:"apoyosRecibidos",value:o.apoyosRecibidos||"",onChange:L,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",K.percent,"%"]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:l.jsx("div",{className:`${K.color} h-4 rounded-full transition-all duration-500`,style:{width:`${K.percent}%`}})})]}),l.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[l.jsxs("select",{value:g.trimestre,onChange:ne=>x(_e=>({..._e,trimestre:ne.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"T1",children:"T1"}),l.jsx("option",{value:"T2",children:"T2"}),l.jsx("option",{value:"T3",children:"T3"})]}),l.jsx("input",{value:g.meta,onChange:ne=>x(_e=>({..._e,meta:ne.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:M,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(o.metasProgreso||[]).map(ne=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[l.jsx("input",{type:"checkbox",checked:ne.cumplida,onChange:()=>J(ne.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ne.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[l.jsxs("strong",{children:[ne.trimestre,":"]})," ",ne.meta]}),l.jsx("button",{onClick:()=>H(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:""})]},ne.id)),(!o.metasProgreso||o.metasProgreso.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("p",{children:"No hay metas definidas"}),l.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),pe=()=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),l.jsx("input",{type:"text",value:b.titulo,onChange:ne=>y(_e=>({..._e,titulo:ne.target.value})),placeholder:"Ttulo de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("input",{type:"date",value:new Date(b.fecha).toISOString().slice(0,10),onChange:ne=>y(_e=>({..._e,fecha:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("button",{onClick:G,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!b.titulo.trim()||!b.fecha,children:"Agendar"})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.alertas||[]).map(ne=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:ne.resuelta,onChange:()=>X(ne.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ne.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ne.titulo," (",new Date(ne.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),l.jsx("button",{onClick:()=>ee(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:""})]},ne.id)),(!o.alertas||o.alertas.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("p",{children:"No hay alertas programadas"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),l.jsx("input",{type:"file",onChange:F,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),l.jsx("button",{onClick:z,disabled:!w||j,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:j?"Subiendo...":"Subir"}),w&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",w.name]})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.archivos||[]).map(ne=>l.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsxs("a",{href:ne.url,download:ne.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:ne.nombre,children:[" ",ne.nombre]}),l.jsx("button",{onClick:()=>Y(ne.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:""})]},ne.id)),(!o.archivos||o.archivos.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:""}),l.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),Be=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunin"}),l.jsx("input",{value:E.motivo,onChange:ne=>N(_e=>({..._e,motivo:ne.target.value})),placeholder:"Motivo de la reunin...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:E.acuerdos,onChange:ne=>N(_e=>({..._e,acuerdos:ne.target.value})),placeholder:"Acuerdos tomados en la reunin...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{value:E.asistentes,onChange:ne=>N(_e=>({..._e,asistentes:ne.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"text-right",children:l.jsx("button",{onClick:te,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!E.motivo.trim()||!E.asistentes.trim(),children:"Guardar Reunin"})})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.reuniones||[]).map(ne=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.motivo}),ne.acuerdos&&l.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[l.jsx("strong",{children:"Acuerdos:"})," ",ne.acuerdos]}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ne.fecha).toLocaleString("es-CL")," - Asistentes: ",ne.asistentes]})]}),l.jsx("button",{onClick:()=>ae(ne.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunin",children:""})]})},ne.id)),(!o.reuniones||o.reuniones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:""}),l.jsx("p",{children:"No hay reuniones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera reunin con apoderados"})]})]})]});return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ne=>ne.stopPropagation(),children:[l.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:le,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:" Exportar PDF"}),l.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:""})]})]}),l.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:l.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ne=>l.jsx("button",{onClick:()=>i(ne),className:`${s===ne?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:ne==="alertas"?"Alertas y Archivos":ne==="seguimiento"?"Seguimiento y Metas":ne},ne))})}),l.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&ie(),s==="seguimiento"&&ce(),s==="reuniones"&&Be(),s==="alertas"&&pe()]}),l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),l.jsx("button",{onClick:B,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},mq=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState([]),[s,i]=S.useState(!0),[o,c]=S.useState(null),[u,d]=S.useState(null),[f,h]=S.useState(""),[p,g]=S.useState(""),[x,b]=S.useState(""),[y,w]=S.useState("dashboard");S.useEffect(()=>{i(!0);const R=IXe(D=>{r(D),i(!1)}),P=FXe(D=>a(D));return()=>{R(),P()}},[]);const _=async(R,P)=>{if(t.some(L=>L.nombre===R.nombreCompleto)){alert("Este estudiante ya est en el programa de inclusin.");return}const D={nombre:R.nombreCompleto,curso:R.curso||"",dificultad:P,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await OXe(D),alert(` ${R.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(L){console.error("Error al agregar estudiante:",L),alert("Hubo un error al agregar al estudiante al programa.")}},j=async R=>{try{await DXe(R.id,R)}catch(P){console.error("Error al actualizar la ficha:",P),alert("Hubo un error al guardar los cambios en la ficha.")}},k=async R=>{if(window.confirm("Est seguro de que desea eliminar a este estudiante del programa de inclusin? Esta accin es irreversible."))try{await PXe(R),(o==null?void 0:o.id)===R&&c(null),alert(" Estudiante eliminado del programa PIE")}catch(P){console.error("Error al eliminar estudiante:",P),alert("Hubo un error al eliminar al estudiante.")}},I=R=>{const P=N;if(P.length===0){alert("No hay datos para exportar.");return}const D=P.map(L=>{var M;return{Nombre:L.nombre,Curso:L.curso,Dificultad:L.dificultad,"N Intervenciones":((M=L.intervenciones)==null?void 0:M.length)||0,"Alertas Pendientes":(L.alertas||[]).filter(J=>!J.resuelta).length,"Metas Cumplidas":(L.metasProgreso||[]).filter(J=>J.cumplida).length,"Total Metas":(L.metasProgreso||[]).length,"ltima Actualizacin":L.fechaActualizacionApoyos?new Date(L.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(R==="xlsx"){const L=Fu.json_to_sheet(D),M=Fu.book_new();Fu.book_append_sheet(M,L,"Estudiantes_Inclusion"),SL(M,"Estudiantes_Inclusion.xlsx"),alert(" Archivo Excel exportado exitosamente")}else{const L=new vr;L.text("Listado de Estudiantes - Programa de Inclusin",14,15),vo(L,{startY:20,head:[Object.keys(D[0])],body:D.map(Object.values)}),L.save("Estudiantes_Inclusion.pdf"),alert(" Archivo PDF exportado exitosamente")}},E=S.useMemo(()=>n.filter(R=>{var P;return R.profile===qt.ESTUDIANTE&&(((P=e.cursos)==null?void 0:P.includes(R.curso||""))||e.profile===qt.SUBDIRECCION)}).filter(R=>!t.some(P=>P.nombre===R.nombreCompleto)),[n,t,e]),N=S.useMemo(()=>t.filter(R=>R.nombre.toLowerCase().includes(f.toLowerCase())&&(p===""||R.curso===p)&&(x===""||R.dificultad===x)).sort((R,P)=>R.nombre.localeCompare(P.nombre)),[t,f,p,x]),B=S.useMemo(()=>n.filter(R=>R.profile===qt.PROFESORADO).map(R=>R.nombreCompleto).sort(),[n]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusin Escolar (PIE)"}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>w("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Dashboard"}),l.jsx("button",{onClick:()=>w("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:" Lista de Estudiantes"})]})]}),s?l.jsxs("div",{className:"text-center py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),l.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):l.jsxs(l.Fragment,{children:[y==="dashboard"&&l.jsxs("div",{className:"space-y-8",children:[l.jsx(RXe,{estudiantes:t}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),l.jsx("button",{onClick:()=>w("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos "})]}),l.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(R=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:R.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[R.curso," - ",R.dificultad]})]}),l.jsx("button",{onClick:()=>c(R),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},R.id)),t.length===0&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),l.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nmina"})]})]})]}),l.jsx(hq,{estudiantesDisponibles:E,onSelect:R=>d(R)})]})]}),y==="lista"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",N.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>I("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:" Excel"}),l.jsx("button",{onClick:()=>I("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:" PDF"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),l.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:R=>h(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),l.jsxs("select",{value:p,onChange:R=>g(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Ks.map(R=>l.jsx("option",{value:R,children:R},R))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnstico"}),l.jsxs("select",{value:x,onChange:R=>b(R.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas las Dificultades"}),J5.map(R=>l.jsx("option",{value:R,children:R},R))]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-blue-600",children:N.length}),l.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-green-600",children:t.length}),l.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((R,P)=>R+(P.alertas||[]).filter(D=>!D.resuelta).length,0)}),l.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(R=>R.curso)).size}),l.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[N.map(R=>{var P;return l.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:R.nombre}),(R.alertas||[]).filter(D=>!D.resuelta).length>0&&l.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(R.alertas||[]).filter(D=>!D.resuelta).length," alertas"]})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[R.curso," - ",R.dificultad]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[((P=R.intervenciones)==null?void 0:P.length)||0," intervenciones"]}),l.jsxs("span",{children:[(R.metasProgreso||[]).filter(D=>D.cumplida).length," metas cumplidas"]}),R.fechaActualizacionApoyos&&l.jsxs("span",{children:["lt. actualizacin: ",new Date(R.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>c(R),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),l.jsx("button",{onClick:()=>k(R.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:""})]})]})},R.id)}),N.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:""}),l.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||p||x?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||p||x)&&l.jsx("button",{onClick:()=>{h(""),g(""),b("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),l.jsx(hq,{estudiantesDisponibles:E,onSelect:R=>d(R)})]})]}),u&&l.jsx(LXe,{student:u,onClose:()=>d(null),onConfirm:(R,P)=>{_(R,P),d(null)}}),o&&l.jsx(MXe,{student:o,onClose:()=>c(null),onSave:j,profesores:B})]})},Cle="asistencia_dual",UXe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},QXe=(e,t)=>{const r=zt(Nt(ft,Cle),Yr("emailEstudiante","==",e),_r("fechaHora","desc"));return mr(r,a=>{const s=a.docs.map(i=>UXe(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},HXe=async e=>{try{const t={...e,fechaHora:sr.fromDate(new Date(e.fechaHora))};await Tn(Nt(ft,Cle),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},VXe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),zXe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),$Xe=({currentUser:e})=>{const[t,r]=S.useState(e.curso||""),[n,a]=S.useState([]),[s,i]=S.useState(!1),[o,c]=S.useState(!0),[u,d]=S.useState(null);S.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=QXe(e.email,p=>{a(p),c(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async p=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:p.coords.latitude,longitud:p.coords.longitude}};try{await HXe(g),d({text:`Marca de ${h} registrada con xito!`,type:"success"})}catch(x){console.error("Error saving record to Firestore:",x),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},p=>{console.error("Geolocation error:",p);let g="No se pudo obtener la ubicacin.";switch(p.code){case p.PERMISSION_DENIED:g="Permiso de ubicacin denegado. Por favor, habilite la ubicacin en su navegador y dispositivo.";break;case p.POSITION_UNAVAILABLE:g="La informacin de ubicacin no est disponible en este momento. Verifique su conexin y GPS.";break;case p.TIMEOUT:g="La solicitud de ubicacin ha tardado demasiado. Intntelo de nuevo en un lugar con mejor seal.";break;default:g=`Ocurri un error desconocido al obtener la ubicacin (cdigo: ${p.code}).`;break}d({text:g,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de prctica."}),l.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),l.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"-- Mi curso --"}),Vp.map(h=>l.jsx("option",{value:h,children:h},h))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[l.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),l.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&l.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{children:"Obteniendo ubicacin..."})]}),u&&l.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?l.jsx(VXe,{}):l.jsx(zXe,{}),h.tipo]})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},GXe=async()=>{try{console.log(" Debugging users collection...");const e=Nt(xn,"users"),t=zt(e,jd(10)),r=await ga(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),c={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(c),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},KXe=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=sr.fromDate(r),s=sr.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const f of i)try{const h=Nt(xn,f);try{const p=zt(h,Yr("fechaHora",">=",a),Yr("fechaHora","<=",s)),g=await ga(p);o[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let x=!1;for(const b of g)try{const y=zt(h,Yr(b,">=",a),Yr(b,"<=",s)),w=await ga(y);o[f]={exists:!0,hasDateField:b,count:w.size,sampleDoc:((u=w.docs[0])==null?void 0:u.data())||null},x=!0;break}catch{continue}if(!x){const b=zt(h,_r("__name__"),jd(5)),y=await ga(b);o[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){o[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},qXe=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(` Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(` Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=sr.fromDate(a),o=sr.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(` Total registros encontrados: ${h.length}`),h.length>0&&console.log(" Registros por da:",h.reduce((p,g)=>{let x;g.fechaHora instanceof Date?x=g.fechaHora:typeof g.fechaHora=="string"?x=new Date(g.fechaHora):x=new Date;const b=x.getDate();return p[b]=(p[b]||0)+1,p},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(` Configurando suscripcin para: ${h}`);const p=Nt(xn,h),g=zt(p,Yr("fechaHora",">=",i),Yr("fechaHora","<=",o),_r("fechaHora","desc")),x=mr(g,b=>{console.log(` ${h}: ${b.size} documentos encontrados con filtro`),b.size>0?(console.log(` Registros encontrados en ${h}:`),Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),b.docs.forEach((w,_)=>{var j;if(_<5){const k=w.data();let I;(j=k.fechaHora)!=null&&j.toDate?I=k.fechaHora.toDate():typeof k.fechaHora=="string"?I=new Date(k.fechaHora):I=new Date,console.log(`   ${_+1}. ${k.emailEstudiante} - ${I.toLocaleString()} - ${k.tipo}`),console.log(`       Fecha original: ${k.fechaHora} (tipo: ${typeof k.fechaHora})`)}}),b.forEach(w=>{var E;const _=w.data();let j;(E=_.fechaHora)!=null&&E.toDate?j=_.fechaHora.toDate():typeof _.fechaHora=="string"?j=new Date(_.fechaHora):_.fechaHora instanceof Date?j=_.fechaHora:_.fechaHora?j=new Date(_.fechaHora):j=new Date;const k={id:w.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:j,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},I=`${h}_${w.id}`;u.set(I,k)}),d()):console.log(` ${h}: vaca, manteniendo datos existentes`)},b=>{console.warn(` Error con filtro en ${h}:`,b),console.log(` Intentando estrategia alternativa en ${h}...`);const y=zt(p,jd(200)),w=mr(y,j=>{if(console.log(` ${h} (sin filtro): ${j.size} documentos`),j.size>0){const I=j.docs[0].data();console.log(` Estructura en ${h}:`,Object.keys(I)),console.log(" Primer documento:",I)}const k=j.docs.filter(I=>{var B;const E=I.data();if(!E.fechaHora)return!1;let N;return(B=E.fechaHora)!=null&&B.toDate?N=E.fechaHora.toDate():typeof E.fechaHora=="string"?N=new Date(E.fechaHora):E.fechaHora instanceof Date?N=E.fechaHora:N=new Date(E.fechaHora),N>=a&&N<=s});console.log(` ${h}: ${k.length} registros despus de filtro manual`),k.length>0&&(Array.from(u.keys()).filter(E=>E.startsWith(`${h}_`)).forEach(E=>u.delete(E)),k.forEach(E=>{var D;const N=E.data();let B;(D=N.fechaHora)!=null&&D.toDate?B=N.fechaHora.toDate():typeof N.fechaHora=="string"?B=new Date(N.fechaHora):N.fechaHora instanceof Date?B=N.fechaHora:B=new Date(N.fechaHora);const R={id:E.id,emailEstudiante:N.emailEstudiante||N.email||"",nombreEstudiante:N.nombreEstudiante||N.nombre||"",curso:N.curso||"",fechaHora:B,tipo:N.tipo,ubicacion:N.ubicacion||null,observaciones:N.observaciones||"",...N},P=`${h}_${E.id}`;u.set(P,R)}),d())}),_=c.findIndex(j=>j===x);_>=0?c[_]=w:c.push(w)});c.push(x)}catch(p){console.warn(` Error configurando ${h}:`,p)}}),()=>{c.forEach(h=>{try{h()}catch(p){console.warn("Error unsubscribing:",p)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripcin: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},WXe=(e,t)=>{try{console.log(" Buscando usuarios en mltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(` Total usuarios encontrados: ${o.length}`);const c=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log(" Usuarios por perfil:",c);const u=o.filter(d=>d.profile===qt.ESTUDIANTE);console.log(` Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(o)};let i=!1;return r.forEach(o=>{try{const c=Nt(xn,o),u=zt(c),d=mr(u,f=>{f.size>0?(console.log(` Encontrados ${f.size} usuarios en coleccin: ${o}`),i=!0,Array.from(a.keys()).filter(p=>p.startsWith(`${o}_`)).forEach(p=>a.delete(p)),f.forEach(p=>{var g,x,b,y;try{const w=p.data(),_=w.email||w.userEmail||w.mail||w.correo||"",j=w.nombreCompleto||w.displayName||w.name||w.nombre||w.fullName||"",k=w.curso||w.course||w.class||w.grade||"";let I=w.profile||w.role||w.tipo||w.userType||qt.ESTUDIANTE;if(typeof I=="string"){const B=I.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?I=qt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?I=qt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?I=qt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(I=qt.COORDINADOR_TP)}const E={id:p.id,email:_,nombreCompleto:j,curso:k,profile:I,activo:w.activo!==!1,fechaCreacion:((x=(g=w.fechaCreacion)==null?void 0:g.toDate)==null?void 0:x.call(g))||new Date(w.fechaCreacion)||new Date,ultimaActividad:((y=(b=w.ultimaActividad)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(w.ultimaActividad)||new Date,...w},N=`${o}_${p.id}`;a.set(N,E)}catch(w){console.warn(`Error procesando documento ${p.id} en ${o}:`,w)}}),s()):console.log(` Coleccin ${o}: vaca`)},f=>{console.warn(` Error en coleccin ${o}:`,f)});n.push(d)}catch(c){console.warn(` Error configurando ${o}:`,c)}}),setTimeout(()=>{i||(console.error(" No se encontraron usuarios en ninguna coleccin"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripcin multi-coleccin: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},XXe=(e,t)=>{try{console.log("Setting up users subscription...");const r=Nt(xn,"users"),n=zt(r);return mr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var f,h,p,g;try{const x=d.data();console.log(`Processing user doc ${d.id}:`,x);const b=x.email||x.userEmail||x.mail||"",y=x.nombreCompleto||x.displayName||x.name||x.nombre||"",w=x.curso||x.course||x.class||"";let _=x.profile||x.role||x.tipo||qt.ESTUDIANTE;if(typeof _=="string"){const k=_.toLowerCase();k.includes("estudiante")||k.includes("student")||k.includes("alumno")?_=qt.ESTUDIANTE:k.includes("coordinador")||k.includes("coordinator")?_=qt.COORDINADOR_TP:k.includes("profesor")||k.includes("teacher")||k.includes("docente")?_=qt.PROFESOR:(k.includes("subdireccion")||k.includes("subdir"))&&(_=qt.COORDINADOR_TP)}const j={id:d.id,email:b,nombreCompleto:y,curso:w,profile:_,activo:x.activo!==!1,fechaCreacion:((h=(f=x.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(x.fechaCreacion)||new Date,ultimaActividad:((g=(p=x.ultimaActividad)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date(x.ultimaActividad)||new Date,...x};i.push(j)}catch(x){console.warn(`Error processing user document ${d.id}:`,x)}}),i.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",o);const c=i.filter(d=>d.profile===qt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripcin de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},a_=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},YXe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),JXe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),ZXe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState(null),[c,u]=S.useState(new Date),[d,f]=S.useState("todos"),[h,p]=S.useState("");S.useEffect(()=>{s(!0),o(null);const I=c.getFullYear(),E=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Ao:",I,"Mes:",E);let N=!1,B=!1;const R=()=>{N&&B&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log(" INICIANDO PRUEBA DIRECTA SIMPLE...");try{const D=Nt(xn,"asistencia_dual"),L=zt(D,jd(5)),M=await ga(L);if(console.log(` asistencia_dual - Documentos encontrados: ${M.size}`),M.size>0)M.docs.forEach((J,H)=>{const K=J.data();console.log(`   ${H+1}. ${J.id.slice(0,8)} - ${K.emailEstudiante} - ${K.tipo}`),console.log("      Fecha original:",K.fechaHora),console.log("      Todos los campos:",Object.keys(K))});else{console.log(" No se encontraron documentos en asistencia_dual");const J=["asistenciaEmpresa","asistencia_empresa"];for(const H of J)try{const K=Nt(xn,H),V=zt(K,jd(3)),G=await ga(V);if(console.log(` ${H}: ${G.size} documentos`),G.size>0){const X=G.docs[0].data();console.log("   Estructura:",Object.keys(X)),console.log("   Email:",X.emailEstudiante||X.email),console.log("   Fecha:",X.fechaHora||X.fecha)}}catch(K){console.log(` ${H}: ${K instanceof Error?K.message:"Error"}`)}}}catch(D){console.error(" Error en prueba directa:",D),D.code==="permission-denied"?(console.log(" PROBLEMA: Permisos de Firestore denegados"),console.log(" Ve a Firebase Console  Firestore  Rules y verifica los permisos")):D.code==="failed-precondition"&&(console.log(" PROBLEMA: Faltan ndices en Firestore"),console.log(" Ve a Firebase Console  Firestore  Indexes"))}})(),KXe(I,E).then(D=>{console.log(" Debug info for collections:",D),Object.entries(D).forEach(([L,M])=>{if(M.exists&&M.totalDocs>0){if(console.log(`
 COLECCIN ${L.toUpperCase()}:`),console.log(`    Total documentos: ${M.totalDocs}`),console.log(`    Documentos del perodo: ${M.count}`),console.log(`    Campo de fecha: ${M.hasDateField}`),M.sampleDoc){console.log("    Documento ejemplo:",M.sampleDoc);const J=M.sampleDoc,H=J.emailEstudiante||J.email||J.userEmail||J.correo||"NO ENCONTRADO",K=J.tipo||J.type||J.action||J.tipoRegistro||"NO ENCONTRADO",V=J.fechaHora||J.fecha||J.timestamp||J.createdAt||"NO ENCONTRADO";console.log(`    Email estudiante: ${H}`),console.log(`    Tipo registro: ${K}`),console.log(`    Fecha: ${V}`),console.log("    Todos los campos:",Object.keys(J))}M.filteredDocs&&M.filteredDocs.length>0&&(console.log("    Registros del perodo encontrados:",M.filteredDocs.length),M.filteredDocs.forEach((J,H)=>{H<3&&console.log(`      ${H+1}. ID: ${J.id}`,J.data)}))}else M.exists?console.log(` Coleccin ${L}: vaca`):console.log(` Coleccin ${L}: no existe`)})}).catch(D=>{console.error("Debug error:",D)}),GXe().then(D=>{console.log(" Debug info for users:",D),(!D.exists||D.totalDocs===0)&&(console.log(' Coleccin "users" vaca o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async M=>{var J;try{const H=Nt(xn,M),K=zt(H,jd(5)),V=await ga(K);V.size>0?(console.log(` Encontrada coleccin alternativa: ${M} con ${V.size} documentos`),console.log("Documento muestra:",(J=V.docs[0])==null?void 0:J.data())):console.log(` Coleccin ${M}: vaca`)}catch{console.log(` Coleccin ${M}: no existe`)}}))}).catch(D=>{console.error("Users debug error:",D)});try{console.log("Configurando suscripcin a asistencia...");const D=qXe(I,E,M=>{if(console.log(" Received registros:",M.length),M.length>0){console.log(" ANLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",M[0]);const J=[...new Set(M.map(ee=>ee.emailEstudiante).filter(Boolean))];console.log(" Emails de estudiantes en registros:",J);const H=[...new Set(M.map(ee=>ee.tipo).filter(Boolean))];console.log(" Tipos de registro encontrados:",H);const K=M.reduce((ee,F)=>{const z=new Date(F.fechaHora).getDate();return ee[z]||(ee[z]=[]),ee[z].push(F),ee},{});console.log(" Registros por da del mes:",Object.keys(K).map(ee=>({dia:parseInt(ee),cantidad:K[parseInt(ee)].length})));const V=r.map(ee=>ee.email).filter(Boolean);console.log(" Emails de estudiantes cargados:",V);const G=J.filter(ee=>V.includes(ee)),X=J.filter(ee=>!V.includes(ee));console.log(" Emails que coinciden:",G),console.log(" Emails que NO coinciden:",X)}else console.log(" No se encontraron registros de asistencia para el perodo");t(M),N=!0,R()},M=>{console.error(" Error fetching asistencia:",M),o("Error al cargar datos de asistencia: "+M.message),N=!0,R()});console.log("Configurando suscripcin a usuarios...");const L=WXe(M=>{if(console.log(" Received users (multi-collection):",M.length),M.length>0){console.log("Sample user:",M[0]);const J=M.filter(H=>H.profile===qt.ESTUDIANTE&&H.curso);console.log("Dual students found:",J.length),J.forEach(H=>{console.log(`- ${H.nombreCompleto} (${H.curso}) - ${H.email}`)})}n(M),B=!0,R()},M=>{console.error(" Error fetching users (multi-collection):",M),console.log(" Intentando con funcin original de usuarios...");const J=XXe(H=>{console.log(" Received users (fallback):",H.length),n(H),B=!0,R()},H=>{console.error(" Error en fallback tambin:",H),o("Error al cargar estudiantes: "+M.message),B=!0,R()})});return()=>{console.log("Limpiando suscripciones..."),D&&D(),L&&L()}}catch(D){console.error(" Error setting up subscriptions:",D),o("Error al inicializar conexiones: "+(D instanceof Error?D.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:x,year:b}=S.useMemo(()=>{const I=c.getFullYear(),E=c.getMonth();return{monthDays:new Date(I,E+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:I}},[c]),y=S.useMemo(()=>{let I=r.filter(E=>E.profile===qt.ESTUDIANTE&&E.curso&&Vp.includes(a_(E.curso)));if(d!=="todos"&&(I=I.filter(E=>a_(E.curso||"")===d)),h&&(I=I.filter(E=>E.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const E=[...new Set(e.map(R=>R.emailEstudiante).filter(Boolean))],N=I.map(R=>R.email),B=E.filter(R=>!N.includes(R));if(B.length>0){console.log(" Agregando estudiantes faltantes con registros:",B);const P=B.map(D=>{const L=e.find(M=>M.emailEstudiante===D);return{id:D,email:D,nombreCompleto:(L==null?void 0:L.nombreEstudiante)||D.split("@")[0],curso:(L==null?void 0:L.curso)||"3C",profile:qt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(D=>{const L=d==="todos"||a_(D.curso)===d,M=!h||D.nombreCompleto.toLowerCase().includes(h.toLowerCase());return L&&M&&Vp.includes(a_(D.curso))});I=[...I,...P]}}return console.log(` Estudiantes filtrados para mostrar: ${I.length}`),I.forEach(E=>{console.log(`   - ${E.nombreCompleto} (${E.curso}) - ${E.email}`)}),I.sort((E,N)=>E.nombreCompleto.localeCompare(N.nombreCompleto))},[r,d,h,e]),w=S.useMemo(()=>{console.log(" Procesando datos de asistencia para la tabla..."),console.log(` Total registros a procesar: ${e.length}`),console.log(` Estudiantes disponibles: ${y.length}`);const I=new Map;return e.length===0?(console.log(" No hay registros para procesar an"),I):(e.forEach((E,N)=>{const B=E.emailEstudiante;if(!B)return;let R;if(E.fechaHora instanceof Date)R=E.fechaHora;else if(E.fechaHora&&typeof E.fechaHora=="object"&&"toDate"in E.fechaHora)R=E.fechaHora.toDate();else if(typeof E.fechaHora=="string")R=new Date(E.fechaHora);else{console.warn("Fecha no vlida en registro:",E);return}const P=R.getDate(),D=R.getMonth(),L=R.getFullYear();N<3&&console.log(` Registro ${N+1}:`,{email:B,tipo:E.tipo,fechaOriginal:E.fechaHora,fechaProcesada:R.toLocaleString(),ao:L,mes:D,da:P}),I.has(B)||I.set(B,new Map);const M=I.get(B);M.has(P)||M.set(P,{});const J=M.get(P);E.tipo==="Entrada"?(!J.entrada||R<new Date(J.entrada.fechaHora))&&(J.entrada=E):E.tipo==="Salida"&&(!J.salida||R>new Date(J.salida.fechaHora))&&(J.salida=E)}),console.log(" Datos de asistencia procesados:",{estudiantesConRegistros:I.size,estudiantes:Array.from(I.keys()),registrosPorEstudiante:Array.from(I.entries()).map(([E,N])=>({email:E,dias:Array.from(N.keys()),totalRegistros:Array.from(N.values()).reduce((B,R)=>B+(R.entrada?1:0)+(R.salida?1:0),0)}))}),I)},[e]),_=I=>{u(E=>{const N=new Date(E);return N.setMonth(N.getMonth()+I),N})},j=I=>{I!=null&&I.latitud&&(I!=null&&I.longitud)&&window.open(`https://www.google.com/maps?q=${I.latitud},${I.longitud}`,"_blank")},k=["D","L","M","M","J","V","S"];return i?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[l.jsx("button",{onClick:()=>_(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:""}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${x} ${b}`}),l.jsx("button",{onClick:()=>_(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:""})]}),l.jsxs("select",{value:d,onChange:I=>f(I.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"todos",children:"Todos los Cursos"}),Vp.map(I=>l.jsx("option",{value:I,children:I},I))]}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:I=>p(I.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?l.jsxs("div",{className:"text-center text-amber-600 py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),l.jsx("div",{children:"Cargando datos de asistencia..."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(I,E)=>{const B=new Date(b,c.getMonth(),E+1).getDay(),R=B===0||B===6;return l.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${R?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[l.jsx("div",{className:"font-semibold",children:k[B]}),l.jsx("div",{children:E+1})]},E)})]})}),l.jsx("tbody",{children:y.length>0?y.map(I=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:I.nombreCompleto}),Array.from({length:g},(E,N)=>{var L;const B=N+1,R=(L=w.get(I.email))==null?void 0:L.get(B),P=new Date(b,c.getMonth(),N+1),D=P.getDay()===0||P.getDay()===6;return I.email==="alexis.robles@industrialderecoleta.cl"&&B===2&&console.log(" Verificando da 2 para Alexis:",{email:I.email,day:B,hasDataForStudent:w.has(I.email),studentDayRecords:R,allAttendanceKeys:Array.from(w.keys()),daysForStudent:w.get(I.email)?Array.from(w.get(I.email).keys()):[]}),l.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${D?"bg-slate-100 dark:bg-slate-700/50":""}`,children:l.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(R==null?void 0:R.entrada)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return j((M=R.entrada)==null?void 0:M.ubicacion)},children:[l.jsx(YXe,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(R==null?void 0:R.salida)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var M;return j((M=R.salida)==null?void 0:M.ubicacion)},children:[l.jsx(JXe,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(R.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},B)})]},I.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la bsqueda."})})})]})})]})},wk="evaluaciones_formativas",Ek="calificaciones_formativas",DL="trabajos_grupales_formativos",eYe="usuarios",PL=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},tYe=(e,t,r)=>{const n=zt(Nt(ft,wk),Yr("curso","==",e),Yr("asignatura","==",t),_r("fecha","asc"));return mr(n,a=>{r(a.docs.map(s=>PL(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},rYe=async(e,t)=>{const r=Bg(ft),n=dr(Nt(ft,wk));r.set(n,{...e,fecha:sr.fromDate(new Date(e.fecha+"T00:00:00"))});const a=dr(ft,Ek,n.id);return r.set(a,t),await r.commit(),n.id},nYe=async(e,t)=>{const r=dr(ft,wk,e);await Ji(r,t,{merge:!0})},aYe=async e=>{const t=Bg(ft);t.delete(dr(ft,wk,e)),t.delete(dr(ft,Ek,e)),await t.commit()},sYe=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=dr(ft,Ek,n);return mr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},iYe=async(e,t)=>{const r=dr(ft,Ek,e);await Ji(r,t,{merge:!0})},oYe=(e,t,r)=>{const n=zt(Nt(ft,DL),Yr("curso","==",e),Yr("asignatura","==",t),_r("fechaPresentacion","desc"));return mr(n,a=>{r(a.docs.map(s=>PL(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},lYe=async e=>{const t={...e,fechaPresentacion:sr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await Tn(Nt(ft,DL),t)},cYe=async(e,t)=>{const r=dr(ft,DL,e);await Ji(r,t,{merge:!0})},uYe=e=>{const t=zt(Nt(ft,eYe));return mr(t,r=>{e(r.docs.map(n=>PL(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},_le=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},lv={"Lengua y Literatura":"",Matemtica:"",Ingls:"",Filosofa:"","Historia y Geografa":"","Educacin Ciudadana":"",Ciencias:"","Ciencias para la Ciudadana":"",Artes:"",Msica:"","Educacin Fsica":"",Orientacin:"","Mecnica Industrial":"","Mecnica Automotriz":"",Emprendimiento:"",Tecnologa:"","Pensamiento Lgico":"","Competencia Lectora":"",Default:""},Nle=e=>e.startsWith("1")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},dYe=({cursos:e,onSelect:t})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=Nle(r);return l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[l.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),l.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[l.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),l.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),AYe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=Nle(e);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:" Volver a Cursos"}),l.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>l.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[l.jsx("span",{className:"text-2xl",children:lv[s]||lv.Default}),l.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},fYe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=S.useState([]),[i,o]=S.useState({}),[c,u]=S.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=S.useState(null),[h,p]=S.useState(null),[g,x]=S.useState(!0),b=S.useMemo(()=>r.filter(N=>N.profile===qt.ESTUDIANTE&&_le(N.curso||"")===e).map(N=>N.nombreCompleto).sort((N,B)=>N.localeCompare(B)),[r,e]);S.useEffect(()=>{x(!0);const N=tYe(e,t,B=>{s(B);const R=B.map(D=>D.id),P=sYe(R,D=>{o(L=>({...L,...D}))});return x(!1),()=>P()});return()=>N()},[e,t]);const y=N=>{const{name:B,value:R}=N.target;d?f(P=>P?{...P,[B]:R}:null):u(P=>({...P,[B]:R}))},w=async N=>{if(N.preventDefault(),p(null),!c.nombreActividad.trim()){p("El nombre de la actividad es obligatorio.");return}const B={asignatura:t,curso:e,...c},R=b.reduce((P,D)=>(P[D]="trabajado",P),{});try{await rYe(B,R),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(P){console.error(P),p("No se pudo crear la evaluacin.")}},_=(N,B)=>{var L;const R=((L=i[N])==null?void 0:L[B])||"trabajado";let P;R==="trabajado"?P="no trabajado":R==="no trabajado"?P="ausente":P="trabajado";const D={...i,[N]:{...i[N]||{},[B]:P}};o(D),iYe(N,{[B]:P}).catch(M=>{console.error("Error updating grade:",M)})},j=N=>f(N),k=async()=>{if(d)try{await nYe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(N){console.error(N),p("No se pudo guardar la edicin.")}},I=async N=>{if(window.confirm("Eliminar esta evaluacin y todas sus calificaciones?"))try{await aYe(N)}catch(B){console.error(B),p("No se pudo eliminar la evaluacin.")}},E=S.useCallback(N=>{if(a.length===0)return"-";let B=0,R=0;return a.forEach(P=>{var L;const D=(L=i[P.id])==null?void 0:L[N];D==="trabajado"?(B+=7,R++):D==="no trabajado"&&(B+=2,R++)}),R===0?"-":(B/R).toFixed(1)},[i,a]);return g?l.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("form",{onSubmit:w,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluacin"}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),l.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),l.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"w-full",children:l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&l.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(N=>l.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===N.id?l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("button",{onClick:k,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:""})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"font-semibold",children:N.nombreActividad}),l.jsx("span",{className:"font-normal text-slate-500",children:N.fecha}),l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("button",{onClick:()=>j(N),className:"text-blue-500 hover:text-blue-700",children:""}),l.jsx("button",{onClick:()=>I(N.id),className:"text-red-500 hover:text-red-700",children:""})]})]})},N.id)),l.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:b.map(N=>l.jsxs("tr",{children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:N}),a.map(B=>{var D;const R=(D=i[B.id])==null?void 0:D[N];let P;return R==="trabajado"?P=lv[t]||lv.Default:R==="no trabajado"?P="":R==="ausente"?P="A":P=lv[t]||lv.Default,l.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:l.jsx("button",{onClick:()=>_(B.id,N),className:`text-3xl transition-opacity duration-200 ${R==="trabajado"?"opacity-100":R==="no trabajado"?"opacity-40":R==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:P})},B.id)}),l.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:E(N)})]},N))})]})})]})},hYe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=S.useState({}),[h,p]=S.useState(2),g=S.useMemo(()=>r.filter(j=>j.profile===qt.ESTUDIANTE&&_le(j.curso||"")===e).sort((j,k)=>j.nombreCompleto.localeCompare(k.nombreCompleto)),[r,e]);S.useEffect(()=>{const j=oYe(e,t,s);return()=>j()},[e,t]),S.useEffect(()=>{if(i){const j={};i.grupos.forEach(k=>{k.integrantes.forEach(I=>{j[I.nombre]={groupNumber:String(k.numero),role:I.rol||""}})}),f(j)}else f({})},[i]);const x=async j=>{if(j.preventDefault(),!c.nombre.trim())return;const k={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await lYe(k),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(I){console.error(I),alert("No se pudo crear la actividad grupal.")}},b=async()=>{if(!i)return;const j=new Map;for(const I of g){const E=d[I.nombreCompleto];if(E&&E.groupNumber){const N=parseInt(E.groupNumber,10);isNaN(N)||(j.has(N)||j.set(N,[]),j.get(N).push({nombre:I.nombreCompleto,rol:E.role||""}))}}const k=Array.from(j.entries()).map(([I,E])=>({numero:I,integrantes:E})).sort((I,E)=>I.numero-E.numero);try{await cYe(i.id,{grupos:k}),alert("Grupos guardados con xito.")}catch(I){console.error(I),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const j=[...g].sort(()=>Math.random()-.5),k={};j.forEach((I,E)=>{var N;k[I.nombreCompleto]={groupNumber:String(E%h+1),role:((N=d[I.nombreCompleto])==null?void 0:N.role)||""}}),f(k)},w=(j,k,I)=>{f(E=>({...E,[j]:{...E[j]||{groupNumber:"",role:""},[k]:I}}))},_=S.useMemo(()=>{const j=new Map;return Object.entries(d).forEach(([k,I])=>{I.groupNumber&&(j.has(I.groupNumber)||j.set(I.groupNumber,[]),j.get(I.groupNumber).push({nombre:k,rol:I.role}))}),Array.from(j.entries()).sort((k,I)=>parseInt(k[0])-parseInt(I[0]))},[d]);return i?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a Actividades"}),l.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),l.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"md:col-span-1 space-y-4",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignacin"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:h,onChange:j=>p(parseInt(j.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),l.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Nmina del Curso"}),l.jsx("table",{className:"w-full text-sm",children:l.jsx("tbody",{children:g.map(j=>{var k;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-1 pr-2",children:j.nombreCompleto}),l.jsx("td",{className:"py-1",children:l.jsx("input",{type:"number",value:((k=d[j.nombreCompleto])==null?void 0:k.groupNumber)||"",onChange:I=>w(j.nombreCompleto,"groupNumber",I.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N"})})]},j.id)})})})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:_.map(([j,k])=>l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[l.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",j]}),l.jsx("ul",{className:"space-y-2",children:k.map(I=>l.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"flex-1 truncate",children:I.nombre}),l.jsxs("select",{value:I.rol||"",onChange:E=>w(I.nombre,"role",E.target.value),className:"p-1 border rounded text-xs w-32",children:[l.jsx("option",{value:"",children:"-- Asignar Rol --"}),dee.map(E=>l.jsx("option",{value:E,children:E},E))]})]},I.nombre))})]},j))})]})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:" Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),l.jsxs("form",{onSubmit:x,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsx("input",{value:c.nombre,onChange:j=>u({...c,nombre:j.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("input",{type:"date",value:c.fecha,onChange:j=>u({...c,fecha:j.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(j=>l.jsxs("button",{onClick:()=>o(j),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[l.jsx("p",{className:"font-bold",children:j.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",j.fechaPresentacion]})]},j.id))]})]})},mYe=({currentUser:e})=>{const[t,r]=S.useState("calificaciones"),[n,a]=S.useState(null),[s,i]=S.useState(null),[o,c]=S.useState([]),[u,d]=S.useState(!0);S.useEffect(()=>{d(!0);const x=uYe(b=>{c(b),d(!1)});return()=>x()},[]);const f=S.useMemo(()=>e.cursos||[],[e.cursos]),h=S.useMemo(()=>e.asignaturas||[],[e.asignaturas]),p=({tab:x,label:b})=>l.jsx("button",{onClick:()=>r(x),className:`${t===x?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),g=()=>{if(u)return l.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return l.jsx(dYe,{cursos:f,onSelect:a});if(!s)return l.jsx(AYe,{curso:n,asignaturas:h,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return l.jsx(fYe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(t==="grupos")return l.jsx(hYe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(p,{tab:"calificaciones",label:"Calificaciones"}),l.jsx(p,{tab:"grupos",label:"Trabajos Grupales"})]})}),l.jsx("div",{className:"mt-6",children:g()})]})},pYe=({acompanamientos:e,ciclosOPR:t,standaloneCiclos:r})=>{const n=e.length,a=Object.values(t).reduce((f,h)=>f+h.length,0)+r.length,s=[...Object.values(t).flat(),...r],i=new Set([...e.map(f=>f.docente),...s.map(f=>f.docenteInfo)]).size,o=s.reduce((f,h)=>{const p=new Date(h.fecha).toLocaleDateString("es-ES",{month:"long"});return f[p]=(f[p]||0)+1,f},{}),c=s.reduce((f,h)=>(h.asignaturaInfo&&(f[h.asignaturaInfo]=(f[h.asignaturaInfo]||0)+1),f),{}),u=Object.entries(c).sort(([,f],[,h])=>h-f).slice(0,5);s.reduce((f,h)=>{if(!h.horaInicio||!h.horaTermino)return f;const p=new Date("2000/01/01 "+h.horaInicio),x=(new Date("2000/01/01 "+h.horaTermino).getTime()-p.getTime())/(1e3*60);return f+x},0)/s.length;const d=s.filter(f=>{var h,p,g;return((h=f.retroalimentacion)==null?void 0:h.exito)&&((p=f.retroalimentacion)==null?void 0:p.modelo)&&((g=f.retroalimentacion)==null?void 0:g.foco)}).length;return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:l.jsx(WA,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Acompaamientos"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:n})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/50 rounded-lg",children:l.jsx(_p,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Total Ciclos OPR"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:a})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(Zl,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docentes Observados"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:i})]})]})}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:l.jsx(Zo,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-medium text-slate-600 dark:text-slate-400",children:"Retroalimentacin Completa"}),l.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:d})]})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(Id,{className:"w-5 h-5 text-indigo-600"}),"Ciclos por Mes"]}),l.jsx("div",{className:"space-y-2",children:Object.entries(o).map(([f,h])=>l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 capitalize",children:f}),l.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:h})]}),l.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-2 bg-indigo-600 dark:bg-indigo-500 rounded-full",style:{width:`${h/a*100}%`}})})]})},f))})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(ef,{className:"w-5 h-5 text-amber-600"}),"Asignaturas Ms Observadas"]}),l.jsx("div",{className:"space-y-2",children:u.map(([f,h])=>l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:f}),l.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:h})]}),l.jsx("div",{className:"h-2 bg-slate-100 dark:bg-slate-700 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-2 bg-amber-600 dark:bg-amber-500 rounded-full",style:{width:`${h/Math.max(...Object.values(c))*100}%`}})})]})},f))})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-lg shadow-sm border dark:border-slate-700",children:[l.jsxs("h3",{className:"text-lg font-semibold mb-4 text-slate-900 dark:text-white flex items-center gap-2",children:[l.jsx(EP,{className:"w-5 h-5 text-blue-600"}),"ltimos Ciclos OPR"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Docente"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Fecha"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Asignatura"}),l.jsx("th",{className:"text-left py-2 px-3 text-sm font-medium text-slate-600 dark:text-slate-400",children:"Estado"})]})}),l.jsx("tbody",{children:s.sort((f,h)=>new Date(h.fecha).getTime()-new Date(f.fecha).getTime()).slice(0,5).map(f=>{var h;return l.jsxs("tr",{className:"border-t dark:border-slate-700",children:[l.jsx("td",{className:"py-2 px-3 text-sm text-slate-900 dark:text-slate-300",children:f.docenteInfo}),l.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:new Date(f.fecha).toLocaleDateString()}),l.jsx("td",{className:"py-2 px-3 text-sm text-slate-600 dark:text-slate-400",children:f.asignaturaInfo}),l.jsx("td",{className:"py-2 px-3",children:(h=f.retroalimentacion)!=null&&h.exito?l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 rounded",children:[l.jsx(Zo,{className:"w-3 h-3"})," Completado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-700 dark:text-amber-400 rounded",children:[l.jsx(F2,{className:"w-3 h-3"})," En proceso"]})})]},f.id)})})]})})]})]})},Sle=mP(),oE="acompanamientos",km="ciclos_opr",Bm=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},kle=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},gYe=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=kle(r);return`videos_opr/${n}/${a}/${s}`},xYe=async(e,t,r)=>{try{if(!M6.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesin nuevamente.");if(!e)throw new Error("No se proporcion un archivo vlido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Mximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");let s="";const i=(t||"").split("/");if(i.length>=4&&i[0]==="videos_opr"){const d=i[1],f=i[2],h=i.slice(3).join("/");s=gYe(d,f,h)}else{const d=Date.now(),f=kle(e.name);s=`videos_opr/general/${d}_${f}`}const o=x4(Sle,s),c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:M6.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=Y1e(o,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",p=>{const g=p.bytesTransferred/p.totalBytes*100,x=Math.floor(g);r&&x!==h&&(h=x,r(x))},p=>{let g="Error desconocido durante la subida.";switch(p==null?void 0:p.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agot el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexin a internet.";break;default:p!=null&&p.message&&(g=p.message);break}f(new Error(g))},async()=>{try{const p=await hP(u.snapshot.ref);d(p)}catch{f(new Error("El archivo se subi, pero no se pudo obtener la URL de descarga."))}})})}catch(n){const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo.";throw new Error(a)}},RL=async e=>{try{const t=x4(Sle,e),{items:r,prefixes:n}=await J1e(t);await Promise.all(r.map(a=>Z1e(a))),await Promise.all(n.map(a=>RL(a.fullPath)))}catch{}},vYe=async()=>{try{const e=zt(Nt(ft,oE),_r("fecha","desc"));return(await ga(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Bm(a==null?void 0:a.fecha)}}).sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch{throw new Error("No se pudieron cargar los acompaamientos")}},bYe=async e=>{try{const t={...e,fecha:sr.fromDate(new Date(e.fecha)),fechaCreacion:sr.now()},r=await Tn(Nt(ft,oE),t);return{...e,id:r.id,fecha:Bm(e.fecha)}}catch{throw new Error("No se pudo crear el acompaamiento")}},yYe=async(e,t)=>{try{const r={...t,...t.fecha?{fecha:sr.fromDate(new Date(t.fecha))}:{},fechaModificacion:sr.now()};await Vu(dr(ft,oE,e),r)}catch{throw new Error("No se pudo actualizar el acompaamiento")}},wYe=async e=>{try{const t=zt(Nt(ft,km),Yr("acompanamientoId","==",e)),r=await ga(t),n=Bg(ft);r.forEach(a=>n.delete(dr(ft,km,a.id))),await n.commit(),await RL(`videos_opr/${e}`),await za(dr(ft,oE,e))}catch{throw new Error("No se pudo eliminar el acompaamiento y sus datos asociados")}},pq=async e=>{var t;try{if(!(e!=null&&e.fecha))throw new Error("Falta fecha al crear ciclo OPR.");const r={...e,acompanamientoId:String(e.acompanamientoId||""),fecha:sr.fromDate(new Date(e.fecha)),fechaCreacion:sr.now()};(t=e==null?void 0:e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:sr.fromDate(new Date(e.seguimiento.fecha))});const n=await Tn(Nt(ft,km),r);return{...e,id:n.id,acompanamientoId:String(e.acompanamientoId||""),fecha:Bm(e.fecha)}}catch{throw new Error("No se pudo crear el ciclo OPR")}},EYe=async(e,t)=>{var r;try{const n={...t};t.fecha&&(n.fecha=sr.fromDate(new Date(t.fecha))),(r=t.seguimiento)!=null&&r.fecha&&(n.seguimiento={...t.seguimiento,fecha:sr.fromDate(new Date(t.seguimiento.fecha))}),n.fechaModificacion=sr.now(),await Vu(dr(ft,km,e),n)}catch{throw new Error("No se pudo actualizar el ciclo OPR")}},CYe=async e=>{try{const t=zt(Nt(ft,km),Yr("acompanamientoId","==",e),_r("fecha","desc"));return(await ga(t)).docs.map(a=>{var o;const s=a.data(),i={id:a.id,...s,fecha:Bm(s==null?void 0:s.fecha)};return(o=s==null?void 0:s.seguimiento)!=null&&o.fecha&&(i.seguimiento={...s.seguimiento,fecha:Bm(s.seguimiento.fecha)}),i})}catch{throw new Error("No se pudieron cargar los ciclos OPR. Revisa el ndice compuesto (acompanamientoId + fecha).")}},_Ye=async()=>{try{const e=zt(Nt(ft,km),Yr("acompanamientoId","==",""),_r("fecha","desc"));return(await ga(e)).docs.map(n=>{var i;const a=n.data(),s={id:n.id,...a,fecha:Bm(a==null?void 0:a.fecha)};return(i=a==null?void 0:a.seguimiento)!=null&&i.fecha&&(s.seguimiento={...a.seguimiento,fecha:Bm(a.seguimiento.fecha)}),s})}catch(e){throw console.error("Error fetching standalone OPR cycles:",e),new Error("No se pudieron cargar los ciclos OPR independientes.")}},gq=async e=>{try{const t=await D1(dr(ft,km,e));if(!t.exists())return;const r=t.data(),n=(r==null?void 0:r.acompanamientoId)||"general";await RL(`videos_opr/${n}/${e}`),await za(dr(ft,km,e))}catch{throw new Error("No se pudo eliminar el ciclo OPR")}},NYe=async e=>{try{const t=zt(Nt(ft,oE),Yr("docente","==",e),_r("fecha","desc"));return(await ga(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:Bm(a==null?void 0:a.fecha)}})}catch{throw new Error("No se pudieron cargar los acompaamientos del docente")}},SYe=async e=>{try{const t=zt(Nt(ft,"rubricas_personalizadas"),Yr("docente","==",e)),r=await ga(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch{return null}},kYe=async()=>await hle(),BYe=({label:e,onFileChange:t,onLinkChange:r,uploadedUrl:n,onRemove:a,isUploading:s,accept:i="video/mp4,video/quicktime,video/avi,video/mov",error:o,progress:c=0,allowLink:u=!1})=>{const[d,f]=S.useState(!1),[h,p]=S.useState(!1),[g,x]=S.useState(""),b=`file-upload-${e.replace(/\s+/g,"-")}`,y=E=>{E.preventDefault(),E.stopPropagation(),E.type==="dragenter"||E.type==="dragover"?f(!0):E.type==="dragleave"&&f(!1)},w=E=>{if(E.preventDefault(),E.stopPropagation(),f(!1),E.dataTransfer.files&&E.dataTransfer.files[0]&&!s){const N=E.dataTransfer.files[0];j(N)}},_=E=>{if(E.target.files&&E.target.files[0]&&!s){const N=E.target.files[0];j(N)}},j=E=>{if(E.size>524288e3){alert(`El archivo es demasiado grande. Tamao mximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(E.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(E)},k=()=>o?"bg-red-500":c===100?"bg-green-500":"bg-blue-500",I=()=>{if(!(!g||!r)){if(!g.startsWith("http://")&&!g.startsWith("https://")){alert("Por favor ingresa una URL vlida que comience con http:// o https://");return}r(g),p(!1),x("")}};return l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300",children:e}),u&&!n&&!s&&l.jsx("button",{type:"button",onClick:()=>p(!h),className:"text-sm text-blue-600 hover:text-blue-700 dark:text-blue-400",children:h?"Cancelar":"Insertar enlace"})]}),h&&l.jsxs("div",{className:"flex gap-2 mb-4",children:[l.jsx("input",{type:"url",value:g,onChange:E=>x(E.target.value),placeholder:"https://...",className:"flex-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{type:"button",onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Guardar"})]}),n?l.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[l.jsx(Zo,{className:"w-5 h-5 text-green-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:n.startsWith("http")?"Ver video enlazado":"Ver video cargado"}),l.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:n.startsWith("http")?"Enlace guardado exitosamente":"Video subido exitosamente"})]}),l.jsx("button",{type:"button",onClick:a,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:l.jsx(tl,{className:"w-4 h-4"})})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${d?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":s?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":o?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${s?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:y,onDragLeave:y,onDragOver:y,onDrop:w,onClick:()=>{var E;return!s&&((E=document.getElementById(b))==null?void 0:E.click())},children:[l.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:s?l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),l.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[c.toFixed(1),"% completado"]})]}):o?l.jsxs("div",{className:"text-center",children:[l.jsx(qA,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),l.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):l.jsxs("div",{className:"text-center",children:[l.jsx(vee,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aqu"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (mx. 500MB)"})]})}),l.jsx("input",{id:b,type:"file",onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:s,accept:i,style:{display:"none"}})]}),s&&l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:`${k()} h-2 rounded-full transition-all duration-300`,style:{width:`${c}%`}})}),o&&l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[l.jsx(qA,{className:"w-4 h-4 text-red-500"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:o})]})]})]})},TYe=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=S.useState(!1),[o,c]=S.useState({}),[u,d]=S.useState({}),[f,h]=S.useState({}),[p,g]=S.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),x=S.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",foco:"",elementosIdentificar:""},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:p.curso||"",profesor:p.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,p]),[b,y]=S.useState(t||x);S.useEffect(()=>{t?(y(t),(t.acompanamientoId===""||!t.acompanamientoId)&&g({docente:t.docenteInfo||"",curso:t.cursoInfo||"",asignatura:t.asignaturaInfo||""})):y(x)},[t,x]);const w=L=>{const{name:M,value:J}=L.target,H=M.split(".");H.length>1?y(K=>{const V=JSON.parse(JSON.stringify(K));let G=V;for(let X=0;X<H.length-1;X++)G=G[H[X]];return G[H[H.length-1]]=J,V}):y(K=>({...K,[M]:J}))},_=(L,M,J)=>{y(H=>({...H,detallesObservacion:H.detallesObservacion.map(K=>K.id===L?{...K,[M]:J}:K)}))},j=()=>{const L=b.detallesObservacion[b.detallesObservacion.length-1],M=L&&parseInt(L.minuto.split("-")[1],10)||0,J=`${M+1}-${M+5}`;y(H=>({...H,detallesObservacion:[...H.detallesObservacion,{id:`row_${Date.now()}`,minuto:J,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},k=L=>{y(M=>({...M,detallesObservacion:M.detallesObservacion.filter(J=>J.id!==L)}))},I=async(L,M)=>{h(J=>({...J,[L]:null})),c(J=>({...J,[L]:!0})),d(J=>({...J,[L]:0}));try{const J=Date.now(),H=M.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),K=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",V=b.id?b.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",G=`videos_opr/${K}/${V}/${J}_${H}`,X=await xYe(M,G,ee=>{d(F=>({...F,[L]:ee}))});E(L,X),d(ee=>({...ee,[L]:100}))}catch(J){const H=(J==null?void 0:J.message)||"Error desconocido al subir el archivo";h(K=>({...K,[L]:H})),alert(`Error al subir el video: ${H}`)}finally{c(J=>({...J,[L]:!1})),setTimeout(()=>{d(J=>({...J,[L]:0}))},2e3)}},E=(L,M)=>{const J=L.split(".");J.length>1?y(H=>{const K=JSON.parse(JSON.stringify(H));let V=K;for(let G=0;G<J.length-1;G++)V=V[J[G]];return V[J[J.length-1]]=M,K}):y(H=>({...H,[L]:M}))},N=L=>{const M=L.split(".");M.length>1?y(J=>{const H=JSON.parse(JSON.stringify(J));let K=H;for(let V=0;V<M.length-1;V++)K=K[M[V]];return K[M[M.length-1]]="",H}):y(J=>({...J,[L]:""})),h(J=>({...J,[L]:null})),d(J=>({...J,[L]:0}))},B=async(L,M,J)=>{if(!J||!J.trim())return J;const H=`Mejora la redaccin del siguiente texto con un tono tcnico-pedaggico propio de informes educativos. Mantn el sentido original y NO agregues informacin nueva ni ejemplos inventados. Devulvelo como un texto breve, claro y directo. Texto (${M}):

"""${J}"""`;try{return(await L.generateContent(H)).response.text()}catch(K){return console.error(`Error improving text for ${M}:`,K),J}},R=async()=>{var L,M;i(!0);try{const J="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",K=new cs(J).getGenerativeModel({model:"gemini-1.5-flash-latest"}),V=b.retroalimentacion,G=b.planificacion,X=await Promise.all([B(K,"xito",V.exito),B(K,"Modelo",V.modelo),B(K,"Foco",V.foco),B(K,"Elementos a identificar",V.elementosIdentificar),B(K,"Brecha - Preguntas",((L=V.brecha)==null?void 0:L.preguntas)||""),B(K,"Brecha - Indicadores",((M=V.brecha)==null?void 0:M.indicadores)||""),B(K,"Planificacin - Preparacin",G.preparacion),B(K,"Planificacin - Objetivo",G.objetivo),B(K,"Planificacin - Actividad",G.actividad),B(K,"Planificacin - Tiempo",G.tiempo)]);y(ee=>({...ee,retroalimentacion:{...ee.retroalimentacion,exito:X[0],modelo:X[1],foco:X[2],elementosIdentificar:X[3],brecha:{...ee.retroalimentacion.brecha,preguntas:X[4],indicadores:X[5]}},planificacion:{...ee.planificacion,preparacion:X[6],objetivo:X[7],actividad:X[8],tiempo:X[9]}})),alert("Textos mejorados exitosamente con IA")}catch(J){console.error(J),alert("No se pudo mejorar la redaccin. Intenta nuevamente.")}finally{i(!1)}},P=()=>{const L=new vr,M=L.internal.pageSize.getWidth(),J=15,H=M-J*2;let K=20;const V=F=>{K>260&&(L.addPage(),K=20),L.setFontSize(14),L.setFont("helvetica","bold"),L.text(F,J,K),K+=10},G=(F,z="")=>{if(!F)return;K>270&&(L.addPage(),K=20),L.setFontSize(10),L.setFont("helvetica","bold"),L.text(z,J,K),L.setFont("helvetica","normal");const Y=L.splitTextToSize(F,H-(z?15:0));L.text(Y,J+(z?15:0),K),K+=Y.length*5+4};L.setFontSize(18),L.setFont("helvetica","bold"),L.text("Informe de Ciclo OPR",M/2,K,{align:"center"}),K+=15,V("1. Datos Generales");const X=[["Docente:",p.docente],["Curso:",p.curso],["Asignatura:",p.asignatura],["Fecha:",new Date(b.fecha).toLocaleDateString("es-CL")],["Hora:",`${b.horaInicio} - ${b.horaTermino}`],["Ciclo:",b.nombreCiclo]];vo(L,{body:X,startY:K,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),K=L.lastAutoTable.finalY+10,V("2. Registro Detallado de Observacin");const ee=b.detallesObservacion.map(F=>[F.minuto,F.accionesDocente,F.accionesEstudiantes,F.actividades]);vo(L,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:ee,startY:K,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255},styles:{fontSize:9,cellPadding:2},didDrawPage:F=>{var z;K=((z=F.cursor)==null?void 0:z.y)||20}}),K=L.lastAutoTable.finalY+10,V("3. Retroalimentacin Docente"),G(b.retroalimentacion.exito,"xito:"),G(b.retroalimentacion.modelo,"Modelo:"),G(b.retroalimentacion.foco,"Foco:"),G(b.retroalimentacion.elementosIdentificar,"Elementos a Identificar:"),K+=5,L.setFontSize(11),L.setFont("helvetica","bold"),L.text("Anlisis de Brecha",J,K),K+=7,G(`${b.retroalimentacion.brecha.minutoInicial} a ${b.retroalimentacion.brecha.minutoFinal}`,"Minutos:"),G(b.retroalimentacion.brecha.preguntas,"Preguntas:"),G(b.retroalimentacion.brecha.indicadores,"Indicadores:"),V("4. Planificacin de Prctica"),G(b.planificacion.preparacion,"Preparacin:"),G(b.planificacion.objetivo,"Objetivo:"),G(b.planificacion.actividad,"Actividad:"),G(b.planificacion.tiempo,"Tiempo:"),V("5. Seguimiento"),G(new Date(b.seguimiento.fecha).toLocaleDateString("es-CL"),"Fecha:"),G(b.seguimiento.firma,"Firma (Registrado por):"),L.save(`Informe_OPR_${p.docente}_${b.fecha}.pdf`)},D=async L=>{if(L.preventDefault(),!p.docente||!p.curso||!p.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!b.nombreCiclo||!b.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const M={...b,docenteInfo:p.docente,cursoInfo:p.curso,asignaturaInfo:p.asignatura,seguimiento:{...b.seguimiento,profesor:p.docente,curso:p.curso}};try{await r(M)}catch(J){console.error("Error al guardar ciclo OPR:",J),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Bsicos del Ciclo OPR"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),l.jsxs("select",{value:p.docente,onChange:L=>g(M=>({...M,docente:L.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(L=>l.jsx("option",{value:L,children:L},L))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:p.asignatura,onChange:L=>g(M=>({...M,asignatura:L.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(L=>l.jsx("option",{value:L,children:L},L))]})]})]})]}),l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:R,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[l.jsx(wP,{className:"w-4 h-4"}),s?"Mejorando redaccin...":"Mejorar Redaccin del Ciclo"]}),l.jsxs("button",{type:"button",onClick:P,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(I2,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redaccin de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),l.jsxs("form",{onSubmit:D,className:"space-y-8",children:[l.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(_p,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("input",{type:"text",name:"nombreCiclo",value:b.nombreCiclo,onChange:w,placeholder:"Nombre o N del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"date",name:"fecha",value:b.fecha,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"number",name:"registroN",value:b.registroN,onChange:w,placeholder:"Registro de Observacin N",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),l.jsx("input",{type:"time",name:"horaInicio",value:b.horaInicio,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"time",name:"horaTermino",value:b.horaTermino,onChange:w,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx(BYe,{label:"Video de observacin de clase",onFileChange:L=>I("videoObservacionUrl",L),onLinkChange:L=>E("videoObservacionUrl",L),uploadedUrl:b.videoObservacionUrl,onRemove:()=>N("videoObservacionUrl"),isUploading:!!o.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0,allowLink:!0})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(Kv,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observacin"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b dark:border-slate-600",children:[l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),l.jsx("th",{className:"p-2"})]})}),l.jsx("tbody",{children:b.detallesObservacion.map(L=>l.jsxs("tr",{className:"border-b dark:border-slate-700",children:[l.jsx("td",{className:"p-2",children:l.jsx("input",{type:"text",value:L.minuto,onChange:M=>_(L.id,"minuto",M.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:L.accionesDocente,onChange:M=>_(L.id,"accionesDocente",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:L.accionesEstudiantes,onChange:M=>_(L.id,"accionesEstudiantes",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:L.actividades,onChange:M=>_(L.id,"actividades",M.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),l.jsx("td",{className:"p-2",children:b.detallesObservacion.length>1&&l.jsx("button",{type:"button",onClick:()=>k(L.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:l.jsx(tl,{className:"w-4 h-4"})})})]},L.id))})]})}),l.jsxs("button",{type:"button",onClick:j,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[l.jsx(L6,{className:"w-4 h-4"})," Agregar Fila"]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(gee,{className:"w-5 h-5 text-green-600"})," Retroalimentacin Docente"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"xito"}),l.jsx("textarea",{name:"retroalimentacion.exito",value:b.retroalimentacion.exito,onChange:w,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),l.jsx("textarea",{name:"retroalimentacion.modelo",value:b.retroalimentacion.modelo,onChange:w,placeholder:"Modelo pedaggico o metodologa observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),l.jsx("textarea",{name:"retroalimentacion.foco",value:b.retroalimentacion.foco,onChange:w,placeholder:"Foco principal de la observacin y retroalimentacin...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),l.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:b.retroalimentacion.elementosIdentificar,onChange:w,placeholder:"Elementos especficos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(nye,{className:"w-5 h-5 text-purple-600"})," Planificacin de Prctica y Seguimiento"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparacin"}),l.jsx("textarea",{name:"planificacion.preparacion",value:b.planificacion.preparacion,onChange:w,placeholder:"Aspectos de preparacin para la prxima prctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),l.jsx("textarea",{name:"planificacion.objetivo",value:b.planificacion.objetivo,onChange:w,placeholder:"Objetivo especfico para la siguiente observacin...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),l.jsx("textarea",{name:"planificacion.actividad",value:b.planificacion.actividad,onChange:w,placeholder:"Actividades especficas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),l.jsx("input",{type:"text",name:"planificacion.tiempo",value:b.planificacion.tiempo,onChange:w,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(Zl,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),l.jsx("input",{type:"date",name:"seguimiento.fecha",value:b.seguimiento.fecha,onChange:w,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),l.jsx("input",{type:"text",name:"seguimiento.firma",value:b.seguimiento.firma,onChange:w,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(o).some(Boolean),children:[Object.values(o).some(Boolean)&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},jYe=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState(!0),[c,u]=S.useState(null),[d,f]=S.useState("list"),[h,p]=S.useState(null),[g,x]=S.useState(null),[b,y]=S.useState("general"),[w,_]=S.useState(!1),[j,k]=S.useState({}),[I,E]=S.useState([]),N=Xy,B=S.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[R,P]=S.useState(B),D=S.useCallback(async()=>{s(!0),u(null);try{const ae=await vYe();t(ae)}catch(ae){u("No se pudieron cargar los registros de acompaamiento."),console.error(" Error al cargar acompaamientos:",ae)}finally{s(!1)}},[]),L=S.useCallback(async()=>{o(!0);try{const le=(await kYe()).filter(ie=>ie.profile==="PROFESORADO").map(ie=>ie.nombreCompleto).sort();n(le)}catch(ae){u("No se pudo cargar la lista de profesores."),console.error(" Error al cargar profesores:",ae)}finally{o(!1)}},[]),M=S.useCallback(async()=>{try{const ae={};for(const le of e)if(le.id)try{const ie=await CYe(le.id);ie.length>0&&(ae[le.id]=ie)}catch(ie){console.error(`Error loading OPR cycles for ${le.id}:`,ie)}try{const le=await _Ye();E(le)}catch(le){console.error("Error loading standalone OPR cycles:",le),E([])}k(ae)}catch(ae){console.error("Error fetching OPR cycles:",ae)}},[e]);S.useEffect(()=>{D(),L()},[D,L]),S.useEffect(()=>{e.length>0&&M()},[e,M]);const J=(ae,le)=>{if(x(ae),le)P(le),p(le.id);else{const ie={id:"temp-"+Date.now(),fecha:ae.fecha,docente:ae.docenteInfo||"",curso:ae.cursoInfo||"",asignatura:ae.asignaturaInfo||"",rubricaResultados:{},planificacionFutura:"",createdAt:new Date().toISOString(),observacionesGenerales:"",retroalimentacionConsolidada:""};P(ie),p(null)}f("form"),y("opr"),u(null)},H=async()=>{if(!("docente"in R)||!R.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentacin.');return}_(!0),u(null);try{const ae="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",ie=new cs(ae).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ce=Object.entries(R.rubricaResultados||{}).map(([_e,De])=>`- ${_e}: Nivel ${De}`).join(`
`),pe=`
Eres un asesor pedaggico experto. Redacta una retroalimentacin consolidada y constructiva para un docente.
Contexto de la observacin:
- Docente: ${R.docente}
- Asignatura: ${R.asignatura}
- Curso: ${R.curso}
- Resultados de la pauta de observacin (rbrica):
${ce||"No se complet la pauta."}
- Observaciones adicionales del evaluador:
${R.observacionesGenerales||"Sin observaciones adicionales."}

Basado en esta informacin, tu texto debe:
1. Iniciar con un reconocimiento positivo.
2. Mencionar 1 o 2 fortalezas clave observadas.
3. Identificar 1 o 2 reas de mejora concretas, con un tono de sugerencia.
4. Concluir con una frase motivadora.
La respuesta debe ser solo el texto de la retroalimentacin.
      `,ne=(await ie.generateContent(pe)).response.text();P(_e=>({..._e,retroalimentacionConsolidada:ne})),alert("Retroalimentacin generada exitosamente con IA.")}catch(ae){console.error(" Error al generar retroalimentacin:",ae);const le=ae.message||"No se pudo generar la retroalimentacin automtica.";u(le),alert(`Error: ${le}`)}finally{_(!1)}},K=async ae=>{if(ae.preventDefault(),!("docente"in R)||!R.docente||!R.curso||!R.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await yYe(h,R),alert("Acompaamiento actualizado correctamente!");else{const le=await bYe(R);p(le.id),P(le),alert("Acompaamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await D()}catch(le){const ie=(le==null?void 0:le.message)??"Error al guardar el registro de acompaamiento.";u(ie),console.error(" Error al guardar:",le),alert(`Error: ${ie}`)}},V=()=>{P(B),p(null),x(null),f("form"),y("general"),u(null)},G=ae=>{P(ae),p(ae.id),x(null),f("form"),y("general"),u(null)},X=async ae=>{if(window.confirm("Est seguro de que desea eliminar este registro? Esta accin no se puede deshacer."))try{await wYe(ae),await D(),alert("Registro eliminado exitosamente.")}catch(le){const ie="No se pudo eliminar el registro.";u(ie),console.error(" Error al eliminar:",le),alert(`Error: ${ie}`)}},ee=(ae,le)=>{P(ie=>({...ie,rubricaResultados:{...ie.rubricaResultados||{},[ae]:le}}))},F=()=>{var ae;if(!("docente"in R)||!R.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const le=new vr,ie=le.internal.pageSize.getWidth(),ce=15,pe=ie-ce*2;let Be=20;le.setFontSize(18),le.setFont("helvetica","bold"),le.text("INFORME DE ACOMPAAMIENTO DOCENTE",ie/2,Be,{align:"center"}),Be+=5,le.setLineWidth(.5),le.line(ce,Be,ie-ce,Be),Be+=10;const ne=[["Docente:",R.docente],["Curso:",R.curso],["Asignatura:",R.asignatura],["Fecha:",new Date(R.fecha).toLocaleDateString("es-CL")],["Bloques horarios:",R.bloques||"No especificado"]];if(vo(le,{body:ne,startY:Be,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),Be=le.lastAutoTable.finalY+10,Object.keys(R.rubricaResultados||{}).length>0){le.setFontSize(12),le.setFont("helvetica","bold"),le.text("RESULTADOS DE EVALUACIN",ce,Be),Be+=8;const fe=Object.entries(R.rubricaResultados).map(([Ie,Ue])=>[Ie,`Nivel ${Ue}`,Ue===1?"Dbil":Ue===2?"Incipiente":Ue===3?"Satisfactorio":"Avanzado"]);vo(le,{startY:Be,head:[["Criterio","Nivel","Descripcin"]],body:fe,theme:"grid",headStyles:{fillColor:[245,158,11],textColor:255},margin:{left:ce,right:ce},styles:{fontSize:9}}),Be=le.lastAutoTable.finalY+10}const _e=(fe,Ie)=>{if(!Ie||Ie.trim()==="")return;Be>250&&(le.addPage(),Be=20),le.setFontSize(12),le.setFont("helvetica","bold"),le.text(fe,ce,Be),Be+=8,le.setFontSize(10),le.setFont("helvetica","normal");const Ue=le.splitTextToSize(Ie,pe);le.text(Ue,ce,Be),Be+=Ue.length*5+10};_e("OBSERVACIONES GENERALES",R.observacionesGenerales),_e("RETROALIMENTACIN PEDAGGICA",R.retroalimentacionConsolidada);const De=le.getNumberOfPages();for(let fe=1;fe<=De;fe++)le.setPage(fe),le.setFontSize(8),le.setFont("helvetica","italic"),le.text(`Generado el ${new Date().toLocaleDateString("es-CL")} - Pgina ${fe} de ${De}`,ie/2,le.internal.pageSize.getHeight()-10,{align:"center"});const Se=`Informe_Acompanamiento_${(ae=R.docente)==null?void 0:ae.replace(/\s+/g,"_")}_${R.curso}_${new Date().toISOString().split("T")[0]}.pdf`;le.save(Se)}catch(le){console.error(" Error al generar PDF:",le),alert("Error al generar el PDF. Intenta nuevamente.")}},z=ae=>{P(le=>({...le,[ae.target.name]:ae.target.value}))},Y=()=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mdulo de Acompaamiento Docente"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>{V(),y("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[l.jsx(L6,{className:"w-5 h-5"})," Acompaamiento General"]}),l.jsxs("button",{onClick:()=>{P(B),p(null),x(null),f("form"),y("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[l.jsx(L6,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qA,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[l.jsx(Yf,{className:"w-6 h-6 text-amber-500"})," Acompaamientos Generales"]}),l.jsxs("div",{className:"space-y-3",children:[a&&l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(ae=>ae.id).length>0?l.jsx("div",{className:"grid gap-3",children:e.filter(ae=>ae.id).map(ae=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Zl,{className:"w-4 h-4 text-amber-500"}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.docente})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Curso:"})," ",ae.curso," "," ",l.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",ae.asignatura]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ae.fecha).toLocaleDateString("es-CL")]}),ae.bloques&&l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Bloques:"})," ",ae.bloques]}),ae.retroalimentacionConsolidada&&l.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(Zo,{className:"w-3 h-3"}),"Con retroalimentacin IA"]}),j[ae.id]&&j[ae.id].length>0&&l.jsxs("p",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-1",children:[l.jsx(_p,{className:"w-3 h-3"}),j[ae.id].length," Ciclo",j[ae.id].length>1?"s":""," OPR"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>{G(ae),y("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),l.jsx("button",{onClick:()=>{G(ae),y("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),l.jsx("button",{onClick:()=>X(ae.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:l.jsx(tl,{className:"w-4 h-4"})})]})]}),j[ae.id]&&j[ae.id].length>0&&l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-600",children:[l.jsxs("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2 flex items-center gap-1",children:[l.jsx(_p,{className:"w-4 h-4 text-blue-500"}),"Ciclos OPR Asociados"]}),l.jsx("div",{className:"space-y-2",children:j[ae.id].map(le=>l.jsxs("div",{className:"flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-800",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-300",children:le.nombreCiclo||`Registro N ${le.registroN}`}),l.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[new Date(le.fecha).toLocaleDateString("es-CL"),le.horaInicio&&le.horaTermino&&l.jsxs("span",{children:["  ",le.horaInicio," - ",le.horaTermino]})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("button",{onClick:()=>{const ie=e.find(ce=>ce.id===ae.id);J(le,ie)},className:"text-blue-600 hover:text-blue-800 text-xs px-2 py-1 rounded border border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:"Editar"}),l.jsx("button",{onClick:async()=>{if(window.confirm("Seguro que desea eliminar este Ciclo OPR?"))try{await gq(le.id),await M(),alert("Ciclo OPR eliminado exitosamente")}catch(ie){console.error("Error deleting OPR cycle:",ie),alert("Error al eliminar el ciclo OPR")}},className:"text-red-600 hover:text-red-800 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:"Eliminar ciclo OPR",children:l.jsx(tl,{className:"w-3 h-3"})})]})]},le.id))})]})]},ae.id))}):!a&&l.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsx(WA,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompaamientos generales registrados"}),l.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompaamiento usando el botn superior"})]})]})]}),I.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[l.jsx(_p,{className:"w-6 h-6 text-blue-500"})," Ciclos OPR Independientes"]}),l.jsx("div",{className:"space-y-3",children:I.map(ae=>l.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(_p,{className:"w-4 h-4 text-blue-500"}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:ae.nombreCiclo||`Registro N ${ae.registroN}`})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Docente:"})," ",ae.docenteInfo||"No especificado"," "," ",l.jsx("span",{className:"font-medium",children:"Curso:"})," ",ae.cursoInfo||"No especificado"]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(ae.fecha).toLocaleDateString("es-CL"),ae.horaInicio&&ae.horaTermino&&l.jsxs("span",{children:["  ",ae.horaInicio," - ",ae.horaTermino]})]}),ae.videoObservacionUrl&&l.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(Zo,{className:"w-3 h-3"}),"Con video de observacin"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>{J(ae)},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Ver/Editar"}),l.jsx("button",{onClick:async()=>{if(window.confirm("Seguro que desea eliminar este Ciclo OPR?"))try{await gq(ae.id),await M(),alert("Ciclo OPR eliminado exitosamente")}catch(le){console.error("Error deleting standalone OPR cycle:",le),alert("Error al eliminar el ciclo OPR")}},title:"Eliminar ciclo OPR",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:l.jsx(tl,{className:"w-4 h-4"})})]})]})},ae.id))})]})]}),te=()=>{const ae=h?e.find(ie=>ie.id===h):null,le={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in R&&R.docente||"",curso:"curso"in R&&R.curso||"",asignatura:"asignatura"in R&&R.asignatura||"",planificacionFutura:"",createdAt:new Date().toISOString(),rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:b==="general"?h?"Editando Acompaamiento General":"Nuevo Acompaamiento General":g?"Editando Ciclo OPR":"Nuevo Ciclo OPR"}),l.jsx("button",{type:"button",onClick:()=>{f("list"),x(null)},className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:" Volver al listado"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>y("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(WA,{className:"w-4 h-4"}),"Acompaamiento General"]})}),l.jsx("button",{onClick:()=>y("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(_p,{className:"w-4 h-4"}),"Ciclos OPR"]})}),l.jsx("button",{onClick:()=>y("dashboard"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${b==="dashboard"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(Yf,{className:"w-4 h-4"}),"Dashboard"]})})]})}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(qA,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),b==="dashboard"&&l.jsx("div",{className:"animate-fade-in",children:l.jsx(pYe,{acompanamientos:e,ciclosOPR:j,standaloneCiclos:I})}),b==="general"&&l.jsxs("form",{onSubmit:K,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[l.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(Z_,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:H,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:w,children:[l.jsx(wP,{className:"w-4 h-4"}),w?"Generando...":"Generar Retroalimentacin con IA"]}),l.jsxs("button",{type:"button",onClick:F,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(I2,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observacin y rbrica, luego genera automticamente la retroalimentacin. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in R&&R.retroalimentacionConsolidada&&l.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[l.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(Zo,{className:"w-4 h-4"}),"Retroalimentacin Consolidada Generada:"]}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:l.jsx("textarea",{readOnly:!0,rows:8,value:R.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),l.jsxs("select",{name:"docente",value:"docente"in R?R.docente:"",onChange:z,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[l.jsx("option",{value:"",children:i?"Cargando profesores...":"Seleccione un docente"}),r.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),l.jsxs("select",{name:"curso",value:"curso"in R?R.curso:"",onChange:z,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),Ks.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),l.jsxs("select",{name:"asignatura",value:"asignatura"in R?R.asignatura:"",onChange:z,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),l.jsx("input",{type:"text",name:"bloques",value:"bloques"in R?R.bloques:"",onChange:z,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),l.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in R?R.observacionesGenerales:"",onChange:z,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodologa utilizada, participacin de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(Yf,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observacin - Rbrica de Evaluacin"]}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Dbil (1)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:N.map(ie=>l.jsx(nt.Fragment,{children:ie.criteria.map((ce,pe)=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[pe===0&&l.jsx("td",{rowSpan:ie.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:ie.domain}),l.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:ce.name}),ce.levels.map((Be,ne)=>{const _e=ne+1,De="rubricaResultados"in R&&R.rubricaResultados[ce.name]===_e,Se=De?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return l.jsx("td",{onClick:()=>ee(ce.name,_e),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Se} ${De?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${_e} para ${ce.name}`,children:l.jsxs("div",{className:"text-xs leading-relaxed",children:[De&&l.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[l.jsx(Zo,{className:"w-3 h-3 text-amber-600"}),l.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),Be]})},_e)})]},ce.name))},ie.domain))})]})}),Object.keys(R.rubricaResultados||{}).length>0&&l.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[l.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[l.jsx(Yf,{className:"w-4 h-4"}),"Resumen de Evaluacin (",Object.keys(R.rubricaResultados).length," criterios evaluados)"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(R.rubricaResultados).map(([ie,ce])=>l.jsxs("div",{className:"flex justify-between items-center py-1",children:[l.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[ie,":"]}),l.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${ce===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":ce===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":ce===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",ce]})]},ie))})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:()=>f("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:w,children:[w&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompaamiento"]})]})]}),b==="opr"&&l.jsx(TYe,{acompanamiento:ae||le,cicloToEdit:g,profesores:r,onSave:async ie=>{try{const ce=(ae==null?void 0:ae.id)||typeof ie.acompanamientoId=="string"&&ie.acompanamientoId||void 0;if(g&&g.id)await EYe(g.id,ie),alert("Ciclo OPR actualizado exitosamente");else{if(!ce||String(ce).startsWith("temp-")){const pe={...ie,acompanamientoId:""};await pq(pe)}else{const pe={...ie,acompanamientoId:String(ce)};await pq(pe)}alert("Ciclo OPR guardado exitosamente")}x(null),await D(),await M(),f("list")}catch(ce){console.error(" Error al guardar ciclo OPR:",ce);const pe=ce.message||"Error desconocido al guardar el ciclo OPR";u(pe),alert(`Error al guardar el ciclo OPR: ${pe}`)}},onCancel:()=>{x(null),f("list")}})]})};return a||i?l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando mdulo de acompaamiento..."}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",i&&" Cargando profesores..."]})]})})}):l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?Y():te()})})},LL="mensajes_internos",IYe="usuarios",Ble="mensajes_read_status",Tle=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},FYe=(e,t)=>{const r=zt(Nt(ft,LL),Yr("participants","array-contains",e),_r("fecha","desc"));return mr(r,a=>{const s=a.docs.map(i=>Tle(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},OYe=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:sr.fromDate(new Date)};await Tn(Nt(ft,LL),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},DYe=async e=>{try{const t=dr(ft,LL,e);await za(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},PYe=(e,t)=>{const r=dr(ft,Ble,e);return mr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},RYe=async(e,t)=>{try{const r=dr(ft,Ble,e);await Ji(r,{messages:UZ(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como ledo:",r),new Error("No se pudo actualizar el estado de lectura.")}},LYe=e=>{const t=zt(Nt(ft,IYe),_r("nombreCompleto","asc"));return mr(t,n=>{const a=n.docs.map(s=>Tle(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},MYe=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=S.useState("inbox"),[a,s]=S.useState([]),[i,o]=S.useState([]),[c,u]=S.useState(null),[d,f]=S.useState({announcements:[],messages:[]}),[h,p]=S.useState(!0),g={para:"",asunto:"",cuerpo:""},[x,b]=S.useState(g);S.useEffect(()=>{if(!e.id||!e.email){p(!1);return}p(!0);const E=FYe(e.email,R=>{s(R),p(!1)}),N=LYe(o),B=PYe(e.id,R=>{f(R),t()});return()=>{E(),N(),B()}},[e.id,e.email,t]);const y=E=>{u(E),r==="inbox"&&!d.messages.includes(E.id)&&RYe(e.id,E.id).catch(N=>{console.error("Failed to mark message as read:",N)})},w=async E=>{if(E.preventDefault(),!x.para||!x.asunto.trim()||!x.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const N={de:e.email,para:x.para,asunto:x.asunto,cuerpo:x.cuerpo};try{await OYe(N),b(g),n("sent")}catch(B){console.error("Error sending message:",B),alert("No se pudo enviar el mensaje. Intntelo de nuevo.")}},_=async E=>{if(window.confirm("Est seguro de que desea eliminar este mensaje? Esta accin es irreversible."))try{await DYe(E),u(null)}catch(N){console.error("Error deleting message:",N),alert("No se pudo eliminar el mensaje.")}},j=E=>{b({para:E.de,asunto:`Re: ${E.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${E.de}
Fecha: ${new Date(E.fecha).toLocaleString("es-CL")}

${E.cuerpo}`}),n("compose")},k=S.useMemo(()=>a.filter(E=>E.para===e.email),[a,e.email]),I=S.useMemo(()=>a.filter(E=>E.de===e.email),[a,e.email]);return h?l.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajera..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[l.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[l.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:l.jsx("button",{onClick:()=>{n("compose"),u(null),b(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),l.jsxs("nav",{className:"p-2 space-y-1",children:[l.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),l.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&l.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?k:I).map(E=>{const N=r==="inbox"&&!d.messages.includes(E.id);return l.jsxs("div",{onClick:()=>y(E),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===E.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("p",{className:`font-bold truncate ${N?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?E.de:`Para: ${E.para}`}),N&&l.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),l.jsx("p",{className:`truncate text-sm ${N?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:E.asunto}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(E.fecha).toLocaleString("es-CL")})]},E.id)})}),l.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),l.jsxs("select",{id:"para",value:x.para,onChange:E=>b({...x,para:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(E=>E.email!==e.email).map(E=>l.jsxs("option",{value:E.email,children:[E.nombreCompleto," (",E.email,")"]},E.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),l.jsx("input",{type:"text",id:"asunto",value:x.asunto,onChange:E=>b({...x,asunto:E.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),l.jsx("textarea",{id:"cuerpo",value:x.cuerpo,onChange:E=>b({...x,cuerpo:E.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?l.jsxs("div",{children:[l.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[l.jsx("strong",{children:"De:"})," ",c.de," ",l.jsx("br",{}),l.jsx("strong",{children:"Para:"})," ",c.para," ",l.jsx("br",{}),l.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),l.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),l.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&l.jsx("button",{onClick:()=>j(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),l.jsx("button",{onClick:()=>_(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):l.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:l.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})},Ck="proyectos_interdisciplinarios",ML="entregas_interdisciplinarias",UYe="usuarios",UL=e=>{const t=e.data();return{id:e.id,...t}},QYe=e=>({...e,contenidosPorAsignatura:Array.isArray(e==null?void 0:e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e==null?void 0:e.actividades)?e.actividades:[],fechasClave:Array.isArray(e==null?void 0:e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e==null?void 0:e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e==null?void 0:e.docentesResponsables)?e.docentesResponsables:[e==null?void 0:e.docentesResponsables].filter(Boolean)}),HYe=e=>{const t=zt(Nt(ft,Ck),_r("nombreProyecto","asc"));return mr(t,n=>{try{const a=n.docs.map(s=>QYe(UL(s)));e(a)}catch(a){console.error("Error parseando planificaciones:",a),e([])}},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},VYe=async e=>{const t={...e,contenidosPorAsignatura:Array.isArray(e.contenidosPorAsignatura)?e.contenidosPorAsignatura:[],actividades:Array.isArray(e.actividades)?e.actividades:[],fechasClave:Array.isArray(e.fechasClave)?e.fechasClave:[],tareas:Array.isArray(e.tareas)?e.tareas:[],docentesResponsables:Array.isArray(e.docentesResponsables)?e.docentesResponsables:[e.docentesResponsables].filter(Boolean),createdAt:sr.now(),updatedAt:sr.now()};return(await Tn(Nt(ft,Ck),t)).id},xq=async(e,t)=>{const{id:r,...n}=t,a=dr(ft,Ck,e);await Ji(a,{...n,contenidosPorAsignatura:Array.isArray(n==null?void 0:n.contenidosPorAsignatura)?n.contenidosPorAsignatura:(n==null?void 0:n.contenidosPorAsignatura)===void 0?void 0:[],actividades:Array.isArray(n==null?void 0:n.actividades)?n.actividades:(n==null?void 0:n.actividades)===void 0?void 0:[],fechasClave:Array.isArray(n==null?void 0:n.fechasClave)?n.fechasClave:(n==null?void 0:n.fechasClave)===void 0?void 0:[],tareas:Array.isArray(n==null?void 0:n.tareas)?n.tareas:(n==null?void 0:n.tareas)===void 0?void 0:[],docentesResponsables:Array.isArray(n==null?void 0:n.docentesResponsables)?n.docentesResponsables:(n==null?void 0:n.docentesResponsables)===void 0?void 0:[n==null?void 0:n.docentesResponsables].filter(Boolean),updatedAt:sr.now()},{merge:!0})},zYe=async e=>{const t=dr(ft,Ck,e),r=zt(Nt(ft,ML),Yr("planificacionId","==",e)),n=await ga(r),a=Bg(ft);n.forEach(s=>a.delete(s.ref)),a.delete(t),await a.commit()},$Ye=(e,t)=>{const r=zt(Nt(ft,ML),Yr("planificacionId","==",e));return mr(r,a=>{const s=a.docs.map(i=>UL(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},vq=async(e,t)=>{const r=dr(ft,ML,e);await Ji(r,{feedbackProfesor:t,fechaFeedback:sr.fromDate(new Date)},{merge:!0})},jle=e=>{const t=zt(Nt(ft,UYe));return mr(t,n=>{const a=n.docs.map(s=>UL(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},lO={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hiptesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Disear","Construir","Idear"]},Aw=({href:e})=>{if(!e)return l.jsx("span",{className:"text-slate-400",children:""});const t=e.startsWith("http")?e:`https://${e}`;return l.jsxs("a",{href:t,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx(Wye,{className:"w-4 h-4"}),l.jsx("span",{className:"truncate max-w-[180px] md:max-w-[260px]",children:e})]})},hp=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>l.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),GYe=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=S.useState(null),a=S.useMemo(()=>e.map(c=>{const u=[];return(c.actividades||[]).forEach(d=>u.push({...d,planId:c.id,type:"activity"})),(c.fechasClave||[]).forEach(d=>u.push({id:d.id,planId:c.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:c.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone",recursoUrl:d.recursoUrl})),u.sort((d,f)=>new Date(d.fechaInicio).getTime()-new Date(f.fechaInicio).getTime()),{plan:c,items:u}}),[e]),s=S.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),i=({name:c})=>{const u=(c||"").split(" ").map(d=>d[0]).join("").toUpperCase();return l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 text-white flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm",children:u.slice(0,2)})},o=({data:c,onClose:u,onSave:d})=>{const[f,h]=S.useState(c.activity),p=x=>h({...f,[x.target.name]:x.target.value}),g=()=>{d(c.planId,f),u()};return l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(xee,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Nombre"}),l.jsx("input",{name:"nombre",value:f.nombre,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Responsables"}),l.jsx("input",{name:"responsables",value:f.responsables,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Inicio"}),l.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Fin"}),l.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-semibold mb-1",children:"Recurso (enlace)"}),l.jsx("input",{name:"recursoUrl",placeholder:"https://...",value:f.recursoUrl||"",onChange:p,className:"w-full p-3 border rounded-lg bg-white dark:bg-slate-700"})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[l.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 rounded-lg",children:"Cancelar"}),l.jsx("button",{onClick:g,className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Guardar"})]})]})})};return!a.length||a.every(c=>c.items.length===0)?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"text-center py-12",children:[l.jsx(qA,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"})]})}):l.jsxs("div",{className:"space-y-8",children:[a.map(({plan:c,items:u})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsx("div",{className:"flex items-center justify-between mb-6",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:l.jsx(V0,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-200",children:c.nombreProyecto}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Cronograma del proyecto"})]})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Tarea"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Estado"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Inicio"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Fin"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Recurso"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold",children:"Asignado"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:u.map(d=>{const f=s(d),h=d.type==="activity";return l.jsxs("tr",{className:`${h?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>h&&n({planId:d.planId,activity:d}),children:[l.jsx("td",{className:"px-6 py-4 font-semibold",children:d.nombre}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-sm font-semibold rounded-full ${f.color}`,children:f.text})}),l.jsx("td",{className:"px-6 py-4",children:d.fechaInicio}),l.jsx("td",{className:"px-6 py-4",children:d.fechaFin}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(Aw,{href:d.recursoUrl})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(i,{name:d.responsables||"Sin asignar"})})]},d.id)})})]})})]},c.id)),r&&l.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},KYe=({planificaciones:e,onBack:t})=>{const r=S.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var p;(p=h.habilidades)==null||p.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(lO).forEach(([x,b])=>{b.includes(g)&&(u[x]=(u[x]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=S.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","ms","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=S.useMemo(()=>{const c=e.length,u=e.reduce((h,p)=>{var g;return h+(((g=p.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,p)=>{var g;return h+(((g=p.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((p,g)=>g[1]-p[1]).slice(0,20),h=Math.max(...f.map(([,p])=>p));return h?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),l.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([p,g])=>{const x=Math.max(.8,g/h*2),b=Math.max(.6,g/h);return l.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${x}rem`,opacity:b},title:`${p}: ${g} veces`,children:p},p)})})]}):null},i=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:l.jsx(xP,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonoma de Bloom"})]}),l.jsx("div",{className:"space-y-4",children:Object.keys(lO).map(h=>{const p=c[h]||0,g=d>0?p/d*100:0,x=f[h]||"bg-slate-400";return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[p," habilidades"]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`h-3 rounded-full ${x} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},o=({icon:c,title:u,value:d,description:f,color:h})=>l.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:d}),l.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),l.jsx("p",{className:"text-white/90 text-sm",children:f})]});return l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:l.jsx(EP,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analtico"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Anlisis de habilidades y contenidos desarrollados"})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(Bw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(o,{icon:l.jsx(cg,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),l.jsx(o,{icon:l.jsx(Hbe,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),l.jsx(o,{icon:l.jsx(WA,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),l.jsx(o,{icon:l.jsx(ef,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(i,{data:r.categoriaCount}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(hee,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribucin de Asignaturas"})]}),l.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),l.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(s,{data:n.palabrasCount,title:"Contenidos Ms Frecuentes"}),l.jsx(s,{data:r.habilidadesCount,title:"Habilidades Ms Desarrolladas"})]})]})},qYe=({plan:e,onBack:t,availableTeachers:r})=>{var g,x;const[n,a]=S.useState([]),[s,i]=S.useState([]),[o,c]=S.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=S.useState(null);S.useEffect(()=>{const b=jle(a),y=$Ye(e.id,i);return()=>{b(),y()}},[e.id]);const f=S.useMemo(()=>n.filter(b=>b.profile===qt.ESTUDIANTE&&e.cursos.includes(b.curso||"")).sort((b,y)=>(b.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),h=async b=>{d(b.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=`Eres un profesor asistente. Genera una retroalimentacin breve (2-3 frases) para la entrega de un estudiante.
Instrucciones de la tarea: "${o==null?void 0:o.instrucciones}"
Comentario del estudiante: "${b.observacionesEstudiante||"Sin comentarios."}"`.trim();try{const E=(await(await new cs(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text().replace(/(\*\*|\*)/g,"");await vq(b.id,E)}catch(_){console.error(_),alert("No se pudo generar la retroalimentacin.")}finally{d(null)}},p=b=>b.map(y=>{var w;return((w=r.find(_=>_.id===y))==null?void 0:w.nombreCompleto)||y}).join(", ");return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",p(e.docentesResponsables)]})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(Bw,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),l.jsx("select",{value:o.id,onChange:b=>{var y;return c(((y=e.tareas)==null?void 0:y.find(w=>w.id===b.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(x=e.tareas)==null?void 0:x.map(b=>l.jsxs("option",{value:b.id,children:["Tarea ",b.numero,": ",b.instrucciones]},b.id))})]}),l.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(b=>{const y=s.find(w=>w.tareaId===o.id&&w.estudianteId===b.id);return l.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(b.nombreCompleto||"NA").split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2)}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:b.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:b.curso})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[l.jsx(bP,{className:"w-4 h-4"})," Entregado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[l.jsx(qA,{className:"w-4 h-4"})," Pendiente"]})})]}),y?l.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),l.jsx(Aw,{href:y.enlaceUrl})]}),y.archivoAdjunto&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),l.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[l.jsx(I2,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentacin del profesor:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("textarea",{placeholder:"Escribir retroalimentacin...",defaultValue:y.feedbackProfesor||"",onBlur:w=>vq(y.id,w.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),l.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(bv,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):l.jsxs("div",{className:"text-center py-6",children:[l.jsx(qA,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante an no ha realizado la entrega"})]})]},b.id)})})]}):l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"text-center",children:[l.jsx(qA,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),l.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[l.jsx(Bw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},WYe=({descripcion:e,asignaturas:t,docentes:r,onObjetivos:n,onIndicadores:a,onEstructura:s,availableTeachers:i})=>{const[o,c]=S.useState(null),u="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",d=h=>h.map(p=>{var g;return((g=i.find(x=>x.id===p))==null?void 0:g.nombreCompleto)||p}).join(", "),f=async h=>{var p,g,x;if(!e.trim()){alert("Ingrese una descripcin del proyecto.");return}c(h);try{const y=new cs(u).getGenerativeModel({model:"gemini-1.5-flash-latest"});if(h==="obj"){const w=`Genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripcin: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);n(_.response.text().replace(/(\*\*|\*)/g,""))}else if(h==="ind"){const w=`Genera 5 a 7 indicadores de logro observables.
Descripcin: "${e}"
Asignaturas: "${t.join(", ")}"
Formato: lista con guiones.`,_=await y.generateContent(w);a(_.response.text().replace(/(\*\*|\*)/g,""))}else{const w=`Devuelve SOLO un JSON vlido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripcin: "${e}"
Docentes responsables: "${d(r)}"
Asignaturas: "${t.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables", "recursoUrl" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD), "recursoUrl" }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD), "recursoUrl" }`,j=(await y.generateContent(w)).response.text().replace(/^```json\s*|```\s*$/g,""),k=JSON.parse(j);s({actividades:(p=k.actividades)==null?void 0:p.map(I=>({...I,id:crypto.randomUUID()})),fechasClave:(g=k.fechasClave)==null?void 0:g.map(I=>({id:crypto.randomUUID(),nombre:I.nombre,fecha:I.fecha,recursoUrl:I.recursoUrl})),tareas:(x=k.tareas)==null?void 0:x.map((I,E)=>({...I,id:crypto.randomUUID(),numero:E+1}))})}}catch(b){console.error(b),alert("No se pudo completar la generacin con IA.")}finally{c(null)}};return l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>f("obj"),disabled:o!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar objetivos con IA",children:o==="obj"?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(bv,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),l.jsx("button",{type:"button",onClick:()=>f("ind"),disabled:o!==null,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar indicadores con IA",children:o==="ind"?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(bv,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),l.jsx("button",{type:"button",onClick:()=>f("est"),disabled:o!==null,className:"inline-flex items-center gap-2 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-2 px-3 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:o==="est"?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"})," ",l.jsx("span",{children:"Generando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx(bv,{className:"w-4 h-4"})," ",l.jsx("span",{children:"Estructura IA"})]})})]})},XYe=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=S.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[i,o]=S.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""}),[c,u]=S.useState({nombre:"",fecha:"",recursoUrl:""}),[d,f]=S.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""});S.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const h=w=>s(_=>({..._,[w.target.name]:w.target.value})),p=(w,_,j)=>s(k=>({...k,contenidosPorAsignatura:k.contenidosPorAsignatura.map(I=>I.asignatura===w?{...I,[_]:j}:I)})),g=(w,_)=>s(j=>({...j,contenidosPorAsignatura:j.contenidosPorAsignatura.map(k=>k.asignatura===w?{...k,habilidades:k.habilidades.includes(_)?k.habilidades.filter(I=>I!==_):[...k.habilidades,_]}:k)})),x=()=>{if(!i.nombre||!i.fechaInicio||!i.fechaFin){alert("Nombre y fechas son obligatorios.");return}s(w=>({...w,actividades:[...w.actividades||[],{...i,id:crypto.randomUUID()}]})),o({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:"",recursoUrl:""})},b=()=>{!c.nombre||!c.fecha||(s(w=>({...w,fechasClave:[...w.fechasClave||[],{...c,id:crypto.randomUUID()}]})),u({nombre:"",fecha:"",recursoUrl:""}))},y=()=>{var _;if(!d.instrucciones||!d.fechaEntrega){alert("Instrucciones y fecha son obligatorios.");return}const w={id:crypto.randomUUID(),numero:(((_=a.tareas)==null?void 0:_.length)||0)+1,...d};s(j=>({...j,tareas:[...j.tareas||[],w]})),f({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return l.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:l.jsx(cg,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Disee experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx(hp,{icon:l.jsx(WA,{className:"w-6 h-6 text-slate-600"}),label:"Informacin del Proyecto",aiButton:l.jsx(WYe,{descripcion:a.descripcionProyecto,asignaturas:a.asignaturas,docentes:a.docentesResponsables,availableTeachers:[],onObjetivos:w=>s(_=>({..._,objetivos:w})),onIndicadores:w=>s(_=>({..._,indicadoresLogro:w})),onEstructura:w=>s(_=>{var j,k,I;return{..._,actividades:(j=w.actividades)!=null&&j.length?w.actividades:_.actividades,fechasClave:(k=w.fechasClave)!=null&&k.length?w.fechasClave:_.fechasClave,tareas:(I=w.tareas)!=null&&I.length?w.tareas:_.tareas}})}),children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),l.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:h,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripcin del Proyecto"}),l.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:h,placeholder:"Detalle metodologa, producto final y propsito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),l.jsx(hp,{icon:l.jsx(Zl,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:l.jsx("div",{className:"space-y-3",children:l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,docentesResponsables:_.docentesResponsables.includes(w.id)?_.docentesResponsables.filter(j=>j!==w.id):[..._.docentesResponsables,w.id]}))},className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(w.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(w.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:l.jsx(Tw,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm",children:w.nombreCompleto}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:w.email})]})]})},w.id))})})}),l.jsx(hp,{icon:l.jsx(Z5,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:Ks.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>({..._,cursos:_.cursos.includes(w)?_.cursos.filter(j=>j!==w):[..._.cursos,w]}))},className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(w)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(hp,{icon:l.jsx(ef,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:qi.map(w=>l.jsx("button",{type:"button",onClick:()=>{s(_=>{const j=_.asignaturas,k=j.includes(w)?j.filter(E=>E!==w):[...j,w];let I=_.contenidosPorAsignatura;return k.includes(w)&&!j.includes(w)&&(I=[...I,{asignatura:w,contenidos:"",habilidades:[]}]),!k.includes(w)&&j.includes(w)&&(I=I.filter(E=>E.asignatura!==w)),{..._,asignaturas:k,contenidosPorAsignatura:I}})},className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(w)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:w},w))})]}),a.contenidosPorAsignatura.length>0&&l.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(w=>l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[l.jsx(ef,{className:"w-4 h-4"})," ",w.asignatura]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),l.jsx("textarea",{value:w.contenidos,onChange:_=>p(w.asignatura,"contenidos",_.target.value),placeholder:`Detalle los contenidos especficos de ${w.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades segn Taxonoma de Bloom:"}),l.jsx("div",{className:"space-y-2",children:Object.entries(lO).map(([_,j])=>l.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[l.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[_,":"]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:j.map(k=>l.jsx("button",{type:"button",onClick:()=>g(w.asignatura,k),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${w.habilidades.includes(k)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:k},k))})]},_))}),w.habilidades.length>0&&l.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[l.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:w.habilidades.map(_=>l.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:_},_))})]})]})]})]},w.asignatura))]})]})}),l.jsx(hp,{icon:l.jsx(F2,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",children:l.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:h,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsx(hp,{icon:l.jsx(Yf,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de xito",children:l.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:h,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsxs(hp,{icon:l.jsx(Id,{className:"w-6 h-6 text-slate-600"}),label:"Planificacin y Cronograma",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(V0,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre"}),l.jsx("input",{value:i.nombre,onChange:w=>o({...i,nombre:w.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Inicio"}),l.jsx("input",{type:"date",value:i.fechaInicio,onChange:w=>o({...i,fechaInicio:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fin"}),l.jsx("input",{type:"date",value:i.fechaFin,onChange:w=>o({...i,fechaFin:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:i.recursoUrl||"",onChange:w=>o({...i,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("button",{type:"button",onClick:x,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(Lu,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.actividades.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Actividades Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.actividades.map(w=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[w.fechaInicio," - ",w.fechaFin]}),l.jsx(Aw,{href:w.recursoUrl})]})},w.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(bP,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-5 gap-3 items-end",children:[l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),l.jsx("input",{value:c.nombre,onChange:w=>u({...c,nombre:w.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",value:c.fecha,onChange:w=>u({...c,fecha:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"sm:col-span-1",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:c.recursoUrl||"",onChange:w=>u({...c,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("button",{type:"button",onClick:b,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(Lu,{className:"w-4 h-4"})," Agregar"]})]}),!!a.fechasClave.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Fechas Clave Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.fechasClave.map(w=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center gap-2",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:w.fecha}),l.jsx(Aw,{href:w.recursoUrl})]})},w.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(xP,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-5",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones de la Tarea"}),l.jsx("input",{value:d.instrucciones,onChange:w=>f({...d,instrucciones:w.target.value}),placeholder:"Descripcin detallada de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),l.jsx("input",{type:"date",value:d.fechaEntrega,onChange:w=>f({...d,fechaEntrega:w.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Recurso (enlace)"}),l.jsx("input",{value:d.recursoUrl||"",onChange:w=>f({...d,recursoUrl:w.target.value}),placeholder:"https://...",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-sm"})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("button",{type:"button",onClick:y,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(Lu,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.tareas.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Tareas Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.tareas.map(w=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",w.numero]}),l.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:w.instrucciones})]}),l.jsxs("div",{className:"text-right space-y-1",children:[l.jsx("span",{className:"block text-slate-500 dark:text-slate-400 text-xs",children:w.fechaEntrega}),"recursoUrl"in w?l.jsx(Aw,{href:w.recursoUrl}):l.jsx("span",{className:"text-slate-400 text-xs",children:""})]})]})},w.id))})]})]})]})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),l.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})]})},bq=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState(!0),[i,o]=S.useState("list"),[c,u]=S.useState(null),[d,f]=S.useState(null),[h,p]=S.useState(null),[g,x]=S.useState("all"),b=S.useMemo(()=>g==="all"?e:e.filter(N=>N.id===g),[e,g]);S.useEffect(()=>{s(!0);const N=jle(R=>{const P=R.filter(D=>D.profile===qt.PROFESORADO);n(P)}),B=HYe(R=>{const P=R.map(D=>({...D,docentesResponsables:Array.isArray(D.docentesResponsables)?D.docentesResponsables:[D.docentesResponsables].filter(Boolean),contenidosPorAsignatura:D.contenidosPorAsignatura||[],actividades:D.actividades||[],fechasClave:D.fechasClave||[]}));t(P),s(!1)});return()=>{N(),B()}},[]);const y=S.useCallback(async(N,B)=>{const R=e.find(D=>D.id===N);if(!R)return;const P={...R,actividades:(R.actividades||[]).map(D=>D.id===B.id?B:D)};await xq(N,P)},[e]),w=async N=>{try{const B=N.id&&String(N.id).length>0,R={...N};if(B){const{id:P,...D}=R;await xq(N.id,D)}else delete R.id,await VYe(R);o("list"),u(null)}catch(B){console.error("Error al guardar la planificacin:",B),alert("No se pudo guardar la planificacin.")}},_=N=>{u(N),o("form")},j=async N=>{if(!N){alert("Error: ID invlido.");return}if(window.confirm("Est seguro de eliminar esta planificacin?"))try{await zYe(N)}catch(B){console.error(B),alert("No se pudo eliminar la planificacin.")}},k=()=>{u(null),o("form")},I=async N=>{f(N.id);const B=new vr("p","mm","a4"),R=15,D=B.internal.pageSize.getWidth()-R*2;let L=R+20;B.setFont("helvetica","bold"),B.setFontSize(22),B.setTextColor(0);const M=B.splitTextToSize(N.nombreProyecto,D);B.text(M,R,L),L+=M.length*8+10,vo(B,{startY:L,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(K=>K.map(V=>{var G;return((G=r.find(X=>X.id===V))==null?void 0:G.nombreCompleto)||V}).join(", "))(N.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},N.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},N.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:11,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),L=B.lastAutoTable.finalY+15;const H=(K,V)=>{if(!V||Array.isArray(V)&&!V.length||typeof V=="string"&&!V.trim())return;const G=Array.isArray(V)?V.join(", "):String(V),X=B.splitTextToSize(G,D);B.setFont("helvetica","bold"),B.setFontSize(14),B.setTextColor(40),B.text(K,R,L),L+=8,B.setFont("helvetica","normal"),B.setFontSize(11),B.setTextColor(80),B.text(X,R,L),L+=X.length*5+10};if(H("Descripcin del Proyecto",N.descripcionProyecto),H("Objetivos de Aprendizaje",N.objetivos),H("Indicadores de Logro",N.indicadoresLogro),N.contenidosPorAsignatura&&N.contenidosPorAsignatura.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Contenidos por Asignatura",R,L),L+=10,N.contenidosPorAsignatura.forEach(K=>{var V;if(B.setFont("helvetica","bold"),B.setFontSize(11),B.text(`${K.asignatura}:`,R,L),L+=6,B.setFont("helvetica","normal"),B.setFontSize(11),K.contenidos){const G=B.splitTextToSize(`Contenidos: ${K.contenidos}`,D-10);B.text(G,R+5,L),L+=G.length*5+3}if((V=K.habilidades)!=null&&V.length){const G=`Habilidades: ${K.habilidades.join(", ")}`,X=B.splitTextToSize(G,D-10);B.text(X,R+5,L),L+=X.length*5+8}}),L+=10),N.actividades&&N.actividades.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Actividades",R,L),L+=10,vo(B,{startY:L,head:[["Actividad","Inicio","Fin","Recurso"]],body:N.actividades.map(K=>[K.nombre,K.fechaInicio,K.fechaFin,K.recursoUrl||""]),theme:"striped"}),L=B.lastAutoTable.finalY+10),N.fechasClave&&N.fechasClave.length>0&&(B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Fechas Clave",R,L),L+=10,vo(B,{startY:L,head:[["Hito","Fecha","Recurso"]],body:N.fechasClave.map(K=>[K.nombre,K.fecha,K.recursoUrl||""]),theme:"striped"}),L=B.lastAutoTable.finalY+10),N.tareas&&N.tareas.length>0){const K=N.tareas.map(V=>[String(V.numero||""),V.instrucciones,V.fechaEntrega,V.recursoUrl||""]);B.setFont("helvetica","bold"),B.setFontSize(14),B.text("Tareas para Estudiantes",R,L),L+=10,vo(B,{startY:L,head:[["#","Instrucciones","Entrega","Recurso"]],body:K,theme:"striped",headStyles:{fillColor:[52,73,94]}})}B.save(`Proyecto_${N.nombreProyecto.replace(/\s/g,"_")}.pdf`),f(null)},E=N=>N.map(B=>{var R;return((R=r.find(P=>P.id===B))==null?void 0:R.nombreCompleto)||B}).join(", ");return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?l.jsx(qYe,{plan:h,onBack:()=>p(null),availableTeachers:r}):i==="dashboard"?l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>o("list"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),l.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-green-600 to-teal-600 text-white shadow",children:"Dashboard"})]})}),l.jsx(KYe,{planificaciones:e,onBack:()=>o("list")})]}):i==="form"?l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{o("list"),u(null)},className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Proyectos"}),l.jsx("button",{type:"button",onClick:()=>o("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),l.jsx(XYe,{initialPlan:c,onSave:w,onCancel:()=>{o("list"),u(null)},availableTeachers:r})]}):l.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl font-semibold bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow",children:"Proyectos"}),l.jsx("button",{type:"button",onClick:()=>o("dashboard"),className:"px-4 py-2 rounded-xl font-semibold bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-100 hover:bg-slate-200 dark:hover:bg-slate-600 transition",children:"Dashboard"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:l.jsx(cg,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{type:"button",onClick:()=>o("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[l.jsx(EP,{className:"w-5 h-5"})," Ver Dashboard"]}),l.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[l.jsx(Lu,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:l.jsx(cg,{className:"w-12 h-12 text-slate-400"})}),l.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),l.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(Lu,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(N=>l.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[l.jsx("div",{className:"flex justify-between items-start mb-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:N.nombreProyecto}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(Z5,{className:"w-4 h-4"}),l.jsxs("span",{children:["Cursos: ",N.cursos.join(", ")]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(Zl,{className:"w-4 h-4"}),l.jsxs("span",{children:["Profesores: ",E(N.docentesResponsables)]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(ef,{className:"w-4 h-4"}),l.jsxs("span",{children:["Asignaturas: ",N.asignaturas.length]})]})]})]})}),!!N.descripcionProyecto&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:N.descripcionProyecto}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>p(N),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[l.jsx(bP,{className:"w-4 h-4"})," Entregas"]}),l.jsxs("button",{type:"button",onClick:()=>I(N),disabled:d===N.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===N.id?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):l.jsx(I2,{className:"w-4 h-4"}),"PDF"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:()=>_(N),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:l.jsx(xee,{className:"w-4 h-4"})}),l.jsx("button",{type:"button",onClick:()=>j(N.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:l.jsx(tl,{className:"w-4 h-4"})})]})]})]},N.id))})]}),e.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Gye,{className:"w-5 h-5 text-slate-600"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Cronograma (Gantt)"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("label",{className:"text-sm text-slate-600",children:"Proyecto:"}),l.jsxs("select",{value:g,onChange:N=>x(N.target.value),className:"p-2 border border-slate-300 rounded-lg bg-white dark:bg-slate-700 text-sm",children:[l.jsx("option",{value:"all",children:"Todos"}),e.map(N=>l.jsx("option",{value:N.id,children:N.nombreProyecto},N.id))]})]})]}),l.jsx("div",{id:"gantt-container-vertical",children:l.jsx(GYe,{planificaciones:b,onActivityUpdate:y})})]})]})},g1="panol_maquinas",lE="panol_registros",YYe=e=>{const t=zt(Nt(ft,g1),_r("nombre","asc"));return mr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},JYe=e=>{const t=zt(Nt(ft,lE),_r("fecha","desc"));return mr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},ZYe=async e=>(await Tn(Nt(ft,g1),{...e,createdAt:Ni(),updatedAt:Ni()})).id,eJe=async(e,t)=>{await Vu(dr(ft,g1,e),{...t,updatedAt:Ni()})},tJe=async e=>{const t=zt(Nt(ft,lE),Yr("maquinaId","==",e));if(!(await ga(t)).empty)throw new Error("No se puede eliminar una mquina con registros de uso. Elimine los registros primero.");await za(dr(ft,g1,e))},rJe=async e=>(await Tn(Nt(ft,lE),{...e,createdAt:Ni(),updatedAt:Ni()})).id,nJe=async(e,t)=>{await Vu(dr(ft,lE,e),{...t,updatedAt:Ni()})},aJe=async e=>{await za(dr(ft,lE,e))},sJe=async()=>{if(!(await ga(Nt(ft,g1))).empty)return;const t=Bg(ft);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidrulica",especialidad:"Automotriz"}].forEach(n=>{const a=dr(Nt(ft,g1));t.set(a,{...n,createdAt:Ni(),updatedAt:Ni()})}),await t.commit()},iJe=()=>{var J;const[e,t]=S.useState([]),[r,n]=S.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=S.useState(a),[o,c]=S.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=S.useState(u),[h,p]=S.useState(null),[g,x]=S.useState({maquinaId:"",curso:"",profesor:"",fecha:""});S.useEffect(()=>{sJe().catch(console.error);const H=YYe(t),K=JYe(n);return()=>{H&&H(),K&&K()}},[]);const b=async H=>{if(H.preventDefault(),!!d.nombre.trim())try{h?await eJe(h.id,{...d}):await ZYe({...d}),f(u),p(null)}catch(K){alert(K.message||"Error al guardar mquina")}},y=S.useCallback(async H=>{try{await tJe(H)}catch(K){alert(K.message||"Error al eliminar mquina")}},[]),w=async H=>{H.preventDefault();const K=o||s;if(!K.curso||!K.profesorResponsable.trim()||!K.maquinaId||Number(K.totalHoras)<=0){alert("Curso, Profesor, Mquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(o){const{id:V,...G}=o;await nJe(V,G)}else await rJe({...s});i(a),c(null)}catch(V){alert(V.message||"Error al guardar registro")}},_=S.useCallback(async H=>{try{await aJe(H)}catch(K){alert(K.message||"Error al eliminar registro")}},[]),j=S.useMemo(()=>r.filter(H=>(g.maquinaId===""||H.maquinaId===g.maquinaId)&&(g.curso===""||H.curso===g.curso)&&(g.profesor===""||H.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||H.fecha===g.fecha)).sort((H,K)=>new Date(K.fecha).getTime()-new Date(H.fecha).getTime()),[r,g]),k=S.useMemo(()=>new Map(e.map(H=>[H.id,H])),[e]),I=S.useMemo(()=>j.reduce((H,K)=>H+(Number(K.totalHoras)||0),0),[j]),E=S.useMemo(()=>{const H=new Map;j.forEach(V=>{var X;const G=((X=k.get(V.maquinaId))==null?void 0:X.nombre)||"N/A";H.set(G,(H.get(G)||0)+(Number(V.totalHoras)||0))});const K=Array.from(H.entries()).map(([V,G])=>({maquina:V,horas:Number(G.toFixed(2))}));return K.sort((V,G)=>G.horas-V.horas),K},[j,k]),N=()=>{const H=j.map(G=>{var X,ee;return{Fecha:G.fecha,Curso:G.curso,Profesor:G.profesorResponsable,Mquina:((X=k.get(G.maquinaId))==null?void 0:X.nombre)||"N/A",Especialidad:((ee=k.get(G.maquinaId))==null?void 0:ee.especialidad)||"N/A","Total Horas":G.totalHoras,Observaciones:G.observaciones}}),K=Fu.json_to_sheet(H),V=Fu.book_new();Fu.book_append_sheet(V,K,"RegistrosPaol"),SL(V,"Registros_Paol.xlsx")},B=()=>{const H=new vr;vo(H,{head:[["Fecha","Curso","Profesor","Mquina","Especialidad","Total Horas","Observaciones"]],body:j.map(K=>{var V,G;return[K.fecha,K.curso,K.profesorResponsable,((V=k.get(K.maquinaId))==null?void 0:V.nombre)||"N/A",((G=k.get(K.maquinaId))==null?void 0:G.especialidad)||"N/A",K.totalHoras,K.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:K=>{H.setFontSize(12),H.setFont("helvetica","bold"),H.text("LICEO INDUSTRIAL DE RECOLETA",K.settings.margin.left,14),H.setFontSize(10),H.setFont("helvetica","normal"),H.text("Informe de Registros de Paol",K.settings.margin.left,20)}}),H.save("Registros_Paol.pdf")},R="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",P=(H,K)=>l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${K}`,children:H}),D=({icon:H,label:K,value:V,accent:G="from-indigo-500 to-sky-500"})=>l.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${G} opacity-10`}),l.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:H}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:K}),l.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:V})]})]})]}),L=({title:H,icon:K,children:V,right:G,accent:X="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>l.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${X}`}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[K," ",l.jsx("span",{children:H})]}),G]}),V]})]}),M=()=>{const H=o||s,K=o?c:i;return l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(Id,{size:16})," Fecha"]}),l.jsx("input",{name:"fecha",type:"date",value:H.fecha,onChange:V=>K({...H,fecha:V.target.value}),className:R,required:!0})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(Zl,{size:16})," Curso"]}),l.jsxs("select",{name:"curso",value:H.curso,onChange:V=>K({...H,curso:V.target.value}),className:R,required:!0,children:[l.jsx("option",{value:"",children:"Curso"}),Ks.map(V=>l.jsx("option",{children:V},V))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(ef,{size:16})," Profesor"]}),l.jsxs("select",{name:"profesorResponsable",value:H.profesorResponsable,onChange:V=>K({...H,profesorResponsable:V.target.value}),className:R,required:!0,children:[l.jsx("option",{value:"",children:"Profesor Responsable"}),D6.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(Z_,{size:16})," Mquina"]}),l.jsxs("select",{name:"maquinaId",value:H.maquinaId,onChange:V=>K({...H,maquinaId:V.target.value}),className:R,required:!0,children:[l.jsx("option",{value:"",children:"Mquina"}),e.map(V=>l.jsx("option",{value:V.id,children:V.nombre},V.id))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(eN,{size:16})," Total de Horas"]}),l.jsx("input",{name:"totalHoras",type:"number",value:H.totalHoras,onChange:V=>K({...H,totalHoras:Number(V.target.value)}),className:R,required:!0,min:.5,step:.5})]}),l.jsxs("div",{className:"lg:col-span-6",children:[l.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),l.jsx("textarea",{name:"observaciones",value:H.observaciones,onChange:V=>K({...H,observaciones:V.target.value}),placeholder:"Observaciones...",className:R+" min-h-[40px]",rows:2})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&l.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[l.jsx(rN,{size:16})," Cancelar"]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[o?l.jsx(vm,{size:16}):l.jsx(Lu,{size:16}),o?"Actualizar":"Registrar"]})]})]})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Paol: Registro de Uso de Mquinas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra mquinas, registra usos y exporta informes (Firestore)."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:N,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[l.jsx(Sye,{size:18})," Excel"]}),l.jsxs("button",{onClick:B,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[l.jsx(WA,{size:18})," PDF"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(D,{icon:l.jsx(Z_,{className:"w-5 h-5 text-indigo-600"}),label:"Mquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),l.jsx(D,{icon:l.jsx(WA,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:j.length,accent:"from-sky-500 to-cyan-500"}),l.jsx(D,{icon:l.jsx(eN,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:I.toFixed(1),accent:"from-emerald-500 to-lime-500"}),l.jsx(D,{icon:l.jsx(Id,{className:"w-5 h-5 text-amber-600"}),label:"ltima actualizacin",value:(J=r[0])!=null&&J.fecha?new Date(r[0].fecha).toLocaleDateString():"",accent:"from-amber-500 to-rose-400"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[l.jsx("div",{className:"xl:col-span-3",children:l.jsx(L,{title:o?`Editando registro #${o.id.slice(0,4)}`:"Nuevo registro de uso",icon:l.jsx(Eye,{size:18}),children:l.jsx(M,{})})}),l.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:l.jsx(L,{title:"Uso por mquina (horas)",icon:l.jsx(Yf,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:l.jsx("div",{className:"flex gap-2 items-center",children:P(`${E.length} mquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:l.jsx("div",{className:"h-[320px] w-full",children:l.jsx(Pp,{width:"100%",height:"100%",children:l.jsxs(QN,{data:E,margin:{top:8,right:16,bottom:8,left:0},children:[l.jsx($w,{strokeDasharray:"3 3"}),l.jsx(o1,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),l.jsx(l1,{}),l.jsx(Dp,{}),l.jsx(M2,{}),l.jsx(zw,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),l.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:l.jsxs(L,{title:"Administrar mquinas",icon:l.jsx(Z_,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[l.jsxs("form",{onSubmit:b,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[l.jsx("input",{value:d.nombre,onChange:H=>f({...d,nombre:H.target.value}),placeholder:"Nombre mquina",className:R+" md:col-span-2"}),l.jsxs("select",{value:d.especialidad,onChange:H=>f({...d,especialidad:H.target.value}),className:R+" md:col-span-2",children:[l.jsx("option",{value:"Industrial",children:"Industrial"}),l.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?l.jsx(vm,{size:16}):l.jsx(Lu,{size:16}),h?"Guardar":"Agregar"]})]}),l.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(H=>l.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:H.nombre}),l.jsx("div",{className:"text-xs",children:H.especialidad==="Industrial"?P("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):P("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{p(H),f(H)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:l.jsx(R6,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>y(H.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:l.jsx(tl,{size:16,className:"text-red-600"})})]})]},H.id))})]})}),l.jsx("div",{className:"xl:col-span-2 order-3",children:l.jsxs(L,{title:"Historial de uso",icon:l.jsx(WA,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(yP,{size:16,className:"text-slate-600"})}),children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[l.jsx("input",{type:"date",value:g.fecha,onChange:H=>x({...g,fecha:H.target.value}),className:R,placeholder:"Fecha"}),l.jsxs("select",{value:g.curso,onChange:H=>x({...g,curso:H.target.value}),className:R,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Ks.map(H=>l.jsx("option",{children:H},H))]}),l.jsxs("select",{value:g.maquinaId,onChange:H=>x({...g,maquinaId:H.target.value}),className:R,children:[l.jsx("option",{value:"",children:"Todas las Mquinas"}),e.map(H=>l.jsx("option",{value:H.id,children:H.nombre},H.id))]}),l.jsxs("div",{className:"relative",children:[l.jsx(b4,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),l.jsx("input",{value:g.profesor,onChange:H=>x({...g,profesor:H.target.value}),placeholder:"Buscar profesor...",className:R+" pl-9"})]})]}),l.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Mquina"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),l.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[j.map(H=>{var K;return l.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:H.fecha}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((K=k.get(H.maquinaId))==null?void 0:K.nombre)||"N/A"}),l.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[H.profesorResponsable," ",l.jsxs("span",{className:"text-slate-400",children:["(",H.curso,")"]})]}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:H.totalHoras}),l.jsxs("td",{className:"px-3 py-2 text-center",children:[l.jsx("button",{onClick:()=>c(H),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:l.jsx(R6,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>_(H.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:l.jsx(tl,{size:16,className:"text-red-600"})})]})]},H.id)}),j.length===0&&l.jsx("tr",{children:l.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function _l(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=_l(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const oJe={},yq=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,p))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(oJe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},lJe=e=>e?yq(e):yq,{useDebugValue:cJe}=nt,{useSyncExternalStoreWithSelector:uJe}=$Ce,dJe=e=>e;function Ile(e,t=dJe,r){const n=uJe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return cJe(n),n}const wq=(e,t)=>{const r=lJe(e),n=(a,s=t)=>Ile(r,a,s);return Object.assign(n,r),n},AJe=(e,t)=>e?wq(e,t):wq;function sl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var fJe={value:()=>{}};function _k(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new o5(r)}function o5(e){this._=e}function hJe(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}o5.prototype=_k.prototype={constructor:o5,on:function(e,t){var r=this._,n=hJe(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=mJe(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=Eq(r[a],e.name,t);else if(t==null)for(a in r)r[a]=Eq(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new o5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function mJe(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function Eq(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=fJe,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var cO="http://www.w3.org/1999/xhtml";const Cq={svg:"http://www.w3.org/2000/svg",xhtml:cO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nk(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Cq.hasOwnProperty(t)?{space:Cq[t],local:e}:e}function pJe(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===cO&&t.documentElement.namespaceURI===cO?t.createElement(e):t.createElementNS(r,e)}}function gJe(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fle(e){var t=Nk(e);return(t.local?gJe:pJe)(t)}function xJe(){}function QL(e){return e==null?xJe:function(){return this.querySelector(e)}}function vJe(e){typeof e!="function"&&(e=QL(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),o[d]=u);return new $c(n,this._parents)}function bJe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function yJe(){return[]}function Ole(e){return e==null?yJe:function(){return this.querySelectorAll(e)}}function wJe(e){return function(){return bJe(e.apply(this,arguments))}}function EJe(e){typeof e=="function"?e=wJe(e):e=Ole(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&(n.push(e.call(c,c.__data__,u,i)),a.push(c));return new $c(n,a)}function Dle(e){return function(){return this.matches(e)}}function Ple(e){return function(t){return t.matches(e)}}var CJe=Array.prototype.find;function _Je(e){return function(){return CJe.call(this.children,e)}}function NJe(){return this.firstElementChild}function SJe(e){return this.select(e==null?NJe:_Je(typeof e=="function"?e:Ple(e)))}var kJe=Array.prototype.filter;function BJe(){return Array.from(this.children)}function TJe(e){return function(){return kJe.call(this.children,e)}}function jJe(e){return this.selectAll(e==null?BJe:TJe(typeof e=="function"?e:Ple(e)))}function IJe(e){typeof e!="function"&&(e=Dle(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new $c(n,this._parents)}function Rle(e){return new Array(e.length)}function FJe(){return new $c(this._enter||this._groups.map(Rle),this._parents)}function cS(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}cS.prototype={constructor:cS,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function OJe(e){return function(){return e}}function DJe(e,t,r,n,a,s){for(var i=0,o,c=t.length,u=s.length;i<u;++i)(o=t[i])?(o.__data__=s[i],n[i]=o):r[i]=new cS(e,s[i]);for(;i<c;++i)(o=t[i])&&(a[i]=o)}function PJe(e,t,r,n,a,s,i){var o,c,u=new Map,d=t.length,f=s.length,h=new Array(d),p;for(o=0;o<d;++o)(c=t[o])&&(h[o]=p=i.call(c,c.__data__,o,t)+"",u.has(p)?a[o]=c:u.set(p,c));for(o=0;o<f;++o)p=i.call(e,s[o],o,s)+"",(c=u.get(p))?(n[o]=c,c.__data__=s[o],u.delete(p)):r[o]=new cS(e,s[o]);for(o=0;o<d;++o)(c=t[o])&&u.get(h[o])===c&&(a[o]=c)}function RJe(e){return e.__data__}function LJe(e,t){if(!arguments.length)return Array.from(this,RJe);var r=t?PJe:DJe,n=this._parents,a=this._groups;typeof e!="function"&&(e=OJe(e));for(var s=a.length,i=new Array(s),o=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,p=MJe(e.call(d,d&&d.__data__,u,n)),g=p.length,x=o[u]=new Array(g),b=i[u]=new Array(g),y=c[u]=new Array(h);r(d,f,x,b,y,p,t);for(var w=0,_=0,j,k;w<g;++w)if(j=x[w]){for(w>=_&&(_=w+1);!(k=b[_])&&++_<g;);j._next=k||null}}return i=new $c(i,n),i._enter=o,i._exit=c,i}function MJe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function UJe(){return new $c(this._exit||this._groups.map(Rle),this._parents)}function QJe(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function HJe(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),c=0;c<i;++c)for(var u=r[c],d=n[c],f=u.length,h=o[c]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;c<a;++c)o[c]=r[c];return new $c(o,this._parents)}function VJe(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function zJe(e){e||(e=$Je);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,c=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new $c(a,this._parents).order()}function $Je(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function GJe(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function KJe(){return Array.from(this)}function qJe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function WJe(){let e=0;for(const t of this)++e;return e}function XJe(){return!this.node()}function YJe(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this}function JJe(e){return function(){this.removeAttribute(e)}}function ZJe(e){return function(){this.removeAttributeNS(e.space,e.local)}}function eZe(e,t){return function(){this.setAttribute(e,t)}}function tZe(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function rZe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function nZe(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function aZe(e,t){var r=Nk(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?ZJe:JJe:typeof t=="function"?r.local?nZe:rZe:r.local?tZe:eZe)(r,t))}function Lle(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function sZe(e){return function(){this.style.removeProperty(e)}}function iZe(e,t,r){return function(){this.style.setProperty(e,t,r)}}function oZe(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function lZe(e,t,r){return arguments.length>1?this.each((t==null?sZe:typeof t=="function"?oZe:iZe)(e,t,r??"")):x1(this.node(),e)}function x1(e,t){return e.style.getPropertyValue(t)||Lle(e).getComputedStyle(e,null).getPropertyValue(t)}function cZe(e){return function(){delete this[e]}}function uZe(e,t){return function(){this[e]=t}}function dZe(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function AZe(e,t){return arguments.length>1?this.each((t==null?cZe:typeof t=="function"?dZe:uZe)(e,t)):this.node()[e]}function Mle(e){return e.trim().split(/^|\s+/)}function HL(e){return e.classList||new Ule(e)}function Ule(e){this._node=e,this._names=Mle(e.getAttribute("class")||"")}Ule.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Qle(e,t){for(var r=HL(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function Hle(e,t){for(var r=HL(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function fZe(e){return function(){Qle(this,e)}}function hZe(e){return function(){Hle(this,e)}}function mZe(e,t){return function(){(t.apply(this,arguments)?Qle:Hle)(this,e)}}function pZe(e,t){var r=Mle(e+"");if(arguments.length<2){for(var n=HL(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?mZe:t?fZe:hZe)(r,t))}function gZe(){this.textContent=""}function xZe(e){return function(){this.textContent=e}}function vZe(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function bZe(e){return arguments.length?this.each(e==null?gZe:(typeof e=="function"?vZe:xZe)(e)):this.node().textContent}function yZe(){this.innerHTML=""}function wZe(e){return function(){this.innerHTML=e}}function EZe(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function CZe(e){return arguments.length?this.each(e==null?yZe:(typeof e=="function"?EZe:wZe)(e)):this.node().innerHTML}function _Ze(){this.nextSibling&&this.parentNode.appendChild(this)}function NZe(){return this.each(_Ze)}function SZe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function kZe(){return this.each(SZe)}function BZe(e){var t=typeof e=="function"?e:Fle(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function TZe(){return null}function jZe(e,t){var r=typeof e=="function"?e:Fle(e),n=t==null?TZe:typeof t=="function"?t:QL(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function IZe(){var e=this.parentNode;e&&e.removeChild(this)}function FZe(){return this.each(IZe)}function OZe(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function DZe(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function PZe(e){return this.select(e?DZe:OZe)}function RZe(e){return arguments.length?this.property("__data__",e):this.node().__data__}function LZe(e){return function(t){e.call(this,t,this.__data__)}}function MZe(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function UZe(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function QZe(e,t,r){return function(){var n=this.__on,a,s=LZe(t);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function HZe(e,t,r){var n=MZe(e+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,d;c<u;++c)for(a=0,d=o[c];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=t?QZe:UZe,a=0;a<s;++a)this.each(o(n[a],t,r));return this}function Vle(e,t,r){var n=Lle(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function VZe(e,t){return function(){return Vle(this,e,t)}}function zZe(e,t){return function(){return Vle(this,e,t.apply(this,arguments))}}function $Ze(e,t){return this.each((typeof t=="function"?zZe:VZe)(e,t))}function*GZe(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var zle=[null];function $c(e,t){this._groups=e,this._parents=t}function cE(){return new $c([[document.documentElement]],zle)}function KZe(){return this}$c.prototype=cE.prototype={constructor:$c,select:vJe,selectAll:EJe,selectChild:SJe,selectChildren:jJe,filter:IJe,data:LJe,enter:FJe,exit:UJe,join:QJe,merge:HJe,selection:KZe,order:VJe,sort:zJe,call:GJe,nodes:KJe,node:qJe,size:WJe,empty:XJe,each:YJe,attr:aZe,style:lZe,property:AZe,classed:pZe,text:bZe,html:CZe,raise:NZe,lower:kZe,append:BZe,insert:jZe,remove:FZe,clone:PZe,datum:RZe,on:HZe,dispatch:$Ze,[Symbol.iterator]:GZe};function Tu(e){return typeof e=="string"?new $c([[document.querySelector(e)]],[document.documentElement]):new $c([[e]],zle)}function qZe(e){let t;for(;t=e.sourceEvent;)e=t;return e}function TA(e,t){if(e=qZe(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const WZe={passive:!1},c2={capture:!0,passive:!1};function lI(e){e.stopImmediatePropagation()}function Iv(e){e.preventDefault(),e.stopImmediatePropagation()}function $le(e){var t=e.document.documentElement,r=Tu(e).on("dragstart.drag",Iv,c2);"onselectstart"in t?r.on("selectstart.drag",Iv,c2):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Gle(e,t){var r=e.document.documentElement,n=Tu(e).on("dragstart.drag",null);t&&(n.on("click.drag",Iv,c2),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const s_=e=>()=>e;function uO(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}uO.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function XZe(e){return!e.ctrlKey&&!e.button}function YZe(){return this.parentNode}function JZe(e,t){return t??{x:e.x,y:e.y}}function ZZe(){return navigator.maxTouchPoints||"ontouchstart"in this}function eet(){var e=XZe,t=YZe,r=JZe,n=ZZe,a={},s=_k("start","drag","end"),i=0,o,c,u,d,f=0;function h(j){j.on("mousedown.drag",p).filter(n).on("touchstart.drag",b).on("touchmove.drag",y,WZe).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(j,k){if(!(d||!e.call(this,j,k))){var I=_(this,t.call(this,j,k),j,k,"mouse");I&&(Tu(j.view).on("mousemove.drag",g,c2).on("mouseup.drag",x,c2),$le(j.view),lI(j),u=!1,o=j.clientX,c=j.clientY,I("start",j))}}function g(j){if(Iv(j),!u){var k=j.clientX-o,I=j.clientY-c;u=k*k+I*I>f}a.mouse("drag",j)}function x(j){Tu(j.view).on("mousemove.drag mouseup.drag",null),Gle(j.view,u),Iv(j),a.mouse("end",j)}function b(j,k){if(e.call(this,j,k)){var I=j.changedTouches,E=t.call(this,j,k),N=I.length,B,R;for(B=0;B<N;++B)(R=_(this,E,j,k,I[B].identifier,I[B]))&&(lI(j),R("start",j,I[B]))}}function y(j){var k=j.changedTouches,I=k.length,E,N;for(E=0;E<I;++E)(N=a[k[E].identifier])&&(Iv(j),N("drag",j,k[E]))}function w(j){var k=j.changedTouches,I=k.length,E,N;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),E=0;E<I;++E)(N=a[k[E].identifier])&&(lI(j),N("end",j,k[E]))}function _(j,k,I,E,N,B){var R=s.copy(),P=TA(B||I,k),D,L,M;if((M=r.call(j,new uO("beforestart",{sourceEvent:I,target:h,identifier:N,active:i,x:P[0],y:P[1],dx:0,dy:0,dispatch:R}),E))!=null)return D=M.x-P[0]||0,L=M.y-P[1]||0,function J(H,K,V){var G=P,X;switch(H){case"start":a[N]=J,X=i++;break;case"end":delete a[N],--i;case"drag":P=TA(V||K,k),X=i;break}R.call(H,j,new uO(H,{sourceEvent:K,subject:M,target:h,identifier:N,active:X,x:P[0]+D,y:P[1]+L,dx:P[0]-G[0],dy:P[1]-G[1],dispatch:R}),E)}}return h.filter=function(j){return arguments.length?(e=typeof j=="function"?j:s_(!!j),h):e},h.container=function(j){return arguments.length?(t=typeof j=="function"?j:s_(j),h):t},h.subject=function(j){return arguments.length?(r=typeof j=="function"?j:s_(j),h):r},h.touchable=function(j){return arguments.length?(n=typeof j=="function"?j:s_(!!j),h):n},h.on=function(){var j=s.on.apply(s,arguments);return j===s?h:j},h.clickDistance=function(j){return arguments.length?(f=(j=+j)*j,h):Math.sqrt(f)},h}var v1=0,Fy=0,oy=0,Kle=1e3,uS,Oy,dS=0,wg=0,Sk=0,u2=typeof performance=="object"&&performance.now?performance:Date,qle=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function VL(){return wg||(qle(tet),wg=u2.now()+Sk)}function tet(){wg=0}function AS(){this._call=this._time=this._next=null}AS.prototype=Wle.prototype={constructor:AS,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?VL():+r)+(t==null?0:+t),!this._next&&Oy!==this&&(Oy?Oy._next=this:uS=this,Oy=this),this._call=e,this._time=r,dO()},stop:function(){this._call&&(this._call=null,this._time=1/0,dO())}};function Wle(e,t,r){var n=new AS;return n.restart(e,t,r),n}function ret(){VL(),++v1;for(var e=uS,t;e;)(t=wg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--v1}function _q(){wg=(dS=u2.now())+Sk,v1=Fy=0;try{ret()}finally{v1=0,aet(),wg=0}}function net(){var e=u2.now(),t=e-dS;t>Kle&&(Sk-=t,dS=e)}function aet(){for(var e,t=uS,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:uS=r);Oy=e,dO(n)}function dO(e){if(!v1){Fy&&(Fy=clearTimeout(Fy));var t=e-wg;t>24?(e<1/0&&(Fy=setTimeout(_q,e-u2.now()-Sk)),oy&&(oy=clearInterval(oy))):(oy||(dS=u2.now(),oy=setInterval(net,Kle)),v1=1,qle(_q))}}function Nq(e,t,r){var n=new AS;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var set=_k("start","end","cancel","interrupt"),iet=[],Xle=0,Sq=1,AO=2,l5=3,kq=4,fO=5,c5=6;function kk(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;oet(e,r,{name:t,index:n,group:a,on:set,tween:iet,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Xle})}function zL(e,t){var r=zd(e,t);if(r.state>Xle)throw new Error("too late; already scheduled");return r}function of(e,t){var r=zd(e,t);if(r.state>l5)throw new Error("too late; already running");return r}function zd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function oet(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=Wle(s,0,r.time);function s(u){r.state=Sq,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,f,h,p;if(r.state!==Sq)return c();for(d in n)if(p=n[d],p.name===r.name){if(p.state===l5)return Nq(i);p.state===kq?(p.state=c5,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete n[d]):+d<t&&(p.state=c5,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete n[d])}if(Nq(function(){r.state===l5&&(r.state=kq,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=AO,r.on.call("start",e,e.__data__,r.index,r.group),r.state===AO){for(r.state=l5,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=p);a.length=f+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=fO,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===fO&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=c5,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function u5(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>AO&&n.state<fO,n.state=c5,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function cet(e){return this.each(function(){u5(this,e)})}function uet(e,t){var r,n;return function(){var a=of(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function det(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=of(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=o;break}c===u&&a.push(o)}s.tween=a}}function Aet(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=zd(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?uet:det)(r,e,t))}function $L(e,t,r){var n=e._id;return e.each(function(){var a=of(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return zd(a,n).value[t]}}function Yle(e,t){var r;return(typeof t=="number"?yd:t instanceof fg?EN:(r=fg(t))?(t=r,EN):Are)(e,t)}function fet(e){return function(){this.removeAttribute(e)}}function het(e){return function(){this.removeAttributeNS(e.space,e.local)}}function met(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function pet(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function get(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function xet(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function vet(e,t){var r=Nk(e),n=r==="transform"?h4e:Yle;return this.attrTween(e,typeof t=="function"?(r.local?xet:get)(r,n,$L(this,"attr."+e,t)):t==null?(r.local?het:fet)(r):(r.local?pet:met)(r,n,t))}function bet(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function yet(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function wet(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&yet(e,s)),r}return a._value=t,a}function Eet(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&bet(e,s)),r}return a._value=t,a}function Cet(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Nk(e);return this.tween(r,(n.local?wet:Eet)(n,t))}function _et(e,t){return function(){zL(this,e).delay=+t.apply(this,arguments)}}function Net(e,t){return t=+t,function(){zL(this,e).delay=t}}function ket(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?_et:Net)(t,e)):zd(this.node(),t).delay}function Bet(e,t){return function(){of(this,e).duration=+t.apply(this,arguments)}}function Tet(e,t){return t=+t,function(){of(this,e).duration=t}}function jet(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Bet:Tet)(t,e)):zd(this.node(),t).duration}function Iet(e,t){if(typeof t!="function")throw new Error;return function(){of(this,e).ease=t}}function Fet(e){var t=this._id;return arguments.length?this.each(Iet(t,e)):zd(this.node(),t).ease}function Oet(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;of(this,e).ease=r}}function Det(e){if(typeof e!="function")throw new Error;return this.each(Oet(this._id,e))}function Pet(e){typeof e!="function"&&(e=Dle(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new Nh(n,this._parents,this._name,this._id)}function Ret(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var c=t[o],u=r[o],d=c.length,f=i[o]=new Array(d),h,p=0;p<d;++p)(h=c[p]||u[p])&&(f[p]=h);for(;o<n;++o)i[o]=t[o];return new Nh(i,this._parents,this._name,this._id)}function Let(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Met(e,t,r){var n,a,s=Let(t)?zL:of;return function(){var i=s(this,e),o=i.on;o!==n&&(a=(n=o).copy()).on(t,r),i.on=a}}function Uet(e,t){var r=this._id;return arguments.length<2?zd(this.node(),r).on.on(e):this.each(Met(r,e,t))}function Qet(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function Het(){return this.on("end.remove",Qet(this._id))}function Vet(e){var t=this._name,r=this._id;typeof e!="function"&&(e=QL(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],c=o.length,u=s[i]=new Array(c),d,f,h=0;h<c;++h)(d=o[h])&&(f=e.call(d,d.__data__,h,o))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,kk(u[h],t,r,h,u,zd(d,r)));return new Nh(s,this._parents,t,r)}function zet(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Ole(e));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var c=n[o],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),p,g=zd(d,r),x=0,b=h.length;x<b;++x)(p=h[x])&&kk(p,t,r,x,h,g);s.push(h),i.push(d)}return new Nh(s,i,t,r)}var $et=cE.prototype.constructor;function Get(){return new $et(this._groups,this._parents)}function Ket(e,t){var r,n,a;return function(){var s=x1(this,e),i=(this.style.removeProperty(e),x1(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function Jle(e){return function(){this.style.removeProperty(e)}}function qet(e,t,r){var n,a=r+"",s;return function(){var i=x1(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function Wet(e,t,r){var n,a,s;return function(){var i=x1(this,e),o=r(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),x1(this,e))),i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o))}}function Xet(e,t){var r,n,a,s="style."+t,i="end."+s,o;return function(){var c=of(this,e),u=c.on,d=c.value[s]==null?o||(o=Jle(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),c.on=n}}function Yet(e,t,r){var n=(e+="")=="transform"?f4e:Yle;return t==null?this.styleTween(e,Ket(e,n)).on("end.style."+e,Jle(e)):typeof t=="function"?this.styleTween(e,Wet(e,n,$L(this,"style."+e,t))).each(Xet(this._id,e)):this.styleTween(e,qet(e,n,t),r).on("end.style."+e,null)}function Jet(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Zet(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&Jet(e,i,r)),n}return s._value=t,s}function ett(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Zet(e,t,r??""))}function ttt(e){return function(){this.textContent=e}}function rtt(e){return function(){var t=e(this);this.textContent=t??""}}function ntt(e){return this.tween("text",typeof e=="function"?rtt($L(this,"text",e)):ttt(e==null?"":e+""))}function att(e){return function(t){this.textContent=e.call(this,t)}}function stt(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&att(a)),t}return n._value=e,n}function itt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,stt(e))}function ott(){for(var e=this._name,t=this._id,r=Zle(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)if(c=i[u]){var d=zd(c,t);kk(c,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Nh(n,this._parents,e,r)}function ltt(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},c={value:function(){--a===0&&s()}};r.each(function(){var u=of(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),u.on=t}),a===0&&s()})}var ctt=0;function Nh(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Zle(){return++ctt}var Uf=cE.prototype;Nh.prototype={constructor:Nh,select:Vet,selectAll:zet,selectChild:Uf.selectChild,selectChildren:Uf.selectChildren,filter:Pet,merge:Ret,selection:Get,transition:ott,call:Uf.call,nodes:Uf.nodes,node:Uf.node,size:Uf.size,empty:Uf.empty,each:Uf.each,on:Uet,attr:vet,attrTween:Cet,style:Yet,styleTween:ett,text:ntt,textTween:itt,remove:Het,tween:Aet,delay:ket,duration:jet,ease:Fet,easeVarying:Det,end:ltt,[Symbol.iterator]:Uf[Symbol.iterator]};function utt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var dtt={time:null,delay:0,duration:250,ease:utt};function Att(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function ftt(e){var t,r;e instanceof Nh?(t=e._id,e=e._name):(t=Zle(),(r=dtt).time=VL(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&kk(c,e,t,u,i,r||Att(c,t));return new Nh(n,this._parents,e,t)}cE.prototype.interrupt=cet;cE.prototype.transition=ftt;const i_=e=>()=>e;function htt(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function rh(e,t,r){this.k=e,this.x=t,this.y=r}rh.prototype={constructor:rh,scale:function(e){return e===1?this:new rh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new rh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var im=new rh(1,0,0);rh.prototype;function cI(e){e.stopImmediatePropagation()}function ly(e){e.preventDefault(),e.stopImmediatePropagation()}function mtt(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function ptt(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Bq(){return this.__zoom||im}function gtt(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function xtt(){return navigator.maxTouchPoints||"ontouchstart"in this}function vtt(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function btt(){var e=mtt,t=ptt,r=vtt,n=gtt,a=xtt,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,c=x4e,u=_k("start","zoom","end"),d,f,h,p=500,g=150,x=0,b=10;function y(M){M.property("__zoom",Bq).on("wheel.zoom",N,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",R).filter(a).on("touchstart.zoom",P).on("touchmove.zoom",D).on("touchend.zoom touchcancel.zoom",L).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(M,J,H,K){var V=M.selection?M.selection():M;V.property("__zoom",Bq),M!==V?k(M,J,H,K):V.interrupt().each(function(){I(this,arguments).event(K).start().zoom(null,typeof J=="function"?J.apply(this,arguments):J).end()})},y.scaleBy=function(M,J,H,K){y.scaleTo(M,function(){var V=this.__zoom.k,G=typeof J=="function"?J.apply(this,arguments):J;return V*G},H,K)},y.scaleTo=function(M,J,H,K){y.transform(M,function(){var V=t.apply(this,arguments),G=this.__zoom,X=H==null?j(V):typeof H=="function"?H.apply(this,arguments):H,ee=G.invert(X),F=typeof J=="function"?J.apply(this,arguments):J;return r(_(w(G,F),X,ee),V,i)},H,K)},y.translateBy=function(M,J,H,K){y.transform(M,function(){return r(this.__zoom.translate(typeof J=="function"?J.apply(this,arguments):J,typeof H=="function"?H.apply(this,arguments):H),t.apply(this,arguments),i)},null,K)},y.translateTo=function(M,J,H,K,V){y.transform(M,function(){var G=t.apply(this,arguments),X=this.__zoom,ee=K==null?j(G):typeof K=="function"?K.apply(this,arguments):K;return r(im.translate(ee[0],ee[1]).scale(X.k).translate(typeof J=="function"?-J.apply(this,arguments):-J,typeof H=="function"?-H.apply(this,arguments):-H),G,i)},K,V)};function w(M,J){return J=Math.max(s[0],Math.min(s[1],J)),J===M.k?M:new rh(J,M.x,M.y)}function _(M,J,H){var K=J[0]-H[0]*M.k,V=J[1]-H[1]*M.k;return K===M.x&&V===M.y?M:new rh(M.k,K,V)}function j(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function k(M,J,H,K){M.on("start.zoom",function(){I(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(K).end()}).tween("zoom",function(){var V=this,G=arguments,X=I(V,G).event(K),ee=t.apply(V,G),F=H==null?j(ee):typeof H=="function"?H.apply(V,G):H,z=Math.max(ee[1][0]-ee[0][0],ee[1][1]-ee[0][1]),Y=V.__zoom,te=typeof J=="function"?J.apply(V,G):J,ae=c(Y.invert(F).concat(z/Y.k),te.invert(F).concat(z/te.k));return function(le){if(le===1)le=te;else{var ie=ae(le),ce=z/ie[2];le=new rh(ce,F[0]-ie[0]*ce,F[1]-ie[1]*ce)}X.zoom(null,le)}})}function I(M,J,H){return!H&&M.__zooming||new E(M,J)}function E(M,J){this.that=M,this.args=J,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,J),this.taps=0}E.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,J){return this.mouse&&M!=="mouse"&&(this.mouse[1]=J.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=J.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=J.invert(this.touch1[0])),this.that.__zoom=J,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var J=Tu(this.that).datum();u.call(M,this.that,new htt(M,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),J)}};function N(M,...J){if(!e.apply(this,arguments))return;var H=I(this,J).event(M),K=this.__zoom,V=Math.max(s[0],Math.min(s[1],K.k*Math.pow(2,n.apply(this,arguments)))),G=TA(M);if(H.wheel)(H.mouse[0][0]!==G[0]||H.mouse[0][1]!==G[1])&&(H.mouse[1]=K.invert(H.mouse[0]=G)),clearTimeout(H.wheel);else{if(K.k===V)return;H.mouse=[G,K.invert(G)],u5(this),H.start()}ly(M),H.wheel=setTimeout(X,g),H.zoom("mouse",r(_(w(K,V),H.mouse[0],H.mouse[1]),H.extent,i));function X(){H.wheel=null,H.end()}}function B(M,...J){if(h||!e.apply(this,arguments))return;var H=M.currentTarget,K=I(this,J,!0).event(M),V=Tu(M.view).on("mousemove.zoom",F,!0).on("mouseup.zoom",z,!0),G=TA(M,H),X=M.clientX,ee=M.clientY;$le(M.view),cI(M),K.mouse=[G,this.__zoom.invert(G)],u5(this),K.start();function F(Y){if(ly(Y),!K.moved){var te=Y.clientX-X,ae=Y.clientY-ee;K.moved=te*te+ae*ae>x}K.event(Y).zoom("mouse",r(_(K.that.__zoom,K.mouse[0]=TA(Y,H),K.mouse[1]),K.extent,i))}function z(Y){V.on("mousemove.zoom mouseup.zoom",null),Gle(Y.view,K.moved),ly(Y),K.event(Y).end()}}function R(M,...J){if(e.apply(this,arguments)){var H=this.__zoom,K=TA(M.changedTouches?M.changedTouches[0]:M,this),V=H.invert(K),G=H.k*(M.shiftKey?.5:2),X=r(_(w(H,G),K,V),t.apply(this,J),i);ly(M),o>0?Tu(this).transition().duration(o).call(k,X,K,M):Tu(this).call(y.transform,X,K,M)}}function P(M,...J){if(e.apply(this,arguments)){var H=M.touches,K=H.length,V=I(this,J,M.changedTouches.length===K).event(M),G,X,ee,F;for(cI(M),X=0;X<K;++X)ee=H[X],F=TA(ee,this),F=[F,this.__zoom.invert(F),ee.identifier],V.touch0?!V.touch1&&V.touch0[2]!==F[2]&&(V.touch1=F,V.taps=0):(V.touch0=F,G=!0,V.taps=1+!!d);d&&(d=clearTimeout(d)),G&&(V.taps<2&&(f=F[0],d=setTimeout(function(){d=null},p)),u5(this),V.start())}}function D(M,...J){if(this.__zooming){var H=I(this,J).event(M),K=M.changedTouches,V=K.length,G,X,ee,F;for(ly(M),G=0;G<V;++G)X=K[G],ee=TA(X,this),H.touch0&&H.touch0[2]===X.identifier?H.touch0[0]=ee:H.touch1&&H.touch1[2]===X.identifier&&(H.touch1[0]=ee);if(X=H.that.__zoom,H.touch1){var z=H.touch0[0],Y=H.touch0[1],te=H.touch1[0],ae=H.touch1[1],le=(le=te[0]-z[0])*le+(le=te[1]-z[1])*le,ie=(ie=ae[0]-Y[0])*ie+(ie=ae[1]-Y[1])*ie;X=w(X,Math.sqrt(le/ie)),ee=[(z[0]+te[0])/2,(z[1]+te[1])/2],F=[(Y[0]+ae[0])/2,(Y[1]+ae[1])/2]}else if(H.touch0)ee=H.touch0[0],F=H.touch0[1];else return;H.zoom("touch",r(_(X,ee,F),H.extent,i))}}function L(M,...J){if(this.__zooming){var H=I(this,J).event(M),K=M.changedTouches,V=K.length,G,X;for(cI(M),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),G=0;G<V;++G)X=K[G],H.touch0&&H.touch0[2]===X.identifier?delete H.touch0:H.touch1&&H.touch1[2]===X.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(X=TA(X,this),Math.hypot(f[0]-X[0],f[1]-X[1])<b)){var ee=Tu(this).on("dblclick.zoom");ee&&ee.apply(this,arguments)}}}return y.wheelDelta=function(M){return arguments.length?(n=typeof M=="function"?M:i_(+M),y):n},y.filter=function(M){return arguments.length?(e=typeof M=="function"?M:i_(!!M),y):e},y.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:i_(!!M),y):a},y.extent=function(M){return arguments.length?(t=typeof M=="function"?M:i_([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),y):t},y.scaleExtent=function(M){return arguments.length?(s[0]=+M[0],s[1]=+M[1],y):[s[0],s[1]]},y.translateExtent=function(M){return arguments.length?(i[0][0]=+M[0][0],i[1][0]=+M[1][0],i[0][1]=+M[0][1],i[1][1]=+M[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(M){return arguments.length?(r=M,y):r},y.duration=function(M){return arguments.length?(o=+M,y):o},y.interpolate=function(M){return arguments.length?(c=M,y):c},y.on=function(){var M=u.on.apply(u,arguments);return M===u?y:M},y.clickDistance=function(M){return arguments.length?(x=(M=+M)*M,y):Math.sqrt(x)},y.tapDistance=function(M){return arguments.length?(b=+M,y):b},y}const Bk=S.createContext(null),ytt=Bk.Provider,Sh={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ece=Sh.error001();function ds(e,t){const r=S.useContext(Bk);if(r===null)throw new Error(ece);return Ile(r,e,t)}const eo=()=>{const e=S.useContext(Bk);if(e===null)throw new Error(ece);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},wtt=e=>e.userSelectionActive?"none":"all";function tce({position:e,children:t,className:r,style:n,...a}){const s=ds(wtt),i=`${e}`.split("-");return nt.createElement("div",{className:_l(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function Ett({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:nt.createElement(tce,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},nt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Ctt=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:c,className:u,...d})=>{const f=S.useRef(null),[h,p]=S.useState({x:0,y:0,width:0,height:0}),g=_l(["react-flow__edge-textwrapper",u]);return S.useEffect(()=>{if(f.current){const x=f.current.getBBox();p({x:x.x,y:x.y,width:x.width,height:x.height})}},[r]),typeof r>"u"||!r?null:nt.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&nt.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),nt.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),c)};var _tt=S.memo(Ctt);const GL=e=>({width:e.offsetWidth,height:e.offsetHeight}),b1=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),KL=(e={x:0,y:0},t)=>({x:b1(e.x,t[0][0],t[1][0]),y:b1(e.y,t[0][1],t[1][1])}),Tq=(e,t,r)=>e<t?b1(Math.abs(e-t),1,50)/50:e>r?-b1(Math.abs(e-r),1,50)/50:0,rce=(e,t)=>{const r=Tq(e.x,35,t.width-35)*20,n=Tq(e.y,35,t.height-35)*20;return[r,n]},nce=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Ntt=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),qL=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),Stt=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),jq=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),hO=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},ktt=e=>Ou(e.width)&&Ou(e.height)&&Ou(e.x)&&Ou(e.y),Ou=e=>!isNaN(e)&&isFinite(e),Ss=Symbol.for("internals"),ace=["Enter"," ","Escape"],Btt=(e,t)=>{},Ttt=e=>"nativeEvent"in e;function mO(e){var a,s;const t=Ttt(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const sce=e=>"clientX"in e,om=(e,t)=>{var s,i;const r=sce(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},fS=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},uE=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p=20})=>nt.createElement(nt.Fragment,null,nt.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&nt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&Ou(r)&&Ou(n)?nt.createElement(_tt,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u}):null);uE.displayName="BaseEdge";function cy(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function ice({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,o=n<t?n+i:n-i;return[s,o,a,i]}function oce({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const c=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+o*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Eg;(function(e){e.Strict="strict",e.Loose="loose"})(Eg||(Eg={}));var Mp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Mp||(Mp={}));var d2;(function(e){e.Partial="partial",e.Full="full"})(d2||(d2={}));var U0;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(U0||(U0={}));var hS;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(hS||(hS={}));var Er;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Er||(Er={}));function Iq({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===Er.Left||e===Er.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function lce({sourceX:e,sourceY:t,sourcePosition:r=Er.Bottom,targetX:n,targetY:a,targetPosition:s=Er.Top}){const[i,o]=Iq({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=Iq({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,p]=oce({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${o} ${c},${u} ${n},${a}`,d,f,h,p]}const WL=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Er.Bottom,targetPosition:s=Er.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:x})=>{const[b,y,w]=lce({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return nt.createElement(uE,{path:b,labelX:y,labelY:w,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:x})});WL.displayName="SimpleBezierEdge";const Fq={[Er.Left]:{x:-1,y:0},[Er.Right]:{x:1,y:0},[Er.Top]:{x:0,y:-1},[Er.Bottom]:{x:0,y:1}},jtt=({source:e,sourcePosition:t=Er.Bottom,target:r})=>t===Er.Left||t===Er.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},Oq=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Itt({source:e,sourcePosition:t=Er.Bottom,target:r,targetPosition:n=Er.Top,center:a,offset:s}){const i=Fq[t],o=Fq[n],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=jtt({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let p=[],g,x;const b={x:0,y:0},y={x:0,y:0},[w,_,j,k]=ice({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[f]*o[f]===-1){g=a.x??w,x=a.y??_;const E=[{x:g,y:c.y},{x:g,y:u.y}],N=[{x:c.x,y:x},{x:u.x,y:x}];i[f]===h?p=f==="x"?E:N:p=f==="x"?N:E}else{const E=[{x:c.x,y:u.y}],N=[{x:u.x,y:c.y}];if(f==="x"?p=i.x===h?N:E:p=i.y===h?E:N,t===n){const L=Math.abs(e[f]-r[f]);if(L<=s){const M=Math.min(s-1,s-L);i[f]===h?b[f]=(c[f]>e[f]?-1:1)*M:y[f]=(u[f]>r[f]?-1:1)*M}}if(t!==n){const L=f==="x"?"y":"x",M=i[f]===o[L],J=c[L]>u[L],H=c[L]<u[L];(i[f]===1&&(!M&&J||M&&H)||i[f]!==1&&(!M&&H||M&&J))&&(p=f==="x"?E:N)}const B={x:c.x+b.x,y:c.y+b.y},R={x:u.x+y.x,y:u.y+y.y},P=Math.max(Math.abs(B.x-p[0].x),Math.abs(R.x-p[0].x)),D=Math.max(Math.abs(B.y-p[0].y),Math.abs(R.y-p[0].y));P>=D?(g=(B.x+R.x)/2,x=p[0].y):(g=p[0].x,x=(B.y+R.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...p,{x:u.x+y.x,y:u.y+y.y},r],g,x,j,k]}function Ftt(e,t,r,n){const a=Math.min(Oq(e,t)/2,Oq(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${i+a*c}Q ${s},${i} ${s+a*o},${i}`}function pO({sourceX:e,sourceY:t,sourcePosition:r=Er.Bottom,targetX:n,targetY:a,targetPosition:s=Er.Top,borderRadius:i=5,centerX:o,centerY:c,offset:u=20}){const[d,f,h,p,g]=Itt({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:c},offset:u});return[d.reduce((b,y,w)=>{let _="";return w>0&&w<d.length-1?_=Ftt(d[w-1],y,d[w+1],i):_=`${w===0?"M":"L"}${y.x} ${y.y}`,b+=_,b},""),f,h,p,g]}const Tk=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=Er.Bottom,targetPosition:h=Er.Top,markerEnd:p,markerStart:g,pathOptions:x,interactionWidth:b})=>{const[y,w,_]=pO({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:x==null?void 0:x.borderRadius,offset:x==null?void 0:x.offset});return nt.createElement(uE,{path:y,labelX:w,labelY:_,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:g,interactionWidth:b})});Tk.displayName="SmoothStepEdge";const XL=S.memo(e=>{var t;return nt.createElement(Tk,{...e,pathOptions:S.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});XL.displayName="StepEdge";function Ott({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,o]=ice({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,o]}const YL=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[g,x,b]=Ott({sourceX:e,sourceY:t,targetX:r,targetY:n});return nt.createElement(uE,{path:g,labelX:x,labelY:b,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})});YL.displayName="StraightEdge";function o_(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Dq({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case Er.Left:return[t-o_(t-n,s),r];case Er.Right:return[t+o_(n-t,s),r];case Er.Top:return[t,r-o_(r-a,s)];case Er.Bottom:return[t,r+o_(a-r,s)]}}function cce({sourceX:e,sourceY:t,sourcePosition:r=Er.Bottom,targetX:n,targetY:a,targetPosition:s=Er.Top,curvature:i=.25}){const[o,c]=Dq({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=Dq({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[f,h,p,g]=oce({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${c} ${u},${d} ${n},${a}`,f,h,p,g]}const mS=S.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Er.Bottom,targetPosition:s=Er.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,pathOptions:x,interactionWidth:b})=>{const[y,w,_]=cce({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:x==null?void 0:x.curvature});return nt.createElement(uE,{path:y,labelX:w,labelY:_,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:b})});mS.displayName="BezierEdge";const JL=S.createContext(null),Dtt=JL.Provider;JL.Consumer;const Ptt=()=>S.useContext(JL),Rtt=e=>"id"in e&&"source"in e&&"target"in e,Ltt=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,gO=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,Mtt=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Utt=(e,t)=>{if(!e.source||!e.target)return t;let r;return Rtt(e)?r={...e}:r={...e,id:Ltt(e)},Mtt(r,t)?t:t.concat(r)},xO=({x:e,y:t},[r,n,a],s,[i,o])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(c.x/i),y:o*Math.round(c.y/o)}:c},uce=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Fv=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},ZL=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=Fv(a,t).positionAbsolute;return Ntt(n,qL({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Stt(r)},dce=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:p=!0,hidden:g=!1}=d;if(i&&!p||g)return!1;const{positionAbsolute:x}=Fv(d,o),b={x:x.x,y:x.y,width:f||0,height:h||0},y=hO(c,b),w=typeof f>"u"||typeof h>"u"||f===null||h===null,_=s&&y>0,j=(f||0)*(h||0);(w||_||y>=j||d.dragging)&&u.push(d)}),u},Ace=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},fce=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),o=r/(e.height*(1+s)),c=Math.min(i,o),u=b1(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,p=r/2-f*u;return{x:h,y:p,zoom:u}},Ep=(e,t=0)=>e.transition().duration(t);function Pq(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,o;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function Qtt(e,t,r,n,a,s){const{x:i,y:o}=om(e),u=t.elementsFromPoint(i,o).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const x=eM(void 0,u),b=u.getAttribute("data-handleid"),y=s({nodeId:g,id:b,type:x});if(y){const w=a.find(_=>_.nodeId===g&&_.type===x&&_.id===b);return{handle:{id:b,type:x,nodeId:g,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const x=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(x<=n){const b=s(g);x<=f&&(x<f?d=[{handle:g,validHandleResult:b}]:x===f&&d.push({handle:g,validHandleResult:b}),f=x)}}),!d.length)return{handle:null,validHandleResult:hce()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),p=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:x})=>p?g.type==="target":h?x.isValid:!0)||d[0]}const Htt={source:null,target:null,sourceHandle:null,targetHandle:null},hce=()=>({handleDomNode:null,isValid:!1,connection:Htt,endHandle:null});function mce(e,t,r,n,a,s,i){const o=a==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...hce(),handleDomNode:c};if(c){const d=eM(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),x={source:o?f:r,sourceHandle:o?h:n,target:o?r:f,targetHandle:o?n:h};u.connection=x,p&&g&&(t===Eg.Strict?o&&d==="source"||!o&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(x))}return u}function Vtt({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Ss]){const{handleBounds:i}=s[Ss];let o=[],c=[];i&&(o=Pq(s,i,"source",`${t}-${r}-${n}`),c=Pq(s,i,"target",`${t}-${r}-${n}`)),a.push(...o,...c)}return a},[])}function eM(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function uI(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function ztt(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function pce({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:c,onReconnectEnd:u}){const d=nce(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:p,connectionRadius:g,onConnectStart:x,panBy:b,getNodes:y,cancelConnection:w}=s();let _=0,j;const{x:k,y:I}=om(e),E=d==null?void 0:d.elementFromPoint(k,I),N=eM(c,E),B=h==null?void 0:h.getBoundingClientRect();if(!B||!N)return;let R,P=om(e,B),D=!1,L=null,M=!1,J=null;const H=Vtt({nodes:y(),nodeId:r,handleId:t,handleType:N}),K=()=>{if(!p)return;const[X,ee]=rce(P,B);b({x:X,y:ee}),_=requestAnimationFrame(K)};i({connectionPosition:P,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:N,connectionStartHandle:{nodeId:r,handleId:t,type:N},connectionEndHandle:null}),x==null||x(e,{nodeId:r,handleId:t,handleType:N});function V(X){const{transform:ee}=s();P=om(X,B);const{handle:F,validHandleResult:z}=Qtt(X,d,xO(P,ee,!1,[1,1]),g,H,Y=>mce(Y,f,r,t,a?"target":"source",o,d));if(j=F,D||(K(),D=!0),J=z.handleDomNode,L=z.connection,M=z.isValid,i({connectionPosition:j&&M?uce({x:j.x,y:j.y},ee):P,connectionStatus:ztt(!!j,M),connectionEndHandle:z.endHandle}),!j&&!M&&!J)return uI(R);L.source!==L.target&&J&&(uI(R),R=J,J.classList.add("connecting","react-flow__handle-connecting"),J.classList.toggle("valid",M),J.classList.toggle("react-flow__handle-valid",M))}function G(X){var ee,F;(j||J)&&L&&M&&(n==null||n(L)),(F=(ee=s()).onConnectEnd)==null||F.call(ee,X),c&&(u==null||u(X)),uI(R),w(),cancelAnimationFrame(_),D=!1,M=!1,L=null,J=null,d.removeEventListener("mousemove",V),d.removeEventListener("mouseup",G),d.removeEventListener("touchmove",V),d.removeEventListener("touchend",G)}d.addEventListener("mousemove",V),d.addEventListener("mouseup",G),d.addEventListener("touchmove",V),d.addEventListener("touchend",G)}const Rq=()=>!0,$tt=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Gtt=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},gce=S.forwardRef(({type:e="source",position:t=Er.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},p)=>{var B,R;const g=i||null,x=e==="target",b=eo(),y=Ptt(),{connectOnClick:w,noPanClassName:_}=ds($tt,sl),{connecting:j,clickConnecting:k}=ds(Gtt(y,g,e),sl);y||(R=(B=b.getState()).onError)==null||R.call(B,"010",Sh.error010());const I=P=>{const{defaultEdgeOptions:D,onConnect:L,hasDefaultEdges:M}=b.getState(),J={...D,...P};if(M){const{edges:H,setEdges:K}=b.getState();K(Utt(J,H))}L==null||L(J),o==null||o(J)},E=P=>{if(!y)return;const D=sce(P);a&&(D&&P.button===0||!D)&&pce({event:P,handleId:g,nodeId:y,onConnect:I,isTarget:x,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||Rq}),D?d==null||d(P):f==null||f(P)},N=P=>{const{onClickConnectStart:D,onClickConnectEnd:L,connectionClickStartHandle:M,connectionMode:J,isValidConnection:H}=b.getState();if(!y||!M&&!a)return;if(!M){D==null||D(P,{nodeId:y,handleId:g,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const K=nce(P.target),V=r||H||Rq,{connection:G,isValid:X}=mce({nodeId:y,id:g,type:e},J,M.nodeId,M.handleId||null,M.type,V,K);X&&I(G),L==null||L(P),b.setState({connectionClickStartHandle:null})};return nt.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:_l(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",_,u,{source:!x,target:x,connectable:n,connectablestart:a,connectableend:s,connecting:k,connectionindicator:n&&(a&&!j||s&&j)}]),onMouseDown:E,onTouchStart:E,onClick:w?N:void 0,ref:p,...h},c)});gce.displayName="Handle";var y1=S.memo(gce);const xce=({data:e,isConnectable:t,targetPosition:r=Er.Top,sourcePosition:n=Er.Bottom})=>nt.createElement(nt.Fragment,null,nt.createElement(y1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,nt.createElement(y1,{type:"source",position:n,isConnectable:t}));xce.displayName="DefaultNode";var vO=S.memo(xce);const vce=({data:e,isConnectable:t,sourcePosition:r=Er.Bottom})=>nt.createElement(nt.Fragment,null,e==null?void 0:e.label,nt.createElement(y1,{type:"source",position:r,isConnectable:t}));vce.displayName="InputNode";var bce=S.memo(vce);const yce=({data:e,isConnectable:t,targetPosition:r=Er.Top})=>nt.createElement(nt.Fragment,null,nt.createElement(y1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);yce.displayName="OutputNode";var wce=S.memo(yce);const tM=()=>null;tM.displayName="GroupNode";const Ktt=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),l_=e=>e.id;function qtt(e,t){return sl(e.selectedNodes.map(l_),t.selectedNodes.map(l_))&&sl(e.selectedEdges.map(l_),t.selectedEdges.map(l_))}const Ece=S.memo(({onSelectionChange:e})=>{const t=eo(),{selectedNodes:r,selectedEdges:n}=ds(Ktt,qtt);return S.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});Ece.displayName="SelectionListener";const Wtt=e=>!!e.onSelectionChange;function Xtt({onSelectionChange:e}){const t=ds(Wtt);return e||t?nt.createElement(Ece,{onSelectionChange:e}):null}const Ytt=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Tx(e,t){S.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function wn(e,t,r){S.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const Jtt=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:g,minZoom:x,maxZoom:b,nodeExtent:y,onNodesChange:w,onEdgesChange:_,elementsSelectable:j,connectionMode:k,snapGrid:I,snapToGrid:E,translateExtent:N,connectOnClick:B,defaultEdgeOptions:R,fitView:P,fitViewOptions:D,onNodesDelete:L,onEdgesDelete:M,onNodeDrag:J,onNodeDragStart:H,onNodeDragStop:K,onSelectionDrag:V,onSelectionDragStart:G,onSelectionDragStop:X,noPanClassName:ee,nodeOrigin:F,rfId:z,autoPanOnConnect:Y,autoPanOnNodeDrag:te,onError:ae,connectionRadius:le,isValidConnection:ie,nodeDragThreshold:ce})=>{const{setNodes:pe,setEdges:Be,setDefaultNodesAndEdges:ne,setMinZoom:_e,setMaxZoom:De,setTranslateExtent:Se,setNodeExtent:fe,reset:Ie}=ds(Ytt,sl),Ue=eo();return S.useEffect(()=>{const Ye=n==null?void 0:n.map(ye=>({...ye,...R}));return ne(r,Ye),()=>{Ie()}},[]),wn("defaultEdgeOptions",R,Ue.setState),wn("connectionMode",k,Ue.setState),wn("onConnect",a,Ue.setState),wn("onConnectStart",s,Ue.setState),wn("onConnectEnd",i,Ue.setState),wn("onClickConnectStart",o,Ue.setState),wn("onClickConnectEnd",c,Ue.setState),wn("nodesDraggable",u,Ue.setState),wn("nodesConnectable",d,Ue.setState),wn("nodesFocusable",f,Ue.setState),wn("edgesFocusable",h,Ue.setState),wn("edgesUpdatable",p,Ue.setState),wn("elementsSelectable",j,Ue.setState),wn("elevateNodesOnSelect",g,Ue.setState),wn("snapToGrid",E,Ue.setState),wn("snapGrid",I,Ue.setState),wn("onNodesChange",w,Ue.setState),wn("onEdgesChange",_,Ue.setState),wn("connectOnClick",B,Ue.setState),wn("fitViewOnInit",P,Ue.setState),wn("fitViewOnInitOptions",D,Ue.setState),wn("onNodesDelete",L,Ue.setState),wn("onEdgesDelete",M,Ue.setState),wn("onNodeDrag",J,Ue.setState),wn("onNodeDragStart",H,Ue.setState),wn("onNodeDragStop",K,Ue.setState),wn("onSelectionDrag",V,Ue.setState),wn("onSelectionDragStart",G,Ue.setState),wn("onSelectionDragStop",X,Ue.setState),wn("noPanClassName",ee,Ue.setState),wn("nodeOrigin",F,Ue.setState),wn("rfId",z,Ue.setState),wn("autoPanOnConnect",Y,Ue.setState),wn("autoPanOnNodeDrag",te,Ue.setState),wn("onError",ae,Ue.setState),wn("connectionRadius",le,Ue.setState),wn("isValidConnection",ie,Ue.setState),wn("nodeDragThreshold",ce,Ue.setState),Tx(e,pe),Tx(t,Be),Tx(x,_e),Tx(b,De),Tx(N,Se),Tx(y,fe),null},Lq={display:"none"},Ztt={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Cce="react-flow__node-desc",_ce="react-flow__edge-desc",ert="react-flow__aria-live",trt=e=>e.ariaLiveMessage;function rrt({rfId:e}){const t=ds(trt);return nt.createElement("div",{id:`${ert}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Ztt},t)}function nrt({rfId:e,disableKeyboardA11y:t}){return nt.createElement(nt.Fragment,null,nt.createElement("div",{id:`${Cce}-${e}`,style:Lq},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),nt.createElement("div",{id:`${_ce}-${e}`,style:Lq},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&nt.createElement(rrt,{rfId:e}))}var A2=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=S.useState(!1),a=S.useRef(!1),s=S.useRef(new Set([])),[i,o]=S.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return S.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=p=>{if(a.current=p.ctrlKey||p.metaKey||p.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&mO(p))return!1;const x=Uq(p.code,o);s.current.add(p[x]),Mq(i,s.current,!1)&&(p.preventDefault(),n(!0))},f=p=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&mO(p))return!1;const x=Uq(p.code,o);Mq(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(p[x]),p.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function Mq(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function Uq(e,t){return t.includes(e)?"code":"key"}function Nce(e,t,r,n){var o,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=Fv(s,n);return Nce(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[Ss])==null?void 0:o.z)??0)>(r.z??0)?((c=s[Ss])==null?void 0:c.z)??0:r.z??0},n)}function Sce(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:c}=Nce(n,e,{...n.position,z:((s=n[Ss])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:o},n[Ss].z=c,r!=null&&r[n.id]&&(n[Ss].isParent=!0)}})}function dI(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(o=>{var p;const c=(Ou(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=t.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},f=o.parentNode||o.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Ss,{enumerable:!1,value:{handleBounds:h||(p=u==null?void 0:u[Ss])==null?void 0:p.handleBounds,z:c}}),a.set(o.id,d)}),Sce(a,r,s),a}function kce(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(o&&c&&(h||!t.initial)){const g=r().filter(b=>{var w;const y=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(w=t.nodes)!=null&&w.length?y&&t.nodes.some(_=>_.id===b.id):y}),x=g.every(b=>b.width&&b.height);if(g.length>0&&x){const b=ZL(g,f),{x:y,y:w,zoom:_}=fce(b,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),j=im.translate(y,w).scale(_);return typeof t.duration=="number"&&t.duration>0?o.transform(Ep(c,t.duration),j):o.transform(c,j),!0}}return!1}function art(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Ss]:n[Ss],selected:r.selected})}),new Map(t)}function srt(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function c_({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:art(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:srt(t,s)}),o==null||o(t))}const jx=()=>{},irt={zoomIn:jx,zoomOut:jx,zoomTo:jx,getZoom:()=>1,setViewport:jx,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:jx,fitBounds:jx,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},ort=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),lrt=()=>{const e=eo(),{d3Zoom:t,d3Selection:r}=ds(ort,sl);return S.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(Ep(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(Ep(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(Ep(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,o,c]=e.getState().transform,u=im.translate(a.x??i,a.y??o).scale(a.zoom??c);t.transform(Ep(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>kce(e.getState,a),setCenter:(a,s,i)=>{const{width:o,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=o/2-a*d,h=c/2-s*d,p=im.translate(f,h).scale(d);t.transform(Ep(r,i==null?void 0:i.duration),p)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=fce(a,i,o,c,u,(s==null?void 0:s.padding)??.1),p=im.translate(d,f).scale(h);t.transform(Ep(r,s==null?void 0:s.duration),p)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),xO(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return xO(f,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:o,y:c}=i.getBoundingClientRect(),u=uce(a,s);return{x:u.x+o,y:u.y+c}},viewportInitialized:!0}:irt,[t,r])};function jk(){const e=lrt(),t=eo(),r=S.useCallback(()=>t.getState().getNodes().map(x=>({...x})),[]),n=S.useCallback(x=>t.getState().nodeInternals.get(x),[]),a=S.useCallback(()=>{const{edges:x=[]}=t.getState();return x.map(b=>({...b}))},[]),s=S.useCallback(x=>{const{edges:b=[]}=t.getState();return b.find(y=>y.id===x)},[]),i=S.useCallback(x=>{const{getNodes:b,setNodes:y,hasDefaultNodes:w,onNodesChange:_}=t.getState(),j=b(),k=typeof x=="function"?x(j):x;if(w)y(k);else if(_){const I=k.length===0?j.map(E=>({type:"remove",id:E.id})):k.map(E=>({item:E,type:"reset"}));_(I)}},[]),o=S.useCallback(x=>{const{edges:b=[],setEdges:y,hasDefaultEdges:w,onEdgesChange:_}=t.getState(),j=typeof x=="function"?x(b):x;if(w)y(j);else if(_){const k=j.length===0?b.map(I=>({type:"remove",id:I.id})):j.map(I=>({item:I,type:"reset"}));_(k)}},[]),c=S.useCallback(x=>{const b=Array.isArray(x)?x:[x],{getNodes:y,setNodes:w,hasDefaultNodes:_,onNodesChange:j}=t.getState();if(_){const I=[...y(),...b];w(I)}else if(j){const k=b.map(I=>({item:I,type:"add"}));j(k)}},[]),u=S.useCallback(x=>{const b=Array.isArray(x)?x:[x],{edges:y=[],setEdges:w,hasDefaultEdges:_,onEdgesChange:j}=t.getState();if(_)w([...y,...b]);else if(j){const k=b.map(I=>({item:I,type:"add"}));j(k)}},[]),d=S.useCallback(()=>{const{getNodes:x,edges:b=[],transform:y}=t.getState(),[w,_,j]=y;return{nodes:x().map(k=>({...k})),edges:b.map(k=>({...k})),viewport:{x:w,y:_,zoom:j}}},[]),f=S.useCallback(({nodes:x,edges:b})=>{const{nodeInternals:y,getNodes:w,edges:_,hasDefaultNodes:j,hasDefaultEdges:k,onNodesDelete:I,onEdgesDelete:E,onNodesChange:N,onEdgesChange:B}=t.getState(),R=(x||[]).map(J=>J.id),P=(b||[]).map(J=>J.id),D=w().reduce((J,H)=>{const K=H.parentNode||H.parentId,V=!R.includes(H.id)&&K&&J.find(X=>X.id===K);return(typeof H.deletable=="boolean"?H.deletable:!0)&&(R.includes(H.id)||V)&&J.push(H),J},[]),L=_.filter(J=>typeof J.deletable=="boolean"?J.deletable:!0),M=L.filter(J=>P.includes(J.id));if(D||M){const J=Ace(D,L),H=[...M,...J],K=H.reduce((V,G)=>(V.includes(G.id)||V.push(G.id),V),[]);if((k||j)&&(k&&t.setState({edges:_.filter(V=>!K.includes(V.id))}),j&&(D.forEach(V=>{y.delete(V.id)}),t.setState({nodeInternals:new Map(y)}))),K.length>0&&(E==null||E(H),B&&B(K.map(V=>({id:V,type:"remove"})))),D.length>0&&(I==null||I(D),N)){const V=D.map(G=>({id:G.id,type:"remove"}));N(V)}}},[]),h=S.useCallback(x=>{const b=ktt(x),y=b?null:t.getState().nodeInternals.get(x.id);return!b&&!y?[null,null,b]:[b?x:jq(y),y,b]},[]),p=S.useCallback((x,b=!0,y)=>{const[w,_,j]=h(x);return w?(y||t.getState().getNodes()).filter(k=>{if(!j&&(k.id===_.id||!k.positionAbsolute))return!1;const I=jq(k),E=hO(I,w);return b&&E>0||E>=w.width*w.height}):[]},[]),g=S.useCallback((x,b,y=!0)=>{const[w]=h(x);if(!w)return!1;const _=hO(w,b);return y&&_>0||_>=w.width*w.height},[]);return S.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:g}),[e,r,n,a,s,i,o,c,u,d,f,p,g])}const crt={actInsideInputWithModifier:!1};var urt=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=eo(),{deleteElements:n}=jk(),a=A2(e,crt),s=A2(t);S.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),c=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),S.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function drt(e){const t=eo();S.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=GL(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Sh.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const rM={position:"absolute",width:"100%",height:"100%",top:0,left:0},Art=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,u_=e=>({x:e.x,y:e.y,zoom:e.k}),Ix=(e,t)=>e.target.closest(`.${t}`),Qq=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Hq=e=>{const t=e.ctrlKey&&fS()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},frt=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),hrt=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=Mp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:g,maxZoom:x,zoomActivationKeyCode:b,preventScrolling:y=!0,children:w,noWheelClassName:_,noPanClassName:j})=>{const k=S.useRef(),I=eo(),E=S.useRef(!1),N=S.useRef(!1),B=S.useRef(null),R=S.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:D,d3ZoomHandler:L,userSelectionActive:M}=ds(frt,sl),J=A2(b),H=S.useRef(0),K=S.useRef(!1),V=S.useRef();return drt(B),S.useEffect(()=>{if(B.current){const G=B.current.getBoundingClientRect(),X=btt().scaleExtent([g,x]).translateExtent(p),ee=Tu(B.current).call(X),F=im.translate(h.x,h.y).scale(b1(h.zoom,g,x)),z=[[0,0],[G.width,G.height]],Y=X.constrain()(F,z,p);X.transform(ee,Y),X.wheelDelta(Hq),I.setState({d3Zoom:X,d3Selection:ee,d3ZoomHandler:ee.on("wheel.zoom"),transform:[Y.x,Y.y,Y.k],domNode:B.current.closest(".react-flow")})}},[]),S.useEffect(()=>{D&&P&&(i&&!J&&!M?D.on("wheel.zoom",G=>{if(Ix(G,_))return!1;G.preventDefault(),G.stopImmediatePropagation();const X=D.property("__zoom").k||1;if(G.ctrlKey&&s){const ie=TA(G),ce=Hq(G),pe=X*Math.pow(2,ce);P.scaleTo(D,pe,ie,G);return}const ee=G.deltaMode===1?20:1;let F=c===Mp.Vertical?0:G.deltaX*ee,z=c===Mp.Horizontal?0:G.deltaY*ee;!fS()&&G.shiftKey&&c!==Mp.Vertical&&(F=G.deltaY*ee,z=0),P.translateBy(D,-(F/X)*o,-(z/X)*o,{internal:!0});const Y=u_(D.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ae,onViewportChangeEnd:le}=I.getState();clearTimeout(V.current),K.current||(K.current=!0,t==null||t(G,Y),te==null||te(Y)),K.current&&(e==null||e(G,Y),ae==null||ae(Y),V.current=setTimeout(()=>{r==null||r(G,Y),le==null||le(Y),K.current=!1},150))},{passive:!1}):typeof L<"u"&&D.on("wheel.zoom",function(G,X){if(!y&&G.type==="wheel"&&!G.ctrlKey||Ix(G,_))return null;G.preventDefault(),L.call(this,G,X)},{passive:!1}))},[M,i,c,D,P,L,J,s,y,_,t,e,r]),S.useEffect(()=>{P&&P.on("start",G=>{var F,z;if(!G.sourceEvent||G.sourceEvent.internal)return null;H.current=(F=G.sourceEvent)==null?void 0:F.button;const{onViewportChangeStart:X}=I.getState(),ee=u_(G.transform);E.current=!0,R.current=ee,((z=G.sourceEvent)==null?void 0:z.type)==="mousedown"&&I.setState({paneDragging:!0}),X==null||X(ee),t==null||t(G.sourceEvent,ee)})},[P,t]),S.useEffect(()=>{P&&(M&&!E.current?P.on("zoom",null):M||P.on("zoom",G=>{var ee;const{onViewportChange:X}=I.getState();if(I.setState({transform:[G.transform.x,G.transform.y,G.transform.k]}),N.current=!!(n&&Qq(f,H.current??0)),(e||X)&&!((ee=G.sourceEvent)!=null&&ee.internal)){const F=u_(G.transform);X==null||X(F),e==null||e(G.sourceEvent,F)}}))},[M,P,e,f,n]),S.useEffect(()=>{P&&P.on("end",G=>{if(!G.sourceEvent||G.sourceEvent.internal)return null;const{onViewportChangeEnd:X}=I.getState();if(E.current=!1,I.setState({paneDragging:!1}),n&&Qq(f,H.current??0)&&!N.current&&n(G.sourceEvent),N.current=!1,(r||X)&&Art(R.current,G.transform)){const ee=u_(G.transform);R.current=ee,clearTimeout(k.current),k.current=setTimeout(()=>{X==null||X(ee),r==null||r(G.sourceEvent,ee)},i?150:0)}})},[P,i,f,r,n]),S.useEffect(()=>{P&&P.filter(G=>{const X=J||a,ee=s&&G.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&G.button===1&&G.type==="mousedown"&&(Ix(G,"react-flow__node")||Ix(G,"react-flow__edge")))return!0;if(!f&&!X&&!i&&!u&&!s||M||!u&&G.type==="dblclick"||Ix(G,_)&&G.type==="wheel"||Ix(G,j)&&(G.type!=="wheel"||i&&G.type==="wheel"&&!J)||!s&&G.ctrlKey&&G.type==="wheel"||!X&&!i&&!ee&&G.type==="wheel"||!f&&(G.type==="mousedown"||G.type==="touchstart")||Array.isArray(f)&&!f.includes(G.button)&&G.type==="mousedown")return!1;const F=Array.isArray(f)&&f.includes(G.button)||!G.button||G.button<=1;return(!G.ctrlKey||G.type==="wheel")&&F})},[M,P,a,s,i,u,f,d,J]),nt.createElement("div",{className:"react-flow__renderer",ref:B,style:rM},w)},mrt=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function prt(){const{userSelectionActive:e,userSelectionRect:t}=ds(mrt,sl);return e&&t?nt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Vq(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Bce(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&Vq(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&Vq(n,i);break}case"remove":return n}return n.push(i),n},r)}function Tce(e,t){return Bce(e,t)}function grt(e,t){return Bce(e,t)}const F0=(e,t)=>({id:e,type:"select",selected:t});function cv(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(F0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(F0(n.id,!1))),r},[])}const AI=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},xrt=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),jce=S.memo(({isSelecting:e,selectionMode:t=d2.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=S.useRef(null),p=eo(),g=S.useRef(0),x=S.useRef(0),b=S.useRef(),{userSelectionActive:y,elementsSelectable:w,dragging:_}=ds(xrt,sl),j=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,x.current=0},k=L=>{s==null||s(L),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},I=L=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){L.preventDefault();return}i==null||i(L)},E=o?L=>o(L):void 0,N=L=>{const{resetSelectedElements:M,domNode:J}=p.getState();if(b.current=J==null?void 0:J.getBoundingClientRect(),!w||!e||L.button!==0||L.target!==h.current||!b.current)return;const{x:H,y:K}=om(L,b.current);M(),p.setState({userSelectionRect:{width:0,height:0,startX:H,startY:K,x:H,y:K}}),n==null||n(L)},B=L=>{const{userSelectionRect:M,nodeInternals:J,edges:H,transform:K,onNodesChange:V,onEdgesChange:G,nodeOrigin:X,getNodes:ee}=p.getState();if(!e||!b.current||!M)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const F=om(L,b.current),z=M.startX??0,Y=M.startY??0,te={...M,x:F.x<z?F.x:z,y:F.y<Y?F.y:Y,width:Math.abs(F.x-z),height:Math.abs(F.y-Y)},ae=ee(),le=dce(J,te,K,t===d2.Partial,!0,X),ie=Ace(le,H).map(pe=>pe.id),ce=le.map(pe=>pe.id);if(g.current!==ce.length){g.current=ce.length;const pe=cv(ae,ce);pe.length&&(V==null||V(pe))}if(x.current!==ie.length){x.current=ie.length;const pe=cv(H,ie);pe.length&&(G==null||G(pe))}p.setState({userSelectionRect:te})},R=L=>{if(L.button!==0)return;const{userSelectionRect:M}=p.getState();!y&&M&&L.target===h.current&&(k==null||k(L)),p.setState({nodesSelectionActive:g.current>0}),j(),a==null||a(L)},P=L=>{y&&(p.setState({nodesSelectionActive:g.current>0}),a==null||a(L)),j()},D=w&&(e||y);return nt.createElement("div",{className:_l(["react-flow__pane",{dragging:_,selection:e}]),onClick:D?void 0:AI(k,h),onContextMenu:AI(I,h),onWheel:AI(E,h),onMouseEnter:D?void 0:c,onMouseDown:D?N:void 0,onMouseMove:D?B:u,onMouseUp:D?R:void 0,onMouseLeave:D?P:d,ref:h,style:rM},f,nt.createElement(prt,null))});jce.displayName="Pane";function Ice(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:Ice(n,t):!1}function zq(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function vrt(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!Ice(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function brt(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Fce(e,t,r,n,a=[0,0],s){const i=brt(e,e.extent||n);let o=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:p}=Fv(f,a).positionAbsolute;o=f&&Ou(h)&&Ou(p)&&Ou(f.width)&&Ou(f.height)?[[h+e.width*a[0],p+e.height*a[1]],[h+f.width-e.width+e.width*a[0],p+f.height-e.height+e.height*a[1]]]:o}else s==null||s("005",Sh.error005()),o=i;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:p}=Fv(f,a).positionAbsolute;o=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(c){const f=r.get(c);u=Fv(f,a).positionAbsolute}const d=o&&o!=="parent"?KL(t,o):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function fI({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const $q=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...GL(c)}})};function uy(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function bO({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:c}=t.getState(),u=o.get(e);if(!u){c==null||c("012",Sh.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function yrt(){const e=eo();return S.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,c={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function hI(e){return(t,r,n)=>e==null?void 0:e(t,n)}function Oce({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=eo(),[c,u]=S.useState(!1),d=S.useRef([]),f=S.useRef({x:null,y:null}),h=S.useRef(0),p=S.useRef(null),g=S.useRef({x:0,y:0}),x=S.useRef(null),b=S.useRef(!1),y=S.useRef(!1),w=S.useRef(!1),_=yrt();return S.useEffect(()=>{if(e!=null&&e.current){const j=Tu(e.current),k=({x:N,y:B})=>{const{nodeInternals:R,onNodeDrag:P,onSelectionDrag:D,updateNodePositions:L,nodeExtent:M,snapGrid:J,snapToGrid:H,nodeOrigin:K,onError:V}=o.getState();f.current={x:N,y:B};let G=!1,X={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&M){const F=ZL(d.current,K);X=qL(F)}if(d.current=d.current.map(F=>{const z={x:N-F.distance.x,y:B-F.distance.y};H&&(z.x=J[0]*Math.round(z.x/J[0]),z.y=J[1]*Math.round(z.y/J[1]));const Y=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];d.current.length>1&&M&&!F.extent&&(Y[0][0]=F.positionAbsolute.x-X.x+M[0][0],Y[1][0]=F.positionAbsolute.x+(F.width??0)-X.x2+M[1][0],Y[0][1]=F.positionAbsolute.y-X.y+M[0][1],Y[1][1]=F.positionAbsolute.y+(F.height??0)-X.y2+M[1][1]);const te=Fce(F,z,R,Y,K,V);return G=G||F.position.x!==te.position.x||F.position.y!==te.position.y,F.position=te.position,F.positionAbsolute=te.positionAbsolute,F}),!G)return;L(d.current,!0,!0),u(!0);const ee=a?P:hI(D);if(ee&&x.current){const[F,z]=fI({nodeId:a,dragItems:d.current,nodeInternals:R});ee(x.current,F,z)}},I=()=>{if(!p.current)return;const[N,B]=rce(g.current,p.current);if(N!==0||B!==0){const{transform:R,panBy:P}=o.getState();f.current.x=(f.current.x??0)-N/R[2],f.current.y=(f.current.y??0)-B/R[2],P({x:N,y:B})&&k(f.current)}h.current=requestAnimationFrame(I)},E=N=>{var K;const{nodeInternals:B,multiSelectionActive:R,nodesDraggable:P,unselectNodesAndEdges:D,onNodeDragStart:L,onSelectionDragStart:M}=o.getState();y.current=!0;const J=a?L:hI(M);(!i||!s)&&!R&&a&&((K=B.get(a))!=null&&K.selected||D()),a&&s&&i&&bO({id:a,store:o,nodeRef:e});const H=_(N);if(f.current=H,d.current=vrt(B,P,H,a),J&&d.current){const[V,G]=fI({nodeId:a,dragItems:d.current,nodeInternals:B});J(N.sourceEvent,V,G)}};if(t)j.on(".drag",null);else{const N=eet().on("start",B=>{const{domNode:R,nodeDragThreshold:P}=o.getState();P===0&&E(B),w.current=!1;const D=_(B);f.current=D,p.current=(R==null?void 0:R.getBoundingClientRect())||null,g.current=om(B.sourceEvent,p.current)}).on("drag",B=>{var L,M;const R=_(B),{autoPanOnNodeDrag:P,nodeDragThreshold:D}=o.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!b.current&&y.current&&P&&(b.current=!0,I()),!y.current){const J=R.xSnapped-(((L=f==null?void 0:f.current)==null?void 0:L.x)??0),H=R.ySnapped-(((M=f==null?void 0:f.current)==null?void 0:M.y)??0);Math.sqrt(J*J+H*H)>D&&E(B)}(f.current.x!==R.xSnapped||f.current.y!==R.ySnapped)&&d.current&&y.current&&(x.current=B.sourceEvent,g.current=om(B.sourceEvent,p.current),k(R))}}).on("end",B=>{if(!(!y.current||w.current)&&(u(!1),b.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:R,nodeInternals:P,onNodeDragStop:D,onSelectionDragStop:L}=o.getState(),M=a?D:hI(L);if(R(d.current,!1,!1),M){const[J,H]=fI({nodeId:a,dragItems:d.current,nodeInternals:P});M(B.sourceEvent,J,H)}}}).filter(B=>{const R=B.target;return!B.button&&(!r||!zq(R,`.${r}`,e))&&(!n||zq(R,n,e))});return j.call(N),()=>{j.on(".drag",null)}}}},[e,t,r,n,s,o,a,i,_]),c}function Dce(){const e=eo();return S.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),h=o?c[0]:5,p=o?c[1]:5,g=r.isShiftPressed?4:1,x=r.x*h*g,b=r.y*p*g,y=f.map(w=>{if(w.positionAbsolute){const _={x:w.positionAbsolute.x+x,y:w.positionAbsolute.y+b};o&&(_.x=c[0]*Math.round(_.x/c[0]),_.y=c[1]*Math.round(_.y/c[1]));const{positionAbsolute:j,position:k}=Fce(w,_,n,a,void 0,u);w.position=k,w.positionAbsolute=j}return w});s(y,!0,!1)},[])}const Ov={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var dy=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:g,onDoubleClick:x,style:b,className:y,isDraggable:w,isSelectable:_,isConnectable:j,isFocusable:k,selectNodesOnDrag:I,sourcePosition:E,targetPosition:N,hidden:B,resizeObserver:R,dragHandle:P,zIndex:D,isParent:L,noDragClassName:M,noPanClassName:J,initialized:H,disableKeyboardA11y:K,ariaLabel:V,rfId:G,hasHandleBounds:X})=>{const ee=eo(),F=S.useRef(null),z=S.useRef(null),Y=S.useRef(E),te=S.useRef(N),ae=S.useRef(n),le=_||w||d||f||h||p,ie=Dce(),ce=uy(r,ee.getState,f),pe=uy(r,ee.getState,h),Be=uy(r,ee.getState,p),ne=uy(r,ee.getState,g),_e=uy(r,ee.getState,x),De=Ie=>{const{nodeDragThreshold:Ue}=ee.getState();if(_&&(!I||!w||Ue>0)&&bO({id:r,store:ee,nodeRef:F}),d){const Ye=ee.getState().nodeInternals.get(r);Ye&&d(Ie,{...Ye})}},Se=Ie=>{if(!mO(Ie)&&!K)if(ace.includes(Ie.key)&&_){const Ue=Ie.key==="Escape";bO({id:r,store:ee,unselect:Ue,nodeRef:F})}else w&&u&&Object.prototype.hasOwnProperty.call(Ov,Ie.key)&&(ee.setState({ariaLiveMessage:`Moved selected node ${Ie.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),ie({x:Ov[Ie.key].x,y:Ov[Ie.key].y,isShiftPressed:Ie.shiftKey}))};S.useEffect(()=>()=>{z.current&&(R==null||R.unobserve(z.current),z.current=null)},[]),S.useEffect(()=>{if(F.current&&!B){const Ie=F.current;(!H||!X||z.current!==Ie)&&(z.current&&(R==null||R.unobserve(z.current)),R==null||R.observe(Ie),z.current=Ie)}},[B,H,X]),S.useEffect(()=>{const Ie=ae.current!==n,Ue=Y.current!==E,Ye=te.current!==N;F.current&&(Ie||Ue||Ye)&&(Ie&&(ae.current=n),Ue&&(Y.current=E),Ye&&(te.current=N),ee.getState().updateNodeDimensions([{id:r,nodeElement:F.current,forceUpdate:!0}]))},[r,n,E,N]);const fe=Oce({nodeRef:F,disabled:B||!w,noDragClassName:M,handleSelector:P,nodeId:r,isSelectable:_,selectNodesOnDrag:I});return B?null:nt.createElement("div",{className:_l(["react-flow__node",`react-flow__node-${n}`,{[J]:w},y,{selected:u,selectable:_,parent:L,dragging:fe}]),ref:F,style:{zIndex:D,transform:`translate(${o}px,${c}px)`,pointerEvents:le?"all":"none",visibility:H?"visible":"hidden",...b},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:pe,onMouseLeave:Be,onContextMenu:ne,onClick:De,onDoubleClick:_e,onKeyDown:k?Se:void 0,tabIndex:k?0:void 0,role:k?"button":void 0,"aria-describedby":K?void 0:`${Cce}-${G}`,"aria-label":V},nt.createElement(Dtt,{value:r},nt.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:j,sourcePosition:E,targetPosition:N,dragging:fe,dragHandle:P,zIndex:D})))};return t.displayName="NodeWrapper",S.memo(t)};const wrt=e=>{const t=e.getNodes().filter(r=>r.selected);return{...ZL(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Ert({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=eo(),{width:a,height:s,x:i,y:o,transformString:c,userSelectionActive:u}=ds(wrt,sl),d=Dce(),f=S.useRef(null);if(S.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),Oce({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const x=n.getState().getNodes().filter(b=>b.selected);e(g,x)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Ov,g.key)&&d({x:Ov[g.key].x,y:Ov[g.key].y,isShiftPressed:g.shiftKey})};return nt.createElement("div",{className:_l(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},nt.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:p,style:{width:a,height:s,top:o,left:i}}))}var Crt=S.memo(Ert);const _rt=e=>e.nodesSelectionActive,Pce=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:x,multiSelectionKeyCode:b,panActivationKeyCode:y,zoomActivationKeyCode:w,elementsSelectable:_,zoomOnScroll:j,zoomOnPinch:k,panOnScroll:I,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:B,panOnDrag:R,defaultViewport:P,translateExtent:D,minZoom:L,maxZoom:M,preventScrolling:J,onSelectionContextMenu:H,noWheelClassName:K,noPanClassName:V,disableKeyboardA11y:G})=>{const X=ds(_rt),ee=A2(f),F=A2(y),z=F||R,Y=F||I,te=ee||h&&z!==!0;return urt({deleteKeyCode:o,multiSelectionKeyCode:b}),nt.createElement(hrt,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:_,zoomOnScroll:j,zoomOnPinch:k,panOnScroll:Y,panOnScrollSpeed:E,panOnScrollMode:N,zoomOnDoubleClick:B,panOnDrag:!ee&&z,defaultViewport:P,translateExtent:D,minZoom:L,maxZoom:M,zoomActivationKeyCode:w,preventScrolling:J,noWheelClassName:K,noPanClassName:V},nt.createElement(jce,{onSelectionStart:g,onSelectionEnd:x,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:z,isSelecting:!!te,selectionMode:p},e,X&&nt.createElement(Crt,{onSelectionContextMenu:H,noPanClassName:V,disableKeyboardA11y:G})))};Pce.displayName="FlowRenderer";var Nrt=S.memo(Pce);function Srt(e){return ds(S.useCallback(r=>e?dce(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function krt(e){const t={input:dy(e.input||bce),default:dy(e.default||vO),output:dy(e.output||wce),group:dy(e.group||tM)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=dy(e[s]||vO),a),r);return{...t,...n}}const Brt=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},Trt=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Rce=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=ds(Trt,sl),o=Srt(e.onlyRenderVisibleElements),c=S.useRef(),u=S.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return S.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),nt.createElement("div",{className:"react-flow__nodes",style:rM},o.map(d=>{var k,I,E;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",Sh.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),x=!!(d.connectable||r&&typeof d.connectable>"u"),b=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?KL(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(y==null?void 0:y.x)??0,_=(y==null?void 0:y.y)??0,j=Brt({x:w,y:_,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return nt.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||Er.Bottom,targetPosition:d.targetPosition||Er.Top,hidden:d.hidden,xPos:w,yPos:_,xPosOrigin:j.x,yPosOrigin:j.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:g,isConnectable:x,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((k=d[Ss])==null?void 0:k.z)??0,isParent:!!((I=d[Ss])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((E=d[Ss])!=null&&E.handleBounds)})}))};Rce.displayName="NodeRenderer";var jrt=S.memo(Rce);const Irt=(e,t,r)=>r===Er.Left?e-t:r===Er.Right?e+t:e,Frt=(e,t,r)=>r===Er.Top?e-t:r===Er.Bottom?e+t:e,Gq="react-flow__edgeupdater",Kq=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>nt.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:_l([Gq,`${Gq}-${o}`]),cx:Irt(t,n,e),cy:Frt(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),Ort=()=>!0;var Fx=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:x,style:b,source:y,target:w,sourceX:_,sourceY:j,targetX:k,targetY:I,sourcePosition:E,targetPosition:N,elementsSelectable:B,hidden:R,sourceHandleId:P,targetHandleId:D,onContextMenu:L,onMouseEnter:M,onMouseMove:J,onMouseLeave:H,reconnectRadius:K,onReconnect:V,onReconnectStart:G,onReconnectEnd:X,markerEnd:ee,markerStart:F,rfId:z,ariaLabel:Y,isFocusable:te,isReconnectable:ae,pathOptions:le,interactionWidth:ie,disableKeyboardA11y:ce})=>{const pe=S.useRef(null),[Be,ne]=S.useState(!1),[_e,De]=S.useState(!1),Se=eo(),fe=S.useMemo(()=>`url('#${gO(F,z)}')`,[F,z]),Ie=S.useMemo(()=>`url('#${gO(ee,z)}')`,[ee,z]);if(R)return null;const Ue=yt=>{var In;const{edges:Br,addSelectedEdges:tr,unselectNodesAndEdges:nn,multiSelectionActive:Nr}=Se.getState(),Vr=Br.find(Or=>Or.id===r);Vr&&(B&&(Se.setState({nodesSelectionActive:!1}),Vr.selected&&Nr?(nn({nodes:[],edges:[Vr]}),(In=pe.current)==null||In.blur()):tr([r])),i&&i(yt,Vr))},Ye=cy(r,Se.getState,o),ye=cy(r,Se.getState,L),Oe=cy(r,Se.getState,M),Re=cy(r,Se.getState,J),qe=cy(r,Se.getState,H),Ze=(yt,Br)=>{if(yt.button!==0)return;const{edges:tr,isValidConnection:nn}=Se.getState(),Nr=Br?w:y,Vr=(Br?D:P)||null,In=Br?"target":"source",Or=nn||Ort,fs=Br,fn=tr.find(tn=>tn.id===r);De(!0),G==null||G(yt,fn,In);const oa=tn=>{De(!1),X==null||X(tn,fn,In)};pce({event:yt,handleId:Vr,nodeId:Nr,onConnect:tn=>V==null?void 0:V(fn,tn),isTarget:fs,getState:Se.getState,setState:Se.setState,isValidConnection:Or,edgeUpdaterType:In,onReconnectEnd:oa})},ct=yt=>Ze(yt,!0),pt=yt=>Ze(yt,!1),It=()=>ne(!0),Mt=()=>ne(!1),Pt=!B&&!i,Qt=yt=>{var Br;if(!ce&&ace.includes(yt.key)&&B){const{unselectNodesAndEdges:tr,addSelectedEdges:nn,edges:Nr}=Se.getState();yt.key==="Escape"?((Br=pe.current)==null||Br.blur(),tr({edges:[Nr.find(In=>In.id===r)]})):nn([r])}};return nt.createElement("g",{className:_l(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Pt,updating:Be}]),onClick:Ue,onDoubleClick:Ye,onContextMenu:ye,onMouseEnter:Oe,onMouseMove:Re,onMouseLeave:qe,onKeyDown:te?Qt:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Y===null?void 0:Y||`Edge from ${y} to ${w}`,"aria-describedby":te?`${_ce}-${z}`:void 0,ref:pe},!_e&&nt.createElement(e,{id:r,source:y,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:x,data:s,style:b,sourceX:_,sourceY:j,targetX:k,targetY:I,sourcePosition:E,targetPosition:N,sourceHandleId:P,targetHandleId:D,markerStart:fe,markerEnd:Ie,pathOptions:le,interactionWidth:ie}),ae&&nt.createElement(nt.Fragment,null,(ae==="source"||ae===!0)&&nt.createElement(Kq,{position:E,centerX:_,centerY:j,radius:K,onMouseDown:ct,onMouseEnter:It,onMouseOut:Mt,type:"source"}),(ae==="target"||ae===!0)&&nt.createElement(Kq,{position:N,centerX:k,centerY:I,radius:K,onMouseDown:pt,onMouseEnter:It,onMouseOut:Mt,type:"target"})))};return t.displayName="EdgeWrapper",S.memo(t)};function Drt(e){const t={default:Fx(e.default||mS),straight:Fx(e.bezier||YL),step:Fx(e.step||XL),smoothstep:Fx(e.step||Tk),simplebezier:Fx(e.simplebezier||WL)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=Fx(e[s]||mS),a),r);return{...t,...n}}function qq(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case Er.Top:return{x:n+s/2,y:a};case Er.Right:return{x:n+s,y:a+i/2};case Er.Bottom:return{x:n+s/2,y:a+i};case Er.Left:return{x:n,y:a+i/2}}}function Wq(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const Prt=(e,t,r,n,a,s)=>{const i=qq(r,e,t),o=qq(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function Rrt({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=qL({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:o/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function Xq(e){var n,a,s,i,o;const t=((n=e==null?void 0:e[Ss])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const Lrt=[{level:0,isMaxLevel:!0,edges:[]}];function Mrt(e,t,r=!1){let n=-1;const a=e.reduce((i,o)=>{var d,f;const c=Ou(o.zIndex);let u=c?o.zIndex:0;if(r){const h=t.get(o.target),p=t.get(o.source),g=o.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),x=Math.max(((d=p==null?void 0:p[Ss])==null?void 0:d.z)||0,((f=h==null?void 0:h[Ss])==null?void 0:f.z)||0,1e3);u=(c?o.zIndex:0)+(g?x:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const c=+i;return{edges:o,level:c,isMaxLevel:c===n}});return s.length===0?Lrt:s}function Urt(e,t,r){const n=ds(S.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),o=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&Rrt({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return Mrt(n,t,r)}const Qrt=({color:e="none",strokeWidth:t=1})=>nt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Hrt=({color:e="none",strokeWidth:t=1})=>nt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Yq={[hS.Arrow]:Qrt,[hS.ArrowClosed]:Hrt};function Vrt(e){const t=eo();return S.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(Yq,e)?Yq[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Sh.error009(e)),null)},[e])}const zrt=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const c=Vrt(t);return c?nt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},nt.createElement(c,{color:r,strokeWidth:i})):null},$rt=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=gO(i,t);n.includes(o)||(a.push({id:o,color:i.color||e,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},Lce=({defaultColor:e,rfId:t})=>{const r=ds(S.useCallback($rt({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return nt.createElement("defs",null,r.map(n=>nt.createElement(zrt,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};Lce.displayName="MarkerDefinitions";var Grt=S.memo(Lce);const Krt=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Mce=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:x,children:b,disableKeyboardA11y:y})=>{const{edgesFocusable:w,edgesUpdatable:_,elementsSelectable:j,width:k,height:I,connectionMode:E,nodeInternals:N,onError:B}=ds(Krt,sl),R=Urt(t,N,r);return k?nt.createElement(nt.Fragment,null,R.map(({level:P,edges:D,isMaxLevel:L})=>nt.createElement("svg",{key:P,style:{zIndex:P},width:k,height:I,className:"react-flow__edges react-flow__container"},L&&nt.createElement(Grt,{defaultColor:e,rfId:n}),nt.createElement("g",null,D.map(M=>{const[J,H,K]=Xq(N.get(M.source)),[V,G,X]=Xq(N.get(M.target));if(!K||!X)return null;let ee=M.type||"default";a[ee]||(B==null||B("011",Sh.error011(ee)),ee="default");const F=a[ee]||a.default,z=E===Eg.Strict?G.target:(G.target??[]).concat(G.source??[]),Y=Wq(H.source,M.sourceHandle),te=Wq(z,M.targetHandle),ae=(Y==null?void 0:Y.position)||Er.Bottom,le=(te==null?void 0:te.position)||Er.Top,ie=!!(M.focusable||w&&typeof M.focusable>"u"),ce=M.reconnectable||M.updatable,pe=typeof h<"u"&&(ce||_&&typeof ce>"u");if(!Y||!te)return B==null||B("008",Sh.error008(Y,M)),null;const{sourceX:Be,sourceY:ne,targetX:_e,targetY:De}=Prt(J,Y,ae,V,te,le);return nt.createElement(F,{key:M.id,id:M.id,className:_l([M.className,s]),type:ee,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:Be,sourceY:ne,targetX:_e,targetY:De,sourcePosition:ae,targetPosition:le,elementsSelectable:j,onContextMenu:i,onMouseEnter:o,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:x,rfId:n,ariaLabel:M.ariaLabel,isFocusable:ie,isReconnectable:pe,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:y})})))),b):null};Mce.displayName="EdgeRenderer";var qrt=S.memo(Mce);const Wrt=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Xrt({children:e}){const t=ds(Wrt);return nt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Yrt(e){const t=jk(),r=S.useRef(!1);S.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const Jrt={[Er.Left]:Er.Right,[Er.Right]:Er.Left,[Er.Top]:Er.Bottom,[Er.Bottom]:Er.Top},Uce=({nodeId:e,handleType:t,style:r,type:n=U0.Bezier,CustomComponent:a,connectionStatus:s})=>{var I,E,N;const{fromNode:i,handleId:o,toX:c,toY:u,connectionMode:d}=ds(S.useCallback(B=>({fromNode:B.nodeInternals.get(e),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[e]),sl),f=(I=i==null?void 0:i[Ss])==null?void 0:I.handleBounds;let h=f==null?void 0:f[t];if(d===Eg.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const p=o?h.find(B=>B.id===o):h[0],g=p?p.x+p.width/2:(i.width??0)/2,x=p?p.y+p.height/2:i.height??0,b=(((E=i.positionAbsolute)==null?void 0:E.x)??0)+g,y=(((N=i.positionAbsolute)==null?void 0:N.y)??0)+x,w=p==null?void 0:p.position,_=w?Jrt[w]:null;if(!w||!_)return null;if(a)return nt.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:p,fromX:b,fromY:y,toX:c,toY:u,fromPosition:w,toPosition:_,connectionStatus:s});let j="";const k={sourceX:b,sourceY:y,sourcePosition:w,targetX:c,targetY:u,targetPosition:_};return n===U0.Bezier?[j]=cce(k):n===U0.Step?[j]=pO({...k,borderRadius:0}):n===U0.SmoothStep?[j]=pO(k):n===U0.SimpleBezier?[j]=lce(k):j=`M${b},${y} ${c},${u}`,nt.createElement("path",{d:j,fill:"none",className:"react-flow__connection-path",style:r})};Uce.displayName="ConnectionLine";const Zrt=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function ent({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:c,connectionStatus:u}=ds(Zrt,sl);return!(a&&s&&o&&i)?null:nt.createElement("svg",{style:e,width:o,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},nt.createElement("g",{className:_l(["react-flow__connection",u])},nt.createElement(Uce,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function Jq(e,t){return S.useRef(null),eo(),S.useMemo(()=>t(e),[e])}const Qce=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:x,onSelectionEnd:b,connectionLineType:y,connectionLineStyle:w,connectionLineComponent:_,connectionLineContainerStyle:j,selectionKeyCode:k,selectionOnDrag:I,selectionMode:E,multiSelectionKeyCode:N,panActivationKeyCode:B,zoomActivationKeyCode:R,deleteKeyCode:P,onlyRenderVisibleElements:D,elementsSelectable:L,selectNodesOnDrag:M,defaultViewport:J,translateExtent:H,minZoom:K,maxZoom:V,preventScrolling:G,defaultMarkerColor:X,zoomOnScroll:ee,zoomOnPinch:F,panOnScroll:z,panOnScrollSpeed:Y,panOnScrollMode:te,zoomOnDoubleClick:ae,panOnDrag:le,onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:pe,onPaneMouseLeave:Be,onPaneScroll:ne,onPaneContextMenu:_e,onEdgeContextMenu:De,onEdgeMouseEnter:Se,onEdgeMouseMove:fe,onEdgeMouseLeave:Ie,onReconnect:Ue,onReconnectStart:Ye,onReconnectEnd:ye,reconnectRadius:Oe,noDragClassName:Re,noWheelClassName:qe,noPanClassName:Ze,elevateEdgesOnSelect:ct,disableKeyboardA11y:pt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})=>{const Qt=Jq(e,krt),yt=Jq(t,Drt);return Yrt(s),nt.createElement(Nrt,{onPaneClick:ie,onPaneMouseEnter:ce,onPaneMouseMove:pe,onPaneMouseLeave:Be,onPaneContextMenu:_e,onPaneScroll:ne,deleteKeyCode:P,selectionKeyCode:k,selectionOnDrag:I,selectionMode:E,onSelectionStart:x,onSelectionEnd:b,multiSelectionKeyCode:N,panActivationKeyCode:B,zoomActivationKeyCode:R,elementsSelectable:L,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:ee,zoomOnPinch:F,zoomOnDoubleClick:ae,panOnScroll:z,panOnScrollSpeed:Y,panOnScrollMode:te,panOnDrag:le,defaultViewport:J,translateExtent:H,minZoom:K,maxZoom:V,onSelectionContextMenu:g,preventScrolling:G,noDragClassName:Re,noWheelClassName:qe,noPanClassName:Ze,disableKeyboardA11y:pt},nt.createElement(Xrt,null,nt.createElement(qrt,{edgeTypes:yt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:D,onEdgeContextMenu:De,onEdgeMouseEnter:Se,onEdgeMouseMove:fe,onEdgeMouseLeave:Ie,onReconnect:Ue,onReconnectStart:Ye,onReconnectEnd:ye,reconnectRadius:Oe,defaultMarkerColor:X,noPanClassName:Ze,elevateEdgesOnSelect:!!ct,disableKeyboardA11y:pt,rfId:Pt},nt.createElement(ent,{style:w,type:y,component:_,containerStyle:j})),nt.createElement("div",{className:"react-flow__edgelabel-renderer"}),nt.createElement(jrt,{nodeTypes:Qt,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:M,onlyRenderVisibleElements:D,noPanClassName:Ze,noDragClassName:Re,disableKeyboardA11y:pt,nodeOrigin:It,nodeExtent:Mt,rfId:Pt})))};Qce.displayName="GraphView";var tnt=S.memo(Qce);const yO=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],S0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:yO,nodeExtent:yO,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Eg.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Btt,isValidConnection:void 0},rnt=()=>AJe((e,t)=>({...S0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:dI(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?dI(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=r.reduce((x,b)=>{const y=a.get(b.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Ss]:{...y[Ss],handleBounds:void 0}});else if(y){const w=GL(b.nodeElement);!!(w.width&&w.height&&(y.width!==w.width||y.height!==w.height||b.forceUpdate))&&(a.set(y.id,{...y,[Ss]:{...y[Ss],handleBounds:{source:$q(".source",b.nodeElement,h,u),target:$q(".target",b.nodeElement,h,u)}},...w}),x.push({id:y.id,type:"dimensions",dimensions:w}))}return x},[]);Sce(a,u);const g=i||s&&!i&&kce(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(p==null?void 0:p.length)>0&&(n==null||n(p))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(o=>{const c={id:o.id,type:"position",dragging:a};return n&&(c.positionAbsolute=o.positionAbsolute,c.position=o.position),c});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=Tce(r,o()),d=dI(u,a,i,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>F0(c,!0)):(i=cv(s(),r),o=cv(a,[])),c_({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>F0(c,!0)):(i=cv(a,r),o=cv(s(),[])),c_({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),o=n||a,c=i.map(d=>(d.selected=!1,F0(d.id,!1))),u=o.map(d=>F0(d.id,!1));c_({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(o=>o.selected).map(o=>F0(o.id,!1)),i=r.filter(o=>o.selected).map(o=>F0(o.id,!1));c_({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=KL(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:c}=t();if(!i||!o||!r.x&&!r.y)return!1;const u=im.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(o,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:S0.connectionNodeId,connectionHandleId:S0.connectionHandleId,connectionHandleType:S0.connectionHandleType,connectionStatus:S0.connectionStatus,connectionStartHandle:S0.connectionStartHandle,connectionEndHandle:S0.connectionEndHandle}),reset:()=>e({...S0})}),Object.is),nM=({children:e})=>{const t=S.useRef(null);return t.current||(t.current=rnt()),nt.createElement(ytt,{value:t.current},e)};nM.displayName="ReactFlowProvider";const Hce=({children:e})=>S.useContext(Bk)?nt.createElement(nt.Fragment,null,e):nt.createElement(nM,null,e);Hce.displayName="ReactFlowWrapper";const nnt={input:bce,default:vO,output:wce,group:tM},ant={default:mS,straight:YL,step:XL,smoothstep:Tk,simplebezier:WL},snt=[0,0],int=[15,15],ont={x:0,y:0,zoom:1},lnt={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Vce=S.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=nnt,edgeTypes:i=ant,onNodeClick:o,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:y,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:j,onNodeContextMenu:k,onNodeDoubleClick:I,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:B,onNodesDelete:R,onEdgesDelete:P,onSelectionChange:D,onSelectionDragStart:L,onSelectionDrag:M,onSelectionDragStop:J,onSelectionContextMenu:H,onSelectionStart:K,onSelectionEnd:V,connectionMode:G=Eg.Strict,connectionLineType:X=U0.Bezier,connectionLineStyle:ee,connectionLineComponent:F,connectionLineContainerStyle:z,deleteKeyCode:Y="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ae=!1,selectionMode:le=d2.Full,panActivationKeyCode:ie="Space",multiSelectionKeyCode:ce=fS()?"Meta":"Control",zoomActivationKeyCode:pe=fS()?"Meta":"Control",snapToGrid:Be=!1,snapGrid:ne=int,onlyRenderVisibleElements:_e=!1,selectNodesOnDrag:De=!0,nodesDraggable:Se,nodesConnectable:fe,nodesFocusable:Ie,nodeOrigin:Ue=snt,edgesFocusable:Ye,edgesUpdatable:ye,elementsSelectable:Oe,defaultViewport:Re=ont,minZoom:qe=.5,maxZoom:Ze=2,translateExtent:ct=yO,preventScrolling:pt=!0,nodeExtent:It,defaultMarkerColor:Mt="#b1b1b7",zoomOnScroll:Pt=!0,zoomOnPinch:Qt=!0,panOnScroll:yt=!1,panOnScrollSpeed:Br=.5,panOnScrollMode:tr=Mp.Free,zoomOnDoubleClick:nn=!0,panOnDrag:Nr=!0,onPaneClick:Vr,onPaneMouseEnter:In,onPaneMouseMove:Or,onPaneMouseLeave:fs,onPaneScroll:fn,onPaneContextMenu:oa,children:Ba,onEdgeContextMenu:tn,onEdgeDoubleClick:pr,onEdgeMouseEnter:et,onEdgeMouseMove:gt,onEdgeMouseLeave:Je,onEdgeUpdate:xt,onEdgeUpdateStart:wt,onEdgeUpdateEnd:bt,onReconnect:nr,onReconnectStart:gr,onReconnectEnd:Kr,reconnectRadius:Jr=10,edgeUpdaterRadius:Gr=10,onNodesChange:he,onEdgesChange:Te,noDragClassName:Ce="nodrag",noWheelClassName:we="nowheel",noPanClassName:Ne="nopan",fitView:je=!1,fitViewOptions:Xe,connectOnClick:dt=!0,attributionPosition:$e,proOptions:rt,defaultEdgeOptions:it,elevateNodesOnSelect:Ft=!0,elevateEdgesOnSelect:Vt=!1,disableKeyboardA11y:Yt=!1,autoPanOnConnect:Ht=!0,autoPanOnNodeDrag:$t=!0,connectionRadius:Sr=20,isValidConnection:an,onError:sn,style:dn,id:hs,nodeDragThreshold:wo,...ms},Js)=>{const js=hs||"1";return nt.createElement("div",{...ms,style:{...dn,...lnt},ref:Js,className:_l(["react-flow",a]),"data-testid":"rf__wrapper",id:hs},nt.createElement(Hce,null,nt.createElement(tnt,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:_,onNodeMouseLeave:j,onNodeContextMenu:k,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:i,connectionLineType:X,connectionLineStyle:ee,connectionLineComponent:F,connectionLineContainerStyle:z,selectionKeyCode:te,selectionOnDrag:ae,selectionMode:le,deleteKeyCode:Y,multiSelectionKeyCode:ce,panActivationKeyCode:ie,zoomActivationKeyCode:pe,onlyRenderVisibleElements:_e,selectNodesOnDrag:De,defaultViewport:Re,translateExtent:ct,minZoom:qe,maxZoom:Ze,preventScrolling:pt,zoomOnScroll:Pt,zoomOnPinch:Qt,zoomOnDoubleClick:nn,panOnScroll:yt,panOnScrollSpeed:Br,panOnScrollMode:tr,panOnDrag:Nr,onPaneClick:Vr,onPaneMouseEnter:In,onPaneMouseMove:Or,onPaneMouseLeave:fs,onPaneScroll:fn,onPaneContextMenu:oa,onSelectionContextMenu:H,onSelectionStart:K,onSelectionEnd:V,onEdgeContextMenu:tn,onEdgeDoubleClick:pr,onEdgeMouseEnter:et,onEdgeMouseMove:gt,onEdgeMouseLeave:Je,onReconnect:nr??xt,onReconnectStart:gr??wt,onReconnectEnd:Kr??bt,reconnectRadius:Jr??Gr,defaultMarkerColor:Mt,noDragClassName:Ce,noWheelClassName:we,noPanClassName:Ne,elevateEdgesOnSelect:Vt,rfId:js,disableKeyboardA11y:Yt,nodeOrigin:Ue,nodeExtent:It}),nt.createElement(Jtt,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:p,onConnectStart:g,onConnectEnd:x,onClickConnectStart:b,onClickConnectEnd:y,nodesDraggable:Se,nodesConnectable:fe,nodesFocusable:Ie,edgesFocusable:Ye,edgesUpdatable:ye,elementsSelectable:Oe,elevateNodesOnSelect:Ft,minZoom:qe,maxZoom:Ze,nodeExtent:It,onNodesChange:he,onEdgesChange:Te,snapToGrid:Be,snapGrid:ne,connectionMode:G,translateExtent:ct,connectOnClick:dt,defaultEdgeOptions:it,fitView:je,fitViewOptions:Xe,onNodesDelete:R,onEdgesDelete:P,onNodeDragStart:E,onNodeDrag:N,onNodeDragStop:B,onSelectionDrag:M,onSelectionDragStart:L,onSelectionDragStop:J,noPanClassName:Ne,nodeOrigin:Ue,rfId:js,autoPanOnConnect:Ht,autoPanOnNodeDrag:$t,onError:sn,connectionRadius:Sr,isValidConnection:an,nodeDragThreshold:wo}),nt.createElement(Xtt,{onSelectionChange:D}),Ba,nt.createElement(Ett,{proOptions:rt,position:$e}),nt.createElement(nrt,{rfId:js,disableKeyboardA11y:Yt})))});Vce.displayName="ReactFlow";function zce(e){return t=>{const[r,n]=S.useState(t),a=S.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const cnt=zce(Tce),unt=zce(grt);function dnt(){return nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},nt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Ant(){return nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},nt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function fnt(){return nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},nt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function hnt(){return nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},nt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function mnt(){return nt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},nt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Dy=({children:e,className:t,...r})=>nt.createElement("button",{type:"button",className:_l(["react-flow__controls-button",t]),...r},e);Dy.displayName="ControlButton";const pnt=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),$ce=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=eo(),[p,g]=S.useState(!1),{isInteractive:x,minZoomReached:b,maxZoomReached:y}=ds(pnt,sl),{zoomIn:w,zoomOut:_,fitView:j}=jk();if(S.useEffect(()=>{g(!0)},[]),!p)return null;const k=()=>{w(),s==null||s()},I=()=>{_(),i==null||i()},E=()=>{j(a),o==null||o()},N=()=>{h.setState({nodesDraggable:!x,nodesConnectable:!x,elementsSelectable:!x}),c==null||c(!x)};return nt.createElement(tce,{className:_l(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&nt.createElement(nt.Fragment,null,nt.createElement(Dy,{onClick:k,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},nt.createElement(dnt,null)),nt.createElement(Dy,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},nt.createElement(Ant,null))),r&&nt.createElement(Dy,{className:"react-flow__controls-fitview",onClick:E,title:"fit view","aria-label":"fit view"},nt.createElement(fnt,null)),n&&nt.createElement(Dy,{className:"react-flow__controls-interactive",onClick:N,title:"toggle interactivity","aria-label":"toggle interactivity"},x?nt.createElement(mnt,null):nt.createElement(hnt,null)),d)};$ce.displayName="Controls";var gnt=S.memo($ce),Dd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Dd||(Dd={}));function xnt({color:e,dimensions:t,lineWidth:r}){return nt.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function vnt({color:e,radius:t}){return nt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const bnt={[Dd.Dots]:"#91919a",[Dd.Lines]:"#eee",[Dd.Cross]:"#e2e2e2"},ynt={[Dd.Dots]:1,[Dd.Lines]:1,[Dd.Cross]:6},wnt=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Gce({id:e,variant:t=Dd.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:c}){const u=S.useRef(null),{transform:d,patternId:f}=ds(wnt,sl),h=i||bnt[t],p=n||ynt[t],g=t===Dd.Dots,x=t===Dd.Cross,b=Array.isArray(r)?r:[r,r],y=[b[0]*d[2]||1,b[1]*d[2]||1],w=p*d[2],_=x?[w,w]:y,j=g?[w/s,w/s]:[_[0]/s,_[1]/s];return nt.createElement("svg",{className:_l(["react-flow__background",c]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},nt.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},g?nt.createElement(vnt,{color:h,radius:w/s}):nt.createElement(xnt,{dimensions:_,color:h,lineWidth:a})),nt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Gce.displayName="Background";var Ent=S.memo(Gce);function Cnt(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const _nt=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function lm(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let Ox=null;function Kce(e={}){return Ox||(e.includeStyleProperties?(Ox=e.includeStyleProperties,Ox):(Ox=lm(window.getComputedStyle(document.documentElement)),Ox))}function pS(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Nnt(e){const t=pS(e,"border-left-width"),r=pS(e,"border-right-width");return e.clientWidth+t+r}function Snt(e){const t=pS(e,"border-top-width"),r=pS(e,"border-bottom-width");return e.clientHeight+t+r}function qce(e,t={}){const r=t.width||Nnt(e),n=t.height||Snt(e);return{width:r,height:n}}function knt(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Cc=16384;function Bnt(e){(e.width>Cc||e.height>Cc)&&(e.width>Cc&&e.height>Cc?e.width>e.height?(e.height*=Cc/e.width,e.width=Cc):(e.width*=Cc/e.height,e.height=Cc):e.width>Cc?(e.height*=Cc/e.width,e.width=Cc):(e.width*=Cc/e.height,e.height=Cc))}function gS(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function Tnt(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function jnt(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),Tnt(a)}const tc=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||tc(r,t)};function Int(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function Fnt(e,t){return Kce(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function Ont(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?Int(r):Fnt(r,n);return document.createTextNode(`${a}{${s}}`)}function Zq(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=_nt();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(Ont(i,r,a,n)),t.appendChild(o)}function Dnt(e,t,r){Zq(e,t,":before",r),Zq(e,t,":after",r)}const eW="application/font-woff",tW="image/jpeg",Pnt={woff:eW,woff2:eW,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:tW,jpeg:tW,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Rnt(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function aM(e){const t=Rnt(e).toLowerCase();return Pnt[t]||""}function Lnt(e){return e.split(/,/)[1]}function wO(e){return e.search(/^(data:)/)!==-1}function Mnt(e,t){return`data:${t};base64,${e}`}async function Wce(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(c){i(c)}},o.readAsDataURL(a)})}const mI={};function Unt(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function sM(e,t,r){const n=Unt(e,t,r.includeQueryParams);if(mI[n]!=null)return mI[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await Wce(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),Lnt(o)));a=Mnt(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return mI[n]=a,a}async function Qnt(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):gS(t)}async function Hnt(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return gS(o)}const r=e.poster,n=aM(r),a=await sM(r,n,t);return gS(a)}async function Vnt(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await Ik(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function znt(e,t){return tc(e,HTMLCanvasElement)?Qnt(e):tc(e,HTMLVideoElement)?Hnt(e,t):tc(e,HTMLIFrameElement)?Vnt(e,t):e.cloneNode(Xce(e))}const $nt=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Xce=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Gnt(e,t,r){var n,a;if(Xce(t))return t;let s=[];return $nt(e)&&e.assignedNodes?s=lm(e.assignedNodes()):tc(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=lm(e.contentDocument.body.childNodes):s=lm(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||tc(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>Ik(o,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function Knt(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):Kce(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),tc(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function qnt(e,t){tc(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),tc(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Wnt(e,t){if(tc(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function Xnt(e,t,r){return tc(t,Element)&&(Knt(e,t,r),Dnt(e,t,r),qnt(e,t),Wnt(e,t)),t}async function Ynt(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const c=e.querySelector(o),u=document.querySelector(o);!c&&u&&!n[o]&&(n[o]=await Ik(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let c=0;c<a.length;c++)o.appendChild(a[c]);e.appendChild(i)}return e}async function Ik(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>znt(n,t)).then(n=>Gnt(e,n,t)).then(n=>Xnt(e,n,t)).then(n=>Ynt(n,t))}const Yce=/url\((['"]?)([^'"]+?)\1\)/g,Jnt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Znt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function eat(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function tat(e){const t=[];return e.replace(Yce,(r,n,a)=>(t.push(a),r)),t.filter(r=>!wO(r))}async function rat(e,t,r,n,a){try{const s=r?Cnt(t,r):t,i=aM(t);let o;return a||(o=await sM(s,i,n)),e.replace(eat(t),`$1${o}$3`)}catch{}return e}function nat(e,{preferredFontFormat:t}){return t?e.replace(Znt,r=>{for(;;){const[n,,a]=Jnt.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Jce(e){return e.search(Yce)!==-1}async function Zce(e,t,r){if(!Jce(e))return e;const n=nat(e,r);return tat(n).reduce((s,i)=>s.then(o=>rat(o,i,t,r)),Promise.resolve(n))}async function Dx(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Zce(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function aat(e,t){await Dx("background",e,t)||await Dx("background-image",e,t),await Dx("mask",e,t)||await Dx("-webkit-mask",e,t)||await Dx("mask-image",e,t)||await Dx("-webkit-mask-image",e,t)}async function sat(e,t){const r=tc(e,HTMLImageElement);if(!(r&&!wO(e.src))&&!(tc(e,SVGImageElement)&&!wO(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await sM(n,aM(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){i(u)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function iat(e,t){const n=lm(e.childNodes).map(a=>eue(a,t));await Promise.all(n).then(()=>e)}async function eue(e,t){tc(e,Element)&&(await aat(e,t),await sat(e,t),await iat(e,t))}function oat(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const rW={};async function nW(e){let t=rW[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},rW[e]=t,t}async function aW(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),Wce(o,t.fetchRequestInit,({result:c})=>(r=r.replace(i,`url(${c})`),[i,c]))});return Promise.all(s).then(()=>r)}function sW(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=o.exec(n),c===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(c[0])}return t}async function lat(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{lm(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const c=s.href,u=nW(c).then(d=>aW(d,t)).then(d=>sW(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?o+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(nW(a.href).then(o=>aW(o,t)).then(o=>sW(o).forEach(c=>{i.insertRule(c,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{lm(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function cat(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Jce(t.style.getPropertyValue("src")))}async function uat(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=lm(e.ownerDocument.styleSheets),n=await lat(r,t);return cat(n)}function tue(e){return e.trim().replace(/["']/g,"")}function dat(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(tue(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function Aat(e,t){const r=await uat(e,t),n=dat(e);return(await Promise.all(r.filter(s=>n.has(tue(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return Zce(s.cssText,i,t)}))).join(`
`)}async function fat(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Aat(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function hat(e,t={}){const{width:r,height:n}=qce(e,t),a=await Ik(e,t,!0);return await fat(a,t),await eue(a,t),oat(a,t),await jnt(a,r,n)}async function mat(e,t={}){const{width:r,height:n}=qce(e,t),a=await hat(e,t),s=await gS(a),i=document.createElement("canvas"),o=i.getContext("2d"),c=t.pixelRatio||knt(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*c,i.height=d*c,t.skipAutoScale||Bnt(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function Fk(e,t={}){return(await mat(e,t)).toDataURL()}const rue="recursos_crucigramas",Ok="recursos_lineas_de_tiempo",Dk="recursos_mapas_mentales",nue="recursos_sopas_de_letras",Pk=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},pat=e=>{const t=zt(Nt(ft,rue),_r("fechaCreacion","desc"));return mr(t,r=>{const n=r.docs.map(a=>Pk(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},gat=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:sr.fromDate(new Date)};return(await Tn(Nt(ft,rue),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},xat=e=>{const t=zt(Nt(ft,Ok),_r("createdAt","desc"));return mr(t,r=>{const n=r.docs.map(a=>Pk(a));e(n)},r=>{console.error("Error al suscribirse a las lneas de tiempo:",r),e([])})},vat=async(e,t)=>{try{const{id:r,...n}=e,a=dr(ft,Ok,r);await Ji(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:sr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la lnea de tiempo:",r),new Error("No se pudo guardar la lnea de tiempo.")}},bat=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:sr.fromDate(new Date)};return(await Tn(Nt(ft,Ok),r)).id}catch(r){throw console.error("Error al crear la lnea de tiempo:",r),new Error("No se pudo crear la lnea de tiempo.")}},yat=async e=>{try{const t=dr(ft,Ok,e);await za(t)}catch(t){throw console.error("Error al eliminar la lnea de tiempo:",t),new Error("No se pudo eliminar la lnea de tiempo.")}},wat=e=>{const t=zt(Nt(ft,Dk),_r("createdAt","desc"));return mr(t,r=>{const n=r.docs.map(a=>Pk(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},Eat=async(e,t)=>{try{const{id:r,...n}=e,a=dr(ft,Dk,r);await Ji(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:sr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Cat=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:sr.fromDate(new Date)};return(await Tn(Nt(ft,Dk),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},_at=async e=>{try{const t=dr(ft,Dk,e);await za(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},Nat=e=>{const t=zt(Nt(ft,nue),_r("createdAt","desc"));return mr(t,r=>{const n=r.docs.map(a=>Pk(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},Sat=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:sr.fromDate(new Date)};return(await Tn(Nt(ft,nue),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},kat=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Bat=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),Tat=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),jat=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Prctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return l.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[l.jsx(y1,{type:"target",position:Er.Left,className:"w-2 h-2 !bg-slate-400"}),l.jsx("span",{className:"text-xl",children:e.icon||""}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&l.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),l.jsx(y1,{type:"source",position:Er.Right,className:"w-2 h-2 !bg-slate-400"})]})},EO=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+EO(n,t),0),CO=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(o,c,u)=>{r.push({id:o.id,position:{x:c*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=EO(o,100);let f=u-d/2+100/2;(o.children||[]).forEach(h=>{const p=EO(h,100),g=f+p/2-100/2;n.push({id:`e-${o.id}-${h.id}`,source:o.id,target:h.id,type:"smoothstep",animated:!0}),i(h,c+1,g),f+=p})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,o=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const p=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:o*Math.cos(p),y:o*Math.sin(p)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},aue=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return l.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[l.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),l.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""}),a>0&&l.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:""})]})}),(e.children||[]).map(o=>l.jsx(aue,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},Iat={custom:jat},Fat=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=S.useState(e.treeData),[s,i]=S.useState("tree"),[o,c]=S.useState(!1),[u,d,f]=cnt([]),[h,p,g]=unt([]),{fitView:x}=jk();S.useEffect(()=>{const{nodes:k,edges:I}=CO(n,s);d(k),p(I),setTimeout(()=>x({duration:300}),50)},[n,s,d,p,x]);const b=(k,I)=>{const E=JSON.parse(JSON.stringify(n)),N=B=>B.id===k?(B.label=I,!0):(B.children||[]).some(N);N(E),a(E)},y=k=>{const I=JSON.parse(JSON.stringify(n)),E=N=>N.id===k?(N.children||(N.children=[]),N.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(N.children||[]).some(E);E(I),a(I)},w=k=>{const I=JSON.parse(JSON.stringify(n)),E=N=>{const B=(N.children||[]).findIndex(R=>R.id===k);return B!==-1?(N.children.splice(B,1),!0):(N.children||[]).some(E)};E(I),a(I)},_=()=>{c(!0);const{nodes:k,edges:I}=CO(n,s);r({...e,treeData:n,nodes:k,edges:I}),setTimeout(()=>c(!1),1e3)},j=async k=>{const I=document.querySelector(".react-flow");I&&Fk(I,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(E=>{{const N=document.createElement("a");N.download=`${e.tema}.png`,N.href=E,N.click()}}).catch(E=>console.error("oops, something went wrong!",E))};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),l.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:" Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:l.jsxs(Vce,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:Iat,children:[l.jsx(gnt,{}),l.jsx(Ent,{})]})}),l.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),l.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[l.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(Bat,{})," Vista en rbol"]}),l.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(Tat,{})," Vista central"]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:l.jsx(aue,{node:n,onUpdate:b,onAddChild:y,onDelete:w})}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>j(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),l.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},Oat=({onBack:e,currentUser:t})=>{const[r,n]=S.useState("list"),[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(!0),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState("");S.useEffect(()=>{f(!0);const E=wat(N=>{s(N),f(!1)});return()=>E()},[]);const w=async E=>{if(E.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const N="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",B=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${b}", genera una estructura jerrquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categora, que para el nodo raz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categora descriptiva (ej: "Concepto Clave", "Ejemplo Prctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vaco si es un nodo final.
        `;try{const J=(await(await new cs(N).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text().replace(/^```json\s*|```\s*$/g,""),H=JSON.parse(J),K=z=>({id:crypto.randomUUID(),label:z.label||"Sin etiqueta",icon:z.icon||"",type:z.type||"default",children:(z.children||[]).map(K)}),V=K(H),{nodes:G,edges:X}=CO(V),ee={tema:h,nivel:g,treeData:V,nodes:G,edges:X},F=await Cat(ee,t);o({...ee,id:F,createdAt:new Date().toISOString()}),n("editor")}catch(R){console.error("AI Generation Error:",R),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Intntelo de nuevo.")}finally{u(!1)}},_=async E=>{try{await Eat(E,t)}catch(N){console.error("Error saving mind map:",N),alert("No se pudo guardar el mapa mental.")}},j=E=>{o(E),n("editor")},k=async E=>{if(window.confirm("Eliminar este mapa mental?"))try{await _at(E)}catch(N){console.error("Error deleting mind map:",N),alert("No se pudo eliminar el mapa mental.")}},I=()=>{switch(r){case"editor":return i?l.jsx(nM,{children:l.jsx(Fat,{mapData:i,onBack:()=>n("list"),onSave:_})}):null;case"config":return l.jsxs("div",{className:"max-w-2xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),l.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:" Volver"})]}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:E=>p(E.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),l.jsx("textarea",{id:"contenido",value:b,onChange:E=>y(E.target.value),rows:4,placeholder:"Aade ms detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?l.jsx(kat,{}):"Generar Mapa con IA"})})]})]});case"list":default:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),l.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(E=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:E.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(E.createdAt).toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx("button",{onClick:()=>j(E),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),l.jsx("button",{onClick:()=>k(E.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},E.id)):l.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningn mapa mental todava."})})]})}};return d?l.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("span",{className:"text-4xl",children:""}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),I()]})},Dat=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Pat=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Rat=({onBack:e,currentUser:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState("Media"),[i,o]=S.useState(10),[c,u]=S.useState(!1),[d,f]=S.useState(Array(10).fill("")),[h,p]=S.useState(""),[g,x]=S.useState(null),[b,y]=S.useState({ai:!1,puzzle:!1,data:!0}),w=S.useRef(null);S.useEffect(()=>{y(P=>({...P,data:!0}));const R=Nat(P=>{n(P),y(D=>({...D,data:!1}))});return()=>R()},[]),S.useEffect(()=>{f(R=>{const P=Array(i).fill("");for(let D=0;D<Math.min(R.length,i);D++)P[D]=R[D];return P})},[i]);const _=(R,P)=>{const D=[...d];D[R]=P,f(D)},j=async()=>{if(h.trim()){y(R=>({...R,ai:!0}));try{const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",D=new cs(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}),L=`
                Genera una lista de ${i} palabras clave en espaol, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,K=(await(await D.generateContent(L)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(K);if(!V.palabras||!Array.isArray(V.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const X=[...V.palabras.map(ee=>ee.toUpperCase().replace(/[^A-Z]/g,"")).slice(0,i)];for(;X.length<i;)X.push("");f(X)}catch(R){console.error("Error generating words with AI:",R),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Intntelo de nuevo.")}finally{y(R=>({...R,ai:!1}))}}},k=(R,P,D,L,M,J)=>{for(let H=0;H<R.length;H++){const K=D+H*M.y,V=L+H*M.x;if(K<0||K>=J||V<0||V>=J||P[K][V]&&P[K][V]!==R[H])return!1}return!0},I=(R,P,D,L,M)=>{for(let J=0;J<R.length;J++)P[D+J*M.y][L+J*M.x]=R[J]},E=async()=>{y(K=>({...K,puzzle:!0})),x(null),await new Promise(K=>setTimeout(K,100));const R=d.map(K=>K.toUpperCase().replace(/[^A-Z]/g,"")).filter(Boolean);if(R.length===0){alert("Por favor, ingrese al menos una palabra vlida."),y(K=>({...K,puzzle:!1}));return}const P=Math.max(...R.map(K=>K.length));let D=Math.max(P,R.length)+2;a==="Media"&&(D+=3),a==="Difcil"&&(D+=5),D=Math.min(Math.max(D,10),25);const L=Array(D).fill(null).map(()=>Array(D).fill(null)),M=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fcil"&&M.push({x:1,y:-1}),a==="Difcil"&&M.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const K of R.sort((V,G)=>G.length-V.length)){let V=!1;for(let G=0;G<100;G++){const X=M[Math.floor(Math.random()*M.length)],ee=Math.floor(Math.random()*D),F=Math.floor(Math.random()*D);if(k(K,L,ee,F,X,D)){I(K,L,ee,F,X),V=!0;break}}V||console.warn(`No se pudo colocar la palabra: ${K}`)}const J=L.map(K=>K.map(V=>V||"ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*27)])),H={tema:h||"Personalizado",grid:J.map(K=>K.join("")),words:R.sort()};try{const K=await Sat(H,t);x({...H,id:K,createdAt:new Date().toISOString()})}catch(K){console.error("Error saving puzzle:",K),alert("No se pudo guardar la sopa de letras.")}finally{y(K=>({...K,puzzle:!1}))}},N=()=>{w.current&&Fk(w.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(R=>{const P=document.createElement("a");P.download="sopa-de-letras.png",P.href=R,P.click()}).catch(R=>{console.error("oops, something went wrong!",R),alert("No se pudo generar la imagen. Intntelo de nuevo.")})},B=()=>{var D;if(!g)return null;const R=((D=g.grid[0])==null?void 0:D.length)||1,P=g.grid.join("").split("");return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:w,className:"p-6 bg-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsx("div",{className:"md:col-span-2",children:l.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${R}, minmax(0, 1fr))`},children:P.map((L,M)=>l.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:L},M))})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),l.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(L=>l.jsx("li",{children:L},L))})]})]})}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),l.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return b.data?l.jsx("div",{className:"text-center py-10",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:""}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),!g&&l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),l.jsxs("select",{value:a,onChange:R=>s(R.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:"Fcil"}),l.jsx("option",{children:"Media"}),l.jsx("option",{children:"Difcil"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(R=>l.jsx("button",{onClick:()=>{o(R),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&i===R?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:R},R)),l.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&l.jsx("input",{type:"number",value:i,onChange:R=>o(parseInt(R.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:R=>p(R.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:j,disabled:b.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:b.ai?l.jsx(Dat,{}):l.jsxs(l.Fragment,{children:[l.jsx(Pat,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((R,P)=>l.jsx("input",{type:"text",value:R,onChange:D=>_(P,D.target.value),placeholder:`Palabra ${P+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},P))})]}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:E,disabled:b.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:b.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&B()]})},Lat=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Mat=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Uat=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=S.useState(e),[s,i]=S.useState(null),o=S.useRef(null),c=(p,g,x)=>{a(b=>({...b,events:b.events.map(y=>y.id===p?{...y,[g]:x}:y)}))},u=()=>{const p={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:""},g=[...n.events,p].sort((x,b)=>parseInt(x.date)-parseInt(b.date));a(x=>({...x,events:g}))},d=p=>{a(g=>({...g,events:g.events.filter(x=>x.id!==p)}))},f=async p=>{if(!p.description.trim()){alert("Escribe al menos una idea en la descripcin para que la IA la complete.");return}i(p.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",x=`
            Para una lnea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejrala.
            Idea del usuario: "${p.description}"

            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional, con tres claves:
            1. "date": El ao o fecha ms precisa y relevante para esta idea.
            2. "description": Una descripcin concisa (mximo 15 palabras) para la lnea de tiempo.
            3. "icon": Un nico emoji que represente el hito.
        `;try{const k=(await(await new cs(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(x)).response).text().replace(/^```json\s*|```\s*$/g,""),I=JSON.parse(k);a(E=>({...E,events:E.events.map(N=>N.id===p.id?{...N,date:I.date,description:I.description,icon:I.icon}:N).sort((N,B)=>parseInt(N.date)-parseInt(B.date))}))}catch(b){console.error("Error al generar descripcin del hito:",b),alert("No se pudo autocompletar el hito.")}finally{i(null)}},h=()=>{o.current&&Fk(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(p=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=p,g.click()}).catch(p=>{console.error("Error al generar la imagen:",p),alert("No se pudo generar la imagen. Intntelo de nuevo.")})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),l.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:" Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:l.jsxs("div",{ref:o,className:"relative p-10",children:[l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),l.jsx("div",{className:"relative",children:n.events.sort((p,g)=>parseInt(p.date)-parseInt(g.date)).map((p,g)=>{const x=g%2===0;return l.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[l.jsx("div",{className:"w-1/2",children:x&&l.jsx("div",{className:"text-right pr-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})}),l.jsx("div",{className:"z-10 flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),l.jsx("div",{className:"w-1/2",children:!x&&l.jsx("div",{className:"text-left pl-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})})]},p.id)})})]})}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(p=>l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[l.jsx("input",{type:"text",value:p.date,onChange:g=>c(p.id,"date",g.target.value),placeholder:"Ao/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("textarea",{value:p.description,onChange:g=>c(p.id,"description",g.target.value),placeholder:"Descripcin",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),l.jsx("button",{onClick:()=>f(p),disabled:s===p.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===p.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):l.jsx(Mat,{})})]}),l.jsx("button",{onClick:()=>d(p.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},p.id))}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[l.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Aadir Hito"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),l.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},Qat=({onBack:e,currentUser:t})=>{const[r,n]=S.useState("list"),[a,s]=S.useState([]),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(!0),[h,p]=S.useState(""),[g,x]=S.useState(""),[b,y]=S.useState("");S.useEffect(()=>{f(!0);const k=xat(I=>{s(I),f(!1)});return()=>k()},[]);const w=async k=>{if(k.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const I="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",E=g&&b?`entre ${g} y ${b}`:g?`a partir de ${g}`:b?`hasta ${b}`:"",N=`
            Genera una lnea de tiempo sobre el tema "${h}" ${E}.
            Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el ao del hito.
            2. "description": Un string con la descripcin breve del hito (mximo 15 palabras).
            3. "icon": Un string con un nico emoji que represente el hito.
            Ordena los eventos cronolgicamente.
        `;try{const M=(await(await new cs(I).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(N)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(M);if(!J.events||!Array.isArray(J.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const H={tema:h,fechaInicio:g,fechaFin:b,events:J.events.map(V=>({id:crypto.randomUUID(),date:V.date||"Sin fecha",description:V.description||"Sin descripcin",icon:V.icon||""}))},K=await bat(H,t);o({...H,id:K,createdAt:new Date().toISOString()}),n("editor")}catch(B){console.error("AI Generation Error:",B),alert("Hubo un error al generar la lnea de tiempo. Por favor, revisa el formato del tema o intntalo de nuevo.")}finally{u(!1)}},_=async k=>{try{await vat(k,t),n("list"),o(null)}catch(I){console.error("Error saving timeline:",I),alert("No se pudo guardar la lnea de tiempo.")}},j=async k=>{if(window.confirm("Eliminar esta lnea de tiempo?"))try{await yat(k)}catch(I){console.error("Error deleting timeline:",I),alert("No se pudo eliminar la lnea de tiempo.")}};return r==="editor"&&i?l.jsx(Uat,{timeline:i,onSave:_,onBack:()=>n("list")}):d?l.jsx("div",{className:"text-center py-10",children:"Cargando lneas de tiempo..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:""}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Lnea de Tiempo"}),l.jsxs("form",{onSubmit:w,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:k=>p(k.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),l.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:k=>x(k.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Trmino (Opcional)"}),l.jsx("input",{type:"text",id:"fechaFin",value:b,onChange:k=>y(k.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?l.jsx(Lat,{}):"Generar con IA"})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Lneas de Tiempo Guardadas"}),a.length>0?a.map(k=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:k.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(k.createdAt).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{o(k),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),l.jsx("button",{onClick:()=>j(k.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},k.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay lneas de tiempo guardadas."})]})]})},Hat=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),iW=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Vat=({onBack:e,currentUser:t})=>{const[r,n]=S.useState([]),[a,s]=S.useState(10),[i,o]=S.useState(!1),[c,u]=S.useState(Array(10).fill("")),[d,f]=S.useState(Array(10).fill("")),[h,p]=S.useState(""),[g,x]=S.useState(null),[b,y]=S.useState(!1),[w,_]=S.useState({ai:!1,puzzle:!1,data:!0}),[j,k]=S.useState(null),I=S.useRef(null);S.useEffect(()=>{_(J=>({...J,data:!0}));const M=pat(J=>{const H=J.map(K=>{const{grid_flat:V,grid_width:G,...X}=K,ee=[];if(V&&G>0)for(let F=0;F<V.length;F+=G)ee.push(V.slice(F,F+G));return{...X,grid:ee}});n(H),_(K=>({...K,data:!1}))});return()=>M()},[]),S.useEffect(()=>{const M=a;u(J=>Array.from({length:M},(H,K)=>J[K]||"")),f(J=>Array.from({length:M},(H,K)=>J[K]||""))},[a]);const E=(M,J)=>{const H=[...c];H[M]=J,u(H)},N=(M,J)=>{const H=[...d];H[M]=J,f(H)},B=async()=>{if(h.trim()){_(M=>({...M,ai:!0}));try{const M="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new cs(M).getGenerativeModel({model:"gemini-1.5-flash-latest"}),K=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un nico objeto JSON vlido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en maysculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let ee=(await(await H.generateContent(K)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const F=ee.indexOf("{"),z=ee.lastIndexOf("}");F!==-1&&z!==-1&&(ee=ee.substring(F,z+1)),ee=ee.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),ee.includes("__SPLIT__")&&(ee=ee.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(le,ie,ce,pe)=>{const Be=ce.split("__SPLIT__").map(ne=>ne.trim().replace(/,$/,""));return ie+Be.join(",")+pe})),ee=ee.replace(/,\s*]/g,"]");let Y;try{Y=JSON.parse(ee)}catch{console.error("Respuesta IA no es JSON vlido:",ee),alert("La respuesta de la IA no es un JSON vlido. Intenta de nuevo o ajusta el tema."),_(ie=>({...ie,ai:!1}));return}if(!Y.items||!Array.isArray(Y.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const te=Y.items.map(le=>(le.word||"").toUpperCase().replace(/\s/g,"")),ae=Y.items.map(le=>le.clue||"");u(Array.from({length:a},(le,ie)=>te[ie]||"")),f(Array.from({length:a},(le,ie)=>ae[ie]||""))}catch(M){console.error("Error generating words/clues with AI:",M),alert("No se pudieron generar las palabras y pistas. Intntelo de nuevo.")}finally{_(M=>({...M,ai:!1}))}}},R=async M=>{const J=c[M];if(!J||!J.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}k(M);try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new cs(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}),G=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${J}". La respuesta debe ser un nico objeto JSON vlido sin texto adicional, con una sola clave: "clue".`,z=(await(await V.generateContent(G)).response).text().replace(/^```json\s*|```\s*$/g,""),Y=JSON.parse(z);Y.clue&&N(M,Y.clue)}catch(H){console.error("Error generating clue with AI:",H),alert("No se pudo generar la pista.")}finally{k(null)}},P=S.useCallback(()=>{try{const M=c.map((Ie,Ue)=>({word:Ie.toUpperCase().replace(/[^A-Z]/g,""),clue:d[Ue]})).filter(Ie=>Ie.word.length>0);if(M.length===0)return alert("Por favor, ingrese al menos una palabra vlida."),null;M.sort((Ie,Ue)=>Ue.word.length-Ie.word.length);const J=M[0].word.length,H=Math.max(J,M.length)*2;let K=Array.from({length:H},()=>Array(H).fill(null));const V=[],G=M.shift(),X=Math.floor(H/2),ee=Math.floor((H-G.word.length)/2);for(let Ie=0;Ie<G.word.length;Ie++)K[X][ee+Ie]=G.word[Ie];V.push({word:G.word,clue:G.clue,direction:"across",row:X,col:ee});for(const Ie of M){let Ue={score:-1,row:-1,col:-1,direction:"across"};for(const Ye of V)for(let ye=0;ye<Ye.word.length;ye++)for(let Oe=0;Oe<Ie.word.length;Oe++)if(Ye.word[ye]===Ie.word[Oe]){let Re=0,qe,Ze,ct;Ye.direction==="across"?(ct="down",qe=Ye.row-Oe,Ze=Ye.col+ye):(ct="across",qe=Ye.row+ye,Ze=Ye.col-Oe);let pt=!0;for(let It=0;It<Ie.word.length;It++){const Mt=qe+(ct==="down"?It:0),Pt=Ze+(ct==="across"?It:0);if(Mt<0||Mt>=H||Pt<0||Pt>=H){pt=!1;break}const Qt=K[Mt][Pt],yt=Mt===Ye.row+(Ye.direction==="down"?ye:0)&&Pt===Ye.col+(Ye.direction==="across"?ye:0);if(Qt&&!yt){pt=!1;break}if(Qt&&yt&&Qt!==Ie.word[Oe]){pt=!1;break}if(!yt){if(ct==="across"&&(Mt>0&&K[Mt-1][Pt]||Mt<H-1&&K[Mt+1][Pt])){pt=!1;break}if(ct==="down"&&(Pt>0&&K[Mt][Pt-1]||Pt<H-1&&K[Mt][Pt+1])){pt=!1;break}}Qt&&Re++}pt&&Re>Ue.score&&(Ue={score:Re,row:qe,col:Ze,direction:ct})}if(Ue.score>-1){for(let Ye=0;Ye<Ie.word.length;Ye++){const ye=Ue.row+(Ue.direction==="down"?Ye:0),Oe=Ue.col+(Ue.direction==="across"?Ye:0);K[ye][Oe]=Ie.word[Ye]}V.push({word:Ie.word,clue:Ie.clue,direction:Ue.direction,row:Ue.row,col:Ue.col})}}let F=H,z=-1,Y=H,te=-1;V.forEach(Ie=>{F=Math.min(F,Ie.row),z=Math.max(z,Ie.row+(Ie.direction==="down"?Ie.word.length-1:0)),Y=Math.min(Y,Ie.col),te=Math.max(te,Ie.col+(Ie.direction==="across"?Ie.word.length-1:0))}),z===-1&&(F=V[0].row,z=V[0].row,Y=V[0].col,te=V[0].col+V[0].word.length-1);const ae=1,le=Math.max(0,F-ae),ie=Math.min(H,z+1+ae),ce=Math.max(0,Y-ae),pe=Math.min(H,te+1+ae),Be=K.slice(le,ie).map(Ie=>Ie.slice(ce,pe)),ne=V.map(Ie=>({...Ie,row:Ie.row-le,col:Ie.col-ce})).sort((Ie,Ue)=>Ie.row-Ue.row||Ie.col-Ue.col);let _e=1;const De=[],Se=new Map;ne.forEach(Ie=>{const Ue=`${Ie.row},${Ie.col}`;Se.has(Ue)||Se.set(Ue,_e++),De.push({...Ie,number:Se.get(Ue)})});const fe=Be.map(Ie=>Ie.map(Ue=>({char:Ue,number:null})));return De.forEach(Ie=>{const Ue=`${Ie.row},${Ie.col}`;fe[Ie.row]&&fe[Ie.row][Ie.col]!==void 0&&(fe[Ie.row][Ie.col].number=Se.get(Ue))}),{grid:fe,clues:{across:De.filter(Ie=>Ie.direction==="across").sort((Ie,Ue)=>Ie.number-Ue.number),down:De.filter(Ie=>Ie.direction==="down").sort((Ie,Ue)=>Ie.number-Ue.number)}}}catch(M){return console.error("Error generating crossword grid:",M),alert("Ocurri un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),D=async()=>{var J;_(H=>({...H,puzzle:!0})),x(null),await new Promise(H=>setTimeout(H,100));const M=P();if(M){const H={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:M.grid,clues:M.clues},{grid:K,...V}=H,G={...V,grid_flat:K.flat().map(X=>X.char||""),grid_width:((J=K[0])==null?void 0:J.length)||0};try{const X=await gat(G,t);x({...H,id:X,fechaCreacion:new Date().toISOString()})}catch(X){console.error("Error saving puzzle:",X),alert("No se pudo guardar el crucigrama en la base de datos.")}}_(H=>({...H,puzzle:!1}))},L=()=>{I.current&&(y(!1),setTimeout(()=>{Fk(I.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(M=>{const J=document.createElement("a");J.download="crucigrama.png",J.href=M,J.click()}).catch(M=>console.error("Error generating image",M))},100))};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:""}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:" Volver a Recursos"})]})]}),g?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:I,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsx("div",{children:l.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((M,J)=>l.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:M.char?"white":"black"},children:[M.number&&l.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:M.number}),b&&M.char&&l.jsx("span",{children:M.char})]},J))})}),l.jsxs("div",{className:"text-sm",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.across.map(M=>l.jsxs("li",{children:[l.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))}),l.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.down.map(M=>l.jsxs("li",{children:[l.jsxs("strong",{children:[M.number,"."]})," ",M.clue]},`${M.word}-${M.clue}`))})]})]})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:b,onChange:()=>y(!b),className:"h-5 w-5 rounded"}),l.jsx("span",{children:"Mostrar Solucin"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>x(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),l.jsx("button",{onClick:L,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Nmero de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(M=>l.jsx("button",{onClick:()=>{s(M),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===M?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:M},M)),l.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&l.jsx("input",{type:"number",value:a,onChange:M=>s(parseInt(M.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:M=>p(M.target.value),placeholder:"Enva un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:B,disabled:w.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:w.ai?l.jsx(Hat,{}):l.jsxs(l.Fragment,{children:[l.jsx(iW,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((M,J)=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsx("input",{type:"text",value:c[J],onChange:H=>E(J,H.target.value),placeholder:`Palabra ${J+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[l.jsx("textarea",{value:d[J],onChange:H=>N(J,H.target.value),placeholder:`Pista ${J+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:()=>R(J),disabled:j===J,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:j===J?l.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):l.jsx(iW,{})})]})]},J))}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:D,disabled:w.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:w.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},zat=()=>{const[e,t]=S.useState(null),[r,n]=S.useState(!0);return S.useEffect(()=>{const a=KY(M6,async s=>{if(s&&s.email)try{const i=await cee(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},$at=[{id:"sopaDeLetras",icon:"",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"",nombre:"Lneas de Tiempo",descripcion:"Construye lneas de tiempo para comprender procesos, hechos histricos o secuencias."}],Gat=({recurso:e,onClick:t})=>l.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[l.jsx("div",{className:"text-6xl mb-4",children:e.icon}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),Kat=()=>{const[e,t]=S.useState("menu"),{currentUser:r}=zat(),n=()=>e!=="menu"&&!r?l.jsx("div",{className:"text-center p-8",children:"Cargando informacin de usuario..."}):e==="mapasMentales"?l.jsx(Oat,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?l.jsx(Rat,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?l.jsx(Qat,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?l.jsx(Vat,{onBack:()=>t("menu"),currentUser:r}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:$at.map(a=>l.jsx(Gat,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return l.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},qat="evaluaciones_formativas",Wat="calificaciones_formativas",sue="trabajos_grupales_formativos",iue=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},Xat=(e,t)=>{const r=zt(Nt(ft,qat),Yr("curso","==",e));return mr(r,n=>{t(n.docs.map(a=>iue(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},Yat=e=>{const t=zt(Nt(ft,Wat));return mr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},Jat=(e,t)=>{const r=zt(Nt(ft,sue),Yr("curso","==",e));return mr(r,n=>{t(n.docs.map(a=>iue(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},Zat=async e=>{try{const{id:t,...r}=e,n=dr(ft,sue,t);await Ji(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},est=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState({}),[s,i]=S.useState([]),[o,c]=S.useState(!0),[u,d]=S.useState(null),[f,h]=S.useState(!1),[p,g]=S.useState(null),x=S.useRef(null);S.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const j=Xat(e.curso,r),k=Yat(a),I=Jat(e.curso,E=>{i(E),c(!1)});return()=>{j(),k(),I()}},[e.curso]);const b=S.useMemo(()=>{if(!e.curso)return[];const k=t.filter(I=>I.curso===e.curso).reduce((I,E)=>((I[E.asignatura]=I[E.asignatura]||[]).push(E),I),{});return Object.entries(k).map(([I,E])=>{let N=0,B=0;const R=E.map(D=>{var J;const L=(J=n[D.id])==null?void 0:J[e.nombreCompleto];let M="No Trabajado";return L==="trabajado"?(N+=7,B++,M="Trabajado"):L==="no trabajado"&&(N+=2,B++,M="No Trabajado"),{id:D.id,nombreActividad:D.nombreActividad,fecha:D.fecha,estado:M}}).filter(D=>{var L;return(L=n[D.id])==null?void 0:L[e.nombreCompleto]}),P=B>0?(N/B).toFixed(1):"N/A";return{asignatura:I,promedio:P,actividades:R.sort((D,L)=>new Date(L.fecha).getTime()-new Date(D.fecha).getTime())}}).filter(I=>I.actividades.length>0).sort((I,E)=>I.asignatura.localeCompare(E.asignatura))},[t,n,e]);S.useEffect(()=>{if(b.reduce((B,R)=>B+R.actividades.length,0)===0){d(null);return}const k=b.reduce((B,R)=>{const P=parseFloat(R.promedio);return isNaN(P)?B:B+P},0),I=b.length>0?k/b.length:0,E=EC.find(B=>I>=B.promedioMin&&I<=B.promedioMax)||null,N=EC.filter(B=>I>=B.promedioMin);if(d({puntajeTotal:0,promedio:I,rangoActual:E,insigniasGanadas:N}),x.current!==null){const B=EC.find(R=>x.current>=R.promedioMin&&x.current<=R.promedioMax)||null;E&&(!B||E.nombre!==B.nombre)&&g(E)}x.current=I},[b]);const y=S.useMemo(()=>e.curso?s.filter(j=>j.curso===e.curso).map(j=>{const k=j.grupos.find(I=>I.integrantes.some(E=>E.nombre===e.nombreCompleto));return k?{...j,miGrupo:k}:null}).filter(j=>j!==null).sort((j,k)=>new Date(k.fechaPresentacion).getTime()-new Date(j.fechaPresentacion).getTime()):[],[s,e]),w=async(j,k)=>{const I=s.find(N=>N.id===j);if(!I)return;const E={...I,grupos:I.grupos.map(N=>N.integrantes.some(R=>R.nombre===e.nombreCompleto)?{...N,integrantes:N.integrantes.map(R=>R.nombre===e.nombreCompleto?{...R,rol:k||void 0}:R)}:N)};try{await Zat(E)}catch(N){console.error("Error updating role:",N),alert("No se pudo actualizar el rol.")}},_=j=>{const k=parseFloat(j);return isNaN(k)?"bg-slate-400":k<4?"bg-red-500":k<5.5?"bg-yellow-500":"bg-green-500"};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:j=>j.stopPropagation(),children:[l.jsx("div",{className:"text-8xl animate-bounce",children:p.emoji}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"Subiste de Rango!"}),l.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:p.nombre}),l.jsx("p",{className:"text-slate-600 mt-4",children:p.mensaje}),l.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"Genial!"})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:j=>j.stopPropagation(),children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),l.jsx("div",{className:"overflow-y-auto space-y-3",children:EC.map(j=>{const k=u==null?void 0:u.insigniasGanadas.some(I=>I.nombre===j.nombre);return l.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${k?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[l.jsx("div",{className:"text-5xl",children:j.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold ${k?"text-amber-700":"text-slate-600"}`,children:j.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",j.promedioMin," y ",j.promedioMax]})]})]},j.nombre)})})]})}),l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Aqu puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),l.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),l.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),l.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),l.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(j=>l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:j.asignatura}),l.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),l.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${_(j.promedio)}`,children:j.promedio})]}),l.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),j.actividades.map(k=>l.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-700",children:k.nombreActividad}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(k.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),l.jsx("span",{className:`font-semibold ${k.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:k.estado==="Trabajado"?" Trabajado":" No Trabajado"})]},k.id))]})]},j.asignatura))}):l.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:""}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"An sin registros"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"Todava no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),l.jsx("div",{className:"space-y-4",children:y.map(j=>{const k=j.miGrupo.integrantes.filter(E=>E.nombre!==e.nombreCompleto&&E.rol).map(E=>E.rol),I=dee.filter(E=>!k.includes(E));return l.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-bold text-slate-800",children:j.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:[j.asignatura," - Presentacin: ",new Date(j.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-3 pt-3 border-t",children:[l.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",j.miGrupo.numero]}),l.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:j.miGrupo.integrantes.map(E=>l.jsxs("li",{className:"grid grid-cols-2 items-center",children:[l.jsx("span",{className:E.nombre===e.nombreCompleto?"font-bold":"",children:E.nombre}),E.nombre===e.nombreCompleto?l.jsxs("select",{value:E.rol||"",onChange:N=>w(j.id,N.target.value),className:"text-sm p-1 border rounded w-full",children:[l.jsx("option",{value:"",children:"-- Seleccionar rol --"}),E.rol&&!I.includes(E.rol)&&l.jsx("option",{value:E.rol,children:E.rol}),I.map(N=>l.jsx("option",{value:N,children:N},N))]}):l.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:E.rol||"Sin rol"})]},E.nombre))})]})]},j.id)})})]})]})},tst="proyectos_interdisciplinarios",oue="entregas_interdisciplinarias",lue=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},rst=(e,t)=>{const r=zt(Nt(ft,tst),Yr("cursos","array-contains",e));return mr(r,n=>{const a=n.docs.map(s=>lue(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},nst=(e,t)=>{const r=zt(Nt(ft,oue),Yr("estudianteId","==",e));return mr(r,n=>{const a=n.docs.map(s=>lue(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},ast=async e=>{try{const{id:t,...r}=e,n=dr(ft,oue,t),a={...r,fechaCompletado:sr.fromDate(new Date(r.fechaCompletado||Date.now()))};await Ji(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},sst=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState([]),[s,i]=S.useState(null),[o,c]=S.useState(!0);S.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=rst(e.curso,r),h=nst(e.id,p=>{a(p),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await ast(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const p=S.useMemo(()=>{const k=n.find(I=>I.planificacionId===f.id&&I.tareaId===h.id);return k||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,x]=S.useState(!1),[b,y]=S.useState({observaciones:p.observacionesEstudiante||"",enlace:p.enlaceUrl||""}),w=k=>{var E;const I=(E=k.target.files)==null?void 0:E[0];I&&(alert(`Simulacin: Archivo "${I.name}" listo para subir.`),u({...p,archivoAdjunto:{nombre:I.name,url:`simulated/path/${I.name}`},fechaCompletado:new Date().toISOString()}))},_=()=>{u({...p,observacionesEstudiante:b.observaciones,enlaceUrl:b.enlace,fechaCompletado:new Date().toISOString()})},j=()=>{u({...p,completada:!p.completada,fechaCompletado:new Date().toISOString()})};return l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("input",{type:"checkbox",checked:p.completada,onChange:j,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:`font-semibold ${p.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&l.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),l.jsx("button",{onClick:()=>x(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[l.jsx("textarea",{value:b.observaciones,onChange:k=>y({...b,observaciones:k.target.value}),onBlur:_,placeholder:"Aadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"url",value:b.enlace,onChange:k=>y({...b,enlace:k.target.value}),onBlur:_,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"file",onChange:w,className:"text-sm"}),p.archivoAdjunto&&l.jsxs("p",{className:"text-xs text-green-600",children:[" Archivo subido: ",p.archivoAdjunto.nombre]})]}),p.feedbackProfesor&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[l.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentacin del profesor:"}),l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p.feedbackProfesor})]})]})};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(b=>b.planificacionId===f.id).filter(b=>b.completada).length,x=h.length>0?g/h.length*100:0;return l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[l.jsxs("button",{onClick:()=>i(s===f.id?null:f.id),className:"w-full text-left",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[l.jsx("span",{children:"Progreso"}),l.jsxs("span",{children:[Math.round(x),"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${x}%`}})})]})]}),s===f.id&&l.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(b=>l.jsx(d,{plan:f,tarea:b},b.id)):l.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto an no tiene tareas asignadas."})})]},f.id)}):l.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[l.jsx("span",{className:"text-5xl",children:""}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Todo al da!"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},ist=({data:e})=>l.jsx("div",{className:"space-y-4",children:e.map((r,n)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),l.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),ost=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState(null),[u,d]=S.useState(Xy),f=S.useCallback(async()=>{a(!0);try{const b=(await NYe(e.nombreCompleto)).sort((y,w)=>new Date(w.fecha).getTime()-new Date(y.fecha).getTime());r(b),i(null)}catch(x){console.error("Error al cargar acompaamientos desde Firestore",x),i("No se pudieron cargar tus acompaamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=S.useCallback(async()=>{try{const x=await SYe();x&&d(x)}catch(x){console.error("Error al cargar rbrica personalizada",x)}},[]);S.useEffect(()=>{f(),h()},[f,h]);const p=S.useMemo(()=>{if(!o)return[];const x={};return u.forEach(b=>{x[b.domain]={total:0,count:0},b.criteria.forEach(y=>{const w=o.rubricaResultados[y.name];w&&(x[b.domain].total+=w,x[b.domain].count++)})}),Object.entries(x).map(([b,y])=>({label:b,value:y.count>0?y.total/y.count:0}))},[o,u]),g=x=>{const b=new vr;b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),b.setFont("helvetica","bold"),b.setFontSize(16),b.setTextColor(40),b.text("Informe de Acompaamiento Docente",b.internal.pageSize.getWidth()/2,25,{align:"center"}),b.setFontSize(12),b.setFont("helvetica","normal"),vo(b,{startY:35,body:[["Docente:",x.docente],["Fecha:",new Date(x.fecha).toLocaleDateString("es-CL")],["Asignatura:",x.asignatura],["Curso:",x.curso],["Bloques:",x.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=b.lastAutoTable.finalY+15;if(Object.keys(x.rubricaResultados).length>0){const j=[],k=["Dbil","Incipiente","Satisfactorio","Avanzado"];u.forEach(I=>{j.push([{content:I.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),I.criteria.forEach(E=>{const N=x.rubricaResultados[E.name],B=N?k[N-1]:"No evaluado";j.push([E.name,B])})}),vo(b,{startY:y,head:[["Indicador","Nivel de Logro"]],body:j,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=b.lastAutoTable.finalY+15}const w=(j,k)=>{if(!k)return;y>250&&(b.addPage(),y=20,b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(40),b.text(j,14,y),y+=8,b.setFont("helvetica","normal"),b.setFontSize(11),b.setTextColor(60);const I=b.splitTextToSize(k.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);b.text(I,14,y),y+=I.length*5+10};w("Observaciones Generales",x.observacionesGenerales),w("Retroalimentacin Consolidada",x.retroalimentacionConsolidada);const _=b.getNumberOfPages();for(let j=1;j<=_;j++)b.setPage(j),b.setFontSize(8),b.setTextColor(128),b.text(`Pgina ${j} de ${_}`,b.internal.pageSize.getWidth()/2,b.internal.pageSize.getHeight()-10,{align:"center"});b.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(x.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:" Volver a mi historial"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompaamiento"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),l.jsxs("button",{onClick:()=>g(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[l.jsx(uee,{})," Exportar PDF"]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsx("h3",{children:"Retroalimentacin Consolidada (IA)"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentacin."})}),l.jsx("h3",{children:"Observaciones Generales"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeo por Dominio"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx(ist,{data:p})})]})]})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompaamientos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aqu encontrars el historial de tus observaciones de clase y la retroalimentacin asociada."}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompaamientos desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompaamientos registrados en la nube."}),l.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(x=>l.jsx("button",{onClick:()=>c(x),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[x.curso," - ",x.asignatura]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(x.fecha).toLocaleDateString("es-CL"),x.bloques&&` | Bloques: ${x.bloques}`]}),Object.keys(x.rubricaResultados).length>0&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(x.rubricaResultados).length," criterios"]})]}),l.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},x.id)):!n&&l.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:""}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"An no tienes acompaamientos de clase registrados."})]})})]})},lst=e=>{console.log(" Iniciando suscripcin a todas las planificaciones...");try{const t=Nt(xn,"planificaciones"),r=zt(t,_r("fechaCreacion","desc"));return mr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log(" Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error(" Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error(" Error al configurar suscripcin a todas las planificaciones:",t),t}},cst=(e,t)=>{if(console.log(" Iniciando suscripcin a planificaciones del usuario:",e),!e)throw console.error(" userId no proporcionado"),new Error("userId es requerido");try{const r=Nt(xn,"planificaciones"),n=zt(r,Yr("userId","==",e),_r("fechaCreacion","desc"));return mr(n,s=>{const i=[];s.forEach(o=>{const c=o.data();i.push({id:o.id,...c})}),console.log(" Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error(" Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error(" Error al configurar suscripcin a planificaciones del usuario:",r),r}};function ust(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const dst=ust("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Ast={value:function(){}};function cue(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new d5(r)}function d5(e){this._=e}function fst(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}d5.prototype=cue.prototype={constructor:d5,on:function(e,t){var r=this._,n=fst(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=hst(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=oW(r[a],e.name,t);else if(t==null)for(a in r)r[a]=oW(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new d5(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function hst(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function oW(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Ast,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const mst=Object.freeze(Object.defineProperty({__proto__:null,dispatch:cue},Symbol.toStringTag,{value:"Module"})),pst=yfe(mst);var pI,lW;function gst(){if(lW)return pI;lW=1;const e=pst.dispatch,t=Math.PI/180,r={archimedean:x,rectangular:b},n=64,a=2048;pI=function(){var j=[256,256],k=s,I=i,E=c,N=o,B=o,R=u,P=d,D=x,L=[],M=1/0,J=e("word","end"),H=null,K=Math.random,V={},G=w;V.canvas=function(F){return arguments.length?(G=_(F),V):G},V.start=function(){var F=X(G()),z=y((j[0]>>5)*j[1]),Y=null,te=L.length,ae=-1,le=[],ie=L.map(function(pe,Be){return pe.text=k.call(this,pe,Be),pe.font=I.call(this,pe,Be),pe.style=N.call(this,pe,Be),pe.weight=B.call(this,pe,Be),pe.rotate=R.call(this,pe,Be),pe.size=~~E.call(this,pe,Be),pe.padding=P.call(this,pe,Be),pe}).sort(function(pe,Be){return Be.size-pe.size});return H&&clearInterval(H),H=setInterval(ce,0),ce(),V;function ce(){for(var pe=Date.now();Date.now()-pe<M&&++ae<te&&H;){var Be=ie[ae];Be.x=j[0]*(K()+.5)>>1,Be.y=j[1]*(K()+.5)>>1,f(F,Be,ie,ae),Be.hasText&&ee(z,Be,Y)&&(le.push(Be),J.call("word",V,Be),Y?p(Y,Be):Y=[{x:Be.x+Be.x0,y:Be.y+Be.y0},{x:Be.x+Be.x1,y:Be.y+Be.y1}],Be.x-=j[0]>>1,Be.y-=j[1]>>1)}ae>=te&&(V.stop(),J.call("end",V,le,Y))}},V.stop=function(){H&&(clearInterval(H),H=null);for(const F of L)delete F.sprite;return V};function X(F){const z=F.getContext("2d",{willReadFrequently:!0});F.width=F.height=1;const Y=Math.sqrt(z.getImageData(0,0,1,1).data.length>>2);return F.width=(n<<5)/Y,F.height=a/Y,z.fillStyle=z.strokeStyle="red",{context:z,ratio:Y}}function ee(F,z,Y){j[0],j[1];for(var te=z.x,ae=z.y,le=Math.sqrt(j[0]*j[0]+j[1]*j[1]),ie=D(j),ce=K()<.5?1:-1,pe=-ce,Be,ne,_e;(Be=ie(pe+=ce))&&(ne=~~Be[0],_e=~~Be[1],!(Math.min(Math.abs(ne),Math.abs(_e))>=le));)if(z.x=te+ne,z.y=ae+_e,!(z.x+z.x0<0||z.y+z.y0<0||z.x+z.x1>j[0]||z.y+z.y1>j[1])&&(!Y||g(z,Y))&&!h(z,F,j[0])){for(var De=z.sprite,Se=z.width>>5,fe=j[0]>>5,Ie=z.x-(Se<<4),Ue=Ie&127,Ye=32-Ue,ye=z.y1-z.y0,Oe=(z.y+z.y0)*fe+(Ie>>5),Re,qe=0;qe<ye;qe++){Re=0;for(var Ze=0;Ze<=Se;Ze++)F[Oe+Ze]|=Re<<Ye|(Ze<Se?(Re=De[qe*Se+Ze])>>>Ue:0);Oe+=fe}return!0}return!1}return V.timeInterval=function(F){return arguments.length?(M=F??1/0,V):M},V.words=function(F){return arguments.length?(L=F,V):L},V.size=function(F){return arguments.length?(j=[+F[0],+F[1]],V):j},V.font=function(F){return arguments.length?(I=_(F),V):I},V.fontStyle=function(F){return arguments.length?(N=_(F),V):N},V.fontWeight=function(F){return arguments.length?(B=_(F),V):B},V.rotate=function(F){return arguments.length?(R=_(F),V):R},V.text=function(F){return arguments.length?(k=_(F),V):k},V.spiral=function(F){return arguments.length?(D=r[F]||F,V):D},V.fontSize=function(F){return arguments.length?(E=_(F),V):E},V.padding=function(F){return arguments.length?(P=_(F),V):P},V.random=function(F){return arguments.length?(K=F,V):K},V.on=function(){var F=J.on.apply(J,arguments);return F===J?V:F},V};function s(j){return j.text}function i(){return"serif"}function o(){return"normal"}function c(j){return Math.sqrt(j.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(j,k,I,E){if(!k.sprite){var N=j.context,B=j.ratio;N.clearRect(0,0,(n<<5)/B,a/B);var R=0,P=0,D=0,L=I.length;for(--E;++E<L;){k=I[E],N.save(),N.font=k.style+" "+k.weight+" "+~~((k.size+1)/B)+"px "+k.font;const Be=N.measureText(k.text),ne=-Math.floor(Be.width/2);let _e=(Be.width+1)*B,De=k.size<<1;if(k.rotate){var M=Math.sin(k.rotate*t),J=Math.cos(k.rotate*t),H=_e*J,K=_e*M,V=De*J,G=De*M;_e=Math.max(Math.abs(H+G),Math.abs(H-G))+31>>5<<5,De=~~Math.max(Math.abs(K+V),Math.abs(K-V))}else _e=_e+31>>5<<5;if(De>D&&(D=De),R+_e>=n<<5&&(R=0,P+=D,D=0),P+De>=a)break;N.translate((R+(_e>>1))/B,(P+(De>>1))/B),k.rotate&&N.rotate(k.rotate*t),N.fillText(k.text,ne,0),k.padding&&(N.lineWidth=2*k.padding,N.strokeText(k.text,ne,0)),N.restore(),k.width=_e,k.height=De,k.xoff=R,k.yoff=P,k.x1=_e>>1,k.y1=De>>1,k.x0=-k.x1,k.y0=-k.y1,k.hasText=!0,R+=_e}for(var X=N.getImageData(0,0,(n<<5)/B,a/B).data,ee=[];--E>=0;)if(k=I[E],!!k.hasText){for(var F=k.width,z=F>>5,Y=k.y1-k.y0,te=0;te<Y*z;te++)ee[te]=0;if(R=k.xoff,R==null)return;P=k.yoff;for(var ae=0,le=-1,ie=0;ie<Y;ie++){for(var te=0;te<F;te++){var ce=z*ie+(te>>5),pe=X[(P+ie)*(n<<5)+(R+te)<<2]?1<<31-te%32:0;ee[ce]|=pe,ae|=pe}ae?le=ie:(k.y0++,Y--,ie--,P++)}k.y1=k.y0+le,k.sprite=ee.slice(0,(k.y1-k.y0)*z)}}}function h(j,k,I){I>>=5;for(var E=j.sprite,N=j.width>>5,B=j.x-(N<<4),R=B&127,P=32-R,D=j.y1-j.y0,L=(j.y+j.y0)*I+(B>>5),M,J=0;J<D;J++){M=0;for(var H=0;H<=N;H++)if((M<<P|(H<N?(M=E[J*N+H])>>>R:0))&k[L+H])return!0;L+=I}return!1}function p(j,k){var I=j[0],E=j[1];k.x+k.x0<I.x&&(I.x=k.x+k.x0),k.y+k.y0<I.y&&(I.y=k.y+k.y0),k.x+k.x1>E.x&&(E.x=k.x+k.x1),k.y+k.y1>E.y&&(E.y=k.y+k.y1)}function g(j,k){return j.x+j.x1>k[0].x&&j.x+j.x0<k[1].x&&j.y+j.y1>k[0].y&&j.y+j.y0<k[1].y}function x(j){var k=j[0]/j[1];return function(I){return[k*(I*=.1)*Math.cos(I),I*Math.sin(I)]}}function b(j){var k=4,I=k*j[0]/j[1],E=0,N=0;return function(B){var R=B<0?-1:1;switch(Math.sqrt(1+4*R*B)-R&3){case 0:E+=I;break;case 1:N+=k;break;case 2:E-=I;break;default:N-=k;break}return[E,N]}}function y(j){for(var k=[],I=-1;++I<j;)k[I]=0;return k}function w(){return document.createElement("canvas")}function _(j){return typeof j=="function"?j:function(){return j}}return pI}var xst=gst();const vst=Cl(xst),bst=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),yst=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),wst=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Est=e=>{const[t,r]=S.useState([]),[n,a]=S.useState(!0),[s,i]=S.useState(null),o=S.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return S.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),i(null)};if(o)c=lst(u);else{const d=e.email||e.id||"";c=cst(u,d)}return c}catch(c){i(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:s,canViewAllPlans:o}},Cst=({plan:e,onClose:t})=>l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[l.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),l.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:l.jsx(yst,{})})]}),l.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{className:"mt-2",children:[l.jsx("strong",{children:"Indicadores de Evaluacin:"})," ",e.indicadoresEvaluacion]}),l.jsx("div",{className:"mt-3",children:l.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),l.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>l.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexin Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?l.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>l.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[l.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafos"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),cW=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],_st=["1 Medio","2 Medio","3 Medio","4 Medio"],Nst=({words:e})=>{const t=S.useRef(null);return S.useEffect(()=>{if(!e.length||!t.current)return;const r=Tu(t.current);r.selectAll("*").remove();const n=vst().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>P4(dst)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),l.jsx("svg",{ref:t})},Sst=({planificaciones:e})=>{const[t,r]=S.useState("todos"),[n,a]=S.useState("todos"),s=S.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=S.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),o=S.useMemo(()=>{const d=cW.reduce((f,h)=>({...f,[h]:0}),{});return i.forEach(f=>{var h,p;return(p=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:p.forEach((g,x)=>{d[g]!==void 0&&(d[g]+=cW.length-x)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[i]),c=S.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(i.map(p=>{var g,x;return`${((g=p.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((x=p.reflexionUnidad)==null?void 0:x.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((p,g)=>(d.has(g)||(p[g]=(p[g]||0)+1),p),{});return Object.entries(h).map(([p,g])=>({text:p,value:g})).sort((p,g)=>g.value-p.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[l.jsx("option",{value:"todos",children:"Todos los Niveles"}),_st.map(d=>l.jsx("option",{value:d,children:d},d))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>l.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):l.jsx("ul",{className:"space-y-3",children:o.map((d,f)=>l.jsxs("li",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:l.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?l.jsx(Nst,{words:c}):l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},kst=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=Est(e),[s,i]=S.useState("seguimiento"),[o,c]=S.useState("1"),[u,d]=S.useState(null),[f,h]=S.useState(null),p=S.useMemo(()=>{const b={"1":"1 Medio","2":"2 Medio","3":"3 Medio","4":"4 Medio"};return t.filter(y=>y.nivel===b[o]&&y.tipo==="Unidad")},[t,o]),g=[{key:"1",label:"1 Medio"},{key:"2",label:"2 Medio"},{key:"3",label:"3 Medio"},{key:"4",label:"4 Medio"}];if(!(e!=null&&e.id))return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{children:"Usuario no autenticado."})});if(r)return l.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[l.jsx(wst,{}),l.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return l.jsx("div",{className:"text-center py-8",children:l.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const x=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>l.jsx("button",{onClick:()=>c(b.key),className:`${o===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:b.label},b.key))})}),p.length===0?l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):l.jsx("div",{className:"space-y-4",children:qi.map(b=>{const y=p.filter(_=>_.asignatura===b);if(y.length===0)return null;const w=u===b;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[l.jsxs("button",{onClick:()=>d(w?null:b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),l.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),l.jsx("span",{className:`transform transition-transform ${w?"rotate-180":""}`,children:l.jsx(bst,{})})]}),w&&l.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:l.jsx("ul",{className:"space-y-3",children:y.map(_=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>h(_),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:_.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",_.autor||"N/A"]})]})},_.id))})})]},b)})})]});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&l.jsx("div",{className:"text-sm text-amber-600 font-medium",children:" Vista administrativa"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),l.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Anlisis de Reflexiones"})]})}),s==="seguimiento"&&x(),s==="analisis"&&l.jsx(Sst,{planificaciones:t.filter(b=>b.tipo==="Unidad")})]}),f&&l.jsx(Cst,{plan:f,onClose:()=>h(null)})]})},Rk="analisisTaxonomicos",Bst=async()=>{try{const e=zt(Nt(xn,Rk),_r("uploadDate","desc"));return(await ga(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los anlisis:",e),new Error("No se pudieron cargar los anlisis taxonmicos")}},Tst=async e=>{if(!e)return[];try{const t=zt(Nt(xn,Rk),Yr("userId","==",e),_r("uploadDate","desc"));return(await ga(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener anlisis por usuario:",t),new Error("No se pudieron cargar los anlisis del usuario")}},jst=async e=>{try{return{id:(await Tn(Nt(xn,Rk),e)).id,...e}}catch(t){throw console.error("Error al crear anlisis:",t),new Error("No se pudo crear el anlisis taxonmico")}},Ist=async e=>{try{const t=dr(xn,Rk,e);await za(t)}catch(t){throw console.error("Error al eliminar anlisis:",t,"ID:",e),new Error("No se pudo eliminar el anlisis taxonmico")}},uW=["1 Medio","2 Medio","3 Medio","4 Medio"],Qf=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Px={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},Fst=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Ost=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(!1),[s,i]=S.useState(null),[o,c]=S.useState(null),[u,d]=S.useState(""),[f,h]=S.useState(!1),[p,g]=S.useState(null),[x,b]=S.useState(null),[y,w]=S.useState(""),[_,j]=S.useState(""),[k,I]=S.useState(""),[E,N]=S.useState(""),[B,R]=S.useState("resumen"),P=S.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const G=e.profile==="SUBDIRECCION"?await Bst():await Tst(e.id);r(G),i(null)}catch(G){console.error("Error al cargar anlisis:",G),i("No se pudieron cargar los anlisis.")}finally{a(!1)}}},[e]);S.useEffect(()=>{P()},[P]);const D=async G=>{var ee;const X=(ee=G.target.files)==null?void 0:ee[0];if(X){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(X.type)){i("Por favor, suba un archivo PDF o DOCX vlido.");return}g(X),d(X.name),i(null);const z=new FileReader;z.onloadend=()=>{var te;const Y=(te=z.result)==null?void 0:te.split(",")[1];if(!Y){i("No se pudo procesar el archivo. Puede que est vaco o corrupto."),b(null);return}b({mimeType:X.type,data:Y})},z.onerror=()=>i("Error al leer el archivo."),z.readAsDataURL(X)}},L=async()=>{if(!u.trim()||!x){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!_){i("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),i(null);const G=`
            Eres un experto en pedagoga y en la Taxonoma de Bloom. Analiza el siguiente documento de una evaluacin educativa.
            Tu tarea es:
            1. Identificar cada pregunta o tem de evaluacin en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonoma de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser vlido.
        `,X={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:Qf}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:Qf.reduce((ee,F)=>({...ee,[F]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{c1("Anlisis Taxonmico",e);const ee="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new cs(ee).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{responseMimeType:"application/json",responseSchema:X}}),Y={inlineData:{mimeType:x.mimeType,data:x.data}},ae=(await z.generateContent([G,Y])).response.text();let le;try{le=JSON.parse(ae)}catch(pe){throw console.error("Error al parsear JSON:",pe),console.error("Respuesta recibida (no es JSON vlido):",ae),new Error("La respuesta de la IA no tuvo un formato vlido. Intente de nuevo.")}const ie={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:le.analysisResults,summary:le.summary,nivel:y,asignatura:_},ce=await jst(ie);await P(),c(ce),d(""),g(null),b(null),w(""),j("")}catch(ee){console.error(ee);const F=ee instanceof Error?ee.message:"Hubo un error al analizar el documento.";i(F)}finally{h(!1)}},M=async G=>{if(window.confirm("Est seguro de eliminar este anlisis?"))try{await Ist(G),await P(),(o==null?void 0:o.id)===G&&c(null)}catch{i("No se pudo eliminar el anlisis.")}},J=S.useMemo(()=>t.filter(G=>{const X=k?G.nivel===k:!0,ee=E?G.asignatura===E:!0;return X&&ee}),[t,k,E]),H=S.useMemo(()=>{const G={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};J.forEach(ee=>{Qf.forEach(F=>{var Y;const z=((Y=ee.summary)==null?void 0:Y[F])||0;G[F]+=z})});const X=Object.values(G).reduce((ee,F)=>ee+F,0);return{acc:G,total:X}},[J]),K=S.useMemo(()=>{const G=new Map;J.forEach(ee=>{const F=ee.asignatura||"Sin asignatura";G.has(F)||G.set(F,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const z=G.get(F);Qf.forEach(Y=>{var te;z[Y]+=((te=ee.summary)==null?void 0:te[Y])||0})});const X=Array.from(G.entries()).map(([ee,F])=>({asignatura:ee,counts:F,total:Object.values(F).reduce((z,Y)=>z+Y,0)}));return X.sort((ee,F)=>F.total-ee.total),X},[J]),V=S.useMemo(()=>o?Object.values(o.summary).reduce((G,X)=>G+(X||0),0):0,[o]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Anlisis Taxonmico de Evaluaciones"}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),l.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:l.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:D,accept:".pdf,.doc,.docx"}),l.jsx("span",{children:"Cargue un archivo"})]}),l.jsx("p",{className:"pl-1",children:"o arrstrelo aqu"})]}),l.jsx("p",{className:"text-xs text-slate-500",children:p?p.name:"PDF, DOCX hasta 10MB"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:y,onChange:G=>w(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),uW.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:_,onChange:G=>j(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),qi.map(G=>l.jsx("option",{value:G,children:G},G))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),l.jsx("input",{type:"text",id:"documentName",value:u,onChange:G=>d(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("button",{onClick:L,disabled:f||!x,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?l.jsx(Fst,{}):"Analizar con IA"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Anlisis"}),n?l.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay anlisis guardados."}):l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(G=>l.jsxs("button",{onClick:()=>c(G),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===G.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[l.jsx("p",{className:"font-semibold truncate",children:G.documentName}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(G.uploadDate).toLocaleString("es-CL")}),(G.nivel||G.asignatura)&&l.jsxs("p",{className:"text-xs text-slate-500",children:[G.nivel||"Nivel s/i","  ",G.asignatura||"Asignatura s/i"]})]},G.id))})]})]}),l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),l.jsxs("select",{value:k,onChange:G=>I(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos"}),uW.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),l.jsxs("select",{value:E,onChange:G=>N(G.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas"}),qi.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsx("button",{type:"button",onClick:()=>{I(""),N("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>R("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${B==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),l.jsx("button",{onClick:()=>R("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${B==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparacin por Asignatura"})]})}),B==="resumen"?l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[J.length," anlisis considerados"]})]}),l.jsx("div",{className:"space-y-3",children:Qf.map(G=>{const X=H.acc[G],ee=H.total>0?X/H.total*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:G}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[X," (",ee.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${Px[G]} h-4 rounded-full`,style:{width:`${ee}%`}})})]},G)})}),l.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:Qf.map(G=>l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[l.jsx("span",{className:"text-sm",children:G}),l.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${Px[G]}`,children:H.acc[G]})]},G))})]}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparacin por Asignatura"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[K.length," asignaturas comparadas"]})]}),K.length===0?l.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):l.jsx("div",{className:"space-y-5",children:K.map(G=>{const X=G.total||1;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:G.asignatura}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[G.total," tems"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:Qf.map(ee=>{const F=G.counts[ee]||0,z=F/X*100;return l.jsx("div",{className:`${Px[ee]} h-5`,style:{width:`${z}%`},title:`${ee}: ${F} (${z.toFixed(0)}%)`},ee)})}),l.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Qf.map(ee=>l.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[l.jsx("span",{className:`inline-block w-3 h-3 rounded ${Px[ee]}`}),l.jsx("span",{children:ee})]},ee))})]},G.asignatura)})})]})]}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL"),(o.nivel||o.asignatura)&&l.jsxs(l.Fragment,{children:[" "," ",o.nivel||"Nivel s/i","  ",o.asignatura||"Asignatura s/i"]})]})]}),l.jsx("button",{onClick:()=>M(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",V," preguntas)"]}),l.jsx("div",{className:"space-y-3",children:Qf.map(G=>{const X=o.summary[G]||0,ee=V>0?X/V*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:G}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[X," (",ee.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${Px[G]} h-4 rounded-full`,style:{width:`${ee}%`}})})]},G)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Anlisis"}),l.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / tem"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((G,X)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:G.question}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${Px[G.habilidadBloom]}`,children:G.habilidadBloom})})]},X))})]})})]})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Anlisis"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo anlisis o seleccione uno del historial para ver los resultados aqu."})]})})]})]})]})},xS="empresas_practicas",Dst="usuarios",iM="rutas_supervision",oM=e=>{const t=e.data();return{id:e.id,...t}};async function Pst(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificacin:",n),null}}const Rst=e=>{const t=zt(Nt(ft,xS),_r("nombre","asc"));return mr(t,r=>{const n=r.docs.map(a=>oM(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},Lst=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await Pst(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=dr(ft,xS,n);return await Ji(s,a,{merge:!0}),n}else return(await Tn(Nt(ft,xS),{...r,createdAt:Ni()})).id},Mst=async e=>{const t=dr(ft,xS,e);await za(t)},Ust=e=>{const t=zt(Nt(ft,Dst),Yr("profile","==","PROFESORADO"),_r("nombreCompleto","asc"));return mr(t,r=>{const n=r.docs.map(a=>oM(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},Qst=async e=>(await Tn(Nt(ft,iM),{...e,createdAt:Ni()})).id,Hst=e=>{const t=zt(Nt(ft,iM),_r("createdAt","desc"));return mr(t,r=>{const n=r.docs.map(a=>oM(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},Vst=async e=>{const t=dr(ft,iM,e);await za(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Zp=function(){return Zp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Zp.apply(this,arguments)};function zst(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{c(n.next(u))}catch(d){s(d)}}function o(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(i,o)}c((n=n.apply(e,[])).next())})}function $st(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Pr(){return Pr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pr.apply(this,arguments)}function eg(e){return eg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eg(e)}function uue(e){var t=function(r,n){if(eg(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(eg(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return eg(t)==="symbol"?t:String(t)}function uv(e,t,r){return(t=uue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dW(Object(r),!0).forEach(function(n){uv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uue(n.key),n)}}function _O(e,t){return _O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},_O(e,t)}function vS(e){return vS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vS(e)}function Gst(e,t){if(t&&(eg(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function Kst(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=vS(e);if(t){var a=vS(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Gst(this,r)}}function NO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function due(e,t){if(e){if(typeof e=="string")return NO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?NO(e,t):void 0}}function lM(e){return function(t){if(Array.isArray(t))return NO(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||due(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var qst=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),bu="-ms-",fW="-moz-",Jn="-webkit-",cM="decl",Aue="@keyframes",Wst=Math.abs,Lk=String.fromCharCode,Xst=Object.assign;function fue(e){return e.trim()}function aa(e,t,r){return e.replace(t,r)}function SO(e,t){return e.indexOf(t)}function fo(e,t){return 0|e.charCodeAt(t)}function f2(e,t,r){return e.slice(t,r)}function IA(e){return e.length}function uM(e){return e.length}function d_(e,t){return t.push(e),e}var Mk=1,w1=1,hue=0,nc=0,ui=0,nb="";function Uk(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:Mk,column:w1,length:i,return:""}}function Ay(e,t){return Xst(Uk("",null,null,"",null,null,0),e,{length:-e.length},t)}function Mc(){return ui=nc<hue?fo(nb,nc++):0,w1++,ui===10&&(w1=1,Mk++),ui}function JA(){return fo(nb,nc)}function A5(){return nc}function dE(e,t){return f2(nb,e,t)}function h2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function mue(e){return Mk=w1=1,hue=IA(nb=e),nc=0,[]}function pue(e){return nb="",e}function f5(e){return fue(dE(nc-1,kO(e===91?e+2:e===40?e+1:e)))}function Yst(e){for(;(ui=JA())&&ui<33;)Mc();return h2(e)>2||h2(ui)>3?"":" "}function Jst(e,t){for(;--t&&Mc()&&!(ui<48||ui>102||ui>57&&ui<65||ui>70&&ui<97););return dE(e,A5()+(t<6&&JA()==32&&Mc()==32))}function kO(e){for(;Mc();)switch(ui){case e:return nc;case 34:case 39:e!==34&&e!==39&&kO(ui);break;case 40:e===41&&kO(e);break;case 92:Mc()}return nc}function Zst(e,t){for(;Mc()&&e+ui!==57&&(e+ui!==84||JA()!==47););return"/*"+dE(t,nc-1)+"*"+Lk(e===47?e:Mc())}function eit(e){for(;!h2(JA());)Mc();return dE(e,nc)}function hW(e){return pue(h5("",null,null,null,[""],e=mue(e),0,[0],e))}function h5(e,t,r,n,a,s,i,o,c){for(var u=0,d=0,f=i,h=0,p=0,g=0,x=1,b=1,y=1,w=0,_="",j=a,k=s,I=n,E=_;b;)switch(g=w,w=Mc()){case 40:if(g!=108&&fo(E,f-1)==58){SO(E+=aa(f5(w),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=f5(w);break;case 9:case 10:case 13:case 32:E+=Yst(g);break;case 92:E+=Jst(A5()-1,7);continue;case 47:switch(JA()){case 42:case 47:d_(tit(Zst(Mc(),A5()),t,r),c);break;default:E+="/"}break;case 123*x:o[u++]=IA(E)*y;case 125*x:case 59:case 0:switch(w){case 0:case 125:b=0;case 59+d:p>0&&IA(E)-f&&d_(p>32?pW(E+";",n,r,f-1):pW(aa(E," ","")+";",n,r,f-2),c);break;case 59:E+=";";default:if(d_(I=mW(E,t,r,u,d,a,o,_,j=[],k=[],f),s),w===123)if(d===0)h5(E,t,I,I,j,s,f,o,k);else switch(h===99&&fo(E,3)===110?100:h){case 100:case 109:case 115:h5(e,I,I,n&&d_(mW(e,I,I,0,0,a,o,_,a,j=[],f),k),a,k,f,o,n?j:k);break;default:h5(E,I,I,I,[""],k,0,o,k)}}u=d=p=0,x=y=1,_=E="",f=i;break;case 58:f=1+IA(E),p=g;default:if(x<1){if(w==123)--x;else if(w==125&&x++==0&&(ui=nc>0?fo(nb,--nc):0,w1--,ui===10&&(w1=1,Mk--),ui==125))continue}switch(E+=Lk(w),w*x){case 38:y=d>0?1:(E+="\f",-1);break;case 44:o[u++]=(IA(E)-1)*y,y=1;break;case 64:JA()===45&&(E+=f5(Mc())),h=JA(),d=f=IA(_=E+=eit(A5())),w++;break;case 45:g===45&&IA(E)==2&&(x=0)}}return s}function mW(e,t,r,n,a,s,i,o,c,u,d){for(var f=a-1,h=a===0?s:[""],p=uM(h),g=0,x=0,b=0;g<n;++g)for(var y=0,w=f2(e,f+1,f=Wst(x=i[g])),_=e;y<p;++y)(_=fue(x>0?h[y]+" "+w:aa(w,/&\f/g,h[y])))&&(c[b++]=_);return Uk(e,t,r,a===0?"rule":o,c,u,d)}function tit(e,t,r){return Uk(e,t,r,"comm",Lk(ui),f2(e,2,-2),0)}function pW(e,t,r,n){return Uk(e,t,r,cM,f2(e,0,n),f2(e,n+1,-1),n)}function tg(e,t){for(var r="",n=uM(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function gW(e,t,r,n){switch(e.type){case"@import":case cM:return e.return=e.return||e.value;case"comm":return"";case Aue:return e.return=e.value+"{"+tg(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return IA(r=tg(e.children,n))?e.return=e.value+"{"+r+"}":""}function xW(e){var t=uM(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function rit(e){return function(t){t.root||(t=t.return)&&e(t)}}function gue(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var nit=function(e,t,r){for(var n=0,a=0;n=a,a=JA(),n===38&&a===12&&(t[r]=1),!h2(a);)Mc();return dE(e,nc)},ait=function(e,t){return pue(function(r,n){var a=-1,s=44;do switch(h2(s)){case 0:s===38&&JA()===12&&(n[a]=1),r[a]+=nit(nc-1,n,a);break;case 2:r[a]+=f5(s);break;case 4:if(s===44){r[++a]=JA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=Lk(s)}while(s=Mc());return r}(mue(e),t))},vW=new WeakMap,sit=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||vW.get(r))&&!n){vW.set(e,!0);for(var a=[],s=ait(t,a),i=r.props,o=0,c=0;o<s.length;o++)for(var u=0;u<i.length;u++,c++)e.props[c]=a[o]?s[o].replace(/&\f/g,i[u]):i[u]+" "+s[o]}}},iit=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function xue(e,t){switch(function(r,n){return 45^fo(r,0)?(((n<<2^fo(r,0))<<2^fo(r,1))<<2^fo(r,2))<<2^fo(r,3):0}(e,t)){case 5103:return Jn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Jn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Jn+e+fW+e+bu+e+e;case 6828:case 4268:return Jn+e+bu+e+e;case 6165:return Jn+e+bu+"flex-"+e+e;case 5187:return Jn+e+aa(e,/(\w+).+(:[^]+)/,Jn+"box-$1$2-ms-flex-$1$2")+e;case 5443:return Jn+e+bu+"flex-item-"+aa(e,/flex-|-self/,"")+e;case 4675:return Jn+e+bu+"flex-line-pack"+aa(e,/align-content|flex-|-self/,"")+e;case 5548:return Jn+e+bu+aa(e,"shrink","negative")+e;case 5292:return Jn+e+bu+aa(e,"basis","preferred-size")+e;case 6060:return Jn+"box-"+aa(e,"-grow","")+Jn+e+bu+aa(e,"grow","positive")+e;case 4554:return Jn+aa(e,/([^-])(transform)/g,"$1"+Jn+"$2")+e;case 6187:return aa(aa(aa(e,/(zoom-|grab)/,Jn+"$1"),/(image-set)/,Jn+"$1"),e,"")+e;case 5495:case 3959:return aa(e,/(image-set\([^]*)/,Jn+"$1$`$1");case 4968:return aa(aa(e,/(.+:)(flex-)?(.*)/,Jn+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+Jn+e+e;case 4095:case 3583:case 4068:case 2532:return aa(e,/(.+)-inline(.+)/,Jn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(IA(e)-1-t>6)switch(fo(e,t+1)){case 109:if(fo(e,t+4)!==45)break;case 102:return aa(e,/(.+:)(.+)-([^]+)/,"$1"+Jn+"$2-$3$1"+fW+(fo(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~SO(e,"stretch")?xue(aa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(fo(e,t+1)!==115)break;case 6444:switch(fo(e,IA(e)-3-(~SO(e,"!important")&&10))){case 107:return aa(e,":",":"+Jn)+e;case 101:return aa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Jn+(fo(e,14)===45?"inline-":"")+"box$3$1"+Jn+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(fo(e,t+11)){case 114:return Jn+e+bu+aa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Jn+e+bu+aa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Jn+e+bu+aa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Jn+e+bu+e+e}return e}var bW,A_,m5=typeof document<"u",oit=m5?void 0:(bW=function(){return gue(function(){var e={};return function(t){return e[t]}})},A_=new WeakMap,function(e){if(A_.has(e))return A_.get(e);var t=bW(e);return A_.set(e,t),t}),lit=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case cM:e.return=xue(e.value,e.length);break;case Aue:return tg([Ay(e,{value:aa(e.value,"@","@"+Jn)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return tg([Ay(e,{props:[aa(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return tg([Ay(e,{props:[aa(a,/:(plac\w+)/,":"+Jn+"input-$1")]}),Ay(e,{props:[aa(a,/:(plac\w+)/,":-moz-$1")]}),Ay(e,{props:[aa(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],vue=function(e){var t=e.key;if(m5&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||lit,a,s,i={},o=[];m5&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var w=y.getAttribute("data-emotion").split(" "),_=1;_<w.length;_++)i[w[_]]=!0;o.push(y)}));var c=[sit,iit];if(m5){var u,d=[gW,rit(function(y){u.insert(y)})],f=xW(c.concat(n,d));s=function(y,w,_,j){u=_,tg(hW(y?y+"{"+w.styles+"}":w.styles),f),j&&(b.inserted[w.name]=!0)}}else{var h=[gW],p=xW(c.concat(n,h)),g=oit(n)(t),x=function(y,w){var _=w.name;return g[_]===void 0&&(g[_]=tg(hW(y?y+"{"+w.styles+"}":w.styles),p)),g[_]};s=function(y,w,_,j){var k=w.name,I=x(y,w);return b.compat===void 0?(j&&(b.inserted[k]=!0),I):j?void(b.inserted[k]=I):I}}var b={key:t,sheet:new qst({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return b.sheet.hydrate(o),b};function ia(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var to=typeof Symbol=="function"&&Symbol.for,BO=to?Symbol.for("react.element"):60103,TO=to?Symbol.for("react.portal"):60106,p5=to?Symbol.for("react.fragment"):60107,g5=to?Symbol.for("react.strict_mode"):60108,x5=to?Symbol.for("react.profiler"):60114,v5=to?Symbol.for("react.provider"):60109,b5=to?Symbol.for("react.context"):60110,jO=to?Symbol.for("react.async_mode"):60111,bS=to?Symbol.for("react.concurrent_mode"):60111,y5=to?Symbol.for("react.forward_ref"):60112,w5=to?Symbol.for("react.suspense"):60113,cit=to?Symbol.for("react.suspense_list"):60120,E5=to?Symbol.for("react.memo"):60115,C5=to?Symbol.for("react.lazy"):60116,uit=to?Symbol.for("react.block"):60121,dit=to?Symbol.for("react.fundamental"):60117,Ait=to?Symbol.for("react.responder"):60118,fit=to?Symbol.for("react.scope"):60119;function _c(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case BO:switch(e=e.type){case jO:case bS:case p5:case x5:case g5:case w5:return e;default:switch(e=e&&e.$$typeof){case b5:case y5:case C5:case E5:case v5:return e;default:return t}}case TO:return t}}}function yW(e){return _c(e)===bS}var hit={AsyncMode:jO,ConcurrentMode:bS,ContextConsumer:b5,ContextProvider:v5,Element:BO,ForwardRef:y5,Fragment:p5,Lazy:C5,Memo:E5,Portal:TO,Profiler:x5,StrictMode:g5,Suspense:w5,isAsyncMode:function(e){return yW(e)||_c(e)===jO},isConcurrentMode:yW,isContextConsumer:function(e){return _c(e)===b5},isContextProvider:function(e){return _c(e)===v5},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===BO},isForwardRef:function(e){return _c(e)===y5},isFragment:function(e){return _c(e)===p5},isLazy:function(e){return _c(e)===C5},isMemo:function(e){return _c(e)===E5},isPortal:function(e){return _c(e)===TO},isProfiler:function(e){return _c(e)===x5},isStrictMode:function(e){return _c(e)===g5},isSuspense:function(e){return _c(e)===w5},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===p5||e===bS||e===x5||e===g5||e===w5||e===cit||typeof e=="object"&&e!==null&&(e.$$typeof===C5||e.$$typeof===E5||e.$$typeof===v5||e.$$typeof===b5||e.$$typeof===y5||e.$$typeof===dit||e.$$typeof===Ait||e.$$typeof===fit||e.$$typeof===uit)},typeOf:_c};ia(function(e,t){});var wW=ia(function(e){e.exports=hit}),EW={};EW[wW.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},EW[wW.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var IO=typeof document<"u";function bue(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var dM=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||IO===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},AM=function(e,t,r){dM(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);IO||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!IO&&a.length!==0)return a}},mit={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},pit=/[A-Z]|^ms/g,git=/_EMO_([^_]+?)_([^]*?)_EMO_/g,yue=function(e){return e.charCodeAt(1)===45},CW=function(e){return e!=null&&typeof e!="boolean"},gI=gue(function(e){return yue(e)?e:e.replace(pit,"-$&").toLowerCase()}),_W=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(git,function(r,n,a){return FA={name:n,styles:a,next:FA},n})}return mit[e]===1||yue(e)||typeof t!="number"||t===0?t:t+"px"};function fw(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return FA={name:r.name,styles:r.styles,next:FA},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)FA={name:n.name,styles:n.styles,next:FA},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=fw(c,u,d[h])+";";else for(var p in d){var g=d[p];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=p+"{"+u[g]+"}":CW(g)&&(f+=gI(p)+":"+_W(p,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var x=fw(c,u,g);switch(p){case"animation":case"animationName":f+=gI(p)+":"+x+";";break;default:f+=p+"{"+x+"}"}}else for(var b=0;b<g.length;b++)CW(g[b])&&(f+=gI(p)+":"+_W(p,g[b])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=FA,i=r(e);return FA=s,fw(e,t,i)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var FA,NW=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Qk=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";FA=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=fw(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=fw(r,t,e[i]),n&&(a+=s[i]);NW.lastIndex=0;for(var o,c="";(o=NW.exec(a))!==null;)c+="-"+o[1];var u=function(d){for(var f,h=0,p=0,g=d.length;g>=4;++p,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(p+2))<<16;case 2:h^=(255&d.charCodeAt(p+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(p)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:FA}},xit=typeof document<"u",vit=function(e){return e()},wue=!!S.useInsertionEffect&&S.useInsertionEffect,Eue=xit&&wue||vit,SW=wue||S.useLayoutEffect,Dv=typeof document<"u",fM={}.hasOwnProperty,yS=S.createContext(typeof HTMLElement<"u"?vue({key:"css"}):null);yS.Provider;var Hk=function(e){return S.forwardRef(function(t,r){var n=S.useContext(yS);return e(t,n,r)})};Dv||(Hk=function(e){return function(t){var r=S.useContext(yS);return r===null?(r=vue({key:"css"}),S.createElement(yS.Provider,{value:r},e(t,r))):e(t,r)}});var hM=S.createContext({}),FO="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",bit=function(e,t){var r={};for(var n in t)fM.call(t,n)&&(r[n]=t[n]);return r[FO]=e,r},yit=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;dM(t,r,n);var a=Eue(function(){return AM(t,r,n)});if(!Dv&&a!==void 0){for(var s,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return S.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},wit=Hk(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[FO],s=[n],i="";typeof e.className=="string"?i=bue(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=Qk(s,void 0,S.useContext(hM));i+=t.key+"-"+o.name;var c={};for(var u in e)!fM.call(e,u)||u==="css"||u===FO||(c[u]=e[u]);return c.ref=r,c.className=i,S.createElement(S.Fragment,null,S.createElement(yit,{cache:t,serialized:o,isStringTag:typeof a=="string"}),S.createElement(a,c))});ia(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Tr=function(e,t){var r=arguments;if(t==null||!fM.call(t,"css"))return S.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=wit,a[1]=bit(e,t);for(var s=2;s<n;s++)a[s]=r[s];return S.createElement.apply(null,a)};Hk(function(e,t){var r=e.styles,n=Qk([r],void 0,S.useContext(hM));if(!Dv){for(var a,s=n.name,i=n.styles,o=n.next;o!==void 0;)s+=" "+o.name,i+=o.styles,o=o.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,c);return c?null:S.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=S.useRef();return SW(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(p=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,p],function(){h.flush()}},[t]),SW(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&AM(t,n.next,!0),h.tags.length){var p=h.tags[h.tags.length-1].nextElementSibling;h.before=p,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function mM(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Qk(t)}var Eit=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function Cit(e,t,r){var n=[],a=bue(e,n,r);return n.length<2?r:a+t(n)}var _it=function(e){var t,r=e.cache,n=e.serializedArr,a=Eue(function(){for(var s="",i=0;i<n.length;i++){var o=AM(r,n[i],!1);Dv||o===void 0||(s+=o)}if(!Dv)return s});return Dv||a.length===0?null:S.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};Hk(function(e,t){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=Qk(o,t.registered);return r.push(u),dM(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return Cit(t.registered,n,Eit(o))},theme:S.useContext(hM)},s=e.children(a);return S.createElement(S.Fragment,null,S.createElement(_it,{cache:t,serializedArr:r}),s)});function Qi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,o,c,u=[],d=!0,f=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=o.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,i=h}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw i}}return u}}(e,t)||due(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function PA(e,t){if(e==null)return{};var r,n,a=function(i,o){if(i==null)return{};var c,u,d={},f=Object.keys(i);for(u=0;u<f.length;u++)c=f[u],o.indexOf(c)>=0||(d[c]=i[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uh(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Cue(e){return uh(e).getComputedStyle(e)}const f_=Math.round;function _ue(e){return Sue(e)?(e.nodeName||"").toLowerCase():""}let h_;function Nue(e){return e instanceof uh(e).HTMLElement}function _5(e){return e instanceof uh(e).Element}function Sue(e){return e instanceof uh(e).Node}function kW(e){return typeof ShadowRoot>"u"?!1:e instanceof uh(e).ShadowRoot||e instanceof ShadowRoot}function kue(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Cue(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Nit(){return/^((?!chrome|android).)*safari/i.test(function(){if(h_)return h_;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(h_=e.brands.map(t=>t.brand+"/"+t.version).join(" "),h_):navigator.userAgent}())}function Bue(e){return _5(e)?e:e.contextElement}const Tue={x:1,y:1};function BW(e){const t=Bue(e);if(!Nue(t))return Tue;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=Cue(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,p=c.offsetHeight,g=f_(d)!==h||f_(f)!==p;return g&&(d=h,f=p),{width:d,height:f,fallback:g}}(t);let i=(s?f_(r.width):r.width)/n,o=(s?f_(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function TW(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=Bue(e);let c=Tue;t&&(c=BW(e));const u=o?uh(o):window,d=Nit()&&r;let f=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,h=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,p=i.width/c.x,g=i.height/c.y;if(o){const x=uh(o),b=n;let y=x.frameElement;for(;y&&n&&b!==x;){const w=BW(y),_=y.getBoundingClientRect(),j=getComputedStyle(y);_.x+=(y.clientLeft+parseFloat(j.paddingLeft))*w.x,_.y+=(y.clientTop+parseFloat(j.paddingTop))*w.y,f*=w.x,h*=w.y,p*=w.x,g*=w.y,f+=_.x,h+=_.y,y=uh(y).frameElement}}return{width:p,height:g,top:h,right:f+p,bottom:h+g,left:f,x:f,y:h}}function Sit(e){if(_ue(e)==="html")return e;const t=e.assignedSlot||e.parentNode||kW(e)&&e.host||function(r){return((Sue(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return kW(t)?t.host:t}function jue(e){const t=Sit(e);return function(r){return["html","body","#document"].includes(_ue(r))}(t)?t.ownerDocument.body:Nue(t)&&kue(t)?t:jue(t)}function N5(e,t){var r;t===void 0&&(t=[]);const n=jue(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=uh(n);return a?t.concat(s,s.visualViewport||[],kue(n)?n:[]):t.concat(n,N5(n))}var OO=typeof document<"u"?S.useLayoutEffect:S.useEffect,kit=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],wS=function(){};function Bit(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Tit(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(Bit(e,i)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var jW=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):eg(e)==="object"&&e!==null?[e]:[];var t},IW=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,wr({},PA(e,kit))},Es=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function Vk(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Iue(e){return Vk(e)?window.pageYOffset:e.scrollTop}function ES(e,t){Vk(e)?window.scrollTo(0,t):e.scrollTop=t}function jit(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function m_(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:wS,a=Iue(e),s=t-a,i=10,o=0;function c(){var u=jit(o+=i,a,s,r);ES(e,u),o<r?window.requestAnimationFrame(c):n(e)}c()}function FW(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?ES(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&ES(e,Math.max(t.offsetTop-a,0))}function OW(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var Fue=!1,Iit={get passive(){return Fue=!0}},p_=typeof window<"u"?window:{};p_.addEventListener&&p_.removeEventListener&&(p_.addEventListener("p",wS,Iit),p_.removeEventListener("p",wS,!1));var Fit=Fue;function Oit(e){return e!=null}function g_(e,t,r){return e?t:r}var Dit=["children","innerProps"],Pit=["children","innerProps"];function Rit(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,c=function(J){var H=getComputedStyle(J),K=H.position==="absolute",V=/(auto|scroll)/;if(H.position==="fixed")return document.documentElement;for(var G=J;G=G.parentElement;)if(H=getComputedStyle(G),(!K||H.position!=="static")&&V.test(H.overflow+H.overflowY+H.overflowX))return G;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),p=h.bottom,g=h.height,x=h.top,b=r.offsetParent.getBoundingClientRect().top,y=i||Vk(d=c)?window.innerHeight:d.clientHeight,w=Iue(c),_=parseInt(getComputedStyle(r).marginBottom,10),j=parseInt(getComputedStyle(r).marginTop,10),k=b-j,I=y-x,E=k+w,N=f-w-x,B=p-y+w+_,R=w+x-j,P=160;switch(a){case"auto":case"bottom":if(I>=g)return{placement:"bottom",maxHeight:t};if(N>=g&&!i)return s&&m_(c,B,P),{placement:"bottom",maxHeight:t};if(!i&&N>=n||i&&I>=n)return s&&m_(c,B,P),{placement:"bottom",maxHeight:i?I-_:N-_};if(a==="auto"||i){var D=t,L=i?k:E;return L>=n&&(D=Math.min(L-_-o,t)),{placement:"top",maxHeight:D}}if(a==="bottom")return s&&ES(c,B),{placement:"bottom",maxHeight:t};break;case"top":if(k>=g)return{placement:"top",maxHeight:t};if(E>=g&&!i)return s&&m_(c,R,P),{placement:"top",maxHeight:t};if(!i&&E>=n||i&&k>=n){var M=t;return(!i&&E>=n||i&&k>=n)&&(M=i?k-j:E-j),s&&m_(c,R,P),{placement:"top",maxHeight:M}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var DW,Oue=function(e){return e==="auto"?"bottom":e},Due=S.createContext(null),Lit=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,o=e.theme,c=(S.useContext(Due)||{}).setPortalPlacement,u=S.useRef(null),d=Qi(S.useState(n),2),f=d[0],h=d[1],p=Qi(S.useState(null),2),g=p[0],x=p[1],b=o.spacing.controlHeight;return OO(function(){var y=u.current;if(y){var w=s==="fixed",_=Rit({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!w,isFixedPosition:w,controlHeight:b});h(_.maxHeight),x(_.placement),c==null||c(_.placement)}},[n,a,s,i,r,c,b]),t({ref:u,placerProps:wr(wr({},e),{},{placement:g||Oue(a),maxHeight:f})})},Mit=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Tr("div",Pr({},Es(e,"menu",{menu:!0}),{ref:r},n),t)},Pue=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return wr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},Uit=Pue,Qit=Pue,Hit=["size"],Vit=["innerProps","isRtl","size"],xI,vI,zit={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Rue=function(e){var t=e.size,r=PA(e,Hit);return Tr("svg",Pr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:zit},r))},bI=function(e){return Tr(Rue,Pr({size:20},e),Tr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},PW=function(e){return Tr(Rue,Pr({size:20},e),Tr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},Lue=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return wr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},$it=Lue,Git=Lue,Kit=function(){var e=mM.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(DW||(xI=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],vI||(vI=xI.slice(0)),DW=Object.freeze(Object.defineProperties(xI,{raw:{value:Object.freeze(vI)}})))),yI=function(e){var t=e.delay,r=e.offset;return Tr("span",{css:mM({animation:"".concat(Kit," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},qit=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return Tr("div",Pr({ref:a},Es(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},Wit=["data"],Xit=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,o=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Tr("div",Pr({},Es(e,"group",{group:!0}),o),Tr(s,Pr({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Tr("div",null,t))},Yit=["innerRef","isDisabled","isHidden","inputClassName"],Mue={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},Jit={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":wr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},Mue)},Zit=function(e){return wr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},Mue)},RW=function(e){var t=e.children,r=e.innerProps;return Tr("div",r,t)},eot=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,o=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Tr(c,{data:n,innerProps:wr(wr({},Es(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:o},Tr(u,{data:n,innerProps:wr({},Es(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),Tr(d,{data:n,innerProps:wr(wr({},Es(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},tot={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Tr("div",Pr({},Es(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Tr(bI,null))},Control:qit,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Tr("div",Pr({},Es(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Tr(PW,null))},DownChevron:PW,CrossIcon:bI,Group:Xit,GroupHeading:function(e){var t=IW(e);t.data;var r=PA(t,Wit);return Tr("div",Pr({},Es(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Tr("div",Pr({},Es(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Tr("span",Pr({},t,Es(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=IW(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,o=n.inputClassName,c=PA(n,Yit);return Tr("div",Pr({},Es(e,"input",{"input-container":!0}),{"data-value":r||""}),Tr("input",Pr({className:t({input:!0},o),ref:a,style:Zit(i),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=PA(e,Vit);return Tr("div",Pr({},Es(wr(wr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Tr(yI,{delay:0,offset:r}),Tr(yI,{delay:160,offset:!0}),Tr(yI,{delay:320,offset:!r}))},Menu:Mit,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Tr("div",Pr({},Es(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,o=S.useRef(null),c=S.useRef(null),u=Qi(S.useState(Oue(s)),2),d=u[0],f=u[1],h=S.useMemo(function(){return{setPortalPlacement:f}},[]),p=Qi(S.useState(null),2),g=p[0],x=p[1],b=S.useCallback(function(){if(n){var j=function(E){var N=E.getBoundingClientRect();return{bottom:N.bottom,height:N.height,left:N.left,right:N.right,top:N.top,width:N.width}}(n),k=i==="fixed"?0:window.pageYOffset,I=j[d]+k;I===(g==null?void 0:g.offset)&&j.left===(g==null?void 0:g.rect.left)&&j.width===(g==null?void 0:g.rect.width)||x({offset:I,rect:j})}},[n,i,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);OO(function(){b()},[b]);var y=S.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&o.current&&(c.current=function(j,k,I,E){E===void 0&&(E={});const{ancestorScroll:N=!0,ancestorResize:B=!0,elementResize:R=!0,animationFrame:P=!1}=E,D=N&&!P,L=D||B?[..._5(j)?N5(j):j.contextElement?N5(j.contextElement):[],...N5(k)]:[];L.forEach(K=>{D&&K.addEventListener("scroll",I,{passive:!0}),B&&K.addEventListener("resize",I)});let M,J=null;if(R){let K=!0;J=new ResizeObserver(()=>{K||I(),K=!1}),_5(j)&&!P&&J.observe(j),_5(j)||!j.contextElement||P||J.observe(j.contextElement),J.observe(k)}let H=P?TW(j):null;return P&&function K(){const V=TW(j);!H||V.x===H.x&&V.y===H.y&&V.width===H.width&&V.height===H.height||I(),H=V,M=requestAnimationFrame(K)}(),I(),()=>{var K;L.forEach(V=>{D&&V.removeEventListener("scroll",I),B&&V.removeEventListener("resize",I)}),(K=J)==null||K.disconnect(),J=null,P&&cancelAnimationFrame(M)}}(n,o.current,b,{elementResize:"ResizeObserver"in window}))},[n,b]);OO(function(){y()},[y]);var w=S.useCallback(function(j){o.current=j,y()},[y]);if(!t&&i!=="fixed"||!g)return null;var _=Tr("div",Pr({ref:w},Es(wr(wr({},e),{},{offset:g.offset,position:i,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Tr(Due.Provider,{value:h},t?FP.createPortal(_,t):_)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=PA(e,Pit);return Tr("div",Pr({},Es(wr(wr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=PA(e,Dit);return Tr("div",Pr({},Es(wr(wr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:eot,MultiValueContainer:RW,MultiValueLabel:RW,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Tr("div",Pr({role:"button"},r),t||Tr(bI,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return Tr("div",Pr({},Es(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Tr("div",Pr({},Es(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Tr("div",Pr({},Es(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Tr("div",Pr({},Es(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Tr("div",Pr({},Es(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},LW=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function rot(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||LW(n)&&LW(a)))return!1;var n,a;return!0}for(var not={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},MW=function(e){return Tr("span",Pr({css:not},e))},aot={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,o=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(p,g){return p&&p.length?"".concat(p.indexOf(g)+1," of ").concat(p.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var f=o?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},sot=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,o=e.selectProps,c=e.id,u=e.isAppleDevice,d=o.ariaLiveMessages,f=o.getOptionLabel,h=o.inputValue,p=o.isMulti,g=o.isOptionDisabled,x=o.isSearchable,b=o.menuIsOpen,y=o.options,w=o.screenReaderStatus,_=o.tabSelectsValue,j=o.isLoading,k=o["aria-label"],I=o["aria-live"],E=S.useMemo(function(){return wr(wr({},aot),d||{})},[d]),N=S.useMemo(function(){var M,J="";if(t&&E.onChange){var H=t.option,K=t.options,V=t.removedValue,G=t.removedValues,X=t.value,ee=V||H||(M=X,Array.isArray(M)?null:M),F=ee?f(ee):"",z=K||G||void 0,Y=z?z.map(f):[],te=wr({isDisabled:ee&&g(ee,i),label:F,labels:Y},t);J=E.onChange(te)}return J},[t,E,g,i,f]),B=S.useMemo(function(){var M="",J=r||n,H=!!(r&&i&&i.includes(r));if(J&&E.onFocus){var K={focused:J,label:f(J),isDisabled:g(J,i),isSelected:H,options:a,context:J===r?"menu":"value",selectValue:i,isAppleDevice:u};M=E.onFocus(K)}return M},[r,n,f,g,E,a,i,u]),R=S.useMemo(function(){var M="";if(b&&y.length&&!j&&E.onFilter){var J=w({count:a.length});M=E.onFilter({inputValue:h,resultsMessage:J})}return M},[a,h,b,E,y,w,j]),P=(t==null?void 0:t.action)==="initial-input-focus",D=S.useMemo(function(){var M="";if(E.guidance){var J=n?"value":b?"menu":"input";M=E.guidance({"aria-label":k,context:J,isDisabled:r&&g(r,i),isMulti:p,isSearchable:x,tabSelectsValue:_,isInitialFocus:P})}return M},[k,r,n,p,g,x,b,E,i,_,P]),L=Tr(S.Fragment,null,Tr("span",{id:"aria-selection"},N),Tr("span",{id:"aria-focused"},B),Tr("span",{id:"aria-results"},R),Tr("span",{id:"aria-guidance"},D));return Tr(S.Fragment,null,Tr(MW,{id:c},P&&L),Tr(MW,{"aria-live":I,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!P&&L))},wI=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],iot=new RegExp("["+wI.map(function(e){return e.letters}).join("")+"]","g"),Uue={},EI=0;EI<wI.length;EI++)for(var CI=wI[EI],_I=0;_I<CI.letters.length;_I++)Uue[CI.letters[_I]]=CI.base;var Que=function(e){return e.replace(iot,function(t){return Uue[t]})},oot=function(e,t){t===void 0&&(t=rot);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(Que),UW=function(e){return e.replace(/^\s+|\s+$/g,"")},lot=function(e){return"".concat(e.label," ").concat(e.value)},cot=["innerRef"];function uot(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=Object.entries(n).filter(function(c){var u=Qi(c,1)[0];return!s.includes(u)});return o.reduce(function(c,u){var d=Qi(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(PA(e,cot),"onExited","in","enter","exit","appear");return Tr("input",Pr({ref:t},r,{css:mM({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var QW=["boxSizing","height","overflow","paddingRight","position"],HW={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function VW(e){e.preventDefault()}function zW(e){e.stopPropagation()}function $W(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function GW(){return"ontouchstart"in window||navigator.maxTouchPoints}var KW=!(typeof window>"u"||!window.document||!window.document.createElement),fy=0,Rx={capture:!1,passive:!1},dot=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},Aot={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function fot(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var o=i.isEnabled,c=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,f=i.onTopLeave,h=S.useRef(!1),p=S.useRef(!1),g=S.useRef(0),x=S.useRef(null),b=S.useCallback(function(I,E){if(x.current!==null){var N=x.current,B=N.scrollTop,R=N.scrollHeight,P=N.clientHeight,D=x.current,L=E>0,M=R-P-B,J=!1;M>E&&h.current&&(u&&u(I),h.current=!1),L&&p.current&&(f&&f(I),p.current=!1),L&&E>M?(c&&!h.current&&c(I),D.scrollTop=R,J=!0,h.current=!0):!L&&-E>B&&(d&&!p.current&&d(I),D.scrollTop=0,J=!0,p.current=!0),J&&function(H){H.cancelable&&H.preventDefault(),H.stopPropagation()}(I)}},[c,u,d,f]),y=S.useCallback(function(I){b(I,I.deltaY)},[b]),w=S.useCallback(function(I){g.current=I.changedTouches[0].clientY},[]),_=S.useCallback(function(I){var E=g.current-I.changedTouches[0].clientY;b(I,E)},[b]),j=S.useCallback(function(I){if(I){var E=!!Fit&&{passive:!1};I.addEventListener("wheel",y,E),I.addEventListener("touchstart",w,E),I.addEventListener("touchmove",_,E)}},[_,w,y]),k=S.useCallback(function(I){I&&(I.removeEventListener("wheel",y,!1),I.removeEventListener("touchstart",w,!1),I.removeEventListener("touchmove",_,!1))},[_,w,y]);return S.useEffect(function(){if(o){var I=x.current;return j(I),function(){k(I)}}},[o,j,k]),function(I){x.current=I}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var o=i.isEnabled,c=i.accountForScrollbars,u=c===void 0||c,d=S.useRef({}),f=S.useRef(null),h=S.useCallback(function(g){if(KW){var x=document.body,b=x&&x.style;if(u&&QW.forEach(function(j){var k=b&&b[j];d.current[j]=k}),u&&fy<1){var y=parseInt(d.current.paddingRight,10)||0,w=document.body?document.body.clientWidth:0,_=window.innerWidth-w+y||0;Object.keys(HW).forEach(function(j){var k=HW[j];b&&(b[j]=k)}),b&&(b.paddingRight="".concat(_,"px"))}x&&GW()&&(x.addEventListener("touchmove",VW,Rx),g&&(g.addEventListener("touchstart",$W,Rx),g.addEventListener("touchmove",zW,Rx))),fy+=1}},[u]),p=S.useCallback(function(g){if(KW){var x=document.body,b=x&&x.style;fy=Math.max(fy-1,0),u&&fy<1&&QW.forEach(function(y){var w=d.current[y];b&&(b[y]=w)}),x&&GW()&&(x.removeEventListener("touchmove",VW,Rx),g&&(g.removeEventListener("touchstart",$W,Rx),g.removeEventListener("touchmove",zW,Rx)))}},[u]);return S.useEffect(function(){if(o){var g=f.current;return h(g),function(){p(g)}}},[o,h,p]),function(g){f.current=g}}({isEnabled:r});return Tr(S.Fragment,null,r&&Tr("div",{onClick:dot,css:Aot}),t(function(i){a(i),s(i)}))}var hot={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},mot=function(e){var t=e.name,r=e.onFocus;return Tr("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:hot,value:"",onChange:function(){}})};function DO(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function Hue(){return DO(/^Mac/i)}function pot(){return DO(/^iPhone/i)||DO(/^iPad/i)||Hue()&&navigator.maxTouchPoints>1}var got,xot={clearIndicator:Git,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return wr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:$it,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return wr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return wr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return wr(wr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},Jit),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return wr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:Qit,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,o=a.colors;return wr((uv(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),uv(r,"position","absolute"),uv(r,"width","100%"),uv(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return wr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return wr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return wr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return wr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:Uit,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,o=s.colors;return wr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return wr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return wr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return wr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},NI={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},vot={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:OW(),captureMenuScroll:!OW(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=wr({ignoreCase:!0,ignoreAccents:!0,stringify:lot,trim:!0,matchFrom:"any"},got),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,o=r.matchFrom,c=i?UW(t):t,u=i?UW(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=oot(c),u=Que(u)),o==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function qW(e,t,r,n){return{type:"option",data:t,isDisabled:zue(e,t,r),isSelected:$ue(e,t,r),label:Vue(e,t),value:CS(e,t),index:n}}function x_(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,o){return qW(e,i,t,o)}).filter(function(i){return YW(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=qW(e,r,t,n);return YW(e,s)?s:void 0}).filter(Oit)}function WW(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,lM(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function XW(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,lM(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function YW(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,o=t.value;return(!Kue(e)||!s)&&Gue(e,{label:i,value:o,data:a},n)}var SI=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Vue=function(e,t){return e.getOptionLabel(t)},CS=function(e,t){return e.getOptionValue(t)};function zue(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function $ue(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=CS(e,t);return r.some(function(a){return CS(e,a)===n})}function Gue(e,t,r){return!e.filterOption||e.filterOption(t,r)}var Kue=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},bot=1,que=function(e){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&_O(i,o)})(s,S.Component);var t,r,n,a=Kst(s);function s(i){var o;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(o=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=Hue()||pot(),o.controlRef=null,o.getControlRef=function(f){o.controlRef=f},o.focusedOptionRef=null,o.getFocusedOptionRef=function(f){o.focusedOptionRef=f},o.menuListRef=null,o.getMenuListRef=function(f){o.menuListRef=f},o.inputRef=null,o.getInputRef=function(f){o.inputRef=f},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(f,h){var p=o.props,g=p.onChange,x=p.name;h.name=x,o.ariaOnChange(f,h),g(f,h)},o.setValue=function(f,h,p){var g=o.props,x=g.closeMenuOnSelect,b=g.isMulti,y=g.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:y}),x&&(o.setState({inputIsHiddenAfterUpdate:!b}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(f,{action:h,option:p})},o.selectOption=function(f){var h=o.props,p=h.blurInputOnSelect,g=h.isMulti,x=h.name,b=o.state.selectValue,y=g&&o.isOptionSelected(f,b),w=o.isOptionDisabled(f,b);if(y){var _=o.getOptionValue(f);o.setValue(b.filter(function(j){return o.getOptionValue(j)!==_}),"deselect-option",f)}else{if(w)return void o.ariaOnChange(f,{action:"select-option",option:f,name:x});g?o.setValue([].concat(lM(b),[f]),"select-option",f):o.setValue(f,"select-option")}p&&o.blurInput()},o.removeValue=function(f){var h=o.props.isMulti,p=o.state.selectValue,g=o.getOptionValue(f),x=p.filter(function(y){return o.getOptionValue(y)!==g}),b=g_(h,x,x[0]||null);o.onChange(b,{action:"remove-value",removedValue:f}),o.focusInput()},o.clearValue=function(){var f=o.state.selectValue;o.onChange(g_(o.props.isMulti,[],null),{action:"clear",removedValues:f})},o.popValue=function(){var f=o.props.isMulti,h=o.state.selectValue,p=h[h.length-1],g=h.slice(0,h.length-1),x=g_(f,g,g[0]||null);o.onChange(x,{action:"pop-value",removedValue:p})},o.getFocusedOptionId=function(f){return SI(o.state.focusableOptionsWithIds,f)},o.getFocusableOptionsWithIds=function(){return XW(x_(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return Tit.apply(void 0,[o.props.classNamePrefix].concat(h))},o.getOptionLabel=function(f){return Vue(o.props,f)},o.getOptionValue=function(f){return CS(o.props,f)},o.getStyles=function(f,h){var p=o.props.unstyled,g=xot[f](h,p);g.boxSizing="border-box";var x=o.props.styles[f];return x?x(g,h):g},o.getClassNames=function(f,h){var p,g;return(p=(g=o.props.classNames)[f])===null||p===void 0?void 0:p.call(g,h)},o.getElementId=function(f){return"".concat(o.state.instancePrefix,"-").concat(f)},o.getComponents=function(){return f=o.props,wr(wr({},tot),f.components);var f},o.buildCategorizedOptions=function(){return x_(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return WW(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(f,h){o.setState({ariaSelection:wr({value:f},h)})},o.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(f){o.blockOptionHover=!1},o.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&o.onMenuClose():h&&o.openMenu("first"):(h&&(o.openAfterFocus=!0),o.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},o.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||o.props.isDisabled)){var h=o.props,p=h.isMulti,g=h.menuIsOpen;o.focusInput(),g?(o.setState({inputIsHiddenAfterUpdate:!p}),o.onMenuClose()):o.openMenu("first"),f.preventDefault()}},o.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(o.clearValue(),f.preventDefault(),o.openAfterFocus=!1,f.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(f){typeof o.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&Vk(f.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(f)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(f){var h=f.touches,p=h&&h.item(0);p&&(o.initialTouchX=p.clientX,o.initialTouchY=p.clientY,o.userIsDragging=!1)},o.onTouchMove=function(f){var h=f.touches,p=h&&h.item(0);if(p){var g=Math.abs(p.clientX-o.initialTouchX),x=Math.abs(p.clientY-o.initialTouchY);o.userIsDragging=g>5||x>5}},o.onTouchEnd=function(f){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(f.target)&&o.menuListRef&&!o.menuListRef.contains(f.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(f){o.userIsDragging||o.onControlMouseDown(f)},o.onClearIndicatorTouchEnd=function(f){o.userIsDragging||o.onClearIndicatorMouseDown(f)},o.onDropdownIndicatorTouchEnd=function(f){o.userIsDragging||o.onDropdownIndicatorMouseDown(f)},o.handleInputChange=function(f){var h=o.props.inputValue,p=f.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(p,{action:"input-change",prevInputValue:h}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(f){o.props.onFocus&&o.props.onFocus(f),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(f){var h=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(f),o.onInputChange("",{action:"input-blur",prevInputValue:h}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(f){if(!o.blockOptionHover&&o.state.focusedOption!==f){var h=o.getFocusableOptions().indexOf(f);o.setState({focusedOption:f,focusedOptionId:h>-1?o.getFocusedOptionId(f):null})}},o.shouldHideSelectedOptions=function(){return Kue(o.props)},o.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),o.focus()},o.onKeyDown=function(f){var h=o.props,p=h.isMulti,g=h.backspaceRemovesValue,x=h.escapeClearsValue,b=h.inputValue,y=h.isClearable,w=h.isDisabled,_=h.menuIsOpen,j=h.onKeyDown,k=h.tabSelectsValue,I=h.openMenuOnFocus,E=o.state,N=E.focusedOption,B=E.focusedValue,R=E.selectValue;if(!(w||typeof j=="function"&&(j(f),f.defaultPrevented))){switch(o.blockOptionHover=!0,f.key){case"ArrowLeft":if(!p||b)return;o.focusValue("previous");break;case"ArrowRight":if(!p||b)return;o.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(B)o.removeValue(B);else{if(!g)return;p?o.popValue():y&&o.clearValue()}break;case"Tab":if(o.isComposing||f.shiftKey||!_||!k||!N||I&&o.isOptionSelected(N,R))return;o.selectOption(N);break;case"Enter":if(f.keyCode===229)break;if(_){if(!N||o.isComposing)return;o.selectOption(N);break}return;case"Escape":_?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:b}),o.onMenuClose()):y&&x&&o.clearValue();break;case" ":if(b)return;if(!_){o.openMenu("first");break}if(!N)return;o.selectOption(N);break;case"ArrowUp":_?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":_?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!_)return;o.focusOption("pageup");break;case"PageDown":if(!_)return;o.focusOption("pagedown");break;case"Home":if(!_)return;o.focusOption("first");break;case"End":if(!_)return;o.focusOption("last");break;default:return}f.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++bot),o.state.selectValue=jW(i.value),i.menuIsOpen&&o.state.selectValue.length){var c=o.getFocusableOptionsWithIds(),u=o.buildFocusableOptions(),d=u.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=c,o.state.focusedOption=u[d],o.state.focusedOptionId=SI(c,u[d])}return o}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&FW(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,c=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused;(d&&!c&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(FW(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=i==="first"?0:f.length-1;if(!this.props.isMulti){var p=f.indexOf(u[0]);p>-1&&(h=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,c=o.selectValue,u=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(i){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),i==="up"?d=f>0?f-1:u.length-1:i==="down"?d=(f+1)%u.length:i==="pageup"?(d=f-o)<0&&(d=0):i==="pagedown"?(d=f+o)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(NI):wr(wr({},NI),this.props.theme):NI}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,p=this.props,g=p.isMulti,x=p.isRtl,b=p.options;return{clearValue:i,cx:o,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:x,options:b,selectOption:f,selectProps:p,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,c=i.isMulti;return o===void 0?c:o}},{key:"isOptionDisabled",value:function(i,o){return zue(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return $ue(this.props,i,o)}},{key:"filterOption",value:function(i,o){return Gue(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:c,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,c=i.isSearchable,u=i.inputId,d=i.inputValue,f=i.tabIndex,h=i.form,p=i.menuIsOpen,g=i.required,x=this.getComponents().Input,b=this.state,y=b.inputIsHidden,w=b.ariaSelection,_=this.commonProps,j=u||this.getElementId("input"),k=wr(wr(wr({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(w==null?void 0:w.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?S.createElement(x,Pr({},_,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:j,innerRef:this.getInputRef,isDisabled:o,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},k)):S.createElement(uot,Pr({id:j,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:wS,onFocus:this.onInputFocus,disabled:o,tabIndex:f,inputMode:"none",form:h,value:""},k))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),c=o.MultiValue,u=o.MultiValueContainer,d=o.MultiValueLabel,f=o.MultiValueRemove,h=o.SingleValue,p=o.Placeholder,g=this.commonProps,x=this.props,b=x.controlShouldRenderValue,y=x.isDisabled,w=x.isMulti,_=x.inputValue,j=x.placeholder,k=this.state,I=k.selectValue,E=k.focusedValue,N=k.isFocused;if(!this.hasValue()||!b)return _?null:S.createElement(p,Pr({},g,{key:"placeholder",isDisabled:y,isFocused:N,innerProps:{id:this.getElementId("placeholder")}}),j);if(w)return I.map(function(R,P){var D=R===E,L="".concat(i.getOptionLabel(R),"-").concat(i.getOptionValue(R));return S.createElement(c,Pr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:D,isDisabled:y,key:L,index:P,removeProps:{onClick:function(){return i.removeValue(R)},onTouchEnd:function(){return i.removeValue(R)},onMouseDown:function(M){M.preventDefault()}},data:R}),i.formatOptionLabel(R,"value"))});if(_)return null;var B=I[0];return S.createElement(h,Pr({},g,{data:B,isDisabled:y}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(i,Pr({},o,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return i&&d?S.createElement(i,Pr({},o,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,c=i.IndicatorSeparator;if(!o||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return S.createElement(c,Pr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return S.createElement(i,Pr({},o,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),c=o.Group,u=o.GroupHeading,d=o.Menu,f=o.MenuList,h=o.MenuPortal,p=o.LoadingMessage,g=o.NoOptionsMessage,x=o.Option,b=this.commonProps,y=this.state.focusedOption,w=this.props,_=w.captureMenuScroll,j=w.inputValue,k=w.isLoading,I=w.loadingMessage,E=w.minMenuHeight,N=w.maxMenuHeight,B=w.menuIsOpen,R=w.menuPlacement,P=w.menuPosition,D=w.menuPortalTarget,L=w.menuShouldBlockScroll,M=w.menuShouldScrollIntoView,J=w.noOptionsMessage,H=w.onMenuScrollToTop,K=w.onMenuScrollToBottom;if(!B)return null;var V,G=function(Y,te){var ae=Y.type,le=Y.data,ie=Y.isDisabled,ce=Y.isSelected,pe=Y.label,Be=Y.value,ne=y===le,_e=ie?void 0:function(){return i.onOptionHover(le)},De=ie?void 0:function(){return i.selectOption(le)},Se="".concat(i.getElementId("option"),"-").concat(te),fe={id:Se,onClick:De,onMouseMove:_e,onMouseOver:_e,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:ce};return S.createElement(x,Pr({},b,{innerProps:fe,data:le,isDisabled:ie,isSelected:ce,key:Se,label:pe,type:ae,value:Be,isFocused:ne,innerRef:ne?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Y.data,"menu"))};if(this.hasOptions())V=this.getCategorizedOptions().map(function(Y){if(Y.type==="group"){var te=Y.data,ae=Y.options,le=Y.index,ie="".concat(i.getElementId("group"),"-").concat(le),ce="".concat(ie,"-heading");return S.createElement(c,Pr({},b,{key:ie,data:te,options:ae,Heading:u,headingProps:{id:ce,data:Y.data},label:i.formatGroupLabel(Y.data)}),Y.options.map(function(pe){return G(pe,"".concat(le,"-").concat(pe.index))}))}if(Y.type==="option")return G(Y,"".concat(Y.index))});else if(k){var X=I({inputValue:j});if(X===null)return null;V=S.createElement(p,b,X)}else{var ee=J({inputValue:j});if(ee===null)return null;V=S.createElement(g,b,ee)}var F={minMenuHeight:E,maxMenuHeight:N,menuPlacement:R,menuPosition:P,menuShouldScrollIntoView:M},z=S.createElement(Lit,Pr({},b,F),function(Y){var te=Y.ref,ae=Y.placerProps,le=ae.placement,ie=ae.maxHeight;return S.createElement(d,Pr({},b,F,{innerRef:te,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:k,placement:le}),S.createElement(fot,{captureEnabled:_,onTopArrive:H,onBottomArrive:K,lockEnabled:L},function(ce){return S.createElement(f,Pr({},b,{innerRef:function(pe){i.getMenuListRef(pe),ce(pe)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:k,maxHeight:ie,focusedOption:y}),V)}))});return D||P==="fixed"?S.createElement(h,Pr({},b,{appendTo:D,controlElement:this.controlRef,menuPlacement:R,menuPosition:P}),z):z}},{key:"renderFormField",value:function(){var i=this,o=this.props,c=o.delimiter,u=o.isDisabled,d=o.isMulti,f=o.name,h=o.required,p=this.state.selectValue;if(h&&!this.hasValue()&&!u)return S.createElement(mot,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=p.map(function(y){return i.getOptionValue(y)}).join(c);return S.createElement("input",{name:f,type:"hidden",value:g})}var x=p.length>0?p.map(function(y,w){return S.createElement("input",{key:"i-".concat(w),name:f,type:"hidden",value:i.getOptionValue(y)})}):S.createElement("input",{name:f,type:"hidden",value:""});return S.createElement("div",null,x)}var b=p[0]?this.getOptionValue(p[0]):"";return S.createElement("input",{name:f,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,c=o.ariaSelection,u=o.focusedOption,d=o.focusedValue,f=o.isFocused,h=o.selectValue,p=this.getFocusableOptions();return S.createElement(sot,Pr({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,c=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,f=this.props,h=f.className,p=f.id,g=f.isDisabled,x=f.menuIsOpen,b=this.state.isFocused,y=this.commonProps=this.getCommonProps();return S.createElement(u,Pr({},y,{className:h,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),S.createElement(o,Pr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:x}),S.createElement(d,Pr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),S.createElement(c,Pr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var c=o.prevProps,u=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,f=o.ariaSelection,h=o.isFocused,p=o.prevWasFocused,g=o.instancePrefix,x=i.options,b=i.value,y=i.menuIsOpen,w=i.inputValue,_=i.isMulti,j=jW(b),k={};if(c&&(b!==c.value||x!==c.options||y!==c.menuIsOpen||w!==c.inputValue)){var I=y?function(L,M){return WW(x_(L,M))}(i,j):[],E=y?XW(x_(i,j),"".concat(g,"-option")):[],N=u?function(L,M){var J=L.focusedValue,H=L.selectValue.indexOf(J);if(H>-1){if(M.indexOf(J)>-1)return J;if(H<M.length)return M[H]}return null}(o,j):null,B=function(L,M){var J=L.focusedOption;return J&&M.indexOf(J)>-1?J:M[0]}(o,I);k={selectValue:j,focusedOption:B,focusedOptionId:SI(E,B),focusableOptionsWithIds:E,focusedValue:N,clearFocusValueOnUpdate:!1}}var R=d!=null&&i!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},P=f,D=h&&p;return h&&!D&&(P={value:g_(_,j,j[0]||null),options:j,action:"initial-input-focus"},D=!p),(f==null?void 0:f.action)==="initial-input-focus"&&(P=null),wr(wr(wr({},k),R),{},{prevProps:i,ariaSelection:P,prevWasFocused:D})}}],r&&AW(t.prototype,r),n&&AW(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();que.defaultProps=vot;var yot=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],wot=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],pM=ia(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Eot=ia(function(e){var t=pM.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),Wue=ia(function(e){var t=pM.default;e.exports=function(r){var n=Eot(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),Cot=ia(function(e){e.exports=function(t,r,n){return(r=Wue(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){Cot(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),ia(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),ia(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,Wue(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var _ot=ia(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_ot(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var JW=ia(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Not=ia(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),Sot=ia(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),kot=ia(function(e){var t=pM.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sot(r)},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t){var r=Not();return function(){var n,a=JW(t);if(r){var s=JW(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return kot(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var PO=ia(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),Bot=ia(function(e){e.exports=function(t){if(Array.isArray(t))return PO(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Tot=ia(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Xue=ia(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return PO(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?PO(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),jot=ia(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t){return Bot(t)||Tot(t)||Xue(t)||jot()},e.exports.__esModule=!0,e.exports.default=e.exports});var Iot=ia(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),Fot=ia(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,o,c=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),Oot=ia(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t,r){return Iot(t)||Fot(t,r)||Xue(t,r)||Oot()},e.exports.__esModule=!0,e.exports.default=e.exports});var Dot=ia(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});ia(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=Dot(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),ia(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var Pot=S.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,o=a.cacheOptions,c=o!==void 0&&o,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,p=a.filterOption,g=p===void 0?null:p,x=PA(a,wot),b=x.inputValue,y=S.useRef(void 0),w=S.useRef(!1),_=Qi(S.useState(Array.isArray(i)?i:void 0),2),j=_[0],k=_[1],I=Qi(S.useState(b!==void 0?b:""),2),E=I[0],N=I[1],B=Qi(S.useState(i===!0),2),R=B[0],P=B[1],D=Qi(S.useState(void 0),2),L=D[0],M=D[1],J=Qi(S.useState([]),2),H=J[0],K=J[1],V=Qi(S.useState(!1),2),G=V[0],X=V[1],ee=Qi(S.useState({}),2),F=ee[0],z=ee[1],Y=Qi(S.useState(void 0),2),te=Y[0],ae=Y[1],le=Qi(S.useState(void 0),2),ie=le[0],ce=le[1];c!==ie&&(z({}),ce(c)),i!==te&&(k(Array.isArray(i)?i:void 0),ae(i)),S.useEffect(function(){return w.current=!0,function(){w.current=!1}},[]);var pe=S.useCallback(function(_e,De){if(!u)return De();var Se=u(_e,De);Se&&typeof Se.then=="function"&&Se.then(De,function(){return De()})},[u]);S.useEffect(function(){i===!0&&pe(E,function(_e){w.current&&(k(_e||[]),P(!!y.current))})},[]);var Be=S.useCallback(function(_e,De){var Se=function(Ie,Ue,Ye){if(Ye){var ye=Ye(Ie,Ue);if(typeof ye=="string")return ye}return Ie}(_e,De,h);if(!Se)return y.current=void 0,N(""),M(""),K([]),P(!1),void X(!1);if(c&&F[Se])N(Se),M(Se),K(F[Se]),P(!1),X(!1);else{var fe=y.current={};N(Se),P(!0),X(!L),pe(Se,function(Ie){w&&fe===y.current&&(y.current=void 0,P(!1),M(Se),K(Ie||[]),X(!1),z(Ie?wr(wr({},F),{},uv({},Se,Ie)):F))})}},[c,pe,L,F,h]),ne=G?[]:E&&L?H:j||[];return wr(wr({},x),{},{options:ne,isLoading:R||f,onInputChange:Be,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,o=a.defaultMenuIsOpen,c=o!==void 0&&o,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,p=a.onChange,g=a.onInputChange,x=a.onMenuClose,b=a.onMenuOpen,y=a.value,w=PA(a,yot),_=Qi(S.useState(f!==void 0?f:i),2),j=_[0],k=_[1],I=Qi(S.useState(h!==void 0?h:c),2),E=I[0],N=I[1],B=Qi(S.useState(y!==void 0?y:d),2),R=B[0],P=B[1],D=S.useCallback(function(G,X){typeof p=="function"&&p(G,X),P(G)},[p]),L=S.useCallback(function(G,X){var ee;typeof g=="function"&&(ee=g(G,X)),k(ee!==void 0?ee:G)},[g]),M=S.useCallback(function(){typeof b=="function"&&b(),N(!0)},[b]),J=S.useCallback(function(){typeof x=="function"&&x(),N(!1)},[x]),H=f!==void 0?f:j,K=h!==void 0?h:E,V=y!==void 0?y:R;return wr(wr({},w),{},{inputValue:H,menuIsOpen:K,onChange:D,onInputChange:L,onMenuClose:J,onMenuOpen:M,value:V})}(r);return S.createElement(que,Pr({ref:t},n))}),Rot=Pot,Lot=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},dv;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(dv||(dv={}));class kp{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:o=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:p}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=p,kp.instance){if(!Lot(this.options,kp.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(kp.instance.options)}`);return kp.instance}kp.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?dv.FAILURE:this.done?dv.SUCCESS:this.loading?dv.LOADING:dv.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var Mot=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),o=Zp({input:t},i);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var p=arguments[u],g=0,x=p.length;g<x;g++,h++)f[h]=p[g];return f}([void 0],a)))),s&&(o.location=new google.maps.LatLng(s)),o},Uot=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,o=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=S.useRef(null),p=S.useRef([]),g=d.leading,x=d.trailing===void 0||d.trailing,b=S.useRef(!1),y=S.useRef(null),w=S.useRef(!1),_=S.useRef(c);_.current=c;var j=S.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,p.current=[],y.current=null,b.current=!1},[]);S.useEffect(function(){return w.current=!1,function(){w.current=!0}},[]);var k=S.useCallback(function(){for(var E=[],N=0;N<arguments.length;N++)E[N]=arguments[N];p.current=E,clearTimeout(y.current),b.current&&(b.current=!1),y.current||!g||b.current||(_.current.apply(_,E),b.current=!0),y.current=setTimeout(function(){var B=!0;g&&b.current&&(B=!1),j(),!w.current&&x&&B&&_.current.apply(_,E)},u),f&&!h.current&&x&&(h.current=setTimeout(function(){var B=p.current;j(),w.current||_.current.apply(null,B)},f))},[f,u,j,g,x]),I=S.useCallback(function(){y.current&&(_.current.apply(null,p.current),j())},[j]);return[k,j,I]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=Zp({},t);a.getPlacePredictions(Mot(d,c,i&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return o},ZW=S.forwardRef(function(e,t){var r,n,a,s,i,o,c,u,d=function(x){var b=x.apiKey,y=x.apiOptions,w=x.onLoadFailed,_=S.useState(void 0),j=_[0],k=_[1],I=S.useState(void 0),E=I[0],N=I[1],B=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");k(new window.google.maps.places.AutocompleteService),N(new google.maps.places.AutocompleteSessionToken)};return S.useEffect(function(){b?zst(void 0,void 0,void 0,function(){var R;return $st(this,function(P){switch(P.label){case 0:if(!b)return[2];P.label=1;case 1:return P.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new kp(Zp({apiKey:b},Zp({libraries:["places"]},y))).load()];case 2:P.sent(),P.label=3;case 3:return B(),[3,5];case 4:return R=P.sent(),typeof w=="function"&&w(R),[3,5];case 5:return[2]}})}):B()},[]),{placesService:j,sessionToken:E,setSessionToken:N}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,p=d.setSessionToken,g=Uot({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return S.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){p(new google.maps.places.AutocompleteSessionToken)}}},[h]),nt.createElement(Rot,Zp({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(x){return x.value.place_id}}))});/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var RO=function(e,t){return RO=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},RO(e,t)};function $d(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");RO(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var LO=function(){return LO=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},LO.apply(this,arguments)};function fl(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(o,c)}u((n=n.apply(e,[])).next())})}function Uo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function v_(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var kh=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),zk=function(e,t){return kh.fromClientRect(e,t.getBoundingClientRect())},Qot=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new kh(0,0,n,a)},$k=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Qs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},eX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hot=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var b_=0;b_<eX.length;b_++)Hot[eX.charCodeAt(b_)]=b_;var tX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Py=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var y_=0;y_<tX.length;y_++)Py[tX.charCodeAt(y_)]=y_;var Vot=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Py[e.charCodeAt(n)],i=Py[e.charCodeAt(n+1)],o=Py[e.charCodeAt(n+2)],c=Py[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},zot=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},$ot=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},rg=5,gM=11,kI=2,Got=gM-rg,Yue=65536>>rg,Kot=1<<rg,BI=Kot-1,qot=1024>>rg,Wot=Yue+qot,Xot=Wot,Yot=32,Jot=Xot+Yot,Zot=65536>>gM,elt=1<<Got,tlt=elt-1,rX=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},rlt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},nlt=function(e,t){var r=Vot(e),n=Array.isArray(r)?$ot(r):new Uint32Array(r),a=Array.isArray(r)?zot(r):new Uint16Array(r),s=24,i=rX(a,s/2,n[4]/2),o=n[5]===2?rX(a,(s+n[4])/2):rlt(n,Math.ceil((s+n[4])/4));return new alt(n[0],n[1],n[2],n[3],i,o)},alt=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>rg],r=(r<<kI)+(t&BI),this.data[r];if(t<=65535)return r=this.index[Yue+(t-55296>>rg)],r=(r<<kI)+(t&BI),this.data[r];if(t<this.highStart)return r=Jot-Zot+(t>>gM),r=this.index[r],r+=t>>rg&tlt,r=this.index[r],r=(r<<kI)+(t&BI),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),nX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",slt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var w_=0;w_<nX.length;w_++)slt[nX.charCodeAt(w_)]=w_;var ilt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",aX=50,olt=1,Jue=2,Zue=3,llt=4,clt=5,sX=7,ede=8,iX=9,q0=10,MO=11,oX=12,UO=13,ult=14,Ry=15,QO=16,E_=17,hy=18,dlt=19,lX=20,HO=21,my=22,TI=23,Lx=24,Nc=25,Ly=26,My=27,Mx=28,Alt=29,Bp=30,flt=31,C_=32,__=33,VO=34,zO=35,$O=36,m2=37,GO=38,S5=39,k5=40,jI=41,tde=42,hlt=43,mlt=[9001,65288],rde="!",Nn="",N_="",KO=nlt(ilt),Hf=[Bp,$O],qO=[olt,Jue,Zue,clt],nde=[q0,ede],cX=[My,Ly],plt=qO.concat(nde),uX=[GO,S5,k5,VO,zO],glt=[Ry,UO],xlt=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var o=KO.get(s);if(o>aX?(a.push(!0),o-=aX):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(QO);if(o===llt||o===MO){if(i===0)return n.push(i),r.push(Bp);var c=r[i-1];return plt.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(Bp))}if(n.push(i),o===flt)return r.push(t==="strict"?HO:m2);if(o===tde||o===Alt)return r.push(Bp);if(o===hlt)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(m2):r.push(Bp);r.push(o)}),[n,r,a]},II=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==q0)break}if(a===q0)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===t)return!0;if(i!==q0)break}if(o!==q0)break}return!1},dX=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===q0)r--;else return n}return 0},vlt=function(e,t,r,n,a){if(r[n]===0)return Nn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return Nn;var i=s-1,o=s+1,c=t[s],u=i>=0?t[i]:0,d=t[o];if(c===Jue&&d===Zue)return Nn;if(qO.indexOf(c)!==-1)return rde;if(qO.indexOf(d)!==-1||nde.indexOf(d)!==-1)return Nn;if(dX(s,t)===ede)return N_;if(KO.get(e[s])===MO||(c===C_||c===__)&&KO.get(e[o])===MO||c===sX||d===sX||c===iX||[q0,UO,Ry].indexOf(c)===-1&&d===iX||[E_,hy,dlt,Lx,Mx].indexOf(d)!==-1||dX(s,t)===my||II(TI,my,s,t)||II([E_,hy],HO,s,t)||II(oX,oX,s,t))return Nn;if(c===q0)return N_;if(c===TI||d===TI)return Nn;if(d===QO||c===QO)return N_;if([UO,Ry,HO].indexOf(d)!==-1||c===ult||u===$O&&glt.indexOf(c)!==-1||c===Mx&&d===$O||d===lX||Hf.indexOf(d)!==-1&&c===Nc||Hf.indexOf(c)!==-1&&d===Nc||c===My&&[m2,C_,__].indexOf(d)!==-1||[m2,C_,__].indexOf(c)!==-1&&d===Ly||Hf.indexOf(c)!==-1&&cX.indexOf(d)!==-1||cX.indexOf(c)!==-1&&Hf.indexOf(d)!==-1||[My,Ly].indexOf(c)!==-1&&(d===Nc||[my,Ry].indexOf(d)!==-1&&t[o+1]===Nc)||[my,Ry].indexOf(c)!==-1&&d===Nc||c===Nc&&[Nc,Mx,Lx].indexOf(d)!==-1)return Nn;if([Nc,Mx,Lx,E_,hy].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===Nc)return Nn;if([Mx,Lx].indexOf(h)!==-1)f--;else break}if([My,Ly].indexOf(d)!==-1)for(var f=[E_,hy].indexOf(c)!==-1?i:s;f>=0;){var h=t[f];if(h===Nc)return Nn;if([Mx,Lx].indexOf(h)!==-1)f--;else break}if(GO===c&&[GO,S5,VO,zO].indexOf(d)!==-1||[S5,VO].indexOf(c)!==-1&&[S5,k5].indexOf(d)!==-1||[k5,zO].indexOf(c)!==-1&&d===k5||uX.indexOf(c)!==-1&&[lX,Ly].indexOf(d)!==-1||uX.indexOf(d)!==-1&&c===My||Hf.indexOf(c)!==-1&&Hf.indexOf(d)!==-1||c===Lx&&Hf.indexOf(d)!==-1||Hf.concat(Nc).indexOf(c)!==-1&&d===my&&mlt.indexOf(e[o])===-1||Hf.concat(Nc).indexOf(d)!==-1&&c===hy)return Nn;if(c===jI&&d===jI){for(var p=r[s],g=1;p>0&&(p--,t[p]===jI);)g++;if(g%2!==0)return Nn}return c===C_&&d===__?Nn:N_},blt=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=xlt(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[Nc,Bp,tde].indexOf(o)!==-1?m2:o}));var i=t.wordBreak==="keep-all"?s.map(function(o,c){return o&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,i]},ylt=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===rde,this.start=n,this.end=a}return e.prototype.slice=function(){return Qs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),wlt=function(e,t){var r=$k(e),n=blt(r,t),a=n[0],s=n[1],i=n[2],o=r.length,c=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=Nn;u<o&&(d=vlt(r,s,a,++u,i))===Nn;);if(d!==Nn||u===o){var f=new ylt(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},Elt=1,Clt=2,AE=4,AX=8,_S=10,fX=47,hw=92,_lt=9,Nlt=32,S_=34,py=61,Slt=35,klt=36,Blt=37,k_=39,B_=40,gy=41,Tlt=95,Kl=45,jlt=33,Ilt=60,Flt=62,Olt=64,Dlt=91,Plt=93,Rlt=61,Llt=123,T_=63,Mlt=125,hX=124,Ult=126,Qlt=128,mX=65533,FI=42,Up=43,Hlt=44,Vlt=58,zlt=59,p2=46,$lt=0,Glt=8,Klt=11,qlt=14,Wlt=31,Xlt=127,CA=-1,ade=48,sde=97,ide=101,Ylt=102,Jlt=117,Zlt=122,ode=65,lde=69,cde=70,ect=85,tct=90,$o=function(e){return e>=ade&&e<=57},rct=function(e){return e>=55296&&e<=57343},Ux=function(e){return $o(e)||e>=ode&&e<=cde||e>=sde&&e<=Ylt},nct=function(e){return e>=sde&&e<=Zlt},act=function(e){return e>=ode&&e<=tct},sct=function(e){return nct(e)||act(e)},ict=function(e){return e>=Qlt},j_=function(e){return e===_S||e===_lt||e===Nlt},NS=function(e){return sct(e)||ict(e)||e===Tlt},pX=function(e){return NS(e)||$o(e)||e===Kl},oct=function(e){return e>=$lt&&e<=Glt||e===Klt||e>=qlt&&e<=Wlt||e===Xlt},O0=function(e,t){return e!==hw?!1:t!==_S},I_=function(e,t,r){return e===Kl?NS(t)||O0(t,r):NS(e)?!0:!!(e===hw&&O0(e,t))},OI=function(e,t,r){return e===Up||e===Kl?$o(t)?!0:t===p2&&$o(r):$o(e===p2?t:e)},lct=function(e){var t=0,r=1;(e[t]===Up||e[t]===Kl)&&(e[t]===Kl&&(r=-1),t++);for(var n=[];$o(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Qs.apply(void 0,n),10):0;e[t]===p2&&t++;for(var s=[];$o(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(Qs.apply(void 0,s),10):0;(e[t]===lde||e[t]===ide)&&t++;var c=1;(e[t]===Up||e[t]===Kl)&&(e[t]===Kl&&(c=-1),t++);for(var u=[];$o(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Qs.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,c*d)},cct={type:2},uct={type:3},dct={type:4},Act={type:13},fct={type:8},hct={type:21},mct={type:9},pct={type:10},gct={type:11},xct={type:12},vct={type:14},F_={type:23},bct={type:1},yct={type:25},wct={type:24},Ect={type:26},Cct={type:27},_ct={type:28},Nct={type:29},Sct={type:31},WO={type:32},ude=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat($k(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==WO;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case S_:return this.consumeStringToken(S_);case Slt:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(pX(r)||O0(n,a)){var s=I_(r,n,a)?Clt:Elt,i=this.consumeName();return{type:5,value:i,flags:s}}break;case klt:if(this.peekCodePoint(0)===py)return this.consumeCodePoint(),Act;break;case k_:return this.consumeStringToken(k_);case B_:return cct;case gy:return uct;case FI:if(this.peekCodePoint(0)===py)return this.consumeCodePoint(),vct;break;case Up:if(OI(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Hlt:return dct;case Kl:var o=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(OI(o,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(I_(o,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===Kl&&u===Flt)return this.consumeCodePoint(),this.consumeCodePoint(),wct;break;case p2:if(OI(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case fX:if(this.peekCodePoint(0)===FI)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===FI&&(d=this.consumeCodePoint(),d===fX))return this.consumeToken();if(d===CA)return this.consumeToken()}break;case Vlt:return Ect;case zlt:return Cct;case Ilt:if(this.peekCodePoint(0)===jlt&&this.peekCodePoint(1)===Kl&&this.peekCodePoint(2)===Kl)return this.consumeCodePoint(),this.consumeCodePoint(),yct;break;case Olt:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),p=this.peekCodePoint(2);if(I_(f,h,p)){var i=this.consumeName();return{type:7,value:i}}break;case Dlt:return _ct;case hw:if(O0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case Plt:return Nct;case Rlt:if(this.peekCodePoint(0)===py)return this.consumeCodePoint(),fct;break;case Llt:return gct;case Mlt:return xct;case Jlt:case ect:var g=this.peekCodePoint(0),x=this.peekCodePoint(1);return g===Up&&(Ux(x)||x===T_)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case hX:if(this.peekCodePoint(0)===py)return this.consumeCodePoint(),mct;if(this.peekCodePoint(0)===hX)return this.consumeCodePoint(),hct;break;case Ult:if(this.peekCodePoint(0)===py)return this.consumeCodePoint(),pct;break;case CA:return WO}return j_(t)?(this.consumeWhiteSpace(),Sct):$o(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):NS(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Qs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Ux(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===T_&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Qs.apply(void 0,t.map(function(c){return c===T_?ade:c})),16),s=parseInt(Qs.apply(void 0,t.map(function(c){return c===T_?cde:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Qs.apply(void 0,t),16);if(this.peekCodePoint(0)===Kl&&Ux(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];Ux(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(Qs.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===B_?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===B_?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===CA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===k_||r===S_){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===CA||this.peekCodePoint(0)===gy)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),F_)}for(;;){var a=this.consumeCodePoint();if(a===CA||a===gy)return{type:22,value:Qs.apply(void 0,t)};if(j_(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===CA||this.peekCodePoint(0)===gy?(this.consumeCodePoint(),{type:22,value:Qs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),F_);if(a===S_||a===k_||a===B_||oct(a))return this.consumeBadUrlRemnants(),F_;if(a===hw)if(O0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),F_;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;j_(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===gy||t===CA)return;O0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Qs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===CA||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===_S)return this._value.splice(0,n),bct;if(a===hw){var s=this._value[n+1];s!==CA&&s!==void 0&&(s===_S?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):O0(a,s)&&(r+=this.consumeStringSlice(n),r+=Qs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=AE,n=this.peekCodePoint(0);for((n===Up||n===Kl)&&t.push(this.consumeCodePoint());$o(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===p2&&$o(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=AX;$o(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===lde||n===ide)&&((a===Up||a===Kl)&&$o(s)||$o(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=AX;$o(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[lct(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(I_(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===Blt?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Ux(t)){for(var r=Qs(t);Ux(this.peekCodePoint(0))&&r.length<6;)r+=Qs(this.consumeCodePoint());j_(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||rct(n)||n>1114111?mX:n}return t===CA?mX:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(pX(r))t+=Qs(r);else if(O0(r,this.peekCodePoint(0)))t+=Qs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),dde=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new ude;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||Bct(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?WO:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),fE=function(e){return e.type===15},ab=function(e){return e.type===17},wa=function(e){return e.type===20},kct=function(e){return e.type===0},XO=function(e,t){return wa(e)&&e.value===t},Ade=function(e){return e.type!==31},E1=function(e){return e.type!==31&&e.type!==4},lf=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},Bct=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Tm=function(e){return e.type===17||e.type===15},di=function(e){return e.type===16||Tm(e)},fde=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},yo={type:17,number:0,flags:AE},xM={type:16,number:50,flags:AE},W0={type:16,number:100,flags:AE},Uy=function(e,t,r){var n=e[0],a=e[1];return[Da(n,t),Da(typeof a<"u"?a:n,r)]},Da=function(e,t){if(e.type===16)return e.number/100*t;if(fE(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},hde="deg",mde="grad",pde="rad",gde="turn",Gk={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case hde:return Math.PI*t.number/180;case mde:return Math.PI/200*t.number;case pde:return t.number;case gde:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},xde=function(e){return e.type===15&&(e.unit===hde||e.unit===mde||e.unit===pde||e.unit===gde)},vde=function(e){var t=e.filter(wa).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[yo,yo];case"to top":case"bottom":return Du(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[yo,W0];case"to right":case"left":return Du(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[W0,W0];case"to bottom":case"top":return Du(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[W0,yo];case"to left":case"right":return Du(270)}return 0},Du=function(e){return Math.PI*e/180},cm={name:"color",parse:function(e,t){if(t.type===18){var r=Tct[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return X0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return X0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return X0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return X0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var o=dh[t.value.toUpperCase()];if(typeof o<"u")return o}return dh.TRANSPARENT}},um=function(e){return(255&e)===0},Ui=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},X0=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},gX=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},xX=function(e,t){var r=t.filter(E1);if(r.length===3){var n=r.map(gX),a=n[0],s=n[1],i=n[2];return X0(a,s,i,1)}if(r.length===4){var o=r.map(gX),a=o[0],s=o[1],i=o[2],c=o[3];return X0(a,s,i,c)}return 0};function DI(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var vX=function(e,t){var r=t.filter(E1),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?Du(n.number):Gk.parse(e,n))/(Math.PI*2),c=di(a)?a.number/100:0,u=di(s)?s.number/100:0,d=typeof i<"u"&&di(i)?Da(i,1):1;if(c===0)return X0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,p=DI(h,f,o+1/3),g=DI(h,f,o),x=DI(h,f,o-1/3);return X0(p*255,g*255,x*255,d)},Tct={hsl:vX,hsla:vX,rgb:xX,rgba:xX},mw=function(e,t){return cm.parse(e,dde.create(t).parseComponentValue())},dh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},jct={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Ict={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Kk=function(e,t){var r=cm.parse(e,t[0]),n=t[1];return n&&di(n)?{color:r,stop:n}:{color:r,stop:null}},bX=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=yo),n.stop===null&&(n.stop=W0);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(o!==null){var c=Da(o,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],p=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=p*g;u=null}}return e.map(function(x,b){var y=x.color;return{color:y,stop:Math.max(Math.min(1,a[b]/t),0)}})},Fct=function(e,t,r){var n=t/2,a=r/2,s=Da(e[0],t)-n,i=a-Da(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},Oct=function(e,t,r){var n=typeof e=="number"?e:Fct(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,o=a/2,c=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-c,i+c]},vd=function(e,t){return Math.sqrt(e*e+t*t)},yX=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,o){var c=o[0],u=o[1],d=vd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},Dct=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(vd(t,r),vd(t,r-a),vd(t-n,r),vd(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=yX(n,a,t,r,!0),u=c[0],d=c[1];s=vd(u-t,(d-r)/o),i=o*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(vd(t,r),vd(t,r-a),vd(t-n,r),vd(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=yX(n,a,t,r,!1),u=f[0],d=f[1];s=vd(u-t,(d-r)/o),i=o*s}break}return Array.isArray(e.size)&&(s=Da(e.size[0],n),i=e.size.length===2?Da(e.size[1],a):s),[s,i]},Pct=function(e,t){var r=Du(180),n=[];return lf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=vde(a);return}else if(xde(i)){r=Gk.parse(e,i);return}}var o=Kk(e,a);n.push(o)}),{angle:r,stops:n,type:1}},O_=function(e,t){var r=Du(180),n=[];return lf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=vde(a);return}else if(xde(i)){r=(Gk.parse(e,i)+Du(270))%Du(360);return}}var o=Kk(e,a);n.push(o)}),{angle:r,stops:n,type:1}},Rct=function(e,t){var r=Du(180),n=[],a=1,s=0,i=3,o=[];return lf(t).forEach(function(c,u){var d=c[0];if(u===0){if(wa(d)&&d.value==="linear"){a=1;return}else if(wa(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=cm.parse(e,d.values[0]);n.push({stop:yo,color:f})}else if(d.name==="to"){var f=cm.parse(e,d.values[0]);n.push({stop:W0,color:f})}else if(d.name==="color-stop"){var h=d.values.filter(E1);if(h.length===2){var f=cm.parse(e,h[1]),p=h[0];ab(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:f})}}}}),a===1?{angle:(r+Du(180))%Du(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},bde="closest-side",yde="farthest-side",wde="closest-corner",Ede="farthest-corner",Cde="circle",_de="ellipse",Nde="cover",Sde="contain",Lct=function(e,t){var r=0,n=3,a=[],s=[];return lf(t).forEach(function(i,o){var c=!0;if(o===0){var u=!1;c=i.reduce(function(f,h){if(u)if(wa(h))switch(h.value){case"center":return s.push(xM),f;case"top":case"left":return s.push(yo),f;case"right":case"bottom":return s.push(W0),f}else(di(h)||Tm(h))&&s.push(h);else if(wa(h))switch(h.value){case Cde:return r=0,!1;case _de:return r=1,!1;case"at":return u=!0,!1;case bde:return n=0,!1;case Nde:case yde:return n=1,!1;case Sde:case wde:return n=2,!1;case Ede:return n=3,!1}else if(Tm(h)||di(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=Kk(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},D_=function(e,t){var r=0,n=3,a=[],s=[];return lf(t).forEach(function(i,o){var c=!0;if(o===0?c=i.reduce(function(d,f){if(wa(f))switch(f.value){case"center":return s.push(xM),!1;case"top":case"left":return s.push(yo),!1;case"right":case"bottom":return s.push(W0),!1}else if(di(f)||Tm(f))return s.push(f),!1;return d},c):o===1&&(c=i.reduce(function(d,f){if(wa(f))switch(f.value){case Cde:return r=0,!1;case _de:return r=1,!1;case Sde:case bde:return n=0,!1;case yde:return n=1,!1;case wde:return n=2,!1;case Nde:case Ede:return n=3,!1}else if(Tm(f)||di(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=Kk(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},Mct=function(e){return e.type===1},Uct=function(e){return e.type===2},vM={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=kde[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Qct(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!kde[e.name])}var kde={"linear-gradient":Pct,"-moz-linear-gradient":O_,"-ms-linear-gradient":O_,"-o-linear-gradient":O_,"-webkit-linear-gradient":O_,"radial-gradient":Lct,"-moz-radial-gradient":D_,"-ms-radial-gradient":D_,"-o-radial-gradient":D_,"-webkit-radial-gradient":D_,"-webkit-gradient":Rct},Hct={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return E1(n)&&Qct(n)}).map(function(n){return vM.parse(e,n)})}},Vct={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(wa(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},zct={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return lf(t).map(function(r){return r.filter(di)}).map(fde)}},$ct={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return lf(t).map(function(r){return r.filter(wa).map(function(n){return n.value}).join(" ")}).map(Gct)}},Gct=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Pv;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Pv||(Pv={}));var Kct={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return lf(t).map(function(r){return r.filter(qct)})}},qct=function(e){return wa(e)||di(e)},qk=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Wct=qk("top"),Xct=qk("right"),Yct=qk("bottom"),Jct=qk("left"),Wk=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return fde(r.filter(di))}}},Zct=Wk("top-left"),eut=Wk("top-right"),tut=Wk("bottom-right"),rut=Wk("bottom-left"),Xk=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},nut=Xk("top"),aut=Xk("right"),sut=Xk("bottom"),iut=Xk("left"),Yk=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return fE(r)?r.number:0}}},out=Yk("top"),lut=Yk("right"),cut=Yk("bottom"),uut=Yk("left"),dut={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Aut={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},fut={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).reduce(function(r,n){return r|hut(n.value)},0)}},hut=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},mut={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},put={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},SS;(function(e){e.NORMAL="normal",e.STRICT="strict"})(SS||(SS={}));var gut={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return SS.STRICT;case"normal":default:return SS.NORMAL}}},xut={name:"line-height",initialValue:"normal",prefix:!1,type:4},wX=function(e,t){return wa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:di(e)?Da(e,t):t},vut={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:vM.parse(e,t)}},but={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},YO={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Jk=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},yut=Jk("top"),wut=Jk("right"),Eut=Jk("bottom"),Cut=Jk("left"),_ut={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Nut={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},Zk=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Sut=Zk("top"),kut=Zk("right"),But=Zk("bottom"),Tut=Zk("left"),jut={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Iut={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Fut={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&XO(t[0],"none")?[]:lf(t).map(function(r){for(var n={color:dh.TRANSPARENT,offsetX:yo,offsetY:yo,blur:yo},a=0,s=0;s<r.length;s++){var i=r[s];Tm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=cm.parse(e,i)}return n})}},Out={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Dut={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=Lut[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},Put=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},Rut=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,o]:null},Lut={matrix:Put,matrix3d:Rut},EX={type:16,number:50,flags:AE},Mut=[EX,EX],Uut={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(di);return r.length!==2?Mut:[r[0],r[1]]}},Qut={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},pw;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(pw||(pw={}));var Hut={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return pw.BREAK_ALL;case"keep-all":return pw.KEEP_ALL;case"normal":default:return pw.NORMAL}}},Vut={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(ab(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Bde={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},zut={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return ab(t)?t.number:1}},$ut={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Gut={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(wa).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},Kut={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},qut={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Wut={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(ab(t))return t.number;if(wa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},Xut={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(wa).map(function(r){return r.value})}},Yut={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ei=function(e,t){return(e&t)!==0},Jut={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},Zut={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(Ade),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var c=o&&ab(o)?o.number:1;n.push({counter:i.value,increment:c})}}return n}},edt={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(Ade),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(wa(s)&&s.value!=="none"){var o=i&&ab(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},tdt={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(fE).map(function(r){return Bde.parse(e,r)})}},rdt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(kct);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},CX=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},ndt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&XO(t[0],"none")?[]:lf(t).map(function(r){for(var n={color:255,offsetX:yo,offsetY:yo,blur:yo,spread:yo,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];XO(i,"inset")?n.inset=!0:Tm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=cm.parse(e,i)}return n})}},adt={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(wa).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},sdt={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},idt={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return fE(t)?t.number:0}},odt=function(){function e(t,r){var n,a;this.animationDuration=or(t,tdt,r.animationDuration),this.backgroundClip=or(t,jct,r.backgroundClip),this.backgroundColor=or(t,Ict,r.backgroundColor),this.backgroundImage=or(t,Hct,r.backgroundImage),this.backgroundOrigin=or(t,Vct,r.backgroundOrigin),this.backgroundPosition=or(t,zct,r.backgroundPosition),this.backgroundRepeat=or(t,$ct,r.backgroundRepeat),this.backgroundSize=or(t,Kct,r.backgroundSize),this.borderTopColor=or(t,Wct,r.borderTopColor),this.borderRightColor=or(t,Xct,r.borderRightColor),this.borderBottomColor=or(t,Yct,r.borderBottomColor),this.borderLeftColor=or(t,Jct,r.borderLeftColor),this.borderTopLeftRadius=or(t,Zct,r.borderTopLeftRadius),this.borderTopRightRadius=or(t,eut,r.borderTopRightRadius),this.borderBottomRightRadius=or(t,tut,r.borderBottomRightRadius),this.borderBottomLeftRadius=or(t,rut,r.borderBottomLeftRadius),this.borderTopStyle=or(t,nut,r.borderTopStyle),this.borderRightStyle=or(t,aut,r.borderRightStyle),this.borderBottomStyle=or(t,sut,r.borderBottomStyle),this.borderLeftStyle=or(t,iut,r.borderLeftStyle),this.borderTopWidth=or(t,out,r.borderTopWidth),this.borderRightWidth=or(t,lut,r.borderRightWidth),this.borderBottomWidth=or(t,cut,r.borderBottomWidth),this.borderLeftWidth=or(t,uut,r.borderLeftWidth),this.boxShadow=or(t,ndt,r.boxShadow),this.color=or(t,dut,r.color),this.direction=or(t,Aut,r.direction),this.display=or(t,fut,r.display),this.float=or(t,mut,r.cssFloat),this.fontFamily=or(t,Kut,r.fontFamily),this.fontSize=or(t,qut,r.fontSize),this.fontStyle=or(t,Yut,r.fontStyle),this.fontVariant=or(t,Xut,r.fontVariant),this.fontWeight=or(t,Wut,r.fontWeight),this.letterSpacing=or(t,put,r.letterSpacing),this.lineBreak=or(t,gut,r.lineBreak),this.lineHeight=or(t,xut,r.lineHeight),this.listStyleImage=or(t,vut,r.listStyleImage),this.listStylePosition=or(t,but,r.listStylePosition),this.listStyleType=or(t,YO,r.listStyleType),this.marginTop=or(t,yut,r.marginTop),this.marginRight=or(t,wut,r.marginRight),this.marginBottom=or(t,Eut,r.marginBottom),this.marginLeft=or(t,Cut,r.marginLeft),this.opacity=or(t,zut,r.opacity);var s=or(t,_ut,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=or(t,Nut,r.overflowWrap),this.paddingTop=or(t,Sut,r.paddingTop),this.paddingRight=or(t,kut,r.paddingRight),this.paddingBottom=or(t,But,r.paddingBottom),this.paddingLeft=or(t,Tut,r.paddingLeft),this.paintOrder=or(t,adt,r.paintOrder),this.position=or(t,Iut,r.position),this.textAlign=or(t,jut,r.textAlign),this.textDecorationColor=or(t,$ut,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=or(t,Gut,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=or(t,Fut,r.textShadow),this.textTransform=or(t,Out,r.textTransform),this.transform=or(t,Dut,r.transform),this.transformOrigin=or(t,Uut,r.transformOrigin),this.visibility=or(t,Qut,r.visibility),this.webkitTextStrokeColor=or(t,sdt,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=or(t,idt,r.webkitTextStrokeWidth),this.wordBreak=or(t,Hut,r.wordBreak),this.zIndex=or(t,Vut,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return um(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Ei(this.display,4)||Ei(this.display,33554432)||Ei(this.display,268435456)||Ei(this.display,536870912)||Ei(this.display,67108864)||Ei(this.display,134217728)},e}(),ldt=function(){function e(t,r){this.content=or(t,Jut,r.content),this.quotes=or(t,rdt,r.quotes)}return e}(),_X=function(){function e(t,r){this.counterIncrement=or(t,Zut,r.counterIncrement),this.counterReset=or(t,edt,r.counterReset)}return e}(),or=function(e,t,r){var n=new ude,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new dde(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,wa(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return Gk.parse(e,s.parseComponentValue());case"color":return cm.parse(e,s.parseComponentValue());case"image":return vM.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return Tm(o)?o:yo;case"length-percentage":var c=s.parseComponentValue();return di(c)?c:yo;case"time":return Bde.parse(e,s.parseComponentValue())}break}},cdt="data-html2canvas-debug",udt=function(e){var t=e.getAttribute(cdt);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},JO=function(e,t){var r=udt(e);return r===1||t===r},cf=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,JO(r,3))debugger;this.styles=new odt(t,window.getComputedStyle(r,null)),tD(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=zk(this.context,r),JO(r,4)&&(this.flags|=16)}return e}(),ddt="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",NX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var P_=0;P_<NX.length;P_++)Qy[NX.charCodeAt(P_)]=P_;var Adt=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=Qy[e.charCodeAt(n)],i=Qy[e.charCodeAt(n+1)],o=Qy[e.charCodeAt(n+2)],c=Qy[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},fdt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},hdt=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},ng=5,bM=11,PI=2,mdt=bM-ng,Tde=65536>>ng,pdt=1<<ng,RI=pdt-1,gdt=1024>>ng,xdt=Tde+gdt,vdt=xdt,bdt=32,ydt=vdt+bdt,wdt=65536>>bM,Edt=1<<mdt,Cdt=Edt-1,SX=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},_dt=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},Ndt=function(e,t){var r=Adt(e),n=Array.isArray(r)?hdt(r):new Uint32Array(r),a=Array.isArray(r)?fdt(r):new Uint16Array(r),s=24,i=SX(a,s/2,n[4]/2),o=n[5]===2?SX(a,(s+n[4])/2):_dt(n,Math.ceil((s+n[4])/4));return new Sdt(n[0],n[1],n[2],n[3],i,o)},Sdt=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>ng],r=(r<<PI)+(t&RI),this.data[r];if(t<=65535)return r=this.index[Tde+(t-55296>>ng)],r=(r<<PI)+(t&RI),this.data[r];if(t<this.highStart)return r=ydt-wdt+(t>>bM),r=this.index[r],r+=t>>ng&Cdt,r=this.index[r],r=(r<<PI)+(t&RI),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),kX="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kdt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var R_=0;R_<kX.length;R_++)kdt[kX.charCodeAt(R_)]=R_;var Bdt=1,LI=2,MI=3,BX=4,TX=5,Tdt=7,jX=8,UI=9,QI=10,IX=11,FX=12,OX=13,DX=14,HI=15,jdt=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Idt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},Fdt=Ndt(ddt),Nu="",VI="",Odt=function(e){return Fdt.get(e)},Ddt=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===LI&&i===MI)return Nu;if(s===LI||s===MI||s===BX||i===LI||i===MI||i===BX)return VI;if(s===jX&&[jX,UI,IX,FX].indexOf(i)!==-1||(s===IX||s===UI)&&(i===UI||i===QI)||(s===FX||s===QI)&&i===QI||i===OX||i===TX||i===Tdt||s===Bdt)return Nu;if(s===OX&&i===DX){for(;a===TX;)a=t[--n];if(a===DX)return Nu}if(s===HI&&i===HI){for(var o=0;a===HI;)o++,a=t[--n];if(o%2===0)return Nu}return VI},Pdt=function(e){var t=jdt(e),r=t.length,n=0,a=0,s=t.map(Odt);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Nu;n<r&&(i=Ddt(t,s,++n))===Nu;);if(i!==Nu||n===r){var o=Idt.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},Rdt=function(e){for(var t=Pdt(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},Ldt=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},Mdt=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=$k(n.data).map(function(c){return Qs(c)}),s=0,i={},o=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return e.body.removeChild(t),o},Udt=function(){return typeof new Image().crossOrigin<"u"},Qdt=function(){return typeof new XMLHttpRequest().responseType=="string"},Hdt=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},PX=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},Vdt=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=ZO(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),RX(i).then(function(o){n.drawImage(o,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",PX(c)?RX(ZO(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),PX(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},ZO=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},RX=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},ho={get SUPPORT_RANGE_BOUNDS(){var e=Ldt(document);return Object.defineProperty(ho,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=ho.SUPPORT_RANGE_BOUNDS&&Mdt(document);return Object.defineProperty(ho,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=Hdt(document);return Object.defineProperty(ho,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?Vdt(document):Promise.resolve(!1);return Object.defineProperty(ho,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=Udt();return Object.defineProperty(ho,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=Qdt();return Object.defineProperty(ho,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ho,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ho,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},gw=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),zdt=function(e,t,r,n){var a=Kdt(t,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(ho.SUPPORT_RANGE_BOUNDS){var c=LX(n,i,o.length).getClientRects();if(c.length>1){var u=yM(o),d=0;u.forEach(function(h){s.push(new gw(h,kh.fromDOMRectList(e,LX(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new gw(o,kh.fromDOMRectList(e,c)))}else{var f=n.splitText(o.length);s.push(new gw(o,$dt(e,n))),n=f}else ho.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},$dt=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=zk(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return kh.EMPTY},LX=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},yM=function(e){if(ho.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return Rdt(e)},Gdt=function(e,t){if(ho.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return Wdt(e,t)},Kdt=function(e,t){return t.letterSpacing!==0?yM(e):Gdt(e,t)},qdt=[32,160,4961,65792,65793,4153,4241],Wdt=function(e,t){for(var r=wlt(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=$k(i),c="";o.forEach(function(u){qdt.indexOf(u)===-1?c+=Qs(u):(c.length&&n.push(c),n.push(Qs(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},Xdt=function(){function e(t,r,n){this.text=Ydt(r.data,n.textTransform),this.textBounds=zdt(t,this.text,n,r)}return e}(),Ydt=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Jdt,Zdt);case 2:return e.toUpperCase();default:return e}},Jdt=/(^|\s|:|-|\(|\))([a-z])/g,Zdt=function(e,t,r){return e.length>0?t+r.toUpperCase():e},jde=function(e){$d(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(cf),Ide=function(e){$d(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(cf),Fde=function(e){$d(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=zk(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(cf),Ode=function(e){$d(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(cf),eD=function(e){$d(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(cf),eAt=[{type:15,flags:0,unit:"px",number:3}],tAt=[{type:16,flags:0,number:50}],rAt=function(e){return e.width>e.height?new kh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new kh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},nAt=function(e){var t=e.type===aAt?new Array(e.value.length+1).join(""):e.value;return t.length===0?e.placeholder||"":t},kS="checkbox",BS="radio",aAt="password",MX=707406591,wM=function(e){$d(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=nAt(n),(a.type===kS||a.type===BS)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=rAt(a.bounds)),a.type){case kS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=eAt;break;case BS:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=tAt;break}return a}return t}(cf),Dde=function(e){$d(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(cf),Pde=function(e){$d(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(cf),Rde=function(e){$d(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=Mde(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?mw(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):dh.TRANSPARENT,i=n.contentWindow.document.body?mw(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):dh.TRANSPARENT;a.backgroundColor=um(s)?um(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(cf),sAt=["OL","UL","MENU"],B5=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,Ude(a)&&a.data.trim().length>0)r.textNodes.push(new Xdt(e,a,r.styles));else if(Av(a))if(zde(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return B5(e,o,r,n)});else{var i=Lde(e,a);i.styles.isVisible()&&(iAt(a,i,n)?i.flags|=4:oAt(i.styles)&&(i.flags|=2),sAt.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?B5(e,a.shadowRoot,i,n):!TS(a)&&!Qde(a)&&!jS(a)&&B5(e,a,i,n))}},Lde=function(e,t){return rD(t)?new jde(e,t):Hde(t)?new Ide(e,t):Qde(t)?new Fde(e,t):lAt(t)?new Ode(e,t):cAt(t)?new eD(e,t):uAt(t)?new wM(e,t):jS(t)?new Dde(e,t):TS(t)?new Pde(e,t):Vde(t)?new Rde(e,t):new cf(e,t)},Mde=function(e,t){var r=Lde(e,t);return r.flags|=4,B5(e,t,r,r),r},iAt=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||EM(e)&&r.styles.isTransparent()},oAt=function(e){return e.isPositioned()||e.isFloating()},Ude=function(e){return e.nodeType===Node.TEXT_NODE},Av=function(e){return e.nodeType===Node.ELEMENT_NODE},tD=function(e){return Av(e)&&typeof e.style<"u"&&!T5(e)},T5=function(e){return typeof e.className=="object"},lAt=function(e){return e.tagName==="LI"},cAt=function(e){return e.tagName==="OL"},uAt=function(e){return e.tagName==="INPUT"},dAt=function(e){return e.tagName==="HTML"},Qde=function(e){return e.tagName==="svg"},EM=function(e){return e.tagName==="BODY"},Hde=function(e){return e.tagName==="CANVAS"},UX=function(e){return e.tagName==="VIDEO"},rD=function(e){return e.tagName==="IMG"},Vde=function(e){return e.tagName==="IFRAME"},QX=function(e){return e.tagName==="STYLE"},AAt=function(e){return e.tagName==="SCRIPT"},TS=function(e){return e.tagName==="TEXTAREA"},jS=function(e){return e.tagName==="SELECT"},zde=function(e){return e.tagName==="SLOT"},HX=function(e){return e.tagName.indexOf("-")>0},fAt=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var c=r.counters[o.counter];c&&o.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var c=r.counters[o.counter];i.push(o.counter),c||(c=r.counters[o.counter]=[]),c.push(o.reset)}),i},e}(),VX={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},zX={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},hAt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},mAt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Qx=function(e,t,r,n,a,s){return e<t||e>r?g2(e,a,s.length>0):n.integers.reduce(function(i,o,c){for(;e>=o;)e-=o,i+=n.values[c];return i},"")+s},$de=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Ls=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+($de(Math.abs(e),s,n,function(i){return Qs(Math.floor(i%s)+t)})+a)},mp=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return $de(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},Jx=1,B0=2,T0=4,Hy=8,Vf=function(e,t,r,n,a,s){if(e<-9999||e>9999)return g2(e,4,a.length>0);var i=Math.abs(e),o=a;if(i===0)return t[0]+o;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&Ei(s,Jx)&&o!==""?o=t[u]+o:u>1||u===1&&c===0||u===1&&c===1&&Ei(s,B0)||u===1&&c===1&&Ei(s,T0)&&e>100||u===1&&c>1&&Ei(s,Hy)?o=t[u]+(c>0?r[c-1]:"")+o:u===1&&c>0&&(o=r[c-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},$X="",GX="",KX="",zI="",g2=function(e,t,r){var n=r?". ":"",a=r?"":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return""+i;case 1:return""+i;case 2:return""+i;case 5:var o=Ls(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return mp(e,"",a);case 6:return Qx(e,1,3999,VX,3,n).toLowerCase();case 7:return Qx(e,1,3999,VX,3,n);case 8:return Ls(e,945,969,!1,n);case 9:return Ls(e,97,122,!1,n);case 10:return Ls(e,65,90,!1,n);case 11:return Ls(e,1632,1641,!0,n);case 12:case 49:return Qx(e,1,9999,zX,3,n);case 35:return Qx(e,1,9999,zX,3,n).toLowerCase();case 13:return Ls(e,2534,2543,!0,n);case 14:case 30:return Ls(e,6112,6121,!0,n);case 15:return mp(e,"",a);case 16:return mp(e,"",a);case 17:case 48:return Vf(e,"",$X,"",a,B0|T0|Hy);case 47:return Vf(e,"",GX,"",a,Jx|B0|T0|Hy);case 42:return Vf(e,"",$X,"",a,B0|T0|Hy);case 41:return Vf(e,"",GX,"",a,Jx|B0|T0|Hy);case 26:return Vf(e,"","",KX,a,0);case 25:return Vf(e,"","",KX,a,Jx|B0|T0);case 31:return Vf(e,"","",zI,s,Jx|B0|T0);case 33:return Vf(e,"","",zI,s,0);case 32:return Vf(e,"","",zI,s,Jx|B0|T0);case 18:return Ls(e,2406,2415,!0,n);case 20:return Qx(e,1,19999,mAt,3,n);case 21:return Ls(e,2790,2799,!0,n);case 22:return Ls(e,2662,2671,!0,n);case 22:return Qx(e,1,10999,hAt,3,n);case 23:return mp(e,"");case 24:return mp(e,"");case 27:return Ls(e,3302,3311,!0,n);case 28:return mp(e,"",a);case 29:return mp(e,"",a);case 34:return Ls(e,3792,3801,!0,n);case 37:return Ls(e,6160,6169,!0,n);case 38:return Ls(e,4160,4169,!0,n);case 39:return Ls(e,2918,2927,!0,n);case 40:return Ls(e,1776,1785,!0,n);case 43:return Ls(e,3046,3055,!0,n);case 44:return Ls(e,3174,3183,!0,n);case 45:return Ls(e,3664,3673,!0,n);case 46:return Ls(e,3872,3881,!0,n);case 3:default:return Ls(e,48,57,!0,n)}},Gde="data-html2canvas-ignore",qX=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new fAt,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=pAt(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,o=a.contentWindow,c=o.document,u=vAt(a).then(function(){return fl(n,void 0,void 0,function(){var d,f;return Uo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(EAt),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,xAt(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(yAt(document.doctype)+"<html></html>"),wAt(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(JO(t,2))debugger;if(Hde(t))return this.createCanvasClone(t);if(UX(t))return this.createVideoClone(t);if(QX(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return rD(r)&&(rD(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),HX(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return $I(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var c=o.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!Av(r)||!AAt(r)&&!r.hasAttribute(Gde)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Av(r)||!QX(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Av(s)&&zde(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(Ude(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Av(t)&&(tD(t)||T5(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&tD(a)&&(this.clonedReferenceElement=a),EM(a)&&NAt(a);var c=this.counters.parse(new _X(this.context,s)),u=this.resolvePseudoContent(t,a,i,xw.BEFORE);HX(t)&&(r=!0),UX(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,o,xw.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||T5(t))&&!Vde(t)||r)&&$I(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(TS(t)||jS(t))&&(TS(a)||jS(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new _X(this.context,n));var c=new ldt(this.context,n),u=o.createElement("html2canvaspseudoelement");$I(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(o.createTextNode(f.value));else if(f.type===22){var h=o.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var p=f.values.filter(wa);p.length&&u.appendChild(o.createTextNode(t.getAttribute(p[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter(E1),x=g[0],b=g[1];if(x&&wa(x)){var y=s.counters.getCounterValue(x.value),w=b&&wa(b)?YO.parse(s.context,b.value):3;u.appendChild(o.createTextNode(g2(y,w,!1)))}}else if(f.name==="counters"){var _=f.values.filter(E1),x=_[0],j=_[1],b=_[2];if(x&&wa(x)){var k=s.counters.getCounterValues(x.value),I=b&&wa(b)?YO.parse(s.context,b.value):3,E=j&&j.type===0?j.value:"",N=k.map(function(P){return g2(P,I,!1)}).join(E);u.appendChild(o.createTextNode(N))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(o.createTextNode(CX(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(CX(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(f.value))}}),u.className=nD+" "+aD;var d=a===xw.BEFORE?" "+nD:" "+aD;return T5(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),xw;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(xw||(xw={}));var pAt=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(Gde,"true"),e.body.appendChild(r),r},gAt=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},xAt=function(e){return Promise.all([].slice.call(e.images,0).map(gAt))},vAt=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},bAt=["all","d","content"],$I=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);bAt.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},yAt=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},wAt=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},EAt=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},CAt=":before",_At=":after",nD="___html2canvas___pseudoelement_before",aD="___html2canvas___pseudoelement_after",WX=`{
    content: "" !important;
    display: none !important;
}`,NAt=function(e){SAt(e,"."+nD+CAt+WX+`
         .`+aD+_At+WX)},SAt=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},Kde=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),kAt=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(KI(t)||IAt(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return fl(this,void 0,void 0,function(){var r,n,a,s,i=this;return Uo(this,function(o){switch(o.label){case 0:return r=Kde.isSameOrigin(t),n=!GI(t)&&this._options.useCORS===!0&&ho.SUPPORT_CORS_IMAGES&&!r,a=!GI(t)&&!r&&!KI(t)&&typeof this._options.proxy=="string"&&ho.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!GI(t)&&!KI(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(FAt(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var o=ho.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(o==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),BAt=/^data:image\/svg\+xml/i,TAt=/^data:image\/.*;base64,/i,jAt=/^data:image\/.*/i,IAt=function(e){return ho.SUPPORT_SVG_DRAWING||!OAt(e)},GI=function(e){return jAt.test(e)},FAt=function(e){return TAt.test(e)},KI=function(e){return e.substr(0,4)==="blob"},OAt=function(e){return e.substr(-3).toLowerCase()==="svg"||BAt.test(e)},ar=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Hx=function(e,t,r){return new ar(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},L_=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=Hx(this.start,this.startControl,t),a=Hx(this.startControl,this.endControl,t),s=Hx(this.endControl,this.end,t),i=Hx(n,a,t),o=Hx(a,s,t),c=Hx(i,o,t);return r?new e(this.start,n,i,c):new e(c,o,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Bu=function(e){return e.type===1},DAt=function(){function e(t){var r=t.styles,n=t.bounds,a=Uy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=Uy(r.borderTopRightRadius,n.width,n.height),c=o[0],u=o[1],d=Uy(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],p=Uy(r.borderBottomLeftRadius,n.width,n.height),g=p[0],x=p[1],b=[];b.push((s+c)/n.width),b.push((g+f)/n.width),b.push((i+x)/n.height),b.push((u+h)/n.height);var y=Math.max.apply(Math,b);y>1&&(s/=y,i/=y,c/=y,u/=y,f/=y,h/=y,g/=y,x/=y);var w=n.width-c,_=n.height-h,j=n.width-f,k=n.height-x,I=r.borderTopWidth,E=r.borderRightWidth,N=r.borderBottomWidth,B=r.borderLeftWidth,R=Da(r.paddingTop,t.bounds.width),P=Da(r.paddingRight,t.bounds.width),D=Da(r.paddingBottom,t.bounds.width),L=Da(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Xa(n.left+B/3,n.top+I/3,s-B/3,i-I/3,na.TOP_LEFT):new ar(n.left+B/3,n.top+I/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Xa(n.left+w,n.top+I/3,c-E/3,u-I/3,na.TOP_RIGHT):new ar(n.left+n.width-E/3,n.top+I/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?Xa(n.left+j,n.top+_,f-E/3,h-N/3,na.BOTTOM_RIGHT):new ar(n.left+n.width-E/3,n.top+n.height-N/3),this.bottomLeftBorderDoubleOuterBox=g>0||x>0?Xa(n.left+B/3,n.top+k,g-B/3,x-N/3,na.BOTTOM_LEFT):new ar(n.left+B/3,n.top+n.height-N/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Xa(n.left+B*2/3,n.top+I*2/3,s-B*2/3,i-I*2/3,na.TOP_LEFT):new ar(n.left+B*2/3,n.top+I*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Xa(n.left+w,n.top+I*2/3,c-E*2/3,u-I*2/3,na.TOP_RIGHT):new ar(n.left+n.width-E*2/3,n.top+I*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?Xa(n.left+j,n.top+_,f-E*2/3,h-N*2/3,na.BOTTOM_RIGHT):new ar(n.left+n.width-E*2/3,n.top+n.height-N*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||x>0?Xa(n.left+B*2/3,n.top+k,g-B*2/3,x-N*2/3,na.BOTTOM_LEFT):new ar(n.left+B*2/3,n.top+n.height-N*2/3),this.topLeftBorderStroke=s>0||i>0?Xa(n.left+B/2,n.top+I/2,s-B/2,i-I/2,na.TOP_LEFT):new ar(n.left+B/2,n.top+I/2),this.topRightBorderStroke=s>0||i>0?Xa(n.left+w,n.top+I/2,c-E/2,u-I/2,na.TOP_RIGHT):new ar(n.left+n.width-E/2,n.top+I/2),this.bottomRightBorderStroke=f>0||h>0?Xa(n.left+j,n.top+_,f-E/2,h-N/2,na.BOTTOM_RIGHT):new ar(n.left+n.width-E/2,n.top+n.height-N/2),this.bottomLeftBorderStroke=g>0||x>0?Xa(n.left+B/2,n.top+k,g-B/2,x-N/2,na.BOTTOM_LEFT):new ar(n.left+B/2,n.top+n.height-N/2),this.topLeftBorderBox=s>0||i>0?Xa(n.left,n.top,s,i,na.TOP_LEFT):new ar(n.left,n.top),this.topRightBorderBox=c>0||u>0?Xa(n.left+w,n.top,c,u,na.TOP_RIGHT):new ar(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?Xa(n.left+j,n.top+_,f,h,na.BOTTOM_RIGHT):new ar(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||x>0?Xa(n.left,n.top+k,g,x,na.BOTTOM_LEFT):new ar(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Xa(n.left+B,n.top+I,Math.max(0,s-B),Math.max(0,i-I),na.TOP_LEFT):new ar(n.left+B,n.top+I),this.topRightPaddingBox=c>0||u>0?Xa(n.left+Math.min(w,n.width-E),n.top+I,w>n.width+E?0:Math.max(0,c-E),Math.max(0,u-I),na.TOP_RIGHT):new ar(n.left+n.width-E,n.top+I),this.bottomRightPaddingBox=f>0||h>0?Xa(n.left+Math.min(j,n.width-B),n.top+Math.min(_,n.height-N),Math.max(0,f-E),Math.max(0,h-N),na.BOTTOM_RIGHT):new ar(n.left+n.width-E,n.top+n.height-N),this.bottomLeftPaddingBox=g>0||x>0?Xa(n.left+B,n.top+Math.min(k,n.height-N),Math.max(0,g-B),Math.max(0,x-N),na.BOTTOM_LEFT):new ar(n.left+B,n.top+n.height-N),this.topLeftContentBox=s>0||i>0?Xa(n.left+B+L,n.top+I+R,Math.max(0,s-(B+L)),Math.max(0,i-(I+R)),na.TOP_LEFT):new ar(n.left+B+L,n.top+I+R),this.topRightContentBox=c>0||u>0?Xa(n.left+Math.min(w,n.width+B+L),n.top+I+R,w>n.width+B+L?0:c-B+L,u-(I+R),na.TOP_RIGHT):new ar(n.left+n.width-(E+P),n.top+I+R),this.bottomRightContentBox=f>0||h>0?Xa(n.left+Math.min(j,n.width-(B+L)),n.top+Math.min(_,n.height+I+R),Math.max(0,f-(E+P)),h-(N+D),na.BOTTOM_RIGHT):new ar(n.left+n.width-(E+P),n.top+n.height-(N+D)),this.bottomLeftContentBox=g>0||x>0?Xa(n.left+B+L,n.top+k,Math.max(0,g-(B+L)),x-(N+D),na.BOTTOM_LEFT):new ar(n.left+B+L,n.top+n.height-(N+D))}return e}(),na;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(na||(na={}));var Xa=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,c=e+r,u=t+n;switch(a){case na.TOP_LEFT:return new L_(new ar(e,u),new ar(e,u-o),new ar(c-i,t),new ar(c,t));case na.TOP_RIGHT:return new L_(new ar(e,t),new ar(e+i,t),new ar(c,u-o),new ar(c,u));case na.BOTTOM_RIGHT:return new L_(new ar(c,t),new ar(c,t+o),new ar(e+i,u),new ar(e,u));case na.BOTTOM_LEFT:default:return new L_(new ar(c,u),new ar(c-i,u),new ar(e,t+o),new ar(e,t))}},IS=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},PAt=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},FS=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},RAt=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),M_=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),LAt=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),MAt=function(e){return e.type===0},qde=function(e){return e.type===1},UAt=function(e){return e.type===2},XX=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},QAt=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},Wde=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Xde=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new DAt(this.container),this.container.styles.opacity<1&&this.effects.push(new LAt(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new RAt(n,a,s))}if(this.container.styles.overflowX!==0){var i=IS(this.curves),o=FS(this.curves);XX(i,o)?this.effects.push(new M_(i,6)):(this.effects.push(new M_(i,2)),this.effects.push(new M_(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!qde(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=IS(n.curves),o=FS(n.curves);XX(i,o)||a.unshift(new M_(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Ei(c.target,t)})},e}(),sD=function(e,t,r,n){e.container.elements.forEach(function(a){var s=Ei(a.flags,4),i=Ei(a.flags,2),o=new Xde(a,e);Ei(a.styles.display,2048)&&n.push(o);var c=Ei(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new Wde(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,x){return f>g.element.container.styles.zIndex.order?(h=x,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var p=0;u.positiveZIndex.some(function(g,x){return f>=g.element.container.styles.zIndex.order?(p=x+1,!1):p>0}),u.positiveZIndex.splice(p,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);sD(o,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),sD(o,t,r,c);Ei(a.flags,8)&&Yde(a,c)})},Yde=function(e,t){for(var r=e instanceof eD?e.start:1,n=e instanceof eD?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof Ode&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=g2(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},HAt=function(e){var t=new Xde(e,null),r=new Wde(t),n=[];return sD(t,r,r,n),Yde(t.container,n),r},YX=function(e,t){switch(t){case 0:return Pu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Pu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Pu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Pu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},VAt=function(e,t){switch(t){case 0:return Pu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Pu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Pu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Pu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},zAt=function(e,t){switch(t){case 0:return Pu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Pu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Pu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Pu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},$At=function(e,t){switch(t){case 0:return U_(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return U_(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return U_(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return U_(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},U_=function(e,t){var r=[];return Bu(e)?r.push(e.subdivide(.5,!1)):r.push(e),Bu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Pu=function(e,t,r,n){var a=[];return Bu(e)?a.push(e.subdivide(.5,!1)):a.push(e),Bu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Bu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Bu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},Jde=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},OS=function(e){var t=e.styles,r=e.bounds,n=Da(t.paddingLeft,r.width),a=Da(t.paddingRight,r.width),s=Da(t.paddingTop,r.width),i=Da(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},GAt=function(e,t){return e===0?t.bounds:e===2?OS(t):Jde(t)},KAt=function(e,t){return e===0?t.bounds:e===2?OS(t):Jde(t)},qI=function(e,t,r){var n=GAt(Zx(e.styles.backgroundOrigin,t),e),a=KAt(Zx(e.styles.backgroundClip,t),e),s=qAt(Zx(e.styles.backgroundSize,t),r,n),i=s[0],o=s[1],c=Uy(Zx(e.styles.backgroundPosition,t),n.width-i,n.height-o),u=WAt(Zx(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,i,o]},Vx=function(e){return wa(e)&&e.value===Pv.AUTO},Q_=function(e){return typeof e=="number"},qAt=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(di(i)&&o&&di(o))return[Da(i,r.width),Da(o,r.height)];var c=Q_(s);if(wa(i)&&(i.value===Pv.CONTAIN||i.value===Pv.COVER)){if(Q_(s)){var u=r.width/r.height;return u<s!=(i.value===Pv.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=Q_(n),f=Q_(a),h=d||f;if(Vx(i)&&(!o||Vx(o))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var p=d?n:a*s,g=f?a:n/s;return[p,g]}var x=d?n:r.width,b=f?a:r.height;return[x,b]}if(c){var y=0,w=0;return di(i)?y=Da(i,r.width):di(o)&&(w=Da(o,r.height)),Vx(i)?y=w*s:(!o||Vx(o))&&(w=y/s),[y,w]}var _=null,j=null;if(di(i)?_=Da(i,r.width):o&&di(o)&&(j=Da(o,r.height)),_!==null&&(!o||Vx(o))&&(j=d&&f?_/n*a:r.height),j!==null&&Vx(i)&&(_=d&&f?j/a*n:r.width),_!==null&&j!==null)return[_,j];throw new Error("Unable to calculate background-size for element")},Zx=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},WAt=function(e,t,r,n,a){var s=t[0],i=t[1],o=r[0],c=r[1];switch(e){case 2:return[new ar(Math.round(n.left),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(c+n.top+i)),new ar(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new ar(Math.round(n.left+s),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.height+n.top)),new ar(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ar(Math.round(n.left+s),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i+c)),new ar(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new ar(Math.round(a.left),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ar(Math.round(a.left),Math.round(a.height+a.top))]}},XAt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",JX="Hidden Text",YAt=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=XAt,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(JX)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(JX)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),Zde=function(){function e(t,r){this.context=t,this.options=r}return e}(),JAt=1e4,ZAt=function(e){$d(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new YAt(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),UAt(r)&&(this.ctx.globalAlpha=r.opacity),MAt(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),qde(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return fl(this,void 0,void 0,function(){var n;return Uo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return fl(this,void 0,void 0,function(){return Uo(this,function(n){switch(n.label){case 0:if(Ei(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=yM(r.text);i.reduce(function(o,c){return s.ctx.fillText(c,o,r.bounds.top+a),o+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=aft(r.fontFamily).join(", "),s=fE(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return fl(this,void 0,void 0,function(){var a,s,i,o,c,u,d,f,h=this;return Uo(this,function(p){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,o),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(x){switch(x){case 0:h.ctx.fillStyle=Ui(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var b=n.textShadow;b.length&&g.text.trim().length&&(b.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Ui(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Ui(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Ui(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=OS(r),i=FS(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return fl(this,void 0,void 0,function(){var n,a,s,i,o,c,w,w,u,d,f,h,j,p,g,k,x,b,y,w,_,j,k;return Uo(this,function(I){switch(I.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,I.label=1;case 1:return i<o.length?(c=o[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:I.sent(),I.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof jde))return[3,8];I.label=5;case 5:return I.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return w=I.sent(),this.renderReplacedElement(n,a,w),[3,8];case 7:return I.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof Ide&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof Fde))return[3,12];I.label=9;case 9:return I.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return w=I.sent(),this.renderReplacedElement(n,a,w),[3,12];case 11:return I.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof Rde&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=I.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),I.label=14;case 14:if(n instanceof wM&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===kS?n.checked&&(this.ctx.save(),this.path([new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79),new ar(n.bounds.left+f*.16,n.bounds.top+f*.5549),new ar(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new ar(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new ar(n.bounds.left+f*.72983,n.bounds.top+f*.23),new ar(n.bounds.left+f*.84,n.bounds.top+f*.34085),new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Ui(MX),this.ctx.fill(),this.ctx.restore()):n.type===BS&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ui(MX),this.ctx.fill(),this.ctx.restore())),eft(n)&&n.value.length){switch(h=this.createFontStyle(s),j=h[0],p=h[1],g=this.fontMetrics.getMetrics(j,p).baseline,this.ctx.font=j,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=rft(n.styles.textAlign),k=OS(n),x=0,n.styles.textAlign){case 1:x+=k.width/2;break;case 2:x+=k.width;break}b=k.add(x,0,0,-k.height/2+1),this.ctx.save(),this.path([new ar(k.left,k.top),new ar(k.left+k.width,k.top),new ar(k.left+k.width,k.top+k.height),new ar(k.left,k.top+k.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new gw(n.value,b),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ei(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];w=void 0,_=y.url,I.label=15;case 15:return I.trys.push([15,17,,18]),[4,this.context.cache.match(_)];case 16:return w=I.sent(),this.ctx.drawImage(w,n.bounds.left-(w.width+10),n.bounds.top),[3,18];case 17:return I.sent(),this.context.logger.error("Error loading list-style-image "+_),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(j=this.createFontStyle(s)[0],this.ctx.font=j,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",k=new kh(n.bounds.left,n.bounds.top+Da(n.styles.paddingTop,n.bounds.width),n.bounds.width,wX(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new gw(r.listValue,k),s.letterSpacing,wX(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),I.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return fl(this,void 0,void 0,function(){var n,a,y,s,i,y,o,c,y,u,d,y,f,h,y,p,g,y,x,b,y;return Uo(this,function(w){switch(w.label){case 0:if(Ei(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:w.sent(),n=0,a=r.negativeZIndex,w.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:w.sent(),w.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:w.sent(),s=0,i=r.nonInlineLevel,w.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:w.sent(),w.label=9;case 9:return s++,[3,7];case 10:o=0,c=r.nonPositionedFloats,w.label=11;case 11:return o<c.length?(y=c[o],[4,this.renderStack(y)]):[3,14];case 12:w.sent(),w.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,w.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:w.sent(),w.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,w.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:w.sent(),w.label=21;case 21:return f++,[3,19];case 22:p=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,w.label=23;case 23:return p<g.length?(y=g[p],[4,this.renderStack(y)]):[3,26];case 24:w.sent(),w.label=25;case 25:return p++,[3,23];case 26:x=0,b=r.positiveZIndex,w.label=27;case 27:return x<b.length?(y=b[x],[4,this.renderStack(y)]):[3,30];case 28:w.sent(),w.label=29;case 29:return x++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Bu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Bu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var c=o.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return fl(this,void 0,void 0,function(){var n,a,s,i,o,c;return Uo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,p,R,H,K,L,M,N,g,R,H,K,L,M,x,b,y,w,_,j,k,I,E,N,B,R,P,D,L,M,J,H,K,V,G,X,ee,F,z,Y,te;return Uo(this,function(ae){switch(ae.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,ae.label=1;case 1:return ae.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=ae.sent(),[3,4];case 3:return ae.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(p=qI(r,n,[f.width,f.height,f.width/f.height]),R=p[0],H=p[1],K=p[2],L=p[3],M=p[4],N=s.ctx.createPattern(s.resizeImage(f,L,M),"repeat"),s.renderRepeat(R,N,H,K)),[3,6];case 5:Mct(d)?(g=qI(r,n,[null,null,null]),R=g[0],H=g[1],K=g[2],L=g[3],M=g[4],x=Oct(d.angle,L,M),b=x[0],y=x[1],w=x[2],_=x[3],j=x[4],k=document.createElement("canvas"),k.width=L,k.height=M,I=k.getContext("2d"),E=I.createLinearGradient(y,_,w,j),bX(d.stops,b).forEach(function(le){return E.addColorStop(le.stop,Ui(le.color))}),I.fillStyle=E,I.fillRect(0,0,L,M),L>0&&M>0&&(N=s.ctx.createPattern(k,"repeat"),s.renderRepeat(R,N,H,K))):Uct(d)&&(B=qI(r,n,[null,null,null]),R=B[0],P=B[1],D=B[2],L=B[3],M=B[4],J=d.position.length===0?[xM]:d.position,H=Da(J[0],L),K=Da(J[J.length-1],M),V=Dct(d,H,K,L,M),G=V[0],X=V[1],G>0&&X>0&&(ee=s.ctx.createRadialGradient(P+H,D+K,0,P+H,D+K,G),bX(d.stops,G*2).forEach(function(le){return ee.addColorStop(le.stop,Ui(le.color))}),s.path(R),s.ctx.fillStyle=ee,G!==X?(F=r.bounds.left+.5*r.bounds.width,z=r.bounds.top+.5*r.bounds.height,Y=X/G,te=1/Y,s.ctx.save(),s.ctx.translate(F,z),s.ctx.transform(1,0,0,Y,0,0),s.ctx.translate(-F,-z),s.ctx.fillRect(P,te*(D-z)+z,L,M*te),s.ctx.restore()):s.ctx.fill())),ae.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(c=o[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return fl(this,void 0,void 0,function(){return Uo(this,function(s){return this.path(YX(a,n)),this.ctx.fillStyle=Ui(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return fl(this,void 0,void 0,function(){var i,o;return Uo(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=VAt(s,a),this.path(i),this.ctx.fillStyle=Ui(r),this.ctx.fill(),o=zAt(s,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return fl(this,void 0,void 0,function(){var n,a,s,i,o,c,u,d,f=this;return Uo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!um(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=tft(Zx(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),um(n.backgroundColor)||(this.ctx.fillStyle=Ui(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){f.ctx.save();var g=IS(r.curves),x=p.inset?0:JAt,b=QAt(g,-x+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(f.path(g),f.ctx.clip(),f.mask(b)):(f.mask(g),f.ctx.clip(),f.path(b)),f.ctx.shadowOffsetX=p.offsetX.number+x,f.ctx.shadowOffsetY=p.offsetY.number,f.ctx.shadowColor=Ui(p.color),f.ctx.shadowBlur=p.blur.number,f.ctx.fillStyle=p.inset?Ui(p.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:o=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!um(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return fl(this,void 0,void 0,function(){var o,c,u,d,f,h,p,g,x,b,y,w,_,j,k,I,k,I;return Uo(this,function(E){return this.ctx.save(),o=$At(s,a),c=YX(s,a),i===2&&(this.path(c),this.ctx.clip()),Bu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Bu(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?p=Math.abs(u-f):p=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,x=n<3?n*2:n,i===3&&(g=n,x=n),b=!0,p<=g*2?b=!1:p<=g*2+x?(y=p/(2*g+x),g*=y,x*=y):(w=Math.floor((p+x)/(g+x)),_=(p-w*g)/(w-1),j=(p-(w+1)*g)/w,x=j<=0||Math.abs(x-_)<Math.abs(x-j)?_:j),b&&(i===3?this.ctx.setLineDash([0,g+x]):this.ctx.setLineDash([g,x])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ui(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Bu(c[0])&&(k=c[3],I=c[0],this.ctx.beginPath(),this.formatPath([new ar(k.end.x,k.end.y),new ar(I.start.x,I.start.y)]),this.ctx.stroke()),Bu(c[1])&&(k=c[1],I=c[2],this.ctx.beginPath(),this.formatPath([new ar(k.end.x,k.end.y),new ar(I.start.x,I.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return fl(this,void 0,void 0,function(){var n;return Uo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=HAt(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(Zde),eft=function(e){return e instanceof Pde||e instanceof Dde?!0:e instanceof wM&&e.type!==BS&&e.type!==kS},tft=function(e,t){switch(e){case 0:return IS(t);case 2:return PAt(t);case 1:default:return FS(t)}},rft=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},nft=["-apple-system","system-ui"],aft=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return nft.indexOf(t)===-1}):e},sft=function(e){$d(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return fl(this,void 0,void 0,function(){var n,a;return Uo(this,function(s){switch(s.label){case 0:return n=ZO(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,ift(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(Zde),ift=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},oft=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,v_([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,v_([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,v_([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,v_([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),lft=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new oft({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new kAt(this,t)}return e.instanceCount=1,e}(),iD=function(e,t){return t===void 0&&(t={}),cft(e,t)};typeof window<"u"&&Kde.setContext(window);var cft=function(e,t){return fl(void 0,void 0,void 0,function(){var r,n,a,s,i,o,c,u,d,f,h,p,g,x,b,y,w,_,j,k,E,I,E,N,B,R,P,D,L,M,J,H,K,V,G,X,ee,F,z,Y;return Uo(this,function(te){switch(te.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(N=t.allowTaint)!==null&&N!==void 0?N:!1,imageTimeout:(B=t.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:t.proxy,useCORS:(R=t.useCORS)!==null&&R!==void 0?R:!1},s=LO({logging:(P=t.logging)!==null&&P!==void 0?P:!0,cache:t.cache},a),i={windowWidth:(D=t.windowWidth)!==null&&D!==void 0?D:n.innerWidth,windowHeight:(L=t.windowHeight)!==null&&L!==void 0?L:n.innerHeight,scrollX:(M=t.scrollX)!==null&&M!==void 0?M:n.pageXOffset,scrollY:(J=t.scrollY)!==null&&J!==void 0?J:n.pageYOffset},o=new kh(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new lft(s,o),u=(H=t.foreignObjectRendering)!==null&&H!==void 0?H:!1,d={allowTaint:(K=t.allowTaint)!==null&&K!==void 0?K:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new qX(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=te.sent(),g=EM(h)||dAt(h)?Qot(h.ownerDocument):zk(c,h),x=g.width,b=g.height,y=g.left,w=g.top,_=uft(c,h,t.backgroundColor),j={canvas:t.canvas,backgroundColor:_,scale:(G=(V=t.scale)!==null&&V!==void 0?V:n.devicePixelRatio)!==null&&G!==void 0?G:1,x:((X=t.x)!==null&&X!==void 0?X:0)+y,y:((ee=t.y)!==null&&ee!==void 0?ee:0)+w,width:(F=t.width)!==null&&F!==void 0?F:Math.ceil(x),height:(z=t.height)!==null&&z!==void 0?z:Math.ceil(b)},u?(c.logger.debug("Document cloned, using foreign object rendering"),E=new sft(c,j),[4,E.render(h)]):[3,3];case 2:return k=te.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+w+" with size "+x+"x"+b+" using computed rendering"),c.logger.debug("Starting DOM parsing"),I=Mde(c,h),_===I.styles.backgroundColor&&(I.styles.backgroundColor=dh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+j.x+","+j.y+" with size "+j.width+"x"+j.height),E=new ZAt(c,j),[4,E.render(I)];case 4:k=te.sent(),te.label=5;case 5:return(!((Y=t.removeContainer)!==null&&Y!==void 0)||Y)&&(qX.destroy(p)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,k]}})})},uft=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?mw(e,getComputedStyle(n.documentElement).backgroundColor):dh.TRANSPARENT,s=n.body?mw(e,getComputedStyle(n.body).backgroundColor):dh.TRANSPARENT,i=typeof r=="string"?mw(e,r):r===null?dh.TRANSPARENT:4294967295;return t===n.documentElement?um(a)?um(s)?i:s:a:i};const dft=Object.freeze(Object.defineProperty({__proto__:null,default:iD},Symbol.toStringTag,{value:"Module"})),Aft=e=>{const[t,r]=S.useState(!1),[n,a]=S.useState(null);return S.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},eAe=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de prctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisin y mentora"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicacin interna"}],fft=["Mecnica Industrial","Mecnica Automotriz"],hft=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:eAe.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),ZX=({empresas:e,isLoaded:t,route:r})=>{const n=S.useRef(null),a=S.useRef(null),s=S.useRef([]),i=S.useRef(null),o=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return S.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):o.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[o,t,r]),l.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[l.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&o.length===0&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:l.jsx("div",{className:"text-center p-6",children:l.jsx("p",{className:"text-gray-600 text-lg",children:" No hay empresas geo-localizadas"})})})]})},mft=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.duration)==null?void 0:p.value)||0)},0),o=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+o,u=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.distance)==null?void 0:p.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return l.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[l.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),l.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var p,g,x;return l.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0],"  ",f.end_address.split(",")[0]]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[(p=f.duration)==null?void 0:p.text,"  ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&l.jsx("div",{className:"space-y-3",children:(x=f.steps)==null?void 0:x.map((b,y)=>b.transit&&l.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsx("span",{dangerouslySetInnerHTML:{__html:b.instructions}})]},y))})]},h)})}),l.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[l.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),l.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),l.jsxs("p",{className:"text-lg",children:["Duracin Total Estimada: ",Math.round(c/60)," min"]}),l.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&l.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},eY=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,pft=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),l.jsx(Pp,{width:"100%",height:300,children:l.jsxs(pse,{children:[l.jsx(N8,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>l.jsx(mg,{fill:t[n%t.length]},`cell-${n}`))}),l.jsx(Dp,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),l.jsx(Pp,{width:"100%",height:300,children:l.jsxs(QN,{data:e.porSupervisor,layout:"vertical",children:[l.jsx($w,{strokeDasharray:"3 3"}),l.jsx(o1,{type:"number"}),l.jsx(l1,{type:"category",dataKey:"name",width:150}),l.jsx(Dp,{}),l.jsx(zw,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Distribucin por Comuna"}),l.jsx(Pp,{width:"100%",height:300,children:l.jsxs(QN,{data:e.porComuna,children:[l.jsx($w,{strokeDasharray:"3 3"}),l.jsx(o1,{dataKey:"name"}),l.jsx(l1,{}),l.jsx(Dp,{}),l.jsx(zw,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Calificacin por mbito"}),l.jsx(Pp,{width:"100%",height:300,children:l.jsxs(BRe,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[l.jsx(Eae,{}),l.jsx(nk,{dataKey:"subject"}),l.jsx(tk,{angle:30,domain:[0,5]}),l.jsx(B8,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),l.jsx(Dp,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),l.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:l.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>l.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[l.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),l.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," "]})]},r.id))})})]})]})},gft=()=>{const[e,t]=S.useState([]),[r,n]=S.useState([]),[a,s]=S.useState("list"),[i,o]=S.useState(null),[c,u]=S.useState(!0),[d,f]=S.useState(null),[h,p]=S.useState(null),[g,x]=S.useState(null),[b,y]=S.useState([]),[w,_]=S.useState(null),[j,k]=S.useState(!1),[I,E]=S.useState("DRIVING"),[N,B]=S.useState(""),[R,P]=S.useState([]),D="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:L}=Aft(D);S.useEffect(()=>{u(!0);const ie=Rst(t),ce=Ust(n),pe=Hst(P);return u(!1),()=>{ie(),ce(),pe()}},[]);const M=S.useMemo(()=>{const ie=e.reduce((_e,De)=>{const Se=De.area||"Sin especificar";return _e[Se]=(_e[Se]||0)+1,_e},{}),ce=e.reduce((_e,De)=>{var fe;const Se=((fe=De.docenteSupervisor)==null?void 0:fe.nombreCompleto)||"Sin asignar";return _e[Se]=(_e[Se]||0)+1,_e},{}),pe=e.reduce((_e,De)=>{const Se=De.direccion.split(",").map(Ie=>Ie.trim()),fe=Se.length>1?Se[1]:"Desconocida";return _e[fe]=(_e[fe]||0)+1,_e},{}),Be=eAe.map(_e=>{const De=e.flatMap(fe=>{var Ie;return(Ie=fe.calificaciones.find(Ue=>Ue.elemento===_e.elemento))==null?void 0:Ie.score}).filter(fe=>fe!=null),Se=De.length>0?De.reduce((fe,Ie)=>fe+Ie,0)/De.length:0;return{subject:_e.elemento.split(" ")[0],A:Se,fullMark:5}}),ne=e.map(_e=>{const De=_e.calificaciones.map(fe=>fe.score).filter(fe=>fe!=null),Se=De.length>0?De.reduce((fe,Ie)=>fe+Ie,0)/De.length:0;return{..._e,promedio:Se}}).filter(_e=>_e.promedio>0).sort((_e,De)=>De.promedio-_e.promedio);return{porEspecialidad:Object.entries(ie).map(([_e,De])=>({name:_e,value:De})),porSupervisor:Object.entries(ce).map(([_e,De])=>({name:_e,value:De})),porComuna:Object.entries(pe).map(([_e,De])=>({name:_e,value:De})),calificacionPorAmbito:Be,ranking:ne}},[e]),J=async()=>{if(i)try{await Lst(i),s("list"),o(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},H=async ie=>{window.confirm("Est seguro de eliminar esta empresa?")&&await Mst(ie)},K=(ie,ce)=>{o(pe=>pe?{...pe,[ie]:ce}:null)},V=async ie=>{var ce;if(f(ie),(ce=ie==null?void 0:ie.value)!=null&&ce.place_id&&L){const pe=await eY(ie.value.place_id);K("direccion",ie.label||""),K("coordenadas",pe)}else K("direccion",(ie==null?void 0:ie.label)||"")},G=ie=>{o(JSON.parse(JSON.stringify(ie))),ie.direccion&&f({label:ie.direccion,value:{description:ie.direccion}}),s("form")},X=async ie=>{var ce;if(p(ie),(ce=ie==null?void 0:ie.value)!=null&&ce.place_id&&L){const pe=await eY(ie.value.place_id);x(pe)}},ee=ie=>{y(ce=>ce.some(pe=>pe.id===ie.id)?ce.filter(pe=>pe.id!==ie.id):[...ce,ie])},F=()=>{if(!g||b.length===0||!L)return;k(!0);const ie=new window.google.maps.DirectionsService,ce=b.filter(pe=>pe.coordenadas).map(pe=>({location:pe.coordenadas,stopover:!0}));ie.route({origin:g,destination:g,waypoints:ce,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[I]},(pe,Be)=>{k(!1),Be===window.google.maps.DirectionsStatus.OK&&pe?_(pe):alert("No se pudo calcular la ruta: "+Be)})},z=()=>{_(null),p(null),x(null),y([]),B("")},Y=async()=>{if(!N||!h||!g||b.length===0){alert("Por favor, asigna un nombre a la ruta y asegrate de tener un punto de partida y empresas seleccionadas.");return}const ie={nombre:N,startPoint:{label:h.label,coords:g},empresas:b.map(ce=>({id:ce.id,nombre:ce.nombre,coordenadas:ce.coordenadas})),travelMode:I};try{await Qst(ie),alert("Ruta guardada con xito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},te=async()=>{const ie=document.getElementById("map-container-for-pdf"),ce=document.getElementById("route-details-for-pdf");if(!ie||!ce)return;const pe=new vr("p","mm","a4"),Be=pe.internal.pageSize.getWidth();pe.text(`Ruta de Supervisin: ${N||"Sin nombre"}`,10,15),pe.setFontSize(10),pe.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const _e=(await iD(ie,{useCORS:!0})).toDataURL("image/png");pe.addImage(_e,"PNG",10,30,Be-20,100);const Se=(await iD(ce)).toDataURL("image/png"),fe=pe.getImageProperties(Se),Ie=fe.height*(Be-20)/fe.width;pe.addImage(Se,"PNG",10,135,Be-20,Ie),pe.save(`ruta-${N||"supervision"}.pdf`)},ae=ie=>{p({label:ie.startPoint.label,value:null}),x(ie.startPoint.coords),y(ie.empresas),E(ie.travelMode),B(ie.nombre),s("route")},le=async ie=>{window.confirm("Ests seguro de que quieres eliminar esta ruta guardada?")&&(await Vst(ie),alert("Ruta eliminada."))};return c?l.jsx("div",{className:"text-center p-8",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Gestin de Empresas"}),l.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&l.jsx("button",{onClick:()=>{s("list"),f(null),o(null),z()},className:"font-semibold hover:text-blue-600",children:" Volver al listado"}),a==="list"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[l.jsx(Qye,{size:18})," Dashboard"]}),l.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),l.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisin",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisin"}),l.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:""}),l.jsx("button",{onClick:()=>{o(hft()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&l.jsx(pft,{data:M}),a==="saved-routes"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisin Guardadas"}),l.jsx("div",{className:"space-y-3",children:R.length===0?l.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):R.map(ie=>l.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:ie.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[ie.empresas.length," paradas"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>ae(ie),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),l.jsx("button",{onClick:()=>le(ie.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},ie.id))})]}),a==="route"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisin"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),l.jsx("input",{type:"text",value:N,onChange:ie=>B(ie.target.value),placeholder:"Ej: Supervisin Zona Norte",className:"input-style w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),l.jsx(ZW,{apiKey:D,selectProps:{value:h,onChange:X,placeholder:"Buscar direccin de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),l.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[l.jsx("button",{onClick:()=>E("DRIVING"),className:`w-full py-2 rounded-md transition ${I==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automvil"}),l.jsx("button",{onClick:()=>E("TRANSIT"),className:`w-full py-2 rounded-md transition ${I==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Pblico"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),l.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(ie=>ie.coordenadas).map(ie=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:`route-${ie.id}`,checked:b.some(ce=>ce.id===ie.id),onChange:()=>ee(ie),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("label",{htmlFor:`route-${ie.id}`,className:"ml-3 text-sm text-gray-700",children:ie.nombre})]},ie.id))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("button",{onClick:F,disabled:!g||b.length===0||j,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:j?"Calculando...":"Visualizar Ruta"}),l.jsx("button",{onClick:Y,disabled:!N||!g||b.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),l.jsx("button",{onClick:te,disabled:!w,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),l.jsx("button",{onClick:z,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),l.jsx("div",{children:l.jsx(ZX,{empresas:b,isLoaded:L,route:w})})]}),w&&l.jsx(mft,{route:w,travelMode:I})]}),a==="map"&&l.jsx(ZX,{empresas:e,isLoaded:L}),a==="list"&&l.jsx("div",{className:"space-y-3",children:e.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(ie=>{var ce;return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:ie.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[ie.rut," | ",ie.direccion]}),l.jsxs("p",{className:"text-sm text-slate-600",children:["rea: ",ie.area||"No especificada"," | Cupos: ",ie.cupos," | Supervisor: ",((ce=ie.docenteSupervisor)==null?void 0:ce.nombreCompleto)||"Ninguno"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>G(ie),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),l.jsx("button",{onClick:()=>H(ie.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},ie.id)})}),a==="form"&&i&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(tye,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.nombre,onChange:ie=>K("nombre",ie.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Pye,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.rut,onChange:ie=>K("rut",ie.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(tN,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),l.jsx("div",{className:"w-full pl-10",children:l.jsx(ZW,{apiKey:D,selectProps:{value:d,onChange:V,placeholder:"Buscar direccin..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Tw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.contacto,onChange:ie=>K("contacto",ie.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Zye,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"email",value:i.email||"",onChange:ie=>K("email",ie.target.value),placeholder:"Correo electrnico",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Zl,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"number",value:i.cupos,onChange:ie=>K("cupos",parseInt(ie.target.value)||1),placeholder:"N de cupos",className:"input-style pl-10",min:"1"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(fee,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.area||"",onChange:ie=>K("area",ie.target.value),className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",disabled:!0,children:"Seleccione un rea"}),fft.map(ie=>l.jsx("option",{value:ie,children:ie},ie))]})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(Tw,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:ie=>{const ce=ie.target.value;K("docenteSupervisor",ce?JSON.parse(ce):void 0)},className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(ie=>l.jsx("option",{value:JSON.stringify({id:ie.id,nombre:ie.nombreCompleto}),children:ie.nombreCompleto},ie.id))]})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Evaluacin de la Empresa"}),i.calificaciones.map((ie,ce)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[l.jsx(Twe,{className:"w-5 h-5 text-slate-400"}),l.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:ie.elemento}),l.jsxs("select",{value:ie.score||"",onChange:pe=>{const Be=[...i.calificaciones];Be[ce].score=pe.target.value?parseInt(pe.target.value):null,K("calificaciones",Be)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(pe=>l.jsx("option",{value:pe,children:pe},pe))]})]},ce))]}),l.jsx("div",{className:"pt-6",children:l.jsx("button",{onClick:J,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})},CM="dpd_actividades",tAe="dpd_respuestas",xft="usuarios";function vft(e,{includeArchived:t=!1}={}){const r=Nt(ft,CM),n=t?zt(r,_r("createdAt","desc")):zt(r,Yr("isArchived","==",!1),_r("createdAt","desc"));return mr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));e(s)})}async function bft(e){const t=Nt(ft,CM);return(await Tn(t,{...e,isArchived:!1,createdAt:Ni(),updatedAt:Ni()})).id}async function yft(e){const t=dr(ft,CM,e);await za(t)}function wft(e,t){const r=Nt(ft,tAe),n=zt(r,Yr("activityId","==",e),_r("createdAt","desc"));return mr(n,a=>{const s=a.docs.map(i=>({id:i.id,...i.data()}));t(s)})}async function Eft(e){const t=Nt(ft,tAe);return(await Tn(t,{...e,createdAt:Ni()})).id}function Cft(e,t){const r=Nt(ft,xft),n=zt(r,Yr("profile","in",e));return mr(n,a=>{const s=a.docs.map(i=>{const o=i.data();return{id:i.id,nombre:(o==null?void 0:o.displayName)||(o==null?void 0:o.name)||(o==null?void 0:o.email)||"Sin nombre",profile:o==null?void 0:o.profile,email:o==null?void 0:o.email}});t(s)})}function rAe(e){return(e||"").trim().split(/\s+/).filter(Boolean).length}const _ft=[{model:"gemini-2.5-flash-lite",generationConfig:{temperature:.7,maxOutputTokens:1024}},{model:"gemini-1.5-pro",generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}}],Nft=()=>{const e="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";try{return new cs(e)}catch(t){return console.error("Error al inicializar Gemini:",t),null}};async function Sft(e,t){try{const r=e.getGenerativeModel(t);return await r.generateContent("test"),r}catch(r){return console.warn(`Modelo ${t.model} no disponible:`,r),null}}async function nAe(){const e=Nft();if(!e)return null;for(const t of _ft){const r=await Sft(e,t);if(r)return console.log(`Usando modelo ${t.model}`),r}return console.error("No se encontr ningn modelo de Gemini disponible"),null}function aAe(e){try{const t=e.trim().replace(/^```json/i,"").replace(/^```/i,"").replace(/```$/i,"");return JSON.parse(t)}catch{return null}}function kft(e){const t=[...e];for(let r=t.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[t[r],t[n]]=[t[n],t[r]]}return t}async function Bft(e,t=3){var n;const r=await nAe();if(!r)return WI(e,t);try{const a=`Genera ${t} preguntas de seleccin mltiple sobre el tema "${e}".
    Para cada pregunta, proporciona:
    1. Un enunciado claro y conciso
    2. 4 opciones de respuesta plausibles
    
    Devuelve las preguntas en formato JSON como este:
    {
      "preguntas": [
        {
          "enunciado": "Pregunta 1?",
          "opciones": ["Opcin 1", "Opcin 2", "Opcin 3", "Opcin 4"]
        }
      ]
    }`,i=(await r.generateContent(a)).response.text(),o=aAe(i);return(n=o==null?void 0:o.preguntas)!=null&&n.length?o.preguntas.slice(0,t):(console.warn("Formato inesperado de respuesta:",i),WI(e,t))}catch(a){return console.error("Error al generar preguntas:",a),WI(e,t)}}async function Tft(e,t=30){var n;const r=await nAe();if(!r)return XI(e);try{const a=e.filter(u=>u&&u.trim());if(a.length===0)return[];const s=`Analiza estas respuestas y extrae los conceptos clave con su relevancia:
    ${a.join(`
---
`)}
    
    Responde en formato JSON:
    {
      "keywords": [
        { "keyword": "concepto1", "score": 0.9 },
        { "keyword": "concepto2", "score": 0.8 }
      ]
    }
    
    Incluye hasta ${t} conceptos ms relevantes.`,o=(await r.generateContent(s)).response.text(),c=aAe(o);return(n=c==null?void 0:c.keywords)!=null&&n.length?c.keywords.filter(u=>u.keyword&&typeof u.score=="number").slice(0,t):(console.warn("Formato inesperado de respuesta:",o),XI(e))}catch(a){return console.error("Error al analizar respuestas:",a),XI(e)}}function WI(e,t){const r=["Totalmente de acuerdo","De acuerdo","Neutral","En desacuerdo","Totalmente en desacuerdo"];return Array(t).fill(null).map((n,a)=>({enunciado:`Pregunta ${a+1} sobre ${e}`,opciones:kft(r).slice(0,4)}))}function XI(e){const t=new Set(["el","la","los","las","un","una","unos","unas","de","del","a","ante","con","en","para","por","sobre","y","o","pero","si","no","que","cual","quien","como"]),r={},n=e.join(" ").toLowerCase().split(/\W+/).filter(a=>a.length>3&&!t.has(a));for(const a of n)r[a]=(r[a]||0)+1;return Object.entries(r).sort(([,a],[,s])=>s-a).slice(0,20).map(([a,s])=>({keyword:a,score:Math.min(1,s/n.length)}))}const DS=500,tY=()=>({titulo:"",dimension:"Liderazgo Curricular",subdimension:"Planificacin y organizacin del currculo",creadorPerfil:"PROFESORADO",creadorId:"",creadorNombre:"",preguntas:[],aiTema:"",aiCantidad:3}),xy=nt.memo(({title:e,icon:t,right:r,children:n})=>l.jsxs("section",{className:"rounded-2xl border border-slate-200 bg-white p-4 md:p-6 shadow-sm",children:[l.jsxs("header",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[t,e]}),r]}),n]})),jft=nt.memo(({value:e,onChange:t,canCreate:r})=>{const n=(a,s)=>l.jsx("button",{onClick:()=>t(a),className:`px-3 py-1.5 rounded-lg text-sm border transition ${e===a?"bg-indigo-600 text-white border-indigo-600":"bg-white hover:bg-indigo-50"}`,disabled:a==="crear"&&!r,title:a==="crear"&&!r?"Tu perfil no crea actividades":"",children:s},a);return l.jsxs("div",{className:"flex items-center gap-2",children:[n("responder","Responder"),n("dashboard","Dashboard"),n("crear","Nueva actividad")]})}),Ift=nt.memo(({items:e,selectedId:t,onSelect:r,canDelete:n,onDelete:a})=>e.length?l.jsx("ul",{className:"space-y-2",children:e.map(s=>{const i=s.id===t;return l.jsxs("li",{children:[l.jsxs("button",{onClick:()=>r(s.id),className:`w-full flex items-center justify-between gap-2 rounded-xl border px-3 py-2 text-left transition ${i?"border-indigo-600 bg-indigo-600 text-white":"border-slate-200 bg-white hover:bg-indigo-50"}`,title:`${s.titulo}  ${s.dimension} / ${s.subdimension}`,children:[l.jsxs("span",{className:"inline-flex items-center gap-2",children:[l.jsx(Kv,{className:"w-4 h-4"}),l.jsx("span",{className:"font-medium",children:s.titulo})]}),l.jsx(vP,{className:"w-4 h-4 opacity-70"})]}),n(s)&&l.jsx("button",{onClick:()=>a(s.id,s.titulo),className:"mt-1 text-xs text-red-600 hover:underline",title:"Eliminar actividad",children:"Eliminar"})]},s.id)})}):l.jsxs("div",{className:"p-4 text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(Tye,{className:"w-4 h-4"})," An no hay actividades creadas."]})),YI=nt.memo(({label:e,value:t,pill:r})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-slate-500",children:[e,":"]}),r?l.jsx("span",{className:"px-2 py-0.5 rounded-full bg-indigo-50 text-indigo-700 text-xs",children:t}):l.jsx("span",{className:"font-medium",children:t})]})),Fft=nt.memo(({label:e,value:t,total:r=0})=>{const n=r>0?t/r*100:t>0?100:0,a=n>=75?"from-emerald-500":n>=50?"from-blue-500":n>=25?"from-amber-500":"from-rose-500";return l.jsxs("div",{className:"relative mt-1",children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),l.jsx("span",{className:"text-sm font-medium text-slate-700",children:t})]}),l.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5",children:l.jsx("div",{className:`h-2.5 rounded-full bg-gradient-to-r ${a} to-transparent transition-all duration-500`,style:{width:`${Math.min(100,n)}%`}})})]})}),Oft=nt.memo(({option:e,options:t,onChangeText:r,onDelete:n})=>{const a=S.useCallback(i=>r(e.id,i.target.value),[e.id,r]),s=S.useCallback(()=>n(e.id),[e.id,n]);return l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{value:e.text,onChange:a,className:"flex-1 border rounded-lg px-3 py-1.5",placeholder:`Opcin ${t.findIndex(i=>i.id===e.id)+1}`}),l.jsx("button",{onClick:s,className:"text-red-600 hover:text-red-700",title:"Eliminar opcin",children:l.jsx(tl,{className:"w-4 h-4"})})]})}),Dft=nt.memo(({q:e,index:t,onRemove:r,onPatch:n})=>{const a=S.useCallback(f=>n(e.id,{enunciado:f.target.value}),[e.id,n]),s=S.useCallback(f=>n(e.id,{maxPalabras:parseInt(f.target.value||"500")}),[e.id,n]),i=S.useCallback(f=>n(e.id,{multiple:f.target.checked}),[e.id,n]),o=S.useCallback(()=>n(e.id,{opciones:[...e.opciones,{id:crypto.randomUUID(),text:""}]}),[e.id,e.opciones,n]),c=S.useCallback((f,h)=>{n(e.id,{opciones:e.opciones.map(p=>p.id===f?{...p,text:h}:p)})},[e.id,e.opciones,n]),u=S.useCallback(f=>n(e.id,{opciones:e.opciones.filter(h=>h.id!==f)}),[e.id,e.opciones,n]),d=S.useCallback(()=>r(e.id),[e.id,r]);return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("span",{className:"text-sm text-slate-600",children:["#",t+1,"  ",e.tipo==="abierta"?"Abierta":"Seleccin mltiple"]}),l.jsx("button",{onClick:d,className:"text-red-600 hover:text-red-700",title:"Eliminar",children:l.jsx(tl,{className:"w-4 h-4"})})]}),l.jsx("input",{value:e.enunciado,onChange:a,className:"w-full border rounded-lg px-3 py-2 mb-2",placeholder:"Escribe el enunciado de la pregunta"}),e.tipo==="abierta"?l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("label",{className:"text-sm",children:"Mx. palabras"}),l.jsx("input",{type:"number",min:50,max:1e3,value:e.maxPalabras||DS,onChange:s,className:"w-24 border rounded-lg px-2 py-1"})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"inline-flex items-center gap-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:e.multiple??!0,onChange:i})," Permitir seleccin mltiple"]}),e.opciones.map(f=>l.jsx(Oft,{option:f,options:e.opciones,onChangeText:c,onDelete:u},f.id)),l.jsx("button",{onClick:o,className:"text-sm text-sky-700 hover:underline",children:"+ Aadir opcin"})]})]})}),Pft=nt.memo(({q:e,respuestas:t,onChange:r})=>{var i,o;const n=S.useCallback(c=>r(e,c.target.value),[e,r]);if(e.tipo==="abierta"){const c=((i=t[e.id])==null?void 0:i.valorTexto)||"";return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),l.jsx("textarea",{rows:5,value:c,onChange:n,placeholder:`Mximo ${e.maxPalabras||DS} palabras`,className:"w-full border rounded-lg px-3 py-2"}),l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[rAe(c)," / ",e.maxPalabras||DS," palabras"]})]})}const a=((o=t[e.id])==null?void 0:o.seleccionados)||[],s=c=>{let u=new Set(a);a.includes(c)?u.delete(c):e.multiple?u.add(c):u=new Set([c]),r(e,Array.from(u))};return l.jsxs("div",{className:"border rounded-xl p-3",children:[l.jsx("p",{className:"font-medium mb-2",children:e.enunciado}),l.jsx("div",{className:"flex flex-col gap-2",children:(e.opciones||[]).map((c,u)=>{const d=a.includes(c);return l.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:e.multiple?"checkbox":"radio",name:e.multiple?`answer-${e.id}[]`:`answer-${e.id}`,checked:d,onChange:()=>s(c)}),l.jsx("span",{children:c})]},`${e.id}-${u}`)})})]})}),Rft=({currentUser:e})=>{var ee;const[t,r]=S.useState("responder"),[n,a]=S.useState([]),[s,i]=S.useState(""),[o,c]=S.useState(""),[u,d]=S.useState(tY()),f=S.useCallback(F=>d(z=>({...z,...F})),[]),[h,p]=S.useState([]),[g,x]=S.useState({}),[b,y]=S.useState([]),w=EQ.includes(e==null?void 0:e.profile)||(e==null?void 0:e.isAdmin);S.useEffect(()=>{const F=vft(z=>{a(z),i(Y=>{var te;return Y||(((te=z[0])==null?void 0:te.id)??"")})});return()=>F()},[]),S.useEffect(()=>{const F=Cft(["PROFESORADO","SUBDIRECCION"],z=>{p(z),d(Y=>{if(Y.creadorId)return Y;const te=z.find(ae=>ae.id===(e==null?void 0:e.uid));return te?{...Y,creadorId:te.id,creadorNombre:te.nombre,creadorPerfil:te.profile||Y.creadorPerfil}:Y})});return()=>F()},[e]),S.useEffect(()=>{if(!s)return;const F=wft(s,y);return()=>F()},[s]);const _=S.useMemo(()=>n.find(F=>F.id===s),[n,s]);S.useMemo(()=>Kf[u.dimension]||[],[u.dimension]),S.useEffect(()=>{d(F=>{const z=Kf[F.dimension]||[],Y=z.includes(F.subdimension)?F.subdimension:z[0]||"";return Y===F.subdimension?F:{...F,subdimension:Y}})},[u.dimension]);const j=S.useCallback(()=>{const F={id:crypto.randomUUID(),tipo:"abierta",enunciado:"Escribe aqu tu pregunta abierta",maxPalabras:DS};d(z=>({...z,preguntas:[...z.preguntas,F]}))},[]),k=S.useCallback(()=>{const F={id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:"Selecciona la(s) opcin(es) que corresponda(n)",opciones:[{id:crypto.randomUUID(),text:"Opcin 1"},{id:crypto.randomUUID(),text:"Opcin 2"},{id:crypto.randomUUID(),text:"Opcin 3"},{id:crypto.randomUUID(),text:"Opcin 4"}],multiple:!0};d(z=>({...z,preguntas:[...z.preguntas,F]}))},[]),I=S.useCallback((F,z)=>{d(Y=>({...Y,preguntas:Y.preguntas.map(te=>te.id===F?{...te,...z}:te)}))},[]),E=S.useCallback(F=>{d(z=>({...z,preguntas:z.preguntas.filter(Y=>Y.id!==F)}))},[]),[N,B]=S.useState(!1),R=S.useCallback(async()=>{if(!(!u.aiTema||u.aiCantidad<1)){B(!0);try{const z=(await Bft(u.aiTema,u.aiCantidad)).map(Y=>({id:crypto.randomUUID(),tipo:"seleccion_multiple",enunciado:Y.enunciado,opciones:Y.opciones.slice(0,5).map(te=>({id:crypto.randomUUID(),text:te})),multiple:!0}));d(Y=>({...Y,preguntas:[...Y.preguntas,...z]}))}finally{B(!1)}}},[u.aiTema,u.aiCantidad]),[P,D]=S.useState([]);S.useEffect(()=>{(async()=>{var Y;if(!_)return;const z=[];for(const te of b)if(te.respuestas)for(const[ae,le]of Object.entries(te.respuestas)){const ie=_.preguntas.find(pe=>pe.id===ae);if(!ie||ie.tipo!=="abierta")continue;const ce=le;ce.tipo==="abierta"&&((Y=ce.valorTexto)!=null&&Y.trim())&&z.push(ce.valorTexto.trim())}if(console.log("Respuestas abiertas encontradas:",z.length),z.length>0)try{const te=await Tft(z,30);console.log("Keywords generadas:",te),D(te)}catch(te){console.error("Error al extraer keywords:",te),D([])}else D([])})()},[_,b]);const L=S.useMemo(()=>{if(!_)return{};const F={};for(const z of _.preguntas)z.tipo==="seleccion_multiple"&&(F[z.id]={},(z.opciones||[]).forEach(Y=>F[z.id][Y]=0));for(const z of b)for(const[Y,te]of Object.entries(z.respuestas||{})){const ae=te;if((ae==null?void 0:ae.tipo)==="seleccion_multiple")for(const le of ae.seleccionados||[])F[Y]||(F[Y]={}),F[Y][le]=(F[Y][le]||0)+1}return F},[_,b]),M=S.useCallback(F=>F.map(z=>z.tipo==="abierta"?z:{...z,opciones:z.opciones.map(Y=>Y.text)}),[]),J=S.useCallback(()=>d(tY()),[]),H=S.useCallback(async()=>{if(!u.titulo.trim())return alert("Debes ingresar un ttulo");if(!u.creadorId)return alert("Debes seleccionar un creador");const F={titulo:u.titulo,dimension:u.dimension,subdimension:u.subdimension,creadorId:u.creadorId,creadorNombre:u.creadorNombre,creadorPerfil:u.creadorPerfil,preguntas:M(u.preguntas)},z=await bft(F);J(),i(z),r("responder")},[u,M,J]),K=S.useCallback(async(F,z)=>{var te;if(window.confirm(`Eliminar "${z}"?
Se eliminarn la actividad, sus preguntas y respuestas. Esta accin no se puede deshacer.`)){if(await yft(F),s===F){const ae=n.filter(le=>le.id!==F);i(((te=ae[0])==null?void 0:te.id)||""),ae.length||r("crear")}alert("Actividad eliminada.")}},[s,n]),V=S.useCallback(F=>{const z=e==null?void 0:e.isAdmin,Y=F.creadorId===(e==null?void 0:e.uid);return w&&(z||Y)},[e,w]),G=S.useCallback((F,z)=>{x(Y=>({...Y,[F.id]:F.tipo==="abierta"?{tipo:"abierta",valorTexto:z}:{tipo:"seleccion_multiple",seleccionados:z}}))},[]),X=S.useCallback(async()=>{if(_){for(const F of _.preguntas){const z=g[F.id];if(z&&F.tipo==="abierta"&&F.maxPalabras){const Y=rAe(z.valorTexto||"");if(Y>F.maxPalabras)return alert(`La respuesta a "${F.enunciado}" supera el mximo de ${F.maxPalabras} palabras (${Y}).`)}}await Eft({activityId:_.id,userId:(e==null?void 0:e.uid)||"anon",userNombre:(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Annimo",respuestas:g}),x({}),alert("Respuestas enviadas!")}},[_,g,e]);return l.jsxs("div",{className:"w-full max-w-7xl mx-auto p-4 md:p-6 space-y-6",children:[l.jsxs("header",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(pee,{className:"w-7 h-7 text-indigo-600"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold",children:"Desarrollo Profesional Docente"}),l.jsx("p",{className:"text-sm text-slate-600",children:"Crea sesiones, responde y explora insights en tiempo real."})]})]}),l.jsx(jft,{value:t,onChange:r,canCreate:w})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[l.jsx("aside",{className:"lg:col-span-4 xl:col-span-3",children:l.jsx(xy,{title:"Actividades",icon:l.jsx(Kv,{className:"w-5 h-5 text-indigo-600"}),children:l.jsx(Ift,{items:n,selectedId:s,onSelect:F=>{i(F),r("responder")},canDelete:V,onDelete:K})})}),l.jsxs("main",{className:"lg:col-span-8 xl:col-span-9 space-y-6",children:[t==="crear"&&w&&l.jsxs(xy,{title:"Nueva actividad / sesin",icon:l.jsx(BQ,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("button",{onClick:H,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(vm,{className:"w-4 h-4"}),"Guardar"]}),children:[l.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Ttulo"}),l.jsx("input",{value:u.titulo,onChange:F=>f({titulo:F.target.value}),placeholder:"Ej: Comunidades de aprendizaje 1",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"rea de trabajo (Dimensin PME)"}),l.jsx("select",{value:u.dimension,onChange:F=>f({dimension:F.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:Object.keys(Kf).map(F=>l.jsx("option",{value:F,children:F},F))}),l.jsx("select",{value:u.subdimension,onChange:F=>f({subdimension:F.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:(Kf[u.dimension]||[]).map(F=>l.jsx("option",{value:F,children:F},F))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Creador  Perfil"}),l.jsx("select",{value:u.creadorPerfil,onChange:F=>f({creadorPerfil:F.target.value}),className:"w-full border rounded-lg px-3 py-2 bg-white",children:EQ.map(F=>l.jsx("option",{value:F,children:F},F))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm font-medium",children:"Creador  Usuario"}),l.jsxs("select",{value:u.creadorId,onChange:F=>{const z=F.target.value,Y=h.find(te=>te.id===z);f({creadorId:z,creadorNombre:(Y==null?void 0:Y.nombre)||""})},className:"w-full border rounded-lg px-3 py-2 bg-white",children:[l.jsx("option",{value:"",children:"Seleccione"}),h.filter(F=>F.profile===u.creadorPerfil).map(F=>l.jsx("option",{value:F.id,children:F.nombre},F.id))]})]})]}),l.jsxs("div",{className:"mt-6",children:[l.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[l.jsx(gee,{className:"w-4 h-4"})," Preguntas"]}),l.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[l.jsxs("button",{onClick:j,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[l.jsx(Lu,{className:"w-4 h-4"})," Abierta"]}),l.jsxs("button",{onClick:k,className:"inline-flex items-center gap-2 bg-sky-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90",children:[l.jsx(Lu,{className:"w-4 h-4"})," Seleccin mltiple"]}),l.jsxs("div",{className:"ms-auto flex items-center gap-2",children:[l.jsxs("div",{className:"hidden md:inline-flex items-center gap-1 text-slate-500 text-xs",children:[l.jsx(zwe,{className:"w-4 h-4"})," IA"]}),l.jsx("input",{value:u.aiTema,onChange:F=>f({aiTema:F.target.value}),placeholder:"Tema para IA (p. ej., evaluacin formativa)",className:"border rounded-lg px-3 py-1.5"}),l.jsx("input",{type:"number",min:1,max:10,value:u.aiCantidad,onChange:F=>f({aiCantidad:parseInt(F.target.value||"1")}),className:"w-20 border rounded-lg px-3 py-1.5"}),l.jsxs("button",{onClick:R,disabled:N||!u.aiTema,className:"inline-flex items-center gap-2 bg-fuchsia-600 text-white px-3 py-1.5 rounded-lg text-sm hover:opacity-90 disabled:opacity-50",children:[l.jsx(bv,{className:"w-4 h-4"}),N?"Generando":"Generar con IA"]})]})]}),l.jsxs("div",{className:"space-y-4",children:[u.preguntas.map((F,z)=>l.jsx(Dft,{q:F,index:z,onRemove:E,onPatch:I},F.id)),u.preguntas.length===0&&l.jsxs("div",{className:"text-sm text-slate-500 flex items-center gap-2",children:[l.jsx(Zo,{className:"w-4 h-4"}),"Aade preguntas abiertas o de seleccin mltiple (o usa IA)."]})]})]})]}),t==="responder"&&_&&l.jsx(xy,{title:`Responder: ${_.titulo}`,icon:l.jsx(Zl,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("button",{onClick:X,className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(vm,{className:"w-4 h-4"}),"Enviar respuestas"]}),children:l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"grid md:grid-cols-3 gap-3 text-sm",children:[l.jsx(YI,{pill:!0,label:"Dimensin",value:_.dimension}),l.jsx(YI,{pill:!0,label:"Subdimensin",value:_.subdimension}),l.jsx(YI,{pill:!0,label:"Creador",value:`${_.creadorNombre}  ${_.creadorPerfil}`})]}),_.preguntas.map(F=>l.jsx(Pft,{q:F,respuestas:g,onChange:G},F.id))]})}),t==="respuestas_individuales"&&_&&l.jsx(xy,{title:`Respuestas individuales: ${_.titulo}`,icon:l.jsx(Zl,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("button",{onClick:()=>{c(""),r("dashboard")},className:"inline-flex items-center gap-2 bg-slate-600 text-white px-4 py-2 rounded-lg hover:opacity-90",children:[l.jsx(Yf,{className:"w-4 h-4"}),"Volver al dashboard"]}),children:l.jsxs("div",{className:"grid md:grid-cols-12 gap-6",children:[l.jsx("div",{className:"md:col-span-4 lg:col-span-3",children:l.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[l.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2",children:[l.jsx(Gb,{className:"w-5 h-5 text-indigo-600"}),"Usuarios (",b.length,")"]}),l.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto pr-2",children:b.length>0?b.map(F=>{var z;return l.jsxs("button",{onClick:()=>c(F.userId),className:`w-full text-left p-3 rounded-lg transition-all duration-200 ${o===F.userId?"bg-indigo-50 text-indigo-700 font-medium border border-indigo-200 shadow-sm":"hover:bg-slate-50 border border-transparent"}`,children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-1.5 bg-indigo-100 rounded-lg",children:l.jsx(Gb,{className:"w-4 h-4 text-indigo-600"})}),l.jsx("span",{className:"font-medium",children:F.userNombre})]}),l.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1.5",children:[l.jsx(Id,{className:"w-3.5 h-3.5"}),new Date(((z=F.createdAt)==null?void 0:z.seconds)*1e3).toLocaleDateString()]})]},F.userId)}):l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(Gb,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No hay respuestas todava"})]})})]})}),l.jsx("div",{className:"md:col-span-8 lg:col-span-9",children:o?l.jsxs(l.Fragment,{children:[l.jsxs("h4",{className:"font-semibold mb-4 flex items-center gap-2 text-lg",children:[l.jsx(BQ,{className:"w-5 h-5 text-indigo-600"}),"Respuestas de:"," ",l.jsx("span",{className:"text-indigo-600",children:(ee=b.find(F=>F.userId===o))==null?void 0:ee.userNombre})]}),l.jsx("div",{className:"space-y-6",children:_.preguntas.map(F=>{var te;const z=b.find(ae=>ae.userId===o),Y=(te=z==null?void 0:z.respuestas)==null?void 0:te[F.id];return console.log("Respuesta encontrada:",{preguntaId:F.id,tipo:F.tipo,respuesta:Y}),l.jsxs("div",{className:"bg-white p-6 border border-slate-200 rounded-xl shadow-sm",children:[l.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[l.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg shrink-0",children:F.tipo==="abierta"?l.jsx(TQ,{className:"w-5 h-5 text-indigo-600"}):l.jsx(Yy,{className:"w-5 h-5 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-900",children:F.enunciado}),l.jsx("p",{className:"text-sm text-slate-500 mt-1",children:F.tipo==="abierta"?"Respuesta abierta":"Seleccin mltiple"})]})]}),F.tipo==="abierta"?(Y==null?void 0:Y.tipo)==="abierta"&&Y.valorTexto?l.jsx("div",{className:"mt-3 bg-slate-50 rounded-lg p-4",children:l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:Y.valorTexto})}):l.jsx("p",{className:"text-slate-500 italic mt-3",children:"Sin respuesta"}):l.jsxs("div",{className:"space-y-2 mt-3",children:[(F.opciones||[]).map(ae=>{const ie=((Y==null?void 0:Y.tipo)==="seleccion_multiple"?Y.seleccionados||[]:[]).includes(ae.text);return l.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-all ${ie?"border-indigo-200 bg-indigo-50 text-indigo-700 shadow-sm":"border-slate-200 text-slate-500"}`,children:[l.jsx("div",{className:"flex-shrink-0",children:ie?l.jsx(Zo,{className:"w-4 h-4 text-indigo-600"}):l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 rounded-full"})}),l.jsx("span",{className:"text-sm",children:typeof ae=="string"?ae:ae.text})]},typeof ae=="string"?ae:ae.id)}),!Y&&l.jsx("p",{className:"text-slate-500 italic mt-1 text-sm",children:"Sin respuesta"})]})]},F.id)})})]}):l.jsx("div",{className:"text-center text-slate-500 py-12",children:"Selecciona un usuario para ver sus respuestas"})})]})}),t==="dashboard"&&_&&l.jsxs(xy,{title:`Dashboard: ${_.titulo}`,icon:l.jsx(xP,{className:"w-5 h-5 text-indigo-600"}),right:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>r("respuestas_individuales"),className:"inline-flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors",children:[l.jsx(Gb,{className:"w-4 h-4"}),"Ver respuestas individuales"]}),V(_)&&l.jsxs("button",{onClick:()=>K(_.id,_.titulo),className:"inline-flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[l.jsx(tl,{className:"w-4 h-4"}),"Eliminar actividad"]})]}),children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:l.jsx(Gb,{className:"w-5 h-5 text-indigo-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Total respuestas"}),l.jsx("p",{className:"text-xl font-semibold",children:b.length})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:l.jsx(Yy,{className:"w-5 h-5 text-emerald-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Preguntas"}),l.jsx("p",{className:"text-xl font-semibold",children:_.preguntas.length})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:l.jsx(cg,{className:"w-5 h-5 text-blue-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Creador"}),l.jsx("p",{className:"text-sm font-medium truncate",children:_.creadorNombre})]})]})}),l.jsx("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:l.jsx(Id,{className:"w-5 h-5 text-purple-600"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-slate-500",children:"Fecha"}),l.jsx("p",{className:"text-sm font-medium",children:(()=>{const F=_.createdAt,z=F!=null&&F.toDate?F.toDate():F!=null&&F.seconds?new Date(F.seconds*1e3):F?new Date(F):null;return z?z.toLocaleDateString():"No disponible"})()})]})]})})]}),l.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(hee,{className:"w-5 h-5 text-indigo-600"}),l.jsx("h4",{className:"font-semibold",children:"Resultados de seleccin mltiple"})]}),l.jsxs("div",{className:"space-y-4",children:[_.preguntas.filter(F=>F.tipo==="seleccion_multiple").map(F=>l.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[l.jsx("p",{className:"font-medium mb-3 text-slate-700",children:F.enunciado}),Object.entries(L[F.id]||{}).map(([z,Y])=>l.jsx(Fft,{label:z,value:Y},z)),l.jsxs("div",{className:"text-xs text-slate-500 mt-2 flex items-center gap-1",children:[l.jsx(F2,{className:"w-4 h-4"}),"Total respuestas: ",b.length]})]},F.id)),_.preguntas.filter(F=>F.tipo==="seleccion_multiple").length===0&&l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(Yy,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"No hay preguntas de seleccin mltiple en esta actividad."})]})]})]}),l.jsxs("div",{className:"bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx(Xbe,{className:"w-5 h-5 text-indigo-600"}),l.jsx("h4",{className:"font-semibold",children:"Conceptos clave (IA)"})]}),P.length?l.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(F=>l.jsx("span",{className:"rounded-full px-3 py-1.5 text-sm bg-gradient-to-r from-indigo-50 to-purple-50 text-indigo-700 border border-indigo-100 shadow-sm transition-transform hover:scale-105",style:{fontSize:`${12+Math.round(F.score*18)}px`},children:F.keyword},F.keyword))}):l.jsxs("div",{className:"text-center py-8 text-slate-500",children:[l.jsx(TQ,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),l.jsx("p",{className:"text-sm",children:"An no hay suficientes respuestas abiertas para mostrar conceptos."})]})]})]})]})]})]})]})};var hE=e=>e.type==="checkbox",Qp=e=>e instanceof Date,gl=e=>e==null;const sAe=e=>typeof e=="object";var Ws=e=>!gl(e)&&!Array.isArray(e)&&sAe(e)&&!Qp(e),Lft=e=>Ws(e)&&e.target?hE(e.target)?e.target.checked:e.target.value:e,Mft=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Uft=(e,t)=>e.has(Mft(t)),Qft=e=>{const t=e.constructor&&e.constructor.prototype;return Ws(t)&&t.hasOwnProperty("isPrototypeOf")},_M=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ya(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(_M&&(e instanceof Blob||n))&&(r||Ws(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!Qft(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Ya(e[a]));else return e;return t}var eB=e=>/^\w*$/.test(e),Ja=e=>e===void 0,tB=e=>Array.isArray(e)?e.filter(Boolean):[],NM=e=>tB(e.replace(/["|']|\]/g,"").split(/\.|\[/)),lr=(e,t,r)=>{if(!t||!Ws(e))return r;const n=(eB(t)?[t]:NM(t)).reduce((a,s)=>gl(a)?a:a[s],e);return Ja(n)||n===e?Ja(e[t])?r:e[t]:n},jA=e=>typeof e=="boolean",Fa=(e,t,r)=>{let n=-1;const a=eB(t)?[t]:NM(t),s=a.length,i=s-1;for(;++n<s;){const o=a[n];let c=r;if(n!==i){const u=e[o];c=Ws(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const rY={BLUR:"blur",FOCUS_OUT:"focusout"},ju={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},zf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},iAe=nt.createContext(null);iAe.displayName="HookFormContext";const Hft=()=>nt.useContext(iAe);var Vft=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const i=s;return t._proxyFormState[i]!==ju.all&&(t._proxyFormState[i]=!n||ju.all),e[i]}});return a};const oAe=typeof window<"u"?nt.useLayoutEffect:nt.useEffect;var HA=e=>typeof e=="string",zft=(e,t,r,n,a)=>HA(e)?(n&&t.watch.add(e),lr(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),lr(r,s))):(n&&(t.watchAll=!0),r),oD=e=>gl(e)||!sAe(e);function Q0(e,t,r=new WeakSet){if(oD(e)||oD(t))return e===t;if(Qp(e)&&Qp(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const i=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Qp(i)&&Qp(o)||Ws(i)&&Ws(o)||Array.isArray(i)&&Array.isArray(o)?!Q0(i,o,r):i!==o)return!1}}return!0}var $ft=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Jl=e=>Array.isArray(e)?e:[e],nY=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},hl=e=>Ws(e)&&!Object.keys(e).length,SM=e=>e.type==="file",Cd=e=>typeof e=="function",PS=e=>{if(!_M)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},lAe=e=>e.type==="select-multiple",kM=e=>e.type==="radio",Gft=e=>kM(e)||hE(e),JI=e=>PS(e)&&e.isConnected;function Kft(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Ja(e)?n++:e[t[n++]];return e}function qft(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ja(e[t]))return!1;return!0}function Us(e,t){const r=Array.isArray(t)?t:eB(t)?[t]:NM(t),n=r.length===1?e:Kft(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Ws(n)&&hl(n)||Array.isArray(n)&&qft(n))&&Us(e,r.slice(0,-1)),e}var cAe=e=>{for(const t in e)if(Cd(e[t]))return!0;return!1};function RS(e,t={}){const r=Array.isArray(e);if(Ws(e)||r)for(const n in e)Array.isArray(e[n])||Ws(e[n])&&!cAe(e[n])?(t[n]=Array.isArray(e[n])?[]:{},RS(e[n],t[n])):gl(e[n])||(t[n]=!0);return t}function uAe(e,t,r){const n=Array.isArray(e);if(Ws(e)||n)for(const a in e)Array.isArray(e[a])||Ws(e[a])&&!cAe(e[a])?Ja(t)||oD(r[a])?r[a]=Array.isArray(e[a])?RS(e[a],[]):{...RS(e[a])}:uAe(e[a],gl(t)?{}:t[a],r[a]):r[a]=!Q0(e[a],t[a]);return r}var vy=(e,t)=>uAe(e,t,RS(t));const aY={value:!1,isValid:!1},sY={value:!0,isValid:!0};var dAe=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ja(e[0].attributes.value)?Ja(e[0].value)||e[0].value===""?sY:{value:e[0].value,isValid:!0}:sY:aY}return aY},AAe=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Ja(e)?e:t?e===""?NaN:e&&+e:r&&HA(e)?new Date(e):n?n(e):e;const iY={isValid:!1,value:null};var fAe=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,iY):iY;function oY(e){const t=e.ref;return SM(t)?t.files:kM(t)?fAe(e.refs).value:lAe(t)?[...t.selectedOptions].map(({value:r})=>r):hE(t)?dAe(e.refs).value:AAe(Ja(t.value)?e.ref.value:t.value,e)}var Wft=(e,t,r,n)=>{const a={};for(const s of e){const i=lr(t,s);i&&Fa(a,s,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},LS=e=>e instanceof RegExp,by=e=>Ja(e)?e:LS(e)?e.source:Ws(e)?LS(e.value)?e.value.source:e.value:e,fv=e=>({isOnSubmit:!e||e===ju.onSubmit,isOnBlur:e===ju.onBlur,isOnChange:e===ju.onChange,isOnAll:e===ju.all,isOnTouch:e===ju.onTouched});const lY="AsyncFunction";var Xft=e=>!!e&&!!e.validate&&!!(Cd(e.validate)&&e.validate.constructor.name===lY||Ws(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===lY)),Yft=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),lD=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Rv=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=lr(e,a);if(s){const{_f:i,...o}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if(Rv(o,t))break}else if(Ws(o)&&Rv(o,t))break}}};function cY(e,t,r){const n=lr(e,r);if(n||eB(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=lr(t,s),o=lr(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};a.pop()}return{name:r}}var Jft=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return hl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!n||ju.all))},Zft=(e,t,r)=>!e||!t||e===t||Jl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),eht=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,tht=(e,t)=>!tB(lr(e,t)).length&&Us(e,t),hAe=(e,t,r)=>{const n=Jl(lr(e,r));return Fa(n,"root",t[r]),Fa(e,r,n),e},j5=e=>HA(e);function uY(e,t,r="validate"){if(j5(e)||Array.isArray(e)&&e.every(j5)||jA(e)&&!e)return{type:r,message:j5(e)?e:"",ref:t}}var zx=e=>Ws(e)&&!LS(e)?e:{value:e,message:""},cD=async(e,t,r,n,a,s)=>{const{ref:i,refs:o,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:p,validate:g,name:x,valueAsNumber:b,mount:y}=e._f,w=lr(r,x);if(!y||t.has(x))return{};const _=o?o[0]:i,j=D=>{a&&_.reportValidity&&(_.setCustomValidity(jA(D)?"":D||""),_.reportValidity())},k={},I=kM(i),E=hE(i),N=I||E,B=(b||SM(i))&&Ja(i.value)&&Ja(w)||PS(i)&&i.value===""||w===""||Array.isArray(w)&&!w.length,R=$ft.bind(null,x,n,k),P=(D,L,M,J=zf.maxLength,H=zf.minLength)=>{const K=D?L:M;k[x]={type:D?J:H,message:K,ref:i,...R(D?J:H,K)}};if(s?!Array.isArray(w)||!w.length:c&&(!N&&(B||gl(w))||jA(w)&&!w||E&&!dAe(o).isValid||I&&!fAe(o).isValid)){const{value:D,message:L}=j5(c)?{value:!!c,message:c}:zx(c);if(D&&(k[x]={type:zf.required,message:L,ref:_,...R(zf.required,L)},!n))return j(L),k}if(!B&&(!gl(f)||!gl(h))){let D,L;const M=zx(h),J=zx(f);if(!gl(w)&&!isNaN(w)){const H=i.valueAsNumber||w&&+w;gl(M.value)||(D=H>M.value),gl(J.value)||(L=H<J.value)}else{const H=i.valueAsDate||new Date(w),K=X=>new Date(new Date().toDateString()+" "+X),V=i.type=="time",G=i.type=="week";HA(M.value)&&w&&(D=V?K(w)>K(M.value):G?w>M.value:H>new Date(M.value)),HA(J.value)&&w&&(L=V?K(w)<K(J.value):G?w<J.value:H<new Date(J.value))}if((D||L)&&(P(!!D,M.message,J.message,zf.max,zf.min),!n))return j(k[x].message),k}if((u||d)&&!B&&(HA(w)||s&&Array.isArray(w))){const D=zx(u),L=zx(d),M=!gl(D.value)&&w.length>+D.value,J=!gl(L.value)&&w.length<+L.value;if((M||J)&&(P(M,D.message,L.message),!n))return j(k[x].message),k}if(p&&!B&&HA(w)){const{value:D,message:L}=zx(p);if(LS(D)&&!w.match(D)&&(k[x]={type:zf.pattern,message:L,ref:i,...R(zf.pattern,L)},!n))return j(L),k}if(g){if(Cd(g)){const D=await g(w,r),L=uY(D,_);if(L&&(k[x]={...L,...R(zf.validate,L.message)},!n))return j(L.message),k}else if(Ws(g)){let D={};for(const L in g){if(!hl(D)&&!n)break;const M=uY(await g[L](w,r),_,L);M&&(D={...M,...R(L,M.message)},j(M.message),n&&(k[x]=D))}if(!hl(D)&&(k[x]={ref:_,...D},!n))return k}}return j(!0),k};const rht={mode:ju.onSubmit,reValidateMode:ju.onChange,shouldFocusError:!0};function nht(e={}){let t={...rht,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Cd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Ws(t.defaultValues)||Ws(t.values)?Ya(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Ya(a),i={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:nY(),state:nY()},p=t.criteriaMode===ju.all,g=ye=>Oe=>{clearTimeout(u),u=setTimeout(ye,Oe)},x=async ye=>{if(!t.disabled&&(d.isValid||f.isValid||ye)){const Oe=t.resolver?hl((await E()).errors):await B(n,!0);Oe!==r.isValid&&h.state.next({isValid:Oe})}},b=(ye,Oe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ye||Array.from(o.mount)).forEach(Re=>{Re&&(Oe?Fa(r.validatingFields,Re,Oe):Us(r.validatingFields,Re))}),h.state.next({validatingFields:r.validatingFields,isValidating:!hl(r.validatingFields)}))},y=(ye,Oe=[],Re,qe,Ze=!0,ct=!0)=>{if(qe&&Re&&!t.disabled){if(i.action=!0,ct&&Array.isArray(lr(n,ye))){const pt=Re(lr(n,ye),qe.argA,qe.argB);Ze&&Fa(n,ye,pt)}if(ct&&Array.isArray(lr(r.errors,ye))){const pt=Re(lr(r.errors,ye),qe.argA,qe.argB);Ze&&Fa(r.errors,ye,pt),tht(r.errors,ye)}if((d.touchedFields||f.touchedFields)&&ct&&Array.isArray(lr(r.touchedFields,ye))){const pt=Re(lr(r.touchedFields,ye),qe.argA,qe.argB);Ze&&Fa(r.touchedFields,ye,pt)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=vy(a,s)),h.state.next({name:ye,isDirty:P(ye,Oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Fa(s,ye,Oe)},w=(ye,Oe)=>{Fa(r.errors,ye,Oe),h.state.next({errors:r.errors})},_=ye=>{r.errors=ye,h.state.next({errors:r.errors,isValid:!1})},j=(ye,Oe,Re,qe)=>{const Ze=lr(n,ye);if(Ze){const ct=lr(s,ye,Ja(Re)?lr(a,ye):Re);Ja(ct)||qe&&qe.defaultChecked||Oe?Fa(s,ye,Oe?ct:oY(Ze._f)):M(ye,ct),i.mount&&x()}},k=(ye,Oe,Re,qe,Ze)=>{let ct=!1,pt=!1;const It={name:ye};if(!t.disabled){if(!Re||qe){(d.isDirty||f.isDirty)&&(pt=r.isDirty,r.isDirty=It.isDirty=P(),ct=pt!==It.isDirty);const Mt=Q0(lr(a,ye),Oe);pt=!!lr(r.dirtyFields,ye),Mt?Us(r.dirtyFields,ye):Fa(r.dirtyFields,ye,!0),It.dirtyFields=r.dirtyFields,ct=ct||(d.dirtyFields||f.dirtyFields)&&pt!==!Mt}if(Re){const Mt=lr(r.touchedFields,ye);Mt||(Fa(r.touchedFields,ye,Re),It.touchedFields=r.touchedFields,ct=ct||(d.touchedFields||f.touchedFields)&&Mt!==Re)}ct&&Ze&&h.state.next(It)}return ct?It:{}},I=(ye,Oe,Re,qe)=>{const Ze=lr(r.errors,ye),ct=(d.isValid||f.isValid)&&jA(Oe)&&r.isValid!==Oe;if(t.delayError&&Re?(c=g(()=>w(ye,Re)),c(t.delayError)):(clearTimeout(u),c=null,Re?Fa(r.errors,ye,Re):Us(r.errors,ye)),(Re?!Q0(Ze,Re):Ze)||!hl(qe)||ct){const pt={...qe,...ct&&jA(Oe)?{isValid:Oe}:{},errors:r.errors,name:ye};r={...r,...pt},h.state.next(pt)}},E=async ye=>{b(ye,!0);const Oe=await t.resolver(s,t.context,Wft(ye||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(ye),Oe},N=async ye=>{const{errors:Oe}=await E(ye);if(ye)for(const Re of ye){const qe=lr(Oe,Re);qe?Fa(r.errors,Re,qe):Us(r.errors,Re)}else r.errors=Oe;return Oe},B=async(ye,Oe,Re={valid:!0})=>{for(const qe in ye){const Ze=ye[qe];if(Ze){const{_f:ct,...pt}=Ze;if(ct){const It=o.array.has(ct.name),Mt=Ze._f&&Xft(Ze._f);Mt&&d.validatingFields&&b([qe],!0);const Pt=await cD(Ze,o.disabled,s,p,t.shouldUseNativeValidation&&!Oe,It);if(Mt&&d.validatingFields&&b([qe]),Pt[ct.name]&&(Re.valid=!1,Oe))break;!Oe&&(lr(Pt,ct.name)?It?hAe(r.errors,Pt,ct.name):Fa(r.errors,ct.name,Pt[ct.name]):Us(r.errors,ct.name))}!hl(pt)&&await B(pt,Oe,Re)}}return Re.valid},R=()=>{for(const ye of o.unMount){const Oe=lr(n,ye);Oe&&(Oe._f.refs?Oe._f.refs.every(Re=>!JI(Re)):!JI(Oe._f.ref))&&le(ye)}o.unMount=new Set},P=(ye,Oe)=>!t.disabled&&(ye&&Oe&&Fa(s,ye,Oe),!Q0(X(),a)),D=(ye,Oe,Re)=>zft(ye,o,{...i.mount?s:Ja(Oe)?a:HA(ye)?{[ye]:Oe}:Oe},Re,Oe),L=ye=>tB(lr(i.mount?s:a,ye,t.shouldUnregister?lr(a,ye,[]):[])),M=(ye,Oe,Re={})=>{const qe=lr(n,ye);let Ze=Oe;if(qe){const ct=qe._f;ct&&(!ct.disabled&&Fa(s,ye,AAe(Oe,ct)),Ze=PS(ct.ref)&&gl(Oe)?"":Oe,lAe(ct.ref)?[...ct.ref.options].forEach(pt=>pt.selected=Ze.includes(pt.value)):ct.refs?hE(ct.ref)?ct.refs.forEach(pt=>{(!pt.defaultChecked||!pt.disabled)&&(Array.isArray(Ze)?pt.checked=!!Ze.find(It=>It===pt.value):pt.checked=Ze===pt.value||!!Ze)}):ct.refs.forEach(pt=>pt.checked=pt.value===Ze):SM(ct.ref)?ct.ref.value="":(ct.ref.value=Ze,ct.ref.type||h.state.next({name:ye,values:Ya(s)})))}(Re.shouldDirty||Re.shouldTouch)&&k(ye,Ze,Re.shouldTouch,Re.shouldDirty,!0),Re.shouldValidate&&G(ye)},J=(ye,Oe,Re)=>{for(const qe in Oe){if(!Oe.hasOwnProperty(qe))return;const Ze=Oe[qe],ct=ye+"."+qe,pt=lr(n,ct);(o.array.has(ye)||Ws(Ze)||pt&&!pt._f)&&!Qp(Ze)?J(ct,Ze,Re):M(ct,Ze,Re)}},H=(ye,Oe,Re={})=>{const qe=lr(n,ye),Ze=o.array.has(ye),ct=Ya(Oe);Fa(s,ye,ct),Ze?(h.array.next({name:ye,values:Ya(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Re.shouldDirty&&h.state.next({name:ye,dirtyFields:vy(a,s),isDirty:P(ye,ct)})):qe&&!qe._f&&!gl(ct)?J(ye,ct,Re):M(ye,ct,Re),lD(ye,o)&&h.state.next({...r,name:ye}),h.state.next({name:i.mount?ye:void 0,values:Ya(s)})},K=async ye=>{i.mount=!0;const Oe=ye.target;let Re=Oe.name,qe=!0;const Ze=lr(n,Re),ct=Mt=>{qe=Number.isNaN(Mt)||Qp(Mt)&&isNaN(Mt.getTime())||Q0(Mt,lr(s,Re,Mt))},pt=fv(t.mode),It=fv(t.reValidateMode);if(Ze){let Mt,Pt;const Qt=Oe.type?oY(Ze._f):Lft(ye),yt=ye.type===rY.BLUR||ye.type===rY.FOCUS_OUT,Br=!Yft(Ze._f)&&!t.resolver&&!lr(r.errors,Re)&&!Ze._f.deps||eht(yt,lr(r.touchedFields,Re),r.isSubmitted,It,pt),tr=lD(Re,o,yt);Fa(s,Re,Qt),yt?(!Oe||!Oe.readOnly)&&(Ze._f.onBlur&&Ze._f.onBlur(ye),c&&c(0)):Ze._f.onChange&&Ze._f.onChange(ye);const nn=k(Re,Qt,yt),Nr=!hl(nn)||tr;if(!yt&&h.state.next({name:Re,type:ye.type,values:Ya(s)}),Br)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?yt&&x():yt||x()),Nr&&h.state.next({name:Re,...tr?{}:nn});if(!yt&&tr&&h.state.next({...r}),t.resolver){const{errors:Vr}=await E([Re]);if(ct(Qt),qe){const In=cY(r.errors,n,Re),Or=cY(Vr,n,In.name||Re);Mt=Or.error,Re=Or.name,Pt=hl(Vr)}}else b([Re],!0),Mt=(await cD(Ze,o.disabled,s,p,t.shouldUseNativeValidation))[Re],b([Re]),ct(Qt),qe&&(Mt?Pt=!1:(d.isValid||f.isValid)&&(Pt=await B(n,!0)));qe&&(Ze._f.deps&&G(Ze._f.deps),I(Re,Pt,Mt,nn))}},V=(ye,Oe)=>{if(lr(r.errors,Oe)&&ye.focus)return ye.focus(),1},G=async(ye,Oe={})=>{let Re,qe;const Ze=Jl(ye);if(t.resolver){const ct=await N(Ja(ye)?ye:Ze);Re=hl(ct),qe=ye?!Ze.some(pt=>lr(ct,pt)):Re}else ye?(qe=(await Promise.all(Ze.map(async ct=>{const pt=lr(n,ct);return await B(pt&&pt._f?{[ct]:pt}:pt)}))).every(Boolean),!(!qe&&!r.isValid)&&x()):qe=Re=await B(n);return h.state.next({...!HA(ye)||(d.isValid||f.isValid)&&Re!==r.isValid?{}:{name:ye},...t.resolver||!ye?{isValid:Re}:{},errors:r.errors}),Oe.shouldFocus&&!qe&&Rv(n,V,ye?Ze:o.mount),qe},X=ye=>{const Oe={...i.mount?s:a};return Ja(ye)?Oe:HA(ye)?lr(Oe,ye):ye.map(Re=>lr(Oe,Re))},ee=(ye,Oe)=>({invalid:!!lr((Oe||r).errors,ye),isDirty:!!lr((Oe||r).dirtyFields,ye),error:lr((Oe||r).errors,ye),isValidating:!!lr(r.validatingFields,ye),isTouched:!!lr((Oe||r).touchedFields,ye)}),F=ye=>{ye&&Jl(ye).forEach(Oe=>Us(r.errors,Oe)),h.state.next({errors:ye?r.errors:{}})},z=(ye,Oe,Re)=>{const qe=(lr(n,ye,{_f:{}})._f||{}).ref,Ze=lr(r.errors,ye)||{},{ref:ct,message:pt,type:It,...Mt}=Ze;Fa(r.errors,ye,{...Mt,...Oe,ref:qe}),h.state.next({name:ye,errors:r.errors,isValid:!1}),Re&&Re.shouldFocus&&qe&&qe.focus&&qe.focus()},Y=(ye,Oe)=>Cd(ye)?h.state.subscribe({next:Re=>"values"in Re&&ye(D(void 0,Oe),Re)}):D(ye,Oe,!0),te=ye=>h.state.subscribe({next:Oe=>{Zft(ye.name,Oe.name,ye.exact)&&Jft(Oe,ye.formState||d,Ie,ye.reRenderRoot)&&ye.callback({values:{...s},...r,...Oe,defaultValues:a})}}).unsubscribe,ae=ye=>(i.mount=!0,f={...f,...ye.formState},te({...ye,formState:f})),le=(ye,Oe={})=>{for(const Re of ye?Jl(ye):o.mount)o.mount.delete(Re),o.array.delete(Re),Oe.keepValue||(Us(n,Re),Us(s,Re)),!Oe.keepError&&Us(r.errors,Re),!Oe.keepDirty&&Us(r.dirtyFields,Re),!Oe.keepTouched&&Us(r.touchedFields,Re),!Oe.keepIsValidating&&Us(r.validatingFields,Re),!t.shouldUnregister&&!Oe.keepDefaultValue&&Us(a,Re);h.state.next({values:Ya(s)}),h.state.next({...r,...Oe.keepDirty?{isDirty:P()}:{}}),!Oe.keepIsValid&&x()},ie=({disabled:ye,name:Oe})=>{(jA(ye)&&i.mount||ye||o.disabled.has(Oe))&&(ye?o.disabled.add(Oe):o.disabled.delete(Oe))},ce=(ye,Oe={})=>{let Re=lr(n,ye);const qe=jA(Oe.disabled)||jA(t.disabled);return Fa(n,ye,{...Re||{},_f:{...Re&&Re._f?Re._f:{ref:{name:ye}},name:ye,mount:!0,...Oe}}),o.mount.add(ye),Re?ie({disabled:jA(Oe.disabled)?Oe.disabled:t.disabled,name:ye}):j(ye,!0,Oe.value),{...qe?{disabled:Oe.disabled||t.disabled}:{},...t.progressive?{required:!!Oe.required,min:by(Oe.min),max:by(Oe.max),minLength:by(Oe.minLength),maxLength:by(Oe.maxLength),pattern:by(Oe.pattern)}:{},name:ye,onChange:K,onBlur:K,ref:Ze=>{if(Ze){ce(ye,Oe),Re=lr(n,ye);const ct=Ja(Ze.value)&&Ze.querySelectorAll&&Ze.querySelectorAll("input,select,textarea")[0]||Ze,pt=Gft(ct),It=Re._f.refs||[];if(pt?It.find(Mt=>Mt===ct):ct===Re._f.ref)return;Fa(n,ye,{_f:{...Re._f,...pt?{refs:[...It.filter(JI),ct,...Array.isArray(lr(a,ye))?[{}]:[]],ref:{type:ct.type,name:ye}}:{ref:ct}}}),j(ye,!1,void 0,ct)}else Re=lr(n,ye,{}),Re._f&&(Re._f.mount=!1),(t.shouldUnregister||Oe.shouldUnregister)&&!(Uft(o.array,ye)&&i.action)&&o.unMount.add(ye)}}},pe=()=>t.shouldFocusError&&Rv(n,V,o.mount),Be=ye=>{jA(ye)&&(h.state.next({disabled:ye}),Rv(n,(Oe,Re)=>{const qe=lr(n,Re);qe&&(Oe.disabled=qe._f.disabled||ye,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ze=>{Ze.disabled=qe._f.disabled||ye}))},0,!1))},ne=(ye,Oe)=>async Re=>{let qe;Re&&(Re.preventDefault&&Re.preventDefault(),Re.persist&&Re.persist());let Ze=Ya(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ct,values:pt}=await E();r.errors=ct,Ze=Ya(pt)}else await B(n);if(o.disabled.size)for(const ct of o.disabled)Us(Ze,ct);if(Us(r.errors,"root"),hl(r.errors)){h.state.next({errors:{}});try{await ye(Ze,Re)}catch(ct){qe=ct}}else Oe&&await Oe({...r.errors},Re),pe(),setTimeout(pe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:hl(r.errors)&&!qe,submitCount:r.submitCount+1,errors:r.errors}),qe)throw qe},_e=(ye,Oe={})=>{lr(n,ye)&&(Ja(Oe.defaultValue)?H(ye,Ya(lr(a,ye))):(H(ye,Oe.defaultValue),Fa(a,ye,Ya(Oe.defaultValue))),Oe.keepTouched||Us(r.touchedFields,ye),Oe.keepDirty||(Us(r.dirtyFields,ye),r.isDirty=Oe.defaultValue?P(ye,Ya(lr(a,ye))):P()),Oe.keepError||(Us(r.errors,ye),d.isValid&&x()),h.state.next({...r}))},De=(ye,Oe={})=>{const Re=ye?Ya(ye):a,qe=Ya(Re),Ze=hl(ye),ct=Ze?a:qe;if(Oe.keepDefaultValues||(a=Re),!Oe.keepValues){if(Oe.keepDirtyValues){const pt=new Set([...o.mount,...Object.keys(vy(a,s))]);for(const It of Array.from(pt))lr(r.dirtyFields,It)?Fa(ct,It,lr(s,It)):H(It,lr(ct,It))}else{if(_M&&Ja(ye))for(const pt of o.mount){const It=lr(n,pt);if(It&&It._f){const Mt=Array.isArray(It._f.refs)?It._f.refs[0]:It._f.ref;if(PS(Mt)){const Pt=Mt.closest("form");if(Pt){Pt.reset();break}}}}if(Oe.keepFieldsRef)for(const pt of o.mount)H(pt,lr(ct,pt));else n={}}s=t.shouldUnregister?Oe.keepDefaultValues?Ya(a):{}:Ya(ct),h.array.next({values:{...ct}}),h.state.next({values:{...ct}})}o={mount:Oe.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!Oe.keepIsValid||!!Oe.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:Oe.keepSubmitCount?r.submitCount:0,isDirty:Ze?!1:Oe.keepDirty?r.isDirty:!!(Oe.keepDefaultValues&&!Q0(ye,a)),isSubmitted:Oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ze?{}:Oe.keepDirtyValues?Oe.keepDefaultValues&&s?vy(a,s):r.dirtyFields:Oe.keepDefaultValues&&ye?vy(a,ye):Oe.keepDirty?r.dirtyFields:{},touchedFields:Oe.keepTouched?r.touchedFields:{},errors:Oe.keepErrors?r.errors:{},isSubmitSuccessful:Oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},Se=(ye,Oe)=>De(Cd(ye)?ye(s):ye,Oe),fe=(ye,Oe={})=>{const Re=lr(n,ye),qe=Re&&Re._f;if(qe){const Ze=qe.refs?qe.refs[0]:qe.ref;Ze.focus&&(Ze.focus(),Oe.shouldSelect&&Cd(Ze.select)&&Ze.select())}},Ie=ye=>{r={...r,...ye}},Ye={control:{register:ce,unregister:le,getFieldState:ee,handleSubmit:ne,setError:z,_subscribe:te,_runSchema:E,_focusError:pe,_getWatch:D,_getDirty:P,_setValid:x,_setFieldArray:y,_setDisabledField:ie,_setErrors:_,_getFieldArray:L,_reset:De,_resetDefaultValues:()=>Cd(t.defaultValues)&&t.defaultValues().then(ye=>{Se(ye,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:Be,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return i},set _state(ye){i=ye},get _defaultValues(){return a},get _names(){return o},set _names(ye){o=ye},get _formState(){return r},get _options(){return t},set _options(ye){t={...t,...ye}}},subscribe:ae,trigger:G,register:ce,handleSubmit:ne,watch:Y,setValue:H,getValues:X,reset:Se,resetField:_e,clearErrors:F,unregister:le,setError:z,setFocus:fe,getFieldState:ee};return{...Ye,formControl:Ye}}var k0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},ZI=(e,t,r={})=>r.shouldFocus||Ja(r.shouldFocus)?r.focusName||`${e}.${Ja(r.focusIndex)?t:r.focusIndex}.`:"",e6=(e,t)=>[...e,...Jl(t)],t6=e=>Array.isArray(e)?e.map(()=>{}):void 0;function r6(e,t,r){return[...e.slice(0,t),...Jl(r),...e.slice(t)]}var n6=(e,t,r)=>Array.isArray(e)?(Ja(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],a6=(e,t)=>[...Jl(t),...Jl(e)];function aht(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return tB(n).length?n:[]}var s6=(e,t)=>Ja(t)?[]:aht(e,Jl(t).sort((r,n)=>r-n)),i6=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},dY=(e,t,r)=>(e[t]=r,e);function sht(e){const t=Hft(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:i}=e,[o,c]=nt.useState(r._getFieldArray(n)),u=nt.useRef(r._getFieldArray(n).map(k0)),d=nt.useRef(o),f=nt.useRef(!1);d.current=o,r._names.array.add(n),nt.useMemo(()=>i&&r.register(n,i),[r,i,n]),oAe(()=>r._subjects.array.subscribe({next:({values:k,name:I})=>{if(I===n||!I){const E=lr(k,n);Array.isArray(E)&&(c(E),u.current=E.map(k0))}}}).unsubscribe,[r,n]);const h=nt.useCallback(k=>{f.current=!0,r._setFieldArray(n,k)},[r,n]),p=(k,I)=>{const E=Jl(Ya(k)),N=e6(r._getFieldArray(n),E);r._names.focus=ZI(n,N.length-1,I),u.current=e6(u.current,E.map(k0)),h(N),c(N),r._setFieldArray(n,N,e6,{argA:t6(k)})},g=(k,I)=>{const E=Jl(Ya(k)),N=a6(r._getFieldArray(n),E);r._names.focus=ZI(n,0,I),u.current=a6(u.current,E.map(k0)),h(N),c(N),r._setFieldArray(n,N,a6,{argA:t6(k)})},x=k=>{const I=s6(r._getFieldArray(n),k);u.current=s6(u.current,k),h(I),c(I),!Array.isArray(lr(r._fields,n))&&Fa(r._fields,n,void 0),r._setFieldArray(n,I,s6,{argA:k})},b=(k,I,E)=>{const N=Jl(Ya(I)),B=r6(r._getFieldArray(n),k,N);r._names.focus=ZI(n,k,E),u.current=r6(u.current,k,N.map(k0)),h(B),c(B),r._setFieldArray(n,B,r6,{argA:k,argB:t6(I)})},y=(k,I)=>{const E=r._getFieldArray(n);i6(E,k,I),i6(u.current,k,I),h(E),c(E),r._setFieldArray(n,E,i6,{argA:k,argB:I},!1)},w=(k,I)=>{const E=r._getFieldArray(n);n6(E,k,I),n6(u.current,k,I),h(E),c(E),r._setFieldArray(n,E,n6,{argA:k,argB:I},!1)},_=(k,I)=>{const E=Ya(I),N=dY(r._getFieldArray(n),k,E);u.current=[...N].map((B,R)=>!B||R===k?k0():u.current[R]),h(N),c([...N]),r._setFieldArray(n,N,dY,{argA:k,argB:E},!0,!1)},j=k=>{const I=Jl(Ya(k));u.current=I.map(k0),h([...I]),c([...I]),r._setFieldArray(n,[...I],E=>E,{},!0,!1)};return nt.useEffect(()=>{if(r._state.action=!1,lD(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!fv(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!fv(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(k=>{const I=lr(k.errors,n),E=lr(r._formState.errors,n);(E?!I&&E.type||I&&(E.type!==I.type||E.message!==I.message):I&&I.type)&&(I?Fa(r._formState.errors,n,I):Us(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const k=lr(r._fields,n);k&&k._f&&!(fv(r._options.reValidateMode).isOnSubmit&&fv(r._options.mode).isOnSubmit)&&cD(k,r._names.disabled,r._formValues,r._options.criteriaMode===ju.all,r._options.shouldUseNativeValidation,!0).then(I=>!hl(I)&&r._subjects.state.next({errors:hAe(r._formState.errors,I,n)}))}r._subjects.state.next({name:n,values:Ya(r._formValues)}),r._names.focus&&Rv(r._fields,(k,I)=>{if(r._names.focus&&I.startsWith(r._names.focus)&&k.focus)return k.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[o,n,r]),nt.useEffect(()=>(!lr(r._formValues,n)&&r._setFieldArray(n),()=>{const k=(I,E)=>{const N=lr(r._fields,I);N&&N._f&&(N._f.mount=E)};r._options.shouldUnregister||s?r.unregister(n):k(n,!1)}),[n,r,a,s]),{swap:nt.useCallback(y,[h,n,r]),move:nt.useCallback(w,[h,n,r]),prepend:nt.useCallback(g,[h,n,r]),append:nt.useCallback(p,[h,n,r]),remove:nt.useCallback(x,[h,n,r]),insert:nt.useCallback(b,[h,n,r]),update:nt.useCallback(_,[h,n,r]),replace:nt.useCallback(j,[h,n,r]),fields:nt.useMemo(()=>o.map((k,I)=>({...k,[a]:u.current[I]||k0()})),[o,a])}}function iht(e={}){const t=nt.useRef(void 0),r=nt.useRef(void 0),[n,a]=nt.useState({isDirty:!1,isValidating:!1,isLoading:Cd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Cd(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Cd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...o}=nht(e);t.current={...o,formState:n}}const s=t.current.control;return s._options=e,oAe(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),s._formState.isReady=!0,i},[s]),nt.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),nt.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),nt.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),nt.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),nt.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==n.isDirty&&s._subjects.state.next({isDirty:i})}},[s,n.isDirty]),nt.useEffect(()=>{e.values&&!Q0(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(i=>({...i}))):s._resetDefaultValues()},[s,e.values]),nt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=Vft(n,s),t.current}const uD=Nt(xn,"alternancias");async function oht(e){return(await Tn(uD,{...e,createdAt:Ni(),updatedAt:Ni()})).id}async function lht({especialidad:e,pageSize:t=10,lastDoc:r}){let n=zt(uD,_r("createdAt","desc"),jd(t));e&&(n=zt(uD,Yr("especialidad","==",e),_r("createdAt","desc"),jd(t))),r&&(n=zt(n,DZ(r)));const a=await ga(n);return{items:a.docs.map(i=>({id:i.id,...i.data()})),lastDoc:a.docs[a.docs.length-1]}}async function cht(e,t){const r=dr(xn,"alternancias",e);await Vu(r,{...t,updatedAt:Ni()})}async function uht(e){const t=dr(xn,"alternancias",e);await za(t)}async function dht(e,t,r){const n=Nt(xn,"alternancias",e,t);await Tn(n,{...r,createdAt:Ni()})}async function Aht(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=x4(oee,r);await iee(n,t);const a=await hP(n);return await dht(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const pp=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return l.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),l.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},_A=({children:e,hint:t})=>l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&l.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),H_=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return l.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},gp=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const i={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return l.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${i[r]} disabled:opacity-60`,children:n})},fht=({currentUser:e})=>{const[t,r]=S.useState([]),[n,a]=S.useState(null),[s,i]=S.useState(!1),{register:o,control:c,handleSubmit:u,reset:d,watch:f,setValue:h,formState:{isSubmitting:p}}=iht({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=sht({control:c,name:"actividades"}),x=["COORDINACION_TP","SUBDIRECCION"],b=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!b||x.some(M=>b.includes(M))))return l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[l.jsx(_we,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const w=M=>(M||"").replace(/\s*[-]\s*\d+\s*horas?$/i,"").trim(),_=(M,J)=>{var H;return!M||!J?[]:((H=Ibe[M])==null?void 0:H[J])??[]},j=f("especialidad"),k=f("modulos")||[],I=S.useMemo(()=>j?Bbe[j]??[]:[],[j]),E=S.useMemo(()=>j?jbe[j]??[]:[],[j]);S.useEffect(()=>{h("curso",[]),h("modulos",[]);const M=[...f("actividades")||[]].map(J=>({...J,modulo:"",oa:""}));h("actividades",M)},[j]),S.useEffect(()=>{const M=[...f("actividades")||[]].map(J=>J.modulo&&!k.includes(J.modulo)?{...J,modulo:"",oa:""}:J);h("actividades",M)},[k]);const N=async()=>{i(!0);const{items:M}=await lht({});r(M),i(!1)};S.useEffect(()=>{N()},[]);const B=async M=>{n?await cht(n,{...M}):await oht({...M,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await N()},R=M=>{const J=Array.isArray(M.curso)?M.curso:M.curso?[M.curso]:[],H=Array.isArray(M.modulos)?M.modulos.map(V=>w(V)):[],K=Array.isArray(M.actividades)?M.actividades.map(V=>({...V,modulo:V!=null&&V.modulo?w(V.modulo):"",oa:(V==null?void 0:V.oa)||""})):[];d({...M,curso:J,modulos:H,actividades:K}),a(M.id),window.scrollTo({top:0,behavior:"smooth"})},P=async M=>{confirm("Eliminar esta alternancia?")&&(await uht(M),await N())},D=async(M,J)=>{await Aht(M,J),alert("Evidencia subida correctamente")},L=M=>{const J=Array.from(M.currentTarget.selectedOptions).map(H=>H.value);h("curso",J,{shouldDirty:!0})};return l.jsxs("div",{className:"p-4 md:p-6",children:[l.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:l.jsx(fee,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formacin por Alternancia"}),l.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con conos."})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(gp,{title:"Nuevo plan",onClick:()=>{d(),a(null)},tone:"neutral",children:[l.jsx(rN,{className:"w-4 h-4"}),"Limpiar"]}),l.jsxs(gp,{title:"Guardar",type:"submit",tone:"success",disabled:p,children:[p?l.jsx(z0,{className:"w-4 h-4 animate-spin"}):l.jsx(vm,{className:"w-4 h-4"}),"Guardar"]})]})]})}),l.jsx(pp,{title:"Planes guardados",icon:l.jsx(Kv,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?l.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[l.jsx(z0,{className:"w-4 h-4 animate-spin"})," Cargando"]}):t.length===0?l.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(M=>l.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[l.jsx(PT,{className:"w-4 h-4 text-indigo-600"}),M.especialidad]}),l.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[l.jsx(H_,{tone:"indigo",children:Array.isArray(M.curso)?M.curso.join(", "):M.curso}),l.jsx(H_,{tone:"sky",children:M.institucion}),(Array.isArray(M.tipoAlternancia)?M.tipoAlternancia:[]).slice(0,2).map(J=>l.jsx(H_,{tone:"emerald",children:J},J))]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[l.jsx(vee,{className:"w-4 h-4"}),l.jsx("input",{type:"file",className:"hidden",onChange:J=>J.target.files&&D(M.id,J.target.files[0])}),"Evidencia"]}),l.jsxs(gp,{title:"Editar",onClick:()=>R(M),children:[l.jsx(R6,{className:"w-4 h-4"})," Editar"]}),l.jsxs(gp,{title:"Eliminar",onClick:()=>P(M.id),tone:"danger",children:[l.jsx(tl,{className:"w-4 h-4"})," Eliminar"]})]})]})},M.id))})}),l.jsxs("form",{onSubmit:u(B),className:"mt-6 space-y-5",children:[l.jsx(pp,{title:"Contexto de la Alternancia",icon:l.jsx(Z5,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(_A,{children:"Especialidad"}),l.jsxs("div",{className:"relative",children:[l.jsx(PT,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[l.jsx("option",{value:"",children:"Selecciona"}),Sbe.map(M=>l.jsx("option",{value:M,children:M},M))]})]})]}),l.jsxs("div",{children:[l.jsx(_A,{children:"Institucin"}),l.jsxs("div",{className:"relative",children:[l.jsx(Z5,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[l.jsx("option",{value:"",children:"Selecciona"}),kbe.map(M=>l.jsx("option",{value:M,children:M},M))]})]})]}),l.jsxs("div",{children:[l.jsx(_A,{hint:"Ctrl/Cmd + clic para seleccionar mltiples cursos.",children:"Cursos"}),l.jsxs("div",{className:"relative",children:[l.jsx(Zl,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsx("select",{multiple:!0,size:4,...o("curso"),onChange:L,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!j,children:j?I.map(M=>l.jsx("option",{value:M,children:M},M)):l.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(f("curso")||[]).map(M=>l.jsx(H_,{tone:"sky",children:M},M))})]})]})}),l.jsx(pp,{title:"Mdulos implicados",icon:l.jsx(pee,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:j?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:E.map(M=>l.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:M,className:"mt-1 accent-emerald-600",...o("modulos")}),l.jsx("span",{className:"text-sm text-slate-700",children:M})]},M))}):l.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los mdulos."})}),l.jsx(pp,{title:"Tipo de Alternancia",icon:l.jsx(Yy,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:l.jsx("div",{className:"flex gap-3 flex-wrap",children:Tbe.map(M=>l.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:M,className:"accent-amber-600",...o("tipoAlternancia")}),l.jsx("span",{className:"text-slate-700",children:M})]},M))})}),l.jsx(pp,{title:"Fundamentacin tcnicopedaggica",icon:l.jsx(Kbe,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedaggica, vnculos curriculares y el aporte para los estudiantes."})}),l.jsx(pp,{title:"Plan de actividades",icon:l.jsx(Kv,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"space-y-3",children:[g.fields.map((M,J)=>{const H=f(`actividades.${J}.modulo`)||"",K=_(j,H);return l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(_A,{children:"Fecha"}),l.jsx(Id,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{type:"date",placeholder:"Fecha",...o(`actividades.${J}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(_A,{children:"Tipo"}),l.jsx("input",{placeholder:"Pasanta, visita, taller...",...o(`actividades.${J}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(_A,{children:"Actividad"}),l.jsx("input",{placeholder:"Descripcin breve",...o(`actividades.${J}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(_A,{children:"Lugar"}),l.jsx(tN,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...o(`actividades.${J}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(_A,{children:"Evidencias"}),l.jsx(_ye,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...o(`actividades.${J}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx(_A,{children:"Mdulo"}),l.jsxs("select",{...o(`actividades.${J}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!j||k.length===0,children:[l.jsx("option",{value:"",children:!j&&"Elige especialidad arriba"||k.length===0&&"Selecciona mdulos arriba"||"Selecciona"}),k.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx(_A,{children:"Objetivo de Aprendizaje (OA)"}),l.jsxs("select",{...o(`actividades.${J}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!H||K.length===0,children:[l.jsx("option",{value:"",children:H?K.length===0?"Sin OA definidos para este mdulo":"Selecciona":"Selecciona mdulo primero"}),K.map(V=>l.jsx("option",{value:V,children:V},V))]})]})]}),l.jsx("div",{className:"mt-3 flex justify-end",children:l.jsxs(gp,{title:"Eliminar fila",onClick:()=>g.remove(J),tone:"danger",children:[l.jsx(tl,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},M.id)}),l.jsxs(gp,{title:"Agregar actividad",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[l.jsx(Lu,{className:"w-4 h-4"})," Agregar actividad"]})]})}),l.jsx(pp,{title:"Anlisis Curricular",icon:l.jsx(PT,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Mdulos implicados + OA/AE asociados + distribucin de horas (liceo/otro lugar)."})}),l.jsx("div",{className:"flex items-center justify-end gap-2",children:l.jsxs(gp,{title:"Guardar",type:"submit",tone:"success",disabled:p,children:[p?l.jsx(z0,{className:"w-4 h-4 animate-spin"}):l.jsx(Zo,{className:"w-4 h-4"}),"Guardar"]})})]})]})},hht=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(//g,""),t=t.replace(/\s+(medio|bsico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1"),t=t.replace(/^(\d)(?![])/,"$1"),t=t.replace(/\s+/g,"").toUpperCase(),t},mht=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=e.profile,c=S.useMemo(()=>{const j=Ebe[o]||[];return o!==qt.ESTUDIANTE?j:j.filter(k=>{if(k.name==="Asistencia a Empresa"){const I=hht(e.curso||"");return I.startsWith("3")||I.startsWith("4")}return!0})},[o,e.curso]),[u,d]=S.useState(null),[f,h]=S.useState(!1),[p,g]=S.useState(!1),x=S.useRef([]);S.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[o,c]);const b=S.useCallback(j=>{d(j),window.innerWidth<768&&h(!1)},[]),y=S.useCallback(j=>{const k=c.find(I=>I.name===j);k&&b(k)},[c,b]),w=()=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:l.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:l.jsx(obe,{className:"w-5 h-5"})})}),!p&&l.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestin LIR"})]}),l.jsx("button",{type:"button",onClick:()=>g(j=>!j),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:p?"Expandir":"Colapsar",children:p?l.jsx(vP,{className:"w-5 h-5 text-slate-200"}):l.jsx(Bw,{className:"w-5 h-5 text-slate-200"})})]}),l.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",onKeyDown:j=>{var I,E,N;const k=x.current.findIndex(B=>B===document.activeElement);if(j.key==="ArrowDown"){j.preventDefault();const B=Math.min(k===-1?0:k+1,x.current.length-1);(I=x.current[B])==null||I.focus()}else if(j.key==="ArrowUp"){j.preventDefault();const B=Math.max(k===-1?0:k-1,0);(E=x.current[B])==null||E.focus()}else j.key==="Enter"&&k>=0&&((N=x.current[k])==null||N.click())},children:l.jsx("div",{className:"space-y-1",children:c.map((j,k)=>{const I=(u==null?void 0:u.name)===j.name;return l.jsxs("button",{ref:E=>x.current[k]=E,onClick:()=>b(j),className:`w-full group flex items-center ${p?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                  ${I?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:p?j.name:void 0,children:[l.jsx("span",{className:`shrink-0 ${I?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:j.icon}),!p&&l.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:j.name})]},j.name)})})})]}),_=()=>{if(!u)return l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un mdulo del men para comenzar."})});if(u.name==="Calendario Acadmico")return l.jsx(r8e,{profile:o});if(u.name==="Muro de Anuncios")return l.jsx(o8e,{currentUser:e});if(u.name==="Mensajera Interna")return l.jsx(MYe,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return l.jsx(m8e,{});if(u.name==="Desarrollo Profesional")return l.jsx(Rft,{currentUser:e});if(o===qt.SUBDIRECCION){if(u.name==="Dashboard")return l.jsx(E2e,{currentUser:e});if(u.name==="Administracin")return l.jsx(MWe,{});if(u.name==="Seguimiento Curricular")return l.jsx(kst,{currentUser:e});if(u.name==="Acompaamiento docente")return l.jsx(jYe,{currentUser:e});if(u.name==="Anlisis Taxonmico")return l.jsx(Ost,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx(bq,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return l.jsx(x2e,{currentUser:e});if(u.name==="Crear horarios")return l.jsx(iEe,{});if(u.name==="Seguimiento de acciones pedaggicas")return l.jsx(DRe,{});if(u.name==="Inclusin")return l.jsx(mq,{currentUser:e})}if(o===qt.PROFESORADO){if(u.name==="Planificacin")return l.jsx(qRe,{currentUser:e});if(u.name==="Mis Acompaamientos")return l.jsx(ost,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return l.jsx(Kat,{});if(u.name==="Anlisis Taxonmico")return l.jsx(AnalisisTaxonmico,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx(bq,{});if(u.name==="Inclusin")return l.jsx(mq,{currentUser:e});if(u.name==="Actividades Remotas")return l.jsx(mXe,{});if(u.name==="Evaluacin de Aprendizajes")return l.jsx(pMe,{});if(u.name==="Evaluaciones Formativas")return l.jsx(mYe,{currentUser:e})}if(o===qt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return l.jsx(WWe,{});if(u.name==="Asistencia Dual")return l.jsx(ZXe,{});if(u.name==="Paol")return l.jsx(iJe,{});if(u.name==="Gestin de Empresas")return l.jsx(gft,{});if(u.name==="Alternancia TP")return l.jsx(fht,{})}if(o===qt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return l.jsx(TXe,{currentUser:e});if(u.name==="Evaluacin Formativa")return l.jsx(est,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return l.jsx(sst,{currentUser:e});if(u.name==="Asistencia a Empresa")return l.jsx($Xe,{currentUser:e})}return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),l.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:l.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aqu ir la funcionalidad de ",l.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return l.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[l.jsx(Jwe,{currentUser:e,onLogout:t,onNavigate:y,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(j=>!j),unreadMessagesCount:s,refreshUnreadCount:i}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&l.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),l.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${p?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:l.jsx(w,{})}),l.jsx("main",{className:"flex-1 overflow-y-auto",children:l.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir men",children:l.jsx(awe,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&l.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),l.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),l.jsx("div",{className:"min-h-[60vh]",children:_()})]})})]})]})},pht=({onSelectProfile:e,isAdminView:t=!1})=>l.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),l.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),l.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(gP,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestin Pedaggica LIR"}),l.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:wbe.map(r=>l.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[l.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),l.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),l.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:[" ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),ght=()=>{const[e,t]=S.useState(null),[r,n]=S.useState(null),[a,s]=S.useState(!0),[i,o]=S.useState(null),[c,u]=S.useState(!1),[d,f]=S.useState(null);S.useEffect(()=>{const w=KY(j2,async _=>{if(t(_),_)try{const j=await cee(_.email);j?(n(j),j.profile===qt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await TT())}catch{o("Error al conectar con la base de datos."),await TT()}else n(null),f(null),u(!1),o(null);s(!1)});return()=>w()},[]);const h=async(w,_)=>{if(o(null),!w.trim()||!_.trim()){o("Por favor ingrese email y contrasea");return}try{await abe(w.trim(),_)}catch(j){switch(j.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales invlidas. Verifique su email y contrasea.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente ms tarde.");break;case"auth/network-request-failed":o("Error de conexin. Verifique su internet.");break;default:o("Ocurri un error al intentar iniciar sesin.")}}},p=async w=>{try{await sbe(w)}catch(_){console.error("Error al enviar email de recuperacin:",_)}},g=w=>{f(w),u(!1)},x=()=>{u(!0),f(null)},b=async()=>{try{await TT()}catch(w){console.error("Error al cerrar sesin:",w)}};if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(gP,{})}),l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicacin..."})]})});if(!e||!r)return l.jsx(Fbe,{onLoginAttempt:h,onForgotPasswordRequest:p,error:i});if(c&&r.profile===qt.SUBDIRECCION)return l.jsx(pht,{onSelectProfile:g,isAdminView:!0});const y=d||r.profile;return l.jsx(mht,{currentUser:{...r,profile:y},onLogout:b,onChangeProfile:r.profile===qt.SUBDIRECCION?x:void 0,canChangeProfile:r.profile===qt.SUBDIRECCION})},mAe=document.getElementById("root");if(!mAe)throw new Error("Could not find root element to mount to");const xht=Ife.createRoot(mAe);xht.render(l.jsx(nt.StrictMode,{children:l.jsx(ght,{})}));export{ma as _,bht as c,Cl as g};
