var qAe=Object.defineProperty;var WAe=(e,t,r)=>t in e?qAe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var XB=(e,t,r)=>WAe(e,typeof t!="symbol"?t+"":t,r);function XAe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const s=Object.getOwnPropertyDescriptor(n,a);s&&Object.defineProperty(e,a,s.get?s:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}})();var rft=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function YAe(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var YB={exports:{}},Tb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s7;function JAe(){if(s7)return Tb;s7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,a,s){var i=null;if(s!==void 0&&(i=""+s),a.key!==void 0&&(i=""+a.key),"key"in a){s={};for(var o in a)o!=="key"&&(s[o]=a[o])}else s=a;return a=s.ref,{$$typeof:e,type:n,key:i,ref:a!==void 0?a:null,props:s}}return Tb.Fragment=t,Tb.jsx=r,Tb.jsxs=r,Tb}var i7;function ZAe(){return i7||(i7=1,YB.exports=JAe()),YB.exports}var l=ZAe(),JB={exports:{}},cn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o7;function efe(){if(o7)return cn;o7=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;function h(G){return G===null||typeof G!="object"?null:(G=f&&G[f]||G["@@iterator"],typeof G=="function"?G:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function b(G,re,R){this.props=G,this.context=re,this.refs=v,this.updater=R||p}b.prototype.isReactComponent={},b.prototype.setState=function(G,re){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,re,"setState")},b.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function y(){}y.prototype=b.prototype;function C(G,re,R){this.props=G,this.context=re,this.refs=v,this.updater=R||p}var N=C.prototype=new y;N.constructor=C,g(N,b.prototype),N.isPureReactComponent=!0;var T=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function w(G,re,R,q,J,te){return R=te.ref,{$$typeof:e,type:G,key:re,ref:R!==void 0?R:null,props:te}}function _(G,re){return w(G.type,re,void 0,void 0,void 0,G.props)}function F(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function M(G){var re={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(R){return re[R]})}var D=/\/+/g;function I(G,re){return typeof G=="object"&&G!==null&&G.key!=null?M(""+G.key):re.toString(36)}function U(){}function P(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(U,U):(G.status="pending",G.then(function(re){G.status==="pending"&&(G.status="fulfilled",G.value=re)},function(re){G.status==="pending"&&(G.status="rejected",G.reason=re)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function X(G,re,R,q,J){var te=typeof G;(te==="undefined"||te==="boolean")&&(G=null);var ie=!1;if(G===null)ie=!0;else switch(te){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(G.$$typeof){case e:case t:ie=!0;break;case d:return ie=G._init,X(ie(G._payload),re,R,q,J)}}if(ie)return J=J(G),ie=q===""?"."+I(G,0):q,T(J)?(R="",ie!=null&&(R=ie.replace(D,"$&/")+"/"),X(J,re,R,"",function(ce){return ce})):J!=null&&(F(J)&&(J=_(J,R+(J.key==null||G&&G.key===J.key?"":(""+J.key).replace(D,"$&/")+"/")+ie)),re.push(J)),1;ie=0;var Ae=q===""?".":q+":";if(T(G))for(var oe=0;oe<G.length;oe++)q=G[oe],te=Ae+I(q,oe),ie+=X(q,re,R,te,J);else if(oe=h(G),typeof oe=="function")for(G=oe.call(G),oe=0;!(q=G.next()).done;)q=q.value,te=Ae+I(q,oe++),ie+=X(q,re,R,te,J);else if(te==="object"){if(typeof G.then=="function")return X(P(G),re,R,q,J);throw re=String(G),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ie}function H(G,re,R){if(G==null)return G;var q=[],J=0;return X(G,q,"","",function(te){return re.call(R,te,J++)}),q}function Y(G){if(G._status===-1){var re=G._result;re=re(),re.then(function(R){(G._status===0||G._status===-1)&&(G._status=1,G._result=R)},function(R){(G._status===0||G._status===-1)&&(G._status=2,G._result=R)}),G._status===-1&&(G._status=0,G._result=re)}if(G._status===1)return G._result.default;throw G._result}var V=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)};function z(){}return cn.Children={map:H,forEach:function(G,re,R){H(G,function(){re.apply(this,arguments)},R)},count:function(G){var re=0;return H(G,function(){re++}),re},toArray:function(G){return H(G,function(re){return re})||[]},only:function(G){if(!F(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},cn.Component=b,cn.Fragment=r,cn.Profiler=a,cn.PureComponent=C,cn.StrictMode=n,cn.Suspense=c,cn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,cn.__COMPILER_RUNTIME={__proto__:null,c:function(G){return S.H.useMemoCache(G)}},cn.cache=function(G){return function(){return G.apply(null,arguments)}},cn.cloneElement=function(G,re,R){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var q=g({},G.props),J=G.key,te=void 0;if(re!=null)for(ie in re.ref!==void 0&&(te=void 0),re.key!==void 0&&(J=""+re.key),re)!B.call(re,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&re.ref===void 0||(q[ie]=re[ie]);var ie=arguments.length-2;if(ie===1)q.children=R;else if(1<ie){for(var Ae=Array(ie),oe=0;oe<ie;oe++)Ae[oe]=arguments[oe+2];q.children=Ae}return w(G.type,J,void 0,void 0,te,q)},cn.createContext=function(G){return G={$$typeof:i,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:s,_context:G},G},cn.createElement=function(G,re,R){var q,J={},te=null;if(re!=null)for(q in re.key!==void 0&&(te=""+re.key),re)B.call(re,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(J[q]=re[q]);var ie=arguments.length-2;if(ie===1)J.children=R;else if(1<ie){for(var Ae=Array(ie),oe=0;oe<ie;oe++)Ae[oe]=arguments[oe+2];J.children=Ae}if(G&&G.defaultProps)for(q in ie=G.defaultProps,ie)J[q]===void 0&&(J[q]=ie[q]);return w(G,te,void 0,void 0,null,J)},cn.createRef=function(){return{current:null}},cn.forwardRef=function(G){return{$$typeof:o,render:G}},cn.isValidElement=F,cn.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:Y}},cn.memo=function(G,re){return{$$typeof:u,type:G,compare:re===void 0?null:re}},cn.startTransition=function(G){var re=S.T,R={};S.T=R;try{var q=G(),J=S.S;J!==null&&J(R,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(z,V)}catch(te){V(te)}finally{S.T=re}},cn.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},cn.use=function(G){return S.H.use(G)},cn.useActionState=function(G,re,R){return S.H.useActionState(G,re,R)},cn.useCallback=function(G,re){return S.H.useCallback(G,re)},cn.useContext=function(G){return S.H.useContext(G)},cn.useDebugValue=function(){},cn.useDeferredValue=function(G,re){return S.H.useDeferredValue(G,re)},cn.useEffect=function(G,re,R){var q=S.H;if(typeof R=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return q.useEffect(G,re)},cn.useId=function(){return S.H.useId()},cn.useImperativeHandle=function(G,re,R){return S.H.useImperativeHandle(G,re,R)},cn.useInsertionEffect=function(G,re){return S.H.useInsertionEffect(G,re)},cn.useLayoutEffect=function(G,re){return S.H.useLayoutEffect(G,re)},cn.useMemo=function(G,re){return S.H.useMemo(G,re)},cn.useOptimistic=function(G,re){return S.H.useOptimistic(G,re)},cn.useReducer=function(G,re,R){return S.H.useReducer(G,re,R)},cn.useRef=function(G){return S.H.useRef(G)},cn.useState=function(G){return S.H.useState(G)},cn.useSyncExternalStore=function(G,re,R){return S.H.useSyncExternalStore(G,re,R)},cn.useTransition=function(){return S.H.useTransition()},cn.version="19.1.1",cn}var l7;function d1(){return l7||(l7=1,JB.exports=efe()),JB.exports}var k=d1();const lt=wl(k),tfe=XAe({__proto__:null,default:lt},[k]);var ZB={exports:{}},jb={},eT={exports:{}},tT={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c7;function rfe(){return c7||(c7=1,function(e){function t(H,Y){var V=H.length;H.push(Y);e:for(;0<V;){var z=V-1>>>1,G=H[z];if(0<a(G,Y))H[z]=Y,H[V]=G,V=z;else break e}}function r(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var Y=H[0],V=H.pop();if(V!==Y){H[0]=V;e:for(var z=0,G=H.length,re=G>>>1;z<re;){var R=2*(z+1)-1,q=H[R],J=R+1,te=H[J];if(0>a(q,V))J<G&&0>a(te,q)?(H[z]=te,H[J]=V,z=J):(H[z]=q,H[R]=V,z=R);else if(J<G&&0>a(te,V))H[z]=te,H[J]=V,z=J;else break e}}return Y}function a(H,Y){var V=H.sortIndex-Y.sortIndex;return V!==0?V:H.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,v=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function T(H){for(var Y=r(u);Y!==null;){if(Y.callback===null)n(u);else if(Y.startTime<=H)n(u),Y.sortIndex=Y.expirationTime,t(c,Y);else break;Y=r(u)}}function S(H){if(v=!1,T(H),!g)if(r(c)!==null)g=!0,B||(B=!0,I());else{var Y=r(u);Y!==null&&X(S,Y.startTime-H)}}var B=!1,w=-1,_=5,F=-1;function M(){return b?!0:!(e.unstable_now()-F<_)}function D(){if(b=!1,B){var H=e.unstable_now();F=H;var Y=!0;try{e:{g=!1,v&&(v=!1,C(w),w=-1),p=!0;var V=h;try{t:{for(T(H),f=r(c);f!==null&&!(f.expirationTime>H&&M());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var G=z(f.expirationTime<=H);if(H=e.unstable_now(),typeof G=="function"){f.callback=G,T(H),Y=!0;break t}f===r(c)&&n(c),T(H)}else n(c);f=r(c)}if(f!==null)Y=!0;else{var re=r(u);re!==null&&X(S,re.startTime-H),Y=!1}}break e}finally{f=null,h=V,p=!1}Y=void 0}}finally{Y?I():B=!1}}}var I;if(typeof N=="function")I=function(){N(D)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,P=U.port2;U.port1.onmessage=D,I=function(){P.postMessage(null)}}else I=function(){y(D,0)};function X(H,Y){w=y(function(){H(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(H){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var V=h;h=Y;try{return H()}finally{h=V}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(H,Y){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var V=h;h=H;try{return Y()}finally{h=V}},e.unstable_scheduleCallback=function(H,Y,V){var z=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?z+V:z):V=z,H){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=V+G,H={id:d++,callback:Y,priorityLevel:H,startTime:V,expirationTime:G,sortIndex:-1},V>z?(H.sortIndex=V,t(u,H),r(c)===null&&H===r(u)&&(v?(C(w),w=-1):v=!0,X(S,V-z))):(H.sortIndex=G,t(c,H),g||p||(g=!0,B||(B=!0,I()))),H},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(H){var Y=h;return function(){var V=h;h=Y;try{return H.apply(this,arguments)}finally{h=V}}}}(tT)),tT}var u7;function nfe(){return u7||(u7=1,eT.exports=rfe()),eT.exports}var rT={exports:{}},jo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d7;function afe(){if(d7)return jo;d7=1;var e=d1();function t(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");function s(c,u,d){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:f==null?null:""+f,children:c,containerInfo:u,implementation:d}}var i=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return jo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,jo.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return s(c,u,null,d)},jo.flushSync=function(c){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,c)return c()}finally{i.T=u,n.p=d,n.d.f()}},jo.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(c,u))},jo.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},jo.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin),h=typeof u.integrity=="string"?u.integrity:void 0,p=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:p}):d==="script"&&n.d.X(c,{crossOrigin:f,integrity:h,fetchPriority:p,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},jo.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(c)},jo.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,f=o(d,u.crossOrigin);n.d.L(c,d,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},jo.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(c)},jo.requestFormReset=function(c){n.d.r(c)},jo.unstable_batchedUpdates=function(c,u){return c(u)},jo.useFormState=function(c,u,d){return i.H.useFormState(c,u,d)},jo.useFormStatus=function(){return i.H.useHostTransitionStatus()},jo.version="19.1.1",jo}var A7;function $X(){if(A7)return rT.exports;A7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),rT.exports=afe(),rT.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f7;function sfe(){if(f7)return jb;f7=1;var e=nfe(),t=d1(),r=$X();function n(A){var m="https://react.dev/errors/"+A;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)m+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+A+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function s(A){var m=A,x=A;if(A.alternate)for(;m.return;)m=m.return;else{A=m;do m=A,(m.flags&4098)!==0&&(x=m.return),A=m.return;while(A)}return m.tag===3?x:null}function i(A){if(A.tag===13){var m=A.memoizedState;if(m===null&&(A=A.alternate,A!==null&&(m=A.memoizedState)),m!==null)return m.dehydrated}return null}function o(A){if(s(A)!==A)throw Error(n(188))}function c(A){var m=A.alternate;if(!m){if(m=s(A),m===null)throw Error(n(188));return m!==A?null:A}for(var x=A,E=m;;){var L=x.return;if(L===null)break;var K=L.alternate;if(K===null){if(E=L.return,E!==null){x=E;continue}break}if(L.child===K.child){for(K=L.child;K;){if(K===x)return o(L),A;if(K===E)return o(L),m;K=K.sibling}throw Error(n(188))}if(x.return!==E.return)x=L,E=K;else{for(var le=!1,be=L.child;be;){if(be===x){le=!0,x=L,E=K;break}if(be===E){le=!0,E=L,x=K;break}be=be.sibling}if(!le){for(be=K.child;be;){if(be===x){le=!0,x=K,E=L;break}if(be===E){le=!0,E=K,x=L;break}be=be.sibling}if(!le)throw Error(n(189))}}if(x.alternate!==E)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?A:m}function u(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A;for(A=A.child;A!==null;){if(m=u(A),m!==null)return m;A=A.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),N=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function I(A){return A===null||typeof A!="object"?null:(A=D&&A[D]||A["@@iterator"],typeof A=="function"?A:null)}var U=Symbol.for("react.client.reference");function P(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===U?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case g:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case B:return"SuspenseList";case F:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case p:return"Portal";case N:return(A.displayName||"Context")+".Provider";case C:return(A._context.displayName||"Context")+".Consumer";case T:var m=A.render;return A=A.displayName,A||(A=m.displayName||m.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case w:return m=A.displayName||null,m!==null?m:P(A.type)||"Memo";case _:m=A._payload,A=A._init;try{return P(A(m))}catch{}}return null}var X=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},z=[],G=-1;function re(A){return{current:A}}function R(A){0>G||(A.current=z[G],z[G]=null,G--)}function q(A,m){G++,z[G]=A.current,A.current=m}var J=re(null),te=re(null),ie=re(null),Ae=re(null);function oe(A,m){switch(q(ie,m),q(te,A),q(J,null),m.nodeType){case 9:case 11:A=(A=m.documentElement)&&(A=A.namespaceURI)?FU(A):0;break;default:if(A=m.tagName,m=m.namespaceURI)m=FU(m),A=OU(m,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}R(J),q(J,A)}function ce(){R(J),R(te),R(ie)}function pe(A){A.memoizedState!==null&&q(Ae,A);var m=J.current,x=OU(m,A.type);m!==x&&(q(te,A),q(J,x))}function Ie(A){te.current===A&&(R(J),R(te)),Ae.current===A&&(R(Ae),_b._currentValue=V)}var ne=Object.prototype.hasOwnProperty,Se=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,_e=e.unstable_shouldYield,he=e.unstable_requestPaint,je=e.unstable_now,He=e.unstable_getCurrentPriorityLevel,Xe=e.unstable_ImmediatePriority,ye=e.unstable_UserBlockingPriority,Oe=e.unstable_NormalPriority,Re=e.unstable_LowPriority,qe=e.unstable_IdlePriority,Ze=e.log,ot=e.unstable_setDisableYieldValue,mt=null,Tt=null;function Mt(A){if(typeof Ze=="function"&&ot(A),Tt&&typeof Tt.setStrictMode=="function")try{Tt.setStrictMode(mt,A)}catch{}}var Dt=Math.clz32?Math.clz32:kr,Qt=Math.log,yt=Math.LN2;function kr(A){return A>>>=0,A===0?32:31-(Qt(A)/yt|0)|0}var rr=256,an=4194304;function _r(A){var m=A&42;if(m!==0)return m;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function zr(A,m,x){var E=A.pendingLanes;if(E===0)return 0;var L=0,K=A.suspendedLanes,le=A.pingedLanes;A=A.warmLanes;var be=E&134217727;return be!==0?(E=be&~K,E!==0?L=_r(E):(le&=be,le!==0?L=_r(le):x||(x=be&~A,x!==0&&(L=_r(x))))):(be=E&~K,be!==0?L=_r(be):le!==0?L=_r(le):x||(x=E&~A,x!==0&&(L=_r(x)))),L===0?0:m!==0&&m!==L&&(m&K)===0&&(K=L&-L,x=m&-m,K>=x||K===32&&(x&4194048)!==0)?m:L}function Fn(A,m){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&m)===0}function Fr(A,m){switch(A){case 1:case 2:case 4:case 8:case 64:return m+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var A=rr;return rr<<=1,(rr&4194048)===0&&(rr=256),A}function pt(){var A=an;return an<<=1,(an&62914560)===0&&(an=4194304),A}function Je(A){for(var m=[],x=0;31>x;x++)m.push(A);return m}function gt(A,m){A.pendingLanes|=m,m!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function dt(A,m,x,E,L,K){var le=A.pendingLanes;A.pendingLanes=x,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=x,A.entangledLanes&=x,A.errorRecoveryDisabledLanes&=x,A.shellSuspendCounter=0;var be=A.entanglements,Pe=A.expirationTimes,it=A.hiddenUpdates;for(x=le&~x;0<x;){var _t=31-Dt(x),Ft=1<<_t;be[_t]=0,Pe[_t]=-1;var At=it[_t];if(At!==null)for(it[_t]=null,_t=0;_t<At.length;_t++){var ft=At[_t];ft!==null&&(ft.lane&=-536870913)}x&=~Ft}E!==0&&Pt(A,E,0),K!==0&&L===0&&A.tag!==0&&(A.suspendedLanes|=K&~(le&~m))}function Pt(A,m,x){A.pendingLanes|=m,A.suspendedLanes&=~m;var E=31-Dt(m);A.entangledLanes|=m,A.entanglements[E]=A.entanglements[E]|1073741824|x&4194090}function zt(A,m){var x=A.entangledLanes|=m;for(A=A.entanglements;x;){var E=31-Dt(x),L=1<<E;L&m|A[E]&m&&(A[E]|=m),x&=~L}}function Lr(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Xr(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function xn(){var A=Y.p;return A!==0?A:(A=window.event,A===void 0?32:ZU(A.type))}function bn(A,m){var x=Y.p;try{return Y.p=A,m()}finally{Y.p=x}}var $t=Math.random().toString(36).slice(2),rn="__reactFiber$"+$t,en="__reactProps$"+$t,dr="__reactContainer$"+$t,Yr="__reactEvents$"+$t,ra="__reactListeners$"+$t,fe="__reactHandles$"+$t,Be="__reactResources$"+$t,Ee="__reactMarker$"+$t;function Ce(A){delete A[rn],delete A[en],delete A[Yr],delete A[ra],delete A[fe]}function Ne(A){var m=A[rn];if(m)return m;for(var x=A.parentNode;x;){if(m=x[dr]||x[rn]){if(x=m.alternate,m.child!==null||x!==null&&x.child!==null)for(A=LU(A);A!==null;){if(x=A[rn])return x;A=LU(A)}return m}A=x,x=A.parentNode}return null}function Te(A){if(A=A[rn]||A[dr]){var m=A.tag;if(m===5||m===6||m===13||m===26||m===27||m===3)return A}return null}function Ye(A){var m=A.tag;if(m===5||m===26||m===27||m===6)return A.stateNode;throw Error(n(33))}function ut(A){var m=A[Be];return m||(m=A[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),m}function $e(A){A[Ee]=!0}var tt=new Set,at={};function jt(A,m){Vt(A,m),Vt(A+"Capture",m)}function Vt(A,m){for(at[A]=m,A=0;A<m.length;A++)tt.add(m[A])}var Jt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ht={},Gt={};function Sr(A){return ne.call(Gt,A)?!0:ne.call(Ht,A)?!1:Jt.test(A)?Gt[A]=!0:(Ht[A]=!0,!1)}function sn(A,m,x){if(Sr(m))if(x===null)A.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":A.removeAttribute(m);return;case"boolean":var E=m.toLowerCase().slice(0,5);if(E!=="data-"&&E!=="aria-"){A.removeAttribute(m);return}}A.setAttribute(m,""+x)}}function on(A,m,x){if(x===null)A.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(m);return}A.setAttribute(m,""+x)}}function An(A,m,x,E){if(E===null)A.removeAttribute(x);else{switch(typeof E){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(x);return}A.setAttributeNS(m,x,""+E)}}var ms,bo;function ps(A){if(ms===void 0)try{throw Error()}catch(x){var m=x.stack.trim().match(/\n( *(at )?)/);ms=m&&m[1]||"",bo=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ms+A+bo}var Zs=!1;function Fs(A,m){if(!A||Zs)return"";Zs=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var E={DetermineComponentFrameRoot:function(){try{if(m){var Ft=function(){throw Error()};if(Object.defineProperty(Ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ft,[])}catch(ft){var At=ft}Reflect.construct(A,[],Ft)}else{try{Ft.call()}catch(ft){At=ft}A.call(Ft.prototype)}}else{try{throw Error()}catch(ft){At=ft}(Ft=A())&&typeof Ft.catch=="function"&&Ft.catch(function(){})}}catch(ft){if(ft&&At&&typeof ft.stack=="string")return[ft.stack,At.stack]}return[null,null]}};E.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var L=Object.getOwnPropertyDescriptor(E.DetermineComponentFrameRoot,"name");L&&L.configurable&&Object.defineProperty(E.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var K=E.DetermineComponentFrameRoot(),le=K[0],be=K[1];if(le&&be){var Pe=le.split(`
`),it=be.split(`
`);for(L=E=0;E<Pe.length&&!Pe[E].includes("DetermineComponentFrameRoot");)E++;for(;L<it.length&&!it[L].includes("DetermineComponentFrameRoot");)L++;if(E===Pe.length||L===it.length)for(E=Pe.length-1,L=it.length-1;1<=E&&0<=L&&Pe[E]!==it[L];)L--;for(;1<=E&&0<=L;E--,L--)if(Pe[E]!==it[L]){if(E!==1||L!==1)do if(E--,L--,0>L||Pe[E]!==it[L]){var _t=`
`+Pe[E].replace(" at new "," at ");return A.displayName&&_t.includes("<anonymous>")&&(_t=_t.replace("<anonymous>",A.displayName)),_t}while(1<=E&&0<=L);break}}}finally{Zs=!1,Error.prepareStackTrace=x}return(x=A?A.displayName||A.name:"")?ps(x):""}function gi(A){switch(A.tag){case 26:case 27:case 5:return ps(A.type);case 16:return ps("Lazy");case 13:return ps("Suspense");case 19:return ps("SuspenseList");case 0:case 15:return Fs(A.type,!1);case 11:return Fs(A.type.render,!1);case 1:return Fs(A.type,!0);case 31:return ps("Activity");default:return""}}function xa(A){try{var m="";do m+=gi(A),A=A.return;while(A);return m}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function ei(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function zd(A){var m=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(m==="checkbox"||m==="radio")}function Rh(A){var m=zd(A)?"checked":"value",x=Object.getOwnPropertyDescriptor(A.constructor.prototype,m),E=""+A[m];if(!A.hasOwnProperty(m)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var L=x.get,K=x.set;return Object.defineProperty(A,m,{configurable:!0,get:function(){return L.call(this)},set:function(le){E=""+le,K.call(this,le)}}),Object.defineProperty(A,m,{enumerable:x.enumerable}),{getValue:function(){return E},setValue:function(le){E=""+le},stopTracking:function(){A._valueTracker=null,delete A[m]}}}}function Vc(A){A._valueTracker||(A._valueTracker=Rh(A))}function sf(A){if(!A)return!1;var m=A._valueTracker;if(!m)return!0;var x=m.getValue(),E="";return A&&(E=zd(A)?A.checked?"true":"false":A.value),A=E,A!==x?(m.setValue(A),!0):!1}function vi(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var $d=/[\n"\\]/g;function On(A){return A.replace($d,function(m){return"\\"+m.charCodeAt(0).toString(16)+" "})}function xi(A,m,x,E,L,K,le,be){A.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?A.type=le:A.removeAttribute("type"),m!=null?le==="number"?(m===0&&A.value===""||A.value!=m)&&(A.value=""+ei(m)):A.value!==""+ei(m)&&(A.value=""+ei(m)):le!=="submit"&&le!=="reset"||A.removeAttribute("value"),m!=null?$c(A,le,ei(m)):x!=null?$c(A,le,ei(x)):E!=null&&A.removeAttribute("value"),L==null&&K!=null&&(A.defaultChecked=!!K),L!=null&&(A.checked=L&&typeof L!="function"&&typeof L!="symbol"),be!=null&&typeof be!="function"&&typeof be!="symbol"&&typeof be!="boolean"?A.name=""+ei(be):A.removeAttribute("name")}function zc(A,m,x,E,L,K,le,be){if(K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(A.type=K),m!=null||x!=null){if(!(K!=="submit"&&K!=="reset"||m!=null))return;x=x!=null?""+ei(x):"",m=m!=null?""+ei(m):x,be||m===A.value||(A.value=m),A.defaultValue=m}E=E??L,E=typeof E!="function"&&typeof E!="symbol"&&!!E,A.checked=be?A.checked:!!E,A.defaultChecked=!!E,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(A.name=le)}function $c(A,m,x){m==="number"&&vi(A.ownerDocument)===A||A.defaultValue===""+x||(A.defaultValue=""+x)}function Cl(A,m,x,E){if(A=A.options,m){m={};for(var L=0;L<x.length;L++)m["$"+x[L]]=!0;for(x=0;x<A.length;x++)L=m.hasOwnProperty("$"+A[x].value),A[x].selected!==L&&(A[x].selected=L),L&&E&&(A[x].defaultSelected=!0)}else{for(x=""+ei(x),m=null,L=0;L<A.length;L++){if(A[L].value===x){A[L].selected=!0,E&&(A[L].defaultSelected=!0);return}m!==null||A[L].disabled||(m=A[L])}m!==null&&(m.selected=!0)}}function zn(A,m,x){if(m!=null&&(m=""+ei(m),m!==A.value&&(A.value=m),x==null)){A.defaultValue!==m&&(A.defaultValue=m);return}A.defaultValue=x!=null?""+ei(x):""}function Gc(A,m,x,E){if(m==null){if(E!=null){if(x!=null)throw Error(n(92));if(X(E)){if(1<E.length)throw Error(n(93));E=E[0]}x=E}x==null&&(x=""),m=x}x=ei(m),A.defaultValue=x,E=A.textContent,E===x&&E!==""&&E!==null&&(A.value=E)}function yo(A,m){if(m){var x=A.firstChild;if(x&&x===A.lastChild&&x.nodeType===3){x.nodeValue=m;return}}A.textContent=m}var nc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lh(A,m,x){var E=m.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?E?A.setProperty(m,""):m==="float"?A.cssFloat="":A[m]="":E?A.setProperty(m,x):typeof x!="number"||x===0||nc.has(m)?m==="float"?A.cssFloat=x:A[m]=(""+x).trim():A[m]=x+"px"}function of(A,m,x){if(m!=null&&typeof m!="object")throw Error(n(62));if(A=A.style,x!=null){for(var E in x)!x.hasOwnProperty(E)||m!=null&&m.hasOwnProperty(E)||(E.indexOf("--")===0?A.setProperty(E,""):E==="float"?A.cssFloat="":A[E]="");for(var L in m)E=m[L],m.hasOwnProperty(L)&&x[L]!==E&&Lh(A,L,E)}else for(var K in m)m.hasOwnProperty(K)&&Lh(A,K,m[K])}function lf(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ac=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Gd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sc(A){return Gd.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var _l=null;function ua(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var ic=null,Sl=null;function Tr(A){var m=Te(A);if(m&&(A=m.stateNode)){var x=A[en]||null;e:switch(A=m.stateNode,m.type){case"input":if(xi(A,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),m=x.name,x.type==="radio"&&m!=null){for(x=A;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+On(""+m)+'"][type="radio"]'),m=0;m<x.length;m++){var E=x[m];if(E!==A&&E.form===A.form){var L=E[en]||null;if(!L)throw Error(n(90));xi(E,L.value,L.defaultValue,L.defaultValue,L.checked,L.defaultChecked,L.type,L.name)}}for(m=0;m<x.length;m++)E=x[m],E.form===A.form&&sf(E)}break e;case"textarea":zn(A,x.value,x.defaultValue);break e;case"select":m=x.value,m!=null&&Cl(A,!!x.multiple,m,!1)}}}var Nl=!1;function Mh(A,m,x){if(Nl)return A(m,x);Nl=!0;try{var E=A(m);return E}finally{if(Nl=!1,(ic!==null||Sl!==null)&&(TE(),ic&&(m=ic,A=Sl,Sl=ic=null,Tr(m),A)))for(m=0;m<A.length;m++)Tr(A[m])}}function Ii(A,m){var x=A.stateNode;if(x===null)return null;var E=x[en]||null;if(E===null)return null;x=E[m];e:switch(m){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(E=!E.disabled)||(A=A.type,E=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!E;break e;default:A=!1}if(A)return null;if(x&&typeof x!="function")throw Error(n(231,m,typeof x));return x}var wo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ro=!1;if(wo)try{var kl={};Object.defineProperty(kl,"passive",{get:function(){ro=!0}}),window.addEventListener("test",kl,kl),window.removeEventListener("test",kl,kl)}catch{ro=!1}var Eo=null,Kc=null,oc=null;function cf(){if(oc)return oc;var A,m=Kc,x=m.length,E,L="value"in Eo?Eo.value:Eo.textContent,K=L.length;for(A=0;A<x&&m[A]===L[A];A++);var le=x-A;for(E=1;E<=le&&m[x-E]===L[K-E];E++);return oc=L.slice(A,1<E?1-E:void 0)}function Co(A){var m=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&m===13&&(A=13)):A=m,A===10&&(A=13),32<=A||A===13?A:0}function Fi(){return!0}function Bl(){return!1}function gs(A){function m(x,E,L,K,le){this._reactName=x,this._targetInst=L,this.type=E,this.nativeEvent=K,this.target=le,this.currentTarget=null;for(var be in A)A.hasOwnProperty(be)&&(x=A[be],this[be]=x?x(K):K[be]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?Fi:Bl,this.isPropagationStopped=Bl,this}return d(m.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Fi)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Fi)},persist:function(){},isPersistent:Fi}),m}var yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qc=gs(yn),Tl=d({},yn,{view:0,detail:0}),uf=gs(Tl),Hu,Vu,sl,Oi=d({},Tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jc,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==sl&&(sl&&A.type==="mousemove"?(Hu=A.screenX-sl.screenX,Vu=A.screenY-sl.screenY):Vu=Hu=0,sl=A),Hu)},movementY:function(A){return"movementY"in A?A.movementY:Vu}}),vs=gs(Oi),Uh=d({},Oi,{dataTransfer:0}),Wc=gs(Uh),bi=d({},Tl,{relatedTarget:0}),Xc=gs(bi),lc=d({},yn,{animationName:0,elapsedTime:0,pseudoElement:0}),Kd=gs(lc),zu=d({},yn,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),qd=gs(zu),df=d({},yn,{data:0}),$u=gs(df),Yc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ku(A){var m=this.nativeEvent;return m.getModifierState?m.getModifierState(A):(A=Wd[A])?!!m[A]:!1}function Jc(){return Ku}var Qh=d({},Tl,{key:function(A){if(A.key){var m=Yc[A.key]||A.key;if(m!=="Unidentified")return m}return A.type==="keypress"?(A=Co(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?Gu[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jc,charCode:function(A){return A.type==="keypress"?Co(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?Co(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),cc=gs(Qh),Zc=d({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qu=gs(Zc),Di=d({},Tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jc}),Xd=gs(Di),W=d({},yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),de=gs(W),Fe=d({},Oi,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=gs(Fe),Ge=d({},yn,{newState:0,oldState:0}),xt=gs(Ge),Lt=[9,13,27,32],Zt=wo&&"CompositionEvent"in window,O=null;wo&&"documentMode"in document&&(O=document.documentMode);var ee=wo&&"TextEvent"in window&&!O,se=wo&&(!Zt||O&&8<O&&11>=O),xe=" ",ze=!1;function st(A,m){switch(A){case"keyup":return Lt.indexOf(m.keyCode)!==-1;case"keydown":return m.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var jr=!1;function wn(A,m){switch(A){case"compositionend":return Ut(m);case"keypress":return m.which!==32?null:(ze=!0,xe);case"textInput":return A=m.data,A===xe&&ze?null:A;default:return null}}function Kr(A,m){if(jr)return A==="compositionend"||!Zt&&st(A,m)?(A=cf(),oc=Kc=Eo=null,jr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(m.ctrlKey||m.altKey||m.metaKey)||m.ctrlKey&&m.altKey){if(m.char&&1<m.char.length)return m.char;if(m.which)return String.fromCharCode(m.which)}return null;case"compositionend":return se&&m.locale!=="ko"?null:m.data;default:return null}}var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function na(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m==="input"?!!$n[A.type]:m==="textarea"}function jl(A,m,x,E){ic?Sl?Sl.push(E):Sl=[E]:ic=E,m=PE(m,"onChange"),0<m.length&&(x=new qc("onChange","change",null,x,E),A.push({event:x,listeners:m}))}var rs=null,_o=null;function eu(A){kU(A,0)}function Yd(A){var m=Ye(A);if(sf(m))return A}function Hh(A,m){if(A==="change")return m}var Af=!1;if(wo){var Os;if(wo){var Jd="oninput"in document;if(!Jd){var ff=document.createElement("div");ff.setAttribute("oninput","return;"),Jd=typeof ff.oninput=="function"}Os=Jd}else Os=!1;Af=Os&&(!document.documentMode||9<document.documentMode)}function hf(){rs&&(rs.detachEvent("onpropertychange",Vh),_o=rs=null)}function Vh(A){if(A.propertyName==="value"&&Yd(_o)){var m=[];jl(m,_o,A,ua(A)),Mh(eu,m)}}function So(A,m,x){A==="focusin"?(hf(),rs=m,_o=x,rs.attachEvent("onpropertychange",Vh)):A==="focusout"&&hf()}function G1(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Yd(_o)}function Mm(A,m){if(A==="click")return Yd(m)}function jg(A,m){if(A==="input"||A==="change")return Yd(m)}function Il(A,m){return A===m&&(A!==0||1/A===1/m)||A!==A&&m!==m}var ti=typeof Object.is=="function"?Object.is:Il;function Zd(A,m){if(ti(A,m))return!0;if(typeof A!="object"||A===null||typeof m!="object"||m===null)return!1;var x=Object.keys(A),E=Object.keys(m);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var L=x[E];if(!ne.call(m,L)||!ti(A[L],m[L]))return!1}return!0}function Um(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function Wu(A,m){var x=Um(A);A=0;for(var E;x;){if(x.nodeType===3){if(E=A+x.textContent.length,A<=m&&E>=m)return{node:x,offset:m-A};A=E}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Um(x)}}function eA(A,m){return A&&m?A===m?!0:A&&A.nodeType===3?!1:m&&m.nodeType===3?eA(A,m.parentNode):"contains"in A?A.contains(m):A.compareDocumentPosition?!!(A.compareDocumentPosition(m)&16):!1:!1}function no(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var m=vi(A.document);m instanceof A.HTMLIFrameElement;){try{var x=typeof m.contentWindow.location.href=="string"}catch{x=!1}if(x)A=m.contentWindow;else break;m=vi(A.document)}return m}function yi(A){var m=A&&A.nodeName&&A.nodeName.toLowerCase();return m&&(m==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||m==="textarea"||A.contentEditable==="true")}var tA=wo&&"documentMode"in document&&11>=document.documentMode,No=null,uc=null,tu=null,dc=!1;function Ga(A,m,x){var E=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;dc||No==null||No!==vi(E)||(E=No,"selectionStart"in E&&yi(E)?E={start:E.selectionStart,end:E.selectionEnd}:(E=(E.ownerDocument&&E.ownerDocument.defaultView||window).getSelection(),E={anchorNode:E.anchorNode,anchorOffset:E.anchorOffset,focusNode:E.focusNode,focusOffset:E.focusOffset}),tu&&Zd(tu,E)||(tu=E,E=PE(uc,"onSelect"),0<E.length&&(m=new qc("onSelect","select",null,m,x),A.push({event:m,listeners:E}),m.target=No)))}function Ac(A,m){var x={};return x[A.toLowerCase()]=m.toLowerCase(),x["Webkit"+A]="webkit"+m,x["Moz"+A]="moz"+m,x}var xs={animationend:Ac("Animation","AnimationEnd"),animationiteration:Ac("Animation","AnimationIteration"),animationstart:Ac("Animation","AnimationStart"),transitionrun:Ac("Transition","TransitionRun"),transitionstart:Ac("Transition","TransitionStart"),transitioncancel:Ac("Transition","TransitionCancel"),transitionend:Ac("Transition","TransitionEnd")},ko={},mf={};wo&&(mf=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function ru(A){if(ko[A])return ko[A];if(!xs[A])return A;var m=xs[A],x;for(x in m)if(m.hasOwnProperty(x)&&x in mf)return ko[A]=m[x];return A}var zh=ru("animationend"),rA=ru("animationiteration"),nA=ru("animationstart"),aA=ru("transitionrun"),pf=ru("transitionstart"),$h=ru("transitioncancel"),sA=ru("transitionend"),Xu=new Map,gf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");gf.push("scrollEnd");function Ka(A,m){Xu.set(A,m),jt(m,[A])}var il=new WeakMap;function hn(A,m){if(typeof A=="object"&&A!==null){var x=il.get(A);return x!==void 0?x:(m={value:A,source:m,stack:xa(m)},il.set(A,m),m)}return{value:A,source:m,stack:xa(m)}}var mn=[],ba=0,ns=0;function Fl(){for(var A=ba,m=ns=ba=0;m<A;){var x=mn[m];mn[m++]=null;var E=mn[m];mn[m++]=null;var L=mn[m];mn[m++]=null;var K=mn[m];if(mn[m++]=null,E!==null&&L!==null){var le=E.pending;le===null?L.next=L:(L.next=le.next,le.next=L),E.pending=L}K!==0&&Ig(x,L,K)}}function iA(A,m,x,E){mn[ba++]=A,mn[ba++]=m,mn[ba++]=x,mn[ba++]=E,ns|=E,A.lanes|=E,A=A.alternate,A!==null&&(A.lanes|=E)}function oA(A,m,x,E){return iA(A,m,x,E),vf(A)}function Yu(A,m){return iA(A,null,null,m),vf(A)}function Ig(A,m,x){A.lanes|=x;var E=A.alternate;E!==null&&(E.lanes|=x);for(var L=!1,K=A.return;K!==null;)K.childLanes|=x,E=K.alternate,E!==null&&(E.childLanes|=x),K.tag===22&&(A=K.stateNode,A===null||A._visibility&1||(L=!0)),A=K,K=K.return;return A.tag===3?(K=A.stateNode,L&&m!==null&&(L=31-Dt(x),A=K.hiddenUpdates,E=A[L],E===null?A[L]=[m]:E.push(m),m.lane=x|536870912),K):null}function vf(A){if(50<gb)throw gb=0,bB=null,Error(n(185));for(var m=A.return;m!==null;)A=m,m=A.return;return A.tag===3?A.stateNode:null}var ri={};function Ol(A,m,x,E){this.tag=A,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pi(A,m,x,E){return new Ol(A,m,x,E)}function Gh(A){return A=A.prototype,!(!A||!A.isReactComponent)}function nu(A,m){var x=A.alternate;return x===null?(x=Pi(A.tag,m,A.key,A.mode),x.elementType=A.elementType,x.type=A.type,x.stateNode=A.stateNode,x.alternate=A,A.alternate=x):(x.pendingProps=m,x.type=A.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=A.flags&65011712,x.childLanes=A.childLanes,x.lanes=A.lanes,x.child=A.child,x.memoizedProps=A.memoizedProps,x.memoizedState=A.memoizedState,x.updateQueue=A.updateQueue,m=A.dependencies,x.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},x.sibling=A.sibling,x.index=A.index,x.ref=A.ref,x.refCleanup=A.refCleanup,x}function Qm(A,m){A.flags&=65011714;var x=A.alternate;return x===null?(A.childLanes=0,A.lanes=m,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=x.childLanes,A.lanes=x.lanes,A.child=x.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=x.memoizedProps,A.memoizedState=x.memoizedState,A.updateQueue=x.updateQueue,A.type=x.type,m=x.dependencies,A.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),A}function xf(A,m,x,E,L,K){var le=0;if(E=A,typeof A=="function")Gh(A)&&(le=1);else if(typeof A=="string")le=DAe(A,x,J.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case F:return A=Pi(31,x,m,L),A.elementType=F,A.lanes=K,A;case g:return Ju(x.children,L,K,m);case v:le=8,L|=24;break;case b:return A=Pi(12,x,m,L|2),A.elementType=b,A.lanes=K,A;case S:return A=Pi(13,x,m,L),A.elementType=S,A.lanes=K,A;case B:return A=Pi(19,x,m,L),A.elementType=B,A.lanes=K,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case y:case N:le=10;break e;case C:le=9;break e;case T:le=11;break e;case w:le=14;break e;case _:le=16,E=null;break e}le=29,x=Error(n(130,A===null?"null":typeof A,"")),E=null}return m=Pi(le,x,m,L),m.elementType=A,m.type=E,m.lanes=K,m}function Ju(A,m,x,E){return A=Pi(7,A,E,m),A.lanes=x,A}function Fg(A,m,x){return A=Pi(6,A,null,m),A.lanes=x,A}function Hm(A,m,x){return m=Pi(4,A.children!==null?A.children:[],A.key,m),m.lanes=x,m.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},m}var lA=[],Zu=0,Kh=null,Og=0,Dl=[],ol=0,bf=null,ed=1,td="";function yf(A,m){lA[Zu++]=Og,lA[Zu++]=Kh,Kh=A,Og=m}function eE(A,m,x){Dl[ol++]=ed,Dl[ol++]=td,Dl[ol++]=bf,bf=A;var E=ed;A=td;var L=32-Dt(E)-1;E&=~(1<<L),x+=1;var K=32-Dt(m)+L;if(30<K){var le=L-L%5;K=(E&(1<<le)-1).toString(32),E>>=le,L-=le,ed=1<<32-Dt(m)+L|x<<L|E,td=K+A}else ed=1<<K|x<<L|E,td=A}function Vm(A){A.return!==null&&(yf(A,1),eE(A,1,0))}function zm(A){for(;A===Kh;)Kh=lA[--Zu],lA[Zu]=null,Og=lA[--Zu],lA[Zu]=null;for(;A===bf;)bf=Dl[--ol],Dl[ol]=null,td=Dl[--ol],Dl[ol]=null,ed=Dl[--ol],Dl[ol]=null}var Ds=null,qa=null,Qn=!1,cA=null,au=!1,K1=Error(n(519));function wf(A){var m=Error(n(418,""));throw qh(hn(m,A)),K1}function tE(A){var m=A.stateNode,x=A.type,E=A.memoizedProps;switch(m[rn]=A,m[en]=E,x){case"dialog":Nn("cancel",m),Nn("close",m);break;case"iframe":case"object":case"embed":Nn("load",m);break;case"video":case"audio":for(x=0;x<xb.length;x++)Nn(xb[x],m);break;case"source":Nn("error",m);break;case"img":case"image":case"link":Nn("error",m),Nn("load",m);break;case"details":Nn("toggle",m);break;case"input":Nn("invalid",m),zc(m,E.value,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name,!0),Vc(m);break;case"select":Nn("invalid",m);break;case"textarea":Nn("invalid",m),Gc(m,E.value,E.defaultValue,E.children),Vc(m)}x=E.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||m.textContent===""+x||E.suppressHydrationWarning===!0||IU(m.textContent,x)?(E.popover!=null&&(Nn("beforetoggle",m),Nn("toggle",m)),E.onScroll!=null&&Nn("scroll",m),E.onScrollEnd!=null&&Nn("scrollend",m),E.onClick!=null&&(m.onclick=RE),m=!0):m=!1,m||wf(A)}function rd(A){for(Ds=A.return;Ds;)switch(Ds.tag){case 5:case 13:au=!1;return;case 27:case 3:au=!0;return;default:Ds=Ds.return}}function ao(A){if(A!==Ds)return!1;if(!Qn)return rd(A),Qn=!0,!1;var m=A.tag,x;if((x=m!==3&&m!==27)&&((x=m===5)&&(x=A.type,x=!(x!=="form"&&x!=="button")||PB(A.type,A.memoizedProps)),x=!x),x&&qa&&wf(A),rd(A),m===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,m=0;A;){if(A.nodeType===8)if(x=A.data,x==="/$"){if(m===0){qa=ud(A.nextSibling);break e}m--}else x!=="$"&&x!=="$!"&&x!=="$?"||m++;A=A.nextSibling}qa=null}}else m===27?(m=qa,d0(A.type)?(A=UB,UB=null,qa=A):qa=m):qa=Ds?ud(A.stateNode.nextSibling):null;return!0}function ll(){qa=Ds=null,Qn=!1}function rE(){var A=cA;return A!==null&&(Ll===null?Ll=A:Ll.push.apply(Ll,A),cA=null),A}function qh(A){cA===null?cA=[A]:cA.push(A)}var su=re(null),ni=null,nd=null;function uA(A,m,x){q(su,m._currentValue),m._currentValue=x}function iu(A){A._currentValue=su.current,R(su)}function Dg(A,m,x){for(;A!==null;){var E=A.alternate;if((A.childLanes&m)!==m?(A.childLanes|=m,E!==null&&(E.childLanes|=m)):E!==null&&(E.childLanes&m)!==m&&(E.childLanes|=m),A===x)break;A=A.return}}function Pg(A,m,x,E){var L=A.child;for(L!==null&&(L.return=A);L!==null;){var K=L.dependencies;if(K!==null){var le=L.child;K=K.firstContext;e:for(;K!==null;){var be=K;K=L;for(var Pe=0;Pe<m.length;Pe++)if(be.context===m[Pe]){K.lanes|=x,be=K.alternate,be!==null&&(be.lanes|=x),Dg(K.return,x,A),E||(le=null);break e}K=be.next}}else if(L.tag===18){if(le=L.return,le===null)throw Error(n(341));le.lanes|=x,K=le.alternate,K!==null&&(K.lanes|=x),Dg(le,x,A),le=null}else le=L.child;if(le!==null)le.return=L;else for(le=L;le!==null;){if(le===A){le=null;break}if(L=le.sibling,L!==null){L.return=le.return,le=L;break}le=le.return}L=le}}function Wh(A,m,x,E){A=null;for(var L=m,K=!1;L!==null;){if(!K){if((L.flags&524288)!==0)K=!0;else if((L.flags&262144)!==0)break}if(L.tag===10){var le=L.alternate;if(le===null)throw Error(n(387));if(le=le.memoizedProps,le!==null){var be=L.type;ti(L.pendingProps.value,le.value)||(A!==null?A.push(be):A=[be])}}else if(L===Ae.current){if(le=L.alternate,le===null)throw Error(n(387));le.memoizedState.memoizedState!==L.memoizedState.memoizedState&&(A!==null?A.push(_b):A=[_b])}L=L.return}A!==null&&Pg(m,A,x,E),m.flags|=262144}function Rg(A){for(A=A.firstContext;A!==null;){if(!ti(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function ou(A){ni=A,nd=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Ps(A){return Lg(ni,A)}function dA(A,m){return ni===null&&ou(A),Lg(A,m)}function Lg(A,m){var x=m._currentValue;if(m={context:m,memoizedValue:x,next:null},nd===null){if(A===null)throw Error(n(308));nd=m,A.dependencies={lanes:0,firstContext:m},A.flags|=524288}else nd=nd.next=m;return x}var $k=typeof AbortController<"u"?AbortController:function(){var A=[],m=this.signal={aborted:!1,addEventListener:function(x,E){A.push(E)}};this.abort=function(){m.aborted=!0,A.forEach(function(x){return x()})}},nE=e.unstable_scheduleCallback,Gk=e.unstable_NormalPriority,Rs={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function q1(){return{controller:new $k,data:new Map,refCount:0}}function $m(A){A.refCount--,A.refCount===0&&nE(Gk,function(){A.controller.abort()})}var Gm=null,W1=0,Ef=0,ad=null;function Kk(A,m){if(Gm===null){var x=Gm=[];W1=0,Ef=NB(),ad={status:"pending",value:void 0,then:function(E){x.push(E)}}}return W1++,m.then(aE,aE),m}function aE(){if(--W1===0&&Gm!==null){ad!==null&&(ad.status="fulfilled");var A=Gm;Gm=null,Ef=0,ad=null;for(var m=0;m<A.length;m++)(0,A[m])()}}function sE(A,m){var x=[],E={status:"pending",value:null,reason:null,then:function(L){x.push(L)}};return A.then(function(){E.status="fulfilled",E.value=m;for(var L=0;L<x.length;L++)(0,x[L])(m)},function(L){for(E.status="rejected",E.reason=L,L=0;L<x.length;L++)(0,x[L])(void 0)}),E}var j=H.S;H.S=function(A,m){typeof m=="object"&&m!==null&&typeof m.then=="function"&&Kk(A,m),j!==null&&j(A,m)};var Q=re(null);function Z(){var A=Q.current;return A!==null?A:ja.pooledCache}function ae(A,m){m===null?q(Q,Q.current):q(Q,m.pool)}function ue(){var A=Z();return A===null?null:{parent:Rs._currentValue,pool:A}}var me=Error(n(460)),ge=Error(n(474)),ve=Error(n(542)),we={then:function(){}};function ke(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Me(){}function nt(A,m,x){switch(x=A[x],x===void 0?A.push(m):x!==m&&(m.then(Me,Me),m=x),m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,kt(A),A;default:if(typeof m.status=="string")m.then(Me,Me);else{if(A=ja,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=m,A.status="pending",A.then(function(E){if(m.status==="pending"){var L=m;L.status="fulfilled",L.value=E}},function(E){if(m.status==="pending"){var L=m;L.status="rejected",L.reason=E}})}switch(m.status){case"fulfilled":return m.value;case"rejected":throw A=m.reason,kt(A),A}throw et=m,me}}var et=null;function Ke(){if(et===null)throw Error(n(459));var A=et;return et=null,A}function kt(A){if(A===me||A===ve)throw Error(n(483))}var ht=!1;function Ue(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ve(A,m){A=A.updateQueue,m.updateQueue===A&&(m.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function Ct(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function Bt(A,m,x){var E=A.updateQueue;if(E===null)return null;if(E=E.shared,(Aa&2)!==0){var L=E.pending;return L===null?m.next=m:(m.next=L.next,L.next=m),E.pending=m,m=vf(A),Ig(A,null,x),m}return iA(A,E,m,x),vf(A)}function St(A,m,x){if(m=m.updateQueue,m!==null&&(m=m.shared,(x&4194048)!==0)){var E=m.lanes;E&=A.pendingLanes,x|=E,m.lanes=x,zt(A,x)}}function nr(A,m){var x=A.updateQueue,E=A.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var L=null,K=null;if(x=x.firstBaseUpdate,x!==null){do{var le={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};K===null?L=K=le:K=K.next=le,x=x.next}while(x!==null);K===null?L=K=m:K=K.next=m}else L=K=m;x={baseState:E.baseState,firstBaseUpdate:L,lastBaseUpdate:K,shared:E.shared,callbacks:E.callbacks},A.updateQueue=x;return}A=x.lastBaseUpdate,A===null?x.firstBaseUpdate=m:A.next=m,x.lastBaseUpdate=m}var Xt=!1;function vr(){if(Xt){var A=ad;if(A!==null)throw A}}function er(A,m,x,E){Xt=!1;var L=A.updateQueue;ht=!1;var K=L.firstBaseUpdate,le=L.lastBaseUpdate,be=L.shared.pending;if(be!==null){L.shared.pending=null;var Pe=be,it=Pe.next;Pe.next=null,le===null?K=it:le.next=it,le=Pe;var _t=A.alternate;_t!==null&&(_t=_t.updateQueue,be=_t.lastBaseUpdate,be!==le&&(be===null?_t.firstBaseUpdate=it:be.next=it,_t.lastBaseUpdate=Pe))}if(K!==null){var Ft=L.baseState;le=0,_t=it=Pe=null,be=K;do{var At=be.lane&-536870913,ft=At!==be.lane;if(ft?(Ln&At)===At:(E&At)===At){At!==0&&At===Ef&&(Xt=!0),_t!==null&&(_t=_t.next={lane:0,tag:be.tag,payload:be.payload,callback:null,next:null});e:{var $r=A,Ir=be;At=m;var wa=x;switch(Ir.tag){case 1:if($r=Ir.payload,typeof $r=="function"){Ft=$r.call(wa,Ft,At);break e}Ft=$r;break e;case 3:$r.flags=$r.flags&-65537|128;case 0:if($r=Ir.payload,At=typeof $r=="function"?$r.call(wa,Ft,At):$r,At==null)break e;Ft=d({},Ft,At);break e;case 2:ht=!0}}At=be.callback,At!==null&&(A.flags|=64,ft&&(A.flags|=8192),ft=L.callbacks,ft===null?L.callbacks=[At]:ft.push(At))}else ft={lane:At,tag:be.tag,payload:be.payload,callback:be.callback,next:null},_t===null?(it=_t=ft,Pe=Ft):_t=_t.next=ft,le|=At;if(be=be.next,be===null){if(be=L.shared.pending,be===null)break;ft=be,be=ft.next,ft.next=null,L.lastBaseUpdate=ft,L.shared.pending=null}}while(!0);_t===null&&(Pe=Ft),L.baseState=Pe,L.firstBaseUpdate=it,L.lastBaseUpdate=_t,K===null&&(L.shared.lanes=0),o0|=le,A.lanes=le,A.memoizedState=Ft}}function Pn(A,m){if(typeof A!="function")throw Error(n(191,A));A.call(m)}function Gn(A,m){var x=A.callbacks;if(x!==null)for(A.callbacks=null,A=0;A<x.length;A++)Pn(x[A],m)}var fn=re(null),ln=re(0);function aa(A,m){A=Ff,q(ln,A),q(fn,m),Ff=A|m.baseLanes}function Kn(){q(ln,Ff),q(fn,fn.current)}function qr(){Ff=ln.current,R(fn),R(ln)}var da=0,Nr=null,Mr=null,Dn=null,Rn=!1,ai=!1,Ls=!1,as=0,ss=0,bs=null,Pl=0;function qn(){throw Error(n(321))}function ys(A,m){if(m===null)return!1;for(var x=0;x<m.length&&x<A.length;x++)if(!ti(A[x],m[x]))return!1;return!0}function fc(A,m,x,E,L,K){return da=K,Nr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,H.H=A===null||A.memoizedState===null?AM:fM,Ls=!1,K=x(E,L),Ls=!1,ai&&(K=Cf(m,x,E,L)),AA(A),K}function AA(A){H.H=gE;var m=Mr!==null&&Mr.next!==null;if(da=0,Dn=Mr=Nr=null,Rn=!1,ss=0,bs=null,m)throw Error(n(300));A===null||Ri||(A=A.dependencies,A!==null&&Rg(A)&&(Ri=!0))}function Cf(A,m,x,E){Nr=A;var L=0;do{if(ai&&(bs=null),ss=0,ai=!1,25<=L)throw Error(n(301));if(L+=1,Dn=Mr=null,A.updateQueue!=null){var K=A.updateQueue;K.lastEffect=null,K.events=null,K.stores=null,K.memoCache!=null&&(K.memoCache.index=0)}H.H=Gde,K=m(x,E)}while(ai);return K}function fA(){var A=H.H,m=A.useState()[0];return m=typeof m.then=="function"?hA(m):m,A=A.useState()[0],(Mr!==null?Mr.memoizedState:null)!==A&&(Nr.flags|=1024),m}function Ta(){var A=as!==0;return as=0,A}function Km(A,m,x){m.updateQueue=A.updateQueue,m.flags&=-2053,A.lanes&=~x}function Mg(A){if(Rn){for(A=A.memoizedState;A!==null;){var m=A.queue;m!==null&&(m.pending=null),A=A.next}Rn=!1}da=0,Dn=Mr=Nr=null,ai=!1,ss=as=0,bs=null}function so(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?Nr.memoizedState=Dn=A:Dn=Dn.next=A,Dn}function Ra(){if(Mr===null){var A=Nr.alternate;A=A!==null?A.memoizedState:null}else A=Mr.next;var m=Dn===null?Nr.memoizedState:Dn.next;if(m!==null)Dn=m,Mr=A;else{if(A===null)throw Nr.alternate===null?Error(n(467)):Error(n(310));Mr=A,A={memoizedState:Mr.memoizedState,baseState:Mr.baseState,baseQueue:Mr.baseQueue,queue:Mr.queue,next:null},Dn===null?Nr.memoizedState=Dn=A:Dn=Dn.next=A}return Dn}function _f(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function hA(A){var m=ss;return ss+=1,bs===null&&(bs=[]),A=nt(bs,A,m),m=Nr,(Dn===null?m.memoizedState:Dn.next)===null&&(m=m.alternate,H.H=m===null||m.memoizedState===null?AM:fM),A}function Bo(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return hA(A);if(A.$$typeof===N)return Ps(A)}throw Error(n(438,String(A)))}function mA(A){var m=null,x=Nr.updateQueue;if(x!==null&&(m=x.memoCache),m==null){var E=Nr.alternate;E!==null&&(E=E.updateQueue,E!==null&&(E=E.memoCache,E!=null&&(m={data:E.data.map(function(L){return L.slice()}),index:0})))}if(m==null&&(m={data:[],index:0}),x===null&&(x=_f(),Nr.updateQueue=x),x.memoCache=m,x=m.data[m.index],x===void 0)for(x=m.data[m.index]=Array(A),E=0;E<A;E++)x[E]=M;return m.index++,x}function To(A,m){return typeof m=="function"?m(A):m}function qm(A){var m=Ra();return Xh(m,Mr,A)}function Xh(A,m,x){var E=A.queue;if(E===null)throw Error(n(311));E.lastRenderedReducer=x;var L=A.baseQueue,K=E.pending;if(K!==null){if(L!==null){var le=L.next;L.next=K.next,K.next=le}m.baseQueue=L=K,E.pending=null}if(K=A.baseState,L===null)A.memoizedState=K;else{m=L.next;var be=le=null,Pe=null,it=m,_t=!1;do{var Ft=it.lane&-536870913;if(Ft!==it.lane?(Ln&Ft)===Ft:(da&Ft)===Ft){var At=it.revertLane;if(At===0)Pe!==null&&(Pe=Pe.next={lane:0,revertLane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),Ft===Ef&&(_t=!0);else if((da&At)===At){it=it.next,At===Ef&&(_t=!0);continue}else Ft={lane:0,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},Pe===null?(be=Pe=Ft,le=K):Pe=Pe.next=Ft,Nr.lanes|=At,o0|=At;Ft=it.action,Ls&&x(K,Ft),K=it.hasEagerState?it.eagerState:x(K,Ft)}else At={lane:Ft,revertLane:it.revertLane,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null},Pe===null?(be=Pe=At,le=K):Pe=Pe.next=At,Nr.lanes|=Ft,o0|=Ft;it=it.next}while(it!==null&&it!==m);if(Pe===null?le=K:Pe.next=be,!ti(K,A.memoizedState)&&(Ri=!0,_t&&(x=ad,x!==null)))throw x;A.memoizedState=K,A.baseState=le,A.baseQueue=Pe,E.lastRenderedState=K}return L===null&&(E.lanes=0),[A.memoizedState,E.dispatch]}function Ug(A){var m=Ra(),x=m.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=A;var E=x.dispatch,L=x.pending,K=m.memoizedState;if(L!==null){x.pending=null;var le=L=L.next;do K=A(K,le.action),le=le.next;while(le!==L);ti(K,m.memoizedState)||(Ri=!0),m.memoizedState=K,m.baseQueue===null&&(m.baseState=K),x.lastRenderedState=K}return[K,E]}function Wm(A,m,x){var E=Nr,L=Ra(),K=Qn;if(K){if(x===void 0)throw Error(n(407));x=x()}else x=m();var le=!ti((Mr||L).memoizedState,x);le&&(L.memoizedState=x,Ri=!0),L=L.queue;var be=Yh.bind(null,E,L,A);if(e0(2048,8,be,[A]),L.getSnapshot!==m||le||Dn!==null&&Dn.memoizedState.tag&1){if(E.flags|=2048,id(9,Zm(),Xm.bind(null,E,L,x,m),null),ja===null)throw Error(n(349));K||(da&124)!==0||Qg(E,m,x)}return x}function Qg(A,m,x){A.flags|=16384,A={getSnapshot:m,value:x},m=Nr.updateQueue,m===null?(m=_f(),Nr.updateQueue=m,m.stores=[A]):(x=m.stores,x===null?m.stores=[A]:x.push(A))}function Xm(A,m,x,E){m.value=x,m.getSnapshot=E,iE(m)&&oE(A)}function Yh(A,m,x){return x(function(){iE(m)&&oE(A)})}function iE(A){var m=A.getSnapshot;A=A.value;try{var x=m();return!ti(A,x)}catch{return!0}}function oE(A){var m=Yu(A,2);m!==null&&xc(m,A,2)}function Ym(A){var m=so();if(typeof A=="function"){var x=A;if(A=x(),Ls){Mt(!0);try{x()}finally{Mt(!1)}}}return m.memoizedState=m.baseState=A,m.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:A},m}function sd(A,m,x,E){return A.baseState=x,Xh(A,Mr,typeof E=="function"?E:To)}function qk(A,m,x,E,L){if(pE(A))throw Error(n(485));if(A=m.action,A!==null){var K={payload:L,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){K.listeners.push(le)}};H.T!==null?x(!0):K.isTransition=!1,E(K),x=m.pending,x===null?(K.next=m.pending=K,lE(m,K)):(K.next=x.next,m.pending=x.next=K)}}function lE(A,m){var x=m.action,E=m.payload,L=A.state;if(m.isTransition){var K=H.T,le={};H.T=le;try{var be=x(L,E),Pe=H.S;Pe!==null&&Pe(le,be),cE(A,m,be)}catch(it){Jh(A,m,it)}finally{H.T=K}}else try{K=x(L,E),cE(A,m,K)}catch(it){Jh(A,m,it)}}function cE(A,m,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(E){X1(A,m,E)},function(E){return Jh(A,m,E)}):X1(A,m,x)}function X1(A,m,x){m.status="fulfilled",m.value=x,Y1(m),A.state=x,m=A.pending,m!==null&&(x=m.next,x===m?A.pending=null:(x=x.next,m.next=x,lE(A,x)))}function Jh(A,m,x){var E=A.pending;if(A.pending=null,E!==null){E=E.next;do m.status="rejected",m.reason=x,Y1(m),m=m.next;while(m!==E)}A.action=null}function Y1(A){A=A.listeners;for(var m=0;m<A.length;m++)(0,A[m])()}function J1(A,m){return m}function Jm(A,m){if(Qn){var x=ja.formState;if(x!==null){e:{var E=Nr;if(Qn){if(qa){t:{for(var L=qa,K=au;L.nodeType!==8;){if(!K){L=null;break t}if(L=ud(L.nextSibling),L===null){L=null;break t}}K=L.data,L=K==="F!"||K==="F"?L:null}if(L){qa=ud(L.nextSibling),E=L.data==="F!";break e}}wf(E)}E=!1}E&&(m=x[0])}}return x=so(),x.memoizedState=x.baseState=m,E={pending:null,lanes:0,dispatch:null,lastRenderedReducer:J1,lastRenderedState:m},x.queue=E,x=cM.bind(null,Nr,E),E.dispatch=x,E=Ym(!1),K=Wk.bind(null,Nr,!1,E.queue),E=so(),L={state:m,dispatch:null,action:A,pending:null},E.queue=L,x=qk.bind(null,Nr,L,K,x),L.dispatch=x,E.memoizedState=A,[m,x,!1]}function Hg(A){var m=Ra();return Zh(m,Mr,A)}function Zh(A,m,x){if(m=Xh(A,m,J1)[0],A=qm(To)[0],typeof m=="object"&&m!==null&&typeof m.then=="function")try{var E=hA(m)}catch(le){throw le===me?ve:le}else E=m;m=Ra();var L=m.queue,K=L.dispatch;return x!==m.memoizedState&&(Nr.flags|=2048,id(9,Zm(),uE.bind(null,L,x),null)),[E,K,A]}function uE(A,m){A.action=m}function dE(A){var m=Ra(),x=Mr;if(x!==null)return Zh(m,x,A);Ra(),m=m.memoizedState,x=Ra();var E=x.queue.dispatch;return x.memoizedState=A,[m,E,!1]}function id(A,m,x,E){return A={tag:A,create:x,deps:E,inst:m,next:null},m=Nr.updateQueue,m===null&&(m=_f(),Nr.updateQueue=m),x=m.lastEffect,x===null?m.lastEffect=A.next=A:(E=x.next,x.next=A,A.next=E,m.lastEffect=A),A}function Zm(){return{destroy:void 0,resource:void 0}}function Vg(){return Ra().memoizedState}function hc(A,m,x,E){var L=so();E=E===void 0?null:E,Nr.flags|=A,L.memoizedState=id(1|m,Zm(),x,E)}function e0(A,m,x,E){var L=Ra();E=E===void 0?null:E;var K=L.memoizedState.inst;Mr!==null&&E!==null&&ys(E,Mr.memoizedState.deps)?L.memoizedState=id(m,K,x,E):(Nr.flags|=A,L.memoizedState=id(1|m,K,x,E))}function Z1(A,m){hc(8390656,8,A,m)}function AE(A,m){e0(2048,8,A,m)}function eb(A,m){return e0(4,2,A,m)}function Sf(A,m){return e0(4,4,A,m)}function fE(A,m){if(typeof m=="function"){A=A();var x=m(A);return function(){typeof x=="function"?x():m(null)}}if(m!=null)return A=A(),m.current=A,function(){m.current=null}}function tb(A,m,x){x=x!=null?x.concat([A]):null,e0(4,4,fE.bind(null,m,A),x)}function rb(){}function nb(A,m){var x=Ra();m=m===void 0?null:m;var E=x.memoizedState;return m!==null&&ys(m,E[1])?E[0]:(x.memoizedState=[A,m],A)}function hE(A,m){var x=Ra();m=m===void 0?null:m;var E=x.memoizedState;if(m!==null&&ys(m,E[1]))return E[0];if(E=A(),Ls){Mt(!0);try{A()}finally{Mt(!1)}}return x.memoizedState=[E,m],E}function Nf(A,m,x){return x===void 0||(da&1073741824)!==0?A.memoizedState=m:(A.memoizedState=x,A=sU(),Nr.lanes|=A,o0|=A,x)}function zg(A,m,x,E){return ti(x,m)?x:fn.current!==null?(A=Nf(A,x,E),ti(A,m)||(Ri=!0),A):(da&42)===0?(Ri=!0,A.memoizedState=x):(A=sU(),Nr.lanes|=A,o0|=A,m)}function ep(A,m,x,E,L){var K=Y.p;Y.p=K!==0&&8>K?K:8;var le=H.T,be={};H.T=be,Wk(A,!1,m,x);try{var Pe=L(),it=H.S;if(it!==null&&it(be,Pe),Pe!==null&&typeof Pe=="object"&&typeof Pe.then=="function"){var _t=sE(Pe,E);ob(A,m,_t,vc(A))}else ob(A,m,E,vc(A))}catch(Ft){ob(A,m,{then:function(){},status:"rejected",reason:Ft},vc())}finally{Y.p=K,H.T=le}}function od(){}function lu(A,m,x,E){if(A.tag!==5)throw Error(n(476));var L=ld(A).queue;ep(A,L,m,V,x===null?od:function(){return tp(A),x(E)})}function ld(A){var m=A.memoizedState;if(m!==null)return m;m={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:V},next:null};var x={};return m.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:To,lastRenderedState:x},next:null},A.memoizedState=m,A=A.alternate,A!==null&&(A.memoizedState=m),m}function tp(A){var m=ld(A).next.queue;ob(A,m,{},vc())}function rp(){return Ps(_b)}function ab(){return Ra().memoizedState}function mE(){return Ra().memoizedState}function sb(A){for(var m=A.return;m!==null;){switch(m.tag){case 24:case 3:var x=vc();A=Ct(x);var E=Bt(m,A,x);E!==null&&(xc(E,m,x),St(E,m,x)),m={cache:q1()},A.payload=m;return}m=m.return}}function ib(A,m,x){var E=vc();x={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},pE(A)?uM(m,x):(x=oA(A,m,x,E),x!==null&&(xc(x,A,E),dM(x,m,E)))}function cM(A,m,x){var E=vc();ob(A,m,x,E)}function ob(A,m,x,E){var L={lane:E,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(pE(A))uM(m,L);else{var K=A.alternate;if(A.lanes===0&&(K===null||K.lanes===0)&&(K=m.lastRenderedReducer,K!==null))try{var le=m.lastRenderedState,be=K(le,x);if(L.hasEagerState=!0,L.eagerState=be,ti(be,le))return iA(A,m,L,0),ja===null&&Fl(),!1}catch{}finally{}if(x=oA(A,m,L,E),x!==null)return xc(x,A,E),dM(x,m,E),!0}return!1}function Wk(A,m,x,E){if(E={lane:2,revertLane:NB(),action:E,hasEagerState:!1,eagerState:null,next:null},pE(A)){if(m)throw Error(n(479))}else m=oA(A,x,E,2),m!==null&&xc(m,A,2)}function pE(A){var m=A.alternate;return A===Nr||m!==null&&m===Nr}function uM(A,m){ai=Rn=!0;var x=A.pending;x===null?m.next=m:(m.next=x.next,x.next=m),A.pending=m}function dM(A,m,x){if((x&4194048)!==0){var E=m.lanes;E&=A.pendingLanes,x|=E,m.lanes=x,zt(A,x)}}var gE={readContext:Ps,use:Bo,useCallback:qn,useContext:qn,useEffect:qn,useImperativeHandle:qn,useLayoutEffect:qn,useInsertionEffect:qn,useMemo:qn,useReducer:qn,useRef:qn,useState:qn,useDebugValue:qn,useDeferredValue:qn,useTransition:qn,useSyncExternalStore:qn,useId:qn,useHostTransitionStatus:qn,useFormState:qn,useActionState:qn,useOptimistic:qn,useMemoCache:qn,useCacheRefresh:qn},AM={readContext:Ps,use:Bo,useCallback:function(A,m){return so().memoizedState=[A,m===void 0?null:m],A},useContext:Ps,useEffect:Z1,useImperativeHandle:function(A,m,x){x=x!=null?x.concat([A]):null,hc(4194308,4,fE.bind(null,m,A),x)},useLayoutEffect:function(A,m){return hc(4194308,4,A,m)},useInsertionEffect:function(A,m){hc(4,2,A,m)},useMemo:function(A,m){var x=so();m=m===void 0?null:m;var E=A();if(Ls){Mt(!0);try{A()}finally{Mt(!1)}}return x.memoizedState=[E,m],E},useReducer:function(A,m,x){var E=so();if(x!==void 0){var L=x(m);if(Ls){Mt(!0);try{x(m)}finally{Mt(!1)}}}else L=m;return E.memoizedState=E.baseState=L,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:L},E.queue=A,A=A.dispatch=ib.bind(null,Nr,A),[E.memoizedState,A]},useRef:function(A){var m=so();return A={current:A},m.memoizedState=A},useState:function(A){A=Ym(A);var m=A.queue,x=cM.bind(null,Nr,m);return m.dispatch=x,[A.memoizedState,x]},useDebugValue:rb,useDeferredValue:function(A,m){var x=so();return Nf(x,A,m)},useTransition:function(){var A=Ym(!1);return A=ep.bind(null,Nr,A.queue,!0,!1),so().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,m,x){var E=Nr,L=so();if(Qn){if(x===void 0)throw Error(n(407));x=x()}else{if(x=m(),ja===null)throw Error(n(349));(Ln&124)!==0||Qg(E,m,x)}L.memoizedState=x;var K={value:x,getSnapshot:m};return L.queue=K,Z1(Yh.bind(null,E,K,A),[A]),E.flags|=2048,id(9,Zm(),Xm.bind(null,E,K,x,m),null),x},useId:function(){var A=so(),m=ja.identifierPrefix;if(Qn){var x=td,E=ed;x=(E&~(1<<32-Dt(E)-1)).toString(32)+x,m="«"+m+"R"+x,x=as++,0<x&&(m+="H"+x.toString(32)),m+="»"}else x=Pl++,m="«"+m+"r"+x.toString(32)+"»";return A.memoizedState=m},useHostTransitionStatus:rp,useFormState:Jm,useActionState:Jm,useOptimistic:function(A){var m=so();m.memoizedState=m.baseState=A;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return m.queue=x,m=Wk.bind(null,Nr,!0,x),x.dispatch=m,[A,m]},useMemoCache:mA,useCacheRefresh:function(){return so().memoizedState=sb.bind(null,Nr)}},fM={readContext:Ps,use:Bo,useCallback:nb,useContext:Ps,useEffect:AE,useImperativeHandle:tb,useInsertionEffect:eb,useLayoutEffect:Sf,useMemo:hE,useReducer:qm,useRef:Vg,useState:function(){return qm(To)},useDebugValue:rb,useDeferredValue:function(A,m){var x=Ra();return zg(x,Mr.memoizedState,A,m)},useTransition:function(){var A=qm(To)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:hA(A),m]},useSyncExternalStore:Wm,useId:ab,useHostTransitionStatus:rp,useFormState:Hg,useActionState:Hg,useOptimistic:function(A,m){var x=Ra();return sd(x,Mr,A,m)},useMemoCache:mA,useCacheRefresh:mE},Gde={readContext:Ps,use:Bo,useCallback:nb,useContext:Ps,useEffect:AE,useImperativeHandle:tb,useInsertionEffect:eb,useLayoutEffect:Sf,useMemo:hE,useReducer:Ug,useRef:Vg,useState:function(){return Ug(To)},useDebugValue:rb,useDeferredValue:function(A,m){var x=Ra();return Mr===null?Nf(x,A,m):zg(x,Mr.memoizedState,A,m)},useTransition:function(){var A=Ug(To)[0],m=Ra().memoizedState;return[typeof A=="boolean"?A:hA(A),m]},useSyncExternalStore:Wm,useId:ab,useHostTransitionStatus:rp,useFormState:dE,useActionState:dE,useOptimistic:function(A,m){var x=Ra();return Mr!==null?sd(x,Mr,A,m):(x.baseState=A,[A,x.queue.dispatch])},useMemoCache:mA,useCacheRefresh:mE},$g=null,lb=0;function vE(A){var m=lb;return lb+=1,$g===null&&($g=[]),nt($g,A,m)}function cb(A,m){m=m.props.ref,A.ref=m!==void 0?m:null}function xE(A,m){throw m.$$typeof===f?Error(n(525)):(A=Object.prototype.toString.call(m),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":A)))}function hM(A){var m=A._init;return m(A._payload)}function mM(A){function m(We,Qe){if(A){var rt=We.deletions;rt===null?(We.deletions=[Qe],We.flags|=16):rt.push(Qe)}}function x(We,Qe){if(!A)return null;for(;Qe!==null;)m(We,Qe),Qe=Qe.sibling;return null}function E(We){for(var Qe=new Map;We!==null;)We.key!==null?Qe.set(We.key,We):Qe.set(We.index,We),We=We.sibling;return Qe}function L(We,Qe){return We=nu(We,Qe),We.index=0,We.sibling=null,We}function K(We,Qe,rt){return We.index=rt,A?(rt=We.alternate,rt!==null?(rt=rt.index,rt<Qe?(We.flags|=67108866,Qe):rt):(We.flags|=67108866,Qe)):(We.flags|=1048576,Qe)}function le(We){return A&&We.alternate===null&&(We.flags|=67108866),We}function be(We,Qe,rt,Nt){return Qe===null||Qe.tag!==6?(Qe=Fg(rt,We.mode,Nt),Qe.return=We,Qe):(Qe=L(Qe,rt),Qe.return=We,Qe)}function Pe(We,Qe,rt,Nt){var fr=rt.type;return fr===g?_t(We,Qe,rt.props.children,Nt,rt.key):Qe!==null&&(Qe.elementType===fr||typeof fr=="object"&&fr!==null&&fr.$$typeof===_&&hM(fr)===Qe.type)?(Qe=L(Qe,rt.props),cb(Qe,rt),Qe.return=We,Qe):(Qe=xf(rt.type,rt.key,rt.props,null,We.mode,Nt),cb(Qe,rt),Qe.return=We,Qe)}function it(We,Qe,rt,Nt){return Qe===null||Qe.tag!==4||Qe.stateNode.containerInfo!==rt.containerInfo||Qe.stateNode.implementation!==rt.implementation?(Qe=Hm(rt,We.mode,Nt),Qe.return=We,Qe):(Qe=L(Qe,rt.children||[]),Qe.return=We,Qe)}function _t(We,Qe,rt,Nt,fr){return Qe===null||Qe.tag!==7?(Qe=Ju(rt,We.mode,Nt,fr),Qe.return=We,Qe):(Qe=L(Qe,rt),Qe.return=We,Qe)}function Ft(We,Qe,rt){if(typeof Qe=="string"&&Qe!==""||typeof Qe=="number"||typeof Qe=="bigint")return Qe=Fg(""+Qe,We.mode,rt),Qe.return=We,Qe;if(typeof Qe=="object"&&Qe!==null){switch(Qe.$$typeof){case h:return rt=xf(Qe.type,Qe.key,Qe.props,null,We.mode,rt),cb(rt,Qe),rt.return=We,rt;case p:return Qe=Hm(Qe,We.mode,rt),Qe.return=We,Qe;case _:var Nt=Qe._init;return Qe=Nt(Qe._payload),Ft(We,Qe,rt)}if(X(Qe)||I(Qe))return Qe=Ju(Qe,We.mode,rt,null),Qe.return=We,Qe;if(typeof Qe.then=="function")return Ft(We,vE(Qe),rt);if(Qe.$$typeof===N)return Ft(We,dA(We,Qe),rt);xE(We,Qe)}return null}function At(We,Qe,rt,Nt){var fr=Qe!==null?Qe.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return fr!==null?null:be(We,Qe,""+rt,Nt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case h:return rt.key===fr?Pe(We,Qe,rt,Nt):null;case p:return rt.key===fr?it(We,Qe,rt,Nt):null;case _:return fr=rt._init,rt=fr(rt._payload),At(We,Qe,rt,Nt)}if(X(rt)||I(rt))return fr!==null?null:_t(We,Qe,rt,Nt,null);if(typeof rt.then=="function")return At(We,Qe,vE(rt),Nt);if(rt.$$typeof===N)return At(We,Qe,dA(We,rt),Nt);xE(We,rt)}return null}function ft(We,Qe,rt,Nt,fr){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number"||typeof Nt=="bigint")return We=We.get(rt)||null,be(Qe,We,""+Nt,fr);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case h:return We=We.get(Nt.key===null?rt:Nt.key)||null,Pe(Qe,We,Nt,fr);case p:return We=We.get(Nt.key===null?rt:Nt.key)||null,it(Qe,We,Nt,fr);case _:var En=Nt._init;return Nt=En(Nt._payload),ft(We,Qe,rt,Nt,fr)}if(X(Nt)||I(Nt))return We=We.get(rt)||null,_t(Qe,We,Nt,fr,null);if(typeof Nt.then=="function")return ft(We,Qe,rt,vE(Nt),fr);if(Nt.$$typeof===N)return ft(We,Qe,rt,dA(Qe,Nt),fr);xE(Qe,Nt)}return null}function $r(We,Qe,rt,Nt){for(var fr=null,En=null,yr=Qe,Or=Qe=0,Mi=null;yr!==null&&Or<rt.length;Or++){yr.index>Or?(Mi=yr,yr=null):Mi=yr.sibling;var Wn=At(We,yr,rt[Or],Nt);if(Wn===null){yr===null&&(yr=Mi);break}A&&yr&&Wn.alternate===null&&m(We,yr),Qe=K(Wn,Qe,Or),En===null?fr=Wn:En.sibling=Wn,En=Wn,yr=Mi}if(Or===rt.length)return x(We,yr),Qn&&yf(We,Or),fr;if(yr===null){for(;Or<rt.length;Or++)yr=Ft(We,rt[Or],Nt),yr!==null&&(Qe=K(yr,Qe,Or),En===null?fr=yr:En.sibling=yr,En=yr);return Qn&&yf(We,Or),fr}for(yr=E(yr);Or<rt.length;Or++)Mi=ft(yr,We,Or,rt[Or],Nt),Mi!==null&&(A&&Mi.alternate!==null&&yr.delete(Mi.key===null?Or:Mi.key),Qe=K(Mi,Qe,Or),En===null?fr=Mi:En.sibling=Mi,En=Mi);return A&&yr.forEach(function(p0){return m(We,p0)}),Qn&&yf(We,Or),fr}function Ir(We,Qe,rt,Nt){if(rt==null)throw Error(n(151));for(var fr=null,En=null,yr=Qe,Or=Qe=0,Mi=null,Wn=rt.next();yr!==null&&!Wn.done;Or++,Wn=rt.next()){yr.index>Or?(Mi=yr,yr=null):Mi=yr.sibling;var p0=At(We,yr,Wn.value,Nt);if(p0===null){yr===null&&(yr=Mi);break}A&&yr&&p0.alternate===null&&m(We,yr),Qe=K(p0,Qe,Or),En===null?fr=p0:En.sibling=p0,En=p0,yr=Mi}if(Wn.done)return x(We,yr),Qn&&yf(We,Or),fr;if(yr===null){for(;!Wn.done;Or++,Wn=rt.next())Wn=Ft(We,Wn.value,Nt),Wn!==null&&(Qe=K(Wn,Qe,Or),En===null?fr=Wn:En.sibling=Wn,En=Wn);return Qn&&yf(We,Or),fr}for(yr=E(yr);!Wn.done;Or++,Wn=rt.next())Wn=ft(yr,We,Or,Wn.value,Nt),Wn!==null&&(A&&Wn.alternate!==null&&yr.delete(Wn.key===null?Or:Wn.key),Qe=K(Wn,Qe,Or),En===null?fr=Wn:En.sibling=Wn,En=Wn);return A&&yr.forEach(function(KAe){return m(We,KAe)}),Qn&&yf(We,Or),fr}function wa(We,Qe,rt,Nt){if(typeof rt=="object"&&rt!==null&&rt.type===g&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case h:e:{for(var fr=rt.key;Qe!==null;){if(Qe.key===fr){if(fr=rt.type,fr===g){if(Qe.tag===7){x(We,Qe.sibling),Nt=L(Qe,rt.props.children),Nt.return=We,We=Nt;break e}}else if(Qe.elementType===fr||typeof fr=="object"&&fr!==null&&fr.$$typeof===_&&hM(fr)===Qe.type){x(We,Qe.sibling),Nt=L(Qe,rt.props),cb(Nt,rt),Nt.return=We,We=Nt;break e}x(We,Qe);break}else m(We,Qe);Qe=Qe.sibling}rt.type===g?(Nt=Ju(rt.props.children,We.mode,Nt,rt.key),Nt.return=We,We=Nt):(Nt=xf(rt.type,rt.key,rt.props,null,We.mode,Nt),cb(Nt,rt),Nt.return=We,We=Nt)}return le(We);case p:e:{for(fr=rt.key;Qe!==null;){if(Qe.key===fr)if(Qe.tag===4&&Qe.stateNode.containerInfo===rt.containerInfo&&Qe.stateNode.implementation===rt.implementation){x(We,Qe.sibling),Nt=L(Qe,rt.children||[]),Nt.return=We,We=Nt;break e}else{x(We,Qe);break}else m(We,Qe);Qe=Qe.sibling}Nt=Hm(rt,We.mode,Nt),Nt.return=We,We=Nt}return le(We);case _:return fr=rt._init,rt=fr(rt._payload),wa(We,Qe,rt,Nt)}if(X(rt))return $r(We,Qe,rt,Nt);if(I(rt)){if(fr=I(rt),typeof fr!="function")throw Error(n(150));return rt=fr.call(rt),Ir(We,Qe,rt,Nt)}if(typeof rt.then=="function")return wa(We,Qe,vE(rt),Nt);if(rt.$$typeof===N)return wa(We,Qe,dA(We,rt),Nt);xE(We,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint"?(rt=""+rt,Qe!==null&&Qe.tag===6?(x(We,Qe.sibling),Nt=L(Qe,rt),Nt.return=We,We=Nt):(x(We,Qe),Nt=Fg(rt,We.mode,Nt),Nt.return=We,We=Nt),le(We)):x(We,Qe)}return function(We,Qe,rt,Nt){try{lb=0;var fr=wa(We,Qe,rt,Nt);return $g=null,fr}catch(yr){if(yr===me||yr===ve)throw yr;var En=Pi(29,yr,null,We.mode);return En.lanes=Nt,En.return=We,En}finally{}}}var Gg=mM(!0),pM=mM(!1),cu=re(null),pA=null;function t0(A){var m=A.alternate;q(wi,wi.current&1),q(cu,A),pA===null&&(m===null||fn.current!==null||m.memoizedState!==null)&&(pA=A)}function gM(A){if(A.tag===22){if(q(wi,wi.current),q(cu,A),pA===null){var m=A.alternate;m!==null&&m.memoizedState!==null&&(pA=A)}}else r0()}function r0(){q(wi,wi.current),q(cu,cu.current)}function kf(A){R(cu),pA===A&&(pA=null),R(wi)}var wi=re(0);function bE(A){for(var m=A;m!==null;){if(m.tag===13){var x=m.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||MB(x)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if((m.flags&128)!==0)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}function Xk(A,m,x,E){m=A.memoizedState,x=x(E,m),x=x==null?m:d({},m,x),A.memoizedState=x,A.lanes===0&&(A.updateQueue.baseState=x)}var Yk={enqueueSetState:function(A,m,x){A=A._reactInternals;var E=vc(),L=Ct(E);L.payload=m,x!=null&&(L.callback=x),m=Bt(A,L,E),m!==null&&(xc(m,A,E),St(m,A,E))},enqueueReplaceState:function(A,m,x){A=A._reactInternals;var E=vc(),L=Ct(E);L.tag=1,L.payload=m,x!=null&&(L.callback=x),m=Bt(A,L,E),m!==null&&(xc(m,A,E),St(m,A,E))},enqueueForceUpdate:function(A,m){A=A._reactInternals;var x=vc(),E=Ct(x);E.tag=2,m!=null&&(E.callback=m),m=Bt(A,E,x),m!==null&&(xc(m,A,x),St(m,A,x))}};function vM(A,m,x,E,L,K,le){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(E,K,le):m.prototype&&m.prototype.isPureReactComponent?!Zd(x,E)||!Zd(L,K):!0}function xM(A,m,x,E){A=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(x,E),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(x,E),m.state!==A&&Yk.enqueueReplaceState(m,m.state,null)}function np(A,m){var x=m;if("ref"in m){x={};for(var E in m)E!=="ref"&&(x[E]=m[E])}if(A=A.defaultProps){x===m&&(x=d({},x));for(var L in A)x[L]===void 0&&(x[L]=A[L])}return x}var yE=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var m=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(m))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function bM(A){yE(A)}function yM(A){console.error(A)}function wM(A){yE(A)}function wE(A,m){try{var x=A.onUncaughtError;x(m.value,{componentStack:m.stack})}catch(E){setTimeout(function(){throw E})}}function EM(A,m,x){try{var E=A.onCaughtError;E(x.value,{componentStack:x.stack,errorBoundary:m.tag===1?m.stateNode:null})}catch(L){setTimeout(function(){throw L})}}function Jk(A,m,x){return x=Ct(x),x.tag=3,x.payload={element:null},x.callback=function(){wE(A,m)},x}function CM(A){return A=Ct(A),A.tag=3,A}function _M(A,m,x,E){var L=x.type.getDerivedStateFromError;if(typeof L=="function"){var K=E.value;A.payload=function(){return L(K)},A.callback=function(){EM(m,x,E)}}var le=x.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(A.callback=function(){EM(m,x,E),typeof L!="function"&&(l0===null?l0=new Set([this]):l0.add(this));var be=E.stack;this.componentDidCatch(E.value,{componentStack:be!==null?be:""})})}function Kde(A,m,x,E,L){if(x.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){if(m=x.alternate,m!==null&&Wh(m,x,L,!0),x=cu.current,x!==null){switch(x.tag){case 13:return pA===null?wB():x.alternate===null&&ws===0&&(ws=3),x.flags&=-257,x.flags|=65536,x.lanes=L,E===we?x.flags|=16384:(m=x.updateQueue,m===null?x.updateQueue=new Set([E]):m.add(E),CB(A,E,L)),!1;case 22:return x.flags|=65536,E===we?x.flags|=16384:(m=x.updateQueue,m===null?(m={transitions:null,markerInstances:null,retryQueue:new Set([E])},x.updateQueue=m):(x=m.retryQueue,x===null?m.retryQueue=new Set([E]):x.add(E)),CB(A,E,L)),!1}throw Error(n(435,x.tag))}return CB(A,E,L),wB(),!1}if(Qn)return m=cu.current,m!==null?((m.flags&65536)===0&&(m.flags|=256),m.flags|=65536,m.lanes=L,E!==K1&&(A=Error(n(422),{cause:E}),qh(hn(A,x)))):(E!==K1&&(m=Error(n(423),{cause:E}),qh(hn(m,x))),A=A.current.alternate,A.flags|=65536,L&=-L,A.lanes|=L,E=hn(E,x),L=Jk(A.stateNode,E,L),nr(A,L),ws!==4&&(ws=2)),!1;var K=Error(n(520),{cause:E});if(K=hn(K,x),pb===null?pb=[K]:pb.push(K),ws!==4&&(ws=2),m===null)return!0;E=hn(E,x),x=m;do{switch(x.tag){case 3:return x.flags|=65536,A=L&-L,x.lanes|=A,A=Jk(x.stateNode,E,A),nr(x,A),!1;case 1:if(m=x.type,K=x.stateNode,(x.flags&128)===0&&(typeof m.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(l0===null||!l0.has(K))))return x.flags|=65536,L&=-L,x.lanes|=L,L=CM(L),_M(L,A,x,E),nr(x,L),!1}x=x.return}while(x!==null);return!1}var SM=Error(n(461)),Ri=!1;function io(A,m,x,E){m.child=A===null?pM(m,null,x,E):Gg(m,A.child,x,E)}function NM(A,m,x,E,L){x=x.render;var K=m.ref;if("ref"in E){var le={};for(var be in E)be!=="ref"&&(le[be]=E[be])}else le=E;return ou(m),E=fc(A,m,x,le,K,L),be=Ta(),A!==null&&!Ri?(Km(A,m,L),Bf(A,m,L)):(Qn&&be&&Vm(m),m.flags|=1,io(A,m,E,L),m.child)}function kM(A,m,x,E,L){if(A===null){var K=x.type;return typeof K=="function"&&!Gh(K)&&K.defaultProps===void 0&&x.compare===null?(m.tag=15,m.type=K,BM(A,m,K,E,L)):(A=xf(x.type,null,E,m,m.mode,L),A.ref=m.ref,A.return=m,m.child=A)}if(K=A.child,!iB(A,L)){var le=K.memoizedProps;if(x=x.compare,x=x!==null?x:Zd,x(le,E)&&A.ref===m.ref)return Bf(A,m,L)}return m.flags|=1,A=nu(K,E),A.ref=m.ref,A.return=m,m.child=A}function BM(A,m,x,E,L){if(A!==null){var K=A.memoizedProps;if(Zd(K,E)&&A.ref===m.ref)if(Ri=!1,m.pendingProps=E=K,iB(A,L))(A.flags&131072)!==0&&(Ri=!0);else return m.lanes=A.lanes,Bf(A,m,L)}return Zk(A,m,x,E,L)}function TM(A,m,x){var E=m.pendingProps,L=E.children,K=A!==null?A.memoizedState:null;if(E.mode==="hidden"){if((m.flags&128)!==0){if(E=K!==null?K.baseLanes|x:x,A!==null){for(L=m.child=A.child,K=0;L!==null;)K=K|L.lanes|L.childLanes,L=L.sibling;m.childLanes=K&~E}else m.childLanes=0,m.child=null;return jM(A,m,E,x)}if((x&536870912)!==0)m.memoizedState={baseLanes:0,cachePool:null},A!==null&&ae(m,K!==null?K.cachePool:null),K!==null?aa(m,K):Kn(),gM(m);else return m.lanes=m.childLanes=536870912,jM(A,m,K!==null?K.baseLanes|x:x,x)}else K!==null?(ae(m,K.cachePool),aa(m,K),r0(),m.memoizedState=null):(A!==null&&ae(m,null),Kn(),r0());return io(A,m,L,x),m.child}function jM(A,m,x,E){var L=Z();return L=L===null?null:{parent:Rs._currentValue,pool:L},m.memoizedState={baseLanes:x,cachePool:L},A!==null&&ae(m,null),Kn(),gM(m),A!==null&&Wh(A,m,E,!0),null}function EE(A,m){var x=m.ref;if(x===null)A!==null&&A.ref!==null&&(m.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(n(284));(A===null||A.ref!==x)&&(m.flags|=4194816)}}function Zk(A,m,x,E,L){return ou(m),x=fc(A,m,x,E,void 0,L),E=Ta(),A!==null&&!Ri?(Km(A,m,L),Bf(A,m,L)):(Qn&&E&&Vm(m),m.flags|=1,io(A,m,x,L),m.child)}function IM(A,m,x,E,L,K){return ou(m),m.updateQueue=null,x=Cf(m,E,x,L),AA(A),E=Ta(),A!==null&&!Ri?(Km(A,m,K),Bf(A,m,K)):(Qn&&E&&Vm(m),m.flags|=1,io(A,m,x,K),m.child)}function FM(A,m,x,E,L){if(ou(m),m.stateNode===null){var K=ri,le=x.contextType;typeof le=="object"&&le!==null&&(K=Ps(le)),K=new x(E,K),m.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,K.updater=Yk,m.stateNode=K,K._reactInternals=m,K=m.stateNode,K.props=E,K.state=m.memoizedState,K.refs={},Ue(m),le=x.contextType,K.context=typeof le=="object"&&le!==null?Ps(le):ri,K.state=m.memoizedState,le=x.getDerivedStateFromProps,typeof le=="function"&&(Xk(m,x,le,E),K.state=m.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(le=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),le!==K.state&&Yk.enqueueReplaceState(K,K.state,null),er(m,E,K,L),vr(),K.state=m.memoizedState),typeof K.componentDidMount=="function"&&(m.flags|=4194308),E=!0}else if(A===null){K=m.stateNode;var be=m.memoizedProps,Pe=np(x,be);K.props=Pe;var it=K.context,_t=x.contextType;le=ri,typeof _t=="object"&&_t!==null&&(le=Ps(_t));var Ft=x.getDerivedStateFromProps;_t=typeof Ft=="function"||typeof K.getSnapshotBeforeUpdate=="function",be=m.pendingProps!==be,_t||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(be||it!==le)&&xM(m,K,E,le),ht=!1;var At=m.memoizedState;K.state=At,er(m,E,K,L),vr(),it=m.memoizedState,be||At!==it||ht?(typeof Ft=="function"&&(Xk(m,x,Ft,E),it=m.memoizedState),(Pe=ht||vM(m,x,Pe,E,At,it,le))?(_t||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(m.flags|=4194308)):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=E,m.memoizedState=it),K.props=E,K.state=it,K.context=le,E=Pe):(typeof K.componentDidMount=="function"&&(m.flags|=4194308),E=!1)}else{K=m.stateNode,Ve(A,m),le=m.memoizedProps,_t=np(x,le),K.props=_t,Ft=m.pendingProps,At=K.context,it=x.contextType,Pe=ri,typeof it=="object"&&it!==null&&(Pe=Ps(it)),be=x.getDerivedStateFromProps,(it=typeof be=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(le!==Ft||At!==Pe)&&xM(m,K,E,Pe),ht=!1,At=m.memoizedState,K.state=At,er(m,E,K,L),vr();var ft=m.memoizedState;le!==Ft||At!==ft||ht||A!==null&&A.dependencies!==null&&Rg(A.dependencies)?(typeof be=="function"&&(Xk(m,x,be,E),ft=m.memoizedState),(_t=ht||vM(m,x,_t,E,At,ft,Pe)||A!==null&&A.dependencies!==null&&Rg(A.dependencies))?(it||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(E,ft,Pe),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(E,ft,Pe)),typeof K.componentDidUpdate=="function"&&(m.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof K.componentDidUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),m.memoizedProps=E,m.memoizedState=ft),K.props=E,K.state=ft,K.context=Pe,E=_t):(typeof K.componentDidUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&At===A.memoizedState||(m.flags|=1024),E=!1)}return K=E,EE(A,m),E=(m.flags&128)!==0,K||E?(K=m.stateNode,x=E&&typeof x.getDerivedStateFromError!="function"?null:K.render(),m.flags|=1,A!==null&&E?(m.child=Gg(m,A.child,null,L),m.child=Gg(m,null,x,L)):io(A,m,x,L),m.memoizedState=K.state,A=m.child):A=Bf(A,m,L),A}function OM(A,m,x,E){return ll(),m.flags|=256,io(A,m,x,E),m.child}var eB={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tB(A){return{baseLanes:A,cachePool:ue()}}function rB(A,m,x){return A=A!==null?A.childLanes&~x:0,m&&(A|=uu),A}function DM(A,m,x){var E=m.pendingProps,L=!1,K=(m.flags&128)!==0,le;if((le=K)||(le=A!==null&&A.memoizedState===null?!1:(wi.current&2)!==0),le&&(L=!0,m.flags&=-129),le=(m.flags&32)!==0,m.flags&=-33,A===null){if(Qn){if(L?t0(m):r0(),Qn){var be=qa,Pe;if(Pe=be){e:{for(Pe=be,be=au;Pe.nodeType!==8;){if(!be){be=null;break e}if(Pe=ud(Pe.nextSibling),Pe===null){be=null;break e}}be=Pe}be!==null?(m.memoizedState={dehydrated:be,treeContext:bf!==null?{id:ed,overflow:td}:null,retryLane:536870912,hydrationErrors:null},Pe=Pi(18,null,null,0),Pe.stateNode=be,Pe.return=m,m.child=Pe,Ds=m,qa=null,Pe=!0):Pe=!1}Pe||wf(m)}if(be=m.memoizedState,be!==null&&(be=be.dehydrated,be!==null))return MB(be)?m.lanes=32:m.lanes=536870912,null;kf(m)}return be=E.children,E=E.fallback,L?(r0(),L=m.mode,be=CE({mode:"hidden",children:be},L),E=Ju(E,L,x,null),be.return=m,E.return=m,be.sibling=E,m.child=be,L=m.child,L.memoizedState=tB(x),L.childLanes=rB(A,le,x),m.memoizedState=eB,E):(t0(m),nB(m,be))}if(Pe=A.memoizedState,Pe!==null&&(be=Pe.dehydrated,be!==null)){if(K)m.flags&256?(t0(m),m.flags&=-257,m=aB(A,m,x)):m.memoizedState!==null?(r0(),m.child=A.child,m.flags|=128,m=null):(r0(),L=E.fallback,be=m.mode,E=CE({mode:"visible",children:E.children},be),L=Ju(L,be,x,null),L.flags|=2,E.return=m,L.return=m,E.sibling=L,m.child=E,Gg(m,A.child,null,x),E=m.child,E.memoizedState=tB(x),E.childLanes=rB(A,le,x),m.memoizedState=eB,m=L);else if(t0(m),MB(be)){if(le=be.nextSibling&&be.nextSibling.dataset,le)var it=le.dgst;le=it,E=Error(n(419)),E.stack="",E.digest=le,qh({value:E,source:null,stack:null}),m=aB(A,m,x)}else if(Ri||Wh(A,m,x,!1),le=(x&A.childLanes)!==0,Ri||le){if(le=ja,le!==null&&(E=x&-x,E=(E&42)!==0?1:Lr(E),E=(E&(le.suspendedLanes|x))!==0?0:E,E!==0&&E!==Pe.retryLane))throw Pe.retryLane=E,Yu(A,E),xc(le,A,E),SM;be.data==="$?"||wB(),m=aB(A,m,x)}else be.data==="$?"?(m.flags|=192,m.child=A.child,m=null):(A=Pe.treeContext,qa=ud(be.nextSibling),Ds=m,Qn=!0,cA=null,au=!1,A!==null&&(Dl[ol++]=ed,Dl[ol++]=td,Dl[ol++]=bf,ed=A.id,td=A.overflow,bf=m),m=nB(m,E.children),m.flags|=4096);return m}return L?(r0(),L=E.fallback,be=m.mode,Pe=A.child,it=Pe.sibling,E=nu(Pe,{mode:"hidden",children:E.children}),E.subtreeFlags=Pe.subtreeFlags&65011712,it!==null?L=nu(it,L):(L=Ju(L,be,x,null),L.flags|=2),L.return=m,E.return=m,E.sibling=L,m.child=E,E=L,L=m.child,be=A.child.memoizedState,be===null?be=tB(x):(Pe=be.cachePool,Pe!==null?(it=Rs._currentValue,Pe=Pe.parent!==it?{parent:it,pool:it}:Pe):Pe=ue(),be={baseLanes:be.baseLanes|x,cachePool:Pe}),L.memoizedState=be,L.childLanes=rB(A,le,x),m.memoizedState=eB,E):(t0(m),x=A.child,A=x.sibling,x=nu(x,{mode:"visible",children:E.children}),x.return=m,x.sibling=null,A!==null&&(le=m.deletions,le===null?(m.deletions=[A],m.flags|=16):le.push(A)),m.child=x,m.memoizedState=null,x)}function nB(A,m){return m=CE({mode:"visible",children:m},A.mode),m.return=A,A.child=m}function CE(A,m){return A=Pi(22,A,null,m),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function aB(A,m,x){return Gg(m,A.child,null,x),A=nB(m,m.pendingProps.children),A.flags|=2,m.memoizedState=null,A}function PM(A,m,x){A.lanes|=m;var E=A.alternate;E!==null&&(E.lanes|=m),Dg(A.return,m,x)}function sB(A,m,x,E,L){var K=A.memoizedState;K===null?A.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:L}:(K.isBackwards=m,K.rendering=null,K.renderingStartTime=0,K.last=E,K.tail=x,K.tailMode=L)}function RM(A,m,x){var E=m.pendingProps,L=E.revealOrder,K=E.tail;if(io(A,m,E.children,x),E=wi.current,(E&2)!==0)E=E&1|2,m.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=m.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&PM(A,x,m);else if(A.tag===19)PM(A,x,m);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break e;for(;A.sibling===null;){if(A.return===null||A.return===m)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}E&=1}switch(q(wi,E),L){case"forwards":for(x=m.child,L=null;x!==null;)A=x.alternate,A!==null&&bE(A)===null&&(L=x),x=x.sibling;x=L,x===null?(L=m.child,m.child=null):(L=x.sibling,x.sibling=null),sB(m,!1,L,x,K);break;case"backwards":for(x=null,L=m.child,m.child=null;L!==null;){if(A=L.alternate,A!==null&&bE(A)===null){m.child=L;break}A=L.sibling,L.sibling=x,x=L,L=A}sB(m,!0,x,null,K);break;case"together":sB(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Bf(A,m,x){if(A!==null&&(m.dependencies=A.dependencies),o0|=m.lanes,(x&m.childLanes)===0)if(A!==null){if(Wh(A,m,x,!1),(x&m.childLanes)===0)return null}else return null;if(A!==null&&m.child!==A.child)throw Error(n(153));if(m.child!==null){for(A=m.child,x=nu(A,A.pendingProps),m.child=x,x.return=m;A.sibling!==null;)A=A.sibling,x=x.sibling=nu(A,A.pendingProps),x.return=m;x.sibling=null}return m.child}function iB(A,m){return(A.lanes&m)!==0?!0:(A=A.dependencies,!!(A!==null&&Rg(A)))}function qde(A,m,x){switch(m.tag){case 3:oe(m,m.stateNode.containerInfo),uA(m,Rs,A.memoizedState.cache),ll();break;case 27:case 5:pe(m);break;case 4:oe(m,m.stateNode.containerInfo);break;case 10:uA(m,m.type,m.memoizedProps.value);break;case 13:var E=m.memoizedState;if(E!==null)return E.dehydrated!==null?(t0(m),m.flags|=128,null):(x&m.child.childLanes)!==0?DM(A,m,x):(t0(m),A=Bf(A,m,x),A!==null?A.sibling:null);t0(m);break;case 19:var L=(A.flags&128)!==0;if(E=(x&m.childLanes)!==0,E||(Wh(A,m,x,!1),E=(x&m.childLanes)!==0),L){if(E)return RM(A,m,x);m.flags|=128}if(L=m.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),q(wi,wi.current),E)break;return null;case 22:case 23:return m.lanes=0,TM(A,m,x);case 24:uA(m,Rs,A.memoizedState.cache)}return Bf(A,m,x)}function LM(A,m,x){if(A!==null)if(A.memoizedProps!==m.pendingProps)Ri=!0;else{if(!iB(A,x)&&(m.flags&128)===0)return Ri=!1,qde(A,m,x);Ri=(A.flags&131072)!==0}else Ri=!1,Qn&&(m.flags&1048576)!==0&&eE(m,Og,m.index);switch(m.lanes=0,m.tag){case 16:e:{A=m.pendingProps;var E=m.elementType,L=E._init;if(E=L(E._payload),m.type=E,typeof E=="function")Gh(E)?(A=np(E,A),m.tag=1,m=FM(null,m,E,A,x)):(m.tag=0,m=Zk(null,m,E,A,x));else{if(E!=null){if(L=E.$$typeof,L===T){m.tag=11,m=NM(null,m,E,A,x);break e}else if(L===w){m.tag=14,m=kM(null,m,E,A,x);break e}}throw m=P(E)||E,Error(n(306,m,""))}}return m;case 0:return Zk(A,m,m.type,m.pendingProps,x);case 1:return E=m.type,L=np(E,m.pendingProps),FM(A,m,E,L,x);case 3:e:{if(oe(m,m.stateNode.containerInfo),A===null)throw Error(n(387));E=m.pendingProps;var K=m.memoizedState;L=K.element,Ve(A,m),er(m,E,null,x);var le=m.memoizedState;if(E=le.cache,uA(m,Rs,E),E!==K.cache&&Pg(m,[Rs],x,!0),vr(),E=le.element,K.isDehydrated)if(K={element:E,isDehydrated:!1,cache:le.cache},m.updateQueue.baseState=K,m.memoizedState=K,m.flags&256){m=OM(A,m,E,x);break e}else if(E!==L){L=hn(Error(n(424)),m),qh(L),m=OM(A,m,E,x);break e}else{switch(A=m.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(qa=ud(A.firstChild),Ds=m,Qn=!0,cA=null,au=!0,x=pM(m,null,E,x),m.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(ll(),E===L){m=Bf(A,m,x);break e}io(A,m,E,x)}m=m.child}return m;case 26:return EE(A,m),A===null?(x=HU(m.type,null,m.pendingProps,null))?m.memoizedState=x:Qn||(x=m.type,A=m.pendingProps,E=LE(ie.current).createElement(x),E[rn]=m,E[en]=A,lo(E,x,A),$e(E),m.stateNode=E):m.memoizedState=HU(m.type,A.memoizedProps,m.pendingProps,A.memoizedState),null;case 27:return pe(m),A===null&&Qn&&(E=m.stateNode=MU(m.type,m.pendingProps,ie.current),Ds=m,au=!0,L=qa,d0(m.type)?(UB=L,qa=ud(E.firstChild)):qa=L),io(A,m,m.pendingProps.children,x),EE(A,m),A===null&&(m.flags|=4194304),m.child;case 5:return A===null&&Qn&&((L=E=qa)&&(E=wAe(E,m.type,m.pendingProps,au),E!==null?(m.stateNode=E,Ds=m,qa=ud(E.firstChild),au=!1,L=!0):L=!1),L||wf(m)),pe(m),L=m.type,K=m.pendingProps,le=A!==null?A.memoizedProps:null,E=K.children,PB(L,K)?E=null:le!==null&&PB(L,le)&&(m.flags|=32),m.memoizedState!==null&&(L=fc(A,m,fA,null,null,x),_b._currentValue=L),EE(A,m),io(A,m,E,x),m.child;case 6:return A===null&&Qn&&((A=x=qa)&&(x=EAe(x,m.pendingProps,au),x!==null?(m.stateNode=x,Ds=m,qa=null,A=!0):A=!1),A||wf(m)),null;case 13:return DM(A,m,x);case 4:return oe(m,m.stateNode.containerInfo),E=m.pendingProps,A===null?m.child=Gg(m,null,E,x):io(A,m,E,x),m.child;case 11:return NM(A,m,m.type,m.pendingProps,x);case 7:return io(A,m,m.pendingProps,x),m.child;case 8:return io(A,m,m.pendingProps.children,x),m.child;case 12:return io(A,m,m.pendingProps.children,x),m.child;case 10:return E=m.pendingProps,uA(m,m.type,E.value),io(A,m,E.children,x),m.child;case 9:return L=m.type._context,E=m.pendingProps.children,ou(m),L=Ps(L),E=E(L),m.flags|=1,io(A,m,E,x),m.child;case 14:return kM(A,m,m.type,m.pendingProps,x);case 15:return BM(A,m,m.type,m.pendingProps,x);case 19:return RM(A,m,x);case 31:return E=m.pendingProps,x=m.mode,E={mode:E.mode,children:E.children},A===null?(x=CE(E,x),x.ref=m.ref,m.child=x,x.return=m,m=x):(x=nu(A.child,E),x.ref=m.ref,m.child=x,x.return=m,m=x),m;case 22:return TM(A,m,x);case 24:return ou(m),E=Ps(Rs),A===null?(L=Z(),L===null&&(L=ja,K=q1(),L.pooledCache=K,K.refCount++,K!==null&&(L.pooledCacheLanes|=x),L=K),m.memoizedState={parent:E,cache:L},Ue(m),uA(m,Rs,L)):((A.lanes&x)!==0&&(Ve(A,m),er(m,null,null,x),vr()),L=A.memoizedState,K=m.memoizedState,L.parent!==E?(L={parent:E,cache:E},m.memoizedState=L,m.lanes===0&&(m.memoizedState=m.updateQueue.baseState=L),uA(m,Rs,E)):(E=K.cache,uA(m,Rs,E),E!==L.cache&&Pg(m,[Rs],x,!0))),io(A,m,m.pendingProps.children,x),m.child;case 29:throw m.pendingProps}throw Error(n(156,m.tag))}function Tf(A){A.flags|=4}function MM(A,m){if(m.type!=="stylesheet"||(m.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!KU(m)){if(m=cu.current,m!==null&&((Ln&4194048)===Ln?pA!==null:(Ln&62914560)!==Ln&&(Ln&536870912)===0||m!==pA))throw et=we,ge;A.flags|=8192}}function _E(A,m){m!==null&&(A.flags|=4),A.flags&16384&&(m=A.tag!==22?pt():536870912,A.lanes|=m,Xg|=m)}function ub(A,m){if(!Qn)switch(A.tailMode){case"hidden":m=A.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?A.tail=null:x.sibling=null;break;case"collapsed":x=A.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?m||A.tail===null?A.tail=null:A.tail.sibling=null:E.sibling=null}}function is(A){var m=A.alternate!==null&&A.alternate.child===A.child,x=0,E=0;if(m)for(var L=A.child;L!==null;)x|=L.lanes|L.childLanes,E|=L.subtreeFlags&65011712,E|=L.flags&65011712,L.return=A,L=L.sibling;else for(L=A.child;L!==null;)x|=L.lanes|L.childLanes,E|=L.subtreeFlags,E|=L.flags,L.return=A,L=L.sibling;return A.subtreeFlags|=E,A.childLanes=x,m}function Wde(A,m,x){var E=m.pendingProps;switch(zm(m),m.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(m),null;case 1:return is(m),null;case 3:return x=m.stateNode,E=null,A!==null&&(E=A.memoizedState.cache),m.memoizedState.cache!==E&&(m.flags|=2048),iu(Rs),ce(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(A===null||A.child===null)&&(ao(m)?Tf(m):A===null||A.memoizedState.isDehydrated&&(m.flags&256)===0||(m.flags|=1024,rE())),is(m),null;case 26:return x=m.memoizedState,A===null?(Tf(m),x!==null?(is(m),MM(m,x)):(is(m),m.flags&=-16777217)):x?x!==A.memoizedState?(Tf(m),is(m),MM(m,x)):(is(m),m.flags&=-16777217):(A.memoizedProps!==E&&Tf(m),is(m),m.flags&=-16777217),null;case 27:Ie(m),x=ie.current;var L=m.type;if(A!==null&&m.stateNode!=null)A.memoizedProps!==E&&Tf(m);else{if(!E){if(m.stateNode===null)throw Error(n(166));return is(m),null}A=J.current,ao(m)?tE(m):(A=MU(L,E,x),m.stateNode=A,Tf(m))}return is(m),null;case 5:if(Ie(m),x=m.type,A!==null&&m.stateNode!=null)A.memoizedProps!==E&&Tf(m);else{if(!E){if(m.stateNode===null)throw Error(n(166));return is(m),null}if(A=J.current,ao(m))tE(m);else{switch(L=LE(ie.current),A){case 1:A=L.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:A=L.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":A=L.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":A=L.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":A=L.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof E.is=="string"?L.createElement("select",{is:E.is}):L.createElement("select"),E.multiple?A.multiple=!0:E.size&&(A.size=E.size);break;default:A=typeof E.is=="string"?L.createElement(x,{is:E.is}):L.createElement(x)}}A[rn]=m,A[en]=E;e:for(L=m.child;L!==null;){if(L.tag===5||L.tag===6)A.appendChild(L.stateNode);else if(L.tag!==4&&L.tag!==27&&L.child!==null){L.child.return=L,L=L.child;continue}if(L===m)break e;for(;L.sibling===null;){if(L.return===null||L.return===m)break e;L=L.return}L.sibling.return=L.return,L=L.sibling}m.stateNode=A;e:switch(lo(A,x,E),x){case"button":case"input":case"select":case"textarea":A=!!E.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&Tf(m)}}return is(m),m.flags&=-16777217,null;case 6:if(A&&m.stateNode!=null)A.memoizedProps!==E&&Tf(m);else{if(typeof E!="string"&&m.stateNode===null)throw Error(n(166));if(A=ie.current,ao(m)){if(A=m.stateNode,x=m.memoizedProps,E=null,L=Ds,L!==null)switch(L.tag){case 27:case 5:E=L.memoizedProps}A[rn]=m,A=!!(A.nodeValue===x||E!==null&&E.suppressHydrationWarning===!0||IU(A.nodeValue,x)),A||wf(m)}else A=LE(A).createTextNode(E),A[rn]=m,m.stateNode=A}return is(m),null;case 13:if(E=m.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(L=ao(m),E!==null&&E.dehydrated!==null){if(A===null){if(!L)throw Error(n(318));if(L=m.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(n(317));L[rn]=m}else ll(),(m.flags&128)===0&&(m.memoizedState=null),m.flags|=4;is(m),L=!1}else L=rE(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=L),L=!0;if(!L)return m.flags&256?(kf(m),m):(kf(m),null)}if(kf(m),(m.flags&128)!==0)return m.lanes=x,m;if(x=E!==null,A=A!==null&&A.memoizedState!==null,x){E=m.child,L=null,E.alternate!==null&&E.alternate.memoizedState!==null&&E.alternate.memoizedState.cachePool!==null&&(L=E.alternate.memoizedState.cachePool.pool);var K=null;E.memoizedState!==null&&E.memoizedState.cachePool!==null&&(K=E.memoizedState.cachePool.pool),K!==L&&(E.flags|=2048)}return x!==A&&x&&(m.child.flags|=8192),_E(m,m.updateQueue),is(m),null;case 4:return ce(),A===null&&jB(m.stateNode.containerInfo),is(m),null;case 10:return iu(m.type),is(m),null;case 19:if(R(wi),L=m.memoizedState,L===null)return is(m),null;if(E=(m.flags&128)!==0,K=L.rendering,K===null)if(E)ub(L,!1);else{if(ws!==0||A!==null&&(A.flags&128)!==0)for(A=m.child;A!==null;){if(K=bE(A),K!==null){for(m.flags|=128,ub(L,!1),A=K.updateQueue,m.updateQueue=A,_E(m,A),m.subtreeFlags=0,A=x,x=m.child;x!==null;)Qm(x,A),x=x.sibling;return q(wi,wi.current&1|2),m.child}A=A.sibling}L.tail!==null&&je()>kE&&(m.flags|=128,E=!0,ub(L,!1),m.lanes=4194304)}else{if(!E)if(A=bE(K),A!==null){if(m.flags|=128,E=!0,A=A.updateQueue,m.updateQueue=A,_E(m,A),ub(L,!0),L.tail===null&&L.tailMode==="hidden"&&!K.alternate&&!Qn)return is(m),null}else 2*je()-L.renderingStartTime>kE&&x!==536870912&&(m.flags|=128,E=!0,ub(L,!1),m.lanes=4194304);L.isBackwards?(K.sibling=m.child,m.child=K):(A=L.last,A!==null?A.sibling=K:m.child=K,L.last=K)}return L.tail!==null?(m=L.tail,L.rendering=m,L.tail=m.sibling,L.renderingStartTime=je(),m.sibling=null,A=wi.current,q(wi,E?A&1|2:A&1),m):(is(m),null);case 22:case 23:return kf(m),qr(),E=m.memoizedState!==null,A!==null?A.memoizedState!==null!==E&&(m.flags|=8192):E&&(m.flags|=8192),E?(x&536870912)!==0&&(m.flags&128)===0&&(is(m),m.subtreeFlags&6&&(m.flags|=8192)):is(m),x=m.updateQueue,x!==null&&_E(m,x.retryQueue),x=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(x=A.memoizedState.cachePool.pool),E=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048),A!==null&&R(Q),null;case 24:return x=null,A!==null&&(x=A.memoizedState.cache),m.memoizedState.cache!==x&&(m.flags|=2048),iu(Rs),is(m),null;case 25:return null;case 30:return null}throw Error(n(156,m.tag))}function Xde(A,m){switch(zm(m),m.tag){case 1:return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 3:return iu(Rs),ce(),A=m.flags,(A&65536)!==0&&(A&128)===0?(m.flags=A&-65537|128,m):null;case 26:case 27:case 5:return Ie(m),null;case 13:if(kf(m),A=m.memoizedState,A!==null&&A.dehydrated!==null){if(m.alternate===null)throw Error(n(340));ll()}return A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 19:return R(wi),null;case 4:return ce(),null;case 10:return iu(m.type),null;case 22:case 23:return kf(m),qr(),A!==null&&R(Q),A=m.flags,A&65536?(m.flags=A&-65537|128,m):null;case 24:return iu(Rs),null;case 25:return null;default:return null}}function UM(A,m){switch(zm(m),m.tag){case 3:iu(Rs),ce();break;case 26:case 27:case 5:Ie(m);break;case 4:ce();break;case 13:kf(m);break;case 19:R(wi);break;case 10:iu(m.type);break;case 22:case 23:kf(m),qr(),A!==null&&R(Q);break;case 24:iu(Rs)}}function db(A,m){try{var x=m.updateQueue,E=x!==null?x.lastEffect:null;if(E!==null){var L=E.next;x=L;do{if((x.tag&A)===A){E=void 0;var K=x.create,le=x.inst;E=K(),le.destroy=E}x=x.next}while(x!==L)}}catch(be){_a(m,m.return,be)}}function n0(A,m,x){try{var E=m.updateQueue,L=E!==null?E.lastEffect:null;if(L!==null){var K=L.next;E=K;do{if((E.tag&A)===A){var le=E.inst,be=le.destroy;if(be!==void 0){le.destroy=void 0,L=m;var Pe=x,it=be;try{it()}catch(_t){_a(L,Pe,_t)}}}E=E.next}while(E!==K)}}catch(_t){_a(m,m.return,_t)}}function QM(A){var m=A.updateQueue;if(m!==null){var x=A.stateNode;try{Gn(m,x)}catch(E){_a(A,A.return,E)}}}function HM(A,m,x){x.props=np(A.type,A.memoizedProps),x.state=A.memoizedState;try{x.componentWillUnmount()}catch(E){_a(A,m,E)}}function Ab(A,m){try{var x=A.ref;if(x!==null){switch(A.tag){case 26:case 27:case 5:var E=A.stateNode;break;case 30:E=A.stateNode;break;default:E=A.stateNode}typeof x=="function"?A.refCleanup=x(E):x.current=E}}catch(L){_a(A,m,L)}}function gA(A,m){var x=A.ref,E=A.refCleanup;if(x!==null)if(typeof E=="function")try{E()}catch(L){_a(A,m,L)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(L){_a(A,m,L)}else x.current=null}function VM(A){var m=A.type,x=A.memoizedProps,E=A.stateNode;try{e:switch(m){case"button":case"input":case"select":case"textarea":x.autoFocus&&E.focus();break e;case"img":x.src?E.src=x.src:x.srcSet&&(E.srcset=x.srcSet)}}catch(L){_a(A,A.return,L)}}function oB(A,m,x){try{var E=A.stateNode;gAe(E,A.type,x,m),E[en]=m}catch(L){_a(A,A.return,L)}}function zM(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&d0(A.type)||A.tag===4}function lB(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||zM(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&d0(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function cB(A,m,x){var E=A.tag;if(E===5||E===6)A=A.stateNode,m?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(A,m):(m=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,m.appendChild(A),x=x._reactRootContainer,x!=null||m.onclick!==null||(m.onclick=RE));else if(E!==4&&(E===27&&d0(A.type)&&(x=A.stateNode,m=null),A=A.child,A!==null))for(cB(A,m,x),A=A.sibling;A!==null;)cB(A,m,x),A=A.sibling}function SE(A,m,x){var E=A.tag;if(E===5||E===6)A=A.stateNode,m?x.insertBefore(A,m):x.appendChild(A);else if(E!==4&&(E===27&&d0(A.type)&&(x=A.stateNode),A=A.child,A!==null))for(SE(A,m,x),A=A.sibling;A!==null;)SE(A,m,x),A=A.sibling}function $M(A){var m=A.stateNode,x=A.memoizedProps;try{for(var E=A.type,L=m.attributes;L.length;)m.removeAttributeNode(L[0]);lo(m,E,x),m[rn]=A,m[en]=x}catch(K){_a(A,A.return,K)}}var jf=!1,Ms=!1,uB=!1,GM=typeof WeakSet=="function"?WeakSet:Set,Li=null;function Yde(A,m){if(A=A.containerInfo,OB=zE,A=no(A),yi(A)){if("selectionStart"in A)var x={start:A.selectionStart,end:A.selectionEnd};else e:{x=(x=A.ownerDocument)&&x.defaultView||window;var E=x.getSelection&&x.getSelection();if(E&&E.rangeCount!==0){x=E.anchorNode;var L=E.anchorOffset,K=E.focusNode;E=E.focusOffset;try{x.nodeType,K.nodeType}catch{x=null;break e}var le=0,be=-1,Pe=-1,it=0,_t=0,Ft=A,At=null;t:for(;;){for(var ft;Ft!==x||L!==0&&Ft.nodeType!==3||(be=le+L),Ft!==K||E!==0&&Ft.nodeType!==3||(Pe=le+E),Ft.nodeType===3&&(le+=Ft.nodeValue.length),(ft=Ft.firstChild)!==null;)At=Ft,Ft=ft;for(;;){if(Ft===A)break t;if(At===x&&++it===L&&(be=le),At===K&&++_t===E&&(Pe=le),(ft=Ft.nextSibling)!==null)break;Ft=At,At=Ft.parentNode}Ft=ft}x=be===-1||Pe===-1?null:{start:be,end:Pe}}else x=null}x=x||{start:0,end:0}}else x=null;for(DB={focusedElem:A,selectionRange:x},zE=!1,Li=m;Li!==null;)if(m=Li,A=m.child,(m.subtreeFlags&1024)!==0&&A!==null)A.return=m,Li=A;else for(;Li!==null;){switch(m=Li,K=m.alternate,A=m.flags,m.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&K!==null){A=void 0,x=m,L=K.memoizedProps,K=K.memoizedState,E=x.stateNode;try{var $r=np(x.type,L,x.elementType===x.type);A=E.getSnapshotBeforeUpdate($r,K),E.__reactInternalSnapshotBeforeUpdate=A}catch(Ir){_a(x,x.return,Ir)}}break;case 3:if((A&1024)!==0){if(A=m.stateNode.containerInfo,x=A.nodeType,x===9)LB(A);else if(x===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":LB(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=m.sibling,A!==null){A.return=m.return,Li=A;break}Li=m.return}}function KM(A,m,x){var E=x.flags;switch(x.tag){case 0:case 11:case 15:a0(A,x),E&4&&db(5,x);break;case 1:if(a0(A,x),E&4)if(A=x.stateNode,m===null)try{A.componentDidMount()}catch(le){_a(x,x.return,le)}else{var L=np(x.type,m.memoizedProps);m=m.memoizedState;try{A.componentDidUpdate(L,m,A.__reactInternalSnapshotBeforeUpdate)}catch(le){_a(x,x.return,le)}}E&64&&QM(x),E&512&&Ab(x,x.return);break;case 3:if(a0(A,x),E&64&&(A=x.updateQueue,A!==null)){if(m=null,x.child!==null)switch(x.child.tag){case 27:case 5:m=x.child.stateNode;break;case 1:m=x.child.stateNode}try{Gn(A,m)}catch(le){_a(x,x.return,le)}}break;case 27:m===null&&E&4&&$M(x);case 26:case 5:a0(A,x),m===null&&E&4&&VM(x),E&512&&Ab(x,x.return);break;case 12:a0(A,x);break;case 13:a0(A,x),E&4&&XM(A,x),E&64&&(A=x.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(x=iAe.bind(null,x),CAe(A,x))));break;case 22:if(E=x.memoizedState!==null||jf,!E){m=m!==null&&m.memoizedState!==null||Ms,L=jf;var K=Ms;jf=E,(Ms=m)&&!K?s0(A,x,(x.subtreeFlags&8772)!==0):a0(A,x),jf=L,Ms=K}break;case 30:break;default:a0(A,x)}}function qM(A){var m=A.alternate;m!==null&&(A.alternate=null,qM(m)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(m=A.stateNode,m!==null&&Ce(m)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var Wa=null,Rl=!1;function If(A,m,x){for(x=x.child;x!==null;)WM(A,m,x),x=x.sibling}function WM(A,m,x){if(Tt&&typeof Tt.onCommitFiberUnmount=="function")try{Tt.onCommitFiberUnmount(mt,x)}catch{}switch(x.tag){case 26:Ms||gA(x,m),If(A,m,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Ms||gA(x,m);var E=Wa,L=Rl;d0(x.type)&&(Wa=x.stateNode,Rl=!1),If(A,m,x),yb(x.stateNode),Wa=E,Rl=L;break;case 5:Ms||gA(x,m);case 6:if(E=Wa,L=Rl,Wa=null,If(A,m,x),Wa=E,Rl=L,Wa!==null)if(Rl)try{(Wa.nodeType===9?Wa.body:Wa.nodeName==="HTML"?Wa.ownerDocument.body:Wa).removeChild(x.stateNode)}catch(K){_a(x,m,K)}else try{Wa.removeChild(x.stateNode)}catch(K){_a(x,m,K)}break;case 18:Wa!==null&&(Rl?(A=Wa,RU(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,x.stateNode),Bb(A)):RU(Wa,x.stateNode));break;case 4:E=Wa,L=Rl,Wa=x.stateNode.containerInfo,Rl=!0,If(A,m,x),Wa=E,Rl=L;break;case 0:case 11:case 14:case 15:Ms||n0(2,x,m),Ms||n0(4,x,m),If(A,m,x);break;case 1:Ms||(gA(x,m),E=x.stateNode,typeof E.componentWillUnmount=="function"&&HM(x,m,E)),If(A,m,x);break;case 21:If(A,m,x);break;case 22:Ms=(E=Ms)||x.memoizedState!==null,If(A,m,x),Ms=E;break;default:If(A,m,x)}}function XM(A,m){if(m.memoizedState===null&&(A=m.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Bb(A)}catch(x){_a(m,m.return,x)}}function Jde(A){switch(A.tag){case 13:case 19:var m=A.stateNode;return m===null&&(m=A.stateNode=new GM),m;case 22:return A=A.stateNode,m=A._retryCache,m===null&&(m=A._retryCache=new GM),m;default:throw Error(n(435,A.tag))}}function dB(A,m){var x=Jde(A);m.forEach(function(E){var L=oAe.bind(null,A,E);x.has(E)||(x.add(E),E.then(L,L))})}function mc(A,m){var x=m.deletions;if(x!==null)for(var E=0;E<x.length;E++){var L=x[E],K=A,le=m,be=le;e:for(;be!==null;){switch(be.tag){case 27:if(d0(be.type)){Wa=be.stateNode,Rl=!1;break e}break;case 5:Wa=be.stateNode,Rl=!1;break e;case 3:case 4:Wa=be.stateNode.containerInfo,Rl=!0;break e}be=be.return}if(Wa===null)throw Error(n(160));WM(K,le,L),Wa=null,Rl=!1,K=L.alternate,K!==null&&(K.return=null),L.return=null}if(m.subtreeFlags&13878)for(m=m.child;m!==null;)YM(m,A),m=m.sibling}var cd=null;function YM(A,m){var x=A.alternate,E=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:mc(m,A),pc(A),E&4&&(n0(3,A,A.return),db(3,A),n0(5,A,A.return));break;case 1:mc(m,A),pc(A),E&512&&(Ms||x===null||gA(x,x.return)),E&64&&jf&&(A=A.updateQueue,A!==null&&(E=A.callbacks,E!==null&&(x=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=x===null?E:x.concat(E))));break;case 26:var L=cd;if(mc(m,A),pc(A),E&512&&(Ms||x===null||gA(x,x.return)),E&4){var K=x!==null?x.memoizedState:null;if(E=A.memoizedState,x===null)if(E===null)if(A.stateNode===null){e:{E=A.type,x=A.memoizedProps,L=L.ownerDocument||L;t:switch(E){case"title":K=L.getElementsByTagName("title")[0],(!K||K[Ee]||K[rn]||K.namespaceURI==="http://www.w3.org/2000/svg"||K.hasAttribute("itemprop"))&&(K=L.createElement(E),L.head.insertBefore(K,L.querySelector("head > title"))),lo(K,E,x),K[rn]=A,$e(K),E=K;break e;case"link":var le=$U("link","href",L).get(E+(x.href||""));if(le){for(var be=0;be<le.length;be++)if(K=le[be],K.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&K.getAttribute("rel")===(x.rel==null?null:x.rel)&&K.getAttribute("title")===(x.title==null?null:x.title)&&K.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){le.splice(be,1);break t}}K=L.createElement(E),lo(K,E,x),L.head.appendChild(K);break;case"meta":if(le=$U("meta","content",L).get(E+(x.content||""))){for(be=0;be<le.length;be++)if(K=le[be],K.getAttribute("content")===(x.content==null?null:""+x.content)&&K.getAttribute("name")===(x.name==null?null:x.name)&&K.getAttribute("property")===(x.property==null?null:x.property)&&K.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&K.getAttribute("charset")===(x.charSet==null?null:x.charSet)){le.splice(be,1);break t}}K=L.createElement(E),lo(K,E,x),L.head.appendChild(K);break;default:throw Error(n(468,E))}K[rn]=A,$e(K),E=K}A.stateNode=E}else GU(L,A.type,A.stateNode);else A.stateNode=zU(L,E,A.memoizedProps);else K!==E?(K===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):K.count--,E===null?GU(L,A.type,A.stateNode):zU(L,E,A.memoizedProps)):E===null&&A.stateNode!==null&&oB(A,A.memoizedProps,x.memoizedProps)}break;case 27:mc(m,A),pc(A),E&512&&(Ms||x===null||gA(x,x.return)),x!==null&&E&4&&oB(A,A.memoizedProps,x.memoizedProps);break;case 5:if(mc(m,A),pc(A),E&512&&(Ms||x===null||gA(x,x.return)),A.flags&32){L=A.stateNode;try{yo(L,"")}catch(ft){_a(A,A.return,ft)}}E&4&&A.stateNode!=null&&(L=A.memoizedProps,oB(A,L,x!==null?x.memoizedProps:L)),E&1024&&(uB=!0);break;case 6:if(mc(m,A),pc(A),E&4){if(A.stateNode===null)throw Error(n(162));E=A.memoizedProps,x=A.stateNode;try{x.nodeValue=E}catch(ft){_a(A,A.return,ft)}}break;case 3:if(QE=null,L=cd,cd=ME(m.containerInfo),mc(m,A),cd=L,pc(A),E&4&&x!==null&&x.memoizedState.isDehydrated)try{Bb(m.containerInfo)}catch(ft){_a(A,A.return,ft)}uB&&(uB=!1,JM(A));break;case 4:E=cd,cd=ME(A.stateNode.containerInfo),mc(m,A),pc(A),cd=E;break;case 12:mc(m,A),pc(A);break;case 13:mc(m,A),pc(A),A.child.flags&8192&&A.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(gB=je()),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,dB(A,E)));break;case 22:L=A.memoizedState!==null;var Pe=x!==null&&x.memoizedState!==null,it=jf,_t=Ms;if(jf=it||L,Ms=_t||Pe,mc(m,A),Ms=_t,jf=it,pc(A),E&8192)e:for(m=A.stateNode,m._visibility=L?m._visibility&-2:m._visibility|1,L&&(x===null||Pe||jf||Ms||ap(A)),x=null,m=A;;){if(m.tag===5||m.tag===26){if(x===null){Pe=x=m;try{if(K=Pe.stateNode,L)le=K.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{be=Pe.stateNode;var Ft=Pe.memoizedProps.style,At=Ft!=null&&Ft.hasOwnProperty("display")?Ft.display:null;be.style.display=At==null||typeof At=="boolean"?"":(""+At).trim()}}catch(ft){_a(Pe,Pe.return,ft)}}}else if(m.tag===6){if(x===null){Pe=m;try{Pe.stateNode.nodeValue=L?"":Pe.memoizedProps}catch(ft){_a(Pe,Pe.return,ft)}}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===A)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===A)break e;for(;m.sibling===null;){if(m.return===null||m.return===A)break e;x===m&&(x=null),m=m.return}x===m&&(x=null),m.sibling.return=m.return,m=m.sibling}E&4&&(E=A.updateQueue,E!==null&&(x=E.retryQueue,x!==null&&(E.retryQueue=null,dB(A,x))));break;case 19:mc(m,A),pc(A),E&4&&(E=A.updateQueue,E!==null&&(A.updateQueue=null,dB(A,E)));break;case 30:break;case 21:break;default:mc(m,A),pc(A)}}function pc(A){var m=A.flags;if(m&2){try{for(var x,E=A.return;E!==null;){if(zM(E)){x=E;break}E=E.return}if(x==null)throw Error(n(160));switch(x.tag){case 27:var L=x.stateNode,K=lB(A);SE(A,K,L);break;case 5:var le=x.stateNode;x.flags&32&&(yo(le,""),x.flags&=-33);var be=lB(A);SE(A,be,le);break;case 3:case 4:var Pe=x.stateNode.containerInfo,it=lB(A);cB(A,it,Pe);break;default:throw Error(n(161))}}catch(_t){_a(A,A.return,_t)}A.flags&=-3}m&4096&&(A.flags&=-4097)}function JM(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var m=A;JM(m),m.tag===5&&m.flags&1024&&m.stateNode.reset(),A=A.sibling}}function a0(A,m){if(m.subtreeFlags&8772)for(m=m.child;m!==null;)KM(A,m.alternate,m),m=m.sibling}function ap(A){for(A=A.child;A!==null;){var m=A;switch(m.tag){case 0:case 11:case 14:case 15:n0(4,m,m.return),ap(m);break;case 1:gA(m,m.return);var x=m.stateNode;typeof x.componentWillUnmount=="function"&&HM(m,m.return,x),ap(m);break;case 27:yb(m.stateNode);case 26:case 5:gA(m,m.return),ap(m);break;case 22:m.memoizedState===null&&ap(m);break;case 30:ap(m);break;default:ap(m)}A=A.sibling}}function s0(A,m,x){for(x=x&&(m.subtreeFlags&8772)!==0,m=m.child;m!==null;){var E=m.alternate,L=A,K=m,le=K.flags;switch(K.tag){case 0:case 11:case 15:s0(L,K,x),db(4,K);break;case 1:if(s0(L,K,x),E=K,L=E.stateNode,typeof L.componentDidMount=="function")try{L.componentDidMount()}catch(it){_a(E,E.return,it)}if(E=K,L=E.updateQueue,L!==null){var be=E.stateNode;try{var Pe=L.shared.hiddenCallbacks;if(Pe!==null)for(L.shared.hiddenCallbacks=null,L=0;L<Pe.length;L++)Pn(Pe[L],be)}catch(it){_a(E,E.return,it)}}x&&le&64&&QM(K),Ab(K,K.return);break;case 27:$M(K);case 26:case 5:s0(L,K,x),x&&E===null&&le&4&&VM(K),Ab(K,K.return);break;case 12:s0(L,K,x);break;case 13:s0(L,K,x),x&&le&4&&XM(L,K);break;case 22:K.memoizedState===null&&s0(L,K,x),Ab(K,K.return);break;case 30:break;default:s0(L,K,x)}m=m.sibling}}function AB(A,m){var x=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(x=A.memoizedState.cachePool.pool),A=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),A!==x&&(A!=null&&A.refCount++,x!=null&&$m(x))}function fB(A,m){A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&$m(A))}function vA(A,m,x,E){if(m.subtreeFlags&10256)for(m=m.child;m!==null;)ZM(A,m,x,E),m=m.sibling}function ZM(A,m,x,E){var L=m.flags;switch(m.tag){case 0:case 11:case 15:vA(A,m,x,E),L&2048&&db(9,m);break;case 1:vA(A,m,x,E);break;case 3:vA(A,m,x,E),L&2048&&(A=null,m.alternate!==null&&(A=m.alternate.memoizedState.cache),m=m.memoizedState.cache,m!==A&&(m.refCount++,A!=null&&$m(A)));break;case 12:if(L&2048){vA(A,m,x,E),A=m.stateNode;try{var K=m.memoizedProps,le=K.id,be=K.onPostCommit;typeof be=="function"&&be(le,m.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Pe){_a(m,m.return,Pe)}}else vA(A,m,x,E);break;case 13:vA(A,m,x,E);break;case 23:break;case 22:K=m.stateNode,le=m.alternate,m.memoizedState!==null?K._visibility&2?vA(A,m,x,E):fb(A,m):K._visibility&2?vA(A,m,x,E):(K._visibility|=2,Kg(A,m,x,E,(m.subtreeFlags&10256)!==0)),L&2048&&AB(le,m);break;case 24:vA(A,m,x,E),L&2048&&fB(m.alternate,m);break;default:vA(A,m,x,E)}}function Kg(A,m,x,E,L){for(L=L&&(m.subtreeFlags&10256)!==0,m=m.child;m!==null;){var K=A,le=m,be=x,Pe=E,it=le.flags;switch(le.tag){case 0:case 11:case 15:Kg(K,le,be,Pe,L),db(8,le);break;case 23:break;case 22:var _t=le.stateNode;le.memoizedState!==null?_t._visibility&2?Kg(K,le,be,Pe,L):fb(K,le):(_t._visibility|=2,Kg(K,le,be,Pe,L)),L&&it&2048&&AB(le.alternate,le);break;case 24:Kg(K,le,be,Pe,L),L&&it&2048&&fB(le.alternate,le);break;default:Kg(K,le,be,Pe,L)}m=m.sibling}}function fb(A,m){if(m.subtreeFlags&10256)for(m=m.child;m!==null;){var x=A,E=m,L=E.flags;switch(E.tag){case 22:fb(x,E),L&2048&&AB(E.alternate,E);break;case 24:fb(x,E),L&2048&&fB(E.alternate,E);break;default:fb(x,E)}m=m.sibling}}var hb=8192;function qg(A){if(A.subtreeFlags&hb)for(A=A.child;A!==null;)eU(A),A=A.sibling}function eU(A){switch(A.tag){case 26:qg(A),A.flags&hb&&A.memoizedState!==null&&RAe(cd,A.memoizedState,A.memoizedProps);break;case 5:qg(A);break;case 3:case 4:var m=cd;cd=ME(A.stateNode.containerInfo),qg(A),cd=m;break;case 22:A.memoizedState===null&&(m=A.alternate,m!==null&&m.memoizedState!==null?(m=hb,hb=16777216,qg(A),hb=m):qg(A));break;default:qg(A)}}function tU(A){var m=A.alternate;if(m!==null&&(A=m.child,A!==null)){m.child=null;do m=A.sibling,A.sibling=null,A=m;while(A!==null)}}function mb(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var E=m[x];Li=E,nU(E,A)}tU(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)rU(A),A=A.sibling}function rU(A){switch(A.tag){case 0:case 11:case 15:mb(A),A.flags&2048&&n0(9,A,A.return);break;case 3:mb(A);break;case 12:mb(A);break;case 22:var m=A.stateNode;A.memoizedState!==null&&m._visibility&2&&(A.return===null||A.return.tag!==13)?(m._visibility&=-3,NE(A)):mb(A);break;default:mb(A)}}function NE(A){var m=A.deletions;if((A.flags&16)!==0){if(m!==null)for(var x=0;x<m.length;x++){var E=m[x];Li=E,nU(E,A)}tU(A)}for(A=A.child;A!==null;){switch(m=A,m.tag){case 0:case 11:case 15:n0(8,m,m.return),NE(m);break;case 22:x=m.stateNode,x._visibility&2&&(x._visibility&=-3,NE(m));break;default:NE(m)}A=A.sibling}}function nU(A,m){for(;Li!==null;){var x=Li;switch(x.tag){case 0:case 11:case 15:n0(8,x,m);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var E=x.memoizedState.cachePool.pool;E!=null&&E.refCount++}break;case 24:$m(x.memoizedState.cache)}if(E=x.child,E!==null)E.return=x,Li=E;else e:for(x=A;Li!==null;){E=Li;var L=E.sibling,K=E.return;if(qM(E),E===x){Li=null;break e}if(L!==null){L.return=K,Li=L;break e}Li=K}}}var Zde={getCacheForType:function(A){var m=Ps(Rs),x=m.data.get(A);return x===void 0&&(x=A(),m.data.set(A,x)),x}},eAe=typeof WeakMap=="function"?WeakMap:Map,Aa=0,ja=null,Sn=null,Ln=0,fa=0,gc=null,i0=!1,Wg=!1,hB=!1,Ff=0,ws=0,o0=0,sp=0,mB=0,uu=0,Xg=0,pb=null,Ll=null,pB=!1,gB=0,kE=1/0,BE=null,l0=null,oo=0,c0=null,Yg=null,Jg=0,vB=0,xB=null,aU=null,gb=0,bB=null;function vc(){if((Aa&2)!==0&&Ln!==0)return Ln&-Ln;if(H.T!==null){var A=Ef;return A!==0?A:NB()}return xn()}function sU(){uu===0&&(uu=(Ln&536870912)===0||Qn?vt():536870912);var A=cu.current;return A!==null&&(A.flags|=32),uu}function xc(A,m,x){(A===ja&&(fa===2||fa===9)||A.cancelPendingCommit!==null)&&(Zg(A,0),u0(A,Ln,uu,!1)),gt(A,x),((Aa&2)===0||A!==ja)&&(A===ja&&((Aa&2)===0&&(sp|=x),ws===4&&u0(A,Ln,uu,!1)),xA(A))}function iU(A,m,x){if((Aa&6)!==0)throw Error(n(327));var E=!x&&(m&124)===0&&(m&A.expiredLanes)===0||Fn(A,m),L=E?nAe(A,m):EB(A,m,!0),K=E;do{if(L===0){Wg&&!E&&u0(A,m,0,!1);break}else{if(x=A.current.alternate,K&&!tAe(x)){L=EB(A,m,!1),K=!1;continue}if(L===2){if(K=m,A.errorRecoveryDisabledLanes&K)var le=0;else le=A.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){m=le;e:{var be=A;L=pb;var Pe=be.current.memoizedState.isDehydrated;if(Pe&&(Zg(be,le).flags|=256),le=EB(be,le,!1),le!==2){if(hB&&!Pe){be.errorRecoveryDisabledLanes|=K,sp|=K,L=4;break e}K=Ll,Ll=L,K!==null&&(Ll===null?Ll=K:Ll.push.apply(Ll,K))}L=le}if(K=!1,L!==2)continue}}if(L===1){Zg(A,0),u0(A,m,0,!0);break}e:{switch(E=A,K=L,K){case 0:case 1:throw Error(n(345));case 4:if((m&4194048)!==m)break;case 6:u0(E,m,uu,!i0);break e;case 2:Ll=null;break;case 3:case 5:break;default:throw Error(n(329))}if((m&62914560)===m&&(L=gB+300-je(),10<L)){if(u0(E,m,uu,!i0),zr(E,0,!0)!==0)break e;E.timeoutHandle=DU(oU.bind(null,E,x,Ll,BE,pB,m,uu,sp,Xg,i0,K,2,-0,0),L);break e}oU(E,x,Ll,BE,pB,m,uu,sp,Xg,i0,K,0,-0,0)}}break}while(!0);xA(A)}function oU(A,m,x,E,L,K,le,be,Pe,it,_t,Ft,At,ft){if(A.timeoutHandle=-1,Ft=m.subtreeFlags,(Ft&8192||(Ft&16785408)===16785408)&&(Cb={stylesheets:null,count:0,unsuspend:PAe},eU(m),Ft=LAe(),Ft!==null)){A.cancelPendingCommit=Ft(hU.bind(null,A,m,K,x,E,L,le,be,Pe,_t,1,At,ft)),u0(A,K,le,!it);return}hU(A,m,K,x,E,L,le,be,Pe)}function tAe(A){for(var m=A;;){var x=m.tag;if((x===0||x===11||x===15)&&m.flags&16384&&(x=m.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var E=0;E<x.length;E++){var L=x[E],K=L.getSnapshot;L=L.value;try{if(!ti(K(),L))return!1}catch{return!1}}if(x=m.child,m.subtreeFlags&16384&&x!==null)x.return=m,m=x;else{if(m===A)break;for(;m.sibling===null;){if(m.return===null||m.return===A)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function u0(A,m,x,E){m&=~mB,m&=~sp,A.suspendedLanes|=m,A.pingedLanes&=~m,E&&(A.warmLanes|=m),E=A.expirationTimes;for(var L=m;0<L;){var K=31-Dt(L),le=1<<K;E[K]=-1,L&=~le}x!==0&&Pt(A,x,m)}function TE(){return(Aa&6)===0?(vb(0),!1):!0}function yB(){if(Sn!==null){if(fa===0)var A=Sn.return;else A=Sn,nd=ni=null,Mg(A),$g=null,lb=0,A=Sn;for(;A!==null;)UM(A.alternate,A),A=A.return;Sn=null}}function Zg(A,m){var x=A.timeoutHandle;x!==-1&&(A.timeoutHandle=-1,xAe(x)),x=A.cancelPendingCommit,x!==null&&(A.cancelPendingCommit=null,x()),yB(),ja=A,Sn=x=nu(A.current,null),Ln=m,fa=0,gc=null,i0=!1,Wg=Fn(A,m),hB=!1,Xg=uu=mB=sp=o0=ws=0,Ll=pb=null,pB=!1,(m&8)!==0&&(m|=m&32);var E=A.entangledLanes;if(E!==0)for(A=A.entanglements,E&=m;0<E;){var L=31-Dt(E),K=1<<L;m|=A[L],E&=~K}return Ff=m,Fl(),x}function lU(A,m){Nr=null,H.H=gE,m===me||m===ve?(m=Ke(),fa=3):m===ge?(m=Ke(),fa=4):fa=m===SM?8:m!==null&&typeof m=="object"&&typeof m.then=="function"?6:1,gc=m,Sn===null&&(ws=1,wE(A,hn(m,A.current)))}function cU(){var A=H.H;return H.H=gE,A===null?gE:A}function uU(){var A=H.A;return H.A=Zde,A}function wB(){ws=4,i0||(Ln&4194048)!==Ln&&cu.current!==null||(Wg=!0),(o0&134217727)===0&&(sp&134217727)===0||ja===null||u0(ja,Ln,uu,!1)}function EB(A,m,x){var E=Aa;Aa|=2;var L=cU(),K=uU();(ja!==A||Ln!==m)&&(BE=null,Zg(A,m)),m=!1;var le=ws;e:do try{if(fa!==0&&Sn!==null){var be=Sn,Pe=gc;switch(fa){case 8:yB(),le=6;break e;case 3:case 2:case 9:case 6:cu.current===null&&(m=!0);var it=fa;if(fa=0,gc=null,ev(A,be,Pe,it),x&&Wg){le=0;break e}break;default:it=fa,fa=0,gc=null,ev(A,be,Pe,it)}}rAe(),le=ws;break}catch(_t){lU(A,_t)}while(!0);return m&&A.shellSuspendCounter++,nd=ni=null,Aa=E,H.H=L,H.A=K,Sn===null&&(ja=null,Ln=0,Fl()),le}function rAe(){for(;Sn!==null;)dU(Sn)}function nAe(A,m){var x=Aa;Aa|=2;var E=cU(),L=uU();ja!==A||Ln!==m?(BE=null,kE=je()+500,Zg(A,m)):Wg=Fn(A,m);e:do try{if(fa!==0&&Sn!==null){m=Sn;var K=gc;t:switch(fa){case 1:fa=0,gc=null,ev(A,m,K,1);break;case 2:case 9:if(ke(K)){fa=0,gc=null,AU(m);break}m=function(){fa!==2&&fa!==9||ja!==A||(fa=7),xA(A)},K.then(m,m);break e;case 3:fa=7;break e;case 4:fa=5;break e;case 7:ke(K)?(fa=0,gc=null,AU(m)):(fa=0,gc=null,ev(A,m,K,7));break;case 5:var le=null;switch(Sn.tag){case 26:le=Sn.memoizedState;case 5:case 27:var be=Sn;if(!le||KU(le)){fa=0,gc=null;var Pe=be.sibling;if(Pe!==null)Sn=Pe;else{var it=be.return;it!==null?(Sn=it,jE(it)):Sn=null}break t}}fa=0,gc=null,ev(A,m,K,5);break;case 6:fa=0,gc=null,ev(A,m,K,6);break;case 8:yB(),ws=6;break e;default:throw Error(n(462))}}aAe();break}catch(_t){lU(A,_t)}while(!0);return nd=ni=null,H.H=E,H.A=L,Aa=x,Sn!==null?0:(ja=null,Ln=0,Fl(),ws)}function aAe(){for(;Sn!==null&&!_e();)dU(Sn)}function dU(A){var m=LM(A.alternate,A,Ff);A.memoizedProps=A.pendingProps,m===null?jE(A):Sn=m}function AU(A){var m=A,x=m.alternate;switch(m.tag){case 15:case 0:m=IM(x,m,m.pendingProps,m.type,void 0,Ln);break;case 11:m=IM(x,m,m.pendingProps,m.type.render,m.ref,Ln);break;case 5:Mg(m);default:UM(x,m),m=Sn=Qm(m,Ff),m=LM(x,m,Ff)}A.memoizedProps=A.pendingProps,m===null?jE(A):Sn=m}function ev(A,m,x,E){nd=ni=null,Mg(m),$g=null,lb=0;var L=m.return;try{if(Kde(A,L,m,x,Ln)){ws=1,wE(A,hn(x,A.current)),Sn=null;return}}catch(K){if(L!==null)throw Sn=L,K;ws=1,wE(A,hn(x,A.current)),Sn=null;return}m.flags&32768?(Qn||E===1?A=!0:Wg||(Ln&536870912)!==0?A=!1:(i0=A=!0,(E===2||E===9||E===3||E===6)&&(E=cu.current,E!==null&&E.tag===13&&(E.flags|=16384))),fU(m,A)):jE(m)}function jE(A){var m=A;do{if((m.flags&32768)!==0){fU(m,i0);return}A=m.return;var x=Wde(m.alternate,m,Ff);if(x!==null){Sn=x;return}if(m=m.sibling,m!==null){Sn=m;return}Sn=m=A}while(m!==null);ws===0&&(ws=5)}function fU(A,m){do{var x=Xde(A.alternate,A);if(x!==null){x.flags&=32767,Sn=x;return}if(x=A.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!m&&(A=A.sibling,A!==null)){Sn=A;return}Sn=A=x}while(A!==null);ws=6,Sn=null}function hU(A,m,x,E,L,K,le,be,Pe){A.cancelPendingCommit=null;do IE();while(oo!==0);if((Aa&6)!==0)throw Error(n(327));if(m!==null){if(m===A.current)throw Error(n(177));if(K=m.lanes|m.childLanes,K|=ns,dt(A,x,K,le,be,Pe),A===ja&&(Sn=ja=null,Ln=0),Yg=m,c0=A,Jg=x,vB=K,xB=L,aU=E,(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,lAe(Oe,function(){return xU(),null})):(A.callbackNode=null,A.callbackPriority=0),E=(m.flags&13878)!==0,(m.subtreeFlags&13878)!==0||E){E=H.T,H.T=null,L=Y.p,Y.p=2,le=Aa,Aa|=4;try{Yde(A,m,x)}finally{Aa=le,Y.p=L,H.T=E}}oo=1,mU(),pU(),gU()}}function mU(){if(oo===1){oo=0;var A=c0,m=Yg,x=(m.flags&13878)!==0;if((m.subtreeFlags&13878)!==0||x){x=H.T,H.T=null;var E=Y.p;Y.p=2;var L=Aa;Aa|=4;try{YM(m,A);var K=DB,le=no(A.containerInfo),be=K.focusedElem,Pe=K.selectionRange;if(le!==be&&be&&be.ownerDocument&&eA(be.ownerDocument.documentElement,be)){if(Pe!==null&&yi(be)){var it=Pe.start,_t=Pe.end;if(_t===void 0&&(_t=it),"selectionStart"in be)be.selectionStart=it,be.selectionEnd=Math.min(_t,be.value.length);else{var Ft=be.ownerDocument||document,At=Ft&&Ft.defaultView||window;if(At.getSelection){var ft=At.getSelection(),$r=be.textContent.length,Ir=Math.min(Pe.start,$r),wa=Pe.end===void 0?Ir:Math.min(Pe.end,$r);!ft.extend&&Ir>wa&&(le=wa,wa=Ir,Ir=le);var We=Wu(be,Ir),Qe=Wu(be,wa);if(We&&Qe&&(ft.rangeCount!==1||ft.anchorNode!==We.node||ft.anchorOffset!==We.offset||ft.focusNode!==Qe.node||ft.focusOffset!==Qe.offset)){var rt=Ft.createRange();rt.setStart(We.node,We.offset),ft.removeAllRanges(),Ir>wa?(ft.addRange(rt),ft.extend(Qe.node,Qe.offset)):(rt.setEnd(Qe.node,Qe.offset),ft.addRange(rt))}}}}for(Ft=[],ft=be;ft=ft.parentNode;)ft.nodeType===1&&Ft.push({element:ft,left:ft.scrollLeft,top:ft.scrollTop});for(typeof be.focus=="function"&&be.focus(),be=0;be<Ft.length;be++){var Nt=Ft[be];Nt.element.scrollLeft=Nt.left,Nt.element.scrollTop=Nt.top}}zE=!!OB,DB=OB=null}finally{Aa=L,Y.p=E,H.T=x}}A.current=m,oo=2}}function pU(){if(oo===2){oo=0;var A=c0,m=Yg,x=(m.flags&8772)!==0;if((m.subtreeFlags&8772)!==0||x){x=H.T,H.T=null;var E=Y.p;Y.p=2;var L=Aa;Aa|=4;try{KM(A,m.alternate,m)}finally{Aa=L,Y.p=E,H.T=x}}oo=3}}function gU(){if(oo===4||oo===3){oo=0,he();var A=c0,m=Yg,x=Jg,E=aU;(m.subtreeFlags&10256)!==0||(m.flags&10256)!==0?oo=5:(oo=0,Yg=c0=null,vU(A,A.pendingLanes));var L=A.pendingLanes;if(L===0&&(l0=null),Xr(x),m=m.stateNode,Tt&&typeof Tt.onCommitFiberRoot=="function")try{Tt.onCommitFiberRoot(mt,m,void 0,(m.current.flags&128)===128)}catch{}if(E!==null){m=H.T,L=Y.p,Y.p=2,H.T=null;try{for(var K=A.onRecoverableError,le=0;le<E.length;le++){var be=E[le];K(be.value,{componentStack:be.stack})}}finally{H.T=m,Y.p=L}}(Jg&3)!==0&&IE(),xA(A),L=A.pendingLanes,(x&4194090)!==0&&(L&42)!==0?A===bB?gb++:(gb=0,bB=A):gb=0,vb(0)}}function vU(A,m){(A.pooledCacheLanes&=m)===0&&(m=A.pooledCache,m!=null&&(A.pooledCache=null,$m(m)))}function IE(A){return mU(),pU(),gU(),xU()}function xU(){if(oo!==5)return!1;var A=c0,m=vB;vB=0;var x=Xr(Jg),E=H.T,L=Y.p;try{Y.p=32>x?32:x,H.T=null,x=xB,xB=null;var K=c0,le=Jg;if(oo=0,Yg=c0=null,Jg=0,(Aa&6)!==0)throw Error(n(331));var be=Aa;if(Aa|=4,rU(K.current),ZM(K,K.current,le,x),Aa=be,vb(0,!1),Tt&&typeof Tt.onPostCommitFiberRoot=="function")try{Tt.onPostCommitFiberRoot(mt,K)}catch{}return!0}finally{Y.p=L,H.T=E,vU(A,m)}}function bU(A,m,x){m=hn(x,m),m=Jk(A.stateNode,m,2),A=Bt(A,m,2),A!==null&&(gt(A,2),xA(A))}function _a(A,m,x){if(A.tag===3)bU(A,A,x);else for(;m!==null;){if(m.tag===3){bU(m,A,x);break}else if(m.tag===1){var E=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(l0===null||!l0.has(E))){A=hn(x,A),x=CM(2),E=Bt(m,x,2),E!==null&&(_M(x,E,m,A),gt(E,2),xA(E));break}}m=m.return}}function CB(A,m,x){var E=A.pingCache;if(E===null){E=A.pingCache=new eAe;var L=new Set;E.set(m,L)}else L=E.get(m),L===void 0&&(L=new Set,E.set(m,L));L.has(x)||(hB=!0,L.add(x),A=sAe.bind(null,A,m,x),m.then(A,A))}function sAe(A,m,x){var E=A.pingCache;E!==null&&E.delete(m),A.pingedLanes|=A.suspendedLanes&x,A.warmLanes&=~x,ja===A&&(Ln&x)===x&&(ws===4||ws===3&&(Ln&62914560)===Ln&&300>je()-gB?(Aa&2)===0&&Zg(A,0):mB|=x,Xg===Ln&&(Xg=0)),xA(A)}function yU(A,m){m===0&&(m=pt()),A=Yu(A,m),A!==null&&(gt(A,m),xA(A))}function iAe(A){var m=A.memoizedState,x=0;m!==null&&(x=m.retryLane),yU(A,x)}function oAe(A,m){var x=0;switch(A.tag){case 13:var E=A.stateNode,L=A.memoizedState;L!==null&&(x=L.retryLane);break;case 19:E=A.stateNode;break;case 22:E=A.stateNode._retryCache;break;default:throw Error(n(314))}E!==null&&E.delete(m),yU(A,x)}function lAe(A,m){return Se(A,m)}var FE=null,tv=null,_B=!1,OE=!1,SB=!1,ip=0;function xA(A){A!==tv&&A.next===null&&(tv===null?FE=tv=A:tv=tv.next=A),OE=!0,_B||(_B=!0,uAe())}function vb(A,m){if(!SB&&OE){SB=!0;do for(var x=!1,E=FE;E!==null;){if(A!==0){var L=E.pendingLanes;if(L===0)var K=0;else{var le=E.suspendedLanes,be=E.pingedLanes;K=(1<<31-Dt(42|A)+1)-1,K&=L&~(le&~be),K=K&201326741?K&201326741|1:K?K|2:0}K!==0&&(x=!0,_U(E,K))}else K=Ln,K=zr(E,E===ja?K:0,E.cancelPendingCommit!==null||E.timeoutHandle!==-1),(K&3)===0||Fn(E,K)||(x=!0,_U(E,K));E=E.next}while(x);SB=!1}}function cAe(){wU()}function wU(){OE=_B=!1;var A=0;ip!==0&&(vAe()&&(A=ip),ip=0);for(var m=je(),x=null,E=FE;E!==null;){var L=E.next,K=EU(E,m);K===0?(E.next=null,x===null?FE=L:x.next=L,L===null&&(tv=x)):(x=E,(A!==0||(K&3)!==0)&&(OE=!0)),E=L}vb(A)}function EU(A,m){for(var x=A.suspendedLanes,E=A.pingedLanes,L=A.expirationTimes,K=A.pendingLanes&-62914561;0<K;){var le=31-Dt(K),be=1<<le,Pe=L[le];Pe===-1?((be&x)===0||(be&E)!==0)&&(L[le]=Fr(be,m)):Pe<=m&&(A.expiredLanes|=be),K&=~be}if(m=ja,x=Ln,x=zr(A,A===m?x:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E=A.callbackNode,x===0||A===m&&(fa===2||fa===9)||A.cancelPendingCommit!==null)return E!==null&&E!==null&&De(E),A.callbackNode=null,A.callbackPriority=0;if((x&3)===0||Fn(A,x)){if(m=x&-x,m===A.callbackPriority)return m;switch(E!==null&&De(E),Xr(x)){case 2:case 8:x=ye;break;case 32:x=Oe;break;case 268435456:x=qe;break;default:x=Oe}return E=CU.bind(null,A),x=Se(x,E),A.callbackPriority=m,A.callbackNode=x,m}return E!==null&&E!==null&&De(E),A.callbackPriority=2,A.callbackNode=null,2}function CU(A,m){if(oo!==0&&oo!==5)return A.callbackNode=null,A.callbackPriority=0,null;var x=A.callbackNode;if(IE()&&A.callbackNode!==x)return null;var E=Ln;return E=zr(A,A===ja?E:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),E===0?null:(iU(A,E,m),EU(A,je()),A.callbackNode!=null&&A.callbackNode===x?CU.bind(null,A):null)}function _U(A,m){if(IE())return null;iU(A,m,!0)}function uAe(){bAe(function(){(Aa&6)!==0?Se(Xe,cAe):wU()})}function NB(){return ip===0&&(ip=vt()),ip}function SU(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:sc(""+A)}function NU(A,m){var x=m.ownerDocument.createElement("input");return x.name=m.name,x.value=m.value,A.id&&x.setAttribute("form",A.id),m.parentNode.insertBefore(x,m),A=new FormData(A),x.parentNode.removeChild(x),A}function dAe(A,m,x,E,L){if(m==="submit"&&x&&x.stateNode===L){var K=SU((L[en]||null).action),le=E.submitter;le&&(m=(m=le[en]||null)?SU(m.formAction):le.getAttribute("formAction"),m!==null&&(K=m,le=null));var be=new qc("action","action",null,E,L);A.push({event:be,listeners:[{instance:null,listener:function(){if(E.defaultPrevented){if(ip!==0){var Pe=le?NU(L,le):new FormData(L);lu(x,{pending:!0,data:Pe,method:L.method,action:K},null,Pe)}}else typeof K=="function"&&(be.preventDefault(),Pe=le?NU(L,le):new FormData(L),lu(x,{pending:!0,data:Pe,method:L.method,action:K},K,Pe))},currentTarget:L}]})}}for(var kB=0;kB<gf.length;kB++){var BB=gf[kB],AAe=BB.toLowerCase(),fAe=BB[0].toUpperCase()+BB.slice(1);Ka(AAe,"on"+fAe)}Ka(zh,"onAnimationEnd"),Ka(rA,"onAnimationIteration"),Ka(nA,"onAnimationStart"),Ka("dblclick","onDoubleClick"),Ka("focusin","onFocus"),Ka("focusout","onBlur"),Ka(aA,"onTransitionRun"),Ka(pf,"onTransitionStart"),Ka($h,"onTransitionCancel"),Ka(sA,"onTransitionEnd"),Vt("onMouseEnter",["mouseout","mouseover"]),Vt("onMouseLeave",["mouseout","mouseover"]),Vt("onPointerEnter",["pointerout","pointerover"]),Vt("onPointerLeave",["pointerout","pointerover"]),jt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),jt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),jt("onBeforeInput",["compositionend","keypress","textInput","paste"]),jt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),jt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),jt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hAe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xb));function kU(A,m){m=(m&4)!==0;for(var x=0;x<A.length;x++){var E=A[x],L=E.event;E=E.listeners;e:{var K=void 0;if(m)for(var le=E.length-1;0<=le;le--){var be=E[le],Pe=be.instance,it=be.currentTarget;if(be=be.listener,Pe!==K&&L.isPropagationStopped())break e;K=be,L.currentTarget=it;try{K(L)}catch(_t){yE(_t)}L.currentTarget=null,K=Pe}else for(le=0;le<E.length;le++){if(be=E[le],Pe=be.instance,it=be.currentTarget,be=be.listener,Pe!==K&&L.isPropagationStopped())break e;K=be,L.currentTarget=it;try{K(L)}catch(_t){yE(_t)}L.currentTarget=null,K=Pe}}}}function Nn(A,m){var x=m[Yr];x===void 0&&(x=m[Yr]=new Set);var E=A+"__bubble";x.has(E)||(BU(m,A,2,!1),x.add(E))}function TB(A,m,x){var E=0;m&&(E|=4),BU(x,A,E,m)}var DE="_reactListening"+Math.random().toString(36).slice(2);function jB(A){if(!A[DE]){A[DE]=!0,tt.forEach(function(x){x!=="selectionchange"&&(hAe.has(x)||TB(x,!1,A),TB(x,!0,A))});var m=A.nodeType===9?A:A.ownerDocument;m===null||m[DE]||(m[DE]=!0,TB("selectionchange",!1,m))}}function BU(A,m,x,E){switch(ZU(m)){case 2:var L=QAe;break;case 8:L=HAe;break;default:L=$B}x=L.bind(null,m,x,A),L=void 0,!ro||m!=="touchstart"&&m!=="touchmove"&&m!=="wheel"||(L=!0),E?L!==void 0?A.addEventListener(m,x,{capture:!0,passive:L}):A.addEventListener(m,x,!0):L!==void 0?A.addEventListener(m,x,{passive:L}):A.addEventListener(m,x,!1)}function IB(A,m,x,E,L){var K=E;if((m&1)===0&&(m&2)===0&&E!==null)e:for(;;){if(E===null)return;var le=E.tag;if(le===3||le===4){var be=E.stateNode.containerInfo;if(be===L)break;if(le===4)for(le=E.return;le!==null;){var Pe=le.tag;if((Pe===3||Pe===4)&&le.stateNode.containerInfo===L)return;le=le.return}for(;be!==null;){if(le=Ne(be),le===null)return;if(Pe=le.tag,Pe===5||Pe===6||Pe===26||Pe===27){E=K=le;continue e}be=be.parentNode}}E=E.return}Mh(function(){var it=K,_t=ua(x),Ft=[];e:{var At=Xu.get(A);if(At!==void 0){var ft=qc,$r=A;switch(A){case"keypress":if(Co(x)===0)break e;case"keydown":case"keyup":ft=cc;break;case"focusin":$r="focus",ft=Xc;break;case"focusout":$r="blur",ft=Xc;break;case"beforeblur":case"afterblur":ft=Xc;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ft=vs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ft=Wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ft=Xd;break;case zh:case rA:case nA:ft=Kd;break;case sA:ft=de;break;case"scroll":case"scrollend":ft=uf;break;case"wheel":ft=Le;break;case"copy":case"cut":case"paste":ft=qd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ft=qu;break;case"toggle":case"beforetoggle":ft=xt}var Ir=(m&4)!==0,wa=!Ir&&(A==="scroll"||A==="scrollend"),We=Ir?At!==null?At+"Capture":null:At;Ir=[];for(var Qe=it,rt;Qe!==null;){var Nt=Qe;if(rt=Nt.stateNode,Nt=Nt.tag,Nt!==5&&Nt!==26&&Nt!==27||rt===null||We===null||(Nt=Ii(Qe,We),Nt!=null&&Ir.push(bb(Qe,Nt,rt))),wa)break;Qe=Qe.return}0<Ir.length&&(At=new ft(At,$r,null,x,_t),Ft.push({event:At,listeners:Ir}))}}if((m&7)===0){e:{if(At=A==="mouseover"||A==="pointerover",ft=A==="mouseout"||A==="pointerout",At&&x!==_l&&($r=x.relatedTarget||x.fromElement)&&(Ne($r)||$r[dr]))break e;if((ft||At)&&(At=_t.window===_t?_t:(At=_t.ownerDocument)?At.defaultView||At.parentWindow:window,ft?($r=x.relatedTarget||x.toElement,ft=it,$r=$r?Ne($r):null,$r!==null&&(wa=s($r),Ir=$r.tag,$r!==wa||Ir!==5&&Ir!==27&&Ir!==6)&&($r=null)):(ft=null,$r=it),ft!==$r)){if(Ir=vs,Nt="onMouseLeave",We="onMouseEnter",Qe="mouse",(A==="pointerout"||A==="pointerover")&&(Ir=qu,Nt="onPointerLeave",We="onPointerEnter",Qe="pointer"),wa=ft==null?At:Ye(ft),rt=$r==null?At:Ye($r),At=new Ir(Nt,Qe+"leave",ft,x,_t),At.target=wa,At.relatedTarget=rt,Nt=null,Ne(_t)===it&&(Ir=new Ir(We,Qe+"enter",$r,x,_t),Ir.target=rt,Ir.relatedTarget=wa,Nt=Ir),wa=Nt,ft&&$r)t:{for(Ir=ft,We=$r,Qe=0,rt=Ir;rt;rt=rv(rt))Qe++;for(rt=0,Nt=We;Nt;Nt=rv(Nt))rt++;for(;0<Qe-rt;)Ir=rv(Ir),Qe--;for(;0<rt-Qe;)We=rv(We),rt--;for(;Qe--;){if(Ir===We||We!==null&&Ir===We.alternate)break t;Ir=rv(Ir),We=rv(We)}Ir=null}else Ir=null;ft!==null&&TU(Ft,At,ft,Ir,!1),$r!==null&&wa!==null&&TU(Ft,wa,$r,Ir,!0)}}e:{if(At=it?Ye(it):window,ft=At.nodeName&&At.nodeName.toLowerCase(),ft==="select"||ft==="input"&&At.type==="file")var fr=Hh;else if(na(At))if(Af)fr=jg;else{fr=G1;var En=So}else ft=At.nodeName,!ft||ft.toLowerCase()!=="input"||At.type!=="checkbox"&&At.type!=="radio"?it&&lf(it.elementType)&&(fr=Hh):fr=Mm;if(fr&&(fr=fr(A,it))){jl(Ft,fr,x,_t);break e}En&&En(A,At,it),A==="focusout"&&it&&At.type==="number"&&it.memoizedProps.value!=null&&$c(At,"number",At.value)}switch(En=it?Ye(it):window,A){case"focusin":(na(En)||En.contentEditable==="true")&&(No=En,uc=it,tu=null);break;case"focusout":tu=uc=No=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,Ga(Ft,x,_t);break;case"selectionchange":if(tA)break;case"keydown":case"keyup":Ga(Ft,x,_t)}var yr;if(Zt)e:{switch(A){case"compositionstart":var Or="onCompositionStart";break e;case"compositionend":Or="onCompositionEnd";break e;case"compositionupdate":Or="onCompositionUpdate";break e}Or=void 0}else jr?st(A,x)&&(Or="onCompositionEnd"):A==="keydown"&&x.keyCode===229&&(Or="onCompositionStart");Or&&(se&&x.locale!=="ko"&&(jr||Or!=="onCompositionStart"?Or==="onCompositionEnd"&&jr&&(yr=cf()):(Eo=_t,Kc="value"in Eo?Eo.value:Eo.textContent,jr=!0)),En=PE(it,Or),0<En.length&&(Or=new $u(Or,A,null,x,_t),Ft.push({event:Or,listeners:En}),yr?Or.data=yr:(yr=Ut(x),yr!==null&&(Or.data=yr)))),(yr=ee?wn(A,x):Kr(A,x))&&(Or=PE(it,"onBeforeInput"),0<Or.length&&(En=new $u("onBeforeInput","beforeinput",null,x,_t),Ft.push({event:En,listeners:Or}),En.data=yr)),dAe(Ft,A,it,x,_t)}kU(Ft,m)})}function bb(A,m,x){return{instance:A,listener:m,currentTarget:x}}function PE(A,m){for(var x=m+"Capture",E=[];A!==null;){var L=A,K=L.stateNode;if(L=L.tag,L!==5&&L!==26&&L!==27||K===null||(L=Ii(A,x),L!=null&&E.unshift(bb(A,L,K)),L=Ii(A,m),L!=null&&E.push(bb(A,L,K))),A.tag===3)return E;A=A.return}return[]}function rv(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function TU(A,m,x,E,L){for(var K=m._reactName,le=[];x!==null&&x!==E;){var be=x,Pe=be.alternate,it=be.stateNode;if(be=be.tag,Pe!==null&&Pe===E)break;be!==5&&be!==26&&be!==27||it===null||(Pe=it,L?(it=Ii(x,K),it!=null&&le.unshift(bb(x,it,Pe))):L||(it=Ii(x,K),it!=null&&le.push(bb(x,it,Pe)))),x=x.return}le.length!==0&&A.push({event:m,listeners:le})}var mAe=/\r\n?/g,pAe=/\u0000|\uFFFD/g;function jU(A){return(typeof A=="string"?A:""+A).replace(mAe,`
`).replace(pAe,"")}function IU(A,m){return m=jU(m),jU(A)===m}function RE(){}function ya(A,m,x,E,L,K){switch(x){case"children":typeof E=="string"?m==="body"||m==="textarea"&&E===""||yo(A,E):(typeof E=="number"||typeof E=="bigint")&&m!=="body"&&yo(A,""+E);break;case"className":on(A,"class",E);break;case"tabIndex":on(A,"tabindex",E);break;case"dir":case"role":case"viewBox":case"width":case"height":on(A,x,E);break;case"style":of(A,E,K);break;case"data":if(m!=="object"){on(A,"data",E);break}case"src":case"href":if(E===""&&(m!=="a"||x!=="href")){A.removeAttribute(x);break}if(E==null||typeof E=="function"||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(x);break}E=sc(""+E),A.setAttribute(x,E);break;case"action":case"formAction":if(typeof E=="function"){A.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof K=="function"&&(x==="formAction"?(m!=="input"&&ya(A,m,"name",L.name,L,null),ya(A,m,"formEncType",L.formEncType,L,null),ya(A,m,"formMethod",L.formMethod,L,null),ya(A,m,"formTarget",L.formTarget,L,null)):(ya(A,m,"encType",L.encType,L,null),ya(A,m,"method",L.method,L,null),ya(A,m,"target",L.target,L,null)));if(E==null||typeof E=="symbol"||typeof E=="boolean"){A.removeAttribute(x);break}E=sc(""+E),A.setAttribute(x,E);break;case"onClick":E!=null&&(A.onclick=RE);break;case"onScroll":E!=null&&Nn("scroll",A);break;case"onScrollEnd":E!=null&&Nn("scrollend",A);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(x=E.__html,x!=null){if(L.children!=null)throw Error(n(60));A.innerHTML=x}}break;case"multiple":A.multiple=E&&typeof E!="function"&&typeof E!="symbol";break;case"muted":A.muted=E&&typeof E!="function"&&typeof E!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(E==null||typeof E=="function"||typeof E=="boolean"||typeof E=="symbol"){A.removeAttribute("xlink:href");break}x=sc(""+E),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,""+E):A.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":E&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,""):A.removeAttribute(x);break;case"capture":case"download":E===!0?A.setAttribute(x,""):E!==!1&&E!=null&&typeof E!="function"&&typeof E!="symbol"?A.setAttribute(x,E):A.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":E!=null&&typeof E!="function"&&typeof E!="symbol"&&!isNaN(E)&&1<=E?A.setAttribute(x,E):A.removeAttribute(x);break;case"rowSpan":case"start":E==null||typeof E=="function"||typeof E=="symbol"||isNaN(E)?A.removeAttribute(x):A.setAttribute(x,E);break;case"popover":Nn("beforetoggle",A),Nn("toggle",A),sn(A,"popover",E);break;case"xlinkActuate":An(A,"http://www.w3.org/1999/xlink","xlink:actuate",E);break;case"xlinkArcrole":An(A,"http://www.w3.org/1999/xlink","xlink:arcrole",E);break;case"xlinkRole":An(A,"http://www.w3.org/1999/xlink","xlink:role",E);break;case"xlinkShow":An(A,"http://www.w3.org/1999/xlink","xlink:show",E);break;case"xlinkTitle":An(A,"http://www.w3.org/1999/xlink","xlink:title",E);break;case"xlinkType":An(A,"http://www.w3.org/1999/xlink","xlink:type",E);break;case"xmlBase":An(A,"http://www.w3.org/XML/1998/namespace","xml:base",E);break;case"xmlLang":An(A,"http://www.w3.org/XML/1998/namespace","xml:lang",E);break;case"xmlSpace":An(A,"http://www.w3.org/XML/1998/namespace","xml:space",E);break;case"is":sn(A,"is",E);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=ac.get(x)||x,sn(A,x,E))}}function FB(A,m,x,E,L,K){switch(x){case"style":of(A,E,K);break;case"dangerouslySetInnerHTML":if(E!=null){if(typeof E!="object"||!("__html"in E))throw Error(n(61));if(x=E.__html,x!=null){if(L.children!=null)throw Error(n(60));A.innerHTML=x}}break;case"children":typeof E=="string"?yo(A,E):(typeof E=="number"||typeof E=="bigint")&&yo(A,""+E);break;case"onScroll":E!=null&&Nn("scroll",A);break;case"onScrollEnd":E!=null&&Nn("scrollend",A);break;case"onClick":E!=null&&(A.onclick=RE);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!at.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(L=x.endsWith("Capture"),m=x.slice(2,L?x.length-7:void 0),K=A[en]||null,K=K!=null?K[x]:null,typeof K=="function"&&A.removeEventListener(m,K,L),typeof E=="function")){typeof K!="function"&&K!==null&&(x in A?A[x]=null:A.hasAttribute(x)&&A.removeAttribute(x)),A.addEventListener(m,E,L);break e}x in A?A[x]=E:E===!0?A.setAttribute(x,""):sn(A,x,E)}}}function lo(A,m,x){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Nn("error",A),Nn("load",A);var E=!1,L=!1,K;for(K in x)if(x.hasOwnProperty(K)){var le=x[K];if(le!=null)switch(K){case"src":E=!0;break;case"srcSet":L=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ya(A,m,K,le,x,null)}}L&&ya(A,m,"srcSet",x.srcSet,x,null),E&&ya(A,m,"src",x.src,x,null);return;case"input":Nn("invalid",A);var be=K=le=L=null,Pe=null,it=null;for(E in x)if(x.hasOwnProperty(E)){var _t=x[E];if(_t!=null)switch(E){case"name":L=_t;break;case"type":le=_t;break;case"checked":Pe=_t;break;case"defaultChecked":it=_t;break;case"value":K=_t;break;case"defaultValue":be=_t;break;case"children":case"dangerouslySetInnerHTML":if(_t!=null)throw Error(n(137,m));break;default:ya(A,m,E,_t,x,null)}}zc(A,K,be,Pe,it,le,L,!1),Vc(A);return;case"select":Nn("invalid",A),E=le=K=null;for(L in x)if(x.hasOwnProperty(L)&&(be=x[L],be!=null))switch(L){case"value":K=be;break;case"defaultValue":le=be;break;case"multiple":E=be;default:ya(A,m,L,be,x,null)}m=K,x=le,A.multiple=!!E,m!=null?Cl(A,!!E,m,!1):x!=null&&Cl(A,!!E,x,!0);return;case"textarea":Nn("invalid",A),K=L=E=null;for(le in x)if(x.hasOwnProperty(le)&&(be=x[le],be!=null))switch(le){case"value":E=be;break;case"defaultValue":L=be;break;case"children":K=be;break;case"dangerouslySetInnerHTML":if(be!=null)throw Error(n(91));break;default:ya(A,m,le,be,x,null)}Gc(A,E,L,K),Vc(A);return;case"option":for(Pe in x)if(x.hasOwnProperty(Pe)&&(E=x[Pe],E!=null))switch(Pe){case"selected":A.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:ya(A,m,Pe,E,x,null)}return;case"dialog":Nn("beforetoggle",A),Nn("toggle",A),Nn("cancel",A),Nn("close",A);break;case"iframe":case"object":Nn("load",A);break;case"video":case"audio":for(E=0;E<xb.length;E++)Nn(xb[E],A);break;case"image":Nn("error",A),Nn("load",A);break;case"details":Nn("toggle",A);break;case"embed":case"source":case"link":Nn("error",A),Nn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(it in x)if(x.hasOwnProperty(it)&&(E=x[it],E!=null))switch(it){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,m));default:ya(A,m,it,E,x,null)}return;default:if(lf(m)){for(_t in x)x.hasOwnProperty(_t)&&(E=x[_t],E!==void 0&&FB(A,m,_t,E,x,void 0));return}}for(be in x)x.hasOwnProperty(be)&&(E=x[be],E!=null&&ya(A,m,be,E,x,null))}function gAe(A,m,x,E){switch(m){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var L=null,K=null,le=null,be=null,Pe=null,it=null,_t=null;for(ft in x){var Ft=x[ft];if(x.hasOwnProperty(ft)&&Ft!=null)switch(ft){case"checked":break;case"value":break;case"defaultValue":Pe=Ft;default:E.hasOwnProperty(ft)||ya(A,m,ft,null,E,Ft)}}for(var At in E){var ft=E[At];if(Ft=x[At],E.hasOwnProperty(At)&&(ft!=null||Ft!=null))switch(At){case"type":K=ft;break;case"name":L=ft;break;case"checked":it=ft;break;case"defaultChecked":_t=ft;break;case"value":le=ft;break;case"defaultValue":be=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,m));break;default:ft!==Ft&&ya(A,m,At,ft,E,Ft)}}xi(A,le,be,Pe,it,_t,K,L);return;case"select":ft=le=be=At=null;for(K in x)if(Pe=x[K],x.hasOwnProperty(K)&&Pe!=null)switch(K){case"value":break;case"multiple":ft=Pe;default:E.hasOwnProperty(K)||ya(A,m,K,null,E,Pe)}for(L in E)if(K=E[L],Pe=x[L],E.hasOwnProperty(L)&&(K!=null||Pe!=null))switch(L){case"value":At=K;break;case"defaultValue":be=K;break;case"multiple":le=K;default:K!==Pe&&ya(A,m,L,K,E,Pe)}m=be,x=le,E=ft,At!=null?Cl(A,!!x,At,!1):!!E!=!!x&&(m!=null?Cl(A,!!x,m,!0):Cl(A,!!x,x?[]:"",!1));return;case"textarea":ft=At=null;for(be in x)if(L=x[be],x.hasOwnProperty(be)&&L!=null&&!E.hasOwnProperty(be))switch(be){case"value":break;case"children":break;default:ya(A,m,be,null,E,L)}for(le in E)if(L=E[le],K=x[le],E.hasOwnProperty(le)&&(L!=null||K!=null))switch(le){case"value":At=L;break;case"defaultValue":ft=L;break;case"children":break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(n(91));break;default:L!==K&&ya(A,m,le,L,E,K)}zn(A,At,ft);return;case"option":for(var $r in x)if(At=x[$r],x.hasOwnProperty($r)&&At!=null&&!E.hasOwnProperty($r))switch($r){case"selected":A.selected=!1;break;default:ya(A,m,$r,null,E,At)}for(Pe in E)if(At=E[Pe],ft=x[Pe],E.hasOwnProperty(Pe)&&At!==ft&&(At!=null||ft!=null))switch(Pe){case"selected":A.selected=At&&typeof At!="function"&&typeof At!="symbol";break;default:ya(A,m,Pe,At,E,ft)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ir in x)At=x[Ir],x.hasOwnProperty(Ir)&&At!=null&&!E.hasOwnProperty(Ir)&&ya(A,m,Ir,null,E,At);for(it in E)if(At=E[it],ft=x[it],E.hasOwnProperty(it)&&At!==ft&&(At!=null||ft!=null))switch(it){case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(n(137,m));break;default:ya(A,m,it,At,E,ft)}return;default:if(lf(m)){for(var wa in x)At=x[wa],x.hasOwnProperty(wa)&&At!==void 0&&!E.hasOwnProperty(wa)&&FB(A,m,wa,void 0,E,At);for(_t in E)At=E[_t],ft=x[_t],!E.hasOwnProperty(_t)||At===ft||At===void 0&&ft===void 0||FB(A,m,_t,At,E,ft);return}}for(var We in x)At=x[We],x.hasOwnProperty(We)&&At!=null&&!E.hasOwnProperty(We)&&ya(A,m,We,null,E,At);for(Ft in E)At=E[Ft],ft=x[Ft],!E.hasOwnProperty(Ft)||At===ft||At==null&&ft==null||ya(A,m,Ft,At,E,ft)}var OB=null,DB=null;function LE(A){return A.nodeType===9?A:A.ownerDocument}function FU(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function OU(A,m){if(A===0)switch(m){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&m==="foreignObject"?0:A}function PB(A,m){return A==="textarea"||A==="noscript"||typeof m.children=="string"||typeof m.children=="number"||typeof m.children=="bigint"||typeof m.dangerouslySetInnerHTML=="object"&&m.dangerouslySetInnerHTML!==null&&m.dangerouslySetInnerHTML.__html!=null}var RB=null;function vAe(){var A=window.event;return A&&A.type==="popstate"?A===RB?!1:(RB=A,!0):(RB=null,!1)}var DU=typeof setTimeout=="function"?setTimeout:void 0,xAe=typeof clearTimeout=="function"?clearTimeout:void 0,PU=typeof Promise=="function"?Promise:void 0,bAe=typeof queueMicrotask=="function"?queueMicrotask:typeof PU<"u"?function(A){return PU.resolve(null).then(A).catch(yAe)}:DU;function yAe(A){setTimeout(function(){throw A})}function d0(A){return A==="head"}function RU(A,m){var x=m,E=0,L=0;do{var K=x.nextSibling;if(A.removeChild(x),K&&K.nodeType===8)if(x=K.data,x==="/$"){if(0<E&&8>E){x=E;var le=A.ownerDocument;if(x&1&&yb(le.documentElement),x&2&&yb(le.body),x&4)for(x=le.head,yb(x),le=x.firstChild;le;){var be=le.nextSibling,Pe=le.nodeName;le[Ee]||Pe==="SCRIPT"||Pe==="STYLE"||Pe==="LINK"&&le.rel.toLowerCase()==="stylesheet"||x.removeChild(le),le=be}}if(L===0){A.removeChild(K),Bb(m);return}L--}else x==="$"||x==="$?"||x==="$!"?L++:E=x.charCodeAt(0)-48;else E=0;x=K}while(x);Bb(m)}function LB(A){var m=A.firstChild;for(m&&m.nodeType===10&&(m=m.nextSibling);m;){var x=m;switch(m=m.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":LB(x),Ce(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}A.removeChild(x)}}function wAe(A,m,x,E){for(;A.nodeType===1;){var L=x;if(A.nodeName.toLowerCase()!==m.toLowerCase()){if(!E&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(E){if(!A[Ee])switch(m){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(K=A.getAttribute("rel"),K==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(K!==L.rel||A.getAttribute("href")!==(L.href==null||L.href===""?null:L.href)||A.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin)||A.getAttribute("title")!==(L.title==null?null:L.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(K=A.getAttribute("src"),(K!==(L.src==null?null:L.src)||A.getAttribute("type")!==(L.type==null?null:L.type)||A.getAttribute("crossorigin")!==(L.crossOrigin==null?null:L.crossOrigin))&&K&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(m==="input"&&A.type==="hidden"){var K=L.name==null?null:""+L.name;if(L.type==="hidden"&&A.getAttribute("name")===K)return A}else return A;if(A=ud(A.nextSibling),A===null)break}return null}function EAe(A,m,x){if(m==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!x||(A=ud(A.nextSibling),A===null))return null;return A}function MB(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function CAe(A,m){var x=A.ownerDocument;if(A.data!=="$?"||x.readyState==="complete")m();else{var E=function(){m(),x.removeEventListener("DOMContentLoaded",E)};x.addEventListener("DOMContentLoaded",E),A._reactRetry=E}}function ud(A){for(;A!=null;A=A.nextSibling){var m=A.nodeType;if(m===1||m===3)break;if(m===8){if(m=A.data,m==="$"||m==="$!"||m==="$?"||m==="F!"||m==="F")break;if(m==="/$")return null}}return A}var UB=null;function LU(A){A=A.previousSibling;for(var m=0;A;){if(A.nodeType===8){var x=A.data;if(x==="$"||x==="$!"||x==="$?"){if(m===0)return A;m--}else x==="/$"&&m++}A=A.previousSibling}return null}function MU(A,m,x){switch(m=LE(x),A){case"html":if(A=m.documentElement,!A)throw Error(n(452));return A;case"head":if(A=m.head,!A)throw Error(n(453));return A;case"body":if(A=m.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function yb(A){for(var m=A.attributes;m.length;)A.removeAttributeNode(m[0]);Ce(A)}var du=new Map,UU=new Set;function ME(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var Of=Y.d;Y.d={f:_Ae,r:SAe,D:NAe,C:kAe,L:BAe,m:TAe,X:IAe,S:jAe,M:FAe};function _Ae(){var A=Of.f(),m=TE();return A||m}function SAe(A){var m=Te(A);m!==null&&m.tag===5&&m.type==="form"?tp(m):Of.r(A)}var nv=typeof document>"u"?null:document;function QU(A,m,x){var E=nv;if(E&&typeof m=="string"&&m){var L=On(m);L='link[rel="'+A+'"][href="'+L+'"]',typeof x=="string"&&(L+='[crossorigin="'+x+'"]'),UU.has(L)||(UU.add(L),A={rel:A,crossOrigin:x,href:m},E.querySelector(L)===null&&(m=E.createElement("link"),lo(m,"link",A),$e(m),E.head.appendChild(m)))}}function NAe(A){Of.D(A),QU("dns-prefetch",A,null)}function kAe(A,m){Of.C(A,m),QU("preconnect",A,m)}function BAe(A,m,x){Of.L(A,m,x);var E=nv;if(E&&A&&m){var L='link[rel="preload"][as="'+On(m)+'"]';m==="image"&&x&&x.imageSrcSet?(L+='[imagesrcset="'+On(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(L+='[imagesizes="'+On(x.imageSizes)+'"]')):L+='[href="'+On(A)+'"]';var K=L;switch(m){case"style":K=av(A);break;case"script":K=sv(A)}du.has(K)||(A=d({rel:"preload",href:m==="image"&&x&&x.imageSrcSet?void 0:A,as:m},x),du.set(K,A),E.querySelector(L)!==null||m==="style"&&E.querySelector(wb(K))||m==="script"&&E.querySelector(Eb(K))||(m=E.createElement("link"),lo(m,"link",A),$e(m),E.head.appendChild(m)))}}function TAe(A,m){Of.m(A,m);var x=nv;if(x&&A){var E=m&&typeof m.as=="string"?m.as:"script",L='link[rel="modulepreload"][as="'+On(E)+'"][href="'+On(A)+'"]',K=L;switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":K=sv(A)}if(!du.has(K)&&(A=d({rel:"modulepreload",href:A},m),du.set(K,A),x.querySelector(L)===null)){switch(E){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(Eb(K)))return}E=x.createElement("link"),lo(E,"link",A),$e(E),x.head.appendChild(E)}}}function jAe(A,m,x){Of.S(A,m,x);var E=nv;if(E&&A){var L=ut(E).hoistableStyles,K=av(A);m=m||"default";var le=L.get(K);if(!le){var be={loading:0,preload:null};if(le=E.querySelector(wb(K)))be.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":m},x),(x=du.get(K))&&QB(A,x);var Pe=le=E.createElement("link");$e(Pe),lo(Pe,"link",A),Pe._p=new Promise(function(it,_t){Pe.onload=it,Pe.onerror=_t}),Pe.addEventListener("load",function(){be.loading|=1}),Pe.addEventListener("error",function(){be.loading|=2}),be.loading|=4,UE(le,m,E)}le={type:"stylesheet",instance:le,count:1,state:be},L.set(K,le)}}}function IAe(A,m){Of.X(A,m);var x=nv;if(x&&A){var E=ut(x).hoistableScripts,L=sv(A),K=E.get(L);K||(K=x.querySelector(Eb(L)),K||(A=d({src:A,async:!0},m),(m=du.get(L))&&HB(A,m),K=x.createElement("script"),$e(K),lo(K,"link",A),x.head.appendChild(K)),K={type:"script",instance:K,count:1,state:null},E.set(L,K))}}function FAe(A,m){Of.M(A,m);var x=nv;if(x&&A){var E=ut(x).hoistableScripts,L=sv(A),K=E.get(L);K||(K=x.querySelector(Eb(L)),K||(A=d({src:A,async:!0,type:"module"},m),(m=du.get(L))&&HB(A,m),K=x.createElement("script"),$e(K),lo(K,"link",A),x.head.appendChild(K)),K={type:"script",instance:K,count:1,state:null},E.set(L,K))}}function HU(A,m,x,E){var L=(L=ie.current)?ME(L):null;if(!L)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(m=av(x.href),x=ut(L).hoistableStyles,E=x.get(m),E||(E={type:"style",instance:null,count:0,state:null},x.set(m,E)),E):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){A=av(x.href);var K=ut(L).hoistableStyles,le=K.get(A);if(le||(L=L.ownerDocument||L,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},K.set(A,le),(K=L.querySelector(wb(A)))&&!K._p&&(le.instance=K,le.state.loading=5),du.has(A)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},du.set(A,x),K||OAe(L,A,x,le.state))),m&&E===null)throw Error(n(528,""));return le}if(m&&E!==null)throw Error(n(529,""));return null;case"script":return m=x.async,x=x.src,typeof x=="string"&&m&&typeof m!="function"&&typeof m!="symbol"?(m=sv(x),x=ut(L).hoistableScripts,E=x.get(m),E||(E={type:"script",instance:null,count:0,state:null},x.set(m,E)),E):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function av(A){return'href="'+On(A)+'"'}function wb(A){return'link[rel="stylesheet"]['+A+"]"}function VU(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function OAe(A,m,x,E){A.querySelector('link[rel="preload"][as="style"]['+m+"]")?E.loading=1:(m=A.createElement("link"),E.preload=m,m.addEventListener("load",function(){return E.loading|=1}),m.addEventListener("error",function(){return E.loading|=2}),lo(m,"link",x),$e(m),A.head.appendChild(m))}function sv(A){return'[src="'+On(A)+'"]'}function Eb(A){return"script[async]"+A}function zU(A,m,x){if(m.count++,m.instance===null)switch(m.type){case"style":var E=A.querySelector('style[data-href~="'+On(x.href)+'"]');if(E)return m.instance=E,$e(E),E;var L=d({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return E=(A.ownerDocument||A).createElement("style"),$e(E),lo(E,"style",L),UE(E,x.precedence,A),m.instance=E;case"stylesheet":L=av(x.href);var K=A.querySelector(wb(L));if(K)return m.state.loading|=4,m.instance=K,$e(K),K;E=VU(x),(L=du.get(L))&&QB(E,L),K=(A.ownerDocument||A).createElement("link"),$e(K);var le=K;return le._p=new Promise(function(be,Pe){le.onload=be,le.onerror=Pe}),lo(K,"link",E),m.state.loading|=4,UE(K,x.precedence,A),m.instance=K;case"script":return K=sv(x.src),(L=A.querySelector(Eb(K)))?(m.instance=L,$e(L),L):(E=x,(L=du.get(K))&&(E=d({},x),HB(E,L)),A=A.ownerDocument||A,L=A.createElement("script"),$e(L),lo(L,"link",E),A.head.appendChild(L),m.instance=L);case"void":return null;default:throw Error(n(443,m.type))}else m.type==="stylesheet"&&(m.state.loading&4)===0&&(E=m.instance,m.state.loading|=4,UE(E,x.precedence,A));return m.instance}function UE(A,m,x){for(var E=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),L=E.length?E[E.length-1]:null,K=L,le=0;le<E.length;le++){var be=E[le];if(be.dataset.precedence===m)K=be;else if(K!==L)break}K?K.parentNode.insertBefore(A,K.nextSibling):(m=x.nodeType===9?x.head:x,m.insertBefore(A,m.firstChild))}function QB(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.title==null&&(A.title=m.title)}function HB(A,m){A.crossOrigin==null&&(A.crossOrigin=m.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=m.referrerPolicy),A.integrity==null&&(A.integrity=m.integrity)}var QE=null;function $U(A,m,x){if(QE===null){var E=new Map,L=QE=new Map;L.set(x,E)}else L=QE,E=L.get(x),E||(E=new Map,L.set(x,E));if(E.has(A))return E;for(E.set(A,null),x=x.getElementsByTagName(A),L=0;L<x.length;L++){var K=x[L];if(!(K[Ee]||K[rn]||A==="link"&&K.getAttribute("rel")==="stylesheet")&&K.namespaceURI!=="http://www.w3.org/2000/svg"){var le=K.getAttribute(m)||"";le=A+le;var be=E.get(le);be?be.push(K):E.set(le,[K])}}return E}function GU(A,m,x){A=A.ownerDocument||A,A.head.insertBefore(x,m==="title"?A.querySelector("head > title"):null)}function DAe(A,m,x){if(x===1||m.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof m.precedence!="string"||typeof m.href!="string"||m.href==="")break;return!0;case"link":if(typeof m.rel!="string"||typeof m.href!="string"||m.href===""||m.onLoad||m.onError)break;switch(m.rel){case"stylesheet":return A=m.disabled,typeof m.precedence=="string"&&A==null;default:return!0}case"script":if(m.async&&typeof m.async!="function"&&typeof m.async!="symbol"&&!m.onLoad&&!m.onError&&m.src&&typeof m.src=="string")return!0}return!1}function KU(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var Cb=null;function PAe(){}function RAe(A,m,x){if(Cb===null)throw Error(n(475));var E=Cb;if(m.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var L=av(x.href),K=A.querySelector(wb(L));if(K){A=K._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(E.count++,E=HE.bind(E),A.then(E,E)),m.state.loading|=4,m.instance=K,$e(K);return}K=A.ownerDocument||A,x=VU(x),(L=du.get(L))&&QB(x,L),K=K.createElement("link"),$e(K);var le=K;le._p=new Promise(function(be,Pe){le.onload=be,le.onerror=Pe}),lo(K,"link",x),m.instance=K}E.stylesheets===null&&(E.stylesheets=new Map),E.stylesheets.set(m,A),(A=m.state.preload)&&(m.state.loading&3)===0&&(E.count++,m=HE.bind(E),A.addEventListener("load",m),A.addEventListener("error",m))}}function LAe(){if(Cb===null)throw Error(n(475));var A=Cb;return A.stylesheets&&A.count===0&&VB(A,A.stylesheets),0<A.count?function(m){var x=setTimeout(function(){if(A.stylesheets&&VB(A,A.stylesheets),A.unsuspend){var E=A.unsuspend;A.unsuspend=null,E()}},6e4);return A.unsuspend=m,function(){A.unsuspend=null,clearTimeout(x)}}:null}function HE(){if(this.count--,this.count===0){if(this.stylesheets)VB(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var VE=null;function VB(A,m){A.stylesheets=null,A.unsuspend!==null&&(A.count++,VE=new Map,m.forEach(MAe,A),VE=null,HE.call(A))}function MAe(A,m){if(!(m.state.loading&4)){var x=VE.get(A);if(x)var E=x.get(null);else{x=new Map,VE.set(A,x);for(var L=A.querySelectorAll("link[data-precedence],style[data-precedence]"),K=0;K<L.length;K++){var le=L[K];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(x.set(le.dataset.precedence,le),E=le)}E&&x.set(null,E)}L=m.instance,le=L.getAttribute("data-precedence"),K=x.get(le)||E,K===E&&x.set(null,L),x.set(le,L),this.count++,E=HE.bind(this),L.addEventListener("load",E),L.addEventListener("error",E),K?K.parentNode.insertBefore(L,K.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(L,A.firstChild)),m.state.loading|=4}}var _b={$$typeof:N,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function UAe(A,m,x,E,L,K,le,be){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Je(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Je(0),this.hiddenUpdates=Je(null),this.identifierPrefix=E,this.onUncaughtError=L,this.onCaughtError=K,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=be,this.incompleteTransitions=new Map}function qU(A,m,x,E,L,K,le,be,Pe,it,_t,Ft){return A=new UAe(A,m,x,le,be,Pe,it,Ft),m=1,K===!0&&(m|=24),K=Pi(3,null,null,m),A.current=K,K.stateNode=A,m=q1(),m.refCount++,A.pooledCache=m,m.refCount++,K.memoizedState={element:E,isDehydrated:x,cache:m},Ue(K),A}function WU(A){return A?(A=ri,A):ri}function XU(A,m,x,E,L,K){L=WU(L),E.context===null?E.context=L:E.pendingContext=L,E=Ct(m),E.payload={element:x},K=K===void 0?null:K,K!==null&&(E.callback=K),x=Bt(A,E,m),x!==null&&(xc(x,A,m),St(x,A,m))}function YU(A,m){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var x=A.retryLane;A.retryLane=x!==0&&x<m?x:m}}function zB(A,m){YU(A,m),(A=A.alternate)&&YU(A,m)}function JU(A){if(A.tag===13){var m=Yu(A,67108864);m!==null&&xc(m,A,67108864),zB(A,67108864)}}var zE=!0;function QAe(A,m,x,E){var L=H.T;H.T=null;var K=Y.p;try{Y.p=2,$B(A,m,x,E)}finally{Y.p=K,H.T=L}}function HAe(A,m,x,E){var L=H.T;H.T=null;var K=Y.p;try{Y.p=8,$B(A,m,x,E)}finally{Y.p=K,H.T=L}}function $B(A,m,x,E){if(zE){var L=GB(E);if(L===null)IB(A,m,E,$E,x),e7(A,E);else if(zAe(L,A,m,x,E))E.stopPropagation();else if(e7(A,E),m&4&&-1<VAe.indexOf(A)){for(;L!==null;){var K=Te(L);if(K!==null)switch(K.tag){case 3:if(K=K.stateNode,K.current.memoizedState.isDehydrated){var le=_r(K.pendingLanes);if(le!==0){var be=K;for(be.pendingLanes|=2,be.entangledLanes|=2;le;){var Pe=1<<31-Dt(le);be.entanglements[1]|=Pe,le&=~Pe}xA(K),(Aa&6)===0&&(kE=je()+500,vb(0))}}break;case 13:be=Yu(K,2),be!==null&&xc(be,K,2),TE(),zB(K,2)}if(K=GB(E),K===null&&IB(A,m,E,$E,x),K===L)break;L=K}L!==null&&E.stopPropagation()}else IB(A,m,E,null,x)}}function GB(A){return A=ua(A),KB(A)}var $E=null;function KB(A){if($E=null,A=Ne(A),A!==null){var m=s(A);if(m===null)A=null;else{var x=m.tag;if(x===13){if(A=i(m),A!==null)return A;A=null}else if(x===3){if(m.stateNode.current.memoizedState.isDehydrated)return m.tag===3?m.stateNode.containerInfo:null;A=null}else m!==A&&(A=null)}}return $E=A,null}function ZU(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(He()){case Xe:return 2;case ye:return 8;case Oe:case Re:return 32;case qe:return 268435456;default:return 32}default:return 32}}var qB=!1,A0=null,f0=null,h0=null,Sb=new Map,Nb=new Map,m0=[],VAe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function e7(A,m){switch(A){case"focusin":case"focusout":A0=null;break;case"dragenter":case"dragleave":f0=null;break;case"mouseover":case"mouseout":h0=null;break;case"pointerover":case"pointerout":Sb.delete(m.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nb.delete(m.pointerId)}}function kb(A,m,x,E,L,K){return A===null||A.nativeEvent!==K?(A={blockedOn:m,domEventName:x,eventSystemFlags:E,nativeEvent:K,targetContainers:[L]},m!==null&&(m=Te(m),m!==null&&JU(m)),A):(A.eventSystemFlags|=E,m=A.targetContainers,L!==null&&m.indexOf(L)===-1&&m.push(L),A)}function zAe(A,m,x,E,L){switch(m){case"focusin":return A0=kb(A0,A,m,x,E,L),!0;case"dragenter":return f0=kb(f0,A,m,x,E,L),!0;case"mouseover":return h0=kb(h0,A,m,x,E,L),!0;case"pointerover":var K=L.pointerId;return Sb.set(K,kb(Sb.get(K)||null,A,m,x,E,L)),!0;case"gotpointercapture":return K=L.pointerId,Nb.set(K,kb(Nb.get(K)||null,A,m,x,E,L)),!0}return!1}function t7(A){var m=Ne(A.target);if(m!==null){var x=s(m);if(x!==null){if(m=x.tag,m===13){if(m=i(x),m!==null){A.blockedOn=m,bn(A.priority,function(){if(x.tag===13){var E=vc();E=Lr(E);var L=Yu(x,E);L!==null&&xc(L,x,E),zB(x,E)}});return}}else if(m===3&&x.stateNode.current.memoizedState.isDehydrated){A.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}A.blockedOn=null}function GE(A){if(A.blockedOn!==null)return!1;for(var m=A.targetContainers;0<m.length;){var x=GB(A.nativeEvent);if(x===null){x=A.nativeEvent;var E=new x.constructor(x.type,x);_l=E,x.target.dispatchEvent(E),_l=null}else return m=Te(x),m!==null&&JU(m),A.blockedOn=x,!1;m.shift()}return!0}function r7(A,m,x){GE(A)&&x.delete(m)}function $Ae(){qB=!1,A0!==null&&GE(A0)&&(A0=null),f0!==null&&GE(f0)&&(f0=null),h0!==null&&GE(h0)&&(h0=null),Sb.forEach(r7),Nb.forEach(r7)}function KE(A,m){A.blockedOn===m&&(A.blockedOn=null,qB||(qB=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$Ae)))}var qE=null;function n7(A){qE!==A&&(qE=A,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){qE===A&&(qE=null);for(var m=0;m<A.length;m+=3){var x=A[m],E=A[m+1],L=A[m+2];if(typeof E!="function"){if(KB(E||x)===null)continue;break}var K=Te(x);K!==null&&(A.splice(m,3),m-=3,lu(K,{pending:!0,data:L,method:x.method,action:E},E,L))}}))}function Bb(A){function m(Pe){return KE(Pe,A)}A0!==null&&KE(A0,A),f0!==null&&KE(f0,A),h0!==null&&KE(h0,A),Sb.forEach(m),Nb.forEach(m);for(var x=0;x<m0.length;x++){var E=m0[x];E.blockedOn===A&&(E.blockedOn=null)}for(;0<m0.length&&(x=m0[0],x.blockedOn===null);)t7(x),x.blockedOn===null&&m0.shift();if(x=(A.ownerDocument||A).$$reactFormReplay,x!=null)for(E=0;E<x.length;E+=3){var L=x[E],K=x[E+1],le=L[en]||null;if(typeof K=="function")le||n7(x);else if(le){var be=null;if(K&&K.hasAttribute("formAction")){if(L=K,le=K[en]||null)be=le.formAction;else if(KB(L)!==null)continue}else be=le.action;typeof be=="function"?x[E+1]=be:(x.splice(E,3),E-=3),n7(x)}}}function WB(A){this._internalRoot=A}WE.prototype.render=WB.prototype.render=function(A){var m=this._internalRoot;if(m===null)throw Error(n(409));var x=m.current,E=vc();XU(x,E,A,m,null,null)},WE.prototype.unmount=WB.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var m=A.containerInfo;XU(A.current,2,null,A,null,null),TE(),m[dr]=null}};function WE(A){this._internalRoot=A}WE.prototype.unstable_scheduleHydration=function(A){if(A){var m=xn();A={blockedOn:null,target:A,priority:m};for(var x=0;x<m0.length&&m!==0&&m<m0[x].priority;x++);m0.splice(x,0,A),x===0&&t7(A)}};var a7=t.version;if(a7!=="19.1.1")throw Error(n(527,a7,"19.1.1"));Y.findDOMNode=function(A){var m=A._reactInternals;if(m===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=c(m),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var GAe={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var XE=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!XE.isDisabled&&XE.supportsFiber)try{mt=XE.inject(GAe),Tt=XE}catch{}}return jb.createRoot=function(A,m){if(!a(A))throw Error(n(299));var x=!1,E="",L=bM,K=yM,le=wM,be=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(L=m.onUncaughtError),m.onCaughtError!==void 0&&(K=m.onCaughtError),m.onRecoverableError!==void 0&&(le=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(be=m.unstable_transitionCallbacks)),m=qU(A,1,!1,null,null,x,E,L,K,le,be,null),A[dr]=m.current,jB(A),new WB(m)},jb.hydrateRoot=function(A,m,x){if(!a(A))throw Error(n(299));var E=!1,L="",K=bM,le=yM,be=wM,Pe=null,it=null;return x!=null&&(x.unstable_strictMode===!0&&(E=!0),x.identifierPrefix!==void 0&&(L=x.identifierPrefix),x.onUncaughtError!==void 0&&(K=x.onUncaughtError),x.onCaughtError!==void 0&&(le=x.onCaughtError),x.onRecoverableError!==void 0&&(be=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Pe=x.unstable_transitionCallbacks),x.formState!==void 0&&(it=x.formState)),m=qU(A,1,!0,m,x??null,E,L,K,le,be,Pe,it),m.context=WU(null),x=m.current,E=vc(),E=Lr(E),L=Ct(E),L.callback=null,Bt(x,L,E),x=E,m.current.lanes=x,gt(m,x),xA(m),A[dr]=m.current,jB(A),new WE(m)},jb.version="19.1.1",jb}var h7;function ife(){if(h7)return ZB.exports;h7=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ZB.exports=sfe(),ZB.exports}var ofe=ife();const lfe=wl(ofe),cfe=()=>{};var m7={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GX=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[r++]=a:a<2048?(t[r++]=a>>6|192,t[r++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=a>>18|240,t[r++]=a>>12&63|128,t[r++]=a>>6&63|128,t[r++]=a&63|128):(t[r++]=a>>12|224,t[r++]=a>>6&63|128,t[r++]=a&63|128)}return t},ufe=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const a=e[r++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const s=e[r++];t[n++]=String.fromCharCode((a&31)<<6|s&63)}else if(a>239&&a<365){const s=e[r++],i=e[r++],o=e[r++],c=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const s=e[r++],i=e[r++];t[n++]=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63)}}return t.join("")},KX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const s=e[a],i=a+1<e.length,o=i?e[a+1]:0,c=a+2<e.length,u=c?e[a+2]:0,d=s>>2,f=(s&3)<<4|o>>4;let h=(o&15)<<2|u>>6,p=u&63;c||(p=64,i||(h=64)),n.push(r[d],r[f],r[h],r[p])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(GX(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):ufe(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const s=r[e.charAt(a++)],o=a<e.length?r[e.charAt(a)]:0;++a;const u=a<e.length?r[e.charAt(a)]:64;++a;const f=a<e.length?r[e.charAt(a)]:64;if(++a,s==null||o==null||u==null||f==null)throw new dfe;const h=s<<2|o>>4;if(n.push(h),u!==64){const p=o<<4&240|u>>2;if(n.push(p),f!==64){const g=u<<6&192|f;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class dfe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Afe=function(e){const t=GX(e);return KX.encodeByteArray(t,!0)},pS=function(e){return Afe(e).replace(/\./g,"")},qX=function(e){try{return KX.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ffe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hfe=()=>ffe().__FIREBASE_DEFAULTS__,mfe=()=>{if(typeof process>"u"||typeof m7>"u")return;const e=m7.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},pfe=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&qX(e[1]);return t&&JSON.parse(t)},SN=()=>{try{return cfe()||hfe()||mfe()||pfe()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},WX=e=>{var t,r;return(r=(t=SN())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},ZO=e=>{const t=WX(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},XX=()=>{var e;return(e=SN())==null?void 0:e.config},YX=e=>{var t;return(t=SN())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gfe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function NN(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JX(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",a=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:a,exp:a+3600,auth_time:a,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[pS(JSON.stringify(r)),pS(JSON.stringify(i)),""].join(".")}const By={};function vfe(){const e={prod:[],emulator:[]};for(const t of Object.keys(By))By[t]?e.emulator.push(t):e.prod.push(t);return e}function xfe(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let p7=!1;function kN(e,t){if(typeof window>"u"||typeof document>"u"||!Nh(window.location.host)||By[e]===t||By[e]||p7)return;By[e]=t;function r(h){return`__firebase__banner__${h}`}const n="__firebase__banner",s=vfe().prod.length>0;function i(){const h=document.getElementById(n);h&&h.remove()}function o(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function c(h,p){h.setAttribute("width","24"),h.setAttribute("id",p),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{p7=!0,i()},h}function d(h,p){h.setAttribute("id",p),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=xfe(n),p=r("text"),g=document.getElementById(p)||document.createElement("span"),v=r("learnmore"),b=document.getElementById(v)||document.createElement("a"),y=r("preprendIcon"),C=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const N=h.element;o(N),d(b,v);const T=u();c(C,y),N.append(C,g,b,T),document.body.appendChild(N)}s?(g.innerText="Preview backend disconnected.",C.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(C.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",p)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bfe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zo())}function yfe(){var t;const e=(t=SN())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wfe(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Efe(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Cfe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _fe(){const e=Zo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Sfe(){return!yfe()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Nfe(){try{return typeof indexedDB=="object"}catch{return!1}}function kfe(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{r=!1},a.onerror=()=>{var s;t(((s=a.error)==null?void 0:s.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bfe="FirebaseError";class Pd extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=Bfe,Object.setPrototypeOf(this,Pd.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,a2.prototype.create)}}class a2{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},a=`${this.service}/${t}`,s=this.errors[t],i=s?Tfe(s,n):"Error",o=`${this.serviceName}: ${i} (${a}).`;return new Pd(a,o,n)}}function Tfe(e,t){return e.replace(jfe,(r,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const jfe=/\{\$([^}]+)}/g;function Ife(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function om(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const a of r){if(!n.includes(a))return!1;const s=e[a],i=t[a];if(g7(s)&&g7(i)){if(!om(s,i))return!1}else if(s!==i)return!1}for(const a of n)if(!r.includes(a))return!1;return!0}function g7(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function sy(e){const t={};return e.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[a,s]=n.split("=");t[decodeURIComponent(a)]=decodeURIComponent(s)}}),t}function iy(e){const t=e.indexOf("?");if(!t)return"";const r=e.indexOf("#",t);return e.substring(t,r>0?r:void 0)}function Ffe(e,t){const r=new Ofe(e,t);return r.subscribe.bind(r)}class Ofe{constructor(t,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(r=>{r.next(t)})}error(t){this.forEachObserver(r=>{r.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,r,n){let a;if(t===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Dfe(t,["next","error","complete"])?a=t:a={next:t,error:r,complete:n},a.next===void 0&&(a.next=nT),a.error===void 0&&(a.error=nT),a.complete===void 0&&(a.complete=nT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,t)}sendOne(t,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{r(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dfe(e,t){if(typeof e!="object"||e===null)return!1;for(const r of t)if(r in e&&typeof e[r]=="function")return!0;return!1}function nT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(e){return e&&e._delegate?e._delegate:e}class ch{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pfe=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new gfe;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:r});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Lfe(t))try{this.getOrInitializeService({instanceIdentifier:Ap})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);try{const s=this.getOrInitializeService({instanceIdentifier:a});n.resolve(s)}catch{}}}}clearInstance(t=Ap){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ap){return this.instances.has(t)}getOptions(t=Ap){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[s,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&i.resolve(a)}return a}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const s=this.instances.get(n);return s&&t(s,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const a of n)try{a(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Rfe(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Ap){return this.component?this.component.multipleInstances?t:Ap:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Rfe(e){return e===Ap?void 0:e}function Lfe(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mfe{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new Pfe(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Bn||(Bn={}));const Ufe={debug:Bn.DEBUG,verbose:Bn.VERBOSE,info:Bn.INFO,warn:Bn.WARN,error:Bn.ERROR,silent:Bn.SILENT},Qfe=Bn.INFO,Hfe={[Bn.DEBUG]:"log",[Bn.VERBOSE]:"log",[Bn.INFO]:"info",[Bn.WARN]:"warn",[Bn.ERROR]:"error"},Vfe=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=Hfe[t];if(a)console[a](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let eD=class{constructor(t){this.name=t,this._logLevel=Qfe,this._logHandler=Vfe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Bn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ufe[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Bn.DEBUG,...t),this._logHandler(this,Bn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Bn.VERBOSE,...t),this._logHandler(this,Bn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Bn.INFO,...t),this._logHandler(this,Bn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Bn.WARN,...t),this._logHandler(this,Bn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Bn.ERROR,...t),this._logHandler(this,Bn.ERROR,...t)}};const zfe=(e,t)=>t.some(r=>e instanceof r);let v7,x7;function $fe(){return v7||(v7=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Gfe(){return x7||(x7=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ZX=new WeakMap,KI=new WeakMap,eY=new WeakMap,aT=new WeakMap,tD=new WeakMap;function Kfe(e){const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{r(K0(e.result)),a()},i=()=>{n(e.error),a()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(r=>{r instanceof IDBCursor&&ZX.set(r,e)}).catch(()=>{}),tD.set(t,e),t}function qfe(e){if(KI.has(e))return;const t=new Promise((r,n)=>{const a=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{r(),a()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});KI.set(e,t)}let qI={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return KI.get(e);if(t==="objectStoreNames")return e.objectStoreNames||eY.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return K0(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Wfe(e){qI=e(qI)}function Xfe(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(sT(this),t,...r);return eY.set(n,t.sort?t.sort():[t]),K0(n)}:Gfe().includes(e)?function(...t){return e.apply(sT(this),t),K0(ZX.get(this))}:function(...t){return K0(e.apply(sT(this),t))}}function Yfe(e){return typeof e=="function"?Xfe(e):(e instanceof IDBTransaction&&qfe(e),zfe(e,$fe())?new Proxy(e,qI):e)}function K0(e){if(e instanceof IDBRequest)return Kfe(e);if(aT.has(e))return aT.get(e);const t=Yfe(e);return t!==e&&(aT.set(e,t),tD.set(t,e)),t}const sT=e=>tD.get(e);function Jfe(e,t,{blocked:r,upgrade:n,blocking:a,terminated:s}={}){const i=indexedDB.open(e,t),o=K0(i);return n&&i.addEventListener("upgradeneeded",c=>{n(K0(i.result),c.oldVersion,c.newVersion,K0(i.transaction),c)}),r&&i.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),a&&c.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Zfe=["get","getKey","getAll","getAllKeys","count"],ehe=["put","add","delete","clear"],iT=new Map;function b7(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(iT.get(t))return iT.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,a=ehe.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(a||Zfe.includes(r)))return;const s=async function(i,...o){const c=this.transaction(i,a?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),a&&c.done]))[0]};return iT.set(t,s),s}Wfe(e=>({...e,get:(t,r,n)=>b7(t,r)||e.get(t,r,n),has:(t,r)=>!!b7(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class the{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(rhe(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function rhe(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const WI="@firebase/app",y7="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new eD("@firebase/app"),nhe="@firebase/app-compat",ahe="@firebase/analytics-compat",she="@firebase/analytics",ihe="@firebase/app-check-compat",ohe="@firebase/app-check",lhe="@firebase/auth",che="@firebase/auth-compat",uhe="@firebase/database",dhe="@firebase/data-connect",Ahe="@firebase/database-compat",fhe="@firebase/functions",hhe="@firebase/functions-compat",mhe="@firebase/installations",phe="@firebase/installations-compat",ghe="@firebase/messaging",vhe="@firebase/messaging-compat",xhe="@firebase/performance",bhe="@firebase/performance-compat",yhe="@firebase/remote-config",whe="@firebase/remote-config-compat",Ehe="@firebase/storage",Che="@firebase/storage-compat",_he="@firebase/firestore",She="@firebase/ai",Nhe="@firebase/firestore-compat",khe="firebase",Bhe="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI="[DEFAULT]",The={[WI]:"fire-core",[nhe]:"fire-core-compat",[she]:"fire-analytics",[ahe]:"fire-analytics-compat",[ohe]:"fire-app-check",[ihe]:"fire-app-check-compat",[lhe]:"fire-auth",[che]:"fire-auth-compat",[uhe]:"fire-rtdb",[dhe]:"fire-data-connect",[Ahe]:"fire-rtdb-compat",[fhe]:"fire-fn",[hhe]:"fire-fn-compat",[mhe]:"fire-iid",[phe]:"fire-iid-compat",[ghe]:"fire-fcm",[vhe]:"fire-fcm-compat",[xhe]:"fire-perf",[bhe]:"fire-perf-compat",[yhe]:"fire-rc",[whe]:"fire-rc-compat",[Ehe]:"fire-gcs",[Che]:"fire-gcs-compat",[_he]:"fire-fst",[Nhe]:"fire-fst-compat",[She]:"fire-vertex","fire-js":"fire-js",[khe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=new Map,jhe=new Map,YI=new Map;function w7(e,t){try{e.container.addComponent(t)}catch(r){uh.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function lm(e){const t=e.name;if(YI.has(t))return uh.debug(`There were multiple attempts to register component ${t}.`),!1;YI.set(t,e);for(const r of aw.values())w7(r,e);for(const r of jhe.values())w7(r,e);return!0}function i2(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function Nc(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ihe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},q0=new a2("app","Firebase",Ihe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fhe{constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ch("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw q0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=Bhe;function rD(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:XI,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw q0.create("bad-app-name",{appName:String(a)});if(r||(r=XX()),!r)throw q0.create("no-options");const s=aw.get(a);if(s){if(om(r,s.options)&&om(n,s.config))return s;throw q0.create("duplicate-app",{appName:a})}const i=new Mfe(a);for(const c of YI.values())i.addComponent(c);const o=new Fhe(r,n,i);return aw.set(a,o),o}function BN(e=XI){const t=aw.get(e);if(!t&&e===XI&&XX())return rD();if(!t)throw q0.create("no-app",{appName:e});return t}function E7(){return Array.from(aw.values())}function Fu(e,t,r){let n=The[e]??e;r&&(n+=`-${r}`);const a=n.match(/\s|\//),s=t.match(/\s|\//);if(a||s){const i=[`Unable to register library "${n}" with version "${t}":`];a&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&s&&i.push("and"),s&&i.push(`version name "${t}" contains illegal characters (whitespace or "/")`),uh.warn(i.join(" "));return}lm(new ch(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ohe="firebase-heartbeat-database",Dhe=1,sw="firebase-heartbeat-store";let oT=null;function tY(){return oT||(oT=Jfe(Ohe,Dhe,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(sw)}catch(r){console.warn(r)}}}}).catch(e=>{throw q0.create("idb-open",{originalErrorMessage:e.message})})),oT}async function Phe(e){try{const r=(await tY()).transaction(sw),n=await r.objectStore(sw).get(rY(e));return await r.done,n}catch(t){if(t instanceof Pd)uh.warn(t.message);else{const r=q0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});uh.warn(r.message)}}}async function C7(e,t){try{const n=(await tY()).transaction(sw,"readwrite");await n.objectStore(sw).put(t,rY(e)),await n.done}catch(r){if(r instanceof Pd)uh.warn(r.message);else{const n=q0.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});uh.warn(n.message)}}}function rY(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rhe=1024,Lhe=30;class Mhe{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Qhe(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_7();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(i=>i.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:a}),this._heartbeatsCache.heartbeats.length>Lhe){const i=Hhe(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){uh.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=_7(),{heartbeatsToSend:n,unsentEntries:a}=Uhe(this._heartbeatsCache.heartbeats),s=pS(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(r){return uh.warn(r),""}}}function _7(){return new Date().toISOString().substring(0,10)}function Uhe(e,t=Rhe){const r=[];let n=e.slice();for(const a of e){const s=r.find(i=>i.agent===a.agent);if(s){if(s.dates.push(a.date),S7(r)>t){s.dates.pop();break}}else if(r.push({agent:a.agent,dates:[a.date]}),S7(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Qhe{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nfe()?kfe().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Phe(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return C7(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return C7(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function S7(e){return pS(JSON.stringify({version:2,heartbeats:e})).length}function Hhe(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vhe(e){lm(new ch("platform-logger",t=>new the(t),"PRIVATE")),lm(new ch("heartbeat",t=>new Mhe(t),"PRIVATE")),Fu(WI,y7,e),Fu(WI,y7,"esm2020"),Fu("fire-js","")}Vhe("");function nY(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zhe=nY,aY=new a2("auth","Firebase",nY());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=new eD("@firebase/auth");function $he(e,...t){gS.logLevel<=Bn.WARN&&gS.warn(`Auth (${fg}): ${e}`,...t)}function __(e,...t){gS.logLevel<=Bn.ERROR&&gS.error(`Auth (${fg}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(e,...t){throw nD(e,...t)}function QA(e,...t){return nD(e,...t)}function sY(e,t,r){const n={...zhe(),[t]:r};return new a2("auth","Firebase",n).create(t,{appName:e.name})}function W0(e){return sY(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nD(e,...t){if(typeof e!="string"){const r=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(r,...n)}return aY.create(e,...t)}function Hr(e,t,...r){if(!e)throw nD(t,...r)}function $f(e){const t="INTERNAL ASSERTION FAILED: "+e;throw __(t),new Error(t)}function dh(e,t){e||$f(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function Ghe(){return N7()==="http:"||N7()==="https:"}function N7(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Khe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ghe()||Efe()||"connection"in navigator)?navigator.onLine:!0}function qhe(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t,r){this.shortDelay=t,this.longDelay=r,dh(r>t,"Short delay should be less than long delay!"),this.isMobile=bfe()||Cfe()}get(){return Khe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(e,t){dh(e.emulator,"Emulator should always be set here");const{url:r}=e.emulator;return t?`${r}${t.startsWith("/")?t.slice(1):t}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{static initialize(t,r,n){this.fetchImpl=t,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$f("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$f("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$f("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Whe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xhe=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Yhe=new o2(3e4,6e4);function _m(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function kh(e,t,r,n,a={}){return oY(e,a,async()=>{let s={},i={};n&&(t==="GET"?i=n:s={body:JSON.stringify(n)});const o=s2({key:e.config.apiKey,...i}).slice(1),c=await e._getAdditionalHeaders();c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode);const u={method:t,headers:c,...s};return wfe()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Nh(e.emulatorConfig.host)&&(u.credentials="include"),iY.fetch()(await lY(e,e.config.apiHost,r,o),u)})}async function oY(e,t,r){e._canInitEmulator=!1;const n={...Whe,...t};try{const a=new Zhe(e),s=await Promise.race([r(),a.promise]);a.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw YE(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const o=s.ok?i.errorMessage:i.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw YE(e,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw YE(e,"email-already-in-use",i);if(c==="USER_DISABLED")throw YE(e,"user-disabled",i);const d=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw sY(e,d,u);Id(e,d)}}catch(a){if(a instanceof Pd)throw a;Id(e,"network-request-failed",{message:String(a)})}}async function TN(e,t,r,n,a={}){const s=await kh(e,t,r,n,a);return"mfaPendingCredential"in s&&Id(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function lY(e,t,r,n){const a=`${t}${r}?${n}`,s=e,i=s.config.emulator?aD(e.config,a):`${e.config.apiScheme}://${a}`;return Xhe.includes(r)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(i).toString():i}function Jhe(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Zhe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(QA(this.auth,"network-request-failed")),Yhe.get())})}}function YE(e,t,r){const n={appName:e.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const a=QA(e,t,n);return a.customData._tokenResponse=r,a}function k7(e){return e!==void 0&&e.enterprise!==void 0}class e0e{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===t)return Jhe(r.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function t0e(e,t){return kh(e,"GET","/v2/recaptchaConfig",_m(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r0e(e,t){return kh(e,"POST","/v1/accounts:delete",t)}async function vS(e,t){return kh(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function n0e(e,t=!1){const r=Jn(e),n=await r.getIdToken(t),a=sD(n);Hr(a&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error");const s=typeof a.firebase=="object"?a.firebase:void 0,i=s==null?void 0:s.sign_in_provider;return{claims:a,token:n,authTime:Ty(lT(a.auth_time)),issuedAtTime:Ty(lT(a.iat)),expirationTime:Ty(lT(a.exp)),signInProvider:i||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function lT(e){return Number(e)*1e3}function sD(e){const[t,r,n]=e.split(".");if(t===void 0||r===void 0||n===void 0)return __("JWT malformed, contained fewer than 3 sections"),null;try{const a=qX(r);return a?JSON.parse(a):(__("Failed to decode base64 JWT payload"),null)}catch(a){return __("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function B7(e){const t=sD(e);return Hr(t,"internal-error"),Hr(typeof t.exp<"u","internal-error"),Hr(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iw(e,t,r=!1){if(r)return t;try{return await t}catch(n){throw n instanceof Pd&&a0e(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function a0e({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0e{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const r=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(t,r){this.createdAt=t,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ty(this.lastLoginAt),this.creationTime=Ty(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(e){var f;const t=e.auth,r=await e.getIdToken(),n=await iw(e,vS(t,{idToken:r}));Hr(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const s=(f=a.providerUserInfo)!=null&&f.length?cY(a.providerUserInfo):[],i=o0e(e.providerData,s),o=e.isAnonymous,c=!(e.email&&a.passwordHash)&&!(i!=null&&i.length),u=o?c:!1,d={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new ZI(a.createdAt,a.lastLoginAt),isAnonymous:u};Object.assign(e,d)}async function i0e(e){const t=Jn(e);await xS(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function o0e(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function cY(e){return e.map(({providerId:t,...r})=>({providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l0e(e,t){const r=await oY(e,{},async()=>{const n=s2({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:s}=e.config,i=await lY(e,a,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:n};return e.emulatorConfig&&Nh(e.emulatorConfig.host)&&(c.credentials="include"),iY.fetch()(i,c)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function c0e(e,t){return kh(e,"POST","/v2/accounts:revokeToken",_m(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Hr(t.idToken,"internal-error"),Hr(typeof t.idToken<"u","internal-error"),Hr(typeof t.refreshToken<"u","internal-error");const r="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):B7(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,r)}updateFromIdToken(t){Hr(t.length!==0,"internal-error");const r=B7(t);this.updateTokensAndExpiration(t,null,r)}async getToken(t,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Hr(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,r){const{accessToken:n,refreshToken:a,expiresIn:s}=await l0e(t,r);this.updateTokensAndExpiration(n,a,Number(s))}updateTokensAndExpiration(t,r,n){this.refreshToken=r||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,r){const{refreshToken:n,accessToken:a,expirationTime:s}=r,i=new sx;return n&&(Hr(typeof n=="string","internal-error",{appName:t}),i.refreshToken=n),a&&(Hr(typeof a=="string","internal-error",{appName:t}),i.accessToken=a),s&&(Hr(typeof s=="number","internal-error",{appName:t}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new sx,this.toJSON())}_performRefresh(){return $f("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(e,t){Hr(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class bd{constructor({uid:t,auth:r,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new s0e(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new ZI(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const r=await iw(this,this.stsTokenManager.getToken(this.auth,t));return Hr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(t){return n0e(this,t)}reload(){return i0e(this)}_assign(t){this!==t&&(Hr(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(r=>({...r})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const r=new bd({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(t){Hr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,r=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),r&&await xS(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nc(this.auth.app))return Promise.reject(W0(this.auth));const t=await this.getIdToken();return await iw(this,r0e(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,r){const n=r.displayName??void 0,a=r.email??void 0,s=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,c=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:f,emailVerified:h,isAnonymous:p,providerData:g,stsTokenManager:v}=r;Hr(f&&v,t,"internal-error");const b=sx.fromJSON(this.name,v);Hr(typeof f=="string",t,"internal-error"),g0(n,t.name),g0(a,t.name),Hr(typeof h=="boolean",t,"internal-error"),Hr(typeof p=="boolean",t,"internal-error"),g0(s,t.name),g0(i,t.name),g0(o,t.name),g0(c,t.name),g0(u,t.name),g0(d,t.name);const y=new bd({uid:f,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:p,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:b,createdAt:u,lastLoginAt:d});return g&&Array.isArray(g)&&(y.providerData=g.map(C=>({...C}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(t,r,n=!1){const a=new sx;a.updateFromServerResponse(r);const s=new bd({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await xS(s),s}static async _fromGetAccountInfoResponse(t,r,n){const a=r.users[0];Hr(a.localId!==void 0,"internal-error");const s=a.providerUserInfo!==void 0?cY(a.providerUserInfo):[],i=!(a.email&&a.passwordHash)&&!(s!=null&&s.length),o=new sx;o.updateFromIdToken(n);const c=new bd({uid:a.localId,auth:t,stsTokenManager:o,isAnonymous:i}),u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new ZI(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=new Map;function Gf(e){dh(e instanceof Function,"Expected a class definition");let t=T7.get(e);return t?(dh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,T7.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){const r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}uY.type="NONE";const j7=uY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(e,t,r){return`firebase:${e}:${t}:${r}`}class ix{constructor(t,r,n){this.persistence=t,this.auth=r,this.userKey=n;const{config:a,name:s}=this.auth;this.fullUserKey=S_(this.userKey,a.apiKey,s),this.fullPersistenceKey=S_("persistence",a.apiKey,s),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const r=await vS(this.auth,{idToken:t}).catch(()=>{});return r?bd._fromGetAccountInfoResponse(this.auth,r,t):null}return bd._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,r,n="authUser"){if(!r.length)return new ix(Gf(j7),t,n);const a=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=a[0]||Gf(j7);const i=S_(n,t.config.apiKey,t.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let f;if(typeof d=="string"){const h=await vS(t,{idToken:d}).catch(()=>{});if(!h)break;f=await bd._fromGetAccountInfoResponse(t,h,d)}else f=bd._fromJSON(t,d);u!==s&&(o=f),s=u;break}}catch{}const c=a.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new ix(s,t,n):(s=c[0],o&&await s._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==s)try{await u._remove(i)}catch{}})),new ix(s,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(hY(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(dY(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pY(t))return"Blackberry";if(gY(t))return"Webos";if(AY(t))return"Safari";if((t.includes("chrome/")||fY(t))&&!t.includes("edge/"))return"Chrome";if(mY(t))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function dY(e=Zo()){return/firefox\//i.test(e)}function AY(e=Zo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function fY(e=Zo()){return/crios\//i.test(e)}function hY(e=Zo()){return/iemobile/i.test(e)}function mY(e=Zo()){return/android/i.test(e)}function pY(e=Zo()){return/blackberry/i.test(e)}function gY(e=Zo()){return/webos/i.test(e)}function iD(e=Zo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function u0e(e=Zo()){var t;return iD(e)&&!!((t=window.navigator)!=null&&t.standalone)}function d0e(){return _fe()&&document.documentMode===10}function vY(e=Zo()){return iD(e)||mY(e)||gY(e)||pY(e)||/windows phone/i.test(e)||hY(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xY(e,t=[]){let r;switch(e){case"Browser":r=I7(Zo());break;case"Worker":r=`${I7(Zo())}-${e}`;break;default:r=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${r}/JsCore/${fg}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0e{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,r){const n=s=>new Promise((i,o)=>{try{const c=t(s);i(c)}catch(c){o(c)}});n.onAbort=r,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const r=[];try{for(const n of this.queue)await n(t),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const a of r)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0e(e,t={}){return kh(e,"GET","/v2/passwordPolicy",_m(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0e=6;class m0e{constructor(t){var n;const r=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??h0e,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,r),this.validatePasswordCharacterOptions(t,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(t,r){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=t.length>=n),a&&(r.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,r,n,a,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0e{constructor(t,r,n,a){this.app=t,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F7(this),this.idTokenSubscription=new F7(this),this.beforeStateQueue=new A0e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(t,r){return r&&(this._popupRedirectResolver=Gf(r)),this._initializationPromise=this.queue(async()=>{var n,a,s;if(!this._deleted&&(this.persistenceManager=await ix.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const r=await vS(this,{idToken:t}),n=await bd._fromGetAccountInfoResponse(this,r,t);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var s;if(Nc(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=n==null?void 0:n._redirectEventId,c=await this.tryRedirectSignIn(t);(!i||i===o)&&(c!=null&&c.user)&&(n=c.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Hr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(t){try{await xS(t)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=qhe()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Nc(this.app))return Promise.reject(W0(this));const r=t?Jn(t):null;return r&&Hr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(t,r=!1){if(!this._deleted)return t&&Hr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Nc(this.app)?Promise.reject(W0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Nc(this.app)?Promise.reject(W0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gf(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await f0e(this),r=new m0e(t);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new a2("auth","Firebase",t())}onAuthStateChanged(t,r,n){return this.registerStateListener(this.authStateSubscription,t,r,n)}beforeAuthStateChanged(t,r){return this.beforeStateQueue.pushCallback(t,r)}onIdTokenChanged(t,r,n){return this.registerStateListener(this.idTokenSubscription,t,r,n)}authStateReady(){return new Promise((t,r)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},r)}})}async revokeAccessToken(t){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await c0e(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,r){const n=await this.getOrInitRedirectPersistenceManager(r);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const r=t&&Gf(t)||this._popupRedirectResolver;Hr(r,this,"argument-error"),this.redirectPersistenceManager=await ix.create(this,[Gf(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,r,n,a){if(this._deleted)return()=>{};const s=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Hr(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),typeof r=="function"){const c=t.addObserver(r,n,a);return()=>{i=!0,c()}}else{const c=t.addObserver(r);return()=>{i=!0,c()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Hr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=xY(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var r;if(Nc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return t!=null&&t.error&&$he(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function hg(e){return Jn(e)}class F7{constructor(t){this.auth=t,this.observer=null,this.addObserver=Ffe(r=>this.observer=r)}get next(){return Hr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jN={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function g0e(e){jN=e}function bY(e){return jN.loadJS(e)}function v0e(){return jN.recaptchaEnterpriseScript}function x0e(){return jN.gapiScript}function b0e(e){return`__${e}${Math.floor(Math.random()*1e6)}`}class y0e{constructor(){this.enterprise=new w0e}ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}class w0e{ready(t){t()}execute(t,r){return Promise.resolve("token")}render(t,r){return""}}const E0e="recaptcha-enterprise",yY="NO_RECAPTCHA";class C0e{constructor(t){this.type=E0e,this.auth=hg(t)}async verify(t="verify",r=!1){async function n(s){if(!r){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(i,o)=>{t0e(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new e0e(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,i(u.siteKey)}}).catch(c=>{o(c)})})}function a(s,i,o){const c=window.grecaptcha;k7(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:t}).then(u=>{i(u)}).catch(()=>{i(yY)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new y0e().execute("siteKey",{action:"verify"}):new Promise((s,i)=>{n(this.auth).then(o=>{if(!r&&k7(window.grecaptcha))a(o,s,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=v0e();c.length!==0&&(c+=o),bY(c).then(()=>{a(o,s,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function O7(e,t,r,n=!1,a=!1){const s=new C0e(e);let i;if(a)i=yY;else try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o={...t};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function eF(e,t,r,n,a){var s;if((s=e._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await O7(e,t,r,r==="getOobCode");return n(e,i)}else return n(e,t).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await O7(e,t,r,r==="getOobCode");return n(e,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0e(e,t){const r=i2(e,"auth");if(r.isInitialized()){const a=r.getImmediate(),s=r.getOptions();if(om(s,t??{}))return a;Id(a,"already-initialized")}return r.initialize({options:t})}function S0e(e,t){const r=(t==null?void 0:t.persistence)||[],n=(Array.isArray(r)?r:[r]).map(Gf);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function N0e(e,t,r){const n=hg(e);Hr(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,s=wY(t),{host:i,port:o}=k0e(t),c=o===null?"":`:${o}`,u={url:`${s}//${i}${c}/`},d=Object.freeze({host:i,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){Hr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Hr(om(u,n.config.emulator)&&om(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Nh(i)?(NN(`${s}//${i}${c}`),kN("Auth",!0)):B0e()}function wY(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function k0e(e){const t=wY(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const s=a[1];return{host:s,port:D7(n.substr(s.length+1))}}else{const[s,i]=n.split(":");return{host:s,port:D7(i)}}}function D7(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function B0e(){function e(){const t=document.createElement("p"),r=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(t,r){this.providerId=t,this.signInMethod=r}toJSON(){return $f("not implemented")}_getIdTokenResponse(t){return $f("not implemented")}_linkToIdToken(t,r){return $f("not implemented")}_getReauthenticationResolver(t){return $f("not implemented")}}async function T0e(e,t){return kh(e,"POST","/v1/accounts:signUp",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j0e(e,t){return TN(e,"POST","/v1/accounts:signInWithPassword",_m(e,t))}async function I0e(e,t){return kh(e,"POST","/v1/accounts:sendOobCode",_m(e,t))}async function F0e(e,t){return I0e(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O0e(e,t){return TN(e,"POST","/v1/accounts:signInWithEmailLink",_m(e,t))}async function D0e(e,t){return TN(e,"POST","/v1/accounts:signInWithEmailLink",_m(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow extends oD{constructor(t,r,n,a=null){super("password",n),this._email=t,this._password=r,this._tenantId=a}static _fromEmailAndPassword(t,r){return new ow(t,r,"password")}static _fromEmailAndCode(t,r,n=null){return new ow(t,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eF(t,r,"signInWithPassword",j0e);case"emailLink":return O0e(t,{email:this._email,oobCode:this._password});default:Id(t,"internal-error")}}async _linkToIdToken(t,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return eF(t,n,"signUpPassword",T0e);case"emailLink":return D0e(t,{idToken:r,email:this._email,oobCode:this._password});default:Id(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(e,t){return TN(e,"POST","/v1/accounts:signInWithIdp",_m(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0e="http://localhost";class Wp extends oD{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const r=new Wp(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(r.idToken=t.idToken),t.accessToken&&(r.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(r.nonce=t.nonce),t.pendingToken&&(r.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(r.accessToken=t.oauthToken,r.secret=t.oauthTokenSecret):Id("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const r=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...s}=r;if(!n||!a)return null;const i=new Wp(n,a);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(t){const r=this.buildRequest();return ox(t,r)}_linkToIdToken(t,r){const n=this.buildRequest();return n.idToken=r,ox(t,n)}_getReauthenticationResolver(t){const r=this.buildRequest();return r.autoCreate=!1,ox(t,r)}buildRequest(){const t={requestUri:P0e,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),t.postBody=s2(r)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0e(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function L0e(e){const t=sy(iy(e)).link,r=t?sy(iy(t)).deep_link_id:null,n=sy(iy(e)).deep_link_id;return(n?sy(iy(n)).link:null)||n||r||t||e}class lD{constructor(t){const r=sy(iy(t)),n=r.apiKey??null,a=r.oobCode??null,s=R0e(r.mode??null);Hr(n&&a&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=a,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(t){const r=L0e(t);try{return new lD(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(){this.providerId=A1.PROVIDER_ID}static credential(t,r){return ow._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){const n=lD.parseLink(r);return Hr(n,"argument-error"),ow._fromEmailAndCode(t,n.code,n.tenantId)}}A1.PROVIDER_ID="password";A1.EMAIL_PASSWORD_SIGN_IN_METHOD="password";A1.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EY{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2 extends EY{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0 extends l2{constructor(){super("facebook.com")}static credential(t){return Wp._fromParams({providerId:I0.PROVIDER_ID,signInMethod:I0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return I0.credentialFromTaggedObject(t)}static credentialFromError(t){return I0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return I0.credential(t.oauthAccessToken)}catch{return null}}}I0.FACEBOOK_SIGN_IN_METHOD="facebook.com";I0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends l2{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Wp._fromParams({providerId:F0.PROVIDER_ID,signInMethod:F0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return F0.credentialFromTaggedObject(t)}static credentialFromError(t){return F0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:r,oauthAccessToken:n}=t;if(!r&&!n)return null;try{return F0.credential(r,n)}catch{return null}}}F0.GOOGLE_SIGN_IN_METHOD="google.com";F0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0 extends l2{constructor(){super("github.com")}static credential(t){return Wp._fromParams({providerId:O0.PROVIDER_ID,signInMethod:O0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return O0.credentialFromTaggedObject(t)}static credentialFromError(t){return O0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return O0.credential(t.oauthAccessToken)}catch{return null}}}O0.GITHUB_SIGN_IN_METHOD="github.com";O0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0 extends l2{constructor(){super("twitter.com")}static credential(t,r){return Wp._fromParams({providerId:D0.PROVIDER_ID,signInMethod:D0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:r})}static credentialFromResult(t){return D0.credentialFromTaggedObject(t)}static credentialFromError(t){return D0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=t;if(!r||!n)return null;try{return D0.credential(r,n)}catch{return null}}}D0.TWITTER_SIGN_IN_METHOD="twitter.com";D0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,r,n,a=!1){const s=await bd._fromIdTokenResponse(t,n,a),i=P7(n);return new kx({user:s,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(t,r,n){await t._updateTokensIfNecessary(n,!0);const a=P7(n);return new kx({user:t,providerId:a,_tokenResponse:n,operationType:r})}}function P7(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS extends Pd{constructor(t,r,n,a){super(r.code,r.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,bS.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,r,n,a){return new bS(t,r,n,a)}}function CY(e,t,r,n){return(t==="reauthenticate"?r._getReauthenticationResolver(e):r._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?bS._fromErrorAndOperation(e,s,t,n):s})}async function M0e(e,t,r=!1){const n=await iw(e,t._linkToIdToken(e.auth,await e.getIdToken()),r);return kx._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U0e(e,t,r=!1){const{auth:n}=e;if(Nc(n.app))return Promise.reject(W0(n));const a="reauthenticate";try{const s=await iw(e,CY(n,a,t,e),r);Hr(s.idToken,n,"internal-error");const i=sD(s.idToken);Hr(i,n,"internal-error");const{sub:o}=i;return Hr(e.uid===o,n,"user-mismatch"),kx._forOperation(e,a,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Id(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _Y(e,t,r=!1){if(Nc(e.app))return Promise.reject(W0(e));const n="signIn",a=await CY(e,n,t),s=await kx._fromIdTokenResponse(e,n,a);return r||await e._updateCurrentUser(s.user),s}async function Q0e(e,t){return _Y(hg(e),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H0e(e){const t=hg(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function V0e(e,t,r){const n=hg(e);await eF(n,{requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"},"getOobCode",F0e)}function z0e(e,t,r){return Nc(e.app)?Promise.reject(W0(e)):Q0e(Jn(e),A1.credential(t,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&H0e(e),n})}function $0e(e,t,r,n){return Jn(e).onIdTokenChanged(t,r,n)}function G0e(e,t,r){return Jn(e).beforeAuthStateChanged(t,r)}function SY(e,t,r,n){return Jn(e).onAuthStateChanged(t,r,n)}function K0e(e){return Jn(e).signOut()}const yS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NY{constructor(t,r){this.storageRetriever=t,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(yS,"1"),this.storage.removeItem(yS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,r){return this.storage.setItem(t,JSON.stringify(r)),Promise.resolve()}_get(t){const r=this.storage.getItem(t);return Promise.resolve(r?JSON.parse(r):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0e=1e3,W0e=10;class kY extends NY{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vY(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),a=this.localCache[r];n!==a&&t(r,a,n)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((i,o,c)=>{this.notifyListeners(i,c)});return}const n=t.key;r?this.detachListener():this.stopPolling();const a=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},s=this.storage.getItem(n);d0e()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,W0e):a()}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:n}),!0)})},q0e)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){const r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}kY.type="LOCAL";const X0e=kY;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BY extends NY{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}BY.type="SESSION";const TY=BY;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0e(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const r=this.receivers.find(a=>a.isListeningto(t));if(r)return r;const n=new IN(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const r=t,{eventId:n,eventType:a,data:s}=r.data,i=this.handlersMap[a];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const o=Array.from(i).map(async u=>u(r.origin,s)),c=await Y0e(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:c})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}IN.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(e="",t=10){let r="";for(let n=0;n<t;n++)r+=Math.floor(Math.random()*10);return e+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0e{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,r,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let s,i;return new Promise((o,c)=>{const u=cD("",20);a.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},n);i={messageChannel:a,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(h.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(i),a.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:t,eventId:u,data:r},[a.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(){return window}function Z0e(e){HA().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jY(){return typeof HA().WorkerGlobalScope<"u"&&typeof HA().importScripts=="function"}async function eme(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tme(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function rme(){return jY()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IY="firebaseLocalStorageDb",nme=1,wS="firebaseLocalStorage",FY="fbase_key";class c2{constructor(t){this.request=t}toPromise(){return new Promise((t,r)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function FN(e,t){return e.transaction([wS],t?"readwrite":"readonly").objectStore(wS)}function ame(){const e=indexedDB.deleteDatabase(IY);return new c2(e).toPromise()}function tF(){const e=indexedDB.open(IY,nme);return new Promise((t,r)=>{e.addEventListener("error",()=>{r(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(wS,{keyPath:FY})}catch(a){r(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(wS)?t(n):(n.close(),await ame(),t(await tF()))})})}async function R7(e,t,r){const n=FN(e,!0).put({[FY]:t,value:r});return new c2(n).toPromise()}async function sme(e,t){const r=FN(e,!1).get(t),n=await new c2(r).toPromise();return n===void 0?null:n.value}function L7(e,t){const r=FN(e,!0).delete(t);return new c2(r).toPromise()}const ime=800,ome=3;class OY{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tF(),this.db)}async _withRetries(t){let r=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(r++>ome)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jY()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=IN._getInstance(rme()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await eme(),!this.activeServiceWorker)return;this.sender=new J0e(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(r=t[0])!=null&&r.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||tme()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await tF();return await R7(t,yS,"1"),await L7(t,yS),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>R7(n,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){const r=await this._withRetries(n=>sme(n,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>L7(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const s=FN(a,!1).getAll();return new c2(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:s}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(s)&&(this.notifyListeners(a,s),r.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),r.push(a));return r}notifyListeners(t,r){this.localCache[t]=r;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ime)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}OY.type="LOCAL";const lme=OY;new o2(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cme(e,t){return t?Gf(t):(Hr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD extends oD{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return ox(t,this._buildIdpRequest())}_linkToIdToken(t,r){return ox(t,this._buildIdpRequest(r))}_getReauthenticationResolver(t){return ox(t,this._buildIdpRequest())}_buildIdpRequest(t){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(r.idToken=t),r}}function ume(e){return _Y(e.auth,new uD(e),e.bypassAuthState)}function dme(e){const{auth:t,user:r}=e;return Hr(r,t,"internal-error"),U0e(r,new uD(e),e.bypassAuthState)}async function Ame(e){const{auth:t,user:r}=e;return Hr(r,t,"internal-error"),M0e(r,new uD(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DY{constructor(t,r,n,a,s=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(t,r)=>{this.pendingPromise={resolve:t,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:r,sessionId:n,postBody:a,tenantId:s,error:i,type:o}=t;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:r,sessionId:n,tenantId:s||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ume;case"linkViaPopup":case"linkViaRedirect":return Ame;case"reauthViaPopup":case"reauthViaRedirect":return dme;default:Id(this.auth,"internal-error")}}resolve(t){dh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){dh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fme=new o2(2e3,1e4);class zv extends DY{constructor(t,r,n,a,s){super(t,r,a,s),this.provider=n,this.authWindow=null,this.pollId=null,zv.currentPopupAction&&zv.currentPopupAction.cancel(),zv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Hr(t,this.auth,"internal-error"),t}async onExecution(){dh(this.filter.length===1,"Popup operations only handle one event");const t=cD();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(QA(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(QA(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(QA(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,fme.get())};t()}}zv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hme="pendingRedirect",N_=new Map;class mme extends DY{constructor(t,r,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let t=N_.get(this.auth._key());if(!t){try{const n=await pme(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(r){t=()=>Promise.reject(r)}N_.set(this.auth._key(),t)}return this.bypassAuthState||N_.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const r=await this.auth._redirectUserForId(t.eventId);if(r)return this.user=r,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pme(e,t){const r=xme(t),n=vme(e);if(!await n._isAvailable())return!1;const a=await n._get(r)==="true";return await n._remove(r),a}function gme(e,t){N_.set(e._key(),t)}function vme(e){return Gf(e._redirectPersistence)}function xme(e){return S_(hme,e.config.apiKey,e.name)}async function bme(e,t,r=!1){if(Nc(e.app))return Promise.reject(W0(e));const n=hg(e),a=cme(n,t),i=await new mme(n,a,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,t)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yme=600*1e3;class wme{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(r=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Eme(t)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=t,r=!0)),r}sendToConsumer(t,r){var n;if(t.error&&!PY(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(QA(this.auth,a))}else r.onAuthEvent(t)}isEventForConsumer(t,r){const n=r.eventId===null||!!t.eventId&&t.eventId===r.eventId;return r.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=yme&&this.cachedEventUids.clear(),this.cachedEventUids.has(M7(t))}saveEventToCache(t){this.cachedEventUids.add(M7(t)),this.lastProcessedEventTime=Date.now()}}function M7(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function PY({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Eme(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PY(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cme(e,t={}){return kh(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _me=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sme=/^https?/;async function Nme(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Cme(e);for(const r of t)try{if(kme(r))return}catch{}Id(e,"unauthorized-domain")}function kme(e){const t=JI(),{protocol:r,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return i.hostname===""&&n===""?r==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Sme.test(r))return!1;if(_me.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bme=new o2(3e4,6e4);function U7(){const e=HA().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let r=0;r<e.CP.length;r++)e.CP[r]=null}}function Tme(e){return new Promise((t,r)=>{var a,s,i;function n(){U7(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{U7(),r(QA(e,"network-request-failed"))},timeout:Bme.get()})}if((s=(a=HA().gapi)==null?void 0:a.iframes)!=null&&s.Iframe)t(gapi.iframes.getContext());else if((i=HA().gapi)!=null&&i.load)n();else{const o=b0e("iframefcb");return HA()[o]=()=>{gapi.load?n():r(QA(e,"network-request-failed"))},bY(`${x0e()}?onload=${o}`).catch(c=>r(c))}}).catch(t=>{throw k_=null,t})}let k_=null;function jme(e){return k_=k_||Tme(e),k_}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ime=new o2(5e3,15e3),Fme="__/auth/iframe",Ome="emulator/auth/iframe",Dme={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Pme=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Rme(e){const t=e.config;Hr(t.authDomain,e,"auth-domain-config-required");const r=t.emulator?aD(t,Ome):`https://${e.config.authDomain}/${Fme}`,n={apiKey:t.apiKey,appName:e.name,v:fg},a=Pme.get(e.config.apiHost);a&&(n.eid=a);const s=e._getFrameworks();return s.length&&(n.fw=s.join(",")),`${r}?${s2(n).slice(1)}`}async function Lme(e){const t=await jme(e),r=HA().gapi;return Hr(r,e,"internal-error"),t.open({where:document.body,url:Rme(e),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dme,dontclear:!0},n=>new Promise(async(a,s)=>{await n.restyle({setHideOnLeave:!1});const i=QA(e,"network-request-failed"),o=HA().setTimeout(()=>{s(i)},Ime.get());function c(){HA().clearTimeout(o),a(n)}n.ping(c).then(c,()=>{s(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mme={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ume=500,Qme=600,Hme="_blank",Vme="http://localhost";class Q7{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zme(e,t,r,n=Ume,a=Qme){const s=Math.max((window.screen.availHeight-a)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c={...Mme,width:n.toString(),height:a.toString(),top:s,left:i},u=Zo().toLowerCase();r&&(o=fY(u)?Hme:r),dY(u)&&(t=t||Vme,c.scrollbars="yes");const d=Object.entries(c).reduce((h,[p,g])=>`${h}${p}=${g},`,"");if(u0e(u)&&o!=="_self")return $me(t||"",o),new Q7(null);const f=window.open(t||"",o,d);Hr(f,e,"popup-blocked");try{f.focus()}catch{}return new Q7(f)}function $me(e,t){const r=document.createElement("a");r.href=e,r.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gme="__/auth/handler",Kme="emulator/auth/handler",qme=encodeURIComponent("fac");async function H7(e,t,r,n,a,s){Hr(e.config.authDomain,e,"auth-domain-config-required"),Hr(e.config.apiKey,e,"invalid-api-key");const i={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:n,v:fg,eventId:a};if(t instanceof EY){t.setDefaultLanguage(e.languageCode),i.providerId=t.providerId||"",Ife(t.getCustomParameters())||(i.customParameters=JSON.stringify(t.getCustomParameters()));for(const[d,f]of Object.entries({}))i[d]=f}if(t instanceof l2){const d=t.getScopes().filter(f=>f!=="");d.length>0&&(i.scopes=d.join(","))}e.tenantId&&(i.tid=e.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await e._getAppCheckToken(),u=c?`#${qme}=${encodeURIComponent(c)}`:"";return`${Wme(e)}?${s2(o).slice(1)}${u}`}function Wme({config:e}){return e.emulator?aD(e,Kme):`https://${e.authDomain}/${Gme}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="webStorageSupport";class Xme{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=TY,this._completeRedirectFn=bme,this._overrideRedirectResult=gme}async _openPopup(t,r,n,a){var i;dh((i=this.eventManagers[t._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const s=await H7(t,r,n,JI(),a);return zme(t,s,cD())}async _openRedirect(t,r,n,a){await this._originValidation(t);const s=await H7(t,r,n,JI(),a);return Z0e(s),new Promise(()=>{})}_initialize(t){const r=t._key();if(this.eventManagers[r]){const{manager:a,promise:s}=this.eventManagers[r];return a?Promise.resolve(a):(dh(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(t);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(t){const r=await Lme(t),n=new wme(t);return r.register("authEvent",a=>(Hr(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=r,n}_isIframeWebStorageSupported(t,r){this.iframes[t._key()].send(cT,{type:cT},a=>{var i;const s=(i=a==null?void 0:a[0])==null?void 0:i[cT];s!==void 0&&r(!!s),Id(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const r=t._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=Nme(t)),this.originValidationPromises[r]}get _shouldInitProactively(){return vY()||AY()||iD()}}const Yme=Xme;var V7="@firebase/auth",z7="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jme{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const r=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,r),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const r=this.internalListeners.get(t);r&&(this.internalListeners.delete(t),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Hr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zme(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function epe(e){lm(new ch("auth",(t,{options:r})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Hr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:i,authDomain:o,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xY(e)},u=new p0e(n,a,s,c);return S0e(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,r,n)=>{t.getProvider("auth-internal").initialize()})),lm(new ch("auth-internal",t=>{const r=hg(t.getProvider("auth").getImmediate());return(n=>new Jme(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fu(V7,z7,Zme(e)),Fu(V7,z7,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tpe=300,rpe=YX("authIdTokenMaxAge")||tpe;let $7=null;const npe=e=>async t=>{const r=t&&await t.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>rpe)return;const a=r==null?void 0:r.token;$7!==a&&($7=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function RY(e=BN()){const t=i2(e,"auth");if(t.isInitialized())return t.getImmediate();const r=_0e(e,{popupRedirectResolver:Yme,persistence:[lme,X0e,TY]}),n=YX("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(n,location.origin);if(location.origin===s.origin){const i=npe(s.toString());G0e(r,i,()=>i(r.currentUser)),$0e(r,o=>i(o))}}const a=WX("auth");return a&&N0e(r,`http://${a}`),r}function ape(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}g0e({loadJS(e){return new Promise((t,r)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const s=QA("internal-error");s.customData=a,r(s)},n.type="text/javascript",n.charset="UTF-8",ape().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});epe("Browser");var spe="firebase",ipe="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fu(spe,ipe,"app");var G7=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X0,LY;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,_){function F(){}F.prototype=_.prototype,w.D=_.prototype,w.prototype=new F,w.prototype.constructor=w,w.C=function(M,D,I){for(var U=Array(arguments.length-2),P=2;P<arguments.length;P++)U[P-2]=arguments[P];return _.prototype[D].apply(M,U)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(w,_,F){F||(F=0);var M=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)M[D]=_.charCodeAt(F++)|_.charCodeAt(F++)<<8|_.charCodeAt(F++)<<16|_.charCodeAt(F++)<<24;else for(D=0;16>D;++D)M[D]=_[F++]|_[F++]<<8|_[F++]<<16|_[F++]<<24;_=w.g[0],F=w.g[1],D=w.g[2];var I=w.g[3],U=_+(I^F&(D^I))+M[0]+3614090360&4294967295;_=F+(U<<7&4294967295|U>>>25),U=I+(D^_&(F^D))+M[1]+3905402710&4294967295,I=_+(U<<12&4294967295|U>>>20),U=D+(F^I&(_^F))+M[2]+606105819&4294967295,D=I+(U<<17&4294967295|U>>>15),U=F+(_^D&(I^_))+M[3]+3250441966&4294967295,F=D+(U<<22&4294967295|U>>>10),U=_+(I^F&(D^I))+M[4]+4118548399&4294967295,_=F+(U<<7&4294967295|U>>>25),U=I+(D^_&(F^D))+M[5]+1200080426&4294967295,I=_+(U<<12&4294967295|U>>>20),U=D+(F^I&(_^F))+M[6]+2821735955&4294967295,D=I+(U<<17&4294967295|U>>>15),U=F+(_^D&(I^_))+M[7]+4249261313&4294967295,F=D+(U<<22&4294967295|U>>>10),U=_+(I^F&(D^I))+M[8]+1770035416&4294967295,_=F+(U<<7&4294967295|U>>>25),U=I+(D^_&(F^D))+M[9]+2336552879&4294967295,I=_+(U<<12&4294967295|U>>>20),U=D+(F^I&(_^F))+M[10]+4294925233&4294967295,D=I+(U<<17&4294967295|U>>>15),U=F+(_^D&(I^_))+M[11]+2304563134&4294967295,F=D+(U<<22&4294967295|U>>>10),U=_+(I^F&(D^I))+M[12]+1804603682&4294967295,_=F+(U<<7&4294967295|U>>>25),U=I+(D^_&(F^D))+M[13]+4254626195&4294967295,I=_+(U<<12&4294967295|U>>>20),U=D+(F^I&(_^F))+M[14]+2792965006&4294967295,D=I+(U<<17&4294967295|U>>>15),U=F+(_^D&(I^_))+M[15]+1236535329&4294967295,F=D+(U<<22&4294967295|U>>>10),U=_+(D^I&(F^D))+M[1]+4129170786&4294967295,_=F+(U<<5&4294967295|U>>>27),U=I+(F^D&(_^F))+M[6]+3225465664&4294967295,I=_+(U<<9&4294967295|U>>>23),U=D+(_^F&(I^_))+M[11]+643717713&4294967295,D=I+(U<<14&4294967295|U>>>18),U=F+(I^_&(D^I))+M[0]+3921069994&4294967295,F=D+(U<<20&4294967295|U>>>12),U=_+(D^I&(F^D))+M[5]+3593408605&4294967295,_=F+(U<<5&4294967295|U>>>27),U=I+(F^D&(_^F))+M[10]+38016083&4294967295,I=_+(U<<9&4294967295|U>>>23),U=D+(_^F&(I^_))+M[15]+3634488961&4294967295,D=I+(U<<14&4294967295|U>>>18),U=F+(I^_&(D^I))+M[4]+3889429448&4294967295,F=D+(U<<20&4294967295|U>>>12),U=_+(D^I&(F^D))+M[9]+568446438&4294967295,_=F+(U<<5&4294967295|U>>>27),U=I+(F^D&(_^F))+M[14]+3275163606&4294967295,I=_+(U<<9&4294967295|U>>>23),U=D+(_^F&(I^_))+M[3]+4107603335&4294967295,D=I+(U<<14&4294967295|U>>>18),U=F+(I^_&(D^I))+M[8]+1163531501&4294967295,F=D+(U<<20&4294967295|U>>>12),U=_+(D^I&(F^D))+M[13]+2850285829&4294967295,_=F+(U<<5&4294967295|U>>>27),U=I+(F^D&(_^F))+M[2]+4243563512&4294967295,I=_+(U<<9&4294967295|U>>>23),U=D+(_^F&(I^_))+M[7]+1735328473&4294967295,D=I+(U<<14&4294967295|U>>>18),U=F+(I^_&(D^I))+M[12]+2368359562&4294967295,F=D+(U<<20&4294967295|U>>>12),U=_+(F^D^I)+M[5]+4294588738&4294967295,_=F+(U<<4&4294967295|U>>>28),U=I+(_^F^D)+M[8]+2272392833&4294967295,I=_+(U<<11&4294967295|U>>>21),U=D+(I^_^F)+M[11]+1839030562&4294967295,D=I+(U<<16&4294967295|U>>>16),U=F+(D^I^_)+M[14]+4259657740&4294967295,F=D+(U<<23&4294967295|U>>>9),U=_+(F^D^I)+M[1]+2763975236&4294967295,_=F+(U<<4&4294967295|U>>>28),U=I+(_^F^D)+M[4]+1272893353&4294967295,I=_+(U<<11&4294967295|U>>>21),U=D+(I^_^F)+M[7]+4139469664&4294967295,D=I+(U<<16&4294967295|U>>>16),U=F+(D^I^_)+M[10]+3200236656&4294967295,F=D+(U<<23&4294967295|U>>>9),U=_+(F^D^I)+M[13]+681279174&4294967295,_=F+(U<<4&4294967295|U>>>28),U=I+(_^F^D)+M[0]+3936430074&4294967295,I=_+(U<<11&4294967295|U>>>21),U=D+(I^_^F)+M[3]+3572445317&4294967295,D=I+(U<<16&4294967295|U>>>16),U=F+(D^I^_)+M[6]+76029189&4294967295,F=D+(U<<23&4294967295|U>>>9),U=_+(F^D^I)+M[9]+3654602809&4294967295,_=F+(U<<4&4294967295|U>>>28),U=I+(_^F^D)+M[12]+3873151461&4294967295,I=_+(U<<11&4294967295|U>>>21),U=D+(I^_^F)+M[15]+530742520&4294967295,D=I+(U<<16&4294967295|U>>>16),U=F+(D^I^_)+M[2]+3299628645&4294967295,F=D+(U<<23&4294967295|U>>>9),U=_+(D^(F|~I))+M[0]+4096336452&4294967295,_=F+(U<<6&4294967295|U>>>26),U=I+(F^(_|~D))+M[7]+1126891415&4294967295,I=_+(U<<10&4294967295|U>>>22),U=D+(_^(I|~F))+M[14]+2878612391&4294967295,D=I+(U<<15&4294967295|U>>>17),U=F+(I^(D|~_))+M[5]+4237533241&4294967295,F=D+(U<<21&4294967295|U>>>11),U=_+(D^(F|~I))+M[12]+1700485571&4294967295,_=F+(U<<6&4294967295|U>>>26),U=I+(F^(_|~D))+M[3]+2399980690&4294967295,I=_+(U<<10&4294967295|U>>>22),U=D+(_^(I|~F))+M[10]+4293915773&4294967295,D=I+(U<<15&4294967295|U>>>17),U=F+(I^(D|~_))+M[1]+2240044497&4294967295,F=D+(U<<21&4294967295|U>>>11),U=_+(D^(F|~I))+M[8]+1873313359&4294967295,_=F+(U<<6&4294967295|U>>>26),U=I+(F^(_|~D))+M[15]+4264355552&4294967295,I=_+(U<<10&4294967295|U>>>22),U=D+(_^(I|~F))+M[6]+2734768916&4294967295,D=I+(U<<15&4294967295|U>>>17),U=F+(I^(D|~_))+M[13]+1309151649&4294967295,F=D+(U<<21&4294967295|U>>>11),U=_+(D^(F|~I))+M[4]+4149444226&4294967295,_=F+(U<<6&4294967295|U>>>26),U=I+(F^(_|~D))+M[11]+3174756917&4294967295,I=_+(U<<10&4294967295|U>>>22),U=D+(_^(I|~F))+M[2]+718787259&4294967295,D=I+(U<<15&4294967295|U>>>17),U=F+(I^(D|~_))+M[9]+3951481745&4294967295,w.g[0]=w.g[0]+_&4294967295,w.g[1]=w.g[1]+(D+(U<<21&4294967295|U>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+I&4294967295}n.prototype.u=function(w,_){_===void 0&&(_=w.length);for(var F=_-this.blockSize,M=this.B,D=this.h,I=0;I<_;){if(D==0)for(;I<=F;)a(this,w,I),I+=this.blockSize;if(typeof w=="string"){for(;I<_;)if(M[D++]=w.charCodeAt(I++),D==this.blockSize){a(this,M),D=0;break}}else for(;I<_;)if(M[D++]=w[I++],D==this.blockSize){a(this,M),D=0;break}}this.h=D,this.o+=_},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var _=1;_<w.length-8;++_)w[_]=0;var F=8*this.o;for(_=w.length-8;_<w.length;++_)w[_]=F&255,F/=256;for(this.u(w),w=Array(16),_=F=0;4>_;++_)for(var M=0;32>M;M+=8)w[F++]=this.g[_]>>>M&255;return w};function s(w,_){var F=o;return Object.prototype.hasOwnProperty.call(F,w)?F[w]:F[w]=_(w)}function i(w,_){this.h=_;for(var F=[],M=!0,D=w.length-1;0<=D;D--){var I=w[D]|0;M&&I==_||(F[D]=I,M=!1)}this.g=F}var o={};function c(w){return-128<=w&&128>w?s(w,function(_){return new i([_|0],0>_?-1:0)}):new i([w|0],0>w?-1:0)}function u(w){if(isNaN(w)||!isFinite(w))return f;if(0>w)return b(u(-w));for(var _=[],F=1,M=0;w>=F;M++)_[M]=w/F|0,F*=4294967296;return new i(_,0)}function d(w,_){if(w.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(w.charAt(0)=="-")return b(d(w.substring(1),_));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var F=u(Math.pow(_,8)),M=f,D=0;D<w.length;D+=8){var I=Math.min(8,w.length-D),U=parseInt(w.substring(D,D+I),_);8>I?(I=u(Math.pow(_,I)),M=M.j(I).add(u(U))):(M=M.j(F),M=M.add(u(U)))}return M}var f=c(0),h=c(1),p=c(16777216);e=i.prototype,e.m=function(){if(v(this))return-b(this).m();for(var w=0,_=1,F=0;F<this.g.length;F++){var M=this.i(F);w+=(0<=M?M:4294967296+M)*_,_*=4294967296}return w},e.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(g(this))return"0";if(v(this))return"-"+b(this).toString(w);for(var _=u(Math.pow(w,6)),F=this,M="";;){var D=T(F,_).g;F=y(F,D.j(_));var I=((0<F.g.length?F.g[0]:F.h)>>>0).toString(w);if(F=D,g(F))return I+M;for(;6>I.length;)I="0"+I;M=I+M}},e.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function g(w){if(w.h!=0)return!1;for(var _=0;_<w.g.length;_++)if(w.g[_]!=0)return!1;return!0}function v(w){return w.h==-1}e.l=function(w){return w=y(this,w),v(w)?-1:g(w)?0:1};function b(w){for(var _=w.g.length,F=[],M=0;M<_;M++)F[M]=~w.g[M];return new i(F,~w.h).add(h)}e.abs=function(){return v(this)?b(this):this},e.add=function(w){for(var _=Math.max(this.g.length,w.g.length),F=[],M=0,D=0;D<=_;D++){var I=M+(this.i(D)&65535)+(w.i(D)&65535),U=(I>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);M=U>>>16,I&=65535,U&=65535,F[D]=U<<16|I}return new i(F,F[F.length-1]&-2147483648?-1:0)};function y(w,_){return w.add(b(_))}e.j=function(w){if(g(this)||g(w))return f;if(v(this))return v(w)?b(this).j(b(w)):b(b(this).j(w));if(v(w))return b(this.j(b(w)));if(0>this.l(p)&&0>w.l(p))return u(this.m()*w.m());for(var _=this.g.length+w.g.length,F=[],M=0;M<2*_;M++)F[M]=0;for(M=0;M<this.g.length;M++)for(var D=0;D<w.g.length;D++){var I=this.i(M)>>>16,U=this.i(M)&65535,P=w.i(D)>>>16,X=w.i(D)&65535;F[2*M+2*D]+=U*X,C(F,2*M+2*D),F[2*M+2*D+1]+=I*X,C(F,2*M+2*D+1),F[2*M+2*D+1]+=U*P,C(F,2*M+2*D+1),F[2*M+2*D+2]+=I*P,C(F,2*M+2*D+2)}for(M=0;M<_;M++)F[M]=F[2*M+1]<<16|F[2*M];for(M=_;M<2*_;M++)F[M]=0;return new i(F,0)};function C(w,_){for(;(w[_]&65535)!=w[_];)w[_+1]+=w[_]>>>16,w[_]&=65535,_++}function N(w,_){this.g=w,this.h=_}function T(w,_){if(g(_))throw Error("division by zero");if(g(w))return new N(f,f);if(v(w))return _=T(b(w),_),new N(b(_.g),b(_.h));if(v(_))return _=T(w,b(_)),new N(b(_.g),_.h);if(30<w.g.length){if(v(w)||v(_))throw Error("slowDivide_ only works with positive integers.");for(var F=h,M=_;0>=M.l(w);)F=S(F),M=S(M);var D=B(F,1),I=B(M,1);for(M=B(M,2),F=B(F,2);!g(M);){var U=I.add(M);0>=U.l(w)&&(D=D.add(F),I=U),M=B(M,1),F=B(F,1)}return _=y(w,D.j(_)),new N(D,_)}for(D=f;0<=w.l(_);){for(F=Math.max(1,Math.floor(w.m()/_.m())),M=Math.ceil(Math.log(F)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),I=u(F),U=I.j(_);v(U)||0<U.l(w);)F-=M,I=u(F),U=I.j(_);g(I)&&(I=h),D=D.add(I),w=y(w,U)}return new N(D,w)}e.A=function(w){return T(this,w).h},e.and=function(w){for(var _=Math.max(this.g.length,w.g.length),F=[],M=0;M<_;M++)F[M]=this.i(M)&w.i(M);return new i(F,this.h&w.h)},e.or=function(w){for(var _=Math.max(this.g.length,w.g.length),F=[],M=0;M<_;M++)F[M]=this.i(M)|w.i(M);return new i(F,this.h|w.h)},e.xor=function(w){for(var _=Math.max(this.g.length,w.g.length),F=[],M=0;M<_;M++)F[M]=this.i(M)^w.i(M);return new i(F,this.h^w.h)};function S(w){for(var _=w.g.length+1,F=[],M=0;M<_;M++)F[M]=w.i(M)<<1|w.i(M-1)>>>31;return new i(F,w.h)}function B(w,_){var F=_>>5;_%=32;for(var M=w.g.length-F,D=[],I=0;I<M;I++)D[I]=0<_?w.i(I+F)>>>_|w.i(I+F+1)<<32-_:w.i(I+F);return new i(D,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,LY=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,X0=i}).apply(typeof G7<"u"?G7:typeof self<"u"?self:typeof window<"u"?window:{});var JE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MY,oy,UY,B_,rF,QY,HY,VY;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(O,ee,se){return O==Array.prototype||O==Object.prototype||(O[ee]=se.value),O};function r(O){O=[typeof globalThis=="object"&&globalThis,O,typeof window=="object"&&window,typeof self=="object"&&self,typeof JE=="object"&&JE];for(var ee=0;ee<O.length;++ee){var se=O[ee];if(se&&se.Math==Math)return se}throw Error("Cannot find global object")}var n=r(this);function a(O,ee){if(ee)e:{var se=n;O=O.split(".");for(var xe=0;xe<O.length-1;xe++){var ze=O[xe];if(!(ze in se))break e;se=se[ze]}O=O[O.length-1],xe=se[O],ee=ee(xe),ee!=xe&&ee!=null&&t(se,O,{configurable:!0,writable:!0,value:ee})}}function s(O,ee){O instanceof String&&(O+="");var se=0,xe=!1,ze={next:function(){if(!xe&&se<O.length){var st=se++;return{value:ee(st,O[st]),done:!1}}return xe=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}a("Array.prototype.values",function(O){return O||function(){return s(this,function(ee,se){return se})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function c(O){var ee=typeof O;return ee=ee!="object"?ee:O?Array.isArray(O)?"array":ee:"null",ee=="array"||ee=="object"&&typeof O.length=="number"}function u(O){var ee=typeof O;return ee=="object"&&O!=null||ee=="function"}function d(O,ee,se){return O.call.apply(O.bind,arguments)}function f(O,ee,se){if(!O)throw Error();if(2<arguments.length){var xe=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,xe),O.apply(ee,ze)}}return function(){return O.apply(ee,arguments)}}function h(O,ee,se){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function p(O,ee){var se=Array.prototype.slice.call(arguments,1);return function(){var xe=se.slice();return xe.push.apply(xe,arguments),O.apply(this,xe)}}function g(O,ee){function se(){}se.prototype=ee.prototype,O.aa=ee.prototype,O.prototype=new se,O.prototype.constructor=O,O.Qb=function(xe,ze,st){for(var Ut=Array(arguments.length-2),jr=2;jr<arguments.length;jr++)Ut[jr-2]=arguments[jr];return ee.prototype[ze].apply(xe,Ut)}}function v(O){const ee=O.length;if(0<ee){const se=Array(ee);for(let xe=0;xe<ee;xe++)se[xe]=O[xe];return se}return[]}function b(O,ee){for(let se=1;se<arguments.length;se++){const xe=arguments[se];if(c(xe)){const ze=O.length||0,st=xe.length||0;O.length=ze+st;for(let Ut=0;Ut<st;Ut++)O[ze+Ut]=xe[Ut]}else O.push(xe)}}class y{constructor(ee,se){this.i=ee,this.j=se,this.h=0,this.g=null}get(){let ee;return 0<this.h?(this.h--,ee=this.g,this.g=ee.next,ee.next=null):ee=this.i(),ee}}function C(O){return/^[\s\xa0]*$/.test(O)}function N(){var O=o.navigator;return O&&(O=O.userAgent)?O:""}function T(O){return T[" "](O),O}T[" "]=function(){};var S=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function B(O,ee,se){for(const xe in O)ee.call(se,O[xe],xe,O)}function w(O,ee){for(const se in O)ee.call(void 0,O[se],se,O)}function _(O){const ee={};for(const se in O)ee[se]=O[se];return ee}const F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(O,ee){let se,xe;for(let ze=1;ze<arguments.length;ze++){xe=arguments[ze];for(se in xe)O[se]=xe[se];for(let st=0;st<F.length;st++)se=F[st],Object.prototype.hasOwnProperty.call(xe,se)&&(O[se]=xe[se])}}function D(O){var ee=1;O=O.split(":");const se=[];for(;0<ee&&O.length;)se.push(O.shift()),ee--;return O.length&&se.push(O.join(":")),se}function I(O){o.setTimeout(()=>{throw O},0)}function U(){var O=z;let ee=null;return O.g&&(ee=O.g,O.g=O.g.next,O.g||(O.h=null),ee.next=null),ee}class P{constructor(){this.h=this.g=null}add(ee,se){const xe=X.get();xe.set(ee,se),this.h?this.h.next=xe:this.g=xe,this.h=xe}}var X=new y(()=>new H,O=>O.reset());class H{constructor(){this.next=this.g=this.h=null}set(ee,se){this.h=ee,this.g=se,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,V=!1,z=new P,G=()=>{const O=o.Promise.resolve(void 0);Y=()=>{O.then(re)}};var re=()=>{for(var O;O=U();){try{O.h.call(O.g)}catch(se){I(se)}var ee=X;ee.j(O),100>ee.h&&(ee.h++,O.next=ee.g,ee.g=O)}V=!1};function R(){this.s=this.s,this.C=this.C}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(O,ee){this.type=O,this.g=this.target=ee,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var O=!1,ee=Object.defineProperty({},"passive",{get:function(){O=!0}});try{const se=()=>{};o.addEventListener("test",se,ee),o.removeEventListener("test",se,ee)}catch{}return O}();function te(O,ee){if(q.call(this,O?O.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,O){var se=this.type=O.type,xe=O.changedTouches&&O.changedTouches.length?O.changedTouches[0]:null;if(this.target=O.target||O.srcElement,this.g=ee,ee=O.relatedTarget){if(S){e:{try{T(ee.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(ee=null)}}else se=="mouseover"?ee=O.fromElement:se=="mouseout"&&(ee=O.toElement);this.relatedTarget=ee,xe?(this.clientX=xe.clientX!==void 0?xe.clientX:xe.pageX,this.clientY=xe.clientY!==void 0?xe.clientY:xe.pageY,this.screenX=xe.screenX||0,this.screenY=xe.screenY||0):(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0),this.button=O.button,this.key=O.key||"",this.ctrlKey=O.ctrlKey,this.altKey=O.altKey,this.shiftKey=O.shiftKey,this.metaKey=O.metaKey,this.pointerId=O.pointerId||0,this.pointerType=typeof O.pointerType=="string"?O.pointerType:ie[O.pointerType]||"",this.state=O.state,this.i=O,O.defaultPrevented&&te.aa.h.call(this)}}g(te,q);var ie={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var O=this.i;O.preventDefault?O.preventDefault():O.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ce(O,ee,se,xe,ze){this.listener=O,this.proxy=null,this.src=ee,this.type=se,this.capture=!!xe,this.ha=ze,this.key=++oe,this.da=this.fa=!1}function pe(O){O.da=!0,O.listener=null,O.proxy=null,O.src=null,O.ha=null}function Ie(O){this.src=O,this.g={},this.h=0}Ie.prototype.add=function(O,ee,se,xe,ze){var st=O.toString();O=this.g[st],O||(O=this.g[st]=[],this.h++);var Ut=Se(O,ee,xe,ze);return-1<Ut?(ee=O[Ut],se||(ee.fa=!1)):(ee=new ce(ee,this.src,st,!!xe,ze),ee.fa=se,O.push(ee)),ee};function ne(O,ee){var se=ee.type;if(se in O.g){var xe=O.g[se],ze=Array.prototype.indexOf.call(xe,ee,void 0),st;(st=0<=ze)&&Array.prototype.splice.call(xe,ze,1),st&&(pe(ee),O.g[se].length==0&&(delete O.g[se],O.h--))}}function Se(O,ee,se,xe){for(var ze=0;ze<O.length;++ze){var st=O[ze];if(!st.da&&st.listener==ee&&st.capture==!!se&&st.ha==xe)return ze}return-1}var De="closure_lm_"+(1e6*Math.random()|0),_e={};function he(O,ee,se,xe,ze){if(Array.isArray(ee)){for(var st=0;st<ee.length;st++)he(O,ee[st],se,xe,ze);return null}return se=ot(se),O&&O[Ae]?O.K(ee,se,u(xe)?!!xe.capture:!1,ze):je(O,ee,se,!1,xe,ze)}function je(O,ee,se,xe,ze,st){if(!ee)throw Error("Invalid event type");var Ut=u(ze)?!!ze.capture:!!ze,jr=qe(O);if(jr||(O[De]=jr=new Ie(O)),se=jr.add(ee,se,xe,Ut,st),se.proxy)return se;if(xe=He(),se.proxy=xe,xe.src=O,xe.listener=se,O.addEventListener)J||(ze=Ut),ze===void 0&&(ze=!1),O.addEventListener(ee.toString(),xe,ze);else if(O.attachEvent)O.attachEvent(Oe(ee.toString()),xe);else if(O.addListener&&O.removeListener)O.addListener(xe);else throw Error("addEventListener and attachEvent are unavailable.");return se}function He(){function O(se){return ee.call(O.src,O.listener,se)}const ee=Re;return O}function Xe(O,ee,se,xe,ze){if(Array.isArray(ee))for(var st=0;st<ee.length;st++)Xe(O,ee[st],se,xe,ze);else xe=u(xe)?!!xe.capture:!!xe,se=ot(se),O&&O[Ae]?(O=O.i,ee=String(ee).toString(),ee in O.g&&(st=O.g[ee],se=Se(st,se,xe,ze),-1<se&&(pe(st[se]),Array.prototype.splice.call(st,se,1),st.length==0&&(delete O.g[ee],O.h--)))):O&&(O=qe(O))&&(ee=O.g[ee.toString()],O=-1,ee&&(O=Se(ee,se,xe,ze)),(se=-1<O?ee[O]:null)&&ye(se))}function ye(O){if(typeof O!="number"&&O&&!O.da){var ee=O.src;if(ee&&ee[Ae])ne(ee.i,O);else{var se=O.type,xe=O.proxy;ee.removeEventListener?ee.removeEventListener(se,xe,O.capture):ee.detachEvent?ee.detachEvent(Oe(se),xe):ee.addListener&&ee.removeListener&&ee.removeListener(xe),(se=qe(ee))?(ne(se,O),se.h==0&&(se.src=null,ee[De]=null)):pe(O)}}}function Oe(O){return O in _e?_e[O]:_e[O]="on"+O}function Re(O,ee){if(O.da)O=!0;else{ee=new te(ee,this);var se=O.listener,xe=O.ha||O.src;O.fa&&ye(O),O=se.call(xe,ee)}return O}function qe(O){return O=O[De],O instanceof Ie?O:null}var Ze="__closure_events_fn_"+(1e9*Math.random()>>>0);function ot(O){return typeof O=="function"?O:(O[Ze]||(O[Ze]=function(ee){return O.handleEvent(ee)}),O[Ze])}function mt(){R.call(this),this.i=new Ie(this),this.M=this,this.F=null}g(mt,R),mt.prototype[Ae]=!0,mt.prototype.removeEventListener=function(O,ee,se,xe){Xe(this,O,ee,se,xe)};function Tt(O,ee){var se,xe=O.F;if(xe)for(se=[];xe;xe=xe.F)se.push(xe);if(O=O.M,xe=ee.type||ee,typeof ee=="string")ee=new q(ee,O);else if(ee instanceof q)ee.target=ee.target||O;else{var ze=ee;ee=new q(xe,O),M(ee,ze)}if(ze=!0,se)for(var st=se.length-1;0<=st;st--){var Ut=ee.g=se[st];ze=Mt(Ut,xe,!0,ee)&&ze}if(Ut=ee.g=O,ze=Mt(Ut,xe,!0,ee)&&ze,ze=Mt(Ut,xe,!1,ee)&&ze,se)for(st=0;st<se.length;st++)Ut=ee.g=se[st],ze=Mt(Ut,xe,!1,ee)&&ze}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var O=this.i,ee;for(ee in O.g){for(var se=O.g[ee],xe=0;xe<se.length;xe++)pe(se[xe]);delete O.g[ee],O.h--}}this.F=null},mt.prototype.K=function(O,ee,se,xe){return this.i.add(String(O),ee,!1,se,xe)},mt.prototype.L=function(O,ee,se,xe){return this.i.add(String(O),ee,!0,se,xe)};function Mt(O,ee,se,xe){if(ee=O.i.g[String(ee)],!ee)return!0;ee=ee.concat();for(var ze=!0,st=0;st<ee.length;++st){var Ut=ee[st];if(Ut&&!Ut.da&&Ut.capture==se){var jr=Ut.listener,wn=Ut.ha||Ut.src;Ut.fa&&ne(O.i,Ut),ze=jr.call(wn,xe)!==!1&&ze}}return ze&&!xe.defaultPrevented}function Dt(O,ee,se){if(typeof O=="function")se&&(O=h(O,se));else if(O&&typeof O.handleEvent=="function")O=h(O.handleEvent,O);else throw Error("Invalid listener argument");return 2147483647<Number(ee)?-1:o.setTimeout(O,ee||0)}function Qt(O){O.g=Dt(()=>{O.g=null,O.i&&(O.i=!1,Qt(O))},O.l);const ee=O.h;O.h=null,O.m.apply(null,ee)}class yt extends R{constructor(ee,se){super(),this.m=ee,this.l=se,this.h=null,this.i=!1,this.g=null}j(ee){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(O){R.call(this),this.h=O,this.g={}}g(kr,R);var rr=[];function an(O){B(O.g,function(ee,se){this.g.hasOwnProperty(se)&&ye(ee)},O),O.g={}}kr.prototype.N=function(){kr.aa.N.call(this),an(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _r=o.JSON.stringify,zr=o.JSON.parse,Fn=class{stringify(O){return o.JSON.stringify(O,void 0)}parse(O){return o.JSON.parse(O,void 0)}};function Fr(){}Fr.prototype.h=null;function vt(O){return O.h||(O.h=O.i())}function pt(){}var Je={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gt(){q.call(this,"d")}g(gt,q);function dt(){q.call(this,"c")}g(dt,q);var Pt={},zt=null;function Lr(){return zt=zt||new mt}Pt.La="serverreachability";function Xr(O){q.call(this,Pt.La,O)}g(Xr,q);function xn(O){const ee=Lr();Tt(ee,new Xr(ee))}Pt.STAT_EVENT="statevent";function bn(O,ee){q.call(this,Pt.STAT_EVENT,O),this.stat=ee}g(bn,q);function $t(O){const ee=Lr();Tt(ee,new bn(ee,O))}Pt.Ma="timingevent";function rn(O,ee){q.call(this,Pt.Ma,O),this.size=ee}g(rn,q);function en(O,ee){if(typeof O!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){O()},ee)}function dr(){this.g=!0}dr.prototype.xa=function(){this.g=!1};function Yr(O,ee,se,xe,ze,st){O.info(function(){if(O.g)if(st)for(var Ut="",jr=st.split("&"),wn=0;wn<jr.length;wn++){var Kr=jr[wn].split("=");if(1<Kr.length){var $n=Kr[0];Kr=Kr[1];var na=$n.split("_");Ut=2<=na.length&&na[1]=="type"?Ut+($n+"="+Kr+"&"):Ut+($n+"=redacted&")}}else Ut=null;else Ut=st;return"XMLHTTP REQ ("+xe+") [attempt "+ze+"]: "+ee+`
`+se+`
`+Ut})}function ra(O,ee,se,xe,ze,st,Ut){O.info(function(){return"XMLHTTP RESP ("+xe+") [ attempt "+ze+"]: "+ee+`
`+se+`
`+st+" "+Ut})}function fe(O,ee,se,xe){O.info(function(){return"XMLHTTP TEXT ("+ee+"): "+Ee(O,se)+(xe?" "+xe:"")})}function Be(O,ee){O.info(function(){return"TIMEOUT: "+ee})}dr.prototype.info=function(){};function Ee(O,ee){if(!O.g)return ee;if(!ee)return null;try{var se=JSON.parse(ee);if(se){for(O=0;O<se.length;O++)if(Array.isArray(se[O])){var xe=se[O];if(!(2>xe.length)){var ze=xe[1];if(Array.isArray(ze)&&!(1>ze.length)){var st=ze[0];if(st!="noop"&&st!="stop"&&st!="close")for(var Ut=1;Ut<ze.length;Ut++)ze[Ut]=""}}}}return _r(se)}catch{return ee}}var Ce={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ne={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Te;function Ye(){}g(Ye,Fr),Ye.prototype.g=function(){return new XMLHttpRequest},Ye.prototype.i=function(){return{}},Te=new Ye;function ut(O,ee,se,xe){this.j=O,this.i=ee,this.l=se,this.R=xe||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new $e}function $e(){this.i=null,this.g="",this.h=!1}var tt={},at={};function jt(O,ee,se){O.L=1,O.v=Gc(xi(ee)),O.m=se,O.P=!0,Vt(O,null)}function Vt(O,ee){O.F=Date.now(),Gt(O),O.A=xi(O.v);var se=O.A,xe=O.R;Array.isArray(xe)||(xe=[String(xe)]),Tr(se.i,"t",xe),O.C=0,se=O.j.J,O.h=new $e,O.g=de(O.j,se?ee:null,!O.m),0<O.O&&(O.M=new yt(h(O.Y,O,O.g),O.O)),ee=O.U,se=O.g,xe=O.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(rr[0]=ze.toString()),ze=rr);for(var st=0;st<ze.length;st++){var Ut=he(se,ze[st],xe||ee.handleEvent,!1,ee.h||ee);if(!Ut)break;ee.g[Ut.key]=Ut}ee=O.H?_(O.H):{},O.m?(O.u||(O.u="POST"),ee["Content-Type"]="application/x-www-form-urlencoded",O.g.ea(O.A,O.u,O.m,ee)):(O.u="GET",O.g.ea(O.A,O.u,null,ee)),xn(),Yr(O.i,O.u,O.A,O.l,O.R,O.m)}ut.prototype.ca=function(O){O=O.target;const ee=this.M;ee&&vs(O)==3?ee.j():this.Y(O)},ut.prototype.Y=function(O){try{if(O==this.g)e:{const na=vs(this.g);var ee=this.g.Ba();const jl=this.g.Z();if(!(3>na)&&(na!=3||this.g&&(this.h.h||this.g.oa()||Uh(this.g)))){this.J||na!=4||ee==7||(ee==8||0>=jl?xn(3):xn(2)),sn(this);var se=this.g.Z();this.X=se;t:if(Jt(this)){var xe=Uh(this.g);O="";var ze=xe.length,st=vs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),on(this);var Ut="";break t}this.h.i=new o.TextDecoder}for(ee=0;ee<ze;ee++)this.h.h=!0,O+=this.h.i.decode(xe[ee],{stream:!(st&&ee==ze-1)});xe.length=0,this.h.g+=O,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=se==200,ra(this.i,this.u,this.A,this.l,this.R,na,se),this.o){if(this.T&&!this.K){t:{if(this.g){var jr,wn=this.g;if((jr=wn.g?wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(jr)){var Kr=jr;break t}}Kr=null}if(se=Kr)fe(this.i,this.l,se,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ms(this,se);else{this.o=!1,this.s=3,$t(12),An(this),on(this);break e}}if(this.P){se=!0;let rs;for(;!this.J&&this.C<Ut.length;)if(rs=Ht(this,Ut),rs==at){na==4&&(this.s=4,$t(14),se=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(rs==tt){this.s=4,$t(15),fe(this.i,this.l,Ut,"[Invalid Chunk]"),se=!1;break}else fe(this.i,this.l,rs,null),ms(this,rs);if(Jt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),na!=4||Ut.length!=0||this.h.h||(this.s=1,$t(16),se=!1),this.o=this.o&&se,!se)fe(this.i,this.l,Ut,"[Invalid Chunked Response]"),An(this),on(this);else if(0<Ut.length&&!this.W){this.W=!0;var $n=this.j;$n.g==this&&$n.ba&&!$n.M&&($n.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),Jc($n),$n.M=!0,$t(11))}}else fe(this.i,this.l,Ut,null),ms(this,Ut);na==4&&An(this),this.o&&!this.J&&(na==4?Zc(this.j,this):(this.o=!1,Gt(this)))}else Wc(this.g),se==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),An(this),on(this)}}}catch{}finally{}};function Jt(O){return O.g?O.u=="GET"&&O.L!=2&&O.j.Ca:!1}function Ht(O,ee){var se=O.C,xe=ee.indexOf(`
`,se);return xe==-1?at:(se=Number(ee.substring(se,xe)),isNaN(se)?tt:(xe+=1,xe+se>ee.length?at:(ee=ee.slice(xe,xe+se),O.C=xe+se,ee)))}ut.prototype.cancel=function(){this.J=!0,An(this)};function Gt(O){O.S=Date.now()+O.I,Sr(O,O.I)}function Sr(O,ee){if(O.B!=null)throw Error("WatchDog timer not null");O.B=en(h(O.ba,O),ee)}function sn(O){O.B&&(o.clearTimeout(O.B),O.B=null)}ut.prototype.ba=function(){this.B=null;const O=Date.now();0<=O-this.S?(Be(this.i,this.A),this.L!=2&&(xn(),$t(17)),An(this),this.s=2,on(this)):Sr(this,this.S-O)};function on(O){O.j.G==0||O.J||Zc(O.j,O)}function An(O){sn(O);var ee=O.M;ee&&typeof ee.ma=="function"&&ee.ma(),O.M=null,an(O.U),O.g&&(ee=O.g,O.g=null,ee.abort(),ee.ma())}function ms(O,ee){try{var se=O.j;if(se.G!=0&&(se.g==O||gi(se.h,O))){if(!O.K&&gi(se.h,O)&&se.G==3){try{var xe=se.Da.g.parse(ee)}catch{xe=null}if(Array.isArray(xe)&&xe.length==3){var ze=xe;if(ze[0]==0){e:if(!se.u){if(se.g)if(se.g.F+3e3<O.F)cc(se),Kd(se);else break e;Ku(se),$t(18)}}else se.za=ze[1],0<se.za-se.T&&37500>ze[2]&&se.F&&se.v==0&&!se.C&&(se.C=en(h(se.Za,se),6e3));if(1>=Fs(se.h)&&se.ca){try{se.ca()}catch{}se.ca=void 0}}else Di(se,11)}else if((O.K||se.g==O)&&cc(se),!C(ee))for(ze=se.Da.g.parse(ee),ee=0;ee<ze.length;ee++){let Kr=ze[ee];if(se.T=Kr[0],Kr=Kr[1],se.G==2)if(Kr[0]=="c"){se.K=Kr[1],se.ia=Kr[2];const $n=Kr[3];$n!=null&&(se.la=$n,se.j.info("VER="+se.la));const na=Kr[4];na!=null&&(se.Aa=na,se.j.info("SVER="+se.Aa));const jl=Kr[5];jl!=null&&typeof jl=="number"&&0<jl&&(xe=1.5*jl,se.L=xe,se.j.info("backChannelRequestTimeoutMs_="+xe)),xe=se;const rs=O.g;if(rs){const _o=rs.g?rs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_o){var st=xe.h;st.g||_o.indexOf("spdy")==-1&&_o.indexOf("quic")==-1&&_o.indexOf("h2")==-1||(st.j=st.l,st.g=new Set,st.h&&(xa(st,st.h),st.h=null))}if(xe.D){const eu=rs.g?rs.g.getResponseHeader("X-HTTP-Session-Id"):null;eu&&(xe.ya=eu,zn(xe.I,xe.D,eu))}}se.G=3,se.l&&se.l.ua(),se.ba&&(se.R=Date.now()-O.F,se.j.info("Handshake RTT: "+se.R+"ms")),xe=se;var Ut=O;if(xe.qa=W(xe,xe.J?xe.ia:null,xe.W),Ut.K){ei(xe.h,Ut);var jr=Ut,wn=xe.L;wn&&(jr.I=wn),jr.B&&(sn(jr),Gt(jr)),xe.g=Ut}else Wd(xe);0<se.i.length&&qd(se)}else Kr[0]!="stop"&&Kr[0]!="close"||Di(se,7);else se.G==3&&(Kr[0]=="stop"||Kr[0]=="close"?Kr[0]=="stop"?Di(se,7):lc(se):Kr[0]!="noop"&&se.l&&se.l.ta(Kr),se.v=0)}}xn(4)}catch{}}var bo=class{constructor(O,ee){this.g=O,this.map=ee}};function ps(O){this.l=O||10,o.PerformanceNavigationTiming?(O=o.performance.getEntriesByType("navigation"),O=0<O.length&&(O[0].nextHopProtocol=="hq"||O[0].nextHopProtocol=="h2")):O=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=O?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zs(O){return O.h?!0:O.g?O.g.size>=O.j:!1}function Fs(O){return O.h?1:O.g?O.g.size:0}function gi(O,ee){return O.h?O.h==ee:O.g?O.g.has(ee):!1}function xa(O,ee){O.g?O.g.add(ee):O.h=ee}function ei(O,ee){O.h&&O.h==ee?O.h=null:O.g&&O.g.has(ee)&&O.g.delete(ee)}ps.prototype.cancel=function(){if(this.i=zd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const O of this.g.values())O.cancel();this.g.clear()}};function zd(O){if(O.h!=null)return O.i.concat(O.h.D);if(O.g!=null&&O.g.size!==0){let ee=O.i;for(const se of O.g.values())ee=ee.concat(se.D);return ee}return v(O.i)}function Rh(O){if(O.V&&typeof O.V=="function")return O.V();if(typeof Map<"u"&&O instanceof Map||typeof Set<"u"&&O instanceof Set)return Array.from(O.values());if(typeof O=="string")return O.split("");if(c(O)){for(var ee=[],se=O.length,xe=0;xe<se;xe++)ee.push(O[xe]);return ee}ee=[],se=0;for(xe in O)ee[se++]=O[xe];return ee}function Vc(O){if(O.na&&typeof O.na=="function")return O.na();if(!O.V||typeof O.V!="function"){if(typeof Map<"u"&&O instanceof Map)return Array.from(O.keys());if(!(typeof Set<"u"&&O instanceof Set)){if(c(O)||typeof O=="string"){var ee=[];O=O.length;for(var se=0;se<O;se++)ee.push(se);return ee}ee=[],se=0;for(const xe in O)ee[se++]=xe;return ee}}}function sf(O,ee){if(O.forEach&&typeof O.forEach=="function")O.forEach(ee,void 0);else if(c(O)||typeof O=="string")Array.prototype.forEach.call(O,ee,void 0);else for(var se=Vc(O),xe=Rh(O),ze=xe.length,st=0;st<ze;st++)ee.call(void 0,xe[st],se&&se[st],O)}var vi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $d(O,ee){if(O){O=O.split("&");for(var se=0;se<O.length;se++){var xe=O[se].indexOf("="),ze=null;if(0<=xe){var st=O[se].substring(0,xe);ze=O[se].substring(xe+1)}else st=O[se];ee(st,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function On(O){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,O instanceof On){this.h=O.h,zc(this,O.j),this.o=O.o,this.g=O.g,$c(this,O.s),this.l=O.l;var ee=O.i,se=new _l;se.i=ee.i,ee.g&&(se.g=new Map(ee.g),se.h=ee.h),Cl(this,se),this.m=O.m}else O&&(ee=String(O).match(vi))?(this.h=!1,zc(this,ee[1]||"",!0),this.o=yo(ee[2]||""),this.g=yo(ee[3]||"",!0),$c(this,ee[4]),this.l=yo(ee[5]||"",!0),Cl(this,ee[6]||"",!0),this.m=yo(ee[7]||"")):(this.h=!1,this.i=new _l(null,this.h))}On.prototype.toString=function(){var O=[],ee=this.j;ee&&O.push(nc(ee,of,!0),":");var se=this.g;return(se||ee=="file")&&(O.push("//"),(ee=this.o)&&O.push(nc(ee,of,!0),"@"),O.push(encodeURIComponent(String(se)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),se=this.s,se!=null&&O.push(":",String(se))),(se=this.l)&&(this.g&&se.charAt(0)!="/"&&O.push("/"),O.push(nc(se,se.charAt(0)=="/"?ac:lf,!0))),(se=this.i.toString())&&O.push("?",se),(se=this.m)&&O.push("#",nc(se,sc)),O.join("")};function xi(O){return new On(O)}function zc(O,ee,se){O.j=se?yo(ee,!0):ee,O.j&&(O.j=O.j.replace(/:$/,""))}function $c(O,ee){if(ee){if(ee=Number(ee),isNaN(ee)||0>ee)throw Error("Bad port number "+ee);O.s=ee}else O.s=null}function Cl(O,ee,se){ee instanceof _l?(O.i=ee,Mh(O.i,O.h)):(se||(ee=nc(ee,Gd)),O.i=new _l(ee,O.h))}function zn(O,ee,se){O.i.set(ee,se)}function Gc(O){return zn(O,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),O}function yo(O,ee){return O?ee?decodeURI(O.replace(/%25/g,"%2525")):decodeURIComponent(O):""}function nc(O,ee,se){return typeof O=="string"?(O=encodeURI(O).replace(ee,Lh),se&&(O=O.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),O):null}function Lh(O){return O=O.charCodeAt(0),"%"+(O>>4&15).toString(16)+(O&15).toString(16)}var of=/[#\/\?@]/g,lf=/[#\?:]/g,ac=/[#\?]/g,Gd=/[#\?@]/g,sc=/#/g;function _l(O,ee){this.h=this.g=null,this.i=O||null,this.j=!!ee}function ua(O){O.g||(O.g=new Map,O.h=0,O.i&&$d(O.i,function(ee,se){O.add(decodeURIComponent(ee.replace(/\+/g," ")),se)}))}e=_l.prototype,e.add=function(O,ee){ua(this),this.i=null,O=Nl(this,O);var se=this.g.get(O);return se||this.g.set(O,se=[]),se.push(ee),this.h+=1,this};function ic(O,ee){ua(O),ee=Nl(O,ee),O.g.has(ee)&&(O.i=null,O.h-=O.g.get(ee).length,O.g.delete(ee))}function Sl(O,ee){return ua(O),ee=Nl(O,ee),O.g.has(ee)}e.forEach=function(O,ee){ua(this),this.g.forEach(function(se,xe){se.forEach(function(ze){O.call(ee,ze,xe,this)},this)},this)},e.na=function(){ua(this);const O=Array.from(this.g.values()),ee=Array.from(this.g.keys()),se=[];for(let xe=0;xe<ee.length;xe++){const ze=O[xe];for(let st=0;st<ze.length;st++)se.push(ee[xe])}return se},e.V=function(O){ua(this);let ee=[];if(typeof O=="string")Sl(this,O)&&(ee=ee.concat(this.g.get(Nl(this,O))));else{O=Array.from(this.g.values());for(let se=0;se<O.length;se++)ee=ee.concat(O[se])}return ee},e.set=function(O,ee){return ua(this),this.i=null,O=Nl(this,O),Sl(this,O)&&(this.h-=this.g.get(O).length),this.g.set(O,[ee]),this.h+=1,this},e.get=function(O,ee){return O?(O=this.V(O),0<O.length?String(O[0]):ee):ee};function Tr(O,ee,se){ic(O,ee),0<se.length&&(O.i=null,O.g.set(Nl(O,ee),v(se)),O.h+=se.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const O=[],ee=Array.from(this.g.keys());for(var se=0;se<ee.length;se++){var xe=ee[se];const st=encodeURIComponent(String(xe)),Ut=this.V(xe);for(xe=0;xe<Ut.length;xe++){var ze=st;Ut[xe]!==""&&(ze+="="+encodeURIComponent(String(Ut[xe]))),O.push(ze)}}return this.i=O.join("&")};function Nl(O,ee){return ee=String(ee),O.j&&(ee=ee.toLowerCase()),ee}function Mh(O,ee){ee&&!O.j&&(ua(O),O.i=null,O.g.forEach(function(se,xe){var ze=xe.toLowerCase();xe!=ze&&(ic(this,xe),Tr(this,ze,se))},O)),O.j=ee}function Ii(O,ee){const se=new dr;if(o.Image){const xe=new Image;xe.onload=p(ro,se,"TestLoadImage: loaded",!0,ee,xe),xe.onerror=p(ro,se,"TestLoadImage: error",!1,ee,xe),xe.onabort=p(ro,se,"TestLoadImage: abort",!1,ee,xe),xe.ontimeout=p(ro,se,"TestLoadImage: timeout",!1,ee,xe),o.setTimeout(function(){xe.ontimeout&&xe.ontimeout()},1e4),xe.src=O}else ee(!1)}function wo(O,ee){const se=new dr,xe=new AbortController,ze=setTimeout(()=>{xe.abort(),ro(se,"TestPingServer: timeout",!1,ee)},1e4);fetch(O,{signal:xe.signal}).then(st=>{clearTimeout(ze),st.ok?ro(se,"TestPingServer: ok",!0,ee):ro(se,"TestPingServer: server error",!1,ee)}).catch(()=>{clearTimeout(ze),ro(se,"TestPingServer: error",!1,ee)})}function ro(O,ee,se,xe,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),xe(se)}catch{}}function kl(){this.g=new Fn}function Eo(O,ee,se){const xe=se||"";try{sf(O,function(ze,st){let Ut=ze;u(ze)&&(Ut=_r(ze)),ee.push(xe+st+"="+encodeURIComponent(Ut))})}catch(ze){throw ee.push(xe+"type="+encodeURIComponent("_badmap")),ze}}function Kc(O){this.l=O.Ub||null,this.j=O.eb||!1}g(Kc,Fr),Kc.prototype.g=function(){return new oc(this.l,this.j)},Kc.prototype.i=function(O){return function(){return O}}({});function oc(O,ee){mt.call(this),this.D=O,this.o=ee,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(oc,mt),e=oc.prototype,e.open=function(O,ee){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=O,this.A=ee,this.readyState=1,Fi(this)},e.send=function(O){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const ee={headers:this.u,method:this.B,credentials:this.m,cache:void 0};O&&(ee.body=O),(this.D||o).fetch(new Request(this.A,ee)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Co(this)),this.readyState=0},e.Sa=function(O){if(this.g&&(this.l=O,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=O.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if(this.responseType==="arraybuffer")O.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in O){if(this.j=O.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cf(this)}else O.text().then(this.Ra.bind(this),this.ga.bind(this))};function cf(O){O.j.read().then(O.Pa.bind(O)).catch(O.ga.bind(O))}e.Pa=function(O){if(this.g){if(this.o&&O.value)this.response.push(O.value);else if(!this.o){var ee=O.value?O.value:new Uint8Array(0);(ee=this.v.decode(ee,{stream:!O.done}))&&(this.response=this.responseText+=ee)}O.done?Co(this):Fi(this),this.readyState==3&&cf(this)}},e.Ra=function(O){this.g&&(this.response=this.responseText=O,Co(this))},e.Qa=function(O){this.g&&(this.response=O,Co(this))},e.ga=function(){this.g&&Co(this)};function Co(O){O.readyState=4,O.l=null,O.j=null,O.v=null,Fi(O)}e.setRequestHeader=function(O,ee){this.u.append(O,ee)},e.getResponseHeader=function(O){return this.h&&this.h.get(O.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const O=[],ee=this.h.entries();for(var se=ee.next();!se.done;)se=se.value,O.push(se[0]+": "+se[1]),se=ee.next();return O.join(`\r
`)};function Fi(O){O.onreadystatechange&&O.onreadystatechange.call(O)}Object.defineProperty(oc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(O){this.m=O?"include":"same-origin"}});function Bl(O){let ee="";return B(O,function(se,xe){ee+=xe,ee+=":",ee+=se,ee+=`\r
`}),ee}function gs(O,ee,se){e:{for(xe in se){var xe=!1;break e}xe=!0}xe||(se=Bl(se),typeof O=="string"?se!=null&&encodeURIComponent(String(se)):zn(O,ee,se))}function yn(O){mt.call(this),this.headers=new Map,this.o=O||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(yn,mt);var qc=/^https?$/i,Tl=["POST","PUT"];e=yn.prototype,e.Ha=function(O){this.J=O},e.ea=function(O,ee,se,xe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+O);ee=ee?ee.toUpperCase():"GET",this.D=O,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Te.g(),this.v=this.o?vt(this.o):vt(Te),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(ee,String(O),!0),this.B=!1}catch(st){uf(this,st);return}if(O=se||"",se=new Map(this.headers),xe)if(Object.getPrototypeOf(xe)===Object.prototype)for(var ze in xe)se.set(ze,xe[ze]);else if(typeof xe.keys=="function"&&typeof xe.get=="function")for(const st of xe.keys())se.set(st,xe.get(st));else throw Error("Unknown input type for opt_headers: "+String(xe));xe=Array.from(se.keys()).find(st=>st.toLowerCase()=="content-type"),ze=o.FormData&&O instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Tl,ee,void 0))||xe||ze||se.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[st,Ut]of se)this.g.setRequestHeader(st,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oi(this),this.u=!0,this.g.send(O),this.u=!1}catch(st){uf(this,st)}};function uf(O,ee){O.h=!1,O.g&&(O.j=!0,O.g.abort(),O.j=!1),O.l=ee,O.m=5,Hu(O),sl(O)}function Hu(O){O.A||(O.A=!0,Tt(O,"complete"),Tt(O,"error"))}e.abort=function(O){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=O||7,Tt(this,"complete"),Tt(this,"abort"),sl(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),sl(this,!0)),yn.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Vu(this):this.bb())},e.bb=function(){Vu(this)};function Vu(O){if(O.h&&typeof i<"u"&&(!O.v[1]||vs(O)!=4||O.Z()!=2)){if(O.u&&vs(O)==4)Dt(O.Ea,0,O);else if(Tt(O,"readystatechange"),vs(O)==4){O.h=!1;try{const Ut=O.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var ee=!0;break e;default:ee=!1}var se;if(!(se=ee)){var xe;if(xe=Ut===0){var ze=String(O.D).match(vi)[1]||null;!ze&&o.self&&o.self.location&&(ze=o.self.location.protocol.slice(0,-1)),xe=!qc.test(ze?ze.toLowerCase():"")}se=xe}if(se)Tt(O,"complete"),Tt(O,"success");else{O.m=6;try{var st=2<vs(O)?O.g.statusText:""}catch{st=""}O.l=st+" ["+O.Z()+"]",Hu(O)}}finally{sl(O)}}}}function sl(O,ee){if(O.g){Oi(O);const se=O.g,xe=O.v[0]?()=>{}:null;O.g=null,O.v=null,ee||Tt(O,"ready");try{se.onreadystatechange=xe}catch{}}}function Oi(O){O.I&&(o.clearTimeout(O.I),O.I=null)}e.isActive=function(){return!!this.g};function vs(O){return O.g?O.g.readyState:0}e.Z=function(){try{return 2<vs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(O){if(this.g){var ee=this.g.responseText;return O&&ee.indexOf(O)==0&&(ee=ee.substring(O.length)),zr(ee)}};function Uh(O){try{if(!O.g)return null;if("response"in O.g)return O.g.response;switch(O.H){case"":case"text":return O.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in O.g)return O.g.mozResponseArrayBuffer}return null}catch{return null}}function Wc(O){const ee={};O=(O.g&&2<=vs(O)&&O.g.getAllResponseHeaders()||"").split(`\r
`);for(let xe=0;xe<O.length;xe++){if(C(O[xe]))continue;var se=D(O[xe]);const ze=se[0];if(se=se[1],typeof se!="string")continue;se=se.trim();const st=ee[ze]||[];ee[ze]=st,st.push(se)}w(ee,function(xe){return xe.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bi(O,ee,se){return se&&se.internalChannelParams&&se.internalChannelParams[O]||ee}function Xc(O){this.Aa=0,this.i=[],this.j=new dr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bi("failFast",!1,O),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bi("baseRetryDelayMs",5e3,O),this.cb=bi("retryDelaySeedMs",1e4,O),this.Wa=bi("forwardChannelMaxRetries",2,O),this.wa=bi("forwardChannelRequestTimeoutMs",2e4,O),this.pa=O&&O.xmlHttpFactory||void 0,this.Xa=O&&O.Tb||void 0,this.Ca=O&&O.useFetchStreams||!1,this.L=void 0,this.J=O&&O.supportsCrossDomainXhr||!1,this.K="",this.h=new ps(O&&O.concurrentRequestLimit),this.Da=new kl,this.P=O&&O.fastHandshake||!1,this.O=O&&O.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=O&&O.Rb||!1,O&&O.xa&&this.j.xa(),O&&O.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&O&&O.detectBufferingProxy||!1,this.ja=void 0,O&&O.longPollingTimeout&&0<O.longPollingTimeout&&(this.ja=O.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Xc.prototype,e.la=8,e.G=1,e.connect=function(O,ee,se,xe){$t(0),this.W=O,this.H=ee||{},se&&xe!==void 0&&(this.H.OSID=se,this.H.OAID=xe),this.F=this.X,this.I=W(this,null,this.W),qd(this)};function lc(O){if(zu(O),O.G==3){var ee=O.U++,se=xi(O.I);if(zn(se,"SID",O.K),zn(se,"RID",ee),zn(se,"TYPE","terminate"),Yc(O,se),ee=new ut(O,O.j,ee),ee.L=2,ee.v=Gc(xi(se)),se=!1,o.navigator&&o.navigator.sendBeacon)try{se=o.navigator.sendBeacon(ee.v.toString(),"")}catch{}!se&&o.Image&&(new Image().src=ee.v,se=!0),se||(ee.g=de(ee.j,null),ee.g.ea(ee.v)),ee.F=Date.now(),Gt(ee)}Xd(O)}function Kd(O){O.g&&(Jc(O),O.g.cancel(),O.g=null)}function zu(O){Kd(O),O.u&&(o.clearTimeout(O.u),O.u=null),cc(O),O.h.cancel(),O.s&&(typeof O.s=="number"&&o.clearTimeout(O.s),O.s=null)}function qd(O){if(!Zs(O.h)&&!O.s){O.s=!0;var ee=O.Ga;Y||G(),V||(Y(),V=!0),z.add(ee,O),O.B=0}}function df(O,ee){return Fs(O.h)>=O.h.j-(O.s?1:0)?!1:O.s?(O.i=ee.D.concat(O.i),!0):O.G==1||O.G==2||O.B>=(O.Va?0:O.Wa)?!1:(O.s=en(h(O.Ga,O,ee),qu(O,O.B)),O.B++,!0)}e.Ga=function(O){if(this.s)if(this.s=null,this.G==1){if(!O){this.U=Math.floor(1e5*Math.random()),O=this.U++;const ze=new ut(this,this.j,O);let st=this.o;if(this.S&&(st?(st=_(st),M(st,this.S)):st=this.S),this.m!==null||this.O||(ze.H=st,st=null),this.P)e:{for(var ee=0,se=0;se<this.i.length;se++){t:{var xe=this.i[se];if("__data__"in xe.map&&(xe=xe.map.__data__,typeof xe=="string")){xe=xe.length;break t}xe=void 0}if(xe===void 0)break;if(ee+=xe,4096<ee){ee=se;break e}if(ee===4096||se===this.i.length-1){ee=se+1;break e}}ee=1e3}else ee=1e3;ee=Gu(this,ze,ee),se=xi(this.I),zn(se,"RID",O),zn(se,"CVER",22),this.D&&zn(se,"X-HTTP-Session-Id",this.D),Yc(this,se),st&&(this.O?ee="headers="+encodeURIComponent(String(Bl(st)))+"&"+ee:this.m&&gs(se,this.m,st)),xa(this.h,ze),this.Ua&&zn(se,"TYPE","init"),this.P?(zn(se,"$req",ee),zn(se,"SID","null"),ze.T=!0,jt(ze,se,null)):jt(ze,se,ee),this.G=2}}else this.G==3&&(O?$u(this,O):this.i.length==0||Zs(this.h)||$u(this))};function $u(O,ee){var se;ee?se=ee.l:se=O.U++;const xe=xi(O.I);zn(xe,"SID",O.K),zn(xe,"RID",se),zn(xe,"AID",O.T),Yc(O,xe),O.m&&O.o&&gs(xe,O.m,O.o),se=new ut(O,O.j,se,O.B+1),O.m===null&&(se.H=O.o),ee&&(O.i=ee.D.concat(O.i)),ee=Gu(O,se,1e3),se.I=Math.round(.5*O.wa)+Math.round(.5*O.wa*Math.random()),xa(O.h,se),jt(se,xe,ee)}function Yc(O,ee){O.H&&B(O.H,function(se,xe){zn(ee,xe,se)}),O.l&&sf({},function(se,xe){zn(ee,xe,se)})}function Gu(O,ee,se){se=Math.min(O.i.length,se);var xe=O.l?h(O.l.Na,O.l,O):null;e:{var ze=O.i;let st=-1;for(;;){const Ut=["count="+se];st==-1?0<se?(st=ze[0].g,Ut.push("ofs="+st)):st=0:Ut.push("ofs="+st);let jr=!0;for(let wn=0;wn<se;wn++){let Kr=ze[wn].g;const $n=ze[wn].map;if(Kr-=st,0>Kr)st=Math.max(0,ze[wn].g-100),jr=!1;else try{Eo($n,Ut,"req"+Kr+"_")}catch{xe&&xe($n)}}if(jr){xe=Ut.join("&");break e}}}return O=O.i.splice(0,se),ee.D=O,xe}function Wd(O){if(!O.g&&!O.u){O.Y=1;var ee=O.Fa;Y||G(),V||(Y(),V=!0),z.add(ee,O),O.v=0}}function Ku(O){return O.g||O.u||3<=O.v?!1:(O.Y++,O.u=en(h(O.Fa,O),qu(O,O.v)),O.v++,!0)}e.Fa=function(){if(this.u=null,Qh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var O=2*this.R;this.j.info("BP detection timer enabled: "+O),this.A=en(h(this.ab,this),O)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),Kd(this),Qh(this))};function Jc(O){O.A!=null&&(o.clearTimeout(O.A),O.A=null)}function Qh(O){O.g=new ut(O,O.j,"rpc",O.Y),O.m===null&&(O.g.H=O.o),O.g.O=0;var ee=xi(O.qa);zn(ee,"RID","rpc"),zn(ee,"SID",O.K),zn(ee,"AID",O.T),zn(ee,"CI",O.F?"0":"1"),!O.F&&O.ja&&zn(ee,"TO",O.ja),zn(ee,"TYPE","xmlhttp"),Yc(O,ee),O.m&&O.o&&gs(ee,O.m,O.o),O.L&&(O.g.I=O.L);var se=O.g;O=O.ia,se.L=1,se.v=Gc(xi(ee)),se.m=null,se.P=!0,Vt(se,O)}e.Za=function(){this.C!=null&&(this.C=null,Kd(this),Ku(this),$t(19))};function cc(O){O.C!=null&&(o.clearTimeout(O.C),O.C=null)}function Zc(O,ee){var se=null;if(O.g==ee){cc(O),Jc(O),O.g=null;var xe=2}else if(gi(O.h,ee))se=ee.D,ei(O.h,ee),xe=1;else return;if(O.G!=0){if(ee.o)if(xe==1){se=ee.m?ee.m.length:0,ee=Date.now()-ee.F;var ze=O.B;xe=Lr(),Tt(xe,new rn(xe,se)),qd(O)}else Wd(O);else if(ze=ee.s,ze==3||ze==0&&0<ee.X||!(xe==1&&df(O,ee)||xe==2&&Ku(O)))switch(se&&0<se.length&&(ee=O.h,ee.i=ee.i.concat(se)),ze){case 1:Di(O,5);break;case 4:Di(O,10);break;case 3:Di(O,6);break;default:Di(O,2)}}}function qu(O,ee){let se=O.Ta+Math.floor(Math.random()*O.cb);return O.isActive()||(se*=2),se*ee}function Di(O,ee){if(O.j.info("Error code "+ee),ee==2){var se=h(O.fb,O),xe=O.Xa;const ze=!xe;xe=new On(xe||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||zc(xe,"https"),Gc(xe),ze?Ii(xe.toString(),se):wo(xe.toString(),se)}else $t(2);O.G=0,O.l&&O.l.sa(ee),Xd(O),zu(O)}e.fb=function(O){O?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Xd(O){if(O.G=0,O.ka=[],O.l){const ee=zd(O.h);(ee.length!=0||O.i.length!=0)&&(b(O.ka,ee),b(O.ka,O.i),O.h.i.length=0,v(O.i),O.i.length=0),O.l.ra()}}function W(O,ee,se){var xe=se instanceof On?xi(se):new On(se);if(xe.g!="")ee&&(xe.g=ee+"."+xe.g),$c(xe,xe.s);else{var ze=o.location;xe=ze.protocol,ee=ee?ee+"."+ze.hostname:ze.hostname,ze=+ze.port;var st=new On(null);xe&&zc(st,xe),ee&&(st.g=ee),ze&&$c(st,ze),se&&(st.l=se),xe=st}return se=O.D,ee=O.ya,se&&ee&&zn(xe,se,ee),zn(xe,"VER",O.la),Yc(O,xe),xe}function de(O,ee,se){if(ee&&!O.J)throw Error("Can't create secondary domain capable XhrIo object.");return ee=O.Ca&&!O.pa?new yn(new Kc({eb:se})):new yn(O.pa),ee.Ha(O.J),ee}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fe(){}e=Fe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Le(){}Le.prototype.g=function(O,ee){return new Ge(O,ee)};function Ge(O,ee){mt.call(this),this.g=new Xc(ee),this.l=O,this.h=ee&&ee.messageUrlParams||null,O=ee&&ee.messageHeaders||null,ee&&ee.clientProtocolHeaderRequired&&(O?O["X-Client-Protocol"]="webchannel":O={"X-Client-Protocol":"webchannel"}),this.g.o=O,O=ee&&ee.initMessageHeaders||null,ee&&ee.messageContentType&&(O?O["X-WebChannel-Content-Type"]=ee.messageContentType:O={"X-WebChannel-Content-Type":ee.messageContentType}),ee&&ee.va&&(O?O["X-WebChannel-Client-Profile"]=ee.va:O={"X-WebChannel-Client-Profile":ee.va}),this.g.S=O,(O=ee&&ee.Sb)&&!C(O)&&(this.g.m=O),this.v=ee&&ee.supportsCrossDomainXhr||!1,this.u=ee&&ee.sendRawJson||!1,(ee=ee&&ee.httpSessionIdParam)&&!C(ee)&&(this.g.D=ee,O=this.h,O!==null&&ee in O&&(O=this.h,ee in O&&delete O[ee])),this.j=new Zt(this)}g(Ge,mt),Ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){lc(this.g)},Ge.prototype.o=function(O){var ee=this.g;if(typeof O=="string"){var se={};se.__data__=O,O=se}else this.u&&(se={},se.__data__=_r(O),O=se);ee.i.push(new bo(ee.Ya++,O)),ee.G==3&&qd(ee)},Ge.prototype.N=function(){this.g.l=null,delete this.j,lc(this.g),delete this.g,Ge.aa.N.call(this)};function xt(O){gt.call(this),O.__headers__&&(this.headers=O.__headers__,this.statusCode=O.__status__,delete O.__headers__,delete O.__status__);var ee=O.__sm__;if(ee){e:{for(const se in ee){O=se;break e}O=void 0}(this.i=O)&&(O=this.i,ee=ee!==null&&O in ee?ee[O]:void 0),this.data=ee}else this.data=O}g(xt,gt);function Lt(){dt.call(this),this.status=1}g(Lt,dt);function Zt(O){this.g=O}g(Zt,Fe),Zt.prototype.ua=function(){Tt(this.g,"a")},Zt.prototype.ta=function(O){Tt(this.g,new xt(O))},Zt.prototype.sa=function(O){Tt(this.g,new Lt)},Zt.prototype.ra=function(){Tt(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,VY=function(){return new Le},HY=function(){return Lr()},QY=Pt,rF={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ce.NO_ERROR=0,Ce.TIMEOUT=8,Ce.HTTP_ERROR=6,B_=Ce,Ne.COMPLETE="complete",UY=Ne,pt.EventType=Je,Je.OPEN="a",Je.CLOSE="b",Je.ERROR="c",Je.MESSAGE="d",mt.prototype.listen=mt.prototype.K,oy=pt,yn.prototype.listenOnce=yn.prototype.L,yn.prototype.getLastError=yn.prototype.Ka,yn.prototype.getLastErrorCode=yn.prototype.Ba,yn.prototype.getStatus=yn.prototype.Z,yn.prototype.getResponseJson=yn.prototype.Oa,yn.prototype.getResponseText=yn.prototype.oa,yn.prototype.send=yn.prototype.ea,yn.prototype.setWithCredentials=yn.prototype.Ha,MY=yn}).apply(typeof JE<"u"?JE:typeof self<"u"?self:typeof window<"u"?window:{});const K7="@firebase/firestore",q7="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Uo.UNAUTHENTICATED=new Uo(null),Uo.GOOGLE_CREDENTIALS=new Uo("google-credentials-uid"),Uo.FIRST_PARTY=new Uo("first-party-uid"),Uo.MOCK_USER=new Uo("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let f1="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=new eD("@firebase/firestore");function Ov(){return Xp.logLevel}function lr(e,...t){if(Xp.logLevel<=Bn.DEBUG){const r=t.map(dD);Xp.debug(`Firestore (${f1}): ${e}`,...r)}}function Ah(e,...t){if(Xp.logLevel<=Bn.ERROR){const r=t.map(dD);Xp.error(`Firestore (${f1}): ${e}`,...r)}}function Yp(e,...t){if(Xp.logLevel<=Bn.WARN){const r=t.map(dD);Xp.warn(`Firestore (${f1}): ${e}`,...r)}}function dD(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(e,t,r){let n="Unexpected state";typeof t=="string"?n=t:r=t,zY(e,n,r)}function zY(e,t,r){let n=`FIRESTORE (${f1}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw Ah(n),new Error(n)}function la(e,t,r,n){let a="Unexpected state";typeof r=="string"?a=r:n=r,e||zY(t,a,n)}function Zr(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends Pd{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Y{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class GY{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r(Uo.UNAUTHENTICATED))}shutdown(){}}class ope{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class lpe{constructor(t){this.t=t,this.currentUser=Uo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){la(this.o===void 0,42304);let n=this.i;const a=c=>this.i!==n?(n=this.i,r(c)):Promise.resolve();let s=new Jf;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Jf,t.enqueueRetryable(()=>a(this.currentUser))};const i=()=>{const c=s;t.enqueueRetryable(async()=>{await c.promise,await a(this.currentUser)})},o=c=>{lr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(lr("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Jf)}},0),i()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==t?(lr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(la(typeof n.accessToken=="string",31837,{l:n}),new $Y(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return la(t===null||typeof t=="string",2055,{h:t}),new Uo(t)}}class cpe{constructor(t,r,n){this.P=t,this.T=r,this.I=n,this.type="FirstParty",this.user=Uo.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class upe{constructor(t,r,n){this.P=t,this.T=r,this.I=n}getToken(){return Promise.resolve(new cpe(this.P,this.T,this.I))}start(t,r){t.enqueueRetryable(()=>r(Uo.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W7{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dpe{constructor(t,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Nc(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,r){la(this.o===void 0,3512);const n=s=>{s.error!=null&&lr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const i=s.token!==this.m;return this.m=s.token,lr("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const a=s=>{lr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>a(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?a(s):lr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new W7(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(la(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new W7(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ape(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let n=0;n<e;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const a=Ape(40);for(let s=0;s<a.length;++s)n.length<20&&a[s]<r&&(n+=t.charAt(a[s]%62))}return n}}function Tn(e,t){return e<t?-1:e>t?1:0}function nF(e,t){const r=Math.min(e.length,t.length);for(let n=0;n<r;n++){const a=e.charAt(n),s=t.charAt(n);if(a!==s)return uT(a)===uT(s)?Tn(a,s):uT(a)?1:-1}return Tn(e.length,t.length)}const fpe=55296,hpe=57343;function uT(e){const t=e.charCodeAt(0);return t>=fpe&&t<=hpe}function Bx(e,t,r){return e.length===t.length&&e.every((n,a)=>r(n,t[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7="__name__";class NA{constructor(t,r,n){r===void 0?r=0:r>t.length&&Vr(637,{offset:r,range:t.length}),n===void 0?n=t.length-r:n>t.length-r&&Vr(1746,{length:n,range:t.length-r}),this.segments=t,this.offset=r,this.len=n}get length(){return this.len}isEqual(t){return NA.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof NA?t.forEach(n=>{r.push(n)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,n=this.limit();r<n;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const n=Math.min(t.length,r.length);for(let a=0;a<n;a++){const s=NA.compareSegments(t.get(a),r.get(a));if(s!==0)return s}return Tn(t.length,r.length)}static compareSegments(t,r){const n=NA.isNumericId(t),a=NA.isNumericId(r);return n&&!a?-1:!n&&a?1:n&&a?NA.extractNumericId(t).compare(NA.extractNumericId(r)):nF(t,r)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return X0.fromString(t.substring(4,t.length-2))}}class Na extends NA{construct(t,r,n){return new Na(t,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const n of t){if(n.indexOf("//")>=0)throw new Wt(Et.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(a=>a.length>0))}return new Na(r)}static emptyPath(){return new Na([])}}const mpe=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gi extends NA{construct(t,r,n){return new Gi(t,r,n)}static isValidIdentifier(t){return mpe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gi.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X7}static keyField(){return new Gi([X7])}static fromServerFormat(t){const r=[];let n="",a=0;const s=()=>{if(n.length===0)throw new Wt(Et.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;a<t.length;){const o=t[a];if(o==="\\"){if(a+1===t.length)throw new Wt(Et.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[a+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Wt(Et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=c,a+=2}else o==="`"?(i=!i,a++):o!=="."||i?(n+=o,a++):(s(),a++)}if(s(),i)throw new Wt(Et.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Gi(r)}static emptyPath(){return new Gi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(t){this.path=t}static fromPath(t){return new br(Na.fromString(t))}static fromName(t){return new br(Na.fromString(t).popFirst(5))}static empty(){return new br(Na.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Na.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return Na.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new br(new Na(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KY(e,t,r){if(!r)throw new Wt(Et.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function qY(e,t,r,n){if(t===!0&&n===!0)throw new Wt(Et.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function Y7(e){if(!br.isDocumentKey(e))throw new Wt(Et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function J7(e){if(br.isDocumentKey(e))throw new Wt(Et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function WY(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function DN(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Vr(12329,{type:typeof e})}function Yo(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wt(Et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=DN(e);throw new Wt(Et.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function ppe(e,t){if(t<=0)throw new Wt(Et.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(e,t){const r={typeString:e};return t&&(r.value=t),r}function u2(e,t){if(!WY(e))throw new Wt(Et.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in t)if(t[n]){const a=t[n].typeString,s="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}const i=e[n];if(a&&typeof i!==a){r=`JSON field '${n}' must be a ${a}.`;break}if(s!==void 0&&i!==s.value){r=`Expected '${n}' field to equal '${s.value}'`;break}}if(r)throw new Wt(Et.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=-62135596800,e9=1e6;class mr{static now(){return mr.fromMillis(Date.now())}static fromDate(t){return mr.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),n=Math.floor((t-1e3*r)*e9);return new mr(r,n)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Wt(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Wt(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<Z7)throw new Wt(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wt(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/e9}_compareTo(t){return this.seconds===t.seconds?Tn(this.nanoseconds,t.nanoseconds):Tn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(u2(t,mr._jsonSchema))return new mr(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Z7;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mr._jsonSchemaVersion="firestore/timestamp/1.0",mr._jsonSchema={type:hi("string",mr._jsonSchemaVersion),seconds:hi("number"),nanoseconds:hi("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{static fromTimestamp(t){return new Wr(t)}static min(){return new Wr(new mr(0,0))}static max(){return new Wr(new mr(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=-1;function gpe(e,t){const r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1,a=Wr.fromTimestamp(n===1e9?new mr(r+1,0):new mr(r,n));return new cm(a,br.empty(),t)}function vpe(e){return new cm(e.readTime,e.key,lw)}class cm{constructor(t,r,n){this.readTime=t,this.documentKey=r,this.largestBatchId=n}static min(){return new cm(Wr.min(),br.empty(),lw)}static max(){return new cm(Wr.max(),br.empty(),lw)}}function xpe(e,t){let r=e.readTime.compareTo(t.readTime);return r!==0?r:(r=br.comparator(e.documentKey,t.documentKey),r!==0?r:Tn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bpe="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ype{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h1(e){if(e.code!==Et.FAILED_PRECONDITION||e.message!==bpe)throw e;lr("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Vr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new Ot((n,a)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,a)},this.catchCallback=s=>{this.wrapFailure(r,s).next(n,a)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof Ot?r:Ot.resolve(r)}catch(r){return Ot.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):Ot.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):Ot.reject(r)}static resolve(t){return new Ot((r,n)=>{r(t)})}static reject(t){return new Ot((r,n)=>{n(t)})}static waitFor(t){return new Ot((r,n)=>{let a=0,s=0,i=!1;t.forEach(o=>{++a,o.next(()=>{++s,i&&s===a&&r()},c=>n(c))}),i=!0,s===a&&r()})}static or(t){let r=Ot.resolve(!1);for(const n of t)r=r.next(a=>a?Ot.resolve(a):n());return r}static forEach(t,r){const n=[];return t.forEach((a,s)=>{n.push(r.call(this,a,s))}),this.waitFor(n)}static mapArray(t,r){return new Ot((n,a)=>{const s=t.length,i=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;r(t[u]).next(d=>{i[u]=d,++o,o===s&&n(i)},d=>a(d))}})}static doWhile(t,r){return new Ot((n,a)=>{const s=()=>{t()===!0?r().next(()=>{s()},a):n()};s()})}}function wpe(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function m1(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}PN.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AD=-1;function RN(e){return e==null}function ES(e){return e===0&&1/e==-1/0}function Epe(e){return typeof e=="number"&&Number.isInteger(e)&&!ES(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XY="";function Cpe(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=t9(t)),t=_pe(e.get(r),t);return t9(t)}function _pe(e,t){let r=t;const n=e.length;for(let a=0;a<n;a++){const s=e.charAt(a);switch(s){case"\0":r+="";break;case XY:r+="";break;default:r+=s}}return r}function t9(e){return e+XY+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9(e){let t=0;for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function Sm(e,t){for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function YY(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(t,r){this.comparator=t,this.root=r||ho.EMPTY}insert(t,r){return new us(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,ho.BLACK,null,null))}remove(t){return new us(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ho.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(t,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(t){let r=0,n=this.root;for(;!n.isEmpty();){const a=this.comparator(t,n.key);if(a===0)return r+n.left.size;a<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,n)=>(t(r,n),!1))}toString(){const t=[];return this.inorderTraversal((r,n)=>(t.push(`${r}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new ZE(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new ZE(this.root,t,this.comparator,!1)}getReverseIterator(){return new ZE(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new ZE(this.root,t,this.comparator,!0)}}class ZE{constructor(t,r,n,a){this.isReverse=a,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=r?n(t.key,r):1,r&&a&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ho{constructor(t,r,n,a,s){this.key=t,this.value=r,this.color=n??ho.RED,this.left=a??ho.EMPTY,this.right=s??ho.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,n,a,s){return new ho(t??this.key,r??this.value,n??this.color,a??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let a=this;const s=n(t,a.key);return a=s<0?a.copy(null,null,null,a.left.insert(t,r,n),null):s===0?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,n)),a.fixUp()}removeMin(){if(this.left.isEmpty())return ho.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let n,a=this;if(r(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,r),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),r(t,a.key)===0){if(a.right.isEmpty())return ho.EMPTY;n=a.right.min(),a=a.copy(n.key,n.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,r))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ho.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ho.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Vr(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Vr(27949);return t+(this.isRed()?0:1)}}ho.EMPTY=null,ho.RED=!0,ho.BLACK=!1;ho.EMPTY=new class{constructor(){this.size=0}get key(){throw Vr(57766)}get value(){throw Vr(16141)}get color(){throw Vr(16727)}get left(){throw Vr(29726)}get right(){throw Vr(36894)}copy(t,r,n,a,s){return this}insert(t,r,n){return new ho(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(t){this.comparator=t,this.data=new us(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,n)=>(t(r),!1))}forEachInRange(t,r){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const a=n.getNext();if(this.comparator(a.key,t[1])>=0)return;r(a.key)}}forEachWhile(t,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new n9(this.data.getIterator())}getIteratorFrom(t){return new n9(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(n=>{r=r.add(n)}),r}isEqual(t){if(!(t instanceof Si)||this.size!==t.size)return!1;const r=this.data.getIterator(),n=t.data.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(this.comparator(a,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Si(this.comparator);return r.data=t,r}}class n9{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(t){this.fields=t,t.sort(Gi.comparator)}static empty(){return new Ic([])}unionWith(t){let r=new Si(Gi.comparator);for(const n of this.fields)r=r.add(n);for(const n of t)r=r.add(n);return new Ic(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return Bx(this.fields,t.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(a){try{return atob(a)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new JY("Invalid base64 string: "+s):s}}(t);return new Yi(r)}static fromUint8Array(t){const r=function(a){let s="";for(let i=0;i<a.length;++i)s+=String.fromCharCode(a[i]);return s}(t);return new Yi(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Tn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Yi.EMPTY_BYTE_STRING=new Yi("");const Spe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function um(e){if(la(!!e,39018),typeof e=="string"){let t=0;const r=Spe.exec(e);if(la(!!r,46558,{timestamp:e}),r[1]){let a=r[1];a=(a+"000000000").substr(0,9),t=Number(a)}const n=new Date(e);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:zs(e.seconds),nanos:zs(e.nanos)}}function zs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function dm(e){return typeof e=="string"?Yi.fromBase64String(e):Yi.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZY="server_timestamp",eJ="__type__",tJ="__previous_value__",rJ="__local_write_time__";function LN(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[eJ])==null?void 0:n.stringValue)===ZY}function MN(e){const t=e.mapValue.fields[tJ];return LN(t)?MN(t):t}function cw(e){const t=um(e.mapValue.fields[rJ].timestampValue);return new mr(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Npe{constructor(t,r,n,a,s,i,o,c,u,d){this.databaseId=t,this.appId=r,this.persistenceKey=n,this.host=a,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const CS="(default)";class Tx{constructor(t,r){this.projectId=t,this.database=r||CS}static empty(){return new Tx("","")}get isDefaultDatabase(){return this.database===CS}isEqual(t){return t instanceof Tx&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nJ="__type__",kpe="__max__",eC={mapValue:{}},aJ="__vector__",_S="value";function Am(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?LN(e)?4:Tpe(e)?9007199254740991:Bpe(e)?10:11:Vr(28295,{value:e})}function XA(e,t){if(e===t)return!0;const r=Am(e);if(r!==Am(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return cw(e).isEqual(cw(t));case 3:return function(a,s){if(typeof a.timestampValue=="string"&&typeof s.timestampValue=="string"&&a.timestampValue.length===s.timestampValue.length)return a.timestampValue===s.timestampValue;const i=um(a.timestampValue),o=um(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(a,s){return dm(a.bytesValue).isEqual(dm(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(a,s){return zs(a.geoPointValue.latitude)===zs(s.geoPointValue.latitude)&&zs(a.geoPointValue.longitude)===zs(s.geoPointValue.longitude)}(e,t);case 2:return function(a,s){if("integerValue"in a&&"integerValue"in s)return zs(a.integerValue)===zs(s.integerValue);if("doubleValue"in a&&"doubleValue"in s){const i=zs(a.doubleValue),o=zs(s.doubleValue);return i===o?ES(i)===ES(o):isNaN(i)&&isNaN(o)}return!1}(e,t);case 9:return Bx(e.arrayValue.values||[],t.arrayValue.values||[],XA);case 10:case 11:return function(a,s){const i=a.mapValue.fields||{},o=s.mapValue.fields||{};if(r9(i)!==r9(o))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(o[c]===void 0||!XA(i[c],o[c])))return!1;return!0}(e,t);default:return Vr(52216,{left:e})}}function uw(e,t){return(e.values||[]).find(r=>XA(r,t))!==void 0}function jx(e,t){if(e===t)return 0;const r=Am(e),n=Am(t);if(r!==n)return Tn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Tn(e.booleanValue,t.booleanValue);case 2:return function(s,i){const o=zs(s.integerValue||s.doubleValue),c=zs(i.integerValue||i.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(e,t);case 3:return a9(e.timestampValue,t.timestampValue);case 4:return a9(cw(e),cw(t));case 5:return nF(e.stringValue,t.stringValue);case 6:return function(s,i){const o=dm(s),c=dm(i);return o.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(s,i){const o=s.split("/"),c=i.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=Tn(o[u],c[u]);if(d!==0)return d}return Tn(o.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,i){const o=Tn(zs(s.latitude),zs(i.latitude));return o!==0?o:Tn(zs(s.longitude),zs(i.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return s9(e.arrayValue,t.arrayValue);case 10:return function(s,i){var h,p,g,v;const o=s.fields||{},c=i.fields||{},u=(h=o[_S])==null?void 0:h.arrayValue,d=(p=c[_S])==null?void 0:p.arrayValue,f=Tn(((g=u==null?void 0:u.values)==null?void 0:g.length)||0,((v=d==null?void 0:d.values)==null?void 0:v.length)||0);return f!==0?f:s9(u,d)}(e.mapValue,t.mapValue);case 11:return function(s,i){if(s===eC.mapValue&&i===eC.mapValue)return 0;if(s===eC.mapValue)return 1;if(i===eC.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=i.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){const h=nF(c[f],d[f]);if(h!==0)return h;const p=jx(o[c[f]],u[d[f]]);if(p!==0)return p}return Tn(c.length,d.length)}(e.mapValue,t.mapValue);default:throw Vr(23264,{he:r})}}function a9(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Tn(e,t);const r=um(e),n=um(t),a=Tn(r.seconds,n.seconds);return a!==0?a:Tn(r.nanos,n.nanos)}function s9(e,t){const r=e.values||[],n=t.values||[];for(let a=0;a<r.length&&a<n.length;++a){const s=jx(r[a],n[a]);if(s)return s}return Tn(r.length,n.length)}function Ix(e){return aF(e)}function aF(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){const n=um(r);return`time(${n.seconds},${n.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(r){return dm(r).toBase64()}(e.bytesValue):"referenceValue"in e?function(r){return br.fromName(r).toString()}(e.referenceValue):"geoPointValue"in e?function(r){return`geo(${r.latitude},${r.longitude})`}(e.geoPointValue):"arrayValue"in e?function(r){let n="[",a=!0;for(const s of r.values||[])a?a=!1:n+=",",n+=aF(s);return n+"]"}(e.arrayValue):"mapValue"in e?function(r){const n=Object.keys(r.fields||{}).sort();let a="{",s=!0;for(const i of n)s?s=!1:a+=",",a+=`${i}:${aF(r.fields[i])}`;return a+"}"}(e.mapValue):Vr(61005,{value:e})}function T_(e){switch(Am(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=MN(e);return t?16+T_(t):16;case 5:return 2*e.stringValue.length;case 6:return dm(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((a,s)=>a+T_(s),0)}(e.arrayValue);case 10:case 11:return function(n){let a=0;return Sm(n.fields,(s,i)=>{a+=s.length+T_(i)}),a}(e.mapValue);default:throw Vr(13486,{value:e})}}function SS(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function sF(e){return!!e&&"integerValue"in e}function fD(e){return!!e&&"arrayValue"in e}function i9(e){return!!e&&"nullValue"in e}function o9(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function j_(e){return!!e&&"mapValue"in e}function Bpe(e){var r,n;return((n=(((r=e==null?void 0:e.mapValue)==null?void 0:r.fields)||{})[nJ])==null?void 0:n.stringValue)===aJ}function jy(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Sm(e.mapValue.fields,(r,n)=>t.mapValue.fields[r]=jy(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=jy(e.arrayValue.values[r]);return t}return{...e}}function Tpe(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===kpe}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t){this.value=t}static empty(){return new Kl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let n=0;n<t.length-1;++n)if(r=(r.mapValue.fields||{})[t.get(n)],!j_(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=jy(r)}setAll(t){let r=Gi.emptyPath(),n={},a=[];t.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const c=this.getFieldsMap(r);this.applyChanges(c,n,a),n={},a=[],r=o.popLast()}i?n[o.lastSegment()]=jy(i):a.push(o.lastSegment())});const s=this.getFieldsMap(r);this.applyChanges(s,n,a)}delete(t){const r=this.field(t.popLast());j_(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return XA(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<t.length;++n){let a=r.mapValue.fields[t.get(n)];j_(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},r.mapValue.fields[t.get(n)]=a),r=a}return r.mapValue.fields}applyChanges(t,r,n){Sm(r,(a,s)=>t[a]=s);for(const a of n)delete t[a]}clone(){return new Kl(jy(this.value))}}function sJ(e){const t=[];return Sm(e.fields,(r,n)=>{const a=new Gi([r]);if(j_(n)){const s=sJ(n.mapValue).fields;if(s.length===0)t.push(a);else for(const i of s)t.push(a.child(i))}else t.push(a)}),new Ic(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t,r,n,a,s,i,o){this.key=t,this.documentType=r,this.version=n,this.readTime=a,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(t){return new zo(t,0,Wr.min(),Wr.min(),Wr.min(),Kl.empty(),0)}static newFoundDocument(t,r,n,a){return new zo(t,1,r,Wr.min(),n,a,0)}static newNoDocument(t,r){return new zo(t,2,r,Wr.min(),Wr.min(),Kl.empty(),0)}static newUnknownDocument(t,r){return new zo(t,3,r,Wr.min(),Wr.min(),Kl.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(Wr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Kl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Kl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Wr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof zo&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new zo(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(t,r){this.position=t,this.inclusive=r}}function l9(e,t,r){let n=0;for(let a=0;a<e.position.length;a++){const s=t[a],i=e.position[a];if(s.field.isKeyField()?n=br.comparator(br.fromName(i.referenceValue),r.key):n=jx(i,r.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function c9(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!XA(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(t,r="asc"){this.field=t,this.dir=r}}function jpe(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ{}class fi extends iJ{constructor(t,r,n){super(),this.field=t,this.op=r,this.value=n}static create(t,r,n){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,n):new Fpe(t,r,n):r==="array-contains"?new Ppe(t,n):r==="in"?new Rpe(t,n):r==="not-in"?new Lpe(t,n):r==="array-contains-any"?new Mpe(t,n):new fi(t,r,n)}static createKeyFieldInFilter(t,r,n){return r==="in"?new Ope(t,n):new Dpe(t,n)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(jx(r,this.value)):r!==null&&Am(this.value)===Am(r)&&this.matchesComparison(jx(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Vr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fd extends iJ{constructor(t,r){super(),this.filters=t,this.op=r,this.Pe=null}static create(t,r){return new Fd(t,r)}matches(t){return oJ(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function oJ(e){return e.op==="and"}function lJ(e){return Ipe(e)&&oJ(e)}function Ipe(e){for(const t of e.filters)if(t instanceof Fd)return!1;return!0}function iF(e){if(e instanceof fi)return e.field.canonicalString()+e.op.toString()+Ix(e.value);if(lJ(e))return e.filters.map(t=>iF(t)).join(",");{const t=e.filters.map(r=>iF(r)).join(",");return`${e.op}(${t})`}}function cJ(e,t){return e instanceof fi?function(n,a){return a instanceof fi&&n.op===a.op&&n.field.isEqual(a.field)&&XA(n.value,a.value)}(e,t):e instanceof Fd?function(n,a){return a instanceof Fd&&n.op===a.op&&n.filters.length===a.filters.length?n.filters.reduce((s,i,o)=>s&&cJ(i,a.filters[o]),!0):!1}(e,t):void Vr(19439)}function uJ(e){return e instanceof fi?function(r){return`${r.field.canonicalString()} ${r.op} ${Ix(r.value)}`}(e):e instanceof Fd?function(r){return r.op.toString()+" {"+r.getFilters().map(uJ).join(" ,")+"}"}(e):"Filter"}class Fpe extends fi{constructor(t,r,n){super(t,r,n),this.key=br.fromName(n.referenceValue)}matches(t){const r=br.comparator(t.key,this.key);return this.matchesComparison(r)}}class Ope extends fi{constructor(t,r){super(t,"in",r),this.keys=dJ("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class Dpe extends fi{constructor(t,r){super(t,"not-in",r),this.keys=dJ("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function dJ(e,t){var r;return(((r=t.arrayValue)==null?void 0:r.values)||[]).map(n=>br.fromName(n.referenceValue))}class Ppe extends fi{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return fD(r)&&uw(r.arrayValue,this.value)}}class Rpe extends fi{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&uw(this.value.arrayValue,r)}}class Lpe extends fi{constructor(t,r){super(t,"not-in",r)}matches(t){if(uw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&r.nullValue===void 0&&!uw(this.value.arrayValue,r)}}class Mpe extends fi{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!fD(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>uw(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Upe{constructor(t,r=null,n=[],a=[],s=null,i=null,o=null){this.path=t,this.collectionGroup=r,this.orderBy=n,this.filters=a,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function u9(e,t=null,r=[],n=[],a=null,s=null,i=null){return new Upe(e,t,r,n,a,s,i)}function hD(e){const t=Zr(e);if(t.Te===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(n=>iF(n)).join(","),r+="|ob:",r+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),RN(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(n=>Ix(n)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(n=>Ix(n)).join(",")),t.Te=r}return t.Te}function mD(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!jpe(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!cJ(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!c9(e.startAt,t.startAt)&&c9(e.endAt,t.endAt)}function oF(e){return br.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(t,r=null,n=[],a=[],s=null,i="F",o=null,c=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=a,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Qpe(e,t,r,n,a,s,i,o){return new mg(e,t,r,n,a,s,i,o)}function UN(e){return new mg(e)}function d9(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function pD(e){return e.collectionGroup!==null}function lx(e){const t=Zr(e);if(t.Ie===null){t.Ie=[];const r=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),r.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Si(Gi.comparator);return i.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(t).forEach(s=>{r.has(s.canonicalString())||s.isKeyField()||t.Ie.push(new dw(s,n))}),r.has(Gi.keyField().canonicalString())||t.Ie.push(new dw(Gi.keyField(),n))}return t.Ie}function VA(e){const t=Zr(e);return t.Ee||(t.Ee=Hpe(t,lx(e))),t.Ee}function Hpe(e,t){if(e.limitType==="F")return u9(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(a=>{const s=a.dir==="desc"?"asc":"desc";return new dw(a.field,s)});const r=e.endAt?new Fx(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new Fx(e.startAt.position,e.startAt.inclusive):null;return u9(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function lF(e,t){const r=e.filters.concat([t]);return new mg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function NS(e,t,r){return new mg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function QN(e,t){return mD(VA(e),VA(t))&&e.limitType===t.limitType}function AJ(e){return`${hD(VA(e))}|lt:${e.limitType}`}function Dv(e){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(a=>uJ(a)).join(", ")}]`),RN(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(a=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(a)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(a=>Ix(a)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(a=>Ix(a)).join(",")),`Target(${n})`}(VA(e))}; limitType=${e.limitType})`}function HN(e,t){return t.isFoundDocument()&&function(n,a){const s=a.key.path;return n.collectionGroup!==null?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):br.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(e,t)&&function(n,a){for(const s of lx(n))if(!s.field.isKeyField()&&a.data.field(s.field)===null)return!1;return!0}(e,t)&&function(n,a){for(const s of n.filters)if(!s.matches(a))return!1;return!0}(e,t)&&function(n,a){return!(n.startAt&&!function(i,o,c){const u=l9(i,o,c);return i.inclusive?u<=0:u<0}(n.startAt,lx(n),a)||n.endAt&&!function(i,o,c){const u=l9(i,o,c);return i.inclusive?u>=0:u>0}(n.endAt,lx(n),a))}(e,t)}function Vpe(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fJ(e){return(t,r)=>{let n=!1;for(const a of lx(e)){const s=zpe(a,t,r);if(s!==0)return s;n=n||a.field.isKeyField()}return 0}}function zpe(e,t,r){const n=e.field.isKeyField()?br.comparator(t.key,r.key):function(s,i,o){const c=i.data.field(s),u=o.data.field(s);return c!==null&&u!==null?jx(c,u):Vr(42886)}(e.field,t,r);switch(e.dir){case"asc":return n;case"desc":return-1*n;default:return Vr(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n!==void 0){for(const[a,s]of n)if(this.equalsFn(a,t))return s}}has(t){return this.get(t)!==void 0}set(t,r){const n=this.mapKeyFn(t),a=this.inner[n];if(a===void 0)return this.inner[n]=[[t,r]],void this.innerSize++;for(let s=0;s<a.length;s++)if(this.equalsFn(a[s][0],t))return void(a[s]=[t,r]);a.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),n=this.inner[r];if(n===void 0)return!1;for(let a=0;a<n.length;a++)if(this.equalsFn(n[a][0],t))return n.length===1?delete this.inner[r]:n.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Sm(this.inner,(r,n)=>{for(const[a,s]of n)t(a,s)})}isEmpty(){return YY(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $pe=new us(br.comparator);function fh(){return $pe}const hJ=new us(br.comparator);function ly(...e){let t=hJ;for(const r of e)t=t.insert(r.key,r);return t}function mJ(e){let t=hJ;return e.forEach((r,n)=>t=t.insert(r,n.overlayedDocument)),t}function Ep(){return Iy()}function pJ(){return Iy()}function Iy(){return new pg(e=>e.toString(),(e,t)=>e.isEqual(t))}const Gpe=new us(br.comparator),Kpe=new Si(br.comparator);function jn(...e){let t=Kpe;for(const r of e)t=t.add(r);return t}const qpe=new Si(Tn);function Wpe(){return qpe}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gD(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ES(t)?"-0":t}}function gJ(e){return{integerValue:""+e}}function Xpe(e,t){return Epe(t)?gJ(t):gD(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(){this._=void 0}}function Ype(e,t,r){return e instanceof Aw?function(a,s){const i={fields:{[eJ]:{stringValue:ZY},[rJ]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return s&&LN(s)&&(s=MN(s)),s&&(i.fields[tJ]=s),{mapValue:i}}(r,t):e instanceof Ox?xJ(e,t):e instanceof fw?bJ(e,t):function(a,s){const i=vJ(a,s),o=A9(i)+A9(a.Ae);return sF(i)&&sF(a.Ae)?gJ(o):gD(a.serializer,o)}(e,t)}function Jpe(e,t,r){return e instanceof Ox?xJ(e,t):e instanceof fw?bJ(e,t):r}function vJ(e,t){return e instanceof kS?function(n){return sF(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Aw extends VN{}class Ox extends VN{constructor(t){super(),this.elements=t}}function xJ(e,t){const r=yJ(t);for(const n of e.elements)r.some(a=>XA(a,n))||r.push(n);return{arrayValue:{values:r}}}class fw extends VN{constructor(t){super(),this.elements=t}}function bJ(e,t){let r=yJ(t);for(const n of e.elements)r=r.filter(a=>!XA(a,n));return{arrayValue:{values:r}}}class kS extends VN{constructor(t,r){super(),this.serializer=t,this.Ae=r}}function A9(e){return zs(e.integerValue||e.doubleValue)}function yJ(e){return fD(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJ{constructor(t,r){this.field=t,this.transform=r}}function Zpe(e,t){return e.field.isEqual(t.field)&&function(n,a){return n instanceof Ox&&a instanceof Ox||n instanceof fw&&a instanceof fw?Bx(n.elements,a.elements,XA):n instanceof kS&&a instanceof kS?XA(n.Ae,a.Ae):n instanceof Aw&&a instanceof Aw}(e.transform,t.transform)}class ege{constructor(t,r){this.version=t,this.transformResults=r}}class vl{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new vl}static exists(t){return new vl(void 0,t)}static updateTime(t){return new vl(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function I_(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class zN{}function EJ(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new $N(e.key,vl.none()):new d2(e.key,e.data,vl.none());{const r=e.data,n=Kl.empty();let a=new Si(Gi.comparator);for(let s of t.fields)if(!a.has(s)){let i=r.field(s);i===null&&s.length>1&&(s=s.popLast(),i=r.field(s)),i===null?n.delete(s):n.set(s,i),a=a.add(s)}return new Nm(e.key,n,new Ic(a.toArray()),vl.none())}}function tge(e,t,r){e instanceof d2?function(a,s,i){const o=a.value.clone(),c=h9(a.fieldTransforms,s,i.transformResults);o.setAll(c),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(e,t,r):e instanceof Nm?function(a,s,i){if(!I_(a.precondition,s))return void s.convertToUnknownDocument(i.version);const o=h9(a.fieldTransforms,s,i.transformResults),c=s.data;c.setAll(CJ(a)),c.setAll(o),s.convertToFoundDocument(i.version,c).setHasCommittedMutations()}(e,t,r):function(a,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,t,r)}function Fy(e,t,r,n){return e instanceof d2?function(s,i,o,c){if(!I_(s.precondition,i))return o;const u=s.value.clone(),d=m9(s.fieldTransforms,c,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(e,t,r,n):e instanceof Nm?function(s,i,o,c){if(!I_(s.precondition,i))return o;const u=m9(s.fieldTransforms,c,i),d=i.data;return d.setAll(CJ(s)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,r,n):function(s,i,o){return I_(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(e,t,r)}function rge(e,t){let r=null;for(const n of e.fieldTransforms){const a=t.data.field(n.field),s=vJ(n.transform,a||null);s!=null&&(r===null&&(r=Kl.empty()),r.set(n.field,s))}return r||null}function f9(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(n,a){return n===void 0&&a===void 0||!(!n||!a)&&Bx(n,a,(s,i)=>Zpe(s,i))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class d2 extends zN{constructor(t,r,n,a=[]){super(),this.key=t,this.value=r,this.precondition=n,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Nm extends zN{constructor(t,r,n,a,s=[]){super(),this.key=t,this.data=r,this.fieldMask=n,this.precondition=a,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function CJ(e){const t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=e.data.field(r);t.set(r,n)}}),t}function h9(e,t,r){const n=new Map;la(e.length===r.length,32656,{Re:r.length,Ve:e.length});for(let a=0;a<r.length;a++){const s=e[a],i=s.transform,o=t.data.field(s.field);n.set(s.field,Jpe(i,o,r[a]))}return n}function m9(e,t,r){const n=new Map;for(const a of e){const s=a.transform,i=r.data.field(a.field);n.set(a.field,Ype(s,i,t))}return n}class $N extends zN{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nge extends zN{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class age{constructor(t,r,n,a){this.batchId=t,this.localWriteTime=r,this.baseMutations=n,this.mutations=a}applyToRemoteDocument(t,r){const n=r.mutationResults;for(let a=0;a<this.mutations.length;a++){const s=this.mutations[a];s.key.isEqual(t.key)&&tge(s,t,n[a])}}applyToLocalView(t,r){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(r=Fy(n,t,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(r=Fy(n,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const n=pJ();return this.mutations.forEach(a=>{const s=t.get(a.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=r.has(a.key)?null:o;const c=EJ(i,o);c!==null&&n.set(a.key,c),i.isValidDocument()||i.convertToNoDocument(Wr.min())}),n}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),jn())}isEqual(t){return this.batchId===t.batchId&&Bx(this.mutations,t.mutations,(r,n)=>f9(r,n))&&Bx(this.baseMutations,t.baseMutations,(r,n)=>f9(r,n))}}class vD{constructor(t,r,n,a){this.batch=t,this.commitVersion=r,this.mutationResults=n,this.docVersions=a}static from(t,r,n){la(t.mutations.length===n.length,58842,{me:t.mutations.length,fe:n.length});let a=function(){return Gpe}();const s=t.mutations;for(let i=0;i<s.length;i++)a=a.insert(s[i].key,n[i].version);return new vD(t,r,n,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sge{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ige{constructor(t,r){this.count=t,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ii,Mn;function oge(e){switch(e){case Et.OK:return Vr(64938);case Et.CANCELLED:case Et.UNKNOWN:case Et.DEADLINE_EXCEEDED:case Et.RESOURCE_EXHAUSTED:case Et.INTERNAL:case Et.UNAVAILABLE:case Et.UNAUTHENTICATED:return!1;case Et.INVALID_ARGUMENT:case Et.NOT_FOUND:case Et.ALREADY_EXISTS:case Et.PERMISSION_DENIED:case Et.FAILED_PRECONDITION:case Et.ABORTED:case Et.OUT_OF_RANGE:case Et.UNIMPLEMENTED:case Et.DATA_LOSS:return!0;default:return Vr(15467,{code:e})}}function _J(e){if(e===void 0)return Ah("GRPC error has no .code"),Et.UNKNOWN;switch(e){case ii.OK:return Et.OK;case ii.CANCELLED:return Et.CANCELLED;case ii.UNKNOWN:return Et.UNKNOWN;case ii.DEADLINE_EXCEEDED:return Et.DEADLINE_EXCEEDED;case ii.RESOURCE_EXHAUSTED:return Et.RESOURCE_EXHAUSTED;case ii.INTERNAL:return Et.INTERNAL;case ii.UNAVAILABLE:return Et.UNAVAILABLE;case ii.UNAUTHENTICATED:return Et.UNAUTHENTICATED;case ii.INVALID_ARGUMENT:return Et.INVALID_ARGUMENT;case ii.NOT_FOUND:return Et.NOT_FOUND;case ii.ALREADY_EXISTS:return Et.ALREADY_EXISTS;case ii.PERMISSION_DENIED:return Et.PERMISSION_DENIED;case ii.FAILED_PRECONDITION:return Et.FAILED_PRECONDITION;case ii.ABORTED:return Et.ABORTED;case ii.OUT_OF_RANGE:return Et.OUT_OF_RANGE;case ii.UNIMPLEMENTED:return Et.UNIMPLEMENTED;case ii.DATA_LOSS:return Et.DATA_LOSS;default:return Vr(39323,{code:e})}}(Mn=ii||(ii={}))[Mn.OK=0]="OK",Mn[Mn.CANCELLED=1]="CANCELLED",Mn[Mn.UNKNOWN=2]="UNKNOWN",Mn[Mn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mn[Mn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mn[Mn.NOT_FOUND=5]="NOT_FOUND",Mn[Mn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mn[Mn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mn[Mn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mn[Mn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mn[Mn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mn[Mn.ABORTED=10]="ABORTED",Mn[Mn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mn[Mn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mn[Mn.INTERNAL=13]="INTERNAL",Mn[Mn.UNAVAILABLE=14]="UNAVAILABLE",Mn[Mn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lge(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cge=new X0([4294967295,4294967295],0);function p9(e){const t=lge().encode(e),r=new LY;return r.update(t),new Uint8Array(r.digest())}function g9(e){const t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),a=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new X0([r,n],0),new X0([a,s],0)]}class xD{constructor(t,r,n){if(this.bitmap=t,this.padding=r,this.hashCount=n,r<0||r>=8)throw new cy(`Invalid padding: ${r}`);if(n<0)throw new cy(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new cy(`Invalid hash count: ${n}`);if(t.length===0&&r!==0)throw new cy(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*t.length-r,this.pe=X0.fromNumber(this.ge)}ye(t,r,n){let a=t.add(r.multiply(X0.fromNumber(n)));return a.compare(cge)===1&&(a=new X0([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const r=p9(t),[n,a]=g9(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);if(!this.we(i))return!1}return!0}static create(t,r,n){const a=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),i=new xD(s,a,r);return n.forEach(o=>i.insert(o)),i}insert(t){if(this.ge===0)return;const r=p9(t),[n,a]=g9(r);for(let s=0;s<this.hashCount;s++){const i=this.ye(n,a,s);this.Se(i)}}Se(t){const r=Math.floor(t/8),n=t%8;this.bitmap[r]|=1<<n}}class cy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(t,r,n,a,s){this.snapshotVersion=t,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=a,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,r,n){const a=new Map;return a.set(t,A2.createSynthesizedTargetChangeForCurrentChange(t,r,n)),new GN(Wr.min(),a,new us(Tn),fh(),jn())}}class A2{constructor(t,r,n,a,s){this.resumeToken=t,this.current=r,this.addedDocuments=n,this.modifiedDocuments=a,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,r,n){return new A2(n,r,jn(),jn(),jn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(t,r,n,a){this.be=t,this.removedTargetIds=r,this.key=n,this.De=a}}class SJ{constructor(t,r){this.targetId=t,this.Ce=r}}class NJ{constructor(t,r,n=Yi.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=r,this.resumeToken=n,this.cause=a}}class v9{constructor(){this.ve=0,this.Fe=x9(),this.Me=Yi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=jn(),r=jn(),n=jn();return this.Fe.forEach((a,s)=>{switch(s){case 0:t=t.add(a);break;case 2:r=r.add(a);break;case 1:n=n.add(a);break;default:Vr(38017,{changeType:s})}}),new A2(this.Me,this.xe,t,r,n)}qe(){this.Oe=!1,this.Fe=x9()}Qe(t,r){this.Oe=!0,this.Fe=this.Fe.insert(t,r)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,la(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uge{constructor(t){this.Ge=t,this.ze=new Map,this.je=fh(),this.Je=tC(),this.He=tC(),this.Ye=new us(Tn)}Ze(t){for(const r of t.be)t.De&&t.De.isFoundDocument()?this.Xe(r,t.De):this.et(r,t.key,t.De);for(const r of t.removedTargetIds)this.et(r,t.key,t.De)}tt(t){this.forEachTarget(t,r=>{const n=this.nt(r);switch(t.state){case 0:this.rt(r)&&n.Le(t.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(t.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(t.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(t.resumeToken));break;default:Vr(56790,{state:t.state})}})}forEachTarget(t,r){t.targetIds.length>0?t.targetIds.forEach(r):this.ze.forEach((n,a)=>{this.rt(a)&&r(a)})}st(t){const r=t.targetId,n=t.Ce.count,a=this.ot(r);if(a){const s=a.target;if(oF(s))if(n===0){const i=new br(s.path);this.et(r,i,zo.newNoDocument(i,Wr.min()))}else la(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(t),c=o?this.ct(o,t,i):1;if(c!==0){this.it(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(t){const r=t.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:a=0},hashCount:s=0}=r;let i,o;try{i=dm(n).toUint8Array()}catch(c){if(c instanceof JY)return Yp("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new xD(i,a,s)}catch(c){return Yp(c instanceof cy?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(t,r,n){return r.Ce.count===n-this.Pt(t,r.targetId)?0:2}Pt(t,r){const n=this.Ge.getRemoteKeysForTarget(r);let a=0;return n.forEach(s=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${s.path.canonicalString()}`;t.mightContain(o)||(this.et(r,s,null),a++)}),a}Tt(t){const r=new Map;this.ze.forEach((s,i)=>{const o=this.ot(i);if(o){if(s.current&&oF(o.target)){const c=new br(o.target.path);this.It(c).has(i)||this.Et(i,c)||this.et(i,c,zo.newNoDocument(c,t))}s.Be&&(r.set(i,s.ke()),s.qe())}});let n=jn();this.He.forEach((s,i)=>{let o=!0;i.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.je.forEach((s,i)=>i.setReadTime(t));const a=new GN(t,r,this.Ye,this.je,n);return this.je=fh(),this.Je=tC(),this.He=tC(),this.Ye=new us(Tn),a}Xe(t,r){if(!this.rt(t))return;const n=this.Et(t,r.key)?2:0;this.nt(t).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(t)),this.He=this.He.insert(r.key,this.dt(r.key).add(t))}et(t,r,n){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,r)?a.Qe(r,1):a.$e(r),this.He=this.He.insert(r,this.dt(r).delete(t)),this.He=this.He.insert(r,this.dt(r).add(t)),n&&(this.je=this.je.insert(r,n))}removeTarget(t){this.ze.delete(t)}_t(t){const r=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+r.addedDocuments.size-r.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let r=this.ze.get(t);return r||(r=new v9,this.ze.set(t,r)),r}dt(t){let r=this.He.get(t);return r||(r=new Si(Tn),this.He=this.He.insert(t,r)),r}It(t){let r=this.Je.get(t);return r||(r=new Si(Tn),this.Je=this.Je.insert(t,r)),r}rt(t){const r=this.ot(t)!==null;return r||lr("WatchChangeAggregator","Detected inactive target",t),r}ot(t){const r=this.ze.get(t);return r&&r.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new v9),this.Ge.getRemoteKeysForTarget(t).forEach(r=>{this.et(t,r,null)})}Et(t,r){return this.Ge.getRemoteKeysForTarget(t).has(r)}}function tC(){return new us(br.comparator)}function x9(){return new us(br.comparator)}const dge={asc:"ASCENDING",desc:"DESCENDING"},Age={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fge={and:"AND",or:"OR"};class hge{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function cF(e,t){return e.useProto3Json||RN(t)?t:{value:t}}function BS(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function kJ(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function mge(e,t){return BS(e,t.toTimestamp())}function zA(e){return la(!!e,49232),Wr.fromTimestamp(function(r){const n=um(r);return new mr(n.seconds,n.nanos)}(e))}function bD(e,t){return uF(e,t).canonicalString()}function uF(e,t){const r=function(a){return new Na(["projects",a.projectId,"databases",a.database])}(e).child("documents");return t===void 0?r:r.child(t)}function BJ(e){const t=Na.fromString(e);return la(OJ(t),10190,{key:t.toString()}),t}function dF(e,t){return bD(e.databaseId,t.path)}function dT(e,t){const r=BJ(t);if(r.get(1)!==e.databaseId.projectId)throw new Wt(Et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new Wt(Et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new br(jJ(r))}function TJ(e,t){return bD(e.databaseId,t)}function pge(e){const t=BJ(e);return t.length===4?Na.emptyPath():jJ(t)}function AF(e){return new Na(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function jJ(e){return la(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function b9(e,t,r){return{name:dF(e,t),fields:r.value.mapValue.fields}}function gge(e,t){let r;if("targetChange"in t){t.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Vr(39313,{state:u})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(la(d===void 0||typeof d=="string",58123),Yi.fromBase64String(d||"")):(la(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Yi.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),i=t.targetChange.cause,o=i&&function(u){const d=u.code===void 0?Et.UNKNOWN:_J(u.code);return new Wt(d,u.message||"")}(i);r=new NJ(n,a,s,o||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const a=dT(e,n.document.name),s=zA(n.document.updateTime),i=n.document.createTime?zA(n.document.createTime):Wr.min(),o=new Kl({mapValue:{fields:n.document.fields}}),c=zo.newFoundDocument(a,s,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new F_(u,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const a=dT(e,n.document),s=n.readTime?zA(n.readTime):Wr.min(),i=zo.newNoDocument(a,s),o=n.removedTargetIds||[];r=new F_([],o,i.key,i)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const a=dT(e,n.document),s=n.removedTargetIds||[];r=new F_([],s,a,null)}else{if(!("filter"in t))return Vr(11601,{Rt:t});{t.filter;const n=t.filter;n.targetId;const{count:a=0,unchangedNames:s}=n,i=new ige(a,s),o=n.targetId;r=new SJ(o,i)}}return r}function vge(e,t){let r;if(t instanceof d2)r={update:b9(e,t.key,t.value)};else if(t instanceof $N)r={delete:dF(e,t.key)};else if(t instanceof Nm)r={update:b9(e,t.key,t.data),updateMask:Nge(t.fieldMask)};else{if(!(t instanceof nge))return Vr(16599,{Vt:t.type});r={verify:dF(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(n=>function(s,i){const o=i.transform;if(o instanceof Aw)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Ox)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof fw)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof kS)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Vr(20930,{transform:i.transform})}(0,n))),t.precondition.isNone||(r.currentDocument=function(a,s){return s.updateTime!==void 0?{updateTime:mge(a,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Vr(27497)}(e,t.precondition)),r}function xge(e,t){return e&&e.length>0?(la(t!==void 0,14353),e.map(r=>function(a,s){let i=a.updateTime?zA(a.updateTime):zA(s);return i.isEqual(Wr.min())&&(i=zA(s)),new ege(i,a.transformResults||[])}(r,t))):[]}function bge(e,t){return{documents:[TJ(e,t.path)]}}function yge(e,t){const r={structuredQuery:{}},n=t.path;let a;t.collectionGroup!==null?(a=n,r.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=TJ(e,a);const s=function(u){if(u.length!==0)return FJ(Fd.create(u,"and"))}(t.filters);s&&(r.structuredQuery.where=s);const i=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Pv(h.field),direction:Cge(h.dir)}}(d))}(t.orderBy);i&&(r.structuredQuery.orderBy=i);const o=cF(e,t.limit);return o!==null&&(r.structuredQuery.limit=o),t.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{ft:r,parent:a}}function wge(e){let t=pge(e.parent);const r=e.structuredQuery,n=r.from?r.from.length:0;let a=null;if(n>0){la(n===1,65062);const d=r.from[0];d.allDescendants?a=d.collectionId:t=t.child(d.collectionId)}let s=[];r.where&&(s=function(f){const h=IJ(f);return h instanceof Fd&&lJ(h)?h.getFilters():[h]}(r.where));let i=[];r.orderBy&&(i=function(f){return f.map(h=>function(g){return new dw(Rv(g.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(r.orderBy));let o=null;r.limit&&(o=function(f){let h;return h=typeof f=="object"?f.value:f,RN(h)?null:h}(r.limit));let c=null;r.startAt&&(c=function(f){const h=!!f.before,p=f.values||[];return new Fx(p,h)}(r.startAt));let u=null;return r.endAt&&(u=function(f){const h=!f.before,p=f.values||[];return new Fx(p,h)}(r.endAt)),Qpe(t,a,i,s,o,"F",c,u)}function Ege(e,t){const r=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vr(28987,{purpose:a})}}(t.purpose);return r==null?null:{"goog-listen-tags":r}}function IJ(e){return e.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=Rv(r.unaryFilter.field);return fi.create(n,"==",{doubleValue:NaN});case"IS_NULL":const a=Rv(r.unaryFilter.field);return fi.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Rv(r.unaryFilter.field);return fi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Rv(r.unaryFilter.field);return fi.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Vr(61313);default:return Vr(60726)}}(e):e.fieldFilter!==void 0?function(r){return fi.create(Rv(r.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Vr(58110);default:return Vr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(r){return Fd.create(r.compositeFilter.filters.map(n=>IJ(n)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Vr(1026)}}(r.compositeFilter.op))}(e):Vr(30097,{filter:e})}function Cge(e){return dge[e]}function _ge(e){return Age[e]}function Sge(e){return fge[e]}function Pv(e){return{fieldPath:e.canonicalString()}}function Rv(e){return Gi.fromServerFormat(e.fieldPath)}function FJ(e){return e instanceof fi?function(r){if(r.op==="=="){if(o9(r.value))return{unaryFilter:{field:Pv(r.field),op:"IS_NAN"}};if(i9(r.value))return{unaryFilter:{field:Pv(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(o9(r.value))return{unaryFilter:{field:Pv(r.field),op:"IS_NOT_NAN"}};if(i9(r.value))return{unaryFilter:{field:Pv(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pv(r.field),op:_ge(r.op),value:r.value}}}(e):e instanceof Fd?function(r){const n=r.getFilters().map(a=>FJ(a));return n.length===1?n[0]:{compositeFilter:{op:Sge(r.op),filters:n}}}(e):Vr(54877,{filter:e})}function Nge(e){const t=[];return e.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function OJ(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(t,r,n,a,s=Wr.min(),i=Wr.min(),o=Yi.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=r,this.purpose=n,this.sequenceNumber=a,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(t){return new M0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,r){return new M0(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new M0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new M0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kge{constructor(t){this.yt=t}}function Bge(e){const t=wge({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?NS(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tge{constructor(){this.Cn=new jge}addToCollectionParentIndex(t,r){return this.Cn.add(r),Ot.resolve()}getCollectionParents(t,r){return Ot.resolve(this.Cn.getEntries(r))}addFieldIndex(t,r){return Ot.resolve()}deleteFieldIndex(t,r){return Ot.resolve()}deleteAllFieldIndexes(t){return Ot.resolve()}createTargetIndexes(t,r){return Ot.resolve()}getDocumentsMatchingTarget(t,r){return Ot.resolve(null)}getIndexType(t,r){return Ot.resolve(0)}getFieldIndexes(t,r){return Ot.resolve([])}getNextCollectionGroupToUpdate(t){return Ot.resolve(null)}getMinOffset(t,r){return Ot.resolve(cm.min())}getMinOffsetFromCollectionGroup(t,r){return Ot.resolve(cm.min())}updateCollectionGroup(t,r,n){return Ot.resolve()}updateIndexEntries(t,r){return Ot.resolve()}}class jge{constructor(){this.index={}}add(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r]||new Si(Na.comparator),s=!a.has(n);return this.index[r]=a.add(n),s}has(t){const r=t.lastSegment(),n=t.popLast(),a=this.index[r];return a&&a.has(n)}getEntries(t){return(this.index[t]||new Si(Na.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DJ=41943040;class Hl{static withCacheSize(t){return new Hl(t,Hl.DEFAULT_COLLECTION_PERCENTILE,Hl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hl.DEFAULT_COLLECTION_PERCENTILE=10,Hl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hl.DEFAULT=new Hl(DJ,Hl.DEFAULT_COLLECTION_PERCENTILE,Hl.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hl.DISABLED=new Hl(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Dx(0)}static cr(){return new Dx(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9="LruGarbageCollector",Ige=1048576;function E9([e,t],[r,n]){const a=Tn(e,r);return a===0?Tn(t,n):a}class Fge{constructor(t){this.Ir=t,this.buffer=new Si(E9),this.Er=0}dr(){return++this.Er}Ar(t){const r=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();E9(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Oge{constructor(t,r,n){this.garbageCollector=t,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){lr(w9,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){m1(r)?lr(w9,"Ignoring IndexedDB error during garbage collection: ",r):await h1(r)}await this.Vr(3e5)})}}class Dge{constructor(t,r){this.mr=t,this.params=r}calculateTargetCount(t,r){return this.mr.gr(t).next(n=>Math.floor(r/100*n))}nthSequenceNumber(t,r){if(r===0)return Ot.resolve(PN.ce);const n=new Fge(r);return this.mr.forEachTarget(t,a=>n.Ar(a.sequenceNumber)).next(()=>this.mr.pr(t,a=>n.Ar(a))).next(()=>n.maxValue)}removeTargets(t,r,n){return this.mr.removeTargets(t,r,n)}removeOrphanedDocuments(t,r){return this.mr.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(lr("LruGarbageCollector","Garbage collection skipped; disabled"),Ot.resolve(y9)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(lr("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),y9):this.yr(t,r))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,r){let n,a,s,i,o,c,u;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(lr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),a=this.params.maximumSequenceNumbersToCollect):a=f,i=Date.now(),this.nthSequenceNumber(t,a))).next(f=>(n=f,o=Date.now(),this.removeTargets(t,n,r))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(t,n))).next(f=>(u=Date.now(),Ov()<=Bn.DEBUG&&lr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${a} in `+(o-i)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Ot.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:s,documentsRemoved:f})))}}function Pge(e,t){return new Dge(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rge{constructor(){this.changes=new pg(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,zo.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ot.resolve(n):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lge{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mge{constructor(t,r,n,a){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=a}getDocument(t,r){let n=null;return this.documentOverlayCache.getOverlay(t,r).next(a=>(n=a,this.remoteDocumentCache.getEntry(t,r))).next(a=>(n!==null&&Fy(n.mutation,a,Ic.empty(),mr.now()),a))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.getLocalViewOfDocuments(t,n,jn()).next(()=>n))}getLocalViewOfDocuments(t,r,n=jn()){const a=Ep();return this.populateOverlays(t,a,r).next(()=>this.computeViews(t,r,a,n).next(s=>{let i=ly();return s.forEach((o,c)=>{i=i.insert(o,c.overlayedDocument)}),i}))}getOverlayedDocuments(t,r){const n=Ep();return this.populateOverlays(t,n,r).next(()=>this.computeViews(t,r,n,jn()))}populateOverlays(t,r,n){const a=[];return n.forEach(s=>{r.has(s)||a.push(s)}),this.documentOverlayCache.getOverlays(t,a).next(s=>{s.forEach((i,o)=>{r.set(i,o)})})}computeViews(t,r,n,a){let s=fh();const i=Iy(),o=function(){return Iy()}();return r.forEach((c,u)=>{const d=n.get(u.key);a.has(u.key)&&(d===void 0||d.mutation instanceof Nm)?s=s.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Fy(d.mutation,u,d.mutation.getFieldMask(),mr.now())):i.set(u.key,Ic.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new Lge(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(t,r){const n=Iy();let a=new us((i,o)=>i-o),s=jn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(i=>{for(const o of i)o.keys().forEach(c=>{const u=r.get(c);if(u===null)return;let d=n.get(c)||Ic.empty();d=o.applyToLocalView(u,d),n.set(c,d);const f=(a.get(o.batchId)||jn()).add(c);a=a.insert(o.batchId,f)})}).next(()=>{const i=[],o=a.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,f=pJ();d.forEach(h=>{if(!s.has(h)){const p=EJ(r.get(h),n.get(h));p!==null&&f.set(h,p),s=s.add(h)}}),i.push(this.documentOverlayCache.saveOverlays(t,u,f))}return Ot.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,r,n,a){return function(i){return br.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):pD(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,n,a):this.getDocumentsMatchingCollectionQuery(t,r,n,a)}getNextDocuments(t,r,n,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,n,a).next(s=>{const i=a-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,n.largestBatchId,a-s.size):Ot.resolve(Ep());let o=lw,c=s;return i.next(u=>Ot.forEach(u,(d,f)=>(o<f.largestBatchId&&(o=f.largestBatchId),s.get(d)?Ot.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{c=c.insert(d,h)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,c,u,jn())).next(d=>({batchId:o,changes:mJ(d)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new br(r)).next(n=>{let a=ly();return n.isFoundDocument()&&(a=a.insert(n.key,n)),a})}getDocumentsMatchingCollectionGroupQuery(t,r,n,a){const s=r.collectionGroup;let i=ly();return this.indexManager.getCollectionParents(t,s).next(o=>Ot.forEach(o,c=>{const u=function(f,h){return new mg(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,n,a).next(d=>{d.forEach((f,h)=>{i=i.insert(f,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(t,r,n,a){let s;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,n,s,a))).next(i=>{s.forEach((c,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,zo.newInvalidDocument(d)))});let o=ly();return i.forEach((c,u)=>{const d=s.get(c);d!==void 0&&Fy(d.mutation,u,Ic.empty(),mr.now()),HN(r,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uge{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,r){return Ot.resolve(this.Lr.get(r))}saveBundleMetadata(t,r){return this.Lr.set(r.id,function(a){return{id:a.id,version:a.version,createTime:zA(a.createTime)}}(r)),Ot.resolve()}getNamedQuery(t,r){return Ot.resolve(this.kr.get(r))}saveNamedQuery(t,r){return this.kr.set(r.name,function(a){return{name:a.name,query:Bge(a.bundledQuery),readTime:zA(a.readTime)}}(r)),Ot.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qge{constructor(){this.overlays=new us(br.comparator),this.qr=new Map}getOverlay(t,r){return Ot.resolve(this.overlays.get(r))}getOverlays(t,r){const n=Ep();return Ot.forEach(r,a=>this.getOverlay(t,a).next(s=>{s!==null&&n.set(a,s)})).next(()=>n)}saveOverlays(t,r,n){return n.forEach((a,s)=>{this.St(t,r,s)}),Ot.resolve()}removeOverlaysForBatchId(t,r,n){const a=this.qr.get(n);return a!==void 0&&(a.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(n)),Ot.resolve()}getOverlaysForCollection(t,r,n){const a=Ep(),s=r.length+1,i=new br(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&a.set(c.getKey(),c)}return Ot.resolve(a)}getOverlaysForCollectionGroup(t,r,n,a){let s=new us((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=s.get(u.largestBatchId);d===null&&(d=Ep(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Ep(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=a)););return Ot.resolve(o)}St(t,r,n){const a=this.overlays.get(n.key);if(a!==null){const i=this.qr.get(a.largestBatchId).delete(n.key);this.qr.set(a.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new sge(r,n));let s=this.qr.get(r);s===void 0&&(s=jn(),this.qr.set(r,s)),this.qr.set(r,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hge{constructor(){this.sessionToken=Yi.EMPTY_BYTE_STRING}getSessionToken(t){return Ot.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,Ot.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.Qr=new Si(Hi.$r),this.Ur=new Si(Hi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,r){const n=new Hi(t,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(t,r){t.forEach(n=>this.addReference(n,r))}removeReference(t,r){this.Gr(new Hi(t,r))}zr(t,r){t.forEach(n=>this.removeReference(n,r))}jr(t){const r=new br(new Na([])),n=new Hi(r,t),a=new Hi(r,t+1),s=[];return this.Ur.forEachInRange([n,a],i=>{this.Gr(i),s.push(i.key)}),s}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const r=new br(new Na([])),n=new Hi(r,t),a=new Hi(r,t+1);let s=jn();return this.Ur.forEachInRange([n,a],i=>{s=s.add(i.key)}),s}containsKey(t){const r=new Hi(t,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&t.isEqual(n.key)}}class Hi{constructor(t,r){this.key=t,this.Yr=r}static $r(t,r){return br.comparator(t.key,r.key)||Tn(t.Yr,r.Yr)}static Kr(t,r){return Tn(t.Yr,r.Yr)||br.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vge{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Si(Hi.$r)}checkEmpty(t){return Ot.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,n,a){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new age(s,r,n,a);this.mutationQueue.push(i);for(const o of a)this.Zr=this.Zr.add(new Hi(o.key,s)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Ot.resolve(i)}lookupMutationBatch(t,r){return Ot.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(t,r){const n=r+1,a=this.ei(n),s=a<0?0:a;return Ot.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ot.resolve(this.mutationQueue.length===0?AD:this.tr-1)}getAllMutationBatches(t){return Ot.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const n=new Hi(r,0),a=new Hi(r,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,a],i=>{const o=this.Xr(i.Yr);s.push(o)}),Ot.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,r){let n=new Si(Tn);return r.forEach(a=>{const s=new Hi(a,0),i=new Hi(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,i],o=>{n=n.add(o.Yr)})}),Ot.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(t,r){const n=r.path,a=n.length+1;let s=n;br.isDocumentKey(s)||(s=s.child(""));const i=new Hi(new br(s),0);let o=new Si(Tn);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===a&&(o=o.add(c.Yr)),!0)},i),Ot.resolve(this.ti(o))}ti(t){const r=[];return t.forEach(n=>{const a=this.Xr(n);a!==null&&r.push(a)}),r}removeMutationBatch(t,r){la(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ot.forEach(r.mutations,a=>{const s=new Hi(a.key,r.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)}).next(()=>{this.Zr=n})}ir(t){}containsKey(t,r){const n=new Hi(r,0),a=this.Zr.firstAfterOrEqual(n);return Ot.resolve(r.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ot.resolve()}ni(t,r){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const r=this.ei(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zge{constructor(t){this.ri=t,this.docs=function(){return new us(br.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const n=r.key,a=this.docs.get(n),s=a?a.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const n=this.docs.get(r);return Ot.resolve(n?n.document.mutableCopy():zo.newInvalidDocument(r))}getEntries(t,r){let n=fh();return r.forEach(a=>{const s=this.docs.get(a);n=n.insert(a,s?s.document.mutableCopy():zo.newInvalidDocument(a))}),Ot.resolve(n)}getDocumentsMatchingQuery(t,r,n,a){let s=fh();const i=r.path,o=new br(i.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||xpe(vpe(d),n)<=0||(a.has(d.key)||HN(r,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ot.resolve(s)}getAllFromCollectionGroup(t,r,n,a){Vr(9500)}ii(t,r){return Ot.forEach(this.docs,n=>r(n))}newChangeBuffer(t){return new $ge(this)}getSize(t){return Ot.resolve(this.size)}}class $ge extends Rge{constructor(t){super(),this.Nr=t}applyChanges(t){const r=[];return this.changes.forEach((n,a)=>{a.isValidDocument()?r.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(n)}),Ot.waitFor(r)}getFromCache(t,r){return this.Nr.getEntry(t,r)}getAllFromCache(t,r){return this.Nr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gge{constructor(t){this.persistence=t,this.si=new pg(r=>hD(r),mD),this.lastRemoteSnapshotVersion=Wr.min(),this.highestTargetId=0,this.oi=0,this._i=new yD,this.targetCount=0,this.ai=Dx.ur()}forEachTarget(t,r){return this.si.forEach((n,a)=>r(a)),Ot.resolve()}getLastRemoteSnapshotVersion(t){return Ot.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ot.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Ot.resolve(this.highestTargetId)}setTargetsMetadata(t,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Ot.resolve()}Pr(t){this.si.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.ai=new Dx(r),this.highestTargetId=r),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,r){return this.Pr(r),this.targetCount+=1,Ot.resolve()}updateTargetData(t,r){return this.Pr(r),Ot.resolve()}removeTargetData(t,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ot.resolve()}removeTargets(t,r,n){let a=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(t,o.targetId)),a++)}),Ot.waitFor(s).next(()=>a)}getTargetCount(t){return Ot.resolve(this.targetCount)}getTargetData(t,r){const n=this.si.get(r)||null;return Ot.resolve(n)}addMatchingKeys(t,r,n){return this._i.Wr(r,n),Ot.resolve()}removeMatchingKeys(t,r,n){this._i.zr(r,n);const a=this.persistence.referenceDelegate,s=[];return a&&r.forEach(i=>{s.push(a.markPotentiallyOrphaned(t,i))}),Ot.waitFor(s)}removeMatchingKeysForTargetId(t,r){return this._i.jr(r),Ot.resolve()}getMatchingKeysForTargetId(t,r){const n=this._i.Hr(r);return Ot.resolve(n)}containsKey(t,r){return Ot.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ{constructor(t,r){this.ui={},this.overlays={},this.ci=new PN(0),this.li=!1,this.li=!0,this.hi=new Hge,this.referenceDelegate=t(this),this.Pi=new Gge(this),this.indexManager=new Tge,this.remoteDocumentCache=function(a){return new zge(a)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new kge(r),this.Ii=new Uge(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new Qge,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let n=this.ui[t.toKey()];return n||(n=new Vge(r,this.referenceDelegate),this.ui[t.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,r,n){lr("MemoryPersistence","Starting transaction:",t);const a=new Kge(this.ci.next());return this.referenceDelegate.Ei(),n(a).next(s=>this.referenceDelegate.di(a).next(()=>s)).toPromise().then(s=>(a.raiseOnCommittedEvent(),s))}Ai(t,r){return Ot.or(Object.values(this.ui).map(n=>()=>n.containsKey(t,r)))}}class Kge extends ype{constructor(t){super(),this.currentSequenceNumber=t}}class wD{constructor(t){this.persistence=t,this.Ri=new yD,this.Vi=null}static mi(t){return new wD(t)}get fi(){if(this.Vi)return this.Vi;throw Vr(60996)}addReference(t,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Ot.resolve()}removeReference(t,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Ot.resolve()}markPotentiallyOrphaned(t,r){return this.fi.add(r.toString()),Ot.resolve()}removeTarget(t,r){this.Ri.jr(r.targetId).forEach(a=>this.fi.add(a.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,r.targetId).next(a=>{a.forEach(s=>this.fi.add(s.toString()))}).next(()=>n.removeTargetData(t,r))}Ei(){this.Vi=new Set}di(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ot.forEach(this.fi,n=>{const a=br.fromPath(n);return this.gi(t,a).next(s=>{s||r.removeEntry(a,Wr.min())})}).next(()=>(this.Vi=null,r.apply(t)))}updateLimboDocument(t,r){return this.gi(t,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(t){return 0}gi(t,r){return Ot.or([()=>Ot.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Ai(t,r)])}}class TS{constructor(t,r){this.persistence=t,this.pi=new pg(n=>Cpe(n.path),(n,a)=>n.isEqual(a)),this.garbageCollector=Pge(this,r)}static mi(t,r){return new TS(t,r)}Ei(){}di(t){return Ot.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}gr(t){const r=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(n=>r.next(a=>n+a))}wr(t){let r=0;return this.pr(t,n=>{r++}).next(()=>r)}pr(t,r){return Ot.forEach(this.pi,(n,a)=>this.br(t,n,a).next(s=>s?Ot.resolve():r(a)))}removeTargets(t,r,n){return this.persistence.getTargetCache().removeTargets(t,r,n)}removeOrphanedDocuments(t,r){let n=0;const a=this.persistence.getRemoteDocumentCache(),s=a.newChangeBuffer();return a.ii(t,i=>this.br(t,i,r).next(o=>{o||(n++,s.removeEntry(i,Wr.min()))})).next(()=>s.apply(t)).next(()=>n)}markPotentiallyOrphaned(t,r){return this.pi.set(r,t.currentSequenceNumber),Ot.resolve()}removeTarget(t,r){const n=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Ot.resolve()}removeReference(t,r,n){return this.pi.set(n,t.currentSequenceNumber),Ot.resolve()}updateLimboDocument(t,r){return this.pi.set(r,t.currentSequenceNumber),Ot.resolve()}Ti(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=T_(t.data.value)),r}br(t,r,n){return Ot.or([()=>this.persistence.Ai(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const a=this.pi.get(r);return Ot.resolve(a!==void 0&&a>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(t,r,n,a){this.targetId=t,this.fromCache=r,this.Es=n,this.ds=a}static As(t,r){let n=jn(),a=jn();for(const s of r.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}return new ED(t,r.fromCache,n,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qge{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wge{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Sfe()?8:wpe(Zo())>0?6:4}()}initialize(t,r){this.ps=t,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(t,r,n,a){const s={result:null};return this.ys(t,r).next(i=>{s.result=i}).next(()=>{if(!s.result)return this.ws(t,r,a,n).next(i=>{s.result=i})}).next(()=>{if(s.result)return;const i=new qge;return this.Ss(t,r,i).next(o=>{if(s.result=o,this.Vs)return this.bs(t,r,i,o.size)})}).next(()=>s.result)}bs(t,r,n,a){return n.documentReadCount<this.fs?(Ov()<=Bn.DEBUG&&lr("QueryEngine","SDK will not create cache indexes for query:",Dv(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ot.resolve()):(Ov()<=Bn.DEBUG&&lr("QueryEngine","Query:",Dv(r),"scans",n.documentReadCount,"local documents and returns",a,"documents as results."),n.documentReadCount>this.gs*a?(Ov()<=Bn.DEBUG&&lr("QueryEngine","The SDK decides to create cache indexes for query:",Dv(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,VA(r))):Ot.resolve())}ys(t,r){if(d9(r))return Ot.resolve(null);let n=VA(r);return this.indexManager.getIndexType(t,n).next(a=>a===0?null:(r.limit!==null&&a===1&&(r=NS(r,null,"F"),n=VA(r)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const i=jn(...s);return this.ps.getDocuments(t,i).next(o=>this.indexManager.getMinOffset(t,n).next(c=>{const u=this.Ds(r,o);return this.Cs(r,u,i,c.readTime)?this.ys(t,NS(r,null,"F")):this.vs(t,u,r,c)}))})))}ws(t,r,n,a){return d9(r)||a.isEqual(Wr.min())?Ot.resolve(null):this.ps.getDocuments(t,n).next(s=>{const i=this.Ds(r,s);return this.Cs(r,i,n,a)?Ot.resolve(null):(Ov()<=Bn.DEBUG&&lr("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Dv(r)),this.vs(t,i,r,gpe(a,lw)).next(o=>o))})}Ds(t,r){let n=new Si(fJ(t));return r.forEach((a,s)=>{HN(t,s)&&(n=n.add(s))}),n}Cs(t,r,n,a){if(t.limit===null)return!1;if(n.size!==r.size)return!0;const s=t.limitType==="F"?r.last():r.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(a)>0)}Ss(t,r,n){return Ov()<=Bn.DEBUG&&lr("QueryEngine","Using full collection scan to execute query:",Dv(r)),this.ps.getDocumentsMatchingQuery(t,r,cm.min(),n)}vs(t,r,n,a){return this.ps.getDocumentsMatchingQuery(t,n,a).next(s=>(r.forEach(i=>{s=s.insert(i.key,i)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD="LocalStore",Xge=3e8;class Yge{constructor(t,r,n,a){this.persistence=t,this.Fs=r,this.serializer=a,this.Ms=new us(Tn),this.xs=new pg(s=>hD(s),mD),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(n)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Mge(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.Ms))}}function Jge(e,t,r,n){return new Yge(e,t,r,n)}async function RJ(e,t){const r=Zr(e);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let a;return r.mutationQueue.getAllMutationBatches(n).next(s=>(a=s,r.Bs(t),r.mutationQueue.getAllMutationBatches(n))).next(s=>{const i=[],o=[];let c=jn();for(const u of a){i.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return r.localDocuments.getDocuments(n,c).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function Zge(e,t){const r=Zr(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const a=t.batch.keys(),s=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,c,u,d){const f=u.batch,h=f.keys();let p=Ot.resolve();return h.forEach(g=>{p=p.next(()=>d.getEntry(c,g)).next(v=>{const b=u.docVersions.get(g);la(b!==null,48541),v.version.compareTo(b)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,f))}(r,n,t,s).next(()=>s.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,a,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let c=jn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(t))).next(()=>r.localDocuments.getDocuments(n,a))})}function LJ(e){const t=Zr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Pi.getLastRemoteSnapshotVersion(r))}function eve(e,t){const r=Zr(e),n=t.snapshotVersion;let a=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});a=r.Ms;const o=[];t.targetChanges.forEach((d,f)=>{const h=a.get(f);if(!h)return;o.push(r.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>r.Pi.addMatchingKeys(s,d.addedDocuments,f)));let p=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?p=p.withResumeToken(Yi.EMPTY_BYTE_STRING,Wr.min()).withLastLimboFreeSnapshotVersion(Wr.min()):d.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(d.resumeToken,n)),a=a.insert(f,p),function(v,b,y){return v.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=Xge?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(h,p,d)&&o.push(r.Pi.updateTargetData(s,p))});let c=fh(),u=jn();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(s,d))}),o.push(tve(s,i,t.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!n.isEqual(Wr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(s).next(f=>r.Pi.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(d)}return Ot.waitFor(o).next(()=>i.apply(s)).next(()=>r.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(r.Ms=a,s))}function tve(e,t,r){let n=jn(),a=jn();return r.forEach(s=>n=n.add(s)),t.getEntries(e,n).next(s=>{let i=fh();return r.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(a=a.add(o)),c.isNoDocument()&&c.version.isEqual(Wr.min())?(t.removeEntry(o,c.readTime),i=i.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(c),i=i.insert(o,c)):lr(CD,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{ks:i,qs:a}})}function rve(e,t){const r=Zr(e);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=AD),r.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function nve(e,t){const r=Zr(e);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let a;return r.Pi.getTargetData(n,t).next(s=>s?(a=s,Ot.resolve(a)):r.Pi.allocateTargetId(n).next(i=>(a=new M0(t,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,a).next(()=>a))))}).then(n=>{const a=r.Ms.get(n.targetId);return(a===null||n.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(t,n.targetId)),n})}async function fF(e,t,r){const n=Zr(e),a=n.Ms.get(t),s=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",s,i=>n.persistence.referenceDelegate.removeTarget(i,a))}catch(i){if(!m1(i))throw i;lr(CD,`Failed to update sequence numbers for target ${t}: ${i}`)}n.Ms=n.Ms.remove(t),n.xs.delete(a.target)}function C9(e,t,r){const n=Zr(e);let a=Wr.min(),s=jn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(c,u,d){const f=Zr(c),h=f.xs.get(d);return h!==void 0?Ot.resolve(f.Ms.get(h)):f.Pi.getTargetData(u,d)}(n,i,VA(t)).next(o=>{if(o)return a=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(c=>{s=c})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,t,r?a:Wr.min(),r?s:jn())).next(o=>(ave(n,Vpe(t),o),{documents:o,Qs:s})))}function ave(e,t,r){let n=e.Os.get(t)||Wr.min();r.forEach((a,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),e.Os.set(t,n)}class _9{constructor(){this.activeTargetIds=Wpe()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class sve{constructor(){this.Mo=new _9,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,n){}addLocalQueryTarget(t,r=!0){return r&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,r,n){this.xo[t]=r}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new _9,Promise.resolve()}handleUserChange(t,r,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ive{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9="ConnectivityMonitor";class N9{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){lr(S9,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){lr(S9,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rC=null;function hF(){return rC===null?rC=function(){return 268435456+Math.round(2147483648*Math.random())}():rC++,"0x"+rC.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="RestConnection",ove={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lve{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+t.host,this.Ko=`projects/${n}/databases/${a}`,this.Wo=this.databaseId.database===CS?`project_id=${n}`:`project_id=${n}&database_id=${a}`}Go(t,r,n,a,s){const i=hF(),o=this.zo(t,r.toUriEncodedString());lr(AT,`Sending RPC '${t}' ${i}:`,o,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,a,s);const{host:u}=new URL(o),d=Nh(u);return this.Jo(t,o,c,n,d).then(f=>(lr(AT,`Received RPC '${t}' ${i}: `,f),f),f=>{throw Yp(AT,`RPC '${t}' ${i} failed with error: `,f,"url: ",o,"request:",n),f})}Ho(t,r,n,a,s,i){return this.Go(t,r,n,a,s)}jo(t,r,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+f1}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,s)=>t[s]=a),n&&n.headers.forEach((a,s)=>t[s]=a)}zo(t,r){const n=ove[t];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cve{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io="WebChannelConnection";class uve extends lve{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,r,n,a,s){const i=hF();return new Promise((o,c)=>{const u=new MY;u.setWithCredentials(!0),u.listenOnce(UY.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case B_.NO_ERROR:const f=u.getResponseJson();lr(Io,`XHR for RPC '${t}' ${i} received:`,JSON.stringify(f)),o(f);break;case B_.TIMEOUT:lr(Io,`RPC '${t}' ${i} timed out`),c(new Wt(Et.DEADLINE_EXCEEDED,"Request time out"));break;case B_.HTTP_ERROR:const h=u.getStatus();if(lr(Io,`RPC '${t}' ${i} failed with status:`,h,"response text:",u.getResponseText()),h>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const v=function(y){const C=y.toLowerCase().replace(/_/g,"-");return Object.values(Et).indexOf(C)>=0?C:Et.UNKNOWN}(g.status);c(new Wt(v,g.message))}else c(new Wt(Et.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Wt(Et.UNAVAILABLE,"Connection failed."));break;default:Vr(9055,{l_:t,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{lr(Io,`RPC '${t}' ${i} completed.`)}});const d=JSON.stringify(a);lr(Io,`RPC '${t}' ${i} sending request:`,a),u.send(r,"POST",d,n,15)})}T_(t,r,n){const a=hF(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=VY(),o=HY(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,r,n),c.encodeInitMessageHeaders=!0;const d=s.join("");lr(Io,`Creating RPC '${t}' stream ${a}: ${d}`,c);const f=i.createWebChannel(d,c);this.I_(f);let h=!1,p=!1;const g=new cve({Yo:b=>{p?lr(Io,`Not sending because RPC '${t}' stream ${a} is closed:`,b):(h||(lr(Io,`Opening RPC '${t}' stream ${a} transport.`),f.open(),h=!0),lr(Io,`RPC '${t}' stream ${a} sending:`,b),f.send(b))},Zo:()=>f.close()}),v=(b,y,C)=>{b.listen(y,N=>{try{C(N)}catch(T){setTimeout(()=>{throw T},0)}})};return v(f,oy.EventType.OPEN,()=>{p||(lr(Io,`RPC '${t}' stream ${a} transport opened.`),g.o_())}),v(f,oy.EventType.CLOSE,()=>{p||(p=!0,lr(Io,`RPC '${t}' stream ${a} transport closed`),g.a_(),this.E_(f))}),v(f,oy.EventType.ERROR,b=>{p||(p=!0,Yp(Io,`RPC '${t}' stream ${a} transport errored. Name:`,b.name,"Message:",b.message),g.a_(new Wt(Et.UNAVAILABLE,"The operation could not be completed")))}),v(f,oy.EventType.MESSAGE,b=>{var y;if(!p){const C=b.data[0];la(!!C,16349);const N=C,T=(N==null?void 0:N.error)||((y=N[0])==null?void 0:y.error);if(T){lr(Io,`RPC '${t}' stream ${a} received error:`,T);const S=T.status;let B=function(F){const M=ii[F];if(M!==void 0)return _J(M)}(S),w=T.message;B===void 0&&(B=Et.INTERNAL,w="Unknown error status: "+S+" with message "+T.message),p=!0,g.a_(new Wt(B,w)),f.close()}else lr(Io,`RPC '${t}' stream ${a} received:`,C),g.u_(C)}}),v(o,QY.STAT_EVENT,b=>{b.stat===rF.PROXY?lr(Io,`RPC '${t}' stream ${a} detected buffering proxy`):b.stat===rF.NOPROXY&&lr(Io,`RPC '${t}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{g.__()},0),g}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(r=>r===t)}}function fT(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(e){return new hge(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MJ{constructor(t,r,n=1e3,a=1.5,s=6e4){this.Mi=t,this.timerId=r,this.d_=n,this.A_=a,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),a=Math.max(0,r-n);a>0&&lr("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k9="PersistentStream";class UJ{constructor(t,r,n,a,s,i,o,c){this.Mi=t,this.S_=n,this.b_=a,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new MJ(t,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():r&&r.code===Et.RESOURCE_EXHAUSTED?(Ah(r.toString()),Ah("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===Et.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(r)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,a])=>{this.D_===r&&this.G_(n,a)},n=>{t(()=>{const a=new Wt(Et.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(a)})})}G_(t,r){const n=this.W_(this.D_);this.stream=this.j_(t,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(a=>{n(()=>this.z_(a))}),this.stream.onMessage(a=>{n(()=>++this.F_==1?this.J_(a):this.onNext(a))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return lr(k9,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return r=>{this.Mi.enqueueAndForget(()=>this.D_===t?r():(lr(k9,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dve extends UJ{constructor(t,r,n,a,s,i){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}j_(t,r){return this.connection.T_("Listen",t,r)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const r=gge(this.serializer,t),n=function(s){if(!("targetChange"in s))return Wr.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?Wr.min():i.readTime?zA(i.readTime):Wr.min()}(t);return this.listener.H_(r,n)}Y_(t){const r={};r.database=AF(this.serializer),r.addTarget=function(s,i){let o;const c=i.target;if(o=oF(c)?{documents:bge(s,c)}:{query:yge(s,c).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=kJ(s,i.resumeToken);const u=cF(s,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Wr.min())>0){o.readTime=BS(s,i.snapshotVersion.toTimestamp());const u=cF(s,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,t);const n=Ege(this.serializer,t);n&&(r.labels=n),this.q_(r)}Z_(t){const r={};r.database=AF(this.serializer),r.removeTarget=t,this.q_(r)}}class Ave extends UJ{constructor(t,r,n,a,s,i){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,a,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,r){return this.connection.T_("Write",t,r)}J_(t){return la(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,la(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){la(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const r=xge(t.writeResults,t.commitTime),n=zA(t.commitTime);return this.listener.na(n,r)}ra(){const t={};t.database=AF(this.serializer),this.q_(t)}ea(t){const r={streamToken:this.lastStreamToken,writes:t.map(n=>vge(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fve{}class hve extends fve{constructor(t,r,n,a){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=n,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new Wt(Et.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,r,n,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.Go(t,uF(r,n),a,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Wt(Et.UNKNOWN,s.toString())})}Ho(t,r,n,a,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(t,uF(r,n),a,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Wt(Et.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mve{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ah(r),this.aa=!1):lr("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="RemoteStore";class pve{constructor(t,r,n,a,s){this.localStore=t,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{gg(this)&&(lr(Jp,"Restarting streams for network reachability change."),await async function(c){const u=Zr(c);u.Ea.add(4),await f2(u),u.Ra.set("Unknown"),u.Ea.delete(4),await qN(u)}(this))})}),this.Ra=new mve(n,a)}}async function qN(e){if(gg(e))for(const t of e.da)await t(!0)}async function f2(e){for(const t of e.da)await t(!1)}function QJ(e,t){const r=Zr(e);r.Ia.has(t.targetId)||(r.Ia.set(t.targetId,t),kD(r)?ND(r):p1(r).O_()&&SD(r,t))}function _D(e,t){const r=Zr(e),n=p1(r);r.Ia.delete(t),n.O_()&&HJ(r,t),r.Ia.size===0&&(n.O_()?n.L_():gg(r)&&r.Ra.set("Unknown"))}function SD(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Wr.min())>0){const r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}p1(e).Y_(t)}function HJ(e,t){e.Va.Ue(t),p1(e).Z_(t)}function ND(e){e.Va=new uge({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),p1(e).start(),e.Ra.ua()}function kD(e){return gg(e)&&!p1(e).x_()&&e.Ia.size>0}function gg(e){return Zr(e).Ea.size===0}function VJ(e){e.Va=void 0}async function gve(e){e.Ra.set("Online")}async function vve(e){e.Ia.forEach((t,r)=>{SD(e,t)})}async function xve(e,t){VJ(e),kD(e)?(e.Ra.ha(t),ND(e)):e.Ra.set("Unknown")}async function bve(e,t,r){if(e.Ra.set("Online"),t instanceof NJ&&t.state===2&&t.cause)try{await async function(a,s){const i=s.cause;for(const o of s.targetIds)a.Ia.has(o)&&(await a.remoteSyncer.rejectListen(o,i),a.Ia.delete(o),a.Va.removeTarget(o))}(e,t)}catch(n){lr(Jp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await jS(e,n)}else if(t instanceof F_?e.Va.Ze(t):t instanceof SJ?e.Va.st(t):e.Va.tt(t),!r.isEqual(Wr.min()))try{const n=await LJ(e.localStore);r.compareTo(n)>=0&&await function(s,i){const o=s.Va.Tt(i);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,i))}}),o.targetMismatches.forEach((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(Yi.EMPTY_BYTE_STRING,d.snapshotVersion)),HJ(s,c);const f=new M0(d.target,c,u,d.sequenceNumber);SD(s,f)}),s.remoteSyncer.applyRemoteEvent(o)}(e,r)}catch(n){lr(Jp,"Failed to raise snapshot:",n),await jS(e,n)}}async function jS(e,t,r){if(!m1(t))throw t;e.Ea.add(1),await f2(e),e.Ra.set("Offline"),r||(r=()=>LJ(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{lr(Jp,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await qN(e)})}function zJ(e,t){return t().catch(r=>jS(e,r,t))}async function WN(e){const t=Zr(e),r=fm(t);let n=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:AD;for(;yve(t);)try{const a=await rve(t.localStore,n);if(a===null){t.Ta.length===0&&r.L_();break}n=a.batchId,wve(t,a)}catch(a){await jS(t,a)}$J(t)&&GJ(t)}function yve(e){return gg(e)&&e.Ta.length<10}function wve(e,t){e.Ta.push(t);const r=fm(e);r.O_()&&r.X_&&r.ea(t.mutations)}function $J(e){return gg(e)&&!fm(e).x_()&&e.Ta.length>0}function GJ(e){fm(e).start()}async function Eve(e){fm(e).ra()}async function Cve(e){const t=fm(e);for(const r of e.Ta)t.ea(r.mutations)}async function _ve(e,t,r){const n=e.Ta.shift(),a=vD.from(n,t,r);await zJ(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await WN(e)}async function Sve(e,t){t&&fm(e).X_&&await async function(n,a){if(function(i){return oge(i)&&i!==Et.ABORTED}(a.code)){const s=n.Ta.shift();fm(n).B_(),await zJ(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,a)),await WN(n)}}(e,t),$J(e)&&GJ(e)}async function B9(e,t){const r=Zr(e);r.asyncQueue.verifyOperationInProgress(),lr(Jp,"RemoteStore received new credentials");const n=gg(r);r.Ea.add(3),await f2(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.Ea.delete(3),await qN(r)}async function Nve(e,t){const r=Zr(e);t?(r.Ea.delete(2),await qN(r)):t||(r.Ea.add(2),await f2(r),r.Ra.set("Unknown"))}function p1(e){return e.ma||(e.ma=function(r,n,a){const s=Zr(r);return s.sa(),new dve(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:gve.bind(null,e),t_:vve.bind(null,e),r_:xve.bind(null,e),H_:bve.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),kD(e)?ND(e):e.Ra.set("Unknown")):(await e.ma.stop(),VJ(e))})),e.ma}function fm(e){return e.fa||(e.fa=function(r,n,a){const s=Zr(r);return s.sa(),new Ave(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,a)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Eve.bind(null,e),r_:Sve.bind(null,e),ta:Cve.bind(null,e),na:_ve.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await WN(e)):(await e.fa.stop(),e.Ta.length>0&&(lr(Jp,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(t,r,n,a,s){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=n,this.op=a,this.removalCallback=s,this.deferred=new Jf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,n,a,s){const i=Date.now()+n,o=new BD(t,r,i,a,s);return o.start(n),o}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Wt(Et.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function TD(e,t){if(Ah("AsyncQueue",`${t}: ${e}`),m1(e))return new Wt(Et.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{static emptySet(t){return new cx(t.comparator)}constructor(t){this.comparator=t?(r,n)=>t(r,n)||br.comparator(r.key,n.key):(r,n)=>br.comparator(r.key,n.key),this.keyedMap=ly(),this.sortedSet=new us(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const r=this.keyedMap.get(t);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((r,n)=>(t(r),!1))}add(t){const r=this.delete(t.key);return r.copy(r.keyedMap.insert(t.key,t),r.sortedSet.insert(t,null))}delete(t){const r=this.get(t);return r?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(r)):this}isEqual(t){if(!(t instanceof cx)||this.size!==t.size)return!1;const r=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;r.hasNext();){const a=r.getNext().key,s=n.getNext().key;if(!a.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(r=>{t.push(r.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,r){const n=new cx;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T9{constructor(){this.ga=new us(br.comparator)}track(t){const r=t.doc.key,n=this.ga.get(r);n?t.type!==0&&n.type===3?this.ga=this.ga.insert(r,t):t.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.ga=this.ga.remove(r):t.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:t.doc}):Vr(63341,{Rt:t,pa:n}):this.ga=this.ga.insert(r,t)}ya(){const t=[];return this.ga.inorderTraversal((r,n)=>{t.push(n)}),t}}class Px{constructor(t,r,n,a,s,i,o,c,u){this.query=t,this.docs=r,this.oldDocs=n,this.docChanges=a,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(t,r,n,a,s){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Px(t,r,cx.emptySet(r),i,n,a,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&QN(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const r=this.docChanges,n=t.docChanges;if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(r[a].type!==n[a].type||!r[a].doc.isEqual(n[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kve{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class Bve{constructor(){this.queries=j9(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const a=Zr(r),s=a.queries;a.queries=j9(),s.forEach((i,o)=>{for(const c of o.Sa)c.onError(n)})})(this,new Wt(Et.ABORTED,"Firestore shutting down"))}}function j9(){return new pg(e=>AJ(e),QN)}async function jD(e,t){const r=Zr(e);let n=3;const a=t.query;let s=r.queries.get(a);s?!s.ba()&&t.Da()&&(n=2):(s=new kve,n=t.Da()?0:1);try{switch(n){case 0:s.wa=await r.onListen(a,!0);break;case 1:s.wa=await r.onListen(a,!1);break;case 2:await r.onFirstRemoteStoreListen(a)}}catch(i){const o=TD(i,`Initialization of query '${Dv(t.query)}' failed`);return void t.onError(o)}r.queries.set(a,s),s.Sa.push(t),t.va(r.onlineState),s.wa&&t.Fa(s.wa)&&FD(r)}async function ID(e,t){const r=Zr(e),n=t.query;let a=3;const s=r.queries.get(n);if(s){const i=s.Sa.indexOf(t);i>=0&&(s.Sa.splice(i,1),s.Sa.length===0?a=t.Da()?0:1:!s.ba()&&t.Da()&&(a=2))}switch(a){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function Tve(e,t){const r=Zr(e);let n=!1;for(const a of t){const s=a.query,i=r.queries.get(s);if(i){for(const o of i.Sa)o.Fa(a)&&(n=!0);i.wa=a}}n&&FD(r)}function jve(e,t,r){const n=Zr(e),a=n.queries.get(t);if(a)for(const s of a.Sa)s.onError(r);n.queries.delete(t)}function FD(e){e.Ca.forEach(t=>{t.next()})}var mF,I9;(I9=mF||(mF={})).Ma="default",I9.Cache="cache";class OD{constructor(t,r,n){this.query=t,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(t){if(!this.options.includeMetadataChanges){const n=[];for(const a of t.docChanges)a.type!==3&&n.push(a);t=new Px(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let r=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),r=!0):this.La(t,this.onlineState)&&(this.ka(t),r=!0),this.Na=t,r}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),r=!0),r}La(t,r){if(!t.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||r==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(t){t=Px.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==mF.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KJ{constructor(t){this.key=t}}class qJ{constructor(t){this.key=t}}class Ive{constructor(t,r){this.query=t,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=jn(),this.mutatedKeys=jn(),this.eu=fJ(t),this.tu=new cx(this.eu)}get nu(){return this.Ya}ru(t,r){const n=r?r.iu:new T9,a=r?r.tu:this.tu;let s=r?r.mutatedKeys:this.mutatedKeys,i=a,o=!1;const c=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,u=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal((d,f)=>{const h=a.get(d),p=HN(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let b=!1;h&&p?h.data.isEqual(p.data)?g!==v&&(n.track({type:3,doc:p}),b=!0):this.su(h,p)||(n.track({type:2,doc:p}),b=!0,(c&&this.eu(p,c)>0||u&&this.eu(p,u)<0)&&(o=!0)):!h&&p?(n.track({type:0,doc:p}),b=!0):h&&!p&&(n.track({type:1,doc:h}),b=!0,(c||u)&&(o=!0)),b&&(p?(i=i.add(p),s=v?s.add(d):s.delete(d)):(i=i.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(t,r){return t.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(t,r,n,a){const s=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const i=t.iu.ya();i.sort((d,f)=>function(p,g){const v=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vr(20277,{Rt:b})}};return v(p)-v(g)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(n),a=a??!1;const o=r&&!a?this._u():[],c=this.Xa.size===0&&this.current&&!a?1:0,u=c!==this.Za;return this.Za=c,i.length!==0||u?{snapshot:new Px(this.query,t.tu,s,i,t.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new T9,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),t.modifiedDocuments.forEach(r=>{}),t.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=jn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return t.forEach(n=>{this.Xa.has(n)||r.push(new qJ(n))}),this.Xa.forEach(n=>{t.has(n)||r.push(new KJ(n))}),r}cu(t){this.Ya=t.Qs,this.Xa=jn();const r=this.ru(t.documents);return this.applyChanges(r,!0)}lu(){return Px.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const DD="SyncEngine";class Fve{constructor(t,r,n){this.query=t,this.targetId=r,this.view=n}}class Ove{constructor(t){this.key=t,this.hu=!1}}class Dve{constructor(t,r,n,a,s,i){this.localStore=t,this.remoteStore=r,this.eventManager=n,this.sharedClientState=a,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new pg(o=>AJ(o),QN),this.Iu=new Map,this.Eu=new Set,this.du=new us(br.comparator),this.Au=new Map,this.Ru=new yD,this.Vu={},this.mu=new Map,this.fu=Dx.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Pve(e,t,r=!0){const n=eZ(e);let a;const s=n.Tu.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),a=s.view.lu()):a=await WJ(n,t,r,!0),a}async function Rve(e,t){const r=eZ(e);await WJ(r,t,!0,!1)}async function WJ(e,t,r,n){const a=await nve(e.localStore,VA(t)),s=a.targetId,i=e.sharedClientState.addLocalQueryTarget(s,r);let o;return n&&(o=await Lve(e,t,s,i==="current",a.resumeToken)),e.isPrimaryClient&&r&&QJ(e.remoteStore,a),o}async function Lve(e,t,r,n,a){e.pu=(f,h,p)=>async function(v,b,y,C){let N=b.view.ru(y);N.Cs&&(N=await C9(v.localStore,b.query,!1).then(({documents:w})=>b.view.ru(w,N)));const T=C&&C.targetChanges.get(b.targetId),S=C&&C.targetMismatches.get(b.targetId)!=null,B=b.view.applyChanges(N,v.isPrimaryClient,T,S);return O9(v,b.targetId,B.au),B.snapshot}(e,f,h,p);const s=await C9(e.localStore,t,!0),i=new Ive(t,s.Qs),o=i.ru(s.documents),c=A2.createSynthesizedTargetChangeForCurrentChange(r,n&&e.onlineState!=="Offline",a),u=i.applyChanges(o,e.isPrimaryClient,c);O9(e,r,u.au);const d=new Fve(t,r,i);return e.Tu.set(t,d),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function Mve(e,t,r){const n=Zr(e),a=n.Tu.get(t),s=n.Iu.get(a.targetId);if(s.length>1)return n.Iu.set(a.targetId,s.filter(i=>!QN(i,t))),void n.Tu.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||await fF(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),r&&_D(n.remoteStore,a.targetId),pF(n,a.targetId)}).catch(h1)):(pF(n,a.targetId),await fF(n.localStore,a.targetId,!0))}async function Uve(e,t){const r=Zr(e),n=r.Tu.get(t),a=r.Iu.get(n.targetId);r.isPrimaryClient&&a.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),_D(r.remoteStore,n.targetId))}async function Qve(e,t,r){const n=qve(e);try{const a=await function(i,o){const c=Zr(i),u=mr.now(),d=o.reduce((p,g)=>p.add(g.key),jn());let f,h;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=fh(),v=jn();return c.Ns.getEntries(p,d).next(b=>{g=b,g.forEach((y,C)=>{C.isValidDocument()||(v=v.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,g)).next(b=>{f=b;const y=[];for(const C of o){const N=rge(C,f.get(C.key).overlayedDocument);N!=null&&y.push(new Nm(C.key,N,sJ(N.value.mapValue),vl.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,y,o)}).next(b=>{h=b;const y=b.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(p,b.batchId,y)})}).then(()=>({batchId:h.batchId,changes:mJ(f)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(a.batchId),function(i,o,c){let u=i.Vu[i.currentUser.toKey()];u||(u=new us(Tn)),u=u.insert(o,c),i.Vu[i.currentUser.toKey()]=u}(n,a.batchId,r),await h2(n,a.changes),await WN(n.remoteStore)}catch(a){const s=TD(a,"Failed to persist write");r.reject(s)}}async function XJ(e,t){const r=Zr(e);try{const n=await eve(r.localStore,t);t.targetChanges.forEach((a,s)=>{const i=r.Au.get(s);i&&(la(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?i.hu=!0:a.modifiedDocuments.size>0?la(i.hu,14607):a.removedDocuments.size>0&&(la(i.hu,42227),i.hu=!1))}),await h2(r,n,t)}catch(n){await h1(n)}}function F9(e,t,r){const n=Zr(e);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const a=[];n.Tu.forEach((s,i)=>{const o=i.view.va(t);o.snapshot&&a.push(o.snapshot)}),function(i,o){const c=Zr(i);c.onlineState=o;let u=!1;c.queries.forEach((d,f)=>{for(const h of f.Sa)h.va(o)&&(u=!0)}),u&&FD(c)}(n.eventManager,t),a.length&&n.Pu.H_(a),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Hve(e,t,r){const n=Zr(e);n.sharedClientState.updateQueryState(t,"rejected",r);const a=n.Au.get(t),s=a&&a.key;if(s){let i=new us(br.comparator);i=i.insert(s,zo.newNoDocument(s,Wr.min()));const o=jn().add(s),c=new GN(Wr.min(),new Map,new us(Tn),i,o);await XJ(n,c),n.du=n.du.remove(s),n.Au.delete(t),PD(n)}else await fF(n.localStore,t,!1).then(()=>pF(n,t,r)).catch(h1)}async function Vve(e,t){const r=Zr(e),n=t.batch.batchId;try{const a=await Zge(r.localStore,t);JJ(r,n,null),YJ(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await h2(r,a)}catch(a){await h1(a)}}async function zve(e,t,r){const n=Zr(e);try{const a=await function(i,o){const c=Zr(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next(f=>(la(f!==null,37113),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(n.localStore,t);JJ(n,t,r),YJ(n,t),n.sharedClientState.updateMutationState(t,"rejected",r),await h2(n,a)}catch(a){await h1(a)}}function YJ(e,t){(e.mu.get(t)||[]).forEach(r=>{r.resolve()}),e.mu.delete(t)}function JJ(e,t,r){const n=Zr(e);let a=n.Vu[n.currentUser.toKey()];if(a){const s=a.get(t);s&&(r?s.reject(r):s.resolve(),a=a.remove(t)),n.Vu[n.currentUser.toKey()]=a}}function pF(e,t,r=null){e.sharedClientState.removeLocalQueryTarget(t);for(const n of e.Iu.get(t))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(n=>{e.Ru.containsKey(n)||ZJ(e,n)})}function ZJ(e,t){e.Eu.delete(t.path.canonicalString());const r=e.du.get(t);r!==null&&(_D(e.remoteStore,r),e.du=e.du.remove(t),e.Au.delete(r),PD(e))}function O9(e,t,r){for(const n of r)n instanceof KJ?(e.Ru.addReference(n.key,t),$ve(e,n)):n instanceof qJ?(lr(DD,"Document no longer in limbo: "+n.key),e.Ru.removeReference(n.key,t),e.Ru.containsKey(n.key)||ZJ(e,n.key)):Vr(19791,{wu:n})}function $ve(e,t){const r=t.key,n=r.path.canonicalString();e.du.get(r)||e.Eu.has(n)||(lr(DD,"New document in limbo: "+r),e.Eu.add(n),PD(e))}function PD(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const r=new br(Na.fromString(t)),n=e.fu.next();e.Au.set(n,new Ove(r)),e.du=e.du.insert(r,n),QJ(e.remoteStore,new M0(VA(UN(r.path)),n,"TargetPurposeLimboResolution",PN.ce))}}async function h2(e,t,r){const n=Zr(e),a=[],s=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,c)=>{i.push(n.pu(c,t,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const f=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(c.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){a.push(u);const f=ED.As(c.targetId,u);s.push(f)}}))}),await Promise.all(i),n.Pu.H_(a),await async function(c,u){const d=Zr(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ot.forEach(u,h=>Ot.forEach(h.Es,p=>d.persistence.referenceDelegate.addReference(f,h.targetId,p)).next(()=>Ot.forEach(h.ds,p=>d.persistence.referenceDelegate.removeReference(f,h.targetId,p)))))}catch(f){if(!m1(f))throw f;lr(CD,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const p=d.Ms.get(h),g=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(g);d.Ms=d.Ms.insert(h,v)}}}(n.localStore,s))}async function Gve(e,t){const r=Zr(e);if(!r.currentUser.isEqual(t)){lr(DD,"User change. New user:",t.toKey());const n=await RJ(r.localStore,t);r.currentUser=t,function(s,i){s.mu.forEach(o=>{o.forEach(c=>{c.reject(new Wt(Et.CANCELLED,i))})}),s.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await h2(r,n.Ls)}}function Kve(e,t){const r=Zr(e),n=r.Au.get(t);if(n&&n.hu)return jn().add(n.key);{let a=jn();const s=r.Iu.get(t);if(!s)return a;for(const i of s){const o=r.Tu.get(i);a=a.unionWith(o.view.nu)}return a}}function eZ(e){const t=Zr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=XJ.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kve.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Hve.bind(null,t),t.Pu.H_=Tve.bind(null,t.eventManager),t.Pu.yu=jve.bind(null,t.eventManager),t}function qve(e){const t=Zr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Vve.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zve.bind(null,t),t}class IS{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=KN(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,r){return null}Mu(t,r){return null}vu(t){return Jge(this.persistence,new Wge,t.initialUser,this.serializer)}Cu(t){return new PJ(wD.mi,this.serializer)}Du(t){return new sve}async terminate(){var t,r;(t=this.gcScheduler)==null||t.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}IS.provider={build:()=>new IS};class Wve extends IS{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,r){la(this.persistence.referenceDelegate instanceof TS,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Oge(n,t.asyncQueue,r)}Cu(t){const r=this.cacheSizeBytes!==void 0?Hl.withCacheSize(this.cacheSizeBytes):Hl.DEFAULT;return new PJ(n=>TS.mi(n,r),this.serializer)}}class gF{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>F9(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gve.bind(null,this.syncEngine),await Nve(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Bve}()}createDatastore(t){const r=KN(t.databaseInfo.databaseId),n=function(s){return new uve(s)}(t.databaseInfo);return function(s,i,o,c){return new hve(s,i,o,c)}(t.authCredentials,t.appCheckCredentials,n,r)}createRemoteStore(t){return function(n,a,s,i,o){return new pve(n,a,s,i,o)}(this.localStore,this.datastore,t.asyncQueue,r=>F9(this.syncEngine,r,0),function(){return N9.v()?new N9:new ive}())}createSyncEngine(t,r){return function(a,s,i,o,c,u,d){const f=new Dve(a,s,i,o,c,u);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(a){const s=Zr(a);lr(Jp,"RemoteStore shutting down."),s.Ea.add(5),await f2(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(t=this.datastore)==null||t.terminate(),(r=this.eventManager)==null||r.terminate()}}gF.provider={build:()=>new gF};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Ah("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,r){setTimeout(()=>{this.muted||t(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm="FirestoreClient";class Xve{constructor(t,r,n,a,s){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=a,this.user=Uo.UNAUTHENTICATED,this.clientId=ON.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async i=>{lr(hm,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(lr(hm,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Jf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const n=TD(r,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function hT(e,t){e.asyncQueue.verifyOperationInProgress(),lr(hm,"Initializing OfflineComponentProvider");const r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async a=>{n.isEqual(a)||(await RJ(t.localStore,a),n=a)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function D9(e,t){e.asyncQueue.verifyOperationInProgress();const r=await Yve(e);lr(hm,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(n=>B9(t.remoteStore,n)),e.setAppCheckTokenChangeListener((n,a)=>B9(t.remoteStore,a)),e._onlineComponents=t}async function Yve(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){lr(hm,"Using user provided OfflineComponentProvider");try{await hT(e,e._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(a){return a.name==="FirebaseError"?a.code===Et.FAILED_PRECONDITION||a.code===Et.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(r))throw r;Yp("Error using user provided cache. Falling back to memory cache: "+r),await hT(e,new IS)}}else lr(hm,"Using default OfflineComponentProvider"),await hT(e,new Wve(void 0));return e._offlineComponents}async function tZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(lr(hm,"Using user provided OnlineComponentProvider"),await D9(e,e._uninitializedComponentsProvider._online)):(lr(hm,"Using default OnlineComponentProvider"),await D9(e,new gF))),e._onlineComponents}function Jve(e){return tZ(e).then(t=>t.syncEngine)}async function FS(e){const t=await tZ(e),r=t.eventManager;return r.onListen=Pve.bind(null,t.syncEngine),r.onUnlisten=Mve.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=Rve.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=Uve.bind(null,t.syncEngine),r}function Zve(e,t,r={}){const n=new Jf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new RD({next:h=>{d.Nu(),i.enqueueAndForget(()=>ID(s,f));const p=h.docs.has(o);!p&&h.fromCache?u.reject(new Wt(Et.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&c&&c.source==="server"?u.reject(new Wt(Et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new OD(UN(o.path),d,{includeMetadataChanges:!0,qa:!0});return jD(s,f)}(await FS(e),e.asyncQueue,t,r,n)),n.promise}function exe(e,t,r={}){const n=new Jf;return e.asyncQueue.enqueueAndForget(async()=>function(s,i,o,c,u){const d=new RD({next:h=>{d.Nu(),i.enqueueAndForget(()=>ID(s,f)),h.fromCache&&c.source==="server"?u.reject(new Wt(Et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new OD(o,d,{includeMetadataChanges:!0,qa:!0});return jD(s,f)}(await FS(e),e.asyncQueue,t,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rZ(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P9=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nZ="firestore.googleapis.com",R9=!0;class L9{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Wt(Et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nZ,this.ssl=R9}else this.host=t.host,this.ssl=t.ssl??R9;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=DJ;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Ige)throw new Wt(Et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qY("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rZ(t.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Wt(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Wt(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Wt(Et.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,a){return n.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class XN{constructor(t,r,n,a){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=n,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L9({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wt(Et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Wt(Et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L9(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new GY;switch(n.type){case"firstParty":return new upe(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Wt(Et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=P9.get(r);n&&(lr("ComponentProvider","Removing Datastore"),P9.delete(r),n.terminate())}(this),Promise.resolve()}}function aZ(e,t,r,n={}){var u;e=Yo(e,XN);const a=Nh(t),s=e._getSettings(),i={...s,emulatorOptions:e._getEmulatorOptions()},o=`${t}:${r}`;a&&(NN(`https://${o}`),kN("Firestore",!0)),s.host!==nZ&&s.host!==o&&Yp("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:o,ssl:a,emulatorOptions:n};if(!om(c,i)&&(e._setSettings(c),n.mockUserToken)){let d,f;if(typeof n.mockUserToken=="string")d=n.mockUserToken,f=Uo.MOCK_USER;else{d=JX(n.mockUserToken,(u=e._app)==null?void 0:u.options.projectId);const h=n.mockUserToken.sub||n.mockUserToken.user_id;if(!h)throw new Wt(Et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Uo(h)}e._authCredentials=new ope(new $Y(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(t,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Rd(this.firestore,t,this._query)}}class os{constructor(t,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zf(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new os(this.firestore,t,this._key)}toJSON(){return{type:os._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,r,n){if(u2(r,os._jsonSchema))return new os(t,n||null,new br(Na.fromString(r.referencePath)))}}os._jsonSchemaVersion="firestore/documentReference/1.0",os._jsonSchema={type:hi("string",os._jsonSchemaVersion),referencePath:hi("string")};class Zf extends Rd{constructor(t,r,n){super(t,r,UN(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new os(this.firestore,null,new br(t))}withConverter(t){return new Zf(this.firestore,t,this._path)}}function It(e,t,...r){if(e=Jn(e),KY("collection","path",t),e instanceof XN){const n=Na.fromString(t,...r);return J7(n),new Zf(e,null,n)}{if(!(e instanceof os||e instanceof Zf))throw new Wt(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return J7(n),new Zf(e.firestore,null,n)}}function pr(e,t,...r){if(e=Jn(e),arguments.length===1&&(t=ON.newId()),KY("doc","path",t),e instanceof XN){const n=Na.fromString(t,...r);return Y7(n),new os(e,null,new br(n))}{if(!(e instanceof os||e instanceof Zf))throw new Wt(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Na.fromString(t,...r));return Y7(n),new os(e.firestore,e instanceof Zf?e.converter:null,new br(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M9="AsyncQueue";class U9{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new MJ(this,"async_queue_retry"),this._c=()=>{const n=fT();n&&lr(M9,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=t;const r=fT();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const r=fT();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const r=new Jf;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!m1(t))throw t;lr(M9,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const r=this.ac.then(()=>(this.rc=!0,t().catch(n=>{throw this.nc=n,this.rc=!1,Ah("INTERNAL UNHANDLED ERROR: ",Q9(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(t,r,n){this.uc(),this.oc.indexOf(t)>-1&&(r=0);const a=BD.createAndSchedule(this,t,r,n,s=>this.hc(s));return this.tc.push(a),a}uc(){this.nc&&Vr(47125,{Pc:Q9(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const r of this.tc)if(r.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const r=this.tc.indexOf(t);this.tc.splice(r,1)}}function Q9(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H9(e){return function(r,n){if(typeof r!="object"||r===null)return!1;const a=r;for(const s of n)if(s in a&&typeof a[s]=="function")return!0;return!1}(e,["next","error","complete"])}class Od extends XN{constructor(t,r,n,a){super(t,r,n,a),this.type="firestore",this._queue=new U9,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new U9(t),this._firestoreClient=void 0,await t}}}function LD(e,t){const r=typeof e=="object"?e:BN(),n=typeof e=="string"?e:CS,a=i2(r,"firestore").getImmediate({identifier:n});if(!a._initialized){const s=ZO("firestore");s&&aZ(a,...s)}return a}function g1(e){if(e._terminated)throw new Wt(Et.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||txe(e),e._firestoreClient}function txe(e){var n,a,s;const t=e._freezeSettings(),r=function(o,c,u,d){return new Npe(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,rZ(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((n=e._app)==null?void 0:n.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(a=t.localCache)!=null&&a._offlineComponentProvider&&((s=t.localCache)!=null&&s._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Xve(e._authCredentials,e._appCheckCredentials,e._queue,r,e._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(t){this._byteString=t}static fromBase64String(t){try{return new kc(Yi.fromBase64String(t))}catch(r){throw new Wt(Et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new kc(Yi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:kc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(u2(t,kc._jsonSchema))return kc.fromBase64String(t.bytes)}}kc._jsonSchemaVersion="firestore/bytes/1.0",kc._jsonSchema={type:hi("string",kc._jsonSchemaVersion),bytes:hi("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Wt(Et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Wt(Et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Wt(Et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Tn(this._lat,t._lat)||Tn(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_d._jsonSchemaVersion}}static fromJSON(t){if(u2(t,_d._jsonSchema))return new _d(t.latitude,t.longitude)}}_d._jsonSchemaVersion="firestore/geoPoint/1.0",_d._jsonSchema={type:hi("string",_d._jsonSchemaVersion),latitude:hi("number"),longitude:hi("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(n,a){if(n.length!==a.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==a[s])return!1;return!0}(this._values,t._values)}toJSON(){return{type:Sd._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(u2(t,Sd._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(r=>typeof r=="number"))return new Sd(t.vectorValues);throw new Wt(Et.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sd._jsonSchemaVersion="firestore/vectorValue/1.0",Sd._jsonSchema={type:hi("string",Sd._jsonSchemaVersion),vectorValues:hi("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rxe=/^__.*__$/;class nxe{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return this.fieldMask!==null?new Nm(t,this.data,this.fieldMask,r,this.fieldTransforms):new d2(t,this.data,r,this.fieldTransforms)}}class sZ{constructor(t,r,n){this.data=t,this.fieldMask=r,this.fieldTransforms=n}toMutation(t,r){return new Nm(t,this.data,this.fieldMask,r,this.fieldTransforms)}}function iZ(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vr(40011,{Ac:e})}}class YN{constructor(t,r,n,a,s,i){this.settings=t,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=a,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new YN({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.gc(t),n}yc(t){var a;const r=(a=this.path)==null?void 0:a.child(t),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return OS(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(iZ(this.Ac)&&rxe.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class axe{constructor(t,r,n){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=n||KN(t)}Cc(t,r,n,a=!1){return new YN({Ac:t,methodName:r,Dc:n,path:Gi.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function b1(e){const t=e._freezeSettings(),r=KN(e._databaseId);return new axe(e._databaseId,!!t.ignoreUndefinedProperties,r)}function MD(e,t,r,n,a,s={}){const i=e.Cc(s.merge||s.mergeFields?2:0,t,r,a);HD("Data must be an object, but it was:",i,n);const o=uZ(n,i);let c,u;if(s.merge)c=new Ic(i.fieldMask),u=i.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const h=vF(t,f,r);if(!i.contains(h))throw new Wt(Et.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);AZ(d,h)||d.push(h)}c=new Ic(d),u=i.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=i.fieldTransforms;return new nxe(new Kl(o),c,u)}class JN extends x1{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof JN}}function sxe(e,t,r){return new YN({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class UD extends x1{_toFieldTransform(t){return new wJ(t.path,new Aw)}isEqual(t){return t instanceof UD}}class QD extends x1{constructor(t,r){super(t),this.vc=r}_toFieldTransform(t){const r=sxe(this,t,!0),n=this.vc.map(s=>y1(s,r)),a=new Ox(n);return new wJ(t.path,a)}isEqual(t){return t instanceof QD&&om(this.vc,t.vc)}}function oZ(e,t,r,n){const a=e.Cc(1,t,r);HD("Data must be an object, but it was:",a,n);const s=[],i=Kl.empty();Sm(n,(c,u)=>{const d=VD(t,c,r);u=Jn(u);const f=a.yc(d);if(u instanceof JN)s.push(d);else{const h=y1(u,f);h!=null&&(s.push(d),i.set(d,h))}});const o=new Ic(s);return new sZ(i,o,a.fieldTransforms)}function lZ(e,t,r,n,a,s){const i=e.Cc(1,t,r),o=[vF(t,n,r)],c=[a];if(s.length%2!=0)throw new Wt(Et.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)o.push(vF(t,s[h])),c.push(s[h+1]);const u=[],d=Kl.empty();for(let h=o.length-1;h>=0;--h)if(!AZ(u,o[h])){const p=o[h];let g=c[h];g=Jn(g);const v=i.yc(p);if(g instanceof JN)u.push(p);else{const b=y1(g,v);b!=null&&(u.push(p),d.set(p,b))}}const f=new Ic(u);return new sZ(d,f,i.fieldTransforms)}function cZ(e,t,r,n=!1){return y1(r,e.Cc(n?4:3,t))}function y1(e,t){if(dZ(e=Jn(e)))return HD("Unsupported field value:",t,e),uZ(e,t);if(e instanceof x1)return function(n,a){if(!iZ(a.Ac))throw a.Sc(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(a);s&&a.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(n,a){const s=[];let i=0;for(const o of n){let c=y1(o,a.wc(i));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),i++}return{arrayValue:{values:s}}}(e,t)}return function(n,a){if((n=Jn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Xpe(a.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=mr.fromDate(n);return{timestampValue:BS(a.serializer,s)}}if(n instanceof mr){const s=new mr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:BS(a.serializer,s)}}if(n instanceof _d)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof kc)return{bytesValue:kJ(a.serializer,n._byteString)};if(n instanceof os){const s=a.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw a.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bD(n.firestore._databaseId||a.databaseId,n._key.path)}}if(n instanceof Sd)return function(i,o){return{mapValue:{fields:{[nJ]:{stringValue:aJ},[_S]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return gD(o.serializer,u)})}}}}}}(n,a);throw a.Sc(`Unsupported field value: ${DN(n)}`)}(e,t)}function uZ(e,t){const r={};return YY(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Sm(e,(n,a)=>{const s=y1(a,t.mc(n));s!=null&&(r[n]=s)}),{mapValue:{fields:r}}}function dZ(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof mr||e instanceof _d||e instanceof kc||e instanceof os||e instanceof x1||e instanceof Sd)}function HD(e,t,r){if(!dZ(r)||!WY(r)){const n=DN(r);throw n==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+n)}}function vF(e,t,r){if((t=Jn(t))instanceof v1)return t._internalPath;if(typeof t=="string")return VD(e,t);throw OS("Field path arguments must be of type string or ",e,!1,void 0,r)}const ixe=new RegExp("[~\\*/\\[\\]]");function VD(e,t,r){if(t.search(ixe)>=0)throw OS(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new v1(...t.split("."))._internalPath}catch{throw OS(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function OS(e,t,r,n,a){const s=n&&!n.isEmpty(),i=a!==void 0;let o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||i)&&(c+=" (found",s&&(c+=` in field ${n}`),i&&(c+=` in document ${a}`),c+=")"),new Wt(Et.INVALID_ARGUMENT,o+e+c)}function AZ(e,t){return e.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(t,r,n,a,s){this._firestore=t,this._userDataWriter=r,this._key=n,this._document=a,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new os(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new oxe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const r=this._document.data.field(ZN("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r)}}}class oxe extends zD{data(){return super.data()}}function ZN(e,t){return typeof t=="string"?VD(e,t):t instanceof v1?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fZ(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Wt(Et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $D{}class m2 extends $D{}function tr(e,t,...r){let n=[];t instanceof $D&&n.push(t),n=n.concat(r),function(s){const i=s.filter(c=>c instanceof e4).length,o=s.filter(c=>c instanceof p2).length;if(i>1||i>0&&o>0)throw new Wt(Et.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class p2 extends m2{constructor(t,r,n){super(),this._field=t,this._op=r,this._value=n,this.type="where"}static _create(t,r,n){return new p2(t,r,n)}_apply(t){const r=this._parse(t);return mZ(t._query,r),new Rd(t.firestore,t.converter,lF(t._query,r))}_parse(t){const r=b1(t.firestore);return function(s,i,o,c,u,d,f){let h;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Wt(Et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){z9(f,d);const g=[];for(const v of f)g.push(V9(c,s,v));h={arrayValue:{values:g}}}else h=V9(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||z9(f,d),h=cZ(o,i,f,d==="in"||d==="not-in");return fi.create(u,d,h)}(t._query,"where",r,t.firestore._databaseId,this._field,this._op,this._value)}}function vn(e,t,r){const n=t,a=ZN("where",e);return p2._create(a,n,r)}class e4 extends $D{constructor(t,r){super(),this.type=t,this._queryConstraints=r}static _create(t,r){return new e4(t,r)}_parse(t){const r=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Fd.create(r,this._getOperator())}_apply(t){const r=this._parse(t);return r.getFilters().length===0?t:(function(a,s){let i=a;const o=s.getFlattenedFilters();for(const c of o)mZ(i,c),i=lF(i,c)}(t._query,r),new Rd(t.firestore,t.converter,lF(t._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class t4 extends m2{constructor(t,r){super(),this._field=t,this._direction=r,this.type="orderBy"}static _create(t,r){return new t4(t,r)}_apply(t){const r=function(a,s,i){if(a.startAt!==null)throw new Wt(Et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Wt(Et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dw(s,i)}(t._query,this._field,this._direction);return new Rd(t.firestore,t.converter,function(a,s){const i=a.explicitOrderBy.concat([s]);return new mg(a.path,a.collectionGroup,i,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(t._query,r))}}function Rr(e,t="asc"){const r=t,n=ZN("orderBy",e);return t4._create(n,r)}class r4 extends m2{constructor(t,r,n){super(),this.type=t,this._limit=r,this._limitType=n}static _create(t,r,n){return new r4(t,r,n)}_apply(t){return new Rd(t.firestore,t.converter,NS(t._query,this._limit,this._limitType))}}function Nd(e){return ppe("limit",e),r4._create("limit",e,"F")}class n4 extends m2{constructor(t,r,n){super(),this.type=t,this._docOrFields=r,this._inclusive=n}static _create(t,r,n){return new n4(t,r,n)}_apply(t){const r=lxe(t,this.type,this._docOrFields,this._inclusive);return new Rd(t.firestore,t.converter,function(a,s){return new mg(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,s,a.endAt)}(t._query,r))}}function hZ(...e){return n4._create("startAfter",e,!1)}function lxe(e,t,r,n){if(r[0]=Jn(r[0]),r[0]instanceof zD)return function(s,i,o,c,u){if(!c)throw new Wt(Et.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const d=[];for(const f of lx(s))if(f.field.isKeyField())d.push(SS(i,c.key));else{const h=c.data.field(f.field);if(LN(h))throw new Wt(Et.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const p=f.field.canonicalString();throw new Wt(Et.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}d.push(h)}return new Fx(d,u)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{const a=b1(e.firestore);return function(i,o,c,u,d,f){const h=i.explicitOrderBy;if(d.length>h.length)throw new Wt(Et.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<d.length;g++){const v=d[g];if(h[g].field.isKeyField()){if(typeof v!="string")throw new Wt(Et.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof v}`);if(!pD(i)&&v.indexOf("/")!==-1)throw new Wt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${v}' contains a slash.`);const b=i.path.child(Na.fromString(v));if(!br.isDocumentKey(b))throw new Wt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${b}' is not because it contains an odd number of segments.`);const y=new br(b);p.push(SS(o,y))}else{const b=cZ(c,u,v);p.push(b)}}return new Fx(p,f)}(e._query,e.firestore._databaseId,a,t,r,n)}}function V9(e,t,r){if(typeof(r=Jn(r))=="string"){if(r==="")throw new Wt(Et.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pD(t)&&r.indexOf("/")!==-1)throw new Wt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=t.path.child(Na.fromString(r));if(!br.isDocumentKey(n))throw new Wt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return SS(e,new br(n))}if(r instanceof os)return SS(e,r._key);throw new Wt(Et.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${DN(r)}.`)}function z9(e,t){if(!Array.isArray(e)||e.length===0)throw new Wt(Et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function mZ(e,t){const r=function(a,s){for(const i of a)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(e.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(r!==null)throw r===t.op?new Wt(Et.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Wt(Et.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}class pZ{convertValue(t,r="none"){switch(Am(t)){case 0:return null;case 1:return t.booleanValue;case 2:return zs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,r);case 5:return t.stringValue;case 6:return this.convertBytes(dm(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,r);case 11:return this.convertObject(t.mapValue,r);case 10:return this.convertVectorValue(t.mapValue);default:throw Vr(62114,{value:t})}}convertObject(t,r){return this.convertObjectMap(t.fields,r)}convertObjectMap(t,r="none"){const n={};return Sm(t,(a,s)=>{n[a]=this.convertValue(s,r)}),n}convertVectorValue(t){var n,a,s;const r=(s=(a=(n=t.fields)==null?void 0:n[_S].arrayValue)==null?void 0:a.values)==null?void 0:s.map(i=>zs(i.doubleValue));return new Sd(r)}convertGeoPoint(t){return new _d(zs(t.latitude),zs(t.longitude))}convertArray(t,r){return(t.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(t,r){switch(r){case"previous":const n=MN(t);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(cw(t));default:return null}}convertTimestamp(t){const r=um(t);return new mr(r.seconds,r.nanos)}convertDocumentKey(t,r){const n=Na.fromString(t);la(OJ(n),9688,{name:t});const a=new Tx(n.get(1),n.get(3)),s=new br(n.popFirst(5));return a.isEqual(r)||Ah(`Document ${s} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(e,t,r){let n;return n=e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t,n}class $v{constructor(t,r){this.hasPendingWrites=t,this.fromCache=r}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Y0 extends zD{constructor(t,r,n,a,s,i){super(t,r,n,a,i),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const r=new Oy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,r={}){if(this._document){const n=this._document.data.field(ZN("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Et.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,r={};return r.type=Y0._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}Y0._jsonSchemaVersion="firestore/documentSnapshot/1.0",Y0._jsonSchema={type:hi("string",Y0._jsonSchemaVersion),bundleSource:hi("string","DocumentSnapshot"),bundleName:hi("string"),bundle:hi("string")};class Oy extends Y0{data(t={}){return super.data(t)}}class J0{constructor(t,r,n,a){this._firestore=t,this._userDataWriter=r,this._snapshot=a,this.metadata=new $v(a.hasPendingWrites,a.fromCache),this.query=n}get docs(){const t=[];return this.forEach(r=>t.push(r)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,r){this._snapshot.docs.forEach(n=>{t.call(r,new Oy(this._firestore,this._userDataWriter,n.key,n,new $v(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const r=!!t.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Wt(Et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(a,s){if(a._snapshot.oldDocs.isEmpty()){let i=0;return a._snapshot.docChanges.map(o=>{const c=new Oy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new $v(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}})}{let i=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new Oy(a._firestore,a._userDataWriter,o.doc.key,o.doc,new $v(a._snapshot.mutatedKeys.has(o.doc.key),a._snapshot.fromCache),a.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:cxe(o.type),doc:c,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Et.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=J0._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=ON.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],a=[];return this.docs.forEach(s=>{s._document!==null&&(r.push(s._document),n.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),a.push(s.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function cxe(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vr(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(e){e=Yo(e,os);const t=Yo(e.firestore,Od);return Zve(g1(t),e._key).then(r=>gZ(t,e,r))}J0._jsonSchemaVersion="firestore/querySnapshot/1.0",J0._jsonSchema={type:hi("string",J0._jsonSchemaVersion),bundleSource:hi("string","QuerySnapshot"),bundleName:hi("string"),bundle:hi("string")};class KD extends pZ{constructor(t){super(),this.firestore=t}convertBytes(t){return new kc(t)}convertReference(t){const r=this.convertDocumentKey(t,this.firestore._databaseId);return new os(this.firestore,null,r)}}function Pa(e){e=Yo(e,Rd);const t=Yo(e.firestore,Od),r=g1(t),n=new KD(t);return fZ(e._query),exe(r,e._query).then(a=>new J0(t,n,e,a))}function Ji(e,t,r){e=Yo(e,os);const n=Yo(e.firestore,Od),a=GD(e.converter,t,r);return w1(n,[MD(b1(n),"setDoc",e._key,a,e.converter!==null,r).toMutation(e._key,vl.none())])}function Ld(e,t,r,...n){e=Yo(e,os);const a=Yo(e.firestore,Od),s=b1(a);let i;return i=typeof(t=Jn(t))=="string"||t instanceof v1?lZ(s,"updateDoc",e._key,t,r,n):oZ(s,"updateDoc",e._key,t),w1(a,[i.toMutation(e._key,vl.exists(!0))])}function ts(e){return w1(Yo(e.firestore,Od),[new $N(e._key,vl.none())])}function Un(e,t){const r=Yo(e.firestore,Od),n=pr(e),a=GD(e.converter,t);return w1(r,[MD(b1(e.firestore),"addDoc",n._key,a,e.converter!==null,{}).toMutation(n._key,vl.exists(!1))]).then(()=>n)}function gr(e,...t){var c,u,d;e=Jn(e);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof t[n]!="object"||H9(t[n])||(r=t[n++]);const a={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if(H9(t[n])){const f=t[n];t[n]=(c=f.next)==null?void 0:c.bind(f),t[n+1]=(u=f.error)==null?void 0:u.bind(f),t[n+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,i,o;if(e instanceof os)i=Yo(e.firestore,Od),o=UN(e._key.path),s={next:f=>{t[n]&&t[n](gZ(i,e,f))},error:t[n+1],complete:t[n+2]};else{const f=Yo(e,Rd);i=Yo(f.firestore,Od),o=f._query;const h=new KD(i);s={next:p=>{t[n]&&t[n](new J0(i,h,f,p))},error:t[n+1],complete:t[n+2]},fZ(e._query)}return function(h,p,g,v){const b=new RD(v),y=new OD(p,b,g);return h.asyncQueue.enqueueAndForget(async()=>jD(await FS(h),y)),()=>{b.Nu(),h.asyncQueue.enqueueAndForget(async()=>ID(await FS(h),y))}}(g1(i),o,a,s)}function w1(e,t){return function(n,a){const s=new Jf;return n.asyncQueue.enqueueAndForget(async()=>Qve(await Jve(n),a,s)),s.promise}(g1(e),t)}function gZ(e,t,r){const n=r.docs.get(t._key),a=new KD(e);return new Y0(e,a,t._key,n,new $v(r.hasPendingWrites,r.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vZ{constructor(t,r){this._firestore=t,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=b1(t)}set(t,r,n){this._verifyNotCommitted();const a=mT(t,this._firestore),s=GD(a.converter,r,n),i=MD(this._dataReader,"WriteBatch.set",a._key,s,a.converter!==null,n);return this._mutations.push(i.toMutation(a._key,vl.none())),this}update(t,r,n,...a){this._verifyNotCommitted();const s=mT(t,this._firestore);let i;return i=typeof(r=Jn(r))=="string"||r instanceof v1?lZ(this._dataReader,"WriteBatch.update",s._key,r,n,a):oZ(this._dataReader,"WriteBatch.update",s._key,r),this._mutations.push(i.toMutation(s._key,vl.exists(!0))),this}delete(t){this._verifyNotCommitted();const r=mT(t,this._firestore);return this._mutations=this._mutations.concat(new $N(r._key,vl.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Wt(Et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function mT(e,t){if((e=Jn(e)).firestore!==t)throw new Wt(Et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function el(){return new UD("serverTimestamp")}function xZ(...e){return new QD("arrayUnion",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(e){return g1(e=Yo(e,Od)),new vZ(e,t=>w1(e,t))}(function(t,r=!0){(function(a){f1=a})(fg),lm(new ch("firestore",(n,{instanceIdentifier:a,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Od(new lpe(n.getProvider("auth-internal")),new dpe(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Wt(Et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Tx(u.options.projectId,d)}(i,a),i);return s={useFetchStreams:r,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),Fu(K7,q7,t),Fu(K7,q7,"esm2020")})();const uxe=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:pZ,Bytes:kc,CollectionReference:Zf,DocumentReference:os,DocumentSnapshot:Y0,FieldPath:v1,FieldValue:x1,Firestore:Od,FirestoreError:Wt,GeoPoint:_d,Query:Rd,QueryCompositeFilterConstraint:e4,QueryConstraint:m2,QueryDocumentSnapshot:Oy,QueryFieldFilterConstraint:p2,QueryLimitConstraint:r4,QueryOrderByConstraint:t4,QuerySnapshot:J0,QueryStartAtConstraint:n4,SnapshotMetadata:$v,Timestamp:mr,VectorValue:Sd,WriteBatch:vZ,_AutoId:ON,_ByteString:Yi,_DatabaseId:Tx,_DocumentKey:br,_EmptyAuthCredentialsProvider:GY,_FieldPath:Gi,_cast:Yo,_logWarn:Yp,_validateIsNotUsedTogether:qY,addDoc:Un,arrayUnion:xZ,collection:It,connectFirestoreEmulator:aZ,deleteDoc:ts,doc:pr,ensureFirestoreConfigured:g1,executeWrite:w1,getDoc:g2,getDocs:Pa,getFirestore:LD,limit:Nd,onSnapshot:gr,orderBy:Rr,query:tr,serverTimestamp:el,setDoc:Ji,startAfter:hZ,updateDoc:Ld,where:vn,writeBatch:E1},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bZ="firebasestorage.googleapis.com",yZ="storageBucket",dxe=120*1e3,Axe=600*1e3,fxe=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Pd{constructor(t,r,n=0){super(pT(t),`Firebase Storage: ${r} (${pT(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,hs.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return pT(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var za;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(za||(za={}));function pT(e){return"storage/"+e}function qD(){const e="An unknown error occurred, please check the error payload for server response.";return new hs(za.UNKNOWN,e)}function hxe(e){return new hs(za.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function mxe(e){return new hs(za.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function pxe(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new hs(za.UNAUTHENTICATED,e)}function gxe(){return new hs(za.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function vxe(e){return new hs(za.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function wZ(){return new hs(za.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function EZ(){return new hs(za.CANCELED,"User canceled the upload/download.")}function xxe(e){return new hs(za.INVALID_URL,"Invalid URL '"+e+"'.")}function bxe(e){return new hs(za.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function yxe(){return new hs(za.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+yZ+"' property when initializing the app?")}function CZ(){return new hs(za.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wxe(){return new hs(za.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Exe(){return new hs(za.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Cxe(e){return new hs(za.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xF(e){return new hs(za.INVALID_ARGUMENT,e)}function _Z(){return new hs(za.APP_DELETED,"The Firebase app was deleted.")}function _xe(e){return new hs(za.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dy(e,t){return new hs(za.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Ib(e){throw new hs(za.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=ml.makeFromUrl(t,r)}catch{return new ml(t,"")}if(n.path==="")return n;throw bxe(t)}static makeFromUrl(t,r){let n=null;const a="([A-Za-z0-9.\\-_]+)";function s(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const i="(/(.*))?$",o=new RegExp("^gs://"+a+i,"i"),c={bucket:1,path:3};function u(T){T.path_=decodeURIComponent(T.path)}const d="v[A-Za-z0-9_]+",f=r.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",p=new RegExp(`^https?://${f}/${d}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},v=r===bZ?"(?:storage.googleapis.com|storage.cloud.google.com)":r,b="([^?#]*)",y=new RegExp(`^https?://${v}/${a}/${b}`,"i"),N=[{regex:o,indices:c,postModify:s},{regex:p,indices:g,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let T=0;T<N.length;T++){const S=N[T],B=S.regex.exec(t);if(B){const w=B[S.indices.bucket];let _=B[S.indices.path];_||(_=""),n=new ml(w,_),S.postModify(n);break}}if(n==null)throw xxe(t);return n}}class Sxe{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nxe(e,t,r){let n=1,a=null,s=null,i=!1,o=0;function c(){return o===2}let u=!1;function d(...b){u||(u=!0,t.apply(null,b))}function f(b){a=setTimeout(()=>{a=null,e(p,c())},b)}function h(){s&&clearTimeout(s)}function p(b,...y){if(u){h();return}if(b){h(),d.call(null,b,...y);return}if(c()||i){h(),d.call(null,b,...y);return}n<64&&(n*=2);let N;o===1?(o=2,N=0):N=(n+Math.random())*1e3,f(N)}let g=!1;function v(b){g||(g=!0,h(),!u&&(a!==null?(b||(o=2),clearTimeout(a),f(0)):b||(o=1)))}return f(0),s=setTimeout(()=>{i=!0,v(!0)},r),v}function kxe(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bxe(e){return e!==void 0}function Txe(e){return typeof e=="function"}function jxe(e){return typeof e=="object"&&!Array.isArray(e)}function a4(e){return typeof e=="string"||e instanceof String}function $9(e){return WD()&&e instanceof Blob}function WD(){return typeof Blob<"u"}function bF(e,t,r,n){if(n<t)throw xF(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw xF(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function SZ(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const a=t(n)+"="+t(e[n]);r=r+a+"&"}return r=r.slice(0,-1),r}var Fp;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Fp||(Fp={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NZ(e,t){const r=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return r||a||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ixe{constructor(t,r,n,a,s,i,o,c,u,d,f,h=!0,p=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=a,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const t=(n,a)=>{if(a){n(!1,new nC(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const i=o=>{const c=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(i),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(i),this.pendingConnection_=null;const o=s.getErrorCode()===Fp.NO_ERROR,c=s.getStatus();if(!o||NZ(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===Fp.ABORT;n(!1,new nC(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new nC(u,s))})},r=(n,a)=>{const s=this.resolve_,i=this.reject_,o=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());Bxe(c)?s(c):s()}catch(c){i(c)}else if(o!==null){const c=qD();c.serverResponse=o.getErrorText(),this.errorCallback_?i(this.errorCallback_(o,c)):i(c)}else if(a.canceled){const c=this.appDelete_?_Z():EZ();i(c)}else{const c=wZ();i(c)}};this.canceled_?r(!1,new nC(!1,null,!0)):this.backoffId_=Nxe(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&kxe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nC{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function Fxe(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Oxe(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Dxe(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Pxe(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Rxe(e,t,r,n,a,s,i=!0,o=!1){const c=SZ(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return Dxe(d,t),Fxe(d,r),Oxe(d,s),Pxe(d,n),new Ixe(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lxe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Mxe(...e){const t=Lxe();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(WD())return new Blob(e);throw new hs(za.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Uxe(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qxe(e){if(typeof atob>"u")throw Cxe("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class gT{constructor(t,r){this.data=t,this.contentType=r||null}}function Hxe(e,t){switch(e){case DA.RAW:return new gT(kZ(t));case DA.BASE64:case DA.BASE64URL:return new gT(BZ(e,t));case DA.DATA_URL:return new gT(zxe(t),$xe(t))}throw qD()}function kZ(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const s=n,i=e.charCodeAt(++r);n=65536|(s&1023)<<10|i&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function Vxe(e){let t;try{t=decodeURIComponent(e)}catch{throw Dy(DA.DATA_URL,"Malformed data URL.")}return kZ(t)}function BZ(e,t){switch(e){case DA.BASE64:{const a=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(a||s)throw Dy(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case DA.BASE64URL:{const a=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(a||s)throw Dy(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=Qxe(t)}catch(a){throw a.message.includes("polyfill")?a:Dy(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let a=0;a<r.length;a++)n[a]=r.charCodeAt(a);return n}class TZ{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw Dy(DA.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=Gxe(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function zxe(e){const t=new TZ(e);return t.base64?BZ(DA.BASE64,t.rest):Vxe(t.rest)}function $xe(e){return new TZ(e).contentType}function Gxe(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(t,r){let n=0,a="";$9(t)?(this.data_=t,n=t.size,a=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,r){if($9(this.data_)){const n=this.data_,a=Uxe(n,t,r);return a===null?null:new Hf(a)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new Hf(n,!0)}}static getBlob(...t){if(WD()){const r=t.map(n=>n instanceof Hf?n.data_:n);return new Hf(Mxe.apply(null,r))}else{const r=t.map(i=>a4(i)?Hxe(DA.RAW,i).data:i.data_);let n=0;r.forEach(i=>{n+=i.byteLength});const a=new Uint8Array(n);let s=0;return r.forEach(i=>{for(let o=0;o<i.length;o++)a[s++]=i[o]}),new Hf(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(e){let t;try{t=JSON.parse(e)}catch{return null}return jxe(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kxe(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function qxe(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function jZ(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wxe(e,t){return t}class cl{constructor(t,r,n,a){this.server=t,this.local=r||t,this.writable=!!n,this.xform=a||Wxe}}let aC=null;function Xxe(e){return!a4(e)||e.length<2?e:jZ(e)}function YD(){if(aC)return aC;const e=[];e.push(new cl("bucket")),e.push(new cl("generation")),e.push(new cl("metageneration")),e.push(new cl("name","fullPath",!0));function t(s,i){return Xxe(i)}const r=new cl("name");r.xform=t,e.push(r);function n(s,i){return i!==void 0?Number(i):i}const a=new cl("size");return a.xform=n,e.push(a),e.push(new cl("timeCreated")),e.push(new cl("updated")),e.push(new cl("md5Hash",null,!0)),e.push(new cl("cacheControl",null,!0)),e.push(new cl("contentDisposition",null,!0)),e.push(new cl("contentEncoding",null,!0)),e.push(new cl("contentLanguage",null,!0)),e.push(new cl("contentType",null,!0)),e.push(new cl("metadata","customMetadata",!0)),aC=e,aC}function Yxe(e,t){function r(){const n=e.bucket,a=e.fullPath,s=new ml(n,a);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:r})}function Jxe(e,t,r){const n={};n.type="file";const a=r.length;for(let s=0;s<a;s++){const i=r[s];n[i.local]=i.xform(n,t[i.server])}return Yxe(n,e),n}function IZ(e,t,r){const n=XD(t);return n===null?null:Jxe(e,n,r)}function Zxe(e,t,r,n){const a=XD(t);if(a===null||!a4(a.downloadTokens))return null;const s=a.downloadTokens;if(s.length===0)return null;const i=encodeURIComponent;return s.split(",").map(u=>{const d=e.bucket,f=e.fullPath,h="/b/"+i(d)+"/o/"+i(f),p=vg(h,r,n),g=SZ({alt:"media",token:u});return p+g})[0]}function FZ(e,t){const r={},n=t.length;for(let a=0;a<n;a++){const s=t[a];s.writable&&(r[s.server]=e[s.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G9="prefixes",K9="items";function e1e(e,t,r){const n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[G9])for(const a of r[G9]){const s=a.replace(/\/$/,""),i=e._makeStorageReference(new ml(t,s));n.prefixes.push(i)}if(r[K9])for(const a of r[K9]){const s=e._makeStorageReference(new ml(t,a.name));n.items.push(s)}return n}function t1e(e,t,r){const n=XD(r);return n===null?null:e1e(e,t,n)}class km{constructor(t,r,n,a){this.url=t,this.method=r,this.handler=n,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A(e){if(!e)throw qD()}function JD(e,t){function r(n,a){const s=IZ(e,a,t);return $A(s!==null),s}return r}function r1e(e,t){function r(n,a){const s=t1e(e,t,a);return $A(s!==null),s}return r}function n1e(e,t){function r(n,a){const s=IZ(e,a,t);return $A(s!==null),Zxe(s,a,e.host,e._protocol)}return r}function C1(e){function t(r,n){let a;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?a=gxe():a=pxe():r.getStatus()===402?a=mxe(e.bucket):r.getStatus()===403?a=vxe(e.path):a=n,a.status=r.getStatus(),a.serverResponse=n.serverResponse,a}return t}function ZD(e){const t=C1(e);function r(n,a){let s=t(n,a);return n.getStatus()===404&&(s=hxe(e.path)),s.serverResponse=a.serverResponse,s}return r}function a1e(e,t,r){const n=t.fullServerUrl(),a=vg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new km(a,s,JD(e,r),i);return o.errorHandler=ZD(t),o}function s1e(e,t,r,n,a){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r.length>0&&(s.delimiter=r),n&&(s.pageToken=n),a&&(s.maxResults=a);const i=t.bucketOnlyServerUrl(),o=vg(i,e.host,e._protocol),c="GET",u=e.maxOperationRetryTime,d=new km(o,c,r1e(e,t.bucket),u);return d.urlParams=s,d.errorHandler=C1(t),d}function i1e(e,t,r){const n=t.fullServerUrl(),a=vg(n,e.host,e._protocol),s="GET",i=e.maxOperationRetryTime,o=new km(a,s,n1e(e,r),i);return o.errorHandler=ZD(t),o}function o1e(e,t){const r=t.fullServerUrl(),n=vg(r,e.host,e._protocol),a="DELETE",s=e.maxOperationRetryTime;function i(c,u){}const o=new km(n,a,i,s);return o.successCodes=[200,204],o.errorHandler=ZD(t),o}function l1e(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function OZ(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=l1e(null,t)),n}function DZ(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function o(){let N="";for(let T=0;T<2;T++)N=N+Math.random().toString().slice(2);return N}const c=o();i["Content-Type"]="multipart/related; boundary="+c;const u=OZ(t,n,a),d=FZ(u,r),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+c+"--",p=Hf.getBlob(f,n,h);if(p===null)throw CZ();const g={name:u.fullPath},v=vg(s,e.host,e._protocol),b="POST",y=e.maxUploadRetryTime,C=new km(v,b,JD(e,r),y);return C.urlParams=g,C.headers=i,C.body=p.uploadData(),C.errorHandler=C1(t),C}class DS{constructor(t,r,n,a){this.current=t,this.total=r,this.finalized=!!n,this.metadata=a||null}}function eP(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{$A(!1)}return $A(!!r&&(t||["active"]).indexOf(r)!==-1),r}function c1e(e,t,r,n,a){const s=t.bucketOnlyServerUrl(),i=OZ(t,n,a),o={name:i.fullPath},c=vg(s,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":i.contentType,"Content-Type":"application/json; charset=utf-8"},f=FZ(i,r),h=e.maxUploadRetryTime;function p(v){eP(v);let b;try{b=v.getResponseHeader("X-Goog-Upload-URL")}catch{$A(!1)}return $A(a4(b)),b}const g=new km(c,u,p,h);return g.urlParams=o,g.headers=d,g.body=f,g.errorHandler=C1(t),g}function u1e(e,t,r,n){const a={"X-Goog-Upload-Command":"query"};function s(u){const d=eP(u,["active","final"]);let f=null;try{f=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{$A(!1)}f||$A(!1);const h=Number(f);return $A(!isNaN(h)),new DS(h,n.size(),d==="final")}const i="POST",o=e.maxUploadRetryTime,c=new km(r,i,s,o);return c.headers=a,c.errorHandler=C1(t),c}const q9=256*1024;function d1e(e,t,r,n,a,s,i,o){const c=new DS(0,0);if(i?(c.current=i.current,c.total=i.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw wxe();const u=c.total-c.current;let d=u;a>0&&(d=Math.min(d,a));const f=c.current,h=f+d;let p="";d===0?p="finalize":u===d?p="upload, finalize":p="upload";const g={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${c.current}`},v=n.slice(f,h);if(v===null)throw CZ();function b(T,S){const B=eP(T,["active","final"]),w=c.current+d,_=n.size();let F;return B==="final"?F=JD(t,s)(T,S):F=null,new DS(w,_,B==="final",F)}const y="POST",C=t.maxUploadRetryTime,N=new km(r,y,b,C);return N.headers=g,N.body=v.uploadData(),N.progressCallback=o||null,N.errorHandler=C1(e),N}const Vl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vT(e){switch(e){case"running":case"pausing":case"canceling":return Vl.RUNNING;case"paused":return Vl.PAUSED;case"success":return Vl.SUCCESS;case"canceled":return Vl.CANCELED;case"error":return Vl.ERROR;default:return Vl.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1e{constructor(t,r,n){if(Txe(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class f1e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fp.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fp.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fp.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,a,s){if(this.sent_)throw Ib("cannot .send() more than once");if(Nh(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ib("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ib("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ib("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ib("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class h1e extends f1e{initXhr(){this.xhr_.responseType="text"}}function Vf(){return new h1e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1e{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=YD(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(za.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(NZ(a.status,[]))if(s)a=wZ();else{this.sleepTime=Math.max(this.sleepTime*2,fxe),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(za.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,s)=>{this._resolve=a,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=c1e(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Vf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const a=u1e(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(a,Vf,r,n);this._request=s,s.getPromise().then(i=>{i=i,this._request=void 0,this._updateProgress(i.current),this._needToFetchStatus=!1,i.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=q9*this._chunkMultiplier,r=new DS(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((a,s)=>{let i;try{i=d1e(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const o=this._ref.storage._makeRequest(i,Vf,a,s,!1);this._request=o,o.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){q9*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=a1e(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(n,Vf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=DZ(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(n,Vf,t,r);this._request=a,a.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=EZ(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=vT(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,a){const s=new A1e(r||void 0,n||void 0,a||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(vT(this._state)){case Vl.SUCCESS:iv(this._resolve.bind(null,this.snapshot))();break;case Vl.CANCELED:case Vl.ERROR:const r=this._reject;iv(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(vT(this._state)){case Vl.RUNNING:case Vl.PAUSED:t.next&&iv(t.next.bind(t,this.snapshot))();break;case Vl.SUCCESS:t.complete&&iv(t.complete.bind(t))();break;case Vl.CANCELED:case Vl.ERROR:t.error&&iv(t.error.bind(t,this._error))();break;default:t.error&&iv(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(t,r){this._service=t,r instanceof ml?this._location=r:this._location=ml.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Zp(t,r)}get root(){const t=new ml(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return jZ(this._location.path)}get storage(){return this._service}get parent(){const t=Kxe(this._location.path);if(t===null)return null;const r=new ml(this._location.bucket,t);return new Zp(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw _xe(t)}}function p1e(e,t,r){e._throwIfRoot("uploadBytes");const n=DZ(e.storage,e._location,YD(),new Hf(t,!0),r);return e.storage.makeRequestWithTokens(n,Vf).then(a=>({metadata:a,ref:e}))}function g1e(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new m1e(e,new Hf(t),r)}function v1e(e){const t={prefixes:[],items:[]};return PZ(e,t).then(()=>t)}async function PZ(e,t,r){const a=await x1e(e,{pageToken:r});t.prefixes.push(...a.prefixes),t.items.push(...a.items),a.nextPageToken!=null&&await PZ(e,t,a.nextPageToken)}function x1e(e,t){t!=null&&typeof t.maxResults=="number"&&bF("options.maxResults",1,1e3,t.maxResults);const r=t||{},n=s1e(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(n,Vf)}function b1e(e){e._throwIfRoot("getDownloadURL");const t=i1e(e.storage,e._location,YD());return e.storage.makeRequestWithTokens(t,Vf).then(r=>{if(r===null)throw Exe();return r})}function y1e(e){e._throwIfRoot("deleteObject");const t=o1e(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Vf)}function w1e(e,t){const r=qxe(e._location.path,t),n=new ml(e._location.bucket,r);return new Zp(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1e(e){return/^[A-Za-z]+:\/\//.test(e)}function C1e(e,t){return new Zp(e,t)}function RZ(e,t){if(e instanceof tP){const r=e;if(r._bucket==null)throw yxe();const n=new Zp(r,r._bucket);return t!=null?RZ(n,t):n}else return t!==void 0?w1e(e,t):e}function _1e(e,t){if(t&&E1e(t)){if(e instanceof tP)return C1e(e,t);throw xF("To use ref(service, url), the first argument must be a Storage instance.")}else return RZ(e,t)}function W9(e,t){const r=t==null?void 0:t[yZ];return r==null?null:ml.makeFromBucketSpec(r,e)}function S1e(e,t,r,n={}){e.host=`${t}:${r}`;const a=Nh(t);a&&(NN(`https://${e.host}/b`),kN("Storage",!0)),e._isUsingEmulator=!0,e._protocol=a?"https":"http";const{mockUserToken:s}=n;s&&(e._overrideAuthToken=typeof s=="string"?s:JX(s,e.app.options.projectId))}class tP{constructor(t,r,n,a,s,i=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=a,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=bZ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dxe,this._maxUploadRetryTime=Axe,this._requests=new Set,a!=null?this._bucket=ml.makeFromBucketSpec(a,this._host):this._bucket=W9(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=ml.makeFromBucketSpec(this._url,t):this._bucket=W9(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){bF("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){bF("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(Nc(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Zp(this,t)}_makeRequest(t,r,n,a,s=!0){if(this._deleted)return new Sxe(_Z());{const i=Rxe(t,this._appId,n,a,r,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(t,r){const[n,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,a).getPromise()}}const X9="@firebase/storage",Y9="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LZ="storage";function MZ(e,t,r){return e=Jn(e),p1e(e,t,r)}function N1e(e,t,r){return e=Jn(e),g1e(e,t,r)}function k1e(e){return e=Jn(e),v1e(e)}function rP(e){return e=Jn(e),b1e(e)}function B1e(e){return e=Jn(e),y1e(e)}function s4(e,t){return e=Jn(e),_1e(e,t)}function nP(e=BN(),t){e=Jn(e);const n=i2(e,LZ).getImmediate({identifier:t}),a=ZO("storage");return a&&T1e(n,...a),n}function T1e(e,t,r,n={}){S1e(e,t,r,n)}function j1e(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new tP(r,n,a,t,fg)}function I1e(){lm(new ch(LZ,j1e,"PUBLIC").setMultipleInstances(!0)),Fu(X9,Y9,""),Fu(X9,Y9,"esm2020")}I1e();const F1e={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},aP=rD(F1e),v2=RY(aP),tn=LD(aP),UZ=nP(aP),QZ=Object.freeze(Object.defineProperty({__proto__:null,auth:v2,db:tn,storage:UZ},Symbol.toStringTag,{value:"Module"})),O1e=async(e,t)=>{try{return(await z0e(v2,e,t)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},xT=async()=>{try{await K0e(v2)}catch(e){throw console.error("Error en logoutUser helper:",e),e}},D1e=async e=>{try{await V0e(v2,e)}catch(t){throw console.error("Error en resetPassword helper:",t),t}},HZ=async e=>{try{const t=pr(tn,"usuarios",e),r=await g2(t);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${e}`),null)}catch(t){throw console.error("Error en getUserProfile helper:",t),t}};var Yt=(e=>(e.SUBDIRECCION="SUBDIRECCION",e.PROFESORADO="PROFESORADO",e.COORDINACION_TP="COORDINACION_TP",e.ESTUDIANTE="ESTUDIANTE",e))(Yt||{}),dn=(e=>(e.EVALUACION="Evaluación",e.ACTO="Acto",e.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",e.SALIDA_PEDAGOGICA="Salida Pedagógica",e))(dn||{}),vp=(e=>(e.PRUEBA_PARCIAL="Prueba parcial",e.GUIA_APRENDIZAJE="Guía de Aprendizaje",e.RUBRICA="Rúbrica",e.PAUTA_COTEJO="Pauta de Cotejo",e))(vp||{});const P1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),pi="w-6 h-6",i4="w-24 h-24",sP=()=>l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),R1e=()=>l.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M9 18h6"}),l.jsx("path",{d:"M10 22h4"}),l.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),L1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),M1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),uy=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),dy=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),VZ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),U1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i4,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),Q1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),H1e=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:i4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),V1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:i4,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),z1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),J9=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),sC=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),bT=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),iC=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),yT=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Z9=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),$1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),G1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),K1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),q1e=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),eQ=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),W1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),wT=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),X1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:pi,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),Y1e=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:pi,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),tQ=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:pi,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),J1e=[{id:Yt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:l.jsx(U1e,{})},{id:Yt.PROFESORADO,label:"Profesorado",icon:l.jsx(Q1e,{})},{id:Yt.COORDINACION_TP,label:"Coordinación TP",icon:l.jsx(H1e,{})},{id:Yt.ESTUDIANTE,label:"Estudiantes",icon:l.jsx(V1e,{})}],Z1e={[Yt.SUBDIRECCION]:[{name:"Dashboard",icon:l.jsx(z1e,{})},{name:"Administración",icon:l.jsx(q1e,{})},{name:"Seguimiento Curricular",icon:l.jsx(Y1e,{})},{name:"Acompañamiento docente",icon:l.jsx(K1e,{})},{name:"Análisis Taxonómico",icon:l.jsx(tQ,{})},{name:"Interdisciplinario",icon:l.jsx(wT,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:l.jsx(J9,{})},{name:"Crear horarios",icon:l.jsx(bT,{})},{name:"Seguimiento de acciones pedagógicas",icon:l.jsx(iC,{})},{name:"Inclusión",icon:l.jsx(eQ,{})},{name:"Calendario Académico",icon:l.jsx(sC,{})},{name:"Muro de Anuncios",icon:l.jsx(uy,{})},{name:"Mensajería Interna",icon:l.jsx(dy,{})},{name:"Generador de Actas",icon:l.jsx(yT,{})}],[Yt.PROFESORADO]:[{name:"Planificación",icon:l.jsx(Z9,{})},{name:"Mis Acompañamientos",icon:l.jsx(W1e,{})},{name:"Recursos de Aprendizaje",icon:l.jsx($1e,{})},{name:"Análisis Taxonómico",icon:l.jsx(tQ,{})},{name:"Interdisciplinario",icon:l.jsx(wT,{})},{name:"Inclusión",icon:l.jsx(eQ,{})},{name:"Actividades Remotas",icon:l.jsx(G1e,{})},{name:"Evaluación de Aprendizajes",icon:l.jsx(yT,{})},{name:"Evaluaciones Formativas",icon:l.jsx(iC,{})},{name:"Calendario Académico",icon:l.jsx(sC,{})},{name:"Muro de Anuncios",icon:l.jsx(uy,{})},{name:"Mensajería Interna",icon:l.jsx(dy,{})},{name:"Generador de Actas",icon:l.jsx(J9,{})}],[Yt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:l.jsx(iC,{})},{name:"Asistencia Dual",icon:l.jsx(bT,{})},{name:"Pañol",icon:l.jsx(X1e,{})},{name:"Gestión de Empresas",icon:l.jsx(P1e,{})},{name:"Calendario Académico",icon:l.jsx(sC,{})},{name:"Muro de Anuncios",icon:l.jsx(uy,{})},{name:"Mensajería Interna",icon:l.jsx(dy,{})},{name:"Alternancia TP",icon:"🔄"},{name:"Generador de Actas",icon:l.jsx(yT,{})}],[Yt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:l.jsx(Z9,{})},{name:"Evaluación Formativa",icon:l.jsx(iC,{})},{name:"Tareas Interdisciplinarias",icon:l.jsx(wT,{})},{name:"Asistencia a Empresa",icon:l.jsx(bT,{})},{name:"Calendario Académico",icon:l.jsx(sC,{})},{name:"Muro de Anuncios",icon:l.jsx(uy,{})},{name:"Mensajería Interna",icon:l.jsx(dy,{})}]},rQ=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],oC=["Pendiente","En Proceso","Cumplida"],Gv=["1º Medio","2º Medio","3º Medio","4º Medio"],qi=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],ks=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],yF=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],O_=["Lunes","Martes","Miércoles","Jueves","Viernes"],wF=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],ebe={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},ux={[dn.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[dn.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[dn.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[dn.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},tbe=Object.values(vp),ET=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],CT=["Vinculado","Desvinculado","En proceso","Empresa"],Op=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],rbe=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],PS=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],Py=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],zZ=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],lC=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],nbe=["Mecánica Industrial","Mecánica Automotriz"],abe=["INACAP","UNAB","DUOC","Universidad de Las Américas"],sbe={"Mecánica Automotriz":["3ºA","3ºB","4ºA","4ºB"],"Mecánica Industrial":["3ºC","3ºD","4ºC","4ºD"]},ibe=["Pasantía","Visita","Certificación","Formación en empresa"],obe={"Mecánica Industrial":["Soldadura industrial","Mantenimiento de herramientas","Medición y verificación","Mecánica de banco","Torneado de piezas y conjuntos mecánicos","Fresado de piezas mecánicas","Taladrado de piezas mecánicas","Rectificado de piezas mecánicas","Fabricación asistida por computador (CNC)"],"Mecánica Automotriz":["Ajuste de motores","Lectura de planos y manuales técnicos","Manejo de residuos y desechos automotrices","Mantenimiento de sistemas de seguridad y confortabilidad","Mantenimiento de sistemas eléctricos y electrónicos","Mantenimiento de motores","Mantenimiento de sistemas hidráulicos y neumáticos","Mantenimiento de los sistemas de transmisión y frenos","Mantenimiento de sistemas de dirección y suspensión","Emprendimiento y empleabilidad"]},lbe={"Mecánica Automotriz":{"Ajuste de motores":["Reparar y probar el funcionamiento de motores (gasolina, diésel, gas e híbridos), incluyendo sistemas de control de emisiones, lubricación y refrigeración, usando herramientas e instrumentos apropiados y siguiendo especificaciones del fabricante."],"Lectura de planos y manuales técnicos":["Leer e interpretar información técnica (manuales, planos, diagramas y normas de emisiones) para resolver diagnósticos y fallas."],"Manejo de residuos y desechos automotrices":["Aplicar procedimientos y normativas de seguridad, higiene y cuidado ambiental en la manipulación y disposición de residuos y desechos automotrices."],"Mantenimiento de sistemas de seguridad y confortabilidad":["Diagnosticar, reparar y mantener sistemas de seguridad (frenos ABS, airbags) y confortabilidad (climatización, cierre centralizado, asientos eléctricos) según especificaciones técnicas."],"Mantenimiento de sistemas eléctricos y electrónicos":["Reemplazar, ajustar y probar sistemas eléctricos y electrónicos automotrices, siguiendo procedimientos y normas internacionales."],"Mantenimiento de motores":["Realizar mantenimiento preventivo y correctivo de motores y sus sistemas asociados, verificando tolerancias y parámetros operativos según especificaciones."],"Mantenimiento de sistemas hidráulicos y neumáticos":["Inspeccionar, diagnosticar y reparar sistemas hidráulicos y neumáticos de vehículos automotrices."],"Mantenimiento de los sistemas de transmisión y frenos":["Verificar, ajustar o reemplazar componentes de transmisión y frenos, según manual del fabricante."],"Mantenimiento de sistemas de dirección y suspensión":["Diagnosticar, alinear y corregir sistemas de dirección y suspensión, cumpliendo normas de seguridad."],"Emprendimiento y empleabilidad":["Desarrollar un proyecto o plan de negocio relacionado con el sector automotriz, aplicando conceptos de gestión, marketing y normativa vigente."]},"Mecánica Industrial":{"Soldadura industrial":["Ejecutar procesos de corte y soldadura (oxiacetileno, arco manual, TIG, MIG) en distintas posiciones y materiales, aplicando normas de seguridad, higiene y cuidado ambiental."],"Mantenimiento de herramientas":["Mantener y reparar herramientas manuales y de máquinas, asegurando su operatividad y prolongando su vida útil."],"Medición y verificación":["Utilizar instrumentos de medición y verificación para controlar dimensiones y tolerancias según planos y especificaciones técnicas."],"Mecánica de banco":["Realizar operaciones manuales de mecanizado, ajuste, limado, roscado y ensamblaje, siguiendo planos y tolerancias indicadas."],"Torneado de piezas y conjuntos mecánicos":["Operar tornos convencionales para fabricar piezas y conjuntos mecánicos, cumpliendo con las especificaciones técnicas y de seguridad."],"Fresado de piezas mecánicas":["Operar fresadoras para fabricar piezas mecánicas, seleccionando herramientas de corte y parámetros de mecanizado adecuados."],"Taladrado de piezas mecánicas":["Ejecutar operaciones de taladrado, escariado y roscado en taladros de banco o columna, cumpliendo especificaciones técnicas y de seguridad."],"Rectificado de piezas mecánicas":["Utilizar rectificadoras para mejorar el acabado y precisión dimensional de piezas mecánicas, cumpliendo tolerancias indicadas."],"Fabricación asistida por computador (CNC)":["Programar y operar máquinas CNC para fabricar piezas mecánicas con precisión, optimizando procesos y aplicando normas de seguridad."]}},cbe=({onLoginAttempt:e,onForgotPasswordRequest:t,error:r})=>{const[n,a]=k.useState(""),[s,i]=k.useState(""),[o,c]=k.useState("login"),u=h=>{h.preventDefault(),e(n,s)},d=h=>{h.preventDefault(),t(n),c("forgot_sent")},f=()=>o==="forgot"?l.jsxs("form",{onSubmit:d,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),l.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",l.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),l.jsx("button",{type:"button",onClick:()=>{c("login"),a("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):l.jsxs("form",{onSubmit:u,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:h=>a(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:s,onChange:h=>i(h.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:l.jsx("p",{children:r})}),l.jsx("div",{className:"text-sm text-center",children:l.jsx("button",{type:"button",onClick:()=>c("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return l.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(sP,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),l.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:f()}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},cC=({trigger:e,children:t,onOpen:r})=>{const[n,a]=k.useState(!1),s=k.useRef(null),i=()=>{const c=!n;a(c),c&&r&&r()},o=c=>{s.current&&!s.current.contains(c.target)&&a(!1)};return k.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),l.jsxs("div",{className:"relative",ref:s,children:[l.jsx("div",{onClick:i,children:e}),n&&l.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>a(!1),children:t})]})},nQ="usuariosLiceo",ube=({user:e,onClose:t,onSave:r})=>{const[n,a]=k.useState({nombreCompleto:e.nombreCompleto,email:e.email,fotoUrl:e.fotoUrl||""}),s=o=>{a({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const c={...e,...n};try{const u=localStorage.getItem(nQ);let d=u?JSON.parse(u):[];const f=d.findIndex(h=>h.id===e.id);f>-1?d[f]=c:d.push(c),localStorage.setItem(nQ,JSON.stringify(d)),r(c),t()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:l.jsxs("form",{onSubmit:i,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),l.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),l.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:s,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.profile})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},aQ="usuariosLiceo",dbe=({user:e,onClose:t,onSave:r})=>{const[n,a]=k.useState(""),[s,i]=k.useState(""),[o,c]=k.useState(null),u=d=>{if(d.preventDefault(),c(null),!n){c("La contraseña no puede estar en blanco.");return}if(n!==s){c("Las contraseñas no coinciden.");return}const f={...e,password:n};try{const h=localStorage.getItem(aQ);let p=h?JSON.parse(h):[];const g=p.findIndex(v=>v.id===e.id);g>-1?p[g]=f:p.push(f),localStorage.setItem(aQ,JSON.stringify(p)),r(f),t()}catch(h){console.error("Failed to save new password:",h),c("No se pudo guardar la nueva contraseña.")}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:l.jsxs("form",{onSubmit:u,children:[l.jsxs("div",{className:"p-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),l.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:e.email})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>a(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),l.jsx("div",{className:"mt-1",children:l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:s,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&l.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:l.jsx("p",{children:o})})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Abe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fbe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),sQ=e=>{const t=fbe(e);return t.charAt(0).toUpperCase()+t.slice(1)},$Z=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),hbe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mbe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pbe=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:s,iconNode:i,...o},c)=>k.createElement("svg",{ref:c,...mbe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:$Z("lucide",a),...!s&&!hbe(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,d])=>k.createElement(u,d)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=(e,t)=>{const r=k.forwardRef(({className:n,...a},s)=>k.createElement(pbe,{ref:s,iconNode:t,className:$Z(`lucide-${Abe(sQ(e))}`,`lucide-${e}`,n),...a}));return r.displayName=sQ(e),r};/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gbe=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],vbe=ur("activity",gbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xbe=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],bbe=ur("bell-ring",xbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ybe=[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]],wbe=ur("book-open-check",ybe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ebe=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],hh=ur("book-open",Ebe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cbe=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],GZ=ur("brain",Cbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _be=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],KZ=ur("briefcase",_be);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sbe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],RS=ur("building-2",Sbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nbe=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],kbe=ur("building",Nbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bbe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],Tbe=ur("calendar-check",Bbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jbe=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],yd=ur("calendar",jbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ibe=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ry=ur("chart-column",Ibe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fbe=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],Obe=ur("chart-pie",Fbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dbe=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],hw=ur("chevron-left",Dbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pbe=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qZ=ur("chevron-right",Pbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rbe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],kd=ur("circle-alert",Rbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lbe=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],iP=ur("circle-check-big",Lbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mbe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],eh=ur("circle-check",Mbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ube=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],iQ=ur("circle-plus",Ube);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qbe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]],Hbe=ur("clipboard-check",Qbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vbe=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],EF=ur("clipboard-list",Vbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zbe=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mw=ur("clock",zbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $be=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],o4=ur("download",$be);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gbe=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M16 16h.01",key:"1f9h7w"}],["path",{d:"M3 19a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8.5a.5.5 0 0 0-.769-.422l-4.462 2.844A.5.5 0 0 1 15 10.5v-2a.5.5 0 0 0-.769-.422L9.77 10.922A.5.5 0 0 1 9 10.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2z",key:"1iv0i2"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Kbe=ur("factory",Gbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qbe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Wbe=ur("file-check",qbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xbe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],Ybe=ur("file-spreadsheet",Xbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jbe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],GA=ur("file-text",Jbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zbe=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],oP=ur("funnel",Zbe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eye=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],oQ=ur("gauge",eye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tye=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Rx=ur("graduation-cap",tye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rye=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],nye=ur("hash",rye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aye=[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M5 2h14",key:"pdyrp9"}],["path",{d:"M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22",key:"1d314k"}],["path",{d:"M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2",key:"1vvvr6"}]],sye=ur("hourglass",aye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oye=ur("info",iye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lye=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],cye=ur("layout-dashboard",lye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uye=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],dye=ur("layers",uye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aye=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],lQ=ur("link-2",Aye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fye=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],hye=ur("list-checks",fye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mye=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],U0=ur("loader-circle",mye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pye=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],gye=ur("mail",pye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vye=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],LS=ur("map-pin",vye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xye=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],bye=ur("megaphone",xye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yye=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],wye=ur("menu",yye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eye=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Cye=ur("message-square",Eye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ye=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],CF=ur("pen-line",_ye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sye=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],MS=ur("pencil",Sye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nye=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],kye=ur("percent",Nye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bye=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],th=ur("plus",Bye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tye=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],jye=ur("puzzle",Tye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iye=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Fye=ur("rotate-ccw",Iye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oye=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],Dye=ur("route",Oye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pye=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],pw=ur("save",Pye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rye=[["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M18 5v16",key:"1ethyx"}],["path",{d:"m4 6 7.106-3.79a2 2 0 0 1 1.788 0L20 6",key:"zywc2d"}],["path",{d:"m6 11-3.52 2.147a1 1 0 0 0-.48.854V19a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a1 1 0 0 0-.48-.853L18 11",key:"1d4ql0"}],["path",{d:"M6 5v16",key:"1sn0nx"}],["circle",{cx:"12",cy:"9",r:"2",key:"1092wv"}]],_T=ur("school",Rye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lye=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],US=ur("search",Lye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mye=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Uye=ur("shield-check",Mye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qye=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],D_=ur("sparkles",Qye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hye=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],WZ=ur("square-pen",Hye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vye=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],_F=ur("square-plus",Vye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zye=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],$ye=ur("star",zye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gye=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],XZ=ur("target",Gye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kye=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Dd=ur("trash-2",Kye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qye=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],YZ=ur("trending-up",qye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wye=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],JZ=ur("upload",Wye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xye=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Yye=ur("user-minus",Xye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jye=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Zye=ur("user-plus",Jye);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ewe=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],QS=ur("user",ewe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const twe=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ou=ur("users",twe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rwe=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],ZZ=ur("video",rwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nwe=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],P_=ur("wrench",nwe);/**
 * @license lucide-react v0.537.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const awe=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],HS=ur("x",awe);async function swe(e){const t={...e,docenteEmailLower:e.docenteEmail?e.docenteEmail.toLowerCase():e.docenteEmailLower,leida:!1,createdAt:el()};return Object.keys(t).forEach(n=>t[n]===void 0&&delete t[n]),(await Un(It(tn,"notificaciones"),t)).id}function iwe(e,t){const r=[];let n=[],a=[];const s=()=>{const i=new Map;[...n,...a].forEach(c=>{c.id&&(i.has(c.id)||i.set(c.id,c))});const o=Array.from(i.values()).sort((c,u)=>{var h,p;const d=(h=c.createdAt)!=null&&h.toDate?c.createdAt.toDate().getTime():0;return((p=u.createdAt)!=null&&p.toDate?u.createdAt.toDate().getTime():0)-d});t(o)};if(e.email){const i=tr(It(tn,"notificaciones"),vn("docenteEmailLower","==",e.email.toLowerCase()),Rr("createdAt","desc"));r.push(gr(i,o=>{n=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}if(e.nombreCompleto){const i=tr(It(tn,"notificaciones"),vn("docenteNombre","==",e.nombreCompleto),Rr("createdAt","desc"));r.push(gr(i,o=>{a=o.docs.map(c=>({id:c.id,...c.data()})),s()}))}return()=>r.forEach(i=>i())}async function owe(e){const t=pr(tn,"notificaciones",e);await Ld(t,{leida:!0})}async function lwe(e){const t=pr(tn,"notificaciones",e);await ts(t)}const cQ="anunciosMuro",uQ="mensajesInternos",dQ="lir-read-status",cwe=({user:e})=>{if(e.fotoUrl)return l.jsx("img",{src:e.fotoUrl,alt:e.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const t=e.nombreCompleto||"",r=String(t).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return l.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},uwe=({currentUser:e,onLogout:t,onNavigate:r,onUserUpdate:n,onChangeProfile:a,canChangeProfile:s,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:c})=>{const[u,d]=k.useState([]),[f,h]=k.useState([]),[p,g]=k.useState(!1),[v,b]=k.useState(!1),[y,C]=k.useState([]),N=k.useCallback(()=>{try{const F=localStorage.getItem(`${dQ}-${e.id}`);return F?JSON.parse(F):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[e.id]),T=k.useCallback(F=>{try{localStorage.setItem(`${dQ}-${e.id}`,JSON.stringify(F))}catch(M){console.error("Failed to set read status:",M)}},[e.id]);k.useEffect(()=>{const F=JSON.parse(localStorage.getItem(cQ)||"[]"),M=N();d(F.filter(I=>!M.announcements.includes(I.id)));const D=JSON.parse(localStorage.getItem(uQ)||"[]");h(D.filter(I=>I.para===e.email).sort((I,U)=>new Date(U.fecha).getTime()-new Date(I.fecha).getTime()).slice(0,5))},[e.id,N,o]),k.useEffect(()=>{if(!(e!=null&&e.email))return;const F=iwe({email:e.email,nombreCompleto:e.nombreCompleto},M=>{const D=M.filter(I=>I.tipo&&(I.tipo.toLowerCase()==="pie"||I.tipo==="nueva_intervencion"));C(D)});return()=>F()},[e==null?void 0:e.email,e==null?void 0:e.nombreCompleto]);const S=()=>{const F=N(),M=JSON.parse(localStorage.getItem(cQ)||"[]").map(D=>D.id);F.announcements=M,T(F),d([])},B=()=>{const F=N(),D=JSON.parse(localStorage.getItem(uQ)||"[]").filter(I=>I.para===e.email).map(I=>I.id);F.messages=[...new Set([...F.messages,...D])],T(F),c()},w=y.filter(F=>!F.leida).length,_=F=>{var M;try{const D=(M=F.createdAt)!=null&&M.toDate?F.createdAt.toDate():new Date(F.createdAt);return D?D.toLocaleString("es-CL"):""}catch{return""}};return l.jsxs(l.Fragment,{children:[l.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:l.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:l.jsx(L1e,{})}),l.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[l.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[l.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),l.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),l.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),l.jsx("div",{className:"flex-1 flex justify-center",children:l.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:l.jsx(M1e,{})})}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex items-center gap-3",children:l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),l.jsx(cC,{onOpen:S,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Anuncios",children:[l.jsx(uy,{}),u.length>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),l.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(F=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsx("p",{className:"font-bold dark:text-slate-200",children:F.titulo}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:F.mensaje})]},F.id)),u.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),l.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),l.jsx(cC,{trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-700 dark:bg-sky-900/30 dark:hover:bg-sky-900/40 dark:text-sky-300 transition-colors",title:"Notificaciones PIE",children:[l.jsx(jye,{className:"w-5 h-5"}),w>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:w})]}),children:l.jsxs("div",{className:"p-2 w-80",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Notificaciones PIE"}),l.jsxs("ul",{className:"mt-1 max-h-80 overflow-y-auto divide-y dark:divide-slate-700",children:[y.length===0&&l.jsx("li",{className:"p-3 text-sm text-slate-500 dark:text-slate-400",children:"No hay notificaciones."}),y.map(F=>l.jsx("li",{className:"p-2 text-sm",children:l.jsxs("div",{className:"flex justify-between items-start gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-semibold text-slate-800 dark:text-slate-200",children:F.titulo}),l.jsx("div",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-line",children:F.mensaje}),F.estudianteNombre&&l.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Estudiante: ",l.jsx("b",{children:F.estudianteNombre})]}),l.jsx("div",{className:"text-[11px] text-slate-400 mt-1",children:_(F)})]}),l.jsxs("div",{className:"flex-shrink-0 flex flex-col gap-1",children:[!F.leida&&l.jsx("button",{onClick:()=>F.id&&owe(F.id),className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded hover:bg-green-200",children:"Marcar leída"}),l.jsx("button",{onClick:()=>F.id&&lwe(F.id),className:"text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded hover:bg-red-200",children:"Eliminar"})]})]})},F.id))]})]})}),l.jsx(cC,{onOpen:B,trigger:l.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[l.jsx(dy,{}),o>0&&l.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:l.jsxs("div",{className:"p-2",children:[l.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),l.jsxs("ul",{className:"mt-1",children:[f.slice(0,3).map(F=>l.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[l.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",F.de]}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:F.asunto})]},F.id)),f.length===0&&l.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),l.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),l.jsx(cC,{trigger:l.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:l.jsx(cwe,{user:e})}),children:l.jsxs("div",{className:"p-2",children:[l.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:e.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:e.profile})]}),l.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[l.jsx("li",{children:l.jsx("button",{onClick:()=>g(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),l.jsx("li",{children:l.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),s&&l.jsx("li",{children:l.jsx("button",{onClick:a,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),l.jsx("li",{children:l.jsx("button",{onClick:t,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),p&&l.jsx(ube,{user:e,onClose:()=>g(!1),onSave:n}),v&&l.jsx(dbe,{user:e,onClose:()=>b(!1),onSave:n})]})},dwe={apiKey:void 0,authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},lP=E7().length?E7()[0]:rD(dwe),bt=LD(lP),SF=RY(lP),Awe=nP(lP),x2="reemplazos_docentes",fwe="usuarios",cP=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaActualizacion:((s=(a=t.fechaActualizacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaActualizacion}},hwe=e=>{const t=e.data();return{id:e.id,...t}},mwe=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:mr.fromDate(new Date),fechaActualizacion:mr.fromDate(new Date)};return(await Un(It(bt,x2),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},pwe=async(e,t)=>{try{const r=pr(bt,x2,e),n=await g2(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar este reemplazo");await ts(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},gwe=(e,t,r=50)=>{try{const n=tr(It(bt,x2),vn("userId","==",e),Rr("diaAusencia","desc"),Nd(r));return gr(n,a=>{const s=a.docs.map(cP);t(s)},a=>{console.error("Error en suscripción a reemplazos:",a),t([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},vwe=e=>{try{const t=tr(It(bt,fwe),vn("profile","==",Yt.PROFESORADO));return gr(t,n=>{const a=n.docs.map(hwe);e(a)},n=>{console.error("Error al obtener la lista de profesores:",n),e([])})}catch(t){return console.error("Error al crear la suscripción de profesores:",t),()=>{}}},xwe=async e=>{try{const t=tr(It(bt,x2),vn("userId","==",e)),n=(await Pa(t)).docs.map(cP),a=n.length,s=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:a,horasRealizadas:s,horasCubiertas:i,porcentajeRealizadas:a>0?s/a*100:0}}catch(t){throw console.error("Error al obtener estadísticas:",t),new Error("No se pudieron obtener las estadísticas")}},bwe=async(e,t)=>{try{if(!t.trim())return[];const r=tr(It(bt,x2),vn("userId","==",e),Rr("diaAusencia","desc"),Nd(100)),a=(await Pa(r)).docs.map(cP),s=t.toLowerCase();return a.filter(i=>i.docenteAusente.toLowerCase().includes(s)||i.docenteReemplazante.toLowerCase().includes(s)||i.curso.toLowerCase().includes(s)||i.diaAusencia.includes(s)||i.asignaturaAusente.toLowerCase().includes(s)||i.asignaturaReemplazante.toLowerCase().includes(s))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},ywe=Array.from({length:12},(e,t)=>t+1),AQ={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},wwe=e=>{const[t,r]=k.useState([]),[n,a]=k.useState(!0),[s,i]=k.useState(null);k.useEffect(()=>e?gwe(e,f=>{r(f),a(!1)}):void 0,[e]);const o=k.useCallback(async d=>{try{return i(null),await mwe(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al guardar"),f}},[e]),c=k.useCallback(async d=>{try{i(null),await pwe(d,e)}catch(f){throw i(f instanceof Error?f.message:"Error al eliminar"),f}},[e]),u=k.useCallback(async d=>{try{return i(null),d.trim()?await bwe(e,d):t}catch(f){return i(f instanceof Error?f.message:"Error en la búsqueda"),[]}},[e,t]);return{reemplazos:t,loading:n,error:s,save:o,remove:c,search:u}},Ewe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0);k.useEffect(()=>vwe(i=>{t(i),n(!1)}),[]);const a=k.useMemo(()=>e.map(s=>s.nombreCompleto).sort(),[e]);return{profesores:e,profesorNames:a,loading:r}},ov=({label:e,icon:t,children:r})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:e}),l.jsxs("div",{className:"relative",children:[t&&l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:t}),r]})]}),Cwe="inline-flex items-center justify-center rounded-xl border text-sm px-3 py-2 transition-all",_we="bg-emerald-50 border-emerald-200 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-200 dark:border-emerald-700",Swe="bg-white border-slate-200 text-slate-600 hover:bg-slate-50 dark:bg-slate-800 dark:text-slate-300 dark:border-slate-700 dark:hover:bg-slate-700",v0=({title:e,value:t,icon:r})=>l.jsxs("div",{className:"flex items-center gap-4 rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"grid place-items-center h-12 w-12 rounded-xl bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200",children:r}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs uppercase tracking-wide text-slate-500 dark:text-slate-400",children:e}),l.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:t})]})]}),Nwe=({data:e})=>{const t=Math.max(1,...e.map(r=>r.value));return l.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-4 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-200",children:"Distribución (graficable)"}),l.jsx("div",{className:"grid gap-3",children:e.map(r=>l.jsxs("div",{children:[l.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:[l.jsx("span",{children:r.label}),l.jsx("span",{children:r.value})]}),l.jsx("div",{className:"h-2 w-full rounded bg-slate-200/60 dark:bg-slate-700",children:l.jsx("div",{className:"h-2 rounded bg-slate-900 dark:bg-amber-500",style:{width:`${r.value/t*100}%`}})})]},r.label))})]})},kwe=({userId:e,reemplazos:t})=>{const[r,n]=k.useState(null),[a,s]=k.useState(!1),i=k.useCallback(async()=>{try{s(!0);const b=await xwe(e);n(b)}finally{s(!1)}},[e]);k.useEffect(()=>{e&&i()},[e,i]);const o=new Date,c=o.getMonth(),u=o.getFullYear(),d=k.useMemo(()=>(t||[]).filter(b=>{const y=new Date(b.diaAusencia+"T00:00:00");return y.getMonth()===c&&y.getFullYear()===u}),[t,c,u]),f=new Set(d.map(b=>b.docenteAusente).filter(Boolean)),h=new Set(d.map(b=>b.docenteReemplazante).filter(Boolean)),p=new Set(d.map(b=>b.curso).filter(Boolean)),g=new Set(d.map(b=>b.asignaturaAusente).filter(Boolean)),v=[{label:"Prof. ausentes",value:f.size},{label:"Prof. que reemplazan",value:h.size},{label:"Cursos",value:p.size},{label:"Asignaturas ausentes",value:g.size}];return a||!r?l.jsx("div",{className:"rounded-xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-500",children:[l.jsx(U0,{className:"h-5 w-5 animate-spin"}),"Cargando estadísticas…"]})}):l.jsxs("div",{className:"grid gap-4",children:[l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(v0,{title:"Total",value:r.totalReemplazos,icon:l.jsx(bbe,{className:"h-6 w-6"})}),l.jsx(v0,{title:"Realizadas",value:r.horasRealizadas,icon:l.jsx(eh,{className:"h-6 w-6"})}),l.jsx(v0,{title:"Cubiertas",value:r.horasCubiertas,icon:l.jsx(Hbe,{className:"h-6 w-6"})}),l.jsx(v0,{title:"Efectividad",value:`${r.porcentajeRealizadas.toFixed(1)}%`,icon:l.jsx(kye,{className:"h-6 w-6"})})]}),l.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[l.jsx(v0,{title:"Profesores ausentes",value:f.size,icon:l.jsx(Yye,{className:"h-6 w-6"})}),l.jsx(v0,{title:"Profesores que reemplazan",value:h.size,icon:l.jsx(Zye,{className:"h-6 w-6"})}),l.jsx(v0,{title:"Cursos (únicos)",value:p.size,icon:l.jsx(Ou,{className:"h-6 w-6"})}),l.jsx(v0,{title:"Asignaturas ausentes",value:g.size,icon:l.jsx(hh,{className:"h-6 w-6"})})]}),l.jsx(Nwe,{data:v})]})},Bwe=({currentUser:e})=>{const t=e.email||e.id||"",{reemplazos:r,save:n,remove:a,search:s,loading:i,error:o}=wwe(t),{profesorNames:c,loading:u}=Ewe(),[d,f]=k.useState(AQ),[h,p]=k.useState(""),[g,v]=k.useState([]),[b,y]=k.useState(null),[C,N]=k.useState(!1),[T,S]=k.useState(!1);k.useEffect(()=>{(async()=>{if(!h.trim())return v(r);S(!0);try{const I=await s(h);v(I)}finally{S(!1)}})()},[r,h,s]);const B=k.useCallback(D=>{const{name:I,value:U}=D.target;f(P=>({...P,[I]:U}))},[]),w=k.useCallback(D=>{f(I=>{const P=I.bloquesAfectados.includes(D)?I.bloquesAfectados.filter(X=>X!==D):[...I.bloquesAfectados,D].sort((X,H)=>X-H);return{...I,bloquesAfectados:P}})},[]),_=k.useCallback(async D=>{D.preventDefault(),y(null),N(!0);const{docenteAusente:I,asignaturaAusente:U,curso:P,diaAusencia:X,bloquesAfectados:H,docenteReemplazante:Y,asignaturaReemplazante:V}=d;if(!I||!U||!P||!X||!Y||!V||H.length===0){y("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),N(!1);return}if(I===Y){y("El docente ausente y el reemplazante no pueden ser la misma persona."),N(!1);return}try{const z=U.trim().toLowerCase()===V.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",G={...d,resultado:z};await n(G),f(AQ);const re=document.createElement("div");re.className="fixed top-4 right-4 z-50 rounded-lg bg-emerald-600 px-4 py-2 text-white shadow-lg",re.textContent=z==="Hora realizada"?"✅ Reemplazo registrado — Hora realizada":"⚠️ Reemplazo registrado — Hora cubierta, no realizada",document.body.appendChild(re),setTimeout(()=>{document.body.contains(re)&&document.body.removeChild(re)},2500)}catch(z){console.error(z),y("Error al guardar el reemplazo. Intente nuevamente.")}finally{N(!1)}},[d,n]),F=k.useCallback(async D=>{if(window.confirm("¿Eliminar este registro?"))try{await a(D)}catch(I){console.error(I),alert("No se pudo eliminar. Intente nuevamente.")}},[a]),M="w-full rounded-lg border bg-white px-10 py-2.5 text-slate-700 placeholder-slate-400 shadow-sm outline-none transition focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100";return!e||!e.email&&!e.id?l.jsx("div",{className:"grid place-items-center rounded-xl border border-slate-200 bg-white p-8 text-center shadow-sm dark:border-slate-700 dark:bg-slate-800",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Error: Usuario no autenticado."})}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"mb-1 text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Estadísticas del Mes"}),l.jsx(kwe,{userId:t,reemplazos:r})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Registro de Inasistencias y Reemplazos"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Complete el formulario para registrar una nueva suplencia."})]}),u?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-8 text-slate-500",children:[l.jsx(U0,{className:"h-5 w-5 animate-spin"})," Cargando profesores…"]}):l.jsxs("form",{onSubmit:_,className:"space-y-8",children:[l.jsxs("div",{className:"grid gap-8 md:grid-cols-2",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ou,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Ausente"})]}),l.jsx(ov,{label:"Nombre",icon:l.jsx(Rx,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:B,className:M,required:!0,disabled:C,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(D=>l.jsx("option",{value:D,children:D},D))]})}),l.jsx(ov,{label:"Asignatura",icon:l.jsx(hh,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:B,className:M,required:!0,disabled:C,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(D=>l.jsx("option",{value:D,children:D},D))]})}),l.jsx(ov,{label:"Curso",icon:l.jsx(Ou,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"curso",value:d.curso,onChange:B,className:M,required:!0,disabled:C,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),ks.map(D=>l.jsx("option",{value:D,children:D},D))]})}),l.jsx(ov,{label:"Día de ausencia",icon:l.jsx(yd,{className:"h-5 w-5"}),children:l.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:B,className:M,required:!0,disabled:C})}),l.jsxs("div",{children:[l.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[l.jsx(mw,{className:"h-5 w-5 text-slate-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Bloques afectados"})]}),l.jsx("div",{className:"grid grid-cols-4 gap-2 sm:grid-cols-6",children:ywe.map(D=>{const I=d.bloquesAfectados.includes(D);return l.jsx("button",{type:"button",onClick:()=>w(D),disabled:C,className:`${Cwe} ${I?_we:Swe}`,"aria-pressed":I,children:D},D)})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ou,{className:"h-5 w-5 text-slate-400"}),l.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-slate-200",children:"Docente Reemplazante"})]}),l.jsx(ov,{label:"Nombre",icon:l.jsx(Rx,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:B,className:M,required:!0,disabled:C,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),c.map(D=>l.jsx("option",{value:D,children:D},D))]})}),l.jsx(ov,{label:"Asignatura",icon:l.jsx(hh,{className:"h-5 w-5"}),children:l.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:B,className:M,required:!0,disabled:C,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(D=>l.jsx("option",{value:D,children:D},D))]})}),d.asignaturaAusente&&d.asignaturaReemplazante&&l.jsxs("div",{className:"mt-4 rounded-xl border-2 border-dashed border-slate-200 p-4 dark:border-slate-700",children:[l.jsx("div",{className:"mb-2 text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Vista previa del resultado"}),l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(eh,{className:"h-4 w-4"}),d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Hora realizada":"Hora cubierta, no realizada"]}),l.jsx("p",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden.":"Las asignaturas no coinciden."})]})]})]}),(b||o)&&l.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-900/20 dark:text-red-300",children:b||o}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:C||u,className:"inline-flex items-center gap-2 rounded-xl bg-slate-900 px-5 py-2.5 font-semibold text-white shadow hover:bg-slate-800 focus:outline-none focus:ring-2 focus:ring-amber-400 disabled:opacity-50 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:C?l.jsxs(l.Fragment,{children:[l.jsx(U0,{className:"h-4 w-4 animate-spin"})," Registrando…"]}):l.jsxs(l.Fragment,{children:[l.jsx(pw,{className:"h-4 w-4"})," Registrar Reemplazo"]})})})]})]}),l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-6 shadow-sm dark:border-slate-700 dark:bg-slate-800",children:[l.jsxs("div",{className:"mb-4 flex items-center justify-between gap-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:"Historial de Reemplazos"}),l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3 text-slate-400",children:T?l.jsx(U0,{className:"h-5 w-5 animate-spin"}):l.jsx(US,{className:"h-5 w-5"})}),l.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)…",value:h,onChange:D=>p(D.target.value),className:M,disabled:T})]})]}),i?l.jsxs("div",{className:"flex items-center justify-center gap-2 py-10 text-slate-500",children:[l.jsx(U0,{className:"h-5 w-5 animate-spin"})," Cargando reemplazos…"]}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Fecha","Curso","Docente Ausente","Docente Reemplazante","Bloques","Resultado","Acciones"].map(D=>l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:D},D))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 bg-white dark:divide-slate-700 dark:bg-slate-800",children:g.length>0?g.map(D=>l.jsxs("tr",{className:"transition-colors hover:bg-slate-50 dark:hover:bg-slate-700/40",children:[l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-200",children:new Date(D.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:D.curso}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[D.docenteAusente,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:D.asignaturaAusente})]}),l.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium text-slate-900 dark:text-slate-100",children:[D.docenteReemplazante,l.jsx("div",{className:"text-xs font-normal text-slate-500 dark:text-slate-400",children:D.asignaturaReemplazante})]}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-slate-700 dark:text-slate-300",children:D.bloquesAfectados.join(", ")}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsxs("span",{className:`inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold ${D.resultado==="Hora realizada"?"bg-emerald-100 text-emerald-800 dark:bg-emerald-900/30 dark:text-emerald-200":"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-200"}`,children:[l.jsx(eh,{className:"h-4 w-4"}),D.resultado]})}),l.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:l.jsx("button",{onClick:()=>F(D.id),title:"Eliminar registro",className:"rounded-full p-2 text-red-600 hover:bg-red-50 hover:text-red-700 dark:text-red-300 dark:hover:bg-red-900/30",disabled:C,children:l.jsx(Dd,{className:"h-4 w-4"})})})]},D.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:h?"No se encontraron resultados para tu búsqueda.":"Aún no hay registros."})})})]}),g.length>0&&!h&&l.jsxs("div",{className:"mt-4 text-center text-sm text-slate-500 dark:text-slate-400",children:["Mostrando los últimos ",g.length," registros"]})]})]})]})},Twe=e=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const t=It(tn,"reemplazos"),r=tr(t,Rr("fecha","desc"));return gr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar reemplazos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a reemplazos:",t),t}},jwe=e=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const t=It(tn,"acompanamientos"),r=tr(t,Rr("fecha","desc"));return gr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar acompañamientos:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a acompañamientos:",t),t}},Iwe=e=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const t=It(tn,"calendar_events"),r=tr(t,Rr("date","asc"));return gr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar eventos del calendario:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",t),t}},bA=({title:e,value:t,description:r,isLoading:n=!1})=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),n?l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:t}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),op=({title:e,data:t,colorClass:r,valueFormatter:n=s=>String(s),isLoading:a=!1})=>{const s=k.useMemo(()=>t.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[t]),i=k.useMemo(()=>Math.max(...s,1),[s]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):l.jsx("div",{className:"space-y-4",children:t.length>0?t.sort((o,c)=>(typeof c.value=="number"?c.value:0)-(typeof o.value=="number"?o.value:0)).map((o,c)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+c)}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},Fwe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState([]),[i,o]=k.useState(!0),[c,u]=k.useState(null);return k.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const f=3,h=()=>{d++,d>=f&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const p=Twe(b=>{t(b),h()}),g=jwe(b=>{n(b),h()}),v=Iwe(b=>{s(b),h()});return()=>{p(),g(),v()}}catch(p){console.error("❌ Error al configurar suscripciones del dashboard:",p),u(p instanceof Error?p.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:e,acompanamientos:r,calendarEvents:a,loading:i,error:c}},Owe=({currentUser:e})=>{var f,h;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",e),console.log("🔍 Dashboard - currentUser.profile:",e==null?void 0:e.profile),console.log("🔍 Dashboard - Verificación de perfil:",(e==null?void 0:e.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(e==null?void 0:e.profile)),console.log("🔍 Dashboard - Profile length:",(f=e==null?void 0:e.profile)==null?void 0:f.length),console.log("🔍 Dashboard - Profile con comillas:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((h=e==null?void 0:e.profile)==null?void 0:h.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:t,acompanamientos:r,calendarEvents:n,loading:a,error:s}=Fwe(),[i,o]=k.useState(Py);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:t.length,acompanamientos:r.length,calendarEvents:n.length,loading:a,error:s,currentUser:e==null?void 0:e.profile}),k.useEffect(()=>{try{const p=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(p?JSON.parse(p):Py)}catch(p){console.error("Error al leer rúbrica personalizada",p),o(Py)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!e),console.log("🔍 Dashboard - profile value:",`"${e==null?void 0:e.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(e==null?void 0:e.profile)==="SUBDIRECCION"),!e)return console.log("❌ Dashboard - currentUser es null/undefined"),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(e.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",e.profile),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),l.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[l.jsx("p",{children:l.jsx("strong",{children:"Debug Info:"})}),l.jsxs("p",{children:['Su perfil actual: "',e.profile,'"']}),l.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),l.jsxs("p",{children:["Usuario: ",e.email||e.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),s)return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),l.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:s}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const c=k.useMemo(()=>{const p=t.length;if(p===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const g=t.filter(S=>S.resultado==="Hora realizada").length,v=p-g,b=`${(g/p*100).toFixed(1)}%`,y=(S,B)=>S.reduce((w,_)=>{const F=_[B];return typeof F=="string"&&(w[F]=(w[F]||0)+1),w},{}),C=y(t,"docenteAusente"),N=y(t,"docenteReemplazante"),T=y(t,"curso");return{totalInasistencias:p,horasRealizadas:g,horasCubiertas:v,tasaCobertura:b,inasistenciasPorDocente:Object.entries(C).map(([S,B])=>({label:S,value:B})),reemplazosPorDocente:Object.entries(N).map(([S,B])=>({label:S,value:B})),inasistenciasPorCurso:Object.entries(T).map(([S,B])=>({label:S,value:B})),distribucionResultados:[{label:"Hora Realizada",value:g},{label:"Hora Cubierta",value:v}]}},[t]),u=k.useMemo(()=>{const p=r.length;if(p===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const g=new Map;i.forEach(B=>{B.criteria.forEach(w=>{g.set(w.name,B.domain)})});let v=0,b=0;const y={},C={};r.forEach(B=>{y[B.docente]||(y[B.docente]={total:0,count:0}),Object.entries(B.rubricaResultados).forEach(([w,_])=>{v+=_,b++,y[B.docente].total+=_,y[B.docente].count++;const F=g.get(w);F&&(C[F]||(C[F]={total:0,count:0}),C[F].total+=_,C[F].count++)})});const N=b>0?(v/b).toFixed(2):"N/A",T=Object.entries(y).map(([B,w])=>({label:B,value:w.count>0?(w.total/w.count).toFixed(2):0})),S=Object.entries(C).map(([B,w])=>({label:B,value:w.count>0?(w.total/w.count).toFixed(2):0}));return{totalAcompanamientos:p,promedioGeneral:N,desempenoPorDocente:T,desempenoPorDominio:S}},[r,i]),d=k.useMemo(()=>{const p={[dn.EVALUACION]:0,[dn.ACTO]:0,[dn.ACTIVIDAD_FOCALIZADA]:0,[dn.SALIDA_PEDAGOGICA]:0};for(const v of n)p.hasOwnProperty(v.type)&&p[v.type]++;const g=Object.entries(p).map(([v,b])=>({label:ux[v].label,value:b}));return{totalEvaluaciones:p[dn.EVALUACION],totalActos:p[dn.ACTO],totalActividadesFocalizadas:p[dn.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:p[dn.SALIDA_PEDAGOGICA],distribucionEventos:g}},[n]);return a?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):c.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[l.jsx("span",{className:"text-6xl mb-4",children:"📊"}),l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),l.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[l.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),l.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),l.jsx("p",{children:"• Calendario Académico"})]})]}):l.jsxs("div",{className:"space-y-12 animate-fade-in",children:[l.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[l.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),l.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),l.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),t.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(bA,{title:"Total Inasistencias",value:c.totalInasistencias,description:"Registros totales",isLoading:a}),l.jsx(bA,{title:"Horas Realizadas",value:c.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:a}),l.jsx(bA,{title:"Horas Cubiertas",value:c.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:a}),l.jsx(bA,{title:"Tasa de Cobertura Efectiva",value:c.tasaCobertura,description:"% de horas realizadas",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(op,{title:"Inasistencias por Docente",data:c.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:a}),l.jsx(op,{title:"Reemplazos por Docente",data:c.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:a}),l.jsx(op,{title:"Inasistencias por Curso",data:c.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:a}),l.jsx(op,{title:"Distribución de Resultados",data:c.distribucionResultados,colorClass:"bg-green-400",isLoading:a})]})]}),r.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(bA,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:a}),l.jsx(bA,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(op,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a}),l.jsx(op,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:p=>Number(p).toFixed(2),isLoading:a})]})]}),n.length>0&&l.jsxs("div",{className:"space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(bA,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:a}),l.jsx(bA,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:a}),l.jsx(bA,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:a}),l.jsx(bA,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:a})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsx(op,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),a?l.jsxs("div",{className:"flex justify-center items-center py-8",children:[l.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),l.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(p=>new Date(p.date)>=new Date).slice(0,5).map((p,g)=>{var v,b;return l.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:p.responsables||"Evento sin título"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(p.date).toLocaleDateString("es-CL")}),p.ubicacion&&l.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",p.ubicacion]})]}),l.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((v=ux[p.type])==null?void 0:v.color)||"bg-gray-100 text-gray-800"}`,children:((b=ux[p.type])==null?void 0:b.label)||p.type})]})},p.id||g)}),n.filter(p=>new Date(p.date)>=new Date).length===0&&l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:t.length+r.length+n.length}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...t.map(p=>p.docenteAusente),...r.map(p=>p.docente)]).size}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(t.filter(p=>p.resultado==="Hora realizada").length/Math.max(t.length,1)*100),"%"]}),l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),l.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[l.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),l.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var fQ;(function(e){e.STRING="string",e.NUMBER="number",e.INTEGER="integer",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object"})(fQ||(fQ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hQ;(function(e){e.LANGUAGE_UNSPECIFIED="language_unspecified",e.PYTHON="python"})(hQ||(hQ={}));var mQ;(function(e){e.OUTCOME_UNSPECIFIED="outcome_unspecified",e.OUTCOME_OK="outcome_ok",e.OUTCOME_FAILED="outcome_failed",e.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(mQ||(mQ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pQ=["user","model","function","system"];var gQ;(function(e){e.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",e.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",e.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",e.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",e.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",e.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(gQ||(gQ={}));var vQ;(function(e){e.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",e.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",e.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",e.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",e.BLOCK_NONE="BLOCK_NONE"})(vQ||(vQ={}));var xQ;(function(e){e.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",e.NEGLIGIBLE="NEGLIGIBLE",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH"})(xQ||(xQ={}));var bQ;(function(e){e.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",e.SAFETY="SAFETY",e.OTHER="OTHER"})(bQ||(bQ={}));var Ly;(function(e){e.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",e.STOP="STOP",e.MAX_TOKENS="MAX_TOKENS",e.SAFETY="SAFETY",e.RECITATION="RECITATION",e.LANGUAGE="LANGUAGE",e.BLOCKLIST="BLOCKLIST",e.PROHIBITED_CONTENT="PROHIBITED_CONTENT",e.SPII="SPII",e.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",e.OTHER="OTHER"})(Ly||(Ly={}));var yQ;(function(e){e.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",e.RETRIEVAL_QUERY="RETRIEVAL_QUERY",e.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",e.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",e.CLASSIFICATION="CLASSIFICATION",e.CLUSTERING="CLUSTERING"})(yQ||(yQ={}));var wQ;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.AUTO="AUTO",e.ANY="ANY",e.NONE="NONE"})(wQ||(wQ={}));var EQ;(function(e){e.MODE_UNSPECIFIED="MODE_UNSPECIFIED",e.MODE_DYNAMIC="MODE_DYNAMIC"})(EQ||(EQ={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class lv extends qo{constructor(t,r){super(t),this.response=r}}class eee extends qo{constructor(t,r,n,a){super(t),this.status=r,this.statusText=n,this.errorDetails=a}}class Z0 extends qo{}class tee extends qo{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dwe="https://generativelanguage.googleapis.com",Pwe="v1beta",Rwe="0.24.1",Lwe="genai-js";var eg;(function(e){e.GENERATE_CONTENT="generateContent",e.STREAM_GENERATE_CONTENT="streamGenerateContent",e.COUNT_TOKENS="countTokens",e.EMBED_CONTENT="embedContent",e.BATCH_EMBED_CONTENTS="batchEmbedContents"})(eg||(eg={}));class Mwe{constructor(t,r,n,a,s){this.model=t,this.task=r,this.apiKey=n,this.stream=a,this.requestOptions=s}toString(){var t,r;const n=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||Pwe;let s=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||Dwe}/${n}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function Uwe(e){const t=[];return e!=null&&e.apiClient&&t.push(e.apiClient),t.push(`${Lwe}/${Rwe}`),t.join(" ")}async function Qwe(e){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",Uwe(e.requestOptions)),r.append("x-goog-api-key",e.apiKey);let n=(t=e.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(a){throw new Z0(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${a.message}`)}for(const[a,s]of n.entries()){if(a==="x-goog-api-key")throw new Z0(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new Z0(`Header name ${a} can only be set using the apiClient field`);r.append(a,s)}}return r}async function Hwe(e,t,r,n,a,s){const i=new Mwe(e,t,r,n,s);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},Gwe(s)),{method:"POST",headers:await Qwe(i),body:a})}}async function b2(e,t,r,n,a,s={},i=fetch){const{url:o,fetchOptions:c}=await Hwe(e,t,r,n,a,s);return Vwe(o,c,i)}async function Vwe(e,t,r=fetch){let n;try{n=await r(e,t)}catch(a){zwe(a,e)}return n.ok||await $we(n,e),n}function zwe(e,t){let r=e;throw r.name==="AbortError"?(r=new tee(`Request aborted when fetching ${t.toString()}: ${e.message}`),r.stack=e.stack):e instanceof eee||e instanceof Z0||(r=new qo(`Error fetching from ${t.toString()}: ${e.message}`),r.stack=e.stack),r}async function $we(e,t){let r="",n;try{const a=await e.json();r=a.error.message,a.error.details&&(r+=` ${JSON.stringify(a.error.details)}`,n=a.error.details)}catch{}throw new eee(`Error fetching from ${t.toString()}: [${e.status} ${e.statusText}] ${r}`,e.status,e.statusText,n)}function Gwe(e){const t={};if((e==null?void 0:e.signal)!==void 0||(e==null?void 0:e.timeout)>=0){const r=new AbortController;(e==null?void 0:e.timeout)>=0&&setTimeout(()=>r.abort(),e.timeout),e!=null&&e.signal&&e.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(e){return e.text=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),R_(e.candidates[0]))throw new lv(`${k0(e)}`,e);return Kwe(e)}else if(e.promptFeedback)throw new lv(`Text not available. ${k0(e)}`,e);return""},e.functionCall=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),R_(e.candidates[0]))throw new lv(`${k0(e)}`,e);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),CQ(e)[0]}else if(e.promptFeedback)throw new lv(`Function call not available. ${k0(e)}`,e)},e.functionCalls=()=>{if(e.candidates&&e.candidates.length>0){if(e.candidates.length>1&&console.warn(`This response had ${e.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),R_(e.candidates[0]))throw new lv(`${k0(e)}`,e);return CQ(e)}else if(e.promptFeedback)throw new lv(`Function call not available. ${k0(e)}`,e)},e}function Kwe(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.text&&s.push(i.text),i.executableCode&&s.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&s.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function CQ(e){var t,r,n,a;const s=[];if(!((r=(t=e.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const i of(a=(n=e.candidates)===null||n===void 0?void 0:n[0].content)===null||a===void 0?void 0:a.parts)i.functionCall&&s.push(i.functionCall);if(s.length>0)return s}const qwe=[Ly.RECITATION,Ly.SAFETY,Ly.LANGUAGE];function R_(e){return!!e.finishReason&&qwe.includes(e.finishReason)}function k0(e){var t,r,n;let a="";if((!e.candidates||e.candidates.length===0)&&e.promptFeedback)a+="Response was blocked",!((t=e.promptFeedback)===null||t===void 0)&&t.blockReason&&(a+=` due to ${e.promptFeedback.blockReason}`),!((r=e.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(a+=`: ${e.promptFeedback.blockReasonMessage}`);else if(!((n=e.candidates)===null||n===void 0)&&n[0]){const s=e.candidates[0];R_(s)&&(a+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(a+=`: ${s.finishMessage}`))}return a}function gw(e){return this instanceof gw?(this.v=e,this):new gw(e)}function Wwe(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,s=[];return a={},i("next"),i("throw"),i("return"),a[Symbol.asyncIterator]=function(){return this},a;function i(h){n[h]&&(a[h]=function(p){return new Promise(function(g,v){s.push([h,p,g,v])>1||o(h,p)})})}function o(h,p){try{c(n[h](p))}catch(g){f(s[0][3],g)}}function c(h){h.value instanceof gw?Promise.resolve(h.value.v).then(u,d):f(s[0][2],h)}function u(h){o("next",h)}function d(h){o("throw",h)}function f(h,p){h(p),s.shift(),s.length&&o(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Q=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Xwe(e){const t=e.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=Zwe(t),[n,a]=r.tee();return{stream:Jwe(n),response:Ywe(a)}}async function Ywe(e){const t=[],r=e.getReader();for(;;){const{done:n,value:a}=await r.read();if(n)return uP(e2e(t));t.push(a)}}function Jwe(e){return Wwe(this,arguments,function*(){const r=e.getReader();for(;;){const{value:n,done:a}=yield gw(r.read());if(a)break;yield yield gw(uP(n))}})}function Zwe(e){const t=e.getReader();return new ReadableStream({start(n){let a="";return s();function s(){return t.read().then(({value:i,done:o})=>{if(o){if(a.trim()){n.error(new qo("Failed to parse stream"));return}n.close();return}a+=i;let c=a.match(_Q),u;for(;c;){try{u=JSON.parse(c[1])}catch{n.error(new qo(`Error parsing JSON response: "${c[1]}"`));return}n.enqueue(u),a=a.substring(c[0].length),c=a.match(_Q)}return s()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new tee("Request aborted when reading from the stream"):o=new qo("Error reading from the stream"),o})}}})}function e2e(e){const t=e[e.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const n of e){if(n.candidates){let a=0;for(const s of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[a]||(r.candidates[a]={index:a}),r.candidates[a].citationMetadata=s.citationMetadata,r.candidates[a].groundingMetadata=s.groundingMetadata,r.candidates[a].finishReason=s.finishReason,r.candidates[a].finishMessage=s.finishMessage,r.candidates[a].safetyRatings=s.safetyRatings,s.content&&s.content.parts){r.candidates[a].content||(r.candidates[a].content={role:s.content.role||"user",parts:[]});const i={};for(const o of s.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[a].content.parts.push(i)}a++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ree(e,t,r,n){const a=await b2(t,eg.STREAM_GENERATE_CONTENT,e,!0,JSON.stringify(r),n);return Xwe(a)}async function nee(e,t,r,n){const s=await(await b2(t,eg.GENERATE_CONTENT,e,!1,JSON.stringify(r),n)).json();return{response:uP(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aee(e){if(e!=null){if(typeof e=="string")return{role:"system",parts:[{text:e}]};if(e.text)return{role:"system",parts:[e]};if(e.parts)return e.role?e:{role:"system",parts:e.parts}}}function vw(e){let t=[];if(typeof e=="string")t=[{text:e}];else for(const r of e)typeof r=="string"?t.push({text:r}):t.push(r);return t2e(t)}function t2e(e){const t={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,a=!1;for(const s of e)"functionResponse"in s?(r.parts.push(s),a=!0):(t.parts.push(s),n=!0);if(n&&a)throw new qo("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!a)throw new qo("No content is provided for sending chat message.");return n?t:r}function r2e(e,t){var r;let n={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const a=e.generateContentRequest!=null;if(e.contents){if(a)throw new Z0("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=e.contents}else if(a)n=Object.assign(Object.assign({},n),e.generateContentRequest);else{const s=vw(e);n.contents=[s]}return{generateContentRequest:n}}function SQ(e){let t;return e.contents?t=e:t={contents:[vw(e)]},e.systemInstruction&&(t.systemInstruction=aee(e.systemInstruction)),t}function n2e(e){return typeof e=="string"||Array.isArray(e)?{content:vw(e)}:e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NQ=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],a2e={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function s2e(e){let t=!1;for(const r of e){const{role:n,parts:a}=r;if(!t&&n!=="user")throw new qo(`First content should be with role 'user', got ${n}`);if(!pQ.includes(n))throw new qo(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(pQ)}`);if(!Array.isArray(a))throw new qo("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new qo("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of a)for(const c of NQ)c in o&&(s[c]+=1);const i=a2e[n];for(const o of NQ)if(!i.includes(o)&&s[o]>0)throw new qo(`Content with role '${n}' can't contain '${o}' part`);t=!0}}function kQ(e){var t;if(e.candidates===void 0||e.candidates.length===0)return!1;const r=(t=e.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BQ="SILENT_ERROR";class i2e{constructor(t,r,n,a={}){this.model=r,this.params=n,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,n!=null&&n.history&&(s2e(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=vw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r);let h;return this._sendPromise=this._sendPromise.then(()=>nee(this._apiKey,this.model,d,f)).then(p=>{var g;if(kQ(p.response)){this._history.push(u);const v=Object.assign({parts:[],role:"model"},(g=p.response.candidates)===null||g===void 0?void 0:g[0].content);this._history.push(v)}else{const v=k0(p.response);v&&console.warn(`sendMessage() was unsuccessful. ${v}. Inspect response object for details.`)}h=p}).catch(p=>{throw this._sendPromise=Promise.resolve(),p}),await this._sendPromise,h}async sendMessageStream(t,r={}){var n,a,s,i,o,c;await this._sendPromise;const u=vw(t),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,u]},f=Object.assign(Object.assign({},this._requestOptions),r),h=ree(this._apiKey,this.model,d,f);return this._sendPromise=this._sendPromise.then(()=>h).catch(p=>{throw new Error(BQ)}).then(p=>p.response).then(p=>{if(kQ(p)){this._history.push(u);const g=Object.assign({},p.candidates[0].content);g.role||(g.role="model"),this._history.push(g)}else{const g=k0(p);g&&console.warn(`sendMessageStream() was unsuccessful. ${g}. Inspect response object for details.`)}}).catch(p=>{p.message!==BQ&&console.error(p)}),h}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2e(e,t,r,n){return(await b2(t,eg.COUNT_TOKENS,e,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2e(e,t,r,n){return(await b2(t,eg.EMBED_CONTENT,e,!1,JSON.stringify(r),n)).json()}async function c2e(e,t,r,n){const a=r.requests.map(i=>Object.assign(Object.assign({},i),{model:t}));return(await b2(t,eg.BATCH_EMBED_CONTENTS,e,!1,JSON.stringify({requests:a}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TQ{constructor(t,r,n={}){this.apiKey=t,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=aee(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var n;const a=SQ(t),s=Object.assign(Object.assign({},this._requestOptions),r);return nee(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}async generateContentStream(t,r={}){var n;const a=SQ(t),s=Object.assign(Object.assign({},this._requestOptions),r);return ree(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},a),s)}startChat(t){var r;return new i2e(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const n=r2e(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),r);return o2e(this.apiKey,this.model,n,a)}async embedContent(t,r={}){const n=n2e(t),a=Object.assign(Object.assign({},this._requestOptions),r);return l2e(this.apiKey,this.model,n,a)}async batchEmbedContents(t,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return c2e(this.apiKey,this.model,t,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new qo("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new TQ(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,n){if(!t.name)throw new Z0("Cached content must contain a `name` field.");if(!t.model)throw new Z0("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const i of a)if(r!=null&&r[i]&&t[i]&&(r==null?void 0:r[i])!==t[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,c=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(o===c)continue}throw new Z0(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${t[i]})`)}const s=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new TQ(this.apiKey,s,n)}}const dP="horario_asignaciones",see="horarios_generados",u2e="usuarios",iee=e=>{const t=e.data();return{id:e.id,...t}},d2e=e=>{const t=tr(It(bt,dP));return gr(t,n=>{const a=n.docs.map(s=>iee(s));e(a)},n=>{console.error("Error al suscribirse a las asignaciones:",n),e([])})},A2e=async e=>{try{return(await Un(It(bt,dP),e)).id}catch(t){throw console.error("Error al agregar asignación:",t),new Error("No se pudo agregar la asignación.")}},f2e=async e=>{try{const t=pr(bt,dP,e);await ts(t)}catch(t){throw console.error("Error al eliminar asignación:",t),new Error("No se pudo eliminar la asignación.")}},jQ=async e=>{try{const t=pr(bt,see,"global");await Ji(t,{data:e})}catch(t){throw console.error("Error al guardar los horarios:",t),new Error("No se pudieron guardar los horarios generados.")}},h2e=e=>{const t=pr(bt,see,"global");return gr(t,n=>{n.exists()?e(n.data().data||{}):e({})},n=>{console.error("Error al suscribirse a los horarios:",n),e({})})},m2e=e=>{const t=tr(It(bt,u2e),vn("profile","==",Yt.PROFESORADO));return gr(t,n=>{const a=n.docs.map(s=>iee(s));e(a)},n=>{console.error("Error al suscribirse a los profesores:",n),e([])})},p2e=({horarios:e})=>Object.keys(e).length===0?l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):l.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),ks.map(t=>l.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:t},t))]})}),l.jsx("tbody",{children:O_.map(t=>l.jsxs(lt.Fragment,{children:[l.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:l.jsx("th",{colSpan:2+ks.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:t.toUpperCase()})}),wF.map(({bloque:r,inicio:n,fin:a})=>l.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${a}`}),ks.map(s=>{var o,c;const i=(c=(o=e[s])==null?void 0:o[t])==null?void 0:c[r];return l.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?l.jsxs("div",{className:"flex flex-col justify-center h-full",children:[l.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),l.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):l.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${s}-${t}-${r}`)})]},`${t}-${r}`))]},t))})]})}),g2e=()=>{const[e,t]=k.useState([]),[r,n]=k.useState({curso:"",asignatura:"",profesor:""}),[a,s]=k.useState([]),[i,o]=k.useState({}),[c,u]=k.useState(ks[0]),[d,f]=k.useState(!1),[h,p]=k.useState(!0),[g,v]=k.useState(null),[b,y]=k.useState(null),[C,N]=k.useState(null),[T,S]=k.useState({asignatura:"",profesor:""}),[B,w]=k.useState("edicion"),[_,F]=k.useState("");k.useEffect(()=>{p(!0);const V=d2e(t),z=h2e(o),G=m2e(re=>{const R=re.map(q=>q.nombreCompleto).sort();s(R),p(!1)});return()=>{V(),z(),G()}},[]);const M=async V=>{if(V.preventDefault(),v(null),!r.curso||!r.asignatura||!r.profesor){v("Todos los campos de la asignación son obligatorios.");return}try{await A2e({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(z){v(z instanceof Error?z.message:"Error al guardar la asignación.")}},D=async V=>{try{await f2e(V)}catch(z){v(z instanceof Error?z.message:"Error al eliminar la asignación.")}},I=async()=>{if(e.length===0){v("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}f(!0),v(null),y(null);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",z=new ds(V),G=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${O_.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(wF,null,2)}
                - Cursos del liceo: ${ks.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(ebe,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(e,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${_||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,te=(await(await z.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(G)).response).text().replace(/^```json\s*|```\s*$/g,""),ie=JSON.parse(te);await jQ(ie),y("¡Horario generado y guardado con éxito!")}catch(V){console.error("Error al generar horario con IA:",V),v("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{f(!1)}},U=(V,z,G)=>{N({dia:V,bloque:z}),S({asignatura:(G==null?void 0:G.asignatura)||"",profesor:(G==null?void 0:G.profesor)||""})},P=async()=>{if(!C)return;const{dia:V,bloque:z}=C,G=JSON.parse(JSON.stringify(i));G[c]||(G[c]={}),G[c][V]||(G[c][V]={}),G[c][V][z]={asignatura:T.asignatura||null,profesor:T.profesor||null};try{await jQ(G),N(null)}catch(re){v(re instanceof Error?re.message:"Error al guardar la edición.")}},X="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",H=()=>{const V=i[c]||{};return l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),O_.map(z=>l.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:z},z))]})}),l.jsx("tbody",{children:wF.map(({bloque:z,inicio:G,fin:re})=>l.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[l.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:z}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${G} - ${re}`})]}),O_.map(R=>{var te;const q=(C==null?void 0:C.dia)===R&&(C==null?void 0:C.bloque)===z,J=(te=V[R])==null?void 0:te[z];return l.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!q&&U(R,z,J),children:q?l.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[l.jsx("input",{type:"text",placeholder:"Asignatura",value:T.asignatura,onChange:ie=>S(Ae=>({...Ae,asignatura:ie.target.value})),className:X+" text-xs mb-1"}),l.jsx("input",{type:"text",placeholder:"Profesor",value:T.profesor,onChange:ie=>S(Ae=>({...Ae,profesor:ie.target.value})),className:X+" text-xs"}),l.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[l.jsx("button",{onClick:()=>N(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),l.jsx("button",{onClick:P,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):J!=null&&J.asignatura?l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:J.asignatura}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",J.profesor,")"]})]}):l.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${R}-${z}`)})]},z))})]})})},Y=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),l.jsxs("form",{onSubmit:M,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:r.curso,onChange:V=>n(z=>({...z,curso:V.target.value})),className:X,children:[l.jsx("option",{value:"",children:"Seleccione"}),ks.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:V=>n(z=>({...z,asignatura:V.target.value})),className:X,children:[l.jsx("option",{value:"",children:"Seleccione"}),qi.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),l.jsxs("select",{name:"profesor",value:r.profesor,onChange:V=>n(z=>({...z,profesor:V.target.value})),className:X,children:[l.jsx("option",{value:"",children:"Seleccione"}),a.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),l.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:l.jsx("ul",{className:"space-y-2",children:e.map(V=>l.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[l.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[V.curso," - ",V.asignatura," - ",l.jsx("strong",{children:V.profesor})]}),l.jsx("button",{onClick:()=>D(V.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},V.id))})})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),l.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:_,onChange:V=>F(V.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:X})]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("button",{onClick:I,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),g&&l.jsx("p",{className:"text-red-600",children:g}),b&&l.jsx("p",{className:"text-green-600",children:b})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),l.jsx("select",{id:"selectCurso",value:c,onChange:V=>u(V.target.value),className:X+" md:w-1/3",children:ks.map(V=>l.jsx("option",{value:V,children:V},V))})]}),Object.keys(i).length>0?H():l.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return h?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>w("edicion"),className:`${B==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),l.jsx("button",{onClick:()=>w("global"),className:`${B==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),B==="edicion"?Y():l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),l.jsx(p2e,{horarios:i})]})]})},l4="acciones",v2e=async()=>{try{const e=tr(It(tn,l4),Rr("fechaRegistro","desc"));return(await Pa(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener acciones:",e),new Error("No se pudieron cargar las acciones pedagógicas")}},x2e=async e=>{try{return{id:(await Un(It(tn,l4),{...e,fechaRegistro:e.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear acción:",t),new Error("No se pudo crear la acción pedagógica")}},IQ=async(e,t)=>{try{const r=pr(tn,l4,e);await Ld(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",e),new Error("No se pudo actualizar la acción pedagógica")}},b2e=async e=>{try{const t=pr(tn,l4,e);await ts(t)}catch(t){throw console.error("Error al eliminar acción:",t,"ID:",e),new Error("No se pudo eliminar la acción pedagógica")}},FQ={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente",enlaceDocumento:""},ST={Pendiente:{badge:"bg-red-50 text-red-700 ring-1 ring-inset ring-red-200 dark:bg-red-900/30 dark:text-red-200 dark:ring-red-800",dot:"bg-red-500",icon:l.jsx(kd,{className:"h-4 w-4","aria-hidden":!0})},"En Proceso":{badge:"bg-yellow-50 text-yellow-700 ring-1 ring-inset ring-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-200 dark:ring-yellow-800",dot:"bg-yellow-500",icon:l.jsx(sye,{className:"h-4 w-4","aria-hidden":!0})},Cumplida:{badge:"bg-green-50 text-green-700 ring-1 ring-inset ring-green-200 dark:bg-green-900/30 dark:text-green-200 dark:ring-green-800",dot:"bg-green-500",icon:l.jsx(eh,{className:"h-4 w-4","aria-hidden":!0})}},Df="w-full rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-slate-800 dark:text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-amber-500/70 focus:border-amber-500/70 transition",cv="block text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400 mb-2",y2e="inline-flex items-center gap-2 rounded-full px-3 py-1 text-xs font-semibold",NT="rounded-2xl border border-slate-100 dark:border-slate-800 bg-white/70 dark:bg-slate-900/60 backdrop-blur shadow-sm",OQ="inline-flex items-center justify-center gap-2 rounded-xl bg-slate-900 text-white dark:bg-amber-500 dark:text-slate-900 px-4 py-2 font-semibold hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-amber-500/70 transition",DQ="inline-flex items-center justify-center gap-2 rounded-xl bg-slate-100 dark:bg-slate-800 text-slate-700 dark:text-slate-200 px-4 py-2 font-semibold hover:bg-slate-200 dark:hover:bg-slate-700 transition",PQ="inline-flex items-center justify-center rounded-lg p-2 hover:bg-slate-100 dark:hover:bg-slate-800 transition",Fb="px-4 py-3 text-left text-[10px] md:text-xs font-semibold uppercase tracking-wide text-slate-500 dark:text-slate-400",Lv="px-4 py-4 align-top text-sm text-slate-700 dark:text-slate-200",w2e="flex flex-col items-center justify-center gap-3 py-12 text-slate-500 dark:text-slate-400",E2e=()=>l.jsx("tr",{children:l.jsx("td",{className:Lv,colSpan:5,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-10 w-10 rounded-full bg-slate-200 dark:bg-slate-700 animate-pulse"}),l.jsxs("div",{className:"flex-1 space-y-2",children:[l.jsx("div",{className:"h-3 w-1/3 bg-slate-200 dark:bg-slate-700 animate-pulse rounded"}),l.jsx("div",{className:"h-3 w-2/3 bg-slate-200 dark:bg-slate-700 animate-pulse rounded"})]})]})})}),C2e=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!1),[a,s]=k.useState(null),[i,o]=k.useState(FQ),[c,u]=k.useState(null),[d,f]=k.useState(""),[h,p]=k.useState(""),[g,v]=k.useState(""),b=k.useCallback(async()=>{n(!0);try{const _=await v2e();t(_),s(null)}catch(_){console.error("Error al cargar acciones:",_),s("No se pudieron cargar las acciones pedagógicas.")}finally{n(!1)}},[]);k.useEffect(()=>{b()},[b]);const y=k.useCallback(_=>{const{name:F,value:M}=_.target;o(D=>({...D,[F]:M}))},[]),C=k.useCallback(()=>{o(FQ),u(null),s(null)},[]),N=k.useCallback(async _=>{if(_.preventDefault(),!i.responsable||!i.area||!i.descripcion||!i.fechaCumplimiento){s("Los campos responsables, área, descripción y fecha de cumplimiento son obligatorios.");return}try{c?await IQ(c,i):await x2e(i),await b(),C()}catch(F){console.error("Error al guardar acción:",F),s("Error al guardar la acción.")}},[i,c,b,C]),T=k.useCallback(_=>{window.scrollTo({top:0,behavior:"smooth"}),u(_.id),o({..._,enlaceDocumento:_.enlaceDocumento||""})},[]),S=k.useCallback(async _=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await b2e(_),await b()}catch(F){console.error("Error al eliminar acción:",F),s("No se pudo eliminar la acción.")}},[b]),B=k.useCallback(async _=>{try{const F=e.find(M=>M.id===_);if(F){const D=(oC.indexOf(F.estado)+1)%oC.length,I=oC[D];await IQ(_,{estado:I}),await b()}}catch(F){console.error("Error al cambiar estado:",F),s("No se pudo cambiar el estado de la acción.")}},[e,b]),w=k.useMemo(()=>e.filter(_=>{const F=d===""||_.responsable.toLowerCase().includes(d.toLowerCase())||_.descripcion.toLowerCase().includes(d.toLowerCase()),M=h===""||_.area===h,D=g===""||_.estado===g;return F&&M&&D}),[e,d,h,g]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Seguimiento de Acciones Pedagógicas"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:c?"Editando acción existente.":"Registre una nueva acción de seguimiento."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{type:"button",onClick:()=>b(),className:DQ,title:"Recargar",children:[l.jsx(Fye,{className:"h-4 w-4"}),"Refrescar"]}),l.jsxs("button",{type:"button",onClick:C,className:OQ,title:"Nueva acción",children:[l.jsx(iQ,{className:"h-4 w-4"}),"Nueva"]})]})]}),l.jsx("div",{className:NT,children:l.jsxs("form",{onSubmit:N,className:"p-6 md:p-8 space-y-6",children:[a&&l.jsxs("div",{className:"flex items-center gap-3 rounded-xl border border-red-200 bg-red-50 p-3 text-red-700 dark:bg-red-900/30 dark:text-red-200 dark:border-red-800",children:[l.jsx(kd,{className:"h-5 w-5"}),l.jsx("span",{children:a})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaRegistro",className:cv,children:"Fecha de Registro"}),l.jsxs("div",{className:"relative",children:[l.jsx(yd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsx("input",{id:"fechaRegistro",type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:y,className:Df+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:cv,children:"Responsable"}),l.jsxs("div",{className:"relative",children:[l.jsx(QS,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsx("input",{id:"responsable",type:"text",name:"responsable",value:i.responsable,onChange:y,placeholder:"Nombre del responsable",className:Df+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"area",className:cv,children:"Área Vinculada"}),l.jsxs("div",{className:"relative",children:[l.jsx(oP,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsxs("select",{id:"area",name:"area",value:i.area,onChange:y,className:Df+" pl-10",children:[l.jsx("option",{value:"",children:"Seleccione un área"}),rQ.map(_=>l.jsx("option",{value:_,children:_},_))]})]})]}),l.jsxs("div",{className:"md:col-span-3",children:[l.jsx("label",{htmlFor:"descripcion",className:cv,children:"Descripción de la Acción"}),l.jsxs("div",{className:"relative",children:[l.jsx(GA,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),l.jsx("textarea",{id:"descripcion",name:"descripcion",value:i.descripcion,onChange:y,rows:3,placeholder:"Detalle de la acción a realizar...",className:Df+" pl-10"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaCumplimiento",className:cv,children:"Fecha de Cumplimiento"}),l.jsxs("div",{className:"relative",children:[l.jsx(yd,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsx("input",{id:"fechaCumplimiento",type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:y,className:Df+" pl-10"})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"enlaceDocumento",className:cv,children:"Enlace a Documento (Opcional)"}),l.jsxs("div",{className:"relative",children:[l.jsx(lQ,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsx("input",{id:"enlaceDocumento",type:"url",name:"enlaceDocumento",value:i.enlaceDocumento||"",onChange:y,placeholder:"https://ejemplo.com/documento",className:Df+" pl-10"})]})]})]}),l.jsxs("div",{className:"flex items-center justify-end gap-3 pt-2",children:[c&&l.jsx("button",{type:"button",onClick:C,className:DQ,children:"Cancelar"}),l.jsxs("button",{type:"submit",className:OQ,children:[c?l.jsx(MS,{className:"h-4 w-4"}):l.jsx(iQ,{className:"h-4 w-4"}),c?"Actualizar Acción":"Registrar Acción"]})]})]})}),l.jsx("div",{className:NT,children:l.jsx("div",{className:"p-4 md:p-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{className:"relative",children:[l.jsx(US,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),l.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:_=>f(_.target.value),className:Df+" pl-10"})]}),l.jsxs("select",{value:h,onChange:_=>p(_.target.value),className:Df,children:[l.jsx("option",{value:"",children:"Filtrar por Área"}),rQ.map(_=>l.jsx("option",{value:_,children:_},_))]}),l.jsxs("select",{value:g,onChange:_=>v(_.target.value),className:Df,children:[l.jsx("option",{value:"",children:"Filtrar por Estado"}),oC.map(_=>l.jsx("option",{value:_,children:_},_))]})]})})}),l.jsx("div",{className:NT,children:l.jsx("div",{className:"overflow-x-auto rounded-2xl",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-slate-50/80 dark:bg-slate-800/80 backdrop-blur",children:l.jsxs("tr",{children:[l.jsx("th",{className:Fb,children:"Responsable"}),l.jsx("th",{className:Fb,children:"Descripción"}),l.jsx("th",{className:Fb,children:"Fechas"}),l.jsx("th",{className:`${Fb} text-center`,children:"Estado"}),l.jsx("th",{className:`${Fb} text-center`,children:"Acciones"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-100 dark:divide-slate-800",children:r?l.jsx(E2e,{}):w.length>0?w.map(_=>{var F,M;return l.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/60 transition",children:[l.jsx("td",{className:Lv+" whitespace-nowrap",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-amber-400 to-rose-400 text-white flex items-center justify-center font-bold shadow-sm",children:((M=(F=_.responsable)==null?void 0:F.slice(0,1))==null?void 0:M.toUpperCase())||"?"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold",children:_.responsable}),l.jsx("div",{className:"text-xs text-slate-500",children:_.area})]})]})}),l.jsxs("td",{className:Lv+" max-w-lg",children:[l.jsx("p",{className:"text-sm leading-relaxed",children:_.descripcion}),_.enlaceDocumento&&l.jsxs("a",{href:_.enlaceDocumento,target:"_blank",rel:"noopener noreferrer",title:"Ver Documento",className:"mt-2 inline-flex items-center gap-1 text-xs font-semibold text-indigo-600 hover:text-indigo-800 dark:text-indigo-300 dark:hover:text-indigo-200",children:[l.jsx(lQ,{className:"h-3.5 w-3.5"}),"Documento"]})]}),l.jsxs("td",{className:Lv+" whitespace-nowrap",children:[l.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-2",children:[l.jsx(yd,{className:"h-4 w-4"}),"Reg: ",_.fechaRegistro]}),l.jsxs("div",{className:"text-sm font-semibold flex items-center gap-2 mt-1",children:[l.jsx(yd,{className:"h-4 w-4"}),"Comp: ",_.fechaCumplimiento]})]}),l.jsx("td",{className:Lv+" whitespace-nowrap text-center",children:l.jsxs("button",{onClick:()=>B(_.id),className:`${y2e} ${ST[_.estado].badge}`,title:"Cambiar estado",children:[l.jsx("span",{className:`h-2 w-2 rounded-full ${ST[_.estado].dot}`}),ST[_.estado].icon,_.estado]})}),l.jsx("td",{className:Lv+" whitespace-nowrap text-center",children:l.jsxs("div",{className:"flex items-center justify-center gap-1.5",children:[l.jsx("button",{onClick:()=>T(_),title:"Editar",className:PQ+" text-yellow-600 dark:text-yellow-300",children:l.jsx(MS,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>S(_.id),title:"Eliminar",className:PQ+" text-red-600 dark:text-red-300",children:l.jsx(Dd,{className:"h-5 w-5"})})]})})]},_.id)}):l.jsx("tr",{children:l.jsx("td",{colSpan:5,children:l.jsxs("div",{className:w2e,children:[l.jsx(US,{className:"h-10 w-10"}),l.jsx("p",{children:"No se encontraron acciones."})]})})})})]})})})]})},c4="planificaciones",oee="actividades_calendario",lee=e=>{var r,n,a;const t=e.data();return{id:e.id,...t,fechaCreacion:((a=(n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:a.toISOString())||t.fechaCreacion}},_2e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:mr.fromDate(new Date),fechaActualizacion:mr.fromDate(new Date)};return(await Un(It(bt,c4),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},S2e=async(e,t,r)=>{try{const n=pr(bt,c4,e),a=await g2(n);if(!a.exists()||a.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await Ld(n,{...t,fechaActualizacion:mr.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},N2e=async(e,t)=>{try{const r=pr(bt,c4,e),n=await g2(r);if(!n.exists()||n.data().userId!==t)throw new Error("No tienes permisos para eliminar esta planificación");await ts(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},k2e=(e,t)=>{const r=tr(It(bt,c4),vn("userId","==",e),Rr("fechaCreacion","desc"));return gr(r,n=>{const a=n.docs.map(lee);t(a)},n=>{console.error("Error en suscripción a planificaciones:",n)})},B2e=async(e,t)=>{try{const r={...e,userId:t,fechaCreacion:mr.fromDate(new Date),fechaActualizacion:mr.fromDate(new Date)};return(await Un(It(bt,oee),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},T2e=(e,t)=>{const r=tr(It(bt,oee),vn("userId","==",e),Rr("fecha","desc"));return gr(r,n=>{const a=n.docs.map(lee);t(a)},n=>{console.error("Error en suscripción a actividades:",n)})},j2e=e=>{const[t,r]=k.useState([]),[n,a]=k.useState(!0),[s,i]=k.useState(null);return k.useEffect(()=>e?(a(!0),k2e(e,f=>{r(f),a(!1)})):void 0,[e]),{planificaciones:t,loading:n,error:s,save:async d=>{try{return i(null),await _2e(d,e)}catch(f){throw i(f.message||"Error al guardar planificación"),f}},update:async(d,f)=>{try{i(null),await S2e(d,f,e)}catch(h){throw i(h.message||"Error al actualizar planificación"),h}},remove:async d=>{try{i(null),await N2e(d,e)}catch(f){throw i(f.message||"Error al eliminar planificación"),f}}}},NF=e=>{const t=new Date().toISOString();console.log(`[${t}] API Call: ${e}`)},I2e=e=>{const[t,r]=k.useState([]),[n,a]=k.useState(!0),[s,i]=k.useState(null);k.useEffect(()=>e?T2e(e,u=>{r(u),a(!1)}):void 0,[e]);const o=k.useCallback(async c=>{try{return i(null),await B2e(c,e)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[e]);return{actividades:t,loading:n,error:s,save:o}},F2e=({lesson:e,onClose:t,onSave:r,isLoading:n=!1})=>{const[a,s]=k.useState(e),i=c=>{s({...a,[c.target.name]:c.target.value})},o=async()=>{try{await r(a),t()}catch(c){console.error("Error al guardar lección:",c)}};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),l.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(a).map(([c,u])=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:c.replace(/([A-Z])/g," $1")}),l.jsx("textarea",{name:c,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},c))}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),l.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},O2e=({plan:e,onEditLesson:t,onUseLesson:r,isLoading:n=!1,onUpdatePlan:a})=>{const[s,i]=k.useState(e.progreso??0),[o,c]=k.useState(!1),u=async d=>{const f=parseInt(d.target.value,10);i(f),c(!0);try{e.id&&a&&(await a(e.id,{progreso:f}),console.log("✅ Progreso actualizado exitosamente"))}catch(h){console.error("❌ Error completo:",h),alert(`Error al guardar el avance: ${h.message}`),i(e.progreso??0)}finally{c(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"range",min:0,max:100,value:s,onChange:u,disabled:o||n}),l.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),o&&l.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),l.jsx("div",{className:"space-y-4",children:e.detallesLeccion.map((d,f)=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[l.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",f+1,": ",d.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo:"})," ",d.objetivosAprendizaje]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Contenidos:"})," ",d.contenidosConceptuales]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Habilidad (Bloom):"})," ",d.habilidadesBloom]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Perfil de Egreso:"})," ",d.perfilEgreso]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Interdisciplinariedad:"})," ",d.asignaturasInterdisciplinariedad]})]}),l.jsxs("div",{className:"flex gap-2 mt-4",children:[l.jsx("button",{onClick:()=>t(f,d),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),l.jsx("button",{onClick:()=>r(d,e),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},f))})]})},D2e=({plan:e,onBack:t,onSave:r,onDelete:n,isLoading:a=!1})=>{const[s,i]=k.useState(e),[o,c]=k.useState(!1),u=f=>{const{name:h,value:p}=f.target,[g,v]=h.split(".");i(g==="momentosClase"?b=>({...b,momentosClase:{...b.momentosClase,[v]:p}}):b=>({...b,[h]:p}))},d=async()=>{c(!0);try{await r(s)}catch(f){console.error("Error al guardar plan de clase:",f)}finally{c(!1)}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreClase}),l.jsx("button",{onClick:t,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:a||o,children:"← Volver"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),l.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),l.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:u,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]}),l.jsxs("div",{children:[l.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),l.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:u,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:a||o})]})]}),l.jsx("div",{className:"text-right mt-6",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("button",{onClick:()=>n(e.id),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:"🗑️ Eliminar Plan"}),l.jsxs("button",{onClick:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:a||o,children:[o&&l.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})})]})},P2e=({userId:e})=>{const{actividades:t,save:r}=I2e(e),[n,a]=k.useState("list"),[s,i]=k.useState(null),[o,c]=k.useState(!1),[u,d]=k.useState(!1),f={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[h,p]=k.useState(f);k.useEffect(()=>{n==="summary"&&s&&g()},[n,s,e]);const g=async()=>{if(s)try{d(!1)}catch(B){console.error("Error al verificar evento en calendario:",B)}},v=B=>{const{name:w,value:_}=B.target;p(F=>({...F,[w]:_}))},b=(B,w,_)=>{p(F=>({...F,tareas:F.tareas.map(M=>M.id===B?{...M,[w]:_}:M)}))},y=()=>{p(B=>({...B,tareas:[...B.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},C=B=>{p(w=>({...w,tareas:w.tareas.filter(_=>_.id!==B)}))},N=async B=>{B.preventDefault(),c(!0);const w=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${h.nombre}
    - Descripción: ${h.descripcion}
    - Tareas: ${h.tareas.map(_=>_.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{NF("Planificación - Actividad Calendario");const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",U=(await(await new ds(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(w)).response).text(),P={...h,objetivo:U.replace(/(\*\*|\*)/g,"")},X=await r(P),H={...P,id:X};i(H),a("summary")}catch(_){console.error("Error al generar objetivo con IA:",_),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const F={...h,objetivo:"No generado"},M=await r(F),D={...F,id:M};i(D),a("summary")}catch(F){console.error("Error al guardar actividad:",F),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{c(!1)}},T=async B=>{if(B)try{d(!0),alert("Actividad marcada como añadida al calendario (funcionalidad en desarrollo).")}catch(w){console.error("Error adding to calendar:",w),alert("Hubo un error al agregar la actividad al calendario.")}},S="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsxs("form",{onSubmit:N,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("input",{name:"nombre",value:h.nombre,onChange:v,placeholder:"Nombre de la Actividad",className:S,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"fecha",type:"date",value:h.fecha,onChange:v,className:S,required:!0,disabled:o}),l.jsx("input",{name:"hora",type:"time",value:h.hora,onChange:v,className:S,required:!0,disabled:o})]}),l.jsx("textarea",{name:"descripcion",value:h.descripcion,onChange:v,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:S,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("input",{name:"ubicacion",value:h.ubicacion,onChange:v,placeholder:"Ubicación",className:S,required:!0,disabled:o}),l.jsx("input",{name:"participantes",value:h.participantes,onChange:v,placeholder:"Participantes",className:S,required:!0,disabled:o})]}),l.jsx("textarea",{name:"recursosGenerales",value:h.recursosGenerales,onChange:v,placeholder:"Recursos Generales Necesarios",rows:2,className:S,disabled:o})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),l.jsx("button",{type:"button",onClick:y,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),l.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:h.tareas.map((B,w)=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[l.jsx("button",{type:"button",onClick:()=>C(B.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),l.jsx("textarea",{value:B.descripcion,onChange:_=>b(B.id,"descripcion",_.target.value),placeholder:`Descripción de la Tarea ${w+1}`,rows:2,className:S,required:!0,disabled:o}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[l.jsx("input",{value:B.responsable,onChange:_=>b(B.id,"responsable",_.target.value),placeholder:"Responsable",className:S,required:!0,disabled:o}),l.jsx("input",{value:B.recursos,onChange:_=>b(B.id,"recursos",_.target.value),placeholder:"Recursos Necesarios",className:S,disabled:o})]})]},B.id))})]}),l.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[l.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),l.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{type:"button",onClick:()=>a("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),l.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&s?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[l.jsx("span",{className:"text-2xl",children:"✓"}),l.jsxs("div",{children:[l.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),l.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),l.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),l.jsxs("div",{className:"space-y-4 text-sm",children:[l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),l.jsx("span",{children:s.nombre})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),l.jsx("span",{children:new Date(`${s.fecha}T${s.hora}`).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),l.jsx("p",{children:s.descripcion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),l.jsx("span",{children:s.ubicacion})]}),l.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[l.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),l.jsx("span",{children:s.participantes})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),l.jsx("p",{children:s.recursosGenerales})]}),l.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[l.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),l.jsx("p",{children:s.objetivo})]})]}),l.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[l.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),l.jsx("button",{onClick:()=>T(s),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),l.jsx("button",{onClick:()=>{a("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),l.jsx("button",{onClick:()=>{a("form"),p(f)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),l.jsx("div",{className:"space-y-3",children:t.length>0?t.map(B=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:B.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(B.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",B.ubicacion]})]},B.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},R2e=({currentUser:e})=>{const t=e.uid||e.email||e.id||"",{planificaciones:r,save:n,update:a,remove:s,loading:i}=j2e(t),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[c,u]=k.useState(o),[d,f]=k.useState(null),[h,p]=k.useState(!1),[g,v]=k.useState(null),[b,y]=k.useState("unidad"),[C,N]=k.useState(null),[T,S]=k.useState(null),B=k.useMemo(()=>e.asignaturas||[],[e.asignaturas]),w=k.useMemo(()=>{const G=e.cursos||[],re=new Set;return G.forEach(R=>{R.startsWith("1º")?re.add("1º Medio"):R.startsWith("2º")?re.add("2º Medio"):R.startsWith("3º")?re.add("3º Medio"):R.startsWith("4º")&&re.add("4º Medio")}),Array.from(re)},[e.cursos]);k.useEffect(()=>{u(G=>({...G,asignatura:B[0]||"",nivel:w[0]||""})),console.log("🔍 Debug datos usuario y planificaciones:",{currentUser:{uid:e.uid,email:e.email,id:e.id,nombreCompleto:e.nombreCompleto},userId:t,planificacionesCount:r.length,planificacionesAutores:r.map(G=>({id:G.id,autor:G.autor,tipo:G.tipo,coincideConUserId:G.autor===t}))})},[B,w,e,t,r]);const _=G=>{const{name:re,value:R}=G.target;u(q=>({...q,[re]:re==="cantidadClases"?parseInt(R,10):R}))},F=()=>{const{asignatura:G,nivel:re,nombreUnidad:R,contenidos:q,cantidadClases:J,observaciones:te,ideasParaUnidad:ie}=c;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${G}
    - Nivel: ${re}
    - Nombre de la Unidad: "${R}"
    - Contenidos clave a trabajar (insumo principal): "${q}"
    - Cantidad de clases para la unidad: ${J}
    - Ideas y perspectiva del docente para la unidad: "${ie||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${te||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${J} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},M=async G=>{if(G.preventDefault(),p(!0),v(null),!c.contenidos||!c.nombreUnidad){v("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),p(!1);return}try{NF("Planificación - Unidad");const re="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=new ds(re).getGenerativeModel({model:"gemini-1.5-flash-latest"}),J=F(),te={type:"object",properties:{objetivosAprendizaje:{type:"string"},indicadoresEvaluacion:{type:"string"},detallesLeccion:{type:"array",items:{type:"object",properties:{objetivosAprendizaje:{type:"string"},contenidosConceptuales:{type:"string"},habilidadesBloom:{type:"string"},perfilEgreso:{type:"string"},actividades:{type:"string"},asignaturasInterdisciplinariedad:{type:"string"}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},oe=(await(await q.generateContent({contents:[{parts:[{text:J}]}],generationConfig:{responseMimeType:"application/json",responseSchema:te}})).response).text(),ce=JSON.parse(oe),pe={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Unidad",asignatura:c.asignatura,nivel:c.nivel,nombreUnidad:c.nombreUnidad,contenidos:c.contenidos,cantidadClases:c.cantidadClases,observaciones:c.observaciones,ideasParaUnidad:c.ideasParaUnidad,objetivosAprendizaje:ce.objetivosAprendizaje,indicadoresEvaluacion:ce.indicadoresEvaluacion,detallesLeccion:ce.detallesLeccion};if(d)await a(d.id,pe),f({...pe,id:d.id});else{const Ie=await n(pe);f({...pe,id:Ie})}}catch(re){console.error("Error al generar planificación con IA",re),v("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{p(!1)}},D=async(G,re)=>{p(!0),v(null);const R=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${re.asignatura}
    - Nivel: ${re.nivel}
    - Objetivo de la clase: ${G.objetivosAprendizaje}
    - Contenidos: ${G.contenidosConceptuales}
    - Actividades sugeridas: ${G.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{NF("Planificación - Utilizar Clase");const q="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",te=new ds(q).getGenerativeModel({model:"gemini-1.5-flash-latest"}),ie={type:"object",properties:{inicio:{type:"string"},desarrollo:{type:"string"},cierre:{type:"string"}},required:["inicio","desarrollo","cierre"]},ce=(await(await te.generateContent({contents:[{parts:[{text:R}]}],generationConfig:{responseMimeType:"application/json",responseSchema:ie}})).response).text(),pe=JSON.parse(ce),Ie={fechaCreacion:new Date().toISOString(),autor:e.nombreCompleto,tipo:"Clase",asignatura:re.asignatura,nivel:re.nivel,contenidos:G.contenidosConceptuales,observaciones:"",nombreClase:G.actividades,duracionClase:80,momentosClase:pe,detalleLeccionOrigen:G};await n(Ie),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),y("clase")}catch(q){console.error("Error al generar plan de clase con IA",q),v("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{p(!1)}},I=G=>{G.tipo==="Unidad"&&(u({asignatura:G.asignatura,nivel:G.nivel,nombreUnidad:G.nombreUnidad,contenidos:G.contenidos,cantidadClases:G.cantidadClases,observaciones:G.observaciones,ideasParaUnidad:G.ideasParaUnidad||""}),f(G),window.scrollTo({top:0,behavior:"smooth"}))},U=async G=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await s(G),(d==null?void 0:d.id)===G&&(f(null),u(o))}catch(re){console.error("Error al eliminar planificación:",re),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},P=async G=>{if(window.confirm("¿Está seguro de que desea eliminar este plan de clase?"))try{await s(G),(C==null?void 0:C.id)===G&&N(null),console.log("✅ Plan de clase eliminado exitosamente")}catch(re){console.error("Error al eliminar plan de clase:",re),alert("Error al eliminar el plan de clase. Por favor, intente nuevamente.")}},X=(G,re)=>{d&&S({planId:d.id,lessonIndex:G,lessonData:re})},H=async G=>{if(T)try{const{planId:re,lessonIndex:R}=T,q=r.find(ie=>ie.id===re&&ie.tipo==="Unidad");if(!q)return;const J=[...q.detallesLeccion];J[R]=G;const te={...q,detallesLeccion:J};await a(re,te),f(te),S(null)}catch(re){console.error("Error al actualizar lección:",re),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},Y="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",V=()=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsxs("form",{onSubmit:M,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:c.asignatura,onChange:_,className:Y,disabled:h,children:B.length>0?B.map(G=>l.jsx("option",{value:G,children:G},G)):l.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:c.nivel,onChange:_,className:Y,disabled:h,children:w.length>0?w.map(G=>l.jsx("option",{value:G,children:G},G)):l.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombreUnidad",value:c.nombreUnidad,onChange:_,className:Y,placeholder:"Ej: La Célula y sus procesos",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenidos",value:c.contenidos,onChange:_,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:Y,disabled:h})]}),l.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[l.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),l.jsx("textarea",{name:"ideasParaUnidad",value:c.ideasParaUnidad,onChange:_,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:Y,disabled:h})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),l.jsx("input",{type:"number",name:"cantidadClases",value:c.cantidadClases,onChange:_,className:Y,min:"1",max:"20",disabled:h})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),l.jsx("textarea",{name:"observaciones",value:c.observaciones,onChange:_,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:Y,disabled:h})]})]}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:h||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:h?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),g&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g})]})]}),d&&l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),l.jsx(O2e,{plan:d,onEditLesson:X,onUseLesson:D,onUpdatePlan:a,isLoading:h})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:r.filter(G=>G.tipo==="Unidad").length>0?r.filter(G=>G.tipo==="Unidad").map(G=>l.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===G.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:G.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(G.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",G.contenidos]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>I(G),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:h,children:"Ver y Editar"}),l.jsx("button",{onClick:()=>U(G.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:h,children:"🗑️"})]})]})},G.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),z=()=>{const G=r.filter(re=>re.tipo==="Clase").sort((re,R)=>new Date(R.fechaCreacion).getTime()-new Date(re.fechaCreacion).getTime());return C?l.jsx(D2e,{plan:C,onBack:()=>N(null),onDelete:P,onSave:async re=>{try{await a(re.id,re),N(re)}catch(R){console.error("Error al actualizar plan de clase:",R),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:h}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):l.jsx("div",{className:"space-y-4",children:G.length>0?G.map(re=>l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:re.nombreClase}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(re.fechaCreacion).toLocaleString("es-CL")]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",re.contenidos]})]}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsx("button",{onClick:()=>N(re),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},re.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!e||!e.email&&!e.id?l.jsx("div",{className:"flex justify-center items-center py-8",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),l.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(e)]})]})}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>y("unidad"),className:`${b==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),l.jsx("button",{onClick:()=>y("clase"),className:`${b==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),l.jsx("button",{onClick:()=>y("calendario"),className:`${b==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),b==="unidad"&&V(),b==="clase"&&z(),b==="calendario"&&l.jsx(P2e,{userId:t}),T&&l.jsx(F2e,{lesson:T.lessonData,onClose:()=>S(null),onSave:H,isLoading:h})]})},u4="events",L2e=async()=>{try{const e=tr(It(tn,u4),Rr("date","asc"));return(await Pa(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener eventos:",e),new Error("No se pudieron cargar los eventos del calendario")}},M2e=async e=>{try{return{id:(await Un(It(tn,u4),{...e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear evento:",t),new Error("No se pudo crear el evento del calendario")}},U2e=async(e,t)=>{try{const r=pr(tn,u4,e);await Ld(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",e),new Error("No se pudo actualizar el evento del calendario")}},Q2e=async e=>{try{const t=pr(tn,u4,e);await ts(t)}catch(t){throw console.error("Error al eliminar evento:",t,"ID:",e),new Error("No se pudo eliminar el evento del calendario")}},H2e=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],RQ={[dn.EVALUACION]:l.jsx(hh,{className:"h-4 w-4"}),[dn.ACTO]:l.jsx(bye,{className:"h-4 w-4"}),[dn.ACTIVIDAD_FOCALIZADA]:l.jsx(XZ,{className:"h-4 w-4"}),[dn.SALIDA_PEDAGOGICA]:l.jsx(Dye,{className:"h-4 w-4"})},V2e=e=>{switch(e.type){case dn.EVALUACION:return`${e.subtype} - ${e.asignatura}`;case dn.ACTO:return`Acto: ${e.ubicacion}`;case dn.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case dn.SALIDA_PEDAGOGICA:return`Salida: ${e.ubicacion}`;default:return"Evento"}},z2e=({isOpen:e,onClose:t,onSave:r,onDelete:n,event:a,date:s,isLoading:i})=>{const[o,c]=k.useState({});k.useEffect(()=>{c(a||{type:dn.EVALUACION,subtype:vp.PRUEBA_PARCIAL,asignatura:qi[0],curso:ks[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[a,e]);const u="w-full rounded-md border border-white/30 bg-white/10 dark:bg-white/5 text-slate-800 dark:text-slate-100 placeholder-slate-400 backdrop-blur-md shadow-sm focus:outline-none focus:ring-4 focus:ring-yellow-400/30 focus:border-blue-300 dark:border-white/10 dark:focus:border-blue-400",d=v=>{const{name:b,value:y}=v.target;c(C=>({...C,[b]:y}))},f=v=>{c(b=>{if(b.type===dn.SALIDA_PEDAGOGICA){const y=b.cursos||[],C=y.includes(v)?y.filter(N=>N!==v):[...y,v];return{...b,cursos:C.sort()}}return b})},h=v=>{var y;v.preventDefault();let b;switch(o.type){case dn.EVALUACION:{const C={date:s,type:dn.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===vp.RUBRICA||o.subtype===vp.PAUTA_COTEJO)&&((y=o.enlace)!=null&&y.trim())&&(C.enlace=o.enlace.trim()),b=C;break}case dn.ACTO:b={date:s,type:dn.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case dn.ACTIVIDAD_FOCALIZADA:b={date:s,type:dn.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case dn.SALIDA_PEDAGOGICA:b={date:s,type:dn.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(b)};if(!e)return null;const p=new Date(`${s}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),g=()=>{switch(o.type){case dn.EVALUACION:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Subtipo"}),l.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:tbe.map(v=>l.jsx("option",{value:v,children:v},v))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:qi.map(v=>l.jsx("option",{value:v,children:v},v))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:ks.map(v=>l.jsx("option",{value:v,children:v},v))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Contenidos"}),l.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===vp.RUBRICA||o.subtype===vp.PAUTA_COTEJO)&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),l.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case dn.ACTO:case dn.ACTIVIDAD_FOCALIZADA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsables"}),l.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación"}),l.jsxs("div",{className:"relative",children:[l.jsx(LS,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Horario"}),l.jsxs("div",{className:"relative",children:[l.jsx(mw,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:`${u} pl-9`})]})]})]});case dn.SALIDA_PEDAGOGICA:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Responsable"}),l.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),l.jsxs("div",{className:"relative",children:[l.jsx(LS,{className:"absolute left-3 top-2.5 h-4 w-4 text-slate-500"}),l.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:`${u} pl-9`})]})]}),l.jsxs("fieldset",{children:[l.jsx("legend",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),l.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border border-white/30 dark:border-white/10 p-2 rounded-md text-slate-700 dark:text-slate-300 bg-white/5 backdrop-blur-md",children:ks.map(v=>l.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[l.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(v),onChange:()=>f(v),className:"h-4 w-4 rounded text-yellow-500 focus:ring-yellow-400"}),l.jsx("span",{children:v})]},v))})]})]});default:return null}};return l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center p-4",onClick:t,style:{background:"rgba(2, 6, 23, 0.55)"},children:l.jsx("div",{className:"relative w-full max-w-lg overflow-hidden rounded-2xl border border-white/20 bg-gradient-to-br from-blue-50/70 via-white/50 to-yellow-50/70 dark:from-slate-900/70 dark:via-slate-900/60 dark:to-slate-900/70 backdrop-blur-2xl shadow-2xl",onClick:v=>v.stopPropagation(),children:l.jsxs("form",{onSubmit:h,children:[l.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:a?"Editar Evento":"Agregar Evento"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-300/90 font-semibold",children:p})]}),l.jsx("button",{type:"button",onClick:t,className:"rounded-full p-2 hover:bg-white/20 text-slate-700 dark:text-slate-200 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:l.jsx(HS,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),l.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(dn).map(v=>l.jsx("option",{value:v,children:v},v))})]}),g()]})]}),l.jsxs("div",{className:"px-6 py-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-t border-white/20 flex justify-between items-center",children:[l.jsx("div",{children:a&&n&&l.jsxs("button",{type:"button",onClick:n,disabled:i,className:"inline-flex items-center gap-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:[l.jsx(Dd,{className:"h-4 w-4"}),i?"Eliminando...":"Eliminar"]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsxs("button",{type:"button",onClick:t,disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-white/20 px-4 py-2 font-semibold text-slate-800 hover:bg-white/30 backdrop-blur-md dark:bg-white/10 dark:text-slate-100 dark:hover:bg-white/20 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-400/30",children:[l.jsx(HS,{className:"h-4 w-4"}),"Cancelar"]}),l.jsxs("button",{type:"submit",disabled:i,className:"inline-flex items-center gap-2 rounded-lg bg-gradient-to-r from-blue-600 to-yellow-500 px-4 py-2 font-bold text-white hover:opacity-95 disabled:opacity-50 focus:outline-none focus:ring-4 focus:ring-yellow-300/40",children:[l.jsx(pw,{className:"h-4 w-4"}),i?"Guardando...":"Guardar"]})]})]})]})})})},$2e=({profile:e})=>{const[t,r]=k.useState(new Date),[n,a]=k.useState([]),[s,i]=k.useState(!1),[o,c]=k.useState(null),[u,d]=k.useState(!1),[f,h]=k.useState(Object.values(dn)),[p,g]=k.useState(!1),[v,b]=k.useState(null),[y,C]=k.useState(null),N=k.useCallback(async()=>{i(!0);try{const D=await L2e();a(D),c(null)}catch(D){console.error("Error al cargar eventos desde Firestore",D),c("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);k.useEffect(()=>{N()},[N]);const T=k.useMemo(()=>{const D=t.getFullYear(),I=t.getMonth(),U=new Date(D,I,1).getDay(),P=new Date(D,I+1,0).getDate(),X=[];let H=1;for(let Y=0;Y<6;Y++){const V=[];for(let z=0;z<7;z++)Y===0&&z<U||H>P?V.push(null):(V.push(new Date(D,I,H)),H++);if(X.push(V),H>P)break}return X},[t]),S=D=>{h(I=>I.includes(D)?I.filter(U=>U!==D):[...I,D])},B=()=>{f.length===Object.values(dn).length?h([]):h(Object.values(dn))},w=D=>{e!==Yt.ESTUDIANTE&&(b(D.toISOString().split("T")[0]),C(null),g(!0))},_=(D,I)=>{I.stopPropagation(),e!==Yt.ESTUDIANTE&&(b(D.date),C(D),g(!0))},F=async D=>{d(!0);try{y?await U2e(y.id,D):await M2e(D),await N(),g(!1)}catch(I){console.error("Error al guardar evento:",I);const U=I instanceof Error?I.message:"Error desconocido";c(`Error al guardar el evento: ${U}`)}finally{d(!1)}},M=async()=>{if(y){d(!0);try{await Q2e(y.id),await N(),g(!1)}catch(D){console.error("Error al eliminar evento:",D);const I=D instanceof Error?D.message:"Error desconocido";c(`No se pudo eliminar el evento: ${I}`)}finally{d(!1)}}};return l.jsxs("div",{className:`relative overflow-hidden rounded-xl p-6 md:p-8 shadow-md space-y-6 animate-fade-in
                    bg-gradient-to-br from-blue-50 via-white to-yellow-50 dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:"absolute -top-20 -left-16 h-64 w-64 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-yellow-300 to-yellow-200 dark:from-yellow-500/15 dark:to-yellow-400/10"}),l.jsx("div",{className:"absolute bottom-0 right-0 h-72 w-72 rounded-full blur-3xl opacity-40 bg-gradient-to-tr from-sky-300 to-blue-300 dark:from-sky-500/15 dark:to-blue-500/15"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-100 drop-shadow-sm",children:"Calendario Académico"}),l.jsx("div",{className:"text-slate-600 dark:text-slate-300 text-sm",children:s&&l.jsx("span",{className:"px-2 py-1 rounded bg-white/30 dark:bg-white/10 backdrop-blur-md",children:"Cargando…"})})]}),o&&l.jsx("div",{className:"text-red-700 dark:text-red-400 bg-red-100/70 dark:bg-red-900/30 border border-red-300/50 dark:border-red-800/40 p-3 rounded-lg",children:o}),!s&&n.length===0&&l.jsxs("div",{className:"flex items-start gap-3 rounded-xl border border-yellow-400/40 bg-yellow-50/70 p-4 text-yellow-900 dark:bg-yellow-900/20 dark:text-yellow-300 backdrop-blur-md",children:[l.jsx(oye,{className:"h-5 w-5 mt-0.5"}),l.jsx("p",{children:"No hay eventos registrados en la nube."})]}),l.jsxs("div",{className:"mb-2 rounded-xl border border-white/30 bg-white/30 dark:bg-white/10 backdrop-blur-xl p-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 dark:text-slate-200 mb-2",children:[l.jsx(oP,{className:"h-4 w-4"}),l.jsx("h2",{className:"text-lg font-semibold",children:"Filtrar por tipo de evento:"})]}),l.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[l.jsx("button",{onClick:B,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-gradient-to-r from-blue-600 to-yellow-500 text-white hover:opacity-95 transition-colors",children:f.length===Object.values(dn).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(dn).map(D=>l.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2
                ${f.includes(D)?`shadow-sm ${ux[D].color}`:"bg-white/40 text-slate-700 hover:bg-white/60 dark:bg-white/10 dark:text-slate-300 dark:hover:bg-white/20"}`,children:[l.jsx("input",{type:"checkbox",checked:f.includes(D),onChange:()=>S(D),className:"hidden"}),l.jsx("span",{className:"shrink-0",children:RQ[D]}),l.jsx("span",{children:ux[D].label})]},D))]})]}),l.jsxs("div",{className:"rounded-xl overflow-hidden border border-white/30 dark:border-white/10 backdrop-blur-xl bg-white/30 dark:bg-white/5",children:[l.jsxs("header",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-100/60 to-yellow-100/60 dark:from-slate-800/60 dark:to-slate-800/60 border-b border-white/20",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()-1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(hw,{className:"h-5 w-5"})}),l.jsx("button",{onClick:()=>r(new Date(t.setMonth(t.getMonth()+1))),className:"p-2 rounded-full hover:bg-white/40 dark:hover:bg-white/10 text-slate-700 dark:text-slate-200",children:l.jsx(qZ,{className:"h-5 w-5"})})]}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100 capitalize",children:t.toLocaleString("es-CL",{month:"long",year:"numeric"})}),l.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-gradient-to-r from-blue-600 to-yellow-500 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:opacity-95",children:"Hoy"})]}),l.jsx("div",{className:"grid grid-cols-7 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:H2e.map(D=>l.jsx("div",{className:`text-center font-semibold text-slate-600 dark:text-slate-300 text-sm py-3
                         bg-white/40 dark:bg-white/10
                         border-b border-r border-slate-200/80 dark:border-slate-700/70`,children:D},D))}),l.jsx("div",{className:"grid grid-cols-7 grid-rows-6 border-t border-l border-slate-200/80 dark:border-slate-700/70",children:T.flat().map((D,I)=>{const U=D&&D.toDateString()===new Date().toDateString(),P=D==null?void 0:D.toISOString().split("T")[0],X=P?n.filter(H=>H.date===P&&f.includes(H.type)):[];return l.jsx("div",{onClick:()=>D&&w(D),className:`border-b border-r border-slate-200/80 dark:border-slate-700/70
                            p-2 h-36 flex flex-col overflow-hidden relative group 
                            ${D?e!==Yt.ESTUDIANTE?"cursor-pointer hover:bg-white/40 dark:hover:bg-white/10":"":"bg-white/30 dark:bg-white/5"}`,children:D&&l.jsxs(l.Fragment,{children:[l.jsx("span",{className:`self-end text-sm font-semibold ${U?"bg-gradient-to-r from-blue-600 to-yellow-500 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-700 dark:text-slate-300"}`,children:D.getDate()}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:X.map(H=>l.jsxs("div",{onClick:Y=>_(H,Y),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${ux[H.type].color}`,children:[l.jsx("span",{className:"shrink-0",children:RQ[H.type]}),l.jsx("span",{className:"truncate",children:V2e(H)})]},H.id))}),e!==Yt.ESTUDIANTE&&l.jsx("button",{className:`absolute bottom-1 right-1 rounded-full h-7 w-7 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity 
                                   bg-gradient-to-r from-blue-600 to-yellow-500 text-white shadow`,"aria-label":"Agregar evento",children:l.jsx(th,{className:"h-4 w-4"})})]})},I)})})]}),p&&l.jsx(z2e,{isOpen:p,onClose:()=>g(!1),onSave:F,onDelete:M,event:y,date:v,isLoading:u})]})},d4="anuncios",G2e=async()=>{try{const e=tr(It(tn,d4),Rr("fechaPublicacion","desc"));return(await Pa(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener anuncios:",e),new Error("No se pudieron cargar los anuncios")}},K2e=async e=>{try{return{id:(await Un(It(tn,d4),{...e,fechaPublicacion:e.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...e}}catch(t){throw console.error("Error al crear anuncio:",t),new Error("No se pudo crear el anuncio")}},q2e=async(e,t)=>{try{const r=pr(tn,d4,e);await Ld(r,{...t,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",e),new Error("No se pudo actualizar el anuncio")}},W2e=async e=>{try{const t=pr(tn,d4,e);await ts(t)}catch(t){throw console.error("Error al eliminar anuncio:",t,"ID:",e),new Error("No se pudo eliminar el anuncio")}},LQ=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],X2e=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState(!1),[s,i]=k.useState(null),[o,c]=k.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=k.useState({tipo:"Todos",cursos:[]}),f=k.useCallback(async()=>{a(!0);try{const w=await G2e();r(w),i(null)}catch(w){console.error("Error al cargar anuncios desde Firestore",w),i("No se pudieron cargar los anuncios desde la nube.")}finally{a(!1)}},[]);k.useEffect(()=>{f()},[f]);const h=w=>{const{name:_,value:F}=w.target;c(M=>({...M,[_]:F}))},p=w=>{d({tipo:w,cursos:w==="Cursos"?[]:void 0})},g=w=>{d(_=>{var M;if(_.tipo!=="Cursos")return _;const F=(M=_.cursos)!=null&&M.includes(w)?_.cursos.filter(D=>D!==w):[..._.cursos||[],w];return{..._,cursos:F}})},v=async w=>{if(w.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const _={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:e.nombreCompleto,profileCreador:e.profile,destinatarios:u,...o};await K2e(_),await f(),c({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(_){console.error("Error al crear anuncio:",_),i("Error al publicar el anuncio en la nube.")}},b=async w=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await W2e(w),await f()}catch(_){console.error("Error al eliminar anuncio:",_),i("No se pudo eliminar el anuncio en la nube.")}},y=async w=>{try{const _=t.find(F=>F.id===w);_&&(await q2e(w,{destacado:!_.destacado}),await f())}catch(_){console.error("Error al actualizar anuncio:",_),i("No se pudo actualizar el estado del anuncio en la nube.")}},C=k.useMemo(()=>[...t].sort((w,_)=>w.destacado&&!_.destacado?-1:!w.destacado&&_.destacado?1:new Date(_.fechaPublicacion).getTime()-new Date(w.fechaPublicacion).getTime()),[t]),N=k.useMemo(()=>{const w=e.profile,_=e.curso;return C.filter(F=>{if(w===Yt.SUBDIRECCION)return!0;if(!F.destinatarios)return w!==Yt.ESTUDIANTE;const{tipo:M,cursos:D}=F.destinatarios;return M==="Todos"||M==="Profesores"&&w===Yt.PROFESORADO||M==="Coordinación TP"&&w===Yt.COORDINACION_TP?!0:M==="Cursos"?w===Yt.ESTUDIANTE?D==null?void 0:D.includes(_||""):!0:!1})},[C,e]),T=w=>e.profile===Yt.ESTUDIANTE?!1:e.profile===Yt.SUBDIRECCION||e.profile===w.profileCreador,S=()=>e.profile===Yt.SUBDIRECCION||e.profile===Yt.PROFESORADO,B="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),e.profile!==Yt.ESTUDIANTE?l.jsxs(l.Fragment,{children:[l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),l.jsxs("form",{onSubmit:v,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),l.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:h,required:!0,className:B})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),l.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:h,required:!0,rows:4,className:B})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),l.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(w=>l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[l.jsx("input",{type:"radio",name:"destinatarioTipo",value:w,checked:u.tipo===w,onChange:()=>p(w),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),l.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:w.replace("Coordinación TP","Coord. TP")})]},w))})]}),u.tipo==="Cursos"&&l.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:ks.map(w=>{var _;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(_=u.cursos)==null?void 0:_.includes(w),onChange:()=>g(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:w})]},w)})})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),l.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:h,placeholder:"https://ejemplo.com/documento.pdf",className:B})]}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&N.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&N.length>0&&N.map((w,_)=>{const F=LQ[_%LQ.length];return l.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${F.bg} ${F.rotate}`,children:[w.destacado&&l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:l.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),l.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:w.titulo}),l.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:w.mensaje}),w.adjunto&&l.jsx("div",{className:"font-sans text-sm mb-4",children:l.jsxs("a",{href:w.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),l.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:w.autor}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(w.fechaPublicacion).toLocaleString("es-CL")})]}),l.jsxs("div",{className:"flex items-center",children:[S()&&l.jsx("button",{onClick:()=>y(w.id),title:w.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("span",{className:`text-xl transition-opacity ${w.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),T(w)&&l.jsx("button",{onClick:()=>b(w.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},w.id)})})]})},cee="api_logs",Y2e=async(e,t)=>{try{const r={module:e,userId:t.id,userEmail:t.email,userName:t.nombreCompleto,timestamp:mr.fromDate(new Date)};await Un(It(bt,cee),r)}catch(r){console.error("Error al registrar la llamada a la API en Firestore:",r)}},J2e=e=>{const t=tr(It(bt,cee),Rr("timestamp","desc"));return gr(t,n=>{const a=n.docs.map(s=>{var o,c;const i=s.data();return{id:s.id,...i,timestamp:((c=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:c.call(o).toISOString())||i.timestamp}});e(a)},n=>{console.error("Error al suscribirse a los logs de API:",n),e([])})},mm=(e,t)=>{if(!t||!t.id||!t.email){console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}Y2e(e,t)},AP="actas_de_reunion",Z2e=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},eEe=e=>{const t=tr(It(bt,AP),Rr("fechaCreacion","desc"));return gr(t,n=>{const a=n.docs.map(s=>Z2e(s));e(a)},n=>{console.error("Error al suscribirse a las actas:",n),e([])})},tEe=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:mr.fromDate(new Date(e.fechaCreacion))};return(await Un(It(bt,AP),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},rEe=async e=>{try{const t=pr(bt,AP,e);await ts(t)}catch(t){throw console.error("Error al eliminar el acta:",t),new Error("No se pudo eliminar el acta.")}},uee=window.SpeechRecognition||window.webkitSpeechRecognition,MQ=!!uee,nEe=({isListening:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),aEe=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState(null),[s,i]=k.useState({tipoReunion:ET[0],asistentes:"",textoReunion:""}),[o,c]=k.useState(!1),[u,d]=k.useState(!1),[f,h]=k.useState(!0),[p,g]=k.useState(null),v=k.useRef(null);k.useEffect(()=>{h(!0);const w=eEe(_=>{r(_),!n&&_.length>0&&a(_[0]),h(!1)});return()=>w()},[n]);const b=w=>{const{name:_,value:F}=w.target;i(M=>({...M,[_]:F}))},y=k.useCallback(()=>{var w;if(!MQ){g("El reconocimiento de voz no es compatible con este navegador.");return}o?(w=v.current)==null||w.stop():(v.current=new uee,v.current.lang="es-CL",v.current.continuous=!0,v.current.interimResults=!0,v.current.onresult=_=>{let F="";for(let M=_.resultIndex;M<_.results.length;++M)_.results[M].isFinal&&(F+=_.results[M][0].transcript+". ");i(M=>({...M,textoReunion:M.textoReunion+F}))},v.current.onstart=()=>c(!0),v.current.onend=()=>c(!1),v.current.onerror=_=>{console.error("Speech recognition error",_.error),g(`Error de reconocimiento: ${_.error}`),c(!1)},v.current.start())},[o]),C=async w=>{w.preventDefault();const{tipoReunion:_,asistentes:F,textoReunion:M}=s;if(!_||!F.trim()||!M.trim()){g("Todos los campos son obligatorios.");return}d(!0),g(null);try{mm("Generador de Actas");const D="",U=new globalThis.GoogleGenerativeAI(D).getGenerativeModel({model:"gemini-pro"}),P=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${M}"
                
                Asistentes a la reunión para referencia de nombres: ${F}
            `,V=(await(await U.generateContent(P)).response).text().replace(/^```json\s*|```\s*$/g,""),z=JSON.parse(V),G={fechaCreacion:new Date().toISOString(),...s,...z},re=await tEe(G,e);i({tipoReunion:ET[0],asistentes:"",textoReunion:""})}catch(D){console.error("Error al analizar acta con IA:",D),g("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},N=async w=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await rEe(w),(n==null?void 0:n.id)===w&&a(t.length>1?t[1]:null)}catch(_){console.error("Error deleting acta:",_),alert("No se pudo eliminar el acta.")}},T=w=>{a(w)},S=w=>w.temas||w.acuerdos||w.plazos||w.responsables?l.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),w.temas&&w.temas.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.temas.map((F,M)=>l.jsx("li",{children:F},M))})]}),w.acuerdos&&w.acuerdos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.acuerdos.map((F,M)=>l.jsx("li",{children:F},M))})]}),w.plazos&&w.plazos.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.plazos.map((F,M)=>l.jsx("li",{children:F},M))})]}),w.responsables&&w.responsables.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),l.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:w.responsables.map((F,M)=>l.jsx("li",{children:F},M))})]})]}):null,B="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return f?l.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[l.jsxs("div",{className:"md:col-span-1 space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),l.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"flex-shrink-0",children:l.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:l.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),l.jsx("div",{className:"ml-3",children:l.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",l.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),l.jsxs("form",{onSubmit:C,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),l.jsx("select",{name:"tipoReunion",value:s.tipoReunion,onChange:b,required:!0,className:B,children:ET.map(w=>l.jsx("option",{value:w,children:w},w))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),l.jsx("textarea",{name:"asistentes",value:s.asistentes,onChange:b,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:B})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),l.jsxs("div",{className:"relative",children:[l.jsx("textarea",{name:"textoReunion",value:s.textoReunion,onChange:b,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:B}),MQ&&l.jsx("button",{type:"button",onClick:y,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:l.jsx(nEe,{isListening:o})})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:p}),l.jsx("div",{className:"pt-2 text-right",children:l.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:t.length>0?t.map(w=>l.jsxs("button",{onClick:()=>T(w),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===w.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:w.tipoReunion}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(w.fechaCreacion).toLocaleDateString("es-CL")})]},w.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),l.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),l.jsx("button",{onClick:()=>N(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[l.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),l.jsx("h2",{children:"Asistentes"}),l.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((w,_)=>w.trim()&&l.jsx("li",{children:w.trim()},_))}),S(n),l.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:l.jsx("p",{children:n.textoReunion})})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[l.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})},sEe="modulepreload",iEe=function(e){return"/"+e},UQ={},Lx=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=i(r.map(u=>{if(u=iEe(u),u in UQ)return;UQ[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":sEe,d||(h.as="script"),h.crossOrigin="",h.href=u,c&&h.setAttribute("nonce",c),document.head.appendChild(h),d)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};function ga(e){"@babel/helpers - typeof";return ga=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ga(e)}var Wo=Uint8Array,Fc=Uint16Array,fP=Int32Array,A4=new Wo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),f4=new Wo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),kF=new Wo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dee=function(e,t){for(var r=new Fc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new fP(r[30]),n=1;n<30;++n)for(var s=r[n];s<r[n+1];++s)a[s]=s-r[n]<<5|n;return{b:r,r:a}},Aee=dee(A4,2),fee=Aee.b,BF=Aee.r;fee[28]=258,BF[258]=28;var hee=dee(f4,0),oEe=hee.b,QQ=hee.r,TF=new Fc(32768);for(var Qa=0;Qa<32768;++Qa){var x0=(Qa&43690)>>1|(Qa&21845)<<1;x0=(x0&52428)>>2|(x0&13107)<<2,x0=(x0&61680)>>4|(x0&3855)<<4,TF[Qa]=((x0&65280)>>8|(x0&255)<<8)>>1}var KA=function(e,t,r){for(var n=e.length,a=0,s=new Fc(t);a<n;++a)e[a]&&++s[e[a]-1];var i=new Fc(t);for(a=1;a<t;++a)i[a]=i[a-1]+s[a-1]<<1;var o;if(r){o=new Fc(1<<t);var c=15-t;for(a=0;a<n;++a)if(e[a])for(var u=a<<4|e[a],d=t-e[a],f=i[e[a]-1]++<<d,h=f|(1<<d)-1;f<=h;++f)o[TF[f]>>c]=u}else for(o=new Fc(n),a=0;a<n;++a)e[a]&&(o[a]=TF[i[e[a]-1]++]>>15-e[a]);return o},pm=new Wo(288);for(var Qa=0;Qa<144;++Qa)pm[Qa]=8;for(var Qa=144;Qa<256;++Qa)pm[Qa]=9;for(var Qa=256;Qa<280;++Qa)pm[Qa]=7;for(var Qa=280;Qa<288;++Qa)pm[Qa]=8;var xw=new Wo(32);for(var Qa=0;Qa<32;++Qa)xw[Qa]=5;var lEe=KA(pm,9,0),cEe=KA(pm,9,1),uEe=KA(xw,5,0),dEe=KA(xw,5,1),kT=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},dd=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},BT=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},hP=function(e){return(e+7)/8|0},mee=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Wo(e.subarray(t,r))},AEe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],md=function(e,t,r){var n=new Error(t||AEe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,md),!r)throw n;return n},fEe=function(e,t,r,n){var a=e.length,s=0;if(!a||t.f&&!t.l)return r||new Wo(0);var i=!r,o=i||t.i!=2,c=t.i;i&&(r=new Wo(a*3));var u=function(Ie){var ne=r.length;if(Ie>ne){var Se=new Wo(Math.max(ne*2,Ie));Se.set(r),r=Se}},d=t.f||0,f=t.p||0,h=t.b||0,p=t.l,g=t.d,v=t.m,b=t.n,y=a*8;do{if(!p){d=dd(e,f,1);var C=dd(e,f+1,3);if(f+=3,C)if(C==1)p=cEe,g=dEe,v=9,b=5;else if(C==2){var B=dd(e,f,31)+257,w=dd(e,f+10,15)+4,_=B+dd(e,f+5,31)+1;f+=14;for(var F=new Wo(_),M=new Wo(19),D=0;D<w;++D)M[kF[D]]=dd(e,f+D*3,7);f+=w*3;for(var I=kT(M),U=(1<<I)-1,P=KA(M,I,1),D=0;D<_;){var X=P[dd(e,f,U)];f+=X&15;var N=X>>4;if(N<16)F[D++]=N;else{var H=0,Y=0;for(N==16?(Y=3+dd(e,f,3),f+=2,H=F[D-1]):N==17?(Y=3+dd(e,f,7),f+=3):N==18&&(Y=11+dd(e,f,127),f+=7);Y--;)F[D++]=H}}var V=F.subarray(0,B),z=F.subarray(B);v=kT(V),b=kT(z),p=KA(V,v,1),g=KA(z,b,1)}else md(1);else{var N=hP(f)+4,T=e[N-4]|e[N-3]<<8,S=N+T;if(S>a){c&&md(0);break}o&&u(h+T),r.set(e.subarray(N,S),h),t.b=h+=T,t.p=f=S*8,t.f=d;continue}if(f>y){c&&md(0);break}}o&&u(h+131072);for(var G=(1<<v)-1,re=(1<<b)-1,R=f;;R=f){var H=p[BT(e,f)&G],q=H>>4;if(f+=H&15,f>y){c&&md(0);break}if(H||md(2),q<256)r[h++]=q;else if(q==256){R=f,p=null;break}else{var J=q-254;if(q>264){var D=q-257,te=A4[D];J=dd(e,f,(1<<te)-1)+fee[D],f+=te}var ie=g[BT(e,f)&re],Ae=ie>>4;ie||md(3),f+=ie&15;var z=oEe[Ae];if(Ae>3){var te=f4[Ae];z+=BT(e,f)&(1<<te)-1,f+=te}if(f>y){c&&md(0);break}o&&u(h+131072);var oe=h+J;if(h<z){var ce=s-z,pe=Math.min(z,oe);for(ce+h<0&&md(3);h<pe;++h)r[h]=n[ce+h]}for(;h<oe;++h)r[h]=r[h-z]}}t.l=p,t.p=R,t.b=h,t.f=d,p&&(d=1,t.m=v,t.d=g,t.n=b)}while(!d);return h!=r.length&&i?mee(r,0,h):r.subarray(0,h)},Pf=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Ob=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},TT=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,s=r.slice();if(!a)return{t:gee,l:0};if(a==1){var i=new Wo(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(S,B){return S.f-B.f}),r.push({s:-1,f:25001});var o=r[0],c=r[1],u=0,d=1,f=2;for(r[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=a-1;)o=r[r[u].f<r[f].f?u++:f++],c=r[u!=d&&r[u].f<r[f].f?u++:f++],r[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var h=s[0].s,n=1;n<a;++n)s[n].s>h&&(h=s[n].s);var p=new Fc(h+1),g=jF(r[d-1],p,0);if(g>t){var n=0,v=0,b=g-t,y=1<<b;for(s.sort(function(B,w){return p[w.s]-p[B.s]||B.f-w.f});n<a;++n){var C=s[n].s;if(p[C]>t)v+=y-(1<<g-p[C]),p[C]=t;else break}for(v>>=b;v>0;){var N=s[n].s;p[N]<t?v-=1<<t-p[N]++-1:++n}for(;n>=0&&v;--n){var T=s[n].s;p[T]==t&&(--p[T],++v)}g=t}return{t:new Wo(p),l:g}},jF=function(e,t,r){return e.s==-1?Math.max(jF(e.l,t,r+1),jF(e.r,t,r+1)):t[e.s]=r},HQ=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Fc(++t),n=0,a=e[0],s=1,i=function(c){r[n++]=c},o=1;o<=t;++o)if(e[o]==a&&o!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)i(32754);s>2&&(i(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(i(a),--s;s>6;s-=6)i(8304);s>2&&(i(s-3<<5|8208),s=0)}for(;s--;)i(a);s=1,a=e[o]}return{c:r.subarray(0,n),n:t}},Db=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},pee=function(e,t,r){var n=r.length,a=hP(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var s=0;s<n;++s)e[a+s+4]=r[s];return(a+4+n)*8},VQ=function(e,t,r,n,a,s,i,o,c,u,d){Pf(t,d++,r),++a[256];for(var f=TT(a,15),h=f.t,p=f.l,g=TT(s,15),v=g.t,b=g.l,y=HQ(h),C=y.c,N=y.n,T=HQ(v),S=T.c,B=T.n,w=new Fc(19),_=0;_<C.length;++_)++w[C[_]&31];for(var _=0;_<S.length;++_)++w[S[_]&31];for(var F=TT(w,7),M=F.t,D=F.l,I=19;I>4&&!M[kF[I-1]];--I);var U=u+5<<3,P=Db(a,pm)+Db(s,xw)+i,X=Db(a,h)+Db(s,v)+i+14+3*I+Db(w,M)+2*w[16]+3*w[17]+7*w[18];if(c>=0&&U<=P&&U<=X)return pee(t,d,e.subarray(c,c+u));var H,Y,V,z;if(Pf(t,d,1+(X<P)),d+=2,X<P){H=KA(h,p,0),Y=h,V=KA(v,b,0),z=v;var G=KA(M,D,0);Pf(t,d,N-257),Pf(t,d+5,B-1),Pf(t,d+10,I-4),d+=14;for(var _=0;_<I;++_)Pf(t,d+3*_,M[kF[_]]);d+=3*I;for(var re=[C,S],R=0;R<2;++R)for(var q=re[R],_=0;_<q.length;++_){var J=q[_]&31;Pf(t,d,G[J]),d+=M[J],J>15&&(Pf(t,d,q[_]>>5&127),d+=q[_]>>12)}}else H=lEe,Y=pm,V=uEe,z=xw;for(var _=0;_<o;++_){var te=n[_];if(te>255){var J=te>>18&31;Ob(t,d,H[J+257]),d+=Y[J+257],J>7&&(Pf(t,d,te>>23&31),d+=A4[J]);var ie=te&31;Ob(t,d,V[ie]),d+=z[ie],ie>3&&(Ob(t,d,te>>5&8191),d+=f4[ie])}else Ob(t,d,H[te]),d+=Y[te]}return Ob(t,d,H[256]),d+Y[256]},hEe=new fP([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),gee=new Wo(0),mEe=function(e,t,r,n,a,s){var i=s.z||e.length,o=new Wo(n+i+5*(1+Math.ceil(i/7e3))+a),c=o.subarray(n,o.length-a),u=s.l,d=(s.r||0)&7;if(t){d&&(c[0]=s.r>>3);for(var f=hEe[t-1],h=f>>13,p=f&8191,g=(1<<r)-1,v=s.p||new Fc(32768),b=s.h||new Fc(g+1),y=Math.ceil(r/3),C=2*y,N=function(De){return(e[De]^e[De+1]<<y^e[De+2]<<C)&g},T=new fP(25e3),S=new Fc(288),B=new Fc(32),w=0,_=0,F=s.i||0,M=0,D=s.w||0,I=0;F+2<i;++F){var U=N(F),P=F&32767,X=b[U];if(v[P]=X,b[U]=P,D<=F){var H=i-F;if((w>7e3||M>24576)&&(H>423||!u)){d=VQ(e,c,0,T,S,B,_,M,I,F-I,d),M=w=_=0,I=F;for(var Y=0;Y<286;++Y)S[Y]=0;for(var Y=0;Y<30;++Y)B[Y]=0}var V=2,z=0,G=p,re=P-X&32767;if(H>2&&U==N(F-re))for(var R=Math.min(h,H)-1,q=Math.min(32767,F),J=Math.min(258,H);re<=q&&--G&&P!=X;){if(e[F+V]==e[F+V-re]){for(var te=0;te<J&&e[F+te]==e[F+te-re];++te);if(te>V){if(V=te,z=re,te>R)break;for(var ie=Math.min(re,te-2),Ae=0,Y=0;Y<ie;++Y){var oe=F-re+Y&32767,ce=v[oe],pe=oe-ce&32767;pe>Ae&&(Ae=pe,X=oe)}}}P=X,X=v[P],re+=P-X&32767}if(z){T[M++]=268435456|BF[V]<<18|QQ[z];var Ie=BF[V]&31,ne=QQ[z]&31;_+=A4[Ie]+f4[ne],++S[257+Ie],++B[ne],D=F+V,++w}else T[M++]=e[F],++S[e[F]]}}for(F=Math.max(F,D);F<i;++F)T[M++]=e[F],++S[e[F]];d=VQ(e,c,u,T,S,B,_,M,I,F-I,d),u||(s.r=d&7|c[d/8|0]<<3,d-=7,s.h=b,s.p=v,s.i=F,s.w=D)}else{for(var F=s.w||0;F<i+u;F+=65535){var Se=F+65535;Se>=i&&(c[d/8|0]=u,Se=i),d=pee(c,d+1,e.subarray(F,Se))}s.i=i}return mee(o,0,n+hP(d)+a)},vee=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,s=r.length|0,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)a+=n+=r[i];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},pEe=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var s=t.dictionary.subarray(-32768),i=new Wo(s.length+e.length);i.set(s),i.set(e,s.length),e=i,a.w=s.length}return mEe(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},xee=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},gEe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=vee();a.p(t.dictionary),xee(e,2,a.d())}},vEe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&md(6,"invalid zlib data"),(e[1]>>5&1)==1&&md(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function IF(e,t){t||(t={});var r=vee();r.p(e);var n=pEe(e,t,t.dictionary?6:2,4);return gEe(n,t),xee(n,n.length-4,r.d()),n}function xEe(e,t){return fEe(e.subarray(vEe(e),-4),{i:2},t,t)}var bEe=typeof TextDecoder<"u"&&new TextDecoder,yEe=0;try{bEe.decode(gee,{stream:!0}),yEe=1}catch{}var Ur=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function jT(){Ur.console&&typeof Ur.console.log=="function"&&Ur.console.log.apply(Ur.console,arguments)}var Sa={log:jT,warn:function(e){Ur.console&&(typeof Ur.console.warn=="function"?Ur.console.warn.apply(Ur.console,arguments):jT.call(null,arguments))},error:function(e){Ur.console&&(typeof Ur.console.error=="function"?Ur.console.error.apply(Ur.console,arguments):jT(e))}};function IT(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){fp(n.response,t,r)},n.onerror=function(){Sa.error("could not download file")},n.send()}function zQ(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function uC(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var My,FF,fp=Ur.saveAs||((typeof window>"u"?"undefined":ga(window))!=="object"||window!==Ur?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Ur.URL||Ur.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?zQ(a.href)?IT(e,t,r):uC(a,a.target="_blank"):uC(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){uC(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(zQ(e))IT(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){uC(n)})}else navigator.msSaveOrOpenBlob(function(a,s){return s===void 0?s={autoBom:!1}:ga(s)!=="object"&&(Sa.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return IT(e,t,r);var a=e.type==="application/octet-stream",s=/constructor/i.test(Ur.HTMLElement)||Ur.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||a&&s)&&(typeof FileReader>"u"?"undefined":ga(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(e)}else{var c=Ur.URL||Ur.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function bee(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,s=r[n].process,i=a.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function FT(e,t){var r=e[0],n=e[1],a=e[2],s=e[3];r=Fo(r,n,a,s,t[0],7,-680876936),s=Fo(s,r,n,a,t[1],12,-389564586),a=Fo(a,s,r,n,t[2],17,606105819),n=Fo(n,a,s,r,t[3],22,-1044525330),r=Fo(r,n,a,s,t[4],7,-176418897),s=Fo(s,r,n,a,t[5],12,1200080426),a=Fo(a,s,r,n,t[6],17,-1473231341),n=Fo(n,a,s,r,t[7],22,-45705983),r=Fo(r,n,a,s,t[8],7,1770035416),s=Fo(s,r,n,a,t[9],12,-1958414417),a=Fo(a,s,r,n,t[10],17,-42063),n=Fo(n,a,s,r,t[11],22,-1990404162),r=Fo(r,n,a,s,t[12],7,1804603682),s=Fo(s,r,n,a,t[13],12,-40341101),a=Fo(a,s,r,n,t[14],17,-1502002290),r=Oo(r,n=Fo(n,a,s,r,t[15],22,1236535329),a,s,t[1],5,-165796510),s=Oo(s,r,n,a,t[6],9,-1069501632),a=Oo(a,s,r,n,t[11],14,643717713),n=Oo(n,a,s,r,t[0],20,-373897302),r=Oo(r,n,a,s,t[5],5,-701558691),s=Oo(s,r,n,a,t[10],9,38016083),a=Oo(a,s,r,n,t[15],14,-660478335),n=Oo(n,a,s,r,t[4],20,-405537848),r=Oo(r,n,a,s,t[9],5,568446438),s=Oo(s,r,n,a,t[14],9,-1019803690),a=Oo(a,s,r,n,t[3],14,-187363961),n=Oo(n,a,s,r,t[8],20,1163531501),r=Oo(r,n,a,s,t[13],5,-1444681467),s=Oo(s,r,n,a,t[2],9,-51403784),a=Oo(a,s,r,n,t[7],14,1735328473),r=Do(r,n=Oo(n,a,s,r,t[12],20,-1926607734),a,s,t[5],4,-378558),s=Do(s,r,n,a,t[8],11,-2022574463),a=Do(a,s,r,n,t[11],16,1839030562),n=Do(n,a,s,r,t[14],23,-35309556),r=Do(r,n,a,s,t[1],4,-1530992060),s=Do(s,r,n,a,t[4],11,1272893353),a=Do(a,s,r,n,t[7],16,-155497632),n=Do(n,a,s,r,t[10],23,-1094730640),r=Do(r,n,a,s,t[13],4,681279174),s=Do(s,r,n,a,t[0],11,-358537222),a=Do(a,s,r,n,t[3],16,-722521979),n=Do(n,a,s,r,t[6],23,76029189),r=Do(r,n,a,s,t[9],4,-640364487),s=Do(s,r,n,a,t[12],11,-421815835),a=Do(a,s,r,n,t[15],16,530742520),r=Po(r,n=Do(n,a,s,r,t[2],23,-995338651),a,s,t[0],6,-198630844),s=Po(s,r,n,a,t[7],10,1126891415),a=Po(a,s,r,n,t[14],15,-1416354905),n=Po(n,a,s,r,t[5],21,-57434055),r=Po(r,n,a,s,t[12],6,1700485571),s=Po(s,r,n,a,t[3],10,-1894986606),a=Po(a,s,r,n,t[10],15,-1051523),n=Po(n,a,s,r,t[1],21,-2054922799),r=Po(r,n,a,s,t[8],6,1873313359),s=Po(s,r,n,a,t[15],10,-30611744),a=Po(a,s,r,n,t[6],15,-1560198380),n=Po(n,a,s,r,t[13],21,1309151649),r=Po(r,n,a,s,t[4],6,-145523070),s=Po(s,r,n,a,t[11],10,-1120210379),a=Po(a,s,r,n,t[2],15,718787259),n=Po(n,a,s,r,t[9],21,-343485551),e[0]=Q0(r,e[0]),e[1]=Q0(n,e[1]),e[2]=Q0(a,e[2]),e[3]=Q0(s,e[3])}function h4(e,t,r,n,a,s){return t=Q0(Q0(t,e),Q0(n,s)),Q0(t<<a|t>>>32-a,r)}function Fo(e,t,r,n,a,s,i){return h4(t&r|~t&n,e,t,a,s,i)}function Oo(e,t,r,n,a,s,i){return h4(t&n|r&~n,e,t,a,s,i)}function Do(e,t,r,n,a,s,i){return h4(t^r^n,e,t,a,s,i)}function Po(e,t,r,n,a,s,i){return h4(r^(t|~n),e,t,a,s,i)}function yee(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)FT(n,wEe(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(FT(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,FT(n,a),n}function wEe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}My=Ur.atob.bind(Ur),FF=Ur.btoa.bind(Ur);var $Q="0123456789abcdef".split("");function EEe(e){for(var t="",r=0;r<4;r++)t+=$Q[e>>8*r+4&15]+$Q[e>>8*r&15];return t}function CEe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function OF(e){return yee(e).map(CEe).join("")}var _Ee=function(e){for(var t=0;t<e.length;t++)e[t]=EEe(e[t]);return e.join("")}(yee("hello"))!="5d41402abc4b2a76b9719d911017c592";function Q0(e,t){if(_Ee){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function DF(e,t){var r,n,a,s;if(e!==r){for(var i=(a=e,s=1+(256/e.length>>0),new Array(s+1).join(a)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+i.charCodeAt(c))%256,o[c]=o[u],o[u]=d}r=e,n=o}else o=n;var f=t.length,h=0,p=0,g="";for(c=0;c<f;c++)p=(p+(d=o[h=(h+1)%256]))%256,o[h]=o[p],o[p]=d,i=o[(o[h]+o[p])%256],g+=String.fromCharCode(t.charCodeAt(c)^i);return g}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var GQ={print:4,modify:8,copy:16,"annot-forms":32};function Mv(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(GQ.perm!==void 0)throw new Error("Invalid permission: "+o);a+=GQ[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(t+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^a)),this.encryptionKey=OF(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=DF(this.encryptionKey,this.padding)}function Uv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[n]}return t}function KQ(e){if(ga(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var s=Math.random().toString(35);return t[r][s]=[n,!!a],s},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var s in t[r]){var i=t[r][s];try{i[0].apply(e,n)}catch(o){Ur.console&&Sa.error("jsPDF PubSub Error",o.message,o)}i[1]&&a.push(s)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function VS(e){if(!(this instanceof VS))return new VS(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function wee(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function xp(e,t,r,n,a){if(!(this instanceof xp))return new xp(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,wee.call(this,n,a)}function Kv(e,t,r,n,a){if(!(this instanceof Kv))return new Kv(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,wee.call(this,n,a)}function xr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],s=arguments[3],i=[],o=1,c=16,u="S",d=null;ga(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,s=e.compress||e.compressPdf||s,(d=e.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),i=e.filters||(s===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,h={},p={internal:{},__private__:{}};p.__private__.PubSub=KQ;var g="1.3",v=p.__private__.getPdfVersion=function(){return g};p.__private__.setPdfVersion=function(W){g=W};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(W){return b[W]};a=a||"a4";var C={COMPAT:"compat",ADVANCED:"advanced"},N=C.COMPAT;function T(){this.saveGraphicsState(),he(new $t(yt,0,0,-yt,0,Di()*yt).toString()+" cm"),this.setFontSize(this.getFontSize()/yt),u="n",N=C.ADVANCED}function S(){this.restoreGraphicsState(),u="S",N=C.COMPAT}var B=p.__private__.combineFontStyleAndFontWeight=function(W,de){if(W=="bold"&&de=="normal"||W=="bold"&&de==400||W=="normal"&&de=="italic"||W=="bold"&&de=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return de&&(W=de==400||de==="normal"?W==="italic"?"italic":"normal":de!=700&&de!=="bold"||W!=="normal"?(de==700?"bold":de)+""+W:"bold"),W};p.advancedAPI=function(W){var de=N===C.COMPAT;return de&&T.call(this),typeof W!="function"||(W(this),de&&S.call(this)),this},p.compatAPI=function(W){var de=N===C.ADVANCED;return de&&S.call(this),typeof W!="function"||(W(this),de&&T.call(this)),this},p.isAdvancedAPI=function(){return N===C.ADVANCED};var w,_=function(W){if(N!==C.ADVANCED)throw new Error(W+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},F=p.roundToPrecision=p.__private__.roundToPrecision=function(W,de){var Fe=t||de;if(isNaN(W)||isNaN(Fe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return W.toFixed(Fe).replace(/0+$/,"")};w=p.hpf=p.__private__.hpf=typeof c=="number"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return F(W,c)}:c==="smart"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return F(W,W>-1&&W<1?16:5)}:function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return F(W,16)};var M=p.f2=p.__private__.f2=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f2");return F(W,2)},D=p.__private__.f3=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f3");return F(W,3)},I=p.scale=p.__private__.scale=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.scale");return N===C.COMPAT?W*yt:N===C.ADVANCED?W:void 0},U=function(W){return N===C.COMPAT?Di()-W:N===C.ADVANCED?W:void 0},P=function(W){return I(U(W))};p.__private__.setPrecision=p.setPrecision=function(W){typeof parseInt(W,10)=="number"&&(t=parseInt(W,10))};var X,H="00000000000000000000000000000000",Y=p.__private__.getFileId=function(){return H},V=p.__private__.setFileId=function(W){return H=W!==void 0&&/^[a-fA-F0-9]{32}$/.test(W)?W.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(ua=new Mv(d.userPermissions,d.userPassword,d.ownerPassword,H)),H};p.setFileId=function(W){return V(W),this},p.getFileId=function(){return Y()};var z=p.__private__.convertDateToPDFDate=function(W){var de=W.getTimezoneOffset(),Fe=de<0?"+":"-",Le=Math.floor(Math.abs(de/60)),Ge=Math.abs(de%60),xt=[Fe,J(Le),"'",J(Ge),"'"].join("");return["D:",W.getFullYear(),J(W.getMonth()+1),J(W.getDate()),J(W.getHours()),J(W.getMinutes()),J(W.getSeconds()),xt].join("")},G=p.__private__.convertPDFDateToDate=function(W){var de=parseInt(W.substr(2,4),10),Fe=parseInt(W.substr(6,2),10)-1,Le=parseInt(W.substr(8,2),10),Ge=parseInt(W.substr(10,2),10),xt=parseInt(W.substr(12,2),10),Lt=parseInt(W.substr(14,2),10);return new Date(de,Fe,Le,Ge,xt,Lt,0)},re=p.__private__.setCreationDate=function(W){var de;if(W===void 0&&(W=new Date),W instanceof Date)de=z(W);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(W))throw new Error("Invalid argument passed to jsPDF.setCreationDate");de=W}return X=de},R=p.__private__.getCreationDate=function(W){var de=X;return W==="jsDate"&&(de=G(X)),de};p.setCreationDate=function(W){return re(W),this},p.getCreationDate=function(W){return R(W)};var q,J=p.__private__.padd2=function(W){return("0"+parseInt(W)).slice(-2)},te=p.__private__.padd2Hex=function(W){return("00"+(W=W.toString())).substr(W.length)},ie=0,Ae=[],oe=[],ce=0,pe=[],Ie=[],ne=!1,Se=oe,De=function(){ie=0,ce=0,oe=[],Ae=[],pe=[],Ee=ra(),Ce=ra()};p.__private__.setCustomOutputDestination=function(W){ne=!0,Se=W};var _e=function(W){ne||(Se=W)};p.__private__.resetCustomOutputDestination=function(){ne=!1,Se=oe};var he=p.__private__.out=function(W){return W=W.toString(),ce+=W.length+1,Se.push(W),Se},je=p.__private__.write=function(W){return he(arguments.length===1?W.toString():Array.prototype.join.call(arguments," "))},He=p.__private__.getArrayBuffer=function(W){for(var de=W.length,Fe=new ArrayBuffer(de),Le=new Uint8Array(Fe);de--;)Le[de]=W.charCodeAt(de);return Fe},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Xe};var ye=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(W){return ye=N===C.ADVANCED?W/yt:W,this};var Oe,Re=p.__private__.getFontSize=p.getFontSize=function(){return N===C.COMPAT?ye:ye*yt},qe=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(W){return qe=W,this},p.__private__.getR2L=p.getR2L=function(){return qe};var Ze,ot=p.__private__.setZoomMode=function(W){var de=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(W))Oe=W;else if(isNaN(W)){if(de.indexOf(W)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+W+'" is not recognized.');Oe=W}else Oe=parseInt(W,10)};p.__private__.getZoomMode=function(){return Oe};var mt,Tt=p.__private__.setPageMode=function(W){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(W)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+W+'" is not recognized.');Ze=W};p.__private__.getPageMode=function(){return Ze};var Mt=p.__private__.setLayoutMode=function(W){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(W)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+W+'" is not recognized.');mt=W};p.__private__.getLayoutMode=function(){return mt},p.__private__.setDisplayMode=p.setDisplayMode=function(W,de,Fe){return ot(W),Mt(de),Tt(Fe),this};var Dt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(W){if(Object.keys(Dt).indexOf(W)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Dt[W]},p.__private__.getDocumentProperties=function(){return Dt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(W){for(var de in Dt)Dt.hasOwnProperty(de)&&W[de]&&(Dt[de]=W[de]);return this},p.__private__.setDocumentProperty=function(W,de){if(Object.keys(Dt).indexOf(W)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Dt[W]=de};var Qt,yt,kr,rr,an,_r={},zr={},Fn=[],Fr={},vt={},pt={},Je={},gt=null,dt=0,Pt=[],zt=new KQ(p),Lr=e.hotfixes||[],Xr={},xn={},bn=[],$t=function W(de,Fe,Le,Ge,xt,Lt){if(!(this instanceof W))return new W(de,Fe,Le,Ge,xt,Lt);isNaN(de)&&(de=1),isNaN(Fe)&&(Fe=0),isNaN(Le)&&(Le=0),isNaN(Ge)&&(Ge=1),isNaN(xt)&&(xt=0),isNaN(Lt)&&(Lt=0),this._matrix=[de,Fe,Le,Ge,xt,Lt]};Object.defineProperty($t.prototype,"sx",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty($t.prototype,"shy",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty($t.prototype,"shx",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty($t.prototype,"sy",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty($t.prototype,"tx",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty($t.prototype,"ty",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty($t.prototype,"a",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty($t.prototype,"b",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty($t.prototype,"c",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty($t.prototype,"d",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty($t.prototype,"e",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty($t.prototype,"f",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty($t.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty($t.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty($t.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty($t.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),$t.prototype.join=function(W){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(w).join(W)},$t.prototype.multiply=function(W){var de=W.sx*this.sx+W.shy*this.shx,Fe=W.sx*this.shy+W.shy*this.sy,Le=W.shx*this.sx+W.sy*this.shx,Ge=W.shx*this.shy+W.sy*this.sy,xt=W.tx*this.sx+W.ty*this.shx+this.tx,Lt=W.tx*this.shy+W.ty*this.sy+this.ty;return new $t(de,Fe,Le,Ge,xt,Lt)},$t.prototype.decompose=function(){var W=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,xt=this.ty,Lt=Math.sqrt(W*W+de*de),Zt=(W/=Lt)*Fe+(de/=Lt)*Le;Fe-=W*Zt,Le-=de*Zt;var O=Math.sqrt(Fe*Fe+Le*Le);return Zt/=O,W*(Le/=O)<de*(Fe/=O)&&(W=-W,de=-de,Zt=-Zt,Lt=-Lt),{scale:new $t(Lt,0,0,O,0,0),translate:new $t(1,0,0,1,Ge,xt),rotate:new $t(W,de,-de,W,0,0),skew:new $t(1,0,Zt,1,0,0)}},$t.prototype.toString=function(W){return this.join(" ")},$t.prototype.inversed=function(){var W=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,xt=this.ty,Lt=1/(W*Le-de*Fe),Zt=Le*Lt,O=-de*Lt,ee=-Fe*Lt,se=W*Lt;return new $t(Zt,O,ee,se,-Zt*Ge-ee*xt,-O*Ge-se*xt)},$t.prototype.applyToPoint=function(W){var de=W.x*this.sx+W.y*this.shx+this.tx,Fe=W.x*this.shy+W.y*this.sy+this.ty;return new Gu(de,Fe)},$t.prototype.applyToRectangle=function(W){var de=this.applyToPoint(W),Fe=this.applyToPoint(new Gu(W.x+W.w,W.y+W.h));return new Wd(de.x,de.y,Fe.x-de.x,Fe.y-de.y)},$t.prototype.clone=function(){var W=this.sx,de=this.shy,Fe=this.shx,Le=this.sy,Ge=this.tx,xt=this.ty;return new $t(W,de,Fe,Le,Ge,xt)},p.Matrix=$t;var rn=p.matrixMult=function(W,de){return de.multiply(W)},en=new $t(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=en;var dr=function(W,de){if(!vt[W]){var Fe=(de instanceof xp?"Sh":"P")+(Object.keys(Fr).length+1).toString(10);de.id=Fe,vt[W]=Fe,Fr[Fe]=de,zt.publish("addPattern",de)}};p.ShadingPattern=xp,p.TilingPattern=Kv,p.addShadingPattern=function(W,de){return _("addShadingPattern()"),dr(W,de),this},p.beginTilingPattern=function(W){_("beginTilingPattern()"),Jc(W.boundingBox[0],W.boundingBox[1],W.boundingBox[2]-W.boundingBox[0],W.boundingBox[3]-W.boundingBox[1],W.matrix)},p.endTilingPattern=function(W,de){_("endTilingPattern()"),de.stream=Ie[q].join(`
`),dr(W,de),zt.publish("endTilingPattern",de),bn.pop().restore()};var Yr=p.__private__.newObject=function(){var W=ra();return fe(W,!0),W},ra=p.__private__.newObjectDeferred=function(){return ie++,Ae[ie]=function(){return ce},ie},fe=function(W,de){return de=typeof de=="boolean"&&de,Ae[W]=ce,de&&he(W+" 0 obj"),W},Be=p.__private__.newAdditionalObject=function(){var W={objId:ra(),content:""};return pe.push(W),W},Ee=ra(),Ce=ra(),Ne=p.__private__.decodeColorString=function(W){var de=W.split(" ");if(de.length!==2||de[1]!=="g"&&de[1]!=="G")de.length===5&&(de[4]==="k"||de[4]==="K")&&(de=[(1-de[0])*(1-de[3]),(1-de[1])*(1-de[3]),(1-de[2])*(1-de[3]),"r"]);else{var Fe=parseFloat(de[0]);de=[Fe,Fe,Fe,"r"]}for(var Le="#",Ge=0;Ge<3;Ge++)Le+=("0"+Math.floor(255*parseFloat(de[Ge])).toString(16)).slice(-2);return Le},Te=p.__private__.encodeColorString=function(W){var de;typeof W=="string"&&(W={ch1:W});var Fe=W.ch1,Le=W.ch2,Ge=W.ch3,xt=W.ch4,Lt=W.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Fe=="string"&&Fe.charAt(0)!=="#"){var Zt=new bee(Fe);if(Zt.ok)Fe=Zt.toHex();else if(!/^\d*\.?\d*$/.test(Fe))throw new Error('Invalid color "'+Fe+'" passed to jsPDF.encodeColorString.')}if(typeof Fe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Fe)&&(Fe="#"+Fe[1]+Fe[1]+Fe[2]+Fe[2]+Fe[3]+Fe[3]),typeof Fe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Fe)){var O=parseInt(Fe.substr(1),16);Fe=O>>16&255,Le=O>>8&255,Ge=255&O}if(Le===void 0||xt===void 0&&Fe===Le&&Le===Ge)if(typeof Fe=="string")de=Fe+" "+Lt[0];else switch(W.precision){case 2:de=M(Fe/255)+" "+Lt[0];break;case 3:default:de=D(Fe/255)+" "+Lt[0]}else if(xt===void 0||ga(xt)==="object"){if(xt&&!isNaN(xt.a)&&xt.a===0)return de=["1.","1.","1.",Lt[1]].join(" ");if(typeof Fe=="string")de=[Fe,Le,Ge,Lt[1]].join(" ");else switch(W.precision){case 2:de=[M(Fe/255),M(Le/255),M(Ge/255),Lt[1]].join(" ");break;default:case 3:de=[D(Fe/255),D(Le/255),D(Ge/255),Lt[1]].join(" ")}}else if(typeof Fe=="string")de=[Fe,Le,Ge,xt,Lt[2]].join(" ");else switch(W.precision){case 2:de=[M(Fe),M(Le),M(Ge),M(xt),Lt[2]].join(" ");break;case 3:default:de=[D(Fe),D(Le),D(Ge),D(xt),Lt[2]].join(" ")}return de},Ye=p.__private__.getFilters=function(){return i},ut=p.__private__.putStream=function(W){var de=(W=W||{}).data||"",Fe=W.filters||Ye(),Le=W.alreadyAppliedFilters||[],Ge=W.addLength1||!1,xt=de.length,Lt=W.objectId,Zt=function(jr){return jr};if(d!==null&&Lt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Zt=ua.encryptor(Lt,0));var O={};Fe===!0&&(Fe=["FlateEncode"]);var ee=W.additionalKeyValues||[],se=(O=xr.API.processDataByFilters!==void 0?xr.API.processDataByFilters(de,Fe):{data:de,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(O.data.length!==0&&(ee.push({key:"Length",value:O.data.length}),Ge===!0&&ee.push({key:"Length1",value:xt})),se.length!=0)if(se.split("/").length-1==1)ee.push({key:"Filter",value:se});else{ee.push({key:"Filter",value:"["+se+"]"});for(var xe=0;xe<ee.length;xe+=1)if(ee[xe].key==="DecodeParms"){for(var ze=[],st=0;st<O.reverseChain.split("/").length-1;st+=1)ze.push("null");ze.push(ee[xe].value),ee[xe].value="["+ze.join(" ")+"]"}}he("<<");for(var Ut=0;Ut<ee.length;Ut++)he("/"+ee[Ut].key+" "+ee[Ut].value);he(">>"),O.data.length!==0&&(he("stream"),he(Zt(O.data)),he("endstream"))},$e=p.__private__.putPage=function(W){var de=W.number,Fe=W.data,Le=W.objId,Ge=W.contentsObjId;fe(Le,!0),he("<</Type /Page"),he("/Parent "+W.rootDictionaryObjId+" 0 R"),he("/Resources "+W.resourceDictionaryObjId+" 0 R"),he("/MediaBox ["+parseFloat(w(W.mediaBox.bottomLeftX))+" "+parseFloat(w(W.mediaBox.bottomLeftY))+" "+w(W.mediaBox.topRightX)+" "+w(W.mediaBox.topRightY)+"]"),W.cropBox!==null&&he("/CropBox ["+w(W.cropBox.bottomLeftX)+" "+w(W.cropBox.bottomLeftY)+" "+w(W.cropBox.topRightX)+" "+w(W.cropBox.topRightY)+"]"),W.bleedBox!==null&&he("/BleedBox ["+w(W.bleedBox.bottomLeftX)+" "+w(W.bleedBox.bottomLeftY)+" "+w(W.bleedBox.topRightX)+" "+w(W.bleedBox.topRightY)+"]"),W.trimBox!==null&&he("/TrimBox ["+w(W.trimBox.bottomLeftX)+" "+w(W.trimBox.bottomLeftY)+" "+w(W.trimBox.topRightX)+" "+w(W.trimBox.topRightY)+"]"),W.artBox!==null&&he("/ArtBox ["+w(W.artBox.bottomLeftX)+" "+w(W.artBox.bottomLeftY)+" "+w(W.artBox.topRightX)+" "+w(W.artBox.topRightY)+"]"),typeof W.userUnit=="number"&&W.userUnit!==1&&he("/UserUnit "+W.userUnit),zt.publish("putPage",{objId:Le,pageContext:Pt[de],pageNumber:de,page:Fe}),he("/Contents "+Ge+" 0 R"),he(">>"),he("endobj");var xt=Fe.join(`
`);return N===C.ADVANCED&&(xt+=`
Q`),fe(Ge,!0),ut({data:xt,filters:Ye(),objectId:Ge}),he("endobj"),Le},tt=p.__private__.putPages=function(){var W,de,Fe=[];for(W=1;W<=dt;W++)Pt[W].objId=ra(),Pt[W].contentsObjId=ra();for(W=1;W<=dt;W++)Fe.push($e({number:W,data:Ie[W],objId:Pt[W].objId,contentsObjId:Pt[W].contentsObjId,mediaBox:Pt[W].mediaBox,cropBox:Pt[W].cropBox,bleedBox:Pt[W].bleedBox,trimBox:Pt[W].trimBox,artBox:Pt[W].artBox,userUnit:Pt[W].userUnit,rootDictionaryObjId:Ee,resourceDictionaryObjId:Ce}));fe(Ee,!0),he("<</Type /Pages");var Le="/Kids [";for(de=0;de<dt;de++)Le+=Fe[de]+" 0 R ";he(Le+"]"),he("/Count "+dt),he(">>"),he("endobj"),zt.publish("postPutPages")},at=function(W){zt.publish("putFont",{font:W,out:he,newObject:Yr,putStream:ut}),W.isAlreadyPutted!==!0&&(W.objectNumber=Yr(),he("<<"),he("/Type /Font"),he("/BaseFont /"+Uv(W.postScriptName)),he("/Subtype /Type1"),typeof W.encoding=="string"&&he("/Encoding /"+W.encoding),he("/FirstChar 32"),he("/LastChar 255"),he(">>"),he("endobj"))},jt=function(){for(var W in _r)_r.hasOwnProperty(W)&&(f===!1||f===!0&&h.hasOwnProperty(W))&&at(_r[W])},Vt=function(W){W.objectNumber=Yr();var de=[];de.push({key:"Type",value:"/XObject"}),de.push({key:"Subtype",value:"/Form"}),de.push({key:"BBox",value:"["+[w(W.x),w(W.y),w(W.x+W.width),w(W.y+W.height)].join(" ")+"]"}),de.push({key:"Matrix",value:"["+W.matrix.toString()+"]"});var Fe=W.pages[1].join(`
`);ut({data:Fe,additionalKeyValues:de,objectId:W.objectNumber}),he("endobj")},Jt=function(){for(var W in Xr)Xr.hasOwnProperty(W)&&Vt(Xr[W])},Ht=function(W,de){var Fe,Le=[],Ge=1/(de-1);for(Fe=0;Fe<1;Fe+=Ge)Le.push(Fe);if(Le.push(1),W[0].offset!=0){var xt={offset:0,color:W[0].color};W.unshift(xt)}if(W[W.length-1].offset!=1){var Lt={offset:1,color:W[W.length-1].color};W.push(Lt)}for(var Zt="",O=0,ee=0;ee<Le.length;ee++){for(Fe=Le[ee];Fe>W[O+1].offset;)O++;var se=W[O].offset,xe=(Fe-se)/(W[O+1].offset-se),ze=W[O].color,st=W[O+1].color;Zt+=te(Math.round((1-xe)*ze[0]+xe*st[0]).toString(16))+te(Math.round((1-xe)*ze[1]+xe*st[1]).toString(16))+te(Math.round((1-xe)*ze[2]+xe*st[2]).toString(16))}return Zt.trim()},Gt=function(W,de){de||(de=21);var Fe=Yr(),Le=Ht(W.colors,de),Ge=[];Ge.push({key:"FunctionType",value:"0"}),Ge.push({key:"Domain",value:"[0.0 1.0]"}),Ge.push({key:"Size",value:"["+de+"]"}),Ge.push({key:"BitsPerSample",value:"8"}),Ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ut({data:Le,additionalKeyValues:Ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Fe}),he("endobj"),W.objectNumber=Yr(),he("<< /ShadingType "+W.type),he("/ColorSpace /DeviceRGB");var xt="/Coords ["+w(parseFloat(W.coords[0]))+" "+w(parseFloat(W.coords[1]))+" ";W.type===2?xt+=w(parseFloat(W.coords[2]))+" "+w(parseFloat(W.coords[3])):xt+=w(parseFloat(W.coords[2]))+" "+w(parseFloat(W.coords[3]))+" "+w(parseFloat(W.coords[4]))+" "+w(parseFloat(W.coords[5])),he(xt+="]"),W.matrix&&he("/Matrix ["+W.matrix.toString()+"]"),he("/Function "+Fe+" 0 R"),he("/Extend [true true]"),he(">>"),he("endobj")},Sr=function(W,de){var Fe=ra(),Le=Yr();de.push({resourcesOid:Fe,objectOid:Le}),W.objectNumber=Le;var Ge=[];Ge.push({key:"Type",value:"/Pattern"}),Ge.push({key:"PatternType",value:"1"}),Ge.push({key:"PaintType",value:"1"}),Ge.push({key:"TilingType",value:"1"}),Ge.push({key:"BBox",value:"["+W.boundingBox.map(w).join(" ")+"]"}),Ge.push({key:"XStep",value:w(W.xStep)}),Ge.push({key:"YStep",value:w(W.yStep)}),Ge.push({key:"Resources",value:Fe+" 0 R"}),W.matrix&&Ge.push({key:"Matrix",value:"["+W.matrix.toString()+"]"}),ut({data:W.stream,additionalKeyValues:Ge,objectId:W.objectNumber}),he("endobj")},sn=function(W){var de;for(de in Fr)Fr.hasOwnProperty(de)&&(Fr[de]instanceof xp?Gt(Fr[de]):Fr[de]instanceof Kv&&Sr(Fr[de],W))},on=function(W){for(var de in W.objectNumber=Yr(),he("<<"),W)switch(de){case"opacity":he("/ca "+M(W[de]));break;case"stroke-opacity":he("/CA "+M(W[de]))}he(">>"),he("endobj")},An=function(){var W;for(W in pt)pt.hasOwnProperty(W)&&on(pt[W])},ms=function(){for(var W in he("/XObject <<"),Xr)Xr.hasOwnProperty(W)&&Xr[W].objectNumber>=0&&he("/"+W+" "+Xr[W].objectNumber+" 0 R");zt.publish("putXobjectDict"),he(">>")},bo=function(){ua.oid=Yr(),he("<<"),he("/Filter /Standard"),he("/V "+ua.v),he("/R "+ua.r),he("/U <"+ua.toHexString(ua.U)+">"),he("/O <"+ua.toHexString(ua.O)+">"),he("/P "+ua.P),he(">>"),he("endobj")},ps=function(){for(var W in he("/Font <<"),_r)_r.hasOwnProperty(W)&&(f===!1||f===!0&&h.hasOwnProperty(W))&&he("/"+W+" "+_r[W].objectNumber+" 0 R");he(">>")},Zs=function(){if(Object.keys(Fr).length>0){for(var W in he("/Shading <<"),Fr)Fr.hasOwnProperty(W)&&Fr[W]instanceof xp&&Fr[W].objectNumber>=0&&he("/"+W+" "+Fr[W].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),he(">>")}},Fs=function(W){if(Object.keys(Fr).length>0){for(var de in he("/Pattern <<"),Fr)Fr.hasOwnProperty(de)&&Fr[de]instanceof p.TilingPattern&&Fr[de].objectNumber>=0&&Fr[de].objectNumber<W&&he("/"+de+" "+Fr[de].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),he(">>")}},gi=function(){if(Object.keys(pt).length>0){var W;for(W in he("/ExtGState <<"),pt)pt.hasOwnProperty(W)&&pt[W].objectNumber>=0&&he("/"+W+" "+pt[W].objectNumber+" 0 R");zt.publish("putGStateDict"),he(">>")}},xa=function(W){fe(W.resourcesOid,!0),he("<<"),he("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ps(),Zs(),Fs(W.objectOid),gi(),ms(),he(">>"),he("endobj")},ei=function(){var W=[];jt(),An(),Jt(),sn(W),zt.publish("putResources"),W.forEach(xa),xa({resourcesOid:Ce,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")},zd=function(){zt.publish("putAdditionalObjects");for(var W=0;W<pe.length;W++){var de=pe[W];fe(de.objId,!0),he(de.content),he("endobj")}zt.publish("postPutAdditionalObjects")},Rh=function(W){zr[W.fontName]=zr[W.fontName]||{},zr[W.fontName][W.fontStyle]=W.id},Vc=function(W,de,Fe,Le,Ge){var xt={id:"F"+(Object.keys(_r).length+1).toString(10),postScriptName:W,fontName:de,fontStyle:Fe,encoding:Le,isStandardFont:Ge||!1,metadata:{}};return zt.publish("addFont",{font:xt,instance:this}),_r[xt.id]=xt,Rh(xt),xt.id},sf=function(W){for(var de=0,Fe=Xe.length;de<Fe;de++){var Le=Vc.call(this,W[de][0],W[de][1],W[de][2],Xe[de][3],!0);f===!1&&(h[Le]=!0);var Ge=W[de][0].split("-");Rh({id:Le,fontName:Ge[0],fontStyle:Ge[1]||""})}zt.publish("addFonts",{fonts:_r,dictionary:zr})},vi=function(W){return W.foo=function(){try{return W.apply(this,arguments)}catch(Le){var de=Le.stack||"";~de.indexOf(" at ")&&(de=de.split(" at ")[1]);var Fe="Error in function "+de.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Ur.console)throw new Error(Fe);Ur.console.error(Fe,Le),Ur.alert&&alert(Fe)}},W.foo.bar=W,W.foo},$d=function(W,de){var Fe,Le,Ge,xt,Lt,Zt,O,ee,se;if(Ge=(de=de||{}).sourceEncoding||"Unicode",Lt=de.outputEncoding,(de.autoencode||Lt)&&_r[Qt].metadata&&_r[Qt].metadata[Ge]&&_r[Qt].metadata[Ge].encoding&&(xt=_r[Qt].metadata[Ge].encoding,!Lt&&_r[Qt].encoding&&(Lt=_r[Qt].encoding),!Lt&&xt.codePages&&(Lt=xt.codePages[0]),typeof Lt=="string"&&(Lt=xt[Lt]),Lt)){for(O=!1,Zt=[],Fe=0,Le=W.length;Fe<Le;Fe++)(ee=Lt[W.charCodeAt(Fe)])?Zt.push(String.fromCharCode(ee)):Zt.push(W[Fe]),Zt[Fe].charCodeAt(0)>>8&&(O=!0);W=Zt.join("")}for(Fe=W.length;O===void 0&&Fe!==0;)W.charCodeAt(Fe-1)>>8&&(O=!0),Fe--;if(!O)return W;for(Zt=de.noBOM?[]:[254,255],Fe=0,Le=W.length;Fe<Le;Fe++){if((se=(ee=W.charCodeAt(Fe))>>8)>>8)throw new Error("Character at position "+Fe+" of string '"+W+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Zt.push(se),Zt.push(ee-(se<<8))}return String.fromCharCode.apply(void 0,Zt)},On=p.__private__.pdfEscape=p.pdfEscape=function(W,de){return $d(W,de).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xi=p.__private__.beginPage=function(W){Ie[++dt]=[],Pt[dt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(W[0]),topRightY:Number(W[1])}},Cl(dt),_e(Ie[q])},zc=function(W,de){var Fe,Le,Ge;switch(r=de||r,typeof W=="string"&&(Fe=y(W.toLowerCase()),Array.isArray(Fe)&&(Le=Fe[0],Ge=Fe[1])),Array.isArray(W)&&(Le=W[0]*yt,Ge=W[1]*yt),isNaN(Le)&&(Le=a[0],Ge=a[1]),(Le>14400||Ge>14400)&&(Sa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Ge=Math.min(14400,Ge)),a=[Le,Ge],r.substr(0,1)){case"l":Ge>Le&&(a=[Ge,Le]);break;case"p":Le>Ge&&(a=[Ge,Le])}xi(a),uf(qc),he(bi),df!==0&&he(df+" J"),$u!==0&&he($u+" j"),zt.publish("addPage",{pageNumber:dt})},$c=function(W){W>0&&W<=dt&&(Ie.splice(W,1),Pt.splice(W,1),dt--,q>dt&&(q=dt),this.setPage(q))},Cl=function(W){W>0&&W<=dt&&(q=W)},zn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ie.length-1},Gc=function(W,de,Fe){var Le,Ge=void 0;return Fe=Fe||{},W=W!==void 0?W:_r[Qt].fontName,de=de!==void 0?de:_r[Qt].fontStyle,Le=W.toLowerCase(),zr[Le]!==void 0&&zr[Le][de]!==void 0?Ge=zr[Le][de]:zr[W]!==void 0&&zr[W][de]!==void 0?Ge=zr[W][de]:Fe.disableWarning===!1&&Sa.warn("Unable to look up font label for font '"+W+"', '"+de+"'. Refer to getFontList() for available fonts."),Ge||Fe.noFallback||(Ge=zr.times[de])==null&&(Ge=zr.times.normal),Ge},yo=p.__private__.putInfo=function(){var W=Yr(),de=function(Le){return Le};for(var Fe in d!==null&&(de=ua.encryptor(W,0)),he("<<"),he("/Producer ("+On(de("jsPDF "+xr.version))+")"),Dt)Dt.hasOwnProperty(Fe)&&Dt[Fe]&&he("/"+Fe.substr(0,1).toUpperCase()+Fe.substr(1)+" ("+On(de(Dt[Fe]))+")");he("/CreationDate ("+On(de(X))+")"),he(">>"),he("endobj")},nc=p.__private__.putCatalog=function(W){var de=(W=W||{}).rootDictionaryObjId||Ee;switch(Yr(),he("<<"),he("/Type /Catalog"),he("/Pages "+de+" 0 R"),Oe||(Oe="fullwidth"),Oe){case"fullwidth":he("/OpenAction [3 0 R /FitH null]");break;case"fullheight":he("/OpenAction [3 0 R /FitV null]");break;case"fullpage":he("/OpenAction [3 0 R /Fit]");break;case"original":he("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Fe=""+Oe;Fe.substr(Fe.length-1)==="%"&&(Oe=parseInt(Oe)/100),typeof Oe=="number"&&he("/OpenAction [3 0 R /XYZ null null "+M(Oe)+"]")}switch(mt||(mt="continuous"),mt){case"continuous":he("/PageLayout /OneColumn");break;case"single":he("/PageLayout /SinglePage");break;case"two":case"twoleft":he("/PageLayout /TwoColumnLeft");break;case"tworight":he("/PageLayout /TwoColumnRight")}Ze&&he("/PageMode /"+Ze),zt.publish("putCatalog"),he(">>"),he("endobj")},Lh=p.__private__.putTrailer=function(){he("trailer"),he("<<"),he("/Size "+(ie+1)),he("/Root "+ie+" 0 R"),he("/Info "+(ie-1)+" 0 R"),d!==null&&he("/Encrypt "+ua.oid+" 0 R"),he("/ID [ <"+H+"> <"+H+"> ]"),he(">>")},of=p.__private__.putHeader=function(){he("%PDF-"+g),he("%ºß¬à")},lf=p.__private__.putXRef=function(){var W="0000000000";he("xref"),he("0 "+(ie+1)),he("0000000000 65535 f ");for(var de=1;de<=ie;de++)typeof Ae[de]=="function"?he((W+Ae[de]()).slice(-10)+" 00000 n "):Ae[de]!==void 0?he((W+Ae[de]).slice(-10)+" 00000 n "):he("0000000000 00000 n ")},ac=p.__private__.buildDocument=function(){De(),_e(oe),zt.publish("buildDocument"),of(),tt(),zd(),ei(),d!==null&&bo(),yo(),nc();var W=ce;return lf(),Lh(),he("startxref"),he(""+W),he("%%EOF"),_e(Ie[q]),oe.join(`
`)},Gd=p.__private__.getBlob=function(W){return new Blob([He(W)],{type:"application/pdf"})},sc=p.output=p.__private__.output=vi(function(W,de){switch(typeof(de=de||{})=="string"?de={filename:de}:de.filename=de.filename||"generated.pdf",W){case void 0:return ac();case"save":p.save(de.filename);break;case"arraybuffer":return He(ac());case"blob":return Gd(ac());case"bloburi":case"bloburl":if(Ur.URL!==void 0&&typeof Ur.URL.createObjectURL=="function")return Ur.URL&&Ur.URL.createObjectURL(Gd(ac()))||void 0;Sa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Fe="",Le=ac();try{Fe=FF(Le)}catch{Fe=FF(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+de.filename+";base64,"+Fe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ur)==="[object Window]"){var Ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",xt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';de.pdfObjectUrl&&(Ge=de.pdfObjectUrl,xt="");var Lt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ge+'"'+xt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(de)+");<\/script></body></html>",Zt=Ur.open();return Zt!==null&&Zt.document.write(Lt),Zt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ur)==="[object Window]"){var O='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(de.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+de.filename+'" width="500px" height="400px" /></body></html>',ee=Ur.open();if(ee!==null){ee.document.write(O);var se=this;ee.document.documentElement.querySelector("#pdfViewer").onload=function(){ee.document.title=de.filename,ee.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(se.output("bloburl"))}}return ee}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ur)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",de)+'"></iframe></body></html>',ze=Ur.open();if(ze!==null&&(ze.document.write(xe),ze.document.title=de.filename),ze||typeof safari>"u")return ze;break;case"datauri":case"dataurl":return Ur.document.location.href=this.output("datauristring",de);default:return null}}),_l=function(W){return Array.isArray(Lr)===!0&&Lr.indexOf(W)>-1};switch(n){case"pt":yt=1;break;case"mm":yt=72/25.4;break;case"cm":yt=72/2.54;break;case"in":yt=72;break;case"px":yt=_l("px_scaling")==1?.75:96/72;break;case"pc":case"em":yt=12;break;case"ex":yt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);yt=n}var ua=null;re(),V();var ic=function(W){return d!==null?ua.encryptor(W,0):function(de){return de}},Sl=p.__private__.getPageInfo=p.getPageInfo=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Pt[W].objId,pageNumber:W,pageContext:Pt[W]}},Tr=p.__private__.getPageInfoByObjId=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var de in Pt)if(Pt[de].objId===W)break;return Sl(de)},Nl=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Pt[q].objId,pageNumber:q,pageContext:Pt[q]}};p.addPage=function(){return zc.apply(this,arguments),this},p.setPage=function(){return Cl.apply(this,arguments),_e.call(this,Ie[q]),this},p.insertPage=function(W){return this.addPage(),this.movePage(q,W),this},p.movePage=function(W,de){var Fe,Le;if(W>de){Fe=Ie[W],Le=Pt[W];for(var Ge=W;Ge>de;Ge--)Ie[Ge]=Ie[Ge-1],Pt[Ge]=Pt[Ge-1];Ie[de]=Fe,Pt[de]=Le,this.setPage(de)}else if(W<de){Fe=Ie[W],Le=Pt[W];for(var xt=W;xt<de;xt++)Ie[xt]=Ie[xt+1],Pt[xt]=Pt[xt+1];Ie[de]=Fe,Pt[de]=Le,this.setPage(de)}return this},p.deletePage=function(){return $c.apply(this,arguments),this},p.__private__.text=p.text=function(W,de,Fe,Le,Ge){var xt,Lt,Zt,O,ee,se,xe,ze,st,Ut=(Le=Le||{}).scope||this;if(typeof W=="number"&&typeof de=="number"&&(typeof Fe=="string"||Array.isArray(Fe))){var jr=Fe;Fe=de,de=W,W=jr}if(arguments[3]instanceof $t?(_("The transform parameter of text() with a Matrix value"),st=Ge):(Zt=arguments[4],O=arguments[5],ga(xe=arguments[3])==="object"&&xe!==null||(typeof Zt=="string"&&(O=Zt,Zt=null),typeof xe=="string"&&(O=xe,xe=null),typeof xe=="number"&&(Zt=xe,xe=null),Le={flags:xe,angle:Zt,align:O})),isNaN(de)||isNaN(Fe)||W==null)throw new Error("Invalid arguments passed to jsPDF.text");if(W.length===0)return Ut;var wn="",Kr=!1,$n=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:yn,na=Ut.internal.scaleFactor;function jl(hn){return hn=hn.split("	").join(Array(Le.TabLen||9).join(" ")),On(hn,xe)}function rs(hn){for(var mn,ba=hn.concat(),ns=[],Fl=ba.length;Fl--;)typeof(mn=ba.shift())=="string"?ns.push(mn):Array.isArray(hn)&&(mn.length===1||mn[1]===void 0&&mn[2]===void 0)?ns.push(mn[0]):ns.push([mn[0],mn[1],mn[2]]);return ns}function _o(hn,mn){var ba;if(typeof hn=="string")ba=mn(hn)[0];else if(Array.isArray(hn)){for(var ns,Fl,iA=hn.concat(),oA=[],Yu=iA.length;Yu--;)typeof(ns=iA.shift())=="string"?oA.push(mn(ns)[0]):Array.isArray(ns)&&typeof ns[0]=="string"&&(Fl=mn(ns[0],ns[1],ns[2]),oA.push([Fl[0],Fl[1],Fl[2]]));ba=oA}return ba}var eu=!1,Yd=!0;if(typeof W=="string")eu=!0;else if(Array.isArray(W)){var Hh=W.concat();Lt=[];for(var Af,Os=Hh.length;Os--;)(typeof(Af=Hh.shift())!="string"||Array.isArray(Af)&&typeof Af[0]!="string")&&(Yd=!1);eu=Yd}if(eu===!1)throw new Error('Type of text must be string or Array. "'+W+'" is not recognized.');typeof W=="string"&&(W=W.match(/[\r?\n]/)?W.split(/\r\n|\r|\n/g):[W]);var Jd=ye/Ut.internal.scaleFactor,ff=Jd*($n-1);switch(Le.baseline){case"bottom":Fe-=ff;break;case"top":Fe+=Jd-ff;break;case"hanging":Fe+=Jd-2*ff;break;case"middle":Fe+=Jd/2-ff}if((se=Le.maxWidth||0)>0&&(typeof W=="string"?W=Ut.splitTextToSize(W,se):Object.prototype.toString.call(W)==="[object Array]"&&(W=W.reduce(function(hn,mn){return hn.concat(Ut.splitTextToSize(mn,se))},[]))),xt={text:W,x:de,y:Fe,options:Le,mutex:{pdfEscape:On,activeFontKey:Qt,fonts:_r,activeFontSize:ye}},zt.publish("preProcessText",xt),W=xt.text,Zt=(Le=xt.options).angle,!(st instanceof $t)&&Zt&&typeof Zt=="number"){Zt*=Math.PI/180,Le.rotationDirection===0&&(Zt=-Zt),N===C.ADVANCED&&(Zt=-Zt);var hf=Math.cos(Zt),Vh=Math.sin(Zt);st=new $t(hf,Vh,-Vh,hf,0,0)}else Zt&&Zt instanceof $t&&(st=Zt);N!==C.ADVANCED||st||(st=en),(ee=Le.charSpace||zu)!==void 0&&(wn+=w(I(ee))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ze=Le.horizontalScale)!==void 0&&(wn+=w(100*ze)+` Tz
`),Le.lang;var So=-1,G1=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,Mm=Ut.internal.getCurrentPageInfo().pageContext;switch(G1){case 0:case!1:case"fill":So=0;break;case 1:case!0:case"stroke":So=1;break;case 2:case"fillThenStroke":So=2;break;case 3:case"invisible":So=3;break;case 4:case"fillAndAddForClipping":So=4;break;case 5:case"strokeAndAddPathForClipping":So=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":So=6;break;case 7:case"addToPathForClipping":So=7}var jg=Mm.usedRenderingMode!==void 0?Mm.usedRenderingMode:-1;So!==-1?wn+=So+` Tr
`:jg!==-1&&(wn+=`0 Tr
`),So!==-1&&(Mm.usedRenderingMode=So),O=Le.align||"left";var Il,ti=ye*$n,Zd=Ut.internal.pageSize.getWidth(),Um=_r[Qt];ee=Le.charSpace||zu,se=Le.maxWidth||0,xe=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var Wu=[],eA=function(hn){return Ut.getStringUnitWidth(hn,{font:Um,charSpace:ee,fontSize:ye,doKerning:!1})*ye/na};if(Object.prototype.toString.call(W)==="[object Array]"){var no;Lt=rs(W),O!=="left"&&(Il=Lt.map(eA));var yi,tA=0;if(O==="right"){de-=Il[0],W=[],Os=Lt.length;for(var No=0;No<Os;No++)No===0?(yi=Oi(de),no=vs(Fe)):(yi=I(tA-Il[No]),no=-ti),W.push([Lt[No],yi,no]),tA=Il[No]}else if(O==="center"){de-=Il[0]/2,W=[],Os=Lt.length;for(var uc=0;uc<Os;uc++)uc===0?(yi=Oi(de),no=vs(Fe)):(yi=I((tA-Il[uc])/2),no=-ti),W.push([Lt[uc],yi,no]),tA=Il[uc]}else if(O==="left"){W=[],Os=Lt.length;for(var tu=0;tu<Os;tu++)W.push(Lt[tu])}else if(O==="justify"&&Um.encoding==="Identity-H"){W=[],Os=Lt.length,se=se!==0?se:Zd;for(var dc=0,Ga=0;Ga<Os;Ga++)if(no=Ga===0?vs(Fe):-ti,yi=Ga===0?Oi(de):dc,Ga<Os-1){var Ac=I((se-Il[Ga])/(Lt[Ga].split(" ").length-1)),xs=Lt[Ga].split(" ");W.push([xs[0]+" ",yi,no]),dc=0;for(var ko=1;ko<xs.length;ko++){var mf=(eA(xs[ko-1]+" "+xs[ko])-eA(xs[ko]))*na+Ac;ko==xs.length-1?W.push([xs[ko],mf,0]):W.push([xs[ko]+" ",mf,0]),dc-=mf}}else W.push([Lt[Ga],yi,no]);W.push(["",dc,0])}else{if(O!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(W=[],Os=Lt.length,se=se!==0?se:Zd,Ga=0;Ga<Os;Ga++)no=Ga===0?vs(Fe):-ti,yi=Ga===0?Oi(de):0,Ga<Os-1?Wu.push(w(I((se-Il[Ga])/(Lt[Ga].split(" ").length-1)))):Wu.push(0),W.push([Lt[Ga],yi,no])}}var ru=typeof Le.R2L=="boolean"?Le.R2L:qe;ru===!0&&(W=_o(W,function(hn,mn,ba){return[hn.split("").reverse().join(""),mn,ba]})),xt={text:W,x:de,y:Fe,options:Le,mutex:{pdfEscape:On,activeFontKey:Qt,fonts:_r,activeFontSize:ye}},zt.publish("postProcessText",xt),W=xt.text,Kr=xt.mutex.isHex||!1;var zh=_r[Qt].encoding;zh!=="WinAnsiEncoding"&&zh!=="StandardEncoding"||(W=_o(W,function(hn,mn,ba){return[jl(hn),mn,ba]})),Lt=rs(W),W=[];for(var rA,nA,aA,pf=0,$h=1,sA=Array.isArray(Lt[0])?$h:pf,Xu="",gf=function(hn,mn,ba){var ns="";return ba instanceof $t?(ba=typeof Le.angle=="number"?rn(ba,new $t(1,0,0,1,hn,mn)):rn(new $t(1,0,0,1,hn,mn),ba),N===C.ADVANCED&&(ba=rn(new $t(1,0,0,-1,0,0),ba)),ns=ba.join(" ")+` Tm
`):ns=w(hn)+" "+w(mn)+` Td
`,ns},Ka=0;Ka<Lt.length;Ka++){switch(Xu="",sA){case $h:aA=(Kr?"<":"(")+Lt[Ka][0]+(Kr?">":")"),rA=parseFloat(Lt[Ka][1]),nA=parseFloat(Lt[Ka][2]);break;case pf:aA=(Kr?"<":"(")+Lt[Ka]+(Kr?">":")"),rA=Oi(de),nA=vs(Fe)}Wu!==void 0&&Wu[Ka]!==void 0&&(Xu=Wu[Ka]+` Tw
`),Ka===0?W.push(Xu+gf(rA,nA,st)+aA):sA===pf?W.push(Xu+aA):sA===$h&&W.push(Xu+gf(rA,nA,st)+aA)}W=sA===pf?W.join(` Tj
T* `):W.join(` Tj
`),W+=` Tj
`;var il=`BT
/`;return il+=Qt+" "+ye+` Tf
`,il+=w(ye*$n)+` TL
`,il+=lc+`
`,il+=wn,il+=W,he(il+="ET"),h[Qt]=!0,Ut};var Mh=p.__private__.clip=p.clip=function(W){return he(W==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Mh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return he("n"),this};var Ii=p.__private__.isValidStyle=function(W){var de=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(W)!==-1&&(de=!0),de};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(W){return Ii(W)&&(u=W),this};var wo=p.__private__.getStyle=p.getStyle=function(W){var de=u;switch(W){case"D":case"S":de="S";break;case"F":de="f";break;case"FD":case"DF":de="B";break;case"f":case"f*":case"B":case"B*":de=W}return de},ro=p.close=function(){return he("h"),this};p.stroke=function(){return he("S"),this},p.fill=function(W){return kl("f",W),this},p.fillEvenOdd=function(W){return kl("f*",W),this},p.fillStroke=function(W){return kl("B",W),this},p.fillStrokeEvenOdd=function(W){return kl("B*",W),this};var kl=function(W,de){ga(de)==="object"?oc(de,W):he(W)},Eo=function(W){W===null||N===C.ADVANCED&&W===void 0||(W=wo(W),he(W))};function Kc(W,de,Fe,Le,Ge){var xt=new Kv(de||this.boundingBox,Fe||this.xStep,Le||this.yStep,this.gState,Ge||this.matrix);xt.stream=this.stream;var Lt=W+"$$"+this.cloneIndex+++"$$";return dr(Lt,xt),xt}var oc=function(W,de){var Fe=vt[W.key],Le=Fr[Fe];if(Le instanceof xp)he("q"),he(cf(de)),Le.gState&&p.setGState(Le.gState),he(W.matrix.toString()+" cm"),he("/"+Fe+" sh"),he("Q");else if(Le instanceof Kv){var Ge=new $t(1,0,0,-1,0,Di());W.matrix&&(Ge=Ge.multiply(W.matrix||en),Fe=Kc.call(Le,W.key,W.boundingBox,W.xStep,W.yStep,Ge).id),he("q"),he("/Pattern cs"),he("/"+Fe+" scn"),Le.gState&&p.setGState(Le.gState),he(de),he("Q")}},cf=function(W){switch(W){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Co=p.moveTo=function(W,de){return he(w(I(W))+" "+w(P(de))+" m"),this},Fi=p.lineTo=function(W,de){return he(w(I(W))+" "+w(P(de))+" l"),this},Bl=p.curveTo=function(W,de,Fe,Le,Ge,xt){return he([w(I(W)),w(P(de)),w(I(Fe)),w(P(Le)),w(I(Ge)),w(P(xt)),"c"].join(" ")),this};p.__private__.line=p.line=function(W,de,Fe,Le,Ge){if(isNaN(W)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!Ii(Ge))throw new Error("Invalid arguments passed to jsPDF.line");return N===C.COMPAT?this.lines([[Fe-W,Le-de]],W,de,[1,1],Ge||"S"):this.lines([[Fe-W,Le-de]],W,de,[1,1]).stroke()},p.__private__.lines=p.lines=function(W,de,Fe,Le,Ge,xt){var Lt,Zt,O,ee,se,xe,ze,st,Ut,jr,wn,Kr;if(typeof W=="number"&&(Kr=Fe,Fe=de,de=W,W=Kr),Le=Le||[1,1],xt=xt||!1,isNaN(de)||isNaN(Fe)||!Array.isArray(W)||!Array.isArray(Le)||!Ii(Ge)||typeof xt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Co(de,Fe),Lt=Le[0],Zt=Le[1],ee=W.length,jr=de,wn=Fe,O=0;O<ee;O++)(se=W[O]).length===2?(jr=se[0]*Lt+jr,wn=se[1]*Zt+wn,Fi(jr,wn)):(xe=se[0]*Lt+jr,ze=se[1]*Zt+wn,st=se[2]*Lt+jr,Ut=se[3]*Zt+wn,jr=se[4]*Lt+jr,wn=se[5]*Zt+wn,Bl(xe,ze,st,Ut,jr,wn));return xt&&ro(),Eo(Ge),this},p.path=function(W){for(var de=0;de<W.length;de++){var Fe=W[de],Le=Fe.c;switch(Fe.op){case"m":Co(Le[0],Le[1]);break;case"l":Fi(Le[0],Le[1]);break;case"c":Bl.apply(this,Le);break;case"h":ro()}}return this},p.__private__.rect=p.rect=function(W,de,Fe,Le,Ge){if(isNaN(W)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!Ii(Ge))throw new Error("Invalid arguments passed to jsPDF.rect");return N===C.COMPAT&&(Le=-Le),he([w(I(W)),w(P(de)),w(I(Fe)),w(I(Le)),"re"].join(" ")),Eo(Ge),this},p.__private__.triangle=p.triangle=function(W,de,Fe,Le,Ge,xt,Lt){if(isNaN(W)||isNaN(de)||isNaN(Fe)||isNaN(Le)||isNaN(Ge)||isNaN(xt)||!Ii(Lt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Fe-W,Le-de],[Ge-Fe,xt-Le],[W-Ge,de-xt]],W,de,[1,1],Lt,!0),this},p.__private__.roundedRect=p.roundedRect=function(W,de,Fe,Le,Ge,xt,Lt){if(isNaN(W)||isNaN(de)||isNaN(Fe)||isNaN(Le)||isNaN(Ge)||isNaN(xt)||!Ii(Lt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Zt=4/3*(Math.SQRT2-1);return Ge=Math.min(Ge,.5*Fe),xt=Math.min(xt,.5*Le),this.lines([[Fe-2*Ge,0],[Ge*Zt,0,Ge,xt-xt*Zt,Ge,xt],[0,Le-2*xt],[0,xt*Zt,-Ge*Zt,xt,-Ge,xt],[2*Ge-Fe,0],[-Ge*Zt,0,-Ge,-xt*Zt,-Ge,-xt],[0,2*xt-Le],[0,-xt*Zt,Ge*Zt,-xt,Ge,-xt]],W+Ge,de,[1,1],Lt,!0),this},p.__private__.ellipse=p.ellipse=function(W,de,Fe,Le,Ge){if(isNaN(W)||isNaN(de)||isNaN(Fe)||isNaN(Le)||!Ii(Ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var xt=4/3*(Math.SQRT2-1)*Fe,Lt=4/3*(Math.SQRT2-1)*Le;return Co(W+Fe,de),Bl(W+Fe,de-Lt,W+xt,de-Le,W,de-Le),Bl(W-xt,de-Le,W-Fe,de-Lt,W-Fe,de),Bl(W-Fe,de+Lt,W-xt,de+Le,W,de+Le),Bl(W+xt,de+Le,W+Fe,de+Lt,W+Fe,de),Eo(Ge),this},p.__private__.circle=p.circle=function(W,de,Fe,Le){if(isNaN(W)||isNaN(de)||isNaN(Fe)||!Ii(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(W,de,Fe,Fe,Le)},p.setFont=function(W,de,Fe){return Fe&&(de=B(de,Fe)),Qt=Gc(W,de,{disableWarning:!1}),this};var gs=p.__private__.getFont=p.getFont=function(){return _r[Gc.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var W,de,Fe={};for(W in zr)if(zr.hasOwnProperty(W))for(de in Fe[W]=[],zr[W])zr[W].hasOwnProperty(de)&&Fe[W].push(de);return Fe},p.addFont=function(W,de,Fe,Le,Ge){var xt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&xt.indexOf(arguments[3])!==-1?Ge=arguments[3]:arguments[3]&&xt.indexOf(arguments[3])==-1&&(Fe=B(Fe,Le)),Ge=Ge||"Identity-H",Vc.call(this,W,de,Fe,Ge)};var yn,qc=e.lineWidth||.200025,Tl=p.__private__.getLineWidth=p.getLineWidth=function(){return qc},uf=p.__private__.setLineWidth=p.setLineWidth=function(W){return qc=W,he(w(I(W))+" w"),this};p.__private__.setLineDash=xr.API.setLineDash=xr.API.setLineDashPattern=function(W,de){if(W=W||[],de=de||0,isNaN(de)||!Array.isArray(W))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return W=W.map(function(Fe){return w(I(Fe))}).join(" "),de=w(I(de)),he("["+W+"] "+de+" d"),this};var Hu=p.__private__.getLineHeight=p.getLineHeight=function(){return ye*yn};p.__private__.getLineHeight=p.getLineHeight=function(){return ye*yn};var Vu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(W){return typeof(W=W||1.15)=="number"&&(yn=W),this},sl=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return yn};Vu(e.lineHeight);var Oi=p.__private__.getHorizontalCoordinate=function(W){return I(W)},vs=p.__private__.getVerticalCoordinate=function(W){return N===C.ADVANCED?W:Pt[q].mediaBox.topRightY-Pt[q].mediaBox.bottomLeftY-I(W)},Uh=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(W){return w(Oi(W))},Wc=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(W){return w(vs(W))},bi=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ne(bi)},p.__private__.setStrokeColor=p.setDrawColor=function(W,de,Fe,Le){return bi=Te({ch1:W,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"draw",precision:2}),he(bi),this};var Xc=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ne(Xc)},p.__private__.setFillColor=p.setFillColor=function(W,de,Fe,Le){return Xc=Te({ch1:W,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"fill",precision:2}),he(Xc),this};var lc=e.textColor||"0 g",Kd=p.__private__.getTextColor=p.getTextColor=function(){return Ne(lc)};p.__private__.setTextColor=p.setTextColor=function(W,de,Fe,Le){return lc=Te({ch1:W,ch2:de,ch3:Fe,ch4:Le,pdfColorType:"text",precision:3}),this};var zu=e.charSpace,qd=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(zu||0)};p.__private__.setCharSpace=p.setCharSpace=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return zu=W,this};var df=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(W){var de=p.CapJoinStyles[W];if(de===void 0)throw new Error("Line cap style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return df=de,he(de+" J"),this};var $u=0;p.__private__.setLineJoin=p.setLineJoin=function(W){var de=p.CapJoinStyles[W];if(de===void 0)throw new Error("Line join style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $u=de,he(de+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(W){if(W=W||0,isNaN(W))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return he(w(I(W))+" M"),this},p.GState=VS,p.setGState=function(W){(W=typeof W=="string"?pt[Je[W]]:Yc(null,W)).equals(gt)||(he("/"+W.id+" gs"),gt=W)};var Yc=function(W,de){if(!W||!Je[W]){var Fe=!1;for(var Le in pt)if(pt.hasOwnProperty(Le)&&pt[Le].equals(de)){Fe=!0;break}if(Fe)de=pt[Le];else{var Ge="GS"+(Object.keys(pt).length+1).toString(10);pt[Ge]=de,de.id=Ge}return W&&(Je[W]=de.id),zt.publish("addGState",de),de}};p.addGState=function(W,de){return Yc(W,de),this},p.saveGraphicsState=function(){return he("q"),Fn.push({key:Qt,size:ye,color:lc}),this},p.restoreGraphicsState=function(){he("Q");var W=Fn.pop();return Qt=W.key,ye=W.size,lc=W.color,gt=null,this},p.setCurrentTransformationMatrix=function(W){return he(W.toString()+" cm"),this},p.comment=function(W){return he("#"+W),this};var Gu=function(W,de){var Fe=W||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Fe},set:function(xt){isNaN(xt)||(Fe=parseFloat(xt))}});var Le=de||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(xt){isNaN(xt)||(Le=parseFloat(xt))}});var Ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ge},set:function(xt){Ge=xt.toString()}}),this},Wd=function(W,de,Fe,Le){Gu.call(this,W,de),this.type="rect";var Ge=Fe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ge},set:function(Lt){isNaN(Lt)||(Ge=parseFloat(Lt))}});var xt=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return xt},set:function(Lt){isNaN(Lt)||(xt=parseFloat(Lt))}}),this},Ku=function(){this.page=dt,this.currentPage=q,this.pages=Ie.slice(0),this.pagesContext=Pt.slice(0),this.x=kr,this.y=rr,this.matrix=an,this.width=Zc(q),this.height=Di(q),this.outputDestination=Se,this.id="",this.objectNumber=-1};Ku.prototype.restore=function(){dt=this.page,q=this.currentPage,Pt=this.pagesContext,Ie=this.pages,kr=this.x,rr=this.y,an=this.matrix,qu(q,this.width),Xd(q,this.height),Se=this.outputDestination};var Jc=function(W,de,Fe,Le,Ge){bn.push(new Ku),dt=q=0,Ie=[],kr=W,rr=de,an=Ge,xi([Fe,Le])},Qh=function(W){if(xn[W])bn.pop().restore();else{var de=new Ku,Fe="Xo"+(Object.keys(Xr).length+1).toString(10);de.id=Fe,xn[W]=Fe,Xr[Fe]=de,zt.publish("addFormObject",de),bn.pop().restore()}};for(var cc in p.beginFormObject=function(W,de,Fe,Le,Ge){return Jc(W,de,Fe,Le,Ge),this},p.endFormObject=function(W){return Qh(W),this},p.doFormObject=function(W,de){var Fe=Xr[xn[W]];return he("q"),he(de.toString()+" cm"),he("/"+Fe.id+" Do"),he("Q"),this},p.getFormObject=function(W){var de=Xr[xn[W]];return{x:de.x,y:de.y,width:de.width,height:de.height,matrix:de.matrix}},p.save=function(W,de){return W=W||"generated.pdf",(de=de||{}).returnPromise=de.returnPromise||!1,de.returnPromise===!1?(fp(Gd(ac()),W),typeof fp.unload=="function"&&Ur.setTimeout&&setTimeout(fp.unload,911),this):new Promise(function(Fe,Le){try{var Ge=fp(Gd(ac()),W);typeof fp.unload=="function"&&Ur.setTimeout&&setTimeout(fp.unload,911),Fe(Ge)}catch(xt){Le(xt.message)}})},xr.API)xr.API.hasOwnProperty(cc)&&(cc==="events"&&xr.API.events.length?function(W,de){var Fe,Le,Ge;for(Ge=de.length-1;Ge!==-1;Ge--)Fe=de[Ge][0],Le=de[Ge][1],W.subscribe.apply(W,[Fe].concat(typeof Le=="function"?[Le]:Le))}(zt,xr.API.events):p[cc]=xr.API[cc]);var Zc=p.getPageWidth=function(W){return(Pt[W=W||q].mediaBox.topRightX-Pt[W].mediaBox.bottomLeftX)/yt},qu=p.setPageWidth=function(W,de){Pt[W].mediaBox.topRightX=de*yt+Pt[W].mediaBox.bottomLeftX},Di=p.getPageHeight=function(W){return(Pt[W=W||q].mediaBox.topRightY-Pt[W].mediaBox.bottomLeftY)/yt},Xd=p.setPageHeight=function(W,de){Pt[W].mediaBox.topRightY=de*yt+Pt[W].mediaBox.bottomLeftY};return p.internal={pdfEscape:On,getStyle:wo,getFont:gs,getFontSize:Re,getCharSpace:qd,getTextColor:Kd,getLineHeight:Hu,getLineHeightFactor:sl,getLineWidth:Tl,write:je,getHorizontalCoordinate:Oi,getVerticalCoordinate:vs,getCoordinateString:Uh,getVerticalCoordinateString:Wc,collections:{},newObject:Yr,newAdditionalObject:Be,newObjectDeferred:ra,newObjectDeferredBegin:fe,getFilters:Ye,putStream:ut,events:zt,scaleFactor:yt,pageSize:{getWidth:function(){return Zc(q)},setWidth:function(W){qu(q,W)},getHeight:function(){return Di(q)},setHeight:function(W){Xd(q,W)}},encryptionOptions:d,encryption:ua,getEncryptor:ic,output:sc,getNumberOfPages:zn,pages:Ie,out:he,f2:M,f3:D,getPageInfo:Sl,getPageInfoByObjId:Tr,getCurrentPageInfo:Nl,getPDFVersion:v,Point:Gu,Rectangle:Wd,Matrix:$t,hasHotfix:_l},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Zc(q)},set:function(W){qu(q,W)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Di(q)},set:function(W){Xd(q,W)},enumerable:!0,configurable:!0}),sf.call(p,Xe),Qt="F1",zc(a,r),zt.publish("initialized"),p}Mv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Mv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Mv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Mv.prototype.processOwnerPassword=function(e,t){return DF(OF(t).substr(0,5),e)},Mv.prototype.encryptor=function(e,t){var r=OF(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return DF(r,n)}},VS.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ga(e)!==ga(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},xr.API={events:[]},xr.version="2.5.2";var _s=xr.API,mP=1,xg=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},uv=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jr=function(e){return e.toFixed(2)},b0=function(e){return e.toFixed(5)};_s.__acroform__={};var tc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},qQ=function(e){return e*mP},CA=function(e){var t=new Cee,r=hr.internal.getHeight(e)||0,n=hr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Jr(n)),Number(Jr(r))],t},SEe=_s.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},NEe=_s.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},kEe=_s.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Gs=_s.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return kEe(e,t-1)},Ks=_s.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return SEe(e,t-1)},qs=_s.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return NEe(e,t-1)},BEe=_s.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],s=e[1],i=e[2],o=e[3],c={};return c.lowerLeft_X=r(a)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=r(a+i)||0,c.upperRight_Y=n(s)||0,[Number(Jr(c.lowerLeft_X)),Number(Jr(c.lowerLeft_Y)),Number(Jr(c.upperRight_X)),Number(Jr(c.upperRight_Y))]},TEe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=PF(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+Jr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=CA(e);return s.scope=e.scope,s.stream=t.join(`
`),s}},PF=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(D){return D.split(`
`)}):a.map(function(D){return[D]});var s=r,i=hr.internal.getHeight(e)||0;i=i<0?-i:i;var o=hr.internal.getWidth(e)||0;o=o<0?-o:o;var c=function(D,I,U){if(D+1<a.length){var P=I+" "+a[D+1][0];return dC(P,e,U).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var u,d,f=dC("3",e,s).height,h=e.multiline?i-s:(i-f)/2,p=h+=2,g=0,v=0,b=0;if(s<=0){t=`(...) Tj
`,t+="% Width of Text: "+dC(t,e,s=12).width+", FieldWidth:"+o+`
`;break}for(var y="",C=0,N=0;N<a.length;N++)if(a.hasOwnProperty(N)){var T=!1;if(a[N].length!==1&&b!==a[N].length-1){if((f+2)*(C+2)+2>i)continue e;y+=a[N][b],T=!0,v=N,N--}else{y=(y+=a[N][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var S=parseInt(N),B=c(S,y,s),w=N>=a.length-1;if(B&&!w){y+=" ",b=0;continue}if(B||w){if(w)v=S;else if(e.multiline&&(f+2)*(C+2)+2>i)continue e}else{if(!e.multiline||(f+2)*(C+2)+2>i)continue e;v=S}}for(var _="",F=g;F<=v;F++){var M=a[F];if(e.multiline){if(F===v){_+=M[b]+" ",b=(b+1)%M.length;continue}if(F===g){_+=M[M.length-1]+" ";continue}}_+=M[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,d=dC(_,e,s).width,e.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}t+=Jr(u)+" "+Jr(p)+` Td
`,t+="("+xg(_)+`) Tj
`,t+=-Jr(u)+` 0 Td
`,p=-(s+2),d=0,g=T?v:v+1,C++,y=""}break}return n.text=t,n.fontSize=s,n},dC=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},jEe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},IEe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},FEe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ga(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[n]}},OEe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Md.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(jEe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");mP=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new _ee,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.objId=void 0,s.hasAnnotation&&IEe(s,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var s=!n;for(var i in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],c=[],u=o.Rect;if(o.Rect&&(o.Rect=BEe(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=hr.createDefaultAppearanceStream(o),ga(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=TEe(o);c.push({key:"AP",value:"<</N "+d+">>"}),a.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var f="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var p=o.appearanceStreamContent[h];if(f+="/"+h+" ",f+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var i in p)if(p.hasOwnProperty(i)){var g=p[i];typeof g=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g+" ",a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g)}}else typeof(g=p)=="function"&&(g=g.call(a,o)),f+="/"+i+" "+g,a.internal.acroformPlugin.xForms.indexOf(g)>=0||a.internal.acroformPlugin.xForms.push(g);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}a.internal.putStream({additionalKeyValues:c,objectId:o.objId}),a.internal.out("endobj")}s&&FEe(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},Eee=_s.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(i){return i};if(Array.isArray(e)){for(var a="[",s=0;s<e.length;s++)switch(s!==0&&(a+=" "),ga(e[s])){case"boolean":case"number":case"object":a+=e[s].toString();break;case"string":e[s].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+xg(n(e[s].toString()))+")"):a+=e[s].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},OT=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+xg(n(e))+")"},PA=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};PA.prototype.toString=function(){return this.objId+" 0 R"},PA.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},PA.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:Eee(a,this.objId,this.scope)}):a instanceof PA?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var Cee=function(){PA.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};tc(Cee,PA);var _ee=function(){PA.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+xg(r(e))+")"}},set:function(r){e=r}})};tc(_ee,PA);var Md=function e(){PA.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Gs(t,3)},set:function(y){y?this.F=Ks(t,3):this.F=qs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof zS)return;s="FieldObject"+e.FieldNum++}var y=function(C){return C};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+xg(y(s))+")"},set:function(y){s=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(y){s=y}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(y){i=y}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/mP:u},set:function(y){u=y}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(y){d=y}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof zS||this instanceof Dp))return OT(f,this.objId,this.scope)},set:function(y){y=y.toString(),f=y}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof $i?h:OT(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=this instanceof $i?y:y.substr(0,1)==="("?uv(y.substr(1,y.length-2)):uv(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i?uv(h.substr(1,h.length-1)):h},set:function(y){y=y.toString(),h=this instanceof $i?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof $i?p:OT(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof $i?y:y.substr(0,1)==="("?uv(y.substr(1,y.length-2)):uv(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $i?uv(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof $i?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var g,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(y){y=!!y,v=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(g)return g},set:function(y){g=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,1)},set:function(y){y?this.Ff=Ks(this.Ff,1):this.Ff=qs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,2)},set:function(y){y?this.Ff=Ks(this.Ff,2):this.Ff=qs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,3)},set:function(y){y?this.Ff=Ks(this.Ff,3):this.Ff=qs(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};tc(Md,PA);var dx=function(){Md.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Eee(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=function(s,i,o){o||(o=1);for(var c,u=[];c=i.exec(s);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,18)},set:function(r){r?this.Ff=Ks(this.Ff,18):this.Ff=qs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ks(this.Ff,19):this.Ff=qs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,20)},set:function(r){r?(this.Ff=Ks(this.Ff,20),t.sort()):this.Ff=qs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,22)},set:function(r){r?this.Ff=Ks(this.Ff,22):this.Ff=qs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,23)},set:function(r){r?this.Ff=Ks(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,27)},set:function(r){r?this.Ff=Ks(this.Ff,27):this.Ff=qs(this.Ff,27)}}),this.hasAppearanceStream=!1};tc(dx,Md);var Ax=function(){dx.call(this),this.fontName="helvetica",this.combo=!1};tc(Ax,dx);var fx=function(){Ax.call(this),this.combo=!0};tc(fx,Ax);var L_=function(){fx.call(this),this.edit=!0};tc(L_,fx);var $i=function(){Md.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,15)},set:function(r){r?this.Ff=Ks(this.Ff,15):this.Ff=qs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,16)},set:function(r){r?this.Ff=Ks(this.Ff,16):this.Ff=qs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,17)},set:function(r){r?this.Ff=Ks(this.Ff,17):this.Ff=qs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,26)},set:function(r){r?this.Ff=Ks(this.Ff,26):this.Ff=qs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(s){return s};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+xg(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ga(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};tc($i,Md);var M_=function(){$i.call(this),this.pushButton=!0};tc(M_,$i);var hx=function(){$i.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};tc(hx,$i);var zS=function(){var e,t;Md.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var s,i=[];for(s in i.push("<<"),n)i.push("/"+s+" ("+xg(a(n[s]))+")");return i.push(">>"),i.join(`
`)},set:function(a){ga(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=hr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};tc(zS,Md),hx.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},hx.prototype.createOption=function(e){var t=new zS;return t.Parent=this,t.optionName=e,this.Kids.push(t),DEe.call(this.scope,t),t};var U_=function(){$i.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=hr.CheckBox.createAppearanceStream()};tc(U_,$i);var Dp=function(){Md.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,13)},set:function(t){t?this.Ff=Ks(this.Ff,13):this.Ff=qs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,21)},set:function(t){t?this.Ff=Ks(this.Ff,21):this.Ff=qs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,23)},set:function(t){t?this.Ff=Ks(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,24)},set:function(t){t?this.Ff=Ks(this.Ff,24):this.Ff=qs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,25)},set:function(t){t?this.Ff=Ks(this.Ff,25):this.Ff=qs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,26)},set:function(t){t?this.Ff=Ks(this.Ff,26):this.Ff=qs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};tc(Dp,Md);var Q_=function(){Dp.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Gs(this.Ff,14)},set:function(e){e?this.Ff=Ks(this.Ff,14):this.Ff=qs(this.Ff,14)}}),this.password=!0};tc(Q_,Dp);var hr={CheckBox:{createAppearanceStream:function(){return{N:{On:hr.CheckBox.YesNormal},D:{On:hr.CheckBox.YesPushDown,Off:hr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=CA(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=PF(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Jr(hr.internal.getWidth(e))+" "+Jr(hr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Jr(s.fontSize)+" Tf "+a),r.push("BT"),r.push(s.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=CA(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],s=hr.internal.getHeight(e),i=hr.internal.getWidth(e),o=PF(e,e.caption);return a.push("1 g"),a.push("0 0 "+Jr(i)+" "+Jr(s)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+Jr(i-1)+" "+Jr(s-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+Jr(o.fontSize)+" Tf "+n),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=CA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jr(hr.internal.getWidth(e))+" "+Jr(hr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:hr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=hr.RadioButton.Circle.YesNormal,t.D[e]=hr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=CA(e);t.scope=e.scope;var r=[],n=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=hr.internal.Bezier_C,s=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+b0(hr.internal.getWidth(e)/2)+" "+b0(hr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),r.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),r.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),r.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=CA(e);t.scope=e.scope;var r=[],n=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*hr.internal.Bezier_C).toFixed(5)),i=Number((n*hr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+b0(hr.internal.getWidth(e)/2)+" "+b0(hr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+b0(hr.internal.getWidth(e)/2)+" "+b0(hr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=CA(e);t.scope=e.scope;var r=[],n=hr.internal.getWidth(e)<=hr.internal.getHeight(e)?hr.internal.getWidth(e)/4:hr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),s=Number((a*hr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+b0(hr.internal.getWidth(e)/2)+" "+b0(hr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),r.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),r.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),r.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:hr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=hr.RadioButton.Cross.YesNormal,t.D[e]=hr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=CA(e);t.scope=e.scope;var r=[],n=hr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Jr(hr.internal.getWidth(e)-2)+" "+Jr(hr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Jr(n.x1.x)+" "+Jr(n.x1.y)+" m"),r.push(Jr(n.x2.x)+" "+Jr(n.x2.y)+" l"),r.push(Jr(n.x4.x)+" "+Jr(n.x4.y)+" m"),r.push(Jr(n.x3.x)+" "+Jr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=CA(e);t.scope=e.scope;var r=hr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Jr(hr.internal.getWidth(e))+" "+Jr(hr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Jr(hr.internal.getWidth(e)-2)+" "+Jr(hr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Jr(r.x1.x)+" "+Jr(r.x1.y)+" m"),n.push(Jr(r.x2.x)+" "+Jr(r.x2.y)+" l"),n.push(Jr(r.x4.x)+" "+Jr(r.x4.y)+" m"),n.push(Jr(r.x3.x)+" "+Jr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=CA(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jr(hr.internal.getWidth(e))+" "+Jr(hr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};hr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=hr.internal.getWidth(e),r=hr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},hr.internal.getWidth=function(e){var t=0;return ga(e)==="object"&&(t=qQ(e.Rect[2])),t},hr.internal.getHeight=function(e){var t=0;return ga(e)==="object"&&(t=qQ(e.Rect[3])),t};var DEe=_s.addField=function(e){if(OEe(this,e),!(e instanceof Md))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};_s.AcroFormChoiceField=dx,_s.AcroFormListBox=Ax,_s.AcroFormComboBox=fx,_s.AcroFormEditBox=L_,_s.AcroFormButton=$i,_s.AcroFormPushButton=M_,_s.AcroFormRadioButton=hx,_s.AcroFormCheckBox=U_,_s.AcroFormTextField=Dp,_s.AcroFormPasswordField=Q_,_s.AcroFormAppearance=hr,_s.AcroForm={ChoiceField:dx,ListBox:Ax,ComboBox:fx,EditBox:L_,Button:$i,PushButton:M_,RadioButton:hx,CheckBox:U_,TextField:Dp,PasswordField:Q_,Appearance:hr},xr.AcroForm={ChoiceField:dx,ListBox:Ax,ComboBox:fx,EditBox:L_,Button:$i,PushButton:M_,RadioButton:hx,CheckBox:U_,TextField:Dp,PasswordField:Q_,Appearance:hr};xr.AcroForm;function See(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(D,I){var U,P,X,H,Y,V=t;if((I=I||t)==="RGBA"||D.data!==void 0&&D.data instanceof Uint8ClampedArray&&"height"in D&&"width"in D)return"RGBA";if(B(D))for(Y in r)for(X=r[Y],U=0;U<X.length;U+=1){for(H=!0,P=0;P<X[U].length;P+=1)if(X[U][P]!==void 0&&X[U][P]!==D[P]){H=!1;break}if(H===!0){V=Y;break}}else for(Y in r)for(X=r[Y],U=0;U<X.length;U+=1){for(H=!0,P=0;P<X[U].length;P+=1)if(X[U][P]!==void 0&&X[U][P]!==D.charCodeAt(P)){H=!1;break}if(H===!0){V=Y;break}}return V===t&&I!==t&&(V=I),V},a=function D(I){for(var U=this.internal.write,P=this.internal.putStream,X=(0,this.internal.getFilters)();X.indexOf("FlateEncode")!==-1;)X.splice(X.indexOf("FlateEncode"),1);I.objectId=this.internal.newObject();var H=[];if(H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Image"}),H.push({key:"Width",value:I.width}),H.push({key:"Height",value:I.height}),I.colorSpace===b.INDEXED?H.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(I.palette.length/3-1)+" "+("sMask"in I&&I.sMask!==void 0?I.objectId+2:I.objectId+1)+" 0 R]"}):(H.push({key:"ColorSpace",value:"/"+I.colorSpace}),I.colorSpace===b.DEVICE_CMYK&&H.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),H.push({key:"BitsPerComponent",value:I.bitsPerComponent}),"decodeParameters"in I&&I.decodeParameters!==void 0&&H.push({key:"DecodeParms",value:"<<"+I.decodeParameters+">>"}),"transparency"in I&&Array.isArray(I.transparency)){for(var Y="",V=0,z=I.transparency.length;V<z;V++)Y+=I.transparency[V]+" "+I.transparency[V]+" ";H.push({key:"Mask",value:"["+Y+"]"})}I.sMask!==void 0&&H.push({key:"SMask",value:I.objectId+1+" 0 R"});var G=I.filter!==void 0?["/"+I.filter]:void 0;if(P({data:I.data,additionalKeyValues:H,alreadyAppliedFilters:G,objectId:I.objectId}),U("endobj"),"sMask"in I&&I.sMask!==void 0){var re="/Predictor "+I.predictor+" /Colors 1 /BitsPerComponent "+I.bitsPerComponent+" /Columns "+I.width,R={width:I.width,height:I.height,colorSpace:"DeviceGray",bitsPerComponent:I.bitsPerComponent,decodeParameters:re,data:I.sMask};"filter"in I&&(R.filter=I.filter),D.call(this,R)}if(I.colorSpace===b.INDEXED){var q=this.internal.newObject();P({data:_(new Uint8Array(I.palette)),objectId:q}),U("endobj")}},s=function(){var D=this.internal.collections.addImage_images;for(var I in D)a.call(this,D[I])},i=function(){var D,I=this.internal.collections.addImage_images,U=this.internal.write;for(var P in I)U("/I"+(D=I[P]).index,D.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",i))},c=function(){var D=this.internal.collections.addImage_images;return o.call(this),D},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(D){return typeof e["process"+D.toUpperCase()]=="function"},f=function(D){return ga(D)==="object"&&D.nodeType===1},h=function(D,I){if(D.nodeName==="IMG"&&D.hasAttribute("src")){var U=""+D.getAttribute("src");if(U.indexOf("data:image/")===0)return My(unescape(U).split("base64,").pop());var P=e.loadFile(U,!0);if(P!==void 0)return P}if(D.nodeName==="CANVAS"){if(D.width===0||D.height===0)throw new Error("Given canvas must have data. Canvas width: "+D.width+", height: "+D.height);var X;switch(I){case"PNG":X="image/png";break;case"WEBP":X="image/webp";break;case"JPEG":case"JPG":default:X="image/jpeg"}return My(D.toDataURL(X,1).split("base64,").pop())}},p=function(D){var I=this.internal.collections.addImage_images;if(I){for(var U in I)if(D===I[U].alias)return I[U]}},g=function(D,I,U){return D||I||(D=-96,I=-96),D<0&&(D=-1*U.width*72/D/this.internal.scaleFactor),I<0&&(I=-1*U.height*72/I/this.internal.scaleFactor),D===0&&(D=I*U.width/U.height),I===0&&(I=D*U.height/U.width),[D,I]},v=function(D,I,U,P,X,H){var Y=g.call(this,U,P,X),V=this.internal.getCoordinateString,z=this.internal.getVerticalCoordinateString,G=c.call(this);if(U=Y[0],P=Y[1],G[X.index]=X,H){H*=Math.PI/180;var re=Math.cos(H),R=Math.sin(H),q=function(te){return te.toFixed(4)},J=[q(re),q(R),q(-1*R),q(re),0,0,"cm"]}this.internal.write("q"),H?(this.internal.write([1,"0","0",1,V(D),z(I+P),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([V(U),"0","0",V(P),"0","0","cm"].join(" "))):this.internal.write([V(U),"0","0",V(P),V(D),z(I+P),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+X.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=e.__addimage__.sHashCode=function(D){var I,U,P=0;if(typeof D=="string")for(U=D.length,I=0;I<U;I++)P=(P<<5)-P+D.charCodeAt(I),P|=0;else if(B(D))for(U=D.byteLength/2,I=0;I<U;I++)P=(P<<5)-P+D[I],P|=0;return P},N=e.__addimage__.validateStringAsBase64=function(D){(D=D||"").toString().trim();var I=!0;return D.length===0&&(I=!1),D.length%4!=0&&(I=!1),/^[A-Za-z0-9+/]+$/.test(D.substr(0,D.length-2))===!1&&(I=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(D.substr(-2))===!1&&(I=!1),I},T=e.__addimage__.extractImageFromDataUrl=function(D){var I=(D=D||"").split("base64,"),U=null;if(I.length===2){var P=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(I[0]);Array.isArray(P)&&(U={mimeType:P[1],charset:P[2],data:I[1]})}return U},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(D){return S()&&D instanceof ArrayBuffer};var B=e.__addimage__.isArrayBufferView=function(D){return S()&&typeof Uint32Array<"u"&&(D instanceof Int8Array||D instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&D instanceof Uint8ClampedArray||D instanceof Int16Array||D instanceof Uint16Array||D instanceof Int32Array||D instanceof Uint32Array||D instanceof Float32Array||D instanceof Float64Array)},w=e.__addimage__.binaryStringToUint8Array=function(D){for(var I=D.length,U=new Uint8Array(I),P=0;P<I;P++)U[P]=D.charCodeAt(P);return U},_=e.__addimage__.arrayBufferToBinaryString=function(D){for(var I="",U=B(D)?D:new Uint8Array(D),P=0;P<U.length;P+=8192)I+=String.fromCharCode.apply(null,U.subarray(P,P+8192));return I};e.addImage=function(){var D,I,U,P,X,H,Y,V,z;if(typeof arguments[1]=="number"?(I=t,U=arguments[1],P=arguments[2],X=arguments[3],H=arguments[4],Y=arguments[5],V=arguments[6],z=arguments[7]):(I=arguments[1],U=arguments[2],P=arguments[3],X=arguments[4],H=arguments[5],Y=arguments[6],V=arguments[7],z=arguments[8]),ga(D=arguments[0])==="object"&&!f(D)&&"imageData"in D){var G=D;D=G.imageData,I=G.format||I||t,U=G.x||U||0,P=G.y||P||0,X=G.w||G.width||X,H=G.h||G.height||H,Y=G.alias||Y,V=G.compression||V,z=G.rotation||G.angle||z}var re=this.internal.getFilters();if(V===void 0&&re.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(U)||isNaN(P))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var R=F.call(this,D,I,Y,V);return v.call(this,U,P,X,H,R,z),this};var F=function(D,I,U,P){var X,H,Y;if(typeof D=="string"&&n(D)===t){D=unescape(D);var V=M(D,!1);(V!==""||(V=e.loadFile(D,!0))!==void 0)&&(D=V)}if(f(D)&&(D=h(D,I)),I=n(D,I),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(((Y=U)==null||Y.length===0)&&(U=function(z){return typeof z=="string"||B(z)?C(z):B(z.data)?C(z.data):null}(D)),(X=p.call(this,U))||(S()&&(D instanceof Uint8Array||I==="RGBA"||(H=D,D=w(D))),X=this["process"+I.toUpperCase()](D,u.call(this),U,function(z){return z&&typeof z=="string"&&(z=z.toUpperCase()),z in e.image_compression?z:y.NONE}(P),H)),!X)throw new Error("An unknown error occurred whilst processing the image.");return X},M=e.__addimage__.convertBase64ToBinaryString=function(D,I){var U;I=typeof I!="boolean"||I;var P,X="";if(typeof D=="string"){P=(U=T(D))!==null?U.data:D;try{X=My(P)}catch(H){if(I)throw N(P)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+H.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};e.getImageProperties=function(D){var I,U,P="";if(f(D)&&(D=h(D)),typeof D=="string"&&n(D)===t&&((P=M(D,!1))===""&&(P=e.loadFile(D)||""),D=P),U=n(D),!d(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!S()||D instanceof Uint8Array||(D=w(D)),!(I=this["process"+U.toUpperCase()](D)))throw new Error("An unknown error occurred whilst processing the image");return I.fileType=U,I}})(xr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};xr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,s,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,f=0;f<u.length&&!d;f++)switch((n=u[f]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var h=0;h<u.length;h++){n=u[h];var p=this.internal.pdfEscape,g=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(v.objId),C=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",s+=" /Popup "+b.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+p(y(C))+") >>",v.content=s;var N=v.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+N,n.open&&(s+=" /Open true"),s+=" >>",b.content=s,this.internal.write(v.objId,"0 R",b.objId,"0 R");break;case"freetext":a="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var T=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+p(g(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var S=this.annotations._nameMap[n.options.name];n.options.pageNumber=S.page,n.options.top=S.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+p(g(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var B=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+B+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,s,i){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+a),h:u(n+s)},options:i,type:"link"})},e.textWithLink=function(r,n,a,s){var i,o,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=c,i=u;return this.text(r,n,a,s),a+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,a-u,o,i,s),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(xr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},i=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},o=e.__arabicParser__.isArabicEndLetter=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(v){return i(v)&&a.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return i(v)&&s(v)&&t[v.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(v){var b=0,y=r,C="",N=0;for(b=0;b<v.length;b+=1)y[v.charCodeAt(b)]!==void 0?(N++,typeof(y=y[v.charCodeAt(b)])=="number"&&(C+=String.fromCharCode(y),y=r,N=0),b===v.length-1&&(y=r,C+=v.charAt(b-(N-1)),b-=N-1,N=0)):(y=r,C+=v.charAt(b-N),b-=N,N=0);return C};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var h=e.__arabicParser__.getCorrectForm=function(v,b,y){return i(v)?s(v)===!1?-1:!u(v)||!i(b)&&!i(y)||!i(y)&&o(b)||o(v)&&!i(b)||o(v)&&c(b)||o(v)&&o(b)?0:d(v)&&i(b)&&!o(b)&&i(y)&&u(y)?3:o(v)||!i(y)?1:2:-1},p=function(v){var b=0,y=0,C=0,N="",T="",S="",B=(v=v||"").split("\\s+"),w=[];for(b=0;b<B.length;b+=1){for(w.push(""),y=0;y<B[b].length;y+=1)N=B[b][y],T=B[b][y-1],S=B[b][y+1],i(N)?(C=h(N,T,S),w[b]+=C!==-1?String.fromCharCode(t[N.charCodeAt(0)][C]):N):w[b]+=N;w[b]=f(w[b])}return w.join(" ")},g=e.__arabicParser__.processArabic=e.processArabic=function(){var v,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var C=0;for(y=[],C=0;C<b.length;C+=1)Array.isArray(b[C])?y.push([p(b[C][0]),b[C][1],b[C][2]]):y.push([p(b[C])]);v=y}else v=p(b);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",g])}(xr.API),xr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(xr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var h=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var g=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return g},set:function(v){g=v}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),f=u.font||this.getFont(),h=u.scaleFactor||this.internal.scaleFactor,p=0,g=0,v=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=u.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(N,T){return N.concat(b.splitTextToSize(T,y))},[])):c=Array.isArray(c)?c:[c];for(var C=0;C<c.length;C++)p<(v=this.getStringUnitWidth(c[C],{font:f})*d)&&(p=v);return p!==0&&(g=c.length),{w:p/=h,h:Math.max((g*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/h,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=e.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,h=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,p&&h&&(this.printHeaderRow(c.lineNumber,!0),c.y+=h[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,d,f,h){if(n.call(this),!d)throw new Error("No data for PDF table.");var p,g,v,b,y=[],C=[],N=[],T={},S={},B=[],w=[],_=(h=h||{}).autoSize||!1,F=h.printHeaders!==!1,M=h.css&&h.css["font-size"]!==void 0?16*h.css["font-size"]:h.fontSize||12,D=h.margins||Object.assign({width:this.getPageWidth()},t),I=typeof h.padding=="number"?h.padding:3,U=h.headerBackgroundColor||"#c8c8c8",P=h.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=F,this.internal.__cell__.margins=D,this.internal.__cell__.table_font_size=M,this.internal.__cell__.padding=I,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=P,this.setFontSize(M),f==null)C=y=Object.keys(d[0]),N=y.map(function(){return"left"});else if(Array.isArray(f)&&ga(f[0])==="object")for(y=f.map(function(G){return G.name}),C=f.map(function(G){return G.prompt||G.name||""}),N=f.map(function(G){return G.align||"left"}),p=0;p<f.length;p+=1)S[f[p].name]=f[p].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(C=y=f,N=y.map(function(){return"left"}));if(_||Array.isArray(f)&&typeof f[0]=="string")for(p=0;p<y.length;p+=1){for(T[b=y[p]]=d.map(function(G){return G[b]}),this.setFont(void 0,"bold"),B.push(this.getTextDimensions(C[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),g=T[b],this.setFont(void 0,"normal"),v=0;v<g.length;v+=1)B.push(this.getTextDimensions(g[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[b]=Math.max.apply(null,B)+I+I,B=[]}if(F){var X={};for(p=0;p<y.length;p+=1)X[y[p]]={},X[y[p]].text=C[p],X[y[p]].align=N[p];var H=o.call(this,X,S);w=y.map(function(G){return new s(c,u,S[G],H,X[G].text,void 0,X[G].align)}),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var Y=f.reduce(function(G,re){return G[re.name]=re.align,G},{});for(p=0;p<d.length;p+=1){"rowStart"in h&&h.rowStart instanceof Function&&h.rowStart({row:p,data:d[p]},this);var V=o.call(this,d[p],S);for(v=0;v<y.length;v+=1){var z=d[p][y[v]];"cellStart"in h&&h.cellStart instanceof Function&&h.cellStart({row:p,col:v,data:z},this),i.call(this,new s(c,u,S[y[v]],V,z,p+2,Y[y[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,h=this.internal.scaleFactor;return Object.keys(c).map(function(p){var g=c[p];return this.splitTextToSize(g.hasOwnProperty("text")?g.text:g,u[p]-d-d)},this).map(function(p){return this.getLineHeightFactor()*p.length*f/h+d+d},this).reduce(function(p,g){return Math.max(p,g)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var h=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){d=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,h.push(d)),d.lineNumber=c;var g=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(g)}h.length>0&&this.setTableHeaderRow(h),this.setFont(void 0,"normal"),r=!1}}(xr.API);var Nee={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kee=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],RF=See(kee),Bee=[100,200,300,400,500,600,700,800,900],PEe=See(Bee);function LF(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(s){return Nee[s=s||"normal"]?s:"normal"}(e.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(s){return typeof RF[s=s||"normal"]=="number"?s:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function WQ(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var REe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},XQ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function YQ(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function LEe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},REe,r.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(a[(s=LF(t[o])).family]&&(s.family=a[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[n]))throw new Error("Could not find a font-family for the rule '"+YQ(s)+"' and default family '"+n+"'.");if(i=function(c,u){if(u[c])return u[c];var d=RF[c],f=d<=RF.normal?-1:1,h=WQ(u,kee,d,f);if(!h)throw new Error("Could not find a matching font-stretch value for "+c);return h}(s.stretch,i),i=function(c,u){if(u[c])return u[c];for(var d=Nee[c],f=0;f<d.length;++f)if(u[d[f]])return u[d[f]];throw new Error("Could not find a matching font-style for "+c)}(s.style,i),!(i=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=PEe[c],f=WQ(u,Bee,d,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+YQ(s)+"'.");return i}function JQ(e){return e.trimLeft()}function MEe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function UEe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var AC,ZQ,eH,DT=["times"];(function(e){var t,r,n,a,s,i,o,c,u,d=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new c,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new i,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new i,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var f=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=R;Object.defineProperty(this,"pdf",{get:function(){return q}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(_e){J=!!_e}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(_e){te=!!_e}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(_e){isNaN(_e)||(ie=_e)}});var Ae=0;Object.defineProperty(this,"posY",{get:function(){return Ae},set:function(_e){isNaN(_e)||(Ae=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var he;typeof _e=="number"?he=[_e,_e,_e,_e]:((he=new Array(4))[0]=_e[0],he[1]=_e.length>=2?_e[1]:he[0],he[2]=_e.length>=3?_e[2]:he[0],he[3]=_e.length>=4?_e[3]:he[1]),u.margin=he}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(_e){oe=_e}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(_e){ce=_e}});var pe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return pe},set:function(_e){pe=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof d&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(_e){Ie=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var he;he=h(_e),this.ctx.fillStyle=he.style,this.ctx.isFillTransparent=he.a===0,this.ctx.fillOpacity=he.a,this.pdf.setFillColor(he.r,he.g,he.b,{a:he.a}),this.pdf.setTextColor(he.r,he.g,he.b,{a:he.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var he=h(_e);this.ctx.strokeStyle=he.style,this.ctx.isStrokeTransparent=he.a===0,this.ctx.strokeOpacity=he.a,he.a===0?this.pdf.setDrawColor(255,255,255):(he.a,this.pdf.setDrawColor(he.r,he.g,he.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var ne=null;function Se(_e,he){if(ne===null){var je=function(He){var Xe=[];return Object.keys(He).forEach(function(ye){He[ye].forEach(function(Oe){var Re=null;switch(Oe){case"bold":Re={family:ye,weight:"bold"};break;case"italic":Re={family:ye,style:"italic"};break;case"bolditalic":Re={family:ye,weight:"bold",style:"italic"};break;case"":case"normal":Re={family:ye}}Re!==null&&(Re.ref={name:ye,style:Oe},Xe.push(Re))})}),Xe}(_e.getFontList());ne=function(He){for(var Xe={},ye=0;ye<He.length;++ye){var Oe=LF(He[ye]),Re=Oe.family,qe=Oe.stretch,Ze=Oe.style,ot=Oe.weight;Xe[Re]=Xe[Re]||{},Xe[Re][qe]=Xe[Re][qe]||{},Xe[Re][qe][Ze]=Xe[Re][qe][Ze]||{},Xe[Re][qe][Ze][ot]=Oe}return Xe}(je.concat(he))}return ne}var De=null;Object.defineProperty(this,"fontFaces",{get:function(){return De},set:function(_e){ne=null,De=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var he;if(this.ctx.font=_e,(he=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var je=he[1],He=(he[2],he[3]),Xe=he[4],ye=(he[5],he[6]),Oe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(Oe==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:Oe==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var Re=function(Dt){var Qt,yt,kr=[],rr=Dt.trim();if(rr==="")return DT;if(rr in XQ)return[XQ[rr]];for(;rr!=="";){switch(yt=null,Qt=(rr=JQ(rr)).charAt(0)){case'"':case"'":yt=MEe(rr.substring(1),Qt);break;default:yt=UEe(rr)}if(yt===null||(kr.push(yt[0]),(rr=JQ(yt[1]))!==""&&rr.charAt(0)!==","))return DT;rr=rr.replace(/^,/,"")}return kr}(ye);if(this.fontFaces){var qe=LEe(Se(this.pdf,this.fontFaces),Re.map(function(Dt){return{family:Dt,stretch:"normal",weight:He,style:je}}));this.pdf.setFont(qe.ref.name,qe.ref.style)}else{var Ze="";(He==="bold"||parseInt(He,10)>=700||je==="bold")&&(Ze="bold"),je==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ot="",mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Tt=0;Tt<Re.length;Tt++){if(this.pdf.internal.getFont(Re[Tt],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ot=Re[Tt];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Re[Tt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ot=Re[Tt],Ze="bold";else if(this.pdf.internal.getFont(Re[Tt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ot=Re[Tt],Ze="normal";break}}if(ot===""){for(var Mt=0;Mt<Re.length;Mt++)if(mt[Re[Mt]]){ot=mt[Re[Mt]];break}}ot=ot===""?"Times":ot,this.pdf.setFont(ot,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=!!_e}})};f.prototype.setLineDash=function(R){this.lineDash=R},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){T.call(this,"fill",!1)},f.prototype.stroke=function(){T.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(R,q){if(isNaN(R)||isNaN(q))throw Sa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new i(R,q));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new i(R,q)},f.prototype.closePath=function(){var R=new i(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&ga(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){R=new i(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(R.x,R.y)},f.prototype.lineTo=function(R,q){if(isNaN(R)||isNaN(q))throw Sa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new i(R,q));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new i(J.x,J.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},f.prototype.quadraticCurveTo=function(R,q,J,te){if(isNaN(J)||isNaN(te)||isNaN(R)||isNaN(q))throw Sa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new i(J,te)),Ae=this.ctx.transform.applyToPoint(new i(R,q));this.path.push({type:"qct",x1:Ae.x,y1:Ae.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new i(ie.x,ie.y)},f.prototype.bezierCurveTo=function(R,q,J,te,ie,Ae){if(isNaN(ie)||isNaN(Ae)||isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te))throw Sa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new i(ie,Ae)),ce=this.ctx.transform.applyToPoint(new i(R,q)),pe=this.ctx.transform.applyToPoint(new i(J,te));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:pe.x,y2:pe.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new i(oe.x,oe.y)},f.prototype.arc=function(R,q,J,te,ie,Ae){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te)||isNaN(ie))throw Sa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ae=!!Ae,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new i(R,q));R=oe.x,q=oe.y;var ce=this.ctx.transform.applyToPoint(new i(0,J)),pe=this.ctx.transform.applyToPoint(new i(0,0));J=Math.sqrt(Math.pow(ce.x-pe.x,2)+Math.pow(ce.y-pe.y,2))}Math.abs(ie-te)>=2*Math.PI&&(te=0,ie=2*Math.PI),this.path.push({type:"arc",x:R,y:q,radius:J,startAngle:te,endAngle:ie,counterclockwise:Ae})},f.prototype.arcTo=function(R,q,J,te,ie){throw new Error("arcTo not implemented.")},f.prototype.rect=function(R,q,J,te){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te))throw Sa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,q),this.lineTo(R+J,q),this.lineTo(R+J,q+te),this.lineTo(R,q+te),this.lineTo(R,q),this.lineTo(R+J,q),this.lineTo(R,q)},f.prototype.fillRect=function(R,q,J,te){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te))throw Sa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,q,J,te),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},f.prototype.strokeRect=function(R,q,J,te){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te))throw Sa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");g.call(this)||(this.beginPath(),this.rect(R,q,J,te),this.stroke())},f.prototype.clearRect=function(R,q,J,te){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te))throw Sa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,q,J,te))},f.prototype.save=function(R){R=typeof R!="boolean"||R;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},f.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(q),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var h=function(R){var q,J,te,ie;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))q=0,J=0,te=0,ie=0;else{var Ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(Ae!==null)q=parseInt(Ae[1]),J=parseInt(Ae[2]),te=parseInt(Ae[3]),ie=1;else if((Ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)q=parseInt(Ae[1]),J=parseInt(Ae[2]),te=parseInt(Ae[3]),ie=parseFloat(Ae[4]);else{if(ie=1,typeof R=="string"&&R.charAt(0)!=="#"){var oe=new bee(R);R=oe.ok?oe.toHex():"#000000"}R.length===4?(q=R.substring(1,2),q+=q,J=R.substring(2,3),J+=J,te=R.substring(3,4),te+=te):(q=R.substring(1,3),J=R.substring(3,5),te=R.substring(5,7)),q=parseInt(q,16),J=parseInt(J,16),te=parseInt(te,16)}}return{r:q,g:J,b:te,a:ie,style:R}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},g=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(R,q,J,te){if(isNaN(q)||isNaN(J)||typeof R!="string")throw Sa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!p.call(this)){var ie=V(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;I.call(this,{text:R,x:q,y:J,scale:Ae,angle:ie,align:this.textAlign,maxWidth:te})}},f.prototype.strokeText=function(R,q,J,te){if(isNaN(q)||isNaN(J)||typeof R!="string")throw Sa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!g.call(this)){te=isNaN(te)?void 0:te;var ie=V(this.ctx.transform.rotation),Ae=this.ctx.transform.scaleX;I.call(this,{text:R,x:q,y:J,scale:Ae,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:te})}},f.prototype.measureText=function(R){if(typeof R!="string")throw Sa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,J=this.pdf.internal.scaleFactor,te=q.internal.getFontSize(),ie=q.getStringUnitWidth(R)*te/q.internal.scaleFactor,Ae=function(oe){var ce=(oe=oe||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ce}}),this};return new Ae({width:ie*=Math.round(96*J/72*1e4)/1e4})},f.prototype.scale=function(R,q){if(isNaN(R)||isNaN(q))throw Sa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new c(R,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.rotate=function(R){if(isNaN(R))throw Sa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.translate=function(R,q){if(isNaN(R)||isNaN(q))throw Sa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new c(1,0,0,1,R,q);this.ctx.transform=this.ctx.transform.multiply(J)},f.prototype.transform=function(R,q,J,te,ie,Ae){if(isNaN(R)||isNaN(q)||isNaN(J)||isNaN(te)||isNaN(ie)||isNaN(Ae))throw Sa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new c(R,q,J,te,ie,Ae);this.ctx.transform=this.ctx.transform.multiply(oe)},f.prototype.setTransform=function(R,q,J,te,ie,Ae){R=isNaN(R)?1:R,q=isNaN(q)?0:q,J=isNaN(J)?0:J,te=isNaN(te)?1:te,ie=isNaN(ie)?0:ie,Ae=isNaN(Ae)?0:Ae,this.ctx.transform=new c(R,q,J,te,ie,Ae)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(R,q,J,te,ie,Ae,oe,ce,pe){var Ie=this.pdf.getImageProperties(R),ne=1,Se=1,De=1,_e=1;te!==void 0&&ce!==void 0&&(De=ce/te,_e=pe/ie,ne=Ie.width/te*ce/te,Se=Ie.height/ie*pe/ie),Ae===void 0&&(Ae=q,oe=J,q=0,J=0),te!==void 0&&ce===void 0&&(ce=te,pe=ie),te===void 0&&ce===void 0&&(ce=Ie.width,pe=Ie.height);for(var he,je=this.ctx.transform.decompose(),He=V(je.rotate.shx),Xe=new c,ye=(Xe=(Xe=(Xe=Xe.multiply(je.translate)).multiply(je.skew)).multiply(je.scale)).applyToRectangle(new o(Ae-q*De,oe-J*_e,te*ne,ie*Se)),Oe=b.call(this,ye),Re=[],qe=0;qe<Oe.length;qe+=1)Re.indexOf(Oe[qe])===-1&&Re.push(Oe[qe]);if(N(Re),this.autoPaging)for(var Ze=Re[0],ot=Re[Re.length-1],mt=Ze;mt<ot+1;mt++){this.pdf.setPage(mt);var Tt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Mt=mt===1?this.posY+this.margin[0]:this.margin[0],Dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],yt=mt===1?0:Dt+(mt-2)*Qt;if(this.ctx.clip_path.length!==0){var kr=this.path;he=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(he,this.posX+this.margin[3],-yt+Mt+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=kr}var rr=JSON.parse(JSON.stringify(ye));rr=C([rr],this.posX+this.margin[3],-yt+Mt+this.ctx.prevPageLastElemOffset)[0];var an=(mt>Ze||mt<ot)&&v.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tt,Qt,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",rr.x,rr.y,rr.w,rr.h,null,null,He),an&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(R,"JPEG",ye.x,ye.y,ye.w,ye.h,null,null,He)};var b=function(R,q,J){var te=[];q=q||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":te.push(Math.floor((R.y+ie)/J)+1);break;case"arc":te.push(Math.floor((R.y+ie-R.radius)/J)+1),te.push(Math.floor((R.y+ie+R.radius)/J)+1);break;case"qct":var Ae=z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);te.push(Math.floor((Ae.y+ie)/J)+1),te.push(Math.floor((Ae.y+Ae.h+ie)/J)+1);break;case"bct":var oe=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);te.push(Math.floor((oe.y+ie)/J)+1),te.push(Math.floor((oe.y+oe.h+ie)/J)+1);break;case"rect":te.push(Math.floor((R.y+ie)/J)+1),te.push(Math.floor((R.y+R.h+ie)/J)+1)}for(var ce=0;ce<te.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<te[ce];)y.call(this);return te},y=function(){var R=this.fillStyle,q=this.strokeStyle,J=this.font,te=this.lineCap,ie=this.lineWidth,Ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=q,this.font=J,this.lineCap=te,this.lineWidth=ie,this.lineJoin=Ae},C=function(R,q,J){for(var te=0;te<R.length;te++)switch(R[te].type){case"bct":R[te].x2+=q,R[te].y2+=J;case"qct":R[te].x1+=q,R[te].y1+=J;case"mt":case"lt":case"arc":default:R[te].x+=q,R[te].y+=J}return R},N=function(R){return R.sort(function(q,J){return q-J})},T=function(R,q){for(var J,te,ie=this.fillStyle,Ae=this.strokeStyle,oe=this.lineCap,ce=this.lineWidth,pe=Math.abs(ce*this.ctx.transform.scaleX),Ie=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),Se=JSON.parse(JSON.stringify(this.path)),De=[],_e=0;_e<Se.length;_e++)if(Se[_e].x!==void 0)for(var he=b.call(this,Se[_e]),je=0;je<he.length;je+=1)De.indexOf(he[je])===-1&&De.push(he[je]);for(var He=0;He<De.length;He++)for(;this.pdf.internal.getNumberOfPages()<De[He];)y.call(this);if(N(De),this.autoPaging)for(var Xe=De[0],ye=De[De.length-1],Oe=Xe;Oe<ye+1;Oe++){this.pdf.setPage(Oe),this.fillStyle=ie,this.strokeStyle=Ae,this.lineCap=oe,this.lineWidth=pe,this.lineJoin=Ie;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qe=Oe===1?this.posY+this.margin[0]:this.margin[0],Ze=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=Oe===1?0:Ze+(Oe-2)*ot;if(this.ctx.clip_path.length!==0){var Tt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(J,this.posX+this.margin[3],-mt+qe+this.ctx.prevPageLastElemOffset),S.call(this,R,!0),this.path=Tt}if(te=JSON.parse(JSON.stringify(ne)),this.path=C(te,this.posX+this.margin[3],-mt+qe+this.ctx.prevPageLastElemOffset),q===!1||Oe===0){var Mt=(Oe>Xe||Oe<ye)&&v.call(this);Mt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,ot,null).clip().discardPath()),S.call(this,R,q),Mt&&this.pdf.restoreGraphicsState()}this.lineWidth=ce}else this.lineWidth=pe,S.call(this,R,q),this.lineWidth=ce;this.path=ne},S=function(R,q){if((R!=="stroke"||q||!g.call(this))&&(R==="stroke"||q||!p.call(this))){for(var J,te,ie=[],Ae=this.path,oe=0;oe<Ae.length;oe++){var ce=Ae[oe];switch(ce.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:ce,deltas:[],abs:[]});break;case"lt":var pe=ie.length;if(Ae[oe-1]&&!isNaN(Ae[oe-1].x)&&(J=[ce.x-Ae[oe-1].x,ce.y-Ae[oe-1].y],pe>0)){for(;pe>=0;pe--)if(ie[pe-1].close!==!0&&ie[pe-1].begin!==!0){ie[pe-1].deltas.push(J),ie[pe-1].abs.push(ce);break}}break;case"bct":J=[ce.x1-Ae[oe-1].x,ce.y1-Ae[oe-1].y,ce.x2-Ae[oe-1].x,ce.y2-Ae[oe-1].y,ce.x-Ae[oe-1].x,ce.y-Ae[oe-1].y],ie[ie.length-1].deltas.push(J);break;case"qct":var Ie=Ae[oe-1].x+2/3*(ce.x1-Ae[oe-1].x),ne=Ae[oe-1].y+2/3*(ce.y1-Ae[oe-1].y),Se=ce.x+2/3*(ce.x1-ce.x),De=ce.y+2/3*(ce.y1-ce.y),_e=ce.x,he=ce.y;J=[Ie-Ae[oe-1].x,ne-Ae[oe-1].y,Se-Ae[oe-1].x,De-Ae[oe-1].y,_e-Ae[oe-1].x,he-Ae[oe-1].y],ie[ie.length-1].deltas.push(J);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(ce)}}te=q?null:R==="stroke"?"stroke":"fill";for(var je=!1,He=0;He<ie.length;He++)if(ie[He].arc)for(var Xe=ie[He].abs,ye=0;ye<Xe.length;ye++){var Oe=Xe[ye];Oe.type==="arc"?_.call(this,Oe.x,Oe.y,Oe.radius,Oe.startAngle,Oe.endAngle,Oe.counterclockwise,void 0,q,!je):U.call(this,Oe.x,Oe.y),je=!0}else if(ie[He].close===!0)this.pdf.internal.out("h"),je=!1;else if(ie[He].begin!==!0){var Re=ie[He].start.x,qe=ie[He].start.y;P.call(this,ie[He].deltas,Re,qe),je=!0}te&&F.call(this,te),q&&M.call(this)}},B=function(R){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-J;case"top":return R+q-J;case"hanging":return R+q-2*J;case"middle":return R+q/2-J;case"ideographic":return R;case"alphabetic":default:return R}},w=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(q,J){this.colorStops.push([q,J])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(R,q,J,te,ie,Ae,oe,ce,pe){for(var Ie=H.call(this,J,te,ie,Ae),ne=0;ne<Ie.length;ne++){var Se=Ie[ne];ne===0&&(pe?D.call(this,Se.x1+R,Se.y1+q):U.call(this,Se.x1+R,Se.y1+q)),X.call(this,R,q,Se.x2,Se.y2,Se.x3,Se.y3,Se.x4,Se.y4)}ce?M.call(this):F.call(this,oe)},F=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},M=function(){this.pdf.clip(),this.pdf.discardPath()},D=function(R,q){this.pdf.internal.out(r(R)+" "+n(q)+" m")},I=function(R){var q;switch(R.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var J=this.pdf.getTextDimensions(R.text),te=B.call(this,R.y),ie=w.call(this,te)-J.h,Ae=this.ctx.transform.applyToPoint(new i(R.x,te)),oe=this.ctx.transform.decompose(),ce=new c;ce=(ce=(ce=ce.multiply(oe.translate)).multiply(oe.skew)).multiply(oe.scale);for(var pe,Ie,ne,Se=this.ctx.transform.applyToRectangle(new o(R.x,te,J.w,J.h)),De=ce.applyToRectangle(new o(R.x,ie,J.w,J.h)),_e=b.call(this,De),he=[],je=0;je<_e.length;je+=1)he.indexOf(_e[je])===-1&&he.push(_e[je]);if(N(he),this.autoPaging)for(var He=he[0],Xe=he[he.length-1],ye=He;ye<Xe+1;ye++){this.pdf.setPage(ye);var Oe=ye===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[2],Ze=qe-this.margin[0],ot=this.pdf.internal.pageSize.width-this.margin[1],mt=ot-this.margin[3],Tt=ye===1?0:Re+(ye-2)*Ze;if(this.ctx.clip_path.length!==0){var Mt=this.path;pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(pe,this.posX+this.margin[3],-1*Tt+Oe),S.call(this,"fill",!0),this.path=Mt}var Dt=C([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Tt+Oe+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*R.scale),ne=this.lineWidth,this.lineWidth=ne*R.scale);var Qt=this.autoPaging!=="text";if(Qt||Dt.y+Dt.h<=qe){if(Qt||Dt.y>=Oe&&Dt.x<=ot){var yt=Qt?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||ot-Dt.x)[0],kr=C([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-Tt+Oe+this.ctx.prevPageLastElemOffset)[0],rr=Qt&&(ye>He||ye<Xe)&&v.call(this);rr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Ze,null).clip().discardPath()),this.pdf.text(yt,kr.x,kr.y,{angle:R.angle,align:q,renderingMode:R.renderingMode}),rr&&this.pdf.restoreGraphicsState()}}else Dt.y<qe&&(this.ctx.prevPageLastElemOffset+=qe-Dt.y);R.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=ne)}else R.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*R.scale),ne=this.lineWidth,this.lineWidth=ne*R.scale),this.pdf.text(R.text,Ae.x+this.posX,Ae.y+this.posY,{angle:R.angle,align:q,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=ne)},U=function(R,q,J,te){J=J||0,te=te||0,this.pdf.internal.out(r(R+J)+" "+n(q+te)+" l")},P=function(R,q,J){return this.pdf.lines(R,q,J,null,null)},X=function(R,q,J,te,ie,Ae,oe,ce){this.pdf.internal.out([t(a(J+R)),t(s(te+q)),t(a(ie+R)),t(s(Ae+q)),t(a(oe+R)),t(s(ce+q)),"c"].join(" "))},H=function(R,q,J,te){for(var ie=2*Math.PI,Ae=Math.PI/2;q>J;)q-=ie;var oe=Math.abs(J-q);oe<ie&&te&&(oe=ie-oe);for(var ce=[],pe=te?-1:1,Ie=q;oe>1e-5;){var ne=Ie+pe*Math.min(oe,Ae);ce.push(Y.call(this,R,Ie,ne)),oe-=Math.abs(ne-Ie),Ie=ne}return ce},Y=function(R,q,J){var te=(J-q)/2,ie=R*Math.cos(te),Ae=R*Math.sin(te),oe=ie,ce=-Ae,pe=oe*oe+ce*ce,Ie=pe+oe*ie+ce*Ae,ne=4/3*(Math.sqrt(2*pe*Ie)-Ie)/(oe*Ae-ce*ie),Se=oe-ne*ce,De=ce+ne*oe,_e=Se,he=-De,je=te+q,He=Math.cos(je),Xe=Math.sin(je);return{x1:R*Math.cos(q),y1:R*Math.sin(q),x2:Se*He-De*Xe,y2:Se*Xe+De*He,x3:_e*He-he*Xe,y3:_e*Xe+he*He,x4:R*Math.cos(J),y4:R*Math.sin(J)}},V=function(R){return 180*R/Math.PI},z=function(R,q,J,te,ie,Ae){var oe=R+.5*(J-R),ce=q+.5*(te-q),pe=ie+.5*(J-ie),Ie=Ae+.5*(te-Ae),ne=Math.min(R,ie,oe,pe),Se=Math.max(R,ie,oe,pe),De=Math.min(q,Ae,ce,Ie),_e=Math.max(q,Ae,ce,Ie);return new o(ne,De,Se-ne,_e-De)},G=function(R,q,J,te,ie,Ae,oe,ce){var pe,Ie,ne,Se,De,_e,he,je,He,Xe,ye,Oe,Re,qe,Ze=J-R,ot=te-q,mt=ie-J,Tt=Ae-te,Mt=oe-ie,Dt=ce-Ae;for(Ie=0;Ie<41;Ie++)He=(he=(ne=R+(pe=Ie/40)*Ze)+pe*((De=J+pe*mt)-ne))+pe*(De+pe*(ie+pe*Mt-De)-he),Xe=(je=(Se=q+pe*ot)+pe*((_e=te+pe*Tt)-Se))+pe*(_e+pe*(Ae+pe*Dt-_e)-je),Ie==0?(ye=He,Oe=Xe,Re=He,qe=Xe):(ye=Math.min(ye,He),Oe=Math.min(Oe,Xe),Re=Math.max(Re,He),qe=Math.max(qe,Xe));return new o(Math.round(ye),Math.round(Oe),Math.round(Re-ye),Math.round(qe-Oe))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,q,J=(R=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:q}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(xr.API),function(e){var t=function(s){var i,o,c,u,d,f,h,p,g,v;for(o=[],c=0,u=(s+=i="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(f=(d=((d=((d=((d=(d-(v=d%85))/85)-(g=d%85))/85)-(p=d%85))/85)-(h=d%85))/85)%85,o.push(f+33,h+33,p+33,g+33,v+33)):o.push(122);return function(b,y){for(var C=y;C>0;C--)b.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(s){var i,o,c,u,d,f=String,h="length",p=255,g="charCodeAt",v="slice",b="replace";for(s[v](-2),s=s[v](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],u=0,d=(s+=i="uuuuu"[v](s[h]%5||5))[h];d>u;u+=5)o=52200625*(s[g](u)-33)+614125*(s[g](u+1)-33)+7225*(s[g](u+2)-33)+85*(s[g](u+3)-33)+(s[g](u+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(y,C){for(var N=C;N>0;N--)y.pop()}(c,i[h]),f.fromCharCode.apply(f,c)},n=function(s){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),i.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},a=function(s){for(var i=new Uint8Array(s.length),o=s.length;o--;)i[o]=s.charCodeAt(o);return s=(i=IF(i)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};e.processDataByFilters=function(s,i){var o=0,c=s||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=a(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(xr.API),function(e){e.loadFile=function(t,r,n){return function(a,s,i){s=s!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(c,u,d){var f=new XMLHttpRequest,h=0,p=function(g){var v=g.length,b=[],y=String.fromCharCode;for(h=0;h<v;h+=1)b.push(y(255&g.charCodeAt(h)));return b.join("")};if(f.open("GET",c,!u),f.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(f.onload=function(){f.status===200?d(p(this.responseText)):d(void 0)}),f.send(null),u&&f.status===200)return p(f.responseText)}(a,s,i)}catch{}return o}(t,r,n)},e.loadImageFile=e.loadFile}(xr.API),function(e){function t(){return(Ur.html2canvas?Promise.resolve(Ur.html2canvas):Lx(()=>Promise.resolve().then(()=>WMe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Ur.DOMPurify?Promise.resolve(Ur.DOMPurify):Lx(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=ga(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(i,o){var c=document.createElement(i);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function i(o){var c=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(i,o){return i.__proto__=o||s.prototype,i},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(c){return this.set({src:a("div",{innerHTML:i,dompurify:c})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},s.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,d){for(var f=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),h=u.firstChild;h;h=h.nextSibling)d!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||f.appendChild(c(h,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(f.width=u.width,f.height=u.height,f.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(f.value=u.value),f.addEventListener("load",function(){f.scrollTop=u.scrollTop,f.scrollLeft=u.scrollLeft},!0)),f}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(t).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var h=0;h<u.length;++h){var p=u[h],g=p.src.find(function(v){return v.format==="truetype"});g&&c.addFont(g.url,p.ref.name,p.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),o(this.prop.container,f)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(i,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},s.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},s.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},s.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=i[c]};switch(c){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[c]=i[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(i,o){return this.then(function(){var c=i in s.template.prop?this.prop[i]:this.opt[i];return o?o(c):c})},s.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},s.prototype.setPageSize=function(i){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(i=i||xr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},s.prototype.setProgress=function(i,o,c,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(i,o,c,u){return this.setProgress(i?this.progress.val+i:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(i,o){var c=this;return this.thenCore(i,o,function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(f){return c.updateProgress(null,u),f}).then(u,d).then(function(f){return c.updateProgress(1),f})})},s.prototype.thenCore=function(i,o,c){c=c||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,i,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},s.prototype.thenList=function(i){var o=this;return i.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return s.convert(o,this)},s.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},s.prototype.error=function(i){return this.then(function(){throw new Error(i)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,xr.getPageSize=function(i,o,c){if(ga(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",i=(""+(i||"P")).toLowerCase();var d,f=(""+c).toLowerCase(),h={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var p,g=0,v=0;if(h.hasOwnProperty(f))g=h[f][1]/d,v=h[f][0]/d;else try{g=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(i==="p"||i==="portrait")i="p",v>g&&(p=v,v=g,g=p);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",g>v&&(p=v,v=g,g=p)}return{width:v,height:g,unit:o,k:d,orientation:i}},e.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(LF):null;var c=new s(o);return o.worker?c:c.from(i).doCallback()}}(xr.API),xr.API.addJS=function(e){return eH=e,this.internal.events.subscribe("postPutResources",function(){AC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(AC+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ZQ=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+eH+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){AC!==void 0&&ZQ!==void 0&&this.internal.out("/Names <</JavaScript "+AC+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),s=0;s<a.length;s++){var i=a[s],o=n.exec(i);if(o!=null){var c=o[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var f=r.internal.newObject();d.push(f);var h=r.internal.getPageInfo(s+1);r.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),s=0;s<d.length;s++)r.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,s){var i={title:a,options:s,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var i=n.children[s];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var c=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var s=0;s<a.children.length;s++)n.count++,this.count_r(n,a.children[s]);return n.count}}])}(xr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,s,i,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(f){for(var h,p=256*f.charCodeAt(4)+f.charCodeAt(5),g=f.length,v={width:0,height:0,numcomponents:1},b=4;b<g;b+=2){if(b+=p,t.indexOf(f.charCodeAt(b+1))!==-1){h=256*f.charCodeAt(b+5)+f.charCodeAt(b+6),v={width:256*f.charCodeAt(b+7)+f.charCodeAt(b+8),height:h,numcomponents:f.charCodeAt(b+9)};break}p=256*f.charCodeAt(b+2)+f.charCodeAt(b+3)}return v}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:a}}return d}}(xr.API);var dv,fC,tH,rH,nH,QEe=function(){var e,t,r;function n(s){var i,o,c,u,d,f,h,p,g,v,b,y,C,N;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(i=this.readUInt32(),g=(function(){var T,S;for(S=[],T=0;T<4;++T)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,f.delay=1e3*d/u,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(g==="fdAT"&&(this.pos+=4,i-=4),s=(f!=null?f.data:void 0)||this.imgData,y=0;0<=i?y<i:y>i;0<=i?++y:--y)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((v=c-this.transparency.indexed.length)>0)for(C=0;0<=v?C<v:C>v;0<=v?++C:--C)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":h=(b=this.read(i)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,h)),this.text[p]=String.fromCharCode.apply(String,b.slice(h+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(N=this.colorType)===4||N===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var i,o;for(o=[],i=0;0<=s?i<s:i>s;0<=s?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(f,h,p,g){var v,b,y,C,N,T,S,B,w,_,F,M,D,I,U,P,X,H,Y,V,z,G=Math.ceil((u.width-f)/p),re=Math.ceil((u.height-h)/g),R=u.width==G&&u.height==re;for(I=i*G,M=R?o:new Uint8Array(I*re),T=s.length,D=0,b=0;D<re&&c<T;){switch(s[c++]){case 0:for(C=X=0;X<I;C=X+=1)M[b++]=s[c++];break;case 1:for(C=H=0;H<I;C=H+=1)v=s[c++],N=C<i?0:M[b-i],M[b++]=(v+N)%256;break;case 2:for(C=Y=0;Y<I;C=Y+=1)v=s[c++],y=(C-C%i)/i,U=D&&M[(D-1)*I+y*i+C%i],M[b++]=(U+v)%256;break;case 3:for(C=V=0;V<I;C=V+=1)v=s[c++],y=(C-C%i)/i,N=C<i?0:M[b-i],U=D&&M[(D-1)*I+y*i+C%i],M[b++]=(v+Math.floor((N+U)/2))%256;break;case 4:for(C=z=0;z<I;C=z+=1)v=s[c++],y=(C-C%i)/i,N=C<i?0:M[b-i],D===0?U=P=0:(U=M[(D-1)*I+y*i+C%i],P=y&&M[(D-1)*I+(y-1)*i+C%i]),S=N+U-P,B=Math.abs(S-N),_=Math.abs(S-U),F=Math.abs(S-P),w=B<=_&&B<=F?N:_<=F?U:P,M[b++]=(v+w)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!R){var q=((h+D*g)*u.width+f)*i,J=D*I;for(C=0;C<G;C+=1){for(var te=0;te<i;te+=1)o[q++]=M[J++];q+=(p-1)*i}}D++}}return s=xEe(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var s,i,o,c,u,d,f,h,p;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),c=0,s=0,i=f=0,h=o.length;f<h;i=f+=3)u[c++]=o[i],u[c++]=o[i+1],u[c++]=o[i+2],u[c++]=(p=d[s++])!=null?p:255;return u},n.prototype.copyToImageData=function(s,i){var o,c,u,d,f,h,p,g,v,b,y;if(c=this.colors,v=null,o=this.hasAlphaChannel,this.palette.length&&(v=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,o=!0),g=(u=s.data||s).length,f=v||i,d=h=0,c===1)for(;d<g;)p=v?4*i[d/4]:h,b=f[p++],u[d++]=b,u[d++]=b,u[d++]=b,u[d++]=o?f[p++]:255,h=p;else for(;d<g;)p=v?4*i[d/4]:h,u[d++]=f[p++],u[d++]=f[p++],u[d++]=f[p++],u[d++]=o?f[p++]:255,h=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var a=function(){if(Object.prototype.toString.call(Ur)==="[object Window]"){try{t=Ur.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(s){var i;if(a()===!0)return r.width=s.width,r.height=s.height,r.clearRect(0,0,s.width,s.height),r.putImageData(s,0,0),(i=new Image).src=t.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var i,o,c,u,d,f,h,p;if(this.animation){for(p=[],o=d=0,f=(h=this.animation.frames).length;d<f;o=++d)i=h[o],c=s.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(c,u),i.imageData=c,p.push(i.image=e(c));return p}},n.prototype.renderFrame=function(s,i){var o,c,u;return o=(c=this.animation.frames)[i],u=c[i-1],i===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var i,o,c,u,d,f,h=this;return o=0,f=this.animation,u=f.numFrames,c=f.frames,d=f.numPlays,(i=function(){var p,g;if(p=o++%u,g=c[p],h.renderFrame(s,p),u>1&&o/u<d)return h.animation._timeout=setTimeout(i,g.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var i,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,i=s.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function HEe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],s=a>>7,i=1<<(7&a)+1;e[t++],e[t++];var o=null,c=null;s&&(o=t,c=i,t+=3*i);var u=!0,d=[],f=0,h=null,p=0,g=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,g=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];f=e[t++]|e[t++]<<8,h=e[t++],(1&v)==0&&(h=null),p=v>>2&7,t++;break;case 254:for(;;){if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,T=e[t++],S=T>>6&1,B=1<<(7&T)+1,w=o,_=c,F=!1;T>>7&&(F=!0,w=t,_=B,t+=3*B);var M=t;for(t++;;){var D;if(!((D=e[t++])>=0))throw Error("Invalid block size");if(D===0)break;t+=D}d.push({x:b,y,width:C,height:N,has_local_palette:F,palette_offset:w,palette_size:_,data_offset:M,data_length:t-M,transparent_index:h,interlaced:!!S,delay:f,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return g},this.frameInfo=function(I){if(I<0||I>=d.length)throw new Error("Frame index out of range.");return d[I]},this.decodeAndBlitFrameBGRA=function(I,U){var P=this.frameInfo(I),X=P.width*P.height,H=new Uint8Array(X);aH(e,P.data_offset,H,X);var Y=P.palette_offset,V=P.transparent_index;V===null&&(V=256);var z=P.width,G=r-z,re=z,R=4*(P.y*r+P.x),q=4*((P.y+P.height)*r+P.x),J=R,te=4*G;P.interlaced===!0&&(te+=4*r*7);for(var ie=8,Ae=0,oe=H.length;Ae<oe;++Ae){var ce=H[Ae];if(re===0&&(re=z,(J+=te)>=q&&(te=4*G+4*r*(ie-1),J=R+(z+G)*(ie<<1),ie>>=1)),ce===V)J+=4;else{var pe=e[Y+3*ce],Ie=e[Y+3*ce+1],ne=e[Y+3*ce+2];U[J++]=ne,U[J++]=Ie,U[J++]=pe,U[J++]=255}--re}},this.decodeAndBlitFrameRGBA=function(I,U){var P=this.frameInfo(I),X=P.width*P.height,H=new Uint8Array(X);aH(e,P.data_offset,H,X);var Y=P.palette_offset,V=P.transparent_index;V===null&&(V=256);var z=P.width,G=r-z,re=z,R=4*(P.y*r+P.x),q=4*((P.y+P.height)*r+P.x),J=R,te=4*G;P.interlaced===!0&&(te+=4*r*7);for(var ie=8,Ae=0,oe=H.length;Ae<oe;++Ae){var ce=H[Ae];if(re===0&&(re=z,(J+=te)>=q&&(te=4*G+4*r*(ie-1),J=R+(z+G)*(ie<<1),ie>>=1)),ce===V)J+=4;else{var pe=e[Y+3*ce],Ie=e[Y+3*ce+1],ne=e[Y+3*ce+2];U[J++]=pe,U[J++]=Ie,U[J++]=ne,U[J++]=255}--re}}}function aH(e,t,r,n){for(var a=e[t++],s=1<<a,i=s+1,o=i+1,c=a+1,u=(1<<c)-1,d=0,f=0,h=0,p=e[t++],g=new Int32Array(4096),v=null;;){for(;d<16&&p!==0;)f|=e[t++]<<d,d+=8,p===1?p=e[t++]:--p;if(d<c)break;var b=f&u;if(f>>=c,d-=c,b!==s){if(b===i)break;for(var y=b<o?b:v,C=0,N=y;N>s;)N=g[N]>>8,++C;var T=N;if(h+C+(y!==b?1:0)>n)return void Sa.log("Warning, gif stream longer than expected.");r[h++]=T;var S=h+=C;for(y!==b&&(r[h++]=T),N=y;C--;)N=g[N],r[--S]=255&N,N>>=8;v!==null&&o<4096&&(g[o++]=v<<8|T,o>=u+1&&c<12&&(++c,u=u<<1|1)),v=b}else o=i+1,u=(1<<(c=a+1))-1,v=null}return h!==n&&Sa.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function PT(e){var t,r,n,a,s,i=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),f=new Array(65535),h=new Array(65535),p=new Array(64),g=new Array(64),v=[],b=0,y=7,C=new Array(64),N=new Array(64),T=new Array(64),S=new Array(256),B=new Array(2048),w=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],F=[0,1,2,3,4,5,6,7,8,9,10,11],M=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],D=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],I=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function H(R,q){for(var J=0,te=0,ie=new Array,Ae=1;Ae<=16;Ae++){for(var oe=1;oe<=R[Ae];oe++)ie[q[te]]=[],ie[q[te]][0]=J,ie[q[te]][1]=Ae,te++,J++;J*=2}return ie}function Y(R){for(var q=R[0],J=R[1]-1;J>=0;)q&1<<J&&(b|=1<<y),J--,--y<0&&(b==255?(V(255),V(0)):V(b),y=7,b=0)}function V(R){v.push(R)}function z(R){V(R>>8&255),V(255&R)}function G(R,q,J,te,ie){for(var Ae,oe=ie[0],ce=ie[240],pe=function(Xe,ye){var Oe,Re,qe,Ze,ot,mt,Tt,Mt,Dt,Qt,yt=0;for(Dt=0;Dt<8;++Dt){Oe=Xe[yt],Re=Xe[yt+1],qe=Xe[yt+2],Ze=Xe[yt+3],ot=Xe[yt+4],mt=Xe[yt+5],Tt=Xe[yt+6];var kr=Oe+(Mt=Xe[yt+7]),rr=Oe-Mt,an=Re+Tt,_r=Re-Tt,zr=qe+mt,Fn=qe-mt,Fr=Ze+ot,vt=Ze-ot,pt=kr+Fr,Je=kr-Fr,gt=an+zr,dt=an-zr;Xe[yt]=pt+gt,Xe[yt+4]=pt-gt;var Pt=.707106781*(dt+Je);Xe[yt+2]=Je+Pt,Xe[yt+6]=Je-Pt;var zt=.382683433*((pt=vt+Fn)-(dt=_r+rr)),Lr=.5411961*pt+zt,Xr=1.306562965*dt+zt,xn=.707106781*(gt=Fn+_r),bn=rr+xn,$t=rr-xn;Xe[yt+5]=$t+Lr,Xe[yt+3]=$t-Lr,Xe[yt+1]=bn+Xr,Xe[yt+7]=bn-Xr,yt+=8}for(yt=0,Dt=0;Dt<8;++Dt){Oe=Xe[yt],Re=Xe[yt+8],qe=Xe[yt+16],Ze=Xe[yt+24],ot=Xe[yt+32],mt=Xe[yt+40],Tt=Xe[yt+48];var rn=Oe+(Mt=Xe[yt+56]),en=Oe-Mt,dr=Re+Tt,Yr=Re-Tt,ra=qe+mt,fe=qe-mt,Be=Ze+ot,Ee=Ze-ot,Ce=rn+Be,Ne=rn-Be,Te=dr+ra,Ye=dr-ra;Xe[yt]=Ce+Te,Xe[yt+32]=Ce-Te;var ut=.707106781*(Ye+Ne);Xe[yt+16]=Ne+ut,Xe[yt+48]=Ne-ut;var $e=.382683433*((Ce=Ee+fe)-(Ye=Yr+en)),tt=.5411961*Ce+$e,at=1.306562965*Ye+$e,jt=.707106781*(Te=fe+Yr),Vt=en+jt,Jt=en-jt;Xe[yt+40]=Jt+tt,Xe[yt+24]=Jt-tt,Xe[yt+8]=Vt+at,Xe[yt+56]=Vt-at,yt++}for(Dt=0;Dt<64;++Dt)Qt=Xe[Dt]*ye[Dt],p[Dt]=Qt>0?Qt+.5|0:Qt-.5|0;return p}(R,q),Ie=0;Ie<64;++Ie)g[w[Ie]]=pe[Ie];var ne=g[0]-J;J=g[0],ne==0?Y(te[0]):(Y(te[h[Ae=32767+ne]]),Y(f[Ae]));for(var Se=63;Se>0&&g[Se]==0;)Se--;if(Se==0)return Y(oe),J;for(var De,_e=1;_e<=Se;){for(var he=_e;g[_e]==0&&_e<=Se;)++_e;var je=_e-he;if(je>=16){De=je>>4;for(var He=1;He<=De;++He)Y(ce);je&=15}Ae=32767+g[_e],Y(ie[(je<<4)+h[Ae]]),Y(f[Ae]),_e++}return Se!=63&&Y(oe),J}function re(R){R=Math.min(Math.max(R,1),100),s!=R&&(function(q){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ie=i((J[te]*q+50)/100);ie=Math.min(Math.max(ie,1),255),o[w[te]]=ie}for(var Ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var ce=i((Ae[oe]*q+50)/100);ce=Math.min(Math.max(ce,1),255),c[w[oe]]=ce}for(var pe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,ne=0;ne<8;ne++)for(var Se=0;Se<8;Se++)u[Ie]=1/(o[w[Ie]]*pe[ne]*pe[Se]*8),d[Ie]=1/(c[w[Ie]]*pe[ne]*pe[Se]*8),Ie++}(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),s=R)}this.encode=function(R,q){q&&re(q),v=new Array,b=0,y=7,z(65496),z(65504),z(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),z(1),z(1),V(0),V(0),function(){z(65499),z(132),V(0);for(var Re=0;Re<64;Re++)V(o[Re]);V(1);for(var qe=0;qe<64;qe++)V(c[qe])}(),function(Re,qe){z(65472),z(17),V(8),z(qe),z(Re),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(R.width,R.height),function(){z(65476),z(418),V(0);for(var Re=0;Re<16;Re++)V(_[Re+1]);for(var qe=0;qe<=11;qe++)V(F[qe]);V(16);for(var Ze=0;Ze<16;Ze++)V(M[Ze+1]);for(var ot=0;ot<=161;ot++)V(D[ot]);V(1);for(var mt=0;mt<16;mt++)V(I[mt+1]);for(var Tt=0;Tt<=11;Tt++)V(U[Tt]);V(17);for(var Mt=0;Mt<16;Mt++)V(P[Mt+1]);for(var Dt=0;Dt<=161;Dt++)V(X[Dt])}(),z(65498),z(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var J=0,te=0,ie=0;b=0,y=7,this.encode.displayName="_encode_";for(var Ae,oe,ce,pe,Ie,ne,Se,De,_e,he=R.data,je=R.width,He=R.height,Xe=4*je,ye=0;ye<He;){for(Ae=0;Ae<Xe;){for(Ie=Xe*ye+Ae,Se=-1,De=0,_e=0;_e<64;_e++)ne=Ie+(De=_e>>3)*Xe+(Se=4*(7&_e)),ye+De>=He&&(ne-=Xe*(ye+1+De-He)),Ae+Se>=Xe&&(ne-=Ae+Se-Xe+4),oe=he[ne++],ce=he[ne++],pe=he[ne++],C[_e]=(B[oe]+B[ce+256>>0]+B[pe+512>>0]>>16)-128,N[_e]=(B[oe+768>>0]+B[ce+1024>>0]+B[pe+1280>>0]>>16)-128,T[_e]=(B[oe+1280>>0]+B[ce+1536>>0]+B[pe+1792>>0]>>16)-128;J=G(C,u,J,t,n),te=G(N,d,te,r,a),ie=G(T,d,ie,r,a),Ae+=32}ye+=8}if(y>=0){var Oe=[];Oe[1]=y+1,Oe[0]=(1<<y+1)-1,Y(Oe)}return z(65497),new Uint8Array(v)},e=e||50,function(){for(var R=String.fromCharCode,q=0;q<256;q++)S[q]=R(q)}(),t=H(_,F),r=H(I,U),n=H(M,D),a=H(P,X),function(){for(var R=1,q=2,J=1;J<=15;J++){for(var te=R;te<q;te++)h[32767+te]=J,f[32767+te]=[],f[32767+te][1]=J,f[32767+te][0]=te;for(var ie=-(q-1);ie<=-R;ie++)h[32767+ie]=J,f[32767+ie]=[],f[32767+ie][1]=J,f[32767+ie][0]=q-1+ie;R<<=1,q<<=1}}(),function(){for(var R=0;R<256;R++)B[R]=19595*R,B[R+256>>0]=38470*R,B[R+512>>0]=7471*R+32768,B[R+768>>0]=-11059*R,B[R+1024>>0]=-21709*R,B[R+1280>>0]=32768*R+8421375,B[R+1536>>0]=-27439*R,B[R+1792>>0]=-5329*R}(),re(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ad(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function sH(e){function t(_){if(!_)throw Error("assert :P")}function r(_,F,M){for(var D=0;4>D;D++)if(_[F+D]!=M.charCodeAt(D))return!0;return!1}function n(_,F,M,D,I){for(var U=0;U<I;U++)_[F+U]=M[D+U]}function a(_,F,M,D){for(var I=0;I<D;I++)_[F+I]=M}function s(_){return new Int32Array(_)}function i(_,F){for(var M=[],D=0;D<_;D++)M.push(new F);return M}function o(_,F){var M=[];return function D(I,U,P){for(var X=P[U],H=0;H<X&&(I.push(P.length>U+1?[]:new F),!(P.length<U+1));H++)D(I[H],U+1,P)}(M,0,_),M}var c=function(){var _=this;function F(j,Q){for(var Z=1<<Q-1>>>0;j&Z;)Z>>>=1;return Z?(j&Z-1)+Z:j}function M(j,Q,Z,ae,ue){t(!(ae%Z));do j[Q+(ae-=Z)]=ue;while(0<ae)}function D(j,Q,Z,ae,ue){if(t(2328>=ue),512>=ue)var me=s(512);else if((me=s(ue))==null)return 0;return function(ge,ve,we,ke,Me,nt){var et,Ke,kt=ve,ht=1<<we,Ue=s(16),Ve=s(16);for(t(Me!=0),t(ke!=null),t(ge!=null),t(0<we),Ke=0;Ke<Me;++Ke){if(15<ke[Ke])return 0;++Ue[ke[Ke]]}if(Ue[0]==Me)return 0;for(Ve[1]=0,et=1;15>et;++et){if(Ue[et]>1<<et)return 0;Ve[et+1]=Ve[et]+Ue[et]}for(Ke=0;Ke<Me;++Ke)et=ke[Ke],0<ke[Ke]&&(nt[Ve[et]++]=Ke);if(Ve[15]==1)return(ke=new I).g=0,ke.value=nt[0],M(ge,kt,1,ht,ke),ht;var Ct,Bt=-1,St=ht-1,nr=0,Xt=1,vr=1,er=1<<we;for(Ke=0,et=1,Me=2;et<=we;++et,Me<<=1){if(Xt+=vr<<=1,0>(vr-=Ue[et]))return 0;for(;0<Ue[et];--Ue[et])(ke=new I).g=et,ke.value=nt[Ke++],M(ge,kt+nr,Me,er,ke),nr=F(nr,et)}for(et=we+1,Me=2;15>=et;++et,Me<<=1){if(Xt+=vr<<=1,0>(vr-=Ue[et]))return 0;for(;0<Ue[et];--Ue[et]){if(ke=new I,(nr&St)!=Bt){for(kt+=er,Ct=1<<(Bt=et)-we;15>Bt&&!(0>=(Ct-=Ue[Bt]));)++Bt,Ct<<=1;ht+=er=1<<(Ct=Bt-we),ge[ve+(Bt=nr&St)].g=Ct+we,ge[ve+Bt].value=kt-ve-Bt}ke.g=et-we,ke.value=nt[Ke++],M(ge,kt+(nr>>we),Me,er,ke),nr=F(nr,et)}}return Xt!=2*Ve[15]-1?0:ht}(j,Q,Z,ae,ue,me)}function I(){this.value=this.g=0}function U(){this.value=this.g=0}function P(){this.G=i(5,I),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Os,U)}function X(j,Q,Z,ae){t(j!=null),t(Q!=null),t(2147483648>ae),j.Ca=254,j.I=0,j.b=-8,j.Ka=0,j.oa=Q,j.pa=Z,j.Jd=Q,j.Yc=Z+ae,j.Zc=4<=ae?Z+ae-4+1:Z,Ae(j)}function H(j,Q){for(var Z=0;0<Q--;)Z|=ce(j,128)<<Q;return Z}function Y(j,Q){var Z=H(j,Q);return oe(j)?-Z:Z}function V(j,Q,Z,ae){var ue,me=0;for(t(j!=null),t(Q!=null),t(4294967288>ae),j.Sb=ae,j.Ra=0,j.u=0,j.h=0,4<ae&&(ae=4),ue=0;ue<ae;++ue)me+=Q[Z+ue]<<8*ue;j.Ra=me,j.bb=ae,j.oa=Q,j.pa=Z}function z(j){for(;8<=j.u&&j.bb<j.Sb;)j.Ra>>>=8,j.Ra+=j.oa[j.pa+j.bb]<<hf-8>>>0,++j.bb,j.u-=8;J(j)&&(j.h=1,j.u=0)}function G(j,Q){if(t(0<=Q),!j.h&&Q<=ff){var Z=q(j)&Jd[Q];return j.u+=Q,z(j),Z}return j.h=1,j.u=0}function re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function R(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(j){return j.Ra>>>(j.u&hf-1)>>>0}function J(j){return t(j.bb<=j.Sb),j.h||j.bb==j.Sb&&j.u>hf}function te(j,Q){j.u=Q,j.h=J(j)}function ie(j){j.u>=Vh&&(t(j.u>=Vh),z(j))}function Ae(j){t(j!=null&&j.oa!=null),j.pa<j.Zc?(j.I=(j.oa[j.pa++]|j.I<<8)>>>0,j.b+=8):(t(j!=null&&j.oa!=null),j.pa<j.Yc?(j.b+=8,j.I=j.oa[j.pa++]|j.I<<8):j.Ka?j.b=0:(j.I<<=8,j.b+=8,j.Ka=1))}function oe(j){return H(j,1)}function ce(j,Q){var Z=j.Ca;0>j.b&&Ae(j);var ae=j.b,ue=Z*Q>>>8,me=(j.I>>>ae>ue)+0;for(me?(Z-=ue,j.I-=ue+1<<ae>>>0):Z=ue+1,ae=Z,ue=0;256<=ae;)ue+=8,ae>>=8;return ae=7^ue+So[ae],j.b-=ae,j.Ca=(Z<<ae)-1,me}function pe(j,Q,Z){j[Q+0]=Z>>24&255,j[Q+1]=Z>>16&255,j[Q+2]=Z>>8&255,j[Q+3]=Z>>0&255}function Ie(j,Q){return j[Q+0]<<0|j[Q+1]<<8}function ne(j,Q){return Ie(j,Q)|j[Q+2]<<16}function Se(j,Q){return Ie(j,Q)|Ie(j,Q+2)<<16}function De(j,Q){var Z=1<<Q;return t(j!=null),t(0<Q),j.X=s(Z),j.X==null?0:(j.Mb=32-Q,j.Xa=Q,1)}function _e(j,Q){t(j!=null),t(Q!=null),t(j.Xa==Q.Xa),n(Q.X,0,j.X,0,1<<Q.Xa)}function he(){this.X=[],this.Xa=this.Mb=0}function je(j,Q,Z,ae){t(Z!=null),t(ae!=null);var ue=Z[0],me=ae[0];return ue==0&&(ue=(j*me+Q/2)/Q),me==0&&(me=(Q*ue+j/2)/j),0>=ue||0>=me?0:(Z[0]=ue,ae[0]=me,1)}function He(j,Q){return j+(1<<Q)-1>>>Q}function Xe(j,Q){return((4278255360&j)+(4278255360&Q)>>>0&4278255360)+((16711935&j)+(16711935&Q)>>>0&16711935)>>>0}function ye(j,Q){_[Q]=function(Z,ae,ue,me,ge,ve,we){var ke;for(ke=0;ke<ge;++ke){var Me=_[j](ve[we+ke-1],ue,me+ke);ve[we+ke]=Xe(Z[ae+ke],Me)}}}function Oe(){this.ud=this.hd=this.jd=0}function Re(j,Q){return((4278124286&(j^Q))>>>1)+(j&Q)>>>0}function qe(j){return 0<=j&&256>j?j:0>j?0:255<j?255:void 0}function Ze(j,Q){return qe(j+(j-Q+.5>>1))}function ot(j,Q,Z){return Math.abs(Q-Z)-Math.abs(j-Z)}function mt(j,Q,Z,ae,ue,me,ge){for(ae=me[ge-1],Z=0;Z<ue;++Z)me[ge+Z]=ae=Xe(j[Q+Z],ae)}function Tt(j,Q,Z,ae,ue){var me;for(me=0;me<Z;++me){var ge=j[Q+me],ve=ge>>8&255,we=16711935&(we=(we=16711935&ge)+((ve<<16)+ve));ae[ue+me]=(4278255360&ge)+we>>>0}}function Mt(j,Q){Q.jd=j>>0&255,Q.hd=j>>8&255,Q.ud=j>>16&255}function Dt(j,Q,Z,ae,ue,me){var ge;for(ge=0;ge<ae;++ge){var ve=Q[Z+ge],we=ve>>>8,ke=ve,Me=255&(Me=(Me=ve>>>16)+((j.jd<<24>>24)*(we<<24>>24)>>>5));ke=255&(ke=(ke=ke+((j.hd<<24>>24)*(we<<24>>24)>>>5))+((j.ud<<24>>24)*(Me<<24>>24)>>>5)),ue[me+ge]=(4278255360&ve)+(Me<<16)+ke}}function Qt(j,Q,Z,ae,ue){_[Q]=function(me,ge,ve,we,ke,Me,nt,et,Ke){for(we=nt;we<et;++we)for(nt=0;nt<Ke;++nt)ke[Me++]=ue(ve[ae(me[ge++])])},_[j]=function(me,ge,ve,we,ke,Me,nt){var et=8>>me.b,Ke=me.Ea,kt=me.K[0],ht=me.w;if(8>et)for(me=(1<<me.b)-1,ht=(1<<et)-1;ge<ve;++ge){var Ue,Ve=0;for(Ue=0;Ue<Ke;++Ue)Ue&me||(Ve=ae(we[ke++])),Me[nt++]=ue(kt[Ve&ht]),Ve>>=et}else _["VP8LMapColor"+Z](we,ke,kt,ht,Me,nt,ge,ve,Ke)}}function yt(j,Q,Z,ae,ue){for(Z=Q+Z;Q<Z;){var me=j[Q++];ae[ue++]=me>>16&255,ae[ue++]=me>>8&255,ae[ue++]=me>>0&255}}function kr(j,Q,Z,ae,ue){for(Z=Q+Z;Q<Z;){var me=j[Q++];ae[ue++]=me>>16&255,ae[ue++]=me>>8&255,ae[ue++]=me>>0&255,ae[ue++]=me>>24&255}}function rr(j,Q,Z,ae,ue){for(Z=Q+Z;Q<Z;){var me=(ge=j[Q++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;ae[ue++]=me,ae[ue++]=ge}}function an(j,Q,Z,ae,ue){for(Z=Q+Z;Q<Z;){var me=(ge=j[Q++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;ae[ue++]=me,ae[ue++]=ge}}function _r(j,Q,Z,ae,ue){for(Z=Q+Z;Q<Z;){var me=j[Q++];ae[ue++]=me>>0&255,ae[ue++]=me>>8&255,ae[ue++]=me>>16&255}}function zr(j,Q,Z,ae,ue,me){if(me==0)for(Z=Q+Z;Q<Z;)pe(ae,((me=j[Q++])[0]>>24|me[1]>>8&65280|me[2]<<8&16711680|me[3]<<24)>>>0),ue+=32;else n(ae,ue,j,Q,Z)}function Fn(j,Q){_[Q][0]=_[j+"0"],_[Q][1]=_[j+"1"],_[Q][2]=_[j+"2"],_[Q][3]=_[j+"3"],_[Q][4]=_[j+"4"],_[Q][5]=_[j+"5"],_[Q][6]=_[j+"6"],_[Q][7]=_[j+"7"],_[Q][8]=_[j+"8"],_[Q][9]=_[j+"9"],_[Q][10]=_[j+"10"],_[Q][11]=_[j+"11"],_[Q][12]=_[j+"12"],_[Q][13]=_[j+"13"],_[Q][14]=_[j+"0"],_[Q][15]=_[j+"0"]}function Fr(j){return j==Hm||j==lA||j==Zu||j==Kh}function vt(){this.eb=[],this.size=this.A=this.fb=0}function pt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Je(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vt,this.f.kb=new pt,this.sd=null}function gt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function dt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Pt(j){return alert("todo:WebPSamplerProcessPlane"),j.T}function zt(j,Q){var Z=j.T,ae=Q.ba.f.RGBA,ue=ae.eb,me=ae.fb+j.ka*ae.A,ge=ni[Q.ba.S],ve=j.y,we=j.O,ke=j.f,Me=j.N,nt=j.ea,et=j.W,Ke=Q.cc,kt=Q.dc,ht=Q.Mc,Ue=Q.Nc,Ve=j.ka,Ct=j.ka+j.T,Bt=j.U,St=Bt+1>>1;for(Ve==0?ge(ve,we,null,null,ke,Me,nt,et,ke,Me,nt,et,ue,me,null,null,Bt):(ge(Q.ec,Q.fc,ve,we,Ke,kt,ht,Ue,ke,Me,nt,et,ue,me-ae.A,ue,me,Bt),++Z);Ve+2<Ct;Ve+=2)Ke=ke,kt=Me,ht=nt,Ue=et,Me+=j.Rc,et+=j.Rc,me+=2*ae.A,ge(ve,(we+=2*j.fa)-j.fa,ve,we,Ke,kt,ht,Ue,ke,Me,nt,et,ue,me-ae.A,ue,me,Bt);return we+=j.fa,j.j+Ct<j.o?(n(Q.ec,Q.fc,ve,we,Bt),n(Q.cc,Q.dc,ke,Me,St),n(Q.Mc,Q.Nc,nt,et,St),Z--):1&Ct||ge(ve,we,null,null,ke,Me,nt,et,ke,Me,nt,et,ue,me+ae.A,null,null,Bt),Z}function Lr(j,Q,Z){var ae=j.F,ue=[j.J];if(ae!=null){var me=j.U,ge=Q.ba.S,ve=ge==xf||ge==Zu;Q=Q.ba.f.RGBA;var we=[0],ke=j.ka;we[0]=j.T,j.Kb&&(ke==0?--we[0]:(--ke,ue[0]-=j.width),j.j+j.ka+j.T==j.o&&(we[0]=j.o-j.j-ke));var Me=Q.eb;ke=Q.fb+ke*Q.A,j=mn(ae,ue[0],j.width,me,we,Me,ke+(ve?0:3),Q.A),t(Z==we),j&&Fr(ge)&&il(Me,ke,ve,me,we,Q.A)}return 0}function Xr(j){var Q=j.ma,Z=Q.ba.S,ae=11>Z,ue=Z==Gh||Z==Qm||Z==xf||Z==Ju||Z==12||Fr(Z);if(Q.memory=null,Q.Ib=null,Q.Jb=null,Q.Nd=null,!Yd(Q.Oa,j,ue?11:12))return 0;if(ue&&Fr(Z)&&Lt(),j.da)alert("todo:use_scaling");else{if(ae){if(Q.Ib=Pt,j.Kb){if(Z=j.U+1>>1,Q.memory=s(j.U+2*Z),Q.memory==null)return 0;Q.ec=Q.memory,Q.fc=0,Q.cc=Q.ec,Q.dc=Q.fc+j.U,Q.Mc=Q.cc,Q.Nc=Q.dc+Z,Q.Ib=zt,Lt()}}else alert("todo:EmitYUV");ue&&(Q.Jb=Lr,ae&&Ge())}if(ae&&!nE){for(j=0;256>j;++j)Gk[j]=89858*(j-128)+Ps>>ou,$m[j]=-22014*(j-128)+Ps,q1[j]=-45773*(j-128),Rs[j]=113618*(j-128)+Ps>>ou;for(j=dA;j<Lg;++j)Q=76283*(j-16)+Ps>>ou,Gm[j-dA]=$n(Q,255),W1[j-dA]=$n(Q+8>>4,15);nE=1}return 1}function xn(j){var Q=j.ma,Z=j.U,ae=j.T;return t(!(1&j.ka)),0>=Z||0>=ae?0:(Z=Q.Ib(j,Q),Q.Jb!=null&&Q.Jb(j,Q,Z),Q.Dc+=Z,1)}function bn(j){j.ma.memory=null}function $t(j,Q,Z,ae){return G(j,8)!=47?0:(Q[0]=G(j,14)+1,Z[0]=G(j,14)+1,ae[0]=G(j,1),G(j,3)!=0?0:!j.h)}function rn(j,Q){if(4>j)return j+1;var Z=j-2>>1;return(2+(1&j)<<Z)+G(Q,Z)+1}function en(j,Q){return 120<Q?Q-120:1<=(Z=((Z=td[Q-1])>>4)*j+(8-(15&Z)))?Z:1;var Z}function dr(j,Q,Z){var ae=q(Z),ue=j[Q+=255&ae].g-8;return 0<ue&&(te(Z,Z.u+8),ae=q(Z),Q+=j[Q].value,Q+=ae&(1<<ue)-1),te(Z,Z.u+j[Q].g),j[Q].value}function Yr(j,Q,Z){return Z.g+=j.g,Z.value+=j.value<<Q>>>0,t(8>=Z.g),j.g}function ra(j,Q,Z){var ae=j.xc;return t((Q=ae==0?0:j.vc[j.md*(Z>>ae)+(Q>>ae)])<j.Wb),j.Ya[Q]}function fe(j,Q,Z,ae){var ue=j.ab,me=j.c*Q,ge=j.C;Q=ge+Q;var ve=Z,we=ae;for(ae=j.Ta,Z=j.Ua;0<ue--;){var ke=j.gc[ue],Me=ge,nt=Q,et=ve,Ke=we,kt=(we=ae,ve=Z,ke.Ea);switch(t(Me<nt),t(nt<=ke.nc),ke.hc){case 2:jg(et,Ke,(nt-Me)*kt,we,ve);break;case 0:var ht=Me,Ue=nt,Ve=we,Ct=ve,Bt=(er=ke).Ea;ht==0&&(G1(et,Ke,null,null,1,Ve,Ct),mt(et,Ke+1,0,0,Bt-1,Ve,Ct+1),Ke+=Bt,Ct+=Bt,++ht);for(var St=1<<er.b,nr=St-1,Xt=He(Bt,er.b),vr=er.K,er=er.w+(ht>>er.b)*Xt;ht<Ue;){var Pn=vr,Gn=er,fn=1;for(Mm(et,Ke,Ve,Ct-Bt,1,Ve,Ct);fn<Bt;){var ln=(fn&~nr)+St;ln>Bt&&(ln=Bt),(0,Wu[Pn[Gn++]>>8&15])(et,Ke+ +fn,Ve,Ct+fn-Bt,ln-fn,Ve,Ct+fn),fn=ln}Ke+=Bt,Ct+=Bt,++ht&nr||(er+=Xt)}nt!=ke.nc&&n(we,ve-kt,we,ve+(nt-Me-1)*kt,kt);break;case 1:for(kt=et,Ue=Ke,Bt=(et=ke.Ea)-(Ct=et&~(Ve=(Ke=1<<ke.b)-1)),ht=He(et,ke.b),St=ke.K,ke=ke.w+(Me>>ke.b)*ht;Me<nt;){for(nr=St,Xt=ke,vr=new Oe,er=Ue+Ct,Pn=Ue+et;Ue<er;)Mt(nr[Xt++],vr),eA(vr,kt,Ue,Ke,we,ve),Ue+=Ke,ve+=Ke;Ue<Pn&&(Mt(nr[Xt++],vr),eA(vr,kt,Ue,Bt,we,ve),Ue+=Bt,ve+=Bt),++Me&Ve||(ke+=ht)}break;case 3:if(et==we&&Ke==ve&&0<ke.b){for(Ue=we,et=kt=ve+(nt-Me)*kt-(Ct=(nt-Me)*He(ke.Ea,ke.b)),Ke=we,Ve=ve,ht=[],Ct=(Bt=Ct)-1;0<=Ct;--Ct)ht[Ct]=Ke[Ve+Ct];for(Ct=Bt-1;0<=Ct;--Ct)Ue[et+Ct]=ht[Ct];Il(ke,Me,nt,we,kt,we,ve)}else Il(ke,Me,nt,et,Ke,we,ve)}ve=ae,we=Z}we!=Z&&n(ae,Z,ve,we,me)}function Be(j,Q){var Z=j.V,ae=j.Ba+j.c*j.C,ue=Q-j.C;if(t(Q<=j.l.o),t(16>=ue),0<ue){var me=j.l,ge=j.Ta,ve=j.Ua,we=me.width;if(fe(j,ue,Z,ae),ue=ve=[ve],t((Z=j.C)<(ae=Q)),t(me.v<me.va),ae>me.o&&(ae=me.o),Z<me.j){var ke=me.j-Z;Z=me.j,ue[0]+=ke*we}if(Z>=ae?Z=0:(ue[0]+=4*me.v,me.ka=Z-me.j,me.U=me.va-me.v,me.T=ae-Z,Z=1),Z){if(ve=ve[0],11>(Z=j.ca).S){var Me=Z.f.RGBA,nt=(ae=Z.S,ue=me.U,me=me.T,ke=Me.eb,Me.A),et=me;for(Me=Me.fb+j.Ma*Me.A;0<et--;){var Ke=ge,kt=ve,ht=ue,Ue=ke,Ve=Me;switch(ae){case Pi:no(Ke,kt,ht,Ue,Ve);break;case Gh:yi(Ke,kt,ht,Ue,Ve);break;case Hm:yi(Ke,kt,ht,Ue,Ve),il(Ue,Ve,0,ht,1,0);break;case nu:uc(Ke,kt,ht,Ue,Ve);break;case Qm:zr(Ke,kt,ht,Ue,Ve,1);break;case lA:zr(Ke,kt,ht,Ue,Ve,1),il(Ue,Ve,0,ht,1,0);break;case xf:zr(Ke,kt,ht,Ue,Ve,0);break;case Zu:zr(Ke,kt,ht,Ue,Ve,0),il(Ue,Ve,1,ht,1,0);break;case Ju:tA(Ke,kt,ht,Ue,Ve);break;case Kh:tA(Ke,kt,ht,Ue,Ve),hn(Ue,Ve,ht,1,0);break;case Fg:No(Ke,kt,ht,Ue,Ve);break;default:t(0)}ve+=we,Me+=nt}j.Ma+=me}else alert("todo:EmitRescaledRowsYUVA");t(j.Ma<=Z.height)}}j.C=Q,t(j.C<=j.i)}function Ee(j){var Q;if(0<j.ua)return 0;for(Q=0;Q<j.Wb;++Q){var Z=j.Ya[Q].G,ae=j.Ya[Q].H;if(0<Z[1][ae[1]+0].g||0<Z[2][ae[2]+0].g||0<Z[3][ae[3]+0].g)return 0}return 1}function Ce(j,Q,Z,ae,ue,me){if(j.Z!=0){var ge=j.qd,ve=j.rd;for(t(su[j.Z]!=null);Q<Z;++Q)su[j.Z](ge,ve,ae,ue,ae,ue,me),ge=ae,ve=ue,ue+=me;j.qd=ge,j.rd=ve}}function Ne(j,Q){var Z=j.l.ma,ae=Z.Z==0||Z.Z==1?j.l.j:j.C;if(ae=j.C<ae?ae:j.C,t(Q<=j.l.o),Q>ae){var ue=j.l.width,me=Z.ca,ge=Z.tb+ue*ae,ve=j.V,we=j.Ba+j.c*ae,ke=j.gc;t(j.ab==1),t(ke[0].hc==3),Zd(ke[0],ae,Q,ve,we,me,ge),Ce(Z,ae,Q,me,ge,ue)}j.C=j.Ma=Q}function Te(j,Q,Z,ae,ue,me,ge){var ve=j.$/ae,we=j.$%ae,ke=j.m,Me=j.s,nt=Z+j.$,et=nt;ue=Z+ae*ue;var Ke=Z+ae*me,kt=280+Me.ua,ht=j.Pb?ve:16777216,Ue=0<Me.ua?Me.Wa:null,Ve=Me.wc,Ct=nt<Ke?ra(Me,we,ve):null;t(j.C<me),t(Ke<=ue);var Bt=!1;e:for(;;){for(;Bt||nt<Ke;){var St=0;if(ve>=ht){var nr=nt-Z;t((ht=j).Pb),ht.wd=ht.m,ht.xd=nr,0<ht.s.ua&&_e(ht.s.Wa,ht.s.vb),ht=ve+eE}if(we&Ve||(Ct=ra(Me,we,ve)),t(Ct!=null),Ct.Qb&&(Q[nt]=Ct.qb,Bt=!0),!Bt)if(ie(ke),Ct.jc){St=ke,nr=Q;var Xt=nt,vr=Ct.pd[q(St)&Os-1];t(Ct.jc),256>vr.g?(te(St,St.u+vr.g),nr[Xt]=vr.value,St=0):(te(St,St.u+vr.g-256),t(256<=vr.value),St=vr.value),St==0&&(Bt=!0)}else St=dr(Ct.G[0],Ct.H[0],ke);if(ke.h)break;if(Bt||256>St){if(!Bt)if(Ct.nd)Q[nt]=(Ct.qb|St<<8)>>>0;else{if(ie(ke),Bt=dr(Ct.G[1],Ct.H[1],ke),ie(ke),nr=dr(Ct.G[2],Ct.H[2],ke),Xt=dr(Ct.G[3],Ct.H[3],ke),ke.h)break;Q[nt]=(Xt<<24|Bt<<16|St<<8|nr)>>>0}if(Bt=!1,++nt,++we>=ae&&(we=0,++ve,ge!=null&&ve<=me&&!(ve%16)&&ge(j,ve),Ue!=null))for(;et<nt;)St=Q[et++],Ue.X[(506832829*St&4294967295)>>>Ue.Mb]=St}else if(280>St){if(St=rn(St-256,ke),nr=dr(Ct.G[4],Ct.H[4],ke),ie(ke),nr=en(ae,nr=rn(nr,ke)),ke.h)break;if(nt-Z<nr||ue-nt<St)break e;for(Xt=0;Xt<St;++Xt)Q[nt+Xt]=Q[nt+Xt-nr];for(nt+=St,we+=St;we>=ae;)we-=ae,++ve,ge!=null&&ve<=me&&!(ve%16)&&ge(j,ve);if(t(nt<=ue),we&Ve&&(Ct=ra(Me,we,ve)),Ue!=null)for(;et<nt;)St=Q[et++],Ue.X[(506832829*St&4294967295)>>>Ue.Mb]=St}else{if(!(St<kt))break e;for(Bt=St-280,t(Ue!=null);et<nt;)St=Q[et++],Ue.X[(506832829*St&4294967295)>>>Ue.Mb]=St;St=nt,t(!(Bt>>>(nr=Ue).Xa)),Q[St]=nr.X[Bt],Bt=!0}Bt||t(ke.h==J(ke))}if(j.Pb&&ke.h&&nt<ue)t(j.m.h),j.a=5,j.m=j.wd,j.$=j.xd,0<j.s.ua&&_e(j.s.vb,j.s.Wa);else{if(ke.h)break e;ge!=null&&ge(j,ve>me?me:ve),j.a=0,j.$=nt-Z}return 1}return j.a=3,0}function Ye(j){t(j!=null),j.vc=null,j.yc=null,j.Ya=null;var Q=j.Wa;Q!=null&&(Q.X=null),j.vb=null,t(j!=null)}function ut(){var j=new Qh;return j==null?null:(j.a=0,j.xb=qh,Fn("Predictor","VP8LPredictors"),Fn("Predictor","VP8LPredictors_C"),Fn("PredictorAdd","VP8LPredictorsAdd"),Fn("PredictorAdd","VP8LPredictorsAdd_C"),jg=Tt,eA=Dt,no=yt,yi=kr,tA=rr,No=an,uc=_r,_.VP8LMapColor32b=ti,_.VP8LMapColor8b=Um,j)}function $e(j,Q,Z,ae,ue){var me=1,ge=[j],ve=[Q],we=ae.m,ke=ae.s,Me=null,nt=0;e:for(;;){if(Z)for(;me&&G(we,1);){var et=ge,Ke=ve,kt=ae,ht=1,Ue=kt.m,Ve=kt.gc[kt.ab],Ct=G(Ue,2);if(kt.Oc&1<<Ct)me=0;else{switch(kt.Oc|=1<<Ct,Ve.hc=Ct,Ve.Ea=et[0],Ve.nc=Ke[0],Ve.K=[null],++kt.ab,t(4>=kt.ab),Ct){case 0:case 1:Ve.b=G(Ue,3)+2,ht=$e(He(Ve.Ea,Ve.b),He(Ve.nc,Ve.b),0,kt,Ve.K),Ve.K=Ve.K[0];break;case 3:var Bt,St=G(Ue,8)+1,nr=16<St?0:4<St?1:2<St?2:3;if(et[0]=He(Ve.Ea,nr),Ve.b=nr,Bt=ht=$e(St,1,0,kt,Ve.K)){var Xt,vr=St,er=Ve,Pn=1<<(8>>er.b),Gn=s(Pn);if(Gn==null)Bt=0;else{var fn=er.K[0],ln=er.w;for(Gn[0]=er.K[0][0],Xt=1;Xt<1*vr;++Xt)Gn[Xt]=Xe(fn[ln+Xt],Gn[Xt-1]);for(;Xt<4*Pn;++Xt)Gn[Xt]=0;er.K[0]=null,er.K[0]=Gn,Bt=1}}ht=Bt;break;case 2:break;default:t(0)}me=ht}}if(ge=ge[0],ve=ve[0],me&&G(we,1)&&!(me=1<=(nt=G(we,4))&&11>=nt)){ae.a=3;break e}var aa;if(aa=me)t:{var Kn,qr,da,Nr=ae,Mr=ge,Dn=ve,Rn=nt,ai=Z,Ls=Nr.m,as=Nr.s,ss=[null],bs=1,Pl=0,qn=yf[Rn];r:for(;;){if(ai&&G(Ls,1)){var ys=G(Ls,3)+2,fc=He(Mr,ys),AA=He(Dn,ys),Cf=fc*AA;if(!$e(fc,AA,0,Nr,ss))break r;for(ss=ss[0],as.xc=ys,Kn=0;Kn<Cf;++Kn){var fA=ss[Kn]>>8&65535;ss[Kn]=fA,fA>=bs&&(bs=fA+1)}}if(Ls.h)break r;for(qr=0;5>qr;++qr){var Ta=ol[qr];!qr&&0<Rn&&(Ta+=1<<Rn),Pl<Ta&&(Pl=Ta)}var Km=i(bs*qn,I),Mg=bs,so=i(Mg,P);if(so==null)var Ra=null;else t(65536>=Mg),Ra=so;var _f=s(Pl);if(Ra==null||_f==null||Km==null){Nr.a=1;break r}var hA=Km;for(Kn=da=0;Kn<bs;++Kn){var Bo=Ra[Kn],mA=Bo.G,To=Bo.H,qm=0,Xh=1,Ug=0;for(qr=0;5>qr;++qr){Ta=ol[qr],mA[qr]=hA,To[qr]=da,!qr&&0<Rn&&(Ta+=1<<Rn);a:{var Wm,Qg=Ta,Xm=Nr,Yh=_f,iE=hA,oE=da,Ym=0,sd=Xm.m,qk=G(sd,1);if(a(Yh,0,0,Qg),qk){var lE=G(sd,1)+1,cE=G(sd,1),X1=G(sd,cE==0?1:8);Yh[X1]=1,lE==2&&(Yh[X1=G(sd,8)]=1);var Jh=1}else{var Y1=s(19),J1=G(sd,4)+4;if(19<J1){Xm.a=3;var Jm=0;break a}for(Wm=0;Wm<J1;++Wm)Y1[ed[Wm]]=G(sd,3);var Hg=void 0,Zh=void 0,uE=Xm,dE=Y1,id=Qg,Zm=Yh,Vg=0,hc=uE.m,e0=8,Z1=i(128,I);n:for(;D(Z1,0,7,dE,19);){if(G(hc,1)){var AE=2+2*G(hc,3);if((Hg=2+G(hc,AE))>id)break n}else Hg=id;for(Zh=0;Zh<id&&Hg--;){ie(hc);var eb=Z1[0+(127&q(hc))];te(hc,hc.u+eb.g);var Sf=eb.value;if(16>Sf)Zm[Zh++]=Sf,Sf!=0&&(e0=Sf);else{var fE=Sf==16,tb=Sf-16,rb=Dl[tb],nb=G(hc,Og[tb])+rb;if(Zh+nb>id)break n;for(var hE=fE?e0:0;0<nb--;)Zm[Zh++]=hE}}Vg=1;break n}Vg||(uE.a=3),Jh=Vg}(Jh=Jh&&!sd.h)&&(Ym=D(iE,oE,8,Yh,Qg)),Jh&&Ym!=0?Jm=Ym:(Xm.a=3,Jm=0)}if(Jm==0)break r;if(Xh&&bf[qr]==1&&(Xh=hA[da].g==0),qm+=hA[da].g,da+=Jm,3>=qr){var Nf,zg=_f[0];for(Nf=1;Nf<Ta;++Nf)_f[Nf]>zg&&(zg=_f[Nf]);Ug+=zg}}if(Bo.nd=Xh,Bo.Qb=0,Xh&&(Bo.qb=(mA[3][To[3]+0].value<<24|mA[1][To[1]+0].value<<16|mA[2][To[2]+0].value)>>>0,qm==0&&256>mA[0][To[0]+0].value&&(Bo.Qb=1,Bo.qb+=mA[0][To[0]+0].value<<8)),Bo.jc=!Bo.Qb&&6>Ug,Bo.jc){var ep,od=Bo;for(ep=0;ep<Os;++ep){var lu=ep,ld=od.pd[lu],tp=od.G[0][od.H[0]+lu];256<=tp.value?(ld.g=tp.g+256,ld.value=tp.value):(ld.g=0,ld.value=0,lu>>=Yr(tp,8,ld),lu>>=Yr(od.G[1][od.H[1]+lu],16,ld),lu>>=Yr(od.G[2][od.H[2]+lu],0,ld),Yr(od.G[3][od.H[3]+lu],24,ld))}}}as.vc=ss,as.Wb=bs,as.Ya=Ra,as.yc=Km,aa=1;break t}aa=0}if(!(me=aa)){ae.a=3;break e}if(0<nt){if(ke.ua=1<<nt,!De(ke.Wa,nt)){ae.a=1,me=0;break e}}else ke.ua=0;var rp=ae,ab=ge,mE=ve,sb=rp.s,ib=sb.xc;if(rp.c=ab,rp.i=mE,sb.md=He(ab,ib),sb.wc=ib==0?-1:(1<<ib)-1,Z){ae.xb=rE;break e}if((Me=s(ge*ve))==null){ae.a=1,me=0;break e}me=(me=Te(ae,Me,0,ge,ve,ve,null))&&!we.h;break e}return me?(ue!=null?ue[0]=Me:(t(Me==null),t(Z)),ae.$=0,Z||Ye(ke)):Ye(ke),me}function tt(j,Q){var Z=j.c*j.i,ae=Z+Q+16*Q;return t(j.c<=Q),j.V=s(ae),j.V==null?(j.Ta=null,j.Ua=0,j.a=1,0):(j.Ta=j.V,j.Ua=j.Ba+Z+Q,1)}function at(j,Q){var Z=j.C,ae=Q-Z,ue=j.V,me=j.Ba+j.c*Z;for(t(Q<=j.l.o);0<ae;){var ge=16<ae?16:ae,ve=j.l.ma,we=j.l.width,ke=we*ge,Me=ve.ca,nt=ve.tb+we*Z,et=j.Ta,Ke=j.Ua;fe(j,ge,ue,me),ba(et,Ke,Me,nt,ke),Ce(ve,Z,Z+ge,Me,nt,we),ae-=ge,ue+=ge*j.c,Z+=ge}t(Z==Q),j.C=j.Ma=Q}function jt(){this.ub=this.yd=this.td=this.Rb=0}function Vt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Jt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ht(){this.Yb=function(){var j=[];return function Q(Z,ae,ue){for(var me=ue[ae],ge=0;ge<me&&(Z.push(ue.length>ae+1?[]:0),!(ue.length<ae+1));ge++)Q(Z[ge],ae+1,ue)}(j,0,[3,11]),j}()}function Gt(){this.jb=s(3),this.Wc=o([4,8],Ht),this.Xc=o([4,17],Ht)}function Sr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function sn(){this.ld=this.La=this.dd=this.tc=0}function on(){this.Na=this.la=0}function An(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ms(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function bo(){this.uc=this.M=this.Nb=0,this.wa=Array(new sn),this.Y=0,this.ya=Array(new ms),this.aa=0,this.l=new Fs}function ps(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Zs(){this.cb=this.a=0,this.sc="",this.m=new re,this.Od=new jt,this.Kc=new Vt,this.ed=new Sr,this.Qa=new Jt,this.Ic=this.$c=this.Aa=0,this.D=new bo,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,re),this.ia=0,this.pb=i(4,An),this.Pa=new Gt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ps),this.Hd=0,this.rb=Array(new on),this.sb=0,this.wa=Array(new sn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ms),this.L=this.aa=0,this.gd=o([4,2],sn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Fs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function gi(){var j=new Zs;return j!=null&&(j.a=0,j.sc="OK",j.cb=0,j.Xb=0,Ds||(Ds=Rh)),j}function xa(j,Q,Z){return j.a==0&&(j.a=Q,j.sc=Z,j.cb=0),0}function ei(j,Q,Z){return 3<=Z&&j[Q+0]==157&&j[Q+1]==1&&j[Q+2]==42}function zd(j,Q){if(j==null)return 0;if(j.a=0,j.sc="OK",Q==null)return xa(j,2,"null VP8Io passed to VP8GetHeaders()");var Z=Q.data,ae=Q.w,ue=Q.ha;if(4>ue)return xa(j,7,"Truncated header.");var me=Z[ae+0]|Z[ae+1]<<8|Z[ae+2]<<16,ge=j.Od;if(ge.Rb=!(1&me),ge.td=me>>1&7,ge.yd=me>>4&1,ge.ub=me>>5,3<ge.td)return xa(j,3,"Incorrect keyframe parameters.");if(!ge.yd)return xa(j,4,"Frame not displayable.");ae+=3,ue-=3;var ve=j.Kc;if(ge.Rb){if(7>ue)return xa(j,7,"cannot parse picture header");if(!ei(Z,ae,ue))return xa(j,3,"Bad code word");ve.c=16383&(Z[ae+4]<<8|Z[ae+3]),ve.Td=Z[ae+4]>>6,ve.i=16383&(Z[ae+6]<<8|Z[ae+5]),ve.Ud=Z[ae+6]>>6,ae+=7,ue-=7,j.za=ve.c+15>>4,j.Ub=ve.i+15>>4,Q.width=ve.c,Q.height=ve.i,Q.Da=0,Q.j=0,Q.v=0,Q.va=Q.width,Q.o=Q.height,Q.da=0,Q.ib=Q.width,Q.hb=Q.height,Q.U=Q.width,Q.T=Q.height,a((me=j.Pa).jb,0,255,me.jb.length),t((me=j.Qa)!=null),me.Cb=0,me.Bb=0,me.Fb=1,a(me.Zb,0,0,me.Zb.length),a(me.Lb,0,0,me.Lb)}if(ge.ub>ue)return xa(j,7,"bad partition length");X(me=j.m,Z,ae,ge.ub),ae+=ge.ub,ue-=ge.ub,ge.Rb&&(ve.Ld=oe(me),ve.Kd=oe(me)),ve=j.Qa;var we,ke=j.Pa;if(t(me!=null),t(ve!=null),ve.Cb=oe(me),ve.Cb){if(ve.Bb=oe(me),oe(me)){for(ve.Fb=oe(me),we=0;4>we;++we)ve.Zb[we]=oe(me)?Y(me,7):0;for(we=0;4>we;++we)ve.Lb[we]=oe(me)?Y(me,6):0}if(ve.Bb)for(we=0;3>we;++we)ke.jb[we]=oe(me)?H(me,8):255}else ve.Bb=0;if(me.Ka)return xa(j,3,"cannot parse segment header");if((ve=j.ed).zd=oe(me),ve.Tb=H(me,6),ve.wb=H(me,3),ve.Pc=oe(me),ve.Pc&&oe(me)){for(ke=0;4>ke;++ke)oe(me)&&(ve.vd[ke]=Y(me,6));for(ke=0;4>ke;++ke)oe(me)&&(ve.od[ke]=Y(me,6))}if(j.L=ve.Tb==0?0:ve.zd?1:2,me.Ka)return xa(j,3,"cannot parse filter header");var Me=ue;if(ue=we=ae,ae=we+Me,ve=Me,j.Xb=(1<<H(j.m,2))-1,Me<3*(ke=j.Xb))Z=7;else{for(we+=3*ke,ve-=3*ke,Me=0;Me<ke;++Me){var nt=Z[ue+0]|Z[ue+1]<<8|Z[ue+2]<<16;nt>ve&&(nt=ve),X(j.Jc[+Me],Z,we,nt),we+=nt,ve-=nt,ue+=3}X(j.Jc[+ke],Z,we,ve),Z=we<ae?0:5}if(Z!=0)return xa(j,Z,"cannot parse partitions");for(Z=H(we=j.m,7),ue=oe(we)?Y(we,4):0,ae=oe(we)?Y(we,4):0,ve=oe(we)?Y(we,4):0,ke=oe(we)?Y(we,4):0,we=oe(we)?Y(we,4):0,Me=j.Qa,nt=0;4>nt;++nt){if(Me.Cb){var et=Me.Zb[nt];Me.Fb||(et+=Z)}else{if(0<nt){j.pb[nt]=j.pb[0];continue}et=Z}var Ke=j.pb[nt];Ke.Sc[0]=Vm[$n(et+ue,127)],Ke.Sc[1]=zm[$n(et+0,127)],Ke.Eb[0]=2*Vm[$n(et+ae,127)],Ke.Eb[1]=101581*zm[$n(et+ve,127)]>>16,8>Ke.Eb[1]&&(Ke.Eb[1]=8),Ke.Qc[0]=Vm[$n(et+ke,117)],Ke.Qc[1]=zm[$n(et+we,127)],Ke.lc=et+we}if(!ge.Rb)return xa(j,4,"Not a key frame.");for(oe(me),ge=j.Pa,Z=0;4>Z;++Z){for(ue=0;8>ue;++ue)for(ae=0;3>ae;++ae)for(ve=0;11>ve;++ve)ke=ce(me,wf[Z][ue][ae][ve])?H(me,8):au[Z][ue][ae][ve],ge.Wc[Z][ue].Yb[ae][ve]=ke;for(ue=0;17>ue;++ue)ge.Xc[Z][ue]=ge.Wc[Z][tE[ue]]}return j.kc=oe(me),j.kc&&(j.Bd=H(me,8)),j.cb=1}function Rh(j,Q,Z,ae,ue,me,ge){var ve=Q[ue].Yb[Z];for(Z=0;16>ue;++ue){if(!ce(j,ve[Z+0]))return ue;for(;!ce(j,ve[Z+1]);)if(ve=Q[++ue].Yb[0],Z=0,ue==16)return 16;var we=Q[ue+1].Yb;if(ce(j,ve[Z+2])){var ke=j,Me=0;if(ce(ke,(et=ve)[(nt=Z)+3]))if(ce(ke,et[nt+6])){for(ve=0,nt=2*(Me=ce(ke,et[nt+8]))+(et=ce(ke,et[nt+9+Me])),Me=0,et=qa[nt];et[ve];++ve)Me+=Me+ce(ke,et[ve]);Me+=3+(8<<nt)}else ce(ke,et[nt+7])?(Me=7+2*ce(ke,165),Me+=ce(ke,145)):Me=5+ce(ke,159);else Me=ce(ke,et[nt+4])?3+ce(ke,et[nt+5]):2;ve=we[2]}else Me=1,ve=we[1];we=ge+Qn[ue],0>(ke=j).b&&Ae(ke);var nt,et=ke.b,Ke=(nt=ke.Ca>>1)-(ke.I>>et)>>31;--ke.b,ke.Ca+=Ke,ke.Ca|=1,ke.I-=(nt+1&Ke)<<et,me[we]=((Me^Ke)-Ke)*ae[(0<ue)+0]}return 16}function Vc(j){var Q=j.rb[j.sb-1];Q.la=0,Q.Na=0,a(j.zc,0,0,j.zc.length),j.ja=0}function sf(j,Q){if(j==null)return 0;if(Q==null)return xa(j,2,"NULL VP8Io parameter in VP8Decode().");if(!j.cb&&!zd(j,Q))return 0;if(t(j.cb),Q.ac==null||Q.ac(Q)){Q.ob&&(j.L=0);var Z=ad[j.L];if(j.L==2?(j.yb=0,j.zb=0):(j.yb=Q.v-Z>>4,j.zb=Q.j-Z>>4,0>j.yb&&(j.yb=0),0>j.zb&&(j.zb=0)),j.Va=Q.o+15+Z>>4,j.Hb=Q.va+15+Z>>4,j.Hb>j.za&&(j.Hb=j.za),j.Va>j.Ub&&(j.Va=j.Ub),0<j.L){var ae=j.ed;for(Z=0;4>Z;++Z){var ue;if(j.Qa.Cb){var me=j.Qa.Lb[Z];j.Qa.Fb||(me+=ae.Tb)}else me=ae.Tb;for(ue=0;1>=ue;++ue){var ge=j.gd[Z][ue],ve=me;if(ae.Pc&&(ve+=ae.vd[0],ue&&(ve+=ae.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var we=ve;0<ae.wb&&(we=4<ae.wb?we>>2:we>>1)>9-ae.wb&&(we=9-ae.wb),1>we&&(we=1),ge.dd=we,ge.tc=2*ve+we,ge.ld=40<=ve?2:15<=ve?1:0}else ge.tc=0;ge.La=ue}}}Z=0}else xa(j,6,"Frame setup failed"),Z=j.a;if(Z=Z==0){if(Z){j.$c=0,0<j.Aa||(j.Ic=aE);e:{Z=j.Ic,ae=4*(we=j.za);var ke=32*we,Me=we+1,nt=0<j.L?we*(0<j.Aa?2:1):0,et=(j.Aa==2?2:1)*we;if((ge=ae+832+(ue=3*(16*Z+ad[j.L])/2*ke)+(me=j.Fa!=null&&0<j.Fa.length?j.Kc.c*j.Kc.i:0))!=ge)Z=0;else{if(ge>j.Vb){if(j.Vb=0,j.Ec=s(ge),j.Fc=0,j.Ec==null){Z=xa(j,1,"no memory during frame initialization.");break e}j.Vb=ge}ge=j.Ec,ve=j.Fc,j.Ac=ge,j.Bc=ve,ve+=ae,j.Gd=i(ke,ps),j.Hd=0,j.rb=i(Me+1,on),j.sb=1,j.wa=nt?i(nt,sn):null,j.Y=0,j.D.Nb=0,j.D.wa=j.wa,j.D.Y=j.Y,0<j.Aa&&(j.D.Y+=we),t(!0),j.oc=ge,j.pc=ve,ve+=832,j.ya=i(et,ms),j.aa=0,j.D.ya=j.ya,j.D.aa=j.aa,j.Aa==2&&(j.D.aa+=we),j.R=16*we,j.B=8*we,we=(ke=ad[j.L])*j.R,ke=ke/2*j.B,j.sa=ge,j.ta=ve+we,j.qa=j.sa,j.ra=j.ta+16*Z*j.R+ke,j.Ha=j.qa,j.Ia=j.ra+8*Z*j.B+ke,j.$c=0,ve+=ue,j.mb=me?ge:null,j.nb=me?ve:null,t(ve+me<=j.Fc+j.Vb),Vc(j),a(j.Ac,j.Bc,0,ae),Z=1}}if(Z){if(Q.ka=0,Q.y=j.sa,Q.O=j.ta,Q.f=j.qa,Q.N=j.ra,Q.ea=j.Ha,Q.Vd=j.Ia,Q.fa=j.R,Q.Rc=j.B,Q.F=null,Q.J=0,!Yu){for(Z=-255;255>=Z;++Z)ns[255+Z]=0>Z?-Z:Z;for(Z=-1020;1020>=Z;++Z)Fl[1020+Z]=-128>Z?-128:127<Z?127:Z;for(Z=-112;112>=Z;++Z)iA[112+Z]=-16>Z?-16:15<Z?15:Z;for(Z=-255;510>=Z;++Z)oA[255+Z]=0>Z?0:255<Z?255:Z;Yu=1}tu=yo,dc=$c,Ac=Cl,xs=zn,ko=Gc,Ga=zc,mf=Xc,ru=lc,zh=qd,rA=df,nA=Kd,aA=zu,pf=$u,$h=Yc,sA=sl,Xu=Oi,gf=vs,Ka=Uh,ao[0]=Ii,ao[1]=Lh,ao[2]=Nl,ao[3]=Mh,ao[4]=wo,ao[5]=kl,ao[6]=ro,ao[7]=Eo,ao[8]=oc,ao[9]=Kc,rd[0]=_l,rd[1]=lf,rd[2]=ac,rd[3]=Gd,rd[4]=ua,rd[5]=ic,rd[6]=Sl,ll[0]=Bl,ll[1]=of,ll[2]=cf,ll[3]=Co,ll[4]=yn,ll[5]=gs,ll[6]=qc,Z=1}else Z=0}Z&&(Z=function(Ke,kt){for(Ke.M=0;Ke.M<Ke.Va;++Ke.M){var ht,Ue=Ke.Jc[Ke.M&Ke.Xb],Ve=Ke.m,Ct=Ke;for(ht=0;ht<Ct.za;++ht){var Bt=Ve,St=Ct,nr=St.Ac,Xt=St.Bc+4*ht,vr=St.zc,er=St.ya[St.aa+ht];if(St.Qa.Bb?er.$b=ce(Bt,St.Pa.jb[0])?2+ce(Bt,St.Pa.jb[2]):ce(Bt,St.Pa.jb[1]):er.$b=0,St.kc&&(er.Ad=ce(Bt,St.Bd)),er.Za=!ce(Bt,145)+0,er.Za){var Pn=er.Ob,Gn=0;for(St=0;4>St;++St){var fn,ln=vr[0+St];for(fn=0;4>fn;++fn){ln=K1[nr[Xt+fn]][ln];for(var aa=cA[ce(Bt,ln[0])];0<aa;)aa=cA[2*aa+ce(Bt,ln[aa])];ln=-aa,nr[Xt+fn]=ln}n(Pn,Gn,nr,Xt,4),Gn+=4,vr[0+St]=ln}}else ln=ce(Bt,156)?ce(Bt,128)?1:3:ce(Bt,163)?2:0,er.Ob[0]=ln,a(nr,Xt,ln,4),a(vr,0,ln,4);er.Dd=ce(Bt,142)?ce(Bt,114)?ce(Bt,183)?1:3:2:0}if(Ct.m.Ka)return xa(Ke,7,"Premature end-of-partition0 encountered.");for(;Ke.ja<Ke.za;++Ke.ja){if(Ct=Ue,Bt=(Ve=Ke).rb[Ve.sb-1],nr=Ve.rb[Ve.sb+Ve.ja],ht=Ve.ya[Ve.aa+Ve.ja],Xt=Ve.kc?ht.Ad:0)Bt.la=nr.la=0,ht.Za||(Bt.Na=nr.Na=0),ht.Hc=0,ht.Gc=0,ht.ia=0;else{var Kn,qr;if(Bt=nr,nr=Ct,Xt=Ve.Pa.Xc,vr=Ve.ya[Ve.aa+Ve.ja],er=Ve.pb[vr.$b],St=vr.ad,Pn=0,Gn=Ve.rb[Ve.sb-1],ln=fn=0,a(St,Pn,0,384),vr.Za)var da=0,Nr=Xt[3];else{aa=s(16);var Mr=Bt.Na+Gn.Na;if(Mr=Ds(nr,Xt[1],Mr,er.Eb,0,aa,0),Bt.Na=Gn.Na=(0<Mr)+0,1<Mr)tu(aa,0,St,Pn);else{var Dn=aa[0]+3>>3;for(aa=0;256>aa;aa+=16)St[Pn+aa]=Dn}da=1,Nr=Xt[0]}var Rn=15&Bt.la,ai=15&Gn.la;for(aa=0;4>aa;++aa){var Ls=1&ai;for(Dn=qr=0;4>Dn;++Dn)Rn=Rn>>1|(Ls=(Mr=Ds(nr,Nr,Mr=Ls+(1&Rn),er.Sc,da,St,Pn))>da)<<7,qr=qr<<2|(3<Mr?3:1<Mr?2:St[Pn+0]!=0),Pn+=16;Rn>>=4,ai=ai>>1|Ls<<7,fn=(fn<<8|qr)>>>0}for(Nr=Rn,da=ai>>4,Kn=0;4>Kn;Kn+=2){for(qr=0,Rn=Bt.la>>4+Kn,ai=Gn.la>>4+Kn,aa=0;2>aa;++aa){for(Ls=1&ai,Dn=0;2>Dn;++Dn)Mr=Ls+(1&Rn),Rn=Rn>>1|(Ls=0<(Mr=Ds(nr,Xt[2],Mr,er.Qc,0,St,Pn)))<<3,qr=qr<<2|(3<Mr?3:1<Mr?2:St[Pn+0]!=0),Pn+=16;Rn>>=2,ai=ai>>1|Ls<<5}ln|=qr<<4*Kn,Nr|=Rn<<4<<Kn,da|=(240&ai)<<Kn}Bt.la=Nr,Gn.la=da,vr.Hc=fn,vr.Gc=ln,vr.ia=43690&ln?0:er.ia,Xt=!(fn|ln)}if(0<Ve.L&&(Ve.wa[Ve.Y+Ve.ja]=Ve.gd[ht.$b][ht.Za],Ve.wa[Ve.Y+Ve.ja].La|=!Xt),Ct.Ka)return xa(Ke,7,"Premature end-of-file encountered.")}if(Vc(Ke),Ve=kt,Ct=1,ht=(Ue=Ke).D,Bt=0<Ue.L&&Ue.M>=Ue.zb&&Ue.M<=Ue.Va,Ue.Aa==0)e:{if(ht.M=Ue.M,ht.uc=Bt,_o(Ue,ht),Ct=1,ht=(qr=Ue.D).Nb,Bt=(ln=ad[Ue.L])*Ue.R,nr=ln/2*Ue.B,aa=16*ht*Ue.R,Dn=8*ht*Ue.B,Xt=Ue.sa,vr=Ue.ta-Bt+aa,er=Ue.qa,St=Ue.ra-nr+Dn,Pn=Ue.Ha,Gn=Ue.Ia-nr+Dn,ai=(Rn=qr.M)==0,fn=Rn>=Ue.Va-1,Ue.Aa==2&&_o(Ue,qr),qr.uc)for(Ls=(Mr=Ue).D.M,t(Mr.D.uc),qr=Mr.yb;qr<Mr.Hb;++qr){da=qr,Nr=Ls;var as=(ss=(Ta=Mr).D).Nb;Kn=Ta.R;var ss=ss.wa[ss.Y+da],bs=Ta.sa,Pl=Ta.ta+16*as*Kn+16*da,qn=ss.dd,ys=ss.tc;if(ys!=0)if(t(3<=ys),Ta.L==1)0<da&&Xu(bs,Pl,Kn,ys+4),ss.La&&Ka(bs,Pl,Kn,ys),0<Nr&&sA(bs,Pl,Kn,ys+4),ss.La&&gf(bs,Pl,Kn,ys);else{var fc=Ta.B,AA=Ta.qa,Cf=Ta.ra+8*as*fc+8*da,fA=Ta.Ha,Ta=Ta.Ia+8*as*fc+8*da;as=ss.ld,0<da&&(ru(bs,Pl,Kn,ys+4,qn,as),rA(AA,Cf,fA,Ta,fc,ys+4,qn,as)),ss.La&&(aA(bs,Pl,Kn,ys,qn,as),$h(AA,Cf,fA,Ta,fc,ys,qn,as)),0<Nr&&(mf(bs,Pl,Kn,ys+4,qn,as),zh(AA,Cf,fA,Ta,fc,ys+4,qn,as)),ss.La&&(nA(bs,Pl,Kn,ys,qn,as),pf(AA,Cf,fA,Ta,fc,ys,qn,as))}}if(Ue.ia&&alert("todo:DitherRow"),Ve.put!=null){if(qr=16*Rn,Rn=16*(Rn+1),ai?(Ve.y=Ue.sa,Ve.O=Ue.ta+aa,Ve.f=Ue.qa,Ve.N=Ue.ra+Dn,Ve.ea=Ue.Ha,Ve.W=Ue.Ia+Dn):(qr-=ln,Ve.y=Xt,Ve.O=vr,Ve.f=er,Ve.N=St,Ve.ea=Pn,Ve.W=Gn),fn||(Rn-=ln),Rn>Ve.o&&(Rn=Ve.o),Ve.F=null,Ve.J=null,Ue.Fa!=null&&0<Ue.Fa.length&&qr<Rn&&(Ve.J=Xd(Ue,Ve,qr,Rn-qr),Ve.F=Ue.mb,Ve.F==null&&Ve.F.length==0)){Ct=xa(Ue,3,"Could not decode alpha data.");break e}qr<Ve.j&&(ln=Ve.j-qr,qr=Ve.j,t(!(1&ln)),Ve.O+=Ue.R*ln,Ve.N+=Ue.B*(ln>>1),Ve.W+=Ue.B*(ln>>1),Ve.F!=null&&(Ve.J+=Ve.width*ln)),qr<Rn&&(Ve.O+=Ve.v,Ve.N+=Ve.v>>1,Ve.W+=Ve.v>>1,Ve.F!=null&&(Ve.J+=Ve.v),Ve.ka=qr-Ve.j,Ve.U=Ve.va-Ve.v,Ve.T=Rn-qr,Ct=Ve.put(Ve))}ht+1!=Ue.Ic||fn||(n(Ue.sa,Ue.ta-Bt,Xt,vr+16*Ue.R,Bt),n(Ue.qa,Ue.ra-nr,er,St+8*Ue.B,nr),n(Ue.Ha,Ue.Ia-nr,Pn,Gn+8*Ue.B,nr))}if(!Ct)return xa(Ke,6,"Output aborted.")}return 1}(j,Q)),Q.bc!=null&&Q.bc(Q),Z&=1}return Z?(j.cb=0,Z):0}function vi(j,Q,Z,ae,ue){ue=j[Q+Z+32*ae]+(ue>>3),j[Q+Z+32*ae]=-256&ue?0>ue?0:255:ue}function $d(j,Q,Z,ae,ue,me){vi(j,Q,0,Z,ae+ue),vi(j,Q,1,Z,ae+me),vi(j,Q,2,Z,ae-me),vi(j,Q,3,Z,ae-ue)}function On(j){return(20091*j>>16)+j}function xi(j,Q,Z,ae){var ue,me=0,ge=s(16);for(ue=0;4>ue;++ue){var ve=j[Q+0]+j[Q+8],we=j[Q+0]-j[Q+8],ke=(35468*j[Q+4]>>16)-On(j[Q+12]),Me=On(j[Q+4])+(35468*j[Q+12]>>16);ge[me+0]=ve+Me,ge[me+1]=we+ke,ge[me+2]=we-ke,ge[me+3]=ve-Me,me+=4,Q++}for(ue=me=0;4>ue;++ue)ve=(j=ge[me+0]+4)+ge[me+8],we=j-ge[me+8],ke=(35468*ge[me+4]>>16)-On(ge[me+12]),vi(Z,ae,0,0,ve+(Me=On(ge[me+4])+(35468*ge[me+12]>>16))),vi(Z,ae,1,0,we+ke),vi(Z,ae,2,0,we-ke),vi(Z,ae,3,0,ve-Me),me++,ae+=32}function zc(j,Q,Z,ae){var ue=j[Q+0]+4,me=35468*j[Q+4]>>16,ge=On(j[Q+4]),ve=35468*j[Q+1]>>16;$d(Z,ae,0,ue+ge,j=On(j[Q+1]),ve),$d(Z,ae,1,ue+me,j,ve),$d(Z,ae,2,ue-me,j,ve),$d(Z,ae,3,ue-ge,j,ve)}function $c(j,Q,Z,ae,ue){xi(j,Q,Z,ae),ue&&xi(j,Q+16,Z,ae+4)}function Cl(j,Q,Z,ae){dc(j,Q+0,Z,ae,1),dc(j,Q+32,Z,ae+128,1)}function zn(j,Q,Z,ae){var ue;for(j=j[Q+0]+4,ue=0;4>ue;++ue)for(Q=0;4>Q;++Q)vi(Z,ae,Q,ue,j)}function Gc(j,Q,Z,ae){j[Q+0]&&xs(j,Q+0,Z,ae),j[Q+16]&&xs(j,Q+16,Z,ae+4),j[Q+32]&&xs(j,Q+32,Z,ae+128),j[Q+48]&&xs(j,Q+48,Z,ae+128+4)}function yo(j,Q,Z,ae){var ue,me=s(16);for(ue=0;4>ue;++ue){var ge=j[Q+0+ue]+j[Q+12+ue],ve=j[Q+4+ue]+j[Q+8+ue],we=j[Q+4+ue]-j[Q+8+ue],ke=j[Q+0+ue]-j[Q+12+ue];me[0+ue]=ge+ve,me[8+ue]=ge-ve,me[4+ue]=ke+we,me[12+ue]=ke-we}for(ue=0;4>ue;++ue)ge=(j=me[0+4*ue]+3)+me[3+4*ue],ve=me[1+4*ue]+me[2+4*ue],we=me[1+4*ue]-me[2+4*ue],ke=j-me[3+4*ue],Z[ae+0]=ge+ve>>3,Z[ae+16]=ke+we>>3,Z[ae+32]=ge-ve>>3,Z[ae+48]=ke-we>>3,ae+=64}function nc(j,Q,Z){var ae,ue=Q-32,me=ri,ge=255-j[ue-1];for(ae=0;ae<Z;++ae){var ve,we=me,ke=ge+j[Q-1];for(ve=0;ve<Z;++ve)j[Q+ve]=we[ke+j[ue+ve]];Q+=32}}function Lh(j,Q){nc(j,Q,4)}function of(j,Q){nc(j,Q,8)}function lf(j,Q){nc(j,Q,16)}function ac(j,Q){var Z;for(Z=0;16>Z;++Z)n(j,Q+32*Z,j,Q-32,16)}function Gd(j,Q){var Z;for(Z=16;0<Z;--Z)a(j,Q,j[Q-1],16),Q+=32}function sc(j,Q,Z){var ae;for(ae=0;16>ae;++ae)a(Q,Z+32*ae,j,16)}function _l(j,Q){var Z,ae=16;for(Z=0;16>Z;++Z)ae+=j[Q-1+32*Z]+j[Q+Z-32];sc(ae>>5,j,Q)}function ua(j,Q){var Z,ae=8;for(Z=0;16>Z;++Z)ae+=j[Q-1+32*Z];sc(ae>>4,j,Q)}function ic(j,Q){var Z,ae=8;for(Z=0;16>Z;++Z)ae+=j[Q+Z-32];sc(ae>>4,j,Q)}function Sl(j,Q){sc(128,j,Q)}function Tr(j,Q,Z){return j+2*Q+Z+2>>2}function Nl(j,Q){var Z,ae=Q-32;for(ae=new Uint8Array([Tr(j[ae-1],j[ae+0],j[ae+1]),Tr(j[ae+0],j[ae+1],j[ae+2]),Tr(j[ae+1],j[ae+2],j[ae+3]),Tr(j[ae+2],j[ae+3],j[ae+4])]),Z=0;4>Z;++Z)n(j,Q+32*Z,ae,0,ae.length)}function Mh(j,Q){var Z=j[Q-1],ae=j[Q-1+32],ue=j[Q-1+64],me=j[Q-1+96];pe(j,Q+0,16843009*Tr(j[Q-1-32],Z,ae)),pe(j,Q+32,16843009*Tr(Z,ae,ue)),pe(j,Q+64,16843009*Tr(ae,ue,me)),pe(j,Q+96,16843009*Tr(ue,me,me))}function Ii(j,Q){var Z,ae=4;for(Z=0;4>Z;++Z)ae+=j[Q+Z-32]+j[Q-1+32*Z];for(ae>>=3,Z=0;4>Z;++Z)a(j,Q+32*Z,ae,4)}function wo(j,Q){var Z=j[Q-1+0],ae=j[Q-1+32],ue=j[Q-1+64],me=j[Q-1-32],ge=j[Q+0-32],ve=j[Q+1-32],we=j[Q+2-32],ke=j[Q+3-32];j[Q+0+96]=Tr(ae,ue,j[Q-1+96]),j[Q+1+96]=j[Q+0+64]=Tr(Z,ae,ue),j[Q+2+96]=j[Q+1+64]=j[Q+0+32]=Tr(me,Z,ae),j[Q+3+96]=j[Q+2+64]=j[Q+1+32]=j[Q+0+0]=Tr(ge,me,Z),j[Q+3+64]=j[Q+2+32]=j[Q+1+0]=Tr(ve,ge,me),j[Q+3+32]=j[Q+2+0]=Tr(we,ve,ge),j[Q+3+0]=Tr(ke,we,ve)}function ro(j,Q){var Z=j[Q+1-32],ae=j[Q+2-32],ue=j[Q+3-32],me=j[Q+4-32],ge=j[Q+5-32],ve=j[Q+6-32],we=j[Q+7-32];j[Q+0+0]=Tr(j[Q+0-32],Z,ae),j[Q+1+0]=j[Q+0+32]=Tr(Z,ae,ue),j[Q+2+0]=j[Q+1+32]=j[Q+0+64]=Tr(ae,ue,me),j[Q+3+0]=j[Q+2+32]=j[Q+1+64]=j[Q+0+96]=Tr(ue,me,ge),j[Q+3+32]=j[Q+2+64]=j[Q+1+96]=Tr(me,ge,ve),j[Q+3+64]=j[Q+2+96]=Tr(ge,ve,we),j[Q+3+96]=Tr(ve,we,we)}function kl(j,Q){var Z=j[Q-1+0],ae=j[Q-1+32],ue=j[Q-1+64],me=j[Q-1-32],ge=j[Q+0-32],ve=j[Q+1-32],we=j[Q+2-32],ke=j[Q+3-32];j[Q+0+0]=j[Q+1+64]=me+ge+1>>1,j[Q+1+0]=j[Q+2+64]=ge+ve+1>>1,j[Q+2+0]=j[Q+3+64]=ve+we+1>>1,j[Q+3+0]=we+ke+1>>1,j[Q+0+96]=Tr(ue,ae,Z),j[Q+0+64]=Tr(ae,Z,me),j[Q+0+32]=j[Q+1+96]=Tr(Z,me,ge),j[Q+1+32]=j[Q+2+96]=Tr(me,ge,ve),j[Q+2+32]=j[Q+3+96]=Tr(ge,ve,we),j[Q+3+32]=Tr(ve,we,ke)}function Eo(j,Q){var Z=j[Q+0-32],ae=j[Q+1-32],ue=j[Q+2-32],me=j[Q+3-32],ge=j[Q+4-32],ve=j[Q+5-32],we=j[Q+6-32],ke=j[Q+7-32];j[Q+0+0]=Z+ae+1>>1,j[Q+1+0]=j[Q+0+64]=ae+ue+1>>1,j[Q+2+0]=j[Q+1+64]=ue+me+1>>1,j[Q+3+0]=j[Q+2+64]=me+ge+1>>1,j[Q+0+32]=Tr(Z,ae,ue),j[Q+1+32]=j[Q+0+96]=Tr(ae,ue,me),j[Q+2+32]=j[Q+1+96]=Tr(ue,me,ge),j[Q+3+32]=j[Q+2+96]=Tr(me,ge,ve),j[Q+3+64]=Tr(ge,ve,we),j[Q+3+96]=Tr(ve,we,ke)}function Kc(j,Q){var Z=j[Q-1+0],ae=j[Q-1+32],ue=j[Q-1+64],me=j[Q-1+96];j[Q+0+0]=Z+ae+1>>1,j[Q+2+0]=j[Q+0+32]=ae+ue+1>>1,j[Q+2+32]=j[Q+0+64]=ue+me+1>>1,j[Q+1+0]=Tr(Z,ae,ue),j[Q+3+0]=j[Q+1+32]=Tr(ae,ue,me),j[Q+3+32]=j[Q+1+64]=Tr(ue,me,me),j[Q+3+64]=j[Q+2+64]=j[Q+0+96]=j[Q+1+96]=j[Q+2+96]=j[Q+3+96]=me}function oc(j,Q){var Z=j[Q-1+0],ae=j[Q-1+32],ue=j[Q-1+64],me=j[Q-1+96],ge=j[Q-1-32],ve=j[Q+0-32],we=j[Q+1-32],ke=j[Q+2-32];j[Q+0+0]=j[Q+2+32]=Z+ge+1>>1,j[Q+0+32]=j[Q+2+64]=ae+Z+1>>1,j[Q+0+64]=j[Q+2+96]=ue+ae+1>>1,j[Q+0+96]=me+ue+1>>1,j[Q+3+0]=Tr(ve,we,ke),j[Q+2+0]=Tr(ge,ve,we),j[Q+1+0]=j[Q+3+32]=Tr(Z,ge,ve),j[Q+1+32]=j[Q+3+64]=Tr(ae,Z,ge),j[Q+1+64]=j[Q+3+96]=Tr(ue,ae,Z),j[Q+1+96]=Tr(me,ue,ae)}function cf(j,Q){var Z;for(Z=0;8>Z;++Z)n(j,Q+32*Z,j,Q-32,8)}function Co(j,Q){var Z;for(Z=0;8>Z;++Z)a(j,Q,j[Q-1],8),Q+=32}function Fi(j,Q,Z){var ae;for(ae=0;8>ae;++ae)a(Q,Z+32*ae,j,8)}function Bl(j,Q){var Z,ae=8;for(Z=0;8>Z;++Z)ae+=j[Q+Z-32]+j[Q-1+32*Z];Fi(ae>>4,j,Q)}function gs(j,Q){var Z,ae=4;for(Z=0;8>Z;++Z)ae+=j[Q+Z-32];Fi(ae>>3,j,Q)}function yn(j,Q){var Z,ae=4;for(Z=0;8>Z;++Z)ae+=j[Q-1+32*Z];Fi(ae>>3,j,Q)}function qc(j,Q){Fi(128,j,Q)}function Tl(j,Q,Z){var ae=j[Q-Z],ue=j[Q+0],me=3*(ue-ae)+Ig[1020+j[Q-2*Z]-j[Q+Z]],ge=vf[112+(me+4>>3)];j[Q-Z]=ri[255+ae+vf[112+(me+3>>3)]],j[Q+0]=ri[255+ue-ge]}function uf(j,Q,Z,ae){var ue=j[Q+0],me=j[Q+Z];return Ol[255+j[Q-2*Z]-j[Q-Z]]>ae||Ol[255+me-ue]>ae}function Hu(j,Q,Z,ae){return 4*Ol[255+j[Q-Z]-j[Q+0]]+Ol[255+j[Q-2*Z]-j[Q+Z]]<=ae}function Vu(j,Q,Z,ae,ue){var me=j[Q-3*Z],ge=j[Q-2*Z],ve=j[Q-Z],we=j[Q+0],ke=j[Q+Z],Me=j[Q+2*Z],nt=j[Q+3*Z];return 4*Ol[255+ve-we]+Ol[255+ge-ke]>ae?0:Ol[255+j[Q-4*Z]-me]<=ue&&Ol[255+me-ge]<=ue&&Ol[255+ge-ve]<=ue&&Ol[255+nt-Me]<=ue&&Ol[255+Me-ke]<=ue&&Ol[255+ke-we]<=ue}function sl(j,Q,Z,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)Hu(j,Q+ae,Z,ue)&&Tl(j,Q+ae,Z)}function Oi(j,Q,Z,ae){var ue=2*ae+1;for(ae=0;16>ae;++ae)Hu(j,Q+ae*Z,1,ue)&&Tl(j,Q+ae*Z,1)}function vs(j,Q,Z,ae){var ue;for(ue=3;0<ue;--ue)sl(j,Q+=4*Z,Z,ae)}function Uh(j,Q,Z,ae){var ue;for(ue=3;0<ue;--ue)Oi(j,Q+=4,Z,ae)}function Wc(j,Q,Z,ae,ue,me,ge,ve){for(me=2*me+1;0<ue--;){if(Vu(j,Q,Z,me,ge))if(uf(j,Q,Z,ve))Tl(j,Q,Z);else{var we=j,ke=Q,Me=Z,nt=we[ke-2*Me],et=we[ke-Me],Ke=we[ke+0],kt=we[ke+Me],ht=we[ke+2*Me],Ue=27*(Ct=Ig[1020+3*(Ke-et)+Ig[1020+nt-kt]])+63>>7,Ve=18*Ct+63>>7,Ct=9*Ct+63>>7;we[ke-3*Me]=ri[255+we[ke-3*Me]+Ct],we[ke-2*Me]=ri[255+nt+Ve],we[ke-Me]=ri[255+et+Ue],we[ke+0]=ri[255+Ke-Ue],we[ke+Me]=ri[255+kt-Ve],we[ke+2*Me]=ri[255+ht-Ct]}Q+=ae}}function bi(j,Q,Z,ae,ue,me,ge,ve){for(me=2*me+1;0<ue--;){if(Vu(j,Q,Z,me,ge))if(uf(j,Q,Z,ve))Tl(j,Q,Z);else{var we=j,ke=Q,Me=Z,nt=we[ke-Me],et=we[ke+0],Ke=we[ke+Me],kt=vf[112+((ht=3*(et-nt))+4>>3)],ht=vf[112+(ht+3>>3)],Ue=kt+1>>1;we[ke-2*Me]=ri[255+we[ke-2*Me]+Ue],we[ke-Me]=ri[255+nt+ht],we[ke+0]=ri[255+et-kt],we[ke+Me]=ri[255+Ke-Ue]}Q+=ae}}function Xc(j,Q,Z,ae,ue,me){Wc(j,Q,Z,1,16,ae,ue,me)}function lc(j,Q,Z,ae,ue,me){Wc(j,Q,1,Z,16,ae,ue,me)}function Kd(j,Q,Z,ae,ue,me){var ge;for(ge=3;0<ge;--ge)bi(j,Q+=4*Z,Z,1,16,ae,ue,me)}function zu(j,Q,Z,ae,ue,me){var ge;for(ge=3;0<ge;--ge)bi(j,Q+=4,1,Z,16,ae,ue,me)}function qd(j,Q,Z,ae,ue,me,ge,ve){Wc(j,Q,ue,1,8,me,ge,ve),Wc(Z,ae,ue,1,8,me,ge,ve)}function df(j,Q,Z,ae,ue,me,ge,ve){Wc(j,Q,1,ue,8,me,ge,ve),Wc(Z,ae,1,ue,8,me,ge,ve)}function $u(j,Q,Z,ae,ue,me,ge,ve){bi(j,Q+4*ue,ue,1,8,me,ge,ve),bi(Z,ae+4*ue,ue,1,8,me,ge,ve)}function Yc(j,Q,Z,ae,ue,me,ge,ve){bi(j,Q+4,1,ue,8,me,ge,ve),bi(Z,ae+4,1,ue,8,me,ge,ve)}function Gu(){this.ba=new Je,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new dt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Wd(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ku(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Jc(){this.ua=0,this.Wa=new he,this.vb=new he,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new P,this.yc=new I}function Qh(){this.xb=this.a=0,this.l=new Fs,this.ca=new Je,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new R,this.Pb=0,this.wd=new R,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Jc,this.ab=0,this.gc=i(4,Ku),this.Oc=0}function cc(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Fs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Zc(j,Q,Z,ae,ue,me,ge){for(j=j==null?0:j[Q+0],Q=0;Q<ge;++Q)ue[me+Q]=j+Z[ae+Q]&255,j=ue[me+Q]}function qu(j,Q,Z,ae,ue,me,ge){var ve;if(j==null)Zc(null,null,Z,ae,ue,me,ge);else for(ve=0;ve<ge;++ve)ue[me+ve]=j[Q+ve]+Z[ae+ve]&255}function Di(j,Q,Z,ae,ue,me,ge){if(j==null)Zc(null,null,Z,ae,ue,me,ge);else{var ve,we=j[Q+0],ke=we,Me=we;for(ve=0;ve<ge;++ve)ke=Me+(we=j[Q+ve])-ke,Me=Z[ae+ve]+(-256&ke?0>ke?0:255:ke)&255,ke=we,ue[me+ve]=Me}}function Xd(j,Q,Z,ae){var ue=Q.width,me=Q.o;if(t(j!=null&&Q!=null),0>Z||0>=ae||Z+ae>me)return null;if(!j.Cc){if(j.ga==null){var ge;if(j.ga=new cc,(ge=j.ga==null)||(ge=Q.width*Q.o,t(j.Gb.length==0),j.Gb=s(ge),j.Uc=0,j.Gb==null?ge=0:(j.mb=j.Gb,j.nb=j.Uc,j.rc=null,ge=1),ge=!ge),!ge){ge=j.ga;var ve=j.Fa,we=j.P,ke=j.qc,Me=j.mb,nt=j.nb,et=we+1,Ke=ke-1,kt=ge.l;if(t(ve!=null&&Me!=null&&Q!=null),su[0]=null,su[1]=Zc,su[2]=qu,su[3]=Di,ge.ca=Me,ge.tb=nt,ge.c=Q.width,ge.i=Q.height,t(0<ge.c&&0<ge.i),1>=ke)Q=0;else if(ge.$a=ve[we+0]>>0&3,ge.Z=ve[we+0]>>2&3,ge.Lc=ve[we+0]>>4&3,we=ve[we+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||we)Q=0;else if(kt.put=xn,kt.ac=Xr,kt.bc=bn,kt.ma=ge,kt.width=Q.width,kt.height=Q.height,kt.Da=Q.Da,kt.v=Q.v,kt.va=Q.va,kt.j=Q.j,kt.o=Q.o,ge.$a)e:{t(ge.$a==1),Q=ut();t:for(;;){if(Q==null){Q=0;break e}if(t(ge!=null),ge.mc=Q,Q.c=ge.c,Q.i=ge.i,Q.l=ge.l,Q.l.ma=ge,Q.l.width=ge.c,Q.l.height=ge.i,Q.a=0,V(Q.m,ve,et,Ke),!$e(ge.c,ge.i,1,Q,null)||(Q.ab==1&&Q.gc[0].hc==3&&Ee(Q.s)?(ge.ic=1,ve=Q.c*Q.i,Q.Ta=null,Q.Ua=0,Q.V=s(ve),Q.Ba=0,Q.V==null?(Q.a=1,Q=0):Q=1):(ge.ic=0,Q=tt(Q,ge.c)),!Q))break t;Q=1;break e}ge.mc=null,Q=0}else Q=Ke>=ge.c*ge.i;ge=!Q}if(ge)return null;j.ga.Lc!=1?j.Ga=0:ae=me-Z}t(j.ga!=null),t(Z+ae<=me);e:{if(Q=(ve=j.ga).c,me=ve.l.o,ve.$a==0){if(et=j.rc,Ke=j.Vc,kt=j.Fa,we=j.P+1+Z*Q,ke=j.mb,Me=j.nb+Z*Q,t(we<=j.P+j.qc),ve.Z!=0)for(t(su[ve.Z]!=null),ge=0;ge<ae;++ge)su[ve.Z](et,Ke,kt,we,ke,Me,Q),et=ke,Ke=Me,Me+=Q,we+=Q;else for(ge=0;ge<ae;++ge)n(ke,Me,kt,we,Q),et=ke,Ke=Me,Me+=Q,we+=Q;j.rc=et,j.Vc=Ke}else{if(t(ve.mc!=null),Q=Z+ae,t((ge=ve.mc)!=null),t(Q<=ge.i),ge.C>=Q)Q=1;else if(ve.ic||Ge(),ve.ic){ve=ge.V,et=ge.Ba,Ke=ge.c;var ht=ge.i,Ue=(kt=1,we=ge.$/Ke,ke=ge.$%Ke,Me=ge.m,nt=ge.s,ge.$),Ve=Ke*ht,Ct=Ke*Q,Bt=nt.wc,St=Ue<Ct?ra(nt,ke,we):null;t(Ue<=Ve),t(Q<=ht),t(Ee(nt));t:for(;;){for(;!Me.h&&Ue<Ct;){if(ke&Bt||(St=ra(nt,ke,we)),t(St!=null),ie(Me),256>(ht=dr(St.G[0],St.H[0],Me)))ve[et+Ue]=ht,++Ue,++ke>=Ke&&(ke=0,++we<=Q&&!(we%16)&&Ne(ge,we));else{if(!(280>ht)){kt=0;break t}ht=rn(ht-256,Me);var nr,Xt=dr(St.G[4],St.H[4],Me);if(ie(Me),!(Ue>=(Xt=en(Ke,Xt=rn(Xt,Me)))&&Ve-Ue>=ht)){kt=0;break t}for(nr=0;nr<ht;++nr)ve[et+Ue+nr]=ve[et+Ue+nr-Xt];for(Ue+=ht,ke+=ht;ke>=Ke;)ke-=Ke,++we<=Q&&!(we%16)&&Ne(ge,we);Ue<Ct&&ke&Bt&&(St=ra(nt,ke,we))}t(Me.h==J(Me))}Ne(ge,we>Q?Q:we);break t}!kt||Me.h&&Ue<Ve?(kt=0,ge.a=Me.h?5:3):ge.$=Ue,Q=kt}else Q=Te(ge,ge.V,ge.Ba,ge.c,ge.i,Q,at);if(!Q){ae=0;break e}}Z+ae>=me&&(j.Cc=1),ae=1}if(!ae)return null;if(j.Cc&&((ae=j.ga)!=null&&(ae.mc=null),j.ga=null,0<j.Ga))return alert("todo:WebPDequantizeLevels"),null}return j.nb+Z*ue}function W(j,Q,Z,ae,ue,me){for(;0<ue--;){var ge,ve=j,we=Q+(Z?1:0),ke=j,Me=Q+(Z?0:3);for(ge=0;ge<ae;++ge){var nt=ke[Me+4*ge];nt!=255&&(nt*=32897,ve[we+4*ge+0]=ve[we+4*ge+0]*nt>>23,ve[we+4*ge+1]=ve[we+4*ge+1]*nt>>23,ve[we+4*ge+2]=ve[we+4*ge+2]*nt>>23)}Q+=me}}function de(j,Q,Z,ae,ue){for(;0<ae--;){var me;for(me=0;me<Z;++me){var ge=j[Q+2*me+0],ve=15&(ke=j[Q+2*me+1]),we=4369*ve,ke=(240&ke|ke>>4)*we>>16;j[Q+2*me+0]=(240&ge|ge>>4)*we>>16&240|(15&ge|ge<<4)*we>>16>>4&15,j[Q+2*me+1]=240&ke|ve}Q+=ue}}function Fe(j,Q,Z,ae,ue,me,ge,ve){var we,ke,Me=255;for(ke=0;ke<ue;++ke){for(we=0;we<ae;++we){var nt=j[Q+we];me[ge+4*we]=nt,Me&=nt}Q+=Z,ge+=ve}return Me!=255}function Le(j,Q,Z,ae,ue){var me;for(me=0;me<ue;++me)Z[ae+me]=j[Q+me]>>8}function Ge(){il=W,hn=de,mn=Fe,ba=Le}function xt(j,Q,Z){_[j]=function(ae,ue,me,ge,ve,we,ke,Me,nt,et,Ke,kt,ht,Ue,Ve,Ct,Bt){var St,nr=Bt-1>>1,Xt=ve[we+0]|ke[Me+0]<<16,vr=nt[et+0]|Ke[kt+0]<<16;t(ae!=null);var er=3*Xt+vr+131074>>2;for(Q(ae[ue+0],255&er,er>>16,ht,Ue),me!=null&&(er=3*vr+Xt+131074>>2,Q(me[ge+0],255&er,er>>16,Ve,Ct)),St=1;St<=nr;++St){var Pn=ve[we+St]|ke[Me+St]<<16,Gn=nt[et+St]|Ke[kt+St]<<16,fn=Xt+Pn+vr+Gn+524296,ln=fn+2*(Pn+vr)>>3;er=ln+Xt>>1,Xt=(fn=fn+2*(Xt+Gn)>>3)+Pn>>1,Q(ae[ue+2*St-1],255&er,er>>16,ht,Ue+(2*St-1)*Z),Q(ae[ue+2*St-0],255&Xt,Xt>>16,ht,Ue+(2*St-0)*Z),me!=null&&(er=fn+vr>>1,Xt=ln+Gn>>1,Q(me[ge+2*St-1],255&er,er>>16,Ve,Ct+(2*St-1)*Z),Q(me[ge+2*St+0],255&Xt,Xt>>16,Ve,Ct+(2*St+0)*Z)),Xt=Pn,vr=Gn}1&Bt||(er=3*Xt+vr+131074>>2,Q(ae[ue+Bt-1],255&er,er>>16,ht,Ue+(Bt-1)*Z),me!=null&&(er=3*vr+Xt+131074>>2,Q(me[ge+Bt-1],255&er,er>>16,Ve,Ct+(Bt-1)*Z)))}}function Lt(){ni[Pi]=nd,ni[Gh]=iu,ni[nu]=uA,ni[Qm]=Dg,ni[xf]=Pg,ni[Ju]=Wh,ni[Fg]=Rg,ni[Hm]=iu,ni[lA]=Dg,ni[Zu]=Pg,ni[Kh]=Wh}function Zt(j){return j&-16384?0>j?0:255:j>>$k}function O(j,Q){return Zt((19077*j>>8)+(26149*Q>>8)-14234)}function ee(j,Q,Z){return Zt((19077*j>>8)-(6419*Q>>8)-(13320*Z>>8)+8708)}function se(j,Q){return Zt((19077*j>>8)+(33050*Q>>8)-17685)}function xe(j,Q,Z,ae,ue){ae[ue+0]=O(j,Z),ae[ue+1]=ee(j,Q,Z),ae[ue+2]=se(j,Q)}function ze(j,Q,Z,ae,ue){ae[ue+0]=se(j,Q),ae[ue+1]=ee(j,Q,Z),ae[ue+2]=O(j,Z)}function st(j,Q,Z,ae,ue){var me=ee(j,Q,Z);Q=me<<3&224|se(j,Q)>>3,ae[ue+0]=248&O(j,Z)|me>>5,ae[ue+1]=Q}function Ut(j,Q,Z,ae,ue){var me=240&se(j,Q)|15;ae[ue+0]=240&O(j,Z)|ee(j,Q,Z)>>4,ae[ue+1]=me}function jr(j,Q,Z,ae,ue){ae[ue+0]=255,xe(j,Q,Z,ae,ue+1)}function wn(j,Q,Z,ae,ue){ze(j,Q,Z,ae,ue),ae[ue+3]=255}function Kr(j,Q,Z,ae,ue){xe(j,Q,Z,ae,ue),ae[ue+3]=255}function $n(j,Q){return 0>j?0:j>Q?Q:j}function na(j,Q,Z){_[j]=function(ae,ue,me,ge,ve,we,ke,Me,nt){for(var et=Me+(-2&nt)*Z;Me!=et;)Q(ae[ue+0],me[ge+0],ve[we+0],ke,Me),Q(ae[ue+1],me[ge+0],ve[we+0],ke,Me+Z),ue+=2,++ge,++we,Me+=2*Z;1&nt&&Q(ae[ue+0],me[ge+0],ve[we+0],ke,Me)}}function jl(j,Q,Z){return Z==0?j==0?Q==0?6:5:Q==0?4:0:Z}function rs(j,Q,Z,ae,ue){switch(j>>>30){case 3:dc(Q,Z,ae,ue,0);break;case 2:Ga(Q,Z,ae,ue);break;case 1:xs(Q,Z,ae,ue)}}function _o(j,Q){var Z,ae,ue=Q.M,me=Q.Nb,ge=j.oc,ve=j.pc+40,we=j.oc,ke=j.pc+584,Me=j.oc,nt=j.pc+600;for(Z=0;16>Z;++Z)ge[ve+32*Z-1]=129;for(Z=0;8>Z;++Z)we[ke+32*Z-1]=129,Me[nt+32*Z-1]=129;for(0<ue?ge[ve-1-32]=we[ke-1-32]=Me[nt-1-32]=129:(a(ge,ve-32-1,127,21),a(we,ke-32-1,127,9),a(Me,nt-32-1,127,9)),ae=0;ae<j.za;++ae){var et=Q.ya[Q.aa+ae];if(0<ae){for(Z=-1;16>Z;++Z)n(ge,ve+32*Z-4,ge,ve+32*Z+12,4);for(Z=-1;8>Z;++Z)n(we,ke+32*Z-4,we,ke+32*Z+4,4),n(Me,nt+32*Z-4,Me,nt+32*Z+4,4)}var Ke=j.Gd,kt=j.Hd+ae,ht=et.ad,Ue=et.Hc;if(0<ue&&(n(ge,ve-32,Ke[kt].y,0,16),n(we,ke-32,Ke[kt].f,0,8),n(Me,nt-32,Ke[kt].ea,0,8)),et.Za){var Ve=ge,Ct=ve-32+16;for(0<ue&&(ae>=j.za-1?a(Ve,Ct,Ke[kt].y[15],4):n(Ve,Ct,Ke[kt+1].y,0,4)),Z=0;4>Z;Z++)Ve[Ct+128+Z]=Ve[Ct+256+Z]=Ve[Ct+384+Z]=Ve[Ct+0+Z];for(Z=0;16>Z;++Z,Ue<<=2)Ve=ge,Ct=ve+Ef[Z],ao[et.Ob[Z]](Ve,Ct),rs(Ue,ht,16*+Z,Ve,Ct)}else if(Ve=jl(ae,ue,et.Ob[0]),rd[Ve](ge,ve),Ue!=0)for(Z=0;16>Z;++Z,Ue<<=2)rs(Ue,ht,16*+Z,ge,ve+Ef[Z]);for(Z=et.Gc,Ve=jl(ae,ue,et.Dd),ll[Ve](we,ke),ll[Ve](Me,nt),Ue=ht,Ve=we,Ct=ke,255&(et=Z>>0)&&(170&et?Ac(Ue,256,Ve,Ct):ko(Ue,256,Ve,Ct)),et=Me,Ue=nt,255&(Z>>=8)&&(170&Z?Ac(ht,320,et,Ue):ko(ht,320,et,Ue)),ue<j.Ub-1&&(n(Ke[kt].y,0,ge,ve+480,16),n(Ke[kt].f,0,we,ke+224,8),n(Ke[kt].ea,0,Me,nt+224,8)),Z=8*me*j.B,Ke=j.sa,kt=j.ta+16*ae+16*me*j.R,ht=j.qa,et=j.ra+8*ae+Z,Ue=j.Ha,Ve=j.Ia+8*ae+Z,Z=0;16>Z;++Z)n(Ke,kt+Z*j.R,ge,ve+32*Z,16);for(Z=0;8>Z;++Z)n(ht,et+Z*j.B,we,ke+32*Z,8),n(Ue,Ve+Z*j.B,Me,nt+32*Z,8)}}function eu(j,Q,Z,ae,ue,me,ge,ve,we){var ke=[0],Me=[0],nt=0,et=we!=null?we.kd:0,Ke=we??new Wd;if(j==null||12>Z)return 7;Ke.data=j,Ke.w=Q,Ke.ha=Z,Q=[Q],Z=[Z],Ke.gb=[Ke.gb];e:{var kt=Q,ht=Z,Ue=Ke.gb;if(t(j!=null),t(ht!=null),t(Ue!=null),Ue[0]=0,12<=ht[0]&&!r(j,kt[0],"RIFF")){if(r(j,kt[0]+8,"WEBP")){Ue=3;break e}var Ve=Se(j,kt[0]+4);if(12>Ve||4294967286<Ve){Ue=3;break e}if(et&&Ve>ht[0]-8){Ue=7;break e}Ue[0]=Ve,kt[0]+=12,ht[0]-=12}Ue=0}if(Ue!=0)return Ue;for(Ve=0<Ke.gb[0],Z=Z[0];;){e:{var Ct=j;ht=Q,Ue=Z;var Bt=ke,St=Me,nr=kt=[0];if((er=nt=[nt])[0]=0,8>Ue[0])Ue=7;else{if(!r(Ct,ht[0],"VP8X")){if(Se(Ct,ht[0]+4)!=10){Ue=3;break e}if(18>Ue[0]){Ue=7;break e}var Xt=Se(Ct,ht[0]+8),vr=1+ne(Ct,ht[0]+12);if(2147483648<=vr*(Ct=1+ne(Ct,ht[0]+15))){Ue=3;break e}nr!=null&&(nr[0]=Xt),Bt!=null&&(Bt[0]=vr),St!=null&&(St[0]=Ct),ht[0]+=18,Ue[0]-=18,er[0]=1}Ue=0}}if(nt=nt[0],kt=kt[0],Ue!=0)return Ue;if(ht=!!(2&kt),!Ve&&nt)return 3;if(me!=null&&(me[0]=!!(16&kt)),ge!=null&&(ge[0]=ht),ve!=null&&(ve[0]=0),ge=ke[0],kt=Me[0],nt&&ht&&we==null){Ue=0;break}if(4>Z){Ue=7;break}if(Ve&&nt||!Ve&&!nt&&!r(j,Q[0],"ALPH")){Z=[Z],Ke.na=[Ke.na],Ke.P=[Ke.P],Ke.Sa=[Ke.Sa];e:{Xt=j,Ue=Q,Ve=Z;var er=Ke.gb;Bt=Ke.na,St=Ke.P,nr=Ke.Sa,vr=22,t(Xt!=null),t(Ve!=null),Ct=Ue[0];var Pn=Ve[0];for(t(Bt!=null),t(nr!=null),Bt[0]=null,St[0]=null,nr[0]=0;;){if(Ue[0]=Ct,Ve[0]=Pn,8>Pn){Ue=7;break e}var Gn=Se(Xt,Ct+4);if(4294967286<Gn){Ue=3;break e}var fn=8+Gn+1&-2;if(vr+=fn,0<er&&vr>er){Ue=3;break e}if(!r(Xt,Ct,"VP8 ")||!r(Xt,Ct,"VP8L")){Ue=0;break e}if(Pn[0]<fn){Ue=7;break e}r(Xt,Ct,"ALPH")||(Bt[0]=Xt,St[0]=Ct+8,nr[0]=Gn),Ct+=fn,Pn-=fn}}if(Z=Z[0],Ke.na=Ke.na[0],Ke.P=Ke.P[0],Ke.Sa=Ke.Sa[0],Ue!=0)break}Z=[Z],Ke.Ja=[Ke.Ja],Ke.xa=[Ke.xa];e:if(er=j,Ue=Q,Ve=Z,Bt=Ke.gb[0],St=Ke.Ja,nr=Ke.xa,Xt=Ue[0],Ct=!r(er,Xt,"VP8 "),vr=!r(er,Xt,"VP8L"),t(er!=null),t(Ve!=null),t(St!=null),t(nr!=null),8>Ve[0])Ue=7;else{if(Ct||vr){if(er=Se(er,Xt+4),12<=Bt&&er>Bt-12){Ue=3;break e}if(et&&er>Ve[0]-8){Ue=7;break e}St[0]=er,Ue[0]+=8,Ve[0]-=8,nr[0]=vr}else nr[0]=5<=Ve[0]&&er[Xt+0]==47&&!(er[Xt+4]>>5),St[0]=Ve[0];Ue=0}if(Z=Z[0],Ke.Ja=Ke.Ja[0],Ke.xa=Ke.xa[0],Q=Q[0],Ue!=0)break;if(4294967286<Ke.Ja)return 3;if(ve==null||ht||(ve[0]=Ke.xa?2:1),ge=[ge],kt=[kt],Ke.xa){if(5>Z){Ue=7;break}ve=ge,et=kt,ht=me,j==null||5>Z?j=0:5<=Z&&j[Q+0]==47&&!(j[Q+4]>>5)?(Ve=[0],er=[0],Bt=[0],V(St=new R,j,Q,Z),$t(St,Ve,er,Bt)?(ve!=null&&(ve[0]=Ve[0]),et!=null&&(et[0]=er[0]),ht!=null&&(ht[0]=Bt[0]),j=1):j=0):j=0}else{if(10>Z){Ue=7;break}ve=kt,j==null||10>Z||!ei(j,Q+3,Z-3)?j=0:(et=j[Q+0]|j[Q+1]<<8|j[Q+2]<<16,ht=16383&(j[Q+7]<<8|j[Q+6]),j=16383&(j[Q+9]<<8|j[Q+8]),1&et||3<(et>>1&7)||!(et>>4&1)||et>>5>=Ke.Ja||!ht||!j?j=0:(ge&&(ge[0]=ht),ve&&(ve[0]=j),j=1))}if(!j||(ge=ge[0],kt=kt[0],nt&&(ke[0]!=ge||Me[0]!=kt)))return 3;we!=null&&(we[0]=Ke,we.offset=Q-we.w,t(4294967286>Q-we.w),t(we.offset==we.ha-Z));break}return Ue==0||Ue==7&&nt&&we==null?(me!=null&&(me[0]|=Ke.na!=null&&0<Ke.na.length),ae!=null&&(ae[0]=ge),ue!=null&&(ue[0]=kt),0):Ue}function Yd(j,Q,Z){var ae=Q.width,ue=Q.height,me=0,ge=0,ve=ae,we=ue;if(Q.Da=j!=null&&0<j.Da,Q.Da&&(ve=j.cd,we=j.bd,me=j.v,ge=j.j,11>Z||(me&=-2,ge&=-2),0>me||0>ge||0>=ve||0>=we||me+ve>ae||ge+we>ue))return 0;if(Q.v=me,Q.j=ge,Q.va=me+ve,Q.o=ge+we,Q.U=ve,Q.T=we,Q.da=j!=null&&0<j.da,Q.da){if(!je(ve,we,Z=[j.ib],me=[j.hb]))return 0;Q.ib=Z[0],Q.hb=me[0]}return Q.ob=j!=null&&j.ob,Q.Kb=j==null||!j.Sd,Q.da&&(Q.ob=Q.ib<3*ae/4&&Q.hb<3*ue/4,Q.Kb=0),1}function Hh(j){if(j==null)return 2;if(11>j.S){var Q=j.f.RGBA;Q.fb+=(j.height-1)*Q.A,Q.A=-Q.A}else Q=j.f.kb,j=j.height,Q.O+=(j-1)*Q.fa,Q.fa=-Q.fa,Q.N+=(j-1>>1)*Q.Ab,Q.Ab=-Q.Ab,Q.W+=(j-1>>1)*Q.Db,Q.Db=-Q.Db,Q.F!=null&&(Q.J+=(j-1)*Q.lb,Q.lb=-Q.lb);return 0}function Af(j,Q,Z,ae){if(ae==null||0>=j||0>=Q)return 2;if(Z!=null){if(Z.Da){var ue=Z.cd,me=Z.bd,ge=-2&Z.v,ve=-2&Z.j;if(0>ge||0>ve||0>=ue||0>=me||ge+ue>j||ve+me>Q)return 2;j=ue,Q=me}if(Z.da){if(!je(j,Q,ue=[Z.ib],me=[Z.hb]))return 2;j=ue[0],Q=me[0]}}ae.width=j,ae.height=Q;e:{var we=ae.width,ke=ae.height;if(j=ae.S,0>=we||0>=ke||!(j>=Pi&&13>j))j=2;else{if(0>=ae.Rd&&ae.sd==null){ge=me=ue=Q=0;var Me=(ve=we*sE[j])*ke;if(11>j||(me=(ke+1)/2*(Q=(we+1)/2),j==12&&(ge=(ue=we)*ke)),(ke=s(Me+2*me+ge))==null){j=1;break e}ae.sd=ke,11>j?((we=ae.f.RGBA).eb=ke,we.fb=0,we.A=ve,we.size=Me):((we=ae.f.kb).y=ke,we.O=0,we.fa=ve,we.Fd=Me,we.f=ke,we.N=0+Me,we.Ab=Q,we.Cd=me,we.ea=ke,we.W=0+Me+me,we.Db=Q,we.Ed=me,j==12&&(we.F=ke,we.J=0+Me+2*me),we.Tc=ge,we.lb=ue)}if(Q=1,ue=ae.S,me=ae.width,ge=ae.height,ue>=Pi&&13>ue)if(11>ue)j=ae.f.RGBA,Q&=(ve=Math.abs(j.A))*(ge-1)+me<=j.size,Q&=ve>=me*sE[ue],Q&=j.eb!=null;else{j=ae.f.kb,ve=(me+1)/2,Me=(ge+1)/2,we=Math.abs(j.fa),ke=Math.abs(j.Ab);var nt=Math.abs(j.Db),et=Math.abs(j.lb),Ke=et*(ge-1)+me;Q&=we*(ge-1)+me<=j.Fd,Q&=ke*(Me-1)+ve<=j.Cd,Q=(Q&=nt*(Me-1)+ve<=j.Ed)&we>=me&ke>=ve&nt>=ve,Q&=j.y!=null,Q&=j.f!=null,Q&=j.ea!=null,ue==12&&(Q&=et>=me,Q&=Ke<=j.Tc,Q&=j.F!=null)}else Q=0;j=Q?0:2}}return j!=0||Z!=null&&Z.fd&&(j=Hh(ae)),j}var Os=64,Jd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ff=24,hf=32,Vh=8,So=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ye("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(j){return j},_.Predictor2=function(j,Q,Z){return Q[Z+0]},_.Predictor3=function(j,Q,Z){return Q[Z+1]},_.Predictor4=function(j,Q,Z){return Q[Z-1]},_.Predictor5=function(j,Q,Z){return Re(Re(j,Q[Z+1]),Q[Z+0])},_.Predictor6=function(j,Q,Z){return Re(j,Q[Z-1])},_.Predictor7=function(j,Q,Z){return Re(j,Q[Z+0])},_.Predictor8=function(j,Q,Z){return Re(Q[Z-1],Q[Z+0])},_.Predictor9=function(j,Q,Z){return Re(Q[Z+0],Q[Z+1])},_.Predictor10=function(j,Q,Z){return Re(Re(j,Q[Z-1]),Re(Q[Z+0],Q[Z+1]))},_.Predictor11=function(j,Q,Z){var ae=Q[Z+0];return 0>=ot(ae>>24&255,j>>24&255,(Q=Q[Z-1])>>24&255)+ot(ae>>16&255,j>>16&255,Q>>16&255)+ot(ae>>8&255,j>>8&255,Q>>8&255)+ot(255&ae,255&j,255&Q)?ae:j},_.Predictor12=function(j,Q,Z){var ae=Q[Z+0];return(qe((j>>24&255)+(ae>>24&255)-((Q=Q[Z-1])>>24&255))<<24|qe((j>>16&255)+(ae>>16&255)-(Q>>16&255))<<16|qe((j>>8&255)+(ae>>8&255)-(Q>>8&255))<<8|qe((255&j)+(255&ae)-(255&Q)))>>>0},_.Predictor13=function(j,Q,Z){var ae=Q[Z-1];return(Ze((j=Re(j,Q[Z+0]))>>24&255,ae>>24&255)<<24|Ze(j>>16&255,ae>>16&255)<<16|Ze(j>>8&255,ae>>8&255)<<8|Ze(j>>0&255,ae>>0&255))>>>0};var G1=_.PredictorAdd0;_.PredictorAdd1=mt,ye("Predictor2","PredictorAdd2"),ye("Predictor3","PredictorAdd3"),ye("Predictor4","PredictorAdd4"),ye("Predictor5","PredictorAdd5"),ye("Predictor6","PredictorAdd6"),ye("Predictor7","PredictorAdd7"),ye("Predictor8","PredictorAdd8"),ye("Predictor9","PredictorAdd9"),ye("Predictor10","PredictorAdd10"),ye("Predictor11","PredictorAdd11"),ye("Predictor12","PredictorAdd12"),ye("Predictor13","PredictorAdd13");var Mm=_.PredictorAdd2;Qt("ColorIndexInverseTransform","MapARGB","32b",function(j){return j>>8&255},function(j){return j}),Qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(j){return j},function(j){return j>>8&255});var jg,Il=_.ColorIndexInverseTransform,ti=_.MapARGB,Zd=_.VP8LColorIndexInverseTransformAlpha,Um=_.MapAlpha,Wu=_.VP8LPredictorsAdd=[];Wu.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var eA,no,yi,tA,No,uc,tu,dc,Ga,Ac,xs,ko,mf,ru,zh,rA,nA,aA,pf,$h,sA,Xu,gf,Ka,il,hn,mn,ba,ns=s(511),Fl=s(2041),iA=s(225),oA=s(767),Yu=0,Ig=Fl,vf=iA,ri=oA,Ol=ns,Pi=0,Gh=1,nu=2,Qm=3,xf=4,Ju=5,Fg=6,Hm=7,lA=8,Zu=9,Kh=10,Og=[2,3,7],Dl=[3,3,11],ol=[280,256,256,256,40],bf=[0,1,1,1,0],ed=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],td=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],yf=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],eE=8,Vm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ds=null,qa=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Qn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],cA=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],au=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],K1=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],wf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],tE=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],rd=[],ao=[],ll=[],rE=1,qh=2,su=[],ni=[];xt("UpsampleRgbLinePair",xe,3),xt("UpsampleBgrLinePair",ze,3),xt("UpsampleRgbaLinePair",Kr,4),xt("UpsampleBgraLinePair",wn,4),xt("UpsampleArgbLinePair",jr,4),xt("UpsampleRgba4444LinePair",Ut,2),xt("UpsampleRgb565LinePair",st,2);var nd=_.UpsampleRgbLinePair,uA=_.UpsampleBgrLinePair,iu=_.UpsampleRgbaLinePair,Dg=_.UpsampleBgraLinePair,Pg=_.UpsampleArgbLinePair,Wh=_.UpsampleRgba4444LinePair,Rg=_.UpsampleRgb565LinePair,ou=16,Ps=1<<ou-1,dA=-227,Lg=482,$k=6,nE=0,Gk=s(256),Rs=s(256),q1=s(256),$m=s(256),Gm=s(Lg-dA),W1=s(Lg-dA);na("YuvToRgbRow",xe,3),na("YuvToBgrRow",ze,3),na("YuvToRgbaRow",Kr,4),na("YuvToBgraRow",wn,4),na("YuvToArgbRow",jr,4),na("YuvToRgba4444Row",Ut,2),na("YuvToRgb565Row",st,2);var Ef=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ad=[0,2,8],Kk=[8,7,6,4,4,2,2,2,1,1,1,1],aE=1;this.WebPDecodeRGBA=function(j,Q,Z,ae,ue){var me=Gh,ge=new Gu,ve=new Je;ge.ba=ve,ve.S=me,ve.width=[ve.width],ve.height=[ve.height];var we=ve.width,ke=ve.height,Me=new gt;if(Me==null||j==null)var nt=2;else t(Me!=null),nt=eu(j,Q,Z,Me.width,Me.height,Me.Pd,Me.Qd,Me.format,null);if(nt!=0?we=0:(we!=null&&(we[0]=Me.width[0]),ke!=null&&(ke[0]=Me.height[0]),we=1),we){ve.width=ve.width[0],ve.height=ve.height[0],ae!=null&&(ae[0]=ve.width),ue!=null&&(ue[0]=ve.height);e:{if(ae=new Fs,(ue=new Wd).data=j,ue.w=Q,ue.ha=Z,ue.kd=1,Q=[0],t(ue!=null),((j=eu(ue.data,ue.w,ue.ha,null,null,null,Q,null,ue))==0||j==7)&&Q[0]&&(j=4),(Q=j)==0){if(t(ge!=null),ae.data=ue.data,ae.w=ue.w+ue.offset,ae.ha=ue.ha-ue.offset,ae.put=xn,ae.ac=Xr,ae.bc=bn,ae.ma=ge,ue.xa){if((j=ut())==null){ge=1;break e}if(function(et,Ke){var kt=[0],ht=[0],Ue=[0];t:for(;;){if(et==null)return 0;if(Ke==null)return et.a=2,0;if(et.l=Ke,et.a=0,V(et.m,Ke.data,Ke.w,Ke.ha),!$t(et.m,kt,ht,Ue)){et.a=3;break t}if(et.xb=qh,Ke.width=kt[0],Ke.height=ht[0],!$e(kt[0],ht[0],1,et,null))break t;return 1}return t(et.a!=0),0}(j,ae)){if(ae=(Q=Af(ae.width,ae.height,ge.Oa,ge.ba))==0){t:{ae=j;r:for(;;){if(ae==null){ae=0;break t}if(t(ae.s.yc!=null),t(ae.s.Ya!=null),t(0<ae.s.Wb),t((Z=ae.l)!=null),t((ue=Z.ma)!=null),ae.xb!=0){if(ae.ca=ue.ba,ae.tb=ue.tb,t(ae.ca!=null),!Yd(ue.Oa,Z,Qm)){ae.a=2;break r}if(!tt(ae,Z.width)||Z.da)break r;if((Z.da||Fr(ae.ca.S))&&Ge(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&Ge()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!De(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break r}ae.xb=0}if(!Te(ae,ae.V,ae.Ba,ae.c,ae.i,Z.o,Be))break r;ue.Dc=ae.Ma,ae=1;break t}t(ae.a!=0),ae=0}ae=!ae}ae&&(Q=j.a)}else Q=j.a}else{if((j=new gi)==null){ge=1;break e}if(j.Fa=ue.na,j.P=ue.P,j.qc=ue.Sa,zd(j,ae)){if((Q=Af(ae.width,ae.height,ge.Oa,ge.ba))==0){if(j.Aa=0,Z=ge.Oa,t((ue=j)!=null),Z!=null){if(0<(we=0>(we=Z.Md)?0:100<we?255:255*we/100)){for(ke=Me=0;4>ke;++ke)12>(nt=ue.pb[ke]).lc&&(nt.ia=we*Kk[0>nt.lc?0:nt.lc]>>3),Me|=nt.ia;Me&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=Z.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}sf(j,ae)||(Q=j.a)}}else Q=j.a}Q==0&&ge.Oa!=null&&ge.Oa.fd&&(Q=Hh(ge.ba))}ge=Q}me=ge!=0?null:11>me?ve.f.RGBA.eb:ve.f.kb.y}else me=null;return me};var sE=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(_,F){for(var M="",D=0;D<4;D++)M+=String.fromCharCode(_[F++]);return M}function d(_,F){return(_[F+0]<<0|_[F+1]<<8|_[F+2]<<16)>>>0}function f(_,F){return(_[F+0]<<0|_[F+1]<<8|_[F+2]<<16|_[F+3]<<24)>>>0}new c;var h=[0],p=[0],g=[],v=new c,b=e,y=function(_,F){var M={},D=0,I=!1,U=0,P=0;if(M.frames=[],!function(q,J,te,ie){for(var Ae=0;Ae<ie;Ae++)if(q[J+Ae]!=te.charCodeAt(Ae))return!0;return!1}(_,F,"RIFF",4)){var X,H;for(f(_,F+=4),F+=8;F<_.length;){var Y=u(_,F),V=f(_,F+=4);F+=4;var z=V+(1&V);switch(Y){case"VP8 ":case"VP8L":M.frames[D]===void 0&&(M.frames[D]={}),(R=M.frames[D]).src_off=I?P:F-8,R.src_size=U+V+8,D++,I&&(I=!1,U=0,P=0);break;case"VP8X":(R=M.header={}).feature_flags=_[F];var G=F+4;R.canvas_width=1+d(_,G),G+=3,R.canvas_height=1+d(_,G),G+=3;break;case"ALPH":I=!0,U=z+8,P=F-8;break;case"ANIM":(R=M.header).bgcolor=f(_,F),G=F+4,R.loop_count=(X=_)[(H=G)+0]<<0|X[H+1]<<8,G+=2;break;case"ANMF":var re,R;(R=M.frames[D]={}).offset_x=2*d(_,F),F+=3,R.offset_y=2*d(_,F),F+=3,R.width=1+d(_,F),F+=3,R.height=1+d(_,F),F+=3,R.duration=d(_,F),F+=3,re=_[F++],R.dispose=1&re,R.blend=re>>1&1}Y!="ANMF"&&(F+=z)}return M}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var C=y.header?y.header:null,N=y.frames?y.frames:null;if(C){C.loop_counter=C.loop_count,h=[C.canvas_height],p=[C.canvas_width];for(var T=0;T<N.length&&N[T].blend!=0;T++);}var S=N[0],B=v.WebPDecodeRGBA(b,S.src_off,S.src_size,p,h);S.rgba=B,S.imgwidth=p[0],S.imgheight=h[0];for(var w=0;w<p[0]*h[0]*4;w++)g[w]=B[w];return this.width=p,this.height=h,this.data=g,this}(function(e){var t=function(){return typeof IF=="function"},r=function(h,p,g,v){var b=4,y=i;switch(v){case e.image_compression.FAST:b=1,y=s;break;case e.image_compression.MEDIUM:b=6,y=o;break;case e.image_compression.SLOW:b=9,y=c}h=n(h,p,g,y);var C=IF(h,{level:b});return e.__addimage__.arrayBufferToBinaryString(C)},n=function(h,p,g,v){for(var b,y,C,N=h.length/p,T=new Uint8Array(h.length+N),S=d(),B=0;B<N;B+=1){if(C=B*p,b=h.subarray(C,C+p),v)T.set(v(b,g,y),C+B);else{for(var w,_=S.length,F=[];w<_;w+=1)F[w]=S[w](b,g,y);var M=f(F.concat());T.set(F[M],C+B)}y=b}return T},a=function(h){var p=Array.apply([],h);return p.unshift(0),p},s=function(h,p){var g,v=[],b=h.length;v[0]=1;for(var y=0;y<b;y+=1)g=h[y-p]||0,v[y+1]=h[y]-g+256&255;return v},i=function(h,p,g){var v,b=[],y=h.length;b[0]=2;for(var C=0;C<y;C+=1)v=g&&g[C]||0,b[C+1]=h[C]-v+256&255;return b},o=function(h,p,g){var v,b,y=[],C=h.length;y[0]=3;for(var N=0;N<C;N+=1)v=h[N-p]||0,b=g&&g[N]||0,y[N+1]=h[N]+256-(v+b>>>1)&255;return y},c=function(h,p,g){var v,b,y,C,N=[],T=h.length;N[0]=4;for(var S=0;S<T;S+=1)v=h[S-p]||0,b=g&&g[S]||0,y=g&&g[S-p]||0,C=u(v,b,y),N[S+1]=h[S]-C+256&255;return N},u=function(h,p,g){if(h===p&&p===g)return h;var v=Math.abs(p-g),b=Math.abs(h-g),y=Math.abs(h+p-g-g);return v<=b&&v<=y?h:b<=y?p:g},d=function(){return[a,s,i,o,c]},f=function(h){var p=h.map(function(g){return g.reduce(function(v,b){return v+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(h,p,g,v){var b,y,C,N,T,S,B,w,_,F,M,D,I,U,P,X=this.decode.FLATE_DECODE,H="";if(this.__addimage__.isArrayBuffer(h)&&(h=new Uint8Array(h)),this.__addimage__.isArrayBufferView(h)){if(h=(C=new QEe(h)).imgData,y=C.bits,b=C.colorSpace,T=C.colors,[4,6].indexOf(C.colorType)!==-1){if(C.bits===8){_=(w=C.pixelBitlength==32?new Uint32Array(C.decodePixels().buffer):C.pixelBitlength==16?new Uint16Array(C.decodePixels().buffer):new Uint8Array(C.decodePixels().buffer)).length,M=new Uint8Array(_*C.colors),F=new Uint8Array(_);var Y,V=C.pixelBitlength-C.bits;for(U=0,P=0;U<_;U++){for(I=w[U],Y=0;Y<V;)M[P++]=I>>>Y&255,Y+=C.bits;F[U]=I>>>Y&255}}if(C.bits===16){_=(w=new Uint32Array(C.decodePixels().buffer)).length,M=new Uint8Array(_*(32/C.pixelBitlength)*C.colors),F=new Uint8Array(_*(32/C.pixelBitlength)),D=C.colors>1,U=0,P=0;for(var z=0;U<_;)I=w[U++],M[P++]=I>>>0&255,D&&(M[P++]=I>>>16&255,I=w[U++],M[P++]=I>>>0&255),F[z++]=I>>>16&255;y=8}v!==e.image_compression.NONE&&t()?(h=r(M,C.width*C.colors,C.colors,v),B=r(F,C.width,1,v)):(h=M,B=F,X=void 0)}if(C.colorType===3&&(b=this.color_spaces.INDEXED,S=C.palette,C.transparency.indexed)){var G=C.transparency.indexed,re=0;for(U=0,_=G.length;U<_;++U)re+=G[U];if((re/=255)===_-1&&G.indexOf(0)!==-1)N=[G.indexOf(0)];else if(re!==_){for(w=C.decodePixels(),F=new Uint8Array(w.length),U=0,_=w.length;U<_;U++)F[U]=G[w[U]];B=r(F,C.width,1)}}var R=function(q){var J;switch(q){case e.image_compression.FAST:J=11;break;case e.image_compression.MEDIUM:J=13;break;case e.image_compression.SLOW:J=14;break;default:J=12}return J}(v);return X===this.decode.FLATE_DECODE&&(H="/Predictor "+R+" "),H+="/Colors "+T+" /BitsPerComponent "+y+" /Columns "+C.width,(this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),(B&&this.__addimage__.isArrayBuffer(B)||this.__addimage__.isArrayBufferView(B))&&(B=this.__addimage__.arrayBufferToBinaryString(B)),{alias:g,data:h,index:p,filter:X,decodeParameters:H,transparency:N,palette:S,sMask:B,predictor:R,width:C.width,height:C.height,bitsPerComponent:y,colorSpace:b}}}})(xr.API),function(e){e.processGIF89A=function(t,r,n,a){var s=new HEe(t),i=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:i,height:o},d=new PT(100).encode(u,100);return e.processJPEG.call(this,d,r,n,a)},e.processGIF87A=e.processGIF89A}(xr.API),Ad.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ad.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Sa.log("bit decode error:"+r)}},Ad.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[i+4*o]=c.blue,this.data[i+4*o+1]=c.green,this.data[i+4*o+2]=c.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},Ad.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var s=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*a*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*a+1>=this.width)break;u=this.palette[c],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}t!==0&&(this.pos+=4-t)}},Ad.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+4*n;if(a<this.palette.length){var i=this.palette[a];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}e!==0&&(this.pos+=4-e)}},Ad.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,c=(s>>10&t)/t*255|0,u=s>>15?255:0,d=n*this.width*4+4*a;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=e}},Ad.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,c=(i>>5&r)/r*255|0,u=(i>>11)/t*255|0,d=a*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Ad.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;this.data[i]=s,this.data[i+1]=a,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},Ad.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=s,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=i}},Ad.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,a){var s=new Ad(t,!1),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new PT(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(xr.API),sH.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,a){var s=new sH(t),i=s.width,o=s.height,c={data:s.getData(),width:i,height:o},u=new PT(100).encode(c,100);return e.processJPEG.call(this,u,r,n,a)}}(xr.API),xr.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,s=new Uint8Array(a/4*3),i=new Uint8Array(a/4),o=0,c=0,u=0;u<a;u+=4){var d=n[u],f=n[u+1],h=n[u+2],p=n[u+3];s[o++]=d,s[o++]=f,s[o++]=h,i[c++]=p}var g=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:g,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},xr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},dv=xr.API,fC=dv.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),s=t.fontSize||this.internal.getFontSize(),i=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,c=o.fof?o.fof:1,u=t.kerning?t.kerning:a.metadata.Unicode.kerning,d=u.fof?u.fof:1,f=t.doKerning!==!1,h=0,p=e.length,g=0,v=o[0]||c,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?b.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+i*(1e3/s)||0)/1e3):(h=f&&ga(u[n])==="object"&&!isNaN(parseInt(u[n][g],10))?u[n][g]/d:0,b.push((o[n]||v)/c+h)),g=n;return b},tH=dv.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return dv.processArabic&&(e=dv.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:fC.apply(this,arguments).reduce(function(s,i){return s+i},0)},rH=function(e,t,r,n){for(var a=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<r;)o+=t[s],s++;a.push(e.slice(0,s));var c=s;for(o=0;s!==i;)o+t[s]>n&&(a.push(e.slice(c,s)),o=0,c=s),o+=t[s],s++;return c!==s&&a.push(e.slice(c,s)),a},nH=function(e,t,r){r||(r={});var n,a,s,i,o,c,u,d=[],f=[d],h=r.textIndent||0,p=0,g=0,v=e.split(" "),b=fC.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),C=[];v.map(function(T){(T=T.split(/\s*\n/)).length>1?C=C.concat(T.map(function(S,B){return(B&&S.length?`
`:"")+S})):C.push(T[0])}),v=C,c=tH.apply(this,[y,r])}for(s=0,i=v.length;s<i;s++){var N=0;if(n=v[s],c&&n[0]==`
`&&(n=n.substr(1),N=1),h+p+(g=(a=fC.apply(this,[n,r])).reduce(function(T,S){return T+S},0))>t||N){if(g>t){for(o=rH.apply(this,[n,a,t-(h+p),t]),d.push(o.shift()),d=[o.pop()];o.length;)f.push([o.shift()]);g=a.slice(n.length-(d[0]?d[0].length:0)).reduce(function(T,S){return T+S},0)}else d=[n];f.push(d),h=g+c,p=b}else d.push(n),h+=p+g,p=b}return u=c?function(T,S){return(S?y:"")+T.join(" ")}:function(T){return T.join(" ")},f.map(u)},dv.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var f=this.internal.getFont(d.fontName,d.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/a;s.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,s.lineIndent=r.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(nH.apply(this,[n[o],i,s]));return u},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],n["0123456789abcdef"[a]]=t[a];var s=function(f){return"0x"+parseInt(f,10).toString(16)},i=e.__fontmetrics__.compress=function(f){var h,p,g,v,b=["{"];for(var y in f){if(h=f[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=s(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof h=="number")h<0?(g=s(h).slice(3),v="-"):(g=s(h).slice(2),v=""),g=v+g.slice(0,-1)+n[g.slice(-1)];else{if(ga(h)!=="object")throw new Error("Don't know what to do with value type "+ga(h)+".");g=i(h)}b.push(p+g)}return b.push("}"),b.join("")},o=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var h,p,g,v,b={},y=1,C=b,N=[],T="",S="",B=f.length-1,w=1;w<B;w+=1)(v=f[w])=="'"?h?(g=h.join(""),h=void 0):h=[]:h?h.push(v):v=="{"?(N.push([C,g]),C={},g=void 0):v=="}"?((p=N.pop())[0][p[1]]=C,g=void 0,C=p[0]):v=="-"?y=-1:g===void 0?r.hasOwnProperty(v)?(T+=r[v],g=parseInt(T,16)*y,y=1,T=""):T+=v:r.hasOwnProperty(v)?(S+=r[v],C[g]=parseInt(S,16)*y,y=1,g=void 0,S=""):S+=v;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var h=f.font,p=d.Unicode[h.postScriptName];p&&(h.metadata.Unicode={},h.metadata.Unicode.widths=p.widths,h.metadata.Unicode.kerning=p.kerning);var g=u.Unicode[h.postScriptName];g&&(h.metadata.Unicode.encoding=g,h.encoding=g.codePages[0])}])}(xr.API),function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),s=0;s<n;s++)a[s]=r.charCodeAt(s);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,s=r.instance;if(!a.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=s.existsFileInVFS(a.postScriptName)===!1?s.loadFile(a.postScriptName):s.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(My(o)),i.metadata=e.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(a,n)}}])}(xr),function(e){function t(){return(Ur.canvg?Promise.resolve(Ur.canvg):Lx(()=>import("./index.es-DVdoKsBc.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}xr.API.addSvgAsImage=function(r,n,a,s,i,o,c,u){if(isNaN(n)||isNaN(a))throw Sa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(i))throw Sa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(g){return g.fromString(f,r,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(g){return g.render(h)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),n,a,s,i,c,u)})}}(),xr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},xr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,s,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),c=[],u=0,d=0,f=0;function h(g,v){var b,y=!1;for(b=0;b<g.length;b+=1)g[b]===v&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=o.length;for(f=0;f<p;f+=1)r[o[f]].value=r[o[f]].defaultValue,r[o[f]].explicitSet=!1}if(ga(e)==="object"){for(a in e)if(s=e[a],h(o,a)&&s!==void 0){if(r[a].type==="boolean"&&typeof s=="boolean")r[a].value=s;else if(r[a].type==="name"&&h(r[a].valueSet,s))r[a].value=s;else if(r[a].type==="integer"&&Number.isInteger(s))r[a].value=s;else if(r[a].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}r[a].value="["+c.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var g,v=[];for(g in r)r[g].explicitSet===!0&&(r[g].type==="name"?v.push("/"+g+" /"+r[g].value):v.push("/"+g+" "+r[g].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+i.length+o.length+a.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(a+s+i+o+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(xr.API),function(e){var t=e.API,r=t.pdfEscape16=function(s,i){for(var o,c=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],f=0,h=s.length;f<h;++f){if(o=i.metadata.characterToGlyph(s.charCodeAt(f)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=s.charCodeAt(f),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(s){var i,o,c,u,d,f,h;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,h=(o=Object.keys(s).sort(function(p,g){return p-g})).length;f<h;f++)i=o[f],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[i]!==void 0&&s[i]!==null&&typeof s[i].toString=="function"&&(u=("0000"+s[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),c.push("<"+i+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var f=o.metadata.Unicode.widths,h=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",g=0;g<h.length;g++)p+=String.fromCharCode(h[g]);var v=u();d({data:p,addLength1:!0,objectId:v}),c("endobj");var b=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var y=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Uv(o.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var C=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Uv(o.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+Uv(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+C+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),t.events.push(["putFont",function(s){(function(i){var o=i.font,c=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var f=o.metadata.rawData,h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p]);var g=u();d({data:h,addLength1:!0,objectId:g}),c("endobj");var v=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var b=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+g+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Uv(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var y=0;y<o.metadata.hmtx.widths.length;y++)o.metadata.hmtx.widths[y]=parseInt(o.metadata.hmtx.widths[y]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Uv(o.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var a=function(s){var i,o=s.text||"",c=s.x,u=s.y,d=s.options||{},f=s.mutex||{},h=f.pdfEscape,p=f.activeFontKey,g=f.fonts,v=p,b="",y=0,C="",N=g[v].encoding;if(g[v].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:f};for(C=o,v=p,Array.isArray(o)&&(C=o[0]),y=0;y<C.length;y+=1)g[v].metadata.hasOwnProperty("cmap")&&(i=g[v].metadata.cmap.unicode.codeMap[C[y].charCodeAt(0)]),i||C[y].charCodeAt(0)<256&&g[v].metadata.hasOwnProperty("Unicode")?b+=C[y]:b+="";var T="";return parseInt(v.slice(1))<14||N==="WinAnsiEncoding"?T=h(b,v).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):N==="Identity-H"&&(T=r(b,g[v])),f.isHex=!0,{text:T,x:c,y:u,options:d,mutex:f}};t.events.push(["postProcessText",function(s){var i=s.text||"",o=[],c={text:i,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([a(Object.assign({},c,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(a(Object.assign({},c,{text:i[u]})).text);s.text=o}else s.text=a(Object.assign({},c,{text:i})).text}])}(xr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(xr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,s,i,o,c,u,d,f=t,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],g={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,N=0;this.__bidiEngine__={};var T=function(D){var I=D.charCodeAt(),U=I>>8,P=v[U];return P!==void 0?f[256*P+(255&I)]:U===252||U===253?"AL":y.test(U)?"L":U===8?"R":"N"},S=function(D){for(var I,U=0;U<D.length;U++){if((I=T(D.charAt(U)))==="L")return!1;if(I==="R")return!0}return!1},B=function(D,I,U,P){var X,H,Y,V,z=I[P];switch(z){case"L":case"R":C=!1;break;case"N":case"AN":break;case"EN":C&&(z="AN");break;case"AL":C=!0,z="R";break;case"WS":z="N";break;case"CS":P<1||P+1>=I.length||(X=U[P-1])!=="EN"&&X!=="AN"||(H=I[P+1])!=="EN"&&H!=="AN"?z="N":C&&(H="AN"),z=H===X?H:"N";break;case"ES":z=(X=P>0?U[P-1]:"B")==="EN"&&P+1<I.length&&I[P+1]==="EN"?"EN":"N";break;case"ET":if(P>0&&U[P-1]==="EN"){z="EN";break}if(C){z="N";break}for(Y=P+1,V=I.length;Y<V&&I[Y]==="ET";)Y++;z=Y<V&&I[Y]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(V=I.length,Y=P+1;Y<V&&I[Y]==="NSM";)Y++;if(Y<V){var G=D[P],re=G>=1425&&G<=2303||G===64286;if(X=I[Y],re&&(X==="R"||X==="AL")){z="R";break}}}z=P<1||(X=I[P-1])==="B"?"N":U[P-1];break;case"B":C=!1,a=!0,z=N;break;case"S":s=!0,z="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"BN":z="N"}return z},w=function(D,I,U){var P=D.split("");return U&&_(P,U,{hiLevel:N}),P.reverse(),I&&I.reverse(),P.join("")},_=function(D,I,U){var P,X,H,Y,V,z=-1,G=D.length,re=0,R=[],q=N?p:h,J=[];for(C=!1,a=!1,s=!1,X=0;X<G;X++)J[X]=T(D[X]);for(H=0;H<G;H++){if(V=re,R[H]=B(D,J,R,H),P=240&(re=q[V][g[R[H]]]),re&=15,I[H]=Y=q[re][5],P>0)if(P===16){for(X=z;X<H;X++)I[X]=1;z=-1}else z=-1;if(q[re][6])z===-1&&(z=H);else if(z>-1){for(X=z;X<H;X++)I[X]=Y;z=-1}J[H]==="B"&&(I[H]=0),U.hiLevel|=Y}s&&function(te,ie,Ae){for(var oe=0;oe<Ae;oe++)if(te[oe]==="S"){ie[oe]=N;for(var ce=oe-1;ce>=0&&te[ce]==="WS";ce--)ie[ce]=N}}(J,I,G)},F=function(D,I,U,P,X){if(!(X.hiLevel<D)){if(D===1&&N===1&&!a)return I.reverse(),void(U&&U.reverse());for(var H,Y,V,z,G=I.length,re=0;re<G;){if(P[re]>=D){for(V=re+1;V<G&&P[V]>=D;)V++;for(z=re,Y=V-1;z<Y;z++,Y--)H=I[z],I[z]=I[Y],I[Y]=H,U&&(H=U[z],U[z]=U[Y],U[Y]=H);re=V}re++}}},M=function(D,I,U){var P=D.split(""),X={hiLevel:N};return U||(U=[]),_(P,U,X),function(H,Y,V){if(V.hiLevel!==0&&d)for(var z,G=0;G<H.length;G++)Y[G]===1&&(z=b.indexOf(H[G]))>=0&&(H[G]=b[z+1])}(P,U,X),F(2,P,I,U,X),F(1,P,I,U,X),P.join("")};return this.__bidiEngine__.doBidiReorder=function(D,I,U){if(function(X,H){if(H)for(var Y=0;Y<X.length;Y++)H[Y]=Y;o===void 0&&(o=S(X)),u===void 0&&(u=S(X))}(D,I),i||!c||u)if(i&&c&&o^u)N=o?1:0,D=w(D,I,U);else if(!i&&c&&u)N=o?1:0,D=M(D,I,U),D=w(D,I);else if(!i||o||c||u){if(i&&!c&&o^u)D=w(D,I),o?(N=0,D=M(D,I,U)):(N=1,D=M(D,I,U),D=w(D,I));else if(i&&o&&!c&&u)N=1,D=M(D,I,U),D=w(D,I);else if(!i&&!c&&o^u){var P=d;o?(N=1,D=M(D,I,U),N=0,d=!1,D=M(D,I,U),d=P):(N=0,D=M(D,I,U),D=w(D,I),N=1,d=!1,D=M(D,I,U),d=P,D=w(D,I))}}else N=0,D=M(D,I,U);else N=o?1:0,D=M(D,I,U);return D},this.__bidiEngine__.setOptions=function(D){D&&(i=D.isInputVisual,c=D.isOutputVisual,o=D.isInputRtl,u=D.isOutputRtl,d=D.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text,s=(n.x,n.y,n.options||{}),i=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,r.setOptions(s),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(i=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?i.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):i.push([r.doBidiReorder(a[o])]);n.text=i}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(xr),xr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new gm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new nCe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new VEe(this.contents),this.head=new $Ee(this),this.name=new XEe(this),this.cmap=new Tee(this),this.toUnicode={},this.hhea=new GEe(this),this.maxp=new YEe(this),this.hmtx=new JEe(this),this.post=new qEe(this),this.os2=new KEe(this),this.loca=new rCe(this),this.glyf=new ZEe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,c,u;for(u=[],i=0,o=(c=this.bbox).length;i<o;i++)t=c[i],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),(32768&(r=a>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,s,i,o;for(i=0,s=0,o=(t=""+t).length;0<=o?s<o:s>o;s=0<=o?++s:--s)a=t.charCodeAt(s),i+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return i*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var Ud,gm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,s,i,o,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^s)+65536*(255^i)+256*(255^o)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*s+65536*i+256*o+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,s;for(s=[],n=0,a=t.length;n<a;n++)r=t[n],s.push(this.writeByte(r));return s},e}(),VEe=function(){var e;function t(r){var n,a,s;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,s,i,o,c,u,d,f,h,p,g,v;for(v in p=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(p)/c),i=Math.floor(f/c),d=16*p-f,(a=new gm).writeInt(this.scalarType),a.writeShort(p),a.writeShort(f),a.writeShort(i),a.writeShort(d),s=16*p,u=a.pos+s,o=null,g=[],r)for(h=r[v],a.writeString(v),a.writeInt(e(h)),a.writeInt(u),a.writeInt(h.length),g=g.concat(h),v==="head"&&(o=u),u+=h.length;u%4;)g.push(0),u++;return a.write(g),n=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(n),a.data},e=function(r){var n,a,s,i;for(r=jee.call(r);r.length%4;)r.push(0);for(s=new gm(r),a=0,n=0,i=r.length;n<i;n=n+=4)a+=s.readUInt32();return 4294967295&a},t}(),zEe={}.hasOwnProperty,ZA=function(e,t){for(var r in t)zEe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Ud=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var $Ee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ZA(t,Ud),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new gm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),iH=function(){function e(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,v,b,y,C,N;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),h=p/2,t.pos+=6,s=function(){var T,S;for(S=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)S.push(t.readUInt16());return S}(),t.pos+=2,v=function(){var T,S;for(S=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)S.push(t.readUInt16());return S}(),u=function(){var T,S;for(S=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)S.push(t.readUInt16());return S}(),d=function(){var T,S;for(S=[],c=T=0;0<=h?T<h:T>h;c=0<=h?++T:--T)S.push(t.readUInt16());return S}(),a=(this.length-t.pos+this.offset)/2,o=function(){var T,S;for(S=[],c=T=0;0<=a?T<a:T>a;c=0<=a?++T:--T)S.push(t.readUInt16());return S}(),c=y=0,N=s.length;y<N;c=++y)for(b=s[c],n=C=g=v[c];g<=b?C<=b:C>=b;n=g<=b?++C:--C)d[c]===0?i=n+u[c]:(i=o[d[c]/2+(n-g)-(h-c)]||0)!==0&&(i+=u[c]),this.codeMap[n]=65535&i}t.pos=f}return e.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,v,b,y,C,N,T,S,B,w,_,F,M,D,I,U,P,X,H,Y,V,z,G,re,R,q,J,te,ie,Ae,oe,ce,pe,Ie,ne;switch(P=new gm,i=Object.keys(t).sort(function(Se,De){return Se-De}),r){case"macroman":for(v=0,b=function(){var Se=[];for(g=0;g<256;++g)Se.push(0);return Se}(),C={0:0},s={},X=0,z=i.length;X<z;X++)C[ce=t[a=i[X]]]==null&&(C[ce]=++v),s[a]={old:t[a],new:C[t[a]]},b[a]=C[t[a]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(b),{charMap:s,subtable:P.data,maxGlyphID:v+1};case"unicode":for(I=[],f=[],N=0,C={},n={},y=u=null,H=0,G=i.length;H<G;H++)C[S=t[a=i[H]]]==null&&(C[S]=++N),n[a]={old:S,new:C[S]},o=C[S]-a,y!=null&&o===u||(y&&f.push(y),I.push(a),u=o),y=a;for(y&&f.push(y),f.push(65535),I.push(65535),M=2*(F=I.length),_=2*Math.pow(Math.log(F)/Math.LN2,2),h=Math.log(_/2)/Math.LN2,w=2*F-_,c=[],B=[],p=[],g=Y=0,re=I.length;Y<re;g=++Y){if(D=I[g],d=f[g],D===65535){c.push(0),B.push(0);break}if(D-(U=n[D].new)>=32768)for(c.push(0),B.push(2*(p.length+F-g)),a=V=D;D<=d?V<=d:V>=d;a=D<=d?++V:--V)p.push(n[a].new);else c.push(U-D),B.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*F+2*p.length),P.writeUInt16(0),P.writeUInt16(M),P.writeUInt16(_),P.writeUInt16(h),P.writeUInt16(w),Ae=0,R=f.length;Ae<R;Ae++)a=f[Ae],P.writeUInt16(a);for(P.writeUInt16(0),oe=0,q=I.length;oe<q;oe++)a=I[oe],P.writeUInt16(a);for(pe=0,J=c.length;pe<J;pe++)o=c[pe],P.writeUInt16(o);for(Ie=0,te=B.length;Ie<te;Ie++)T=B[Ie],P.writeUInt16(T);for(ne=0,ie=p.length;ne<ie;ne++)v=p[ne],P.writeUInt16(v);return{charMap:n,subtable:P.data,maxGlyphID:N+1}}},e}(),Tee=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ZA(t,Ud),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,a,s;for(r.pos=this.offset,this.version=r.readUInt16(),s=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)n=new iH(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var a,s;return n==null&&(n="macroman"),a=iH.encode(r,n),(s=new gm).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},t}(),GEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ZA(t,Ud),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),KEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ZA(t,Ud),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,a;for(a=[],n=0;n<10;++n)a.push(r.readByte());return a}(),this.charRange=function(){var n,a;for(a=[],n=0;n<4;++n)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,a;for(a=[],n=0;n<2;n=++n)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),qEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ZA(t,Ud),t.prototype.tag="post",t.prototype.parse=function(r){var n,a,s;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(a=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],s=[];r.pos<this.offset+this.length;)n=r.readByte(),s.push(this.names.push(r.readString(n)));return s;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],i=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;i=0<=c?++o:--o)u.push(r.readUInt32());return u}).call(this)}},t}(),WEe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},XEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ZA(t,Ud),t.prototype.tag="name",t.prototype.parse=function(r){var n,a,s,i,o,c,u,d,f,h,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),a=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},i=f=0,h=a.length;f<h;i=++f)s=a[i],r.pos=s.offset,d=r.readString(s.length),o=new WEe(d,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t}(),YEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ZA(t,Ud),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),JEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ZA(t,Ud),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,a,s,i,o,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,f;for(f=[],n=d=0;0<=s?d<s:d>s;n=0<=s?++d:--d)f.push(r.readInt16());return f}(),this.widths=(function(){var d,f,h,p;for(p=[],d=0,f=(h=this.metrics).length;d<f;d++)i=h[d],p.push(i.advance);return p}).call(this),a=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(a));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),jee=[].slice,ZEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ZA(t,Ud),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,a,s,i,o,c,u,d,f,h;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,a=i.indexOf(r),(s=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+a,o=(c=new gm(n.read(s))).readShort(),d=c.readShort(),h=c.readShort(),u=c.readShort(),f=c.readShort(),this.cache[r]=o===-1?new tCe(c,d,h,u,f):new eCe(c,o,d,h,u,f),this.cache[r]))},t.prototype.encode=function(r,n,a){var s,i,o,c,u;for(o=[],i=[],c=0,u=n.length;c<u;c++)s=r[n[c]],i.push(o.length),s&&(o=o.concat(s.encode(a)));return i.push(o.length),{table:o,offsets:i}},t}(),eCe=function(){function e(t,r,n,a,s,i){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),tCe=function(){function e(t,r,n,a,s){var i,o;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new gm(jee.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),rCe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return ZA(t,Ud),t.prototype.tag="loca",t.prototype.parse=function(r){var n,a;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],a=0,s=this.length;a<s;a+=4)i.push(r.readUInt32());return i}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var a=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<a.length;++o)if(a[o]=s,i<n.length&&n[i]==o){++i,a[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var d=new Array(4*a.length),f=0;f<a.length;++f)d[4*f+3]=255&a[f],d[4*f+2]=(65280&a[f])>>8,d[4*f+1]=(16711680&a[f])>>16,d[4*f]=(4278190080&a[f])>>24;return d},t}(),nCe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,s;for(r in a=this.font.cmap.tables[0].codeMap,t={},s=this.subset)n=s[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,s,i,o,c;for(a={},i=0,o=t.length;i<o;i++)a[s=t[i]]=this.font.glyf.glyphFor(s);for(s in r=[],a)(n=a[s])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(s in c=this.glyphsFor(r))n=c[s],a[s]=n;return a},e.prototype.encode=function(t,r){var n,a,s,i,o,c,u,d,f,h,p,g,v,b,y;for(a in n=Tee.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(t),p={0:0},y=n.charMap)p[(c=y[a]).old]=c.new;for(g in h=n.maxGlyphID,i)g in p||(p[g]=h++);return d=function(C){var N,T;for(N in T={},C)T[C[N]]=N;return T}(p),f=Object.keys(d).sort(function(C,N){return C-N}),v=function(){var C,N,T;for(T=[],C=0,N=f.length;C<N;C++)o=f[C],T.push(d[o]);return T}(),s=this.font.glyf.encode(i,v,p),u=this.font.loca.encode(s.offsets,v),b={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();xr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,s,i;if(Array.isArray(r))return"["+function(){var o,c,u;for(u=[],o=0,c=r.length;o<c;o++)n=r[o],u.push(t.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in s=["<<"],r)i=r[a],s.push("/"+a+" "+t.convert(i));return s.push(">>"),s.join(`
`)}return""+r},t}();function Iee(e,t,r,n,a){n=n||{};var s=1.15,i=a.internal.scaleFactor,o=a.internal.getFontSize()/i,c=a.getLineHeightFactor?a.getLineHeightFactor():s,u=o*c,d=/\r\n|\r|\n/g,f="",h=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(f=typeof e=="string"?e.split(d):e,h=f.length||1),r+=o*(2-s),n.valign==="middle"?r-=h/2*u:n.valign==="bottom"&&(r-=h*u),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),f&&h>=1){for(var g=0;g<f.length;g++)a.text(f[g],t-a.getStringUnitWidth(f[g])*p,r),r+=u;return a}t-=a.getStringUnitWidth(e)*p}return n.halign==="justify"?a.text(e,t,r,{maxWidth:n.maxWidth||100,align:"justify"}):a.text(e,t,r),a}var oH={},mx=function(){function e(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:oH=t},e.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},e.prototype.applyStyles=function(t,r){var n,a,s;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,c=i.fontName;if(t.font&&(c=t.font),t.fontStyle){o=t.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var d=e.unifyColor(t.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=e.unifyColor(t.textColor),d&&(a=this.jsPDFDocument).setTextColor.apply(a,d),d=e.unifyColor(t.lineColor),d&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(t,r,n){return this.jsPDFDocument.splitTextToSize(t,r,n)},e.prototype.rect=function(t,r,n,a,s){return this.jsPDFDocument.rect(t,r,n,a,s)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return oH||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),MF=function(e,t){return MF=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},MF(e,t)};function Fee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");MF(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Oee=function(e){Fee(t,e);function t(r){var n=e.call(this)||this;return n._element=r,n}return t}(Array);function aCe(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function sCe(e){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[e]}function $S(e,t,r){r.applyStyles(t,!0);var n=Array.isArray(e)?e:[e],a=n.map(function(s){return r.getTextWidth(s)}).reduce(function(s,i){return Math.max(s,i)},0);return a}function Dee(e,t,r,n){var a=t.settings.tableLineWidth,s=t.settings.tableLineColor;e.applyStyles({lineWidth:a,lineColor:s});var i=Pee(a,!1);i&&e.rect(r.x,r.y,t.getWidth(e.pageSize().width),n.y-r.y,i)}function Pee(e,t){var r=e>0,n=t||t===0;return r&&n?"DF":r?"S":n?"F":null}function m4(e,t){var r,n,a,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===3)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e.length===1?e=e[0]:e=t}return typeof e=="object"?(typeof e.vertical=="number"&&(e.top=e.vertical,e.bottom=e.vertical),typeof e.horizontal=="number"&&(e.right=e.horizontal,e.left=e.horizontal),{left:(r=e.left)!==null&&r!==void 0?r:t,top:(n=e.top)!==null&&n!==void 0?n:t,right:(a=e.right)!==null&&a!==void 0?a:t,bottom:(s=e.bottom)!==null&&s!==void 0?s:t}):(typeof e!="number"&&(e=t),{top:e,right:e,bottom:e,left:e})}function Ree(e,t){var r=m4(t.settings.margin,0);return e.pageSize().width-(r.left+r.right)}function iCe(e,t,r,n,a){var s={},i=1.3333333333333333,o=RT(t,function(N){return a.getComputedStyle(N).backgroundColor});o!=null&&(s.fillColor=o);var c=RT(t,function(N){return a.getComputedStyle(N).color});c!=null&&(s.textColor=c);var u=lCe(n,r);u&&(s.cellPadding=u);var d="borderTopColor",f=i*r,h=n.borderTopWidth;if(n.borderBottomWidth===h&&n.borderRightWidth===h&&n.borderLeftWidth===h){var p=(parseFloat(h)||0)/f;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/f,right:(parseFloat(n.borderRightWidth)||0)/f,bottom:(parseFloat(n.borderBottomWidth)||0)/f,left:(parseFloat(n.borderLeftWidth)||0)/f},s.lineWidth.top||(s.lineWidth.right?d="borderRightColor":s.lineWidth.bottom?d="borderBottomColor":s.lineWidth.left&&(d="borderLeftColor"));var g=RT(t,function(N){return a.getComputedStyle(N)[d]});g!=null&&(s.lineColor=g);var v=["left","right","center","justify"];v.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),v=["middle","bottom","top"],v.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var b=parseInt(n.fontSize||"");isNaN(b)||(s.fontSize=b/i);var y=oCe(n);y&&(s.fontStyle=y);var C=(n.fontFamily||"").toLowerCase();return e.indexOf(C)!==-1&&(s.font=C),s}function oCe(e){var t="";return(e.fontWeight==="bold"||e.fontWeight==="bolder"||parseInt(e.fontWeight)>=700)&&(t="bold"),(e.fontStyle==="italic"||e.fontStyle==="oblique")&&(t+="italic"),t}function RT(e,t){var r=Lee(e,t);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var a=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(a[0])||isNaN(a[1])||isNaN(a[2])?null:a}function Lee(e,t){var r=t(e);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?e.parentElement==null?null:Lee(e.parentElement,t):r}function lCe(e,t){var r=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),a=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,s=r.map(function(o){return parseInt(o||"0")/n}),i=m4(s,0);return a>i.top&&(i.top=a),a>i.bottom&&(i.bottom=a),i}function Mee(e,t,r,n,a){var s,i;n===void 0&&(n=!1),a===void 0&&(a=!1);var o;typeof t=="string"?o=r.document.querySelector(t):o=t;var c=Object.keys(e.getFontList()),u=e.scaleFactor(),d=[],f=[],h=[];if(!o)return console.error("Html table could not be found with input: ",t),{head:d,body:f,foot:h};for(var p=0;p<o.rows.length;p++){var g=o.rows[p],v=(i=(s=g==null?void 0:g.parentElement)===null||s===void 0?void 0:s.tagName)===null||i===void 0?void 0:i.toLowerCase(),b=cCe(c,u,r,g,n,a);b&&(v==="thead"?d.push(b):v==="tfoot"?h.push(b):f.push(b))}return{head:d,body:f,foot:h}}function cCe(e,t,r,n,a,s){for(var i=new Oee(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=r.getComputedStyle(c);if(a||u.display!=="none"){var d=void 0;s&&(d=iCe(e,c,t,u,r)),i.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:d,_element:c,content:uCe(c)})}}var f=r.getComputedStyle(n);if(i.length>0&&(a||f.display!=="none"))return i}function uCe(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function dCe(e,t,r){for(var n=0,a=[e,t,r];n<a.length;n++){var s=a[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Kf(e,t,r,n,a){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s}function Uee(e,t){var r=new mx(e),n=r.getDocumentOptions(),a=r.getGlobalOptions();dCe(a,n,t);var s=Kf({},a,n,t),i;typeof window<"u"&&(i=window);var o=ACe(a,n,t),c=fCe(a,n,t),u=hCe(r,s),d=pCe(r,s,i);return{id:t.tableId,content:d,hooks:c,styles:o,settings:u}}function ACe(e,t,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},a=function(c){if(c==="columnStyles"){var u=e[c],d=t[c],f=r[c];n.columnStyles=Kf({},u,d,f)}else{var h=[e,t,r],p=h.map(function(g){return g[c]||{}});n[c]=Kf({},p[0],p[1],p[2])}},s=0,i=Object.keys(n);s<i.length;s++){var o=i[s];a(o)}return n}function fCe(e,t,r){for(var n=[e,t,r],a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,i=n;s<i.length;s++){var o=i[s];o.didParseCell&&a.didParseCell.push(o.didParseCell),o.willDrawCell&&a.willDrawCell.push(o.willDrawCell),o.didDrawCell&&a.didDrawCell.push(o.didDrawCell),o.willDrawPage&&a.willDrawPage.push(o.willDrawPage),o.didDrawPage&&a.didDrawPage.push(o.didDrawPage)}return a}function hCe(e,t){var r,n,a,s,i,o,c,u,d,f,h,p,g=m4(t.margin,40/e.scaleFactor()),v=(r=mCe(e,t.startY))!==null&&r!==void 0?r:g.top,b;t.showFoot===!0?b="everyPage":t.showFoot===!1?b="never":b=(n=t.showFoot)!==null&&n!==void 0?n:"everyPage";var y;t.showHead===!0?y="everyPage":t.showHead===!1?y="never":y=(a=t.showHead)!==null&&a!==void 0?a:"everyPage";var C=(s=t.useCss)!==null&&s!==void 0?s:!1,N=t.theme||(C?"plain":"striped"),T=!!t.horizontalPageBreak,S=(i=t.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=t.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:C,theme:N,startY:v,margin:g,pageBreak:(c=t.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=t.tableWidth)!==null&&d!==void 0?d:"auto",showHead:y,showFoot:b,tableLineWidth:(f=t.tableLineWidth)!==null&&f!==void 0?f:0,tableLineColor:(h=t.tableLineColor)!==null&&h!==void 0?h:200,horizontalPageBreak:T,horizontalPageBreakRepeat:S,horizontalPageBreakBehaviour:(p=t.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function mCe(e,t){var r=e.getLastAutoTable(),n=e.scaleFactor(),a=e.pageNumber(),s=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;s=i===a}return typeof t=="number"?t:(t==null||t===!1)&&s&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function pCe(e,t,r){var n=t.head||[],a=t.body||[],s=t.foot||[];if(t.html){var i=t.includeHiddenHtml;if(r){var o=Mee(e,t.html,r,i,t.useCss)||{};n=o.head||n,a=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||gCe(n,a,s);return{columns:c,head:n,body:a,foot:s}}function gCe(e,t,r){var n=e[0]||t[0]||r[0]||[],a=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var i=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var c=0;c<i;c++){var u=void 0;Array.isArray(n)?u=a.length:u=s+(c>0?"_".concat(c):"");var d={dataKey:u};a.push(d)}}),a}var UF=function(){function e(t,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=t.getDocument()}return e}(),vCe=function(e){Fee(t,e);function t(r,n,a,s,i,o){var c=e.call(this,r,n,o)||this;return c.cell=a,c.row=s,c.column=i,c.section=s.section,c}return t}(UF),xCe=function(){function e(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return e.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(t)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(t,r,n,a,s,i){for(var o=0,c=r;o<c.length;o++){var u=c[o],d=new vCe(t,this,n,a,s,i),f=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],f)return!1}return!0},e.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++){var s=a[n];s(new UF(t,this,r))}},e.prototype.callWillDrawPageHooks=function(t,r){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++){var s=a[n];s(new UF(t,this,r))}},e.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(a,s){return a+s.wrappedWidth},0);return r}else{var n=this.settings.margin;return t-n.left-n.right}},e}(),Qee=function(){function e(t,r,n,a,s){s===void 0&&(s=!1),this.height=0,this.raw=t,t instanceof Oee&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=n,this.cells=a,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(n,a){var s;return Math.max(n,((s=r.cells[a.index])===null||s===void 0?void 0:s.height)||0)},0)},e.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(n){var a=r.cells[n.index];return a?a.rowSpan>1:!1}).length>0},e.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},e.prototype.getMinimumRowHeight=function(t,r){var n=this;return t.reduce(function(a,s){var i=n.cells[s.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),c=i.padding("vertical"),u=c+o;return u>a?u:a},0)},e}(),Hee=function(){function e(t,r,n){var a;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=t;var s=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,s=(a=t.content)!==null&&a!==void 0?a:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var i=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return e.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var a=this.width-this.padding("horizontal");n=this.x+a/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:t}},e.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,a=this.styles.fontSize/t*r,s=n*a+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},e.prototype.padding=function(t){var r=m4(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},e}(),bCe=function(){function e(t,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=n}return e.prototype.getMaxCustomCellWidth=function(t){for(var r=0,n=0,a=t.allRows();n<a.length;n++){var s=a[n],i=s.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},e}();function yCe(e,t){wCe(e,t);var r=[],n=0;t.columns.forEach(function(s){var i=s.getMaxCustomCellWidth(t);i?s.width=i:(s.width=s.wrappedWidth,r.push(s)),n+=s.width});var a=t.getWidth(e.pageSize().width)-n;a&&(a=QF(r,a,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),a&&(a=QF(r,a,function(s){return s.minWidth})),a=Math.abs(a),!t.settings.horizontalPageBreak&&a>.1/e.scaleFactor()&&(a=a<1?a:Math.round(a),console.warn("Of the table content, ".concat(a," units width could not fit page"))),CCe(t),_Ce(t,e),ECe(t)}function wCe(e,t){var r=e.scaleFactor(),n=t.settings.horizontalPageBreak,a=Ree(e,t);t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){var d=t.hooks.didParseCell;t.callCellHooks(e,d,u,s,c,null);var f=u.padding("horizontal");u.contentWidth=$S(u.text,u.styles,e)+f;var h=$S(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,e);if(u.minReadableWidth=h+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>a?(u.minWidth=a,u.wrappedWidth=a):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/r;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(s){for(var i=0,o=t.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var d=t.styles.columnStyles[c.dataKey]||t.styles.columnStyles[c.index]||{},f=d.cellWidth||d.minCellWidth;f&&typeof f=="number"&&(c.minWidth=f,c.wrappedWidth=f)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function QF(e,t,r){for(var n=t,a=e.reduce(function(p,g){return p+g.wrappedWidth},0),s=0;s<e.length;s++){var i=e[s],o=i.wrappedWidth/a,c=n*o,u=i.width+c,d=r(i),f=u<d?d:u;t-=f-i.width,i.width=f}if(t=Math.round(t*1e10)/1e10,t){var h=e.filter(function(p){return t<0?p.width>r(p):!0});h.length&&(t=QF(h,t,r))}return t}function ECe(e){for(var t={},r=1,n=e.allRows(),a=0;a<n.length;a++)for(var s=n[a],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=t[c.index];if(r>1)r--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,r=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete t[c.index];else{var d=s.cells[c.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var f=n.length-a,h=d.rowSpan>f?f:d.rowSpan;t[c.index]={cell:d,left:h,row:s}}}}}function CCe(e){for(var t=e.allRows(),r=0;r<t.length;r++)for(var n=t[r],a=null,s=0,i=0,o=0;o<e.columns.length;o++){var c=e.columns[o];if(i-=1,i>1&&e.columns[o+1])s+=c.width,delete n.cells[c.index];else if(a){var u=a;delete n.cells[c.index],a=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(i=u.colSpan,s=0,u.colSpan>1){a=u,s+=c.width;continue}u.width=c.width+s}}}function _Ce(e,t){for(var r={count:0,height:0},n=0,a=e.allRows();n<a.length;n++){for(var s=a[n],i=0,o=e.columns;i<o.length;i++){var c=o[i],u=s.cells[c.index];if(u){t.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,d+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=lH(u.text,d,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=lH(u.text,d,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var f=u.styles.overflow(u.text,d);typeof f=="string"?u.text=[f]:u.text=f}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<h*u.rowSpan?r={height:h,count:u.rowSpan}:r&&r.count>0&&r.height>h&&(h=r.height),h>s.height&&(s.height=h)}}r.count--}}function lH(e,t,r,n,a){return e.map(function(s){return SCe(s,t,r,n,a)})}function SCe(e,t,r,n,a){var s=1e4*n.scaleFactor();if(t=Math.ceil(t*s)/s,t>=$S(e,r,n))return e;for(;t<$S(e+a,r,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+a}function Vee(e,t){var r=new mx(e),n=NCe(t,r.scaleFactor()),a=new xCe(t,n);return yCe(r,a),r.applyStyles(r.userStyles),a}function NCe(e,t){var r=e.content,n=BCe(r.columns);if(r.head.length===0){var a=cH(n,"head");a&&r.head.push(a)}if(r.foot.length===0){var a=cH(n,"foot");a&&r.foot.push(a)}var s=e.settings.theme,i=e.styles;return{columns:n,head:LT("head",r.head,n,i,s,t),body:LT("body",r.body,n,i,s,t),foot:LT("foot",r.foot,n,i,s,t)}}function LT(e,t,r,n,a,s){var i={},o=t.map(function(c,u){for(var d=0,f={},h=0,p=0,g=0,v=r;g<v.length;g++){var b=v[g];if(i[b.index]==null||i[b.index].left===0)if(p===0){var y=void 0;Array.isArray(c)?y=c[b.index-h-d]:y=c[b.dataKey];var C={};typeof y=="object"&&!Array.isArray(y)&&(C=(y==null?void 0:y.styles)||{});var N=TCe(e,b,u,a,n,s,C),T=new Hee(y,N,e);f[b.dataKey]=T,f[b.index]=T,p=T.colSpan-1,i[b.index]={left:T.rowSpan-1,times:p}}else p--,h++;else i[b.index].left--,p=i[b.index].times,d++}return new Qee(c,u,e,f)});return o}function cH(e,t){var r={};return e.forEach(function(n){if(n.raw!=null){var a=kCe(t,n.raw);a!=null&&(r[n.dataKey]=a)}}),Object.keys(r).length>0?r:null}function kCe(e,t){if(e==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(e==="foot"&&typeof t=="object")return t.footer;return null}function BCe(e){return e.map(function(t,r){var n,a;return typeof t=="object"?a=(n=t.dataKey)!==null&&n!==void 0?n:r:a=r,new bCe(a,t,r)})}function TCe(e,t,r,n,a,s,i){var o=sCe(n),c;e==="head"?c=a.headStyles:e==="body"?c=a.bodyStyles:e==="foot"&&(c=a.footStyles);var u=Kf({},o.table,o[e],a.styles,c),d=a.columnStyles[t.dataKey]||a.columnStyles[t.index]||{},f=e==="body"?d:{},h=e==="body"&&r%2===0?Kf({},o.alternateRow,a.alternateRowStyles):{},p=aCe(s),g=Kf({},p,u,h,f);return Kf(g,i)}function jCe(e,t,r){var n;r===void 0&&(r={});var a=Ree(e,t),s=new Map,i=[],o=[],c=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(c=[t.settings.horizontalPageBreakRepeat]),c.forEach(function(h){var p=t.columns.find(function(g){return g.dataKey===h||g.index===h});p&&!s.has(p.index)&&(s.set(p.index,!0),i.push(p.index),o.push(t.columns[p.index]),a-=p.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<t.columns.length;){if(s.has(d)){d++;continue}var f=t.columns[d].wrappedWidth;if(u||a>=f)u=!1,i.push(d),o.push(t.columns[d]),a-=f;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function ICe(e,t){for(var r=[],n=0;n<t.columns.length;n++){var a=jCe(e,t,{start:n});a.columns.length&&(r.push(a),n=a.lastIndex)}return r}function zee(e,t){var r=t.settings,n=r.startY,a=r.margin,s={x:a.left,y:n},i=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),o=n+a.bottom+i;if(r.pageBreak==="avoid"){var c=t.body,u=c.reduce(function(h,p){return h+p.height},0);o+=u}var d=new mx(e);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(Gee(d),s.y=a.top),t.callWillDrawPageHooks(d,s);var f=Kf({},s);t.startPageNumber=d.pageNumber(),r.horizontalPageBreak?FCe(d,t,f,s):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(h){return mh(d,t,h,s,t.columns)}),d.applyStyles(d.userStyles),t.body.forEach(function(h,p){var g=p===t.body.length-1;GS(d,t,h,g,f,s,t.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(h){return mh(d,t,h,s,t.columns)})),Dee(d,t,f,s),t.callEndPageHooks(d,s),t.finalY=s.y,e.lastAutoTable=t,d.applyStyles(d.userStyles)}function FCe(e,t,r,n){var a=ICe(e,t),s=t.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")a.forEach(function(u,d){e.applyStyles(e.userStyles),d>0?Uy(e,t,r,n,u.columns,!0):uH(e,t,n,u.columns),OCe(e,t,r,n,u.columns),MT(e,t,n,u.columns)});else for(var i=-1,o=a[0],c=function(){var u=i;if(o){e.applyStyles(e.userStyles);var d=o.columns;i>=0?Uy(e,t,r,n,d,!0):uH(e,t,n,d),u=dH(e,t,i+1,n,d),MT(e,t,n,d)}var f=u-i;a.slice(1).forEach(function(h){e.applyStyles(e.userStyles),Uy(e,t,r,n,h.columns,!0),dH(e,t,i+1,n,h.columns,f),MT(e,t,n,h.columns)}),i=u};i<t.body.length-1;)c()}function uH(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showHead==="firstPage"||a.showHead==="everyPage")&&t.head.forEach(function(s){return mh(e,t,s,r,n)})}function OCe(e,t,r,n,a){e.applyStyles(e.userStyles),t.body.forEach(function(s,i){var o=i===t.body.length-1;GS(e,t,s,o,r,n,a)})}function dH(e,t,r,n,a,s){e.applyStyles(e.userStyles),s=s??t.body.length;var i=Math.min(r+s,t.body.length),o=-1;return t.body.slice(r,i).forEach(function(c,u){var d=r+u===t.body.length-1,f=$ee(e,t,d,n);c.canEntireRowFit(f,a)&&(mh(e,t,c,n,a),o=r+u)}),o}function MT(e,t,r,n){var a=t.settings;e.applyStyles(e.userStyles),(a.showFoot==="lastPage"||a.showFoot==="everyPage")&&t.foot.forEach(function(s){return mh(e,t,s,r,n)})}function DCe(e,t,r){var n=r.getLineHeight(e.styles.fontSize),a=e.padding("vertical"),s=Math.floor((t-a)/n);return Math.max(0,s)}function PCe(e,t,r,n){var a={};e.spansMultiplePages=!0,e.height=0;for(var s=0,i=0,o=r.columns;i<o.length;i++){var c=o[i],u=e.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new Hee(u.raw,u.styles,u.section);d=Kf(d,u),d.text=[];var f=DCe(u,t,n);u.text.length>f&&(d.text=u.text.splice(f,u.text.length));var h=n.scaleFactor(),p=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(h,p),u.contentHeight>=t&&(u.contentHeight=t,d.styles.minCellHeight-=t),u.contentHeight>e.height&&(e.height=u.contentHeight),d.contentHeight=d.getContentHeight(h,p),d.contentHeight>s&&(s=d.contentHeight),a[c.index]=d}}var g=new Qee(e.raw,-1,e.section,a,!0);g.height=s;for(var v=0,b=r.columns;v<b.length;v++){var c=b[v],d=g.cells[c.index];d&&(d.height=g.height);var u=e.cells[c.index];u&&(u.height=e.height)}return g}function RCe(e,t,r,n){var a=e.pageSize().height,s=n.settings.margin,i=s.top+s.bottom,o=a-i;t.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=t.getMinimumRowHeight(n.columns,e),u=c<r;if(c>o)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=t.hasRowSpan(n.columns),f=t.getMaxCellHeight(n.columns)>o;return f?(d&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function GS(e,t,r,n,a,s,i){var o=$ee(e,t,n,s);if(r.canEntireRowFit(o,i))mh(e,t,r,s,i);else if(RCe(e,r,o,t)){var c=PCe(r,o,t,e);mh(e,t,r,s,i),Uy(e,t,a,s,i),GS(e,t,c,n,a,s,i)}else Uy(e,t,a,s,i),GS(e,t,r,n,a,s,i)}function mh(e,t,r,n,a){n.x=t.settings.margin.left;for(var s=0,i=a;s<i.length;s++){var o=i[s],c=r.cells[o.index];if(!c){n.x+=o.width;continue}e.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=t.callCellHooks(e,t.hooks.willDrawCell,c,r,o,n);if(u===!1){n.x+=o.width;continue}LCe(e,c,n);var d=c.getTextPos();Iee(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,r,o,n),n.x+=o.width}n.y+=r.height}function LCe(e,t,r){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),typeof n.lineWidth=="number"){var a=Pee(n.lineWidth,n.fillColor);a&&e.rect(t.x,r.y,t.width,t.height,a)}else typeof n.lineWidth=="object"&&(n.fillColor&&e.rect(t.x,r.y,t.width,t.height,"F"),MCe(e,t,r,n.lineWidth))}function MCe(e,t,r,n){var a,s,i,o;n.top&&(a=r.x,s=r.y,i=r.x+t.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.top,a,s,i,o)),n.bottom&&(a=r.x,s=r.y+t.height,i=r.x+t.width,o=r.y+t.height,n.right&&(i+=.5*n.right),n.left&&(a-=.5*n.left),c(n.bottom,a,s,i,o)),n.left&&(a=r.x,s=r.y,i=r.x,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,a,s,i,o)),n.right&&(a=r.x+t.width,s=r.y,i=r.x+t.width,o=r.y+t.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,a,s,i,o));function c(u,d,f,h,p){e.getDocument().setLineWidth(u),e.getDocument().line(d,f,h,p,"S")}}function $ee(e,t,r,n){var a=t.settings.margin.bottom,s=t.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&r)&&(a+=t.getFootHeight(t.columns)),e.pageSize().height-n.y-a}function Uy(e,t,r,n,a,s){a===void 0&&(a=[]),s===void 0&&(s=!1),e.applyStyles(e.userStyles),t.settings.showFoot==="everyPage"&&!s&&t.foot.forEach(function(o){return mh(e,t,o,n,a)}),t.callEndPageHooks(e,n);var i=t.settings.margin;Dee(e,t,r,n),Gee(e),t.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,t.callWillDrawPageHooks(e,n),t.settings.showHead==="everyPage"&&(t.head.forEach(function(o){return mh(e,t,o,n,a)}),e.applyStyles(e.userStyles))}function Gee(e){var t=e.pageNumber();e.setPage(t+1);var r=e.pageNumber();return r===t?(e.addPage(),!0):!1}function UCe(e){e.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=Uee(this,n),s=Vee(this,a);return zee(this,s),this},e.API.lastAutoTable=!1,e.API.autoTableText=function(t,r,n,a){Iee(t,r,n,a,this)},e.API.autoTableSetDefaults=function(t){return mx.setDefaults(t,this),this},e.autoTableSetDefaults=function(t,r){mx.setDefaults(t,r)},e.API.autoTableHtmlToJson=function(t,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var a=new mx(this),s=Mee(a,t,window,r,!1),i=s.head,o=s.body,c=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var UT;function xl(e,t){var r=Uee(e,t),n=Vee(e,r);zee(e,n)}try{if(typeof window<"u"&&window){var AH=window,fH=AH.jsPDF||((UT=AH.jspdf)===null||UT===void 0?void 0:UT.jsPDF);fH&&UCe(fH)}}catch(e){console.error("Could not apply autoTable plugin",e)}const pP="evaluaciones_pruebas",gP="evaluaciones_rubricas_estaticas",vP="evaluaciones_rubricas_interactivas",QCe="usuarios",p4=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion}},HCe=e=>{const t=tr(It(bt,pP),Rr("fechaCreacion","desc"));return gr(t,n=>{e(n.docs.map(a=>p4(a)))},n=>{console.error("Error al suscribirse a las pruebas:",n),e([])})},VCe=async e=>{try{const{id:t,...r}=e,n=pr(bt,pP,t);await Ji(n,{...r,fechaCreacion:mr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la prueba:",t),new Error("No se pudo guardar la prueba.")}},zCe=async e=>{try{await ts(pr(bt,pP,e))}catch(t){throw console.error("Error al eliminar la prueba:",t),new Error("No se pudo eliminar la prueba.")}},$Ce=e=>{const t=tr(It(bt,gP),Rr("fechaCreacion","desc"));return gr(t,n=>{e(n.docs.map(a=>p4(a)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),e([])})},GCe=async e=>{try{const{id:t,...r}=e,n=pr(bt,gP,t);await Ji(n,{...r,fechaCreacion:mr.fromDate(new Date(r.fechaCreacion))})}catch(t){throw console.error("Error al guardar la rúbrica estática:",t),new Error("No se pudo guardar la rúbrica.")}},KCe=async e=>{try{await ts(pr(bt,gP,e))}catch(t){throw console.error("Error al eliminar la rúbrica estática:",t),new Error("No se pudo eliminar la rúbrica.")}},qCe=e=>{const t=tr(It(bt,vP));return gr(t,n=>{e(n.docs.map(a=>p4(a)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),e([])})},WCe=async e=>{try{const{id:t,...r}=e,n=pr(bt,vP,t);await Ji(n,r)}catch(t){throw console.error("Error al guardar la rúbrica interactiva:",t),new Error("No se pudo guardar la rúbrica interactiva.")}},XCe=async e=>{try{return(await Un(It(bt,vP),e)).id}catch(t){throw console.error("Error al crear la rúbrica interactiva:",t),new Error("No se pudo crear la rúbrica interactiva.")}},YCe=e=>{const t=tr(It(bt,QCe));return gr(t,n=>{e(n.docs.map(a=>p4(a)))},n=>{console.error("Error al suscribirse a los usuarios:",n),e([])})},JCe=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],hH={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},H_=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},ZCe=({open:e})=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):l.jsxs(l.Fragment,{children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e_e=({item:e,index:t,showAnswers:r})=>{const n=k.useMemo(()=>e.tipo==="Términos pareados"?[...e.pares.map(a=>a.definicion)].sort(()=>Math.random()-.5):[],[e]);return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[t+1,". ",e.pregunta," (",e.puntaje," pts)"]}),e.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:e.habilidadBloom})]}),e.tipo==="Selección múltiple"&&l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:e.opciones.map((a,s)=>{const i=r&&s===e.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+s),") ",a]})]},s)})}),e.tipo==="Desarrollo"&&l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),e.tipo==="Verdadero o Falso"&&l.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[l.jsx("span",{children:"V ___ F ___"}),r&&l.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",e.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),e.tipo==="Términos pareados"&&l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),l.jsx("div",{className:"space-y-2",children:e.pares.map((a,s)=>l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[s+1,". ",a.concepto]},s))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),l.jsx("div",{className:"space-y-2",children:n.map((a,s)=>l.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:a},s))})]})]}),r&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[l.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),l.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:e.pares.map((a,s)=>l.jsxs("li",{children:[l.jsx("strong",{children:a.concepto})," → ",a.definicion]},s))})]})]}),e.tipo==="Comprensión de lectura"&&l.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:e.texto}),e.preguntas.map((a,s)=>{if(a.tipo==="Selección múltiple"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,c)=>{const u=r&&c===i.respuestaCorrecta;return l.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[l.jsx("div",{className:"w-5 h-5 border rounded-full"}),l.jsxs("span",{children:[String.fromCharCode(65+c),") ",o]})]},c)})})]},a.id)}if(a.tipo==="Desarrollo"){const i=a;return l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[s+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&l.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),l.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},a.id)}return null})]})]},e.id)},t_e=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(null),[a,s]=k.useState(!1),[i,o]=k.useState(!1),[c,u]=k.useState(null),[d,f]=k.useState(!1),h={nombre:"",asignatura:qi[0],nivel:Gv[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[p,g]=k.useState(h);k.useEffect(()=>{const w=HCe(t);return()=>w()},[]);const v=w=>{const{name:_,value:F}=w.target;g(M=>({...M,[_]:F}))},b=w=>{g(_=>{const F={..._.tiposActividad};return F[w]?delete F[w]:F[w]=hH[w][0],{..._,tiposActividad:F}})},y=(w,_)=>{g(F=>({...F,tiposActividad:{...F.tiposActividad,[w]:_}}))},C=w=>{g(_=>{const F=_.selectedNee.includes(w)?_.selectedNee.filter(M=>M!==w):[..._.selectedNee,w];return{..._,selectedNee:F}})},N=async w=>{if(w.preventDefault(),!p.nombre.trim()||!p.contenido.trim()||Object.keys(p.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}s(!0),u(null);const _=Object.entries(p.tiposActividad).map(([D,I])=>`- ${I} ítem(s) de tipo '${D}'`).join(`
`),F=p.isNee&&p.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${p.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",M=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${p.nombre}
            - Asignatura: ${p.asignatura}
            - Nivel: ${p.nivel}
            - Contenido a evaluar: "${p.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${_}
            - Nivel de Dificultad General: ${p.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${F}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{mm("Evaluación - Pruebas");const D="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Y=(await(await new ds(D).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(M)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(Y);let z=0;V.actividades.forEach(re=>{re.items.forEach(R=>{z+=R.puntaje||0,R.tipo==="Comprensión de lectura"&&R.preguntas&&R.preguntas.forEach(q=>{z+=q.puntaje||0})})});const G={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:p.nombre,asignatura:p.asignatura,nivel:p.nivel,contenidoOriginal:p.contenido,tiposActividadOriginal:p.tiposActividad,objetivo:V.objetivo,instruccionesGenerales:V.instruccionesGenerales,puntajeIdeal:z,actividades:V.actividades,dificultad:p.dificultad,...p.isNee&&{adaptacionNEE:p.selectedNee}};n(G),f(!1)}catch(D){console.error(D),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{s(!1)}},T=async()=>{if(r)try{await VCe(r),alert("Prueba guardada con éxito.")}catch(w){console.error(w),alert("No se pudo guardar la prueba.")}},S=async w=>{if(window.confirm("¿Eliminar esta prueba?"))try{await zCe(w),(r==null?void 0:r.id)===w&&n(null)}catch(_){console.error(_),alert("No se pudo eliminar la prueba.")}},B=async w=>{o(!0);const _=new xr("p","mm","a4"),F=20,M=_.internal.pageSize.getHeight(),D=_.internal.pageSize.getWidth(),I=D-F*2;let U=F;const P=Y=>{Y.setFillColor(230,230,230),Y.rect(0,0,D,25,"F"),Y.setFontSize(9),Y.setTextColor(0,0,0),Y.text("LICEO INDUSTRIAL DE RECOLETA",F,15,{align:"left"}),Y.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",D-F,15,{align:"right"})};P(_),U=30,_.setTextColor(0,0,0),_.setFont("helvetica","bold"),_.setFontSize(16),_.text(w.nombre,D/2,U,{align:"center"}),U+=10,xl(_,{startY:U,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},w.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},w.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},w.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:w.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:w.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:Y=>{P(_)}}),U=_.lastAutoTable.finalY+10;const X=Y=>{U+Y>M-F&&(_.addPage(),P(_),U=F+15,_.setTextColor(0,0,0))},H=(Y,V)=>{_.setFont("helvetica",V.isBold?"bold":"normal"),_.setFontSize(V.fontSize);const z=Array.isArray(Y)?Y.join(`
`):Y;return _.getTextDimensions(z,{maxWidth:V.width}).h};for(const Y of w.actividades){let V=H(Y.titulo,{fontSize:12,width:I,isBold:!0})+H(Y.instrucciones,{fontSize:10,width:I})+12;X(V),_.setFont("helvetica","bold"),_.setFontSize(12),_.setTextColor(0,0,0),_.text(Y.titulo,F,U),U+=8,_.setFont("helvetica","normal"),_.setFontSize(10);const z=_.splitTextToSize(Y.instrucciones,I);_.text(z,F,U),U+=z.length*(10*.35*1.15)+4;for(const[G,re]of Y.items.entries()){let R=0;const q=`${G+1}. ${re.pregunta} (${re.puntaje} pts)`;switch(R+=H(q,{fontSize:10,width:I,isBold:!0}),re.tipo){case"Selección múltiple":re.opciones.forEach(ie=>{R+=H(ie,{fontSize:10,width:I-5})+3}),R+=7;break;case"Verdadero o Falso":R+=10;break;case"Desarrollo":R+=30;break;case"Términos pareados":R+=re.pares.length*12+20;break;case"Comprensión de lectura":const te=re;R+=H(te.texto,{fontSize:10,width:I-10})+10,te.preguntas.forEach(ie=>{const Ae=`${ie.pregunta} (${ie.puntaje} pts)`;R+=H(Ae,{fontSize:10,width:I-5,isBold:!0}),ie.tipo==="Selección múltiple"?(ie.opciones.forEach(oe=>{R+=H(oe,{fontSize:10,width:I-10})+3}),R+=7):ie.tipo==="Desarrollo"&&(R+=30),R+=5}),R+=15;break}X(R),_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(0,0,0);const J=_.splitTextToSize(q,I);if(_.text(J,F,U),U+=J.length*5+4,_.setFont("helvetica","normal"),re.tipo==="Selección múltiple")re.opciones.forEach((te,ie)=>{_.text(`${String.fromCharCode(65+ie)}) ${te}`,F+5,U),U+=7});else if(re.tipo==="Verdadero o Falso")_.text("V ______    F ______",F+5,U),U+=10;else if(re.tipo==="Desarrollo")_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(F,U,I,25,"FD"),U+=30;else if(re.tipo==="Términos pareados"){const te=[...re.pares.map(Ae=>Ae.definicion)].sort(()=>Math.random()-.5),ie=re.pares.map((Ae,oe)=>[`${oe+1}. ${Ae.concepto}`,`(   ) ${te[oe]}`]);xl(_,{startY:U,head:[["Columna A: Concepto","Columna B: Definición"]],body:ie,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:Ae=>P(_)}),U=_.lastAutoTable.finalY+10}else if(re.tipo==="Comprensión de lectura"){const te=re;_.setFillColor(240,240,240),_.setDrawColor(200,200,200);const ie=_.splitTextToSize(te.texto,I-10),Ae=ie.length*(10*.35*1.15)+8;_.rect(F,U,I,Ae,"FD"),U+=4,_.setFont("helvetica","normal"),_.setFontSize(10),_.setTextColor(0,0,0),_.text(ie,F+5,U),U+=Ae;for(const[oe,ce]of te.preguntas.entries()){const pe=`${oe+1}. ${ce.pregunta} (${ce.puntaje} pts)`;_.setFont("helvetica","bold");const Ie=_.splitTextToSize(pe,I-5);_.text(Ie,F+5,U),U+=Ie.length*5+4,_.setFont("helvetica","normal"),ce.tipo==="Selección múltiple"?ce.opciones.forEach((ne,Se)=>{_.text(`${String.fromCharCode(65+Se)}) ${ne}`,F+10,U),U+=7}):ce.tipo==="Desarrollo"&&(_.setDrawColor(200,200,200),_.setFillColor(245,245,245),_.rect(F+5,U,I-5,25,"FD"),U+=30)}}U+=5}}_.save(`${w.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>f(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[l.jsx(ZCe,{open:!d})," ",l.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),l.jsx("button",{onClick:T,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),l.jsxs("button",{onClick:()=>B(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":l.jsx(VZ,{})," PDF"]})]})]}),l.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),l.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),l.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),l.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),l.jsxs("p",{className:"text-right",children:[l.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),l.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[l.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&l.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),l.jsxs("p",{children:[l.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(w=>l.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:w.titulo}),l.jsx("p",{className:"italic text-sm mb-4",children:w.instrucciones}),l.jsx("div",{className:"space-y-6",children:w.items.map((_,F)=>l.jsx(e_e,{item:_,index:F,showAnswers:d},_.id))})]},w.id))]})]}):l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),l.jsxs("form",{onSubmit:N,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",name:"nombre",value:p.nombre,onChange:v,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),l.jsx("div",{}),l.jsx("select",{name:"asignatura",value:p.asignatura,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:qi.map(w=>l.jsx("option",{children:w},w))}),l.jsx("select",{name:"nivel",value:p.nivel,onChange:v,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:Gv.map(w=>l.jsx("option",{children:w},w))})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),l.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((w,_)=>l.jsx("button",{type:"button",onClick:()=>g(F=>({...F,dificultad:w})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${_===0?"rounded-l-lg":""} ${_===2?"rounded-r-lg":""}
                                            ${p.dificultad===w?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:w},w))})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.isNee,onChange:w=>g(_=>({..._,isNee:w.target.checked,selectedNee:w.target.checked?_.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),p.isNee&&l.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:PS.map(w=>l.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:p.selectedNee.includes(w),onChange:()=>C(w),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:w})]},w))})]})]})]}),l.jsx("textarea",{name:"contenido",value:p.contenido,onChange:v,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"space-y-3",children:JCe.map(w=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:!!p.tiposActividad[w],onChange:()=>b(w),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:w})]}),p.tiposActividad[w]&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),hH[w].map(_=>l.jsx("button",{type:"button",onClick:()=>y(w,_),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${p.tiposActividad[w]===_?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:_},_))]})]},w))}),c&&l.jsx("p",{className:"text-red-500 text-sm",children:c}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:a,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:a?"Generando...":"Generar Prueba"})})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),l.jsx("div",{className:"space-y-2",children:e.length>0?e.map(w=>l.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:w.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[w.asignatura," - ",w.nivel," (",new Date(w.fechaCreacion).toLocaleDateString(),")"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>n(w),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),l.jsx("button",{onClick:()=>S(w.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},w.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},r_e=({rubricas:e,onSave:t,onDelete:r,onCreate:n})=>{const[a,s]=k.useState(null),[i,o]=k.useState("list"),[c,u]=k.useState(!1),[d,f]=k.useState(""),h=async(S,B)=>{if(!S.trim()||!B.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const w=`Crea una rúbrica de evaluación detallada sobre "${S}" con el propósito de "${B}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{mm("Evaluación - Rúbricas");const F="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",P=(await(await new ds(F).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:w}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),X=JSON.parse(P),H={id:crypto.randomUUID(),titulo:S,descripcion:B,fechaCreacion:new Date().toISOString(),dimensiones:X.map(Y=>({id:crypto.randomUUID(),nombre:Y.dimension,niveles:{insuficiente:Y.insuficiente,suficiente:Y.suficiente,competente:Y.competente,avanzado:Y.avanzado}}))};s(H)}catch(F){console.error(F),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},p=async()=>{if(!d.trim()||!a)return;const S=crypto.randomUUID(),B={id:S,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};s(F=>F?{...F,dimensiones:[...F.dimensiones,B]}:null),f("");const w=`Para una rúbrica sobre "${a.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${a.dimensiones.map(F=>F.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,_={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{mm("Evaluación - Rúbricas (Añadir Dimensión)");const F="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",P=(await(await new ds(F).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:w}]}],generationConfig:{responseMimeType:"application/json",responseSchema:_}})).response).text(),X=JSON.parse(P);s(H=>H?{...H,dimensiones:H.dimensiones.map(Y=>Y.id===S?{...Y,niveles:X,isLoading:!1}:Y)}:null)}catch(F){console.error("Error generating dimension descriptors:",F),alert("No se pudieron generar los descriptores."),s(M=>M?{...M,dimensiones:M.dimensiones.filter(D=>D.id!==S)}:null)}},g=()=>{if(!a)return;e.some(B=>B.id===a.id)?t(a):n(a),o("list"),s(null)},v=S=>{s(S),o("form")},b=()=>{s({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},y=(S,B,w)=>{a&&s(_=>_?{..._,dimensiones:_.dimensiones.map(F=>F.id!==S?F:B==="nombre"?{...F,nombre:w}:{...F,niveles:{...F.niveles,[B]:w}})}:null)},C=(S,B)=>{s(w=>w?{...w,[S]:B}:null)},N=S=>{a&&s(B=>B?{...B,dimensiones:B.dimensiones.filter(w=>w.id!==S)}:null)},T=()=>{if(!a)return null;const S="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",B=`${S} resize-none text-sm`;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),l.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),l.jsx("input",{value:a.titulo,onChange:w=>C("titulo",w.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${S} mt-1`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),l.jsx("textarea",{value:a.descripcion,onChange:w=>C("descripcion",w.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${S} mt-1`})]})]}),a.dimensiones.length===0&&l.jsx("div",{className:"text-center py-4",children:l.jsx("button",{onClick:()=>h(a.titulo,a.descripcion),disabled:c||!a.titulo||!a.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:c?"Generando...":"✨ Generar Rúbrica con IA"})}),a.dimensiones.length>0&&l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full text-sm",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:l.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(w=>l.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:w},w))})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.dimensiones.map(w=>l.jsxs("tr",{children:[l.jsx("td",{className:"p-2 w-1/5",children:l.jsx("textarea",{value:w.nombre,onChange:_=>y(w.id,"nombre",_.target.value),rows:4,className:B})}),Object.keys(w.niveles).map(_=>l.jsx("td",{className:"p-2 w-1/5",children:w.isLoading?l.jsx("div",{className:"flex justify-center items-center h-full",children:l.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):l.jsx("textarea",{value:w.niveles[_],onChange:F=>y(w.id,_,F.target.value),rows:4,className:B})},_)),l.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:l.jsx("button",{onClick:()=>N(w.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},w.id))})]})}),l.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),l.jsx("input",{value:d,onChange:w=>f(w.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${S} mt-1`})]}),l.jsx("button",{onClick:p,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),l.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:l.jsx("button",{onClick:g,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),l.jsx("button",{onClick:b,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),e.length>0?e.map(S=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:S.titulo}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:S.descripcion})]}),l.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>v(S),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>r(S.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},S.id)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):T()},n_e=({allUsers:e,rubricasEstaticas:t})=>{const[r,n]=k.useState([]),[a,s]=k.useState(null),[i,o]=k.useState(null),[c,u]=k.useState({rubricaEstaticaId:"",curso:""}),[d,f]=k.useState(null);k.useEffect(()=>{const C=qCe(n);return()=>C()},[]);const h=async C=>{C.preventDefault();const N=t.find(S=>S.id===c.rubricaEstaticaId);if(!N||!c.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const T={nombre:N.titulo,curso:c.curso,asignatura:"N/A",rubricaEstaticaId:N.id,resultados:{}};try{await XCe(T),u({rubricaEstaticaId:"",curso:""})}catch(S){console.error(S),alert("No se pudo crear la evaluación con rúbrica.")}},p=C=>{s(C),o(JSON.parse(JSON.stringify(C)))},g=(C,N,T)=>{i&&o(S=>{if(!S)return null;const B=JSON.parse(JSON.stringify(S));return B.resultados[C]||(B.resultados[C]={puntajes:{},feedback:""}),B.resultados[C].puntajes[N]=T,B})},v=async()=>{if(i)try{await WCe(i),s(i),alert("Cambios guardados.")}catch(C){console.error(C),alert("No se pudieron guardar los cambios.")}},b=k.useCallback(C=>{const N=i,T=t.find(M=>M.id===(N==null?void 0:N.rubricaEstaticaId));if(!N||!T)return{score:0,maxScore:0,grade:"N/A"};const S=T.dimensiones.length*4,B=N.resultados[C];if(!B)return{score:0,maxScore:S,grade:"1.0"};const w=Object.values(B.puntajes).reduce((M,D)=>M+D,0),_=1+6*(w/S),F=S>0?_.toFixed(1):"1.0";return{score:w,maxScore:S,grade:F}},[i,t]),y=async C=>{if(!i)return;const N=t.find(w=>w.id===i.rubricaEstaticaId),T=i.resultados[C];if(!N||!T||Object.keys(T.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}f(C);const B=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${N.dimensiones.map(w=>`${w.nombre}: ${T.puntajes[w.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${N.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{mm("Evaluación - Rúbricas Interactivas (Feedback)");const w="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",I=(await(await new ds(w).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text();o(U=>{if(!U)return null;const P=JSON.parse(JSON.stringify(U));return P.resultados[C].feedback=I.replace(/(\*\*|\*)/g,""),P})}catch(w){console.error(w),alert("Error al generar feedback.")}finally{f(null)}};if(a&&i){const C=t.find(T=>T.id===a.rubricaEstaticaId),N=e.filter(T=>T.profile===Yt.ESTUDIANTE&&H_(T.curso||"")===a.curso).map(T=>T.nombreCompleto).sort();return C?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:a.nombre}),l.jsx("p",{className:"text-slate-500",children:a.curso})]}),l.jsx("button",{onClick:()=>s(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),C.dimensiones.map(T=>l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:T.nombre},T.id)),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),l.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),l.jsx("tbody",{children:N.map(T=>{var _;const{score:S,maxScore:B,grade:w}=b(T);return l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:T}),C.dimensiones.map(F=>l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:l.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(M=>{var D;return l.jsx("button",{onClick:()=>g(T,F.id,M),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((D=i.resultados[T])==null?void 0:D.puntajes[F.id])===M?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:M},M)})})},F.id)),l.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[S,"/",B]}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:w}),l.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[l.jsx("p",{className:"text-xs w-full",children:((_=i.resultados[T])==null?void 0:_.feedback)||"Sin generar"}),l.jsx("button",{onClick:()=>y(T),disabled:d===T,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===T?"...":"Generar IA"})]})})]},T)})})]})}),l.jsx("div",{className:"mt-6 flex justify-end",children:l.jsx("button",{onClick:v,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):l.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",l.jsx("button",{onClick:()=>s(null),children:"Volver"})]})}return l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),l.jsxs("form",{onSubmit:h,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsxs("select",{value:c.rubricaEstaticaId,onChange:C=>u({...c,rubricaEstaticaId:C.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),t.map(C=>l.jsx("option",{value:C.id,children:C.titulo},C.id))]}),l.jsxs("select",{value:c.curso,onChange:C=>u({...c,curso:C.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un Curso"}),ks.map(C=>l.jsx("option",{value:C,children:C},C))]}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),l.jsx("div",{className:"space-y-2",children:r.map(C=>l.jsxs("button",{onClick:()=>p(C),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[l.jsx("p",{className:"font-semibold",children:C.nombre}),l.jsx("p",{className:"text-sm text-slate-500",children:C.curso})]},C.id))})]})]})},a_e=({allUsers:e})=>{const[t,r]=k.useState(""),n=k.useMemo(()=>Array.from(new Set(e.filter(s=>s.profile===Yt.ESTUDIANTE&&s.curso).map(s=>H_(s.curso)))).sort(),[e]),a=k.useMemo(()=>{const s=e.filter(i=>i.profile===Yt.ESTUDIANTE);return t?s.filter(i=>H_(i.curso||"")===t).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):s.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[e,t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",l.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),l.jsxs("select",{id:"curso-filter",value:t,onChange:s=>r(s.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(s=>l.jsx("option",{value:s,children:s},s))]})]}),l.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:a.length>0?a.map(s=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:s.nombreCompleto}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:H_(s.curso||"")}),l.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:s.email})]},s.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},s_e=()=>{const[e,t]=k.useState("pruebas"),[r,n]=k.useState([]),[a,s]=k.useState([]),[i,o]=k.useState(!0);k.useEffect(()=>{o(!0);const f=YCe(n),h=$Ce(p=>{s(p),o(!1)});return()=>{f(),h()}},[]);const c=async f=>{try{await GCe(f)}catch(h){console.error(h),alert("No se pudo guardar la rúbrica.")}},u=async f=>{try{await KCe(f)}catch(h){console.error(h),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:f,label:h})=>l.jsx("button",{onClick:()=>t(f),className:`${e===f?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:h});return i?l.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),l.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),l.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),l.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),l.jsxs("div",{className:"mt-6",children:[e==="pruebas"&&l.jsx(t_e,{}),e==="rubricas"&&l.jsx(r_e,{rubricas:a,onSave:c,onDelete:u,onCreate:c}),e==="rubricasInteractivas"&&l.jsx(n_e,{allUsers:r,rubricasEstaticas:a}),e==="nominas"&&l.jsx(a_e,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var KS={};KS.version="0.18.5";var Kee=1252,i_e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],xP={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},bP=function(e){i_e.indexOf(e)!=-1&&(Kee=xP[0]=e)};function o_e(){bP(1252)}var wd=function(e){bP(e)};function yP(){wd(1200),o_e()}function mH(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function l_e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function qee(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Ay=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?l_e(e.slice(2)):t==254&&r==255?qee(e.slice(2)):t==65279?e.slice(1):e},hC=function(t){return String.fromCharCode(t)},pH=function(t){return String.fromCharCode(t)},bw,H0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function yw(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),s=r>>2,n=e.charCodeAt(u++),i=(r&3)<<4|n>>4,a=e.charCodeAt(u++),o=(n&15)<<2|a>>6,c=a&63,isNaN(n)?o=c=64:isNaN(a)&&(c=64),t+=H0.charAt(s)+H0.charAt(i)+H0.charAt(o)+H0.charAt(c);return t}function Pc(e){var t="",r=0,n=0,a=0,s=0,i=0,o=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)s=H0.indexOf(e.charAt(u++)),i=H0.indexOf(e.charAt(u++)),r=s<<2|i>>4,t+=String.fromCharCode(r),o=H0.indexOf(e.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(t+=String.fromCharCode(n)),c=H0.indexOf(e.charAt(u++)),a=(o&3)<<6|c,c!==64&&(t+=String.fromCharCode(a));return t}var pn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Bh=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function vm(e){return pn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function gH(e){return pn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Bc=function(t){return pn?Bh(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function g4(e){if(typeof ArrayBuffer>"u")return Bc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Bm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function c_e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function wP(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return wP(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Ki=pn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Bh(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),a=0;for(t=0,r=0;t<e.length;r+=a,++t)if(a=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function u_e(e){for(var t=[],r=0,n=e.length+250,a=vm(e.length+255),s=0;s<e.length;++s){var i=e.charCodeAt(s);if(i<128)a[r++]=i;else if(i<2048)a[r++]=192|i>>6&31,a[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=e.charCodeAt(++s)&1023;a[r++]=240|i>>8&7,a[r++]=128|i>>2&63,a[r++]=128|o>>6&15|(i&3)<<4,a[r++]=128|o&63}else a[r++]=224|i>>12&15,a[r++]=128|i>>6&63,a[r++]=128|i&63;r>n&&(t.push(a.slice(0,r)),r=0,a=vm(65535),n=65530)}return t.push(a.slice(0,r)),Ki(t)}var bl=/\u0000/g,fy=/[\u0001-\u0006]/g;function px(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Ed(e,t){var r=""+e;return r.length>=t?r:Ss("0",t-r.length)+r}function EP(e,t){var r=""+e;return r.length>=t?r:Ss(" ",t-r.length)+r}function qS(e,t){var r=""+e;return r.length>=t?r:r+Ss(" ",t-r.length)}function d_e(e,t){var r=""+Math.round(e);return r.length>=t?r:Ss("0",t-r.length)+r}function A_e(e,t){var r=""+e;return r.length>=t?r:Ss("0",t-r.length)+r}var vH=Math.pow(2,32);function Av(e,t){if(e>vH||e<-vH)return d_e(e,t);var r=Math.round(e);return A_e(r,t)}function WS(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var xH=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],QT=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function f_e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var Pr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},bH={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},h_e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function XS(e,t,r){for(var n=e<0?-1:1,a=e*n,s=0,i=1,o=0,c=1,u=0,d=0,f=Math.floor(a);u<t&&(f=Math.floor(a),o=f*i+s,d=f*u+c,!(a-f<5e-8));)a=1/(a-f),s=i,i=o,c=u,u=d;if(d>t&&(u>t?(d=c,o=s):(d=u,o=i)),!r)return[0,n*o,d];var h=Math.floor(n*o/d);return[h,n*o-h*d,d]}function Cp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,a=Math.floor(86400*(e-n)),s=0,i=[],o={D:n,T:a,u:86400*(e-n)-a,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),t&&t.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++a==86400&&(o.T=a=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],s=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),i=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),r&&(s=b_e(c,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=a%60,a=Math.floor(a/60),o.M=a%60,a=Math.floor(a/60),o.H=a,o.q=s,o}var Wee=new Date(1899,11,31,0,0,0),m_e=Wee.getTime(),p_e=new Date(1900,2,1,0,0,0);function Xee(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=p_e&&(r+=1440*60*1e3),(r-(m_e+(e.getTimezoneOffset()-Wee.getTimezoneOffset())*6e4))/(1440*60*1e3)}function CP(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function g_e(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function v_e(e){var t=e<0?12:11,r=CP(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function x_e(e){var t=CP(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function ww(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=v_e(e):t===10?r=e.toFixed(10).substr(0,12):r=x_e(e),CP(g_e(r.toUpperCase()))}function tg(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):ww(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Pu(14,Xee(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function b_e(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function y_e(e,t,r,n){var a="",s=0,i=0,o=r.y,c,u=0;switch(e){case 98:o=r.y+543;case 121:switch(t.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return QT[r.m-1][1];case 5:return QT[r.m-1][0];default:return QT[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return xH[r.q][0];default:return xH[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Ed(r.S,t.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,s=Math.round(i*(r.S+r.u)),s>=60*i&&(s=0),t==="s"?s===0?"0":""+s/i:(a=Ed(s,2+n),t==="ss"?a.substr(0,2):"."+a.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?Ed(c,u):"";return d}function V0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var Yee=/%/g;function w_e(e,t,r){var n=t.replace(Yee,""),a=t.length-n.length;return rh(e,n,r*Math.pow(10,2*a))+Ss("%",a)}function E_e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return rh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Jee(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Jee(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),r.indexOf("e")===-1){var i=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,a)+"."+r.substr(2+a),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Zee=/# (\?+)( ?)\/( ?)(\d+)/;function C_e(e,t,r){var n=parseInt(e[4],10),a=Math.round(t*n),s=Math.floor(a/n),i=a-s*n,o=n;return r+(s===0?"":""+s)+" "+(i===0?Ss(" ",e[1].length+1+e[4].length):EP(i,e[1].length)+e[2]+"/"+e[3]+Ed(o,e[4].length))}function __e(e,t,r){return r+(t===0?"":""+t)+Ss(" ",e[1].length+2+e[4].length)}var ete=/^#*0*\.([0#]+)/,tte=/\).*[0#]/,rte=/\(###\) ###\\?-####/;function Al(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function yH(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function wH(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function S_e(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function N_e(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function gu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(tte)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?gu("n",n,r):"("+gu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return E_e(e,t,r);if(t.indexOf("%")!==-1)return w_e(e,t,r);if(t.indexOf("E")!==-1)return Jee(t,r);if(t.charCodeAt(0)===36)return"$"+gu(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Av(c,t.length);if(t.match(/^[#?]+$/))return a=Av(r,0),a==="0"&&(a=""),a.length>t.length?a:Al(t.substr(0,t.length-a.length))+a;if(s=t.match(Zee))return C_e(s,c,u);if(t.match(/^#+0+$/))return u+Av(c,t.length-t.indexOf("0"));if(s=t.match(ete))return a=yH(r,s[1].length).replace(/^([^\.]+)$/,"$1."+Al(s[1])).replace(/\.$/,"."+Al(s[1])).replace(/\.(\d*)$/,function(g,v){return"."+v+Ss("0",Al(s[1]).length-v.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+yH(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+V0(Av(c,0));if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+gu(e,t,-r):V0(""+(Math.floor(r)+S_e(r,s[1].length)))+"."+Ed(wH(r,s[1].length),s[1].length);if(s=t.match(/^#,#*,#0/))return gu(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=px(gu(e,t.replace(/[\\-]/g,""),r)),i=0,px(px(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(rte))return a=gu(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=XS(c,Math.pow(10,i)-1,!1),a=""+u,d=rh("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=qS(o[2],i),d.length<s[4].length&&(d=Al(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=XS(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?EP(o[1],i)+s[2]+"/"+s[3]+qS(o[2],i):Ss(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=Av(r,0),t.length<=a.length?a:Al(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0?]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return Al(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return i=wH(r,s[1].length),r<0?"-"+gu(e,t,-r):V0(N_e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ed(0,3-g.length):"")+g})+"."+Ed(i,s[1].length);switch(t){case"###,##0.00":return gu(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=V0(Av(c,0));return p!=="0"?u+p:"";case"###,###.00":return gu(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return gu(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function k_e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return rh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function B_e(e,t,r){var n=t.replace(Yee,""),a=t.length-n.length;return rh(e,n,r*Math.pow(10,2*a))+Ss("%",a)}function nte(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+nte(e,-t);var a=e.indexOf(".");a===-1&&(a=e.indexOf("E"));var s=Math.floor(Math.log(t)*Math.LOG10E)%a;if(s<0&&(s+=a),r=(t/Math.pow(10,s)).toPrecision(n+1+(a+s)%a),!r.match(/[Ee]/)){var i=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+s):r+="E+"+(i-s),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(a+s)%a)+"."+d.substr(s)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function _A(e,t,r){if(e.charCodeAt(0)===40&&!t.match(tte)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?_A("n",n,r):"("+_A("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return k_e(e,t,r);if(t.indexOf("%")!==-1)return B_e(e,t,r);if(t.indexOf("E")!==-1)return nte(t,r);if(t.charCodeAt(0)===36)return"$"+_A(e,t.substr(t.charAt(1)==" "?2:1),r);var a,s,i,o,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Ed(c,t.length);if(t.match(/^[#?]+$/))return a=""+r,r===0&&(a=""),a.length>t.length?a:Al(t.substr(0,t.length-a.length))+a;if(s=t.match(Zee))return __e(s,c,u);if(t.match(/^#+0+$/))return u+Ed(c,t.length-t.indexOf("0"));if(s=t.match(ete))return a=(""+r).replace(/^([^\.]+)$/,"$1."+Al(s[1])).replace(/\.$/,"."+Al(s[1])),a=a.replace(/\.(\d*)$/,function(g,v){return"."+v+Ss("0",Al(s[1]).length-v.length)}),t.indexOf("0.")!==-1?a:a.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),s=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=t.match(/^#{1,3},##0(\.?)$/))return u+V0(""+c);if(s=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+_A(e,t,-r):V0(""+r)+"."+Ss("0",s[1].length);if(s=t.match(/^#,#*,#0/))return _A(e,t.replace(/^#,#*,/,""),r);if(s=t.match(/^([0#]+)(\\?-([0#]+))+$/))return a=px(_A(e,t.replace(/[\\-]/g,""),r)),i=0,px(px(t.replace(/\\/g,"")).replace(/[0#]/g,function(g){return i<a.length?a.charAt(i++):g==="0"?"0":""}));if(t.match(rte))return a=_A(e,"##########",r),"("+a.substr(0,3)+") "+a.substr(3,3)+"-"+a.substr(6);var d="";if(s=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(s[4].length,7),o=XS(c,Math.pow(10,i)-1,!1),a=""+u,d=rh("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),a+=d+s[2]+"/"+s[3],d=qS(o[2],i),d.length<s[4].length&&(d=Al(s[4].substr(s[4].length-d.length))+d),a+=d,a;if(s=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(s[1].length,s[4].length),7),o=XS(c,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?EP(o[1],i)+s[2]+"/"+s[3]+qS(o[2],i):Ss(" ",2*i+1+s[2].length+s[3].length));if(s=t.match(/^[#0?]+$/))return a=""+r,t.length<=a.length?a:Al(t.substr(0,t.length-a.length))+a;if(s=t.match(/^([#0]+)\.([#0]+)$/)){a=""+r.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),i=a.indexOf(".");var f=t.indexOf(".")-i,h=t.length-a.length-f;return Al(t.substr(0,f)+a+t.substr(t.length-h))}if(s=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+_A(e,t,-r):V0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(g){return"00,"+(g.length<3?Ed(0,3-g.length):"")+g})+"."+Ed(0,s[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=V0(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return _A(e,t.slice(0,t.lastIndexOf(".")),r)+Al(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function rh(e,t,r){return(r|0)===r?_A(e,t,r):gu(e,t,r)}function T_e(e){for(var t=[],r=!1,n=0,a=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(a,n-a),a=n+1}if(t[t.length]=e.substr(a),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var ate=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function _1(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":WS(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(ate))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function j_e(e,t,r,n){for(var a=[],s="",i=0,o="",c="t",u,d,f,h="H";i<e.length;)switch(o=e.charAt(i)){case"G":if(!WS(e,i))throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"G",v:"General"},i+=7;break;case'"':for(s="";(f=e.charCodeAt(++i))!==34&&i<e.length;)s+=String.fromCharCode(f);a[a.length]={t:"t",v:s},++i;break;case"\\":var p=e.charAt(++i),g=p==="("||p===")"?p:"t";a[a.length]={t:g,v:p},++i;break;case"_":a[a.length]={t:"t",v:" "},i+=2;break;case"@":a[a.length]={t:"T",v:t},++i;break;case"B":case"b":if(e.charAt(i+1)==="1"||e.charAt(i+1)==="2"){if(u==null&&(u=Cp(t,r,e.charAt(i+1)==="2"),u==null))return"";a[a.length]={t:"X",v:e.substr(i,2)},c=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=Cp(t,r),u==null))return"";for(s=o;++i<e.length&&e.charAt(i).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=h),a[a.length]={t:o,v:s},c=o;break;case"A":case"a":case"上":var v={t:o,v:o};if(u==null&&(u=Cp(t,r)),e.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(v.v=u.H>=12?"P":"A"),v.t="T",h="h",i+=3):e.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(v.v=u.H>=12?"PM":"AM"),v.t="T",i+=5,h="h"):e.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(v.v=u.H>=12?"下午":"上午"),v.t="T",i+=5,h="h"):(v.t="t",++i),u==null&&v.t==="T")return"";a[a.length]=v,c=o;break;case"[":for(s=o;e.charAt(i++)!=="]"&&i<e.length;)s+=e.charAt(i);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(ate)){if(u==null&&(u=Cp(t,r),u==null))return"";a[a.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",_1(e)||(a[a.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++i<e.length&&(o=e.charAt(i))==="0";)s+=o;a[a.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++i<e.length&&"0#?.,E+-%".indexOf(o=e.charAt(i))>-1;)s+=o;a[a.length]={t:"n",v:s};break;case"?":for(s=o;e.charAt(++i)===o;)s+=o;a[a.length]={t:o,v:s},c=o;break;case"*":++i,(e.charAt(i)==" "||e.charAt(i)=="*")&&++i;break;case"(":case")":a[a.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;i<e.length&&"0123456789".indexOf(e.charAt(++i))>-1;)s+=e.charAt(i);a[a.length]={t:"D",v:s};break;case" ":a[a.length]={t:o,v:o},++i;break;case"$":a[a.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+e);a[a.length]={t:"t",v:o},++i;break}var b=0,y=0,C;for(i=a.length-1,c="t";i>=0;--i)switch(a[i].t){case"h":case"H":a[i].t=h,c="h",b<1&&(b=1);break;case"s":(C=a[i].v.match(/\.0+$/))&&(y=Math.max(y,C[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=a[i].t;break;case"m":c==="s"&&(a[i].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&a[i].v.match(/[Hh]/)&&(b=1),b<2&&a[i].v.match(/[Mm]/)&&(b=2),b<3&&a[i].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var N="",T;for(i=0;i<a.length;++i)switch(a[i].t){case"t":case"T":case" ":case"D":break;case"X":a[i].v="",a[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":a[i].v=y_e(a[i].t.charCodeAt(0),a[i].v,u,y),a[i].t="t";break;case"n":case"?":for(T=i+1;a[T]!=null&&((o=a[T].t)==="?"||o==="D"||(o===" "||o==="t")&&a[T+1]!=null&&(a[T+1].t==="?"||a[T+1].t==="t"&&a[T+1].v==="/")||a[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(a[T].v==="/"||a[T].v===" "&&a[T+1]!=null&&a[T+1].t=="?"));)a[i].v+=a[T].v,a[T]={v:"",t:";"},++T;N+=a[i].v,i=T-1;break;case"G":a[i].t="t",a[i].v=tg(t,r);break}var S="",B,w;if(N.length>0){N.charCodeAt(0)==40?(B=t<0&&N.charCodeAt(0)===45?-t:t,w=rh("n",N,B)):(B=t<0&&n>1?-t:t,w=rh("n",N,B),B<0&&a[0]&&a[0].t=="t"&&(w=w.substr(1),a[0].v="-"+a[0].v)),T=w.length-1;var _=a.length;for(i=0;i<a.length;++i)if(a[i]!=null&&a[i].t!="t"&&a[i].v.indexOf(".")>-1){_=i;break}var F=a.length;if(_===a.length&&w.indexOf("E")===-1){for(i=a.length-1;i>=0;--i)a[i]==null||"n?".indexOf(a[i].t)===-1||(T>=a[i].v.length-1?(T-=a[i].v.length,a[i].v=w.substr(T+1,a[i].v.length)):T<0?a[i].v="":(a[i].v=w.substr(0,T+1),T=-1),a[i].t="t",F=i);T>=0&&F<a.length&&(a[F].v=w.substr(0,T+1)+a[F].v)}else if(_!==a.length&&w.indexOf("E")===-1){for(T=w.indexOf(".")-1,i=_;i>=0;--i)if(!(a[i]==null||"n?".indexOf(a[i].t)===-1)){for(d=a[i].v.indexOf(".")>-1&&i===_?a[i].v.indexOf(".")-1:a[i].v.length-1,S=a[i].v.substr(d+1);d>=0;--d)T>=0&&(a[i].v.charAt(d)==="0"||a[i].v.charAt(d)==="#")&&(S=w.charAt(T--)+S);a[i].v=S,a[i].t="t",F=i}for(T>=0&&F<a.length&&(a[F].v=w.substr(0,T+1)+a[F].v),T=w.indexOf(".")+1,i=_;i<a.length;++i)if(!(a[i]==null||"n?(".indexOf(a[i].t)===-1&&i!==_)){for(d=a[i].v.indexOf(".")>-1&&i===_?a[i].v.indexOf(".")+1:0,S=a[i].v.substr(0,d);d<a[i].v.length;++d)T<w.length&&(S+=w.charAt(T++));a[i].v=S,a[i].t="t",F=i}}}for(i=0;i<a.length;++i)a[i]!=null&&"n?".indexOf(a[i].t)>-1&&(B=n>1&&t<0&&i>0&&a[i-1].v==="-"?-t:t,a[i].v=rh(a[i].t,a[i].v,B),a[i].t="t");var M="";for(i=0;i!==a.length;++i)a[i]!=null&&(M+=a[i].v);return M}var EH=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function CH(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function I_e(e,t){var r=T_e(e),n=r.length,a=r[n-1].indexOf("@");if(n<4&&a>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||a>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=a>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=a>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=a>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var s=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,s];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(EH),o=r[1].match(EH);return CH(t,i)?[n,r[0]]:CH(t,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,s]}function Pu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Pr)[e],n==null&&(n=r.table&&r.table[bH[e]]||Pr[bH[e]]),n==null&&(n=h_e[e]||"General");break}if(WS(n,0))return tg(t,r);t instanceof Date&&(t=Xee(t,r.date1904));var a=I_e(n,t);if(WS(a[1]))return tg(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return j_e(a[1],t,r,a[0])}function nh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Pr[r]==null){t<0&&(t=r);continue}if(Pr[r]==e){t=r;break}}t<0&&(t=391)}return Pr[t]=e,t}function v4(e){for(var t=0;t!=392;++t)e[t]!==void 0&&nh(e[t],t)}function S1(){Pr=f_e()}var F_e={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},ste=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function O_e(e){var t=typeof e=="number"?Pr[e]:e;return t=t.replace(ste,"(\\d+)"),new RegExp("^"+t+"$")}function D_e(e,t,r){var n=-1,a=-1,s=-1,i=-1,o=-1,c=-1;(t.match(ste)||[]).forEach(function(f,h){var p=parseInt(r[h+1],10);switch(f.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":i=p;break;case"s":c=p;break;case"m":i>=0?o=p:a=p;break}}),c>=0&&o==-1&&a>=0&&(o=a,a=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(a>=1?a:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return i==-1&&o==-1&&c==-1?u:n==-1&&a==-1&&s==-1?d:u+"T"+d}var P_e=function(){var e={};e.version="1.2.0";function t(){for(var w=0,_=new Array(256),F=0;F!=256;++F)w=F,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,w=w&1?-306674912^w>>>1:w>>>1,_[F]=w;return typeof Int32Array<"u"?new Int32Array(_):_}var r=t();function n(w){var _=0,F=0,M=0,D=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(M=0;M!=256;++M)D[M]=w[M];for(M=0;M!=256;++M)for(F=w[M],_=256+M;_<4096;_+=256)F=D[_]=F>>>8^w[F&255];var I=[];for(M=1;M!=16;++M)I[M-1]=typeof Int32Array<"u"?D.subarray(M*256,M*256+256):D.slice(M*256,M*256+256);return I}var a=n(r),s=a[0],i=a[1],o=a[2],c=a[3],u=a[4],d=a[5],f=a[6],h=a[7],p=a[8],g=a[9],v=a[10],b=a[11],y=a[12],C=a[13],N=a[14];function T(w,_){for(var F=_^-1,M=0,D=w.length;M<D;)F=F>>>8^r[(F^w.charCodeAt(M++))&255];return~F}function S(w,_){for(var F=_^-1,M=w.length-15,D=0;D<M;)F=N[w[D++]^F&255]^C[w[D++]^F>>8&255]^y[w[D++]^F>>16&255]^b[w[D++]^F>>>24]^v[w[D++]]^g[w[D++]]^p[w[D++]]^h[w[D++]]^f[w[D++]]^d[w[D++]]^u[w[D++]]^c[w[D++]]^o[w[D++]]^i[w[D++]]^s[w[D++]]^r[w[D++]];for(M+=15;D<M;)F=F>>>8^r[(F^w[D++])&255];return~F}function B(w,_){for(var F=_^-1,M=0,D=w.length,I=0,U=0;M<D;)I=w.charCodeAt(M++),I<128?F=F>>>8^r[(F^I)&255]:I<2048?(F=F>>>8^r[(F^(192|I>>6&31))&255],F=F>>>8^r[(F^(128|I&63))&255]):I>=55296&&I<57344?(I=(I&1023)+64,U=w.charCodeAt(M++)&1023,F=F>>>8^r[(F^(240|I>>8&7))&255],F=F>>>8^r[(F^(128|I>>2&63))&255],F=F>>>8^r[(F^(128|U>>6&15|(I&3)<<4))&255],F=F>>>8^r[(F^(128|U&63))&255]):(F=F>>>8^r[(F^(224|I>>12&15))&255],F=F>>>8^r[(F^(128|I>>6&63))&255],F=F>>>8^r[(F^(128|I&63))&255]);return~F}return e.table=r,e.bstr=T,e.buf=S,e.str=B,e}(),Cr=function(){var t={};t.version="1.2.1";function r(fe,Be){for(var Ee=fe.split("/"),Ce=Be.split("/"),Ne=0,Te=0,Ye=Math.min(Ee.length,Ce.length);Ne<Ye;++Ne){if(Te=Ee[Ne].length-Ce[Ne].length)return Te;if(Ee[Ne]!=Ce[Ne])return Ee[Ne]<Ce[Ne]?-1:1}return Ee.length-Ce.length}function n(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:n(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(0,Be+1)}function a(fe){if(fe.charAt(fe.length-1)=="/")return a(fe.slice(0,-1));var Be=fe.lastIndexOf("/");return Be===-1?fe:fe.slice(Be+1)}function s(fe,Be){typeof Be=="string"&&(Be=new Date(Be));var Ee=Be.getHours();Ee=Ee<<6|Be.getMinutes(),Ee=Ee<<5|Be.getSeconds()>>>1,fe.write_shift(2,Ee);var Ce=Be.getFullYear()-1980;Ce=Ce<<4|Be.getMonth()+1,Ce=Ce<<5|Be.getDate(),fe.write_shift(2,Ce)}function i(fe){var Be=fe.read_shift(2)&65535,Ee=fe.read_shift(2)&65535,Ce=new Date,Ne=Ee&31;Ee>>>=5;var Te=Ee&15;Ee>>>=4,Ce.setMilliseconds(0),Ce.setFullYear(Ee+1980),Ce.setMonth(Te-1),Ce.setDate(Ne);var Ye=Be&31;Be>>>=5;var ut=Be&63;return Be>>>=6,Ce.setHours(Be),Ce.setMinutes(ut),Ce.setSeconds(Ye<<1),Ce}function o(fe){po(fe,0);for(var Be={},Ee=0;fe.l<=fe.length-4;){var Ce=fe.read_shift(2),Ne=fe.read_shift(2),Te=fe.l+Ne,Ye={};switch(Ce){case 21589:Ee=fe.read_shift(1),Ee&1&&(Ye.mtime=fe.read_shift(4)),Ne>5&&(Ee&2&&(Ye.atime=fe.read_shift(4)),Ee&4&&(Ye.ctime=fe.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break}fe.l=Te,Be[Ce]=Ye}return Be}var c;function u(){return c||(c={})}function d(fe,Be){if(fe[0]==80&&fe[1]==75)return pt(fe,Be);if((fe[0]|32)==109&&(fe[1]|32)==105)return bn(fe,Be);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Ee=3,Ce=512,Ne=0,Te=0,Ye=0,ut=0,$e=0,tt=[],at=fe.slice(0,512);po(at,0);var jt=f(at);switch(Ee=jt[0],Ee){case 3:Ce=512;break;case 4:Ce=4096;break;case 0:if(jt[1]==0)return pt(fe,Be);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ee)}Ce!==512&&(at=fe.slice(0,Ce),po(at,28));var Vt=fe.slice(0,Ce);h(at,Ee);var Jt=at.read_shift(4,"i");if(Ee===3&&Jt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Jt);at.l+=4,Ye=at.read_shift(4,"i"),at.l+=4,at.chk("00100000","Mini Stream Cutoff Size: "),ut=at.read_shift(4,"i"),Ne=at.read_shift(4,"i"),$e=at.read_shift(4,"i"),Te=at.read_shift(4,"i");for(var Ht=-1,Gt=0;Gt<109&&(Ht=at.read_shift(4,"i"),!(Ht<0));++Gt)tt[Gt]=Ht;var Sr=p(fe,Ce);b($e,Te,Sr,Ce,tt);var sn=C(Sr,Ye,tt,Ce);sn[Ye].name="!Directory",Ne>0&&ut!==U&&(sn[ut].name="!MiniFAT"),sn[tt[0]].name="!FAT",sn.fat_addrs=tt,sn.ssz=Ce;var on={},An=[],ms=[],bo=[];N(Ye,sn,Sr,An,Ne,on,ms,ut),g(ms,bo,An),An.shift();var ps={FileIndex:ms,FullPaths:bo};return Be&&Be.raw&&(ps.raw={header:Vt,sectors:Sr}),ps}function f(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(P,"Header Signature: "),fe.l+=16;var Be=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Be]}function h(fe,Be){var Ee=9;switch(fe.l+=2,Ee=fe.read_shift(2)){case 9:if(Be!=3)throw new Error("Sector Shift: Expected 9 saw "+Ee);break;case 12:if(Be!=4)throw new Error("Sector Shift: Expected 12 saw "+Ee);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ee)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function p(fe,Be){for(var Ee=Math.ceil(fe.length/Be)-1,Ce=[],Ne=1;Ne<Ee;++Ne)Ce[Ne-1]=fe.slice(Ne*Be,(Ne+1)*Be);return Ce[Ee-1]=fe.slice(Ee*Be),Ce}function g(fe,Be,Ee){for(var Ce=0,Ne=0,Te=0,Ye=0,ut=0,$e=Ee.length,tt=[],at=[];Ce<$e;++Ce)tt[Ce]=at[Ce]=Ce,Be[Ce]=Ee[Ce];for(;ut<at.length;++ut)Ce=at[ut],Ne=fe[Ce].L,Te=fe[Ce].R,Ye=fe[Ce].C,tt[Ce]===Ce&&(Ne!==-1&&tt[Ne]!==Ne&&(tt[Ce]=tt[Ne]),Te!==-1&&tt[Te]!==Te&&(tt[Ce]=tt[Te])),Ye!==-1&&(tt[Ye]=Ce),Ne!==-1&&Ce!=tt[Ce]&&(tt[Ne]=tt[Ce],at.lastIndexOf(Ne)<ut&&at.push(Ne)),Te!==-1&&Ce!=tt[Ce]&&(tt[Te]=tt[Ce],at.lastIndexOf(Te)<ut&&at.push(Te));for(Ce=1;Ce<$e;++Ce)tt[Ce]===Ce&&(Te!==-1&&tt[Te]!==Te?tt[Ce]=tt[Te]:Ne!==-1&&tt[Ne]!==Ne&&(tt[Ce]=tt[Ne]));for(Ce=1;Ce<$e;++Ce)if(fe[Ce].type!==0){if(ut=Ce,ut!=tt[ut])do ut=tt[ut],Be[Ce]=Be[ut]+"/"+Be[Ce];while(ut!==0&&tt[ut]!==-1&&ut!=tt[ut]);tt[Ce]=-1}for(Be[0]+="/",Ce=1;Ce<$e;++Ce)fe[Ce].type!==2&&(Be[Ce]+="/")}function v(fe,Be,Ee){for(var Ce=fe.start,Ne=fe.size,Te=[],Ye=Ce;Ee&&Ne>0&&Ye>=0;)Te.push(Be.slice(Ye*I,Ye*I+I)),Ne-=I,Ye=bp(Ee,Ye*4);return Te.length===0?wt(0):Ki(Te).slice(0,fe.size)}function b(fe,Be,Ee,Ce,Ne){var Te=U;if(fe===U){if(Be!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var Ye=Ee[fe],ut=(Ce>>>2)-1;if(!Ye)return;for(var $e=0;$e<ut&&(Te=bp(Ye,$e*4))!==U;++$e)Ne.push(Te);b(bp(Ye,Ce-4),Be-1,Ee,Ce,Ne)}}function y(fe,Be,Ee,Ce,Ne){var Te=[],Ye=[];Ne||(Ne=[]);var ut=Ce-1,$e=0,tt=0;for($e=Be;$e>=0;){Ne[$e]=!0,Te[Te.length]=$e,Ye.push(fe[$e]);var at=Ee[Math.floor($e*4/Ce)];if(tt=$e*4&ut,Ce<4+tt)throw new Error("FAT boundary crossed: "+$e+" 4 "+Ce);if(!fe[at])break;$e=bp(fe[at],tt)}return{nodes:Te,data:PH([Ye])}}function C(fe,Be,Ee,Ce){var Ne=fe.length,Te=[],Ye=[],ut=[],$e=[],tt=Ce-1,at=0,jt=0,Vt=0,Jt=0;for(at=0;at<Ne;++at)if(ut=[],Vt=at+Be,Vt>=Ne&&(Vt-=Ne),!Ye[Vt]){$e=[];var Ht=[];for(jt=Vt;jt>=0;){Ht[jt]=!0,Ye[jt]=!0,ut[ut.length]=jt,$e.push(fe[jt]);var Gt=Ee[Math.floor(jt*4/Ce)];if(Jt=jt*4&tt,Ce<4+Jt)throw new Error("FAT boundary crossed: "+jt+" 4 "+Ce);if(!fe[Gt]||(jt=bp(fe[Gt],Jt),Ht[jt]))break}Te[Vt]={nodes:ut,data:PH([$e])}}return Te}function N(fe,Be,Ee,Ce,Ne,Te,Ye,ut){for(var $e=0,tt=Ce.length?2:0,at=Be[fe].data,jt=0,Vt=0,Jt;jt<at.length;jt+=128){var Ht=at.slice(jt,jt+128);po(Ht,64),Vt=Ht.read_shift(2),Jt=jP(Ht,0,Vt-tt),Ce.push(Jt);var Gt={name:Jt,type:Ht.read_shift(1),color:Ht.read_shift(1),L:Ht.read_shift(4,"i"),R:Ht.read_shift(4,"i"),C:Ht.read_shift(4,"i"),clsid:Ht.read_shift(16),state:Ht.read_shift(4,"i"),start:0,size:0},Sr=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);Sr!==0&&(Gt.ct=T(Ht,Ht.l-8));var sn=Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2)+Ht.read_shift(2);sn!==0&&(Gt.mt=T(Ht,Ht.l-8)),Gt.start=Ht.read_shift(4,"i"),Gt.size=Ht.read_shift(4,"i"),Gt.size<0&&Gt.start<0&&(Gt.size=Gt.type=0,Gt.start=U,Gt.name=""),Gt.type===5?($e=Gt.start,Ne>0&&$e!==U&&(Be[$e].name="!StreamData")):Gt.size>=4096?(Gt.storage="fat",Be[Gt.start]===void 0&&(Be[Gt.start]=y(Ee,Gt.start,Be.fat_addrs,Be.ssz)),Be[Gt.start].name=Gt.name,Gt.content=Be[Gt.start].data.slice(0,Gt.size)):(Gt.storage="minifat",Gt.size<0?Gt.size=0:$e!==U&&Gt.start!==U&&Be[$e]&&(Gt.content=v(Gt,Be[$e].data,(Be[ut]||{}).data))),Gt.content&&po(Gt.content,0),Te[Jt]=Gt,Ye.push(Gt)}}function T(fe,Be){return new Date((Sc(fe,Be+4)/1e7*Math.pow(2,32)+Sc(fe,Be)/1e7-11644473600)*1e3)}function S(fe,Be){return u(),d(c.readFileSync(fe),Be)}function B(fe,Be){var Ee=Be&&Be.type;switch(Ee||pn&&Buffer.isBuffer(fe)&&(Ee="buffer"),Ee||"base64"){case"file":return S(fe,Be);case"base64":return d(Bc(Pc(fe)),Be);case"binary":return d(Bc(fe),Be)}return d(fe,Be)}function w(fe,Be){var Ee=Be||{},Ce=Ee.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=Ce+"/",fe.FileIndex[0]={name:Ce,type:5}),Ee.CLSID&&(fe.FileIndex[0].clsid=Ee.CLSID),_(fe)}function _(fe){var Be="Sh33tJ5";if(!Cr.find(fe,"/"+Be)){var Ee=wt(4);Ee[0]=55,Ee[1]=Ee[3]=50,Ee[2]=54,fe.FileIndex.push({name:Be,type:2,content:Ee,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Be),F(fe)}}function F(fe,Be){w(fe);for(var Ee=!1,Ce=!1,Ne=fe.FullPaths.length-1;Ne>=0;--Ne){var Te=fe.FileIndex[Ne];switch(Te.type){case 0:Ce?Ee=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:Ce=!0,isNaN(Te.R*Te.L*Te.C)&&(Ee=!0),Te.R>-1&&Te.L>-1&&Te.R==Te.L&&(Ee=!0);break;default:Ee=!0;break}}if(!(!Ee&&!Be)){var Ye=new Date(1987,1,19),ut=0,$e=Object.create?Object.create(null):{},tt=[];for(Ne=0;Ne<fe.FullPaths.length;++Ne)$e[fe.FullPaths[Ne]]=!0,fe.FileIndex[Ne].type!==0&&tt.push([fe.FullPaths[Ne],fe.FileIndex[Ne]]);for(Ne=0;Ne<tt.length;++Ne){var at=n(tt[Ne][0]);Ce=$e[at],Ce||(tt.push([at,{name:a(at).replace("/",""),type:1,clsid:H,ct:Ye,mt:Ye,content:null}]),$e[at]=!0)}for(tt.sort(function(Jt,Ht){return r(Jt[0],Ht[0])}),fe.FullPaths=[],fe.FileIndex=[],Ne=0;Ne<tt.length;++Ne)fe.FullPaths[Ne]=tt[Ne][0],fe.FileIndex[Ne]=tt[Ne][1];for(Ne=0;Ne<tt.length;++Ne){var jt=fe.FileIndex[Ne],Vt=fe.FullPaths[Ne];if(jt.name=a(Vt).replace("/",""),jt.L=jt.R=jt.C=-(jt.color=1),jt.size=jt.content?jt.content.length:0,jt.start=0,jt.clsid=jt.clsid||H,Ne===0)jt.C=tt.length>1?1:-1,jt.size=0,jt.type=5;else if(Vt.slice(-1)=="/"){for(ut=Ne+1;ut<tt.length&&n(fe.FullPaths[ut])!=Vt;++ut);for(jt.C=ut>=tt.length?-1:ut,ut=Ne+1;ut<tt.length&&n(fe.FullPaths[ut])!=n(Vt);++ut);jt.R=ut>=tt.length?-1:ut,jt.type=1}else n(fe.FullPaths[Ne+1]||"")==n(Vt)&&(jt.R=Ne+1),jt.type=2}}}function M(fe,Be){var Ee=Be||{};if(Ee.fileType=="mad")return $t(fe,Ee);switch(F(fe),Ee.fileType){case"zip":return gt(fe,Ee)}var Ce=function(Jt){for(var Ht=0,Gt=0,Sr=0;Sr<Jt.FileIndex.length;++Sr){var sn=Jt.FileIndex[Sr];if(sn.content){var on=sn.content.length;on>0&&(on<4096?Ht+=on+63>>6:Gt+=on+511>>9)}}for(var An=Jt.FullPaths.length+3>>2,ms=Ht+7>>3,bo=Ht+127>>7,ps=ms+Gt+An+bo,Zs=ps+127>>7,Fs=Zs<=109?0:Math.ceil((Zs-109)/127);ps+Zs+Fs+127>>7>Zs;)Fs=++Zs<=109?0:Math.ceil((Zs-109)/127);var gi=[1,Fs,Zs,bo,An,Gt,Ht,0];return Jt.FileIndex[0].size=Ht<<6,gi[7]=(Jt.FileIndex[0].start=gi[0]+gi[1]+gi[2]+gi[3]+gi[4]+gi[5])+(gi[6]+7>>3),gi}(fe),Ne=wt(Ce[7]<<9),Te=0,Ye=0;{for(Te=0;Te<8;++Te)Ne.write_shift(1,X[Te]);for(Te=0;Te<8;++Te)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),Te=0;Te<3;++Te)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,Ce[2]),Ne.write_shift(4,Ce[0]+Ce[1]+Ce[2]+Ce[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,Ce[3]?Ce[0]+Ce[1]+Ce[2]-1:U),Ne.write_shift(4,Ce[3]),Ne.write_shift(-4,Ce[1]?Ce[0]-1:U),Ne.write_shift(4,Ce[1]),Te=0;Te<109;++Te)Ne.write_shift(-4,Te<Ce[2]?Ce[1]+Te:-1)}if(Ce[1])for(Ye=0;Ye<Ce[1];++Ye){for(;Te<236+Ye*127;++Te)Ne.write_shift(-4,Te<Ce[2]?Ce[1]+Te:-1);Ne.write_shift(-4,Ye===Ce[1]-1?U:Ye+1)}var ut=function(Jt){for(Ye+=Jt;Te<Ye-1;++Te)Ne.write_shift(-4,Te+1);Jt&&(++Te,Ne.write_shift(-4,U))};for(Ye=Te=0,Ye+=Ce[1];Te<Ye;++Te)Ne.write_shift(-4,Y.DIFSECT);for(Ye+=Ce[2];Te<Ye;++Te)Ne.write_shift(-4,Y.FATSECT);ut(Ce[3]),ut(Ce[4]);for(var $e=0,tt=0,at=fe.FileIndex[0];$e<fe.FileIndex.length;++$e)at=fe.FileIndex[$e],at.content&&(tt=at.content.length,!(tt<4096)&&(at.start=Ye,ut(tt+511>>9)));for(ut(Ce[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,Y.ENDOFCHAIN);for(Ye=Te=0,$e=0;$e<fe.FileIndex.length;++$e)at=fe.FileIndex[$e],at.content&&(tt=at.content.length,!(!tt||tt>=4096)&&(at.start=Ye,ut(tt+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,Y.ENDOFCHAIN);for(Te=0;Te<Ce[4]<<2;++Te){var jt=fe.FullPaths[Te];if(!jt||jt.length===0){for($e=0;$e<17;++$e)Ne.write_shift(4,0);for($e=0;$e<3;++$e)Ne.write_shift(4,-1);for($e=0;$e<12;++$e)Ne.write_shift(4,0);continue}at=fe.FileIndex[Te],Te===0&&(at.start=at.size?at.start-1:U);var Vt=Te===0&&Ee.root||at.name;if(tt=2*(Vt.length+1),Ne.write_shift(64,Vt,"utf16le"),Ne.write_shift(2,tt),Ne.write_shift(1,at.type),Ne.write_shift(1,at.color),Ne.write_shift(-4,at.L),Ne.write_shift(-4,at.R),Ne.write_shift(-4,at.C),at.clsid)Ne.write_shift(16,at.clsid,"hex");else for($e=0;$e<4;++$e)Ne.write_shift(4,0);Ne.write_shift(4,at.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,at.start),Ne.write_shift(4,at.size),Ne.write_shift(4,0)}for(Te=1;Te<fe.FileIndex.length;++Te)if(at=fe.FileIndex[Te],at.size>=4096)if(Ne.l=at.start+1<<9,pn&&Buffer.isBuffer(at.content))at.content.copy(Ne,Ne.l,0,at.size),Ne.l+=at.size+511&-512;else{for($e=0;$e<at.size;++$e)Ne.write_shift(1,at.content[$e]);for(;$e&511;++$e)Ne.write_shift(1,0)}for(Te=1;Te<fe.FileIndex.length;++Te)if(at=fe.FileIndex[Te],at.size>0&&at.size<4096)if(pn&&Buffer.isBuffer(at.content))at.content.copy(Ne,Ne.l,0,at.size),Ne.l+=at.size+63&-64;else{for($e=0;$e<at.size;++$e)Ne.write_shift(1,at.content[$e]);for(;$e&63;++$e)Ne.write_shift(1,0)}if(pn)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function D(fe,Be){var Ee=fe.FullPaths.map(function($e){return $e.toUpperCase()}),Ce=Ee.map(function($e){var tt=$e.split("/");return tt[tt.length-($e.slice(-1)=="/"?2:1)]}),Ne=!1;Be.charCodeAt(0)===47?(Ne=!0,Be=Ee[0].slice(0,-1)+Be):Ne=Be.indexOf("/")!==-1;var Te=Be.toUpperCase(),Ye=Ne===!0?Ee.indexOf(Te):Ce.indexOf(Te);if(Ye!==-1)return fe.FileIndex[Ye];var ut=!Te.match(fy);for(Te=Te.replace(bl,""),ut&&(Te=Te.replace(fy,"!")),Ye=0;Ye<Ee.length;++Ye)if((ut?Ee[Ye].replace(fy,"!"):Ee[Ye]).replace(bl,"")==Te||(ut?Ce[Ye].replace(fy,"!"):Ce[Ye]).replace(bl,"")==Te)return fe.FileIndex[Ye];return null}var I=64,U=-2,P="d0cf11e0a1b11ae1",X=[208,207,17,224,161,177,26,225],H="00000000000000000000000000000000",Y={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:U,FREESECT:-1,HEADER_SIGNATURE:P,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:H,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function V(fe,Be,Ee){u();var Ce=M(fe,Ee);c.writeFileSync(Be,Ce)}function z(fe){for(var Be=new Array(fe.length),Ee=0;Ee<fe.length;++Ee)Be[Ee]=String.fromCharCode(fe[Ee]);return Be.join("")}function G(fe,Be){var Ee=M(fe,Be);switch(Be&&Be.type||"buffer"){case"file":return u(),c.writeFileSync(Be.filename,Ee),Ee;case"binary":return typeof Ee=="string"?Ee:z(Ee);case"base64":return yw(typeof Ee=="string"?Ee:z(Ee));case"buffer":if(pn)return Buffer.isBuffer(Ee)?Ee:Bh(Ee);case"array":return typeof Ee=="string"?Bc(Ee):Ee}return Ee}var re;function R(fe){try{var Be=fe.InflateRaw,Ee=new Be;if(Ee._processChunk(new Uint8Array([3,0]),Ee._finishFlushFlag),Ee.bytesRead)re=fe;else throw new Error("zlib does not expose bytesRead")}catch(Ce){console.error("cannot use native zlib: "+(Ce.message||Ce))}}function q(fe,Be){if(!re)return Fr(fe,Be);var Ee=re.InflateRaw,Ce=new Ee,Ne=Ce._processChunk(fe.slice(fe.l),Ce._finishFlushFlag);return fe.l+=Ce.bytesRead,Ne}function J(fe){return re?re.deflateRawSync(fe):Qt(fe)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function oe(fe){var Be=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Be>>16|Be>>8|Be)&255}for(var ce=typeof Uint8Array<"u",pe=ce?new Uint8Array(256):[],Ie=0;Ie<256;++Ie)pe[Ie]=oe(Ie);function ne(fe,Be){var Ee=pe[fe&255];return Be<=8?Ee>>>8-Be:(Ee=Ee<<8|pe[fe>>8&255],Be<=16?Ee>>>16-Be:(Ee=Ee<<8|pe[fe>>16&255],Ee>>>24-Be))}function Se(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=6?0:fe[Ce+1]<<8))>>>Ee&3}function De(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=5?0:fe[Ce+1]<<8))>>>Ee&7}function _e(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=4?0:fe[Ce+1]<<8))>>>Ee&15}function he(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=3?0:fe[Ce+1]<<8))>>>Ee&31}function je(fe,Be){var Ee=Be&7,Ce=Be>>>3;return(fe[Ce]|(Ee<=1?0:fe[Ce+1]<<8))>>>Ee&127}function He(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3,Te=(1<<Ee)-1,Ye=fe[Ne]>>>Ce;return Ee<8-Ce||(Ye|=fe[Ne+1]<<8-Ce,Ee<16-Ce)||(Ye|=fe[Ne+2]<<16-Ce,Ee<24-Ce)||(Ye|=fe[Ne+3]<<24-Ce),Ye&Te}function Xe(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ce<=5?fe[Ne]|=(Ee&7)<<Ce:(fe[Ne]|=Ee<<Ce&255,fe[Ne+1]=(Ee&7)>>8-Ce),Be+3}function ye(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee=(Ee&1)<<Ce,fe[Ne]|=Ee,Be+1}function Oe(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee<<=Ce,fe[Ne]|=Ee&255,Ee>>>=8,fe[Ne+1]=Ee,Be+8}function Re(fe,Be,Ee){var Ce=Be&7,Ne=Be>>>3;return Ee<<=Ce,fe[Ne]|=Ee&255,Ee>>>=8,fe[Ne+1]=Ee&255,fe[Ne+2]=Ee>>>8,Be+16}function qe(fe,Be){var Ee=fe.length,Ce=2*Ee>Be?2*Ee:Be+5,Ne=0;if(Ee>=Be)return fe;if(pn){var Te=gH(Ce);if(fe.copy)fe.copy(Te);else for(;Ne<fe.length;++Ne)Te[Ne]=fe[Ne];return Te}else if(ce){var Ye=new Uint8Array(Ce);if(Ye.set)Ye.set(fe);else for(;Ne<Ee;++Ne)Ye[Ne]=fe[Ne];return Ye}return fe.length=Ce,fe}function Ze(fe){for(var Be=new Array(fe),Ee=0;Ee<fe;++Ee)Be[Ee]=0;return Be}function ot(fe,Be,Ee){var Ce=1,Ne=0,Te=0,Ye=0,ut=0,$e=fe.length,tt=ce?new Uint16Array(32):Ze(32);for(Te=0;Te<32;++Te)tt[Te]=0;for(Te=$e;Te<Ee;++Te)fe[Te]=0;$e=fe.length;var at=ce?new Uint16Array($e):Ze($e);for(Te=0;Te<$e;++Te)tt[Ne=fe[Te]]++,Ce<Ne&&(Ce=Ne),at[Te]=0;for(tt[0]=0,Te=1;Te<=Ce;++Te)tt[Te+16]=ut=ut+tt[Te-1]<<1;for(Te=0;Te<$e;++Te)ut=fe[Te],ut!=0&&(at[Te]=tt[ut+16]++);var jt=0;for(Te=0;Te<$e;++Te)if(jt=fe[Te],jt!=0)for(ut=ne(at[Te],Ce)>>Ce-jt,Ye=(1<<Ce+4-jt)-1;Ye>=0;--Ye)Be[ut|Ye<<jt]=jt&15|Te<<4;return Ce}var mt=ce?new Uint16Array(512):Ze(512),Tt=ce?new Uint16Array(32):Ze(32);if(!ce){for(var Mt=0;Mt<512;++Mt)mt[Mt]=0;for(Mt=0;Mt<32;++Mt)Tt[Mt]=0}(function(){for(var fe=[],Be=0;Be<32;Be++)fe.push(5);ot(fe,Tt,32);var Ee=[];for(Be=0;Be<=143;Be++)Ee.push(8);for(;Be<=255;Be++)Ee.push(9);for(;Be<=279;Be++)Ee.push(7);for(;Be<=287;Be++)Ee.push(8);ot(Ee,mt,288)})();var Dt=function(){for(var Be=ce?new Uint8Array(32768):[],Ee=0,Ce=0;Ee<Ae.length-1;++Ee)for(;Ce<Ae[Ee+1];++Ce)Be[Ce]=Ee;for(;Ce<32768;++Ce)Be[Ce]=29;var Ne=ce?new Uint8Array(259):[];for(Ee=0,Ce=0;Ee<ie.length-1;++Ee)for(;Ce<ie[Ee+1];++Ce)Ne[Ce]=Ee;function Te(ut,$e){for(var tt=0;tt<ut.length;){var at=Math.min(65535,ut.length-tt),jt=tt+at==ut.length;for($e.write_shift(1,+jt),$e.write_shift(2,at),$e.write_shift(2,~at&65535);at-- >0;)$e[$e.l++]=ut[tt++]}return $e.l}function Ye(ut,$e){for(var tt=0,at=0,jt=ce?new Uint16Array(32768):[];at<ut.length;){var Vt=Math.min(65535,ut.length-at);if(Vt<10){for(tt=Xe($e,tt,+(at+Vt==ut.length)),tt&7&&(tt+=8-(tt&7)),$e.l=tt/8|0,$e.write_shift(2,Vt),$e.write_shift(2,~Vt&65535);Vt-- >0;)$e[$e.l++]=ut[at++];tt=$e.l*8;continue}tt=Xe($e,tt,+(at+Vt==ut.length)+2);for(var Jt=0;Vt-- >0;){var Ht=ut[at];Jt=(Jt<<5^Ht)&32767;var Gt=-1,Sr=0;if((Gt=jt[Jt])&&(Gt|=at&-32768,Gt>at&&(Gt-=32768),Gt<at))for(;ut[Gt+Sr]==ut[at+Sr]&&Sr<250;)++Sr;if(Sr>2){Ht=Ne[Sr],Ht<=22?tt=Oe($e,tt,pe[Ht+1]>>1)-1:(Oe($e,tt,3),tt+=5,Oe($e,tt,pe[Ht-23]>>5),tt+=3);var sn=Ht<8?0:Ht-4>>2;sn>0&&(Re($e,tt,Sr-ie[Ht]),tt+=sn),Ht=Be[at-Gt],tt=Oe($e,tt,pe[Ht]>>3),tt-=3;var on=Ht<4?0:Ht-2>>1;on>0&&(Re($e,tt,at-Gt-Ae[Ht]),tt+=on);for(var An=0;An<Sr;++An)jt[Jt]=at&32767,Jt=(Jt<<5^ut[at])&32767,++at;Vt-=Sr-1}else Ht<=143?Ht=Ht+48:tt=ye($e,tt,1),tt=Oe($e,tt,pe[Ht]),jt[Jt]=at&32767,++at}tt=Oe($e,tt,0)-1}return $e.l=(tt+7)/8|0,$e.l}return function($e,tt){return $e.length<8?Te($e,tt):Ye($e,tt)}}();function Qt(fe){var Be=wt(50+Math.floor(fe.length*1.1)),Ee=Dt(fe,Be);return Be.slice(0,Ee)}var yt=ce?new Uint16Array(32768):Ze(32768),kr=ce?new Uint16Array(32768):Ze(32768),rr=ce?new Uint16Array(128):Ze(128),an=1,_r=1;function zr(fe,Be){var Ee=he(fe,Be)+257;Be+=5;var Ce=he(fe,Be)+1;Be+=5;var Ne=_e(fe,Be)+4;Be+=4;for(var Te=0,Ye=ce?new Uint8Array(19):Ze(19),ut=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],$e=1,tt=ce?new Uint8Array(8):Ze(8),at=ce?new Uint8Array(8):Ze(8),jt=Ye.length,Vt=0;Vt<Ne;++Vt)Ye[te[Vt]]=Te=De(fe,Be),$e<Te&&($e=Te),tt[Te]++,Be+=3;var Jt=0;for(tt[0]=0,Vt=1;Vt<=$e;++Vt)at[Vt]=Jt=Jt+tt[Vt-1]<<1;for(Vt=0;Vt<jt;++Vt)(Jt=Ye[Vt])!=0&&(ut[Vt]=at[Jt]++);var Ht=0;for(Vt=0;Vt<jt;++Vt)if(Ht=Ye[Vt],Ht!=0){Jt=pe[ut[Vt]]>>8-Ht;for(var Gt=(1<<7-Ht)-1;Gt>=0;--Gt)rr[Jt|Gt<<Ht]=Ht&7|Vt<<3}var Sr=[];for($e=1;Sr.length<Ee+Ce;)switch(Jt=rr[je(fe,Be)],Be+=Jt&7,Jt>>>=3){case 16:for(Te=3+Se(fe,Be),Be+=2,Jt=Sr[Sr.length-1];Te-- >0;)Sr.push(Jt);break;case 17:for(Te=3+De(fe,Be),Be+=3;Te-- >0;)Sr.push(0);break;case 18:for(Te=11+je(fe,Be),Be+=7;Te-- >0;)Sr.push(0);break;default:Sr.push(Jt),$e<Jt&&($e=Jt);break}var sn=Sr.slice(0,Ee),on=Sr.slice(Ee);for(Vt=Ee;Vt<286;++Vt)sn[Vt]=0;for(Vt=Ce;Vt<30;++Vt)on[Vt]=0;return an=ot(sn,yt,286),_r=ot(on,kr,30),Be}function Fn(fe,Be){if(fe[0]==3&&!(fe[1]&3))return[vm(Be),2];for(var Ee=0,Ce=0,Ne=gH(Be||1<<18),Te=0,Ye=Ne.length>>>0,ut=0,$e=0;(Ce&1)==0;){if(Ce=De(fe,Ee),Ee+=3,Ce>>>1)Ce>>1==1?(ut=9,$e=5):(Ee=zr(fe,Ee),ut=an,$e=_r);else{Ee&7&&(Ee+=8-(Ee&7));var tt=fe[Ee>>>3]|fe[(Ee>>>3)+1]<<8;if(Ee+=32,tt>0)for(!Be&&Ye<Te+tt&&(Ne=qe(Ne,Te+tt),Ye=Ne.length);tt-- >0;)Ne[Te++]=fe[Ee>>>3],Ee+=8;continue}for(;;){!Be&&Ye<Te+32767&&(Ne=qe(Ne,Te+32767),Ye=Ne.length);var at=He(fe,Ee,ut),jt=Ce>>>1==1?mt[at]:yt[at];if(Ee+=jt&15,jt>>>=4,(jt>>>8&255)===0)Ne[Te++]=jt;else{if(jt==256)break;jt-=257;var Vt=jt<8?0:jt-4>>2;Vt>5&&(Vt=0);var Jt=Te+ie[jt];Vt>0&&(Jt+=He(fe,Ee,Vt),Ee+=Vt),at=He(fe,Ee,$e),jt=Ce>>>1==1?Tt[at]:kr[at],Ee+=jt&15,jt>>>=4;var Ht=jt<4?0:jt-2>>1,Gt=Ae[jt];for(Ht>0&&(Gt+=He(fe,Ee,Ht),Ee+=Ht),!Be&&Ye<Jt&&(Ne=qe(Ne,Jt+100),Ye=Ne.length);Te<Jt;)Ne[Te]=Ne[Te-Gt],++Te}}}return Be?[Ne,Ee+7>>>3]:[Ne.slice(0,Te),Ee+7>>>3]}function Fr(fe,Be){var Ee=fe.slice(fe.l||0),Ce=Fn(Ee,Be);return fe.l+=Ce[1],Ce[0]}function vt(fe,Be){if(fe)typeof console<"u"&&console.error(Be);else throw new Error(Be)}function pt(fe,Be){var Ee=fe;po(Ee,0);var Ce=[],Ne=[],Te={FileIndex:Ce,FullPaths:Ne};w(Te,{root:Be.root});for(var Ye=Ee.length-4;(Ee[Ye]!=80||Ee[Ye+1]!=75||Ee[Ye+2]!=5||Ee[Ye+3]!=6)&&Ye>=0;)--Ye;Ee.l=Ye+4,Ee.l+=4;var ut=Ee.read_shift(2);Ee.l+=6;var $e=Ee.read_shift(4);for(Ee.l=$e,Ye=0;Ye<ut;++Ye){Ee.l+=20;var tt=Ee.read_shift(4),at=Ee.read_shift(4),jt=Ee.read_shift(2),Vt=Ee.read_shift(2),Jt=Ee.read_shift(2);Ee.l+=8;var Ht=Ee.read_shift(4),Gt=o(Ee.slice(Ee.l+jt,Ee.l+jt+Vt));Ee.l+=jt+Vt+Jt;var Sr=Ee.l;Ee.l=Ht+4,Je(Ee,tt,at,Te,Gt),Ee.l=Sr}return Te}function Je(fe,Be,Ee,Ce,Ne){fe.l+=2;var Te=fe.read_shift(2),Ye=fe.read_shift(2),ut=i(fe);if(Te&8257)throw new Error("Unsupported ZIP encryption");for(var $e=fe.read_shift(4),tt=fe.read_shift(4),at=fe.read_shift(4),jt=fe.read_shift(2),Vt=fe.read_shift(2),Jt="",Ht=0;Ht<jt;++Ht)Jt+=String.fromCharCode(fe[fe.l++]);if(Vt){var Gt=o(fe.slice(fe.l,fe.l+Vt));(Gt[21589]||{}).mt&&(ut=Gt[21589].mt),((Ne||{})[21589]||{}).mt&&(ut=Ne[21589].mt)}fe.l+=Vt;var Sr=fe.slice(fe.l,fe.l+tt);switch(Ye){case 8:Sr=q(fe,at);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var sn=!1;Te&8&&($e=fe.read_shift(4),$e==134695760&&($e=fe.read_shift(4),sn=!0),tt=fe.read_shift(4),at=fe.read_shift(4)),tt!=Be&&vt(sn,"Bad compressed size: "+Be+" != "+tt),at!=Ee&&vt(sn,"Bad uncompressed size: "+Ee+" != "+at),en(Ce,Jt,Sr,{unsafe:!0,mt:ut})}function gt(fe,Be){var Ee=Be||{},Ce=[],Ne=[],Te=wt(1),Ye=Ee.compression?8:0,ut=0,$e=0,tt=0,at=0,jt=0,Vt=fe.FullPaths[0],Jt=Vt,Ht=fe.FileIndex[0],Gt=[],Sr=0;for($e=1;$e<fe.FullPaths.length;++$e)if(Jt=fe.FullPaths[$e].slice(Vt.length),Ht=fe.FileIndex[$e],!(!Ht.size||!Ht.content||Jt=="Sh33tJ5")){var sn=at,on=wt(Jt.length);for(tt=0;tt<Jt.length;++tt)on.write_shift(1,Jt.charCodeAt(tt)&127);on=on.slice(0,on.l),Gt[jt]=P_e.buf(Ht.content,0);var An=Ht.content;Ye==8&&(An=J(An)),Te=wt(30),Te.write_shift(4,67324752),Te.write_shift(2,20),Te.write_shift(2,ut),Te.write_shift(2,Ye),Ht.mt?s(Te,Ht.mt):Te.write_shift(4,0),Te.write_shift(-4,Gt[jt]),Te.write_shift(4,An.length),Te.write_shift(4,Ht.content.length),Te.write_shift(2,on.length),Te.write_shift(2,0),at+=Te.length,Ce.push(Te),at+=on.length,Ce.push(on),at+=An.length,Ce.push(An),Te=wt(46),Te.write_shift(4,33639248),Te.write_shift(2,0),Te.write_shift(2,20),Te.write_shift(2,ut),Te.write_shift(2,Ye),Te.write_shift(4,0),Te.write_shift(-4,Gt[jt]),Te.write_shift(4,An.length),Te.write_shift(4,Ht.content.length),Te.write_shift(2,on.length),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(4,0),Te.write_shift(4,sn),Sr+=Te.l,Ne.push(Te),Sr+=on.length,Ne.push(on),++jt}return Te=wt(22),Te.write_shift(4,101010256),Te.write_shift(2,0),Te.write_shift(2,0),Te.write_shift(2,jt),Te.write_shift(2,jt),Te.write_shift(4,Sr),Te.write_shift(4,at),Te.write_shift(2,0),Ki([Ki(Ce),Ki(Ne),Te])}var dt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Pt(fe,Be){if(fe.ctype)return fe.ctype;var Ee=fe.name||"",Ce=Ee.match(/\.([^\.]+)$/);return Ce&&dt[Ce[1]]||Be&&(Ce=(Ee=Be).match(/[\.\\]([^\.\\])+$/),Ce&&dt[Ce[1]])?dt[Ce[1]]:"application/octet-stream"}function zt(fe){for(var Be=yw(fe),Ee=[],Ce=0;Ce<Be.length;Ce+=76)Ee.push(Be.slice(Ce,Ce+76));return Ee.join(`\r
`)+`\r
`}function Lr(fe){var Be=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(tt){var at=tt.charCodeAt(0).toString(16).toUpperCase();return"="+(at.length==1?"0"+at:at)});Be=Be.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Be.charAt(0)==`
`&&(Be="=0D"+Be.slice(1)),Be=Be.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ee=[],Ce=Be.split(`\r
`),Ne=0;Ne<Ce.length;++Ne){var Te=Ce[Ne];if(Te.length==0){Ee.push("");continue}for(var Ye=0;Ye<Te.length;){var ut=76,$e=Te.slice(Ye,Ye+ut);$e.charAt(ut-1)=="="?ut--:$e.charAt(ut-2)=="="?ut-=2:$e.charAt(ut-3)=="="&&(ut-=3),$e=Te.slice(Ye,Ye+ut),Ye+=ut,Ye<Te.length&&($e+="="),Ee.push($e)}}return Ee.join(`\r
`)}function Xr(fe){for(var Be=[],Ee=0;Ee<fe.length;++Ee){for(var Ce=fe[Ee];Ee<=fe.length&&Ce.charAt(Ce.length-1)=="=";)Ce=Ce.slice(0,Ce.length-1)+fe[++Ee];Be.push(Ce)}for(var Ne=0;Ne<Be.length;++Ne)Be[Ne]=Be[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(Te){return String.fromCharCode(parseInt(Te.slice(1),16))});return Bc(Be.join(`\r
`))}function xn(fe,Be,Ee){for(var Ce="",Ne="",Te="",Ye,ut=0;ut<10;++ut){var $e=Be[ut];if(!$e||$e.match(/^\s*$/))break;var tt=$e.match(/^(.*?):\s*([^\s].*)$/);if(tt)switch(tt[1].toLowerCase()){case"content-location":Ce=tt[2].trim();break;case"content-type":Te=tt[2].trim();break;case"content-transfer-encoding":Ne=tt[2].trim();break}}switch(++ut,Ne.toLowerCase()){case"base64":Ye=Bc(Pc(Be.slice(ut).join("")));break;case"quoted-printable":Ye=Xr(Be.slice(ut));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var at=en(fe,Ce.slice(Ee.length),Ye,{unsafe:!0});Te&&(at.ctype=Te)}function bn(fe,Be){if(z(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ee=Be&&Be.root||"",Ce=(pn&&Buffer.isBuffer(fe)?fe.toString("binary"):z(fe)).split(`\r
`),Ne=0,Te="";for(Ne=0;Ne<Ce.length;++Ne)if(Te=Ce[Ne],!!/^Content-Location:/i.test(Te)&&(Te=Te.slice(Te.indexOf("file")),Ee||(Ee=Te.slice(0,Te.lastIndexOf("/")+1)),Te.slice(0,Ee.length)!=Ee))for(;Ee.length>0&&(Ee=Ee.slice(0,Ee.length-1),Ee=Ee.slice(0,Ee.lastIndexOf("/")+1),Te.slice(0,Ee.length)!=Ee););var Ye=(Ce[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var ut="--"+(Ye[1]||""),$e=[],tt=[],at={FileIndex:$e,FullPaths:tt};w(at);var jt,Vt=0;for(Ne=0;Ne<Ce.length;++Ne){var Jt=Ce[Ne];Jt!==ut&&Jt!==ut+"--"||(Vt++&&xn(at,Ce.slice(jt,Ne),Ee),jt=Ne)}return at}function $t(fe,Be){var Ee=Be||{},Ce=Ee.boundary||"SheetJS";Ce="------="+Ce;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ce.slice(2)+'"',"","",""],Te=fe.FullPaths[0],Ye=Te,ut=fe.FileIndex[0],$e=1;$e<fe.FullPaths.length;++$e)if(Ye=fe.FullPaths[$e].slice(Te.length),ut=fe.FileIndex[$e],!(!ut.size||!ut.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Sr){return"_x"+Sr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Sr){return"_u"+Sr.charCodeAt(0).toString(16)+"_"});for(var tt=ut.content,at=pn&&Buffer.isBuffer(tt)?tt.toString("binary"):z(tt),jt=0,Vt=Math.min(1024,at.length),Jt=0,Ht=0;Ht<=Vt;++Ht)(Jt=at.charCodeAt(Ht))>=32&&Jt<128&&++jt;var Gt=jt>=Vt*4/5;Ne.push(Ce),Ne.push("Content-Location: "+(Ee.root||"file:///C:/SheetJS/")+Ye),Ne.push("Content-Transfer-Encoding: "+(Gt?"quoted-printable":"base64")),Ne.push("Content-Type: "+Pt(ut,Ye)),Ne.push(""),Ne.push(Gt?Lr(at):zt(at))}return Ne.push(Ce+`--\r
`),Ne.join(`\r
`)}function rn(fe){var Be={};return w(Be,fe),Be}function en(fe,Be,Ee,Ce){var Ne=Ce&&Ce.unsafe;Ne||w(fe);var Te=!Ne&&Cr.find(fe,Be);if(!Te){var Ye=fe.FullPaths[0];Be.slice(0,Ye.length)==Ye?Ye=Be:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+Be).replace("//","/")),Te={name:a(Be),type:2},fe.FileIndex.push(Te),fe.FullPaths.push(Ye),Ne||Cr.utils.cfb_gc(fe)}return Te.content=Ee,Te.size=Ee?Ee.length:0,Ce&&(Ce.CLSID&&(Te.clsid=Ce.CLSID),Ce.mt&&(Te.mt=Ce.mt),Ce.ct&&(Te.ct=Ce.ct)),Te}function dr(fe,Be){w(fe);var Ee=Cr.find(fe,Be);if(Ee){for(var Ce=0;Ce<fe.FileIndex.length;++Ce)if(fe.FileIndex[Ce]==Ee)return fe.FileIndex.splice(Ce,1),fe.FullPaths.splice(Ce,1),!0}return!1}function Yr(fe,Be,Ee){w(fe);var Ce=Cr.find(fe,Be);if(Ce){for(var Ne=0;Ne<fe.FileIndex.length;++Ne)if(fe.FileIndex[Ne]==Ce)return fe.FileIndex[Ne].name=a(Ee),fe.FullPaths[Ne]=Ee,!0}return!1}function ra(fe){F(fe,!0)}return t.find=D,t.read=B,t.parse=d,t.write=G,t.writeFile=V,t.utils={cfb_new:rn,cfb_add:en,cfb_del:dr,cfb_mov:Yr,cfb_gc:ra,ReadShift:Qy,CheckField:Nte,prep_blob:po,bconcat:Ki,use_zlib:R,_deflateRaw:Qt,_inflateRaw:Fr,consts:Y},t}();function R_e(e){return typeof e=="string"?g4(e):Array.isArray(e)?c_e(e):e}function y2(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=g4(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?RA(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var a=new Blob([R_e(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(a,e);if(typeof saveAs<"u")return saveAs(a,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(a);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:e,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=e,i.href=s,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(e);return o.open("w"),o.encoding="binary",Array.isArray(t)&&(t=Bm(t)),o.write(t),o.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function L_e(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Is(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function _H(e,t){for(var r=[],n=Is(e),a=0;a!==n.length;++a)r[e[n[a]][t]]==null&&(r[e[n[a]][t]]=n[a]);return r}function x4(e){for(var t=[],r=Is(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function b4(e){for(var t=[],r=Is(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function M_e(e){for(var t=[],r=Is(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var YS=new Date(1899,11,30,0,0,0);function Ni(e,t){var r=e.getTime(),n=YS.getTime()+(e.getTimezoneOffset()-YS.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var ite=new Date,U_e=YS.getTime()+(ite.getTimezoneOffset()-YS.getTimezoneOffset())*6e4,SH=ite.getTimezoneOffset();function y4(e){var t=new Date;return t.setTime(e*24*60*60*1e3+U_e),t.getTimezoneOffset()!==SH&&t.setTime(t.getTime()+(t.getTimezoneOffset()-SH)*6e4),t}function Q_e(e){var t=0,r=0,n=!1,a=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!a)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var s=1;s!=a.length;++s)if(a[s]){switch(r=1,s>3&&(n=!0),a[s].slice(a[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+a[s].slice(a[s].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(a[s],10)}return t}var NH=new Date("2017-02-19T19:06:09.000Z"),ote=isNaN(NH.getFullYear())?new Date("2/19/17"):NH,H_e=ote.getFullYear()==2017;function Ha(e,t){var r=new Date(e);if(H_e)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(ote.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var a=e.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+a[0],+a[1]-1,+a[2],+a[3]||0,+a[4]||0,+a[5]||0);return e.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function rg(e,t){if(pn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return RA(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return RA(qee(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return RA(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return RA(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(s){return r[s]||s})}catch{}for(var n=[],a=0;a!=e.length;++a)n.push(String.fromCharCode(e[a]));return n.join("")}function Va(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=Va(e[r]));return t}function Ss(e,t){for(var r="";r.length<t;)r+=e;return r}function Bd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(a,s){return r=-r,s}),!isNaN(t=Number(n)))?t/r:t}var V_e=["january","february","march","april","may","june","july","august","september","october","november","december"];function Mx(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),a=t.getMonth(),s=t.getDate();if(isNaN(s))return r;var i=e.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&V_e.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(a>0||s>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var z_e=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,a){if(e||typeof n=="string")return r.split(n);for(var s=r.split(n),i=[s[0]],o=1;o<s.length;++o)i.push(a),i.push(s[o]);return i}}();function lte(e){return e?e.content&&e.type?rg(e.content,!0):e.data?Ay(e.data):e.asNodeBuffer&&pn?Ay(e.asNodeBuffer().toString("binary")):e.asBinary?Ay(e.asBinary()):e._data&&e._data.getContent?Ay(rg(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function cte(e){if(!e)return null;if(e.data)return mH(e.data);if(e.asNodeBuffer&&pn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?mH(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function $_e(e){return e&&e.name.slice(-4)===".bin"?cte(e):lte(e)}function yu(e,t){for(var r=e.FullPaths||Is(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),a=n.replace(/\\/g,"/"),s=0;s<r.length;++s){var i=r[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||a==i)return e.files?e.files[r[s]]:e.FileIndex[s]}return null}function _P(e,t){var r=yu(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function li(e,t,r){if(!r)return $_e(_P(e,t));if(!t)return null;try{return li(e,t)}catch{return null}}function Tc(e,t,r){if(!r)return lte(_P(e,t));if(!t)return null;try{return Tc(e,t)}catch{return null}}function G_e(e,t,r){return cte(_P(e,t))}function kH(e){for(var t=e.FullPaths||Is(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function un(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return pn?n=Bh(r):n=u_e(r),Cr.utils.cfb_add(e,t,n)}Cr.utils.cfb_add(e,t,r)}else e.file(t,r)}function SP(){return Cr.utils.cfb_new()}function ute(e,t){switch(t.type){case"base64":return Cr.read(e,{type:"base64"});case"binary":return Cr.read(e,{type:"binary"});case"buffer":case"array":return Cr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function hy(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var a=n.shift();a===".."?r.pop():a!=="."&&r.push(a)}return r.join("/")}var Ys=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,K_e=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,BH=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,q_e=/<[^>]*>/g,nl=Ys.match(BH)?BH:q_e,W_e=/<\w*:/,X_e=/<(\/?)\w+:/;function Gr(e,t,r){for(var n={},a=0,s=0;a!==e.length&&!((s=e.charCodeAt(a))===32||s===10||s===13);++a);if(t||(n[0]=e.slice(0,a)),a===e.length)return n;var i=e.match(K_e),o=0,c="",u=0,d="",f="",h=1;if(i)for(u=0;u!=i.length;++u){for(f=i[u],s=0;s!=f.length&&f.charCodeAt(s)!==61;++s);for(d=f.slice(0,s).trim();f.charCodeAt(s+1)==32;)++s;for(h=(a=f.charCodeAt(s+1))==34||a==39?1:0,c=f.slice(s+1+h,f.length-h),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=c,n[d.toLowerCase()]=c;else{var p=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[p]&&d.slice(o-3,o)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function ef(e){return e.replace(X_e,"<$1")}var dte={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},NP=x4(dte),Hn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var a=n+"",s=a.indexOf("<![CDATA[");if(s==-1)return a.replace(e,function(o,c){return dte[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(t,function(o,c){return String.fromCharCode(parseInt(c,16))});var i=a.indexOf("]]>");return r(a.slice(0,s))+a.slice(s+9,i)+r(a.slice(i+3))}}(),kP=/[&<>'"]/g,Y_e=/[\u0000-\u0008\u000b-\u001f]/g;function va(e){var t=e+"";return t.replace(kP,function(r){return NP[r]}).replace(Y_e,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function TH(e){return va(e).replace(/ /g,"_x0020_")}var Ate=/[\u0000-\u001f]/g;function BP(e){var t=e+"";return t.replace(kP,function(r){return NP[r]}).replace(/\n/g,"<br/>").replace(Ate,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function J_e(e){var t=e+"";return t.replace(kP,function(r){return NP[r]}).replace(Ate,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var jH=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function Z_e(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Ua(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function HT(e){for(var t="",r=0,n=0,a=0,s=0,i=0,o=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(a=e.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=a&63,t+=String.fromCharCode(i);continue}if(s=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(a&63)<<6|s&63);continue}i=e.charCodeAt(r++),o=((n&7)<<18|(a&63)<<12|(s&63)<<6|i&63)-65536,t+=String.fromCharCode(55296+(o>>>10&1023)),t+=String.fromCharCode(56320+(o&1023))}return t}function IH(e){var t=vm(2*e.length),r,n,a=1,s=0,i=0,o;for(n=0;n<e.length;n+=a)a=1,(o=e.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(e.charCodeAt(n+1)&63),a=2):o<240?(r=(o&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),a=3):(a=4,r=(o&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(t[s++]=i&255,t[s++]=i>>>8,i=0),t[s++]=r%256,t[s++]=r>>>8;return t.slice(0,s).toString("ucs2")}function FH(e){return Bh(e,"binary").toString("utf8")}var mC="foo bar bazâð£",Ca=pn&&(FH(mC)==HT(mC)&&FH||IH(mC)==HT(mC)&&IH)||HT,RA=pn?function(e){return Bh(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,a=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,a=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(a>>18&7))),t.push(String.fromCharCode(144+(a>>12&63))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Ew=function(){var e={};return function(r,n){var a=r+"|"+(n||"");return e[a]?e[a]:e[a]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),fte=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),a=0;a<e.length;++a)n=n.replace(e[a][0],e[a][1]);return n}}(),eSe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),tSe=/<\/?(?:vt:)?variant>/g,rSe=/<(?:vt:)([^>]*)>([\s\S]*)</;function OH(e,t){var r=Gr(e),n=e.match(eSe(r.baseType))||[],a=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return a}return n.forEach(function(s){var i=s.replace(tSe,"").match(rSe);i&&a.push({v:Ca(i[2]),t:i[1]})}),a}var hte=/(^\s|\s$|\n)/;function go(e,t){return"<"+e+(t.match(hte)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Cw(e){return Is(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Kt(e,t,r){return"<"+e+(r!=null?Cw(r):"")+(t!=null?(t.match(hte)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function HF(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function nSe(e,t){switch(typeof e){case"string":var r=Kt("vt:lpwstr",va(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Kt((e|0)==e?"vt:i4":"vt:r8",va(String(e)));case"boolean":return Kt("vt:bool",e?"true":"false")}if(e instanceof Date)return Kt("vt:filetime",HF(e));throw new Error("Unable to serialize "+e)}function TP(e){if(pn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ca(Bm(wP(e)));throw new Error("Bad input format: expected Buffer or string")}var _w=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,_i={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},bg=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],_c={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function aSe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),a=e[t+6]&15,s=5;s>=0;--s)a=a*256+e[t+s];return n==2047?a==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,a+=Math.pow(2,52)),r*Math.pow(2,n-52)*a)}function sSe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,a=0,s=0,i=n?-t:t;isFinite(i)?i==0?a=s=0:(a=Math.floor(Math.log(i)/Math.LN2),s=i*Math.pow(2,52-a),a<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?a=-1022:(s-=Math.pow(2,52),a+=1023)):(a=2047,s=isNaN(t)?26985:0);for(var o=0;o<=5;++o,s/=256)e[r+o]=s&255;e[r+6]=(a&15)<<4|s&15,e[r+7]=a>>4|n}var DH=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var a=0,s=e[0][n].length;a<s;a+=r)t.push.apply(t,e[0][n].slice(a,a+r));return t},PH=pn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Bh(t)})):DH(e)}:DH,RH=function(e,t,r){for(var n=[],a=t;a<r;a+=2)n.push(String.fromCharCode(qf(e,a)));return n.join("").replace(bl,"")},jP=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(bl,""):RH(e,t,r)}:RH,LH=function(e,t,r){for(var n=[],a=t;a<t+r;++a)n.push(("0"+e[a].toString(16)).slice(-2));return n.join("")},mte=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):LH(e,t,r)}:LH,MH=function(e,t,r){for(var n=[],a=t;a<r;a++)n.push(String.fromCharCode(Qv(e,a)));return n.join("")},w2=pn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):MH(t,r,n)}:MH,pte=function(e,t){var r=Sc(e,t);return r>0?w2(e,t+4,t+4+r-1):""},gte=pte,vte=function(e,t){var r=Sc(e,t);return r>0?w2(e,t+4,t+4+r-1):""},xte=vte,bte=function(e,t){var r=2*Sc(e,t);return r>0?w2(e,t+4,t+4+r-1):""},yte=bte,wte=function(t,r){var n=Sc(t,r);return n>0?jP(t,r+4,r+4+n):""},Ete=wte,Cte=function(e,t){var r=Sc(e,t);return r>0?w2(e,t+4,t+4+r):""},_te=Cte,Ste=function(e,t){return aSe(e,t)},JS=Ste,IP=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pn&&(gte=function(t,r){if(!Buffer.isBuffer(t))return pte(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},xte=function(t,r){if(!Buffer.isBuffer(t))return vte(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},yte=function(t,r){if(!Buffer.isBuffer(t))return bte(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},Ete=function(t,r){if(!Buffer.isBuffer(t))return wte(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},_te=function(t,r){if(!Buffer.isBuffer(t))return Cte(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},JS=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):Ste(t,r)},IP=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Qv=function(e,t){return e[t]},qf=function(e,t){return e[t+1]*256+e[t]},iSe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Sc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},bp=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},oSe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Qy(e,t){var r="",n,a,s=[],i,o,c,u;switch(t){case"dbcs":if(u=this.l,pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(qf(this,u)),u+=2;e*=2;break;case"utf8":r=w2(this,this.l,this.l+e);break;case"utf16le":e*=2,r=jP(this,this.l,this.l+e);break;case"wstr":return Qy.call(this,e,"dbcs");case"lpstr-ansi":r=gte(this,this.l),e=4+Sc(this,this.l);break;case"lpstr-cp":r=xte(this,this.l),e=4+Sc(this,this.l);break;case"lpwstr":r=yte(this,this.l),e=4+2*Sc(this,this.l);break;case"lpp4":e=4+Sc(this,this.l),r=Ete(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Sc(this,this.l),r=_te(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(i=Qv(this,this.l+e++))!==0;)s.push(hC(i));r=s.join("");break;case"_wstr":for(e=0,r="";(i=qf(this,this.l+e))!==0;)s.push(hC(i)),e+=2;e+=2,r=s.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Qv(this,u),this.l=u+1,o=Qy.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(hC(qf(this,u))),u+=2}r=s.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return i=Qv(this,u),this.l=u+1,o=Qy.call(this,e-c,i?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(hC(Qv(this,u))),u+=1}r=s.join("");break;default:switch(e){case 1:return n=Qv(this,this.l),this.l++,n;case 2:return n=(t==="i"?iSe:qf)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?bp:oSe)(this,this.l),this.l+=4,n):(a=Sc(this,this.l),this.l+=4,a);case 8:case-8:if(t==="f")return e==8?a=JS(this,this.l):a=JS([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,a;e=8;case 16:r=mte(this,this.l,e);break}}return this.l+=e,r}var lSe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},cSe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},uSe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function dSe(e,t,r){var n=0,a=0;if(r==="dbcs"){for(a=0;a!=t.length;++a)uSe(this,t.charCodeAt(a),this.l+2*a);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),a=0;a!=t.length;++a)this[this.l+a]=t.charCodeAt(a)&255;n=t.length}else if(r==="hex"){for(;a<e;++a)this[this.l++]=parseInt(t.slice(2*a,2*a+2),16)||0;return this}else if(r==="utf16le"){var s=Math.min(this.l+e,this.length);for(a=0;a<Math.min(t.length,e);++a){var i=t.charCodeAt(a);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,lSe(this,t,this.l);break;case 8:if(n=8,r==="f"){sSe(this,t,this.l);break}case 16:break;case-4:n=4,cSe(this,t,this.l);break}return this.l+=n,this}function Nte(e,t){var r=mte(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function po(e,t){e.l=t,e.read_shift=Qy,e.chk=Nte,e.write_shift=dSe}function tl(e,t){e.l+=t}function wt(e){var t=vm(e);return po(t,0),t}function Th(e,t,r){if(e){var n,a,s;po(e,e.l||0);for(var i=e.length,o=0,c=0;e.l<i;){o=e.read_shift(1),o&128&&(o=(o&127)+((e.read_shift(1)&127)<<7));var u=jw[o]||jw[65535];for(n=e.read_shift(1),s=n&127,a=1;a<4&&n&128;++a)s+=((n=e.read_shift(1))&127)<<7*a;c=e.l+s;var d=u.f&&u.f(e,s,r);if(e.l=c,t(d,u,o))return}}}function Yl(){var e=[],t=pn?256:2048,r=function(u){var d=wt(u);return po(d,0),d},n=r(t),a=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(a(),n=r(Math.max(u+1,t)))},i=function(){return a(),Ki(e)},o=function(u){a(),n=u,n.l==null&&(n.l=n.length),s(t)};return{next:s,push:o,end:i,_bufs:e}}function Rt(e,t,r,n){var a=+t,s;if(!isNaN(a)){n||(n=jw[a].p||(r||[]).length||0),s=1+(a>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var i=e.next(s);a<=127?i.write_shift(1,a):(i.write_shift(1,(a&127)+128),i.write_shift(1,a>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&IP(r)&&e.push(r)}}function Hy(e,t,r){var n=Va(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function UH(e,t,r){var n=Va(e);return n.s=Hy(n.s,t.s,r),n.e=Hy(n.e,t.s,r),n}function Vy(e,t){if(e.cRel&&e.c<0)for(e=Va(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=Va(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Qr(e);return!e.cRel&&e.cRel!=null&&(r=hSe(r)),!e.rRel&&e.rRel!=null&&(r=ASe(r)),r}function VT(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+ls(e.s.c)+":"+(e.e.cRel?"":"$")+ls(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Ws(e.s.r)+":"+(e.e.rRel?"":"$")+Ws(e.e.r):Vy(e.s,t.biff)+":"+Vy(e.e,t.biff)}function FP(e){return parseInt(fSe(e),10)-1}function Ws(e){return""+(e+1)}function ASe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function fSe(e){return e.replace(/\$(\d+)$/,"$1")}function OP(e){for(var t=mSe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function ls(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function hSe(e){return e.replace(/^([A-Z])/,"$$$1")}function mSe(e){return e.replace(/^\$([A-Z])/,"$1")}function pSe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function cs(e){for(var t=0,r=0,n=0;n<e.length;++n){var a=e.charCodeAt(n);a>=48&&a<=57?t=10*t+(a-48):a>=65&&a<=90&&(r=26*r+(a-64))}return{c:r-1,r:t-1}}function Qr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Zl(e){var t=e.indexOf(":");return t==-1?{s:cs(e),e:cs(e)}:{s:cs(e.slice(0,t)),e:cs(e.slice(t+1))}}function nn(e,t){return typeof t>"u"||typeof t=="number"?nn(e.s,e.e):(typeof e!="string"&&(e=Qr(e)),typeof t!="string"&&(t=Qr(t)),e==t?e:e+":"+t)}function Vn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,a=0,s=e.length;for(r=0;n<s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.s.c=--r,r=0;n<s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;if(t.s.r=--r,n===s||a!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=s&&!((a=e.charCodeAt(n)-64)<1||a>26);++n)r=26*r+a;for(t.e.c=--r,r=0;n!=s&&!((a=e.charCodeAt(n)-48)<0||a>9);++n)r=10*r+a;return t.e.r=--r,t}function QH(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Pu(e.z,r?Ni(t):t)}catch{}try{return e.w=Pu((e.XF||{}).numFmtId||(r?14:0),r?Ni(t):t)}catch{return""+t}}function ph(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?jh[e.v]||e.v:t==null?QH(e,e.v):QH(e,t))}function Tm(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function kte(e,t,r){var n=r||{},a=e?Array.isArray(e):n.dense,s=e||(a?[]:{}),i=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?cs(n.origin):n.origin;i=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=Vn(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var h=0;h!=t[f].length;++h)if(!(typeof t[f][h]>"u")){var p={v:t[f][h]},g=i+f,v=o+h;if(u.s.r>g&&(u.s.r=g),u.s.c>v&&(u.s.c=v),u.e.r<g&&(u.e.r=g),u.e.c<v&&(u.e.c=v),t[f][h]&&typeof t[f][h]=="object"&&!Array.isArray(t[f][h])&&!(t[f][h]instanceof Date))p=t[f][h];else if(Array.isArray(p.v)&&(p.f=t[f][h][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Pr[14],n.cellDates?(p.t="d",p.w=Pu(p.z,Ni(p.v))):(p.t="n",p.v=Ni(p.v),p.w=Pu(p.z,p.v))):p.t="s";if(a)s[g]||(s[g]=[]),s[g][v]&&s[g][v].z&&(p.z=s[g][v].z),s[g][v]=p;else{var b=Qr({c:v,r:g});s[b]&&s[b].z&&(p.z=s[b].z),s[b]=p}}}return u.s.c<1e7&&(s["!ref"]=nn(u)),s}function N1(e,t){return kte(null,e,t)}function gSe(e){return e.read_shift(4,"i")}function Td(e,t){return t||(t=wt(4)),t.write_shift(4,e),t}function Jo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Wi(e,t){var r=!1;return t==null&&(r=!0,t=wt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function vSe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function xSe(e,t){return t||(t=wt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function DP(e,t){var r=e.l,n=e.read_shift(1),a=Jo(e),s=[],i={t:a,h:a};if((n&1)!==0){for(var o=e.read_shift(4),c=0;c!=o;++c)s.push(vSe(e));i.r=s}else i.r=[{ich:0,ifnt:0}];return e.l=r+t,i}function bSe(e,t){var r=!1;return t==null&&(r=!0,t=wt(15+4*e.t.length)),t.write_shift(1,0),Wi(e.t,t),r?t.slice(0,t.l):t}var ySe=DP;function wSe(e,t){var r=!1;return t==null&&(r=!0,t=wt(23+4*e.t.length)),t.write_shift(1,1),Wi(e.t,t),t.write_shift(4,1),xSe({},t),r?t.slice(0,t.l):t}function Mu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function yg(e,t){return t==null&&(t=wt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function wg(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Eg(e,t){return t==null&&(t=wt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var ESe=Jo,Bte=Wi;function PP(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function ZS(e,t){var r=!1;return t==null&&(r=!0,t=wt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var CSe=Jo,VF=PP,RP=ZS;function LP(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var a=n===0?JS([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):bp(t,0)>>2;return r?a/100:a}function Tte(e,t){t==null&&(t=wt(4));var r=0,n=0,a=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:a==(a|0)&&a>=-536870912&&a<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?a:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function jte(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function _Se(e,t){return t||(t=wt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Cg=jte,k1=_Se;function Xo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function ng(e,t){return(t||wt(8)).write_shift(8,e,"f")}function SSe(e){var t={},r=e.read_shift(1),n=r>>>1,a=e.read_shift(1),s=e.read_shift(2,"i"),i=e.read_shift(1),o=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=a;var u=Pp[a];u&&(t.rgb=Nw(u));break;case 2:t.rgb=Nw([i,o,c]);break;case 3:t.theme=a;break}return s!=0&&(t.tint=s>0?s/32767:s/32768),t}function e5(e,t){if(t||(t=wt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function NSe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function kSe(e,t){t||(t=wt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function Ite(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function BSe(e){return Ite(e,1)}function TSe(e){return Ite(e,2)}var MP=2,Ul=3,pC=11,HH=12,t5=19,gC=64,jSe=65,ISe=71,FSe=4108,OSe=4126,Vi=80,Fte=81,DSe=[Vi,Fte],zF={1:{n:"CodePage",t:MP},2:{n:"Category",t:Vi},3:{n:"PresentationFormat",t:Vi},4:{n:"ByteCount",t:Ul},5:{n:"LineCount",t:Ul},6:{n:"ParagraphCount",t:Ul},7:{n:"SlideCount",t:Ul},8:{n:"NoteCount",t:Ul},9:{n:"HiddenCount",t:Ul},10:{n:"MultimediaClipCount",t:Ul},11:{n:"ScaleCrop",t:pC},12:{n:"HeadingPairs",t:FSe},13:{n:"TitlesOfParts",t:OSe},14:{n:"Manager",t:Vi},15:{n:"Company",t:Vi},16:{n:"LinksUpToDate",t:pC},17:{n:"CharacterCount",t:Ul},19:{n:"SharedDoc",t:pC},22:{n:"HyperlinksChanged",t:pC},23:{n:"AppVersion",t:Ul,p:"version"},24:{n:"DigSig",t:jSe},26:{n:"ContentType",t:Vi},27:{n:"ContentStatus",t:Vi},28:{n:"Language",t:Vi},29:{n:"Version",t:Vi},255:{},2147483648:{n:"Locale",t:t5},2147483651:{n:"Behavior",t:t5},1919054434:{}},$F={1:{n:"CodePage",t:MP},2:{n:"Title",t:Vi},3:{n:"Subject",t:Vi},4:{n:"Author",t:Vi},5:{n:"Keywords",t:Vi},6:{n:"Comments",t:Vi},7:{n:"Template",t:Vi},8:{n:"LastAuthor",t:Vi},9:{n:"RevNumber",t:Vi},10:{n:"EditTime",t:gC},11:{n:"LastPrinted",t:gC},12:{n:"CreatedDate",t:gC},13:{n:"ModifiedDate",t:gC},14:{n:"PageCount",t:Ul},15:{n:"WordCount",t:Ul},16:{n:"CharCount",t:Ul},17:{n:"Thumbnail",t:ISe},18:{n:"Application",t:Vi},19:{n:"DocSecurity",t:Ul},255:{},2147483648:{n:"Locale",t:t5},2147483651:{n:"Behavior",t:t5},1919054434:{}},VH={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},PSe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function RSe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var LSe=RSe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Pp=Va(LSe),jh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Ote={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},GF={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},vC={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function UP(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function MSe(e){var t=UP();if(!e||!e.match)return t;var r={};if((e.match(nl)||[]).forEach(function(n){var a=Gr(n);switch(a[0].replace(W_e,"<")){case"<?xml":break;case"<Types":t.xmlns=a["xmlns"+(a[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[a.Extension]=a.ContentType;break;case"<Override":t[GF[a.ContentType]]!==void 0&&t[GF[a.ContentType]].push(a.PartName);break}}),t.xmlns!==_i.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Dte(e,t){var r=M_e(GF),n=[],a;n[n.length]=Ys,n[n.length]=Kt("Types",null,{xmlns:_i.CT,"xmlns:xsd":_i.xsd,"xmlns:xsi":_i.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Kt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){e[c]&&e[c].length>0&&(a=e[c][0],n[n.length]=Kt("Override",null,{PartName:(a[0]=="/"?"":"/")+a,ContentType:vC[c][t.bookType]||vC[c].xlsx}))},i=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:vC[c][t.bookType]||vC[c].xlsx})})},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=Kt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return s("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var _n={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Sw(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function zy(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(nl)||[]).forEach(function(a){var s=Gr(a);if(s[0]==="<Relationship"){var i={};i.Type=s.Type,i.Target=s.Target,i.Id=s.Id,s.TargetMode&&(i.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:hy(s.Target,t);r[o]=i,n[s.Id]=i}}),r["!id"]=n,r}function gx(e){var t=[Ys,Kt("Relationships",null,{xmlns:_i.RELS})];return Is(e["!id"]).forEach(function(r){t[t.length]=Kt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ma(e,t,r,n,a,s){if(a||(a={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,a.Id="rId"+t,a.Type=n,a.Target=r,[_n.HLINK,_n.XPATH,_n.XMISS].indexOf(a.Type)>-1&&(a.TargetMode="External"),e["!id"][a.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][a.Id]=a,e[("/"+a.Target).replace("//","/")]=a,t}var USe="application/vnd.oasis.opendocument.spreadsheet";function QSe(e,t){for(var r=TP(e),n,a;n=_w.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(a=Gr(n[0],!1),a.path=="/"&&a.type!==USe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function HSe(e){var t=[Ys];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function zH(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function VSe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function zSe(e){var t=[Ys];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(zH(e[r][0],e[r][1])),t.push(VSe("",e[r][0]));return t.push(zH("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Pte(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+KS.version+"</meta:generator></office:meta></office:document-meta>"}var Du=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],$Se=function(){for(var e=new Array(Du.length),t=0;t<Du.length;++t){var r=Du[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Rte(e){var t={};e=Ca(e);for(var r=0;r<Du.length;++r){var n=Du[r],a=e.match($Se[r]);a!=null&&a.length>0&&(t[n[1]]=Hn(a[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Ha(t[n[1]]))}return t}function zT(e,t,r,n,a){a[e]!=null||t==null||t===""||(a[e]=t,t=va(t),n[n.length]=r?Kt(e,t,r):go(e,t))}function Lte(e,t){var r=t||{},n=[Ys,Kt("cp:coreProperties",null,{"xmlns:cp":_i.CORE_PROPS,"xmlns:dc":_i.dc,"xmlns:dcterms":_i.dcterms,"xmlns:dcmitype":_i.dcmitype,"xmlns:xsi":_i.xsi})],a={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&zT("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:HF(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a),e.ModifiedDate!=null&&zT("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:HF(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,a));for(var s=0;s!=Du.length;++s){var i=Du[s],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:e?e[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&zT(i[0],o,null,n,a)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Rp=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Mte=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Ute(e,t,r,n){var a=[];if(typeof e=="string")a=OH(e,n);else for(var s=0;s<e.length;++s)a=a.concat(e[s].map(function(d){return{v:d}}));var i=typeof t=="string"?OH(t,n).map(function(d){return d.v}):t,o=0,c=0;if(i.length>0)for(var u=0;u!==a.length;u+=2){switch(c=+a[u+1].v,a[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=i.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=i.slice(o,o+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=i.slice(o,o+c);break}o+=c}}function GSe(e,t,r){var n={};return t||(t={}),e=Ca(e),Rp.forEach(function(a){var s=(e.match(Ew(a[0]))||[])[1];switch(a[2]){case"string":s&&(t[a[1]]=Hn(s));break;case"bool":t[a[1]]=s==="true";break;case"raw":var i=e.match(new RegExp("<"+a[0]+"[^>]*>([\\s\\S]*?)</"+a[0]+">"));i&&i.length>0&&(n[a[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Ute(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Qte(e){var t=[],r=Kt;return e||(e={}),e.Application="SheetJS",t[t.length]=Ys,t[t.length]=Kt("Properties",null,{xmlns:_i.EXT_PROPS,"xmlns:vt":_i.vt}),Rp.forEach(function(n){if(e[n[1]]!==void 0){var a;switch(n[2]){case"string":a=va(String(e[n[1]]));break;case"bool":a=e[n[1]]?"true":"false";break}a!==void 0&&(t[t.length]=r(n[0],a))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+va(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var KSe=/<[^>]+>[^<]*/g;function qSe(e,t){var r={},n="",a=e.match(KSe);if(a)for(var s=0;s!=a.length;++s){var i=a[s],o=Gr(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Hn(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var c=i.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Hn(d);break;case"bool":r[n]=Ua(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=Ha(d);break;case"cy":case"error":r[n]=Hn(d);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,c)}}else if(i.slice(0,2)!=="</"){if(t.WTF)throw new Error(i)}}}return r}function Hte(e){var t=[Ys,Kt("Properties",null,{xmlns:_i.CUST_PROPS,"xmlns:vt":_i.vt})];if(!e)return t.join("");var r=1;return Is(e).forEach(function(a){++r,t[t.length]=Kt("property",nSe(e[a]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:va(a)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var KF={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},$T;function WSe(e,t,r){$T||($T=x4(KF)),t=$T[t]||t,e[t]=r}function XSe(e,t){var r=[];return Is(KF).map(function(n){for(var a=0;a<Du.length;++a)if(Du[a][1]==n)return Du[a];for(a=0;a<Rp.length;++a)if(Rp[a][1]==n)return Rp[a];throw n}).forEach(function(n){if(e[n[1]]!=null){var a=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":a=new Date(a).toISOString().replace(/\.\d*Z/,"Z");break}typeof a=="number"?a=String(a):a===!0||a===!1?a=a?"1":"0":a instanceof Date&&(a=new Date(a).toISOString().replace(/\.\d*Z/,"")),r.push(go(KF[n[1]]||n[1],a))}}),Kt("DocumentProperties",r.join(""),{xmlns:_c.o})}function YSe(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",a=[];return e&&Is(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)){for(var i=0;i<Du.length;++i)if(s==Du[i][1])return;for(i=0;i<Rp.length;++i)if(s==Rp[i][1])return;for(i=0;i<r.length;++i)if(s==r[i])return;var o=e[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),a.push(Kt(TH(s),o,{"dt:dt":c}))}}),t&&Is(t).forEach(function(s){if(Object.prototype.hasOwnProperty.call(t,s)&&!(e&&Object.prototype.hasOwnProperty.call(e,s))){var i=t[s],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),a.push(Kt(TH(s),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+_c.o+'">'+a.join("")+"</"+n+">"}function QP(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function JSe(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),a=(r-n)/Math.pow(2,32);n*=1e7,a*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),a+=s);var i=wt(8);return i.write_shift(4,n),i.write_shift(4,a),i}function Vte(e,t,r){var n=e.l,a=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return a}function zte(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function $te(e,t,r){return t===31?zte(e):Vte(e,t,r)}function qF(e,t,r){return $te(e,t,r===!1?0:4)}function ZSe(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return $te(e,t,0)}function e5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var a=e.l;r[n]=e.read_shift(0,"lpwstr").replace(bl,""),e.l-a&2&&(e.l+=2)}return r}function t5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(bl,"");return r}function r5e(e){var t=e.l,r=r5(e,Fte);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=r5(e,Ul);return[r,n]}function n5e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(r5e(e));return r}function $H(e,t){for(var r=e.read_shift(4),n={},a=0;a!=r;++a){var s=e.read_shift(4),i=e.read_shift(4);n[s]=e.read_shift(i,t===1200?"utf16le":"utf8").replace(bl,"").replace(fy,"!"),t===1200&&i%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function Gte(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function a5e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function r5(e,t,r){var n=e.read_shift(2),a,s=r||{};if(e.l+=2,t!==HH&&n!==t&&DSe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===HH?n:t){case 2:return a=e.read_shift(2,"i"),s.raw||(e.l+=2),a;case 3:return a=e.read_shift(4,"i"),a;case 11:return e.read_shift(4)!==0;case 19:return a=e.read_shift(4),a;case 30:return Vte(e,n,4).replace(bl,"");case 31:return zte(e);case 64:return QP(e);case 65:return Gte(e);case 71:return a5e(e);case 80:return qF(e,n,!s.raw).replace(bl,"");case 81:return ZSe(e,n).replace(bl,"");case 4108:return n5e(e);case 4126:case 4127:return n==4127?e5e(e):t5e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function GH(e,t){var r=wt(4),n=wt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=wt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=JSe(t);break;case 31:case 80:for(n=wt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Ki([r,n])}function KH(e,t){var r=e.l,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0,o=0,c=-1,u={};for(i=0;i!=a;++i){var d=e.read_shift(4),f=e.read_shift(4);s[i]=[d,f+r]}s.sort(function(C,N){return C[1]-N[1]});var h={};for(i=0;i!=a;++i){if(e.l!==s[i][1]){var p=!0;if(i>0&&t)switch(t[s[i-1][0]].t){case 2:e.l+2===s[i][1]&&(e.l+=2,p=!1);break;case 80:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break;case 4108:e.l<=s[i][1]&&(e.l=s[i][1],p=!1);break}if((!t||i==0)&&e.l<=s[i][1]&&(p=!1,e.l=s[i][1]),p)throw new Error("Read Error: Expected address "+s[i][1]+" at "+e.l+" :"+i)}if(t){var g=t[s[i][0]];if(h[g.n]=r5(e,g.t,{raw:!0}),g.p==="version"&&(h[g.n]=String(h[g.n]>>16)+"."+("0000"+String(h[g.n]&65535)).slice(-4)),g.n=="CodePage")switch(h[g.n]){case 0:h[g.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:wd(o=h[g.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+h[g.n])}}else if(s[i][0]===1){if(o=h.CodePage=r5(e,MP),wd(o),c!==-1){var v=e.l;e.l=s[c][1],u=$H(e,o),e.l=v}}else if(s[i][0]===0){if(o===0){c=i,e.l=s[i+1][1];continue}u=$H(e,o)}else{var b=u[s[i][0]],y;switch(e[e.l]){case 65:e.l+=4,y=Gte(e);break;case 30:e.l+=4,y=qF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=qF(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Qs(e,4);break;case 64:e.l+=4,y=Ha(QP(e));break;default:throw new Error("unparsed value: "+e[e.l])}h[b]=y}}return e.l=r+n,h}var Kte=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function s5e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function qH(e,t,r){var n=wt(8),a=[],s=[],i=8,o=0,c=wt(8),u=wt(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),a.push(u),i+=8+c.length,!t){u=wt(8),u.write_shift(4,0),a.unshift(u);var d=[wt(4)];for(d[0].write_shift(4,e.length),o=0;o<e.length;++o){var f=e[o][0];for(c=wt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Ki(d),s.unshift(c),i+=8+c.length}for(o=0;o<e.length;++o)if(!(t&&!t[e[o][0]])&&!(Kte.indexOf(e[o][0])>-1||Mte.indexOf(e[o][0])>-1)&&e[o][1]!=null){var h=e[o][1],p=0;if(t){p=+t[e[o][0]];var g=r[p];if(g.p=="version"&&typeof h=="string"){var v=h.split(".");h=(+v[0]<<16)+(+v[1]||0)}c=GH(g.t,h)}else{var b=s5e(h);b==-1&&(b=31,h=String(h)),c=GH(b,h)}s.push(c),u=wt(8),u.write_shift(4,t?p:2+o),a.push(u),i+=8+c.length}var y=8*(s.length+1);for(o=0;o<s.length;++o)a[o].write_shift(4,y),y+=s[o].length;return n.write_shift(4,i),n.write_shift(4,s.length),Ki([n].concat(a).concat(s))}function WH(e,t,r){var n=e.content;if(!n)return{};po(n,0);var a,s,i,o,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Cr.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(a=n.read_shift(4),a!==1&&a!==2)throw new Error("Unrecognized #Sets: "+a);if(s=n.read_shift(16),o=n.read_shift(4),a===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);a===2&&(i=n.read_shift(16),c=n.read_shift(4));var f=KH(n,t),h={SystemIdentifier:u};for(var p in f)h[p]=f[p];if(h.FMTID=s,a===1)return h;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var g;try{g=KH(n,null)}catch{}for(p in g)h[p]=g[p];return h.FMTID=[s,i],h}function XH(e,t,r,n,a,s){var i=wt(a?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Cr.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,a?2:1),i.write_shift(16,t,"hex"),i.write_shift(4,a?68:48);var c=qH(e,r,n);if(o.push(c),a){var u=qH(a,null,null);i.write_shift(16,s,"hex"),i.write_shift(4,68+c.length),o.push(u)}return Ki(o)}function y0(e,t){return e.read_shift(t),null}function i5e(e,t){t||(t=wt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function o5e(e,t,r){for(var n=[],a=e.l+t;e.l<a;)n.push(r(e,a-e.l));if(a!==e.l)throw new Error("Slurp error");return n}function Qs(e,t){return e.read_shift(t)===1}function fl(e,t){return t||(t=wt(2)),t.write_shift(2,+!!e),t}function ci(e){return e.read_shift(2,"u")}function Eu(e,t){return t||(t=wt(2)),t.write_shift(2,e),t}function qte(e,t){return o5e(e,t,ci)}function l5e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function Wte(e,t,r){return r||(r=wt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function E2(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),a="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var s=e.read_shift(1);s&&(a="dbcs-cont")}else r.biff==12&&(a="wstr");r.biff>=2&&r.biff<=5&&(a="cpstr");var i=n?e.read_shift(n,a):"";return i}function c5e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,a=r&8,s=1+(r&1),i=0,o,c={};a&&(i=e.read_shift(2)),n&&(o=e.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=t===0?"":e.read_shift(t,u);return a&&(e.l+=4*i),n&&(e.l+=o),c.t=d,a||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function u5e(e){var t=e.t||"",r=wt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=wt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=[r,n];return Ki(a)}function ag(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var a=e.read_shift(1);return a===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function C2(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):ag(e,n,r)}function _g(e,t,r){if(r.biff>5)return C2(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Xte(e,t,r){return r||(r=wt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function d5e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function A5e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var a=e.read_shift((n?t-24:t)>>1,"utf16le").replace(bl,"");return n&&(e.l+=24),a}function f5e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var a=e.read_shift(4);if(a===0)return r+n.replace(/\\/g,"/");var s=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=e.read_shift(s>>1,"utf16le").replace(bl,"");return r+i}function h5e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return A5e(e);case"0303000000000000c000000000000046":return f5e(e);default:throw new Error("Unsupported Moniker "+r)}}function xC(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(bl,""):"";return r}function YH(e,t){t||(t=wt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function m5e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var a=e.read_shift(2);e.l+=2;var s,i,o,c,u="",d,f;a&16&&(s=xC(e,r-e.l)),a&128&&(i=xC(e,r-e.l)),(a&257)===257&&(o=xC(e,r-e.l)),(a&257)===1&&(c=h5e(e,r-e.l)),a&8&&(u=xC(e,r-e.l)),a&32&&(d=e.read_shift(16)),a&64&&(f=QP(e)),e.l=r;var h=i||o||c||"";h&&u&&(h+="#"+u),h||(h="#"+u),a&2&&h.charAt(0)=="/"&&h.charAt(1)!="/"&&(h="file://"+h);var p={Target:h};return d&&(p.guid=d),f&&(p.time=f),s&&(p.Tooltip=s),p}function p5e(e){var t=wt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var a=n.indexOf("#"),s=a>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}t.write_shift(4,2),t.write_shift(4,s);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)t.write_shift(4,i[r]);if(s==28)n=n.slice(1),YH(n,t);else if(s&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));var o=a>-1?n.slice(0,a):n;for(t.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)t.write_shift(2,o.charCodeAt(r));t.write_shift(2,0),s&8&&YH(a>-1?n.slice(a+1):"",t)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)t.write_shift(1,parseInt(i[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Yte(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),a=e.read_shift(1);return[t,r,n,a]}function Jte(e,t){var r=Yte(e);return r[3]=0,r}function tf(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function sg(e,t,r,n){return n||(n=wt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function g5e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function v5e(e,t,r){return t===0?"":_g(e,t,r)}function x5e(e,t,r){var n=r.biff>8?4:2,a=e.read_shift(n),s=e.read_shift(n,"i"),i=e.read_shift(n,"i");return[a,s,i]}function Zte(e){var t=e.read_shift(2),r=LP(e);return[t,r]}function b5e(e,t,r){e.l+=4,t-=4;var n=e.l+t,a=E2(e,t,r),s=e.read_shift(2);if(n-=e.l,s!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+s);return e.l+=s,a}function w4(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2);return{s:{c:n,r:t},e:{c:a,r}}}function ere(e,t){return t||(t=wt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function tre(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),a=e.read_shift(1);return{s:{c:n,r:t},e:{c:a,r}}}var y5e=tre;function rre(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function w5e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function E5e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Ro(e){e.l+=2,e.l+=e.read_shift(2)}var C5e={0:Ro,4:Ro,5:Ro,6:Ro,7:E5e,8:Ro,9:Ro,10:Ro,11:Ro,12:Ro,13:w5e,14:Ro,15:Ro,16:Ro,17:Ro,18:Ro,19:Ro,20:Ro,21:rre};function _5e(e,t){for(var r=e.l+t,n=[];e.l<r;){var a=e.read_shift(2);e.l-=2;try{n.push(C5e[a](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function bC(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function HP(e,t,r){var n=1536,a=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,a=8;break;case"biff4":n=4,a=6;break;case"biff3":n=3,a=6;break;case"biff2":n=2,a=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=wt(a);return s.write_shift(2,n),s.write_shift(2,t),a>4&&s.write_shift(2,29282),a>6&&s.write_shift(2,1997),a>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function S5e(e,t){return t===0||e.read_shift(2),1200}function N5e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,a=_g(e,0,r);return e.read_shift(t+n-e.l),a}function k5e(e,t){var r=!t||t.biff==8,n=wt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function B5e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function T5e(e,t,r){var n=e.read_shift(4),a=e.read_shift(1)&3,s=e.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var i=E2(e,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:a,dt:s,name:i}}function j5e(e,t){var r=!t||t.biff>=8?2:1,n=wt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var a=n.slice(0,n.l);return a.l=n.l,a}function I5e(e,t){for(var r=e.l+t,n=e.read_shift(4),a=e.read_shift(4),s=[],i=0;i!=a&&e.l<r;++i)s.push(c5e(e));return s.Count=n,s.Unique=a,s}function F5e(e,t){var r=wt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],a=0;a<e.length;++a)n[a]=u5e(e[a]);var s=Ki([r].concat(n));return s.parts=[r.length].concat(n.map(function(i){return i.length})),s}function O5e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function D5e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function P5e(e){var t=g5e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function R5e(e){return e.read_shift(2),e.read_shift(4)}function JH(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var a=e.read_shift(2);r&&r.biff==2&&(n=1-(a>>15),a&=32767);var s={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[s,a]}function L5e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,a],Flags:s,CurTab:i,FirstTab:o,Selected:c,TabRatio:u}}function M5e(){var e=wt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function U5e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function Q5e(e){var t=wt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function H5e(){}function V5e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=E2(e,0,r),n}function z5e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,a=n?15+r.length:16+2*r.length,s=wt(a);return s.write_shift(2,e.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,r.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),s}function $5e(e){var t=tf(e);return t.isst=e.read_shift(4),t}function G5e(e,t,r,n){var a=wt(10);return sg(e,t,n,a),a.write_shift(4,r),a}function K5e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,a=tf(e);r.biff==2&&e.l++;var s=C2(e,n-e.l,r);return a.val=s,a}function q5e(e,t,r,n,a){var s=!a||a.biff==8,i=wt(8+ +s+(1+s)*r.length);return sg(e,t,n,i),i.write_shift(2,r.length),s&&i.write_shift(1,1),i.write_shift((1+s)*r.length,r,s?"utf16le":"sbcs"),i}function W5e(e,t,r){var n=e.read_shift(2),a=_g(e,0,r);return[n,a]}function X5e(e,t,r,n){var a=r&&r.biff==5;n||(n=wt(a?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(a?1:2,t.length),a||n.write_shift(1,1),n.write_shift((a?1:2)*t.length,t,a?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}var Y5e=_g;function ZH(e,t,r){var n=e.l+t,a=r.biff==8||!r.biff?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:s,c:o},e:{r:i,c}}}function J5e(e,t){var r=t.biff==8||!t.biff?4:2,n=wt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function Z5e(e){var t=e.read_shift(2),r=e.read_shift(2),n=Zte(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function eNe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(Zte(e));if(e.l!==r)throw new Error("MulRK read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulRK length mismatch");return{r:n,c:a,C:i,rkrec:s}}function tNe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),a=e.read_shift(2),s=[];e.l<r;)s.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var i=e.read_shift(2);if(s.length!=i-a+1)throw new Error("MulBlank length mismatch");return{r:n,c:a,C:i,ixfe:s}}function rNe(e,t,r,n){var a={},s=e.read_shift(4),i=e.read_shift(4),o=e.read_shift(4),c=e.read_shift(2);return a.patternType=PSe[o>>26],n.cellStyles&&(a.alc=s&7,a.fWrap=s>>3&1,a.alcV=s>>4&7,a.fJustLast=s>>7&1,a.trot=s>>8&255,a.cIndent=s>>16&15,a.fShrinkToFit=s>>20&1,a.iReadOrder=s>>22&2,a.fAtrNum=s>>26&1,a.fAtrFnt=s>>27&1,a.fAtrAlc=s>>28&1,a.fAtrBdr=s>>29&1,a.fAtrPat=s>>30&1,a.fAtrProt=s>>31&1,a.dgLeft=i&15,a.dgRight=i>>4&15,a.dgTop=i>>8&15,a.dgBottom=i>>12&15,a.icvLeft=i>>16&127,a.icvRight=i>>23&127,a.grbitDiag=i>>30&3,a.icvTop=o&127,a.icvBottom=o>>7&127,a.icvDiag=o>>14&127,a.dgDiag=o>>21&15,a.icvFore=c&127,a.icvBack=c>>7&127,a.fsxButton=c>>14&1),a}function nNe(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=rNe(e,t,n.fStyle,r),n}function eV(e,t,r,n){var a=r&&r.biff==5;n||(n=wt(a?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var s=0;return e.numFmtId>0&&a&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),a||n.write_shift(4,0),n.write_shift(2,0),n}function aNe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function sNe(e){var t=wt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function tV(e,t,r){var n=tf(e);(r.biff==2||t==9)&&++e.l;var a=l5e(e);return n.val=a,n.t=a===!0||a===!1?"b":"e",n}function iNe(e,t,r,n,a,s){var i=wt(8);return sg(e,t,n,i),Wte(r,s,i),i}function oNe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=tf(e),a=Xo(e);return n.val=a,n}function lNe(e,t,r,n){var a=wt(14);return sg(e,t,n,a),ng(r,a),a}var rV=v5e;function cNe(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(2);if(r.sbcch=s,s==1025||s==14849)return[s,a];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var i=ag(e,s),o=[];n>e.l;)o.push(C2(e));return[s,a,i,o]}function nV(e,t,r){var n=e.read_shift(2),a,s={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(a=b5e(e,t-2,r)),s.body=a||e.read_shift(t-2),typeof a=="string"&&(s.Name=a),s}var uNe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function aV(e,t,r){var n=e.l+t,a=e.read_shift(2),s=e.read_shift(1),i=e.read_shift(1),o=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=ag(e,i,r);a&32&&(u=uNe[u.charCodeAt(0)]);var d=n-e.l;r&&r.biff==2&&--d;var f=n==e.l||o===0||!(d>0)?[]:_Te(e,d,r,o);return{chKey:s,Name:u,itab:c,rgce:f}}function nre(e,t,r){if(r.biff<8)return dNe(e,t,r);for(var n=[],a=e.l+t,s=e.read_shift(r.biff>8?4:2);s--!==0;)n.push(x5e(e,r.biff>8?12:6,r));if(e.l!=a)throw new Error("Bad ExternSheet: "+e.l+" != "+a);return n}function dNe(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=E2(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function ANe(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),a=e.read_shift(2),s=ag(e,n,r),i=ag(e,a,r);return[s,i]}function fNe(e,t,r){var n=tre(e);e.l++;var a=e.read_shift(1);return t-=8,[STe(e,t,r),a,n]}function sV(e,t,r){var n=y5e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,ETe(e,t,r)]}function hNe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function mNe(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=_g(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:a},o,i,s]}}function pNe(e,t,r){return mNe(e,t,r)}function gNe(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(w4(e));return r}function vNe(e){var t=wt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)ere(e[r],t);return t}function xNe(e,t,r){if(r&&r.biff<8)return yNe(e,t,r);var n=rre(e),a=_5e(e,t-22,n[1]);return{cmo:n,ft:a}}var bNe={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var a=e.read_shift(1);return e.l+=a,e.l=r,{fmt:n}}};function yNe(e,t,r){e.l+=4;var n=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var i=[];return i.push((bNe[n]||tl)(e,t,r)),{cmo:[a,n,s],ft:i}}function wNe(e,t,r){var n=e.l,a="";try{e.l+=4;var s=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(s)==-1?e.l+=6:i=d5e(e,6,r);var o=e.read_shift(2);e.read_shift(2),ci(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var d=e[e.l],f=ag(e,e.lens[u+1]-e.lens[u]-1);if(a+=f,a.length>=(d?o:2*o))break}if(a.length!==o&&a.length!==o*2)throw new Error("cchText: "+o+" != "+a.length);return e.l=n+t,{t:a}}catch{return e.l=n+t,{t:a}}}function ENe(e,t){var r=w4(e);e.l+=16;var n=m5e(e,t-24);return[r,n]}function CNe(e){var t=wt(24),r=cs(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),a=0;a<16;++a)t.write_shift(1,parseInt(n[a],16));return Ki([t,p5e(e[1])])}function _Ne(e,t){e.read_shift(2);var r=w4(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(bl,""),[r,n]}function SNe(e){var t=e[1].Tooltip,r=wt(10+2*(t.length+1));r.write_shift(2,2048);var n=cs(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var a=0;a<t.length;++a)r.write_shift(2,t.charCodeAt(a));return r.write_shift(2,0),r}function NNe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=VH[r]||r,r=e.read_shift(2),t[1]=VH[r]||r,t}function kNe(e){return e||(e=wt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function BNe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Jte(e));return r}function TNe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Jte(e));return r}function jNe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function are(e,t,r){if(!r.cellStyles)return tl(e,t);var n=r&&r.biff>=12?4:2,a=e.read_shift(n),s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s:a,e:s,w:i,ixfe:o,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function INe(e,t){var r=wt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function FNe(e,t){var r={};return t<32||(e.l+=16,r.header=Xo(e),r.footer=Xo(e),e.l+=2),r}function ONe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var a=e.read_shift(1);return e.l+=3,a&16&&(n.area=!0),n}function DNe(e){for(var t=wt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var PNe=tf,RNe=qte,LNe=C2;function MNe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,a}function UNe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=tf(e);++e.l;var a=_g(e,t-7,r);return n.t="str",n.val=a,n}function QNe(e){var t=tf(e);++e.l;var r=Xo(e);return t.t="n",t.val=r,t}function HNe(e,t,r){var n=wt(15);return k2(n,e,t),n.write_shift(8,r,"f"),n}function VNe(e){var t=tf(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function zNe(e,t,r){var n=wt(9);return k2(n,e,t),n.write_shift(2,r),n}function $Ne(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function GNe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function KNe(e,t,r){var n=e.l+t,a=tf(e),s=e.read_shift(2),i=ag(e,s,r);return e.l=n,a.t="str",a.val=i,a}var qNe=[2,3,48,49,131,139,140,245],WF=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=x4({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,c){var u=[],d=vm(1);switch(c.type){case"base64":d=Bc(Pc(o));break;case"binary":d=Bc(o);break;case"buffer":case"array":d=o;break}po(d,0);var f=d.read_shift(1),h=!!(f&136),p=!1,g=!1;switch(f){case 2:break;case 3:break;case 48:p=!0,h=!0;break;case 49:p=!0,h=!0;break;case 131:break;case 139:break;case 140:g=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,b=521;f==2&&(v=d.read_shift(2)),d.l+=3,f!=2&&(v=d.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(b=d.read_shift(2));var y=d.read_shift(2),C=c.codepage||1252;f!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(C=e[d[d.l]]),d.l+=1,d.l+=2),g&&(d.l+=36);for(var N=[],T={},S=Math.min(d.length,f==2?521:b-10-(p?264:0)),B=g?32:11;d.l<S&&d[d.l]!=13;)switch(T={},T.name=bw.utils.decode(C,d.slice(d.l,d.l+B)).replace(/[\u0000\r\n].*$/g,""),d.l+=B,T.type=String.fromCharCode(d.read_shift(1)),f!=2&&!g&&(T.offset=d.read_shift(4)),T.len=d.read_shift(1),f==2&&(T.offset=d.read_shift(2)),T.dec=d.read_shift(1),T.name.length&&N.push(T),f!=2&&(d.l+=g?13:14),T.type){case"B":(!p||T.len!=8)&&c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+T.name+":"+T.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+T.type)}if(d[d.l]!==13&&(d.l=b-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=b;var w=0,_=0;for(u[0]=[],_=0;_!=N.length;++_)u[0][_]=N[_].name;for(;v-- >0;){if(d[d.l]===42){d.l+=y;continue}for(++d.l,u[++w]=[],_=0,_=0;_!=N.length;++_){var F=d.slice(d.l,d.l+N[_].len);d.l+=N[_].len,po(F,0);var M=bw.utils.decode(C,F);switch(N[_].type){case"C":M.trim().length&&(u[w][_]=M.replace(/\s+$/,""));break;case"D":M.length===8?u[w][_]=new Date(+M.slice(0,4),+M.slice(4,6)-1,+M.slice(6,8)):u[w][_]=M;break;case"F":u[w][_]=parseFloat(M.trim());break;case"+":case"I":u[w][_]=g?F.read_shift(-4,"i")^2147483648:F.read_shift(4,"i");break;case"L":switch(M.trim().toUpperCase()){case"Y":case"T":u[w][_]=!0;break;case"N":case"F":u[w][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+M+"|")}break;case"M":if(!h)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));u[w][_]="##MEMO##"+(g?parseInt(M.trim(),10):F.read_shift(4));break;case"N":M=M.replace(/\u0000/g,"").trim(),M&&M!="."&&(u[w][_]=+M||0);break;case"@":u[w][_]=new Date(F.read_shift(-8,"f")-621356832e5);break;case"T":u[w][_]=new Date((F.read_shift(4)-2440588)*864e5+F.read_shift(4));break;case"Y":u[w][_]=F.read_shift(4,"i")/1e4+F.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[w][_]=-F.read_shift(-8,"f");break;case"B":if(p&&N[_].len==8){u[w][_]=F.read_shift(8,"f");break}case"G":case"P":F.l+=N[_].len;break;case"0":if(N[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+N[_].type)}}}if(f!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=N,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=N1(r(o,u),u);return d["!cols"]=u.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete u.DBF,d}function a(o,c){try{return Tm(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,c){var u=c||{};if(+u.codepage>=0&&wd(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Yl(),f=s5(o,{header:1,raw:!0,cellDates:!0}),h=f[0],p=f.slice(1),g=o["!cols"]||[],v=0,b=0,y=0,C=1;for(v=0;v<h.length;++v){if(((g[v]||{}).DBF||{}).name){h[v]=g[v].DBF.name,++y;continue}if(h[v]!=null){if(++y,typeof h[v]=="number"&&(h[v]=h[v].toString(10)),typeof h[v]!="string")throw new Error("DBF Invalid column name "+h[v]+" |"+typeof h[v]+"|");if(h.indexOf(h[v])!==v){for(b=0;b<1024;++b)if(h.indexOf(h[v]+"_"+b)==-1){h[v]+="_"+b;break}}}}var N=Vn(o["!ref"]),T=[],S=[],B=[];for(v=0;v<=N.e.c-N.s.c;++v){var w="",_="",F=0,M=[];for(b=0;b<p.length;++b)p[b][v]!=null&&M.push(p[b][v]);if(M.length==0||h[v]==null){T[v]="?";continue}for(b=0;b<M.length;++b){switch(typeof M[b]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=M[b]instanceof Date?"D":"C";break;default:_="C"}F=Math.max(F,String(M[b]).length),w=w&&w!=_?"C":_}F>250&&(F=250),_=((g[v]||{}).DBF||{}).type,_=="C"&&g[v].DBF.len>F&&(F=g[v].DBF.len),w=="B"&&_=="N"&&(w="N",B[v]=g[v].DBF.dec,F=g[v].DBF.len),S[v]=w=="C"||_=="N"?F:s[w]||0,C+=S[v],T[v]=w}var D=d.next(32);for(D.write_shift(4,318902576),D.write_shift(4,p.length),D.write_shift(2,296+32*y),D.write_shift(2,C),v=0;v<4;++v)D.write_shift(4,0);for(D.write_shift(4,0|(+t[Kee]||3)<<8),v=0,b=0;v<h.length;++v)if(h[v]!=null){var I=d.next(32),U=(h[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);I.write_shift(1,U,"sbcs"),I.write_shift(1,T[v]=="?"?"C":T[v],"sbcs"),I.write_shift(4,b),I.write_shift(1,S[v]||s[T[v]]||0),I.write_shift(1,B[v]||0),I.write_shift(1,2),I.write_shift(4,0),I.write_shift(1,0),I.write_shift(4,0),I.write_shift(4,0),b+=S[v]||s[T[v]]||0}var P=d.next(264);for(P.write_shift(4,13),v=0;v<65;++v)P.write_shift(4,0);for(v=0;v<p.length;++v){var X=d.next(C);for(X.write_shift(1,0),b=0;b<h.length;++b)if(h[b]!=null)switch(T[b]){case"L":X.write_shift(1,p[v][b]==null?63:p[v][b]?84:70);break;case"B":X.write_shift(8,p[v][b]||0,"f");break;case"N":var H="0";for(typeof p[v][b]=="number"&&(H=p[v][b].toFixed(B[b]||0)),y=0;y<S[b]-H.length;++y)X.write_shift(1,32);X.write_shift(1,H,"sbcs");break;case"D":p[v][b]?(X.write_shift(4,("0000"+p[v][b].getFullYear()).slice(-4),"sbcs"),X.write_shift(2,("00"+(p[v][b].getMonth()+1)).slice(-2),"sbcs"),X.write_shift(2,("00"+p[v][b].getDate()).slice(-2),"sbcs")):X.write_shift(8,"00000000","sbcs");break;case"C":var Y=String(p[v][b]!=null?p[v][b]:"").slice(0,S[b]);for(X.write_shift(1,Y,"sbcs"),y=0;y<S[b]-Y.length;++y)X.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:a,to_sheet:n,from_sheet:i}}(),sre=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Is(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(h,p){var g=e[p];return typeof g=="number"?pH(g):g},n=function(h,p,g){var v=p.charCodeAt(0)-32<<4|g.charCodeAt(0)-48;return v==59?h:pH(v)};e["|"]=254;function a(h,p){switch(p.type){case"base64":return s(Pc(h),p);case"binary":return s(h,p);case"buffer":return s(pn&&Buffer.isBuffer(h)?h.toString("binary"):Bm(h),p);case"array":return s(rg(h),p)}throw new Error("Unrecognized type "+p.type)}function s(h,p){var g=h.split(/[\n\r]+/),v=-1,b=-1,y=0,C=0,N=[],T=[],S=null,B={},w=[],_=[],F=[],M=0,D;for(+p.codepage>=0&&wd(+p.codepage);y!==g.length;++y){M=0;var I=g[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),U=I.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),P=U[0],X;if(I.length>0)switch(P){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":U[1].charAt(0)=="P"&&T.push(I.slice(3).replace(/;;/g,";"));break;case"C":var H=!1,Y=!1,V=!1,z=!1,G=-1,re=-1;for(C=1;C<U.length;++C)switch(U[C].charAt(0)){case"A":break;case"X":b=parseInt(U[C].slice(1))-1,Y=!0;break;case"Y":for(v=parseInt(U[C].slice(1))-1,Y||(b=0),D=N.length;D<=v;++D)N[D]=[];break;case"K":X=U[C].slice(1),X.charAt(0)==='"'?X=X.slice(1,X.length-1):X==="TRUE"?X=!0:X==="FALSE"?X=!1:isNaN(Bd(X))?isNaN(Mx(X).getDate())||(X=Ha(X)):(X=Bd(X),S!==null&&_1(S)&&(X=y4(X))),H=!0;break;case"E":z=!0;var R=vx(U[C].slice(1),{r:v,c:b});N[v][b]=[N[v][b],R];break;case"S":V=!0,N[v][b]=[N[v][b],"S5S"];break;case"G":break;case"R":G=parseInt(U[C].slice(1))-1;break;case"C":re=parseInt(U[C].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}if(H&&(N[v][b]&&N[v][b].length==2?N[v][b][0]=X:N[v][b]=X,S=null),V){if(z)throw new Error("SYLK shared formula cannot have own formula");var q=G>-1&&N[G][re];if(!q||!q[1])throw new Error("SYLK shared formula cannot find base");N[v][b][1]=Ere(q[1],{r:v-G,c:b-re})}break;case"F":var J=0;for(C=1;C<U.length;++C)switch(U[C].charAt(0)){case"X":b=parseInt(U[C].slice(1))-1,++J;break;case"Y":for(v=parseInt(U[C].slice(1))-1,D=N.length;D<=v;++D)N[D]=[];break;case"M":M=parseInt(U[C].slice(1))/20;break;case"F":break;case"G":break;case"P":S=T[parseInt(U[C].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(F=U[C].slice(1).split(" "),D=parseInt(F[0],10);D<=parseInt(F[1],10);++D)M=parseInt(F[2],10),_[D-1]=M===0?{hidden:!0}:{wch:M},xm(_[D-1]);break;case"C":b=parseInt(U[C].slice(1))-1,_[b]||(_[b]={});break;case"R":v=parseInt(U[C].slice(1))-1,w[v]||(w[v]={}),M>0?(w[v].hpt=M,w[v].hpx=Qx(M)):M===0&&(w[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}J<1&&(S=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+I)}}return w.length>0&&(B["!rows"]=w),_.length>0&&(B["!cols"]=_),p&&p.sheetRows&&(N=N.slice(0,p.sheetRows)),[N,B]}function i(h,p){var g=a(h,p),v=g[0],b=g[1],y=N1(v,p);return Is(b).forEach(function(C){y[C]=b[C]}),y}function o(h,p){return Tm(i(h,p),p)}function c(h,p,g,v){var b="C;Y"+(g+1)+";X"+(v+1)+";K";switch(h.t){case"n":b+=h.v||0,h.f&&!h.F&&(b+=";E"+qP(h.f,{r:g,c:v}));break;case"b":b+=h.v?"TRUE":"FALSE";break;case"e":b+=h.w||h.v;break;case"d":b+='"'+(h.w||h.v)+'"';break;case"s":b+='"'+h.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function u(h,p){p.forEach(function(g,v){var b="F;W"+(v+1)+" "+(v+1)+" ";g.hidden?b+="0":(typeof g.width=="number"&&!g.wpx&&(g.wpx=kw(g.width)),typeof g.wpx=="number"&&!g.wch&&(g.wch=Bw(g.wpx)),typeof g.wch=="number"&&(b+=Math.round(g.wch))),b.charAt(b.length-1)!=" "&&h.push(b)})}function d(h,p){p.forEach(function(g,v){var b="F;";g.hidden?b+="M0;":g.hpt?b+="M"+20*g.hpt+";":g.hpx&&(b+="M"+20*Tw(g.hpx)+";"),b.length>2&&h.push(b+"R"+(v+1))})}function f(h,p){var g=["ID;PWXL;N;E"],v=[],b=Vn(h["!ref"]),y,C=Array.isArray(h),N=`\r
`;g.push("P;PGeneral"),g.push("F;P0;DG0G8;M255"),h["!cols"]&&u(g,h["!cols"]),h["!rows"]&&d(g,h["!rows"]),g.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var T=b.s.r;T<=b.e.r;++T)for(var S=b.s.c;S<=b.e.c;++S){var B=Qr({r:T,c:S});y=C?(h[T]||[])[S]:h[B],!(!y||y.v==null&&(!y.f||y.F))&&v.push(c(y,h,T,S))}return g.join(N)+N+v.join(N)+N+"E"+N}return{to_workbook:o,to_sheet:i,from_sheet:f}}(),ire=function(){function e(s,i){switch(i.type){case"base64":return t(Pc(s),i);case"binary":return t(s,i);case"buffer":return t(pn&&Buffer.isBuffer(s)?s.toString("binary"):Bm(s),i);case"array":return t(rg(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){for(var o=s.split(`
`),c=-1,u=-1,d=0,f=[];d!==o.length;++d){if(o[d].trim()==="BOT"){f[++c]=[],u=0;continue}if(!(c<0)){var h=o[d].trim().split(","),p=h[0],g=h[1];++d;for(var v=o[d]||"";(v.match(/["]/g)||[]).length&1&&d<o.length-1;)v+=`
`+o[++d];switch(v=v.trim(),+p){case-1:if(v==="BOT"){f[++c]=[],u=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[c][u]=!0:v==="FALSE"?f[c][u]=!1:isNaN(Bd(g))?isNaN(Mx(g).getDate())?f[c][u]=g:f[c][u]=Ha(g):f[c][u]=Bd(g),++u;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[c][u++]=v!==""?v:null;break}if(v==="EOD")break}}return i&&i.sheetRows&&(f=f.slice(0,i.sheetRows)),f}function r(s,i){return N1(e(s,i),i)}function n(s,i){return Tm(r(s,i),i)}var a=function(){var s=function(c,u,d,f,h){c.push(u),c.push(d+","+f),c.push('"'+h.replace(/"/g,'""')+'"')},i=function(c,u,d,f){c.push(u+","+d),c.push(u==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var u=[],d=Vn(c["!ref"]),f,h=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var p=d.s.r;p<=d.e.r;++p){i(u,-1,0,"BOT");for(var g=d.s.c;g<=d.e.c;++g){var v=Qr({r:p,c:g});if(f=h?(c[p]||[])[g]:c[v],!f){i(u,1,0,"");continue}switch(f.t){case"n":var b=f.w;!b&&f.v!=null&&(b=f.v),b==null?f.f&&!f.F?i(u,1,0,"="+f.f):i(u,1,0,""):i(u,0,b,"V");break;case"b":i(u,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=Pu(f.z||Pr[14],Ni(Ha(f.v)))),i(u,0,f.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var y=`\r
`,C=u.join(y);return C}}();return{to_workbook:n,to_sheet:r,from_sheet:a}}(),ore=function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,h){for(var p=f.split(`
`),g=-1,v=-1,b=0,y=[];b!==p.length;++b){var C=p[b].trim().split(":");if(C[0]==="cell"){var N=cs(C[1]);if(y.length<=N.r)for(g=y.length;g<=N.r;++g)y[g]||(y[g]=[]);switch(g=N.r,v=N.c,C[2]){case"t":y[g][v]=e(C[3]);break;case"v":y[g][v]=+C[3];break;case"vtf":var T=C[C.length-1];case"vtc":switch(C[3]){case"nl":y[g][v]=!!+C[4];break;default:y[g][v]=+C[4];break}C[2]=="vtf"&&(y[g][v]=[y[g][v],T])}}}return h&&h.sheetRows&&(y=y.slice(0,h.sheetRows)),y}function n(f,h){return N1(r(f,h),h)}function a(f,h){return Tm(n(f,h),h)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(f){if(!f||!f["!ref"])return"";for(var h=[],p=[],g,v="",b=Zl(f["!ref"]),y=Array.isArray(f),C=b.s.r;C<=b.e.r;++C)for(var N=b.s.c;N<=b.e.c;++N)if(v=Qr({r:C,c:N}),g=y?(f[C]||[])[N]:f[v],!(!g||g.v==null||g.t==="z")){switch(p=["cell",v,"t"],g.t){case"s":case"str":p.push(t(g.v));break;case"n":g.f?(p[2]="vtf",p[3]="n",p[4]=g.v,p[5]=t(g.f)):(p[2]="v",p[3]=g.v);break;case"b":p[2]="vt"+(g.f?"f":"c"),p[3]="nl",p[4]=g.v?"1":"0",p[5]=t(g.f||(g.v?"TRUE":"FALSE"));break;case"d":var T=Ni(Ha(g.v));p[2]="vtc",p[3]="nd",p[4]=""+T,p[5]=g.w||Pu(g.z||Pr[14],T);break;case"e":continue}h.push(p.join(":"))}return h.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),h.push("valueformat:1:text-wiki"),h.join(`
`)}function d(f){return[s,i,o,i,u(f),c].join(`
`)}return{to_workbook:a,to_sheet:n,from_sheet:d}}(),Ux=function(){function e(d,f,h,p,g){g.raw?f[h][p]=d:d===""||(d==="TRUE"?f[h][p]=!0:d==="FALSE"?f[h][p]=!1:isNaN(Bd(d))?isNaN(Mx(d).getDate())?f[h][p]=d:f[h][p]=Ha(d):f[h][p]=Bd(d))}function t(d,f){var h=f||{},p=[];if(!d||d.length===0)return p;for(var g=d.split(/[\r\n]/),v=g.length-1;v>=0&&g[v].length===0;)--v;for(var b=10,y=0,C=0;C<=v;++C)y=g[C].indexOf(" "),y==-1?y=g[C].length:y++,b=Math.max(b,y);for(C=0;C<=v;++C){p[C]=[];var N=0;for(e(g[C].slice(0,b).trim(),p,C,N,h),N=1;N<=(g[C].length-b)/10+1;++N)e(g[C].slice(b+(N-1)*10,b+N*10).trim(),p,C,N,h)}return h.sheetRows&&(p=p.slice(0,h.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function a(d){for(var f={},h=!1,p=0,g=0;p<d.length;++p)(g=d.charCodeAt(p))==34?h=!h:!h&&g in r&&(f[g]=(f[g]||0)+1);g=[];for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p]);if(!g.length){f=n;for(p in f)Object.prototype.hasOwnProperty.call(f,p)&&g.push([f[p],p])}return g.sort(function(v,b){return v[0]-b[0]||n[v[1]]-n[b[1]]}),r[g.pop()[1]]||44}function s(d,f){var h=f||{},p="",g=h.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(p=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(p=d.charAt(4),d=d.slice(6)):p=a(d.slice(0,1024)):h&&h.FS?p=h.FS:p=a(d.slice(0,1024));var b=0,y=0,C=0,N=0,T=0,S=p.charCodeAt(0),B=!1,w=0,_=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var F=h.dateNF!=null?O_e(h.dateNF):null;function M(){var D=d.slice(N,T),I={};if(D.charAt(0)=='"'&&D.charAt(D.length-1)=='"'&&(D=D.slice(1,-1).replace(/""/g,'"')),D.length===0)I.t="z";else if(h.raw)I.t="s",I.v=D;else if(D.trim().length===0)I.t="s",I.v=D;else if(D.charCodeAt(0)==61)D.charCodeAt(1)==34&&D.charCodeAt(D.length-1)==34?(I.t="s",I.v=D.slice(2,-1).replace(/""/g,'"')):cBe(D)?(I.t="n",I.f=D.slice(1)):(I.t="s",I.v=D);else if(D=="TRUE")I.t="b",I.v=!0;else if(D=="FALSE")I.t="b",I.v=!1;else if(!isNaN(C=Bd(D)))I.t="n",h.cellText!==!1&&(I.w=D),I.v=C;else if(!isNaN(Mx(D).getDate())||F&&D.match(F)){I.z=h.dateNF||Pr[14];var U=0;F&&D.match(F)&&(D=D_e(D,h.dateNF,D.match(F)||[]),U=1),h.cellDates?(I.t="d",I.v=Ha(D,U)):(I.t="n",I.v=Ni(Ha(D,U))),h.cellText!==!1&&(I.w=Pu(I.z,I.v instanceof Date?Ni(I.v):I.v)),h.cellNF||delete I.z}else I.t="s",I.v=D;if(I.t=="z"||(h.dense?(g[b]||(g[b]=[]),g[b][y]=I):g[Qr({c:y,r:b})]=I),N=T+1,_=d.charCodeAt(N),v.e.c<y&&(v.e.c=y),v.e.r<b&&(v.e.r=b),w==S)++y;else if(y=0,++b,h.sheetRows&&h.sheetRows<=b)return!0}e:for(;T<d.length;++T)switch(w=d.charCodeAt(T)){case 34:_===34&&(B=!B);break;case S:case 10:case 13:if(!B&&M())break e;break}return T-N>0&&M(),g["!ref"]=nn(v),g}function i(d,f){return!(f&&f.PRN)||f.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,f):N1(t(d,f),f)}function o(d,f){var h="",p=f.type=="string"?[0,0,0,0]:rR(d,f);switch(f.type){case"base64":h=Pc(d);break;case"binary":h=d;break;case"buffer":f.codepage==65001?h=d.toString("utf8"):f.codepage&&typeof bw<"u"||(h=pn&&Buffer.isBuffer(d)?d.toString("binary"):Bm(d));break;case"array":h=rg(d);break;case"string":h=d;break;default:throw new Error("Unrecognized type "+f.type)}return p[0]==239&&p[1]==187&&p[2]==191?h=Ca(h.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?h=Ca(h):f.type=="binary"&&typeof bw<"u",h.slice(0,19)=="socialcalc:version:"?ore.to_sheet(f.type=="string"?h:Ca(h),f):i(h,f)}function c(d,f){return Tm(o(d,f),f)}function u(d){for(var f=[],h=Vn(d["!ref"]),p,g=Array.isArray(d),v=h.s.r;v<=h.e.r;++v){for(var b=[],y=h.s.c;y<=h.e.c;++y){var C=Qr({r:v,c:y});if(p=g?(d[v]||[])[y]:d[C],!p||p.v==null){b.push("          ");continue}for(var N=(p.w||(ph(p),p.w)||"").slice(0,10);N.length<10;)N+=" ";b.push(N+(y===0?" ":""))}f.push(b.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}();function WNe(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var a=sre.to_workbook(e,r);return r.WTF=n,a}catch(s){if(r.WTF=n,!s.message.match(/SYLK bad record ID/)&&n)throw s;return Ux.to_workbook(e,t)}}var Lp=function(){function e(R,q,J){if(R){po(R,R.l||0);for(var te=J.Enum||G;R.l<R.length;){var ie=R.read_shift(2),Ae=te[ie]||te[65535],oe=R.read_shift(2),ce=R.l+oe,pe=Ae.f&&Ae.f(R,oe,J);if(R.l=ce,q(pe,Ae,ie))return}}}function t(R,q){switch(q.type){case"base64":return r(Bc(Pc(R)),q);case"binary":return r(Bc(R),q);case"buffer":case"array":return r(R,q)}throw"Unsupported type "+q.type}function r(R,q){if(!R)return R;var J=q||{},te=J.dense?[]:{},ie="Sheet1",Ae="",oe=0,ce={},pe=[],Ie=[],ne={s:{r:0,c:0},e:{r:0,c:0}},Se=J.sheetRows||0;if(R[2]==0&&(R[3]==8||R[3]==9)&&R.length>=16&&R[14]==5&&R[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(R[2]==2)J.Enum=G,e(R,function(je,He,Xe){switch(Xe){case 0:J.vers=je,je>=4096&&(J.qpro=!0);break;case 6:ne=je;break;case 204:je&&(Ae=je);break;case 222:Ae=je;break;case 15:case 51:J.qpro||(je[1].v=je[1].v.slice(1));case 13:case 14:case 16:Xe==14&&(je[2]&112)==112&&(je[2]&15)>1&&(je[2]&15)<15&&(je[1].z=J.dateNF||Pr[14],J.cellDates&&(je[1].t="d",je[1].v=y4(je[1].v))),J.qpro&&je[3]>oe&&(te["!ref"]=nn(ne),ce[ie]=te,pe.push(ie),te=J.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},oe=je[3],ie=Ae||"Sheet"+(oe+1),Ae="");var ye=J.dense?(te[je[0].r]||[])[je[0].c]:te[Qr(je[0])];if(ye){ye.t=je[1].t,ye.v=je[1].v,je[1].z!=null&&(ye.z=je[1].z),je[1].f!=null&&(ye.f=je[1].f);break}J.dense?(te[je[0].r]||(te[je[0].r]=[]),te[je[0].r][je[0].c]=je[1]):te[Qr(je[0])]=je[1];break}},J);else if(R[2]==26||R[2]==14)J.Enum=re,R[2]==14&&(J.qpro=!0,R.l=0),e(R,function(je,He,Xe){switch(Xe){case 204:ie=je;break;case 22:je[1].v=je[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(je[3]>oe&&(te["!ref"]=nn(ne),ce[ie]=te,pe.push(ie),te=J.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},oe=je[3],ie="Sheet"+(oe+1)),Se>0&&je[0].r>=Se)break;J.dense?(te[je[0].r]||(te[je[0].r]=[]),te[je[0].r][je[0].c]=je[1]):te[Qr(je[0])]=je[1],ne.e.c<je[0].c&&(ne.e.c=je[0].c),ne.e.r<je[0].r&&(ne.e.r=je[0].r);break;case 27:je[14e3]&&(Ie[je[14e3][0]]=je[14e3][1]);break;case 1537:Ie[je[0]]=je[1],je[0]==oe&&(ie=je[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+R[2]);if(te["!ref"]=nn(ne),ce[Ae||ie]=te,pe.push(Ae||ie),!Ie.length)return{SheetNames:pe,Sheets:ce};for(var De={},_e=[],he=0;he<Ie.length;++he)ce[pe[he]]?(_e.push(Ie[he]||pe[he]),De[Ie[he]]=ce[Ie[he]]||ce[pe[he]]):(_e.push(Ie[he]),De[Ie[he]]={"!ref":"A1"});return{SheetNames:_e,Sheets:De}}function n(R,q){var J=q||{};if(+J.codepage>=0&&wd(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var te=Yl(),ie=Vn(R["!ref"]),Ae=Array.isArray(R),oe=[];qt(te,0,s(1030)),qt(te,6,c(ie));for(var ce=Math.min(ie.e.r,8191),pe=ie.s.r;pe<=ce;++pe)for(var Ie=Ws(pe),ne=ie.s.c;ne<=ie.e.c;++ne){pe===ie.s.r&&(oe[ne]=ls(ne));var Se=oe[ne]+Ie,De=Ae?(R[pe]||[])[ne]:R[Se];if(!(!De||De.t=="z"))if(De.t=="n")(De.v|0)==De.v&&De.v>=-32768&&De.v<=32767?qt(te,13,p(pe,ne,De.v)):qt(te,14,v(pe,ne,De.v));else{var _e=ph(De);qt(te,15,f(pe,ne,_e.slice(0,239)))}}return qt(te,1),te.end()}function a(R,q){var J=q||{};if(+J.codepage>=0&&wd(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var te=Yl();qt(te,0,i(R));for(var ie=0,Ae=0;ie<R.SheetNames.length;++ie)(R.Sheets[R.SheetNames[ie]]||{})["!ref"]&&qt(te,27,z(R.SheetNames[ie],Ae++));var oe=0;for(ie=0;ie<R.SheetNames.length;++ie){var ce=R.Sheets[R.SheetNames[ie]];if(!(!ce||!ce["!ref"])){for(var pe=Vn(ce["!ref"]),Ie=Array.isArray(ce),ne=[],Se=Math.min(pe.e.r,8191),De=pe.s.r;De<=Se;++De)for(var _e=Ws(De),he=pe.s.c;he<=pe.e.c;++he){De===pe.s.r&&(ne[he]=ls(he));var je=ne[he]+_e,He=Ie?(ce[De]||[])[he]:ce[je];if(!(!He||He.t=="z"))if(He.t=="n")qt(te,23,M(De,he,oe,He.v));else{var Xe=ph(He);qt(te,22,w(De,he,oe,Xe.slice(0,239)))}}++oe}}return qt(te,1),te.end()}function s(R){var q=wt(2);return q.write_shift(2,R),q}function i(R){var q=wt(26);q.write_shift(2,4096),q.write_shift(2,4),q.write_shift(4,0);for(var J=0,te=0,ie=0,Ae=0;Ae<R.SheetNames.length;++Ae){var oe=R.SheetNames[Ae],ce=R.Sheets[oe];if(!(!ce||!ce["!ref"])){++ie;var pe=Zl(ce["!ref"]);J<pe.e.r&&(J=pe.e.r),te<pe.e.c&&(te=pe.e.c)}}return J>8191&&(J=8191),q.write_shift(2,J),q.write_shift(1,ie),q.write_shift(1,te),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(1,1),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(4,0),q}function o(R,q,J){var te={s:{c:0,r:0},e:{c:0,r:0}};return q==8&&J.qpro?(te.s.c=R.read_shift(1),R.l++,te.s.r=R.read_shift(2),te.e.c=R.read_shift(1),R.l++,te.e.r=R.read_shift(2),te):(te.s.c=R.read_shift(2),te.s.r=R.read_shift(2),q==12&&J.qpro&&(R.l+=2),te.e.c=R.read_shift(2),te.e.r=R.read_shift(2),q==12&&J.qpro&&(R.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function c(R){var q=wt(8);return q.write_shift(2,R.s.c),q.write_shift(2,R.s.r),q.write_shift(2,R.e.c),q.write_shift(2,R.e.r),q}function u(R,q,J){var te=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(te[0].c=R.read_shift(1),te[3]=R.read_shift(1),te[0].r=R.read_shift(2),R.l+=2):(te[2]=R.read_shift(1),te[0].c=R.read_shift(2),te[0].r=R.read_shift(2)),te}function d(R,q,J){var te=R.l+q,ie=u(R,q,J);if(ie[1].t="s",J.vers==20768){R.l++;var Ae=R.read_shift(1);return ie[1].v=R.read_shift(Ae,"utf8"),ie}return J.qpro&&R.l++,ie[1].v=R.read_shift(te-R.l,"cstr"),ie}function f(R,q,J){var te=wt(7+J.length);te.write_shift(1,255),te.write_shift(2,q),te.write_shift(2,R),te.write_shift(1,39);for(var ie=0;ie<te.length;++ie){var Ae=J.charCodeAt(ie);te.write_shift(1,Ae>=128?95:Ae)}return te.write_shift(1,0),te}function h(R,q,J){var te=u(R,q,J);return te[1].v=R.read_shift(2,"i"),te}function p(R,q,J){var te=wt(7);return te.write_shift(1,255),te.write_shift(2,q),te.write_shift(2,R),te.write_shift(2,J,"i"),te}function g(R,q,J){var te=u(R,q,J);return te[1].v=R.read_shift(8,"f"),te}function v(R,q,J){var te=wt(13);return te.write_shift(1,255),te.write_shift(2,q),te.write_shift(2,R),te.write_shift(8,J,"f"),te}function b(R,q,J){var te=R.l+q,ie=u(R,q,J);if(ie[1].v=R.read_shift(8,"f"),J.qpro)R.l=te;else{var Ae=R.read_shift(2);T(R.slice(R.l,R.l+Ae),ie),R.l+=Ae}return ie}function y(R,q,J){var te=q&32768;return q&=-32769,q=(te?R:0)+(q>=8192?q-16384:q),(te?"":"$")+(J?ls(q):Ws(q))}var C={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},N=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function T(R,q){po(R,0);for(var J=[],te=0,ie="",Ae="",oe="",ce="";R.l<R.length;){var pe=R[R.l++];switch(pe){case 0:J.push(R.read_shift(8,"f"));break;case 1:Ae=y(q[0].c,R.read_shift(2),!0),ie=y(q[0].r,R.read_shift(2),!1),J.push(Ae+ie);break;case 2:{var Ie=y(q[0].c,R.read_shift(2),!0),ne=y(q[0].r,R.read_shift(2),!1);Ae=y(q[0].c,R.read_shift(2),!0),ie=y(q[0].r,R.read_shift(2),!1),J.push(Ie+ne+":"+Ae+ie)}break;case 3:if(R.l<R.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(R.read_shift(2));break;case 6:{for(var Se="";pe=R[R.l++];)Se+=String.fromCharCode(pe);J.push('"'+Se.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:ce=J.pop(),oe=J.pop(),J.push(["AND","OR"][pe-20]+"("+oe+","+ce+")");break;default:if(pe<32&&N[pe])ce=J.pop(),oe=J.pop(),J.push(oe+N[pe]+ce);else if(C[pe]){if(te=C[pe][1],te==69&&(te=R[R.l++]),te>J.length){console.error("WK1 bad formula parse 0x"+pe.toString(16)+":|"+J.join("|")+"|");return}var De=J.slice(-te);J.length-=te,J.push(C[pe][0]+"("+De.join(",")+")")}else return pe<=7?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=24?console.error("WK1 unsupported op "+pe.toString(16)):pe<=30?console.error("WK1 invalid opcode "+pe.toString(16)):pe<=115?console.error("WK1 unsupported function opcode "+pe.toString(16)):console.error("WK1 unrecognized opcode "+pe.toString(16))}}J.length==1?q[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function S(R){var q=[{c:0,r:0},{t:"n",v:0},0];return q[0].r=R.read_shift(2),q[3]=R[R.l++],q[0].c=R[R.l++],q}function B(R,q){var J=S(R);return J[1].t="s",J[1].v=R.read_shift(q-4,"cstr"),J}function w(R,q,J,te){var ie=wt(6+te.length);ie.write_shift(2,R),ie.write_shift(1,J),ie.write_shift(1,q),ie.write_shift(1,39);for(var Ae=0;Ae<te.length;++Ae){var oe=te.charCodeAt(Ae);ie.write_shift(1,oe>=128?95:oe)}return ie.write_shift(1,0),ie}function _(R,q){var J=S(R);J[1].v=R.read_shift(2);var te=J[1].v>>1;if(J[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return J[1].v=te,J}function F(R,q){var J=S(R),te=R.read_shift(4),ie=R.read_shift(4),Ae=R.read_shift(2);if(Ae==65535)return te===0&&ie===3221225472?(J[1].t="e",J[1].v=15):te===0&&ie===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var oe=Ae&32768;return Ae=(Ae&32767)-16446,J[1].v=(1-oe*2)*(ie*Math.pow(2,Ae+32)+te*Math.pow(2,Ae)),J}function M(R,q,J,te){var ie=wt(14);if(ie.write_shift(2,R),ie.write_shift(1,J),ie.write_shift(1,q),te==0)return ie.write_shift(4,0),ie.write_shift(4,0),ie.write_shift(2,65535),ie;var Ae=0,oe=0,ce=0,pe=0;return te<0&&(Ae=1,te=-te),oe=Math.log2(te)|0,te/=Math.pow(2,oe-31),pe=te>>>0,(pe&2147483648)==0&&(te/=2,++oe,pe=te>>>0),te-=pe,pe|=2147483648,pe>>>=0,te*=Math.pow(2,32),ce=te>>>0,ie.write_shift(4,ce),ie.write_shift(4,pe),oe+=16383+(Ae?32768:0),ie.write_shift(2,oe),ie}function D(R,q){var J=F(R);return R.l+=q-14,J}function I(R,q){var J=S(R),te=R.read_shift(4);return J[1].v=te>>6,J}function U(R,q){var J=S(R),te=R.read_shift(8,"f");return J[1].v=te,J}function P(R,q){var J=U(R);return R.l+=q-10,J}function X(R,q){return R[R.l+q-1]==0?R.read_shift(q,"cstr"):""}function H(R,q){var J=R[R.l++];J>q-1&&(J=q-1);for(var te="";te.length<J;)te+=String.fromCharCode(R[R.l++]);return te}function Y(R,q,J){if(!(!J.qpro||q<21)){var te=R.read_shift(1);R.l+=17,R.l+=1,R.l+=2;var ie=R.read_shift(q-21,"cstr");return[te,ie]}}function V(R,q){for(var J={},te=R.l+q;R.l<te;){var ie=R.read_shift(2);if(ie==14e3){for(J[ie]=[0,""],J[ie][0]=R.read_shift(2);R[R.l];)J[ie][1]+=String.fromCharCode(R[R.l]),R.l++;R.l++}}return J}function z(R,q){var J=wt(5+R.length);J.write_shift(2,14e3),J.write_shift(2,q);for(var te=0;te<R.length;++te){var ie=R.charCodeAt(te);J[J.l++]=ie>127?95:ie}return J[J.l++]=0,J}var G={0:{n:"BOF",f:ci},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:h},14:{n:"NUMBER",f:g},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:X},222:{n:"SHEETNAMELP",f:H},65535:{n:""}},re={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:B},23:{n:"NUMBER17",f:F},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:D},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:V},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:U},40:{n:"FORMULA28",f:P},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:X},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Y},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:a,to_workbook:t}}();function XNe(e){var t={},r=e.match(nl),n=0,a=!1;if(r)for(;n!=r.length;++n){var s=Gr(r[n]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;t.cp=xP[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=s.val;break;case"<sz":t.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":s.rgb&&(t.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(s[0].charCodeAt(1)!==47&&!a)throw new Error("Unrecognized rich format "+s[0])}}return t}var YNe=function(){var e=Ew("t"),t=Ew("rPr");function r(s){var i=s.match(e);if(!i)return{t:"s",v:""};var o={t:"s",v:Hn(i[1])},c=s.match(t);return c&&(o.s=XNe(c[1])),o}var n=/<(?:\w+:)?r>/g,a=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(a).map(r).filter(function(o){return o.v})}}(),JNe=function(){var t=/(\r\n|\n)/g;function r(a,s,i){var o=[];a.u&&o.push("text-decoration: underline;"),a.uval&&o.push("text-underline-style:"+a.uval+";"),a.sz&&o.push("font-size:"+a.sz+"pt;"),a.outline&&o.push("text-effect: outline;"),a.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),a.b&&(s.push("<b>"),i.push("</b>")),a.i&&(s.push("<i>"),i.push("</i>")),a.strike&&(s.push("<s>"),i.push("</s>"));var c=a.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),i.push("</"+c+">")),i.push("</span>"),a}function n(a){var s=[[],a.v,[]];return a.v?(a.s&&r(a.s,s[0],s[2]),s[0].join("")+s[1].replace(t,"<br/>")+s[2].join("")):""}return function(s){return s.map(n).join("")}}(),ZNe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,e4e=/<(?:\w+:)?r>/,t4e=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function VP(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Hn(Ca(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ca(e),r&&(n.h=BP(n.t))):e.match(e4e)&&(n.r=Ca(e),n.t=Hn(Ca((e.replace(t4e,"").match(ZNe)||[]).join("").replace(nl,""))),r&&(n.h=JNe(YNe(n.r)))),n):{t:""}}var r4e=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,n4e=/<(?:\w+:)?(?:si|sstItem)>/g,a4e=/<\/(?:\w+:)?(?:si|sstItem)>/;function s4e(e,t){var r=[],n="";if(!e)return r;var a=e.match(r4e);if(a){n=a[2].replace(n4e,"").split(a4e);for(var s=0;s!=n.length;++s){var i=VP(n[s].trim(),t);i!=null&&(r[r.length]=i)}a=Gr(a[1]),r.Count=a.count,r.Unique=a.uniqueCount}return r}var i4e=/^\s|\s$|[\t\n\r]/;function lre(e,t){if(!t.bookSST)return"";var r=[Ys];r[r.length]=Kt("sst",null,{xmlns:bg[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var a=e[n],s="<si>";a.r?s+=a.r:(s+="<t",a.t||(a.t=""),a.t.match(i4e)&&(s+=' xml:space="preserve"'),s+=">"+va(a.t)+"</t>"),s+="</si>",r[r.length]=s}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function o4e(e){return[e.read_shift(4),e.read_shift(4)]}function l4e(e,t){var r=[],n=!1;return Th(e,function(s,i,o){switch(o){case 159:r.Count=s[0],r.Unique=s[1];break;case 19:r.push(s);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||t.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function c4e(e,t){return t||(t=wt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var u4e=bSe;function d4e(e){var t=Yl();Rt(t,159,c4e(e));for(var r=0;r<e.length;++r)Rt(t,19,u4e(e[r]));return Rt(t,160),t.end()}function cre(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function ah(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function A4e(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=ah(e,4),t.U=ah(e,4),t.W=ah(e,4),t}function f4e(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},a=e.read_shift(4),s=[];a-- >0;)s.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=s,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function h4e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(f4e(e));return t}function m4e(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function p4e(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=ah(e,4),t.U=ah(e,4),t.W=ah(e,4),t}function g4e(e){var t=p4e(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function ure(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var a=!1;switch(n.AlgID){case 26126:case 26127:case 26128:a=n.Flags==36;break;case 26625:a=n.Flags==4;break;case 0:a=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!a)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function dre(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function v4e(e){var t=ah(e);switch(t.Minor){case 2:return[t.Minor,x4e(e)];case 3:return[t.Minor,b4e()];case 4:return[t.Minor,y4e(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function x4e(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=ure(e,r),a=dre(e,e.length-e.l);return{t:"Std",h:n,v:a}}function b4e(){throw new Error("File is password-protected: ECMA-376 Extensible")}function y4e(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(nl,function(s){var i=Gr(s);switch(ef(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function w4e(e,t){var r={},n=r.EncryptionVersionInfo=ah(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var a=e.read_shift(4);return t-=4,r.EncryptionHeader=ure(e,a),t-=a,r.EncryptionVerifier=dre(e,t),r}function E4e(e){var t={},r=t.EncryptionVersionInfo=ah(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function zP(e){var t=0,r,n=cre(e),a=n.length+1,s,i,o,c,u;for(r=vm(a),r[0]=n.length,s=1;s!=a;++s)r[s]=n[s-1];for(s=a-1;s>=0;--s)i=r[s],o=(t&16384)===0?0:1,c=t<<1&32767,u=o|c,t=u^i;return t^52811}var Are=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},a=function(i,o){return n(i^o)},s=function(i){for(var o=t[i.length-1],c=104,u=i.length-1;u>=0;--u)for(var d=i[u],f=0;f!=7;++f)d&64&&(o^=r[c]),d*=2,--c;return o};return function(i){for(var o=cre(i),c=s(o),u=o.length,d=vm(16),f=0;f!=16;++f)d[f]=0;var h,p,g;for((u&1)===1&&(h=c>>8,d[u]=a(e[0],h),--u,h=c&255,p=o[o.length-1],d[u]=a(p,h));u>0;)--u,h=c>>8,d[u]=a(o[u],h),--u,h=c&255,d[u]=a(o[u],h);for(u=15,g=15-o.length;g>0;)h=c>>8,d[u]=a(e[g],h),--u,--g,h=c&255,d[u]=a(o[u],h),--u,--g;return d}}(),C4e=function(e,t,r,n,a){a||(a=t),n||(n=Are(e));var s,i;for(s=0;s!=t.length;++s)i=t[s],i^=n[r],i=(i>>5|i<<3)&255,a[s]=i,++r;return[a,r,n]},_4e=function(e){var t=0,r=Are(e);return function(n){var a=C4e("",n,t,r);return t=a[1],a[0]}};function S4e(e,t,r,n){var a={key:ci(e),verificationBytes:ci(e)};return r.password&&(a.verifier=zP(r.password)),n.valid=a.verificationBytes===a.verifier,n.valid&&(n.insitu=_4e(r.password)),a}function N4e(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=E4e(e):n.Data=w4e(e,t),n}function k4e(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?N4e(e,t-2,n):S4e(e,r.biff>=8?t:t-2,r,n),n}var fre=function(){function e(a,s){switch(s.type){case"base64":return t(Pc(a),s);case"binary":return t(a,s);case"buffer":return t(pn&&Buffer.isBuffer(a)?a.toString("binary"):Bm(a),s);case"array":return t(rg(a),s)}throw new Error("Unrecognized type "+s.type)}function t(a,s){var i=s||{},o=i.dense?[]:{},c=a.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,f){Array.isArray(o)&&(o[f]=[]);for(var h=/\\\w+\b/g,p=0,g,v=-1;g=h.exec(d);){switch(g[0]){case"\\cell":var b=d.slice(p,h.lastIndex-g[0].length);if(b[0]==" "&&(b=b.slice(1)),++v,b.length){var y={v:b,t:"s"};Array.isArray(o)?o[f][v]=y:o[Qr({r:f,c:v})]=y}break}p=h.lastIndex}v>u.e.c&&(u.e.c=v)}),o["!ref"]=nn(u),o}function r(a,s){return Tm(e(a,s),s)}function n(a){for(var s=["{\\rtf1\\ansi"],i=Vn(a["!ref"]),o,c=Array.isArray(a),u=i.s.r;u<=i.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var f=Qr({r:u,c:d});o=c?(a[u]||[])[d]:a[f],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(ph(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function B4e(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Nw(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function T4e(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,a=Math.max(t,r,n),s=Math.min(t,r,n),i=a-s;if(i===0)return[0,0,t];var o=0,c=0,u=a+s;switch(c=i/(u>1?2-u:u),a){case t:o=((r-n)/i+6)%6;break;case r:o=(n-t)/i+2;break;case n:o=(t-r)/i+4;break}return[o/6,c,u/2]}function j4e(e){var t=e[0],r=e[1],n=e[2],a=r*2*(n<.5?n:1-n),s=n-a/2,i=[s,s,s],o=6*t,c;if(r!==0)switch(o|0){case 0:case 6:c=a*o,i[0]+=a,i[1]+=c;break;case 1:c=a*(2-o),i[0]+=c,i[1]+=a;break;case 2:c=a*(o-2),i[1]+=a,i[2]+=c;break;case 3:c=a*(4-o),i[1]+=c,i[2]+=a;break;case 4:c=a*(o-4),i[2]+=a,i[0]+=c;break;case 5:c=a*(6-o),i[2]+=c,i[0]+=a;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function n5(e,t){if(t===0)return e;var r=T4e(B4e(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Nw(j4e(r))}var hre=6,I4e=15,F4e=1,$o=hre;function kw(e){return Math.floor((e+Math.round(128/$o)/256)*$o)}function Bw(e){return Math.floor((e-5)/$o*100+.5)/100}function a5(e){return Math.round((e*$o+5)/$o*256)/256}function GT(e){return a5(Bw(kw(e)))}function $P(e){var t=Math.abs(e-GT(e)),r=$o;if(t>.005)for($o=F4e;$o<I4e;++$o)Math.abs(e-GT(e))<=t&&(t=Math.abs(e-GT(e)),r=$o);$o=r}function xm(e){e.width?(e.wpx=kw(e.width),e.wch=Bw(e.wpx),e.MDW=$o):e.wpx?(e.wch=Bw(e.wpx),e.width=a5(e.wch),e.MDW=$o):typeof e.wch=="number"&&(e.width=a5(e.wch),e.wpx=kw(e.width),e.MDW=$o),e.customWidth&&delete e.customWidth}var O4e=96,mre=O4e;function Tw(e){return e*96/mre}function Qx(e){return e*mre/96}var D4e={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function P4e(e,t,r,n){t.Borders=[];var a={},s=!1;(e[0].match(nl)||[]).forEach(function(i){var o=Gr(i);switch(ef(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":a={},o.diagonalUp&&(a.diagonalUp=Ua(o.diagonalUp)),o.diagonalDown&&(a.diagonalDown=Ua(o.diagonalDown)),t.Borders.push(a);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function R4e(e,t,r,n){t.Fills=[];var a={},s=!1;(e[0].match(nl)||[]).forEach(function(i){var o=Gr(i);switch(ef(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":a={},t.Fills.push(a);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(a),a={};break;case"<patternFill":case"<patternFill>":o.patternType&&(a.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":a.bgColor||(a.bgColor={}),o.indexed&&(a.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(a.bgColor.theme=parseInt(o.theme,10)),o.tint&&(a.bgColor.tint=parseFloat(o.tint)),o.rgb&&(a.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":a.fgColor||(a.fgColor={}),o.theme&&(a.fgColor.theme=parseInt(o.theme,10)),o.tint&&(a.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(a.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function L4e(e,t,r,n){t.Fonts=[];var a={},s=!1;(e[0].match(nl)||[]).forEach(function(i){var o=Gr(i);switch(ef(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(a),a={};break;case"<name":o.val&&(a.name=Ca(o.val));break;case"<name/>":case"</name>":break;case"<b":a.bold=o.val?Ua(o.val):1;break;case"<b/>":a.bold=1;break;case"<i":a.italic=o.val?Ua(o.val):1;break;case"<i/>":a.italic=1;break;case"<u":switch(o.val){case"none":a.underline=0;break;case"single":a.underline=1;break;case"double":a.underline=2;break;case"singleAccounting":a.underline=33;break;case"doubleAccounting":a.underline=34;break}break;case"<u/>":a.underline=1;break;case"<strike":a.strike=o.val?Ua(o.val):1;break;case"<strike/>":a.strike=1;break;case"<outline":a.outline=o.val?Ua(o.val):1;break;case"<outline/>":a.outline=1;break;case"<shadow":a.shadow=o.val?Ua(o.val):1;break;case"<shadow/>":a.shadow=1;break;case"<condense":a.condense=o.val?Ua(o.val):1;break;case"<condense/>":a.condense=1;break;case"<extend":a.extend=o.val?Ua(o.val):1;break;case"<extend/>":a.extend=1;break;case"<sz":o.val&&(a.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(a.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(a.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(a.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=xP[parseInt(o.val,10)];break;case"<color":if(a.color||(a.color={}),o.auto&&(a.color.auto=Ua(o.auto)),o.rgb)a.color.rgb=o.rgb.slice(-6);else if(o.indexed){a.color.index=parseInt(o.indexed,10);var c=Pp[a.color.index];a.color.index==81&&(c=Pp[1]),c||(c=Pp[1]),a.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(a.color.theme=parseInt(o.theme,10),o.tint&&(a.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(a.color.rgb=n5(r.themeElements.clrScheme[a.color.theme].rgb,a.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(n&&n.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function M4e(e,t,r){t.NumberFmt=[];for(var n=Is(Pr),a=0;a<n.length;++a)t.NumberFmt[n[a]]=Pr[n[a]];var s=e[0].match(nl);if(s)for(a=0;a<s.length;++a){var i=Gr(s[a]);switch(ef(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=Hn(Ca(i.formatCode)),c=parseInt(i.numFmtId,10);if(t.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=o}nh(o,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function U4e(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Kt("numFmt",null,{numFmtId:n,formatCode:va(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Kt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var yC=["numFmtId","fillId","fontId","borderId","xfId"],wC=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Q4e(e,t,r){t.CellXf=[];var n,a=!1;(e[0].match(nl)||[]).forEach(function(s){var i=Gr(s),o=0;switch(ef(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<yC.length;++o)n[yC[o]]&&(n[yC[o]]=parseInt(n[yC[o]],10));for(o=0;o<wC.length;++o)n[wC[o]]&&(n[wC[o]]=Ua(n[wC[o]]));if(t.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[o]){n.numFmtId=o;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};i.vertical&&(c.vertical=i.vertical),i.horizontal&&(c.horizontal=i.horizontal),i.textRotation!=null&&(c.textRotation=i.textRotation),i.indent&&(c.indent=i.indent),i.wrapText&&(c.wrapText=Ua(i.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(r&&r.WTF&&!a)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function H4e(e){var t=[];return t[t.length]=Kt("cellXfs",null),e.forEach(function(r){t[t.length]=Kt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Kt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var V4e=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,a=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=o.match(t))&&M4e(f,d,u),(f=o.match(a))&&L4e(f,d,c,u),(f=o.match(n))&&R4e(f,d,c,u),(f=o.match(s))&&P4e(f,d,c,u),(f=o.match(r))&&Q4e(f,d,u),d}}();function pre(e,t){var r=[Ys,Kt("styleSheet",null,{xmlns:bg[0],"xmlns:vt":_i.vt})],n;return e.SSF&&(n=U4e(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=H4e(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function z4e(e,t){var r=e.read_shift(2),n=Jo(e);return[r,n]}function $4e(e,t,r){r||(r=wt(6+4*t.length)),r.write_shift(2,e),Wi(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function G4e(e,t,r){var n={};n.sz=e.read_shift(2)/20;var a=NSe(e);a.fItalic&&(n.italic=1),a.fCondense&&(n.condense=1),a.fExtend&&(n.extend=1),a.fShadow&&(n.shadow=1),a.fOutline&&(n.outline=1),a.fStrikeout&&(n.strike=1);var s=e.read_shift(2);switch(s===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=e.read_shift(1);i!=0&&(n.underline=i);var o=e.read_shift(1);o>0&&(n.family=o);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=SSe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Jo(e),n}function K4e(e,t){t||(t=wt(153)),t.write_shift(2,e.sz*20),kSe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),e5(e.color,t);var n=0;return n=2,t.write_shift(1,n),Wi(e.name,t),t.length>t.l?t.slice(0,t.l):t}var q4e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],KT,W4e=tl;function iV(e,t){t||(t=wt(84)),KT||(KT=x4(q4e));var r=KT[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(e5({auto:1},t),e5({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function X4e(e,t){var r=e.l+t,n=e.read_shift(2),a=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:a}}function gre(e,t,r){r||(r=wt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function Pb(e,t){return t||(t=wt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var Y4e=tl;function J4e(e,t){return t||(t=wt(51)),t.write_shift(1,0),Pb(null,t),Pb(null,t),Pb(null,t),Pb(null,t),Pb(null,t),t.length>t.l?t.slice(0,t.l):t}function Z4e(e,t){return t||(t=wt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),ZS(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function eke(e,t,r){var n=wt(2052);return n.write_shift(4,e),ZS(t,n),ZS(r,n),n.length>n.l?n.slice(0,n.l):n}function tke(e,t,r){var n={};n.NumberFmt=[];for(var a in Pr)n.NumberFmt[a]=Pr[a];n.CellXf=[],n.Fonts=[];var s=[],i=!1;return Th(e,function(c,u,d){switch(d){case 44:n.NumberFmt[c[0]]=c[1],nh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=n5(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:s.push(d),i=!0;break;case 38:s.pop(),i=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!i||r.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function rke(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&++r}),r!=0&&(Rt(e,615,Td(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&Rt(e,44,$4e(a,t[a]))}),Rt(e,616))}}function nke(e){var t=1;Rt(e,611,Td(t)),Rt(e,43,K4e({sz:12,color:{theme:1},name:"Calibri",family:2})),Rt(e,612)}function ake(e){var t=2;Rt(e,603,Td(t)),Rt(e,45,iV({patternType:"none"})),Rt(e,45,iV({patternType:"gray125"})),Rt(e,604)}function ske(e){var t=1;Rt(e,613,Td(t)),Rt(e,46,J4e()),Rt(e,614)}function ike(e){var t=1;Rt(e,626,Td(t)),Rt(e,47,gre({numFmtId:0},65535)),Rt(e,627)}function oke(e,t){Rt(e,617,Td(t.length)),t.forEach(function(r){Rt(e,47,gre(r,0))}),Rt(e,618)}function lke(e){var t=1;Rt(e,619,Td(t)),Rt(e,48,Z4e({xfId:0,name:"Normal"})),Rt(e,620)}function cke(e){var t=0;Rt(e,505,Td(t)),Rt(e,506)}function uke(e){var t=0;Rt(e,508,eke(t,"TableStyleMedium9","PivotStyleMedium4")),Rt(e,509)}function dke(e,t){var r=Yl();return Rt(r,278),rke(r,e.SSF),nke(r),ake(r),ske(r),ike(r),oke(r,t.cellXfs),lke(r),cke(r),uke(r),Rt(r,279),r.end()}var Ake=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function fke(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(nl)||[]).forEach(function(a){var s=Gr(a);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=s.val;break;case"<a:sysClr":n.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(t.themeElements.clrScheme[Ake.indexOf(s[0])]=n,n={}):n.name=s[0].slice(3,s[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function hke(){}function mke(){}var pke=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,gke=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,vke=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function xke(e,t,r){t.themeElements={};var n;[["clrScheme",pke,fke],["fontScheme",gke,hke],["fmtScheme",vke,mke]].forEach(function(a){if(!(n=e.match(a[1])))throw new Error(a[0]+" not found in themeElements");a[2](n,t,r)})}var bke=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function vre(e,t){(!e||e.length===0)&&(e=GP());var r,n={};if(!(r=e.match(bke)))throw new Error("themeElements not found in theme");return xke(r[0],n,t),n.raw=e,n}function GP(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Ys];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function yke(e,t,r){var n=e.l+t,a=e.read_shift(4);if(a!==124226){if(!r.cellStyles){e.l=n;return}var s=e.slice(e.l);e.l=n;var i;try{i=ute(s,{type:"array"})}catch{return}var o=Tc(i,"theme/theme/theme1.xml",!0);if(o)return vre(o,r)}}function wke(e){return e.read_shift(4)}function Eke(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Cke(e,4);break;case 2:t.xclrValue=Yte(e);break;case 3:t.xclrValue=wke(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Cke(e,t){return tl(e,t)}function _ke(e,t){return tl(e,t)}function Ske(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Eke(e);break;case 6:n[1]=_ke(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Nke(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var a=e.read_shift(2),s=[];a-- >0;)s.push(Ske(e,r-e.l));return{ixfe:n,ext:s}}function kke(e,t){t.forEach(function(r){r[0]})}function Bke(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Jo(e)}}function Tke(e){var t=wt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Wi(e.name,t),t.slice(0,t.l)}function jke(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function Ike(e){var t=wt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function Fke(e,t){var r=wt(8+2*t.length);return r.write_shift(4,e),Wi(t,r),r.slice(0,r.l)}function Oke(e){return e.l+=4,e.read_shift(4)!=0}function Dke(e,t){var r=wt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function Pke(e,t,r){var n={Types:[],Cell:[],Value:[]},a=r||{},s=[],i=!1,o=2;return Th(e,function(c,u,d){switch(d){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(f){o==1?n.Cell.push({type:n.Types[f[0]-1].name,index:f[1]}):o==0&&n.Value.push({type:n.Types[f[0]-1].name,index:f[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(d),i=!0;break;case 36:s.pop(),i=!1;break;default:if(!u.T){if(!i||a.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function Rke(){var e=Yl();return Rt(e,332),Rt(e,334,Td(1)),Rt(e,335,Tke({name:"XLDAPR",version:12e4,flags:3496657072})),Rt(e,336),Rt(e,339,Fke(1,"XLDAPR")),Rt(e,52),Rt(e,35,Td(514)),Rt(e,4096,Td(0)),Rt(e,4097,Eu(1)),Rt(e,36),Rt(e,53),Rt(e,340),Rt(e,337,Dke(1)),Rt(e,51,Ike([[1,0]])),Rt(e,338),Rt(e,333),e.end()}function Lke(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var a=!1,s=2,i;return e.replace(nl,function(o){var c=Gr(o);switch(ef(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):s==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+c.i);break;default:if(!a&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),n}function xre(){var e=[Ys];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Mke(e){var t=[];if(!e)return t;var r=1;return(e.match(nl)||[]).forEach(function(n){var a=Gr(n);switch(a[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete a[0],a.i?r=a.i:a.i=r,t.push(a);break}}),t}function Uke(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Qr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function Qke(e,t,r){var n=[];return Th(e,function(s,i,o){switch(o){case 63:n.push(s);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function Hke(e,t,r,n){if(!e)return e;var a=n||{},s=!1;Th(e,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||a.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},a)}function Vke(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var qv=1024;function bre(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),a=[Kt("xml",null,{"xmlns:v":_c.v,"xmlns:o":_c.o,"xmlns:x":_c.x,"xmlns:mv":_c.mv}).replace(/\/>/,">"),Kt("o:shapelayout",Kt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Kt("v:shapetype",[Kt("v:stroke",null,{joinstyle:"miter"}),Kt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];qv<e*1e3;)qv+=1e3;return t.forEach(function(s){var i=cs(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?Kt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Kt("v:fill",c,o),d={on:"t",obscured:"t"};++qv,a=a.concat(["<v:shape"+Cw({id:"_x0000_s"+qv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Kt("v:shadow",null,d),Kt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",go("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),go("x:AutoFill","False"),go("x:Row",String(i.r)),go("x:Column",String(i.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),a.push("</xml>"),a.join("")}function oV(e,t,r,n){var a=Array.isArray(e),s;t.forEach(function(i){var o=cs(i.ref);if(a?(e[o.r]||(e[o.r]=[]),s=e[o.r][o.c]):s=e[i.ref],!s){s={t:"z"},a?e[o.r][o.c]=s:e[i.ref]=s;var c=Vn(e["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=nn(c);u!==e["!ref"]&&(e["!ref"]=u)}s.c||(s.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var f=s.c.length-1;f>=0;--f){if(!r&&s.c[f].T)return;r&&!s.c[f].T&&s.c.splice(f,1)}if(r&&n){for(f=0;f<n.length;++f)if(d.a==n[f].id){d.a=n[f].name||d.a;break}}s.c.push(d)})}function zke(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],a=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);a&&a[1]&&a[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var s=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=Gr(o[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=cs(c.ref);if(!(t.sheetRows&&t.sheetRows<=d.r)){var f=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),h=!!f&&!!f[1]&&VP(f[1])||{r:"",t:"",h:""};u.r=h.r,h.r=="<t></t>"&&(h.t=h.h=""),u.t=(h.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=h.h),n.push(u)}}}}),n}function yre(e){var t=[Ys,Kt("comments",null,{xmlns:bg[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(a){var s=va(a.a);r.indexOf(s)==-1&&(r.push(s),t.push("<author>"+s+"</author>")),a.T&&a.ID&&r.indexOf("tc="+a.ID)==-1&&(r.push("tc="+a.ID),t.push("<author>tc="+a.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var a=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?a=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(a=r.indexOf(va(c.a))),s.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+a+'"><text>'),s.length<=1)t.push(go("t",va(s[0]||"")));else{for(var i=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)i+=`Reply:
    `+s[o]+`
`;t.push(go("t",va(i)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function $ke(e,t){var r=[],n=!1,a={},s=0;return e.replace(nl,function(o,c){var u=Gr(o);switch(ef(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":a={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":a.t!=null&&r.push(a);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":a.t=e.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function Gke(e,t,r){var n=[Ys,Kt("ThreadedComments",null,{xmlns:_i.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(a){var s="";(a[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&t.indexOf(i.a)==-1&&t.push(i.a);var c={ref:a[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,i.ID=c.id,i.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(i.a)).slice(-12)+"}"),n.push(Kt("threadedComment",go("text",i.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function Kke(e,t){var r=[],n=!1;return e.replace(nl,function(s){var i=Gr(s);switch(ef(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return s}),r}function qke(e){var t=[Ys,Kt("personList",null,{xmlns:_i.TCMNT,"xmlns:x":bg[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Kt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Wke(e){var t={};t.iauthor=e.read_shift(4);var r=Cg(e);return t.rfx=r.s,t.ref=Qr(r.s),e.l+=16,t}function Xke(e,t){return t==null&&(t=wt(36)),t.write_shift(4,e[1].iauthor),k1(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var Yke=Jo;function Jke(e){return Wi(e.slice(0,54))}function Zke(e,t){var r=[],n=[],a={},s=!1;return Th(e,function(o,c,u){switch(u){case 632:n.push(o);break;case 635:a=o;break;case 637:a.t=o.t,a.h=o.h,a.r=o.r;break;case 636:if(a.author=n[a.iauthor],delete a.iauthor,t.sheetRows&&a.rfx&&t.sheetRows<=a.rfx.r)break;a.t||(a.t=""),delete a.rfx,r.push(a);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function eBe(e){var t=Yl(),r=[];return Rt(t,628),Rt(t,630),e.forEach(function(n){n[1].forEach(function(a){r.indexOf(a.a)>-1||(r.push(a.a.slice(0,54)),Rt(t,632,Jke(a.a)))})}),Rt(t,631),Rt(t,633),e.forEach(function(n){n[1].forEach(function(a){a.iauthor=r.indexOf(a.a);var s={s:cs(n[0]),e:cs(n[0])};Rt(t,635,Xke([s,a])),a.t&&a.t.length>0&&Rt(t,637,wSe(a)),Rt(t,636),delete a.iauthor})}),Rt(t,634),Rt(t,629),t.end()}var tBe="application/vnd.ms-office.vbaProject";function rBe(e){var t=Cr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var a=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Cr.utils.cfb_add(t,a,e.FileIndex[n].content)}}),Cr.write(t)}function nBe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var a=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");a.slice(-1)!=="/"&&Cr.utils.cfb_add(e,a,t.FileIndex[n].content)}})}var wre=["xlsb","xlsm","xlam","biff8","xla"];function aBe(){return{"!type":"dialog"}}function sBe(){return{"!type":"dialog"}}function iBe(){return{"!type":"macro"}}function oBe(){return{"!type":"macro"}}var vx=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,a,s,i){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=t.c:--d,c?u+=t.r:--u,a+(o?"":"$")+ls(d)+(c?"":"$")+Ws(u)}return function(a,s){return t=s,a.replace(e,r)}}(),KP=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,qP=function(){return function(t,r){return t.replace(KP,function(n,a,s,i,o,c){var u=OP(i)-(s?0:r.c),d=FP(c)-(o?0:r.r),f=d==0?"":o?d+1:"["+d+"]",h=u==0?"":s?u+1:"["+u+"]";return a+"R"+f+"C"+h})}}();function Ere(e,t){return e.replace(KP,function(r,n,a,s,i,o){return n+(a=="$"?a+s:ls(OP(s)+t.c))+(i=="$"?i+o:Ws(FP(o)+t.r))})}function lBe(e,t,r){var n=Zl(t),a=n.s,s=cs(r),i={r:s.r-a.r,c:s.c-a.c};return Ere(e,i)}function cBe(e){return e.length!=1}function lV(e){return e.replace(/_xlfn\./g,"")}function si(e){e.l+=1}function bm(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function Cre(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return _re(e);r.biff==12&&(n=4)}var a=e.read_shift(n),s=e.read_shift(n),i=bm(e),o=bm(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function _re(e){var t=bm(e),r=bm(e),n=e.read_shift(1),a=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:a,cRel:r[1],rRel:r[2]}}}function uBe(e,t,r){if(r.biff<8)return _re(e);var n=e.read_shift(r.biff==12?4:2),a=e.read_shift(r.biff==12?4:2),s=bm(e),i=bm(e);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:a,c:i[0],cRel:i[1],rRel:i[2]}}}function Sre(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return dBe(e);var n=e.read_shift(r&&r.biff==12?4:2),a=bm(e);return{r:n,c:a[0],cRel:a[1],rRel:a[2]}}function dBe(e){var t=bm(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function ABe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function fBe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return hBe(e);var a=e.read_shift(n>=12?4:2),s=e.read_shift(2),i=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;a>524287;)a-=1048576;if(i==1)for(;s>8191;)s=s-16384;return{r:a,c:s,cRel:i,rRel:o}}function hBe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,a=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),a==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:a,rRel:n}}function mBe(e,t,r){var n=(e[e.l++]&96)>>5,a=Cre(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,a]}function pBe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2,"i"),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}var i=Cre(e,s,r);return[n,a,i]}function gBe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function vBe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=8;if(r)switch(r.biff){case 5:e.l+=12,s=6;break;case 12:s=12;break}return e.l+=s,[n,a]}function xBe(e,t,r){var n=(e[e.l++]&96)>>5,a=uBe(e,t-1,r);return[n,a]}function bBe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function cV(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function yBe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),a=[],s=0;s<=n;++s)a.push(e.read_shift(r&&r.biff==2?1:2));return a}function wBe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function EBe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function CBe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function _Be(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function Nre(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function SBe(e){return e.read_shift(2),Nre(e)}function NBe(e){return e.read_shift(2),Nre(e)}function kBe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=Sre(e,0,r);return[n,a]}function BBe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=fBe(e,0,r);return[n,a]}function TBe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var s=Sre(e,0,r);return[n,a,s]}function jBe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var a=e.read_shift(r&&r.biff<=3?1:2);return[OTe[a],Tre[a],n]}function IBe(e,t,r){var n=e[e.l++],a=e.read_shift(1),s=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:FBe(e);return[a,(s[0]===0?Tre:FTe)[s[1]]]}function FBe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function OBe(e,t,r){e.l+=r&&r.biff==2?3:4}function DBe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function PBe(e){return e.l++,jh[e.read_shift(1)]}function RBe(e){return e.l++,e.read_shift(2)}function LBe(e){return e.l++,e.read_shift(1)!==0}function MBe(e){return e.l++,Xo(e)}function UBe(e,t,r){return e.l++,E2(e,t-1,r)}function QBe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Qs(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=jh[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Xo(e);break;case 2:r[1]=_g(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function HBe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),a=[],s=0;s!=n;++s)a.push((r.biff==12?Cg:w4)(e));return a}function VBe(e,t,r){var n=0,a=0;r.biff==12?(n=e.read_shift(4),a=e.read_shift(4)):(a=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--a==0&&(a=256));for(var s=0,i=[];s!=n&&(i[s]=[]);++s)for(var o=0;o!=a;++o)i[s][o]=QBe(e,r.biff);return i}function zBe(e,t,r){var n=e.read_shift(1)>>>5&3,a=!r||r.biff>=8?4:2,s=e.read_shift(a);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,s]}function $Be(e,t,r){if(r.biff==5)return GBe(e);var n=e.read_shift(1)>>>5&3,a=e.read_shift(2),s=e.read_shift(4);return[n,a,s]}function GBe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function KBe(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function qBe(e,t,r){var n=e.read_shift(1)>>>5&3,a=e.read_shift(r&&r.biff==2?1:2);return[n,a]}function WBe(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function XBe(e,t,r){var n=(e[e.l++]&96)>>5,a=e.read_shift(2),s=4;if(r)switch(r.biff){case 5:s=15;break;case 12:s=6;break}return e.l+=s,[n,a]}var YBe=tl,JBe=tl,ZBe=tl;function _2(e,t,r){return e.l+=2,[ABe(e)]}function WP(e){return e.l+=6,[]}var eTe=_2,tTe=WP,rTe=WP,nTe=_2;function kre(e){return e.l+=2,[ci(e),e.read_shift(2)&1]}var aTe=_2,sTe=kre,iTe=WP,oTe=_2,lTe=_2,cTe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function uTe(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),a=e.read_shift(2),s=e.read_shift(2),i=cTe[r>>2&31];return{ixti:t,coltype:r&3,rt:i,idx:n,c:a,C:s}}function dTe(e){return e.l+=2,[e.read_shift(4)]}function ATe(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function fTe(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function hTe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function mTe(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function pTe(e){return e.l+=4,[0,0]}var uV={1:{n:"PtgExp",f:DBe},2:{n:"PtgTbl",f:ZBe},3:{n:"PtgAdd",f:si},4:{n:"PtgSub",f:si},5:{n:"PtgMul",f:si},6:{n:"PtgDiv",f:si},7:{n:"PtgPower",f:si},8:{n:"PtgConcat",f:si},9:{n:"PtgLt",f:si},10:{n:"PtgLe",f:si},11:{n:"PtgEq",f:si},12:{n:"PtgGe",f:si},13:{n:"PtgGt",f:si},14:{n:"PtgNe",f:si},15:{n:"PtgIsect",f:si},16:{n:"PtgUnion",f:si},17:{n:"PtgRange",f:si},18:{n:"PtgUplus",f:si},19:{n:"PtgUminus",f:si},20:{n:"PtgPercent",f:si},21:{n:"PtgParen",f:si},22:{n:"PtgMissArg",f:si},23:{n:"PtgStr",f:UBe},26:{n:"PtgSheet",f:ATe},27:{n:"PtgEndSheet",f:fTe},28:{n:"PtgErr",f:PBe},29:{n:"PtgBool",f:LBe},30:{n:"PtgInt",f:RBe},31:{n:"PtgNum",f:MBe},32:{n:"PtgArray",f:bBe},33:{n:"PtgFunc",f:jBe},34:{n:"PtgFuncVar",f:IBe},35:{n:"PtgName",f:zBe},36:{n:"PtgRef",f:kBe},37:{n:"PtgArea",f:mBe},38:{n:"PtgMemArea",f:KBe},39:{n:"PtgMemErr",f:YBe},40:{n:"PtgMemNoMem",f:JBe},41:{n:"PtgMemFunc",f:qBe},42:{n:"PtgRefErr",f:WBe},43:{n:"PtgAreaErr",f:gBe},44:{n:"PtgRefN",f:BBe},45:{n:"PtgAreaN",f:xBe},46:{n:"PtgMemAreaN",f:hTe},47:{n:"PtgMemNoMemN",f:mTe},57:{n:"PtgNameX",f:$Be},58:{n:"PtgRef3d",f:TBe},59:{n:"PtgArea3d",f:pBe},60:{n:"PtgRefErr3d",f:XBe},61:{n:"PtgAreaErr3d",f:vBe},255:{}},gTe={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},vTe={1:{n:"PtgElfLel",f:kre},2:{n:"PtgElfRw",f:oTe},3:{n:"PtgElfCol",f:eTe},6:{n:"PtgElfRwV",f:lTe},7:{n:"PtgElfColV",f:nTe},10:{n:"PtgElfRadical",f:aTe},11:{n:"PtgElfRadicalS",f:iTe},13:{n:"PtgElfColS",f:tTe},15:{n:"PtgElfColSV",f:rTe},16:{n:"PtgElfRadicalLel",f:sTe},25:{n:"PtgList",f:uTe},29:{n:"PtgSxName",f:dTe},255:{}},xTe={0:{n:"PtgAttrNoop",f:pTe},1:{n:"PtgAttrSemi",f:_Be},2:{n:"PtgAttrIf",f:EBe},4:{n:"PtgAttrChoose",f:yBe},8:{n:"PtgAttrGoto",f:wBe},16:{n:"PtgAttrSum",f:OBe},32:{n:"PtgAttrBaxcel",f:cV},33:{n:"PtgAttrBaxcel",f:cV},64:{n:"PtgAttrSpace",f:SBe},65:{n:"PtgAttrSpaceSemi",f:NBe},128:{n:"PtgAttrIfError",f:CBe},255:{}};function S2(e,t,r,n){if(n.biff<8)return tl(e,t);for(var a=e.l+t,s=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=VBe(e,0,n),s.push(r[i][1]);break;case"PtgMemArea":r[i][2]=HBe(e,r[i][1],n),s.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=e.read_shift(4),s.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return t=a-e.l,t!==0&&s.push(tl(e,t)),s}function N2(e,t,r){for(var n=e.l+t,a,s,i=[];n!=e.l;)t=n-e.l,s=e[e.l],a=uV[s]||uV[gTe[s]],(s===24||s===25)&&(a=(s===24?vTe:xTe)[e[e.l+1]]),!a||!a.f?tl(e,t):i.push([a.n,a.f(e,t,r)]);return i}function bTe(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],a=[],s=0;s<n.length;++s){var i=n[s];if(i)switch(i[0]){case 2:a.push('"'+i[1].replace(/"/g,'""')+'"');break;default:a.push(i[1])}else a.push("")}t.push(a.join(","))}return t.join(";")}var yTe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function wTe(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function Bre(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var a="";if(r.biff>8)switch(e[n[0]][0]){case 357:return a=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return a=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?a:a+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return e[n[0]][0][3]?(a=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?a:a+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function dV(e,t,r){var n=Bre(e,t,r);return n=="#REF"?n:wTe(n,r)}function Ho(e,t,r,n,a){var s=a&&a.biff||8,i={s:{c:0,r:0}},o=[],c,u,d,f=0,h=0,p,g="";if(!e[0]||!e[0][0])return"";for(var v=-1,b="",y=0,C=e[0].length;y<C;++y){var N=e[0][y];switch(N[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),v>=0){switch(e[0][v][1][0]){case 0:b=Ss(" ",e[0][v][1][1]);break;case 1:b=Ss("\r",e[0][v][1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}u=u+b,v=-1}o.push(u+yTe[N[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Hy(N[1][1],i,a),o.push(Vy(d,s));break;case"PtgRefN":d=r?Hy(N[1][1],r,a):N[1][1],o.push(Vy(d,s));break;case"PtgRef3d":f=N[1][1],d=Hy(N[1][2],i,a),g=dV(n,f,a),o.push(g+"!"+Vy(d,s));break;case"PtgFunc":case"PtgFuncVar":var T=N[1][0],S=N[1][1];T||(T=0),T&=127;var B=T==0?[]:o.slice(-T);o.length-=T,S==="User"&&(S=B.shift()),o.push(S+"("+B.join(",")+")");break;case"PtgBool":o.push(N[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(N[1]);break;case"PtgNum":o.push(String(N[1]));break;case"PtgStr":o.push('"'+N[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(N[1]);break;case"PtgAreaN":p=UH(N[1][1],r?{s:r}:i,a),o.push(VT(p,a));break;case"PtgArea":p=UH(N[1][1],i,a),o.push(VT(p,a));break;case"PtgArea3d":f=N[1][1],p=N[1][2],g=dV(n,f,a),o.push(g+"!"+VT(p,a));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":h=N[1][2];var w=(n.names||[])[h-1]||(n[0]||[])[h],_=w?w.Name:"SH33TJSNAME"+String(h);_&&_.slice(0,6)=="_xlfn."&&!a.xlfn&&(_=_.slice(6)),o.push(_);break;case"PtgNameX":var F=N[1][1];h=N[1][2];var M;if(a.biff<=5)F<0&&(F=-F),n[F]&&(M=n[F][h]);else{var D="";if(((n[F]||[])[0]||[])[0]==14849||(((n[F]||[])[0]||[])[0]==1025?n[F][h]&&n[F][h].itab>0&&(D=n.SheetNames[n[F][h].itab-1]+"!"):D=n.SheetNames[h-1]+"!"),n[F]&&n[F][h])D+=n[F][h].Name;else if(n[0]&&n[0][h])D+=n[0][h].Name;else{var I=(Bre(n,F,a)||"").split(";;");I[h-1]?D=I[h-1]:D+="SH33TJSERRX"}o.push(D);break}M||(M={Name:"SH33TJSERRY"}),o.push(M.Name);break;case"PtgParen":var U="(",P=")";if(v>=0){switch(b="",e[0][v][1][0]){case 2:U=Ss(" ",e[0][v][1][1])+U;break;case 3:U=Ss("\r",e[0][v][1][1])+U;break;case 4:P=Ss(" ",e[0][v][1][1])+P;break;case 5:P=Ss("\r",e[0][v][1][1])+P;break;default:if(a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}o.push(U+o.pop()+P);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:N[1][1],r:N[1][0]};var X={c:r.c,r:r.r};if(n.sharedf[Qr(d)]){var H=n.sharedf[Qr(d)];o.push(Ho(H,i,X,n,a))}else{var Y=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Ho(u[1],i,X,n,a)),Y=!0;break}Y||o.push(N[1])}break;case"PtgArray":o.push("{"+bTe(N[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+N[1].idx+"[#"+N[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(N));default:throw new Error("Unrecognized Formula Token: "+String(N))}var V=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(a.biff!=3&&v>=0&&V.indexOf(e[0][y][0])==-1){N=e[0][v];var z=!0;switch(N[1][0]){case 4:z=!1;case 0:b=Ss(" ",N[1][1]);break;case 5:z=!1;case 1:b=Ss("\r",N[1][1]);break;default:if(b="",a.WTF)throw new Error("Unexpected PtgAttrSpaceType "+N[1][0])}o.push((z?b:"")+o.pop()+(z?"":b)),v=-1}}if(o.length>1&&a.WTF)throw new Error("bad formula stack");return o[0]}function ETe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],tl(e,t-2)];var o=N2(e,i,r);return t!==i+a&&(s=S2(e,t-i-a,o,r)),e.l=n,[o,s]}function CTe(e,t,r){var n=e.l+t,a=r.biff==2?1:2,s,i=e.read_shift(a);if(i==65535)return[[],tl(e,t-2)];var o=N2(e,i,r);return t!==i+a&&(s=S2(e,t-i-a,o,r)),e.l=n,[o,s]}function _Te(e,t,r,n){var a=e.l+t,s=N2(e,n,r),i;return a!==e.l&&(i=S2(e,a-e.l,s,r)),[s,i]}function STe(e,t,r){var n=e.l+t,a,s=e.read_shift(2),i=N2(e,s,r);return s==65535?[[],tl(e,t-2)]:(t!==s+2&&(a=S2(e,n-s-2,i,r)),[i,a])}function NTe(e){var t;if(qf(e,e.l+6)!==65535)return[Xo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function kTe(e){if(e==null){var t=wt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return ng(e);return ng(0)}function qT(e,t,r){var n=e.l+t,a=tf(e);r.biff==2&&++e.l;var s=NTe(e),i=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var o=CTe(e,n-e.l,r);return{cell:a,val:s[0],formula:o,shared:i>>3&1,tt:s[1]}}function BTe(e,t,r,n,a){var s=sg(t,r,a),i=kTe(e.v),o=wt(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=wt(e.bf.length),d=0;d<e.bf.length;++d)u[d]=e.bf[d];var f=Ki([s,i,o,u]);return f}function E4(e,t,r){var n=e.read_shift(4),a=N2(e,n,r),s=e.read_shift(4),i=s>0?S2(e,s,a,r):null;return[a,i]}var TTe=E4,C4=E4,jTe=E4,ITe=E4,FTe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Tre={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},OTe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function AV(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function DTe(e){var t="of:="+e.replace(KP,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function WT(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function PTe(e){return e.replace(/\./,"!")}var $y={},xx={},Gy=typeof Map<"u";function XP(e,t,r){var n=0,a=e.length;if(r){if(Gy?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var s=Gy?r.get(t):r[t];n<s.length;++n)if(e[s[n]].t===t)return e.Count++,s[n]}}else for(;n<a;++n)if(e[n].t===t)return e.Count++,n;return e[a]={t},e.Count++,e.Unique++,r&&(Gy?(r.has(t)||r.set(t,[]),r.get(t).push(a)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(a))),a}function _4(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&($o=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Bw(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=a5(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Mp(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function jm(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],a=60,s=e.length;if(n==null&&r.ssf){for(;a<392;++a)if(r.ssf[a]==null){nh(t.z,a),r.ssf[a]=t.z,r.revssf[t.z]=n=a;break}}for(a=0;a!=s;++a)if(e[a].numFmtId===n)return a;return e[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function jre(e,t,r,n,a,s){try{n.cellNF&&(e.z=Pr[t])}catch(o){if(n.WTF)throw o}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Ha(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Pr[t]==null&&nh(F_e[t]||"General",t),e.t==="e")e.w=e.w||jh[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ww(e.v);else if(e.t==="d"){var i=Ni(e.v);(i|0)===i?e.w=i.toString(10):e.w=ww(i)}else{if(e.v===void 0)return"";e.w=tg(e.v,xx)}else e.t==="d"?e.w=Pu(t,Ni(e.v),xx):e.w=Pu(t,e.v,xx)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{e.s=s.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=n5(a.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=a.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=n5(a.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=a.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&s.Fills)throw o}}}function RTe(e,t,r){if(e&&e["!ref"]){var n=Vn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function LTe(e,t){var r=Vn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=nn(r))}var MTe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,UTe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,QTe=/<(?:\w:)?hyperlink [^>]*>/mg,HTe=/"(\w*:\w*)"/,VTe=/<(?:\w:)?col\b[^>]*[\/]?>/g,zTe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,$Te=/<(?:\w:)?pageMargins[^>]*\/>/g,Ire=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,GTe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,KTe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function qTe(e,t,r,n,a,s,i){if(!e)return e;n||(n={"!id":{}});var o=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",f=e.match(UTe);f?(u=e.slice(0,f.index),d=e.slice(f.index+f[0].length)):u=d=e;var h=u.match(Ire);h?YP(h[0],o,a,r):(h=u.match(GTe))&&XTe(h[0],h[1]||"",o,a,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var g=u.slice(p,p+50).match(HTe);g&&LTe(o,g[1])}var v=u.match(KTe);v&&v[1]&&c3e(v[1],a);var b=[];if(t.cellStyles){var y=u.match(VTe);y&&a3e(b,y)}f&&A3e(f[1],o,t,c,s,i);var C=d.match(zTe);C&&(o["!autofilter"]=i3e(C[0]));var N=[],T=d.match(MTe);if(T)for(p=0;p!=T.length;++p)N[p]=Vn(T[p].slice(T[p].indexOf('"')+1));var S=d.match(QTe);S&&t3e(o,S,n);var B=d.match($Te);if(B&&(o["!margins"]=r3e(Gr(B[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=nn(c)),t.sheetRows>0&&o["!ref"]){var w=Vn(o["!ref"]);t.sheetRows<=+w.e.r&&(w.e.r=t.sheetRows-1,w.e.r>c.e.r&&(w.e.r=c.e.r),w.e.r<w.s.r&&(w.s.r=w.e.r),w.e.c>c.e.c&&(w.e.c=c.e.c),w.e.c<w.s.c&&(w.s.c=w.e.c),o["!fullref"]=o["!ref"],o["!ref"]=nn(w))}return b.length>0&&(o["!cols"]=b),N.length>0&&(o["!merges"]=N),o}function WTe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+nn(e[r])+'"/>';return t+"</mergeCells>"}function YP(e,t,r,n){var a=Gr(e);r.Sheets[n]||(r.Sheets[n]={}),a.codeName&&(r.Sheets[n].CodeName=Hn(Ca(a.codeName)))}function XTe(e,t,r,n,a){YP(e.slice(0,e.indexOf(">")),r,n,a)}function YTe(e,t,r,n,a){var s=!1,i={},o=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}s=!0,i.codeName=RA(va(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),o=(o||"")+Kt("outlinePr",null,u)}!s&&!o||(a[a.length]=Kt("sheetPr",o,i))}var JTe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],ZTe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function e3e(e){var t={sheet:1};return JTe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),ZTe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=zP(e.password).toString(16).toUpperCase()),Kt("sheetProtection",null,t)}function t3e(e,t,r){for(var n=Array.isArray(e),a=0;a!=t.length;++a){var s=Gr(Ca(t[a]),!0);if(!s.ref)return;var i=((r||{})["!id"]||[])[s.id];i?(s.Target=i.Target,s.location&&(s.Target+="#"+Hn(s.location))):(s.Target="#"+Hn(s.location),i={Target:s.Target,TargetMode:"Internal"}),s.Rel=i,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=Vn(s.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=Qr({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=s):(e[d]||(e[d]={t:"z",v:void 0}),e[d].l=s)}}}function r3e(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function n3e(e){return Mp(e),Kt("pageMargins",null,e)}function a3e(e,t){for(var r=!1,n=0;n!=t.length;++n){var a=Gr(t[n],!0);a.hidden&&(a.hidden=Ua(a.hidden));var s=parseInt(a.min,10)-1,i=parseInt(a.max,10)-1;for(a.outlineLevel&&(a.level=+a.outlineLevel||0),delete a.min,delete a.max,a.width=+a.width,!r&&a.width&&(r=!0,$P(a.width)),xm(a);s<=i;)e[s++]=Va(a)}}function s3e(e,t){for(var r=["<cols>"],n,a=0;a!=t.length;++a)(n=t[a])&&(r[r.length]=Kt("col",null,_4(a,n)));return r[r.length]="</cols>",r.join("")}function i3e(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function o3e(e,t,r,n){var a=typeof e.ref=="string"?e.ref:nn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var s=r.Workbook.Names,i=Zl(a);i.s.r==i.e.r&&(i.e.r=Zl(t["!ref"]).e.r,a=nn(i));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+a;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),Kt("autoFilter",null,{ref:a})}var l3e=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function c3e(e,t){t.Views||(t.Views=[{}]),(e.match(l3e)||[]).forEach(function(r,n){var a=Gr(r);t.Views[n]||(t.Views[n]={}),+a.zoomScale&&(t.Views[n].zoom=+a.zoomScale),Ua(a.rightToLeft)&&(t.Views[n].RTL=!0)})}function u3e(e,t,r,n){var a={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(a.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Kt("sheetViews",Kt("sheetView",null,a),{})}function d3e(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var a="",s=e.t,i=e.v;if(e.t!=="z")switch(e.t){case"b":a=e.v?"1":"0";break;case"n":a=""+e.v;break;case"e":a=jh[e.v];break;case"d":n&&n.cellDates?a=Ha(e.v,-1).toISOString():(e=Va(e),e.t="n",a=""+(e.v=Ni(Ha(e.v)))),typeof e.z>"u"&&(e.z=Pr[14]);break;default:a=e.v;break}var o=go("v",va(a)),c={r:t},u=jm(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=go("v",""+XP(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=s&&(e.t=s,e.v=i),typeof e.f=="string"&&e.f){var d=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;o=Kt("f",va(e.f),d)+(e.v!=null?o:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Kt("c",o,c)}var A3e=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,a=/ref=["']([^"']*)["']/,s=Ew("v"),i=Ew("f");return function(c,u,d,f,h,p){for(var g=0,v="",b=[],y=[],C=0,N=0,T=0,S="",B,w,_=0,F=0,M,D,I=0,U=0,P=Array.isArray(p.CellXf),X,H=[],Y=[],V=Array.isArray(u),z=[],G={},re=!1,R=!!d.sheetStubs,q=c.split(t),J=0,te=q.length;J!=te;++J){v=q[J].trim();var ie=v.length;if(ie!==0){var Ae=0;e:for(g=0;g<ie;++g)switch(v[g]){case">":if(v[g-1]!="/"){++g;break e}if(d&&d.cellStyles){if(w=Gr(v.slice(Ae,g),!0),_=w.r!=null?parseInt(w.r,10):_+1,F=-1,d.sheetRows&&d.sheetRows<_)continue;G={},re=!1,w.ht&&(re=!0,G.hpt=parseFloat(w.ht),G.hpx=Qx(G.hpt)),w.hidden=="1"&&(re=!0,G.hidden=!0),w.outlineLevel!=null&&(re=!0,G.level=+w.outlineLevel),re&&(z[_-1]=G)}break;case"<":Ae=g;break}if(Ae>=g)break;if(w=Gr(v.slice(Ae,g),!0),_=w.r!=null?parseInt(w.r,10):_+1,F=-1,!(d.sheetRows&&d.sheetRows<_)){f.s.r>_-1&&(f.s.r=_-1),f.e.r<_-1&&(f.e.r=_-1),d&&d.cellStyles&&(G={},re=!1,w.ht&&(re=!0,G.hpt=parseFloat(w.ht),G.hpx=Qx(G.hpt)),w.hidden=="1"&&(re=!0,G.hidden=!0),w.outlineLevel!=null&&(re=!0,G.level=+w.outlineLevel),re&&(z[_-1]=G)),b=v.slice(g).split(e);for(var oe=0;oe!=b.length&&b[oe].trim().charAt(0)=="<";++oe);for(b=b.slice(oe),g=0;g!=b.length;++g)if(v=b[g].trim(),v.length!==0){if(y=v.match(r),C=g,N=0,T=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,y!=null&&y.length===2){for(C=0,S=y[1],N=0;N!=S.length&&!((T=S.charCodeAt(N)-64)<1||T>26);++N)C=26*C+T;--C,F=C}else++F;for(N=0;N!=v.length&&v.charCodeAt(N)!==62;++N);if(++N,w=Gr(v.slice(0,N),!0),w.r||(w.r=Qr({r:_-1,c:F})),S=v.slice(N),B={t:""},(y=S.match(s))!=null&&y[1]!==""&&(B.v=Hn(y[1])),d.cellFormula){if((y=S.match(i))!=null&&y[1]!==""){if(B.f=Hn(Ca(y[1])).replace(/\r\n/g,`
`),d.xlfn||(B.f=lV(B.f)),y[0].indexOf('t="array"')>-1)B.F=(S.match(a)||[])[1],B.F.indexOf(":")>-1&&H.push([Vn(B.F),B.F]);else if(y[0].indexOf('t="shared"')>-1){D=Gr(y[0]);var ce=Hn(Ca(y[1]));d.xlfn||(ce=lV(ce)),Y[parseInt(D.si,10)]=[D,ce,w.r]}}else(y=S.match(/<f[^>]*\/>/))&&(D=Gr(y[0]),Y[D.si]&&(B.f=lBe(Y[D.si][1],Y[D.si][2],w.r)));var pe=cs(w.r);for(N=0;N<H.length;++N)pe.r>=H[N][0].s.r&&pe.r<=H[N][0].e.r&&pe.c>=H[N][0].s.c&&pe.c<=H[N][0].e.c&&(B.F=H[N][1])}if(w.t==null&&B.v===void 0)if(B.f||B.F)B.v=0,B.t="n";else if(R)B.t="z";else continue;else B.t=w.t||"n";switch(f.s.c>F&&(f.s.c=F),f.e.c<F&&(f.e.c=F),B.t){case"n":if(B.v==""||B.v==null){if(!R)continue;B.t="z"}else B.v=parseFloat(B.v);break;case"s":if(typeof B.v>"u"){if(!R)continue;B.t="z"}else M=$y[parseInt(B.v,10)],B.v=M.t,B.r=M.r,d.cellHTML&&(B.h=M.h);break;case"str":B.t="s",B.v=B.v!=null?Ca(B.v):"",d.cellHTML&&(B.h=BP(B.v));break;case"inlineStr":y=S.match(n),B.t="s",y!=null&&(M=VP(y[1]))?(B.v=M.t,d.cellHTML&&(B.h=M.h)):B.v="";break;case"b":B.v=Ua(B.v);break;case"d":d.cellDates?B.v=Ha(B.v,1):(B.v=Ni(Ha(B.v,1)),B.t="n");break;case"e":(!d||d.cellText!==!1)&&(B.w=B.v),B.v=Ote[B.v];break}if(I=U=0,X=null,P&&w.s!==void 0&&(X=p.CellXf[w.s],X!=null&&(X.numFmtId!=null&&(I=X.numFmtId),d.cellStyles&&X.fillId!=null&&(U=X.fillId))),jre(B,I,U,d,h,p),d.cellDates&&P&&B.t=="n"&&_1(Pr[I])&&(B.t="d",B.v=y4(B.v)),w.cm&&d.xlmeta){var Ie=(d.xlmeta.Cell||[])[+w.cm-1];Ie&&Ie.type=="XLDAPR"&&(B.D=!0)}if(V){var ne=cs(w.r);u[ne.r]||(u[ne.r]=[]),u[ne.r][ne.c]=B}else u[w.r]=B}}}}z.length>0&&(u["!rows"]=z)}}();function f3e(e,t,r,n){var a=[],s=[],i=Vn(e["!ref"]),o="",c,u="",d=[],f=0,h=0,p=e["!rows"],g=Array.isArray(e),v={r:u},b,y=-1;for(h=i.s.c;h<=i.e.c;++h)d[h]=ls(h);for(f=i.s.r;f<=i.e.r;++f){for(s=[],u=Ws(f),h=i.s.c;h<=i.e.c;++h){c=d[h]+u;var C=g?(e[f]||[])[h]:e[c];C!==void 0&&(o=d3e(C,c,e,t))!=null&&s.push(o)}(s.length>0||p&&p[f])&&(v={r:u},p&&p[f]&&(b=p[f],b.hidden&&(v.hidden=1),y=-1,b.hpx?y=Tw(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(v.ht=y,v.customHeight=1),b.level&&(v.outlineLevel=b.level)),a[a.length]=Kt("row",s.join(""),v))}if(p)for(;f<p.length;++f)p&&p[f]&&(v={r:f+1},b=p[f],b.hidden&&(v.hidden=1),y=-1,b.hpx?y=Tw(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(v.ht=y,v.customHeight=1),b.level&&(v.outlineLevel=b.level),a[a.length]=Kt("row","",v));return a.join("")}function Fre(e,t,r,n){var a=[Ys,Kt("worksheet",null,{xmlns:bg[0],"xmlns:r":_i.r})],s=r.SheetNames[e],i=0,o="",c=r.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=Vn(u);if(d.e.c>16383||d.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=nn(d)}n||(n={}),c["!comments"]=[];var f=[];YTe(c,r,e,t,a),a[a.length]=Kt("dimension",null,{ref:u}),a[a.length]=u3e(c,t,e,r),t.sheetFormat&&(a[a.length]=Kt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(a[a.length]=s3e(c,c["!cols"])),a[i=a.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=f3e(c,t),o.length>0&&(a[a.length]=o)),a.length>i+1&&(a[a.length]="</sheetData>",a[i]=a[i].replace("/>",">")),c["!protect"]&&(a[a.length]=e3e(c["!protect"])),c["!autofilter"]!=null&&(a[a.length]=o3e(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(a[a.length]=WTe(c["!merges"]));var h=-1,p,g=-1;return c["!links"].length>0&&(a[a.length]="<hyperlinks>",c["!links"].forEach(function(v){v[1].Target&&(p={ref:v[0]},v[1].Target.charAt(0)!="#"&&(g=ma(n,-1,va(v[1].Target).replace(/#.*$/,""),_n.HLINK),p["r:id"]="rId"+g),(h=v[1].Target.indexOf("#"))>-1&&(p.location=va(v[1].Target.slice(h+1))),v[1].Tooltip&&(p.tooltip=va(v[1].Tooltip)),a[a.length]=Kt("hyperlink",null,p))}),a[a.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(a[a.length]=n3e(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(a[a.length]=go("ignoredErrors",Kt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),f.length>0&&(g=ma(n,-1,"../drawings/drawing"+(e+1)+".xml",_n.DRAW),a[a.length]=Kt("drawing",null,{"r:id":"rId"+g}),c["!drawing"]=f),c["!comments"].length>0&&(g=ma(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",_n.VML),a[a.length]=Kt("legacyDrawing",null,{"r:id":"rId"+g}),c["!legacy"]=g),a.length>1&&(a[a.length]="</worksheet>",a[1]=a[1].replace("/>",">")),a.join("")}function h3e(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var a=e.read_shift(2);e.l+=1;var s=e.read_shift(1);return e.l=n,s&7&&(r.level=s&7),s&16&&(r.hidden=!0),s&32&&(r.hpt=a/20),r}function m3e(e,t,r){var n=wt(145),a=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var s=320;a.hpx?s=Tw(a.hpx)*20:a.hpt&&(s=a.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var i=0;a.level&&(i|=a.level),a.hidden&&(i|=16),(a.hpx||a.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r:e,c:0},d=0;d<16;++d)if(!(t.s.c>d+1<<10||t.e.c<d<<10)){for(var f=-1,h=-1,p=d<<10;p<d+1<<10;++p){u.c=p;var g=Array.isArray(r)?(r[u.r]||[])[u.c]:r[Qr(u)];g&&(f<0&&(f=p),h=p)}f<0||(++o,n.write_shift(4,f),n.write_shift(4,h))}var v=n.l;return n.l=c,n.write_shift(4,o),n.l=v,n.length>n.l?n.slice(0,n.l):n}function p3e(e,t,r,n){var a=m3e(n,r,t);(a.length>17||(t["!rows"]||[])[n])&&Rt(e,0,a)}var g3e=Cg,v3e=k1;function x3e(){}function b3e(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=ESe(e),r}function y3e(e,t,r){r==null&&(r=wt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var a=1;a<3;++a)r.write_shift(1,0);return e5({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Bte(e,r),r.slice(0,r.l)}function w3e(e){var t=Mu(e);return[t]}function E3e(e,t,r){return r==null&&(r=wt(8)),yg(t,r)}function C3e(e){var t=wg(e);return[t]}function _3e(e,t,r){return r==null&&(r=wt(4)),Eg(t,r)}function S3e(e){var t=Mu(e),r=e.read_shift(1);return[t,r,"b"]}function N3e(e,t,r){return r==null&&(r=wt(9)),yg(t,r),r.write_shift(1,e.v?1:0),r}function k3e(e){var t=wg(e),r=e.read_shift(1);return[t,r,"b"]}function B3e(e,t,r){return r==null&&(r=wt(5)),Eg(t,r),r.write_shift(1,e.v?1:0),r}function T3e(e){var t=Mu(e),r=e.read_shift(1);return[t,r,"e"]}function j3e(e,t,r){return r==null&&(r=wt(9)),yg(t,r),r.write_shift(1,e.v),r}function I3e(e){var t=wg(e),r=e.read_shift(1);return[t,r,"e"]}function F3e(e,t,r){return r==null&&(r=wt(8)),Eg(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function O3e(e){var t=Mu(e),r=e.read_shift(4);return[t,r,"s"]}function D3e(e,t,r){return r==null&&(r=wt(12)),yg(t,r),r.write_shift(4,t.v),r}function P3e(e){var t=wg(e),r=e.read_shift(4);return[t,r,"s"]}function R3e(e,t,r){return r==null&&(r=wt(8)),Eg(t,r),r.write_shift(4,t.v),r}function L3e(e){var t=Mu(e),r=Xo(e);return[t,r,"n"]}function M3e(e,t,r){return r==null&&(r=wt(16)),yg(t,r),ng(e.v,r),r}function Ore(e){var t=wg(e),r=Xo(e);return[t,r,"n"]}function U3e(e,t,r){return r==null&&(r=wt(12)),Eg(t,r),ng(e.v,r),r}function Q3e(e){var t=Mu(e),r=LP(e);return[t,r,"n"]}function H3e(e,t,r){return r==null&&(r=wt(12)),yg(t,r),Tte(e.v,r),r}function V3e(e){var t=wg(e),r=LP(e);return[t,r,"n"]}function z3e(e,t,r){return r==null&&(r=wt(8)),Eg(t,r),Tte(e.v,r),r}function $3e(e){var t=Mu(e),r=DP(e);return[t,r,"is"]}function G3e(e){var t=Mu(e),r=Jo(e);return[t,r,"str"]}function K3e(e,t,r){return r==null&&(r=wt(12+4*e.v.length)),yg(t,r),Wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function q3e(e){var t=wg(e),r=Jo(e);return[t,r,"str"]}function W3e(e,t,r){return r==null&&(r=wt(8+4*e.v.length)),Eg(t,r),Wi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function X3e(e,t,r){var n=e.l+t,a=Mu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"b"];if(r.cellFormula){e.l+=2;var o=C4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function Y3e(e,t,r){var n=e.l+t,a=Mu(e);a.r=r["!row"];var s=e.read_shift(1),i=[a,s,"e"];if(r.cellFormula){e.l+=2;var o=C4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function J3e(e,t,r){var n=e.l+t,a=Mu(e);a.r=r["!row"];var s=Xo(e),i=[a,s,"n"];if(r.cellFormula){e.l+=2;var o=C4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}function Z3e(e,t,r){var n=e.l+t,a=Mu(e);a.r=r["!row"];var s=Jo(e),i=[a,s,"str"];if(r.cellFormula){e.l+=2;var o=C4(e,n-e.l,r);i[3]=Ho(o,null,a,r.supbooks,r)}else e.l=n;return i}var eje=Cg,tje=k1;function rje(e,t){return t==null&&(t=wt(4)),t.write_shift(4,e),t}function nje(e,t){var r=e.l+t,n=Cg(e),a=PP(e),s=Jo(e),i=Jo(e),o=Jo(e);e.l=r;var c={rfx:n,relId:a,loc:s,display:o};return i&&(c.Tooltip=i),c}function aje(e,t){var r=wt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));k1({s:cs(e[0]),e:cs(e[0])},r),RP("rId"+t,r);var n=e[1].Target.indexOf("#"),a=n==-1?"":e[1].Target.slice(n+1);return Wi(a||"",r),Wi(e[1].Tooltip||"",r),Wi("",r),r.slice(0,r.l)}function sje(){}function ije(e,t,r){var n=e.l+t,a=jte(e),s=e.read_shift(1),i=[a];if(i[2]=s,r.cellFormula){var o=TTe(e,n-e.l,r);i[1]=o}else e.l=n;return i}function oje(e,t,r){var n=e.l+t,a=Cg(e),s=[a];if(r.cellFormula){var i=ITe(e,n-e.l,r);s[1]=i,e.l=n}else e.l=n;return s}function lje(e,t,r){r==null&&(r=wt(18));var n=_4(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var a=0;return t.hidden&&(a|=1),typeof n.width=="number"&&(a|=2),t.level&&(a|=t.level<<8),r.write_shift(2,a),r}var Dre=["left","right","top","bottom","header","footer"];function cje(e){var t={};return Dre.forEach(function(r){t[r]=Xo(e)}),t}function uje(e,t){return t==null&&(t=wt(48)),Mp(e),Dre.forEach(function(r){ng(e[r],t)}),t}function dje(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Aje(e,t,r){r==null&&(r=wt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function fje(e){var t=wt(24);return t.write_shift(4,4),t.write_shift(4,1),k1(e,t),t}function hje(e,t){return t==null&&(t=wt(66)),t.write_shift(2,e.password?zP(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function mje(){}function pje(){}function gje(e,t,r,n,a,s,i){if(!e)return e;var o=t||{};n||(n={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,h=!1,p,g,v,b,y,C,N,T,S,B=[];o.biff=12,o["!row"]=0;var w=0,_=!1,F=[],M={},D=o.supbooks||a.supbooks||[[]];if(D.sharedf=M,D.arrayf=F,D.SheetNames=a.SheetNames||a.Sheets.map(function(V){return V.name}),!o.supbooks&&(o.supbooks=D,a.Names))for(var I=0;I<a.Names.length;++I)D[0][I+1]=a.Names[I];var U=[],P=[],X=!1;jw[16]={n:"BrtShortReal",f:Ore};var H;if(Th(e,function(z,G,re){if(!h)switch(re){case 148:u=z;break;case 0:p=z,o.sheetRows&&o.sheetRows<=p.r&&(h=!0),T=Ws(b=p.r),o["!row"]=p.r,(z.hidden||z.hpt||z.level!=null)&&(z.hpt&&(z.hpx=Qx(z.hpt)),P[z.r]=z);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(g={t:z[2]},z[2]){case"n":g.v=z[1];break;case"s":N=$y[z[1]],g.v=N.t,g.r=N.r;break;case"b":g.v=!!z[1];break;case"e":g.v=z[1],o.cellText!==!1&&(g.w=jh[g.v]);break;case"str":g.t="s",g.v=z[1];break;case"is":g.t="s",g.v=z[1].t;break}if((v=i.CellXf[z[0].iStyleRef])&&jre(g,v.numFmtId,null,o,s,i),y=z[0].c==-1?y+1:z[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=g):c[ls(y)+T]=g,o.cellFormula){for(_=!1,w=0;w<F.length;++w){var R=F[w];p.r>=R[0].s.r&&p.r<=R[0].e.r&&y>=R[0].s.c&&y<=R[0].e.c&&(g.F=nn(R[0]),_=!0)}!_&&z.length>3&&(g.f=z[3])}if(d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),o.cellDates&&v&&g.t=="n"&&_1(Pr[v.numFmtId])){var q=Cp(g.v);q&&(g.t="d",g.v=new Date(q.y,q.m-1,q.d,q.H,q.M,q.S,q.u))}H&&(H.type=="XLDAPR"&&(g.D=!0),H=void 0);break;case 1:case 12:if(!o.sheetStubs||f)break;g={t:"z",v:void 0},y=z[0].c==-1?y+1:z[0].c,o.dense?(c[b]||(c[b]=[]),c[b][y]=g):c[ls(y)+T]=g,d.s.r>p.r&&(d.s.r=p.r),d.s.c>y&&(d.s.c=y),d.e.r<p.r&&(d.e.r=p.r),d.e.c<y&&(d.e.c=y),H&&(H.type=="XLDAPR"&&(g.D=!0),H=void 0);break;case 176:B.push(z);break;case 49:H=((o.xlmeta||{}).Cell||[])[z-1];break;case 494:var J=n["!id"][z.relId];for(J?(z.Target=J.Target,z.loc&&(z.Target+="#"+z.loc),z.Rel=J):z.relId==""&&(z.Target="#"+z.loc),b=z.rfx.s.r;b<=z.rfx.e.r;++b)for(y=z.rfx.s.c;y<=z.rfx.e.c;++y)o.dense?(c[b]||(c[b]=[]),c[b][y]||(c[b][y]={t:"z",v:void 0}),c[b][y].l=z):(C=Qr({c:y,r:b}),c[C]||(c[C]={t:"z",v:void 0}),c[C].l=z);break;case 426:if(!o.cellFormula)break;F.push(z),S=o.dense?c[b][y]:c[ls(y)+T],S.f=Ho(z[1],d,{r:p.r,c:y},D,o),S.F=nn(z[0]);break;case 427:if(!o.cellFormula)break;M[Qr(z[0].s)]=z[1],S=o.dense?c[b][y]:c[ls(y)+T],S.f=Ho(z[1],d,{r:p.r,c:y},D,o);break;case 60:if(!o.cellStyles)break;for(;z.e>=z.s;)U[z.e--]={width:z.w/256,hidden:!!(z.flags&1),level:z.level},X||(X=!0,$P(z.w/256)),xm(U[z.e+1]);break;case 161:c["!autofilter"]={ref:nn(z)};break;case 476:c["!margins"]=z;break;case 147:a.Sheets[r]||(a.Sheets[r]={}),z.name&&(a.Sheets[r].CodeName=z.name),(z.above||z.left)&&(c["!outline"]={above:z.above,left:z.left});break;case 137:a.Views||(a.Views=[{}]),a.Views[0]||(a.Views[0]={}),z.RTL&&(a.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!G.T){if(!f||o.WTF)throw new Error("Unexpected record 0x"+re.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=nn(u||d)),o.sheetRows&&c["!ref"]){var Y=Vn(c["!ref"]);o.sheetRows<=+Y.e.r&&(Y.e.r=o.sheetRows-1,Y.e.r>d.e.r&&(Y.e.r=d.e.r),Y.e.r<Y.s.r&&(Y.s.r=Y.e.r),Y.e.c>d.e.c&&(Y.e.c=d.e.c),Y.e.c<Y.s.c&&(Y.s.c=Y.e.c),c["!fullref"]=c["!ref"],c["!ref"]=nn(Y))}return B.length>0&&(c["!merges"]=B),U.length>0&&(c["!cols"]=U),P.length>0&&(c["!rows"]=P),c}function vje(e,t,r,n,a,s,i){if(t.v===void 0)return!1;var o="";switch(t.t){case"b":o=t.v?"1":"0";break;case"d":t=Va(t),t.z=t.z||Pr[14],t.v=Ni(Ha(t.v)),t.t="n";break;case"n":case"e":o=""+t.v;break;default:o=t.v;break}var c={r,c:n};switch(c.s=jm(a.cellXfs,t,a),t.l&&s["!links"].push([Qr(c),t.l]),t.c&&s["!comments"].push([Qr(c),t.c]),t.t){case"s":case"str":return a.bookSST?(o=XP(a.Strings,t.v,a.revStrings),c.t="s",c.v=o,i?Rt(e,18,R3e(t,c)):Rt(e,7,D3e(t,c))):(c.t="str",i?Rt(e,17,W3e(t,c)):Rt(e,6,K3e(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?i?Rt(e,13,z3e(t,c)):Rt(e,2,H3e(t,c)):i?Rt(e,16,U3e(t,c)):Rt(e,5,M3e(t,c)),!0;case"b":return c.t="b",i?Rt(e,15,B3e(t,c)):Rt(e,4,N3e(t,c)),!0;case"e":return c.t="e",i?Rt(e,14,F3e(t,c)):Rt(e,3,j3e(t,c)),!0}return i?Rt(e,12,_3e(t,c)):Rt(e,1,E3e(t,c)),!0}function xje(e,t,r,n){var a=Vn(t["!ref"]||"A1"),s,i="",o=[];Rt(e,145);var c=Array.isArray(t),u=a.e.r;t["!rows"]&&(u=Math.max(a.e.r,t["!rows"].length-1));for(var d=a.s.r;d<=u;++d){i=Ws(d),p3e(e,t,a,d);var f=!1;if(d<=a.e.r)for(var h=a.s.c;h<=a.e.c;++h){d===a.s.r&&(o[h]=ls(h)),s=o[h]+i;var p=c?(t[d]||[])[h]:t[s];if(!p){f=!1;continue}f=vje(e,p,d,h,n,t,f)}}Rt(e,146)}function bje(e,t){!t||!t["!merges"]||(Rt(e,177,rje(t["!merges"].length)),t["!merges"].forEach(function(r){Rt(e,176,tje(r))}),Rt(e,178))}function yje(e,t){!t||!t["!cols"]||(Rt(e,390),t["!cols"].forEach(function(r,n){r&&Rt(e,60,lje(n,r))}),Rt(e,391))}function wje(e,t){!t||!t["!ref"]||(Rt(e,648),Rt(e,649,fje(Vn(t["!ref"]))),Rt(e,650))}function Eje(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var a=ma(r,-1,n[1].Target.replace(/#.*$/,""),_n.HLINK);Rt(e,494,aje(n,a))}}),delete t["!links"]}function Cje(e,t,r,n){if(t["!comments"].length>0){var a=ma(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",_n.VML);Rt(e,551,RP("rId"+a)),t["!legacy"]=a}}function _je(e,t,r,n){if(t["!autofilter"]){var a=t["!autofilter"],s=typeof a.ref=="string"?a.ref:nn(a.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Zl(s);o.s.r==o.e.r&&(o.e.r=Zl(t["!ref"]).e.r,s=nn(o));for(var c=0;c<i.length;++c){var u=i[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+s;break}}c==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Rt(e,161,k1(Vn(s))),Rt(e,162)}}function Sje(e,t,r){Rt(e,133),Rt(e,137,Aje(t,r)),Rt(e,138),Rt(e,134)}function Nje(e,t){t["!protect"]&&Rt(e,535,hje(t["!protect"]))}function kje(e,t,r,n){var a=Yl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=s;try{r&&r.Workbook&&(o=r.Workbook.Sheets[e].CodeName||o)}catch{}var c=Vn(i["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],Rt(a,129),(r.vbaraw||i["!outline"])&&Rt(a,147,y3e(o,i["!outline"])),Rt(a,148,v3e(c)),Sje(a,i,r.Workbook),yje(a,i),xje(a,i,e,t),Nje(a,i),_je(a,i,r,e),bje(a,i),Eje(a,i,n),i["!margins"]&&Rt(a,476,uje(i["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&wje(a,i),Cje(a,i,e,n),Rt(a,130),a.end()}function Bje(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var i=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(t[+i[1]]=r?+i[2]:i[2])});var a=Hn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){n=s.replace(/<.*?>/g,"")}),[t,a,n]}function Tje(e,t,r,n,a,s){var i=s||{"!type":"chart"};if(!e)return s;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var h=Bje(f);d.s.r=d.s.c=0,d.e.c=o,u=ls(o),h[0].forEach(function(p,g){i[u+Ws(g)]={t:"n",v:p,z:h[1]},c=g}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(i["!ref"]=nn(d)),i}function jje(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i,o=e.match(Ire);return o&&YP(o[0],s,a,r),(i=e.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=i[1]),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}function Ije(e,t){e.l+=10;var r=Jo(e);return{name:r}}function Fje(e,t,r,n,a){if(!e)return e;n||(n={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},i=!1;return Th(e,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:a.Sheets[r]||(a.Sheets[r]={}),c.name&&(a.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},t),n["!id"][s["!rel"]]&&(s["!drawel"]=n["!id"][s["!rel"]]),s}var JP=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Oje=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Dje=[],Pje=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function fV(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],a=0;a!=t.length;++a){var s=t[a];if(n[s[0]]==null)n[s[0]]=s[1];else switch(s[2]){case"bool":typeof n[s[0]]=="string"&&(n[s[0]]=Ua(n[s[0]]));break;case"int":typeof n[s[0]]=="string"&&(n[s[0]]=parseInt(n[s[0]],10));break}}}function hV(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Ua(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function Pre(e){hV(e.WBProps,JP),hV(e.CalcPr,Pje),fV(e.WBView,Oje),fV(e.Sheets,Dje),xx.date1904=Ua(e.WBProps.date1904)}function Rje(e){return!e.Workbook||!e.Workbook.WBProps?"false":Ua(e.Workbook.WBProps.date1904)?"true":"false"}var Lje="][*?/\\".split("");function Rre(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Lje.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Mje(e,t,r){e.forEach(function(n,a){Rre(n);for(var s=0;s<a;++s)if(n==e[s])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=t&&t[a]&&t[a].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function Uje(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Mje(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)RTe(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var Qje=/<\w+:workbook/;function Hje(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,a="xmlns",s={},i=0;if(e.replace(nl,function(c,u){var d=Gr(c);switch(ef(d[0])){case"<?xml":break;case"<workbook":c.match(Qje)&&(a="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=d[a];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":JP.forEach(function(f){if(d[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=Ua(d[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(d[f[0]],10);break;default:r.WBProps[f[0]]=d[f[0]]}}),d.codeName&&(r.WBProps.CodeName=Ca(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=Hn(Ca(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":s={},s.Name=Ca(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),Ua(d.hidden||"0")&&(s.Hidden=!0),i=u+c.length;break;case"</definedName>":s.Ref=Hn(Ca(e.slice(i,u))),r.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),bg.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Pre(r),r}function Lre(e){var t=[Ys];t[t.length]=Kt("workbook",null,{xmlns:bg[0],"xmlns:r":_i.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(JP.forEach(function(o){e.Workbook.WBProps[o[0]]!=null&&e.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=e.Workbook.WBProps[o[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Kt("workbookPr",null,n);var a=e.Workbook&&e.Workbook.Sheets||[],s=0;if(a&&a[0]&&a[0].Hidden){for(t[t.length]="<bookViews>",s=0;s!=e.SheetNames.length&&!(!a[s]||!a[s].Hidden);++s);s==e.SheetNames.length&&(s=0),t[t.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",s=0;s!=e.SheetNames.length;++s){var i={name:va(e.SheetNames[s].slice(0,31))};if(i.sheetId=""+(s+1),i["r:id"]="rId"+(s+1),a[s])switch(a[s].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}t[t.length]=Kt("sheet",null,i)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(t[t.length]=Kt("definedName",va(o.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Vje(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=VF(e),r.name=Jo(e),r}function zje(e,t){return t||(t=wt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),RP(e.strRelID,t),Wi(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function $je(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var a=t>8?Jo(e):"";return a.length>0&&(r.CodeName=a),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Gje(e,t){t||(t=wt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Bte(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Kje(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function qje(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var a=e.read_shift(4),s=CSe(e),i=jTe(e,0,r),o=PP(e);e.l=n;var c={Name:s,Ptg:i};return a<268435455&&(c.Sheet=a),o&&(c.Comment=o),c}function Wje(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],a=!1;t||(t={}),t.biff=12;var s=[],i=[[]];return i.SheetNames=[],i.XTI=[],jw[16]={n:"BrtFRTArchID$",f:Kje},Th(e,function(c,u,d){switch(d){case 156:i.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Ho(c.Ptg,null,null,i,t),delete t.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,c]):i[0]=[d,c],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(c),i.XTI=i.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),a=!0;break;case 36:n.pop(),a=!1;break;case 37:n.push(d),a=!0;break;case 38:n.pop(),a=!1;break;case 16:break;default:if(!u.T){if(!a||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},t),Pre(r),r.Names=s,r.supbooks=i,r}function Xje(e,t){Rt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,a={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Rt(e,156,zje(a))}Rt(e,144)}function Yje(e,t){t||(t=wt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Wi("SheetJS",t),Wi(KS.version,t),Wi(KS.version,t),Wi("7262",t),t.length>t.l?t.slice(0,t.l):t}function Jje(e,t){t||(t=wt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Zje(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,a=-1,s=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&a==-1?a=n:r[n].Hidden==1&&s==-1&&(s=n);s>a||(Rt(e,135),Rt(e,158,Jje(a)),Rt(e,136))}}function eIe(e,t){var r=Yl();return Rt(r,131),Rt(r,128,Yje()),Rt(r,153,Gje(e.Workbook&&e.Workbook.WBProps||null)),Zje(r,e),Xje(r,e),Rt(r,132),r.end()}function tIe(e,t,r){return t.slice(-4)===".bin"?Wje(e,r):Hje(e,r)}function rIe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?gje(e,n,r,a,s,i,o):qTe(e,n,r,a,s,i,o)}function nIe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?Fje(e,n,r,a,s):jje(e,n,r,a,s)}function aIe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?iBe():oBe()}function sIe(e,t,r,n,a,s,i,o){return t.slice(-4)===".bin"?aBe():sBe()}function iIe(e,t,r,n){return t.slice(-4)===".bin"?tke(e,r,n):V4e(e,r,n)}function oIe(e,t,r){return vre(e,r)}function lIe(e,t,r){return t.slice(-4)===".bin"?l4e(e,r):s4e(e,r)}function cIe(e,t,r){return t.slice(-4)===".bin"?Zke(e,r):zke(e,r)}function uIe(e,t,r){return t.slice(-4)===".bin"?Qke(e):Mke(e)}function dIe(e,t,r,n){return r.slice(-4)===".bin"?Hke(e,t,r,n):void 0}function AIe(e,t,r){return t.slice(-4)===".bin"?Pke(e,t,r):Lke(e,t,r)}function fIe(e,t,r){return(t.slice(-4)===".bin"?eIe:Lre)(e)}function hIe(e,t,r,n,a){return(t.slice(-4)===".bin"?kje:Fre)(e,r,n,a)}function mIe(e,t,r){return(t.slice(-4)===".bin"?dke:pre)(e,r)}function pIe(e,t,r){return(t.slice(-4)===".bin"?d4e:lre)(e,r)}function gIe(e,t,r){return(t.slice(-4)===".bin"?eBe:yre)(e)}function vIe(e){return(e.slice(-4)===".bin"?Rke:xre)()}var Mre=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Ure=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function fd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var a=e.match(Mre),s,i,o,c;if(a)for(c=0;c!=a.length;++c)s=a[c].match(Ure),(i=s[1].indexOf(":"))===-1?n[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),n[o]=s[2].slice(1,s[2].length-1));return n}function xIe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(Mre),a,s,i,o;if(n)for(o=0;o!=n.length;++o)a=n[o].match(Ure),(s=a[1].indexOf(":"))===-1?r[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?i="xmlns"+a[1].slice(6):i=a[1].slice(s+1),r[i]=a[2].slice(1,a[2].length-1));return r}var Ky;function bIe(e,t){var r=Ky[e]||Hn(e);return r==="General"?tg(t):Pu(r,t)}function yIe(e,t,r,n){var a=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":a=Ua(n);break;case"i2":case"int":a=parseInt(n,10);break;case"r4":case"float":a=parseFloat(n);break;case"date":case"dateTime.tz":a=Ha(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Hn(t)]=a}function wIe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||jh[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ww(e.v):e.w=tg(e.v):e.w=bIe(t||"General",e.v)}catch(s){if(r.WTF)throw s}try{var n=Ky[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&_1(n)){var a=Cp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}catch(s){if(r.WTF)throw s}}}function EIe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=D4e[n.Pattern]||n.Pattern)}e[t.ID]=t}function CIe(e,t,r,n,a,s,i,o,c,u){var d="General",f=n.StyleID,h={};u=u||{};var p=[],g=0;for(f===void 0&&o&&(f=o.StyleID),f===void 0&&i&&(f=i.StyleID);s[f]!==void 0&&(s[f].nf&&(d=s[f].nf),s[f].Interior&&p.push(s[f].Interior),!!s[f].Parent);)f=s[f].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Ua(e);break;case"String":n.t="s",n.r=jH(Hn(e)),n.v=e.indexOf("<")>-1?Hn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Ha(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Hn(e):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Ote[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=jH(t||e));break}if(wIe(n,d,u),u.cellFormula!==!1)if(n.Formula){var v=Hn(n.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),n.f=vx(v,a),delete n.Formula,n.ArrayRange=="RC"?n.F=vx("RC:RC",a):n.ArrayRange&&(n.F=vx(n.ArrayRange,a),c.push([Vn(n.F),n.F]))}else for(g=0;g<c.length;++g)a.r>=c[g][0].s.r&&a.r<=c[g][0].e.r&&a.c>=c[g][0].s.c&&a.c<=c[g][0].e.c&&(n.F=c[g][1]);u.cellStyles&&(p.forEach(function(b){!h.patternType&&b.patternType&&(h.patternType=b.patternType)}),n.s=h),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function _Ie(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function XT(e,t){var r=t||{};S1();var n=Ay(TP(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ca(n));var a=n.slice(0,1024).toLowerCase(),s=!1;if(a=a.replace(/".*?"/g,""),(a.indexOf(">")&1023)>Math.min(a.indexOf(",")&1023,a.indexOf(";")&1023)){var i=Va(r);return i.type="string",Ux.to_workbook(n,i)}if(a.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(He){a.indexOf("<"+He)>=0&&(s=!0)}),s)return uFe(n,r);Ky={"General Number":"General","General Date":Pr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Pr[15],"Short Date":Pr[14],"Long Time":Pr[19],"Medium Time":Pr[18],"Short Time":Pr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Pr[2],Standard:Pr[4],Percent:Pr[10],Scientific:Pr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},f=[],h=r.dense?[]:{},p="",g={},v={},b=fd('<Data ss:Type="String">'),y=0,C=0,N=0,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},B={},w="",_=0,F=[],M={},D={},I=0,U=[],P=[],X={},H=[],Y,V=!1,z=[],G=[],re={},R=0,q=0,J={Sheets:[],WBProps:{date1904:!1}},te={};_w.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ie="";o=_w.exec(n);)switch(o[3]=(ie=o[3]).toLowerCase()){case"data":if(ie=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?CIe(n.slice(y,o.index),w,b,c[c.length-1][0]=="comment"?X:g,{c:C,r:N},S,H[C],v,z,r):(w="",b=fd(o[0]),y=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(P.length>0&&(g.c=P),(!r.sheetRows||r.sheetRows>N)&&g.v!==void 0&&(r.dense?(h[N]||(h[N]=[]),h[N][C]=g):h[ls(C)+Ws(N)]=g),g.HRef&&(g.l={Target:Hn(g.HRef)},g.HRefScreenTip&&(g.l.Tooltip=g.HRefScreenTip),delete g.HRef,delete g.HRefScreenTip),(g.MergeAcross||g.MergeDown)&&(R=C+(parseInt(g.MergeAcross,10)|0),q=N+(parseInt(g.MergeDown,10)|0),F.push({s:{c:C,r:N},e:{c:R,r:q}})),!r.sheetStubs)g.MergeAcross?C=R+1:++C;else if(g.MergeAcross||g.MergeDown){for(var Ae=C;Ae<=R;++Ae)for(var oe=N;oe<=q;++oe)(Ae>C||oe>N)&&(r.dense?(h[oe]||(h[oe]=[]),h[oe][Ae]={t:"z"}):h[ls(Ae)+Ws(oe)]={t:"z"});C=R+1}else++C;else g=xIe(o[0]),g.Index&&(C=+g.Index-1),C<T.s.c&&(T.s.c=C),C>T.e.c&&(T.e.c=C),o[0].slice(-2)==="/>"&&++C,P=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(N<T.s.r&&(T.s.r=N),N>T.e.r&&(T.e.r=N),o[0].slice(-2)==="/>"&&(v=fd(o[0]),v.Index&&(N=+v.Index-1)),C=0,++N):(v=fd(o[0]),v.Index&&(N=+v.Index-1),re={},(v.AutoFitHeight=="0"||v.Height)&&(re.hpx=parseInt(v.Height,10),re.hpt=Tw(re.hpx),G[N]=re),v.Hidden=="1"&&(re.hidden=!0,G[N]=re));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));f.push(p),T.s.r<=T.e.r&&T.s.c<=T.e.c&&(h["!ref"]=nn(T),r.sheetRows&&r.sheetRows<=T.e.r&&(h["!fullref"]=h["!ref"],T.e.r=r.sheetRows-1,h["!ref"]=nn(T))),F.length&&(h["!merges"]=F),H.length>0&&(h["!cols"]=H),G.length>0&&(h["!rows"]=G),d[p]=h}else T={s:{r:2e6,c:2e6},e:{r:0,c:0}},N=C=0,c.push([o[3],!1]),u=fd(o[0]),p=Hn(u.Name),h=r.dense?[]:{},F=[],z=[],G=[],te={name:p,Hidden:0},J.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),H=[],V=!1}break;case"style":o[1]==="/"?EIe(S,B,r):B=fd(o[0]);break;case"numberformat":B.nf=Hn(fd(o[0]).Format||"General"),Ky[B.nf]&&(B.nf=Ky[B.nf]);for(var ce=0;ce!=392&&Pr[ce]!=B.nf;++ce);if(ce==392){for(ce=57;ce!=392;++ce)if(Pr[ce]==null){nh(B.nf,ce);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(Y=fd(o[0]),Y.Hidden&&(Y.hidden=!0,delete Y.Hidden),Y.Width&&(Y.wpx=parseInt(Y.Width,10)),!V&&Y.wpx>10){V=!0,$o=hre;for(var pe=0;pe<H.length;++pe)H[pe]&&xm(H[pe])}V&&xm(Y),H[Y.Index-1||H.length]=Y;for(var Ie=0;Ie<+Y.Span;++Ie)H[H.length]=Va(Y);break;case"namedrange":if(o[1]==="/")break;J.Names||(J.Names=[]);var ne=Gr(o[0]),Se={Name:ne.Name,Ref:vx(ne.RefersTo.slice(1),{r:0,c:0})};J.Sheets.length>0&&(Se.Sheet=J.Sheets.length-1),J.Names.push(Se);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?w+=n.slice(_,o.index):_=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;B.Interior=fd(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?WSe(M,ie,n.slice(I,o.index)):I=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));_Ie(X),P.push(X)}else c.push([o[3],!1]),u=fd(o[0]),X={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var De=fd(o[0]);h["!autofilter"]={ref:vx(De.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return xV(n,r);var _e=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:_e=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:_e=!1}break;case"excelworkbook":switch(o[3]){case"date1904":J.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:_e=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:_e=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(I,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else I=o.index+o[0].length;break;case"header":h["!margins"]||Mp(h["!margins"]={},"xlml"),isNaN(+Gr(o[0]).Margin)||(h["!margins"].header=+Gr(o[0]).Margin);break;case"footer":h["!margins"]||Mp(h["!margins"]={},"xlml"),isNaN(+Gr(o[0]).Margin)||(h["!margins"].footer=+Gr(o[0]).Margin);break;case"pagemargins":var he=Gr(o[0]);h["!margins"]||Mp(h["!margins"]={},"xlml"),isNaN(+he.Top)||(h["!margins"].top=+he.Top),isNaN(+he.Left)||(h["!margins"].left=+he.Left),isNaN(+he.Right)||(h["!margins"].right=+he.Right),isNaN(+he.Bottom)||(h["!margins"].bottom=+he.Bottom);break;case"displayrighttoleft":J.Views||(J.Views=[]),J.Views[0]||(J.Views[0]={}),J.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":h["!outline"]||(h["!outline"]={}),h["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:_e=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:_e=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:_e=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:_e=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:_e=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:_e=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:_e=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:_e=!1}break;case"smarttags":break;default:_e=!1;break}if(_e||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?yIe(D,ie,U,n.slice(I,o.index)):(U=o,I=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var je={};return!r.bookSheets&&!r.bookProps&&(je.Sheets=d),je.SheetNames=f,je.Workbook=J,je.SSF=Va(Pr),je.Props=M,je.Custprops=D,je}function XF(e,t){switch(eR(t=t||{}),t.type||"base64"){case"base64":return XT(Pc(e),t);case"binary":case"buffer":case"file":return XT(e,t);case"array":return XT(Bm(e),t)}}function SIe(e,t){var r=[];return e.Props&&r.push(XSe(e.Props,t)),e.Custprops&&r.push(YSe(e.Props,e.Custprops)),r.join("")}function NIe(){return""}function kIe(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,a){var s=[];s.push(Kt("NumberFormat",null,{"ss:Format":va(Pr[n.numFmtId])}));var i={"ss:ID":"s"+(21+a)};r.push(Kt("Style",s.join(""),i))}),Kt("Styles",r.join(""))}function Qre(e){return Kt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+qP(e.Ref,{r:0,c:0})})}function BIe(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var a=t[n];a.Sheet==null&&(a.Name.match(/^_xlfn\./)||r.push(Qre(a)))}return Kt("Names",r.join(""))}function TIe(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var a=n.Workbook.Names,s=[],i=0;i<a.length;++i){var o=a[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||s.push(Qre(o)))}return s.join("")}function jIe(e,t,r,n){if(!e)return"";var a=[];if(e["!margins"]&&(a.push("<PageSetup>"),e["!margins"].header&&a.push(Kt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&a.push(Kt("Footer",null,{"x:Margin":e["!margins"].footer})),a.push(Kt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),a.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)a.push(Kt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<r&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==r&&a.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&a.push("<DisplayRightToLeft/>"),e["!protect"]&&(a.push(go("ProtectContents","True")),e["!protect"].objects&&a.push(go("ProtectObjects","True")),e["!protect"].scenarios&&a.push(go("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?a.push(go("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&a.push(go("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){e["!protect"][i[0]]&&a.push("<"+i[1]+"/>")})),a.length==0?"":Kt("WorksheetOptions",a.join(""),{xmlns:_c.x})}function IIe(e){return e.map(function(t){var r=Z_e(t.t||""),n=Kt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Kt("Comment",n,{"ss:Author":t.a})}).join("")}function FIe(e,t,r,n,a,s,i){if(!e||e.v==null&&e.f==null)return"";var o={};if(e.f&&(o["ss:Formula"]="="+va(qP(e.f,i))),e.F&&e.F.slice(0,t.length)==t){var c=cs(e.F.slice(t.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==i.r?"":"["+(c.r-i.r)+"]")+"C"+(c.c==i.c?"":"["+(c.c-i.c)+"]")}if(e.l&&e.l.Target&&(o["ss:HRef"]=va(e.l.Target),e.l.Tooltip&&(o["x:HRefScreenTip"]=va(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var f="",h="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":f="Number",h=String(e.v);break;case"b":f="Boolean",h=e.v?"1":"0";break;case"e":f="Error",h=jh[e.v];break;case"d":f="DateTime",h=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Pr[14]);break;case"s":f="String",h=J_e(e.v||"");break}var p=jm(n.cellXfs,e,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=i.c+1;var g=e.v!=null?h:"",v=e.t=="z"?"":'<Data ss:Type="'+f+'">'+g+"</Data>";return(e.c||[]).length>0&&(v+=IIe(e.c)),Kt("Cell",v,o)}function OIe(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Qx(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function DIe(e,t,r,n){if(!e["!ref"])return"";var a=Vn(e["!ref"]),s=e["!merges"]||[],i=0,o=[];e["!cols"]&&e["!cols"].forEach(function(b,y){xm(b);var C=!!b.width,N=_4(y,b),T={"ss:Index":y+1};C&&(T["ss:Width"]=kw(N.width)),b.hidden&&(T["ss:Hidden"]="1"),o.push(Kt("Column",null,T))});for(var c=Array.isArray(e),u=a.s.r;u<=a.e.r;++u){for(var d=[OIe(u,(e["!rows"]||[])[u])],f=a.s.c;f<=a.e.c;++f){var h=!1;for(i=0;i!=s.length;++i)if(!(s[i].s.c>f)&&!(s[i].s.r>u)&&!(s[i].e.c<f)&&!(s[i].e.r<u)){(s[i].s.c!=f||s[i].s.r!=u)&&(h=!0);break}if(!h){var p={r:u,c:f},g=Qr(p),v=c?(e[u]||[])[f]:e[g];d.push(FIe(v,g,e,t,r,n,p))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function PIe(e,t,r){var n=[],a=r.SheetNames[e],s=r.Sheets[a],i=s?TIe(s,t,e,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=s?DIe(s,t,e,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(jIe(s,t,e,r)),n.join("")}function RIe(e,t){t||(t={}),e.SSF||(e.SSF=Va(Pr)),e.SSF&&(S1(),v4(e.SSF),t.revssf=b4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],jm(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(SIe(e,t)),r.push(NIe()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Kt("Worksheet",PIe(n,t,e),{"ss:Name":va(e.SheetNames[n])}));return r[2]=kIe(e,t),r[3]=BIe(e),Ys+Kt("Workbook",r.join(""),{xmlns:_c.ss,"xmlns:o":_c.o,"xmlns:x":_c.x,"xmlns:ss":_c.ss,"xmlns:dt":_c.dt,"xmlns:html":_c.html})}function LIe(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=BSe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=TSe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var MIe=[60,1084,2066,2165,2175];function UIe(e,t,r,n,a){var s=n,i=[],o=r.slice(r.l,r.l+s);if(a&&a.enc&&a.enc.insitu&&o.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:a.enc.insitu(o)}i.push(o),r.l+=s;for(var c=qf(r,r.l),u=YF[c],d=0;u!=null&&MIe.indexOf(c)>-1;)s=qf(r,r.l+2),d=r.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=r.slice(d,r.l+4+s),i.push(o),r.l+=4+s,u=YF[c=qf(r,r.l)];var f=Ki(i);po(f,0);var h=0;f.lens=[];for(var p=0;p<i.length;++p)f.lens.push(h),h+=i[p].length;if(f.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+n;return t.f(f,f.length,a)}function yA(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Pr[n])}catch(s){if(t.WTF)throw s}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||jh[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ww(e.v):e.w=tg(e.v):e.w=Pu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(s){if(t.WTF)throw s}if(t.cellDates&&n&&e.t=="n"&&_1(Pr[n]||String(n))){var a=Cp(e.v);a&&(e.t="d",e.v=new Date(a.y,a.m-1,a.d,a.H,a.M,a.S,a.u))}}}function EC(e,t,r){return{v:e,ixfe:t,t:r}}function QIe(e,t){var r={opts:{}},n={},a=t.dense?[]:{},s={},i={},o=null,c=[],u="",d={},f,h="",p,g,v,b,y={},C=[],N,T,S=[],B=[],w={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},F=function(Qt){return Qt<8?Pp[Qt]:Qt<64&&B[Qt-8]||Pp[Qt]},M=function(Qt,yt,kr){var rr=yt.XF.data;if(!(!rr||!rr.patternType||!kr||!kr.cellStyles)){yt.s={},yt.s.patternType=rr.patternType;var an;(an=Nw(F(rr.icvFore)))&&(yt.s.fgColor={rgb:an}),(an=Nw(F(rr.icvBack)))&&(yt.s.bgColor={rgb:an})}},D=function(Qt,yt,kr){if(!(re>1)&&!(kr.sheetRows&&Qt.r>=kr.sheetRows)){if(kr.cellStyles&&yt.XF&&yt.XF.data&&M(Qt,yt,kr),delete yt.ixfe,delete yt.XF,f=Qt,h=Qr(Qt),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Qt.r<i.s.r&&(i.s.r=Qt.r),Qt.c<i.s.c&&(i.s.c=Qt.c),Qt.r+1>i.e.r&&(i.e.r=Qt.r+1),Qt.c+1>i.e.c&&(i.e.c=Qt.c+1),kr.cellFormula&&yt.f){for(var rr=0;rr<C.length;++rr)if(!(C[rr][0].s.c>Qt.c||C[rr][0].s.r>Qt.r)&&!(C[rr][0].e.c<Qt.c||C[rr][0].e.r<Qt.r)){yt.F=nn(C[rr][0]),(C[rr][0].s.c!=Qt.c||C[rr][0].s.r!=Qt.r)&&delete yt.f,yt.f&&(yt.f=""+Ho(C[rr][1],i,Qt,z,I));break}}kr.dense?(a[Qt.r]||(a[Qt.r]=[]),a[Qt.r][Qt.c]=yt):a[h]=yt}},I={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:C,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(I.password=t.password);var U,P=[],X=[],H=[],Y=[],V=!1,z=[];z.SheetNames=I.snames,z.sharedf=I.sharedf,z.arrayf=I.arrayf,z.names=[],z.XTI=[];var G=0,re=0,R=0,q=[],J=[],te;I.codepage=1200,wd(1200);for(var ie=!1;e.l<e.length-1;){var Ae=e.l,oe=e.read_shift(2);if(oe===0&&G===10)break;var ce=e.l===e.length?0:e.read_shift(2),pe=YF[oe];if(pe&&pe.f){if(t.bookSheets&&G===133&&oe!==133)break;if(G=oe,pe.r===2||pe.r==12){var Ie=e.read_shift(2);if(ce-=2,!I.enc&&Ie!==oe&&((Ie&255)<<8|Ie>>8)!==oe)throw new Error("rt mismatch: "+Ie+"!="+oe);pe.r==12&&(e.l+=10,ce-=10)}var ne={};if(oe===10?ne=pe.f(e,ce,I):ne=UIe(oe,pe,e,ce,I),re==0&&[9,521,1033,2057].indexOf(G)===-1)continue;switch(oe){case 34:r.opts.Date1904=w.WBProps.date1904=ne;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(I.enc||(e.l=0),I.enc=ne,!t.password)throw new Error("File is password-protected");if(ne.valid==null)throw new Error("Encryption scheme unsupported");if(!ne.valid)throw new Error("Password is incorrect");break;case 92:I.lastuser=ne;break;case 66:var Se=Number(ne);switch(Se){case 21010:Se=1200;break;case 32768:Se=1e4;break;case 32769:Se=1252;break}wd(I.codepage=Se),ie=!0;break;case 317:I.rrtabid=ne;break;case 25:I.winlocked=ne;break;case 439:r.opts.RefreshAll=ne;break;case 12:r.opts.CalcCount=ne;break;case 16:r.opts.CalcDelta=ne;break;case 17:r.opts.CalcIter=ne;break;case 13:r.opts.CalcMode=ne;break;case 14:r.opts.CalcPrecision=ne;break;case 95:r.opts.CalcSaveRecalc=ne;break;case 15:I.CalcRefMode=ne;break;case 2211:r.opts.FullCalc=ne;break;case 129:ne.fDialog&&(a["!type"]="dialog"),ne.fBelow||((a["!outline"]||(a["!outline"]={})).above=!0),ne.fRight||((a["!outline"]||(a["!outline"]={})).left=!0);break;case 224:S.push(ne);break;case 430:z.push([ne]),z[z.length-1].XTI=[];break;case 35:case 547:z[z.length-1].push(ne);break;case 24:case 536:te={Name:ne.Name,Ref:Ho(ne.rgce,i,null,z,I)},ne.itab>0&&(te.Sheet=ne.itab-1),z.names.push(te),z[0]||(z[0]=[],z[0].XTI=[]),z[z.length-1].push(ne),ne.Name=="_xlnm._FilterDatabase"&&ne.itab>0&&ne.rgce&&ne.rgce[0]&&ne.rgce[0][0]&&ne.rgce[0][0][0]=="PtgArea3d"&&(J[ne.itab-1]={ref:nn(ne.rgce[0][0][1][2])});break;case 22:I.ExternCount=ne;break;case 23:z.length==0&&(z[0]=[],z[0].XTI=[]),z[z.length-1].XTI=z[z.length-1].XTI.concat(ne),z.XTI=z.XTI.concat(ne);break;case 2196:if(I.biff<8)break;te!=null&&(te.Comment=ne[1]);break;case 18:a["!protect"]=ne;break;case 19:ne!==0&&I.WTF&&console.error("Password verifier: "+ne);break;case 133:s[ne.pos]=ne,I.snames.push(ne.name);break;case 10:{if(--re)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,a["!ref"]=nn(i),t.sheetRows&&t.sheetRows<=i.e.r){var De=i.e.r;i.e.r=t.sheetRows-1,a["!fullref"]=a["!ref"],a["!ref"]=nn(i),i.e.r=De}i.e.r++,i.e.c++}P.length>0&&(a["!merges"]=P),X.length>0&&(a["!objects"]=X),H.length>0&&(a["!cols"]=H),Y.length>0&&(a["!rows"]=Y),w.Sheets.push(_)}u===""?d=a:n[u]=a,a=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(I.biff===8&&(I.biff={9:2,521:3,1033:4}[oe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ne.BIFFVer]||8),I.biffguess=ne.BIFFVer==0,ne.BIFFVer==0&&ne.dt==4096&&(I.biff=5,ie=!0,wd(I.codepage=28591)),I.biff==8&&ne.BIFFVer==0&&ne.dt==16&&(I.biff=2),re++)break;if(a=t.dense?[]:{},I.biff<8&&!ie&&(ie=!0,wd(I.codepage=t.codepage||1252)),I.biff<5||ne.BIFFVer==0&&ne.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var _e={pos:e.l-ce,name:u};s[_e.pos]=_e,I.snames.push(u)}else u=(s[Ae]||{name:""}).name;ne.dt==32&&(a["!type"]="chart"),ne.dt==64&&(a["!type"]="macro"),P=[],X=[],I.arrayf=C=[],H=[],Y=[],V=!1,_={Hidden:(s[Ae]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:a["!type"]=="chart"&&(t.dense?(a[ne.r]||[])[ne.c]:a[Qr({c:ne.c,r:ne.r})])&&++ne.c,N={ixfe:ne.ixfe,XF:S[ne.ixfe]||{},v:ne.val,t:"n"},R>0&&(N.z=q[N.ixfe>>8&63]),yA(N,t,r.opts.Date1904),D({c:ne.c,r:ne.r},N,t);break;case 5:case 517:N={ixfe:ne.ixfe,XF:S[ne.ixfe],v:ne.val,t:ne.t},R>0&&(N.z=q[N.ixfe>>8&63]),yA(N,t,r.opts.Date1904),D({c:ne.c,r:ne.r},N,t);break;case 638:N={ixfe:ne.ixfe,XF:S[ne.ixfe],v:ne.rknum,t:"n"},R>0&&(N.z=q[N.ixfe>>8&63]),yA(N,t,r.opts.Date1904),D({c:ne.c,r:ne.r},N,t);break;case 189:for(var he=ne.c;he<=ne.C;++he){var je=ne.rkrec[he-ne.c][0];N={ixfe:je,XF:S[je],v:ne.rkrec[he-ne.c][1],t:"n"},R>0&&(N.z=q[N.ixfe>>8&63]),yA(N,t,r.opts.Date1904),D({c:he,r:ne.r},N,t)}break;case 6:case 518:case 1030:{if(ne.val=="String"){o=ne;break}if(N=EC(ne.val,ne.cell.ixfe,ne.tt),N.XF=S[N.ixfe],t.cellFormula){var He=ne.formula;if(He&&He[0]&&He[0][0]&&He[0][0][0]=="PtgExp"){var Xe=He[0][0][1][0],ye=He[0][0][1][1],Oe=Qr({r:Xe,c:ye});y[Oe]?N.f=""+Ho(ne.formula,i,ne.cell,z,I):N.F=((t.dense?(a[Xe]||[])[ye]:a[Oe])||{}).F}else N.f=""+Ho(ne.formula,i,ne.cell,z,I)}R>0&&(N.z=q[N.ixfe>>8&63]),yA(N,t,r.opts.Date1904),D(ne.cell,N,t),o=ne}break;case 7:case 519:if(o)o.val=ne,N=EC(ne,o.cell.ixfe,"s"),N.XF=S[N.ixfe],t.cellFormula&&(N.f=""+Ho(o.formula,i,o.cell,z,I)),R>0&&(N.z=q[N.ixfe>>8&63]),yA(N,t,r.opts.Date1904),D(o.cell,N,t),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{C.push(ne);var Re=Qr(ne[0].s);if(p=t.dense?(a[ne[0].s.r]||[])[ne[0].s.c]:a[Re],t.cellFormula&&p){if(!o||!Re||!p)break;p.f=""+Ho(ne[1],i,ne[0],z,I),p.F=nn(ne[0])}}break;case 1212:{if(!t.cellFormula)break;if(h){if(!o)break;y[Qr(o.cell)]=ne[0],p=t.dense?(a[o.cell.r]||[])[o.cell.c]:a[Qr(o.cell)],(p||{}).f=""+Ho(ne[0],i,f,z,I)}}break;case 253:N=EC(c[ne.isst].t,ne.ixfe,"s"),c[ne.isst].h&&(N.h=c[ne.isst].h),N.XF=S[N.ixfe],R>0&&(N.z=q[N.ixfe>>8&63]),yA(N,t,r.opts.Date1904),D({c:ne.c,r:ne.r},N,t);break;case 513:t.sheetStubs&&(N={ixfe:ne.ixfe,XF:S[ne.ixfe],t:"z"},R>0&&(N.z=q[N.ixfe>>8&63]),yA(N,t,r.opts.Date1904),D({c:ne.c,r:ne.r},N,t));break;case 190:if(t.sheetStubs)for(var qe=ne.c;qe<=ne.C;++qe){var Ze=ne.ixfe[qe-ne.c];N={ixfe:Ze,XF:S[Ze],t:"z"},R>0&&(N.z=q[N.ixfe>>8&63]),yA(N,t,r.opts.Date1904),D({c:qe,r:ne.r},N,t)}break;case 214:case 516:case 4:N=EC(ne.val,ne.ixfe,"s"),N.XF=S[N.ixfe],R>0&&(N.z=q[N.ixfe>>8&63]),yA(N,t,r.opts.Date1904),D({c:ne.c,r:ne.r},N,t);break;case 0:case 512:re===1&&(i=ne);break;case 252:c=ne;break;case 1054:if(I.biff==4){q[R++]=ne[1];for(var ot=0;ot<R+163&&Pr[ot]!=ne[1];++ot);ot>=163&&nh(ne[1],R+163)}else nh(ne[1],ne[0]);break;case 30:{q[R++]=ne;for(var mt=0;mt<R+163&&Pr[mt]!=ne;++mt);mt>=163&&nh(ne,R+163)}break;case 229:P=P.concat(ne);break;case 93:X[ne.cmo[0]]=I.lastobj=ne;break;case 438:I.lastobj.TxO=ne;break;case 127:I.lastobj.ImData=ne;break;case 440:for(b=ne[0].s.r;b<=ne[0].e.r;++b)for(v=ne[0].s.c;v<=ne[0].e.c;++v)p=t.dense?(a[b]||[])[v]:a[Qr({c:v,r:b})],p&&(p.l=ne[1]);break;case 2048:for(b=ne[0].s.r;b<=ne[0].e.r;++b)for(v=ne[0].s.c;v<=ne[0].e.c;++v)p=t.dense?(a[b]||[])[v]:a[Qr({c:v,r:b})],p&&p.l&&(p.l.Tooltip=ne[1]);break;case 28:{if(I.biff<=5&&I.biff>=2)break;p=t.dense?(a[ne[0].r]||[])[ne[0].c]:a[Qr(ne[0])];var Tt=X[ne[2]];p||(t.dense?(a[ne[0].r]||(a[ne[0].r]=[]),p=a[ne[0].r][ne[0].c]={t:"z"}):p=a[Qr(ne[0])]={t:"z"},i.e.r=Math.max(i.e.r,ne[0].r),i.s.r=Math.min(i.s.r,ne[0].r),i.e.c=Math.max(i.e.c,ne[0].c),i.s.c=Math.min(i.s.c,ne[0].c)),p.c||(p.c=[]),g={a:ne[1],t:Tt.TxO.t},p.c.push(g)}break;case 2173:kke(S[ne.ixfe],ne.ext);break;case 125:{if(!I.cellStyles)break;for(;ne.e>=ne.s;)H[ne.e--]={width:ne.w/256,level:ne.level||0,hidden:!!(ne.flags&1)},V||(V=!0,$P(ne.w/256)),xm(H[ne.e+1])}break;case 520:{var Mt={};ne.level!=null&&(Y[ne.r]=Mt,Mt.level=ne.level),ne.hidden&&(Y[ne.r]=Mt,Mt.hidden=!0),ne.hpt&&(Y[ne.r]=Mt,Mt.hpt=ne.hpt,Mt.hpx=Qx(ne.hpt))}break;case 38:case 39:case 40:case 41:a["!margins"]||Mp(a["!margins"]={}),a["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[oe]]=ne;break;case 161:a["!margins"]||Mp(a["!margins"]={}),a["!margins"].header=ne.header,a["!margins"].footer=ne.footer;break;case 574:ne.RTL&&(w.Views[0].RTL=!0);break;case 146:B=ne;break;case 2198:U=ne;break;case 140:T=ne;break;case 442:u?_.CodeName=ne||_.name:w.WBProps.CodeName=ne||"ThisWorkbook";break}}else pe||console.error("Missing Info for XLS Record 0x"+oe.toString(16)),e.l+=ce}return r.SheetNames=Is(s).sort(function(Dt,Qt){return Number(Dt)-Number(Qt)}).map(function(Dt){return s[Dt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&J.forEach(function(Dt,Qt){r.Sheets[r.SheetNames[Qt]]["!autofilter"]=Dt}),r.Strings=c,r.SSF=Va(Pr),I.enc&&(r.Encryption=I.enc),U&&(r.Themes=U),r.Metadata={},T!==void 0&&(r.Metadata.Country=T),z.names.length>0&&(w.Names=z.names),r.Workbook=w,r}var qy={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function HIe(e,t,r){var n=Cr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var a=WH(n,zF,qy.DSI);for(var s in a)t[s]=a[s]}catch(u){if(r.WTF)throw u}var i=Cr.find(e,"/!SummaryInformation");if(i&&i.size>0)try{var o=WH(i,$F,qy.SI);for(var c in o)t[c]==null&&(t[c]=o[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(Ute(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function VIe(e,t){var r=[],n=[],a=[],s=0,i,o=_H(zF,"n"),c=_H($F,"n");if(e.Props)for(i=Is(e.Props),s=0;s<i.length;++s)(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Props[i[s]]]);if(e.Custprops)for(i=Is(e.Custprops),s=0;s<i.length;++s)Object.prototype.hasOwnProperty.call(e.Props||{},i[s])||(Object.prototype.hasOwnProperty.call(o,i[s])?r:Object.prototype.hasOwnProperty.call(c,i[s])?n:a).push([i[s],e.Custprops[i[s]]]);var u=[];for(s=0;s<a.length;++s)Kte.indexOf(a[s][0])>-1||Mte.indexOf(a[s][0])>-1||a[s][1]!=null&&u.push(a[s]);n.length&&Cr.utils.cfb_add(t,"/SummaryInformation",XH(n,qy.SI,c,$F)),(r.length||u.length)&&Cr.utils.cfb_add(t,"/DocumentSummaryInformation",XH(r,qy.DSI,o,zF,u.length?u:null,qy.UDI))}function Hre(e,t){t||(t={}),eR(t),yP(),t.codepage&&bP(t.codepage);var r,n;if(e.FullPaths){if(Cr.find(e,"/encryption"))throw new Error("File is password-protected");r=Cr.find(e,"!CompObj"),n=Cr.find(e,"/Workbook")||Cr.find(e,"/Book")}else{switch(t.type){case"base64":e=Bc(Pc(e));break;case"binary":e=Bc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}po(e,0),n={content:e}}var a,s;if(r&&LIe(r),t.bookProps&&!t.bookSheets)a={};else{var i=pn?"buffer":"array";if(n&&n.content)a=QIe(n.content,t);else if((s=Cr.find(e,"PerfectOffice_MAIN"))&&s.content)a=Lp.to_workbook(s.content,(t.type=i,t));else if((s=Cr.find(e,"NativeContent_MAIN"))&&s.content)a=Lp.to_workbook(s.content,(t.type=i,t));else throw(s=Cr.find(e,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Cr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(a.vbaraw=rBe(e))}var o={};return e.FullPaths&&HIe(e,o,t),a.Props=a.Custprops=o,t.bookFiles&&(a.cfb=e),a}function zIe(e,t){var r=t||{},n=Cr.utils.cfb_new({root:"R"}),a="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":a="/Workbook",r.biff=8;break;case"biff5":a="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Cr.utils.cfb_add(n,a,Vre(e,r)),r.biff==8&&(e.Props||e.Custprops)&&VIe(e,n),r.biff==8&&e.vbaraw&&nBe(n,Cr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var jw={0:{f:h3e},1:{f:w3e},2:{f:Q3e},3:{f:T3e},4:{f:S3e},5:{f:L3e},6:{f:G3e},7:{f:O3e},8:{f:Z3e},9:{f:J3e},10:{f:X3e},11:{f:Y3e},12:{f:C3e},13:{f:V3e},14:{f:I3e},15:{f:k3e},16:{f:Ore},17:{f:q3e},18:{f:P3e},19:{f:DP},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:qje},40:{},42:{},43:{f:G4e},44:{f:z4e},45:{f:W4e},46:{f:Y4e},47:{f:X4e},48:{},49:{f:gSe},50:{},51:{f:jke},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:are},62:{f:$3e},63:{f:Uke},64:{f:mje},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:tl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:dje},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:b3e},148:{f:g3e,p:16},151:{f:sje},152:{},153:{f:$je},154:{},155:{},156:{f:Vje},157:{},158:{},159:{T:1,f:o4e},160:{T:-1},161:{T:1,f:Cg},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:eje},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Bke},336:{T:-1},337:{f:Oke,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:VF},357:{},358:{},359:{},360:{T:1},361:{},362:{f:nre},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:ije},427:{f:oje},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:cje},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:x3e},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:nje},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:VF},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:Yke},633:{T:1},634:{T:-1},635:{T:1,f:Wke},636:{T:-1},637:{f:ySe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Ije},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:pje},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},YF={6:{f:qT},10:{f:y0},12:{f:ci},13:{f:ci},14:{f:Qs},15:{f:Qs},16:{f:Xo},17:{f:Qs},18:{f:Qs},19:{f:ci},20:{f:rV},21:{f:rV},23:{f:nre},24:{f:aV},25:{f:Qs},26:{},27:{},28:{f:pNe},29:{},34:{f:Qs},35:{f:nV},38:{f:Xo},39:{f:Xo},40:{f:Xo},41:{f:Xo},42:{f:Qs},43:{f:Qs},47:{f:k4e},49:{f:V5e},51:{f:ci},60:{},61:{f:L5e},64:{f:Qs},65:{f:H5e},66:{f:ci},77:{},80:{},81:{},82:{},85:{f:ci},89:{},90:{},91:{},92:{f:N5e},93:{f:xNe},94:{},95:{f:Qs},96:{},97:{},99:{f:Qs},125:{f:are},128:{f:aNe},129:{f:B5e},130:{f:ci},131:{f:Qs},132:{f:Qs},133:{f:T5e},134:{},140:{f:NNe},141:{f:ci},144:{},146:{f:TNe},151:{},152:{},153:{},154:{},155:{},156:{f:ci},157:{},158:{},160:{f:RNe},161:{f:FNe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:eNe},190:{f:tNe},193:{f:y0},197:{},198:{},199:{},200:{},201:{},202:{f:Qs},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ci},220:{},221:{f:Qs},222:{},224:{f:nNe},225:{f:S5e},226:{f:y0},227:{},229:{f:gNe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:I5e},253:{f:$5e},255:{f:O5e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:qte},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Qs},353:{f:y0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:cNe},431:{f:Qs},432:{},433:{},434:{},437:{},438:{f:wNe},439:{f:Qs},440:{f:ENe},441:{},442:{f:C2},443:{},444:{f:ci},445:{},446:{},448:{f:y0},449:{f:R5e,r:2},450:{f:y0},512:{f:ZH},513:{f:PNe},515:{f:oNe},516:{f:K5e},517:{f:tV},519:{f:LNe},520:{f:D5e},523:{},545:{f:sV},549:{f:JH},566:{},574:{f:U5e},638:{f:Z5e},659:{},1048:{},1054:{f:W5e},1084:{},1212:{f:fNe},2048:{f:_Ne},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:bC},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:y0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:jNe,r:12},2173:{f:Nke,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Qs,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:ANe,r:12},2197:{},2198:{f:yke,r:12},2199:{},2200:{},2201:{},2202:{f:hNe,r:12},2203:{f:y0},2204:{},2205:{},2206:{},2207:{},2211:{f:P5e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ci},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:ONe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:BNe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:ZH},1:{},2:{f:VNe},3:{f:QNe},4:{f:UNe},5:{f:tV},7:{f:$Ne},8:{},9:{f:bC},11:{},22:{f:ci},30:{f:Y5e},31:{},32:{},33:{f:sV},36:{},37:{f:JH},50:{f:GNe},62:{},52:{},67:{},68:{f:ci},69:{},86:{},126:{},127:{f:MNe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:KNe},223:{},234:{},354:{},421:{},518:{f:qT},521:{f:bC},536:{f:aV},547:{f:nV},561:{},579:{},1030:{f:qT},1033:{f:bC},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function qt(e,t,r,n){var a=t;if(!isNaN(a)){var s=n||(r||[]).length||0,i=e.next(4);i.write_shift(2,a),i.write_shift(2,s),s>0&&IP(r)&&e.push(r)}}function $Ie(e,t,r,n){var a=(r||[]).length||0;if(a<=8224)return qt(e,t,r,a);var s=t;if(!isNaN(s)){for(var i=r.parts||[],o=0,c=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=e.next(4);for(d.write_shift(2,s),d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<a;){for(d=e.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function k2(e,t,r){return e||(e=wt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function GIe(e,t,r,n){var a=wt(9);return k2(a,e,t),Wte(r,n||"b",a),a}function KIe(e,t,r){var n=wt(8+2*r.length);return k2(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function qIe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var a=t.t=="d"?Ni(Ha(t.v)):t.v;a==(a|0)&&a>=0&&a<65536?qt(e,2,zNe(r,n,a)):qt(e,3,HNe(r,n,a));return;case"b":case"e":qt(e,5,GIe(r,n,t.v,t.t));return;case"s":case"str":qt(e,4,KIe(r,n,(t.v||"").slice(0,255)));return}qt(e,1,k2(null,r,n))}function WIe(e,t,r,n){var a=Array.isArray(t),s=Vn(t["!ref"]||"A1"),i,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),i=nn(s)}for(var u=s.s.r;u<=s.e.r;++u){o=Ws(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=ls(d)),i=c[d]+o;var f=a?(t[u]||[])[d]:t[i];f&&qIe(e,f,u,d)}}}function XIe(e,t){for(var r=t||{},n=Yl(),a=0,s=0;s<e.SheetNames.length;++s)e.SheetNames[s]==r.sheet&&(a=s);if(a==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return qt(n,r.biff==4?1033:r.biff==3?521:9,HP(e,16,r)),WIe(n,e.Sheets[e.SheetNames[a]],a,r),qt(n,10),n.end()}function YIe(e,t,r){qt(e,49,z5e({sz:12,name:"Arial"},r))}function JIe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&qt(e,1054,X5e(a,t[a],r))})}function ZIe(e,t){var r=wt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),qt(e,2151,r),r=wt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),ere(Vn(t["!ref"]||"A1"),r),r.write_shift(4,4),qt(e,2152,r)}function eFe(e,t){for(var r=0;r<16;++r)qt(e,224,eV({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){qt(e,224,eV(n,0,t))})}function tFe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];qt(e,440,CNe(n)),n[1].Tooltip&&qt(e,2048,SNe(n))}delete t["!links"]}function rFe(e,t){if(t){var r=0;t.forEach(function(n,a){++r<=256&&n&&qt(e,125,INe(_4(a,n),a))})}}function nFe(e,t,r,n,a){var s=16+jm(a.cellXfs,t,a);if(t.v==null&&!t.bf){qt(e,513,sg(r,n,s));return}if(t.bf)qt(e,6,BTe(t,r,n,a,s));else switch(t.t){case"d":case"n":var i=t.t=="d"?Ni(Ha(t.v)):t.v;qt(e,515,lNe(r,n,i,s));break;case"b":case"e":qt(e,517,iNe(r,n,t.v,s,a,t.t));break;case"s":case"str":if(a.bookSST){var o=XP(a.Strings,t.v,a.revStrings);qt(e,253,G5e(r,n,o,s))}else qt(e,516,q5e(r,n,(t.v||"").slice(0,255),s,a));break;default:qt(e,513,sg(r,n,s))}}function aFe(e,t,r){var n=Yl(),a=r.SheetNames[e],s=r.Sheets[a]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[e]||{},c=Array.isArray(s),u=t.biff==8,d,f="",h=[],p=Vn(s["!ref"]||"A1"),g=u?65536:16384;if(p.e.c>255||p.e.r>=g){if(t.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,g-1)}qt(n,2057,HP(r,16,t)),qt(n,13,Eu(1)),qt(n,12,Eu(100)),qt(n,15,fl(!0)),qt(n,17,fl(!1)),qt(n,16,ng(.001)),qt(n,95,fl(!0)),qt(n,42,fl(!1)),qt(n,43,fl(!1)),qt(n,130,Eu(1)),qt(n,128,sNe()),qt(n,131,fl(!1)),qt(n,132,fl(!1)),u&&rFe(n,s["!cols"]),qt(n,512,J5e(p,t)),u&&(s["!links"]=[]);for(var v=p.s.r;v<=p.e.r;++v){f=Ws(v);for(var b=p.s.c;b<=p.e.c;++b){v===p.s.r&&(h[b]=ls(b)),d=h[b]+f;var y=c?(s[v]||[])[b]:s[d];y&&(nFe(n,y,v,b,t),u&&y.l&&s["!links"].push([d,y.l]))}}var C=o.CodeName||o.name||a;return u&&qt(n,574,Q5e((i.Views||[])[0])),u&&(s["!merges"]||[]).length&&qt(n,229,vNe(s["!merges"])),u&&tFe(n,s),qt(n,442,Xte(C)),u&&ZIe(n,s),qt(n,10),n.end()}function sFe(e,t,r){var n=Yl(),a=(e||{}).Workbook||{},s=a.Sheets||[],i=a.WBProps||{},o=r.biff==8,c=r.biff==5;if(qt(n,2057,HP(e,5,r)),r.bookType=="xla"&&qt(n,135),qt(n,225,o?Eu(1200):null),qt(n,193,i5e(2)),c&&qt(n,191),c&&qt(n,192),qt(n,226),qt(n,92,k5e("SheetJS",r)),qt(n,66,Eu(o?1200:1252)),o&&qt(n,353,Eu(0)),o&&qt(n,448),qt(n,317,DNe(e.SheetNames.length)),o&&e.vbaraw&&qt(n,211),o&&e.vbaraw){var u=i.CodeName||"ThisWorkbook";qt(n,442,Xte(u))}qt(n,156,Eu(17)),qt(n,25,fl(!1)),qt(n,18,fl(!1)),qt(n,19,Eu(0)),o&&qt(n,431,fl(!1)),o&&qt(n,444,Eu(0)),qt(n,61,M5e()),qt(n,64,fl(!1)),qt(n,141,Eu(0)),qt(n,34,fl(Rje(e)=="true")),qt(n,14,fl(!0)),o&&qt(n,439,fl(!1)),qt(n,218,Eu(0)),YIe(n,e,r),JIe(n,e.SSF,r),eFe(n,r),o&&qt(n,352,fl(!1));var d=n.end(),f=Yl();o&&qt(f,140,kNe()),o&&r.Strings&&$Ie(f,252,F5e(r.Strings)),qt(f,10);var h=f.end(),p=Yl(),g=0,v=0;for(v=0;v<e.SheetNames.length;++v)g+=(o?12:11)+(o?2:1)*e.SheetNames[v].length;var b=d.length+g+h.length;for(v=0;v<e.SheetNames.length;++v){var y=s[v]||{};qt(p,133,j5e({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[v]},r)),b+=t[v].length}var C=p.end();if(g!=C.length)throw new Error("BS8 "+g+" != "+C.length);var N=[];return d.length&&N.push(d),C.length&&N.push(C),h.length&&N.push(h),Ki(N)}function iFe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=Va(Pr)),e&&e.SSF&&(S1(),v4(e.SSF),r.revssf=b4(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,tR(r),r.cellXfs=[],jm(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var a=0;a<e.SheetNames.length;++a)n[n.length]=aFe(a,r,e);return n.unshift(sFe(e,n,r)),Ki(n)}function Vre(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var a=Zl(n["!ref"]);a.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var s=t||{};switch(s.biff||2){case 8:case 5:return iFe(e,t);case 4:case 3:case 2:return XIe(e,t)}throw new Error("invalid type "+s.bookType+" for BIFF")}function mV(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var a=e.match(/<table/i);if(!a)throw new Error("Invalid HTML: could not find <table>");var s=e.match(/<\/table/i),i=a.index,o=s&&s.index||e.length,c=z_e(e.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,f=0,h=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},g=[];for(i=0;i<c.length;++i){var v=c[i].trim(),b=v.slice(0,3).toLowerCase();if(b=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(b!="<td"&&b!="<th")){var y=v.split(/<\/t[dh]>/i);for(o=0;o<y.length;++o){var C=y[o].trim();if(C.match(/<t[dh]/i)){for(var N=C,T=0;N.charAt(0)=="<"&&(T=N.indexOf(">"))>-1;)N=N.slice(T+1);for(var S=0;S<g.length;++S){var B=g[S];B.s.c==d&&B.s.r<u&&u<=B.e.r&&(d=B.e.c+1,S=-1)}var w=Gr(C.slice(0,C.indexOf(">")));h=w.colspan?+w.colspan:1,((f=+w.rowspan)>1||h>1)&&g.push({s:{r:u,c:d},e:{r:u+(f||1)-1,c:d+h-1}});var _=w.t||w["data-t"]||"";if(!N.length){d+=h;continue}if(N=fte(N),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>d&&(p.s.c=d),p.e.c<d&&(p.e.c=d),!N.length){d+=h;continue}var F={t:"s",v:N};r.raw||!N.trim().length||_=="s"||(N==="TRUE"?F={t:"b",v:!0}:N==="FALSE"?F={t:"b",v:!1}:isNaN(Bd(N))?isNaN(Mx(N).getDate())||(F={t:"d",v:Ha(N)},r.cellDates||(F={t:"n",v:Ni(F.v)}),F.z=r.dateNF||Pr[14]):F={t:"n",v:Bd(N)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=F):n[Qr({r:u,c:d})]=F,d+=h}}}}return n["!ref"]=nn(p),g.length&&(n["!merges"]=g),n}function oFe(e,t,r,n){for(var a=e["!merges"]||[],s=[],i=t.s.c;i<=t.e.c;++i){for(var o=0,c=0,u=0;u<a.length;++u)if(!(a[u].s.r>r||a[u].s.c>i)&&!(a[u].e.r<r||a[u].e.c<i)){if(a[u].s.r<r||a[u].s.c<i){o=-1;break}o=a[u].e.r-a[u].s.r+1,c=a[u].e.c-a[u].s.c+1;break}if(!(o<0)){var d=Qr({r,c:i}),f=n.dense?(e[r]||[])[i]:e[d],h=f&&f.v!=null&&(f.h||BP(f.w||(ph(f),f.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),n.editable?h='<span contenteditable="true">'+h+"</span>":f&&(p["data-t"]=f&&f.t||"z",f.v!=null&&(p["data-v"]=f.v),f.z!=null&&(p["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(h='<a href="'+f.l.Target+'">'+h+"</a>")),p.id=(n.id||"sjs")+"-"+d,s.push(Kt("td",h,p))}}var g="<tr>";return g+s.join("")+"</tr>"}var lFe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',cFe="</body></html>";function uFe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Tm(mV(r[0],t),t);var n=sR();return r.forEach(function(a,s){iR(n,mV(a,t),"Sheet"+(s+1))}),n}function dFe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function zre(e,t){var r=t||{},n=r.header!=null?r.header:lFe,a=r.footer!=null?r.footer:cFe,s=[n],i=Zl(e["!ref"]);r.dense=Array.isArray(e),s.push(dFe(e,i,r));for(var o=i.s.r;o<=i.e.r;++o)s.push(oFe(e,i,o,r));return s.push("</table>"+a),s.join("")}function $re(e,t,r){var n=r||{},a=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var i=typeof n.origin=="string"?cs(n.origin):n.origin;a=i.r,s=i.c}var o=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:a,c:s}};if(e["!ref"]){var d=Zl(e["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),a==-1&&(u.e.r=a=d.e.r+1)}var f=[],h=0,p=e["!rows"]||(e["!rows"]=[]),g=0,v=0,b=0,y=0,C=0,N=0;for(e["!cols"]||(e["!cols"]=[]);g<o.length&&v<c;++g){var T=o[g];if(pV(T)){if(n.display)continue;p[v]={hidden:!0}}var S=T.children;for(b=y=0;b<S.length;++b){var B=S[b];if(!(n.display&&pV(B))){var w=B.hasAttribute("data-v")?B.getAttribute("data-v"):B.hasAttribute("v")?B.getAttribute("v"):fte(B.innerHTML),_=B.getAttribute("data-z")||B.getAttribute("z");for(h=0;h<f.length;++h){var F=f[h];F.s.c==y+s&&F.s.r<v+a&&v+a<=F.e.r&&(y=F.e.c+1-s,h=-1)}N=+B.getAttribute("colspan")||1,((C=+B.getAttribute("rowspan")||1)>1||N>1)&&f.push({s:{r:v+a,c:y+s},e:{r:v+a+(C||1)-1,c:y+s+(N||1)-1}});var M={t:"s",v:w},D=B.getAttribute("data-t")||B.getAttribute("t")||"";w!=null&&(w.length==0?M.t=D||"z":n.raw||w.trim().length==0||D=="s"||(w==="TRUE"?M={t:"b",v:!0}:w==="FALSE"?M={t:"b",v:!1}:isNaN(Bd(w))?isNaN(Mx(w).getDate())||(M={t:"d",v:Ha(w)},n.cellDates||(M={t:"n",v:Ni(M.v)}),M.z=n.dateNF||Pr[14]):M={t:"n",v:Bd(w)})),M.z===void 0&&_!=null&&(M.z=_);var I="",U=B.getElementsByTagName("A");if(U&&U.length)for(var P=0;P<U.length&&!(U[P].hasAttribute("href")&&(I=U[P].getAttribute("href"),I.charAt(0)!="#"));++P);I&&I.charAt(0)!="#"&&(M.l={Target:I}),n.dense?(e[v+a]||(e[v+a]=[]),e[v+a][y+s]=M):e[Qr({c:y+s,r:v+a})]=M,u.e.c<y+s&&(u.e.c=y+s),y+=N}}++v}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),u.e.r=Math.max(u.e.r,v-1+a),e["!ref"]=nn(u),v>=c&&(e["!fullref"]=nn((u.e.r=o.length-g+v-1+a,u))),e}function Gre(e,t){var r=t||{},n=r.dense?[]:{};return $re(n,e,t)}function AFe(e,t){return Tm(Gre(e,t),t)}function pV(e){var t="",r=fFe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function fFe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function hFe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,a){return Array(parseInt(a,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Hn(t.replace(/<[^>]*>/g,""));return[r]}var gV={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Kre(e,t){var r=t||{},n=TP(e),a=[],s,i,o={name:""},c="",u=0,d,f,h={},p=[],g=r.dense?[]:{},v,b,y={value:""},C="",N=0,T=[],S=-1,B=-1,w={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,F={},M=[],D={},I=0,U=0,P=[],X=1,H=1,Y=[],V={Names:[]},z={},G=["",""],re=[],R={},q="",J=0,te=!1,ie=!1,Ae=0;for(_w.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=_w.exec(n);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"工作表":v[1]==="/"?(w.e.c>=w.s.c&&w.e.r>=w.s.r?g["!ref"]=nn(w):g["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=w.e.r&&(g["!fullref"]=g["!ref"],w.e.r=r.sheetRows-1,g["!ref"]=nn(w)),M.length&&(g["!merges"]=M),P.length&&(g["!rows"]=P),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),p.push(d.name),h[d.name]=g,ie=!1):v[0].charAt(v[0].length-2)!=="/"&&(d=Gr(v[0],!1),S=B=-1,w.s.r=w.s.c=1e7,w.e.r=w.e.c=0,g=r.dense?[]:{},M=[],P=[],ie=!0);break;case"table-row-group":v[1]==="/"?--_:++_;break;case"table-row":case"行":if(v[1]==="/"){S+=X,X=1;break}if(f=Gr(v[0],!1),f.行号?S=f.行号-1:S==-1&&(S=0),X=+f["number-rows-repeated"]||1,X<10)for(Ae=0;Ae<X;++Ae)_>0&&(P[S+Ae]={level:_});B=-1;break;case"covered-table-cell":v[1]!=="/"&&++B,r.sheetStubs&&(r.dense?(g[S]||(g[S]=[]),g[S][B]={t:"z"}):g[Qr({r:S,c:B})]={t:"z"}),C="",T=[];break;case"table-cell":case"数据":if(v[0].charAt(v[0].length-2)==="/")++B,y=Gr(v[0],!1),H=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=AV(Hn(y.formula))),(y.数据类型||y["value-type"])=="string"&&(b.t="s",b.v=Hn(y["string-value"]||""),r.dense?(g[S]||(g[S]=[]),g[S][B]=b):g[Qr({r:S,c:B})]=b),B+=H-1;else if(v[1]!=="/"){++B,C="",N=0,T=[],H=1;var oe=X?S+X-1:S;if(B>w.e.c&&(w.e.c=B),B<w.s.c&&(w.s.c=B),S<w.s.r&&(w.s.r=S),oe>w.e.r&&(w.e.r=oe),y=Gr(v[0],!1),re=[],R={},b={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Hn(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(I=parseInt(y["number-matrix-rows-spanned"],10)||0,U=parseInt(y["number-matrix-columns-spanned"],10)||0,D={s:{r:S,c:B},e:{r:S+I-1,c:B+U-1}},b.F=nn(D),Y.push([D,b.F])),y.formula)b.f=AV(y.formula);else for(Ae=0;Ae<Y.length;++Ae)S>=Y[Ae][0].s.r&&S<=Y[Ae][0].e.r&&B>=Y[Ae][0].s.c&&B<=Y[Ae][0].e.c&&(b.F=Y[Ae][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(I=parseInt(y["number-rows-spanned"],10)||0,U=parseInt(y["number-columns-spanned"],10)||0,D={s:{r:S,c:B},e:{r:S+I-1,c:B+U-1}},M.push(D)),y["number-columns-repeated"]&&(H=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Ua(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Ha(y["date-value"]),r.cellDates||(b.t="n",b.v=Ni(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=Q_e(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=y4(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.数据数值);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(C=Hn(y["string-value"]),T=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(te=!1,b.t==="s"&&(b.v=C||"",T.length&&(b.R=T),te=N==0),z.Target&&(b.l=z),re.length>0&&(b.c=re,re=[]),C&&r.cellText!==!1&&(b.w=C),te&&(b.t="z",delete b.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var ce=0;ce<X;++ce){if(H=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(g[S+ce]||(g[S+ce]=[]),g[S+ce][B]=ce==0?b:Va(b);--H>0;)g[S+ce][B+H]=Va(b);else for(g[Qr({r:S+ce,c:B})]=b;--H>0;)g[Qr({r:S+ce,c:B+H})]=Va(b);w.e.c<=B&&(w.e.c=B)}H=parseInt(y["number-columns-repeated"]||"1",10),B+=H-1,H=0,b={},C="",T=[]}z={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s;R.t=C,T.length&&(R.R=T),R.a=q,re.push(R)}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!1]);q="",J=0,C="",N=0,T=[];break;case"creator":v[1]==="/"?q=n.slice(J,v.index):J=v.index+v[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&a.push([v[3],!1]);C="",N=0,T=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(F[o.name]=c,(s=a.pop())[0]!==v[3])throw"Bad state: "+s}else v[0].charAt(v[0].length-2)!=="/"&&(c="",o=Gr(v[0],!1),a.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Gr(v[0],!1),c+=gV[v[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(a[a.length-1][0]){case"time-style":case"date-style":i=Gr(v[0],!1),c+=gV[v[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(a[a.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,v.index);break}else u=v.index+v[0].length;break;case"named-range":i=Gr(v[0],!1),G=WT(i["cell-range-address"]);var pe={Name:i.name,Ref:G[0]+"!"+G[1]};ie&&(pe.Sheet=p.length),V.Names.push(pe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(a[a.length-1][0])>-1)break;if(v[1]==="/"&&(!y||!y["string-value"])){var Ie=hFe(n.slice(N,v.index));C=(C.length>0?C+`
`:"")+Ie[0]}else Gr(v[0],!1),N=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{G=WT(Gr(v[0])["target-range-address"]),h[G[0]]["!autofilter"]={ref:G[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(z=Gr(v[0],!1),!z.href)break;z.Target=Hn(z.href),delete z.href,z.Target.charAt(0)=="#"&&z.Target.indexOf(".")>-1?(G=WT(z.Target.slice(1)),z.Target="#"+G[0]+"!"+G[1]):z.Target.match(/^\.\.[\\\/]/)&&(z.Target=z.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(v)}}var ne={Sheets:h,SheetNames:p,Workbook:V};return r.bookSheets&&delete ne.Sheets,ne}function vV(e,t){t=t||{},yu(e,"META-INF/manifest.xml")&&QSe(li(e,"META-INF/manifest.xml"),t);var r=Tc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=Kre(Ca(r),t);return yu(e,"meta.xml")&&(n.Props=Rte(li(e,"meta.xml"))),n}function xV(e,t){return Kre(e,t)}var mFe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Cw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Ys+t}}(),bV=function(){var e=function(s){return va(s).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(s,i,o){var c=[];c.push('      <table:table table:name="'+va(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,f=Zl(s["!ref"]||"A1"),h=s["!merges"]||[],p=0,g=Array.isArray(s);if(s["!cols"])for(d=0;d<=f.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var v="",b=s["!rows"]||[];for(u=0;u<f.s.r;++u)v=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+v+`></table:table-row>
`);for(;u<=f.e.r;++u){for(v=b[u]?' table:style-name="ro'+b[u].ods+'"':"",c.push("        <table:table-row"+v+`>
`),d=0;d<f.s.c;++d)c.push(t);for(;d<=f.e.c;++d){var y=!1,C={},N="";for(p=0;p!=h.length;++p)if(!(h[p].s.c>d)&&!(h[p].s.r>u)&&!(h[p].e.c<d)&&!(h[p].e.r<u)){(h[p].s.c!=d||h[p].s.r!=u)&&(y=!0),C["table:number-columns-spanned"]=h[p].e.c-h[p].s.c+1,C["table:number-rows-spanned"]=h[p].e.r-h[p].s.r+1;break}if(y){c.push(r);continue}var T=Qr({r:u,c:d}),S=g?(s[u]||[])[d]:s[T];if(S&&S.f&&(C["table:formula"]=va(DTe(S.f)),S.F&&S.F.slice(0,T.length)==T)){var B=Zl(S.F);C["table:number-matrix-columns-spanned"]=B.e.c-B.s.c+1,C["table:number-matrix-rows-spanned"]=B.e.r-B.s.r+1}if(!S){c.push(t);continue}switch(S.t){case"b":N=S.v?"TRUE":"FALSE",C["office:value-type"]="boolean",C["office:boolean-value"]=S.v?"true":"false";break;case"n":N=S.w||String(S.v||0),C["office:value-type"]="float",C["office:value"]=S.v||0;break;case"s":case"str":N=S.v==null?"":S.v,C["office:value-type"]="string";break;case"d":N=S.w||Ha(S.v).toISOString(),C["office:value-type"]="date",C["office:date-value"]=Ha(S.v).toISOString(),C["table:style-name"]="ce1";break;default:c.push(t);continue}var w=e(N);if(S.l&&S.l.Target){var _=S.l.Target;_=_.charAt(0)=="#"?"#"+PTe(_.slice(1)):_,_.charAt(0)!="#"&&!_.match(/^\w+:/)&&(_="../"+_),w=Kt("text:a",w,{"xlink:href":_.replace(/&/g,"&amp;")})}c.push("          "+Kt("table:table-cell",Kt("text:p",w,{}),C)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},a=function(s,i){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var f=u["!cols"][d];if(f.width==null&&f.wpx==null&&f.wch==null)continue;xm(f),f.ods=o;var h=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+h+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var f=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(i,o){var c=[Ys],u=Cw({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Cw({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(Pte().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),a(c,i),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=i.SheetNames.length;++f)c.push(n(i.Sheets[i.SheetNames[f]],i,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function qre(e,t){if(t.bookType=="fods")return bV(e,t);var r=SP(),n="",a=[],s=[];return n="mimetype",un(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",un(r,n,bV(e,t)),a.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",un(r,n,mFe(e,t)),a.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",un(r,n,Ys+Pte()),a.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",un(r,n,zSe(s)),a.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",un(r,n,HSe(a)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ig(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function JF(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ca(Bm(e))}function pFe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Bc(RA(e))}function gFe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function ym(e){var t=e.reduce(function(a,s){return a+s.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(a){r.set(a,n),n+=a.length}),r}function yV(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function vFe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,a=t+13;a>=t;--a)n=n*256+e[a];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function xFe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,a=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var s=0;a>=1;++s,a/=256)e[t+s]=a&255;e[t+15]|=r>=0?0:128}function Iw(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ha(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ts(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Xn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],a=Iw(e,r),s=a&7;a=Math.floor(a/8);var i=0,o;if(a==0)break;switch(s){case 0:{for(var c=r[0];e[r[0]++]>=128;);o=e.slice(c,r[0])}break;case 5:i=4,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Iw(e,r),o=e.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(a," at offset ").concat(n))}var u={data:o,type:s};t[a]==null?t[a]=[u]:t[a].push(u)}return t}function co(e){var t=[];return e.forEach(function(r,n){r.forEach(function(a){a.data&&(t.push(ha(n*8+a.type)),a.type==2&&t.push(ha(a.data.length)),t.push(a.data))})}),ym(t)}function ZP(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function vu(e){for(var t,r=[],n=[0];n[0]<e.length;){var a=Iw(e,n),s=Xn(e.slice(n[0],n[0]+a));n[0]+=a;var i={id:Ts(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=Xn(o.data),u=Ts(c[3][0].data);i.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=s[3])!=null&&t[0]&&(i.merge=Ts(s[3][0].data)>>>0>0),r.push(i)}return r}function fv(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ha(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ha(+!!r.merge),type:0}]);var a=[];r.messages.forEach(function(i){a.push(i.data),i.meta[3]=[{type:0,data:ha(i.data.length)}],n[2].push({data:co(i.meta),type:2})});var s=co(n);t.push(ha(s.length)),t.push(s),a.forEach(function(i){return t.push(i)})}),ym(t)}function bFe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=Iw(t,r),a=[];r[0]<t.length;){var s=t[r[0]]&3;if(s==0){var i=t[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=t[r[0]],o>1&&(i|=t[r[0]+1]<<8),o>2&&(i|=t[r[0]+2]<<16),o>3&&(i|=t[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}a.push(t.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var c=0,u=0;if(s==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,s==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),a=[ym(a)],c==0)throw new Error("Invalid offset 0");if(c>a[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(a.push(a[0].slice(-c)),u-=c;u>=a[a.length-1].length;)a.push(a[a.length-1]),u-=a[a.length-1].length;a.push(a[0].slice(-c,-c+u))}}var d=ym(a);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function xu(e){for(var t=[],r=0;r<e.length;){var n=e[r++],a=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(bFe(n,e.slice(r,r+a))),r+=a}if(r!==e.length)throw new Error("data is not a valid framed stream!");return ym(t)}function hv(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),a=new Uint8Array(4);t.push(a);var s=ha(n),i=s.length;t.push(s),n<=60?(i++,t.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),i+=n,a[0]=0,a[1]=i&255,a[2]=i>>8&255,a[3]=i>>16&255,r+=n}return ym(t)}function yFe(e,t,r,n){var a=ig(e),s=a.getUint32(4,!0),i=(n>1?12:8)+yV(s&(n>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=a.getUint32(i,!0),i+=4),i+=yV(s&(n>1?12288:4096))*4,s&16&&(c=a.getUint32(i,!0),i+=4),s&32&&(u=a.getFloat64(i,!0),i+=8),s&64&&(d.setTime(d.getTime()+a.getFloat64(i,!0)*1e3),i+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:u};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(u))f={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function wFe(e,t,r){var n=ig(e),a=n.getUint32(8,!0),s=12,i=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);a&1&&(c=vFe(e,s),s+=16),a&2&&(u=n.getFloat64(s,!0),s+=8),a&4&&(d.setTime(d.getTime()+n.getFloat64(s,!0)*1e3),s+=8),a&8&&(o=n.getUint32(s,!0),s+=4),a&16&&(i=n.getUint32(s,!0),s+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[o]};break;case 5:f={t:"d",v:d};break;case 6:f={t:"b",v:u>0};break;case 7:f={t:"n",v:u/86400};break;case 8:f={t:"e",v:0};break;case 9:if(i>-1)f={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(a&31," : ").concat(e.slice(0,4)))}return f}function YT(e,t){var r=new Uint8Array(32),n=ig(r),a=12,s=0;switch(r[0]=5,e.t){case"n":r[1]=2,xFe(r,a,e.v),s|=1,a+=16;break;case"b":r[1]=6,n.setFloat64(a,e.v?1:0,!0),s|=2,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=8,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,s,!0),r.slice(0,a)}function JT(e,t){var r=new Uint8Array(32),n=ig(r),a=12,s=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(a,e.v,!0),s|=32,a+=8;break;case"b":r[2]=6,n.setFloat64(a,e.v?1:0,!0),s|=32,a+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(a,t.indexOf(e.v),!0),s|=16,a+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,s,!0),r.slice(0,a)}function EFe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return yFe(e,t,r,e[0]);case 5:return wFe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Qo(e){var t=Xn(e);return Iw(t[1][0].data)}function wV(e,t){var r=Xn(t.data),n=Ts(r[1][0].data),a=r[3],s=[];return(a||[]).forEach(function(i){var o=Xn(i.data),c=Ts(o[1][0].data)>>>0;switch(n){case 1:s[c]=JF(o[3][0].data);break;case 8:{var u=e[Qo(o[9][0].data)][0],d=Xn(u.data),f=e[Qo(d[1][0].data)][0],h=Ts(f.meta[1][0].data);if(h!=2001)throw new Error("2000 unexpected reference to ".concat(h));var p=Xn(f.data);s[c]=p[3].map(function(g){return JF(g.data)}).join("")}break}}),s}function CFe(e,t){var r,n,a,s,i,o,c,u,d,f,h,p,g,v,b=Xn(e),y=Ts(b[1][0].data)>>>0,C=Ts(b[2][0].data)>>>0,N=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Ts(b[8][0].data)>0||!1,T,S;if((s=(a=b[7])==null?void 0:a[0])!=null&&s.data&&t!=0)T=(o=(i=b[7])==null?void 0:i[0])==null?void 0:o.data,S=(u=(c=b[6])==null?void 0:c[0])==null?void 0:u.data;else if((f=(d=b[4])==null?void 0:d[0])!=null&&f.data&&t!=1)T=(p=(h=b[4])==null?void 0:h[0])==null?void 0:p.data,S=(v=(g=b[3])==null?void 0:g[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var B=N?4:1,w=ig(T),_=[],F=0;F<T.length/2;++F){var M=w.getUint16(F*2,!0);M<65535&&_.push([F,M])}if(_.length!=C)throw"Expected ".concat(C," cells, found ").concat(_.length);var D=[];for(F=0;F<_.length-1;++F)D[_[F][0]]=S.subarray(_[F][1]*B,_[F+1][1]*B);return _.length>=1&&(D[_[_.length-1][0]]=S.subarray(_[_.length-1][1]*B)),{R:y,cells:D}}function _Fe(e,t){var r,n=Xn(t.data),a=(r=n==null?void 0:n[7])!=null&&r[0]?Ts(n[7][0].data)>>>0>0?1:0:-1,s=ZP(n[5],function(i){return CFe(i,a)});return{nrows:Ts(n[4][0].data)>>>0,data:s.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(c,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=c}),i},[])}}function SFe(e,t,r){var n,a=Xn(t.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(Ts(a[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(a[6][0].data));if(s.e.c=(Ts(a[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(a[7][0].data));r["!ref"]=nn(s);var i=Xn(a[4][0].data),o=wV(e,e[Qo(i[4][0].data)][0]),c=(n=i[17])!=null&&n[0]?wV(e,e[Qo(i[17][0].data)][0]):[],u=Xn(i[3][0].data),d=0;u[1].forEach(function(f){var h=Xn(f.data),p=e[Qo(h[2][0].data)][0],g=Ts(p.meta[1][0].data);if(g!=6002)throw new Error("6001 unexpected reference to ".concat(g));var v=_Fe(e,p);v.data.forEach(function(b,y){b.forEach(function(C,N){var T=Qr({r:d+y,c:N}),S=EFe(C,o,c);S&&(r[T]=S)})}),d+=v.nrows})}function NFe(e,t){var r=Xn(t.data),n={"!ref":"A1"},a=e[Qo(r[2][0].data)],s=Ts(a[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return SFe(e,a[0],n),n}function kFe(e,t){var r,n=Xn(t.data),a={name:(r=n[1])!=null&&r[0]?JF(n[1][0].data):"",sheets:[]},s=ZP(n[2],Qo);return s.forEach(function(i){e[i].forEach(function(o){var c=Ts(o.meta[1][0].data);c==6e3&&a.sheets.push(NFe(e,o))})}),a}function BFe(e,t){var r=sR(),n=Xn(t.data),a=ZP(n[1],Qo);if(a.forEach(function(s){e[s].forEach(function(i){var o=Ts(i.meta[1][0].data);if(o==2){var c=kFe(e,i);c.sheets.forEach(function(u,d){iR(r,u,d==0?c.name:c.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function ZT(e){var t,r,n,a,s={},i=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=xu(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var d;try{d=vu(u)}catch(f){return console.log("## "+(f.message||f))}d.forEach(function(f){s[f.id]=f.messages,i.push(f.id)})}}),!i.length)throw new Error("File has no messages");var o=((a=(n=(r=(t=s==null?void 0:s[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:a[0].data)&&Ts(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||i.forEach(function(c){s[c].forEach(function(u){var d=Ts(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return BFe(s,o)}function TFe(e,t,r){var n,a,s,i;if(!((n=e[6])!=null&&n[0])||!((a=e[7])!=null&&a[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(s=e[8])==null?void 0:s[0])==null?void 0:i.data)&&Ts(e[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=ig(e[7][0].data),d=0,f=[],h=ig(e[4][0].data),p=0,g=[],v=0;v<t.length;++v){if(t[v]==null){u.setUint16(v*2,65535,!0),h.setUint16(v*2,65535);continue}u.setUint16(v*2,d,!0),h.setUint16(v*2,p,!0);var b,y;switch(typeof t[v]){case"string":b=YT({t:"s",v:t[v]},r),y=JT({t:"s",v:t[v]},r);break;case"number":b=YT({t:"n",v:t[v]},r),y=JT({t:"n",v:t[v]},r);break;case"boolean":b=YT({t:"b",v:t[v]},r),y=JT({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}f.push(b),d+=b.length,g.push(y),p+=y.length,++c}for(e[2][0].data=ha(c);v<e[7][0].data.length/2;++v)u.setUint16(v*2,65535,!0),h.setUint16(v*2,65535,!0);return e[6][0].data=ym(f),e[3][0].data=ym(g),c}function jFe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Zl(r["!ref"]);n.s.r=n.s.c=0;var a=!1;n.e.c>9&&(a=!0,n.e.c=9),n.e.r>49&&(a=!0,n.e.r=49),a&&console.error("The Numbers writer is currently limited to ".concat(nn(n)));var s=s5(r,{range:n,header:1}),i=["~Sh33tJ5~"];s.forEach(function(q){return q.forEach(function(J){typeof J=="string"&&i.push(J)})});var o={},c=[],u=Cr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(q,J){return[q,u.FullPaths[J]]}).forEach(function(q){var J=q[0],te=q[1];if(J.type==2&&J.name.match(/\.iwa/)){var ie=J.content,Ae=xu(ie),oe=vu(Ae);oe.forEach(function(ce){c.push(ce.id),o[ce.id]={deps:[],location:te,type:Ts(ce.messages[0].meta[1][0].data)}})}}),c.sort(function(q,J){return q-J});var d=c.filter(function(q){return q>1}).map(function(q){return[q,ha(q)]});u.FileIndex.map(function(q,J){return[q,u.FullPaths[J]]}).forEach(function(q){var J=q[0];if(q[1],!!J.name.match(/\.iwa/)){var te=vu(xu(J.content));te.forEach(function(ie){ie.messages.forEach(function(Ae){d.forEach(function(oe){ie.messages.some(function(ce){return Ts(ce.meta[1][0].data)!=11006&&gFe(ce.data,oe[1])})&&o[oe[0]].deps.push(ie.id)})})})}});for(var f=Cr.find(u,o[1].location),h=vu(xu(f.content)),p,g=0;g<h.length;++g){var v=h[g];v.id==1&&(p=v)}var b=Qo(Xn(p.messages[0].data)[1][0].data);for(f=Cr.find(u,o[b].location),h=vu(xu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);for(b=Qo(Xn(p.messages[0].data)[2][0].data),f=Cr.find(u,o[b].location),h=vu(xu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);for(b=Qo(Xn(p.messages[0].data)[2][0].data),f=Cr.find(u,o[b].location),h=vu(xu(f.content)),g=0;g<h.length;++g)v=h[g],v.id==b&&(p=v);var y=Xn(p.messages[0].data);{y[6][0].data=ha(n.e.r+1),y[7][0].data=ha(n.e.c+1);var C=Qo(y[46][0].data),N=Cr.find(u,o[C].location),T=vu(xu(N.content));{for(var S=0;S<T.length&&T[S].id!=C;++S);if(T[S].id!=C)throw"Bad ColumnRowUIDMapArchive";var B=Xn(T[S].messages[0].data);B[1]=[],B[2]=[],B[3]=[];for(var w=0;w<=n.e.c;++w){var _=[];_[1]=_[2]=[{type:0,data:ha(w+420690)}],B[1].push({type:2,data:co(_)}),B[2].push({type:0,data:ha(w)}),B[3].push({type:0,data:ha(w)})}B[4]=[],B[5]=[],B[6]=[];for(var F=0;F<=n.e.r;++F)_=[],_[1]=_[2]=[{type:0,data:ha(F+726270)}],B[4].push({type:2,data:co(_)}),B[5].push({type:0,data:ha(F)}),B[6].push({type:0,data:ha(F)});T[S].messages[0].data=co(B)}N.content=hv(fv(T)),N.size=N.content.length,delete y[46];var M=Xn(y[4][0].data);{M[7][0].data=ha(n.e.r+1);var D=Xn(M[1][0].data),I=Qo(D[2][0].data);N=Cr.find(u,o[I].location),T=vu(xu(N.content));{if(T[0].id!=I)throw"Bad HeaderStorageBucket";var U=Xn(T[0].messages[0].data);for(F=0;F<s.length;++F){var P=Xn(U[2][0].data);P[1][0].data=ha(F),P[4][0].data=ha(s[F].length),U[2][F]={type:U[2][0].type,data:co(P)}}T[0].messages[0].data=co(U)}N.content=hv(fv(T)),N.size=N.content.length;var X=Qo(M[2][0].data);N=Cr.find(u,o[X].location),T=vu(xu(N.content));{if(T[0].id!=X)throw"Bad HeaderStorageBucket";for(U=Xn(T[0].messages[0].data),w=0;w<=n.e.c;++w)P=Xn(U[2][0].data),P[1][0].data=ha(w),P[4][0].data=ha(n.e.r+1),U[2][w]={type:U[2][0].type,data:co(P)};T[0].messages[0].data=co(U)}N.content=hv(fv(T)),N.size=N.content.length;var H=Qo(M[4][0].data);(function(){for(var q=Cr.find(u,o[H].location),J=vu(xu(q.content)),te,ie=0;ie<J.length;++ie){var Ae=J[ie];Ae.id==H&&(te=Ae)}var oe=Xn(te.messages[0].data);{oe[3]=[];var ce=[];i.forEach(function(ne,Se){ce[1]=[{type:0,data:ha(Se)}],ce[2]=[{type:0,data:ha(1)}],ce[3]=[{type:2,data:pFe(ne)}],oe[3].push({type:2,data:co(ce)})})}te.messages[0].data=co(oe);var pe=fv(J),Ie=hv(pe);q.content=Ie,q.size=q.content.length})();var Y=Xn(M[3][0].data);{var V=Y[1][0];delete Y[2];var z=Xn(V.data);{var G=Qo(z[2][0].data);(function(){for(var q=Cr.find(u,o[G].location),J=vu(xu(q.content)),te,ie=0;ie<J.length;++ie){var Ae=J[ie];Ae.id==G&&(te=Ae)}var oe=Xn(te.messages[0].data);{delete oe[6],delete Y[7];var ce=new Uint8Array(oe[5][0].data);oe[5]=[];for(var pe=0,Ie=0;Ie<=n.e.r;++Ie){var ne=Xn(ce);pe+=TFe(ne,s[Ie],i),ne[1][0].data=ha(Ie),oe[5].push({data:co(ne),type:2})}oe[1]=[{type:0,data:ha(n.e.c+1)}],oe[2]=[{type:0,data:ha(n.e.r+1)}],oe[3]=[{type:0,data:ha(pe)}],oe[4]=[{type:0,data:ha(n.e.r+1)}]}te.messages[0].data=co(oe);var Se=fv(J),De=hv(Se);q.content=De,q.size=q.content.length})()}V.data=co(z)}M[3][0].data=co(Y)}y[4][0].data=co(M)}p.messages[0].data=co(y);var re=fv(h),R=hv(re);return f.content=R,f.size=f.content.length,u}function Wre(e){return function(r){for(var n=0;n!=e.length;++n){var a=e[n];r[a[0]]===void 0&&(r[a[0]]=a[1]),a[2]==="n"&&(r[a[0]]=Number(r[a[0]]))}}}function eR(e){Wre([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function tR(e){Wre([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function IFe(e){return _n.WS.indexOf(e)>-1?"sheet":e==_n.CS?"chart":e==_n.DS?"dialog":e==_n.MS?"macro":e&&e.length?e:"sheet"}function FFe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,IFe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function OFe(e,t,r,n,a,s,i,o,c,u,d,f){try{s[n]=zy(Tc(e,r,!0),t);var h=li(e,t),p;switch(o){case"sheet":p=rIe(h,t,a,c,s[n],u,d,f);break;case"chart":if(p=nIe(h,t,a,c,s[n],u,d,f),!p||!p["!drawel"])break;var g=hy(p["!drawel"].Target,t),v=Sw(g),b=Vke(Tc(e,g,!0),zy(Tc(e,v,!0),g)),y=hy(b,g),C=Sw(y);p=Tje(Tc(e,y,!0),y,c,zy(Tc(e,C,!0),y),u,p);break;case"macro":p=aIe(h,t,a,c,s[n],u,d,f);break;case"dialog":p=sIe(h,t,a,c,s[n],u,d,f);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=p;var N=[];s&&s[n]&&Is(s[n]).forEach(function(T){var S="";if(s[n][T].Type==_n.CMNT){S=hy(s[n][T].Target,t);var B=cIe(li(e,S,!0),S,c);if(!B||!B.length)return;oV(p,B,!1)}s[n][T].Type==_n.TCMNT&&(S=hy(s[n][T].Target,t),N=N.concat($ke(li(e,S,!0),c)))}),N&&N.length&&oV(p,N,!0,c.people||[])}catch(T){if(c.WTF)throw T}}function Au(e){return e.charAt(0)=="/"?e.slice(1):e}function DFe(e,t){if(S1(),t=t||{},eR(t),yu(e,"META-INF/manifest.xml")||yu(e,"objectdata.xml"))return vV(e,t);if(yu(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof ZT<"u"){if(e.FileIndex)return ZT(e);var r=Cr.utils.cfb_new();return kH(e).forEach(function(P){un(r,P,G_e(e,P))}),ZT(r)}throw new Error("Unsupported NUMBERS file")}if(!yu(e,"[Content_Types].xml"))throw yu(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):yu(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=kH(e),a=MSe(Tc(e,"[Content_Types].xml")),s=!1,i,o;if(a.workbooks.length===0&&(o="xl/workbook.xml",li(e,o,!0)&&a.workbooks.push(o)),a.workbooks.length===0){if(o="xl/workbook.bin",!li(e,o,!0))throw new Error("Could not find workbook");a.workbooks.push(o),s=!0}a.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if($y=[],a.sst)try{$y=lIe(li(e,Au(a.sst)),a.sst,t)}catch(P){if(t.WTF)throw P}t.cellStyles&&a.themes.length&&(c=oIe(Tc(e,a.themes[0].replace(/^\//,""),!0)||"",a.themes[0],t)),a.style&&(u=iIe(li(e,Au(a.style)),a.style,c,t))}a.links.map(function(P){try{var X=zy(Tc(e,Sw(Au(P))),P);return dIe(li(e,Au(P)),X,P,t)}catch{}});var d=tIe(li(e,Au(a.workbooks[0])),a.workbooks[0],t),f={},h="";a.coreprops.length&&(h=li(e,Au(a.coreprops[0]),!0),h&&(f=Rte(h)),a.extprops.length!==0&&(h=li(e,Au(a.extprops[0]),!0),h&&GSe(h,f,t)));var p={};(!t.bookSheets||t.bookProps)&&a.custprops.length!==0&&(h=Tc(e,Au(a.custprops[0]),!0),h&&(p=qSe(h,t)));var g={};if((t.bookSheets||t.bookProps)&&(d.Sheets?i=d.Sheets.map(function(X){return X.name}):f.Worksheets&&f.SheetNames.length>0&&(i=f.SheetNames),t.bookProps&&(g.Props=f,g.Custprops=p),t.bookSheets&&typeof i<"u"&&(g.SheetNames=i),t.bookSheets?g.SheetNames:t.bookProps))return g;i={};var v={};t.bookDeps&&a.calcchain&&(v=uIe(li(e,Au(a.calcchain)),a.calcchain));var b=0,y={},C,N;{var T=d.Sheets;f.Worksheets=T.length,f.SheetNames=[];for(var S=0;S!=T.length;++S)f.SheetNames[S]=T[S].name}var B=s?"bin":"xml",w=a.workbooks[0].lastIndexOf("/"),_=(a.workbooks[0].slice(0,w+1)+"_rels/"+a.workbooks[0].slice(w+1)+".rels").replace(/^\//,"");yu(e,_)||(_="xl/_rels/workbook."+B+".rels");var F=zy(Tc(e,_,!0),_.replace(/_rels.*/,"s5s"));(a.metadata||[]).length>=1&&(t.xlmeta=AIe(li(e,Au(a.metadata[0])),a.metadata[0],t)),(a.people||[]).length>=1&&(t.people=Kke(li(e,Au(a.people[0])),t)),F&&(F=FFe(F,d.Sheets));var M=li(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=f.Worksheets;++b){var D="sheet";if(F&&F[b]?(C="xl/"+F[b][1].replace(/[\/]?xl\//,""),yu(e,C)||(C=F[b][1]),yu(e,C)||(C=_.replace(/_rels\/.*$/,"")+F[b][1]),D=F[b][2]):(C="xl/worksheets/sheet"+(b+1-M)+"."+B,C=C.replace(/sheet0\./,"sheet.")),N=C.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(f.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var I=!1,U=0;U!=t.sheets.length;++U)typeof t.sheets[U]=="number"&&t.sheets[U]==b&&(I=1),typeof t.sheets[U]=="string"&&t.sheets[U].toLowerCase()==f.SheetNames[b].toLowerCase()&&(I=1);if(!I)continue e}}OFe(e,C,N,f.SheetNames[b],b,y,i,D,t,d,c,u)}return g={Directory:a,Workbook:d,Props:f,Custprops:p,Deps:v,Sheets:i,SheetNames:f.SheetNames,Strings:$y,Styles:u,Themes:c,SSF:Va(Pr)},t&&t.bookFiles&&(e.files?(g.keys=n,g.files=e.files):(g.keys=[],g.files={},e.FullPaths.forEach(function(P,X){P=P.replace(/^Root Entry[\/]/,""),g.keys.push(P),g.files[P]=e.FileIndex[X]}))),t&&t.bookVBA&&(a.vba.length>0?g.vbaraw=li(e,Au(a.vba[0]),!0):a.defaults&&a.defaults.bin===tBe&&(g.vbaraw=li(e,"xl/vbaProject.bin",!0))),g}function PFe(e,t){var r=t||{},n="Workbook",a=Cr.find(e,n);try{if(n="/!DataSpaces/Version",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(A4e(a.content),n="/!DataSpaces/DataSpaceMap",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var s=h4e(a.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=m4e(a.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);g4e(a.content)}catch{}if(n="/EncryptionInfo",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=v4e(a.content);if(n="/EncryptedPackage",a=Cr.find(e,n),!a||!a.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],a.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],a.content,r.password||"",r);throw new Error("File is password-protected")}function RFe(e,t){return t.bookType=="ods"?qre(e,t):t.bookType=="numbers"?jFe(e,t):t.bookType=="xlsb"?LFe(e,t):MFe(e,t)}function LFe(e,t){qv=1024,e&&!e.SSF&&(e.SSF=Va(Pr)),e&&e.SSF&&(S1(),v4(e.SSF),t.revssf=b4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Gy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=wre.indexOf(t.bookType)>-1,a=UP();tR(t=t||{});var s=SP(),i="",o=0;if(t.cellXfs=[],jm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,Lte(e.Props,t)),a.coreprops.push(i),ma(t.rels,2,i,_n.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Qte(e.Props)),a.extprops.push(i),ma(t.rels,3,i,_n.EXT_PROPS),e.Custprops!==e.Props&&Is(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,Hte(e.Custprops)),a.custprops.push(i),ma(t.rels,4,i,_n.CUST_PROPS)),o=1;o<=e.SheetNames.length;++o){var d={"!id":{}},f=e.Sheets[e.SheetNames[o-1]],h=(f||{})["!type"]||"sheet";switch(h){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,un(s,i,hIe(o-1,i,t,e,d)),a.sheets.push(i),ma(t.wbrels,-1,"worksheets/sheet"+o+"."+r,_n.WS[0])}if(f){var p=f["!comments"],g=!1,v="";p&&p.length>0&&(v="xl/comments"+o+"."+r,un(s,v,gIe(p,v)),a.comments.push(v),ma(d,-1,"../comments"+o+"."+r,_n.CMNT),g=!0),f["!legacy"]&&g&&un(s,"xl/drawings/vmlDrawing"+o+".vml",bre(o,f["!comments"])),delete f["!comments"],delete f["!legacy"]}d["!id"].rId1&&un(s,Sw(i),gx(d))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,pIe(t.Strings,i,t)),a.strs.push(i),ma(t.wbrels,-1,"sharedStrings."+r,_n.SST)),i="xl/workbook."+r,un(s,i,fIe(e,i)),a.workbooks.push(i),ma(t.rels,1,i,_n.WB),i="xl/theme/theme1.xml",un(s,i,GP(e.Themes,t)),a.themes.push(i),ma(t.wbrels,-1,"theme/theme1.xml",_n.THEME),i="xl/styles."+r,un(s,i,mIe(e,i,t)),a.styles.push(i),ma(t.wbrels,-1,"styles."+r,_n.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),ma(t.wbrels,-1,"vbaProject.bin",_n.VBA)),i="xl/metadata."+r,un(s,i,vIe(i)),a.metadata.push(i),ma(t.wbrels,-1,"metadata."+r,_n.XLMETA),un(s,"[Content_Types].xml",Dte(a,t)),un(s,"_rels/.rels",gx(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",gx(t.wbrels)),delete t.revssf,delete t.ssf,s}function MFe(e,t){qv=1024,e&&!e.SSF&&(e.SSF=Va(Pr)),e&&e.SSF&&(S1(),v4(e.SSF),t.revssf=b4(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Gy?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=wre.indexOf(t.bookType)>-1,a=UP();tR(t=t||{});var s=SP(),i="",o=0;if(t.cellXfs=[],jm(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),i="docProps/core.xml",un(s,i,Lte(e.Props,t)),a.coreprops.push(i),ma(t.rels,2,i,_n.CORE_PROPS),i="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,un(s,i,Qte(e.Props)),a.extprops.push(i),ma(t.rels,3,i,_n.EXT_PROPS),e.Custprops!==e.Props&&Is(e.Custprops||{}).length>0&&(i="docProps/custom.xml",un(s,i,Hte(e.Custprops)),a.custprops.push(i),ma(t.rels,4,i,_n.CUST_PROPS));var d=["SheetJ5"];for(t.tcid=0,o=1;o<=e.SheetNames.length;++o){var f={"!id":{}},h=e.Sheets[e.SheetNames[o-1]],p=(h||{})["!type"]||"sheet";switch(p){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,un(s,i,Fre(o-1,t,e,f)),a.sheets.push(i),ma(t.wbrels,-1,"worksheets/sheet"+o+"."+r,_n.WS[0])}if(h){var g=h["!comments"],v=!1,b="";if(g&&g.length>0){var y=!1;g.forEach(function(C){C[1].forEach(function(N){N.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+o+"."+r,un(s,b,Gke(g,d,t)),a.threadedcomments.push(b),ma(f,-1,"../threadedComments/threadedComment"+o+"."+r,_n.TCMNT)),b="xl/comments"+o+"."+r,un(s,b,yre(g)),a.comments.push(b),ma(f,-1,"../comments"+o+"."+r,_n.CMNT),v=!0}h["!legacy"]&&v&&un(s,"xl/drawings/vmlDrawing"+o+".vml",bre(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}f["!id"].rId1&&un(s,Sw(i),gx(f))}return t.Strings!=null&&t.Strings.length>0&&(i="xl/sharedStrings."+r,un(s,i,lre(t.Strings,t)),a.strs.push(i),ma(t.wbrels,-1,"sharedStrings."+r,_n.SST)),i="xl/workbook."+r,un(s,i,Lre(e)),a.workbooks.push(i),ma(t.rels,1,i,_n.WB),i="xl/theme/theme1.xml",un(s,i,GP(e.Themes,t)),a.themes.push(i),ma(t.wbrels,-1,"theme/theme1.xml",_n.THEME),i="xl/styles."+r,un(s,i,pre(e,t)),a.styles.push(i),ma(t.wbrels,-1,"styles."+r,_n.STY),e.vbaraw&&n&&(i="xl/vbaProject.bin",un(s,i,e.vbaraw),a.vba.push(i),ma(t.wbrels,-1,"vbaProject.bin",_n.VBA)),i="xl/metadata."+r,un(s,i,xre()),a.metadata.push(i),ma(t.wbrels,-1,"metadata."+r,_n.XLMETA),d.length>1&&(i="xl/persons/person.xml",un(s,i,qke(d)),a.people.push(i),ma(t.wbrels,-1,"persons/person.xml",_n.PEOPLE)),un(s,"[Content_Types].xml",Dte(a,t)),un(s,"_rels/.rels",gx(t.rels)),un(s,"xl/_rels/workbook."+r+".rels",gx(t.wbrels)),delete t.revssf,delete t.ssf,s}function rR(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Pc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function UFe(e,t){return Cr.find(e,"EncryptedPackage")?PFe(e,t):Hre(e,t)}function QFe(e,t){var r,n=e,a=t||{};return a.type||(a.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r=ute(n,a),DFe(r,a)}function Xre(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return XF(e.slice(r),t);default:break e}return Ux.to_workbook(e,t)}function HFe(e,t){var r="",n=rR(e,t);switch(t.type){case"base64":r=Pc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=rg(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ca(r)),t.type="binary",Xre(r,t)}function VFe(e,t){var r=e;return t.type=="base64"&&(r=Pc(r)),r=bw.utils.decode(1200,r.slice(2),"str"),t.type="binary",Xre(r,t)}function zFe(e){return e.match(/[^\x00-\x7F]/)?RA(e):e}function e3(e,t,r,n){return n?(r.type="string",Ux.to_workbook(e,r)):Ux.to_workbook(t,r)}function Fw(e,t){yP();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Fw(new Uint8Array(e),(r=Va(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,a=[0,0,0,0],s=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),xx={},r.dateNF&&(xx.dateNF=r.dateNF),r.type||(r.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=pn?"buffer":"binary",n=L_e(e),typeof Uint8Array<"u"&&!pn&&(r.type="array")),r.type=="string"&&(s=!0,r.type="binary",r.codepage=65001,n=zFe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=Va(r),r.type="array",Fw(wP(n),r)}switch((a=rR(n,r))[0]){case 208:if(a[1]===207&&a[2]===17&&a[3]===224&&a[4]===161&&a[5]===177&&a[6]===26&&a[7]===225)return UFe(Cr.read(n,r),r);break;case 9:if(a[1]<=8)return Hre(n,r);break;case 60:return XF(n,r);case 73:if(a[1]===73&&a[2]===42&&a[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(a[1]===68)return WNe(n,r);break;case 84:if(a[1]===65&&a[2]===66&&a[3]===76)return ire.to_workbook(n,r);break;case 80:return a[1]===75&&a[2]<9&&a[3]<9?QFe(n,r):e3(e,n,r,s);case 239:return a[3]===60?XF(n,r):e3(e,n,r,s);case 255:if(a[1]===254)return VFe(n,r);if(a[1]===0&&a[2]===2&&a[3]===0)return Lp.to_workbook(n,r);break;case 0:if(a[1]===0&&(a[2]>=2&&a[3]===0||a[2]===0&&(a[3]===8||a[3]===9)))return Lp.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return WF.to_workbook(n,r);case 123:if(a[1]===92&&a[2]===114&&a[3]===116)return fre.to_workbook(n,r);break;case 10:case 13:case 32:return HFe(n,r);case 137:if(a[1]===80&&a[2]===78&&a[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return qNe.indexOf(a[0])>-1&&a[2]<=12&&a[3]<=31?WF.to_workbook(n,r):e3(e,n,r,s)}function Yre(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return y2(t.file,Cr.write(e,{type:pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Cr.write(e,t)}function $Fe(e,t){var r=Va(t||{}),n=RFe(e,r);return GFe(n,r)}function GFe(e,t){var r={},n=pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var a=e.FullPaths?Cr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof a=="string"){if(t.type=="binary"||t.type=="base64")return a;a=new Uint8Array(g4(a))}return t.password&&typeof encrypt_agile<"u"?Yre(encrypt_agile(a,t.password),t):t.type==="file"?y2(t.file,a):t.type=="string"?Ca(a):a}function KFe(e,t){var r=t||{},n=zIe(e,r);return Yre(n,r)}function SA(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return yw(RA(n));case"binary":return RA(n);case"string":return e;case"file":return y2(t.file,n,"utf8");case"buffer":return pn?Bh(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):SA(n,{type:"binary"}).split("").map(function(a){return a.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function qFe(e,t){switch(t.type){case"base64":return yw(e);case"binary":return e;case"string":return e;case"file":return y2(t.file,e,"binary");case"buffer":return pn?Bh(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function CC(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?yw(r):t.type=="string"?Ca(r):r;case"file":return y2(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function Jre(e,t){yP(),Uje(e);var r=Va(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=Jre(e,r);return r.type="array",g4(n)}var a=0;if(r.sheet&&(typeof r.sheet=="number"?a=r.sheet:a=e.SheetNames.indexOf(r.sheet),!e.SheetNames[a]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return SA(RIe(e,r),r);case"slk":case"sylk":return SA(sre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"htm":case"html":return SA(zre(e.Sheets[e.SheetNames[a]],r),r);case"txt":return qFe(Zre(e.Sheets[e.SheetNames[a]],r),r);case"csv":return SA(aR(e.Sheets[e.SheetNames[a]],r),r,"\uFEFF");case"dif":return SA(ire.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"dbf":return CC(WF.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"prn":return SA(Ux.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"rtf":return SA(fre.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"eth":return SA(ore.from_sheet(e.Sheets[e.SheetNames[a]],r),r);case"fods":return SA(qre(e,r),r);case"wk1":return CC(Lp.sheet_to_wk1(e.Sheets[e.SheetNames[a]],r),r);case"wk3":return CC(Lp.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),CC(Vre(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),KFe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return $Fe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function WFe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function nR(e,t,r){var n={};return n.type="file",n.file=t,WFe(n),Jre(e,n)}function XFe(e,t,r,n,a,s,i,o){var c=Ws(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),f=!0,h=a===1?[]:{};if(a!==1)if(Object.defineProperty)try{Object.defineProperty(h,"__rowNum__",{value:r,enumerable:!1})}catch{h.__rowNum__=r}else h.__rowNum__=r;if(!i||e[r])for(var p=t.s.c;p<=t.e.c;++p){var g=i?e[r][p]:e[n[p]+c];if(g===void 0||g.t===void 0){if(u===void 0)continue;s[p]!=null&&(h[s[p]]=u);continue}var v=g.v;switch(g.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+g.t)}if(s[p]!=null){if(v==null)if(g.t=="e"&&v===null)h[s[p]]=null;else if(u!==void 0)h[s[p]]=u;else if(d&&v===null)h[s[p]]=null;else continue;else h[s[p]]=d&&(g.t!=="n"||g.t==="n"&&o.rawNumbers!==!1)?v:ph(g,v,o);v!=null&&(f=!1)}}return{row:h,isempty:f}}function s5(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,a=1,s=[],i=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},d=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":c=Vn(d);break;case"number":c=Vn(e["!ref"]),c.s.r=d;break;default:c=d}n>0&&(a=0);var f=Ws(c.s.r),h=[],p=[],g=0,v=0,b=Array.isArray(e),y=c.s.r,C=0,N={};b&&!e[y]&&(e[y]=[]);var T=u.skipHidden&&e["!cols"]||[],S=u.skipHidden&&e["!rows"]||[];for(C=c.s.c;C<=c.e.c;++C)if(!(T[C]||{}).hidden)switch(h[C]=ls(C),r=b?e[y][C]:e[h[C]+f],n){case 1:s[C]=C-c.s.c;break;case 2:s[C]=h[C];break;case 3:s[C]=u.header[C-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=ph(r,null,u),v=N[i]||0,!v)N[i]=1;else{do o=i+"_"+v++;while(N[o]);N[i]=v,N[o]=1}s[C]=o}for(y=c.s.r+a;y<=c.e.r;++y)if(!(S[y]||{}).hidden){var B=XFe(e,c,y,h,n,s,b,u);(B.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[g++]=B.row)}return p.length=g,p}var EV=/"/g;function YFe(e,t,r,n,a,s,i,o){for(var c=!0,u=[],d="",f=Ws(r),h=t.s.c;h<=t.e.c;++h)if(n[h]){var p=o.dense?(e[r]||[])[h]:e[n[h]+f];if(p==null)d="";else if(p.v!=null){c=!1,d=""+(o.rawNumbers&&p.t=="n"?p.v:ph(p,null,o));for(var g=0,v=0;g!==d.length;++g)if((v=d.charCodeAt(g))===a||v===s||v===34||o.forceQuotes){d='"'+d.replace(EV,'""')+'"';break}d=="ID"&&(d='"ID"')}else p.f!=null&&!p.F?(c=!1,d="="+p.f,d.indexOf(",")>=0&&(d='"'+d.replace(EV,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(i)}function aR(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var a=Vn(e["!ref"]),s=n.FS!==void 0?n.FS:",",i=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",f=[];n.dense=Array.isArray(e);for(var h=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],g=a.s.c;g<=a.e.c;++g)(h[g]||{}).hidden||(f[g]=ls(g));for(var v=0,b=a.s.r;b<=a.e.r;++b)(p[b]||{}).hidden||(d=YFe(e,a,b,f,i,c,s,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((v++?o:"")+d)));return delete n.dense,r.join("")}function Zre(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=aR(e,t);return r}function JFe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var a=Vn(e["!ref"]),s="",i=[],o,c=[],u=Array.isArray(e);for(o=a.s.c;o<=a.e.c;++o)i[o]=ls(o);for(var d=a.s.r;d<=a.e.r;++d)for(s=Ws(d),o=a.s.c;o<=a.e.c;++o)if(t=i[o]+s,r=u?(e[d]||[])[o]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function ene(e,t,r){var n=r||{},a=+!n.skipHeader,s=e||{},i=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var c=typeof n.origin=="string"?cs(n.origin):n.origin;i=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+t.length-1+a}};if(s["!ref"]){var f=Vn(s["!ref"]);d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),i==-1&&(i=f.e.r+1,d.e.r=i+t.length-1+a)}else i==-1&&(i=0,d.e.r=t.length-1+a);var h=n.header||[],p=0;t.forEach(function(v,b){Is(v).forEach(function(y){(p=h.indexOf(y))==-1&&(h[p=h.length]=y);var C=v[y],N="z",T="",S=Qr({c:o+p,r:i+b+a});u=Ow(s,S),C&&typeof C=="object"&&!(C instanceof Date)?s[S]=C:(typeof C=="number"?N="n":typeof C=="boolean"?N="b":typeof C=="string"?N="s":C instanceof Date?(N="d",n.cellDates||(N="n",C=Ni(C)),T=n.dateNF||Pr[14]):C===null&&n.nullError&&(N="e",C=0),u?(u.t=N,u.v=C,delete u.w,delete u.R,T&&(u.z=T)):s[S]=u={t:N,v:C},T&&(u.z=T))})}),d.e.c=Math.max(d.e.c,o+h.length-1);var g=Ws(i);if(a)for(p=0;p<h.length;++p)s[ls(p+o)+g]={t:"s",v:h[p]};return s["!ref"]=nn(d),s}function ZFe(e,t){return ene(null,e,t)}function Ow(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=cs(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Ow(e,Qr(t)):Ow(e,Qr({r:t,c:r||0}))}function e6e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function sR(){return{SheetNames:[],Sheets:{}}}function iR(e,t,r,n){var a=1;if(!r)for(;a<=65535&&e.SheetNames.indexOf(r="Sheet"+a)!=-1;++a,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var s=r.match(/(^.*?)(\d+)$/);a=s&&+s[2]||0;var i=s&&s[1]||r;for(++a;a<=65535&&e.SheetNames.indexOf(r=i+a)!=-1;++a);}if(Rre(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function t6e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=e6e(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function r6e(e,t){return e.z=t,e}function tne(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function n6e(e,t,r){return tne(e,"#"+t,r)}function a6e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function s6e(e,t,r,n){for(var a=typeof t!="string"?t:Vn(t),s=typeof t=="string"?t:nn(t),i=a.s.r;i<=a.e.r;++i)for(var o=a.s.c;o<=a.e.c;++o){var c=Ow(e,i,o);c.t="n",c.F=s,delete c.v,i==a.s.r&&o==a.s.c&&(c.f=r,n&&(c.D=!0))}return e}var ku={encode_col:ls,encode_row:Ws,encode_cell:Qr,encode_range:nn,decode_col:OP,decode_row:FP,split_cell:pSe,decode_cell:cs,decode_range:Zl,format_cell:ph,sheet_add_aoa:kte,sheet_add_json:ene,sheet_add_dom:$re,aoa_to_sheet:N1,json_to_sheet:ZFe,table_to_sheet:Gre,table_to_book:AFe,sheet_to_csv:aR,sheet_to_txt:Zre,sheet_to_json:s5,sheet_to_html:zre,sheet_to_formulae:JFe,sheet_to_row_object_array:s5,sheet_get_cell:Ow,book_new:sR,book_append_sheet:iR,book_set_sheet_visibility:t6e,cell_set_number_format:r6e,cell_set_hyperlink:tne,cell_set_internal_link:n6e,cell_add_comment:a6e,sheet_set_array_formula:s6e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const i6e=async()=>{try{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,a=0;const s=[];for(const c of r)try{const u=It(tn,c),d=await Pa(u),f=d.size;n+=f,s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:f});let h=0;d.docs.forEach(p=>{const g=p.data();g.createdAt&&new Date(g.createdAt)>=t&&h++}),a+=h}catch(u){console.warn(`Error accediendo a colección ${c}:`,u),s.push({label:c.charAt(0).toUpperCase()+c.slice(1),value:0})}const i=[];try{const c=It(tn,"apiLogs"),u=new Date(e.getTime()-10080*60*1e3),d=tr(c,vn("timestamp",">=",u.toISOString()),Rr("timestamp","desc")),f=await Pa(d),h={};f.docs.forEach(p=>{const g=p.data(),v=new Date(g.timestamp).toLocaleDateString("es-CL");h[v]=(h[v]||0)+1}),Object.entries(h).sort(([p],[g])=>new Date(p).getTime()-new Date(g).getTime()).forEach(([p,g])=>{i.push({label:p,value:g})})}catch(c){console.warn("Error calculando actividad diaria:",c)}const o=Math.floor(a*2.5);return{documentsCreatedToday:a,readsToday:o,writesToday:a,totalDocuments:n,collectionsActivity:s.sort((c,u)=>u.value-c.value),dailyActivity:i}}catch(e){return console.error("Error al obtener estadísticas de Firestore:",e),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},CV=500,mv=({title:e,value:t,description:r,alert:n})=>l.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:e}),l.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:t}),r&&l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),t3=({title:e,data:t,colorClass:r})=>{const n=k.useMemo(()=>Math.max(...t.map(a=>a.value),1),[t]);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:e}),l.jsx("div",{className:"space-y-4",children:t.length>0?t.map(a=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:a.label}),l.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:a.value})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${a.value/n*100}%`}})})]},a.label)):l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},o6e=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0),[a,s]=k.useState(null),[i,o]=k.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});k.useEffect(()=>{n(!0);const f=J2e(g=>{t(g),n(!1)}),h=async()=>{try{const g=await i6e();o(g)}catch(g){console.error("Error al cargar estadísticas de Firestore:",g)}};h();const p=setInterval(h,300*1e3);return()=>{f(),clearInterval(p)}},[]);const{stats:c,userStats:u,moduleStats:d}=k.useMemo(()=>{const f=new Date,h=new Date(f.getFullYear(),f.getMonth(),f.getDate()).getTime(),p=h-f.getDay()*24*60*60*1e3,g=new Date(f.getFullYear(),f.getMonth(),1).getTime(),v={today:0,week:0,month:0},b={},y={};e.forEach(T=>{const S=new Date(T.timestamp).getTime();S>=h&&v.today++,S>=p&&v.week++,S>=g&&v.month++;const B=T.userEmail||"Desconocido";b[B]||(b[B]={email:B,today:0,month:0,total:0}),b[B].total++,S>=h&&b[B].today++,S>=g&&b[B].month++,y[T.module]=(y[T.module]||0)+1});const C=Object.values(b).sort((T,S)=>S.total-T.total),N=Object.entries(y).map(([T,S])=>({label:T,value:S})).sort((T,S)=>S.value-T.value);return{stats:v,userStats:C,moduleStats:N}},[e]);return l.jsxs("div",{className:"space-y-8",children:[a&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&e.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsx(mv,{title:"Llamadas Hoy",value:r?"--":c.today,description:`Límite recomendado: ${CV}`,alert:c.today>CV}),l.jsx(mv,{title:"Llamadas esta Semana",value:r?"--":c.week}),l.jsx(mv,{title:"Llamadas este Mes",value:r?"--":c.month})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(t3,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),l.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(f=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:f.email}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.today}),l.jsx("td",{className:"px-4 py-2 text-center text-sm",children:f.month}),l.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:f.total})]},f.email)):l.jsx("tr",{children:l.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx(mv,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),l.jsx(mv,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),l.jsx(mv,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[l.jsx(t3,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),l.jsx(t3,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6e="type.googleapis.com/google.protobuf.Int64Value",c6e="type.googleapis.com/google.protobuf.UInt64Value";function rne(e,t){const r={};for(const n in e)e.hasOwnProperty(n)&&(r[n]=t(e[n]));return r}function i5(e){if(e==null)return null;if(e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&isFinite(e)||e===!0||e===!1||Object.prototype.toString.call(e)==="[object String]")return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(t=>i5(t));if(typeof e=="function"||typeof e=="object")return rne(e,t=>i5(t));throw new Error("Data cannot be encoded in JSON: "+e)}function Hx(e){if(e==null)return e;if(e["@type"])switch(e["@type"]){case l6e:case c6e:{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(t=>Hx(t)):typeof e=="function"||typeof e=="object"?rne(e,t=>Hx(t)):e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ql extends Pd{constructor(t,r,n){super(`${oR}/${t}`,r||""),this.details=n,Object.setPrototypeOf(this,ql.prototype)}}function u6e(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function o5(e,t){let r=u6e(e),n=r,a;try{const s=t&&t.error;if(s){const i=s.status;if(typeof i=="string"){if(!_V[i])return new ql("internal","internal");r=_V[i],n=i}const o=s.message;typeof o=="string"&&(n=o),a=s.details,a!==void 0&&(a=Hx(a))}}catch{}return r==="ok"?null:new ql(r,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6e{constructor(t,r,n,a){this.app=t,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Nc(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||a==null||a.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const t=await this.auth.getToken();return t==null?void 0:t.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(t){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=t?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(t){const r=await this.getAuthToken(),n=await this.getMessagingToken(),a=await this.getAppCheckToken(t);return{authToken:r,messagingToken:n,appCheckToken:a}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="us-central1",A6e=/^data: (.*?)(?:\n|$)/;function f6e(e){let t=null;return{promise:new Promise((r,n)=>{t=setTimeout(()=>{n(new ql("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}class h6e{constructor(t,r,n,a,s=ZF,i=(...o)=>fetch(...o)){this.app=t,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new d6e(t,r,n,a),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=ZF}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(t){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${t}`:this.customDomain!==null?`${this.customDomain}/${t}`:`https://${this.region}-${r}.cloudfunctions.net/${t}`}}function m6e(e,t,r){const n=Nh(t);e.emulatorOrigin=`http${n?"s":""}://${t}:${r}`,n&&(NN(e.emulatorOrigin),kN("Functions",!0))}function p6e(e,t,r){const n=a=>v6e(e,t,a,{});return n.stream=(a,s)=>b6e(e,t,a,s),n}async function g6e(e,t,r,n){r["Content-Type"]="application/json";let a;try{a=await n(e,{method:"POST",body:JSON.stringify(t),headers:r})}catch{return{status:0,json:null}}let s=null;try{s=await a.json()}catch{}return{status:a.status,json:s}}async function nne(e,t){const r={},n=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function v6e(e,t,r,n){const a=e._url(t);return x6e(e,a,r,n)}async function x6e(e,t,r,n){r=i5(r);const a={data:r},s=await nne(e,n),i=n.timeout||7e4,o=f6e(i),c=await Promise.race([g6e(t,a,s,e.fetchImpl),o.promise,e.cancelAllRequests]);if(o.cancel(),!c)throw new ql("cancelled","Firebase Functions instance was deleted.");const u=o5(c.status,c.json);if(u)throw u;if(!c.json)throw new ql("internal","Response is not valid JSON object.");let d=c.json.data;if(typeof d>"u"&&(d=c.json.result),typeof d>"u")throw new ql("internal","Response is missing data field.");return{data:Hx(d)}}function b6e(e,t,r,n){const a=e._url(t);return y6e(e,a,r,n||{})}async function y6e(e,t,r,n){var h;r=i5(r);const a={data:r},s=await nne(e,n);s["Content-Type"]="application/json",s.Accept="text/event-stream";let i;try{i=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(a),headers:s,signal:n==null?void 0:n.signal})}catch(p){if(p instanceof Error&&p.name==="AbortError"){const v=new ql("cancelled","Request was cancelled.");return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}const g=o5(0,null);return{data:Promise.reject(g),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(g)}}}}}}let o,c;const u=new Promise((p,g)=>{o=p,c=g});(h=n==null?void 0:n.signal)==null||h.addEventListener("abort",()=>{const p=new ql("cancelled","Request was cancelled.");c(p)});const d=i.body.getReader(),f=w6e(d,o,c,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const p=f.getReader();return{async next(){const{value:g,done:v}=await p.read();return{value:g,done:v}},async return(){return await p.cancel(),{done:!0,value:void 0}}}}},data:u}}function w6e(e,t,r,n){const a=(i,o)=>{const c=i.match(A6e);if(!c)return;const u=c[1];try{const d=JSON.parse(u);if("result"in d){t(Hx(d.result));return}if("message"in d){o.enqueue(Hx(d.message));return}if("error"in d){const f=o5(0,d);o.error(f),r(f);return}}catch(d){if(d instanceof ql){o.error(d),r(d);return}}},s=new TextDecoder;return new ReadableStream({start(i){let o="";return c();async function c(){if(n!=null&&n.aborted){const u=new ql("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await e.read();if(d){o.trim()&&a(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const h=new ql("cancelled","Request was cancelled");i.error(h),r(h),await e.cancel();return}o+=s.decode(u,{stream:!0});const f=o.split(`
`);o=f.pop()||"";for(const h of f)h.trim()&&a(h.trim(),i);return c()}catch(u){const d=u instanceof ql?u:o5(0,null);i.error(d),r(d)}}},cancel(){return e.cancel()}})}const SV="@firebase/functions",NV="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6e="auth-internal",C6e="app-check-internal",_6e="messaging-internal";function S6e(e){const t=(r,{instanceIdentifier:n})=>{const a=r.getProvider("app").getImmediate(),s=r.getProvider(E6e),i=r.getProvider(_6e),o=r.getProvider(C6e);return new h6e(a,s,i,o,n)};lm(new ch(oR,t,"PUBLIC").setMultipleInstances(!0)),Fu(SV,NV,e),Fu(SV,NV,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(e=BN(),t=ZF){const n=i2(Jn(e),oR).getImmediate({identifier:t}),a=ZO("functions");return a&&N6e(n,...a),n}function N6e(e,t,r){m6e(Jn(e),t,r)}function pv(e,t,r){return p6e(Jn(e),t)}S6e();const kV=It(tn,"usuarios");async function ane(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",kV);const e=await Pa(kV);if(console.log(`📊 [DEBUG] Encontrados ${e.docs.length} documentos en la colección usuarios`),e.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const t=e.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",t.length),console.log("✅ [DEBUG] Lista completa de usuarios:",t),t}catch(e){throw console.error("❌ [DEBUG] Error al obtener usuarios:",e),console.error("❌ [DEBUG] Error details:",{code:e.code,message:e.message,stack:e.stack}),e}}const BV=Object.values(Yt),r3=e=>e?e.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",k6e=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!1),[a,s]=k.useState("Usuarios"),[i,o]=k.useState({nombreCompleto:"",email:"",rut:"",profile:Yt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[c,u]=k.useState(null),[d,f]=k.useState(""),[h,p]=k.useState(""),[g,v]=k.useState(""),[b,y]=k.useState(null),[C,N]=k.useState(null),[T,S]=k.useState(null),B=k.useCallback(async()=>{n(!0);try{const V=await ane();t(V)}catch(V){console.error("Error al cargar usuarios",V),y("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);k.useEffect(()=>{B()},[B]);const w=k.useCallback(V=>{const{name:z,value:G}=V.target;o(re=>({...re,[z]:G,curso:z==="profile"&&G!==Yt.ESTUDIANTE?"":re.curso,cursos:z==="profile"&&G!==Yt.PROFESORADO?[]:re.cursos,asignaturas:z==="profile"&&G!==Yt.PROFESORADO?[]:re.asignaturas}))},[]),_=k.useCallback((V,z)=>{o(G=>{const re=G[V]||[],R=re.includes(z)?re.filter(q=>q!==z):[...re,z];return{...G,[V]:R}})},[]),F=k.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:Yt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),y(null)},[]),M=k.useCallback(async V=>{V.preventDefault(),y(null);const{nombreCompleto:z,email:G,profile:re,curso:R,password:q}=i;if(!z.trim()||!G.trim()){y("Nombre Completo y Email son obligatorios.");return}if(re===Yt.ESTUDIANTE&&!R){y('El campo "Curso" es obligatorio para Estudiantes.');return}if(!c&&!(q!=null&&q.trim())){y("La contraseña es obligatoria al crear un nuevo usuario.");return}const J=Rb();try{if(c){const te=pv(J,"updateUser"),ie={...i,password:(q==null?void 0:q.trim())||void 0,curso:re===Yt.ESTUDIANTE?r3(R||""):void 0};await te(ie)}else{const te=pv(J,"createUser"),ie={...i,curso:re===Yt.ESTUDIANTE?r3(R||""):void 0};await te(ie)}await B(),F()}catch(te){console.error("Error al guardar usuario:",te),y(te.message||"Error al guardar el usuario.")}},[i,c,B,F]),D=k.useCallback(V=>{u(V.email),o({nombreCompleto:V.nombreCompleto,email:V.email,rut:V.rut||"",profile:V.profile,password:"",curso:V.curso||"",cursos:V.cursos||[],asignaturas:V.asignaturas||[]}),setTimeout(()=>{const z=document.querySelector("form");z&&z.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),I=k.useCallback(async V=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${V}? Esta acción es irreversible.`))try{const z=Rb();await pv(z,"deleteUser")({email:V}),await B()}catch(z){console.error("Error al eliminar usuario:",z),y(z.message||"No se pudo borrar el usuario.")}},[B]),U=async V=>{var q;const z=(q=V.target.files)==null?void 0:q[0];if(!z)return;N({message:"Procesando archivo...",isError:!1});const G=Rb(),re=pv(G,"createUser"),R=new FileReader;R.onload=async J=>{var te;try{const ie=new Uint8Array((te=J.target)==null?void 0:te.result),Ae=Fw(ie,{type:"array"}),oe=Ae.Sheets[Ae.SheetNames[0]],ce=ku.sheet_to_json(oe);if(ce.length===0){N({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const pe=ce.map(_e=>{const he=_e.Nombre||_e.nombre,je=_e.Correo||_e.correo||_e.Email||_e.email,He=_e.Curso||_e.curso,Xe=_e.RUT||_e.rut;return!he||!je||!He?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):re({nombreCompleto:String(he).trim(),email:String(je).trim(),profile:Yt.ESTUDIANTE,curso:r3(String(He).trim()),rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ye=>({email:je,error:ye.message}))}),Ie=await Promise.all(pe),ne=Ie.filter(_e=>!_e.error).length,Se=Ie.filter(_e=>_e.error);let De=`Carga completada. ${ne} estudiantes agregados.`;Se.length>0&&(De+=` ${Se.length} fallaron.`,console.error("Errores en carga masiva:",Se)),N({message:De,isError:Se.length>0}),await B()}catch(ie){N({message:`Error: ${ie.message}`,isError:!0})}},R.readAsArrayBuffer(z),V.target.value=""},P=async V=>{var q;const z=(q=V.target.files)==null?void 0:q[0];if(!z)return;S({message:"Procesando archivo...",isError:!1});const G=Rb(),re=pv(G,"createUser"),R=new FileReader;R.onload=async J=>{var te;try{const ie=new Uint8Array((te=J.target)==null?void 0:te.result),Ae=Fw(ie,{type:"array"}),oe=Ae.Sheets[Ae.SheetNames[0]],ce=ku.sheet_to_json(oe);if(ce.length===0){S({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const pe=ce.map(_e=>{const he=_e.Nombre||_e.nombre,je=_e.Correo||_e.correo||_e.Email||_e.email,He=_e.Perfil||_e.perfil||_e.Profile||_e.profile,Xe=_e.RUT||_e.rut;return!he||!je||!He?Promise.resolve({email:je||"Sin email",error:"Datos incompletos"}):re({nombreCompleto:String(he).trim(),email:String(je).trim(),profile:He,rut:Xe?String(Xe).trim():"",password:"recoleta"}).catch(ye=>({email:je,error:ye.message}))}),Ie=await Promise.all(pe),ne=Ie.filter(_e=>!_e.error).length,Se=Ie.filter(_e=>_e.error);let De=`Carga completada. ${ne} usuarios agregados.`;Se.length>0&&(De+=` ${Se.length} fallaron.`,console.error("Errores en carga masiva:",Se)),S({message:De,isError:Se.length>0}),await B()}catch(ie){S({message:`Error: ${ie.message}`,isError:!0})}},R.readAsArrayBuffer(z),V.target.value=""},X="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",H=k.useMemo(()=>Array.from(new Set(e.filter(V=>V.profile===Yt.ESTUDIANTE&&V.curso).map(V=>V.curso))).sort(),[e]),Y=k.useMemo(()=>e.filter(V=>(d===""||V.nombreCompleto.toLowerCase().includes(d.toLowerCase())||V.email.toLowerCase().includes(d.toLowerCase()))&&(h===""||V.profile===h)&&(g===""||V.curso===g)),[e,d,h,g]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>s("Usuarios"),className:`${a==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),l.jsx("button",{onClick:()=>s("Monitor de Uso"),className:`${a==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),a==="Usuarios"&&l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:U,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),C&&l.jsx("p",{className:`text-sm mt-2 ${C.isError?"text-red-600":"text-green-600"}`,children:C.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),l.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:P,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),l.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),T&&l.jsx("p",{className:`text-sm mt-2 ${T.isError?"text-red-600":"text-green-600"}`,children:T.message})]})]})]}),l.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:c?"Editando usuario":"Agregar nuevo usuario"}),l.jsxs("form",{onSubmit:M,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),l.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:w,className:X,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),l.jsx("input",{type:"email",name:"email",value:i.email,onChange:w,className:X,required:!0,readOnly:!!c})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),l.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:w,placeholder:c?"Dejar en blanco para no cambiar":"Contraseña temporal",className:X})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),l.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:w,placeholder:"12.345.678-9",className:X})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),l.jsx("select",{name:"profile",value:i.profile,onChange:w,className:X,required:!0,children:BV.map(V=>l.jsx("option",{value:V,children:V},V))})]}),i.profile===Yt.ESTUDIANTE&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{name:"curso",value:i.curso,onChange:w,className:X,required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),ks.map(V=>l.jsx("option",{value:V,children:V},V))]})]})]}),i.profile===Yt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ks.map(V=>{var z;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[l.jsx("input",{type:"checkbox",checked:((z=i.cursos)==null?void 0:z.includes(V))||!1,onChange:()=>_("cursos",V),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),i.profile===Yt.PROFESORADO&&l.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[l.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[l.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:qi.map(V=>{var z;return l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[l.jsx("input",{type:"checkbox",checked:((z=i.asignaturas)==null?void 0:z.includes(V))||!1,onChange:()=>_("asignaturas",V),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),l.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:V})]},V)})})]}),b&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),l.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[c&&l.jsx("button",{type:"button",onClick:F,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const V=Rb(),G=await pv(V,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",G),y("✅ Custom claim agregado exitosamente")}catch(V){console.error("❌ Error al agregar custom claim:",V),y(`Error: ${V.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),l.jsx("button",{type:"button",onClick:async()=>{var V,z,G,re,R;try{const{auth:q}=await Lx(async()=>{const{auth:ie}=await Promise.resolve().then(()=>QZ);return{auth:ie}},void 0);console.log("🔍 Usuario actual:",(V=q.currentUser)==null?void 0:V.email);const J=await((z=q.currentUser)==null?void 0:z.getIdToken(!0));console.log("🔑 Token refreshed:",!!J);const te=await((G=q.currentUser)==null?void 0:G.getIdTokenResult());console.log("📋 Claims completos:",te==null?void 0:te.claims),console.log("👤 Profile claim:",(re=te==null?void 0:te.claims)==null?void 0:re.profile),((R=te==null?void 0:te.claims)==null?void 0:R.profile)==="SUBDIRECCION"?y("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):y(`❌ Custom claim faltante. Claims: ${JSON.stringify(te==null?void 0:te.claims)}`)}catch(q){console.error("❌ Error verificando token:",q),y(`Error verificando token: ${q.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:c?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[l.jsx("div",{children:l.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:V=>f(V.target.value),className:X})}),l.jsx("div",{children:l.jsxs("select",{value:h,onChange:V=>p(V.target.value),className:X,children:[l.jsx("option",{value:"",children:"Todos los perfiles"}),BV.map(V=>l.jsx("option",{value:V,children:V},V))]})}),l.jsx("div",{children:l.jsxs("select",{value:g,onChange:V=>v(V.target.value),className:X,children:[l.jsx("option",{value:"",children:"Todos los cursos"}),H.map(V=>l.jsx("option",{value:V,children:V},V))]})})]}),r?l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):l.jsxs("div",{className:"overflow-x-auto",children:[l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Y.map(V=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:V.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:V.email}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:l.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${V.profile===Yt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":V.profile===Yt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:V.profile})}),l.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[V.profile===Yt.ESTUDIANTE&&l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:V.curso||"Sin curso"}),V.profile===Yt.PROFESORADO&&l.jsxs("div",{className:"space-y-1",children:[V.cursos&&V.cursos.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.cursos.slice(0,3).map(z=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:z},z)),V.cursos.length>3&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.cursos.length-3]})]})]}),V.asignaturas&&V.asignaturas.length>0&&l.jsxs("div",{children:[l.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),l.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[V.asignaturas.slice(0,2).map(z=>l.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:z},z)),V.asignaturas.length>2&&l.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",V.asignaturas.length-2]})]})]}),(!V.cursos||V.cursos.length===0)&&(!V.asignaturas||V.asignaturas.length===0)&&l.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),V.profile!==Yt.ESTUDIANTE&&V.profile!==Yt.PROFESORADO&&l.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[l.jsx("button",{onClick:()=>D(V),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),l.jsx("button",{onClick:()=>I(V.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},V.email))})]}),Y.length===0&&l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:e.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),a==="Monitor de Uso"&&l.jsx(o6e,{})]})},Vx="seguimiento_dual_records",B6e=e=>{const t=e.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:e.id,...t,fechaDesvinculacion:r(t.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(t.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(t.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(t.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(t.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(t.fechaSupervisionExcepcional)}},T6e=e=>{const t=tr(It(bt,Vx),Rr("nombreEstudiante","asc"));return gr(t,n=>{const a=n.docs.map(s=>B6e(s));e(a)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),e([])})},l5=e=>{const t={...e};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{t[n]&&typeof t[n]=="string"&&(t[n]=mr.fromDate(new Date(t[n]+"T00:00:00")))}),t},j6e=async e=>{try{const t=l5(e);return(await Un(It(bt,Vx),t)).id}catch(t){throw console.error("Error al crear el registro:",t),new Error("No se pudo crear el registro de seguimiento.")}},TV=async(e,t)=>{try{const r=pr(bt,Vx,e),n=l5(t);await Ji(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},I6e=async e=>{try{const t=pr(bt,Vx,e);await ts(t)}catch(t){throw console.error("Error al eliminar el registro:",t),new Error("No se pudo eliminar el registro.")}},F6e=async e=>{const t=E1(bt),r=It(bt,Vx);let n=0,a=0;for(const s of e){const i=tr(r,vn("rutEstudiante","==",s.rutEstudiante)),o=await Pa(i);if(o.empty){const c=pr(r);t.set(c,l5(s)),a++}else{const c=o.docs[0].id,u=pr(bt,Vx,c);t.set(u,l5(s),{merge:!0}),n++}}return await t.commit(),{updated:n,created:a}},O6e={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},D6e=e=>{if(!e||e===""||e==="N/A"||e==="Pendiente")return null;try{if(typeof e=="number"){const t=new Date(1900,0,1),r=new Date(t.getTime()+(e-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(e instanceof Date)return isNaN(e.getTime())?null:e.toISOString().split("T")[0];if(typeof e=="string"){const t=e.trim();if(t==="")return null;const r=new Date(t);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(t){return console.warn("Error parsing date:",e,t),null}},P6e=e=>{if(typeof e=="boolean")return e;if(typeof e=="string"){const t=e.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(t)}return typeof e=="number"?e===1:!1},R6e=({record:e,onSave:t,onClose:r})=>{const[n,a]=k.useState(e),s="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=c=>{const{name:u,value:d,type:f,checked:h}=c.target;a(p=>({...p,[u]:f==="checkbox"?h:d}))},o=()=>{t(n)};return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:c=>c.stopPropagation(),children:[l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:e.nombreEstudiante})]})]}),l.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s1-${e.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s1-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s1-${e.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f1s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),l.jsx("input",{id:`f1s2-${e.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`f2s2-${e.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),l.jsx("input",{id:`f2s2-${e.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("label",{htmlFor:`fex-${e.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),l.jsx("input",{id:`fex-${e.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:s})]}),l.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[l.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),l.jsx("span",{children:"Realizada"})]})]})]}),l.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[l.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-nombre-${e.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),l.jsx("input",{id:`mg-nombre-${e.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:s+" mt-1"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:`mg-contacto-${e.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),l.jsx("input",{id:`mg-contacto-${e.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:s+" mt-1"})]})]})]})]})]}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),l.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},L6e=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0),a=k.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:Op[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:CT[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[s,i]=k.useState(a),[o,c]=k.useState(null),[u,d]=k.useState(""),[f,h]=k.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[p,g]=k.useState(null),[v,b]=k.useState(null),[y,C]=k.useState(!1),[N,T]=k.useState(null);k.useEffect(()=>{n(!0);const V=T6e(z=>{t(z),n(!1)});return()=>V()},[]);const S=k.useCallback(V=>{const{name:z,value:G}=V.target;i(re=>({...re,[z]:G}))},[]),B=k.useCallback(V=>{const{name:z,value:G}=V.target;h(re=>({...re,[z]:G}))},[]),w=k.useCallback(()=>{i(a),c(null),g(null)},[a]),_=async V=>{V.preventDefault(),g(null);const G=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(re=>{var R;return!((R=s[re])!=null&&R.trim())});if(G){g(`El campo '${G}' es obligatorio.`);return}try{o?await TV(o,s):await j6e(s),w()}catch(re){console.error(re),g("No se pudo guardar el registro.")}},F=k.useCallback(V=>{window.scrollTo({top:0,behavior:"smooth"}),c(V.id),i(V)},[]),M=async V=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await I6e(V)}catch(z){console.error(z),g("No se pudo eliminar el registro.")}},D=V=>{T(V),C(!0)},I=()=>{T(null),C(!1)},U=async V=>{try{await TV(V.id,V),I()}catch(z){console.error(z),alert("No se pudieron guardar los cambios de supervisión.")}},P=()=>{const V=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],z=ku.aoa_to_sheet([V]),G=ku.book_new();ku.book_append_sheet(G,z,"Plantilla"),nR(G,"Plantilla_Seguimiento_Dual.xlsx")},X=V=>{var re;const z=(re=V.target.files)==null?void 0:re[0];if(!z)return;b({message:"Procesando archivo...",isError:!1});const G=new FileReader;G.onload=async R=>{var q;try{const J=new Uint8Array((q=R.target)==null?void 0:q.result),te=Fw(J,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ie=te.SheetNames[0],Ae=te.Sheets[ie],oe=ku.sheet_to_json(Ae,{raw:!1,dateNF:"yyyy-mm-dd"});if(oe.length===0)throw new Error("El archivo está vacío.");const ce={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},pe=Object.keys(oe[0]).map(De=>De.trim().toLowerCase()),ne=["nombre","rut","curso 2025","empresa","estado"].find(De=>!pe.includes(De));if(ne)throw new Error(`Falta la columna requerida: '${ne}'`);const Se=oe.map((De,_e)=>{try{const he={};for(const je in De){const He=ce[je.trim().toLowerCase()];if(He){let Xe=De[je];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(He)?(Xe=D6e(Xe),Xe&&(he[He]=Xe)):He.includes("realizada")?he[He]=P6e(Xe):Xe!=null&&Xe!==""&&(he[He]=String(Xe).trim())}}return!he.nombreEstudiante||!he.rutEstudiante?(console.warn(`Fila ${_e+2}: Faltan campos requeridos`),null):he}catch(he){return console.error(`Error procesando fila ${_e+2}:`,he),null}}).filter(De=>De!==null);if(console.log("Registros procesados:",Se),Se.length>0){const{updated:De,created:_e}=await F6e(Se);b({message:`Carga exitosa. ${_e} registros creados, ${De} actualizados.`,isError:!1})}else b({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(J){console.error("Error completo:",J),b({message:`Error al procesar el archivo: ${J.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},G.readAsArrayBuffer(z)},H="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",Y=k.useMemo(()=>e.filter(V=>(u===""||V.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||V.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||V.rutEstudiante.includes(u))&&(f.curso===""||V.curso===f.curso)&&(f.empresa===""||V.nombreEmpresa===f.empresa)&&(f.estado===""||V.estado===f.estado)&&(f.comuna===""||V.comuna===f.comuna)&&(f.profesor===""||V.profesorTutorEmpresa===f.profesor)).sort((V,z)=>V.nombreEstudiante.localeCompare(z.nombreEstudiante)),[e,u,f]);return k.useMemo(()=>{const V=new Set,z=new Set;return e.forEach(G=>{G.nombreEmpresa&&V.add(G.nombreEmpresa),G.comuna&&z.add(G.comuna)}),{empresas:Array.from(V).sort(),comunas:Array.from(z).sort()}},[e]),r?l.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),l.jsxs("form",{onSubmit:_,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),l.jsx("input",{type:"text",name:"nombreEstudiante",value:s.nombreEstudiante,onChange:S,className:H,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),l.jsx("input",{type:"text",name:"rutEstudiante",value:s.rutEstudiante,onChange:S,className:H,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsx("select",{name:"curso",value:s.curso,onChange:S,className:H,required:!0,children:Op.map(V=>l.jsx("option",{value:V,children:V},V))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),l.jsxs("select",{name:"profesorTutorEmpresa",value:s.profesorTutorEmpresa,onChange:S,className:H,children:[l.jsx("option",{value:"",children:"Seleccione un profesor"}),yF.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),l.jsx("input",{type:"text",name:"nombreEmpresa",value:s.nombreEmpresa,onChange:S,className:H,required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),l.jsx("input",{type:"text",name:"rutEmpresa",value:s.rutEmpresa,onChange:S,className:H})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),l.jsx("input",{type:"text",name:"direccionEmpresa",value:s.direccionEmpresa,onChange:S,className:H})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),l.jsx("input",{type:"text",name:"comuna",value:s.comuna,onChange:S,className:H})]}),l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),l.jsx("select",{name:"estado",value:s.estado,onChange:S,className:H,children:CT.map(V=>l.jsx("option",{value:V,children:V},V))})]})]}),s.estado==="Desvinculado"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),l.jsx("input",{type:"date",name:"fechaDesvinculacion",value:s.fechaDesvinculacion||"",onChange:S,className:`${H} border-red-300`})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),l.jsx("input",{type:"text",name:"motivoDesvinculacion",value:s.motivoDesvinculacion||"",onChange:S,className:`${H} border-red-300`})]})]}),p&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:p}),l.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&l.jsx("button",{type:"button",onClick:w,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[l.jsx("button",{onClick:P,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),l.jsx("input",{type:"file",onChange:X,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),v&&l.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${v.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:v.message})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754875084/ChatGPT_Image_10_ago_2025_09_17_50_p.m._t9cbut.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[l.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:V=>d(V.target.value),className:`${H} md:col-span-2 lg:col-span-1`}),l.jsxs("select",{name:"curso",value:f.curso,onChange:B,className:H,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),Op.map(V=>l.jsx("option",{children:V},V))]}),l.jsxs("select",{name:"estado",value:f.estado,onChange:B,className:H,children:[l.jsx("option",{value:"",children:"Todos los Estados"}),CT.map(V=>l.jsx("option",{children:V},V))]}),l.jsxs("select",{name:"profesor",value:f.profesor,onChange:B,className:H,children:[l.jsx("option",{value:"",children:"Todos los Profesores"}),yF.map(V=>l.jsx("option",{children:V},V))]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Y.map(V=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:V.nombreEstudiante}),l.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:V.curso})]}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.nombreEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:V.profesorTutorEmpresa}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${O6e[V.estado]}`,children:V.estado})}),l.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[l.jsx("button",{onClick:()=>D(V),className:"text-blue-600 hover:underline",children:"Supervisión"}),l.jsx("button",{onClick:()=>F(V),className:"text-yellow-600 hover:underline",children:"Editar"}),l.jsx("button",{onClick:()=>M(V.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},V.id))})]})})]}),y&&N&&l.jsx(R6e,{record:N,onClose:I,onSave:U})]})},sne="actividades_remotas",ine="respuestas_actividades",one="pruebas_estandarizadas",M6e="usuarios",lne=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(typeof e=="object"){if(typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if("seconds"in e&&"nanoseconds"in e){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}}return null},lR=e=>{const t=lne(e);return t?t.toISOString():void 0},c5=e=>{const t=lne(e);return t?t.toISOString().split("T")[0]:void 0},cne=e=>{if(!e)return null;const t=new Date(`${e}T00:00:00`);return isNaN(t.getTime())?null:mr.fromDate(t)},une=e=>mr.fromDate(new Date(e||new Date().toISOString())),U6e=e=>!!e&&/^data:/.test(e),Dw=e=>{if(e===null||typeof e!="object")return e;if(Array.isArray(e))return e.map(Dw);const t={};return Object.entries(e).forEach(([r,n])=>{n!==void 0&&(t[r]=Dw(n))}),t},Q6e=e=>{const t=e.match(/^data:(.*?);base64,(.*)$/);if(!t)throw new Error("Data URL inválida");const r=t[1]||"application/octet-stream",n=t[2];let a="";if(typeof atob=="function")a=atob(n);else{const o=typeof Buffer<"u"?Buffer:null;if(o)a=o.from(n,"base64").toString("binary");else throw new Error("No hay decodificador base64 disponible")}const s=a.length,i=new Uint8Array(s);for(let o=0;o<s;o++)i[o]=a.charCodeAt(o);return{bytes:i,contentType:r}},H6e=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:lR(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:c5(t.plazoEntrega)||c5(new Date)}},V6e=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCompletado:lR(t.fechaCompletado)||new Date().toISOString()}},z6e=e=>{const t=e.data()||{};return{id:e.id,...t}},$6e=e=>{const t=e.data()||{};return{id:e.id,...t,fechaCreacion:lR(t.fechaCreacion)||new Date().toISOString(),plazoEntrega:c5(t.plazoEntrega)||c5(new Date)}},G6e=e=>{const t=tr(It(bt,sne),Rr("fechaCreacion","desc"));return gr(t,r=>e(r.docs.map(H6e)),r=>{console.error("subscribeToActividades error:",r),e([])})},K6e=(e,t)=>{const r=It(bt,ine),n=tr(r,Rr("fechaCompletado","desc"));return gr(n,a=>e(a.docs.map(V6e)),a=>{console.error("subscribeToRespuestas error:",a),e([])})},q6e=e=>{const t=tr(It(bt,M6e),Rr("nombreCompleto","asc"));return gr(t,r=>e(r.docs.map(z6e)),r=>{console.error("subscribeToAllUsers error:",r),e([])})},W6e=e=>{const t=tr(It(bt,one),Rr("fechaCreacion","desc"));return gr(t,r=>e(r.docs.map($6e)),r=>{console.error("subscribeToPruebasEstandarizadas error:",r),e([])})},X6e=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=Dw({...a,fechaCreacion:une(r),plazoEntrega:cne(n)});return(await Un(It(bt,sne),s)).id},Y6e=async e=>{const{id:t,fechaCreacion:r,plazoEntrega:n,...a}=e||{},s=Dw({...a,fechaCreacion:une(r),plazoEntrega:cne(n)});return(await Un(It(bt,one),s)).id},J6e=async(e,t)=>{const r=Dw(t);await Ld(pr(bt,ine,e),r)},Z6e=(e,t)=>{if(!t||t<=0)return"1.0";const n=t*.6;let a;return e>=n?a=4+3*(e-n)/(t-n+1e-9):a=1+3*e/(n+1e-9),a=Math.max(1,Math.min(7,a)),a.toFixed(1)},eOe=async(e,t,r)=>{const{bytes:n,contentType:a}=Q6e(e),s=Date.now(),i=t.replace(/\s+/g,"_"),o=`recursos/${r}/${s}/${i}`,c=s4(Awe,o);await MZ(c,n,{contentType:a});const u=await rP(c);return{nombre:t,url:u}},tOe=async e=>{var s;const t=e.nivel||"general",r=((s=e.recursos)==null?void 0:s.archivos)||[],n=await Promise.all(r.map(async(i,o)=>{if(U6e(i==null?void 0:i.url)){const c=(i==null?void 0:i.nombre)||`archivo_${o}.bin`;return eOe(i.url,c,t)}return{nombre:(i==null?void 0:i.nombre)||`archivo_${o}`,url:i==null?void 0:i.url}})),a={...e,recursos:{...e.recursos||{},archivos:n}};return X6e(a)},n3=e=>e?new Date(e).toLocaleDateString("es-CL"):"",rOe=e=>e?new Date(e).toLocaleString("es-CL"):"",nOe=e=>new Promise((t,r)=>{const n=new FileReader;n.readAsDataURL(e),n.onload=()=>t(String(n.result)),n.onerror=a=>r(a)}),Ya=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>n.includes("punto")||n.includes("Punto")||n.includes("Factor")||n.includes("factor")||n.includes("Criterio")||n.includes("criterio")||n.includes("Aspecto")||n.includes("aspecto"))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},oi=(e,t)=>{if(t&&Ya(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>oi(a,`${t}-array-item`)).join(", ");if(Object.keys(e).some(a=>a.includes("punto")||a.includes("Punto")||a.includes("Factor")||a.includes("factor")||a.includes("Criterio")||a.includes("criterio")))return"[Rúbrica de evaluación]";const n=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of n)if(e[a]&&typeof e[a]=="string")return e[a];try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Ml=(e,t,...r)=>{if(Ya(e,`extractTextSafely-${t}`),!e)return"";for(const n of r)if(e[n]){const a=oi(e[n],`${t}-${n}`);if(a&&a!=="[Objeto complejo]"&&a!=="[Objeto no serializable]")return a}return typeof e=="string"?e:"[Sin contenido disponible]"},La=({content:e,context:t="unknown"})=>{try{const r=oi(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}},a3={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3,4,5]},s3=["Localizar información","Interpretar y relacionar","Reflexionar","Extraer información explícita","Realizar inferencias","Interpretar el sentido global del texto","Evaluar contenido y forma"],aOe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState([]),[i,o]=k.useState([]),[c,u]=k.useState(null),[d,f]=k.useState(null),[h,p]=k.useState(!1),[g,v]=k.useState(!1),[b,y]=k.useState(!1),[C,N]=k.useState(!1),[T,S]=k.useState(!1),[B,w]=k.useState(!0),[_,F]=k.useState(null),[M,D]=k.useState(""),[I,U]=k.useState(null),[P,X]=k.useState(null),[H,Y]=k.useState([]),[V,z]=k.useState("actividades"),[G,re]=k.useState(null),[R,q]=k.useState([]),[J,te]=k.useState(""),ie={asignatura:qi[0],nivel:Gv[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[Ae,oe]=k.useState(ie),ce={asignatura:qi[0],nivel:Gv[0],contenido:"",objetivosAprendizaje:"",plazoEntrega:new Date().toISOString().split("T")[0],cursosDestino:[],estudiantesDestino:[],duracionMinutos:90},[pe,Ie]=k.useState(ce);k.useEffect(()=>{w(!0);const vt=G6e(t),pt=W6e(n),Je=K6e(s),gt=q6e(dt=>{o(dt),w(!1)});return()=>{vt(),pt(),Je(),gt()}},[]);const ne=vt=>{oe(pt=>({...pt,[vt.target.name]:vt.target.value}))},Se=vt=>{Ie(pt=>({...pt,[vt.target.name]:vt.target.value}))},De=vt=>{oe(pt=>({...pt,recursos:{...pt.recursos,[vt.target.name]:vt.target.value}}))},_e=vt=>{vt.target.files&&Y(Array.from(vt.target.files))},he=vt=>{oe(pt=>{const Je=pt.tipos.includes(vt)?pt.tipos.filter(dt=>dt!==vt):[...pt.tipos,vt],gt={...pt.cantidadPreguntas};return Je.includes(vt)?gt[vt]||(gt[vt]=a3[vt][0]):delete gt[vt],{...pt,tipos:Je,cantidadPreguntas:gt}})},je=(vt,pt)=>{oe(Je=>({...Je,cantidadPreguntas:{...Je.cantidadPreguntas,[vt]:pt}}))},He=(vt,pt=!1)=>{(pt?Ie:oe)(gt=>{const dt=gt.cursosDestino||[],Pt=dt.includes(vt)?dt.filter(zt=>zt!==vt):[...dt,vt];return{...gt,cursosDestino:Pt}})},Xe=(vt,pt=!1)=>{(pt?Ie:oe)(gt=>{const dt=gt.estudiantesDestino||[],Pt=dt.includes(vt)?dt.filter(zt=>zt!==vt):[...dt,vt];return{...gt,estudiantesDestino:Pt}})},ye=()=>{const{tipos:vt,contenido:pt,asignatura:Je,nivel:gt,cantidadPreguntas:dt}=Ae;let Pt=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${pt}"
Asignatura: ${Je}
Nivel: ${gt}

Genera los siguientes elementos:
- introduccion: breve y motivadora
- actividades: objeto con propiedades por tipo:
`;return vt.forEach(zt=>{const Lr=dt[zt]||a3[zt][0];switch(zt){case"Quiz":Pt+=`- "Quiz": Array de ${Lr} objetos { pregunta, opciones[4], respuestaCorrecta, puntaje(1) }
`;break;case"Comprensión de Lectura":Pt+=`- "Comprensión de Lectura": Objeto { texto(150-200 palabras), preguntas: Array de ${Lr} { pregunta, opciones[4], respuestaCorrecta, puntaje } }
`;break;case"Términos Pareados":Pt+=`- "Términos Pareados": Array de ${Lr} { concepto, definicion }
`;break;case"Desarrollo":Pt+=`- "Desarrollo": Array de ${Lr} { pregunta, rubrica }
`;break}}),Pt},Oe=()=>{const{contenido:vt,objetivosAprendizaje:pt,asignatura:Je,nivel:gt}=pe;return`Eres experto en evaluación educativa y diseño de pruebas SIMCE.
Responde SOLO con JSON válido.

INFORMACIÓN:
- Asignatura: ${Je}
- Nivel: ${gt}
- Contenido: ${vt}
- Objetivos: ${pt}

{
  "titulo": "Título",
  "instrucciones": "Instrucciones",
  "textos": [
    {
      "id": 1,
      "titulo": "Título del texto",
      "contenido": "200-300 palabras",
      "tipo": "narrativo",
      "palabras": 250
    }
  ],
  "preguntas": [
    {
      "numero": 1,
      "pregunta": "Enunciado",
      "opciones": ["Opción A", "Opción B", "Opción C", "Opción D"],
      "respuestaCorrecta": "A",
      "habilidad": "Localizar información",
      "justificacion": "Breve explicación",
      "textoId": 1
    }
  ]
}

Reglas:
- ${Je==="Lenguaje y Comunicación"||Je==="Lengua y Literatura"?"3-4 textos de distintos tipos":"2-3 textos informativos"}
- Exactamente 30 preguntas numeradas 1..30
- 4 opciones por pregunta (A-D)
- Habilidades válidas: ${s3.join(", ")}
- Para preguntas basadas en textos: incluir "textoId"
- Sin comentarios fuera del JSON`};function Re(vt,pt){if(console.log(`🔍 Adaptando contenido para ${vt}:`,pt),Ya(pt,`autoAdaptContent-${vt}`),vt==="Desarrollo"&&Array.isArray(pt))return pt.map((Je,gt)=>{if(Ya(Je,`desarrollo-item-${gt}`),typeof Je=="string"){const dt=Je.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return dt?{pregunta:Ml(dt[1],`desarrollo-pregunta-${gt}`),rubrica:Ml(dt[2],`desarrollo-rubrica-${gt}`)}:{pregunta:Ml(Je,`desarrollo-pregunta-simple-${gt}`),rubrica:""}}if(Je&&typeof Je=="object"){const dt=Ml(Je,`desarrollo-obj-pregunta-${gt}`,"pregunta","Pregunta","texto");let Pt="";if(Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica){const zt=Je.rubrica||Je.Rubrica||Je.rúbrica||Je.Rúbrica;Pt=oi(zt,`desarrollo-rubrica-${gt}`)}return{pregunta:dt,rubrica:Pt}}return{pregunta:oi(Je,`desarrollo-fallback-${gt}`),rubrica:""}});if(vt==="Términos Pareados"&&Array.isArray(pt))return pt.map((Je,gt)=>{if(Ya(Je,`pareados-item-${gt}`),typeof Je=="string"){const dt=Je.match(/^(.+?)[\s:-–]+(.+)$/);return dt?{id:gt,concepto:Ml(dt[1],`pareados-concepto-${gt}`),definicion:Ml(dt[2],`pareados-definicion-${gt}`)}:{id:gt,concepto:Ml(Je,`pareados-concepto-simple-${gt}`),definicion:""}}return Je&&typeof Je=="object"?{id:gt,concepto:Ml(Je,`pareados-obj-concepto-${gt}`,"concepto","termino"),definicion:Ml(Je,`pareados-obj-definicion-${gt}`,"definicion","significado")}:{id:gt,concepto:oi(Je,`pareados-fallback-${gt}`),definicion:""}});if(vt==="Comprensión de Lectura"){if(Ya(pt,"comprension-lectura-input"),pt&&typeof pt=="object"&&!Array.isArray(pt)&&Array.isArray(pt.preguntas))return{texto:Ml(pt,"comprension-texto","texto"),preguntas:pt.preguntas.map((Je,gt)=>(Ya(Je,`comprension-pregunta-${gt}`),{pregunta:Ml(Je,`comprension-pregunta-${gt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map((dt,Pt)=>oi(dt,`comprension-opcion-${gt}-${Pt}`)):[],respuestaCorrecta:oi(Je.respuestaCorrecta,`comprension-respuesta-${gt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1}))};if(Array.isArray(pt)){const Je=pt.map((dt,Pt)=>Ml(dt,`comprension-bloque-${Pt}`,"texto")).join(`

---

`),gt=pt.flatMap((dt,Pt)=>(Ya(dt,`comprension-bloque-preguntas-${Pt}`),Array.isArray(dt.preguntas)?dt.preguntas:[]));return{texto:Je,preguntas:gt.map((dt,Pt)=>(Ya(dt,`comprension-combined-pregunta-${Pt}`),{pregunta:Ml(dt,`comprension-combined-pregunta-${Pt}`,"pregunta"),opciones:Array.isArray(dt.opciones)?dt.opciones.map((zt,Lr)=>oi(zt,`comprension-combined-opcion-${Pt}-${Lr}`)):[],respuestaCorrecta:oi(dt.respuestaCorrecta,`comprension-combined-respuesta-${Pt}`),puntaje:typeof dt.puntaje=="number"?dt.puntaje:1}))}}}return vt==="Quiz"&&Array.isArray(pt)?pt.map((Je,gt)=>(Ya(Je,`quiz-item-${gt}`),{pregunta:Ml(Je,`quiz-pregunta-${gt}`,"pregunta"),opciones:Array.isArray(Je.opciones)?Je.opciones.map((dt,Pt)=>oi(dt,`quiz-opcion-${gt}-${Pt}`)):[],respuestaCorrecta:oi(Je.respuestaCorrecta,`quiz-respuesta-${gt}`),puntaje:typeof Je.puntaje=="number"?Je.puntaje:1})):pt}const qe=async vt=>{var pt;if(vt.preventDefault(),!Ae.contenido.trim()||Ae.tipos.length===0){F("Contenido y al menos un tipo de actividad son obligatorios.");return}y(!0),F(null);try{const Je=await Promise.all(H.map(async dr=>({nombre:dr.name,url:await nOe(dr)}))),gt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Pt=new ds(gt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),zt=ye();let xn=await(await(await Pt.generateContent(zt)).response).text();xn=xn.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const bn=xn.match(/\{[\s\S]*\}/);if(!bn)throw new Error("La IA no devolvió JSON válido.");const $t=JSON.parse(bn[0]);console.log("🔍 Datos generados por IA:",$t),Ya($t,"generated-data");const rn={};for(const dr of Ae.tipos){const Yr=(pt=$t.actividades)==null?void 0:pt[dr];console.log(`🔍 Contenido crudo para ${dr}:`,Yr),Ya(Yr,`raw-content-${dr}`),rn[dr]=Re(dr,Yr),console.log(`🔍 Contenido adaptado para ${dr}:`,rn[dr]),Ya(rn[dr],`adapted-content-${dr}`)}const en={id:"",fechaCreacion:new Date().toISOString(),...Ae,recursos:{...Ae.recursos,archivos:Je},introduccion:oi($t.introduccion,"introduccion")||"Actividad generada para reforzar el aprendizaje.",generatedContent:rn};console.log("🔍 Actividad final:",en),Ya(en,"new-actividad"),U(en)}catch(Je){F(`Error al generar la actividad: ${(Je==null?void 0:Je.message)||Je}`)}finally{y(!1)}},Ze=async vt=>{if(vt.preventDefault(),!pe.contenido.trim()||!pe.objetivosAprendizaje.trim()){F("Contenido y objetivos de aprendizaje son obligatorios.");return}y(!0),F(null);try{const pt="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",gt=new ds(pt).getGenerativeModel({model:"gemini-1.5-flash-latest"}),dt=Oe();let Lr=await(await(await gt.generateContent(dt)).response).text();Lr=Lr.replace(/```json\s*/gi,"").replace(/```\s*$/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").trim();const Xr=Lr.match(/\{[\s\S]*\}/);if(!Xr)throw new Error("No se encontró JSON válido en la respuesta.");const xn=Xr[0].replace(/,(\s*[}\]])/g,"$1"),bn=JSON.parse(xn);if(!bn.preguntas||!Array.isArray(bn.preguntas))throw new Error("La respuesta de la IA no contiene un array de preguntas válido");const $t=(bn.textos||[]).map((dr,Yr)=>({id:dr.id||Yr+1,titulo:oi(dr.titulo,`texto-titulo-${Yr}`)||`Texto ${Yr+1}`,contenido:oi(dr.contenido,`texto-contenido-${Yr}`)||"Contenido no disponible",tipo:["narrativo","informativo","argumentativo","poetico"].includes(dr.tipo)?dr.tipo:"informativo",palabras:dr.palabras||(dr.contenido?String(dr.contenido).split(" ").length:0)})),rn=bn.preguntas.slice(0,30).map((dr,Yr)=>({numero:dr.numero||Yr+1,pregunta:oi(dr.pregunta,`pregunta-${Yr}`)||`Pregunta ${Yr+1}`,opciones:Array.isArray(dr.opciones)&&dr.opciones.length>=4?dr.opciones.slice(0,4).map((ra,fe)=>oi(ra,`pregunta-opcion-${Yr}-${fe}`)):["A","B","C","D"],respuestaCorrecta:["A","B","C","D"].includes(dr.respuestaCorrecta)?dr.respuestaCorrecta:"A",habilidad:s3.includes(dr.habilidad)?dr.habilidad:s3[0],justificacion:oi(dr.justificacion,`justificacion-${Yr}`)||"Justificación no disponible",...dr.textoId&&typeof dr.textoId=="number"?{textoId:dr.textoId}:{}})),en={id:"",fechaCreacion:new Date().toISOString(),...pe,titulo:oi(bn.titulo,"prueba-titulo")||`Prueba ${pe.asignatura}`,instrucciones:oi(bn.instrucciones,"prueba-instrucciones")||"Lee y responde.",textos:$t,preguntas:rn};X(en)}catch(pt){F(`Error al generar la prueba: ${(pt==null?void 0:pt.message)||pt}`)}finally{y(!1)}},ot=async()=>{if(I)try{N(!0),await tOe(I),oe(ie),Y([]),p(!1),U(null)}catch(vt){console.error("Error al guardar la actividad con archivos:",vt),F("No se pudo guardar la actividad. Revisa los archivos adjuntos.")}finally{N(!1)}},mt=async()=>{if(P)try{N(!0);const vt={...P,cursosDestino:P.cursosDestino||[],estudiantesDestino:P.estudiantesDestino||[],textos:P.textos||[],preguntas:P.preguntas.map(pt=>({...pt,textoId:pt.textoId||null}))};await Y6e(vt),Ie(ce),v(!1),X(null)}catch(vt){console.error("Error al guardar la prueba:",vt),F("No se pudo guardar la prueba.")}finally{N(!1)}},Tt=k.useMemo(()=>{var Je,gt,dt,Pt;const vt=c||d;if(!vt||!i.length)return[];const pt=new Map;if(!((Je=vt.cursosDestino)!=null&&Je.length)&&!((gt=vt.estudiantesDestino)!=null&&gt.length)){const zt=vt.nivel.charAt(0);i.filter(Lr=>{var Xr;return Lr.profile===Yt.ESTUDIANTE&&((Xr=Lr.curso)==null?void 0:Xr.startsWith(zt))}).forEach(Lr=>pt.set(Lr.id,Lr))}else(dt=vt.cursosDestino)!=null&&dt.length&&i.filter(zt=>zt.profile===Yt.ESTUDIANTE&&vt.cursosDestino.includes(zt.curso||"")).forEach(zt=>pt.set(zt.id,zt)),(Pt=vt.estudiantesDestino)!=null&&Pt.length&&i.filter(zt=>zt.profile===Yt.ESTUDIANTE&&vt.estudiantesDestino.includes(zt.nombreCompleto)).forEach(zt=>pt.set(zt.id,zt));return Array.from(pt.values()).sort((zt,Lr)=>zt.nombreCompleto.localeCompare(Lr.nombreCompleto))},[c,d,i]),Mt=k.useMemo(()=>{const vt=(c==null?void 0:c.id)||(d==null?void 0:d.id);return a.filter(pt=>pt.actividadId===vt)},[a,c,d]),Dt=k.useMemo(()=>i.filter(vt=>vt.profile===Yt.ESTUDIANTE).sort((vt,pt)=>vt.nombreCompleto.localeCompare(pt.nombreCompleto)),[i]),Qt=k.useMemo(()=>M.trim()?Dt.filter(vt=>vt.nombreCompleto.toLowerCase().includes(M.toLowerCase())):Dt,[Dt,M]),yt=()=>l.jsxs("div",{className:"flex space-x-1 mb-6",children:[l.jsx("button",{onClick:()=>z("actividades"),className:`px-4 py-2 rounded-lg font-semibold ${V==="actividades"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Actividades Remotas"}),l.jsx("button",{onClick:()=>z("pruebas"),className:`px-4 py-2 rounded-lg font-semibold ${V==="pruebas"?"bg-amber-500 text-white":"bg-slate-200 text-slate-700 hover:bg-slate-300"}`,children:"Pruebas Estandarizadas"})]}),kr=()=>{var vt,pt,Je;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c?l.jsxs(l.Fragment,{children:[l.jsx(La,{content:c.asignatura,context:"actividad-asignatura"})," - ",c.tipos.join(", ")]}):l.jsx(La,{content:(d==null?void 0:d.titulo)||"Prueba Estandarizada",context:"prueba-titulo"})}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",(c==null?void 0:c.nivel)||(d==null?void 0:d.nivel)," | Plazo:"," ",n3((c==null?void 0:c.plazoEntrega)||(d==null?void 0:d.plazoEntrega)),d&&` | Duración: ${d.duracionMinutos} min`]})]}),l.jsx("button",{onClick:()=>{u(null),f(null)},className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),l.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Nota"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"}),((vt=c==null?void 0:c.tipos)==null?void 0:vt.includes("Desarrollo"))&&l.jsx("th",{className:"px-4 py-3"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:Tt.map(gt=>{var Pt;const dt=Mt.find(zt=>zt.estudianteId===gt.id);return l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:gt.nombreCompleto}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:dt?l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):l.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:dt?`${dt.puntaje}/${dt.puntajeMaximo}`:"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-bold",children:dt?l.jsx("span",{className:parseFloat(dt.nota)>=4?"text-green-600":"text-red-600",children:dt.nota}):"-"}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:dt?rOe(dt.fechaCompletado):"-"}),((Pt=c==null?void 0:c.tipos)==null?void 0:Pt.includes("Desarrollo"))&&l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:dt?l.jsx("button",{onClick:()=>{var Lr,Xr,xn;re(dt);const zt=Array.from({length:((Xr=(Lr=c.generatedContent)==null?void 0:Lr.Desarrollo)==null?void 0:Xr.length)||0},(bn,$t)=>({index:$t,puntaje:0,observacion:""}));q(zt),te(((xn=dt==null?void 0:dt.revisionDocente)==null?void 0:xn.observacionesGenerales)||"")},className:"text-blue-600 hover:text-blue-800 font-semibold",children:"Revisar Desarrollo"}):l.jsx("span",{className:"text-slate-400",children:"-"})})]},gt.id)})})]})})]}),G&&((pt=c==null?void 0:c.tipos)==null?void 0:pt.includes("Desarrollo"))&&l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white w-full max-w-2xl rounded-xl p-6 shadow-xl",children:[l.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Revisión de Desarrollo — ",(G==null?void 0:G.estudianteNombre)||""]}),l.jsx("div",{className:"space-y-4 max-h-[50vh] overflow-y-auto",children:(((Je=c.generatedContent)==null?void 0:Je.Desarrollo)||[]).map((gt,dt)=>{var Pt,zt;return console.log(`🔍 Renderizando item desarrollo ${dt}:`,gt),Ya(gt,`revision-item-${dt}`),l.jsxs("div",{className:"p-3 border rounded-lg",children:[l.jsxs("p",{className:"font-semibold",children:[dt+1,". ",l.jsx(La,{content:gt.pregunta,context:`revision-pregunta-${dt}`})]}),gt.rubrica&&l.jsxs("p",{className:"text-xs text-slate-600 mt-2 bg-slate-50 p-2 rounded",children:[l.jsx("strong",{children:"Rúbrica:"})," ",l.jsx(La,{content:gt.rubrica,context:`revision-rubrica-${dt}`})]}),l.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[l.jsx("label",{className:"text-sm text-slate-700",children:"Puntaje:"}),l.jsx("input",{type:"number",min:0,step:.5,value:((Pt=R[dt])==null?void 0:Pt.puntaje)??0,onChange:Lr=>{const Xr=Number(Lr.target.value)||0;q(xn=>{const bn=[...xn];return bn[dt]={...bn[dt]||{index:dt,puntaje:0},puntaje:Xr},bn})},className:"w-24 border-slate-300 rounded-md"}),l.jsx("input",{type:"text",placeholder:"Observación (opcional)",value:((zt=R[dt])==null?void 0:zt.observacion)||"",onChange:Lr=>{const Xr=Lr.target.value;q(xn=>{const bn=[...xn];return bn[dt]={...bn[dt]||{index:dt,puntaje:0},observacion:Xr},bn})},className:"flex-1 border-slate-300 rounded-md"})]})]},dt)})}),l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Observaciones Generales"}),l.jsx("textarea",{rows:3,value:J,onChange:gt=>te(gt.target.value),className:"w-full border-slate-300 rounded-md"})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>{re(null),q([]),te("")},className:"px-4 py-2 rounded-lg bg-slate-200 text-slate-800 hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:async()=>{if(G)try{S(!0);const gt=Number(G.puntaje)||0,dt=Number(G.puntajeMaximo)||0,Pt=(R||[]).reduce((Xr,xn)=>Xr+(Number(xn.puntaje)||0),0),zt=gt+Pt,Lr=Z6e(zt,dt);await J6e(G.id,{puntaje:zt,puntajeMaximo:dt,nota:Lr,revisionDocente:{completada:!0,observacionesGenerales:J||"",detalle:R||[],puntajeDocente:Pt}}),re(null),q([]),te("")}catch(gt){console.error("Error guardando revisión:",gt),F("No se pudo guardar la revisión del docente.")}finally{S(!1)}},disabled:T,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 disabled:bg-amber-400",children:T?"Guardando...":"Guardar Revisión"})]})]})})]})},rr=()=>{var vt,pt;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),l.jsx("button",{onClick:()=>p(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad."}),l.jsxs("form",{onSubmit:qe,className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:Ae.asignatura,onChange:ne,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(Je=>l.jsx("option",{value:Je,children:Je},Je))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:Ae.nivel,onChange:ne,className:"w-full border-slate-300 rounded-md shadow-sm",children:Gv.map(Je=>l.jsx("option",{value:Je,children:Je},Je))})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos (Opcional)"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones"}),l.jsx("textarea",{name:"instrucciones",value:(vt=Ae.recursos)==null?void 0:vt.instrucciones,onChange:De,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Ej: Lee y luego responde..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces"}),l.jsx("textarea",{name:"enlaces",value:(pt=Ae.recursos)==null?void 0:pt.enlaces,onChange:De,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Pega un enlace por línea..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos"}),l.jsx("input",{type:"file",multiple:!0,onChange:_e,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),l.jsx("p",{className:"text-sm text-slate-500",children:"Si no seleccionas nada, será visible para todo el nivel."}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:ks.map(Je=>{var gt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(gt=Ae.cursosDestino)==null?void 0:gt.includes(Je),onChange:()=>He(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700",children:Je})]},Je)})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),l.jsx("input",{type:"text",placeholder:"Buscar...",value:M,onChange:Je=>D(Je.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Qt.map(Je=>{var gt;return l.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:(gt=Ae.estudiantesDestino)==null?void 0:gt.includes(Je.nombreCompleto),onChange:()=>Xe(Je.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:Je.nombreCompleto,children:Je.nombreCompleto})]},Je.id)})})]})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),l.jsx("div",{className:"space-y-3",children:rbe.map(Je=>l.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[l.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:Ae.tipos.includes(Je),onChange:()=>he(Je),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),l.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:Je})]}),Ae.tipos.includes(Je)&&l.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[l.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),a3[Je].map(gt=>l.jsx("button",{type:"button",onClick:()=>je(Je,gt),className:`px-3 py-1 rounded-full font-semibold text-xs ${Ae.cantidadPreguntas[Je]===gt?"bg-amber-500 text-white":"bg-slate-200"}`,children:gt},gt))]})]},Je))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("textarea",{name:"contenido",value:Ae.contenido,onChange:ne,required:!0,rows:4,placeholder:"Temas, conceptos clave o texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:Ae.plazoEntrega,onChange:ne,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),_&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:_}),l.jsx("div",{className:"pt-4 text-right",children:l.jsx("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:b?"Generando...":"Generar y Previsualizar"})})]})]})},an=()=>{var vt;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar."}),l.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(La,{content:I==null?void 0:I.introduccion,context:"preview-introduccion"})})]}),(I==null?void 0:I.recursos)&&(I.recursos.instrucciones||I.recursos.enlaces||((vt=I.recursos.archivos)==null?void 0:vt.length))&&l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),l.jsxs("div",{className:"space-y-3",children:[I.recursos.instrucciones&&l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(La,{content:I.recursos.instrucciones,context:"preview-instrucciones"})}),I.recursos.enlaces&&l.jsx("div",{children:I.recursos.enlaces.split(`
`).map((pt,Je)=>pt.trim()&&l.jsx("a",{href:pt,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:pt},Je))}),I.recursos.archivos&&I.recursos.archivos.length>0&&l.jsx("ul",{className:"list-disc list-inside",children:I.recursos.archivos.map(pt=>l.jsx("li",{className:"text-slate-700",children:pt.nombre},pt.nombre))})]})]}),I==null?void 0:I.tipos.map(pt=>{const Je=I.generatedContent[pt];return console.log(`🔍 Renderizando preview para ${pt}:`,Je),Ya(Je,`preview-${pt}`),Je?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:pt}),l.jsxs("div",{className:"space-y-4 text-sm",children:[pt==="Quiz"&&Array.isArray(Je)&&Je.map((gt,dt)=>(Ya(gt,`preview-quiz-${dt}`),l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[dt+1,". ",l.jsx(La,{content:gt.pregunta,context:`preview-quiz-pregunta-${dt}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:gt.opciones.map((Pt,zt)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+zt),"."]})," ",l.jsx(La,{content:Pt,context:`preview-quiz-opcion-${dt}-${zt}`})]},zt))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(La,{content:gt.respuestaCorrecta,context:`preview-quiz-respuesta-${dt}`})]})]},dt))),pt==="Comprensión de Lectura"&&Je&&typeof Je=="object"&&"preguntas"in Je&&Array.isArray(Je.preguntas)&&l.jsxs("div",{children:[l.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:l.jsx(La,{content:Je.texto,context:"preview-lectura-texto"})}),Je.preguntas.map((gt,dt)=>(Ya(gt,`preview-lectura-pregunta-${dt}`),l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[dt+1,". ",l.jsx(La,{content:gt.pregunta,context:`preview-lectura-pregunta-${dt}`})]}),l.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:gt.opciones.map((Pt,zt)=>l.jsxs("li",{children:[l.jsxs("strong",{children:[String.fromCharCode(65+zt),"."]})," ",l.jsx(La,{content:Pt,context:`preview-lectura-opcion-${dt}-${zt}`})]},zt))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",l.jsx(La,{content:gt.respuestaCorrecta,context:`preview-lectura-respuesta-${dt}`})]})]},dt)))]}),pt==="Términos Pareados"&&Array.isArray(Je)&&l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border border-slate-200",children:[l.jsx("thead",{className:"bg-slate-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),l.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),l.jsx("tbody",{children:Je.map((gt,dt)=>(Ya(gt,`preview-pareado-${dt}`),l.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[l.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:l.jsx(La,{content:gt.concepto,context:`preview-pareado-concepto-${dt}`})}),l.jsx("td",{className:"p-2 align-top text-slate-700",children:l.jsx(La,{content:gt.definicion,context:`preview-pareado-definicion-${dt}`})})]},gt.id)))})]})}),pt==="Desarrollo"&&Array.isArray(Je)&&Je.map((gt,dt)=>(console.log(`🔍 Renderizando desarrollo ${dt}:`,gt),Ya(gt,`preview-desarrollo-${dt}`),l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[dt+1,". ",l.jsx(La,{content:gt.pregunta,context:`preview-desarrollo-pregunta-${dt}`})]}),l.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[l.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",l.jsx(La,{content:gt.rubrica,context:`preview-desarrollo-rubrica-${dt}`})]})]},dt))),(pt==="Quiz"||pt==="Términos Pareados"||pt==="Desarrollo")&&!Array.isArray(Je)&&l.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:["El contenido para ",l.jsx("strong",{children:pt})," no tiene el formato esperado."]}),pt==="Comprensión de Lectura"&&(!Je||typeof Je!="object"||!Array.isArray(Je.preguntas))&&l.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:["El contenido de ",l.jsx("strong",{children:"Comprensión de Lectura"})," no tiene el formato esperado."]})]})]},pt):null})]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>U(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:ot,disabled:C,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:C?"Guardando...":"Confirmar y Asignar"})]})]})},_r=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),l.jsx("button",{onClick:()=>p(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),l.jsx("div",{className:"space-y-4",children:e.length>0?e.map(vt=>{var gt,dt;Ya(vt,`lista-actividad-${vt.id}`);const pt=[];(gt=vt.cursosDestino)!=null&&gt.length&&pt.push(`Cursos: ${vt.cursosDestino.join(", ")}`),(dt=vt.estudiantesDestino)!=null&&dt.length&&pt.push(`Estudiantes: ${vt.estudiantesDestino.length}`);const Je=pt.length?pt.join(" | "):`Todo ${vt.nivel}`;return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(La,{content:vt.asignatura,context:`lista-asignatura-${vt.id}`})," — ",vt.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",Je," | Creado: ",n3(vt.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>u(vt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},vt.id)}):l.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Use "Crear Nueva".'})})]}),zr=()=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Prueba Estandarizada"}),l.jsx("button",{onClick:()=>v(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),l.jsxs("form",{onSubmit:Ze,className:"space-y-6 mt-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),l.jsx("select",{name:"asignatura",value:pe.asignatura,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm",children:qi.map(vt=>l.jsx("option",{value:vt,children:vt},vt))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),l.jsx("select",{name:"nivel",value:pe.nivel,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm",children:Gv.map(vt=>l.jsx("option",{value:vt,children:vt},vt))})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Objetivos de Aprendizaje"}),l.jsx("textarea",{name:"objetivosAprendizaje",value:pe.objetivosAprendizaje,onChange:Se,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm",placeholder:"Describe OA o contenidos evaluados..."})]}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Contenido Base"}),l.jsx("textarea",{name:"contenido",value:pe.contenido,onChange:Se,rows:4,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),l.jsx("input",{type:"date",name:"plazoEntrega",value:pe.plazoEntrega,onChange:Se,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),_&&l.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:_}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:b,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400",children:b?"Generando...":"Generar y Previsualizar"})})]})]}),Fn=()=>{var vt,pt;return l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización Prueba"}),l.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa y confirma."}),l.jsxs("div",{className:"space-y-4 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:l.jsx(La,{content:P==null?void 0:P.titulo,context:"preview-prueba-titulo"})}),l.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(La,{content:P==null?void 0:P.instrucciones,context:"preview-prueba-instrucciones"})})]}),(vt=P==null?void 0:P.textos)!=null&&vt.length?l.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[l.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Textos"}),l.jsx("ol",{className:"space-y-2 list-decimal list-inside",children:P.textos.map((Je,gt)=>(Ya(Je,`preview-texto-${gt}`),l.jsxs("li",{children:[l.jsxs("p",{className:"font-semibold",children:[l.jsx(La,{content:Je.titulo,context:`preview-texto-titulo-${gt}`}),l.jsxs("span",{className:"text-xs text-slate-500",children:["(",Je.tipo,")"]})]}),l.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-wrap mt-1",children:l.jsx(La,{content:Je.contenido,context:`preview-texto-contenido-${gt}`})})]},Je.id)))})]}):null,(pt=P==null?void 0:P.preguntas)!=null&&pt.length?l.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Preguntas (muestra)"}),P.preguntas.slice(0,10).map((Je,gt)=>(Ya(Je,`preview-pregunta-${gt}`),l.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[l.jsxs("p",{className:"font-semibold",children:[Je.numero,". ",l.jsx(La,{content:Je.pregunta,context:`preview-pregunta-texto-${gt}`})]}),l.jsx("ul",{className:"list-disc pl-6 text-sm mt-1",children:Je.opciones.map((dt,Pt)=>l.jsx("li",{children:l.jsx(La,{content:dt,context:`preview-pregunta-opcion-${gt}-${Pt}`})},Pt))}),l.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-1",children:["Correcta: ",Je.respuestaCorrecta]})]},Je.numero)))]}):null]}),l.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>X(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),l.jsx("button",{onClick:mt,disabled:C,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 disabled:bg-green-400",children:C?"Guardando...":"Confirmar y Asignar"})]})]})},Fr=()=>l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Pruebas Estandarizadas"}),l.jsx("button",{onClick:()=>v(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),l.jsx("div",{className:"space-y-4",children:r.length>0?r.map(vt=>(Ya(vt,`lista-prueba-${vt.id}`),l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800",children:l.jsx(La,{content:vt.titulo,context:`lista-prueba-titulo-${vt.id}`})}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Nivel: ",vt.nivel," | Creado: ",n3(vt.fechaCreacion)]})]}),l.jsx("button",{onClick:()=>f(vt),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},vt.id))):l.jsx("p",{className:"text-slate-500 text-center py-6",children:"No hay pruebas creadas."})})]});return B?l.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):l.jsxs("div",{className:"animate-fade-in",children:[yt(),P?Fn():I?an():c||d?kr():V==="pruebas"?g?zr():Fr():h?rr():_r()]})},sOe="actividades_remotas",cR="respuestas_actividades",dne=e=>{if(!e)return null;if(e instanceof Date)return e;if(typeof e=="string"){const t=new Date(e);return isNaN(t.getTime())?null:t}if(e&&typeof e.toDate=="function"){const t=e.toDate();return t instanceof Date&&!isNaN(t.getTime())?t:null}if(e&&typeof e.seconds=="number"&&typeof e.nanoseconds=="number"){const t=e.seconds*1e3+Math.floor(e.nanoseconds/1e6),r=new Date(t);return isNaN(r.getTime())?null:r}return null},jV=e=>{const t=dne(e);return t?t.toISOString():void 0},iOe=e=>{const t=dne(e);return t?t.toISOString().split("T")[0]:void 0},uR=e=>{const t=e.data();return{id:e.id,...t,fechaCreacion:jV(t.fechaCreacion)||t.fechaCreacion,plazoEntrega:iOe(t.plazoEntrega)||t.plazoEntrega,fechaCompletado:jV(t.fechaCompletado)||t.fechaCompletado}},zx=(e,t)=>{var n,a;console.error(`❌ Error en ${t}:`,e);const r={name:"FirestoreError",message:e.message||"Error desconocido",code:e.code};return e.code==="failed-precondition"&&((n=e.message)!=null&&n.includes("requires an index"))?(r.message="Se requiere configurar un índice en la base de datos. Contacta al administrador.",console.log("🔗 Enlace para crear índice:",(a=e.message.match(/https:\/\/[^\s]+/))==null?void 0:a[0])):e.code==="permission-denied"?r.message="No tienes permisos para acceder a estos datos.":e.code==="unavailable"&&(r.message="Servicio temporalmente no disponible. Intenta nuevamente."),r},oOe=e=>new Promise(t=>setTimeout(t,e)),lOe=async(e,t=3,r="operación")=>{for(let n=1;n<=t;n++)try{return await e()}catch(a){if(console.log(`⚠️ Intento ${n} falló en ${r}:`,a.code||a.message),n===t)throw a;if(["unavailable","deadline-exceeded","internal"].includes(a.code)){const s=Math.pow(2,n)*1e3;console.log(`⏱️ Reintentando en ${s}ms...`),await oOe(s)}else throw a}throw new Error("Max retries exceeded")},cOe=(e,t,r)=>{console.log("🔔 Suscribiéndose a actividades disponibles para:",e.nombreCompleto);const n=tr(It(bt,sOe),Rr("fechaCreacion","desc"));return gr(n,{next:s=>{try{console.log("📋 Actividades recibidas desde Firestore:",s.docs.length);const o=s.docs.map(c=>uR(c)).filter(c=>{var u,d,f,h,p;if(!((u=c.cursosDestino)!=null&&u.length)&&!((d=c.estudiantesDestino)!=null&&d.length)){const g=c.nivel.charAt(0);return(f=e.curso)==null?void 0:f.startsWith(g)}return!!((h=c.cursosDestino)!=null&&h.includes(e.curso||"")||(p=c.estudiantesDestino)!=null&&p.includes(e.nombreCompleto))});console.log("✅ Actividades filtradas para el estudiante:",o.length),t(o)}catch(i){console.error("❌ Error procesando datos de actividades:",i);const o=zx(i,"procesamiento de actividades");r==null||r(o)}},error:s=>{const i=zx(s,"suscripción a actividades");r==null||r(i)}})},uOe=(e,t,r)=>{console.log("🔔 Suscribiéndose a respuestas del estudiante:",e);const n=tr(It(bt,cR),vn("estudianteId","==",e),Rr("fechaCompletado","desc"));return gr(n,{next:s=>{try{console.log("📝 Respuestas recibidas desde Firestore:",s.docs.length);const i=s.docs.map(o=>{var u;const c=uR(o);return console.log(`📄 Respuesta ${o.id}:`,{actividadId:c.actividadId,puntaje:c.puntaje,nota:c.nota,requiereRevision:c.requiereRevisionDocente,revisionCompletada:(u=c.revisionDocente)==null?void 0:u.completada,fechaCompletado:c.fechaCompletado}),c});console.log("✅ Enviando respuestas procesadas al componente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas:",i);const o=zx(i,"procesamiento de respuestas");r==null||r(o)}},error:s=>{var o;const i=zx(s,"suscripción a respuestas");if(s.code==="failed-precondition"&&((o=s.message)!=null&&o.includes("requires an index")))return console.log("⚠️ Error de índice detectado, intentando consulta alternativa..."),dOe(e,t,r);r==null||r(i)}})},dOe=(e,t,r)=>{console.log("🔄 Usando consulta alternativa sin ordenamiento...");const n=tr(It(bt,cR),vn("estudianteId","==",e));return gr(n,{next:s=>{try{console.log("📝 Respuestas recibidas (consulta alternativa):",s.docs.length);const i=s.docs.map(o=>uR(o)).sort((o,c)=>new Date(c.fechaCompletado).getTime()-new Date(o.fechaCompletado).getTime());console.log("✅ Respuestas ordenadas manualmente:",i.length),t(i)}catch(i){console.error("❌ Error procesando respuestas (alternativa):",i);const o=zx(i,"procesamiento de respuestas alternativo");r==null||r(o)}},error:s=>{const i=zx(s,"suscripción alternativa a respuestas");r==null||r(i)}})},AOe=async e=>lOe(async()=>{console.log("💾 Guardando respuesta de actividad:",{actividadId:e.actividadId,estudianteId:e.estudianteId,puntaje:e.puntaje,nota:e.nota});const t={...e,fechaCompletado:mr.fromDate(new Date(e.fechaCompletado))},r=await Un(It(bt,cR),t);return console.log("✅ Respuesta guardada exitosamente con ID:",r.id),r.id},3,"guardado de respuesta"),fOe=.6,hOe=(e,t,r=fOe,n=2)=>{if(!t||t<=0)return n.toFixed(1);const a=t*r;let s;return e>=a?s=4+3*(e-a)/(t-a+1e-9):s=1+3*e/(a+1e-9),s=Math.max(n,Math.min(7,s)),s.toFixed(1)},e6=({className:e="w-5 h-5"})=>l.jsxs("svg",{className:`animate-spin ${e}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),mOe=async(e,t,r=3)=>{var i;const n="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",s=new ds(n).getGenerativeModel({model:"gemini-1.5-flash-latest"});for(let o=1;o<=r;o++)try{console.log(`🤖 Intento ${o} de generar feedback con IA`);const c=gOe(e,t);let f=(await(await s.generateContent(c)).response).text().trim();f=f.replace(/```json\s*/gi,"").replace(/```\s*$/g,"");const h=f.match(/\{[\s\S]*\}$/);try{const p=JSON.parse(h?h[0]:f);return console.log(`✅ Feedback generado exitosamente en intento ${o}`),p}catch(p){throw console.warn(`⚠️ Error al parsear JSON en intento ${o}:`,p),new Error("JSON parsing failed")}}catch(c){if(console.log(`❌ Error en intento ${o}:`,c.message),(i=c.message)!=null&&i.includes("503")&&o<r){const u=Math.pow(2,o)*1e3;console.log(`⏱️ Esperando ${u}ms antes del siguiente intento...`),await new Promise(d=>setTimeout(d,u));continue}if(o===r)return console.log("🚫 Todos los intentos fallaron. Procediendo sin IA."),null}return null},pOe=async(e,t,r)=>{console.log("💾 Iniciando guardado de respuesta...");try{const n=await AOe(e);console.log("✅ Respuesta base guardada con ID:",n);const a={id:n,...e};try{const s=await mOe(t,r);if(s){const{updateDoc:i,doc:o}=await Lx(async()=>{const{updateDoc:u,doc:d}=await Promise.resolve().then(()=>uxe);return{updateDoc:u,doc:d}},void 0),{db:c}=await Lx(async()=>{const{db:u}=await Promise.resolve().then(()=>QZ);return{db:u}},void 0);return await i(o(c,"respuestas_actividades",n),{retroalimentacionAI:s}),console.log("🤖 Feedback de IA agregado exitosamente"),{...a,retroalimentacionAI:s}}return a}catch(s){return console.warn("⚠️ No se pudo generar feedback de IA, pero la respuesta fue guardada:",s),a}}catch(n){throw console.error("❌ Error crítico al guardar respuesta:",n),n}},vo=(e,t)=>{if(typeof e=="object"&&e!==null&&!Array.isArray(e)){const r=Object.keys(e);r.some(n=>["comprension","analisis","argumentacion","creatividad","claridad","precision","organizacion"].includes(n))&&(console.warn(`🚨 OBJETO SOSPECHOSO EN ${t}:`,e),console.warn("Keys:",r))}},$s=(e,t)=>{if(t&&vo(e,t),e==null)return"";if(typeof e=="string")return e;if(typeof e=="number"||typeof e=="boolean")return String(e);if(typeof e=="object"){if(Array.isArray(e))return e.map(a=>$s(a,`${t}-array-item`)).join(", ");const r=["texto","contenido","descripcion","valor","name","title","label","pregunta","enunciado","respuesta","opcion","concepto","definicion"];for(const a of r)if(e[a]&&typeof e[a]=="string")return e[a];if(Object.keys(e).some(a=>["comprension","analisis","argumentacion","creatividad","claridad","precision"].includes(a)))return"[Criterios de evaluación]";try{const a=JSON.stringify(e);return a.length>100?"[Objeto complejo]":a}catch{return"[Objeto no serializable]"}}return String(e)},Cd=(e,t,...r)=>{if(vo(e,`extractTextSafely-${t}`),!e)return"";for(const a of r)if(e[a]){const s=$s(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}const n=["texto","pregunta","enunciado","contenido","descripcion","value","label"];for(const a of n)if(e[a]){const s=$s(e[a],`${t}-${a}`);if(s&&s!=="[Objeto complejo]"&&s!=="[Objeto no serializable]")return s}return typeof e=="string"?e:"[Sin contenido disponible]"},ui=({content:e,context:t="unknown"})=>{try{const r=$s(e,`UltraSafeRenderer-${t}`);return l.jsx("span",{children:r})}catch(r){return console.error("Error in UltraSafeRenderer:",r,"Content:",e),l.jsx("span",{children:"[Error al mostrar contenido]"})}};function IV(e){if(console.log("🔍 Normalizando lectura:",e),vo(e,"normalizeLectura-input"),!e)return{texto:"",preguntas:[]};const t=(r,n)=>{vo(r,`normalizeQuestion-${n}`);const a=Array.isArray(r==null?void 0:r.opciones)?r.opciones.map((s,i)=>$s(s,`opcion-${n}-${i}`)).filter(Boolean):[];return{pregunta:Cd(r,`pregunta-${n}`,"pregunta","texto"),opciones:a,respuestaCorrecta:$s(r==null?void 0:r.respuestaCorrecta,`respuestaCorrecta-${n}`),puntaje:typeof(r==null?void 0:r.puntaje)=="number"?r.puntaje:1}};if(!Array.isArray(e)&&Array.isArray(e.preguntas)){const r=e;return{texto:Cd(r,"lectura-texto","texto"),preguntas:(r.preguntas||[]).map(t)}}if(Array.isArray(e)){const r=e.map((a,s)=>Cd(a,`lectura-bloque-${s}`,"texto")).filter(Boolean).join(`

---

`),n=e.flatMap((a,s)=>(vo(a,`lectura-bloque-preguntas-${s}`),Array.isArray(a==null?void 0:a.preguntas)?a.preguntas:[])).map(t);return{texto:r,preguntas:n}}return{texto:"",preguntas:[]}}function FV(e){return console.log("🔍 Normalizando pareados:",e),vo(e,"normalizePareados-input"),e?!Array.isArray(e)&&Array.isArray(e.pares)?e.pares.map((t,r)=>(vo(t,`pareado-${r}`),{izquierda:Cd(t,`pareado-izq-${r}`,"izquierda","concepto"),derecha:Cd(t,`pareado-der-${r}`,"derecha","definicion"),puntaje:typeof(t==null?void 0:t.puntaje)=="number"?t.puntaje:1})):Array.isArray(e)?e.map((t,r)=>(vo(t,`pareado-array-${r}`),{izquierda:Cd(t,`pareado-concepto-${r}`,"concepto","izquierda"),derecha:Cd(t,`pareado-definicion-${r}`,"definicion","derecha"),puntaje:1})):[]:[]}function OV(e){return console.log("🔍 Normalizando desarrollo:",e),vo(e,"normalizeDesarrollo-input"),e?!Array.isArray(e)&&Array.isArray(e.preguntas)?e.preguntas.map((t,r)=>(vo(t,`desarrollo-pregunta-${r}`),{enunciado:Cd(t,`desarrollo-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):Array.isArray(e)?e.map((t,r)=>(vo(t,`desarrollo-array-${r}`),t!=null&&t.rubrica&&typeof t.rubrica=="object"&&console.warn(`🚨 Rubrica detectada como objeto en item ${r}, ignorando`,t.rubrica),{enunciado:Cd(t,`desarrollo-array-enunciado-${r}`,"enunciado","pregunta","texto"),puntajeMax:void 0})):[]:[]}const gOe=(e,t)=>{const r=t.items.filter(i=>i.esCorrecta===!1),n=t.items.filter(i=>i.tipo==="Desarrollo"),a=r.map(i=>`- Pregunta: "${$s(i.pregunta,"feedback-prompt-pregunta")}"
  - Respuesta del estudiante: "${$s(i.respuestaUsuario,"feedback-prompt-respuesta")}"
  - Respuesta correcta: "${$s(i.respuestaCorrecta,"feedback-prompt-correcta")}"`).join(`
`),s=n.map(i=>`- Pregunta abierta: "${$s(i.pregunta,"feedback-prompt-desarrollo-pregunta")}"
  - Respuesta del estudiante: """${$s(i.respuestaUsuario,"feedback-prompt-desarrollo-respuesta")}"""`).join(`
`);return`
Eres tutor pedagógico. Actividad de "${$s(e.asignatura,"feedback-prompt-asignatura")}" sobre "${$s(e.contenido,"feedback-prompt-contenido")}".
Devuelve SOLO un JSON con esta forma:

{
  "logros": "1 párrafo motivador, reconociendo aciertos",
  "desafios": [
    { "pregunta": "...", "explicacionDelError": "≤50 palabras, por qué la correcta es adecuada" }
  ],
  "comentariosDesarrollo": [
    { "pregunta": "...", "retroalimentacionBreve": "≤60 palabras, concreta y constructiva. No asignes nota." }
  ]
}

ERRORES (alternativa / lectura / pareados):
${a||"- Sin errores de alternativa."}

RESPUESTAS DE DESARROLLO:
${s||"- Sin preguntas de desarrollo."}
`.trim()},vOe=({actividad:e,onComplete:t,currentUser:r})=>{const[n,a]=k.useState({}),[s,i]=k.useState(!1),o=(u,d)=>{const f={...n,[u]:d};a(f)},c=async()=>{i(!0);let u=0,d=0;const f={items:[]};e.tipos.forEach(p=>{const g=e.generatedContent[p],v=n[p];if(console.log(`🔍 Procesando tipo: ${p}`,g),vo(g,`handleSubmit-${p}`),!!g){if((p==="Quiz"||p==="Comprensión de Lectura")&&(p==="Quiz"?Array.isArray(g)?g.map((y,C)=>(vo(y,`quiz-question-${C}`),{pregunta:Cd(y,`quiz-pregunta-${C}`,"pregunta"),opciones:Array.isArray(y==null?void 0:y.opciones)?y.opciones.map((N,T)=>$s(N,`quiz-opcion-${C}-${T}`)):[],respuestaCorrecta:$s(y==null?void 0:y.respuestaCorrecta,`quiz-respuesta-${C}`),puntaje:typeof(y==null?void 0:y.puntaje)=="number"?y.puntaje:1})):[]:IV(g).preguntas).forEach((y,C)=>{const N=v==null?void 0:v[C],T=N===y.respuestaCorrecta,S=y.puntaje??1;T&&(u+=S),d+=S,f.items.push({pregunta:y.pregunta,respuestaUsuario:$s(N,`feedback-respuesta-${C}`)||"No respondida",respuestaCorrecta:y.respuestaCorrecta,esCorrecta:T,puntajeObtenido:T?S:0,tipo:p})}),p==="Términos Pareados"){const b=FV(g),y=v||{};b.forEach((C,N)=>{const T=y[N],S=T===C.derecha,B=C.puntaje??1;S&&(u+=B),d+=B,f.items.push({pregunta:`${C.izquierda} → ¿?`,respuestaUsuario:$s(T,`pareado-feedback-${N}`)||"No respondida",respuestaCorrecta:C.derecha,esCorrecta:S,puntajeObtenido:S?B:0,tipo:p})})}if(p==="Desarrollo"){const b=OV(g),y=v||{};b.forEach((C,N)=>{const T=$s(y[N],`desarrollo-feedback-${N}`).trim();f.items.push({pregunta:C.enunciado,respuestaUsuario:T||"No respondida",respuestaCorrecta:"Revisión docente",esCorrecta:null,puntajeObtenido:0,tipo:p})})}}});const h={puntaje:u,puntajeMaximo:d,respuestas:n,nota:hOe(u,d),requiereRevisionDocente:e.tipos.includes("Desarrollo")};t(h,f)};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[l.jsx("h2",{className:"text-2xl font-bold text-sky-800 mb-2",children:l.jsx(ui,{content:e.asignatura,context:"actividad-asignatura"})}),l.jsx("div",{className:"text-slate-700 whitespace-pre-wrap",children:l.jsx(ui,{content:e.introduccion,context:"actividad-introduccion"})})]}),e.tipos.map(u=>{const d=e.generatedContent[u];if(console.log(`🔍 Renderizando tipo: ${u}`,d),vo(d,`render-${u}`),!d)return null;switch(u){case"Quiz":{const f=Array.isArray(d)?d.map((h,p)=>(vo(h,`render-quiz-question-${p}`),{pregunta:Cd(h,`render-quiz-pregunta-${p}`,"pregunta"),opciones:Array.isArray(h==null?void 0:h.opciones)?h.opciones.map((g,v)=>$s(g,`render-quiz-opcion-${p}-${v}`)):[],respuestaCorrecta:$s(h==null?void 0:h.respuestaCorrecta,`render-quiz-respuesta-${p}`),puntaje:typeof(h==null?void 0:h.puntaje)=="number"?h.puntaje:1})):[];return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Quiz"}),l.jsx("div",{className:"space-y-6",children:f.map((h,p)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",l.jsx(ui,{content:h.pregunta,context:`quiz-pregunta-${p}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,v)=>{var b;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(ui,{content:g,context:`quiz-opcion-${p}-${v}`})})]},v)})})]},p))})]},u)}case"Comprensión de Lectura":{const f=IV(d);return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Comprensión de Lectura"}),l.jsx("div",{className:"mb-6 p-4 rounded bg-slate-50 border whitespace-pre-wrap",children:l.jsx(ui,{content:f.texto,context:"lectura-texto"})}),l.jsx("div",{className:"space-y-6",children:f.preguntas.map((h,p)=>l.jsxs("div",{className:"border-t pt-4 first:border-t-0 first:pt-0",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[p+1,". ",l.jsx(ui,{content:h.pregunta,context:`lectura-pregunta-${p}`})]}),l.jsx("div",{className:"mt-2 space-y-2",children:h.opciones.map((g,v)=>{var b;return l.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-amber-50 cursor-pointer transition-colors has-[:checked]:bg-amber-100 has-[:checked]:font-semibold",children:[l.jsx("input",{type:"radio",name:`q-${u}-${p}`,value:g,checked:((b=n[u])==null?void 0:b[p])===g,onChange:()=>o(u,{...n[u]||{},[p]:g}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400 border-slate-300"}),l.jsx("span",{children:l.jsx(ui,{content:g,context:`lectura-opcion-${p}-${v}`})})]},v)})})]},p))})]},u)}case"Términos Pareados":{const f=FV(d),h=n[u]||{},p=[...new Set(f.map(g=>g.derecha))];for(let g=p.length-1;g>0;g--){const v=Math.floor(Math.random()*(g+1));[p[g],p[v]]=[p[v],p[g]]}return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Términos Pareados"}),l.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:f.map((g,v)=>l.jsxs("div",{className:"p-3 rounded border bg-slate-50",children:[l.jsxs("p",{className:"font-semibold text-slate-800 mb-2",children:[v+1,". ",l.jsx(ui,{content:g.izquierda,context:`pareado-izq-${v}`})]}),l.jsxs("select",{className:"w-full border rounded p-2 bg-white",value:h[v]??"",onChange:b=>o(u,{...h,[v]:b.target.value}),children:[l.jsx("option",{value:"",children:"— Selecciona la pareja —"}),p.map((b,y)=>l.jsx("option",{value:b,children:$s(b,`pareado-opcion-${v}-${y}`)},y))]})]},`${g.izquierda}-${v}`))})]},u)}case"Desarrollo":{const f=OV(d),h=n[u]||{};return l.jsxs("div",{className:"p-6 border rounded-lg bg-white shadow-sm",children:[l.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-700",children:"Preguntas de Desarrollo"}),l.jsx("div",{className:"space-y-6",children:f.map((p,g)=>l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"font-semibold text-slate-800",children:[g+1,". ",l.jsx(ui,{content:p.enunciado,context:`desarrollo-enunciado-${g}`})]}),l.jsx("textarea",{className:"w-full min-h-[120px] border rounded p-3",placeholder:"Escribe tu respuesta…",value:h[g]??"",onChange:v=>o(u,{...h,[g]:v.target.value})})]},g))}),l.jsx("p",{className:"mt-3 text-sm text-slate-500",children:"Este apartado será revisado y calificado por tu profesor/a."})]},u)}default:return null}}),l.jsx("div",{className:"text-right mt-8 flex justify-end gap-4",children:l.jsxs("button",{onClick:c,disabled:s,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:[s?l.jsx(e6,{className:"w-5 h-5 mr-2"}):null,s?"Evaluando...":"Entregar Actividad"]})})]})},xOe=({currentUser:e})=>{var F,M,D;const[t,r]=k.useState(!0),[n,a]=k.useState("list"),[s,i]=k.useState(!1),[o,c]=k.useState([]),[u,d]=k.useState([]),[f,h]=k.useState(null),[p,g]=k.useState(null),[v,b]=k.useState(null),[y,C]=k.useState("connecting");k.useEffect(()=>{console.log("🚀 Iniciando carga de datos para usuario:",e.nombreCompleto);let I=!1,U=!1,P=!1,X=!1;const H=()=>{(I||P)&&(U||X)&&(P&&X?(C("error"),b("Error al cargar datos. Verifica tu conexión e intenta nuevamente.")):C("connected"),r(!1),console.log("✅ Carga completada - Actividades:",I,"Respuestas:",U))},Y=cOe(e,z=>{console.log("📋 Actividades recibidas:",z.length),z.forEach((G,re)=>{console.log(`  ${re+1}. ${G.asignatura} (ID: ${G.id})`),vo(G,`actividad-${re}`)}),c(z),I=!0,H()},z=>{console.error("❌ Error en suscripción de actividades:",z),P=!0,H()}),V=uOe(e.id,z=>{console.log("📝 Respuestas del estudiante recibidas:",z.length),z.forEach((G,re)=>{var R;console.log(`  ${re+1}. Actividad ${G.actividadId} - Nota: ${G.nota} - Fecha: ${G.fechaCompletado}`),(R=G.revisionDocente)!=null&&R.completada&&console.log("    ✅ Con revisión docente completada"),vo(G,`respuesta-${re}`)}),d(z),U=!0,H()},z=>{var G;console.error("❌ Error en suscripción de respuestas:",z),(G=z.message)!=null&&G.includes("requires an index")&&(console.log("⚠️ Detectado error de índice, intentando consulta alternativa..."),b("Se detectó un problema de configuración. Las actividades completadas pueden no mostrarse correctamente hasta que se resuelva.")),X=!0,H()});return()=>{console.log("🧹 Limpiando subscripciones"),Y==null||Y(),V==null||V()}},[e]),k.useEffect(()=>{t||console.log("🔄 ESTADO ACTUALIZADO:",{actividades:o.length,respuestas:u.length,vista:n,conexion:y})},[o.length,u.length,n,y,t]);const N=I=>{console.log("🔍 Iniciando actividad:",I.asignatura),h(I),a("activity"),b(null)},T=I=>{console.log("🔍 Viendo resultado:",I.actividadId);const U=o.find(P=>P.id===I.actividadId);U?(h(U),g(I),a("result"),b(null)):b("No se pudieron cargar los detalles de esta actividad completada.")},S=k.useCallback(async(I,U)=>{if(!f)return;console.log("🚀 COMPLETANDO ACTIVIDAD:",{actividadId:f.id,estudianteId:e.id,puntaje:I.puntaje,nota:I.nota}),a("result"),i(!0),b(null);const P={actividadId:f.id,estudianteId:e.id,fechaCompletado:new Date().toISOString(),...I,retroalimentacionDetallada:U};console.log("💾 Guardando respuesta...");try{const X=await pOe(P,f,U);console.log("✅ Respuesta completada con ID:",X.id),g(X),setTimeout(()=>{console.log("🔄 Datos sincronizados")},1500)}catch(X){console.error("❌ Error crítico al completar actividad:",X),b("Ocurrió un error al guardar tu actividad. Por favor, intenta nuevamente. Si el problema persiste, contacta a tu profesor."),g({id:"error-temp",...P,retroalimentacionAI:{logros:"Tu actividad fue completada pero hubo un problema técnico al generar el resumen.",desafios:[],comentariosDesarrollo:[]}})}finally{i(!1)}},[f,e.id]),B=k.useMemo(()=>{if(u.length===0)return new Set;const I=new Set(u.map(U=>U.actividadId));return console.log("🎯 IDs completados calculados:",I.size),I},[u]),w=k.useMemo(()=>{if(o.length===0)return[];const I=o.filter(U=>!B.has(U.id));return console.log("⏳ Actividades pendientes:",I.length),I},[o,B]),_=k.useMemo(()=>{if(u.length===0)return[];const I=u.map(U=>{const P=o.find(X=>X.id===U.actividadId);return{...U,asignatura:(P==null?void 0:P.asignatura)||"Actividad no disponible",tipos:(P==null?void 0:P.tipos)||[]}}).sort((U,P)=>new Date(P.fechaCompletado).getTime()-new Date(U.fechaCompletado).getTime());return console.log("📖 Historial preparado:",I.length),I},[u,o]);return t?l.jsxs("div",{className:"flex flex-col justify-center items-center h-64 space-y-4",children:[l.jsx(e6,{className:"w-8 h-8 text-slate-500"}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-slate-500",children:"Cargando actividades..."}),l.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:["Estado: ",y==="connecting"?"Conectando...":y==="connected"?"Conectado":"Error de conexión"]})]})]}):y==="error"&&o.length===0&&u.length===0?l.jsxs("div",{className:"text-center py-12 border-2 border-red-200 rounded-lg bg-red-50",children:[l.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),l.jsx("h3",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error de Conexión"}),l.jsx("p",{className:"text-red-600 mb-4",children:"No se pudieron cargar las actividades."}),l.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700",children:"Reintentar"})]}):n==="activity"&&f?l.jsx(vOe,{actividad:f,onComplete:S,currentUser:e}):n==="result"&&p?(console.log("🔍 Renderizando resultado:",p),l.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-lg animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Resultados de la Actividad"}),l.jsxs("div",{className:"flex items-baseline gap-4 mb-6 p-4 bg-slate-50 rounded-lg border",children:[l.jsxs("p",{className:"text-lg text-slate-600",children:["Puntaje: ",l.jsxs("span",{className:"font-bold text-2xl text-slate-800",children:[p.puntaje," / ",p.puntajeMaximo]})]}),l.jsxs("p",{className:"text-lg text-slate-600",children:["Nota: ",l.jsx("span",{className:`font-bold text-2xl ${parseFloat(p.nota)>=4?"text-green-600":"text-red-600"}`,children:p.nota})]})]}),v&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:l.jsxs("p",{className:"text-red-700 font-medium",children:["⚠️ ",v]})}),s&&l.jsxs("div",{className:"flex flex-col items-center justify-center p-6 bg-blue-50 border border-blue-200 rounded-lg text-center mb-6",children:[l.jsx(e6,{className:"w-8 h-8 text-blue-500"}),l.jsx("p",{className:"mt-3 font-semibold text-blue-700",children:"Generando resumen personalizado..."}),l.jsx("p",{className:"mt-1 text-sm text-blue-600",children:"Esto puede tomar unos segundos"})]}),p.retroalimentacionAI&&!s&&l.jsxs("div",{className:"p-6 bg-blue-50 border border-blue-200 rounded-lg space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:"Resumen de tu Desempeño 💡"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-green-700",children:"✅ Principales Logros"}),l.jsx("p",{className:"text-slate-700 mt-1",children:l.jsx(ui,{content:p.retroalimentacionAI.logros,context:"feedback-logros"})})]}),((F=p.retroalimentacionAI.desafios)==null?void 0:F.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-amber-700",children:"🎯 Áreas de Mejora"}),l.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.desafios.map((I,U)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(ui,{content:I.pregunta,context:`feedback-desafio-pregunta-${U}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(ui,{content:I.explicacionDelError,context:`feedback-desafio-explicacion-${U}`})})]},U))})]}),((D=(M=p.retroalimentacionAI)==null?void 0:M.comentariosDesarrollo)==null?void 0:D.length)>0&&l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-sky-700",children:"📝 Retroalimentación de Desarrollo"}),l.jsx("div",{className:"space-y-3 mt-2",children:p.retroalimentacionAI.comentariosDesarrollo.map((I,U)=>l.jsxs("div",{className:"p-3 bg-white border rounded-md",children:[l.jsx("p",{className:"font-semibold text-slate-800",children:l.jsx(ui,{content:I.pregunta,context:`feedback-desarrollo-pregunta-${U}`})}),l.jsx("p",{className:"mt-2 text-sm text-slate-600 bg-slate-50 p-2 rounded",children:l.jsx(ui,{content:I.retroalimentacionBreve,context:`feedback-desarrollo-retro-${U}`})})]},U))})]})]}),p.retroalimentacionDetallada&&l.jsxs("div",{className:"space-y-4 mb-6",children:[l.jsx("h2",{className:"text-2xl font-semibold text-slate-700",children:"Revisión Detallada"}),p.retroalimentacionDetallada.items.map((I,U)=>{const P=I.esCorrecta===null,X=P?"border-slate-400 bg-slate-50":I.esCorrecta?"border-green-500 bg-green-50":"border-red-500 bg-red-50",H=P?"🕓":I.esCorrecta?"✅":"❌";return l.jsxs("div",{className:`p-4 border-l-4 rounded-r-lg ${X}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("p",{className:"font-semibold text-slate-800 flex-1 pr-4",children:[U+1,". ",l.jsx(ui,{content:I.pregunta,context:`feedback-item-pregunta-${U}`})]}),l.jsx("span",{className:"font-bold text-lg",children:H})]}),l.jsxs("div",{className:"mt-2 text-sm pl-4",children:[l.jsxs("p",{className:"text-slate-700",children:["Tu respuesta: ",l.jsx("span",{className:"font-medium",children:l.jsx(ui,{content:I.respuestaUsuario,context:`feedback-item-respuesta-${U}`})})]}),!P&&!I.esCorrecta&&l.jsxs("p",{className:"text-slate-700",children:["Respuesta correcta: ",l.jsx("span",{className:"font-medium text-green-700",children:l.jsx(ui,{content:I.respuestaCorrecta,context:`feedback-item-correcta-${U}`})})]}),P&&l.jsx("p",{className:"text-slate-600 italic",children:"Pendiente de revisión docente."})]})]},U)})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>{a("list"),h(null),g(null),b(null)},className:"flex-1 bg-slate-800 text-white font-bold py-3 rounded-lg hover:bg-slate-700 transition-colors",children:"Volver a Actividades"}),f&&l.jsx("button",{onClick:()=>{a("activity"),g(null),b(null)},className:"flex-1 bg-amber-600 text-white font-bold py-3 rounded-lg hover:bg-amber-700 transition-colors",children:"Repetir Actividad"})]})]})):l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md space-y-10",children:[v&&l.jsx("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:l.jsxs("p",{className:"text-amber-800",children:["⚠️ ",v]})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Actividades Pendientes"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades asignadas por tus profesores."}),l.jsx("div",{className:"space-y-4",children:w.length>0?w.map(I=>l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 flex flex-col sm:flex-row justify-between sm:items-center gap-4 hover:bg-slate-100 transition-colors",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(ui,{content:I.asignatura,context:`actividad-asignatura-${I.id}`})," - ",I.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",l.jsx(ui,{content:typeof I.plazoEntrega=="string"?I.plazoEntrega:"",context:`actividad-plazo-${I.id}`})]})]}),l.jsx("button",{onClick:()=>N(I),className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 w-full sm:w-auto transition-colors",children:"Comenzar"})]},I.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"No tienes actividades pendientes."})]})})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Historial de Actividades"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Revisa tus resultados y la retroalimentación de las actividades completadas."}),l.jsx("div",{className:"space-y-4",children:_.length>0?_.map(I=>l.jsxs("div",{className:"p-4 border rounded-lg bg-white flex flex-col sm:flex-row justify-between sm:items-center gap-4 shadow-sm hover:shadow-md transition-shadow",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800",children:[l.jsx(ui,{content:I.asignatura,context:`completada-asignatura-${I.id}`})," - ",I.tipos.join(", ")]}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Completado: ",new Date(I.fechaCompletado).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("p",{className:"text-sm font-semibold",children:["Nota: ",l.jsx("span",{className:`font-bold text-lg ${parseFloat(I.nota)>=4?"text-green-600":"text-red-600"}`,children:I.nota})]}),l.jsx("button",{onClick:()=>T(I),className:"bg-sky-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-sky-700 w-full sm:w-auto transition-colors",children:"Ver Resultados"})]})]},I.id)):l.jsxs("div",{className:"text-center py-12 border-2 border-dashed rounded-lg",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("h3",{className:"text-xl font-semibold text-slate-700",children:"Aún no hay historial"}),l.jsx("p",{className:"text-slate-500 mt-1",children:"Tus actividades completadas aparecerán aquí."})]})})]})]})},S4="estudiantes_inclusion",bOe="usuarios",Ane=e=>{const t=e.data();return{id:e.id,...t}},yOe=e=>{const t=tr(It(bt,S4));return gr(t,n=>{const a=n.docs.map(s=>Ane(s));e(a)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),e([])})},wOe=e=>{const t=tr(It(bt,bOe));return gr(t,n=>{const a=n.docs.map(s=>Ane(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},EOe=async e=>{try{return(await Un(It(bt,S4),e)).id}catch(t){throw console.error("Error al agregar estudiante a inclusión:",t),new Error("No se pudo agregar al estudiante.")}},COe=async(e,t)=>{try{const{id:r,...n}=t,a=pr(bt,S4,e);await Ji(a,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},_Oe=async e=>{try{const t=pr(bt,S4,e);await ts(t)}catch(t){throw console.error("Error al eliminar estudiante de inclusión:",t),new Error("No se pudo eliminar al estudiante.")}},SOe=({estudiantes:e})=>{const t=k.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.curso]=(c[u.curso]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({curso:c,cantidad:u})).sort((c,u)=>c.curso.localeCompare(u.curso))},[e]),r=k.useMemo(()=>{const o=e.reduce((c,u)=>{var f;const d=((f=u.curso.match(/\d+/))==null?void 0:f[0])||"Sin nivel";return c[d]=(c[d]||0)+1,c},{});return Object.entries(o).map(([c,u])=>({nivel:c,cantidad:u})).sort((c,u)=>c.nivel==="Sin nivel"?1:u.nivel==="Sin nivel"?-1:parseInt(c.nivel)-parseInt(u.nivel))},[e]),n=k.useMemo(()=>{const o=e.reduce((c,u)=>(c[u.dificultad]=(c[u.dificultad]||0)+1,c),{});return Object.entries(o).map(([c,u])=>({diagnostico:c,cantidad:u})).sort((c,u)=>u.cantidad-c.cantidad)},[e]),a=k.useMemo(()=>{const o=e.reduce((u,d)=>{var f;return u+(((f=d.intervenciones)==null?void 0:f.length)||0)},0),c=e.length>0?(o/e.length).toFixed(1):"0";return{total:o,promedio:c}},[e]),s=k.useMemo(()=>e.reduce((o,c)=>o+(c.alertas||[]).filter(u=>!u.resuelta).length,0),[e]),i=Math.max(0,...t.map(o=>o.cantidad),...r.map(o=>o.cantidad),...n.map(o=>o.cantidad));return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Dashboard PIE"}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.length}),l.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Total Estudiantes"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:a.total}),l.jsx("div",{className:"text-sm text-green-800 dark:text-green-300",children:"Intervenciones"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:s}),l.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-300",children:"Alertas Pendientes"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:[l.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:a.promedio}),l.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Promedio Intervenciones"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Curso"}),l.jsx("div",{className:"space-y-2",children:t.map(({curso:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-blue-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Nivel"}),l.jsx("div",{className:"space-y-2",children:r.map(({nivel:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-12",children:[o,"°"]}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-green-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-slate-800 dark:text-slate-200 mb-3",children:"Por Diagnóstico"}),l.jsx("div",{className:"space-y-2",children:n.map(({diagnostico:o,cantidad:c})=>l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300 w-16 text-right truncate",title:o,children:o}),l.jsx("div",{className:"flex-1 bg-slate-200 dark:bg-slate-700 rounded-full h-4 overflow-hidden",children:l.jsx("div",{className:"bg-purple-500 h-full transition-all duration-500",style:{width:`${i?c/i*100:0}%`}})}),l.jsx("div",{className:"text-sm font-semibold text-slate-800 dark:text-slate-200 w-6",children:c})]},o))})]})]})]})},DV=({estudiantesDisponibles:e,onSelect:t})=>{const[r,n]=k.useState(""),[a,s]=k.useState(""),[i,o]=k.useState(!1),c=k.useMemo(()=>e.filter(f=>{const h=f.nombreCompleto.toLowerCase().includes(r.toLowerCase()),p=a===""||f.curso===a;return h&&p}).sort((f,h)=>f.nombreCompleto.localeCompare(h.nombreCompleto)),[e,r,a]),u=k.useMemo(()=>[...new Set(e.map(h=>h.curso).filter(Boolean))].sort(),[e]),d=f=>{t(f),n(""),s(""),o(!1)};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante al PIE"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Buscar por nombre"}),l.jsx("input",{type:"text",placeholder:"Escriba el nombre del estudiante...",value:r,onChange:f=>{n(f.target.value),o(f.target.value.length>0||a!=="")},onFocus:()=>o(r.length>0||a!==""),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Filtrar por curso"}),l.jsxs("select",{value:a,onChange:f=>{s(f.target.value),o(r.length>0||f.target.value!=="")},className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los cursos"}),u.map(f=>l.jsx("option",{value:f,children:f},f))]})]})]}),l.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:["Estudiantes disponibles: ",e.length]}),l.jsxs("span",{children:["Resultados filtrados: ",c.length]})]}),l.jsx("button",{onClick:()=>o(!i),className:"w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 py-2 px-4 rounded-lg hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:i?"Ocultar resultados":`Ver ${c.length} estudiantes disponibles`}),i&&l.jsx("div",{className:"border dark:border-slate-600 rounded-lg max-h-80 overflow-y-auto",children:c.length===0?l.jsx("div",{className:"p-4 text-center text-slate-500 dark:text-slate-400",children:r||a?"No se encontraron estudiantes con los criterios de búsqueda.":"No hay estudiantes disponibles."}):l.jsx("div",{className:"divide-y dark:divide-slate-600",children:c.map(f=>l.jsx("div",{className:"p-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors",onClick:()=>d(f),children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:f.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:f.curso})]}),l.jsx("button",{className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 text-xl",children:"➕"})]})},f.id))})}),r&&c.length===1&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[l.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-2",children:"💡 ¡Solo hay un resultado! Haga clic para agregarlo directamente:"}),l.jsxs("button",{onClick:()=>d(c[0]),className:"text-sm bg-blue-500 text-white px-3 py-1.5 rounded-md hover:bg-blue-600 transition-colors",children:["Agregar a ",c[0].nombreCompleto]})]})]})]})},NOe=({student:e,onClose:t,onConfirm:r})=>{const[n,a]=k.useState(PS[0]),s=()=>r(e,n);return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",e.nombreCompleto," al PIE"]}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),l.jsx("select",{id:"dificultad",value:n,onChange:i=>a(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:PS.map(i=>l.jsx("option",{value:i,children:i},i))})]}),l.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:t,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:s,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Confirmar e Ingresar"})]})]})})},kOe=({student:e,onClose:t,onSave:r,profesores:n,getDocenteEmail:a})=>{const[s,i]=k.useState("intervenciones"),[o,c]=k.useState(e);k.useEffect(()=>c(e),[e]);const[u,d]=k.useState(null),f={responsable:"",accion:"",observaciones:""},[h,p]=k.useState(f),[g,v]=k.useState({trimestre:"T1",meta:""}),[b,y]=k.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[C,N]=k.useState(null),[T,S]=k.useState(!1),B={motivo:"",acuerdos:"",asistentes:""},[w,_]=k.useState(B),F=()=>{r(o),t()},M=async()=>{var _e;if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let ne,Se=!1;u?ne=(o.intervenciones||[]).map(he=>he.id===u.id?{...he,...h}:he):(Se=!0,ne=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...o.intervenciones||[]]);const De=ne.sort((he,je)=>new Date(je.fecha).getTime()-new Date(he.fecha).getTime());if(c(he=>({...he,intervenciones:De})),Se)try{await swe({docenteNombre:h.responsable,docenteEmail:a?a(h.responsable):void 0,docenteEmailLower:(_e=a?a(h.responsable):void 0)==null?void 0:_e.toLowerCase(),tipo:"nueva_intervencion",titulo:"📋 Nueva Intervención Asignada",mensaje:`Se te ha asignado una nueva intervención para el estudiante ${o.nombre}. Acción: ${h.accion}`,estudianteNombre:o.nombre,estudianteId:o.id,accionRequerida:h.accion}),alert(`✅ Intervención registrada y notificación enviada a ${h.responsable}`)}catch(he){console.error("Error al crear notificación:",he),alert("⚠️ Intervención guardada, pero no se pudo enviar la notificación al docente.")}p(f),d(null)},D=ne=>{d(ne),p({responsable:ne.responsable,accion:ne.accion,observaciones:ne.observaciones})},I=ne=>{window.confirm("¿Eliminar esta intervención?")&&c(Se=>({...Se,intervenciones:(Se.intervenciones||[]).filter(De=>De.id!==ne)}))},U=ne=>{const{name:Se,value:De}=ne.target;c(_e=>({..._e,[Se]:De,fechaActualizacionApoyos:new Date().toISOString()}))},P=()=>{if(!g.meta.trim())return;const ne={...g,id:crypto.randomUUID(),cumplida:!1};c(Se=>({...Se,metasProgreso:[...Se.metasProgreso||[],ne]})),v({trimestre:"T1",meta:""})},X=ne=>{c(Se=>({...Se,metasProgreso:(Se.metasProgreso||[]).map(De=>De.id===ne?{...De,cumplida:!De.cumplida}:De)}))},H=ne=>{c(Se=>({...Se,metasProgreso:(Se.metasProgreso||[]).filter(De=>De.id!==ne)}))},Y=k.useMemo(()=>{const ne=o.metasProgreso||[];if(ne.length===0)return{percent:0,color:"bg-slate-300"};const Se=ne.filter(he=>he.cumplida).length,De=Math.round(Se/ne.length*100),_e=De<40?"bg-red-500":De<75?"bg-yellow-500":"bg-green-500";return{percent:De,color:_e}},[o.metasProgreso]),V=k.useMemo(()=>{if(!o.fechaActualizacionApoyos)return!0;const ne=new Date(o.fechaActualizacionApoyos),Se=new Date;return Se.setMonth(Se.getMonth()-3),ne<Se},[o.fechaActualizacionApoyos]),z=()=>{if(!b.titulo.trim()||!b.fecha)return;const ne={...b,id:crypto.randomUUID(),resuelta:!1};c(Se=>({...Se,alertas:[...Se.alertas||[],ne].sort((De,_e)=>new Date(De.fecha).getTime()-new Date(_e.fecha).getTime())})),y({titulo:"",fecha:new Date().toISOString()})},G=ne=>{c(Se=>({...Se,alertas:(Se.alertas||[]).map(De=>De.id===ne?{...De,resuelta:!De.resuelta}:De)}))},re=ne=>{c(Se=>({...Se,alertas:(Se.alertas||[]).filter(De=>De.id!==ne)}))},R=ne=>{ne.target.files&&ne.target.files[0]&&N(ne.target.files[0])},q=()=>{if(!C)return;S(!0);const ne=new FileReader;ne.readAsDataURL(C),ne.onloadend=()=>{const Se={id:crypto.randomUUID(),nombre:C.name,url:ne.result,fechaSubida:new Date().toISOString()};c(De=>({...De,archivos:[Se,...De.archivos||[]]})),N(null),S(!1)},ne.onerror=()=>{alert("Error al leer el archivo."),S(!1)}},J=ne=>{window.confirm("¿Eliminar este archivo?")&&c(Se=>({...Se,archivos:(Se.archivos||[]).filter(De=>De.id!==ne)}))},te=()=>{if(!w.motivo.trim()||!w.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const ne={...w,id:crypto.randomUUID(),fecha:new Date().toISOString()};c(Se=>({...Se,reuniones:[ne,...Se.reuniones||[]].sort((De,_e)=>new Date(_e.fecha).getTime()-new Date(De.fecha).getTime())})),_(B)},ie=ne=>{window.confirm("¿Eliminar este registro de reunión?")&&c(Se=>({...Se,reuniones:(Se.reuniones||[]).filter(De=>De.id!==ne)}))},Ae=()=>{var ye,Oe,Re;const ne=new xr("p","mm","a4"),Se=20,De=ne.internal.pageSize.getWidth(),_e=ne.internal.pageSize.getHeight();let he=Se;const je=qe=>{qe.setFontSize(10),qe.setTextColor(100),qe.text("Ficha de Seguimiento - Módulo Inclusión",Se,15)};je(ne),ne.setFontSize(18),ne.setFont("helvetica","bold"),ne.setTextColor(40),ne.text(o.nombre,Se,he+10),he+=15,ne.setFontSize(11),ne.setFont("helvetica","normal"),ne.setTextColor(80),ne.text(`Curso: ${o.curso}`,Se,he),ne.text(`Dificultad: ${o.dificultad}`,Se,he+6),he+=15;const He=qe=>{he+qe>_e-Se&&(ne.addPage(),je(ne),he=Se)},Xe=qe=>{He(15),ne.setFontSize(14),ne.setFont("helvetica","bold"),ne.text(qe,Se,he),he+=10};if((ye=o.intervenciones)!=null&&ye.length&&(Xe("Historial de Intervenciones"),xl(ne,{startY:he,head:[["Fecha","Responsable","Acción","Observaciones"]],body:o.intervenciones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.responsable,qe.accion,qe.observaciones||""]),theme:"grid",didDrawPage:()=>je(ne)}),he=ne.lastAutoTable.finalY+10),o.adaptacionesCurriculares||o.apoyosRecibidos){He(30),Xe("Seguimiento y Apoyos"),ne.setFontSize(11),ne.setFont("helvetica","normal");const qe=`Adaptaciones: ${o.adaptacionesCurriculares||"No registradas."}
Apoyos: ${o.apoyosRecibidos||"No registrados."}`,Ze=ne.splitTextToSize(qe,De-Se*2);ne.text(Ze,Se,he),he+=Ze.length*5+10}(Oe=o.metasProgreso)!=null&&Oe.length&&(He(30),Xe("Metas de Progreso"),xl(ne,{startY:he,head:[["Trimestre","Meta","Estado"]],body:o.metasProgreso.map(qe=>[qe.trimestre,qe.meta,qe.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:()=>je(ne)}),he=ne.lastAutoTable.finalY+10),(Re=o.reuniones)!=null&&Re.length&&(Xe("Reuniones con Apoderados"),xl(ne,{startY:he,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:o.reuniones.map(qe=>[new Date(qe.fecha).toLocaleDateString("es-CL"),qe.motivo,qe.acuerdos||"",qe.asistentes]),theme:"grid",didDrawPage:()=>je(ne)})),ne.save(`Ficha_Inclusion_${o.nombre.replace(/\s/g,"_")}.pdf`)},oe=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:u?"Editando Intervención":"Registrar Nueva Intervención"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Responsable ",!u&&"(Se enviará notificación automática)"]}),l.jsxs("select",{value:h.responsable,onChange:ne=>p(Se=>({...Se,responsable:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(ne=>l.jsx("option",{value:ne,children:ne},ne))]}),h.responsable&&!u&&l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-sm text-blue-800 dark:text-blue-200",children:["🔔 Se enviará una notificación a ",h.responsable," cuando se guarde la intervención"]})]}),l.jsx("textarea",{value:h.accion,onChange:ne=>p(Se=>({...Se,accion:ne.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:h.observaciones,onChange:ne=>p(Se=>({...Se,observaciones:ne.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"flex justify-end gap-2",children:[u&&l.jsx("button",{onClick:()=>{d(null),p(f)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar Edición"}),l.jsx("button",{onClick:M,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!h.responsable||!h.accion,children:u?"Actualizar":"Guardar y Notificar"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.intervenciones||[]).map(ne=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.accion}),ne.observaciones&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:ne.observaciones}),l.jsxs("div",{className:"flex items-center justify-between mt-2",children:[l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[new Date(ne.fecha).toLocaleString("es-CL")," - ",ne.responsable]}),l.jsx("span",{className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-300 px-2 py-1 rounded-full",children:"✓ Notificado"})]})]}),l.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[l.jsx("button",{onClick:()=>D(ne),className:"text-blue-500 hover:text-blue-700 p-1 rounded transition-colors",title:"Editar intervención",children:"✏️"}),l.jsx("button",{onClick:()=>I(ne.id),className:"text-red-500 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar intervención",children:"🗑️"})]})]})},ne.id)),(!o.intervenciones||o.intervenciones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:"📋"}),l.jsx("p",{children:"No hay intervenciones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera intervención arriba"})]})]})]}),ce=()=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),V&&l.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl cursor-help",children:"⚠️"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),l.jsx("textarea",{name:"adaptacionesCurriculares",value:o.adaptacionesCurriculares||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe las adaptaciones curriculares implementadas..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),l.jsx("textarea",{name:"apoyosRecibidos",value:o.apoyosRecibidos||"",onChange:U,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Describe los apoyos que recibe el estudiante..."})]})]}),l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",Y.percent,"%"]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:l.jsx("div",{className:`${Y.color} h-4 rounded-full transition-all duration-500`,style:{width:`${Y.percent}%`}})})]}),l.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[l.jsxs("select",{value:g.trimestre,onChange:ne=>v(Se=>({...Se,trimestre:ne.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"T1",children:"T1"}),l.jsx("option",{value:"T2",children:"T2"}),l.jsx("option",{value:"T3",children:"T3"})]}),l.jsx("input",{value:g.meta,onChange:ne=>v(Se=>({...Se,meta:ne.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:P,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",disabled:!g.meta.trim(),children:"Agregar"})]}),l.jsxs("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:[(o.metasProgreso||[]).map(ne=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[l.jsx("input",{type:"checkbox",checked:ne.cumplida,onChange:()=>X(ne.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ne.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[l.jsxs("strong",{children:[ne.trimestre,":"]})," ",ne.meta]}),l.jsx("button",{onClick:()=>H(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar meta",children:"🗑️"})]},ne.id)),(!o.metasProgreso||o.metasProgreso.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"🎯"}),l.jsx("p",{children:"No hay metas definidas"}),l.jsx("p",{className:"text-sm",children:"Agrega la primera meta trimestral"})]})]})]})]}),pe=()=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),l.jsx("input",{type:"text",value:b.titulo,onChange:ne=>y(Se=>({...Se,titulo:ne.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("input",{type:"date",value:new Date(b.fecha).toISOString().slice(0,10),onChange:ne=>y(Se=>({...Se,fecha:ne.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),l.jsx("button",{onClick:z,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md hover:bg-amber-600 transition-colors",disabled:!b.titulo.trim()||!b.fecha,children:"Agendar"})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.alertas||[]).map(ne=>l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsx("input",{type:"checkbox",checked:ne.resuelta,onChange:()=>G(ne.id),className:"h-5 w-5 rounded text-amber-500"}),l.jsxs("span",{className:`flex-grow text-sm ${ne.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[ne.titulo," (",new Date(ne.fecha+"T12:00:00").toLocaleDateString("es-CL"),")"]}),l.jsx("button",{onClick:()=>re(ne.id),className:"text-red-500 text-sm hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar alerta",children:"🗑️"})]},ne.id)),(!o.alertas||o.alertas.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"🔔"}),l.jsx("p",{children:"No hay alertas programadas"})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),l.jsx("input",{type:"file",onChange:R,className:"w-full text-sm",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt"}),l.jsx("button",{onClick:q,disabled:!C||T,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400 hover:bg-blue-600 transition-colors",children:T?"Subiendo...":"Subir"}),C&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:["Archivo seleccionado: ",C.name]})]}),l.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[(o.archivos||[]).map(ne=>l.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[l.jsxs("a",{href:ne.url,download:ne.nombre,className:"text-sm text-blue-600 hover:underline truncate flex-grow",title:ne.nombre,children:["📎 ",ne.nombre]}),l.jsx("button",{onClick:()=>J(ne.id),className:"text-red-500 text-sm ml-2 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar archivo",children:"🗑️"})]},ne.id)),(!o.archivos||o.archivos.length===0)&&l.jsxs("div",{className:"text-center py-6 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-3xl mb-2",children:"📁"}),l.jsx("p",{children:"No hay archivos adjuntos"})]})]})]})]}),Ie=()=>l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[l.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),l.jsx("input",{value:w.motivo,onChange:ne=>_(Se=>({...Se,motivo:ne.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("textarea",{value:w.acuerdos,onChange:ne=>_(Se=>({...Se,acuerdos:ne.target.value})),placeholder:"Acuerdos tomados en la reunión...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{value:w.asistentes,onChange:ne=>_(Se=>({...Se,asistentes:ne.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("div",{className:"text-right",children:l.jsx("button",{onClick:te,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md hover:bg-amber-600 transition-colors",disabled:!w.motivo.trim()||!w.asistentes.trim(),children:"Guardar Reunión"})})]}),l.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[(o.reuniones||[]).map(ne=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:ne.motivo}),ne.acuerdos&&l.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:[l.jsx("strong",{children:"Acuerdos:"})," ",ne.acuerdos]}),l.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(ne.fecha).toLocaleString("es-CL")," - Asistentes: ",ne.asistentes]})]}),l.jsx("button",{onClick:()=>ie(ne.id),className:"text-red-500 flex-shrink-0 ml-4 hover:text-red-700 p-1 rounded transition-colors",title:"Eliminar reunión",children:"🗑️"})]})},ne.id)),(!o.reuniones||o.reuniones.length===0)&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-4xl mb-2",children:"👥"}),l.jsx("p",{children:"No hay reuniones registradas"}),l.jsx("p",{className:"text-sm",children:"Registra la primera reunión con apoderados"})]})]})]});return l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:ne=>ne.stopPropagation(),children:[l.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",e.nombre]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.curso," - ",e.dificultad]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:Ae,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200 transition-colors",children:"📄 Exportar PDF"}),l.jsx("button",{onClick:t,className:"text-2xl text-slate-500 hover:text-slate-800 dark:hover:text-slate-200 transition-colors",children:"×"})]})]}),l.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:l.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(ne=>l.jsx("button",{onClick:()=>i(ne),className:`${s===ne?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize transition-colors`,children:ne==="alertas"?"Alertas y Archivos":ne==="seguimiento"?"Seguimiento y Metas":ne},ne))})}),l.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&oe(),s==="seguimiento"&&ce(),s==="reuniones"&&Ie(),s==="alertas"&&pe()]}),l.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[l.jsx("button",{onClick:t,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors",children:"Cerrar"}),l.jsx("button",{onClick:F,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 transition-colors",children:"Guardar Cambios y Cerrar"})]})]})})},PV=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState([]),[s,i]=k.useState(!0),[o,c]=k.useState(null),[u,d]=k.useState(null),[f,h]=k.useState(""),[p,g]=k.useState(""),[v,b]=k.useState(""),[y,C]=k.useState("dashboard");k.useEffect(()=>{i(!0);const M=yOe(I=>{r(I),i(!1)}),D=wOe(I=>a(I));return()=>{M(),D()}},[]);const N=async(M,D)=>{if(t.some(U=>U.nombre===M.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const I={nombre:M.nombreCompleto,curso:M.curso||"",dificultad:D,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await EOe(I),alert(`✅ ${M.nombreCompleto} ha sido agregado exitosamente al programa PIE`)}catch(U){console.error("Error al agregar estudiante:",U),alert("Hubo un error al agregar al estudiante al programa.")}},T=async M=>{try{await COe(M.id,M)}catch(D){console.error("Error al actualizar la ficha:",D),alert("Hubo un error al guardar los cambios en la ficha.")}},S=async M=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await _Oe(M),(o==null?void 0:o.id)===M&&c(null),alert("✅ Estudiante eliminado del programa PIE")}catch(D){console.error("Error al eliminar estudiante:",D),alert("Hubo un error al eliminar al estudiante.")}},B=M=>{const D=_;if(D.length===0){alert("No hay datos para exportar.");return}const I=D.map(U=>{var P;return{Nombre:U.nombre,Curso:U.curso,Dificultad:U.dificultad,"N° Intervenciones":((P=U.intervenciones)==null?void 0:P.length)||0,"Alertas Pendientes":(U.alertas||[]).filter(X=>!X.resuelta).length,"Metas Cumplidas":(U.metasProgreso||[]).filter(X=>X.cumplida).length,"Total Metas":(U.metasProgreso||[]).length,"Última Actualización":U.fechaActualizacionApoyos?new Date(U.fechaActualizacionApoyos).toLocaleDateString("es-CL"):"No registrada"}});if(M==="xlsx"){const U=ku.json_to_sheet(I),P=ku.book_new();ku.book_append_sheet(P,U,"Estudiantes_Inclusion"),nR(P,"Estudiantes_Inclusion.xlsx"),alert("✅ Archivo Excel exportado exitosamente")}else{const U=new xr;U.text("Listado de Estudiantes - Programa de Inclusión",14,15),xl(U,{startY:20,head:[Object.keys(I[0])],body:I.map(Object.values)}),U.save("Estudiantes_Inclusion.pdf"),alert("✅ Archivo PDF exportado exitosamente")}},w=k.useMemo(()=>n.filter(M=>{var D;return M.profile===Yt.ESTUDIANTE&&(((D=e.cursos)==null?void 0:D.includes(M.curso||""))||e.profile===Yt.SUBDIRECCION)}).filter(M=>!t.some(D=>D.nombre===M.nombreCompleto)),[n,t,e]),_=k.useMemo(()=>t.filter(M=>M.nombre.toLowerCase().includes(f.toLowerCase())&&(p===""||M.curso===p)&&(v===""||M.dificultad===v)).sort((M,D)=>M.nombre.localeCompare(D.nombre)),[t,f,p,v]),F=k.useMemo(()=>n.filter(M=>M.profile===Yt.PROFESORADO).map(M=>M.nombreCompleto).sort(),[n]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),l.jsxs("div",{className:"flex gap-2 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:[l.jsx("button",{onClick:()=>C("dashboard"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="dashboard"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📊 Dashboard"}),l.jsx("button",{onClick:()=>C("lista"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${y==="lista"?"bg-white dark:bg-slate-600 text-slate-800 dark:text-slate-200 shadow-sm":"text-slate-600 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200"}`,children:"📋 Lista de Estudiantes"})]})]}),s?l.jsxs("div",{className:"text-center py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-500"}),l.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Cargando datos del programa..."})]}):l.jsxs(l.Fragment,{children:[y==="dashboard"&&l.jsxs("div",{className:"space-y-8",children:[l.jsx(SOe,{estudiantes:t}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes Recientes (",Math.min(5,t.length),")"]}),l.jsx("button",{onClick:()=>C("lista"),className:"text-sm text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Ver todos →"})]}),l.jsxs("div",{className:"space-y-3",children:[t.slice(0,5).map(M=>l.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center hover:shadow-sm transition-shadow",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:M.nombre}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[M.curso," - ",M.dificultad]})]}),l.jsx("button",{onClick:()=>c(M),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm transition-colors",children:"Ver Ficha"})]},M.id)),t.length===0&&l.jsxs("div",{className:"text-center py-8 text-slate-500 dark:text-slate-400",children:[l.jsx("div",{className:"text-6xl mb-4",children:"📚"}),l.jsx("p",{className:"text-lg font-medium mb-2",children:"No hay estudiantes en el programa PIE"}),l.jsx("p",{className:"text-sm",children:"Comienza agregando estudiantes desde la nómina"})]})]})]}),l.jsx(DV,{estudiantesDisponibles:w,onSelect:M=>d(M)})]})]}),y==="lista"&&l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[l.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",_.length,")"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>B("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg hover:bg-green-200 transition-colors",children:"📊 Excel"}),l.jsx("button",{onClick:()=>B("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg hover:bg-red-200 transition-colors",children:"📄 PDF"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Buscar estudiante"}),l.jsx("input",{type:"text",placeholder:"Nombre del estudiante...",value:f,onChange:M=>h(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por curso"}),l.jsxs("select",{value:p,onChange:M=>g(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),ks.map(M=>l.jsx("option",{value:M,children:M},M))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por diagnóstico"}),l.jsxs("select",{value:v,onChange:M=>b(M.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas las Dificultades"}),PS.map(M=>l.jsx("option",{value:M,children:M},M))]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4 text-xs",children:[l.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-blue-600",children:_.length}),l.jsx("div",{className:"text-blue-800 dark:text-blue-300",children:"Mostrando"})]}),l.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-green-600",children:t.length}),l.jsx("div",{className:"text-green-800 dark:text-green-300",children:"Total"})]}),l.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-yellow-600",children:t.reduce((M,D)=>M+(D.alertas||[]).filter(I=>!I.resuelta).length,0)}),l.jsx("div",{className:"text-yellow-800 dark:text-yellow-300",children:"Alertas"})]}),l.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-2 rounded text-center",children:[l.jsx("div",{className:"font-bold text-purple-600",children:new Set(t.map(M=>M.curso)).size}),l.jsx("div",{className:"text-purple-800 dark:text-purple-300",children:"Cursos"})]})]}),l.jsxs("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:[_.map(M=>{var D;return l.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-grow",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:M.nombre}),(M.alertas||[]).filter(I=>!I.resuelta).length>0&&l.jsxs("span",{className:"bg-yellow-100 text-yellow-800 text-xs px-2 py-1 rounded-full",children:[(M.alertas||[]).filter(I=>!I.resuelta).length," alertas"]})]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-1",children:[M.curso," - ",M.dificultad]}),l.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-600 dark:text-slate-300",children:[l.jsxs("span",{children:[((D=M.intervenciones)==null?void 0:D.length)||0," intervenciones"]}),l.jsxs("span",{children:[(M.metasProgreso||[]).filter(I=>I.cumplida).length," metas cumplidas"]}),M.fechaActualizacionApoyos&&l.jsxs("span",{children:["Últ. actualización: ",new Date(M.fechaActualizacionApoyos).toLocaleDateString("es-CL")]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[l.jsx("button",{onClick:()=>c(M),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm px-3 py-1 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors",children:"Ver Ficha"}),l.jsx("button",{onClick:()=>S(M.id),title:"Eliminar del programa",className:"text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors",children:"🗑️"})]})]})},M.id)}),_.length===0&&l.jsxs("div",{className:"text-center py-12",children:[l.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),l.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400 mb-2",children:f||p||v?"No se encontraron estudiantes con esos criterios":"No hay estudiantes en el programa PIE"}),(f||p||v)&&l.jsx("button",{onClick:()=>{h(""),g(""),b("")},className:"text-blue-600 hover:text-blue-800 font-semibold transition-colors",children:"Limpiar filtros"})]})]})]}),l.jsx(DV,{estudiantesDisponibles:w,onSelect:M=>d(M)})]})]}),u&&l.jsx(NOe,{student:u,onClose:()=>d(null),onConfirm:(M,D)=>{N(M,D),d(null)}}),o&&l.jsx(kOe,{student:o,onClose:()=>c(null),onSave:T,profesores:F})]})},fne="asistencia_dual",BOe=e=>{var r,n;const t=e.data();return{id:e.id,...t,fechaHora:((n=(r=t.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaHora}},TOe=(e,t)=>{const r=tr(It(bt,fne),vn("emailEstudiante","==",e),Rr("fechaHora","desc"));return gr(r,a=>{const s=a.docs.map(i=>BOe(i));t(s)},a=>{console.error("Error subscribing to personal attendance:",a),t([])})},jOe=async e=>{try{const t={...e,fechaHora:mr.fromDate(new Date(e.fechaHora))};await Un(It(bt,fne),t)}catch(t){throw console.error("Error adding attendance record:",t),new Error("Could not save the attendance record.")}},IOe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),FOe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),OOe=({currentUser:e})=>{const[t,r]=k.useState(e.curso||""),[n,a]=k.useState([]),[s,i]=k.useState(!1),[o,c]=k.useState(!0),[u,d]=k.useState(null);k.useEffect(()=>{if(!e.email){c(!1);return}c(!0);const h=TOe(e.email,p=>{a(p),c(!1)});return()=>h()},[e.email]);const f=h=>{if(!t){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async p=>{const g={nombreEstudiante:e.nombreCompleto,emailEstudiante:e.email,curso:t,tipo:h,fechaHora:new Date().toISOString(),ubicacion:{latitud:p.coords.latitude,longitud:p.coords.longitude}};try{await jOe(g),d({text:`¡Marca de ${h} registrada con éxito!`,type:"success"})}catch(v){console.error("Error saving record to Firestore:",v),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},p=>{console.error("Geolocation error:",p);let g="No se pudo obtener la ubicación.";switch(p.code){case p.PERMISSION_DENIED:g="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case p.POSITION_UNAVAILABLE:g="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case p.TIMEOUT:g="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:g=`Ocurrió un error desconocido al obtener la ubicación (código: ${p.code}).`;break}d({text:g,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),l.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),l.jsxs("select",{id:"curso",value:t,onChange:h=>r(h.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"-- Mi curso --"}),Op.map(h=>l.jsx("option",{value:h,children:h},h))]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[l.jsx("button",{onClick:()=>f("Entrada"),disabled:s||!t,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),l.jsx("button",{onClick:()=>f("Salida"),disabled:s||!t,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),s&&l.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&l.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),l.jsx("div",{className:"overflow-x-auto max-h-96",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(h=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(h.fechaHora).toLocaleString("es-CL")}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:l.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${h.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[h.tipo==="Entrada"?l.jsx(IOe,{}):l.jsx(FOe,{}),h.tipo]})}),l.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:h.curso})]},h.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},DOe=async()=>{try{console.log("🔍 Debugging users collection...");const e=It(tn,"users"),t=tr(e,Nd(10)),r=await Pa(t),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},a=new Set;return r.forEach((s,i)=>{const o=s.data(),c={id:s.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(c),Object.keys(o).forEach(u=>a.add(u))}),n.fieldAnalysis={allFields:Array.from(a),commonFields:Array.from(a).filter(s=>n.sampleDocs.filter(o=>s in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(e){return console.error("Error debugging users collection:",e),{exists:!1,error:e instanceof Error?e.message:"Unknown error"}}},POe=async(e,t)=>{var c,u,d;const r=new Date(e,t,1),n=new Date(e,t+1,0,23,59,59,999),a=mr.fromDate(r),s=mr.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const f of i)try{const h=It(tn,f);try{const p=tr(h,vn("fechaHora",">=",a),vn("fechaHora","<=",s)),g=await Pa(p);o[f]={exists:!0,hasDateField:!0,count:g.size,sampleDoc:((c=g.docs[0])==null?void 0:c.data())||null}}catch{const g=["fecha","timestamp","createdAt"];let v=!1;for(const b of g)try{const y=tr(h,vn(b,">=",a),vn(b,"<=",s)),C=await Pa(y);o[f]={exists:!0,hasDateField:b,count:C.size,sampleDoc:((u=C.docs[0])==null?void 0:u.data())||null},v=!0;break}catch{continue}if(!v){const b=tr(h,Rr("__name__"),Nd(5)),y=await Pa(b);o[f]={exists:!0,hasDateField:!1,count:y.size,sampleDoc:((d=y.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(h){o[f]={exists:!1,error:h instanceof Error?h.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},ROe=(e,t,r,n)=>{try{const a=new Date(e,t,1);a.setHours(0,0,0,0);const s=new Date(e,t+1,0);s.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${a.toISOString()} y ${s.toISOString()}`),console.log(`📅 Mes actual: ${e}-${(t+1).toString().padStart(2,"0")}`);const i=mr.fromDate(a),o=mr.fromDate(s),c=[],u=new Map,d=()=>{const h=Array.from(u.values());console.log(`📊 Total registros encontrados: ${h.length}`),h.length>0&&console.log("📅 Registros por día:",h.reduce((p,g)=>{let v;g.fechaHora instanceof Date?v=g.fechaHora:typeof g.fechaHora=="string"?v=new Date(g.fechaHora):v=new Date;const b=v.getDate();return p[b]=(p[b]||0)+1,p},{})),r(h)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(h=>{try{console.log(`🔍 Configurando suscripción para: ${h}`);const p=It(tn,h),g=tr(p,vn("fechaHora",">=",i),vn("fechaHora","<=",o),Rr("fechaHora","desc")),v=gr(g,b=>{console.log(`📋 ${h}: ${b.size} documentos encontrados con filtro`),b.size>0?(console.log(`✅ Registros encontrados en ${h}:`),Array.from(u.keys()).filter(C=>C.startsWith(`${h}_`)).forEach(C=>u.delete(C)),b.docs.forEach((C,N)=>{var T;if(N<5){const S=C.data();let B;(T=S.fechaHora)!=null&&T.toDate?B=S.fechaHora.toDate():typeof S.fechaHora=="string"?B=new Date(S.fechaHora):B=new Date,console.log(`   ${N+1}. ${S.emailEstudiante} - ${B.toLocaleString()} - ${S.tipo}`),console.log(`      📅 Fecha original: ${S.fechaHora} (tipo: ${typeof S.fechaHora})`)}}),b.forEach(C=>{var w;const N=C.data();let T;(w=N.fechaHora)!=null&&w.toDate?T=N.fechaHora.toDate():typeof N.fechaHora=="string"?T=new Date(N.fechaHora):N.fechaHora instanceof Date?T=N.fechaHora:N.fechaHora?T=new Date(N.fechaHora):T=new Date;const S={id:C.id,emailEstudiante:N.emailEstudiante||N.email||"",nombreEstudiante:N.nombreEstudiante||N.nombre||"",curso:N.curso||"",fechaHora:T,tipo:N.tipo,ubicacion:N.ubicacion||null,observaciones:N.observaciones||"",...N},B=`${h}_${C.id}`;u.set(B,S)}),d()):console.log(`⚪ ${h}: vacía, manteniendo datos existentes`)},b=>{console.warn(`⚠️ Error con filtro en ${h}:`,b),console.log(`🔄 Intentando estrategia alternativa en ${h}...`);const y=tr(p,Nd(200)),C=gr(y,T=>{if(console.log(`📋 ${h} (sin filtro): ${T.size} documentos`),T.size>0){const B=T.docs[0].data();console.log(`📄 Estructura en ${h}:`,Object.keys(B)),console.log("📄 Primer documento:",B)}const S=T.docs.filter(B=>{var F;const w=B.data();if(!w.fechaHora)return!1;let _;return(F=w.fechaHora)!=null&&F.toDate?_=w.fechaHora.toDate():typeof w.fechaHora=="string"?_=new Date(w.fechaHora):w.fechaHora instanceof Date?_=w.fechaHora:_=new Date(w.fechaHora),_>=a&&_<=s});console.log(`📅 ${h}: ${S.length} registros después de filtro manual`),S.length>0&&(Array.from(u.keys()).filter(w=>w.startsWith(`${h}_`)).forEach(w=>u.delete(w)),S.forEach(w=>{var I;const _=w.data();let F;(I=_.fechaHora)!=null&&I.toDate?F=_.fechaHora.toDate():typeof _.fechaHora=="string"?F=new Date(_.fechaHora):_.fechaHora instanceof Date?F=_.fechaHora:F=new Date(_.fechaHora);const M={id:w.id,emailEstudiante:_.emailEstudiante||_.email||"",nombreEstudiante:_.nombreEstudiante||_.nombre||"",curso:_.curso||"",fechaHora:F,tipo:_.tipo,ubicacion:_.ubicacion||null,observaciones:_.observaciones||"",..._},D=`${h}_${w.id}`;u.set(D,M)}),d())}),N=c.findIndex(T=>T===v);N>=0?c[N]=C:c.push(C)});c.push(v)}catch(p){console.warn(`❌ Error configurando ${h}:`,p)}}),()=>{c.forEach(h=>{try{h()}catch(p){console.warn("Error unsubscribing:",p)}})}}catch(a){return console.error("Error setting up subscribeToAsistenciaByMonth:",a),n&&n(new Error(`Error al configurar suscripción: ${a instanceof Error?a.message:"Error desconocido"}`)),()=>{}}},LOe=(e,t)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],a=new Map,s=()=>{const o=Array.from(a.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const c=o.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",c);const u=o.filter(d=>d.profile===Yt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),e(o)};let i=!1;return r.forEach(o=>{try{const c=It(tn,o),u=tr(c),d=gr(u,f=>{f.size>0?(console.log(`✅ Encontrados ${f.size} usuarios en colección: ${o}`),i=!0,Array.from(a.keys()).filter(p=>p.startsWith(`${o}_`)).forEach(p=>a.delete(p)),f.forEach(p=>{var g,v,b,y;try{const C=p.data(),N=C.email||C.userEmail||C.mail||C.correo||"",T=C.nombreCompleto||C.displayName||C.name||C.nombre||C.fullName||"",S=C.curso||C.course||C.class||C.grade||"";let B=C.profile||C.role||C.tipo||C.userType||Yt.ESTUDIANTE;if(typeof B=="string"){const F=B.toLowerCase();F.includes("estudiante")||F.includes("student")||F.includes("alumno")?B=Yt.ESTUDIANTE:F.includes("coordinador")||F.includes("coordinator")?B=Yt.COORDINADOR_TP:F.includes("profesor")||F.includes("teacher")||F.includes("docente")?B=Yt.PROFESOR:(F.includes("subdireccion")||F.includes("subdir"))&&(B=Yt.COORDINADOR_TP)}const w={id:p.id,email:N,nombreCompleto:T,curso:S,profile:B,activo:C.activo!==!1,fechaCreacion:((v=(g=C.fechaCreacion)==null?void 0:g.toDate)==null?void 0:v.call(g))||new Date(C.fechaCreacion)||new Date,ultimaActividad:((y=(b=C.ultimaActividad)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(C.ultimaActividad)||new Date,...C},_=`${o}_${p.id}`;a.set(_,w)}catch(C){console.warn(`Error procesando documento ${p.id} en ${o}:`,C)}}),s()):console.log(`⚪ Colección ${o}: vacía`)},f=>{console.warn(`⚠️ Error en colección ${o}:`,f)});n.push(d)}catch(c){console.warn(`❌ Error configurando ${o}:`,c)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),t&&t(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(c){console.warn("Error unsubscribing:",c)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),t&&t(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},MOe=(e,t)=>{try{console.log("Setting up users subscription...");const r=It(tn,"users"),n=tr(r);return gr(n,s=>{console.log(`Raw users snapshot size: ${s.size}`);const i=[];s.forEach(d=>{var f,h,p,g;try{const v=d.data();console.log(`Processing user doc ${d.id}:`,v);const b=v.email||v.userEmail||v.mail||"",y=v.nombreCompleto||v.displayName||v.name||v.nombre||"",C=v.curso||v.course||v.class||"";let N=v.profile||v.role||v.tipo||Yt.ESTUDIANTE;if(typeof N=="string"){const S=N.toLowerCase();S.includes("estudiante")||S.includes("student")||S.includes("alumno")?N=Yt.ESTUDIANTE:S.includes("coordinador")||S.includes("coordinator")?N=Yt.COORDINADOR_TP:S.includes("profesor")||S.includes("teacher")||S.includes("docente")?N=Yt.PROFESOR:(S.includes("subdireccion")||S.includes("subdir"))&&(N=Yt.COORDINADOR_TP)}const T={id:d.id,email:b,nombreCompleto:y,curso:C,profile:N,activo:v.activo!==!1,fechaCreacion:((h=(f=v.fechaCreacion)==null?void 0:f.toDate)==null?void 0:h.call(f))||new Date(v.fechaCreacion)||new Date,ultimaActividad:((g=(p=v.ultimaActividad)==null?void 0:p.toDate)==null?void 0:g.call(p))||new Date(v.ultimaActividad)||new Date,...v};i.push(T)}catch(v){console.warn(`Error processing user document ${d.id}:`,v)}}),i.sort((d,f)=>d.nombreCompleto.localeCompare(f.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,f)=>(d[f.profile]=(d[f.profile]||0)+1,d),{});console.log("Users by profile:",o);const c=i.filter(d=>d.profile===Yt.ESTUDIANTE);console.log(`Estudiantes: ${c.length}`);const u=c.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),e(i)},s=>{console.error("Error in subscribeToAllUsers:",s),t&&t(new Error(`Error al cargar usuarios: ${s.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),t&&t(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},_C=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},UOe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),QOe=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),HOe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState(!0),[i,o]=k.useState(null),[c,u]=k.useState(new Date),[d,f]=k.useState("todos"),[h,p]=k.useState("");k.useEffect(()=>{s(!0),o(null);const B=c.getFullYear(),w=c.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",B,"Mes:",w);let _=!1,F=!1;const M=()=>{_&&F&&(console.log("=== CARGA COMPLETA ==="),s(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const I=It(tn,"asistencia_dual"),U=tr(I,Nd(5)),P=await Pa(U);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${P.size}`),P.size>0)P.docs.forEach((X,H)=>{const Y=X.data();console.log(`   ${H+1}. ${X.id.slice(0,8)} - ${Y.emailEstudiante} - ${Y.tipo}`),console.log("      Fecha original:",Y.fechaHora),console.log("      Todos los campos:",Object.keys(Y))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const X=["asistenciaEmpresa","asistencia_empresa"];for(const H of X)try{const Y=It(tn,H),V=tr(Y,Nd(3)),z=await Pa(V);if(console.log(`📋 ${H}: ${z.size} documentos`),z.size>0){const G=z.docs[0].data();console.log("   Estructura:",Object.keys(G)),console.log("   Email:",G.emailEstudiante||G.email),console.log("   Fecha:",G.fechaHora||G.fecha)}}catch(Y){console.log(`❌ ${H}: ${Y instanceof Error?Y.message:"Error"}`)}}}catch(I){console.error("❌ Error en prueba directa:",I),I.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):I.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),POe(B,w).then(I=>{console.log("🔍 Debug info for collections:",I),Object.entries(I).forEach(([U,P])=>{if(P.exists&&P.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${U.toUpperCase()}:`),console.log(`   📊 Total documentos: ${P.totalDocs}`),console.log(`   📅 Documentos del período: ${P.count}`),console.log(`   🔑 Campo de fecha: ${P.hasDateField}`),P.sampleDoc){console.log("   📄 Documento ejemplo:",P.sampleDoc);const X=P.sampleDoc,H=X.emailEstudiante||X.email||X.userEmail||X.correo||"NO ENCONTRADO",Y=X.tipo||X.type||X.action||X.tipoRegistro||"NO ENCONTRADO",V=X.fechaHora||X.fecha||X.timestamp||X.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${H}`),console.log(`   📝 Tipo registro: ${Y}`),console.log(`   📅 Fecha: ${V}`),console.log("   🗂️ Todos los campos:",Object.keys(X))}P.filteredDocs&&P.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",P.filteredDocs.length),P.filteredDocs.forEach((X,H)=>{H<3&&console.log(`      ${H+1}. ID: ${X.id}`,X.data)}))}else P.exists?console.log(`⚪ Colección ${U}: vacía`):console.log(`❌ Colección ${U}: no existe`)})}).catch(I=>{console.error("Debug error:",I)}),DOe().then(I=>{console.log("🔍 Debug info for users:",I),(!I.exists||I.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async P=>{var X;try{const H=It(tn,P),Y=tr(H,Nd(5)),V=await Pa(Y);V.size>0?(console.log(`✅ Encontrada colección alternativa: ${P} con ${V.size} documentos`),console.log("Documento muestra:",(X=V.docs[0])==null?void 0:X.data())):console.log(`❌ Colección ${P}: vacía`)}catch{console.log(`❌ Colección ${P}: no existe`)}}))}).catch(I=>{console.error("Users debug error:",I)});try{console.log("Configurando suscripción a asistencia...");const I=ROe(B,w,P=>{if(console.log("✅ Received registros:",P.length),P.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",P[0]);const X=[...new Set(P.map(re=>re.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",X);const H=[...new Set(P.map(re=>re.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",H);const Y=P.reduce((re,R)=>{const q=new Date(R.fechaHora).getDate();return re[q]||(re[q]=[]),re[q].push(R),re},{});console.log("📅 Registros por día del mes:",Object.keys(Y).map(re=>({dia:parseInt(re),cantidad:Y[parseInt(re)].length})));const V=r.map(re=>re.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",V);const z=X.filter(re=>V.includes(re)),G=X.filter(re=>!V.includes(re));console.log("✅ Emails que coinciden:",z),console.log("❌ Emails que NO coinciden:",G)}else console.log("⚠️ No se encontraron registros de asistencia para el período");t(P),_=!0,M()},P=>{console.error("❌ Error fetching asistencia:",P),o("Error al cargar datos de asistencia: "+P.message),_=!0,M()});console.log("Configurando suscripción a usuarios...");const U=LOe(P=>{if(console.log("✅ Received users (multi-collection):",P.length),P.length>0){console.log("Sample user:",P[0]);const X=P.filter(H=>H.profile===Yt.ESTUDIANTE&&H.curso);console.log("Dual students found:",X.length),X.forEach(H=>{console.log(`- ${H.nombreCompleto} (${H.curso}) - ${H.email}`)})}n(P),F=!0,M()},P=>{console.error("❌ Error fetching users (multi-collection):",P),console.log("🔄 Intentando con función original de usuarios...");const X=MOe(H=>{console.log("✅ Received users (fallback):",H.length),n(H),F=!0,M()},H=>{console.error("❌ Error en fallback también:",H),o("Error al cargar estudiantes: "+P.message),F=!0,M()})});return()=>{console.log("Limpiando suscripciones..."),I&&I(),U&&U()}}catch(I){console.error("❌ Error setting up subscriptions:",I),o("Error al inicializar conexiones: "+(I instanceof Error?I.message:"Error desconocido")),s(!1)}},[c]);const{monthDays:g,monthName:v,year:b}=k.useMemo(()=>{const B=c.getFullYear(),w=c.getMonth();return{monthDays:new Date(B,w+1,0).getDate(),monthName:c.toLocaleString("es-CL",{month:"long"}),year:B}},[c]),y=k.useMemo(()=>{let B=r.filter(w=>w.profile===Yt.ESTUDIANTE&&w.curso&&Op.includes(_C(w.curso)));if(d!=="todos"&&(B=B.filter(w=>_C(w.curso||"")===d)),h&&(B=B.filter(w=>w.nombreCompleto.toLowerCase().includes(h.toLowerCase()))),e.length>0){const w=[...new Set(e.map(M=>M.emailEstudiante).filter(Boolean))],_=B.map(M=>M.email),F=w.filter(M=>!_.includes(M));if(F.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",F);const D=F.map(I=>{const U=e.find(P=>P.emailEstudiante===I);return{id:I,email:I,nombreCompleto:(U==null?void 0:U.nombreEstudiante)||I.split("@")[0],curso:(U==null?void 0:U.curso)||"3ºC",profile:Yt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(I=>{const U=d==="todos"||_C(I.curso)===d,P=!h||I.nombreCompleto.toLowerCase().includes(h.toLowerCase());return U&&P&&Op.includes(_C(I.curso))});B=[...B,...D]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${B.length}`),B.forEach(w=>{console.log(`   - ${w.nombreCompleto} (${w.curso}) - ${w.email}`)}),B.sort((w,_)=>w.nombreCompleto.localeCompare(_.nombreCompleto))},[r,d,h,e]),C=k.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${e.length}`),console.log(`👥 Estudiantes disponibles: ${y.length}`);const B=new Map;return e.length===0?(console.log("⚠️ No hay registros para procesar aún"),B):(e.forEach((w,_)=>{const F=w.emailEstudiante;if(!F)return;let M;if(w.fechaHora instanceof Date)M=w.fechaHora;else if(w.fechaHora&&typeof w.fechaHora=="object"&&"toDate"in w.fechaHora)M=w.fechaHora.toDate();else if(typeof w.fechaHora=="string")M=new Date(w.fechaHora);else{console.warn("Fecha no válida en registro:",w);return}const D=M.getDate(),I=M.getMonth(),U=M.getFullYear();_<3&&console.log(`📅 Registro ${_+1}:`,{email:F,tipo:w.tipo,fechaOriginal:w.fechaHora,fechaProcesada:M.toLocaleString(),año:U,mes:I,día:D}),B.has(F)||B.set(F,new Map);const P=B.get(F);P.has(D)||P.set(D,{});const X=P.get(D);w.tipo==="Entrada"?(!X.entrada||M<new Date(X.entrada.fechaHora))&&(X.entrada=w):w.tipo==="Salida"&&(!X.salida||M>new Date(X.salida.fechaHora))&&(X.salida=w)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:B.size,estudiantes:Array.from(B.keys()),registrosPorEstudiante:Array.from(B.entries()).map(([w,_])=>({email:w,dias:Array.from(_.keys()),totalRegistros:Array.from(_.values()).reduce((F,M)=>F+(M.entrada?1:0)+(M.salida?1:0),0)}))}),B)},[e]),N=B=>{u(w=>{const _=new Date(w);return _.setMonth(_.getMonth()+B),_})},T=B=>{B!=null&&B.latitud&&(B!=null&&B.longitud)&&window.open(`https://www.google.com/maps?q=${B.latitud},${B.longitud}`,"_blank")},S=["D","L","M","M","J","V","S"];return i?l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:l.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[l.jsx("button",{onClick:()=>N(-1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${v} ${b}`}),l.jsx("button",{onClick:()=>N(1),disabled:a,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),l.jsxs("select",{value:d,onChange:B=>f(B.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[l.jsx("option",{value:"todos",children:"Todos los Cursos"}),Op.map(B=>l.jsx("option",{value:B,children:B},B))]}),l.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:h,onChange:B=>p(B.target.value),disabled:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),a?l.jsxs("div",{className:"text-center text-amber-600 py-10",children:[l.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),l.jsx("div",{children:"Cargando datos de asistencia..."})]}):l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:g},(B,w)=>{const F=new Date(b,c.getMonth(),w+1).getDay(),M=F===0||F===6;return l.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${M?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[l.jsx("div",{className:"font-semibold",children:S[F]}),l.jsx("div",{children:w+1})]},w)})]})}),l.jsx("tbody",{children:y.length>0?y.map(B=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:B.nombreCompleto}),Array.from({length:g},(w,_)=>{var U;const F=_+1,M=(U=C.get(B.email))==null?void 0:U.get(F),D=new Date(b,c.getMonth(),_+1),I=D.getDay()===0||D.getDay()===6;return B.email==="alexis.robles@industrialderecoleta.cl"&&F===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:B.email,day:F,hasDataForStudent:C.has(B.email),studentDayRecords:M,allAttendanceKeys:Array.from(C.keys()),daysForStudent:C.get(B.email)?Array.from(C.get(B.email).keys()):[]}),l.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${I?"bg-slate-100 dark:bg-slate-700/50":""}`,children:l.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(M==null?void 0:M.entrada)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var P;return T((P=M.entrada)==null?void 0:P.ubicacion)},children:[l.jsx(UOe,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(M.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(M==null?void 0:M.salida)&&l.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var P;return T((P=M.salida)==null?void 0:P.ubicacion)},children:[l.jsx(QOe,{}),l.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(M.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},F)})]},B.id)):l.jsx("tr",{children:l.jsx("td",{colSpan:g+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},N4="evaluaciones_formativas",k4="calificaciones_formativas",dR="trabajos_grupales_formativos",VOe="usuarios",AR=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},zOe=(e,t,r)=>{const n=tr(It(bt,N4),vn("curso","==",e),vn("asignatura","==",t),Rr("fecha","asc"));return gr(n,a=>{r(a.docs.map(s=>AR(s)))},a=>{console.error("Error al suscribirse a evaluaciones:",a),r([])})},$Oe=async(e,t)=>{const r=E1(bt),n=pr(It(bt,N4));r.set(n,{...e,fecha:mr.fromDate(new Date(e.fecha+"T00:00:00"))});const a=pr(bt,k4,n.id);return r.set(a,t),await r.commit(),n.id},GOe=async(e,t)=>{const r=pr(bt,N4,e);await Ji(r,t,{merge:!0})},KOe=async e=>{const t=E1(bt);t.delete(pr(bt,N4,e)),t.delete(pr(bt,k4,e)),await t.commit()},qOe=(e,t)=>{if(e.length===0)return t({}),()=>{};const r=e.map(n=>{const a=pr(bt,k4,n);return gr(a,s=>{s.exists()&&t({[n]:s.data()})})});return()=>r.forEach(n=>n())},WOe=async(e,t)=>{const r=pr(bt,k4,e);await Ji(r,t,{merge:!0})},XOe=(e,t,r)=>{const n=tr(It(bt,dR),vn("curso","==",e),vn("asignatura","==",t),Rr("fechaPresentacion","desc"));return gr(n,a=>{r(a.docs.map(s=>AR(s)))},a=>{console.error("Error al suscribirse a trabajos grupales:",a),r([])})},YOe=async e=>{const t={...e,fechaPresentacion:mr.fromDate(new Date(e.fechaPresentacion+"T00:00:00"))};await Un(It(bt,dR),t)},JOe=async(e,t)=>{const r=pr(bt,dR,e);await Ji(r,t,{merge:!0})},ZOe=e=>{const t=tr(It(bt,VOe));return gr(t,r=>{e(r.docs.map(n=>AR(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),e([])})},hne=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},Wv={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},mne=e=>e.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:e.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:e.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:e.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},eDe=({cursos:e,onSelect:t})=>l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),e.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:e.map(r=>{const n=mne(r);return l.jsxs("div",{className:"space-y-2 text-center",children:[l.jsxs("button",{onClick:()=>t(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[l.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),l.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[l.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),l.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),tDe=({curso:e,asignaturas:t,onSelect:r,onBack:n})=>{const a=mne(e);return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),l.jsxs("div",{className:`p-2 rounded-md ${a.bg} ${a.text} font-bold`,children:["Libro de Clases: ",e]})]}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),t.length>0?l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:t.map(s=>l.jsxs("button",{onClick:()=>r(s),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[l.jsx("span",{className:"text-2xl",children:Wv[s]||Wv.Default}),l.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:s})]},s))}):l.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[l.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),l.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},rDe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=k.useState([]),[i,o]=k.useState({}),[c,u]=k.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,f]=k.useState(null),[h,p]=k.useState(null),[g,v]=k.useState(!0),b=k.useMemo(()=>r.filter(_=>_.profile===Yt.ESTUDIANTE&&hne(_.curso||"")===e).map(_=>_.nombreCompleto).sort((_,F)=>_.localeCompare(F)),[r,e]);k.useEffect(()=>{v(!0);const _=zOe(e,t,F=>{s(F);const M=F.map(I=>I.id),D=qOe(M,I=>{o(U=>({...U,...I}))});return v(!1),()=>D()});return()=>_()},[e,t]);const y=_=>{const{name:F,value:M}=_.target;d?f(D=>D?{...D,[F]:M}:null):u(D=>({...D,[F]:M}))},C=async _=>{if(_.preventDefault(),p(null),!c.nombreActividad.trim()){p("El nombre de la actividad es obligatorio.");return}const F={asignatura:t,curso:e,...c},M=b.reduce((D,I)=>(D[I]="trabajado",D),{});try{await $Oe(F,M),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(D){console.error(D),p("No se pudo crear la evaluación.")}},N=(_,F)=>{var U;const M=((U=i[_])==null?void 0:U[F])||"trabajado";let D;M==="trabajado"?D="no trabajado":M==="no trabajado"?D="ausente":D="trabajado";const I={...i,[_]:{...i[_]||{},[F]:D}};o(I),WOe(_,{[F]:D}).catch(P=>{console.error("Error updating grade:",P)})},T=_=>f(_),S=async()=>{if(d)try{await GOe(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),f(null)}catch(_){console.error(_),p("No se pudo guardar la edición.")}},B=async _=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await KOe(_)}catch(F){console.error(F),p("No se pudo eliminar la evaluación.")}},w=k.useCallback(_=>{if(a.length===0)return"-";let F=0,M=0;return a.forEach(D=>{var U;const I=(U=i[D.id])==null?void 0:U[_];I==="trabajado"?(F+=7,M++):I==="no trabajado"&&(F+=2,M++)}),M===0?"-":(F/M).toFixed(1)},[i,a]);return g?l.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("form",{onSubmit:C,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),l.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:c.nombreActividad,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{className:"w-full",children:[l.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),l.jsx("input",{id:"fecha",type:"date",name:"fecha",value:c.fecha,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"w-full",children:l.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),h&&l.jsx("p",{className:"text-red-500 text-sm col-span-full",children:h})]}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),a.map(_=>l.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===_.id?l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:y,className:"text-xs p-1 w-full dark:bg-slate-600"}),l.jsx("button",{onClick:S,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("span",{className:"font-semibold",children:_.nombreActividad}),l.jsx("span",{className:"font-normal text-slate-500",children:_.fecha}),l.jsxs("div",{className:"flex gap-2 mt-1",children:[l.jsx("button",{onClick:()=>T(_),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),l.jsx("button",{onClick:()=>B(_.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},_.id)),l.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:b.map(_=>l.jsxs("tr",{children:[l.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:_}),a.map(F=>{var I;const M=(I=i[F.id])==null?void 0:I[_];let D;return M==="trabajado"?D=Wv[t]||Wv.Default:M==="no trabajado"?D="❌":M==="ausente"?D="A":D=Wv[t]||Wv.Default,l.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:l.jsx("button",{onClick:()=>N(F.id,_),className:`text-3xl transition-opacity duration-200 ${M==="trabajado"?"opacity-100":M==="no trabajado"?"opacity-40":M==="ausente"?"opacity-100 text-red-500 font-bold":"opacity-100"}`,children:D})},F.id)}),l.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:w(_)})]},_))})]})})]})},nDe=({curso:e,asignatura:t,allUsers:r,onBack:n})=>{const[a,s]=k.useState([]),[i,o]=k.useState(null),[c,u]=k.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,f]=k.useState({}),[h,p]=k.useState(2),g=k.useMemo(()=>r.filter(T=>T.profile===Yt.ESTUDIANTE&&hne(T.curso||"")===e).sort((T,S)=>T.nombreCompleto.localeCompare(S.nombreCompleto)),[r,e]);k.useEffect(()=>{const T=XOe(e,t,s);return()=>T()},[e,t]),k.useEffect(()=>{if(i){const T={};i.grupos.forEach(S=>{S.integrantes.forEach(B=>{T[B.nombre]={groupNumber:String(S.numero),role:B.rol||""}})}),f(T)}else f({})},[i]);const v=async T=>{if(T.preventDefault(),!c.nombre.trim())return;const S={curso:e,asignatura:t,nombreActividad:c.nombre,fechaPresentacion:c.fecha,grupos:[]};try{await YOe(S),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(B){console.error(B),alert("No se pudo crear la actividad grupal.")}},b=async()=>{if(!i)return;const T=new Map;for(const B of g){const w=d[B.nombreCompleto];if(w&&w.groupNumber){const _=parseInt(w.groupNumber,10);isNaN(_)||(T.has(_)||T.set(_,[]),T.get(_).push({nombre:B.nombreCompleto,rol:w.role||""}))}}const S=Array.from(T.entries()).map(([B,w])=>({numero:B,integrantes:w})).sort((B,w)=>B.numero-w.numero);try{await JOe(i.id,{grupos:S}),alert("Grupos guardados con éxito.")}catch(B){console.error(B),alert("No se pudieron guardar los grupos.")}},y=()=>{if(h<2){alert("Debe haber al menos 2 grupos.");return}const T=[...g].sort(()=>Math.random()-.5),S={};T.forEach((B,w)=>{var _;S[B.nombreCompleto]={groupNumber:String(w%h+1),role:((_=d[B.nombreCompleto])==null?void 0:_.role)||""}}),f(S)},C=(T,S,B)=>{f(w=>({...w,[T]:{...w[T]||{groupNumber:"",role:""},[S]:B}}))},N=k.useMemo(()=>{const T=new Map;return Object.entries(d).forEach(([S,B])=>{B.groupNumber&&(T.has(B.groupNumber)||T.set(B.groupNumber,[]),T.get(B.groupNumber).push({nombre:S,rol:B.role}))}),Array.from(T.entries()).sort((S,B)=>parseInt(S[0])-parseInt(B[0]))},[d]);return i?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),l.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),l.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"md:col-span-1 space-y-4",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"number",value:h,onChange:T=>p(parseInt(T.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),l.jsx("button",{onClick:y,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),l.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),l.jsx("table",{className:"w-full text-sm",children:l.jsx("tbody",{children:g.map(T=>{var S;return l.jsxs("tr",{children:[l.jsx("td",{className:"py-1 pr-2",children:T.nombreCompleto}),l.jsx("td",{className:"py-1",children:l.jsx("input",{type:"number",value:((S=d[T.nombreCompleto])==null?void 0:S.groupNumber)||"",onChange:B=>C(T.nombreCompleto,"groupNumber",B.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},T.id)})})})]})]}),l.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[l.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:N.map(([T,S])=>l.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[l.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",T]}),l.jsx("ul",{className:"space-y-2",children:S.map(B=>l.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[l.jsx("span",{className:"flex-1 truncate",children:B.nombre}),l.jsxs("select",{value:B.rol||"",onChange:w=>C(B.nombre,"role",w.target.value),className:"p-1 border rounded text-xs w-32",children:[l.jsx("option",{value:"",children:"-- Asignar Rol --"}),zZ.map(w=>l.jsx("option",{value:w,children:w},w))]})]},B.nombre))})]},T))})]})]})]}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),l.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[e," / ",t]})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),l.jsxs("form",{onSubmit:v,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[l.jsx("input",{value:c.nombre,onChange:T=>u({...c,nombre:T.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("input",{type:"date",value:c.fecha,onChange:T=>u({...c,fecha:T.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),a.map(T=>l.jsxs("button",{onClick:()=>o(T),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[l.jsx("p",{className:"font-bold",children:T.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",T.fechaPresentacion]})]},T.id))]})]})},aDe=({currentUser:e})=>{const[t,r]=k.useState("calificaciones"),[n,a]=k.useState(null),[s,i]=k.useState(null),[o,c]=k.useState([]),[u,d]=k.useState(!0);k.useEffect(()=>{d(!0);const v=ZOe(b=>{c(b),d(!1)});return()=>v()},[]);const f=k.useMemo(()=>e.cursos||[],[e.cursos]),h=k.useMemo(()=>e.asignaturas||[],[e.asignaturas]),p=({tab:v,label:b})=>l.jsx("button",{onClick:()=>r(v),className:`${t===v?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:b}),g=()=>{if(u)return l.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return l.jsx(eDe,{cursos:f,onSelect:a});if(!s)return l.jsx(tDe,{curso:n,asignaturas:h,onSelect:i,onBack:()=>a(null)});if(t==="calificaciones")return l.jsx(rDe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)});if(t==="grupos")return l.jsx(nDe,{curso:n,asignatura:s,allUsers:o,onBack:()=>i(null)})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx(p,{tab:"calificaciones",label:"Calificaciones"}),l.jsx(p,{tab:"grupos",label:"Trabajos Grupales"})]})}),l.jsx("div",{className:"mt-6",children:g()})]})},V_=nP(),B2="acompanamientos",t6="ciclos_opr",B4=e=>{if(!e)return new Date().toISOString().split("T")[0];if(typeof e=="string")return e.includes("T")?e.split("T")[0]:e;if(typeof(e==null?void 0:e.toDate)=="function")return e.toDate().toISOString().split("T")[0];try{return new Date(e).toISOString().split("T")[0]}catch{return new Date().toISOString().split("T")[0]}},pne=e=>{const t=e.lastIndexOf("."),r=t>0?e.substring(0,t):e,n=t>0?e.substring(t):"";return r.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").substring(0,50)+n.toLowerCase()},sDe=(e,t,r)=>{const n=(e||"general").replace(/[^a-zA-Z0-9-]/g,"_"),a=(t||"temp").replace(/[^a-zA-Z0-9-]/g,"_"),s=pne(r);return`videos_opr/${n}/${a}/${s}`},iDe=async(e,t,r)=>{try{if(console.log("🔍 DEBUG - Storage configurado:",{bucket:V_.app.options.storageBucket,app:V_.app.name}),console.log("🔍 DEBUG - Path solicitado:",t),!SF.currentUser)throw new Error("Usuario no autenticado. Por favor, inicia sesión nuevamente.");if(!e)throw new Error("No se proporcionó un archivo válido.");const n=["video/mp4","video/quicktime","video/x-msvideo","video/x-m4v"],a=500*1024*1024;if(e.size>a)throw new Error(`El archivo es demasiado grande. Máximo permitido: ${(a/1024/1024).toFixed(0)}MB`);if(!n.includes(e.type))throw new Error("Tipo de archivo no permitido. Solo se aceptan MP4, MOV, AVI o M4V.");console.log("📹 Iniciando subida:",{nombre:e.name,tamaño:`${(e.size/1024/1024).toFixed(2)} MB`,tipo:e.type,pathSolicitado:t});let s="";const i=(t||"").split("/");if(i.length>=4&&i[0]==="videos_opr"){const d=i[1],f=i[2],h=i.slice(3).join("/");s=sDe(d,f,h)}else{const d=Date.now(),f=pne(e.name);s=`videos_opr/general/${d}_${f}`}console.log("📁 Path final sanitizado:",s);const o=s4(V_,s);console.log("🔍 Storage ref creado:",{bucket:o.bucket,fullPath:o.fullPath,name:o.name,toString:o.toString()});const c={contentType:e.type,cacheControl:"public, max-age=31536000",customMetadata:{originalName:e.name,uploadedBy:SF.currentUser.uid,uploadDate:new Date().toISOString(),fileSize:String(e.size)}},u=N1e(o,e,c);return new Promise((d,f)=>{let h=-1;u.on("state_changed",p=>{const g=p.bytesTransferred/p.totalBytes*100,v=Math.floor(g);r&&v!==h&&(h=v,r(v),console.log(`📊 Progreso: ${v}%`))},p=>{var v;console.error("❌ Error en la subida:",p);let g="Error desconocido durante la subida.";switch(p==null?void 0:p.code){case"storage/unauthorized":g="No tienes permisos para subir archivos. Verifica las reglas de Firebase Storage.";break;case"storage/canceled":g="La subida fue cancelada por el usuario.";break;case"storage/quota-exceeded":g="Se agotó el espacio de almacenamiento disponible.";break;case"storage/retry-limit-exceeded":g="Se agotaron los reintentos. Verifica tu conexión a internet.";break;case"storage/invalid-format":g="El formato del archivo no es válido para Firebase Storage.";break;case"storage/unknown":g="Error desconocido del servidor de Firebase Storage.";break;default:const b=((v=p==null?void 0:p.message)==null?void 0:v.toLowerCase())||"";b.includes("cors")?g="Error de configuración CORS. Verifica las reglas de Firebase Storage.":b.includes("network")||b.includes("connection")?g="Error de conexión. Verifica tu internet e intenta nuevamente.":b.includes("permission")||b.includes("forbidden")?g="Permisos insuficientes. Contacta al administrador del sistema.":p!=null&&p.message&&(g=`Error del servidor: ${p.message}`);break}f(new Error(g))},async()=>{try{const p=await rP(u.snapshot.ref);console.log("✅ Archivo subido exitosamente:",{path:s,url:p,bucket:u.snapshot.ref.bucket,size:`${(u.snapshot.totalBytes/1024/1024).toFixed(2)} MB`}),d(p)}catch(p){console.error("❌ Error al obtener URL de descarga:",p),f(new Error("El archivo se subió correctamente, pero no se pudo obtener la URL de descarga. Intenta recargar la página."))}})})}catch(n){console.error("❌ Error general en uploadFileImproved:",n);const a=(n==null?void 0:n.message)||"Error inesperado al procesar el archivo. Intenta nuevamente.";throw new Error(a)}},gne=async e=>{try{const t=s4(V_,e),{items:r,prefixes:n}=await k1e(t);await Promise.all(r.map(a=>B1e(a))),await Promise.all(n.map(a=>gne(a.fullPath)))}catch(t){console.warn("⚠️ Error al eliminar carpeta:",e,t)}},oDe=async()=>{try{console.log("📋 Obteniendo todos los acompañamientos...");const e=tr(It(bt,B2),Rr("fecha","desc")),r=(await Pa(e)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:B4(a==null?void 0:a.fecha)}});return console.log("✅ Acompañamientos obtenidos:",r.length),r.sort((n,a)=>n.fecha<a.fecha?1:n.fecha>a.fecha?-1:0)}catch(e){throw console.error("❌ Error al obtener acompañamientos:",e),new Error("No se pudieron cargar los acompañamientos")}},lDe=async e=>{try{console.log("💾 Creando nuevo acompañamiento:",{docente:e.docente,curso:e.curso,asignatura:e.asignatura});const t={...e,fecha:mr.fromDate(new Date(e.fecha)),fechaCreacion:mr.now()},r=await Un(It(bt,B2),t),n={...e,id:r.id,fecha:B4(e.fecha)};return console.log("✅ Acompañamiento creado con ID:",r.id),n}catch(t){throw console.error("❌ Error al crear acompañamiento:",t),new Error("No se pudo crear el acompañamiento")}},cDe=async(e,t)=>{try{console.log("🔄 Actualizando acompañamiento:",e);const r={...t,...t.fecha?{fecha:mr.fromDate(new Date(t.fecha))}:{},fechaModificacion:mr.now()};await Ld(pr(bt,B2,e),r),console.log("✅ Acompañamiento actualizado exitosamente")}catch(r){throw console.error("❌ Error al actualizar acompañamiento:",r),new Error("No se pudo actualizar el acompañamiento")}},uDe=async e=>{try{console.log("🗑️ Eliminando acompañamiento:",e);const t=tr(It(bt,t6),vn("acompanamientoId","==",e)),r=await Pa(t),n=E1(bt);r.forEach(a=>n.delete(pr(bt,t6,a.id))),await n.commit(),await gne(`videos_opr/${e}`),await ts(pr(bt,B2,e)),console.log("✅ Acompañamiento eliminado con sus ciclos y archivos")}catch(t){throw console.error("❌ Error al eliminar acompañamiento:",t),new Error("No se pudo eliminar el acompañamiento y sus datos asociados")}},dDe=async e=>{var t;try{console.log("💾 Creando nuevo ciclo OPR:",{nombre:e.nombreCiclo,docente:e.docenteInfo,acompanamientoId:e.acompanamientoId});const r={...e,fecha:mr.fromDate(new Date(e.fecha)),fechaCreacion:mr.now()};(t=e.seguimiento)!=null&&t.fecha&&(r.seguimiento={...e.seguimiento,fecha:mr.fromDate(new Date(e.seguimiento.fecha))});const n=await Un(It(bt,t6),r),a={...e,id:n.id,fecha:B4(e.fecha)};return console.log("✅ Ciclo OPR creado con ID:",n.id),a}catch(r){throw console.error("❌ Error al crear ciclo OPR:",r),new Error("No se pudo crear el ciclo OPR")}},ADe=async e=>{try{const t=tr(It(bt,B2),vn("docente","==",e),Rr("fecha","desc"));return(await Pa(t)).docs.map(n=>{const a=n.data();return{id:n.id,...a,fecha:B4(a==null?void 0:a.fecha)}})}catch(t){throw console.error("❌ Error en getAcompanamientosByDocente:",t),new Error("No se pudieron cargar los acompañamientos del docente")}},fDe=async e=>{try{const t=tr(It(bt,"rubricas_personalizadas"),vn("docente","==",e)),r=await Pa(t);if(r.empty)return null;const n=r.docs[0].data();return(n==null?void 0:n.rubrica)??null}catch(t){return console.error("❌ Error en getRubricaPersonalizada:",t),null}},hDe=async()=>await ane(),i3=({label:e,onFileChange:t,uploadedUrl:r,onRemove:n,isUploading:a,accept:s="video/mp4,video/quicktime,video/avi,video/mov",error:i,progress:o=0})=>{const[c,u]=k.useState(!1),d=`file-upload-${e.replace(/\s+/g,"-")}`,f=b=>{b.preventDefault(),b.stopPropagation(),b.type==="dragenter"||b.type==="dragover"?u(!0):b.type==="dragleave"&&u(!1)},h=b=>{if(b.preventDefault(),b.stopPropagation(),u(!1),b.dataTransfer.files&&b.dataTransfer.files[0]&&!a){const y=b.dataTransfer.files[0];g(y)}},p=b=>{if(b.target.files&&b.target.files[0]&&!a){const y=b.target.files[0];g(y)}},g=b=>{if(b.size>524288e3){alert(`El archivo es demasiado grande. Tamaño máximo: ${524288e3/1024/1024}MB`);return}if(!["video/mp4","video/quicktime","video/avi","video/mov"].includes(b.type)){alert("Solo se aceptan archivos de video (MP4, MOV, AVI, QuickTime)");return}t(b)},v=()=>i?"bg-red-500":o===100?"bg-green-500":"bg-blue-500";return l.jsxs("div",{className:"w-full",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:e}),r?l.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-md bg-green-50 dark:bg-green-900/20 border-green-300 dark:border-green-700",children:[l.jsx(eh,{className:"w-5 h-5 text-green-600"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-green-700 dark:text-green-300 hover:underline font-medium",children:"Ver video cargado"}),l.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"Video subido exitosamente"})]}),l.jsx("button",{type:"button",onClick:n,className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar video",children:l.jsx(Dd,{className:"w-4 h-4"})})]}):l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:`relative border-2 border-dashed rounded-lg transition-colors ${c?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":a?"border-amber-400 bg-amber-50 dark:bg-amber-900/20":i?"border-red-400 bg-red-50 dark:bg-red-900/20":"border-slate-300 dark:border-slate-600 hover:border-slate-400 dark:hover:border-slate-500"} ${a?"cursor-not-allowed":"cursor-pointer"}`,onDragEnter:f,onDragLeave:f,onDragOver:f,onDrop:h,onClick:()=>{var b;return!a&&((b=document.getElementById(d))==null?void 0:b.click())},children:[l.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:a?l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-amber-700 dark:text-amber-300 font-medium",children:"Subiendo video..."}),l.jsxs("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:[o.toFixed(1),"% completado"]})]}):i?l.jsxs("div",{className:"text-center",children:[l.jsx(kd,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Error al subir"}),l.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:"Haz clic para intentar nuevamente"})]}):l.jsxs("div",{className:"text-center",children:[l.jsx(JZ,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 font-medium",children:"Arrastra un video aquí"}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"o haz clic para seleccionar"}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-2",children:"MP4, MOV, AVI (máx. 500MB)"})]})}),l.jsx("input",{id:d,type:"file",onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:a,accept:s,style:{display:"none"}})]}),a&&l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:`${v()} h-2 rounded-full transition-all duration-300`,style:{width:`${o}%`}})}),i&&l.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:[l.jsx(kd,{className:"w-4 h-4 text-red-500"}),l.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:i})]})]})]})},mDe=({acompanamiento:e,cicloToEdit:t,onSave:r,onCancel:n,profesores:a})=>{const[s,i]=k.useState(!1),[o,c]=k.useState({}),[u,d]=k.useState({}),[f,h]=k.useState({}),[p,g]=k.useState({docente:e.docente||"",curso:e.curso||"",asignatura:e.asignatura||""}),v=k.useMemo(()=>({registroN:1,nombreCiclo:"",fecha:new Date().toISOString().split("T")[0],horaInicio:"",horaTermino:"",videoObservacionUrl:"",detallesObservacion:[{id:`row_${Date.now()}`,minuto:"0-5",accionesDocente:"",accionesEstudiantes:"",actividades:""}],retroalimentacion:{exito:"",modelo:"",videoModeloUrl:"",foco:"",elementosIdentificar:"",brecha:{videoUrl:"",minutoInicial:"",minutoFinal:"",preguntas:"",indicadores:""}},planificacion:{preparacion:"",objetivo:"",actividad:"",tiempo:""},seguimiento:{fecha:"",curso:p.curso||"",profesor:p.docente||"",firma:""},acompanamientoId:e.id&&!e.id.startsWith("temp-")?e.id:""}),[e,p]),[b,y]=k.useState(t||v),C=I=>{const{name:U,value:P}=I.target,X=U.split(".");X.length>1?y(H=>{const Y=JSON.parse(JSON.stringify(H));let V=Y;for(let z=0;z<X.length-1;z++)V=V[X[z]];return V[X[X.length-1]]=P,Y}):y(H=>({...H,[U]:P}))},N=(I,U,P)=>{y(X=>({...X,detallesObservacion:X.detallesObservacion.map(H=>H.id===I?{...H,[U]:P}:H)}))},T=()=>{const I=b.detallesObservacion[b.detallesObservacion.length-1],U=I&&parseInt(I.minuto.split("-")[1],10)||0,P=`${U+1}-${U+5}`;y(X=>({...X,detallesObservacion:[...X.detallesObservacion,{id:`row_${Date.now()}`,minuto:P,accionesDocente:"",accionesEstudiantes:"",actividades:""}]}))},S=I=>{y(U=>({...U,detallesObservacion:U.detallesObservacion.filter(P=>P.id!==I)}))},B=async(I,U)=>{h(P=>({...P,[I]:null})),c(P=>({...P,[I]:!0})),d(P=>({...P,[I]:0}));try{const P=Date.now(),X=U.name.toLowerCase().replace(/[^a-z0-9.]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,""),H=e.id&&!e.id.startsWith("temp-")?e.id.replace(/[^a-zA-Z0-9-]/g,"_"):"general",Y=b.id?b.id.replace(/[^a-zA-Z0-9-]/g,"_"):"temp",V=`videos_opr/${H}/${Y}/${P}_${X}`,z=await iDe(U,V,re=>{d(R=>({...R,[I]:re}))}),G=I.split(".");G.length>1?y(re=>{const R=JSON.parse(JSON.stringify(re));let q=R;for(let J=0;J<G.length-1;J++)q=q[G[J]];return q[G[G.length-1]]=z,R}):y(re=>({...re,[I]:z})),d(re=>({...re,[I]:100}))}catch(P){const X=(P==null?void 0:P.message)||"Error desconocido al subir el archivo";h(H=>({...H,[I]:X})),alert(`Error al subir el video: ${X}`)}finally{c(P=>({...P,[I]:!1})),setTimeout(()=>{d(P=>({...P,[I]:0}))},2e3)}},w=I=>{const U=I.split(".");U.length>1?y(P=>{const X=JSON.parse(JSON.stringify(P));let H=X;for(let Y=0;Y<U.length-1;Y++)H=H[U[Y]];return H[U[U.length-1]]="",X}):y(P=>({...P,[I]:""})),h(P=>({...P,[I]:null})),d(P=>({...P,[I]:0}))},_=async(I,U,P)=>{if(!P||!P.trim())return P;const X=`Mejora la redacción del siguiente texto con un tono técnico-pedagógico propio de informes educativos. Mantén el sentido original y NO agregues información nueva ni ejemplos inventados. Devuélvelo como un texto breve, claro y directo. Texto (${U}):

"""${P}"""`;try{return(await I.generateContent(X)).response.text()}catch(H){return console.error(`Error improving text for ${U}:`,H),P}},F=async()=>{var I,U;i(!0);try{const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await mm("Acompañamiento - Mejorar Ciclo OPR");const H=new ds(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Y=b.retroalimentacion,V=b.planificacion,z=await Promise.all([_(H,"Éxito",Y.exito),_(H,"Modelo",Y.modelo),_(H,"Foco",Y.foco),_(H,"Elementos a identificar",Y.elementosIdentificar),_(H,"Brecha - Preguntas",((I=Y.brecha)==null?void 0:I.preguntas)||""),_(H,"Brecha - Indicadores",((U=Y.brecha)==null?void 0:U.indicadores)||""),_(H,"Planificación - Preparación",V.preparacion),_(H,"Planificación - Objetivo",V.objetivo),_(H,"Planificación - Actividad",V.actividad),_(H,"Planificación - Tiempo",V.tiempo)]);y(G=>({...G,retroalimentacion:{...G.retroalimentacion,exito:z[0],modelo:z[1],foco:z[2],elementosIdentificar:z[3],brecha:{...G.retroalimentacion.brecha,preguntas:z[4],indicadores:z[5]}},planificacion:{...G.planificacion,preparacion:z[6],objetivo:z[7],actividad:z[8],tiempo:z[9]}})),alert("Textos mejorados exitosamente con IA")}catch(P){console.error(P),alert("No se pudo mejorar la redacción. Intenta nuevamente.")}finally{i(!1)}},M=()=>{const I=new xr,U=I.internal.pageSize.getWidth(),P=15,X=U-P*2;let H=20;const Y=re=>{H>260&&(I.addPage(),H=20),I.setFontSize(14),I.setFont("helvetica","bold"),I.text(re,P,H),H+=10},V=(re,R="")=>{if(!re)return;H>270&&(I.addPage(),H=20),I.setFontSize(10),I.setFont("helvetica","bold"),I.text(R,P,H),I.setFont("helvetica","normal");const q=I.splitTextToSize(re,X-(R?15:0));I.text(q,P+(R?15:0),H),H+=q.length*5+4};I.setFontSize(18),I.setFont("helvetica","bold"),I.text("Informe de Ciclo OPR",U/2,H,{align:"center"}),H+=15,Y("1. Datos Generales");const z=[["Docente:",p.docente],["Curso:",p.curso],["Asignatura:",p.asignatura],["Fecha:",new Date(b.fecha).toLocaleDateString("es-CL")],["Hora:",`${b.horaInicio} - ${b.horaTermino}`],["Ciclo:",b.nombreCiclo]];xl(I,{body:z,startY:H,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),H=I.lastAutoTable.finalY+10,Y("2. Registro Detallado de Observación");const G=b.detallesObservacion.map(re=>[re.minuto,re.accionesDocente,re.accionesEstudiantes,re.actividades]);xl(I,{head:[["Minuto","Acciones del Docente","Acciones de Estudiantes","Actividades"]],body:G,startY:H,theme:"grid",headStyles:{fillColor:[41,128,185],textColor:255},styles:{fontSize:9,cellPadding:2},didDrawPage:re=>{var R;H=((R=re.cursor)==null?void 0:R.y)||20}}),H=I.lastAutoTable.finalY+10,Y("3. Retroalimentación Docente"),V(b.retroalimentacion.exito,"Éxito:"),V(b.retroalimentacion.modelo,"Modelo:"),V(b.retroalimentacion.foco,"Foco:"),V(b.retroalimentacion.elementosIdentificar,"Elementos a Identificar:"),H+=5,I.setFontSize(11),I.setFont("helvetica","bold"),I.text("Análisis de Brecha",P,H),H+=7,V(`${b.retroalimentacion.brecha.minutoInicial} a ${b.retroalimentacion.brecha.minutoFinal}`,"Minutos:"),V(b.retroalimentacion.brecha.preguntas,"Preguntas:"),V(b.retroalimentacion.brecha.indicadores,"Indicadores:"),Y("4. Planificación de Práctica"),V(b.planificacion.preparacion,"Preparación:"),V(b.planificacion.objetivo,"Objetivo:"),V(b.planificacion.actividad,"Actividad:"),V(b.planificacion.tiempo,"Tiempo:"),Y("5. Seguimiento"),V(new Date(b.seguimiento.fecha).toLocaleDateString("es-CL"),"Fecha:"),V(b.seguimiento.firma,"Firma (Registrado por):"),I.save(`Informe_OPR_${p.docente}_${b.fecha}.pdf`)},D=async I=>{if(I.preventDefault(),!p.docente||!p.curso||!p.asignatura){alert("Por favor, complete Docente, Curso y Asignatura");return}if(!b.nombreCiclo||!b.fecha){alert("Por favor, complete el nombre del ciclo y la fecha");return}const U={...b,docenteInfo:p.docente,cursoInfo:p.curso,asignaturaInfo:p.asignatura,seguimiento:{...b.seguimiento,profesor:p.docente,curso:p.curso}};try{await r(U)}catch(P){console.error("Error al guardar ciclo OPR:",P),alert("Error al guardar el ciclo OPR. Intenta nuevamente.")}};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-lg animate-fade-in",children:[(!e.id||e.id.startsWith("temp-"))&&l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-slate-50 dark:bg-slate-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-3 text-slate-700 dark:text-slate-300",children:"Datos Básicos del Ciclo OPR"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),l.jsxs("select",{value:p.docente,onChange:I=>g(U=>({...U,docente:I.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un docente"}),a.map(I=>l.jsx("option",{value:I,children:I},I))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),l.jsxs("select",{value:p.curso,onChange:I=>g(U=>({...U,curso:I.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),ks.map(I=>l.jsx("option",{value:I,children:I},I))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:p.asignatura,onChange:I=>g(U=>({...U,asignatura:I.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0,children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(I=>l.jsx("option",{value:I,children:I},I))]})]})]})]}),l.jsxs("div",{className:"mb-6 p-4 border rounded-lg bg-blue-50 dark:bg-blue-900/30",children:[l.jsx("h4",{className:"text-lg font-semibold mb-2 text-blue-700 dark:text-blue-300",children:"Asistente IA del Ciclo OPR"}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:F,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-blue-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:s,children:[l.jsx(MS,{className:"w-4 h-4"}),s?"Mejorando redacción...":"Mejorar Redacción del Ciclo"]}),l.jsxs("button",{type:"button",onClick:M,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(o4,{className:"w-4 h-4"}),"Descargar Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Usa la IA para mejorar la redacción de los textos ya escritos. Luego, descarga el informe completo en PDF."})]}),l.jsxs("form",{onSubmit:D,className:"space-y-8",children:[l.jsxs("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:[t?"Editando":"Nuevo"," Ciclo OPR"]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(ZZ,{className:"w-5 h-5 text-amber-500"})," Datos Generales"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsx("input",{type:"text",name:"nombreCiclo",value:b.nombreCiclo,onChange:C,placeholder:"Nombre o N° del Ciclo",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"date",name:"fecha",value:b.fecha,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0}),l.jsx("input",{type:"number",name:"registroN",value:b.registroN,onChange:C,placeholder:"Registro de Observación N°",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",min:1}),l.jsx("input",{type:"time",name:"horaInicio",value:b.horaInicio,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("input",{type:"time",name:"horaTermino",value:b.horaTermino,onChange:C,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx(i3,{label:"Subir video de observación de clase",onFileChange:I=>B("videoObservacionUrl",I),uploadedUrl:b.videoObservacionUrl,onRemove:()=>w("videoObservacionUrl"),isUploading:!!o.videoObservacionUrl,error:f.videoObservacionUrl,progress:u.videoObservacionUrl||0})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(EF,{className:"w-5 h-5 text-blue-500"})," Registro Detallado de Observación"]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b dark:border-slate-600",children:[l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Minuto"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones del Docente"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Acciones de Estudiantes"}),l.jsx("th",{className:"text-left p-2 text-sm font-medium text-slate-600 dark:text-slate-300",children:"Actividades"}),l.jsx("th",{className:"p-2"})]})}),l.jsx("tbody",{children:b.detallesObservacion.map(I=>l.jsxs("tr",{className:"border-b dark:border-slate-700",children:[l.jsx("td",{className:"p-2",children:l.jsx("input",{type:"text",value:I.minuto,onChange:U=>N(I.id,"minuto",U.target.value),className:"w-24 border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"0-5"})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:I.accionesDocente,onChange:U=>N(I.id,"accionesDocente",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones del docente..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:I.accionesEstudiantes,onChange:U=>N(I.id,"accionesEstudiantes",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir acciones de estudiantes..."})}),l.jsx("td",{className:"p-2",children:l.jsx("textarea",{value:I.actividades,onChange:U=>N(I.id,"actividades",U.target.value),rows:2,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 text-sm",placeholder:"Describir actividades realizadas..."})}),l.jsx("td",{className:"p-2",children:b.detallesObservacion.length>1&&l.jsx("button",{type:"button",onClick:()=>S(I.id),className:"text-red-500 hover:text-red-700 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"Eliminar fila",children:l.jsx(Dd,{className:"w-4 h-4"})})})]},I.id))})]})}),l.jsxs("button",{type:"button",onClick:T,className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md hover:bg-slate-300 dark:hover:bg-slate-500 flex items-center gap-1 transition-colors",children:[l.jsx(_F,{className:"w-4 h-4"})," Agregar Fila"]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(Cye,{className:"w-5 h-5 text-green-600"})," Retroalimentación Docente"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Éxito"}),l.jsx("textarea",{name:"retroalimentacion.exito",value:b.retroalimentacion.exito,onChange:C,placeholder:"Describir los aspectos exitosos observados en la clase...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Modelo"}),l.jsx("textarea",{name:"retroalimentacion.modelo",value:b.retroalimentacion.modelo,onChange:C,placeholder:"Modelo pedagógico o metodología observada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx(i3,{label:"Video modelo (opcional)",onFileChange:I=>B("retroalimentacion.videoModeloUrl",I),uploadedUrl:b.retroalimentacion.videoModeloUrl,onRemove:()=>w("retroalimentacion.videoModeloUrl"),isUploading:!!o["retroalimentacion.videoModeloUrl"],error:f["retroalimentacion.videoModeloUrl"],progress:u["retroalimentacion.videoModeloUrl"]||0}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Foco"}),l.jsx("textarea",{name:"retroalimentacion.foco",value:b.retroalimentacion.foco,onChange:C,placeholder:"Foco principal de la observación y retroalimentación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Elementos a Identificar"}),l.jsx("textarea",{name:"retroalimentacion.elementosIdentificar",value:b.retroalimentacion.elementosIdentificar,onChange:C,placeholder:"Elementos específicos que el docente debe identificar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(kd,{className:"w-4 h-4 text-amber-500"}),"Análisis de Brecha"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Minuto inicial"}),l.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoInicial",value:b.retroalimentacion.brecha.minutoInicial,onChange:C,placeholder:"Ej: 15:30",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Minuto final"}),l.jsx("input",{type:"text",name:"retroalimentacion.brecha.minutoFinal",value:b.retroalimentacion.brecha.minutoFinal,onChange:C,placeholder:"Ej: 20:45",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsx(i3,{label:"Video de brecha (opcional)",onFileChange:I=>B("retroalimentacion.brecha.videoUrl",I),uploadedUrl:b.retroalimentacion.brecha.videoUrl,onRemove:()=>w("retroalimentacion.brecha.videoUrl"),isUploading:!!o["retroalimentacion.brecha.videoUrl"],error:f["retroalimentacion.brecha.videoUrl"],progress:u["retroalimentacion.brecha.videoUrl"]||0}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Preguntas"}),l.jsx("textarea",{name:"retroalimentacion.brecha.preguntas",value:b.retroalimentacion.brecha.preguntas,onChange:C,placeholder:"Preguntas específicas sobre la brecha identificada...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Indicadores"}),l.jsx("textarea",{name:"retroalimentacion.brecha.indicadores",value:b.retroalimentacion.brecha.indicadores,onChange:C,placeholder:"Indicadores para evaluar el progreso...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),l.jsxs("fieldset",{className:"shadow-md rounded-lg p-4 border dark:border-slate-700 space-y-4",children:[l.jsxs("legend",{className:"flex items-center gap-2 text-lg font-semibold px-2 text-slate-700 dark:text-slate-300",children:[l.jsx(Tbe,{className:"w-5 h-5 text-purple-600"})," Planificación de Práctica y Seguimiento"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Preparación"}),l.jsx("textarea",{name:"planificacion.preparacion",value:b.planificacion.preparacion,onChange:C,placeholder:"Aspectos de preparación para la próxima práctica...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Objetivo"}),l.jsx("textarea",{name:"planificacion.objetivo",value:b.planificacion.objetivo,onChange:C,placeholder:"Objetivo específico para la siguiente observación...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Actividad"}),l.jsx("textarea",{name:"planificacion.actividad",value:b.planificacion.actividad,onChange:C,placeholder:"Actividades específicas a implementar...",rows:3,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Tiempo"}),l.jsx("input",{type:"text",name:"planificacion.tiempo",value:b.planificacion.tiempo,onChange:C,placeholder:"Tiempo estimado o cronograma...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{className:"p-4 border rounded-md dark:border-slate-600 bg-slate-50 dark:bg-slate-800/50 space-y-3",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(Ou,{className:"w-4 h-4 text-purple-500"}),"Seguimiento"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de seguimiento"}),l.jsx("input",{type:"date",name:"seguimiento.fecha",value:b.seguimiento.fecha,onChange:C,className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-400 mb-1",children:"Registrado por"}),l.jsx("input",{type:"text",name:"seguimiento.firma",value:b.seguimiento.firma,onChange:C,placeholder:"Nombre de quien registra el seguimiento...",className:"w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-8 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:n,className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-amber-400 transition-colors flex items-center gap-2",disabled:Object.values(o).some(Boolean),children:[Object.values(o).some(Boolean)&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardar Ciclo OPR"]})]})]})]})},pDe=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState(!0),[i,o]=k.useState(!0),[c,u]=k.useState(null),[d,f]=k.useState("list"),[h,p]=k.useState(null),[g,v]=k.useState("general"),[b,y]=k.useState(!1),C=Py,N=k.useMemo(()=>({fecha:new Date().toISOString().split("T")[0],docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[T,S]=k.useState(N),B=k.useCallback(async()=>{s(!0),u(null);try{const V=await oDe();t(V)}catch(V){u("No se pudieron cargar los registros de acompañamiento."),console.error("❌ Error al cargar acompañamientos:",V)}finally{s(!1)}},[]),w=k.useCallback(async()=>{o(!0);try{const z=(await hDe()).filter(G=>G.profile==="PROFESORADO").map(G=>G.nombreCompleto).sort();n(z)}catch(V){u("No se pudo cargar la lista de profesores."),console.error("❌ Error al cargar profesores:",V)}finally{o(!1)}},[]);k.useEffect(()=>{B(),w()},[B,w]);const _=async()=>{if(!("docente"in T)||!T.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar la retroalimentación.');return}y(!0),u(null);try{const V="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";await mm("Acompañamiento - Feedback General");const G=new ds(V).getGenerativeModel({model:"gemini-1.5-flash-latest"}),re=Object.entries(T.rubricaResultados||{}).map(([te,ie])=>`- ${te}: Nivel ${ie}`).join(`
`),R=`
Eres un asesor pedagógico experto. Redacta una retroalimentación consolidada y constructiva para un docente.
Contexto de la observación:
- Docente: ${T.docente}
- Asignatura: ${T.asignatura}
- Curso: ${T.curso}
- Resultados de la pauta de observación (rúbrica):
${re||"No se completó la pauta."}
- Observaciones adicionales del evaluador:
${T.observacionesGenerales||"Sin observaciones adicionales."}

Basado en esta información, tu texto debe:
1. Iniciar con un reconocimiento positivo.
2. Mencionar 1 o 2 fortalezas clave observadas.
3. Identificar 1 o 2 áreas de mejora concretas, con un tono de sugerencia.
4. Concluir con una frase motivadora.
La respuesta debe ser solo el texto de la retroalimentación.
      `,J=(await G.generateContent(R)).response.text();S(te=>({...te,retroalimentacionConsolidada:J})),alert("Retroalimentación generada exitosamente con IA.")}catch(V){console.error("❌ Error al generar retroalimentación:",V);const z=V.message||"No se pudo generar la retroalimentación automática.";u(z),alert(`Error: ${z}`)}finally{y(!1)}},F=async V=>{if(V.preventDefault(),!("docente"in T)||!T.docente||!T.curso||!T.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}u(null);try{if(h)await cDe(h,T),alert("¡Acompañamiento actualizado correctamente!");else{const z=await lDe(T);p(z.id),S(z),alert("¡Acompañamiento guardado correctamente! Ahora puedes agregar Ciclos OPR.")}await B()}catch(z){const G=(z==null?void 0:z.message)??"Error al guardar el registro de acompañamiento.";u(G),console.error("❌ Error al guardar:",z),alert(`Error: ${G}`)}},M=()=>{S(N),p(null),f("form"),v("general"),u(null)},D=V=>{S(V),p(V.id),f("form"),v("general"),u(null)},I=async V=>{if(window.confirm("¿Está seguro de que desea eliminar este registro? Esta acción no se puede deshacer."))try{await uDe(V),await B(),alert("Registro eliminado exitosamente.")}catch(z){const G="No se pudo eliminar el registro.";u(G),console.error("❌ Error al eliminar:",z),alert(`Error: ${G}`)}},U=(V,z)=>{S(G=>({...G,rubricaResultados:{...G.rubricaResultados||{},[V]:z}}))},P=()=>{var V;if(!("docente"in T)||!T.docente){alert('Por favor, complete al menos el campo "Docente" antes de generar el PDF.');return}try{const z=new xr,G=z.internal.pageSize.getWidth(),re=15,R=G-re*2;let q=20;z.setFontSize(18),z.setFont("helvetica","bold"),z.text("INFORME DE ACOMPAÑAMIENTO DOCENTE",G/2,q,{align:"center"}),q+=5,z.setLineWidth(.5),z.line(re,q,G-re,q),q+=10;const J=[["Docente:",T.docente],["Curso:",T.curso],["Asignatura:",T.asignatura],["Fecha:",new Date(T.fecha).toLocaleDateString("es-CL")],["Bloques horarios:",T.bloques||"No especificado"]];if(xl(z,{body:J,startY:q,theme:"plain",styles:{fontSize:10},columnStyles:{0:{fontStyle:"bold"}}}),q=z.lastAutoTable.finalY+10,Object.keys(T.rubricaResultados||{}).length>0){z.setFontSize(12),z.setFont("helvetica","bold"),z.text("RESULTADOS DE EVALUACIÓN",re,q),q+=8;const oe=Object.entries(T.rubricaResultados).map(([ce,pe])=>[ce,`Nivel ${pe}`,pe===1?"Débil":pe===2?"Incipiente":pe===3?"Satisfactorio":"Avanzado"]);xl(z,{startY:q,head:[["Criterio","Nivel","Descripción"]],body:oe,theme:"grid",headStyles:{fillColor:[245,158,11],textColor:255},margin:{left:re,right:re},styles:{fontSize:9}}),q=z.lastAutoTable.finalY+10}const te=(oe,ce)=>{if(!ce||ce.trim()==="")return;q>250&&(z.addPage(),q=20),z.setFontSize(12),z.setFont("helvetica","bold"),z.text(oe,re,q),q+=8,z.setFontSize(10),z.setFont("helvetica","normal");const pe=z.splitTextToSize(ce,R);z.text(pe,re,q),q+=pe.length*5+10};te("OBSERVACIONES GENERALES",T.observacionesGenerales),te("RETROALIMENTACIÓN PEDAGÓGICA",T.retroalimentacionConsolidada);const ie=z.getNumberOfPages();for(let oe=1;oe<=ie;oe++)z.setPage(oe),z.setFontSize(8),z.setFont("helvetica","italic"),z.text(`Generado el ${new Date().toLocaleDateString("es-CL")} - Página ${oe} de ${ie}`,G/2,z.internal.pageSize.getHeight()-10,{align:"center"});const Ae=`Informe_Acompanamiento_${(V=T.docente)==null?void 0:V.replace(/\s+/g,"_")}_${T.curso}_${new Date().toISOString().split("T")[0]}.pdf`;z.save(Ae)}catch(z){console.error("❌ Error al generar PDF:",z),alert("Error al generar el PDF. Intenta nuevamente.")}},X=V=>{S(z=>({...z,[V.target.name]:V.target.value}))},H=()=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Módulo de Acompañamiento Docente"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:()=>{M(),v("general")},className:"bg-green-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-600 flex items-center gap-2 transition-colors",children:[l.jsx(_F,{className:"w-5 h-5"})," Acompañamiento General"]}),l.jsxs("button",{onClick:()=>{S(N),p(null),f("form"),v("opr"),u(null)},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 flex items-center gap-2 transition-colors",children:[l.jsx(_F,{className:"w-5 h-5"})," Ciclo OPR Independiente"]})]})]}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kd,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-slate-700 dark:text-slate-300 mb-4",children:[l.jsx(Ry,{className:"w-6 h-6 text-amber-500"})," Acompañamientos Registrados"]}),l.jsxs("div",{className:"space-y-3",children:[a&&l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando registros..."})]}),!a&&e.filter(V=>V.id).length>0?l.jsx("div",{className:"grid gap-3",children:e.filter(V=>V.id).map(V=>l.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-sm hover:shadow-md transition-shadow",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Ou,{className:"w-4 h-4 text-amber-500"}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:V.docente})]}),l.jsxs("div",{className:"text-sm text-slate-600 dark:text-slate-400 space-y-1",children:[l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Curso:"})," ",V.curso," •"," ",l.jsx("span",{className:"font-medium",children:"Asignatura:"})," ",V.asignatura]}),l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Fecha:"})," ",new Date(V.fecha).toLocaleDateString("es-CL")]}),V.bloques&&l.jsxs("p",{children:[l.jsx("span",{className:"font-medium",children:"Bloques:"})," ",V.bloques]}),V.retroalimentacionConsolidada&&l.jsxs("p",{className:"text-green-600 dark:text-green-400 flex items-center gap-1",children:[l.jsx(eh,{className:"w-3 h-3"}),"Con retroalimentación IA"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[l.jsx("button",{onClick:()=>{D(V),v("general")},className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm px-3 py-1 rounded border border-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 transition-colors",children:"Ver/Editar"}),l.jsx("button",{onClick:()=>{D(V),v("opr")},className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm px-3 py-1 rounded border border-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"+ Ciclo OPR"}),l.jsx("button",{onClick:()=>I(V.id),title:"Eliminar registro",className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 p-1 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",children:l.jsx(Dd,{className:"w-4 h-4"})})]})]})},V.id))}):!a&&l.jsxs("div",{className:"text-center p-12 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsx(GA,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg font-medium",children:"No hay acompañamientos registrados"}),l.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Crea tu primer acompañamiento usando el botón superior"})]})]})]})]}),Y=()=>{const V=h?e.find(G=>G.id===h):null,z={id:"temp-"+Date.now(),fecha:new Date().toISOString(),docente:"docente"in T&&T.docente||"",curso:"curso"in T&&T.curso||"",asignatura:"asignatura"in T&&T.asignatura||"",bloques:"bloques"in T&&T.bloques||"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""};return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:g==="general"?h?"Editando Acompañamiento General":"Nuevo Acompañamiento General":"Gestión de Ciclo OPR"}),l.jsx("button",{type:"button",onClick:()=>f("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex items-center gap-2 px-4 py-2 rounded-lg border hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors",children:"← Volver al listado"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>v("general"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${g==="general"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(GA,{className:"w-4 h-4"}),"Acompañamiento General"]})}),l.jsx("button",{onClick:()=>v("opr"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${g==="opr"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-300"}`,children:l.jsxs("span",{className:"flex items-center gap-2",children:[l.jsx(ZZ,{className:"w-4 h-4"}),"Ciclo OPR"]})})]})}),c&&l.jsx("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(kd,{className:"w-5 h-5 text-red-500"}),l.jsx("p",{className:"text-red-700 dark:text-red-300",children:c})]})}),g==="general"&&l.jsxs("form",{onSubmit:F,className:"space-y-8",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-green-50 dark:bg-green-900/30 border-green-200 dark:border-green-800",children:[l.jsxs("h4",{className:"text-lg font-semibold mb-3 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(P_,{className:"w-5 h-5"}),"Asistente IA - Informe General"]}),l.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[l.jsxs("button",{type:"button",onClick:_,className:"bg-green-500 hover:bg-green-600 disabled:bg-green-400 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",disabled:b,children:[l.jsx(MS,{className:"w-4 h-4"}),b?"Generando...":"Generar Retroalimentación con IA"]}),l.jsxs("button",{type:"button",onClick:P,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md flex items-center gap-2 transition-colors",children:[l.jsx(o4,{className:"w-4 h-4"}),"Crear Informe PDF"]})]}),l.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-2",children:"Completa la observación y rúbrica, luego genera automáticamente la retroalimentación. Finalmente, crea el informe en PDF."}),"retroalimentacionConsolidada"in T&&T.retroalimentacionConsolidada&&l.jsxs("div",{className:"mt-4 p-4 bg-white dark:bg-slate-800 rounded-md shadow-sm border",children:[l.jsxs("h5",{className:"font-semibold text-sm mb-2 text-green-700 dark:text-green-300 flex items-center gap-2",children:[l.jsx(eh,{className:"w-4 h-4"}),"Retroalimentación Consolidada Generada:"]}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded p-3",children:l.jsx("textarea",{readOnly:!0,rows:8,value:T.retroalimentacionConsolidada,className:"w-full text-sm text-slate-700 dark:text-slate-300 bg-transparent border-none p-0 resize-none focus:ring-0"})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-800/50 dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente *"}),l.jsxs("select",{name:"docente",value:"docente"in T?T.docente:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[l.jsx("option",{value:"",children:i?"Cargando profesores...":"Seleccione un docente"}),r.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso *"}),l.jsxs("select",{name:"curso",value:"curso"in T?T.curso:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un curso"}),ks.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura *"}),l.jsxs("select",{name:"asignatura",value:"asignatura"in T?T.asignatura:"",onChange:X,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione una asignatura"}),qi.map(G=>l.jsx("option",{value:G,children:G},G))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),l.jsx("input",{type:"text",name:"bloques",value:"bloques"in T?T.bloques:"",onChange:X,placeholder:"Ej: 3-4, 1-2",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Observaciones Generales"}),l.jsx("textarea",{name:"observacionesGenerales",value:"observacionesGenerales"in T?T.observacionesGenerales:"",onChange:X,rows:4,placeholder:"Ingrese sus observaciones sobre la clase, metodología utilizada, participación de estudiantes, recursos empleados, etc...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-lg font-semibold mb-4 text-slate-700 dark:text-slate-300 flex items-center gap-2",children:[l.jsx(Ry,{className:"w-5 h-5 text-amber-500"}),"Pauta de Observación - Rúbrica de Evaluación"]}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4",children:"Haga clic en el nivel correspondiente para cada criterio observado durante la clase."}),l.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg shadow-sm",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:C.map(G=>l.jsx(lt.Fragment,{children:G.criteria.map((re,R)=>l.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[R===0&&l.jsx("td",{rowSpan:G.criteria.length,className:"px-4 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600 bg-slate-50 dark:bg-slate-800",children:G.domain}),l.jsx("td",{className:"px-4 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:re.name}),re.levels.map((q,J)=>{const te=J+1,ie="rubricaResultados"in T&&T.rubricaResultados[re.name]===te,Ae=ie?"bg-amber-100 dark:bg-amber-900/30 border-amber-300 dark:border-amber-700":"hover:bg-amber-50 dark:hover:bg-slate-700";return l.jsx("td",{onClick:()=>U(re.name,te),className:`px-4 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${Ae} ${ie?"ring-1 ring-amber-400":""}`,title:`Seleccionar nivel ${te} para ${re.name}`,children:l.jsxs("div",{className:"text-xs leading-relaxed",children:[ie&&l.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[l.jsx(eh,{className:"w-3 h-3 text-amber-600"}),l.jsx("span",{className:"font-semibold text-amber-700 dark:text-amber-400",children:"Seleccionado"})]}),q]})},te)})]},re.name))},G.domain))})]})}),Object.keys(T.rubricaResultados||{}).length>0&&l.jsxs("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[l.jsxs("h5",{className:"font-semibold text-amber-800 dark:text-amber-300 mb-2 flex items-center gap-2",children:[l.jsx(Ry,{className:"w-4 h-4"}),"Resumen de Evaluación (",Object.keys(T.rubricaResultados).length," criterios evaluados)"]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:Object.entries(T.rubricaResultados).map(([G,re])=>l.jsxs("div",{className:"flex justify-between items-center py-1",children:[l.jsxs("span",{className:"text-slate-700 dark:text-slate-300 truncate pr-2",children:[G,":"]}),l.jsxs("span",{className:`font-semibold px-2 py-1 rounded text-xs ${re===1?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":re===2?"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300":re===3?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"}`,children:["Nivel ",re]})]},G))})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-6 border-t dark:border-slate-700",children:[l.jsx("button",{type:"button",onClick:()=>f("list"),className:"bg-slate-200 dark:bg-slate-600 text-slate-800 dark:text-slate-200 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsxs("button",{type:"submit",className:"bg-amber-500 hover:bg-amber-600 disabled:bg-amber-400 text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center gap-2",disabled:b,children:[b&&l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),h?"Actualizar":"Guardar"," Acompañamiento"]})]})]}),g==="opr"&&l.jsx(mDe,{acompanamiento:V||z,cicloToEdit:null,profesores:r,onSave:async G=>{try{const re={...G,acompanamientoId:(V==null?void 0:V.id)||null};await dDe(re),alert("Ciclo OPR guardado exitosamente"),f("list")}catch(re){console.error("❌ Error al guardar ciclo OPR:",re);const R=re.message||"Error desconocido al guardar el ciclo OPR";u(R),alert(`Error al guardar el ciclo OPR: ${R}`)}},onCancel:()=>f("list")})]})};return a||i?l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 font-medium",children:"Cargando módulo de acompañamiento..."}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-500 text-sm mt-2",children:[a&&"Cargando registros...",i&&" Cargando profesores..."]})]})})}):l.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d==="list"?H():Y()})})},fR="mensajes_internos",gDe="usuarios",vne="mensajes_read_status",xne=e=>{var r,n;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fecha}},vDe=(e,t)=>{const r=tr(It(bt,fR),vn("participants","array-contains",e),Rr("fecha","desc"));return gr(r,a=>{const s=a.docs.map(i=>xne(i));t(s)},a=>{console.error("Error al suscribirse a los mensajes:",a),t([])})},xDe=async e=>{try{const t={...e,participants:[e.de,e.para],fecha:mr.fromDate(new Date)};await Un(It(bt,fR),t)}catch(t){throw console.error("Error al enviar el mensaje:",t),new Error("No se pudo enviar el mensaje.")}},bDe=async e=>{try{const t=pr(bt,fR,e);await ts(t)}catch(t){throw console.error("Error al eliminar el mensaje:",t),new Error("No se pudo eliminar el mensaje.")}},yDe=(e,t)=>{const r=pr(bt,vne,e);return gr(r,a=>{a.exists()?t(a.data()):t({announcements:[],messages:[]})},a=>{console.error("Error al suscribirse al estado de lectura:",a),t({announcements:[],messages:[]})})},wDe=async(e,t)=>{try{const r=pr(bt,vne,e);await Ji(r,{messages:xZ(t)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},EDe=e=>{const t=tr(It(bt,gDe),Rr("nombreCompleto","asc"));return gr(t,n=>{const a=n.docs.map(s=>xne(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},CDe=({currentUser:e,refreshUnreadCount:t})=>{const[r,n]=k.useState("inbox"),[a,s]=k.useState([]),[i,o]=k.useState([]),[c,u]=k.useState(null),[d,f]=k.useState({announcements:[],messages:[]}),[h,p]=k.useState(!0),g={para:"",asunto:"",cuerpo:""},[v,b]=k.useState(g);k.useEffect(()=>{if(!e.id||!e.email){p(!1);return}p(!0);const w=vDe(e.email,M=>{s(M),p(!1)}),_=EDe(o),F=yDe(e.id,M=>{f(M),t()});return()=>{w(),_(),F()}},[e.id,e.email,t]);const y=w=>{u(w),r==="inbox"&&!d.messages.includes(w.id)&&wDe(e.id,w.id).catch(_=>{console.error("Failed to mark message as read:",_)})},C=async w=>{if(w.preventDefault(),!v.para||!v.asunto.trim()||!v.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const _={de:e.email,para:v.para,asunto:v.asunto,cuerpo:v.cuerpo};try{await xDe(_),b(g),n("sent")}catch(F){console.error("Error sending message:",F),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},N=async w=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await bDe(w),u(null)}catch(_){console.error("Error deleting message:",_),alert("No se pudo eliminar el mensaje.")}},T=w=>{b({para:w.de,asunto:`Re: ${w.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${w.de}
Fecha: ${new Date(w.fecha).toLocaleString("es-CL")}

${w.cuerpo}`}),n("compose")},S=k.useMemo(()=>a.filter(w=>w.para===e.email),[a,e.email]),B=k.useMemo(()=>a.filter(w=>w.de===e.email),[a,e.email]);return h?l.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[l.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[l.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:l.jsx("button",{onClick:()=>{n("compose"),u(null),b(g)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),l.jsxs("nav",{className:"p-2 space-y-1",children:[l.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),l.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&l.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?S:B).map(w=>{const _=r==="inbox"&&!d.messages.includes(w.id);return l.jsxs("div",{onClick:()=>y(w),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(c==null?void 0:c.id)===w.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("p",{className:`font-bold truncate ${_?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?w.de:`Para: ${w.para}`}),_&&l.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),l.jsx("p",{className:`truncate text-sm ${_?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:w.asunto}),l.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(w.fecha).toLocaleString("es-CL")})]},w.id)})}),l.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),l.jsxs("form",{onSubmit:C,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),l.jsxs("select",{id:"para",value:v.para,onChange:w=>b({...v,para:w.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(w=>w.email!==e.email).map(w=>l.jsxs("option",{value:w.email,children:[w.nombreCompleto," (",w.email,")"]},w.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),l.jsx("input",{type:"text",id:"asunto",value:v.asunto,onChange:w=>b({...v,asunto:w.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),l.jsx("textarea",{id:"cuerpo",value:v.cuerpo,onChange:w=>b({...v,cuerpo:w.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):c?l.jsxs("div",{children:[l.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:c.asunto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[l.jsx("strong",{children:"De:"})," ",c.de," ",l.jsx("br",{}),l.jsx("strong",{children:"Para:"})," ",c.para," ",l.jsx("br",{}),l.jsx("strong",{children:"Fecha:"})," ",new Date(c.fecha).toLocaleString("es-CL")]})]}),l.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:c.cuerpo}),l.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&l.jsx("button",{onClick:()=>T(c),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),l.jsx("button",{onClick:()=>N(c.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):l.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:l.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var r6=function(e,t){return r6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},r6(e,t)};function Qd(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r6(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var n6=function(){return n6=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},n6.apply(this,arguments)};function ul(e,t,r,n){function a(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function o(d){try{u(n.next(d))}catch(f){i(f)}}function c(d){try{u(n.throw(d))}catch(f){i(f)}}function u(d){d.done?s(d.value):a(d.value).then(o,c)}u((n=n.apply(e,[])).next())})}function Lo(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,a,s,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,a&&(s=u[0]&2?a.return:u[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,u[1])).done)return s;switch(a=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,a=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){r.label=u[1];break}if(u[0]===6&&r.label<s[1]){r.label=s[1],s=u;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(u);break}s[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],a=0}finally{n=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function SC(e,t,r){if(arguments.length===2)for(var n=0,a=t.length,s;n<a;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||t)}var gh=function(){function e(t,r,n,a){this.left=t,this.top=r,this.width=n,this.height=a}return e.prototype.add=function(t,r,n,a){return new e(this.left+t,this.top+r,this.width+n,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var n=Array.from(r).find(function(a){return a.width!==0});return n?new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),T4=function(e,t){return gh.fromClientRect(e,t.getBoundingClientRect())},_De=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new gh(0,0,n,a)},j4=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},Vs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},RV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",SDe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var NC=0;NC<RV.length;NC++)SDe[RV.charCodeAt(NC)]=NC;var LV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",my=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var kC=0;kC<LV.length;kC++)my[LV.charCodeAt(kC)]=kC;var NDe=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=my[e.charCodeAt(n)],i=my[e.charCodeAt(n+1)],o=my[e.charCodeAt(n+2)],c=my[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},kDe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},BDe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Up=5,hR=11,o3=2,TDe=hR-Up,bne=65536>>Up,jDe=1<<Up,l3=jDe-1,IDe=1024>>Up,FDe=bne+IDe,ODe=FDe,DDe=32,PDe=ODe+DDe,RDe=65536>>hR,LDe=1<<TDe,MDe=LDe-1,MV=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},UDe=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},QDe=function(e,t){var r=NDe(e),n=Array.isArray(r)?BDe(r):new Uint32Array(r),a=Array.isArray(r)?kDe(r):new Uint16Array(r),s=24,i=MV(a,s/2,n[4]/2),o=n[5]===2?MV(a,(s+n[4])/2):UDe(n,Math.ceil((s+n[4])/4));return new HDe(n[0],n[1],n[2],n[3],i,o)},HDe=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Up],r=(r<<o3)+(t&l3),this.data[r];if(t<=65535)return r=this.index[bne+(t-55296>>Up)],r=(r<<o3)+(t&l3),this.data[r];if(t<this.highStart)return r=PDe-RDe+(t>>hR),r=this.index[r],r+=t>>Up&MDe,r=this.index[r],r=(r<<o3)+(t&l3),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),UV="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",VDe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var BC=0;BC<UV.length;BC++)VDe[UV.charCodeAt(BC)]=BC;var zDe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",QV=50,$De=1,yne=2,wne=3,GDe=4,KDe=5,HV=7,Ene=8,VV=9,z0=10,a6=11,zV=12,s6=13,qDe=14,py=15,i6=16,TC=17,Lb=18,WDe=19,$V=20,o6=21,Mb=22,c3=23,gv=24,yc=25,gy=26,vy=27,vv=28,XDe=29,yp=30,YDe=31,jC=32,IC=33,l6=34,c6=35,u6=36,Pw=37,d6=38,z_=39,$_=40,u3=41,Cne=42,JDe=43,ZDe=[9001,65288],_ne="!",kn="×",FC="÷",A6=QDe(zDe),Rf=[yp,u6],f6=[$De,yne,wne,KDe],Sne=[z0,Ene],GV=[vy,gy],ePe=f6.concat(Sne),KV=[d6,z_,$_,l6,c6],tPe=[py,s6],rPe=function(e,t){t===void 0&&(t="strict");var r=[],n=[],a=[];return e.forEach(function(s,i){var o=A6.get(s);if(o>QV?(a.push(!0),o-=QV):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(s)!==-1)return n.push(i),r.push(i6);if(o===GDe||o===a6){if(i===0)return n.push(i),r.push(yp);var c=r[i-1];return ePe.indexOf(c)===-1?(n.push(n[i-1]),r.push(c)):(n.push(i),r.push(yp))}if(n.push(i),o===YDe)return r.push(t==="strict"?o6:Pw);if(o===Cne||o===XDe)return r.push(yp);if(o===JDe)return s>=131072&&s<=196605||s>=196608&&s<=262141?r.push(Pw):r.push(yp);r.push(o)}),[n,r,a]},d3=function(e,t,r,n){var a=n[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var s=r;s<=n.length;){s++;var i=n[s];if(i===t)return!0;if(i!==z0)break}if(a===z0)for(var s=r;s>0;){s--;var o=n[s];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var c=r;c<=n.length;){c++;var i=n[c];if(i===t)return!0;if(i!==z0)break}if(o!==z0)break}return!1},qV=function(e,t){for(var r=e;r>=0;){var n=t[r];if(n===z0)r--;else return n}return 0},nPe=function(e,t,r,n,a){if(r[n]===0)return kn;var s=n-1;if(Array.isArray(a)&&a[s]===!0)return kn;var i=s-1,o=s+1,c=t[s],u=i>=0?t[i]:0,d=t[o];if(c===yne&&d===wne)return kn;if(f6.indexOf(c)!==-1)return _ne;if(f6.indexOf(d)!==-1||Sne.indexOf(d)!==-1)return kn;if(qV(s,t)===Ene)return FC;if(A6.get(e[s])===a6||(c===jC||c===IC)&&A6.get(e[o])===a6||c===HV||d===HV||c===VV||[z0,s6,py].indexOf(c)===-1&&d===VV||[TC,Lb,WDe,gv,vv].indexOf(d)!==-1||qV(s,t)===Mb||d3(c3,Mb,s,t)||d3([TC,Lb],o6,s,t)||d3(zV,zV,s,t))return kn;if(c===z0)return FC;if(c===c3||d===c3)return kn;if(d===i6||c===i6)return FC;if([s6,py,o6].indexOf(d)!==-1||c===qDe||u===u6&&tPe.indexOf(c)!==-1||c===vv&&d===u6||d===$V||Rf.indexOf(d)!==-1&&c===yc||Rf.indexOf(c)!==-1&&d===yc||c===vy&&[Pw,jC,IC].indexOf(d)!==-1||[Pw,jC,IC].indexOf(c)!==-1&&d===gy||Rf.indexOf(c)!==-1&&GV.indexOf(d)!==-1||GV.indexOf(c)!==-1&&Rf.indexOf(d)!==-1||[vy,gy].indexOf(c)!==-1&&(d===yc||[Mb,py].indexOf(d)!==-1&&t[o+1]===yc)||[Mb,py].indexOf(c)!==-1&&d===yc||c===yc&&[yc,vv,gv].indexOf(d)!==-1)return kn;if([yc,vv,gv,TC,Lb].indexOf(d)!==-1)for(var f=s;f>=0;){var h=t[f];if(h===yc)return kn;if([vv,gv].indexOf(h)!==-1)f--;else break}if([vy,gy].indexOf(d)!==-1)for(var f=[TC,Lb].indexOf(c)!==-1?i:s;f>=0;){var h=t[f];if(h===yc)return kn;if([vv,gv].indexOf(h)!==-1)f--;else break}if(d6===c&&[d6,z_,l6,c6].indexOf(d)!==-1||[z_,l6].indexOf(c)!==-1&&[z_,$_].indexOf(d)!==-1||[$_,c6].indexOf(c)!==-1&&d===$_||KV.indexOf(c)!==-1&&[$V,gy].indexOf(d)!==-1||KV.indexOf(d)!==-1&&c===vy||Rf.indexOf(c)!==-1&&Rf.indexOf(d)!==-1||c===gv&&Rf.indexOf(d)!==-1||Rf.concat(yc).indexOf(c)!==-1&&d===Mb&&ZDe.indexOf(e[o])===-1||Rf.concat(yc).indexOf(d)!==-1&&c===Lb)return kn;if(c===u3&&d===u3){for(var p=r[s],g=1;p>0&&(p--,t[p]===u3);)g++;if(g%2!==0)return kn}return c===jC&&d===IC?kn:FC},aPe=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=rPe(e,t.lineBreak),n=r[0],a=r[1],s=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[yc,yp,Cne].indexOf(o)!==-1?Pw:o}));var i=t.wordBreak==="keep-all"?s.map(function(o,c){return o&&e[c]>=19968&&e[c]<=40959}):void 0;return[n,a,i]},sPe=function(){function e(t,r,n,a){this.codePoints=t,this.required=r===_ne,this.start=n,this.end=a}return e.prototype.slice=function(){return Vs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),iPe=function(e,t){var r=j4(e),n=aPe(r,t),a=n[0],s=n[1],i=n[2],o=r.length,c=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=kn;u<o&&(d=nPe(r,s,a,++u,i))===kn;);if(d!==kn||u===o){var f=new sPe(r,d,c,u);return c=u,{value:f,done:!1}}return{done:!0,value:null}}}},oPe=1,lPe=2,T2=4,WV=8,u5=10,XV=47,Wy=92,cPe=9,uPe=32,OC=34,Ub=61,dPe=35,APe=36,fPe=37,DC=39,PC=40,Qb=41,hPe=95,zl=45,mPe=33,pPe=60,gPe=62,vPe=64,xPe=91,bPe=93,yPe=61,wPe=123,RC=63,EPe=125,YV=124,CPe=126,_Pe=128,JV=65533,A3=42,_p=43,SPe=44,NPe=58,kPe=59,Rw=46,BPe=0,TPe=8,jPe=11,IPe=14,FPe=31,OPe=127,wA=-1,Nne=48,kne=97,Bne=101,DPe=102,PPe=117,RPe=122,Tne=65,jne=69,Ine=70,LPe=85,MPe=90,Vo=function(e){return e>=Nne&&e<=57},UPe=function(e){return e>=55296&&e<=57343},xv=function(e){return Vo(e)||e>=Tne&&e<=Ine||e>=kne&&e<=DPe},QPe=function(e){return e>=kne&&e<=RPe},HPe=function(e){return e>=Tne&&e<=MPe},VPe=function(e){return QPe(e)||HPe(e)},zPe=function(e){return e>=_Pe},LC=function(e){return e===u5||e===cPe||e===uPe},d5=function(e){return VPe(e)||zPe(e)||e===hPe},ZV=function(e){return d5(e)||Vo(e)||e===zl},$Pe=function(e){return e>=BPe&&e<=TPe||e===jPe||e>=IPe&&e<=FPe||e===OPe},B0=function(e,t){return e!==Wy?!1:t!==u5},MC=function(e,t,r){return e===zl?d5(t)||B0(t,r):d5(e)?!0:!!(e===Wy&&B0(e,t))},f3=function(e,t,r){return e===_p||e===zl?Vo(t)?!0:t===Rw&&Vo(r):Vo(e===Rw?t:e)},GPe=function(e){var t=0,r=1;(e[t]===_p||e[t]===zl)&&(e[t]===zl&&(r=-1),t++);for(var n=[];Vo(e[t]);)n.push(e[t++]);var a=n.length?parseInt(Vs.apply(void 0,n),10):0;e[t]===Rw&&t++;for(var s=[];Vo(e[t]);)s.push(e[t++]);var i=s.length,o=i?parseInt(Vs.apply(void 0,s),10):0;(e[t]===jne||e[t]===Bne)&&t++;var c=1;(e[t]===_p||e[t]===zl)&&(e[t]===zl&&(c=-1),t++);for(var u=[];Vo(e[t]);)u.push(e[t++]);var d=u.length?parseInt(Vs.apply(void 0,u),10):0;return r*(a+o*Math.pow(10,-i))*Math.pow(10,c*d)},KPe={type:2},qPe={type:3},WPe={type:4},XPe={type:13},YPe={type:8},JPe={type:21},ZPe={type:9},eRe={type:10},tRe={type:11},rRe={type:12},nRe={type:14},UC={type:23},aRe={type:1},sRe={type:25},iRe={type:24},oRe={type:26},lRe={type:27},cRe={type:28},uRe={type:29},dRe={type:31},h6={type:32},Fne=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(j4(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==h6;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case OC:return this.consumeStringToken(OC);case dPe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),a=this.peekCodePoint(2);if(ZV(r)||B0(n,a)){var s=MC(r,n,a)?lPe:oPe,i=this.consumeName();return{type:5,value:i,flags:s}}break;case APe:if(this.peekCodePoint(0)===Ub)return this.consumeCodePoint(),XPe;break;case DC:return this.consumeStringToken(DC);case PC:return KPe;case Qb:return qPe;case A3:if(this.peekCodePoint(0)===Ub)return this.consumeCodePoint(),nRe;break;case _p:if(f3(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case SPe:return WPe;case zl:var o=t,c=this.peekCodePoint(0),u=this.peekCodePoint(1);if(f3(o,c,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(MC(o,c,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(c===zl&&u===gPe)return this.consumeCodePoint(),this.consumeCodePoint(),iRe;break;case Rw:if(f3(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case XV:if(this.peekCodePoint(0)===A3)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===A3&&(d=this.consumeCodePoint(),d===XV))return this.consumeToken();if(d===wA)return this.consumeToken()}break;case NPe:return oRe;case kPe:return lRe;case pPe:if(this.peekCodePoint(0)===mPe&&this.peekCodePoint(1)===zl&&this.peekCodePoint(2)===zl)return this.consumeCodePoint(),this.consumeCodePoint(),sRe;break;case vPe:var f=this.peekCodePoint(0),h=this.peekCodePoint(1),p=this.peekCodePoint(2);if(MC(f,h,p)){var i=this.consumeName();return{type:7,value:i}}break;case xPe:return cRe;case Wy:if(B0(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case bPe:return uRe;case yPe:if(this.peekCodePoint(0)===Ub)return this.consumeCodePoint(),YPe;break;case wPe:return tRe;case EPe:return rRe;case PPe:case LPe:var g=this.peekCodePoint(0),v=this.peekCodePoint(1);return g===_p&&(xv(v)||v===RC)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case YV:if(this.peekCodePoint(0)===Ub)return this.consumeCodePoint(),ZPe;if(this.peekCodePoint(0)===YV)return this.consumeCodePoint(),JPe;break;case CPe:if(this.peekCodePoint(0)===Ub)return this.consumeCodePoint(),eRe;break;case wA:return h6}return LC(t)?(this.consumeWhiteSpace(),dRe):Vo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):d5(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Vs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();xv(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var n=!1;r===RC&&t.length<6;)t.push(r),r=this.consumeCodePoint(),n=!0;if(n){var a=parseInt(Vs.apply(void 0,t.map(function(c){return c===RC?Nne:c})),16),s=parseInt(Vs.apply(void 0,t.map(function(c){return c===RC?Ine:c})),16);return{type:30,start:a,end:s}}var i=parseInt(Vs.apply(void 0,t),16);if(this.peekCodePoint(0)===zl&&xv(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];xv(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var s=parseInt(Vs.apply(void 0,o),16);return{type:30,start:i,end:s}}else return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===PC?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===PC?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===wA)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===DC||r===OC){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===wA||this.peekCodePoint(0)===Qb)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),UC)}for(;;){var a=this.consumeCodePoint();if(a===wA||a===Qb)return{type:22,value:Vs.apply(void 0,t)};if(LC(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===wA||this.peekCodePoint(0)===Qb?(this.consumeCodePoint(),{type:22,value:Vs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),UC);if(a===OC||a===DC||a===PC||$Pe(a))return this.consumeBadUrlRemnants(),UC;if(a===Wy)if(B0(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),UC;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;LC(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Qb||t===wA)return;B0(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,n="";t>0;){var a=Math.min(r,t);n+=Vs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),n},e.prototype.consumeStringToken=function(t){var r="",n=0;do{var a=this._value[n];if(a===wA||a===void 0||a===t)return r+=this.consumeStringSlice(n),{type:0,value:r};if(a===u5)return this._value.splice(0,n),aRe;if(a===Wy){var s=this._value[n+1];s!==wA&&s!==void 0&&(s===u5?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):B0(a,s)&&(r+=this.consumeStringSlice(n),r+=Vs(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=T2,n=this.peekCodePoint(0);for((n===_p||n===zl)&&t.push(this.consumeCodePoint());Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(n===Rw&&Vo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=WV;Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),a=this.peekCodePoint(1);var s=this.peekCodePoint(2);if((n===jne||n===Bne)&&((a===_p||a===zl)&&Vo(s)||Vo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=WV;Vo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[GPe(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],n=t[1],a=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(MC(a,s,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return a===fPe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(xv(t)){for(var r=Vs(t);xv(this.peekCodePoint(0))&&r.length<6;)r+=Vs(this.consumeCodePoint());LC(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||UPe(n)||n>1114111?JV:n}return t===wA?JV:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(ZV(r))t+=Vs(r);else if(B0(r,this.peekCodePoint(0)))t+=Vs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),One=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new Fne;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},n=this.consumeToken();;){if(n.type===32||fRe(n,t))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?h6:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),j2=function(e){return e.type===15},B1=function(e){return e.type===17},Ea=function(e){return e.type===20},ARe=function(e){return e.type===0},m6=function(e,t){return Ea(e)&&e.value===t},Dne=function(e){return e.type!==31},$x=function(e){return e.type!==31&&e.type!==4},rf=function(e){var t=[],r=[];return e.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&t.push(r),t},fRe=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},wm=function(e){return e.type===17||e.type===15},di=function(e){return e.type===16||wm(e)},Pne=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},xo={type:17,number:0,flags:T2},mR={type:16,number:50,flags:T2},$0={type:16,number:100,flags:T2},xy=function(e,t,r){var n=e[0],a=e[1];return[Oa(n,t),Oa(typeof a<"u"?a:n,r)]},Oa=function(e,t){if(e.type===16)return e.number/100*t;if(j2(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},Rne="deg",Lne="grad",Mne="rad",Une="turn",I4={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case Rne:return Math.PI*t.number/180;case Lne:return Math.PI/200*t.number;case Mne:return t.number;case Une:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},Qne=function(e){return e.type===15&&(e.unit===Rne||e.unit===Lne||e.unit===Mne||e.unit===Une)},Hne=function(e){var t=e.filter(Ea).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[xo,xo];case"to top":case"bottom":return Bu(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[xo,$0];case"to right":case"left":return Bu(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[$0,$0];case"to bottom":case"top":return Bu(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[$0,xo];case"to left":case"right":return Bu(270)}return 0},Bu=function(e){return Math.PI*e/180},em={name:"color",parse:function(e,t){if(t.type===18){var r=hRe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3);return G0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),1)}if(t.value.length===4){var n=t.value.substring(0,1),a=t.value.substring(1,2),s=t.value.substring(2,3),i=t.value.substring(3,4);return G0(parseInt(n+n,16),parseInt(a+a,16),parseInt(s+s,16),parseInt(i+i,16)/255)}if(t.value.length===6){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6);return G0(parseInt(n,16),parseInt(a,16),parseInt(s,16),1)}if(t.value.length===8){var n=t.value.substring(0,2),a=t.value.substring(2,4),s=t.value.substring(4,6),i=t.value.substring(6,8);return G0(parseInt(n,16),parseInt(a,16),parseInt(s,16),parseInt(i,16)/255)}}if(t.type===20){var o=sh[t.value.toUpperCase()];if(typeof o<"u")return o}return sh.TRANSPARENT}},tm=function(e){return(255&e)===0},Ui=function(e){var t=255&e,r=255&e>>8,n=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+n+","+r+","+t/255+")":"rgb("+a+","+n+","+r+")"},G0=function(e,t,r,n){return(e<<24|t<<16|r<<8|Math.round(n*255)<<0)>>>0},ez=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},tz=function(e,t){var r=t.filter($x);if(r.length===3){var n=r.map(ez),a=n[0],s=n[1],i=n[2];return G0(a,s,i,1)}if(r.length===4){var o=r.map(ez),a=o[0],s=o[1],i=o[2],c=o[3];return G0(a,s,i,c)}return 0};function h3(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var rz=function(e,t){var r=t.filter($x),n=r[0],a=r[1],s=r[2],i=r[3],o=(n.type===17?Bu(n.number):I4.parse(e,n))/(Math.PI*2),c=di(a)?a.number/100:0,u=di(s)?s.number/100:0,d=typeof i<"u"&&di(i)?Oa(i,1):1;if(c===0)return G0(u*255,u*255,u*255,1);var f=u<=.5?u*(c+1):u+c-u*c,h=u*2-f,p=h3(h,f,o+1/3),g=h3(h,f,o),v=h3(h,f,o-1/3);return G0(p*255,g*255,v*255,d)},hRe={hsl:rz,hsla:rz,rgb:tz,rgba:tz},Xy=function(e,t){return em.parse(e,One.create(t).parseComponentValue())},sh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},mRe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},pRe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},F4=function(e,t){var r=em.parse(e,t[0]),n=t[1];return n&&di(n)?{color:r,stop:n}:{color:r,stop:null}},nz=function(e,t){var r=e[0],n=e[e.length-1];r.stop===null&&(r.stop=xo),n.stop===null&&(n.stop=$0);for(var a=[],s=0,i=0;i<e.length;i++){var o=e[i].stop;if(o!==null){var c=Oa(o,t);c>s?a.push(c):a.push(s),s=c}else a.push(null)}for(var u=null,i=0;i<a.length;i++){var d=a[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var f=i-u,h=a[u-1],p=(d-h)/(f+1),g=1;g<=f;g++)a[u+g-1]=p*g;u=null}}return e.map(function(v,b){var y=v.color;return{color:y,stop:Math.max(Math.min(1,a[b]/t),0)}})},gRe=function(e,t,r){var n=t/2,a=r/2,s=Oa(e[0],t)-n,i=a-Oa(e[1],r);return(Math.atan2(i,s)+Math.PI*2)%(Math.PI*2)},vRe=function(e,t,r){var n=typeof e=="number"?e:gRe(e,t,r),a=Math.abs(t*Math.sin(n))+Math.abs(r*Math.cos(n)),s=t/2,i=r/2,o=a/2,c=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[a,s-u,s+u,i-c,i+c]},hd=function(e,t){return Math.sqrt(e*e+t*t)},az=function(e,t,r,n,a){var s=[[0,0],[0,t],[e,0],[e,t]];return s.reduce(function(i,o){var c=o[0],u=o[1],d=hd(r-c,n-u);return(a?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},xRe=function(e,t,r,n,a){var s=0,i=0;switch(e.size){case 0:e.shape===0?s=i=Math.min(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.min(Math.abs(t),Math.abs(t-n)),i=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)s=i=Math.min(hd(t,r),hd(t,r-a),hd(t-n,r),hd(t-n,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-n)),c=az(n,a,t,r,!0),u=c[0],d=c[1];s=hd(u-t,(d-r)/o),i=o*s}break;case 1:e.shape===0?s=i=Math.max(Math.abs(t),Math.abs(t-n),Math.abs(r),Math.abs(r-a)):e.shape===1&&(s=Math.max(Math.abs(t),Math.abs(t-n)),i=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)s=i=Math.max(hd(t,r),hd(t,r-a),hd(t-n,r),hd(t-n,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-n)),f=az(n,a,t,r,!1),u=f[0],d=f[1];s=hd(u-t,(d-r)/o),i=o*s}break}return Array.isArray(e.size)&&(s=Oa(e.size[0],n),i=e.size.length===2?Oa(e.size[1],a):s),[s,i]},bRe=function(e,t){var r=Bu(180),n=[];return rf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&i.value==="to"){r=Hne(a);return}else if(Qne(i)){r=I4.parse(e,i);return}}var o=F4(e,a);n.push(o)}),{angle:r,stops:n,type:1}},QC=function(e,t){var r=Bu(180),n=[];return rf(t).forEach(function(a,s){if(s===0){var i=a[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=Hne(a);return}else if(Qne(i)){r=(I4.parse(e,i)+Bu(270))%Bu(360);return}}var o=F4(e,a);n.push(o)}),{angle:r,stops:n,type:1}},yRe=function(e,t){var r=Bu(180),n=[],a=1,s=0,i=3,o=[];return rf(t).forEach(function(c,u){var d=c[0];if(u===0){if(Ea(d)&&d.value==="linear"){a=1;return}else if(Ea(d)&&d.value==="radial"){a=2;return}}if(d.type===18){if(d.name==="from"){var f=em.parse(e,d.values[0]);n.push({stop:xo,color:f})}else if(d.name==="to"){var f=em.parse(e,d.values[0]);n.push({stop:$0,color:f})}else if(d.name==="color-stop"){var h=d.values.filter($x);if(h.length===2){var f=em.parse(e,h[1]),p=h[0];B1(p)&&n.push({stop:{type:16,number:p.number*100,flags:p.flags},color:f})}}}}),a===1?{angle:(r+Bu(180))%Bu(360),stops:n,type:a}:{size:i,shape:s,stops:n,position:o,type:a}},Vne="closest-side",zne="farthest-side",$ne="closest-corner",Gne="farthest-corner",Kne="circle",qne="ellipse",Wne="cover",Xne="contain",wRe=function(e,t){var r=0,n=3,a=[],s=[];return rf(t).forEach(function(i,o){var c=!0;if(o===0){var u=!1;c=i.reduce(function(f,h){if(u)if(Ea(h))switch(h.value){case"center":return s.push(mR),f;case"top":case"left":return s.push(xo),f;case"right":case"bottom":return s.push($0),f}else(di(h)||wm(h))&&s.push(h);else if(Ea(h))switch(h.value){case Kne:return r=0,!1;case qne:return r=1,!1;case"at":return u=!0,!1;case Vne:return n=0,!1;case Wne:case zne:return n=1,!1;case Xne:case $ne:return n=2,!1;case Gne:return n=3,!1}else if(wm(h)||di(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return f},c)}if(c){var d=F4(e,i);a.push(d)}}),{size:n,shape:r,stops:a,position:s,type:2}},HC=function(e,t){var r=0,n=3,a=[],s=[];return rf(t).forEach(function(i,o){var c=!0;if(o===0?c=i.reduce(function(d,f){if(Ea(f))switch(f.value){case"center":return s.push(mR),!1;case"top":case"left":return s.push(xo),!1;case"right":case"bottom":return s.push($0),!1}else if(di(f)||wm(f))return s.push(f),!1;return d},c):o===1&&(c=i.reduce(function(d,f){if(Ea(f))switch(f.value){case Kne:return r=0,!1;case qne:return r=1,!1;case Xne:case Vne:return n=0,!1;case zne:return n=1,!1;case $ne:return n=2,!1;case Wne:case Gne:return n=3,!1}else if(wm(f)||di(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return d},c)),c){var u=F4(e,i);a.push(u)}}),{size:n,shape:r,stops:a,position:s,type:2}},ERe=function(e){return e.type===1},CRe=function(e){return e.type===2},pR={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var n=Yne[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function _Re(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!Yne[e.name])}var Yne={"linear-gradient":bRe,"-moz-linear-gradient":QC,"-ms-linear-gradient":QC,"-o-linear-gradient":QC,"-webkit-linear-gradient":QC,"radial-gradient":wRe,"-moz-radial-gradient":HC,"-ms-radial-gradient":HC,"-o-radial-gradient":HC,"-webkit-radial-gradient":HC,"-webkit-gradient":yRe},SRe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(n){return $x(n)&&_Re(n)}).map(function(n){return pR.parse(e,n)})}},NRe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ea(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},kRe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return rf(t).map(function(r){return r.filter(di)}).map(Pne)}},BRe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return rf(t).map(function(r){return r.filter(Ea).map(function(n){return n.value}).join(" ")}).map(TRe)}},TRe=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},bx;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(bx||(bx={}));var jRe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return rf(t).map(function(r){return r.filter(IRe)})}},IRe=function(e){return Ea(e)||di(e)},O4=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},FRe=O4("top"),ORe=O4("right"),DRe=O4("bottom"),PRe=O4("left"),D4=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return Pne(r.filter(di))}}},RRe=D4("top-left"),LRe=D4("top-right"),MRe=D4("bottom-right"),URe=D4("bottom-left"),P4=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},QRe=P4("top"),HRe=P4("right"),VRe=P4("bottom"),zRe=P4("left"),R4=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return j2(r)?r.number:0}}},$Re=R4("top"),GRe=R4("right"),KRe=R4("bottom"),qRe=R4("left"),WRe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},XRe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},YRe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ea).reduce(function(r,n){return r|JRe(n.value)},0)}},JRe=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ZRe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},eLe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},A5;(function(e){e.NORMAL="normal",e.STRICT="strict"})(A5||(A5={}));var tLe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return A5.STRICT;case"normal":default:return A5.NORMAL}}},rLe={name:"line-height",initialValue:"normal",prefix:!1,type:4},sz=function(e,t){return Ea(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:di(e)?Oa(e,t):t},nLe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:pR.parse(e,t)}},aLe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},p6={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},L4=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},sLe=L4("top"),iLe=L4("right"),oLe=L4("bottom"),lLe=L4("left"),cLe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ea).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},uLe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},M4=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},dLe=M4("top"),ALe=M4("right"),fLe=M4("bottom"),hLe=M4("left"),mLe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},pLe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},gLe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&m6(t[0],"none")?[]:rf(t).map(function(r){for(var n={color:sh.TRANSPARENT,offsetX:xo,offsetY:xo,blur:xo},a=0,s=0;s<r.length;s++){var i=r[s];wm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:n.blur=i,a++):n.color=em.parse(e,i)}return n})}},vLe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},xLe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=wLe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},bLe=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},yLe=function(e){var t=e.filter(function(c){return c.type===17}).map(function(c){return c.number}),r=t[0],n=t[1];t[2],t[3];var a=t[4],s=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var i=t[12],o=t[13];return t[14],t[15],t.length===16?[r,n,a,s,i,o]:null},wLe={matrix:bLe,matrix3d:yLe},iz={type:16,number:50,flags:T2},ELe=[iz,iz],CLe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(di);return r.length!==2?ELe:[r[0],r[1]]}},_Le={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Yy;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Yy||(Yy={}));var SLe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Yy.BREAK_ALL;case"keep-all":return Yy.KEEP_ALL;case"normal":default:return Yy.NORMAL}}},NLe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(B1(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Jne={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},kLe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return B1(t)?t.number:1}},BLe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},TLe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ea).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},jLe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],n=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},ILe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},FLe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(B1(t))return t.number;if(Ea(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},OLe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ea).map(function(r){return r.value})}},DLe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ci=function(e,t){return(e&t)!==0},PLe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},RLe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var n=[],a=t.filter(Dne),s=0;s<a.length;s++){var i=a[s],o=a[s+1];if(i.type===20){var c=o&&B1(o)?o.number:1;n.push({counter:i.value,increment:c})}}return n}},LLe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],n=t.filter(Dne),a=0;a<n.length;a++){var s=n[a],i=n[a+1];if(Ea(s)&&s.value!=="none"){var o=i&&B1(i)?i.number:0;r.push({counter:s.value,reset:o})}}return r}},MLe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(j2).map(function(r){return Jne.parse(e,r)})}},ULe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var n=[],a=t.filter(ARe);if(a.length%2!==0)return null;for(var s=0;s<a.length;s+=2){var i=a[s].value,o=a[s+1].value;n.push({open:i,close:o})}return n}},oz=function(e,t,r){if(!e)return"";var n=e[Math.min(t,e.length-1)];return n?r?n.open:n.close:""},QLe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&m6(t[0],"none")?[]:rf(t).map(function(r){for(var n={color:255,offsetX:xo,offsetY:xo,blur:xo,spread:xo,inset:!1},a=0,s=0;s<r.length;s++){var i=r[s];m6(i,"inset")?n.inset=!0:wm(i)?(a===0?n.offsetX=i:a===1?n.offsetY=i:a===2?n.blur=i:n.spread=i,a++):n.color=em.parse(e,i)}return n})}},HLe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],n=[];return t.filter(Ea).forEach(function(a){switch(a.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(a){n.indexOf(a)===-1&&n.push(a)}),n}},VLe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},zLe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return j2(t)?t.number:0}},$Le=function(){function e(t,r){var n,a;this.animationDuration=ir(t,MLe,r.animationDuration),this.backgroundClip=ir(t,mRe,r.backgroundClip),this.backgroundColor=ir(t,pRe,r.backgroundColor),this.backgroundImage=ir(t,SRe,r.backgroundImage),this.backgroundOrigin=ir(t,NRe,r.backgroundOrigin),this.backgroundPosition=ir(t,kRe,r.backgroundPosition),this.backgroundRepeat=ir(t,BRe,r.backgroundRepeat),this.backgroundSize=ir(t,jRe,r.backgroundSize),this.borderTopColor=ir(t,FRe,r.borderTopColor),this.borderRightColor=ir(t,ORe,r.borderRightColor),this.borderBottomColor=ir(t,DRe,r.borderBottomColor),this.borderLeftColor=ir(t,PRe,r.borderLeftColor),this.borderTopLeftRadius=ir(t,RRe,r.borderTopLeftRadius),this.borderTopRightRadius=ir(t,LRe,r.borderTopRightRadius),this.borderBottomRightRadius=ir(t,MRe,r.borderBottomRightRadius),this.borderBottomLeftRadius=ir(t,URe,r.borderBottomLeftRadius),this.borderTopStyle=ir(t,QRe,r.borderTopStyle),this.borderRightStyle=ir(t,HRe,r.borderRightStyle),this.borderBottomStyle=ir(t,VRe,r.borderBottomStyle),this.borderLeftStyle=ir(t,zRe,r.borderLeftStyle),this.borderTopWidth=ir(t,$Re,r.borderTopWidth),this.borderRightWidth=ir(t,GRe,r.borderRightWidth),this.borderBottomWidth=ir(t,KRe,r.borderBottomWidth),this.borderLeftWidth=ir(t,qRe,r.borderLeftWidth),this.boxShadow=ir(t,QLe,r.boxShadow),this.color=ir(t,WRe,r.color),this.direction=ir(t,XRe,r.direction),this.display=ir(t,YRe,r.display),this.float=ir(t,ZRe,r.cssFloat),this.fontFamily=ir(t,jLe,r.fontFamily),this.fontSize=ir(t,ILe,r.fontSize),this.fontStyle=ir(t,DLe,r.fontStyle),this.fontVariant=ir(t,OLe,r.fontVariant),this.fontWeight=ir(t,FLe,r.fontWeight),this.letterSpacing=ir(t,eLe,r.letterSpacing),this.lineBreak=ir(t,tLe,r.lineBreak),this.lineHeight=ir(t,rLe,r.lineHeight),this.listStyleImage=ir(t,nLe,r.listStyleImage),this.listStylePosition=ir(t,aLe,r.listStylePosition),this.listStyleType=ir(t,p6,r.listStyleType),this.marginTop=ir(t,sLe,r.marginTop),this.marginRight=ir(t,iLe,r.marginRight),this.marginBottom=ir(t,oLe,r.marginBottom),this.marginLeft=ir(t,lLe,r.marginLeft),this.opacity=ir(t,kLe,r.opacity);var s=ir(t,cLe,r.overflow);this.overflowX=s[0],this.overflowY=s[s.length>1?1:0],this.overflowWrap=ir(t,uLe,r.overflowWrap),this.paddingTop=ir(t,dLe,r.paddingTop),this.paddingRight=ir(t,ALe,r.paddingRight),this.paddingBottom=ir(t,fLe,r.paddingBottom),this.paddingLeft=ir(t,hLe,r.paddingLeft),this.paintOrder=ir(t,HLe,r.paintOrder),this.position=ir(t,pLe,r.position),this.textAlign=ir(t,mLe,r.textAlign),this.textDecorationColor=ir(t,BLe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=ir(t,TLe,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=ir(t,gLe,r.textShadow),this.textTransform=ir(t,vLe,r.textTransform),this.transform=ir(t,xLe,r.transform),this.transformOrigin=ir(t,CLe,r.transformOrigin),this.visibility=ir(t,_Le,r.visibility),this.webkitTextStrokeColor=ir(t,VLe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=ir(t,zLe,r.webkitTextStrokeWidth),this.wordBreak=ir(t,SLe,r.wordBreak),this.zIndex=ir(t,NLe,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return tm(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Ci(this.display,4)||Ci(this.display,33554432)||Ci(this.display,268435456)||Ci(this.display,536870912)||Ci(this.display,67108864)||Ci(this.display,134217728)},e}(),GLe=function(){function e(t,r){this.content=ir(t,PLe,r.content),this.quotes=ir(t,ULe,r.quotes)}return e}(),lz=function(){function e(t,r){this.counterIncrement=ir(t,RLe,r.counterIncrement),this.counterReset=ir(t,LLe,r.counterReset)}return e}(),ir=function(e,t,r){var n=new Fne,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;n.write(a);var s=new One(n.read());switch(t.type){case 2:var i=s.parseComponentValue();return t.parse(e,Ea(i)?i.value:t.initialValue);case 0:return t.parse(e,s.parseComponentValue());case 1:return t.parse(e,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(t.format){case"angle":return I4.parse(e,s.parseComponentValue());case"color":return em.parse(e,s.parseComponentValue());case"image":return pR.parse(e,s.parseComponentValue());case"length":var o=s.parseComponentValue();return wm(o)?o:xo;case"length-percentage":var c=s.parseComponentValue();return di(c)?c:xo;case"time":return Jne.parse(e,s.parseComponentValue())}break}},KLe="data-html2canvas-debug",qLe=function(e){var t=e.getAttribute(KLe);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},g6=function(e,t){var r=qLe(e);return r===1||t===r},nf=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,g6(r,3))debugger;this.styles=new $Le(t,window.getComputedStyle(r,null)),b6(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=T4(this.context,r),g6(r,4)&&(this.flags|=16)}return e}(),WLe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",cz="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",by=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var VC=0;VC<cz.length;VC++)by[cz.charCodeAt(VC)]=VC;var XLe=function(e){var t=e.length*.75,r=e.length,n,a=0,s,i,o,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)s=by[e.charCodeAt(n)],i=by[e.charCodeAt(n+1)],o=by[e.charCodeAt(n+2)],c=by[e.charCodeAt(n+3)],d[a++]=s<<2|i>>4,d[a++]=(i&15)<<4|o>>2,d[a++]=(o&3)<<6|c&63;return u},YLe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=2)r.push(e[n+1]<<8|e[n]);return r},JLe=function(e){for(var t=e.length,r=[],n=0;n<t;n+=4)r.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return r},Qp=5,gR=11,m3=2,ZLe=gR-Qp,Zne=65536>>Qp,e8e=1<<Qp,p3=e8e-1,t8e=1024>>Qp,r8e=Zne+t8e,n8e=r8e,a8e=32,s8e=n8e+a8e,i8e=65536>>gR,o8e=1<<ZLe,l8e=o8e-1,uz=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},c8e=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},u8e=function(e,t){var r=XLe(e),n=Array.isArray(r)?JLe(r):new Uint32Array(r),a=Array.isArray(r)?YLe(r):new Uint16Array(r),s=24,i=uz(a,s/2,n[4]/2),o=n[5]===2?uz(a,(s+n[4])/2):c8e(n,Math.ceil((s+n[4])/4));return new d8e(n[0],n[1],n[2],n[3],i,o)},d8e=function(){function e(t,r,n,a,s,i){this.initialValue=t,this.errorValue=r,this.highStart=n,this.highValueIndex=a,this.index=s,this.data=i}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Qp],r=(r<<m3)+(t&p3),this.data[r];if(t<=65535)return r=this.index[Zne+(t-55296>>Qp)],r=(r<<m3)+(t&p3),this.data[r];if(t<this.highStart)return r=s8e-i8e+(t>>gR),r=this.index[r],r+=t>>Qp&l8e,r=this.index[r],r=(r<<m3)+(t&p3),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),dz="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A8e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var zC=0;zC<dz.length;zC++)A8e[dz.charCodeAt(zC)]=zC;var f8e=1,g3=2,v3=3,Az=4,fz=5,h8e=7,hz=8,x3=9,b3=10,mz=11,pz=12,gz=13,vz=14,y3=15,m8e=function(e){for(var t=[],r=0,n=e.length;r<n;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<n){var s=e.charCodeAt(r++);(s&64512)===56320?t.push(((a&1023)<<10)+(s&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},p8e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var n=[],a=-1,s="";++a<r;){var i=e[a];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(a+1===r||n.length>16384)&&(s+=String.fromCharCode.apply(String,n),n.length=0)}return s},g8e=u8e(WLe),wu="×",w3="÷",v8e=function(e){return g8e.get(e)},x8e=function(e,t,r){var n=r-2,a=t[n],s=t[r-1],i=t[r];if(s===g3&&i===v3)return wu;if(s===g3||s===v3||s===Az||i===g3||i===v3||i===Az)return w3;if(s===hz&&[hz,x3,mz,pz].indexOf(i)!==-1||(s===mz||s===x3)&&(i===x3||i===b3)||(s===pz||s===b3)&&i===b3||i===gz||i===fz||i===h8e||s===f8e)return wu;if(s===gz&&i===vz){for(;a===fz;)a=t[--n];if(a===vz)return wu}if(s===y3&&i===y3){for(var o=0;a===y3;)o++,a=t[--n];if(o%2===0)return wu}return w3},b8e=function(e){var t=m8e(e),r=t.length,n=0,a=0,s=t.map(v8e);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=wu;n<r&&(i=x8e(t,s,++n))===wu;);if(i!==wu||n===r){var o=p8e.apply(null,t.slice(a,n));return a=n,{value:o,done:!1}}return{done:!0,value:null}}}},y8e=function(e){for(var t=b8e(e),r=[],n;!(n=t.next()).done;)n.value&&r.push(n.value.slice());return r},w8e=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=t+"px",n.style.display="block",e.body.appendChild(n),r.selectNode(n);var a=r.getBoundingClientRect(),s=Math.round(a.height);if(e.body.removeChild(n),s===t)return!0}}return!1},E8e=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=t.firstChild,a=j4(n.data).map(function(c){return Vs(c)}),s=0,i={},o=a.every(function(c,u){r.setStart(n,s),r.setEnd(n,s+c.length);var d=r.getBoundingClientRect();s+=c.length;var f=d.x>i.x||d.y>i.y;return i=d,u===0?!0:f});return e.body.removeChild(t),o},C8e=function(){return typeof new Image().crossOrigin<"u"},_8e=function(){return typeof new XMLHttpRequest().responseType=="string"},S8e=function(e){var t=new Image,r=e.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},xz=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},N8e=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var n=t.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var a=new Image,s=t.toDataURL();a.src=s;var i=v6(r,r,0,0,a);return n.fillStyle="red",n.fillRect(0,0,r,r),bz(i).then(function(o){n.drawImage(o,0,0);var c=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=e.createElement("div");return u.style.backgroundImage="url("+s+")",u.style.height=r+"px",xz(c)?bz(v6(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),xz(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},v6=function(e,t,r,n,a){var s="http://www.w3.org/2000/svg",i=document.createElementNS(s,"svg"),o=document.createElementNS(s,"foreignObject");return i.setAttributeNS(null,"width",e.toString()),i.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(a),i},bz=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},fo={get SUPPORT_RANGE_BOUNDS(){var e=w8e(document);return Object.defineProperty(fo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=fo.SUPPORT_RANGE_BOUNDS&&E8e(document);return Object.defineProperty(fo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=S8e(document);return Object.defineProperty(fo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?N8e(document):Promise.resolve(!1);return Object.defineProperty(fo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=C8e();return Object.defineProperty(fo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=_8e();return Object.defineProperty(fo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(fo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(fo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Jy=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),k8e=function(e,t,r,n){var a=j8e(t,r),s=[],i=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(fo.SUPPORT_RANGE_BOUNDS){var c=yz(n,i,o.length).getClientRects();if(c.length>1){var u=vR(o),d=0;u.forEach(function(h){s.push(new Jy(h,gh.fromDOMRectList(e,yz(n,d+i,h.length).getClientRects()))),d+=h.length})}else s.push(new Jy(o,gh.fromDOMRectList(e,c)))}else{var f=n.splitText(o.length);s.push(new Jy(o,B8e(e,n))),n=f}else fo.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),s},B8e=function(e,t){var r=t.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(n,t);var s=T4(e,n);return n.firstChild&&a.replaceChild(n.firstChild,n),s}}return gh.EMPTY},yz=function(e,t,r){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var a=n.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},vR=function(e){if(fo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return y8e(e)},T8e=function(e,t){if(fo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(n){return n.segment})}return F8e(e,t)},j8e=function(e,t){return t.letterSpacing!==0?vR(e):T8e(e,t)},I8e=[32,160,4961,65792,65793,4153,4241],F8e=function(e,t){for(var r=iPe(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),n=[],a,s=function(){if(a.value){var i=a.value.slice(),o=j4(i),c="";o.forEach(function(u){I8e.indexOf(u)===-1?c+=Vs(u):(c.length&&n.push(c),n.push(Vs(u)),c="")}),c.length&&n.push(c)}};!(a=r.next()).done;)s();return n},O8e=function(){function e(t,r,n){this.text=D8e(r.data,n.textTransform),this.textBounds=k8e(t,this.text,n,r)}return e}(),D8e=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(P8e,R8e);case 2:return e.toUpperCase();default:return e}},P8e=/(^|\s|:|-|\(|\))([a-z])/g,R8e=function(e,t,r){return e.length>0?t+r.toUpperCase():e},eae=function(e){Qd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.src=n.currentSrc||n.src,a.intrinsicWidth=n.naturalWidth,a.intrinsicHeight=n.naturalHeight,a.context.cache.addImage(a.src),a}return t}(nf),tae=function(e){Qd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n,a.intrinsicWidth=n.width,a.intrinsicHeight=n.height,a}return t}(nf),rae=function(e){Qd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=new XMLSerializer,i=T4(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(s.serializeToString(n)),a.intrinsicWidth=n.width.baseVal.value,a.intrinsicHeight=n.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(nf),nae=function(e){Qd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(nf),x6=function(e){Qd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.start=n.start,a.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,a}return t}(nf),L8e=[{type:15,flags:0,unit:"px",number:3}],M8e=[{type:16,flags:0,number:50}],U8e=function(e){return e.width>e.height?new gh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new gh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Q8e=function(e){var t=e.type===H8e?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},f5="checkbox",h5="radio",H8e="password",wz=707406591,xR=function(e){Qd(t,e);function t(r,n){var a=e.call(this,r,n)||this;switch(a.type=n.type.toLowerCase(),a.checked=n.checked,a.value=Q8e(n),(a.type===f5||a.type===h5)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=U8e(a.bounds)),a.type){case f5:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=L8e;break;case h5:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=M8e;break}return a}return t}(nf),aae=function(e){Qd(t,e);function t(r,n){var a=e.call(this,r,n)||this,s=n.options[n.selectedIndex||0];return a.value=s&&s.text||"",a}return t}(nf),sae=function(e){Qd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.value=n.value,a}return t}(nf),iae=function(e){Qd(t,e);function t(r,n){var a=e.call(this,r,n)||this;a.src=n.src,a.width=parseInt(n.width,10)||0,a.height=parseInt(n.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){a.tree=lae(r,n.contentWindow.document.documentElement);var s=n.contentWindow.document.documentElement?Xy(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):sh.TRANSPARENT,i=n.contentWindow.document.body?Xy(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):sh.TRANSPARENT;a.backgroundColor=tm(s)?tm(i)?a.styles.backgroundColor:i:s}}catch{}return a}return t}(nf),V8e=["OL","UL","MENU"],G_=function(e,t,r,n){for(var a=t.firstChild,s=void 0;a;a=s)if(s=a.nextSibling,cae(a)&&a.data.trim().length>0)r.textNodes.push(new O8e(e,a,r.styles));else if(Xv(a))if(fae(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return G_(e,o,r,n)});else{var i=oae(e,a);i.styles.isVisible()&&(z8e(a,i,n)?i.flags|=4:$8e(i.styles)&&(i.flags|=2),V8e.indexOf(a.tagName)!==-1&&(i.flags|=8),r.elements.push(i),a.slot,a.shadowRoot?G_(e,a.shadowRoot,i,n):!m5(a)&&!uae(a)&&!p5(a)&&G_(e,a,i,n))}},oae=function(e,t){return y6(t)?new eae(e,t):dae(t)?new tae(e,t):uae(t)?new rae(e,t):G8e(t)?new nae(e,t):K8e(t)?new x6(e,t):q8e(t)?new xR(e,t):p5(t)?new aae(e,t):m5(t)?new sae(e,t):Aae(t)?new iae(e,t):new nf(e,t)},lae=function(e,t){var r=oae(e,t);return r.flags|=4,G_(e,t,r,r),r},z8e=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||bR(e)&&r.styles.isTransparent()},$8e=function(e){return e.isPositioned()||e.isFloating()},cae=function(e){return e.nodeType===Node.TEXT_NODE},Xv=function(e){return e.nodeType===Node.ELEMENT_NODE},b6=function(e){return Xv(e)&&typeof e.style<"u"&&!K_(e)},K_=function(e){return typeof e.className=="object"},G8e=function(e){return e.tagName==="LI"},K8e=function(e){return e.tagName==="OL"},q8e=function(e){return e.tagName==="INPUT"},W8e=function(e){return e.tagName==="HTML"},uae=function(e){return e.tagName==="svg"},bR=function(e){return e.tagName==="BODY"},dae=function(e){return e.tagName==="CANVAS"},Ez=function(e){return e.tagName==="VIDEO"},y6=function(e){return e.tagName==="IMG"},Aae=function(e){return e.tagName==="IFRAME"},Cz=function(e){return e.tagName==="STYLE"},X8e=function(e){return e.tagName==="SCRIPT"},m5=function(e){return e.tagName==="TEXTAREA"},p5=function(e){return e.tagName==="SELECT"},fae=function(e){return e.tagName==="SLOT"},_z=function(e){return e.tagName.indexOf("-")>0},Y8e=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(n){return r.counters[n].pop()})},e.prototype.parse=function(t){var r=this,n=t.counterIncrement,a=t.counterReset,s=!0;n!==null&&n.forEach(function(o){var c=r.counters[o.counter];c&&o.increment!==0&&(s=!1,c.length||c.push(1),c[Math.max(0,c.length-1)]+=o.increment)});var i=[];return s&&a.forEach(function(o){var c=r.counters[o.counter];i.push(o.counter),c||(c=r.counters[o.counter]=[]),c.push(o.reset)}),i},e}(),Sz={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Nz={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},J8e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Z8e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},bv=function(e,t,r,n,a,s){return e<t||e>r?Lw(e,a,s.length>0):n.integers.reduce(function(i,o,c){for(;e>=o;)e-=o,i+=n.values[c];return i},"")+s},hae=function(e,t,r,n){var a="";do r||e--,a=n(e)+a,e/=t;while(e*t>=t);return a},Us=function(e,t,r,n,a){var s=r-t+1;return(e<0?"-":"")+(hae(Math.abs(e),s,n,function(i){return Vs(Math.floor(i%s)+t)})+a)},lp=function(e,t,r){r===void 0&&(r=". ");var n=t.length;return hae(Math.abs(e),n,!1,function(a){return t[Math.floor(a%n)]})+r},Hv=1,S0=2,N0=4,yy=8,Lf=function(e,t,r,n,a,s){if(e<-9999||e>9999)return Lw(e,4,a.length>0);var i=Math.abs(e),o=a;if(i===0)return t[0]+o;for(var c=0;i>0&&c<=4;c++){var u=i%10;u===0&&Ci(s,Hv)&&o!==""?o=t[u]+o:u>1||u===1&&c===0||u===1&&c===1&&Ci(s,S0)||u===1&&c===1&&Ci(s,N0)&&e>100||u===1&&c>1&&Ci(s,yy)?o=t[u]+(c>0?r[c-1]:"")+o:u===1&&c>0&&(o=r[c-1]+o),i=Math.floor(i/10)}return(e<0?n:"")+o},kz="十百千萬",Bz="拾佰仟萬",Tz="マイナス",E3="마이너스",Lw=function(e,t,r){var n=r?". ":"",a=r?"、":"",s=r?", ":"",i=r?" ":"";switch(t){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=Us(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return lp(e,"〇一二三四五六七八九",a);case 6:return bv(e,1,3999,Sz,3,n).toLowerCase();case 7:return bv(e,1,3999,Sz,3,n);case 8:return Us(e,945,969,!1,n);case 9:return Us(e,97,122,!1,n);case 10:return Us(e,65,90,!1,n);case 11:return Us(e,1632,1641,!0,n);case 12:case 49:return bv(e,1,9999,Nz,3,n);case 35:return bv(e,1,9999,Nz,3,n).toLowerCase();case 13:return Us(e,2534,2543,!0,n);case 14:case 30:return Us(e,6112,6121,!0,n);case 15:return lp(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return lp(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return Lf(e,"零一二三四五六七八九",kz,"負",a,S0|N0|yy);case 47:return Lf(e,"零壹貳參肆伍陸柒捌玖",Bz,"負",a,Hv|S0|N0|yy);case 42:return Lf(e,"零一二三四五六七八九",kz,"负",a,S0|N0|yy);case 41:return Lf(e,"零壹贰叁肆伍陆柒捌玖",Bz,"负",a,Hv|S0|N0|yy);case 26:return Lf(e,"〇一二三四五六七八九","十百千万",Tz,a,0);case 25:return Lf(e,"零壱弐参四伍六七八九","拾百千万",Tz,a,Hv|S0|N0);case 31:return Lf(e,"영일이삼사오육칠팔구","십백천만",E3,s,Hv|S0|N0);case 33:return Lf(e,"零一二三四五六七八九","十百千萬",E3,s,0);case 32:return Lf(e,"零壹貳參四五六七八九","拾百千",E3,s,Hv|S0|N0);case 18:return Us(e,2406,2415,!0,n);case 20:return bv(e,1,19999,Z8e,3,n);case 21:return Us(e,2790,2799,!0,n);case 22:return Us(e,2662,2671,!0,n);case 22:return bv(e,1,10999,J8e,3,n);case 23:return lp(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return lp(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Us(e,3302,3311,!0,n);case 28:return lp(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return lp(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return Us(e,3792,3801,!0,n);case 37:return Us(e,6160,6169,!0,n);case 38:return Us(e,4160,4169,!0,n);case 39:return Us(e,2918,2927,!0,n);case 40:return Us(e,1776,1785,!0,n);case 43:return Us(e,3046,3055,!0,n);case 44:return Us(e,3174,3183,!0,n);case 45:return Us(e,3664,3673,!0,n);case 46:return Us(e,3872,3881,!0,n);case 3:default:return Us(e,48,57,!0,n)}},mae="data-html2canvas-ignore",jz=function(){function e(t,r,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new Y8e,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var n=this,a=eMe(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,i=t.defaultView.pageYOffset,o=a.contentWindow,c=o.document,u=nMe(a).then(function(){return ul(n,void 0,void 0,function(){var d,f;return Lo(this,function(h){switch(h.label){case 0:return this.scrolledElements.forEach(oMe),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:h.sent(),h.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,rMe(c)]:[3,4];case 3:h.sent(),h.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(c,f)}).then(function(){return a})]:[2,a]}})})});return c.open(),c.write(sMe(document.doctype)+"<html></html>"),iMe(this.referenceElement.ownerDocument,s,i),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),u},e.prototype.createElementClone=function(t){if(g6(t,2))debugger;if(dae(t))return this.createCanvasClone(t);if(Ez(t))return this.createVideoClone(t);if(Cz(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return y6(r)&&(y6(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),_z(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return C3(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(s,i){return i&&typeof i.cssText=="string"?s+i.cssText:s},""),a=t.cloneNode(!1);return a.textContent=n,a}}catch(s){if(this.context.logger.error("Unable to access cssRules property",s),s.name!=="SecurityError")throw s}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var s=t.getContext("2d"),i=a.getContext("2d");if(i)if(!this.options.allowTaint&&s)i.putImageData(s.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var c=o.getContextAttributes();(c==null?void 0:c.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}i.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,n){(!Xv(r)||!X8e(r)&&!r.hasAttribute(mae)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Xv(r)||!Cz(r))&&t.appendChild(this.cloneNode(r,n))},e.prototype.cloneChildNodes=function(t,r,n){for(var a=this,s=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;s;s=s.nextSibling)if(Xv(s)&&fae(s)&&typeof s.assignedNodes=="function"){var i=s.assignedNodes();i.length&&i.forEach(function(o){return a.appendChildNode(r,o,n)})}else this.appendChildNode(r,s,n)},e.prototype.cloneNode=function(t,r){if(cae(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&Xv(t)&&(b6(t)||K_(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var s=n.getComputedStyle(t),i=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&b6(a)&&(this.clonedReferenceElement=a),bR(a)&&uMe(a);var c=this.counters.parse(new lz(this.context,s)),u=this.resolvePseudoContent(t,a,i,Zy.BEFORE);_z(t)&&(r=!0),Ez(t)||this.cloneChildNodes(t,a,r),u&&a.insertBefore(u,a.firstChild);var d=this.resolvePseudoContent(t,a,o,Zy.AFTER);return d&&a.appendChild(d),this.counters.pop(c),(s&&(this.options.copyStyles||K_(t))&&!Aae(t)||r)&&C3(s,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(m5(t)||p5(t))&&(m5(a)||p5(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,n,a){var s=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new lz(this.context,n));var c=new GLe(this.context,n),u=o.createElement("html2canvaspseudoelement");C3(n,u),c.content.forEach(function(f){if(f.type===0)u.appendChild(o.createTextNode(f.value));else if(f.type===22){var h=o.createElement("img");h.src=f.value,h.style.opacity="1",u.appendChild(h)}else if(f.type===18){if(f.name==="attr"){var p=f.values.filter(Ea);p.length&&u.appendChild(o.createTextNode(t.getAttribute(p[0].value)||""))}else if(f.name==="counter"){var g=f.values.filter($x),v=g[0],b=g[1];if(v&&Ea(v)){var y=s.counters.getCounterValue(v.value),C=b&&Ea(b)?p6.parse(s.context,b.value):3;u.appendChild(o.createTextNode(Lw(y,C,!1)))}}else if(f.name==="counters"){var N=f.values.filter($x),v=N[0],T=N[1],b=N[2];if(v&&Ea(v)){var S=s.counters.getCounterValues(v.value),B=b&&Ea(b)?p6.parse(s.context,b.value):3,w=T&&T.type===0?T.value:"",_=S.map(function(D){return Lw(D,B,!1)}).join(w);u.appendChild(o.createTextNode(_))}}}else if(f.type===20)switch(f.value){case"open-quote":u.appendChild(o.createTextNode(oz(c.quotes,s.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(oz(c.quotes,--s.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(f.value))}}),u.className=w6+" "+E6;var d=a===Zy.BEFORE?" "+w6:" "+E6;return K_(r)?r.className.baseValue+=d:r.className+=d,u}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),Zy;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Zy||(Zy={}));var eMe=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(mae,"true"),e.body.appendChild(r),r},tMe=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},rMe=function(e){return Promise.all([].slice.call(e.images,0).map(tMe))},nMe=function(e){return new Promise(function(t,r){var n=e.contentWindow;if(!n)return r("No window assigned for iframe");var a=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var s=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(s),t(e))},50)}})},aMe=["all","d","content"],C3=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e.item(r);aMe.indexOf(n)===-1&&t.style.setProperty(n,e.getPropertyValue(n))}return t},sMe=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},iMe=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},oMe=function(e){var t=e[0],r=e[1],n=e[2];t.scrollLeft=r,t.scrollTop=n},lMe=":before",cMe=":after",w6="___html2canvas___pseudoelement_before",E6="___html2canvas___pseudoelement_after",Iz=`{
    content: "" !important;
    display: none !important;
}`,uMe=function(e){dMe(e,"."+w6+lMe+Iz+`
         .`+E6+cMe+Iz)},dMe=function(e,t){var r=e.ownerDocument;if(r){var n=r.createElement("style");n.textContent=t,e.appendChild(n)}},pae=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),AMe=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(S3(t)||pMe(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return ul(this,void 0,void 0,function(){var r,n,a,s,i=this;return Lo(this,function(o){switch(o.label){case 0:return r=pae.isSameOrigin(t),n=!_3(t)&&this._options.useCORS===!0&&fo.SUPPORT_CORS_IMAGES&&!r,a=!_3(t)&&!r&&!S3(t)&&typeof this._options.proxy=="string"&&fo.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!_3(t)&&!S3(t)&&!a&&!n?[2]:(s=t,a?[4,this.proxy(s)]:[3,2]);case 1:s=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(c,u){var d=new Image;d.onload=function(){return c(d)},d.onerror=u,(gMe(s)||n)&&(d.crossOrigin="anonymous"),d.src=s,d.complete===!0&&setTimeout(function(){return c(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(s,i){var o=fo.SUPPORT_RESPONSE_TYPE?"blob":"text",c=new XMLHttpRequest;c.onload=function(){if(c.status===200)if(o==="text")s(c.response);else{var f=new FileReader;f.addEventListener("load",function(){return s(f.result)},!1),f.addEventListener("error",function(h){return i(h)},!1),f.readAsDataURL(c.response)}else i("Failed to proxy resource "+a+" with status code "+c.status)},c.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(c.open("GET",""+n+u+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&c instanceof XMLHttpRequest&&(c.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;c.timeout=d,c.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+a)}}c.send()})},e}(),fMe=/^data:image\/svg\+xml/i,hMe=/^data:image\/.*;base64,/i,mMe=/^data:image\/.*/i,pMe=function(e){return fo.SUPPORT_SVG_DRAWING||!vMe(e)},_3=function(e){return mMe.test(e)},gMe=function(e){return hMe.test(e)},S3=function(e){return e.substr(0,4)==="blob"},vMe=function(e){return e.substr(-3).toLowerCase()==="svg"||fMe.test(e)},ar=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),yv=function(e,t,r){return new ar(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},$C=function(){function e(t,r,n,a){this.type=1,this.start=t,this.startControl=r,this.endControl=n,this.end=a}return e.prototype.subdivide=function(t,r){var n=yv(this.start,this.startControl,t),a=yv(this.startControl,this.endControl,t),s=yv(this.endControl,this.end,t),i=yv(n,a,t),o=yv(a,s,t),c=yv(i,o,t);return r?new e(this.start,n,i,c):new e(c,o,s,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Cu=function(e){return e.type===1},xMe=function(){function e(t){var r=t.styles,n=t.bounds,a=xy(r.borderTopLeftRadius,n.width,n.height),s=a[0],i=a[1],o=xy(r.borderTopRightRadius,n.width,n.height),c=o[0],u=o[1],d=xy(r.borderBottomRightRadius,n.width,n.height),f=d[0],h=d[1],p=xy(r.borderBottomLeftRadius,n.width,n.height),g=p[0],v=p[1],b=[];b.push((s+c)/n.width),b.push((g+f)/n.width),b.push((i+v)/n.height),b.push((u+h)/n.height);var y=Math.max.apply(Math,b);y>1&&(s/=y,i/=y,c/=y,u/=y,f/=y,h/=y,g/=y,v/=y);var C=n.width-c,N=n.height-h,T=n.width-f,S=n.height-v,B=r.borderTopWidth,w=r.borderRightWidth,_=r.borderBottomWidth,F=r.borderLeftWidth,M=Oa(r.paddingTop,t.bounds.width),D=Oa(r.paddingRight,t.bounds.width),I=Oa(r.paddingBottom,t.bounds.width),U=Oa(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=s>0||i>0?Xa(n.left+F/3,n.top+B/3,s-F/3,i-B/3,ia.TOP_LEFT):new ar(n.left+F/3,n.top+B/3),this.topRightBorderDoubleOuterBox=s>0||i>0?Xa(n.left+C,n.top+B/3,c-w/3,u-B/3,ia.TOP_RIGHT):new ar(n.left+n.width-w/3,n.top+B/3),this.bottomRightBorderDoubleOuterBox=f>0||h>0?Xa(n.left+T,n.top+N,f-w/3,h-_/3,ia.BOTTOM_RIGHT):new ar(n.left+n.width-w/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=g>0||v>0?Xa(n.left+F/3,n.top+S,g-F/3,v-_/3,ia.BOTTOM_LEFT):new ar(n.left+F/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=s>0||i>0?Xa(n.left+F*2/3,n.top+B*2/3,s-F*2/3,i-B*2/3,ia.TOP_LEFT):new ar(n.left+F*2/3,n.top+B*2/3),this.topRightBorderDoubleInnerBox=s>0||i>0?Xa(n.left+C,n.top+B*2/3,c-w*2/3,u-B*2/3,ia.TOP_RIGHT):new ar(n.left+n.width-w*2/3,n.top+B*2/3),this.bottomRightBorderDoubleInnerBox=f>0||h>0?Xa(n.left+T,n.top+N,f-w*2/3,h-_*2/3,ia.BOTTOM_RIGHT):new ar(n.left+n.width-w*2/3,n.top+n.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=g>0||v>0?Xa(n.left+F*2/3,n.top+S,g-F*2/3,v-_*2/3,ia.BOTTOM_LEFT):new ar(n.left+F*2/3,n.top+n.height-_*2/3),this.topLeftBorderStroke=s>0||i>0?Xa(n.left+F/2,n.top+B/2,s-F/2,i-B/2,ia.TOP_LEFT):new ar(n.left+F/2,n.top+B/2),this.topRightBorderStroke=s>0||i>0?Xa(n.left+C,n.top+B/2,c-w/2,u-B/2,ia.TOP_RIGHT):new ar(n.left+n.width-w/2,n.top+B/2),this.bottomRightBorderStroke=f>0||h>0?Xa(n.left+T,n.top+N,f-w/2,h-_/2,ia.BOTTOM_RIGHT):new ar(n.left+n.width-w/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=g>0||v>0?Xa(n.left+F/2,n.top+S,g-F/2,v-_/2,ia.BOTTOM_LEFT):new ar(n.left+F/2,n.top+n.height-_/2),this.topLeftBorderBox=s>0||i>0?Xa(n.left,n.top,s,i,ia.TOP_LEFT):new ar(n.left,n.top),this.topRightBorderBox=c>0||u>0?Xa(n.left+C,n.top,c,u,ia.TOP_RIGHT):new ar(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||h>0?Xa(n.left+T,n.top+N,f,h,ia.BOTTOM_RIGHT):new ar(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=g>0||v>0?Xa(n.left,n.top+S,g,v,ia.BOTTOM_LEFT):new ar(n.left,n.top+n.height),this.topLeftPaddingBox=s>0||i>0?Xa(n.left+F,n.top+B,Math.max(0,s-F),Math.max(0,i-B),ia.TOP_LEFT):new ar(n.left+F,n.top+B),this.topRightPaddingBox=c>0||u>0?Xa(n.left+Math.min(C,n.width-w),n.top+B,C>n.width+w?0:Math.max(0,c-w),Math.max(0,u-B),ia.TOP_RIGHT):new ar(n.left+n.width-w,n.top+B),this.bottomRightPaddingBox=f>0||h>0?Xa(n.left+Math.min(T,n.width-F),n.top+Math.min(N,n.height-_),Math.max(0,f-w),Math.max(0,h-_),ia.BOTTOM_RIGHT):new ar(n.left+n.width-w,n.top+n.height-_),this.bottomLeftPaddingBox=g>0||v>0?Xa(n.left+F,n.top+Math.min(S,n.height-_),Math.max(0,g-F),Math.max(0,v-_),ia.BOTTOM_LEFT):new ar(n.left+F,n.top+n.height-_),this.topLeftContentBox=s>0||i>0?Xa(n.left+F+U,n.top+B+M,Math.max(0,s-(F+U)),Math.max(0,i-(B+M)),ia.TOP_LEFT):new ar(n.left+F+U,n.top+B+M),this.topRightContentBox=c>0||u>0?Xa(n.left+Math.min(C,n.width+F+U),n.top+B+M,C>n.width+F+U?0:c-F+U,u-(B+M),ia.TOP_RIGHT):new ar(n.left+n.width-(w+D),n.top+B+M),this.bottomRightContentBox=f>0||h>0?Xa(n.left+Math.min(T,n.width-(F+U)),n.top+Math.min(N,n.height+B+M),Math.max(0,f-(w+D)),h-(_+I),ia.BOTTOM_RIGHT):new ar(n.left+n.width-(w+D),n.top+n.height-(_+I)),this.bottomLeftContentBox=g>0||v>0?Xa(n.left+F+U,n.top+S,Math.max(0,g-(F+U)),v-(_+I),ia.BOTTOM_LEFT):new ar(n.left+F+U,n.top+n.height-(_+I))}return e}(),ia;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ia||(ia={}));var Xa=function(e,t,r,n,a){var s=4*((Math.sqrt(2)-1)/3),i=r*s,o=n*s,c=e+r,u=t+n;switch(a){case ia.TOP_LEFT:return new $C(new ar(e,u),new ar(e,u-o),new ar(c-i,t),new ar(c,t));case ia.TOP_RIGHT:return new $C(new ar(e,t),new ar(e+i,t),new ar(c,u-o),new ar(c,u));case ia.BOTTOM_RIGHT:return new $C(new ar(c,t),new ar(c,t+o),new ar(e+i,u),new ar(e,u));case ia.BOTTOM_LEFT:default:return new $C(new ar(c,u),new ar(c-i,u),new ar(e,t+o),new ar(e,t))}},g5=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},bMe=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},v5=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},yMe=function(){function e(t,r,n){this.offsetX=t,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return e}(),GC=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),wMe=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),EMe=function(e){return e.type===0},gae=function(e){return e.type===1},CMe=function(e){return e.type===2},Fz=function(e,t){return e.length===t.length?e.some(function(r,n){return r===t[n]}):!1},_Me=function(e,t,r,n,a){return e.map(function(s,i){switch(i){case 0:return s.add(t,r);case 1:return s.add(t+n,r);case 2:return s.add(t+n,r+a);case 3:return s.add(t,r+a)}return s})},vae=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),xae=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new xMe(this.container),this.container.styles.opacity<1&&this.effects.push(new wMe(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,s=this.container.styles.transform;this.effects.push(new yMe(n,a,s))}if(this.container.styles.overflowX!==0){var i=g5(this.curves),o=v5(this.curves);Fz(i,o)?this.effects.push(new GC(i,6)):(this.effects.push(new GC(i,2)),this.effects.push(new GC(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,a=this.effects.slice(0);n;){var s=n.effects.filter(function(c){return!gae(c)});if(r||n.container.styles.position!==0||!n.parent){if(a.unshift.apply(a,s),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=g5(n.curves),o=v5(n.curves);Fz(i,o)||a.unshift(new GC(o,6))}}else a.unshift.apply(a,s);n=n.parent}return a.filter(function(c){return Ci(c.target,t)})},e}(),C6=function(e,t,r,n){e.container.elements.forEach(function(a){var s=Ci(a.flags,4),i=Ci(a.flags,2),o=new xae(a,e);Ci(a.styles.display,2048)&&n.push(o);var c=Ci(a.flags,8)?[]:n;if(s||i){var u=s||a.styles.isPositioned()?r:t,d=new vae(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var f=a.styles.zIndex.order;if(f<0){var h=0;u.negativeZIndex.some(function(g,v){return f>g.element.container.styles.zIndex.order?(h=v,!1):h>0}),u.negativeZIndex.splice(h,0,d)}else if(f>0){var p=0;u.positiveZIndex.some(function(g,v){return f>=g.element.container.styles.zIndex.order?(p=v+1,!1):p>0}),u.positiveZIndex.splice(p,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else a.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);C6(o,d,s?d:r,c)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),C6(o,t,r,c);Ci(a.flags,8)&&bae(a,c)})},bae=function(e,t){for(var r=e instanceof x6?e.start:1,n=e instanceof x6?e.reversed:!1,a=0;a<t.length;a++){var s=t[a];s.container instanceof nae&&typeof s.container.value=="number"&&s.container.value!==0&&(r=s.container.value),s.listValue=Lw(r,s.container.styles.listStyleType,!0),r+=n?-1:1}},SMe=function(e){var t=new xae(e,null),r=new vae(t),n=[];return C6(t,r,r,n),bae(t.container,n),r},Oz=function(e,t){switch(t){case 0:return Tu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Tu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Tu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Tu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},NMe=function(e,t){switch(t){case 0:return Tu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Tu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Tu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Tu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},kMe=function(e,t){switch(t){case 0:return Tu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Tu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Tu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Tu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},BMe=function(e,t){switch(t){case 0:return KC(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return KC(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return KC(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return KC(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},KC=function(e,t){var r=[];return Cu(e)?r.push(e.subdivide(.5,!1)):r.push(e),Cu(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Tu=function(e,t,r,n){var a=[];return Cu(e)?a.push(e.subdivide(.5,!1)):a.push(e),Cu(r)?a.push(r.subdivide(.5,!0)):a.push(r),Cu(n)?a.push(n.subdivide(.5,!0).reverse()):a.push(n),Cu(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},yae=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},x5=function(e){var t=e.styles,r=e.bounds,n=Oa(t.paddingLeft,r.width),a=Oa(t.paddingRight,r.width),s=Oa(t.paddingTop,r.width),i=Oa(t.paddingBottom,r.width);return r.add(n+t.borderLeftWidth,s+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+n+a),-(t.borderTopWidth+t.borderBottomWidth+s+i))},TMe=function(e,t){return e===0?t.bounds:e===2?x5(t):yae(t)},jMe=function(e,t){return e===0?t.bounds:e===2?x5(t):yae(t)},N3=function(e,t,r){var n=TMe(Vv(e.styles.backgroundOrigin,t),e),a=jMe(Vv(e.styles.backgroundClip,t),e),s=IMe(Vv(e.styles.backgroundSize,t),r,n),i=s[0],o=s[1],c=xy(Vv(e.styles.backgroundPosition,t),n.width-i,n.height-o),u=FMe(Vv(e.styles.backgroundRepeat,t),c,s,n,a),d=Math.round(n.left+c[0]),f=Math.round(n.top+c[1]);return[u,d,f,i,o]},wv=function(e){return Ea(e)&&e.value===bx.AUTO},qC=function(e){return typeof e=="number"},IMe=function(e,t,r){var n=t[0],a=t[1],s=t[2],i=e[0],o=e[1];if(!i)return[0,0];if(di(i)&&o&&di(o))return[Oa(i,r.width),Oa(o,r.height)];var c=qC(s);if(Ea(i)&&(i.value===bx.CONTAIN||i.value===bx.COVER)){if(qC(s)){var u=r.width/r.height;return u<s!=(i.value===bx.COVER)?[r.width,r.width/s]:[r.height*s,r.height]}return[r.width,r.height]}var d=qC(n),f=qC(a),h=d||f;if(wv(i)&&(!o||wv(o))){if(d&&f)return[n,a];if(!c&&!h)return[r.width,r.height];if(h&&c){var p=d?n:a*s,g=f?a:n/s;return[p,g]}var v=d?n:r.width,b=f?a:r.height;return[v,b]}if(c){var y=0,C=0;return di(i)?y=Oa(i,r.width):di(o)&&(C=Oa(o,r.height)),wv(i)?y=C*s:(!o||wv(o))&&(C=y/s),[y,C]}var N=null,T=null;if(di(i)?N=Oa(i,r.width):o&&di(o)&&(T=Oa(o,r.height)),N!==null&&(!o||wv(o))&&(T=d&&f?N/n*a:r.height),T!==null&&wv(i)&&(N=d&&f?T/a*n:r.width),N!==null&&T!==null)return[N,T];throw new Error("Unable to calculate background-size for element")},Vv=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},FMe=function(e,t,r,n,a){var s=t[0],i=t[1],o=r[0],c=r[1];switch(e){case 2:return[new ar(Math.round(n.left),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(n.top+i)),new ar(Math.round(n.left+n.width),Math.round(c+n.top+i)),new ar(Math.round(n.left),Math.round(c+n.top+i))];case 3:return[new ar(Math.round(n.left+s),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.top)),new ar(Math.round(n.left+s+o),Math.round(n.height+n.top)),new ar(Math.round(n.left+s),Math.round(n.height+n.top))];case 1:return[new ar(Math.round(n.left+s),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i)),new ar(Math.round(n.left+s+o),Math.round(n.top+i+c)),new ar(Math.round(n.left+s),Math.round(n.top+i+c))];default:return[new ar(Math.round(a.left),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.top)),new ar(Math.round(a.left+a.width),Math.round(a.height+a.top)),new ar(Math.round(a.left),Math.round(a.height+a.top))]}},OMe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Dz="Hidden Text",DMe=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var n=this._document.createElement("div"),a=this._document.createElement("img"),s=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),a.src=OMe,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",s.style.fontFamily=t,s.style.fontSize=r,s.style.margin="0",s.style.padding="0",s.appendChild(this._document.createTextNode(Dz)),n.appendChild(s),n.appendChild(a);var o=a.offsetTop-s.offsetTop+2;n.removeChild(s),n.appendChild(this._document.createTextNode(Dz)),n.style.lineHeight="normal",a.style.verticalAlign="super";var c=a.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:c}},e.prototype.getMetrics=function(t,r){var n=t+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(t,r)),this._data[n]},e}(),wae=function(){function e(t,r){this.context=t,this.options=r}return e}(),PMe=1e4,RMe=function(e){Qd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a._activeEffects=[],a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),n.canvas||(a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px"),a.fontMetrics=new DMe(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),a}return t.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return n.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),CMe(r)&&(this.ctx.globalAlpha=r.opacity),EMe(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),gae(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return ul(this,void 0,void 0,function(){var n;return Lo(this,function(a){switch(a.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return ul(this,void 0,void 0,function(){return Lo(this,function(n){switch(n.label){case 0:if(Ci(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,n,a){var s=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var i=vR(r.text);i.reduce(function(o,c){return s.ctx.fillText(c,o,r.bounds.top+a),o+s.ctx.measureText(c).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),a=HMe(r.fontFamily).join(", "),s=j2(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,s,a].join(" "),a,s]},t.prototype.renderTextNode=function(r,n){return ul(this,void 0,void 0,function(){var a,s,i,o,c,u,d,f,h=this;return Lo(this,function(p){return a=this.createFontStyle(n),s=a[0],i=a[1],o=a[2],this.ctx.font=s,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",c=this.fontMetrics.getMetrics(i,o),u=c.baseline,d=c.middle,f=n.paintOrder,r.textBounds.forEach(function(g){f.forEach(function(v){switch(v){case 0:h.ctx.fillStyle=Ui(n.color),h.renderTextWithLetterSpacing(g,n.letterSpacing,u);var b=n.textShadow;b.length&&g.text.trim().length&&(b.slice(0).reverse().forEach(function(y){h.ctx.shadowColor=Ui(y.color),h.ctx.shadowOffsetX=y.offsetX.number*h.options.scale,h.ctx.shadowOffsetY=y.offsetY.number*h.options.scale,h.ctx.shadowBlur=y.blur.number,h.renderTextWithLetterSpacing(g,n.letterSpacing,u)}),h.ctx.shadowColor="",h.ctx.shadowOffsetX=0,h.ctx.shadowOffsetY=0,h.ctx.shadowBlur=0),n.textDecorationLine.length&&(h.ctx.fillStyle=Ui(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(y){switch(y){case 1:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top+u),g.bounds.width,1);break;case 2:h.ctx.fillRect(g.bounds.left,Math.round(g.bounds.top),g.bounds.width,1);break;case 3:h.ctx.fillRect(g.bounds.left,Math.ceil(g.bounds.top+d),g.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&g.text.trim().length&&(h.ctx.strokeStyle=Ui(n.webkitTextStrokeColor),h.ctx.lineWidth=n.webkitTextStrokeWidth,h.ctx.lineJoin=window.chrome?"miter":"round",h.ctx.strokeText(g.text,g.bounds.left,g.bounds.top+u)),h.ctx.strokeStyle="",h.ctx.lineWidth=0,h.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,n,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var s=x5(r),i=v5(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,s.left,s.top,s.width,s.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return ul(this,void 0,void 0,function(){var n,a,s,i,o,c,C,C,u,d,f,h,T,p,g,S,v,b,y,C,N,T,S;return Lo(this,function(B){switch(B.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,a=r.curves,s=n.styles,i=0,o=n.textNodes,B.label=1;case 1:return i<o.length?(c=o[i],[4,this.renderTextNode(c,s)]):[3,4];case 2:B.sent(),B.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof eae))return[3,8];B.label=5;case 5:return B.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return C=B.sent(),this.renderReplacedElement(n,a,C),[3,8];case 7:return B.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof tae&&this.renderReplacedElement(n,a,n.canvas),!(n instanceof rae))return[3,12];B.label=9;case 9:return B.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return C=B.sent(),this.renderReplacedElement(n,a,C),[3,12];case 11:return B.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof iae&&n.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=B.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),B.label=14;case 14:if(n instanceof xR&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===f5?n.checked&&(this.ctx.save(),this.path([new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79),new ar(n.bounds.left+f*.16,n.bounds.top+f*.5549),new ar(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new ar(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new ar(n.bounds.left+f*.72983,n.bounds.top+f*.23),new ar(n.bounds.left+f*.84,n.bounds.top+f*.34085),new ar(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Ui(wz),this.ctx.fill(),this.ctx.restore()):n.type===h5&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Ui(wz),this.ctx.fill(),this.ctx.restore())),LMe(n)&&n.value.length){switch(h=this.createFontStyle(s),T=h[0],p=h[1],g=this.fontMetrics.getMetrics(T,p).baseline,this.ctx.font=T,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=UMe(n.styles.textAlign),S=x5(n),v=0,n.styles.textAlign){case 1:v+=S.width/2;break;case 2:v+=S.width;break}b=S.add(v,0,0,-S.height/2+1),this.ctx.save(),this.path([new ar(S.left,S.top),new ar(S.left+S.width,S.top),new ar(S.left+S.width,S.top+S.height),new ar(S.left,S.top+S.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Jy(n.value,b),s.letterSpacing,g),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ci(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(y=n.styles.listStyleImage,y.type!==0)return[3,18];C=void 0,N=y.url,B.label=15;case 15:return B.trys.push([15,17,,18]),[4,this.context.cache.match(N)];case 16:return C=B.sent(),this.ctx.drawImage(C,n.bounds.left-(C.width+10),n.bounds.top),[3,18];case 17:return B.sent(),this.context.logger.error("Error loading list-style-image "+N),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(T=this.createFontStyle(s)[0],this.ctx.font=T,this.ctx.fillStyle=Ui(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",S=new gh(n.bounds.left,n.bounds.top+Oa(n.styles.paddingTop,n.bounds.width),n.bounds.width,sz(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Jy(r.listValue,S),s.letterSpacing,sz(s.lineHeight,s.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),B.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return ul(this,void 0,void 0,function(){var n,a,y,s,i,y,o,c,y,u,d,y,f,h,y,p,g,y,v,b,y;return Lo(this,function(C){switch(C.label){case 0:if(Ci(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:C.sent(),n=0,a=r.negativeZIndex,C.label=2;case 2:return n<a.length?(y=a[n],[4,this.renderStack(y)]):[3,5];case 3:C.sent(),C.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:C.sent(),s=0,i=r.nonInlineLevel,C.label=7;case 7:return s<i.length?(y=i[s],[4,this.renderNode(y)]):[3,10];case 8:C.sent(),C.label=9;case 9:return s++,[3,7];case 10:o=0,c=r.nonPositionedFloats,C.label=11;case 11:return o<c.length?(y=c[o],[4,this.renderStack(y)]):[3,14];case 12:C.sent(),C.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,C.label=15;case 15:return u<d.length?(y=d[u],[4,this.renderStack(y)]):[3,18];case 16:C.sent(),C.label=17;case 17:return u++,[3,15];case 18:f=0,h=r.inlineLevel,C.label=19;case 19:return f<h.length?(y=h[f],[4,this.renderNode(y)]):[3,22];case 20:C.sent(),C.label=21;case 21:return f++,[3,19];case 22:p=0,g=r.zeroOrAutoZIndexOrTransformedOrOpacity,C.label=23;case 23:return p<g.length?(y=g[p],[4,this.renderStack(y)]):[3,26];case 24:C.sent(),C.label=25;case 25:return p++,[3,23];case 26:v=0,b=r.positiveZIndex,C.label=27;case 27:return v<b.length?(y=b[v],[4,this.renderStack(y)]):[3,30];case 28:C.sent(),C.label=29;case 29:return v++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var n=this;r.forEach(function(a,s){var i=Cu(a)?a.start:a;s===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Cu(a)&&n.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,n,a,s){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(a,s),this.ctx.fill(),this.ctx.translate(-a,-s)},t.prototype.resizeImage=function(r,n,a){var s;if(r.width===n&&r.height===a)return r;var i=(s=this.canvas.ownerDocument)!==null&&s!==void 0?s:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,a);var c=o.getContext("2d");return c.drawImage(r,0,0,r.width,r.height,0,0,n,a),o},t.prototype.renderBackgroundImage=function(r){return ul(this,void 0,void 0,function(){var n,a,s,i,o,c;return Lo(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,a=function(d){var f,h,p,M,H,Y,U,P,_,g,M,H,Y,U,P,v,b,y,C,N,T,S,B,w,_,F,M,D,I,U,P,X,H,Y,V,z,G,re,R,q,J,te;return Lo(this,function(ie){switch(ie.label){case 0:if(d.type!==0)return[3,5];f=void 0,h=d.url,ie.label=1;case 1:return ie.trys.push([1,3,,4]),[4,s.context.cache.match(h)];case 2:return f=ie.sent(),[3,4];case 3:return ie.sent(),s.context.logger.error("Error loading background-image "+h),[3,4];case 4:return f&&(p=N3(r,n,[f.width,f.height,f.width/f.height]),M=p[0],H=p[1],Y=p[2],U=p[3],P=p[4],_=s.ctx.createPattern(s.resizeImage(f,U,P),"repeat"),s.renderRepeat(M,_,H,Y)),[3,6];case 5:ERe(d)?(g=N3(r,n,[null,null,null]),M=g[0],H=g[1],Y=g[2],U=g[3],P=g[4],v=vRe(d.angle,U,P),b=v[0],y=v[1],C=v[2],N=v[3],T=v[4],S=document.createElement("canvas"),S.width=U,S.height=P,B=S.getContext("2d"),w=B.createLinearGradient(y,N,C,T),nz(d.stops,b).forEach(function(Ae){return w.addColorStop(Ae.stop,Ui(Ae.color))}),B.fillStyle=w,B.fillRect(0,0,U,P),U>0&&P>0&&(_=s.ctx.createPattern(S,"repeat"),s.renderRepeat(M,_,H,Y))):CRe(d)&&(F=N3(r,n,[null,null,null]),M=F[0],D=F[1],I=F[2],U=F[3],P=F[4],X=d.position.length===0?[mR]:d.position,H=Oa(X[0],U),Y=Oa(X[X.length-1],P),V=xRe(d,H,Y,U,P),z=V[0],G=V[1],z>0&&G>0&&(re=s.ctx.createRadialGradient(D+H,I+Y,0,D+H,I+Y,z),nz(d.stops,z*2).forEach(function(Ae){return re.addColorStop(Ae.stop,Ui(Ae.color))}),s.path(M),s.ctx.fillStyle=re,z!==G?(R=r.bounds.left+.5*r.bounds.width,q=r.bounds.top+.5*r.bounds.height,J=G/z,te=1/J,s.ctx.save(),s.ctx.translate(R,q),s.ctx.transform(1,0,0,J,0,0),s.ctx.translate(-R,-q),s.ctx.fillRect(D,te*(I-q)+q,U,P*te),s.ctx.restore()):s.ctx.fill())),ie.label=6;case 6:return n--,[2]}})},s=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(c=o[i],[5,a(c)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,n,a){return ul(this,void 0,void 0,function(){return Lo(this,function(s){return this.path(Oz(a,n)),this.ctx.fillStyle=Ui(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,n,a,s){return ul(this,void 0,void 0,function(){var i,o;return Lo(this,function(c){switch(c.label){case 0:return n<3?[4,this.renderSolidBorder(r,a,s)]:[3,2];case 1:return c.sent(),[2];case 2:return i=NMe(s,a),this.path(i),this.ctx.fillStyle=Ui(r),this.ctx.fill(),o=kMe(s,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return ul(this,void 0,void 0,function(){var n,a,s,i,o,c,u,d,f=this;return Lo(this,function(h){switch(h.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,a=!tm(n.backgroundColor)||n.backgroundImage.length,s=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=MMe(Vv(n.backgroundClip,0),r.curves),a||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),tm(n.backgroundColor)||(this.ctx.fillStyle=Ui(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:h.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(p){f.ctx.save();var g=g5(r.curves),v=p.inset?0:PMe,b=_Me(g,-v+(p.inset?1:-1)*p.spread.number,(p.inset?1:-1)*p.spread.number,p.spread.number*(p.inset?-2:2),p.spread.number*(p.inset?-2:2));p.inset?(f.path(g),f.ctx.clip(),f.mask(b)):(f.mask(g),f.ctx.clip(),f.path(b)),f.ctx.shadowOffsetX=p.offsetX.number+v,f.ctx.shadowOffsetY=p.offsetY.number,f.ctx.shadowColor=Ui(p.color),f.ctx.shadowBlur=p.blur.number,f.ctx.fillStyle=p.inset?Ui(p.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),h.label=2;case 2:o=0,c=0,u=s,h.label=3;case 3:return c<u.length?(d=u[c],d.style!==0&&!tm(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return h.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return h.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return h.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:h.sent(),h.label=11;case 11:o++,h.label=12;case 12:return c++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,n,a,s,i){return ul(this,void 0,void 0,function(){var o,c,u,d,f,h,p,g,v,b,y,C,N,T,S,B,S,B;return Lo(this,function(w){return this.ctx.save(),o=BMe(s,a),c=Oz(s,a),i===2&&(this.path(c),this.ctx.clip()),Cu(c[0])?(u=c[0].start.x,d=c[0].start.y):(u=c[0].x,d=c[0].y),Cu(c[1])?(f=c[1].end.x,h=c[1].end.y):(f=c[1].x,h=c[1].y),a===0||a===2?p=Math.abs(u-f):p=Math.abs(d-h),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(c.slice(0,2)),g=n<3?n*3:n*2,v=n<3?n*2:n,i===3&&(g=n,v=n),b=!0,p<=g*2?b=!1:p<=g*2+v?(y=p/(2*g+v),g*=y,v*=y):(C=Math.floor((p+v)/(g+v)),N=(p-C*g)/(C-1),T=(p-(C+1)*g)/C,v=T<=0||Math.abs(v-N)<Math.abs(v-T)?N:T),b&&(i===3?this.ctx.setLineDash([0,g+v]):this.ctx.setLineDash([g,v])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Ui(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Cu(c[0])&&(S=c[3],B=c[0],this.ctx.beginPath(),this.formatPath([new ar(S.end.x,S.end.y),new ar(B.start.x,B.start.y)]),this.ctx.stroke()),Cu(c[1])&&(S=c[1],B=c[2],this.ctx.beginPath(),this.formatPath([new ar(S.end.x,S.end.y),new ar(B.start.x,B.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return ul(this,void 0,void 0,function(){var n;return Lo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=SMe(r),[4,this.renderStack(n)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(wae),LMe=function(e){return e instanceof sae||e instanceof aae?!0:e instanceof xR&&e.type!==h5&&e.type!==f5},MMe=function(e,t){switch(e){case 0:return g5(t);case 2:return bMe(t);case 1:default:return v5(t)}},UMe=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},QMe=["-apple-system","system-ui"],HMe=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return QMe.indexOf(t)===-1}):e},VMe=function(e){Qd(t,e);function t(r,n){var a=e.call(this,r,n)||this;return a.canvas=n.canvas?n.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=n,a.canvas.width=Math.floor(n.width*n.scale),a.canvas.height=Math.floor(n.height*n.scale),a.canvas.style.width=n.width+"px",a.canvas.style.height=n.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-n.x,-n.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),a}return t.prototype.render=function(r){return ul(this,void 0,void 0,function(){var n,a;return Lo(this,function(s){switch(s.label){case 0:return n=v6(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,zMe(n)];case 1:return a=s.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Ui(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(wae),zMe=function(e){return new Promise(function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},$Me=function(){function e(t){var r=t.id,n=t.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,SC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,SC([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,SC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,SC([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),GMe=function(){function e(t,r){var n;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new $Me({id:this.instanceName,enabled:t.logging}),this.cache=(n=t.cache)!==null&&n!==void 0?n:new AMe(this,t)}return e.instanceCount=1,e}(),b5=function(e,t){return t===void 0&&(t={}),KMe(e,t)};typeof window<"u"&&pae.setContext(window);var KMe=function(e,t){return ul(void 0,void 0,void 0,function(){var r,n,a,s,i,o,c,u,d,f,h,p,g,v,b,y,C,N,T,S,w,B,w,_,F,M,D,I,U,P,X,H,Y,V,z,G,re,R,q,J;return Lo(this,function(te){switch(te.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return a={allowTaint:(_=t.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(F=t.imageTimeout)!==null&&F!==void 0?F:15e3,proxy:t.proxy,useCORS:(M=t.useCORS)!==null&&M!==void 0?M:!1},s=n6({logging:(D=t.logging)!==null&&D!==void 0?D:!0,cache:t.cache},a),i={windowWidth:(I=t.windowWidth)!==null&&I!==void 0?I:n.innerWidth,windowHeight:(U=t.windowHeight)!==null&&U!==void 0?U:n.innerHeight,scrollX:(P=t.scrollX)!==null&&P!==void 0?P:n.pageXOffset,scrollY:(X=t.scrollY)!==null&&X!==void 0?X:n.pageYOffset},o=new gh(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),c=new GMe(s,o),u=(H=t.foreignObjectRendering)!==null&&H!==void 0?H:!1,d={allowTaint:(Y=t.allowTaint)!==null&&Y!==void 0?Y:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},c.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new jz(c,e,d),h=f.clonedReferenceElement,h?[4,f.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=te.sent(),g=bR(h)||W8e(h)?_De(h.ownerDocument):T4(c,h),v=g.width,b=g.height,y=g.left,C=g.top,N=qMe(c,h,t.backgroundColor),T={canvas:t.canvas,backgroundColor:N,scale:(z=(V=t.scale)!==null&&V!==void 0?V:n.devicePixelRatio)!==null&&z!==void 0?z:1,x:((G=t.x)!==null&&G!==void 0?G:0)+y,y:((re=t.y)!==null&&re!==void 0?re:0)+C,width:(R=t.width)!==null&&R!==void 0?R:Math.ceil(v),height:(q=t.height)!==null&&q!==void 0?q:Math.ceil(b)},u?(c.logger.debug("Document cloned, using foreign object rendering"),w=new VMe(c,T),[4,w.render(h)]):[3,3];case 2:return S=te.sent(),[3,5];case 3:return c.logger.debug("Document cloned, element located at "+y+","+C+" with size "+v+"x"+b+" using computed rendering"),c.logger.debug("Starting DOM parsing"),B=lae(c,h),N===B.styles.backgroundColor&&(B.styles.backgroundColor=sh.TRANSPARENT),c.logger.debug("Starting renderer for element at "+T.x+","+T.y+" with size "+T.width+"x"+T.height),w=new RMe(c,T),[4,w.render(B)];case 4:S=te.sent(),te.label=5;case 5:return(!((J=t.removeContainer)!==null&&J!==void 0)||J)&&(jz.destroy(p)||c.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),c.logger.debug("Finished rendering"),[2,S]}})})},qMe=function(e,t,r){var n=t.ownerDocument,a=n.documentElement?Xy(e,getComputedStyle(n.documentElement).backgroundColor):sh.TRANSPARENT,s=n.body?Xy(e,getComputedStyle(n.body).backgroundColor):sh.TRANSPARENT,i=typeof r=="string"?Xy(e,r):r===null?sh.TRANSPARENT:4294967295;return t===n.documentElement?tm(a)?tm(s)?i:s:a:i};const WMe=Object.freeze(Object.defineProperty({__proto__:null,default:b5},Symbol.toStringTag,{value:"Module"})),U4="proyectos_interdisciplinarios",Eae="entregas_interdisciplinarias",XMe="usuarios",yR=e=>{const t=e.data();return{id:e.id,...t}},YMe=e=>{const t=tr(It(bt,U4),Rr("nombreProyecto","asc"));return gr(t,n=>{const a=n.docs.map(s=>yR(s));e(a)},n=>{console.error("Error al suscribirse a las planificaciones:",n),e([])})},JMe=async e=>{try{return(await Un(It(bt,U4),e)).id}catch(t){throw console.error("Error al crear la planificación:",t),new Error("No se pudo crear la planificación.")}},Pz=async(e,t)=>{try{const{id:r,...n}=t,a=pr(bt,U4,e);await Ji(a,n)}catch(r){throw console.error("Error al actualizar la planificación:",r),new Error("No se pudo actualizar la planificación.")}},ZMe=async e=>{try{const t=pr(bt,U4,e);await ts(t)}catch(t){throw console.error("Error al eliminar la planificación:",t),new Error("No se pudo eliminar la planificación.")}},eUe=(e,t)=>{const r=tr(It(bt,Eae),vn("planificacionId","==",e));return gr(r,a=>{const s=a.docs.map(i=>yR(i));t(s)},a=>{console.error("Error al suscribirse a las entregas:",a),t([])})},Rz=async(e,t)=>{try{const r=pr(bt,Eae,e);await Ji(r,{feedbackProfesor:t,fechaFeedback:mr.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentación:",r),new Error("No se pudo guardar la retroalimentación.")}},Cae=e=>{const t=tr(It(bt,XMe));return gr(t,n=>{const a=n.docs.map(s=>yR(s));e(a)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),e([])})},_6={Recordar:["Enumerar","Definir","Identificar","Nombrar","Reconocer","Reproducir"],Comprender:["Explicar","Interpretar","Resumir","Parafrasear","Ejemplificar","Clasificar"],Aplicar:["Ejecutar","Implementar","Usar","Demostrar","Operar","Programar"],Analizar:["Diferenciar","Organizar","Atribuir","Comparar","Deconstruir","Delinear"],Evaluar:["Comprobar","Criticar","Revisar","Formular hipótesis","Experimentar","Juzgar"],Crear:["Generar","Planificar","Producir","Diseñar","Construir","Idear"]},cp=({icon:e,label:t,children:r,aiButton:n,className:a=""})=>l.jsxs("div",{className:`bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700 ${a}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-lg",children:e}),l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:t})]}),n]}),r]}),tUe=({planificaciones:e,onActivityUpdate:t})=>{const[r,n]=k.useState(null),a=k.useMemo(()=>{const c=[];return e.forEach(u=>{(u.actividades||[]).forEach(d=>c.push({...d,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(d=>c.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables.join(", "),asignaturaPrincipal:"Milestone"}))}),c.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[e]),s=k.useCallback(c=>{if(c.type==="keyDate")return{text:"Fecha Clave",color:"bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${c.fechaInicio}T00:00:00`),f=new Date(`${c.fechaFin}T00:00:00`);return f<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&f>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300"}},[]),i=({name:c})=>{const u=(c||"").split(" ").map(p=>p[0]).join("").toUpperCase(),d=p=>{let g=0;for(let v=0;v<p.length;v++)g=p.charCodeAt(v)+((g<<5)-g);return g},f=["bg-rose-100 text-rose-800 dark:bg-rose-900/50 dark:text-rose-300","bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300","bg-emerald-100 text-emerald-800 dark:bg-emerald-900/50 dark:text-emerald-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-violet-100 text-violet-800 dark:bg-violet-900/50 dark:text-violet-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],h=Math.abs(d(c))%f.length;return l.jsx("div",{className:`w-10 h-10 rounded-full ${f[h]} flex items-center justify-center font-semibold text-sm ring-2 ring-white dark:ring-slate-800 shadow-sm`,children:u.slice(0,2)})},o=({data:c,onClose:u,onSave:d})=>{const[f,h]=k.useState(c.activity),p=v=>h({...f,[v.target.name]:v.target.value}),g=()=>{d(c.planId,f),u()};return l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl w-full max-w-2xl p-8 animate-in slide-in-from-bottom-4 duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(WZ,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Editar Actividad"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:[l.jsx(GA,{className:"w-4 h-4"}),"Nombre de la Actividad"]}),l.jsx("input",{name:"nombre",value:f.nombre,onChange:p,className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Ingrese el nombre de la actividad..."})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:[l.jsx(Ou,{className:"w-4 h-4"}),"Responsables"]}),l.jsx("input",{name:"responsables",value:f.responsables,onChange:p,className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Responsables de la actividad..."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:[l.jsx(yd,{className:"w-4 h-4"}),"Fecha de Inicio"]}),l.jsx("input",{type:"date",name:"fechaInicio",value:f.fechaInicio,onChange:p,className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:[l.jsx(yd,{className:"w-4 h-4"}),"Fecha de Fin"]}),l.jsx("input",{type:"date",name:"fechaFin",value:f.fechaFin,onChange:p,className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]})]}),l.jsxs("div",{className:"flex justify-end gap-4 mt-8",children:[l.jsx("button",{onClick:u,className:"px-6 py-3 bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 rounded-lg font-semibold hover:bg-slate-300 dark:hover:bg-slate-500 transition-colors",children:"Cancelar"}),l.jsx("button",{onClick:g,className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors shadow-lg",children:"Guardar Cambios"})]})]})})};return a.length===0?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded-xl",children:l.jsx(mw,{className:"w-8 h-8 text-slate-600 dark:text-slate-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Cronograma del Proyecto"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Visualice el progreso y las dependencias del proyecto"})]})]}),l.jsxs("div",{className:"text-center py-12",children:[l.jsx(kd,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay actividades para mostrar"}),l.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm mt-2",children:"Cree una planificación primero para ver el cronograma"})]})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/50 rounded-xl",children:l.jsx(mw,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Visualice el progreso y las dependencias del proyecto"})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full",children:[l.jsx("thead",{children:l.jsxs("tr",{className:"border-b-2 border-slate-200 dark:border-slate-700",children:[l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Tarea"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Estado"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Inicio"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Fin"}),l.jsx("th",{className:"px-6 py-4 text-left text-sm font-bold text-slate-700 dark:text-slate-300 uppercase tracking-wider",children:"Asignado"})]})}),l.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:a.map(c=>{const u=s(c),d=c.type==="activity";return l.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors":""}`,onClick:()=>d&&n({planId:c.planId,activity:c}),children:[l.jsx("td",{className:"px-6 py-4 text-base font-semibold text-slate-900 dark:text-slate-200",children:c.nombre}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),l.jsx("td",{className:"px-6 py-4 text-base text-slate-600 dark:text-slate-400",children:c.fechaInicio}),l.jsx("td",{className:"px-6 py-4 text-base text-slate-600 dark:text-slate-400",children:c.fechaFin}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(i,{name:c.responsables||"Sin asignar"})})]},c.id)})})]})}),r&&l.jsx(o,{data:r,onClose:()=>n(null),onSave:t})]})},rUe=({planificaciones:e,onBack:t})=>{const r=k.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{var p;(p=h.habilidades)==null||p.forEach(g=>{c[g]=(c[g]||0)+1,Object.entries(_6).forEach(([v,b])=>{b.includes(g)&&(u[v]=(u[v]||0)+1)})})})}),{habilidadesCount:c,categoriaCount:u}},[e]),n=k.useMemo(()=>{const c={},u={};return e.forEach(d=>{var f;d.asignaturas.forEach(h=>{u[h]=(u[h]||0)+1}),(f=d.contenidosPorAsignatura)==null||f.forEach(h=>{h.contenidos&&h.contenidos.toLowerCase().split(/[\s,.-]+/).filter(g=>g.length>3).filter(g=>!["para","con","por","las","los","una","del","que","este","esta","son","como","más","desde","hasta","entre"].includes(g)).forEach(g=>{c[g]=(c[g]||0)+1})})}),{palabrasCount:c,asignaturasCount:u}},[e]),a=k.useMemo(()=>{const c=e.length,u=e.reduce((h,p)=>{var g;return h+(((g=p.actividades)==null?void 0:g.length)||0)},0),d=e.reduce((h,p)=>{var g;return h+(((g=p.tareas)==null?void 0:g.length)||0)},0),f=new Set(e.flatMap(h=>h.asignaturas)).size;return{totalProyectos:c,totalActividades:u,totalTareas:d,asignaturasUnicas:f}},[e]),s=({data:c,title:u})=>{const d=Object.entries(c);if(!d.length)return null;const f=d.sort((p,g)=>g[1]-p[1]).slice(0,20),h=Math.max(...f.map(([,p])=>p));return h?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:u}),l.jsx("div",{className:"flex flex-wrap gap-2 justify-center min-h-[100px]",children:f.map(([p,g])=>{const v=Math.max(.8,g/h*2),b=Math.max(.6,g/h);return l.jsx("span",{className:"inline-block px-3 py-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-full font-semibold transition-transform hover:scale-110",style:{fontSize:`${v}rem`,opacity:b},title:`${p}: ${g} veces`,children:p},p)})})]}):null},i=({data:c})=>{const u=Object.values(c),d=u.length?Math.max(...u):0,f={Recordar:"bg-red-500",Comprender:"bg-orange-500",Aplicar:"bg-yellow-500",Analizar:"bg-green-500",Evaluar:"bg-blue-500",Crear:"bg-purple-500"};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:l.jsx(GZ,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Taxonomía de Bloom"})]}),l.jsx("div",{className:"space-y-4",children:Object.keys(_6).map(h=>{const p=c[h]||0,g=d>0?p/d*100:0,v=f[h]||"bg-slate-400";return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:h}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[p," habilidades"]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:l.jsx("div",{className:`h-3 rounded-full ${v} transition-all duration-500`,style:{width:`${g}%`}})})]},h)})})]})},o=({icon:c,title:u,value:d,description:f,color:h})=>l.jsxs("div",{className:`bg-gradient-to-br ${h} p-6 rounded-2xl shadow-lg text-white`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("div",{className:"p-3 bg-white/20 rounded-xl",children:c}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-3xl font-bold",children:d}),l.jsx("div",{className:"text-white/80 text-sm",children:u})]})]}),l.jsx("p",{className:"text-white/90 text-sm",children:f})]});return l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl",children:l.jsx(YZ,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Dashboard Analítico"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Análisis de habilidades y contenidos desarrollados"})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(hw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[l.jsx(o,{icon:l.jsx(Rx,{className:"w-8 h-8"}),title:"Proyectos",value:a.totalProyectos,description:"Proyectos interdisciplinarios creados",color:"from-blue-500 to-blue-600"}),l.jsx(o,{icon:l.jsx(vbe,{className:"w-8 h-8"}),title:"Actividades",value:a.totalActividades,description:"Actividades planificadas en total",color:"from-green-500 to-green-600"}),l.jsx(o,{icon:l.jsx(GA,{className:"w-8 h-8"}),title:"Tareas",value:a.totalTareas,description:"Tareas asignadas a estudiantes",color:"from-purple-500 to-purple-600"}),l.jsx(o,{icon:l.jsx(hh,{className:"w-8 h-8"}),title:"Asignaturas",value:a.asignaturasUnicas,description:"Asignaturas involucradas",color:"from-orange-500 to-orange-600"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(i,{data:r.categoriaCount}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:l.jsx(Obe,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Distribución de Asignaturas"})]}),l.jsx("div",{className:"space-y-3",children:Object.entries(n.asignaturasCount).sort(([,c],[,u])=>u-c).map(([c,u])=>{const d=Math.max(...Object.values(n.asignaturasCount)),f=d>0?u/d*100:0;return l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 text-sm",children:c}),l.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:[u," proyecto",u!==1?"s":""]})]}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2",children:l.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-600 transition-all duration-500",style:{width:`${f}%`}})})]},c)})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsx(s,{data:n.palabrasCount,title:"Contenidos Más Frecuentes"}),l.jsx(s,{data:r.habilidadesCount,title:"Habilidades Más Desarrolladas"})]})]})},nUe=({plan:e,onBack:t,availableTeachers:r})=>{var g,v;const[n,a]=k.useState([]),[s,i]=k.useState([]),[o,c]=k.useState(((g=e.tareas)==null?void 0:g[0])||null),[u,d]=k.useState(null);k.useEffect(()=>{const b=Cae(a),y=eUe(e.id,i);return()=>{b(),y()}},[e.id]);const f=k.useMemo(()=>n.filter(b=>b.profile===Yt.ESTUDIANTE&&e.cursos.includes(b.curso||"")).sort((b,y)=>(b.nombreCompleto||"").localeCompare(y.nombreCompleto||"")),[n,e.cursos]),h=async b=>{d(b.id);const y="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",C=`Eres un profesor asistente. Genera una retroalimentación constructiva (2-3 frases) para la entrega de un estudiante.
Instrucciones de la tarea: "${o==null?void 0:o.instrucciones}"
Comentario del estudiante: "${b.observacionesEstudiante||"No dejó comentarios."}"`.trim();try{const w=(await(await new ds(y).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(C)).response).text().replace(/(\*\*|\*)/g,"");await Rz(b.id,w)}catch(N){console.error(N),alert("No se pudo generar la retroalimentación.")}finally{d(null)}},p=b=>b.map(y=>{var C;return((C=r.find(N=>N.id===y))==null?void 0:C.nombreCompleto)||y}).join(", ");return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Entregas de Tareas"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-1",children:e.nombreProyecto}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-500 mt-1",children:["Profesores: ",p(e.docentesResponsables)]})]}),l.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-lg font-semibold hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors",children:[l.jsx(hw,{className:"w-4 h-4"})," Volver a Proyectos"]})]}),l.jsxs("div",{className:"mb-6",children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Seleccionar Tarea:"}),l.jsx("select",{value:o.id,onChange:b=>{var y;return c(((y=e.tareas)==null?void 0:y.find(C=>C.id===b.target.value))||null)},className:"w-full sm:w-auto p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:(v=e.tareas)==null?void 0:v.map(b=>l.jsxs("option",{value:b.id,children:["Tarea ",b.numero,": ",b.instrucciones]},b.id))})]}),l.jsx("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto",children:f.map(b=>{const y=s.find(C=>C.tareaId===o.id&&C.estudianteId===b.id);return l.jsxs("div",{className:"p-6 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-start justify-between mb-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-bold",children:(b.nombreCompleto||"NA").split(" ").map(C=>C[0]).join("").toUpperCase().slice(0,2)}),l.jsxs("div",{children:[l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:b.nombreCompleto}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:b.curso})]})]}),l.jsx("div",{className:"flex items-center gap-2",children:y!=null&&y.completada?l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300 rounded-full text-sm font-semibold",children:[l.jsx(iP,{className:"w-4 h-4"})," Entregado"]}):l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-300 rounded-full text-sm font-semibold",children:[l.jsx(kd,{className:"w-4 h-4"})," Pendiente"]})})]}),y?l.jsxs("div",{className:"space-y-4",children:[y.observacionesEstudiante&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Comentario del estudiante:"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 bg-white dark:bg-slate-800 p-3 rounded-md border border-slate-200 dark:border-slate-600",children:y.observacionesEstudiante})]}),y.enlaceUrl&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Enlace entregado:"}),l.jsxs("a",{href:y.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[l.jsx(GA,{className:"w-4 h-4"})," ",y.enlaceUrl]})]}),y.archivoAdjunto&&l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Archivo adjunto:"}),l.jsxs("a",{href:y.archivoAdjunto.url,download:y.archivoAdjunto.nombre,className:"inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 text-sm font-medium",children:[l.jsx(o4,{className:"w-4 h-4"})," ",y.archivoAdjunto.nombre]})]}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Retroalimentación del profesor:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:y.feedbackProfesor||"",onBlur:C=>Rz(y.id,C.target.value),rows:3,className:"flex-1 p-3 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm resize-none"},y.id),l.jsx("button",{onClick:()=>h(y),disabled:u===y.id,className:"p-3 rounded-md bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar Feedback con IA",children:u===y.id?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"}):l.jsx(D_,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})]})]}):l.jsxs("div",{className:"text-center py-6",children:[l.jsx(kd,{className:"w-8 h-8 text-slate-400 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"El estudiante aún no ha realizado la entrega"})]})]},b.id)})})]}):l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:l.jsxs("div",{className:"text-center",children:[l.jsx(kd,{className:"w-16 h-16 text-slate-400 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Este proyecto no tiene tareas asignadas"}),l.jsxs("button",{onClick:t,className:"mt-4 inline-flex items-center gap-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold",children:[l.jsx(hw,{className:"w-4 h-4"})," Volver a Proyectos"]})]})})},aUe=({initialPlan:e,onSave:t,onCancel:r,availableTeachers:n})=>{const[a,s]=k.useState(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[i,o]=k.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[c,u]=k.useState({nombre:"",fecha:""}),[d,f]=k.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[h,p]=k.useState(!1),[g,v]=k.useState(!1),[b,y]=k.useState(!1);k.useEffect(()=>{s(e||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:[],contenidosPorAsignatura:[],objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[e]);const C=async P=>{if(!a.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}P==="objetivos"?p(!0):v(!0);const X="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=P==="objetivos"?`Basado en la descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros y medibles.
Descripción: "${a.descripcionProyecto}"
Asignaturas involucradas: "${a.asignaturas.join(", ")}"
Formato: lista con guiones.`:`Basado en la descripción y objetivos de un proyecto escolar, genera 5 a 7 indicadores de logro observables.
Descripción: "${a.descripcionProyecto}"
Objetivos: "${a.objetivos||"Genéralos a partir de la descripción."}"
Asignaturas involucradas: "${a.asignaturas.join(", ")}"
Formato: lista con guiones.`;try{const re=(await(await new ds(X).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(H)).response).text();s(R=>({...R,[P]:re.replace(/(\*\*|\*)/g,"")}))}catch(Y){console.error(Y),alert(`Hubo un error al generar ${P}.`)}finally{P==="objetivos"?p(!1):v(!1)}},N=async()=>{if(!a.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}y(!0);const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",X=Y=>Y.map(V=>{var z;return((z=n.find(G=>G.id===V))==null?void 0:z.nombreCompleto)||V}).join(", "),H=`Devuelve SOLO un JSON válido (sin backticks) con claves: actividades, fechasClave y tareas para un proyecto escolar.
Descripción: "${a.descripcionProyecto}"
Docentes responsables: "${X(a.docentesResponsables)}"
Asignaturas: "${a.asignaturas.join(", ")}"
Estructura:
- actividades: 3 a 5 objetos { "nombre", "fechaInicio" (YYYY-MM-DD), "fechaFin" (YYYY-MM-DD), "responsables" }
- fechasClave: 2 a 3 objetos { "nombre", "fecha" (YYYY-MM-DD) }
- tareas: 2 a 3 objetos { "instrucciones", "fechaEntrega" (YYYY-MM-DD) }`;try{const re=(await(await new ds(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(H)).response).text().replace(/^```json\s*|```\s*$/g,""),R=JSON.parse(re);s(q=>{var J,te,ie;return{...q,actividades:((J=R.actividades)==null?void 0:J.map(Ae=>({...Ae,id:crypto.randomUUID()})))||q.actividades,fechasClave:((te=R.fechasClave)==null?void 0:te.map(Ae=>({...Ae,id:crypto.randomUUID()})))||q.fechasClave,tareas:((ie=R.tareas)==null?void 0:ie.map((Ae,oe)=>{var ce;return{...Ae,id:crypto.randomUUID(),numero:(((ce=q.tareas)==null?void 0:ce.length)||0)+oe+1}}))||q.tareas}})}catch(Y){console.error(Y),alert("No se pudo generar la estructura del proyecto.")}finally{y(!1)}},T=P=>s(X=>({...X,[P.target.name]:P.target.value})),S=P=>{s(X=>{const H=X.asignaturas,Y=H.includes(P)?H.filter(z=>z!==P):[...H,P];let V=X.contenidosPorAsignatura;return Y.includes(P)&&!H.includes(P)&&(V=[...V,{asignatura:P,contenidos:"",habilidades:[]}]),!Y.includes(P)&&H.includes(P)&&(V=V.filter(z=>z.asignatura!==P)),{...X,asignaturas:Y,contenidosPorAsignatura:V}})},B=P=>s(X=>({...X,cursos:X.cursos.includes(P)?X.cursos.filter(H=>H!==P):[...X.cursos,P]})),w=P=>s(X=>({...X,docentesResponsables:X.docentesResponsables.includes(P)?X.docentesResponsables.filter(H=>H!==P):[...X.docentesResponsables,P]})),_=(P,X,H)=>s(Y=>({...Y,contenidosPorAsignatura:Y.contenidosPorAsignatura.map(V=>V.asignatura===P?{...V,[X]:H}:V)})),F=(P,X)=>s(H=>({...H,contenidosPorAsignatura:H.contenidosPorAsignatura.map(Y=>Y.asignatura===P?{...Y,habilidades:Y.habilidades.includes(X)?Y.habilidades.filter(V=>V!==X):[...Y.habilidades,X]}:Y)})),M=()=>{if(!i.nombre||!i.fechaInicio||!i.fechaFin){alert("Nombre y fechas son obligatorios.");return}s(P=>({...P,actividades:[...P.actividades||[],{...i,id:crypto.randomUUID()}]})),o({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},D=()=>{!c.nombre||!c.fecha||(s(P=>({...P,fechasClave:[...P.fechasClave||[],{...c,id:crypto.randomUUID()}]})),u({nombre:"",fecha:""}))},I=()=>{var X;if(!d.instrucciones||!d.fechaEntrega){alert("Instrucciones y fecha son obligatorios.");return}const P={id:crypto.randomUUID(),numero:(((X=a.tareas)==null?void 0:X.length)||0)+1,...d};s(H=>({...H,tareas:[...H.tareas||[],P]})),f({instrucciones:"",fechaEntrega:"",recursoUrl:""})},U=P=>{var X;return((X=n.find(H=>H.id===P))==null?void 0:X.nombreCompleto)||P};return l.jsxs("div",{className:"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-8",children:[l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl",children:l.jsx(Rx,{className:"w-10 h-10 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:e?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Diseñe experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"space-y-6",children:[l.jsx(cp,{icon:l.jsx(GA,{className:"w-6 h-6 text-slate-600"}),label:"Información del Proyecto",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Nombre del Proyecto"}),l.jsx("input",{name:"nombreProyecto",value:a.nombreProyecto,onChange:T,placeholder:"Ingrese el nombre del proyecto...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-lg font-semibold"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Descripción del Proyecto"}),l.jsx("textarea",{name:"descripcionProyecto",value:a.descripcionProyecto,onChange:T,placeholder:"Detalle metodología, producto final y propósito...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})]})]})}),l.jsx(cp,{icon:l.jsx(Ou,{className:"w-6 h-6 text-slate-600"}),label:"Profesores Responsables",children:l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto",children:n.map(P=>l.jsx("button",{type:"button",onClick:()=>w(P.id),className:`p-3 rounded-lg text-left transition-all duration-200 ${a.docentesResponsables.includes(P.id)?"bg-blue-100 border-2 border-blue-500 text-blue-800 dark:bg-blue-900/50 dark:border-blue-400 dark:text-blue-300":"bg-slate-50 border-2 border-slate-200 hover:border-slate-300 dark:bg-slate-700 dark:border-slate-600 dark:hover:border-slate-500"}`,children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm ${a.docentesResponsables.includes(P.id)?"bg-blue-500 text-white":"bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-300"}`,children:l.jsx(QS,{className:"w-5 h-5"})}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-sm",children:P.nombreCompleto}),l.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:P.email})]})]})},P.id))}),!!a.docentesResponsables.length&&l.jsxs("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[l.jsx("p",{className:"text-sm font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Profesores Seleccionados:"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:a.docentesResponsables.map(P=>l.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded-md text-xs font-medium",children:U(P)},P))})]})]})}),l.jsx(cp,{icon:l.jsx(RS,{className:"w-6 h-6 text-slate-600"}),label:"Cursos Participantes",children:l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:ks.map(P=>l.jsx("button",{type:"button",onClick:()=>B(P),className:`p-3 rounded-lg text-center text-sm font-semibold transition-all duration-200 ${a.cursos.includes(P)?"bg-amber-500 text-white shadow-lg scale-105":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:P},P))})})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsx(cp,{icon:l.jsx(hh,{className:"w-6 h-6 text-slate-600"}),label:"Asignaturas y Contenidos",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Seleccionar Asignaturas:"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:qi.map(P=>l.jsx("button",{type:"button",onClick:()=>S(P),className:`p-2 rounded-lg text-left text-sm font-medium transition-all duration-200 ${a.asignaturas.includes(P)?"bg-green-500 text-white shadow-md":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-300"}`,children:P},P))})]}),a.contenidosPorAsignatura.length>0&&l.jsxs("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:[l.jsx("h4",{className:"text-sm font-semibold text-slate-700 dark:text-slate-300",children:"Contenidos y Habilidades por Asignatura:"}),a.contenidosPorAsignatura.map(P=>l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("h5",{className:"font-bold text-slate-800 dark:text-slate-200 mb-3 flex items-center gap-2",children:[l.jsx(hh,{className:"w-4 h-4"})," ",P.asignatura]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Contenidos a trabajar:"}),l.jsx("textarea",{value:P.contenidos,onChange:X=>_(P.asignatura,"contenidos",X.target.value),placeholder:`Detalle los contenidos específicos de ${P.asignatura}...`,className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm min-h-[80px] resize-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Habilidades según Taxonomía de Bloom:"}),l.jsx("div",{className:"space-y-2",children:Object.entries(_6).map(([X,H])=>l.jsxs("div",{className:"border border-slate-200 dark:border-slate-600 rounded-md p-2",children:[l.jsxs("h6",{className:"text-xs font-bold text-slate-700 dark:text-slate-300 mb-1",children:[X,":"]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:H.map(Y=>l.jsx("button",{type:"button",onClick:()=>F(P.asignatura,Y),className:`px-2 py-1 rounded-md text-xs font-medium transition-colors ${P.habilidades.includes(Y)?"bg-blue-500 text-white":"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-slate-500"}`,children:Y},Y))})]},X))}),P.habilidades.length>0&&l.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:[l.jsx("p",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Habilidades seleccionadas:"}),l.jsx("div",{className:"flex flex-wrap gap-1",children:P.habilidades.map(X=>l.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 rounded text-xs",children:X},X))})]})]})]})]},P.asignatura))]})]})}),l.jsx(cp,{icon:l.jsx(XZ,{className:"w-6 h-6 text-slate-600"}),label:"Objetivos de Aprendizaje",aiButton:l.jsx("button",{type:"button",onClick:()=>C("objetivos"),disabled:!a.descripcionProyecto.trim()||h,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar con IA",children:l.jsx(D_,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),children:h?l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Generando objetivos..."})]}):l.jsx("textarea",{name:"objetivos",value:a.objetivos,onChange:T,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsx(cp,{icon:l.jsx(Ry,{className:"w-6 h-6 text-slate-600"}),label:"Indicadores de Éxito",aiButton:l.jsx("button",{type:"button",onClick:()=>C("indicadoresLogro"),disabled:!a.descripcionProyecto.trim()||g,className:"p-2 rounded-lg bg-purple-100 dark:bg-purple-900/50 hover:bg-purple-200 dark:hover:bg-purple-800/50 disabled:opacity-50 transition-colors",title:"Generar con IA",children:l.jsx(D_,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),children:g?l.jsxs("div",{className:"flex items-center justify-center p-8",children:[l.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),l.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Generando indicadores..."})]}):l.jsx("textarea",{name:"indicadoresLogro",value:a.indicadoresLogro,onChange:T,placeholder:"Liste los indicadores de logro...",className:"w-full p-3 border border-slate-300 dark:border-slate-600 rounded-lg bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors min-h-[120px] resize-none"})}),l.jsx(cp,{icon:l.jsx(yd,{className:"w-6 h-6 text-slate-600"}),label:"Planificación y Cronograma",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"text-center border-b border-slate-200 dark:border-slate-700 pb-6",children:[l.jsx("button",{type:"button",onClick:N,disabled:b||!a.descripcionProyecto,className:"inline-flex items-center gap-3 bg-gradient-to-r from-sky-500 to-blue-600 text-white font-semibold py-3 px-6 rounded-lg disabled:from-slate-400 disabled:to-slate-500 disabled:cursor-not-allowed hover:from-sky-600 hover:to-blue-700 transition-all duration-200 shadow-lg",children:b?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"})," Generando estructura..."]}):l.jsxs(l.Fragment,{children:[l.jsx(D_,{className:"w-5 h-5"})," Sugerir Estructura Completa con IA"]})}),l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"La IA generará actividades, fechas clave y tareas basadas en la descripción del proyecto"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(mw,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Proyecto"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-4",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre de la Actividad"}),l.jsx("input",{value:i.nombre,onChange:P=>o({...i,nombre:P.target.value}),placeholder:"Nombre de la actividad",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Inicio"}),l.jsx("input",{type:"date",value:i.fechaInicio,onChange:P=>o({...i,fechaInicio:P.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Fin"}),l.jsx("input",{type:"date",value:i.fechaFin,onChange:P=>o({...i,fechaFin:P.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("button",{type:"button",onClick:M,className:"w-full bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(th,{className:"w-4 h-4"})," Agregar"]})})]}),!!a.actividades.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Actividades Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.actividades.map(P=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:P.nombre}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:[P.fechaInicio," - ",P.fechaFin]})]})},P.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(iP,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Fechas Clave (Hitos)"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-4 gap-3 items-end",children:[l.jsxs("div",{className:"sm:col-span-2",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Nombre del Hito"}),l.jsx("input",{value:c.nombre,onChange:P=>u({...c,nombre:P.target.value}),placeholder:"Nombre del hito",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha"}),l.jsx("input",{type:"date",value:c.fecha,onChange:P=>u({...c,fecha:P.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),l.jsxs("button",{type:"button",onClick:D,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(th,{className:"w-4 h-4"})," Agregar"]})]}),!!a.fechasClave.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Fechas Clave Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.fechasClave.map(P=>l.jsx("div",{className:"p-2 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600 text-sm",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("span",{className:"font-medium text-slate-800 dark:text-slate-200",children:P.nombre}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs",children:P.fecha})]})},P.id))})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx(GZ,{className:"w-5 h-5 text-slate-600 dark:text-slate-400"}),l.jsx("h4",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Tareas para Estudiantes"})]}),l.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 items-end",children:[l.jsxs("div",{className:"lg:col-span-6",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Instrucciones de la Tarea"}),l.jsx("input",{value:d.instrucciones,onChange:P=>f({...d,instrucciones:P.target.value}),placeholder:"Descripción detallada de la tarea",className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),l.jsxs("div",{className:"lg:col-span-3",children:[l.jsx("label",{className:"block text-xs font-semibold text-slate-600 dark:text-slate-400 mb-1",children:"Fecha de Entrega"}),l.jsx("input",{type:"date",value:d.fechaEntrega,onChange:P=>f({...d,fechaEntrega:P.target.value}),className:"w-full p-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-700 text-slate-900 dark:text-slate-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-sm"})]}),l.jsx("div",{className:"lg:col-span-3",children:l.jsxs("button",{type:"button",onClick:I,className:"w-full bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-md text-sm font-semibold transition-colors flex items-center justify-center gap-1",children:[l.jsx(th,{className:"w-4 h-4"})," Agregar Tarea"]})})]}),!!a.tareas.length&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-xs font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"Tareas Agregadas:"}),l.jsx("div",{className:"space-y-2",children:a.tareas.map(P=>l.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border border-slate-200 dark:border-slate-600",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("span",{className:"inline-block bg-purple-100 dark:bg-purple-900/50 text-purple-800 dark:text-purple-300 text-xs font-bold px-2 py-1 rounded mb-1",children:["Tarea #",P.numero]}),l.jsx("p",{className:"text-sm font-medium text-slate-800 dark:text-slate-200",children:P.instrucciones})]}),l.jsx("span",{className:"text-slate-500 dark:text-slate-400 text-xs ml-3",children:P.fechaEntrega})]})},P.id))})]})]})]})]})}),l.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-4 pt-8 border-t border-slate-200 dark:border-slate-700",children:[l.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 transition-colors order-2 sm:order-1",children:"Cancelar"}),l.jsx("button",{onClick:()=>t(a),className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg font-semibold hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg order-1 sm:order-2",children:e?"Guardar Cambios":"Crear Proyecto"})]})]})]})]})},Lz=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState(!0),[i,o]=k.useState("list"),[c,u]=k.useState(null),[d,f]=k.useState(null),[h,p]=k.useState(null);k.useEffect(()=>{s(!0);const S=Cae(w=>{const _=w.filter(F=>F.profile===Yt.PROFESORADO);n(_)}),B=YMe(w=>{const _=w.map(F=>({...F,docentesResponsables:Array.isArray(F.docentesResponsables)?F.docentesResponsables:[F.docentesResponsables].filter(Boolean),contenidosPorAsignatura:F.contenidosPorAsignatura||[]}));t(_),s(!1)});return()=>{S(),B()}},[]);const g=k.useCallback(async(S,B)=>{const w=e.find(F=>F.id===S);if(!w)return;const _={...w,actividades:(w.actividades||[]).map(F=>F.id===B.id?B:F)};await Pz(S,_)},[e]),v=async S=>{try{const B={...S,docentesResponsables:Array.isArray(S.docentesResponsables)?S.docentesResponsables.join(", "):S.docentesResponsables};"id"in S&&S.id?await Pz(S.id,B):await JMe(B),o("list"),u(null)}catch(B){console.error("Error al guardar la planificación:",B),alert("No se pudo guardar la planificación.")}},b=S=>{u(S),o("form")},y=async S=>{if(!S){alert("Error: ID inválido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await ZMe(S)}catch(B){console.error(B),alert("No se pudo eliminar la planificación.")}},C=()=>{u(null),o("form")},N=async S=>{f(S.id);const B=new xr("p","mm","a4"),w=15,_=B.internal.pageSize.getWidth(),F=B.internal.pageSize.getHeight(),M=_-w*2;let D=w;const I=22,U=14,P=11,X=()=>{B.setFont("helvetica","normal"),B.setFontSize(9),B.setTextColor(150),B.text("Proyecto Interdisciplinario",w,12),B.text("Liceo Industrial de Recoleta",_-w,12,{align:"right"}),B.setDrawColor(220),B.line(w,15,_-w,15)},H=R=>{D+R>F-w&&(B.addPage(),X(),D=w+15)},Y=(R,q)=>{if(!q||Array.isArray(q)&&!q.length||typeof q=="string"&&!q.trim())return;const J=10;B.setFontSize(P);const te=Array.isArray(q)?q.join(", "):String(q),ie=B.splitTextToSize(te,M),Ae=ie.length*(P*.35*1.15);H(J+Ae+12),B.setFont("helvetica","bold"),B.setFontSize(U),B.setTextColor(40),B.text(R,w,D),D+=6,B.setDrawColor(200),B.line(w,D,w+30,D),D+=8,B.setFont("helvetica","normal"),B.setFontSize(P),B.setTextColor(80),B.text(ie,w,D),D+=Ae+12};X(),D=w+20,B.setFont("helvetica","bold"),B.setFontSize(I),B.setTextColor(0);const V=B.splitTextToSize(S.nombreProyecto,M);if(B.text(V,w,D),D+=V.length*(I*.4)+10,xl(B,{startY:D,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},(R=>R.map(q=>{var J;return((J=r.find(te=>te.id===q))==null?void 0:J.nombreCompleto)||q}).join(", "))(S.docentesResponsables)],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},S.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},S.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:P,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),D=B.lastAutoTable.finalY+15,Y("Descripción del Proyecto",S.descripcionProyecto),Y("Objetivos de Aprendizaje",S.objetivos),Y("Indicadores de Logro",S.indicadoresLogro),S.contenidosPorAsignatura&&S.contenidosPorAsignatura.length>0&&(H(50),B.setFont("helvetica","bold"),B.setFontSize(U),B.setTextColor(40),B.text("Contenidos por Asignatura",w,D),D+=10,S.contenidosPorAsignatura.forEach(R=>{var q;if(H(30),B.setFont("helvetica","bold"),B.setFontSize(P),B.text(`${R.asignatura}:`,w,D),D+=6,B.setFont("helvetica","normal"),R.contenidos){const J=B.splitTextToSize(`Contenidos: ${R.contenidos}`,M-10);B.text(J,w+5,D),D+=J.length*4+3}if((q=R.habilidades)!=null&&q.length){const J=`Habilidades: ${R.habilidades.join(", ")}`,te=B.splitTextToSize(J,M-10);B.text(te,w+5,D),D+=te.length*4+8}}),D+=10),S.tareas&&S.tareas.length>0){const R=S.tareas.map(J=>[String(J.numero||""),J.instrucciones,J.fechaEntrega]),q=(R.length+1)*10+15;H(q+15),B.setFont("helvetica","bold"),B.setFontSize(U),B.setTextColor(40),B.text("Tareas para Estudiantes",w,D),D+=10,xl(B,{startY:D,head:[["#","Instrucciones","Fecha de Entrega"]],body:R,theme:"striped",headStyles:{fillColor:[52,73,94]}}),D=B.lastAutoTable.finalY+15}const G=document.getElementById("gantt-container-vertical");if(G)try{const q=(await b5(G,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");B.addPage(),X(),D=w+15,B.setFont("helvetica","bold"),B.setFontSize(U),B.setTextColor(40),B.text("Cronograma del Proyecto",w,D),D+=10;const J=B.getImageProperties(q),te=M,ie=J.height*te/J.width;B.addImage(q,"PNG",w,D,te,ie)}catch(R){console.error("Error generating timeline image:",R)}const re=B.internal.pages.length-1;for(let R=1;R<=re;R++)B.setPage(R),B.setFont("helvetica","normal"),B.setFontSize(9),B.setTextColor(150),B.text(`Página ${R} de ${re}`,_-w,B.internal.pageSize.getHeight()-10,{align:"right"});B.save(`Proyecto_${S.nombreProyecto.replace(/\s/g,"_")}.pdf`),f(null)},T=S=>S.map(B=>{var w;return((w=r.find(_=>_.id===B))==null?void 0:w.nombreCompleto)||B}).join(", ");return a?l.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Cargando proyectos..."})]})}):h?l.jsx(nUe,{plan:h,onBack:()=>p(null),availableTeachers:r}):i==="dashboard"?l.jsx(rUe,{planificaciones:e,onBack:()=>o("list")}):l.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[i==="list"?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-lg border border-slate-200 dark:border-slate-700",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:l.jsx(Rx,{className:"w-8 h-8 text-white"})}),l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Proyectos Interdisciplinarios"})]}),l.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400",children:"Gestione experiencias de aprendizaje colaborativo e innovador"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:()=>o("dashboard"),className:"inline-flex items-center gap-3 bg-gradient-to-r from-green-600 to-teal-600 text-white font-bold py-3 px-6 rounded-lg hover:from-green-700 hover:to-teal-700 transition-all duration-200 shadow-lg",children:[l.jsx(YZ,{className:"w-5 h-5"})," Ver Dashboard"]}),l.jsxs("button",{onClick:C,className:"inline-flex items-center gap-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 px-6 rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg",children:[l.jsx(th,{className:"w-5 h-5"})," Crear Nuevo Proyecto"]})]})]}),e.length===0?l.jsxs("div",{className:"text-center py-16",children:[l.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:l.jsx(Rx,{className:"w-12 h-12 text-slate-400"})}),l.jsx("h3",{className:"text-xl font-semibold text-slate-600 dark:text-slate-400 mb-2",children:"No hay proyectos creados"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-500 mb-6",children:"Comience creando su primer proyecto interdisciplinario"}),l.jsxs("button",{onClick:C,className:"inline-flex items-center gap-2 bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[l.jsx(th,{className:"w-4 h-4"})," Crear Primer Proyecto"]})]}):l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:e.map(S=>l.jsxs("div",{className:"group bg-slate-50 dark:bg-slate-700/50 border border-slate-200 dark:border-slate-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 hover:border-blue-300 dark:hover:border-blue-600",children:[l.jsx("div",{className:"flex justify-between items-start mb-4",children:l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-bold text-xl text-slate-800 dark:text-slate-200 mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors",children:S.nombreProyecto}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(RS,{className:"w-4 h-4"}),l.jsxs("span",{children:["Cursos: ",S.cursos.join(", ")]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(Ou,{className:"w-4 h-4"}),l.jsxs("span",{children:["Profesores: ",T(S.docentesResponsables)]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsx(hh,{className:"w-4 h-4"}),l.jsxs("span",{children:["Asignaturas: ",S.asignaturas.length]})]})]})]})}),!!S.descripcionProyecto&&l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-4 line-clamp-3",children:S.descripcionProyecto}),l.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>p(S),className:"inline-flex items-center gap-1 text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300 font-semibold text-sm transition-colors",title:"Ver entregas de estudiantes",children:[l.jsx(iP,{className:"w-4 h-4"})," Entregas"]}),l.jsxs("button",{onClick:()=>N(S),disabled:d===S.id,className:"inline-flex items-center gap-1 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm transition-colors disabled:opacity-50",title:"Exportar a PDF",children:[d===S.id?l.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):l.jsx(o4,{className:"w-4 h-4"}),"PDF"]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>b(S),className:"p-2 text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-lg transition-colors",title:"Editar proyecto",children:l.jsx(WZ,{className:"w-4 h-4"})}),l.jsx("button",{onClick:()=>y(S.id),className:"p-2 text-red-600 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-lg transition-colors",title:"Eliminar proyecto",children:l.jsx(Dd,{className:"w-4 h-4"})})]})]})]},S.id))})]}):l.jsx(aUe,{initialPlan:c,onSave:v,onCancel:()=>{o("list"),u(null)},availableTeachers:r}),e.length>0&&i==="list"&&l.jsx("div",{id:"gantt-container-vertical",children:l.jsx(tUe,{planificaciones:e,onActivityUpdate:g})})]})};function _ae(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=_ae(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function gn(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=_ae(e))&&(n&&(n+=" "),n+=t);return n}var k3={},B3={},Mz;function sUe(){return Mz||(Mz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(B3)),B3}var T3={},Uz;function Sae(){return Uz||(Uz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(T3)),T3}var j3={},Qz;function Nae(){return Qz||(Qz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t}(j3)),j3}var I3={},Hz;function wR(){return Hz||(Hz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let s=0,i="",o="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),s++);s<a;){const u=r[s];o?u==="\\"&&s+1<a?(s++,i+=r[s]):u===o?o="":i+=u:c?u==='"'||u==="'"?o=u:u==="]"?(c=!1,n.push(i),i=""):i+=u:u==="["?(c=!0,i&&(n.push(i),i="")):u==="."?i&&(n.push(i),i=""):i+=u,s++}return i&&n.push(i),n}e.toPath=t}(I3)),I3}var Vz;function ER(){return Vz||(Vz=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sUe(),r=Sae(),n=Nae(),a=wR();function s(o,c,u){if(o==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?r.isDeepKey(c)?s(o,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=o[c];return d===void 0?u:d}default:{if(Array.isArray(c))return i(o,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=o[c];return d===void 0?u:d}}}function i(o,c,u){if(c.length===0)return u;let d=o;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=s}(k3)),k3}var F3,zz;function iUe(){return zz||(zz=1,F3=ER().get),F3}var oUe=iUe();const Em=wl(oUe);var O3={exports:{}},sa={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $z;function lUe(){if($z)return sa;$z=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,a=e?Symbol.for("react.strict_mode"):60108,s=e?Symbol.for("react.profiler"):60114,i=e?Symbol.for("react.provider"):60109,o=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,d=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,g=e?Symbol.for("react.lazy"):60116,v=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function N(S){if(typeof S=="object"&&S!==null){var B=S.$$typeof;switch(B){case t:switch(S=S.type,S){case c:case u:case n:case s:case a:case f:return S;default:switch(S=S&&S.$$typeof,S){case o:case d:case g:case p:case i:return S;default:return B}}case r:return B}}}function T(S){return N(S)===u}return sa.AsyncMode=c,sa.ConcurrentMode=u,sa.ContextConsumer=o,sa.ContextProvider=i,sa.Element=t,sa.ForwardRef=d,sa.Fragment=n,sa.Lazy=g,sa.Memo=p,sa.Portal=r,sa.Profiler=s,sa.StrictMode=a,sa.Suspense=f,sa.isAsyncMode=function(S){return T(S)||N(S)===c},sa.isConcurrentMode=T,sa.isContextConsumer=function(S){return N(S)===o},sa.isContextProvider=function(S){return N(S)===i},sa.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},sa.isForwardRef=function(S){return N(S)===d},sa.isFragment=function(S){return N(S)===n},sa.isLazy=function(S){return N(S)===g},sa.isMemo=function(S){return N(S)===p},sa.isPortal=function(S){return N(S)===r},sa.isProfiler=function(S){return N(S)===s},sa.isStrictMode=function(S){return N(S)===a},sa.isSuspense=function(S){return N(S)===f},sa.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===u||S===s||S===a||S===f||S===h||typeof S=="object"&&S!==null&&(S.$$typeof===g||S.$$typeof===p||S.$$typeof===i||S.$$typeof===o||S.$$typeof===d||S.$$typeof===b||S.$$typeof===y||S.$$typeof===C||S.$$typeof===v)},sa.typeOf=N,sa}var Gz;function cUe(){return Gz||(Gz=1,O3.exports=lUe()),O3.exports}var uUe=cUe(),Xi=e=>e===0?0:e>0?1:-1,Rc=e=>typeof e=="number"&&e!=+e,Sp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,cr=e=>(typeof e=="number"||e instanceof Number)&&!Rc(e),YA=e=>cr(e)||typeof e=="string",dUe=0,Mw=e=>{var t=++dUe;return"".concat(e||"").concat(t)},yl=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!cr(t)&&typeof t!="string")return n;var s;if(Sp(t)){if(r==null)return n;var i=t.indexOf("%");s=r*parseFloat(t.slice(0,i))/100}else s=+t;return Rc(s)&&(s=n),a&&r!=null&&s>r&&(s=r),s},kae=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1},Yv=(e,t)=>cr(e)&&cr(t)?r=>e+r*(t-e):()=>t;function Ev(e,t,r){return cr(e)&&cr(t)?e+r*(t-e):t}function AUe(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):Em(n,t))===r)}var js=e=>e===null||typeof e>"u",I2=e=>js(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),fUe=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function CR(e){if(typeof e!="string")return!1;var t=fUe;return t.includes(e)}var hUe=["viewBox","children"],Kz=["points","pathLength"],D3={svg:hUe,polygon:Kz,polyline:Kz},_R=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(k.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{CR(a)&&(n[a]=s=>r[a](r,s))}),n},mUe=(e,t,r)=>n=>(e(t,r,n),null),Sg=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var s=e[a];CR(a)&&typeof s=="function"&&(n||(n={}),n[a]=mUe(s,t,r))}),n},pUe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function Bae(e){if(typeof e!="string")return!1;var t=pUe;return t.includes(e)}function al(e){var t=Object.entries(e).filter(r=>{var[n]=r;return Bae(n)});return Object.fromEntries(t)}var qz=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",Wz=null,P3=null,Tae=e=>{if(e===Wz&&Array.isArray(P3))return P3;var t=[];return k.Children.forEach(e,r=>{js(r)||(uUe.isFragment(r)?t=t.concat(Tae(r.props.children)):t.push(r))}),P3=t,Wz=e,t};function F2(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>qz(a)):n=[qz(t)],Tae(e).forEach(a=>{var s=Em(a,"type.displayName")||Em(a,"type.name");n.indexOf(s)!==-1&&r.push(a)}),r}var gUe=(e,t,r,n)=>{var a;if(typeof t=="symbol"||typeof t=="number")return!0;var s=(a=n&&(D3==null?void 0:D3[n]))!==null&&a!==void 0?a:[],i=t.startsWith("data-"),o=typeof e!="function"&&(!!n&&s.includes(t)||Bae(t)),c=!!r&&CR(t);return i||o||c},Yn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(k.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(s=>{var i;gUe((i=n)===null||i===void 0?void 0:i[s],s,t,r)&&(a[s]=n[s])}),a},vUe=["children","width","height","viewBox","className","style","title","desc"];function S6(){return S6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S6.apply(null,arguments)}function xUe(e,t){if(e==null)return{};var r,n,a=bUe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function bUe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var SR=k.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:s,className:i,style:o,title:c,desc:u}=e,d=xUe(e,vUe),f=s||{width:n,height:a,x:0,y:0},h=gn("recharts-surface",i);return k.createElement("svg",S6({},Yn(d,!0,"svg"),{className:h,width:n,height:a,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),k.createElement("title",null,c),k.createElement("desc",null,u),r)}),yUe=["children","className"];function N6(){return N6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},N6.apply(null,arguments)}function wUe(e,t){if(e==null)return{};var r,n,a=EUe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function EUe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var As=k.forwardRef((e,t)=>{var{children:r,className:n}=e,a=wUe(e,yUe),s=gn("recharts-layer",n);return k.createElement("g",N6({className:s},Yn(a,!0),{ref:t}),r)}),NR=$X(),jae=k.createContext(null),CUe=()=>k.useContext(jae);function Fa(e){return function(){return e}}const Iae=Math.cos,y5=Math.sin,Hd=Math.sqrt,w5=Math.PI,Q4=2*w5,k6=Math.PI,B6=2*k6,hp=1e-6,_Ue=B6-hp;function Fae(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function SUe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Fae;const r=10**t;return function(n){this._+=n[0];for(let a=1,s=n.length;a<s;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class NUe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Fae:SUe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,s,i){this._append`C${+t},${+r},${+n},${+a},${this._x1=+s},${this._y1=+i}`}arcTo(t,r,n,a,s){if(t=+t,r=+r,n=+n,a=+a,s=+s,s<0)throw new Error(`negative radius: ${s}`);let i=this._x1,o=this._y1,c=n-t,u=a-r,d=i-t,f=o-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>hp)if(!(Math.abs(f*c-u*d)>hp)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-i,g=a-o,v=c*c+u*u,b=p*p+g*g,y=Math.sqrt(v),C=Math.sqrt(h),N=s*Math.tan((k6-Math.acos((v+h-b)/(2*y*C)))/2),T=N/C,S=N/y;Math.abs(T-1)>hp&&this._append`L${t+T*d},${r+T*f}`,this._append`A${s},${s},0,0,${+(f*p>d*g)},${this._x1=t+S*c},${this._y1=r+S*u}`}}arc(t,r,n,a,s,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(a),c=n*Math.sin(a),u=t+o,d=r+c,f=1^i,h=i?a-s:s-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>hp||Math.abs(this._y1-d)>hp)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%B6+B6),h>_Ue?this._append`A${n},${n},0,1,${f},${t-o},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>hp&&this._append`A${n},${n},0,${+(h>=k6)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function kR(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new NUe(t)}function BR(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Oae(e){this._context=e}Oae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function H4(e){return new Oae(e)}function Dae(e){return e[0]}function Pae(e){return e[1]}function Rae(e,t){var r=Fa(!0),n=null,a=H4,s=null,i=kR(o);e=typeof e=="function"?e:e===void 0?Dae:Fa(e),t=typeof t=="function"?t:t===void 0?Pae:Fa(t);function o(c){var u,d=(c=BR(c)).length,f,h=!1,p;for(n==null&&(s=a(p=i())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(f,u,c),+t(f,u,c));if(p)return s=null,p+""||null}return o.x=function(c){return arguments.length?(e=typeof c=="function"?c:Fa(+c),o):e},o.y=function(c){return arguments.length?(t=typeof c=="function"?c:Fa(+c),o):t},o.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Fa(!!c),o):r},o.curve=function(c){return arguments.length?(a=c,n!=null&&(s=a(n)),o):a},o.context=function(c){return arguments.length?(c==null?n=s=null:s=a(n=c),o):n},o}function WC(e,t,r){var n=null,a=Fa(!0),s=null,i=H4,o=null,c=kR(u);e=typeof e=="function"?e:e===void 0?Dae:Fa(+e),t=typeof t=="function"?t:Fa(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Pae:Fa(+r);function u(f){var h,p,g,v=(f=BR(f)).length,b,y=!1,C,N=new Array(v),T=new Array(v);for(s==null&&(o=i(C=c())),h=0;h<=v;++h){if(!(h<v&&a(b=f[h],h,f))===y)if(y=!y)p=h,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),g=h-1;g>=p;--g)o.point(N[g],T[g]);o.lineEnd(),o.areaEnd()}y&&(N[h]=+e(b,h,f),T[h]=+t(b,h,f),o.point(n?+n(b,h,f):N[h],r?+r(b,h,f):T[h]))}if(C)return o=null,C+""||null}function d(){return Rae().defined(a).curve(i).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Fa(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Fa(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Fa(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Fa(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Fa(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Fa(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Fa(!!f),u):a},u.curve=function(f){return arguments.length?(i=f,s!=null&&(o=i(s)),u):i},u.context=function(f){return arguments.length?(f==null?s=o=null:o=i(s=f),u):s},u}class Lae{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function kUe(e){return new Lae(e,!0)}function BUe(e){return new Lae(e,!1)}const TR={draw(e,t){const r=Hd(t/w5);e.moveTo(r,0),e.arc(0,0,r,0,Q4)}},TUe={draw(e,t){const r=Hd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Mae=Hd(1/3),jUe=Mae*2,IUe={draw(e,t){const r=Hd(t/jUe),n=r*Mae;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},FUe={draw(e,t){const r=Hd(t),n=-r/2;e.rect(n,n,r,r)}},OUe=.8908130915292852,Uae=y5(w5/10)/y5(7*w5/10),DUe=y5(Q4/10)*Uae,PUe=-Iae(Q4/10)*Uae,RUe={draw(e,t){const r=Hd(t*OUe),n=DUe*r,a=PUe*r;e.moveTo(0,-r),e.lineTo(n,a);for(let s=1;s<5;++s){const i=Q4*s/5,o=Iae(i),c=y5(i);e.lineTo(c*r,-o*r),e.lineTo(o*n-c*a,c*n+o*a)}e.closePath()}},R3=Hd(3),LUe={draw(e,t){const r=-Hd(t/(R3*3));e.moveTo(0,r*2),e.lineTo(-R3*r,-r),e.lineTo(R3*r,-r),e.closePath()}},fu=-.5,hu=Hd(3)/2,T6=1/Hd(12),MUe=(T6/2+1)*3,UUe={draw(e,t){const r=Hd(t/MUe),n=r/2,a=r*T6,s=n,i=r*T6+r,o=-s,c=i;e.moveTo(n,a),e.lineTo(s,i),e.lineTo(o,c),e.lineTo(fu*n-hu*a,hu*n+fu*a),e.lineTo(fu*s-hu*i,hu*s+fu*i),e.lineTo(fu*o-hu*c,hu*o+fu*c),e.lineTo(fu*n+hu*a,fu*a-hu*n),e.lineTo(fu*s+hu*i,fu*i-hu*s),e.lineTo(fu*o+hu*c,fu*c-hu*o),e.closePath()}};function QUe(e,t){let r=null,n=kR(a);e=typeof e=="function"?e:Fa(e||TR),t=typeof t=="function"?t:Fa(t===void 0?64:+t);function a(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return a.type=function(s){return arguments.length?(e=typeof s=="function"?s:Fa(s),a):e},a.size=function(s){return arguments.length?(t=typeof s=="function"?s:Fa(+s),a):t},a.context=function(s){return arguments.length?(r=s??null,a):r},a}function E5(){}function C5(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Qae(e){this._context=e}Qae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:C5(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:C5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function HUe(e){return new Qae(e)}function Hae(e){this._context=e}Hae.prototype={areaStart:E5,areaEnd:E5,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:C5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function VUe(e){return new Hae(e)}function Vae(e){this._context=e}Vae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:C5(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zUe(e){return new Vae(e)}function zae(e){this._context=e}zae.prototype={areaStart:E5,areaEnd:E5,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function $Ue(e){return new zae(e)}function Xz(e){return e<0?-1:1}function Yz(e,t,r){var n=e._x1-e._x0,a=t-e._x1,s=(e._y1-e._y0)/(n||a<0&&-0),i=(r-e._y1)/(a||n<0&&-0),o=(s*a+i*n)/(n+a);return(Xz(s)+Xz(i))*Math.min(Math.abs(s),Math.abs(i),.5*Math.abs(o))||0}function Jz(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function L3(e,t,r){var n=e._x0,a=e._y0,s=e._x1,i=e._y1,o=(s-n)/3;e._context.bezierCurveTo(n+o,a+o*t,s-o,i-o*r,s,i)}function _5(e){this._context=e}_5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:L3(this,this._t0,Jz(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,L3(this,Jz(this,r=Yz(this,e,t)),r);break;default:L3(this,this._t0,r=Yz(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function $ae(e){this._context=new Gae(e)}($ae.prototype=Object.create(_5.prototype)).point=function(e,t){_5.prototype.point.call(this,t,e)};function Gae(e){this._context=e}Gae.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,s){this._context.bezierCurveTo(t,e,n,r,s,a)}};function GUe(e){return new _5(e)}function KUe(e){return new $ae(e)}function Kae(e){this._context=e}Kae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Zz(e),a=Zz(t),s=0,i=1;i<r;++s,++i)this._context.bezierCurveTo(n[0][s],a[0][s],n[1][s],a[1][s],e[i],t[i]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Zz(e){var t,r=e.length-1,n,a=new Array(r),s=new Array(r),i=new Array(r);for(a[0]=0,s[0]=2,i[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,s[t]=4,i[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,s[r-1]=7,i[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/s[t-1],s[t]-=n,i[t]-=n*i[t-1];for(a[r-1]=i[r-1]/s[r-1],t=r-2;t>=0;--t)a[t]=(i[t]-a[t+1])/s[t];for(s[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-a[t+1];return[a,s]}function qUe(e){return new Kae(e)}function V4(e,t){this._context=e,this._t=t}V4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function WUe(e){return new V4(e,.5)}function XUe(e){return new V4(e,0)}function YUe(e){return new V4(e,1)}function Gx(e,t){if((i=e.length)>1)for(var r=1,n,a,s=e[t[0]],i,o=s.length;r<i;++r)for(a=s,s=e[t[r]],n=0;n<o;++n)s[n][1]+=s[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function j6(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function JUe(e,t){return e[t]}function ZUe(e){const t=[];return t.key=e,t}function e7e(){var e=Fa([]),t=j6,r=Gx,n=JUe;function a(s){var i=Array.from(e.apply(this,arguments),ZUe),o,c=i.length,u=-1,d;for(const f of s)for(o=0,++u;o<c;++o)(i[o][u]=[0,+n(f,i[o].key,u,s)]).data=f;for(o=0,d=BR(t(i));o<c;++o)i[d[o]].index=o;return r(i,d),i}return a.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Fa(Array.from(s)),a):e},a.value=function(s){return arguments.length?(n=typeof s=="function"?s:Fa(+s),a):n},a.order=function(s){return arguments.length?(t=s==null?j6:typeof s=="function"?s:Fa(Array.from(s)),a):t},a.offset=function(s){return arguments.length?(r=s??Gx,a):r},a}function t7e(e,t){if((n=e.length)>0){for(var r,n,a=0,s=e[0].length,i;a<s;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}Gx(e,t)}}function r7e(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,s=n.length;r<s;++r){for(var i=0,o=0;i<a;++i)o+=e[i][r][1]||0;n[r][1]+=n[r][0]=-o/2}Gx(e,t)}}function n7e(e,t){if(!(!((i=e.length)>0)||!((s=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,s,i;n<s;++n){for(var o=0,c=0,u=0;o<i;++o){for(var d=e[t[o]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,g=0;g<o;++g){var v=e[t[g]],b=v[n][1]||0,y=v[n-1][1]||0;p+=b-y}c+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,Gx(e,t)}}var a7e=["type","size","sizeType"];function I6(){return I6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I6.apply(null,arguments)}function e$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function t$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e$(Object(r),!0).forEach(function(n){s7e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function s7e(e,t,r){return(t=i7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i7e(e){var t=o7e(e,"string");return typeof t=="symbol"?t:t+""}function o7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l7e(e,t){if(e==null)return{};var r,n,a=c7e(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function c7e(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qae={symbolCircle:TR,symbolCross:TUe,symbolDiamond:IUe,symbolSquare:FUe,symbolStar:RUe,symbolTriangle:LUe,symbolWye:UUe},u7e=Math.PI/180,d7e=e=>{var t="symbol".concat(I2(e));return qae[t]||TR},A7e=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*u7e;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},f7e=(e,t)=>{qae["symbol".concat(I2(e))]=t},jR=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=l7e(e,a7e),s=t$(t$({},a),{},{type:t,size:r,sizeType:n}),i=()=>{var f=d7e(t),h=QUe().type(f).size(A7e(r,n,t));return h()},{className:o,cx:c,cy:u}=s,d=Yn(s,!0);return c===+c&&u===+u&&r===+r?k.createElement("path",I6({},d,{className:gn("recharts-symbols",o),transform:"translate(".concat(c,", ").concat(u,")"),d:i()})):null};jR.registerSymbol=f7e;function F6(){return F6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F6.apply(null,arguments)}function r$(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function h7e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?r$(Object(r),!0).forEach(function(n){IR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):r$(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function IR(e,t,r){return(t=m7e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m7e(e){var t=p7e(e,"string");return typeof t=="symbol"?t:t+""}function p7e(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mu=32;class FR extends k.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,a=mu/2,s=mu/6,i=mu/3,o=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return k.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:a,x2:mu,y2:a,className:"recharts-legend-icon"});if(c==="line")return k.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(a,"h").concat(i,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(2*i,",").concat(a,`
            H`).concat(mu,"M").concat(2*i,",").concat(a,`
            A`).concat(s,",").concat(s,",0,1,1,").concat(i,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return k.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(mu/8,"h").concat(mu,"v").concat(mu*3/4,"h").concat(-mu,"z"),className:"recharts-legend-icon"});if(k.isValidElement(t.legendIcon)){var u=h7e({},t);return delete u.legendIcon,k.cloneElement(t.legendIcon,u)}return k.createElement(jR,{fill:o,cx:a,cy:a,size:mu,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:s,iconType:i}=this.props,o={x:0,y:0,width:mu,height:mu},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,p=gn({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?s:d.color,v=h?h(d.value,d,f):d.value;return k.createElement("li",F6({className:p,style:c,key:"legend-item-".concat(f)},Sg(this.props,d,f)),k.createElement(SR,{width:r,height:r,viewBox:o,style:u,"aria-label":"".concat(v," legend icon")},this.renderIcon(d,i)),k.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},v))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var a={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return k.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}IR(FR,"displayName","Legend");IR(FR,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var M3={},U3={},n$;function g7e(){return n$||(n$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let s=0;s<r.length;s++){const i=r[s],o=n(i);a.has(o)||a.set(o,i)}return Array.from(a.values())}e.uniqBy=t}(U3)),U3}var Q3={},a$;function z4(){return a$||(a$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(Q3)),Q3}var H3={},V3={},z3={},s$;function v7e(){return s$||(s$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(z3)),z3}var i$;function OR(){return i$||(i$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=v7e();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(V3)),V3}var $3={},o$;function x7e(){return o$||(o$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}($3)),$3}var l$;function b7e(){return l$||(l$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=OR(),r=x7e();function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n}(H3)),H3}var G3={},K3={},c$;function y7e(){return c$||(c$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ER();function r(n){return function(a){return t.get(a,n)}}e.property=r}(K3)),K3}var q3={},W3={},X3={},Y3={},u$;function Wae(){return u$||(u$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}(Y3)),Y3}var J3={},d$;function Xae(){return d$||(d$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(J3)),J3}var Z3={},A$;function DR(){return A$||(A$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(Z3)),Z3}var f$;function w7e(){return f$||(f$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PR(),r=Wae(),n=Xae(),a=DR();function s(f,h,p){return typeof p!="function"?t.isMatch(f,h):i(f,h,function g(v,b,y,C,N,T){const S=p(v,b,y,C,N,T);return S!==void 0?!!S:i(v,b,g,T)},new Map)}function i(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return o(f,h,p,g);case"function":return Object.keys(h).length>0?i(f,{...h},p,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function o(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,g);if(h instanceof Map)return c(f,h,p,g);if(h instanceof Set)return d(f,h,p,g);const v=Object.keys(h);if(f==null)return v.length===0;if(v.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let b=0;b<v.length;b++){const y=v[b];if(!n.isPrimitive(f)&&!(y in f)||h[y]===void 0&&f[y]!==void 0||h[y]===null&&f[y]!==null||!p(f[y],h[y],y,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[v,b]of h.entries()){const y=f.get(v);if(p(y,b,v,f,h,g)===!1)return!1}return!0}function u(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const v=new Set;for(let b=0;b<h.length;b++){const y=h[b];let C=!1;for(let N=0;N<f.length;N++){if(v.has(N))continue;const T=f[N];let S=!1;if(p(T,y,b,f,h,g)&&(S=!0),S){v.add(N),C=!0;break}}if(!C)return!1}return!0}function d(f,h,p,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,g):!1}e.isMatchWith=s,e.isSetMatch=d}(X3)),X3}var h$;function PR(){return h$||(h$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=w7e();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(W3)),W3}var ej={},tj={},rj={},m$;function Yae(){return m$||(m$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(rj)),rj}var nj={},p$;function RR(){return p$||(p$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(nj)),nj}var aj={},g$;function LR(){return g$||(g$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",s="[object Arguments]",i="[object Symbol]",o="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",g="[object Error]",v="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",C="[object Uint16Array]",N="[object Uint32Array]",T="[object BigUint64Array]",S="[object Int8Array]",B="[object Int16Array]",w="[object Int32Array]",_="[object BigInt64Array]",F="[object Float32Array]",M="[object Float64Array]";e.argumentsTag=s,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=_,e.bigUint64ArrayTag=T,e.booleanTag=a,e.dataViewTag=v,e.dateTag=o,e.errorTag=g,e.float32ArrayTag=F,e.float64ArrayTag=M,e.functionTag=f,e.int16ArrayTag=B,e.int32ArrayTag=w,e.int8ArrayTag=S,e.mapTag=c,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=i,e.uint16ArrayTag=C,e.uint32ArrayTag=N,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(aj)),aj}var sj={},v$;function E7e(){return v$||(v$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(sj)),sj}var x$;function Jae(){return x$||(x$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Yae(),r=RR(),n=LR(),a=Xae(),s=E7e();function i(d,f){return o(d,void 0,d,new Map,f)}function o(d,f,h,p=new Map,g=void 0){const v=g==null?void 0:g(d,f,h,p);if(v!=null)return v;if(a.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const b=new Array(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return Object.hasOwn(d,"index")&&(b.index=d.index),Object.hasOwn(d,"input")&&(b.input=d.input),b}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const b=new RegExp(d.source,d.flags);return b.lastIndex=d.lastIndex,b}if(d instanceof Map){const b=new Map;p.set(d,b);for(const[y,C]of d)b.set(y,o(C,y,h,p,g));return b}if(d instanceof Set){const b=new Set;p.set(d,b);for(const y of d)b.add(o(y,void 0,h,p,g));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(s.isTypedArray(d)){const b=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,b);for(let y=0;y<d.length;y++)b[y]=o(d[y],y,h,p,g);return b}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const b=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,b),c(b,d,h,p,g),b}if(typeof File<"u"&&d instanceof File){const b=new File([d],d.name,{type:d.type});return p.set(d,b),c(b,d,h,p,g),b}if(d instanceof Blob){const b=new Blob([d],{type:d.type});return p.set(d,b),c(b,d,h,p,g),b}if(d instanceof Error){const b=new d.constructor;return p.set(d,b),b.message=d.message,b.name=d.name,b.stack=d.stack,b.cause=d.cause,c(b,d,h,p,g),b}if(typeof d=="object"&&u(d)){const b=Object.create(Object.getPrototypeOf(d));return p.set(d,b),c(b,d,h,p,g),b}return d}function c(d,f,h=d,p,g){const v=[...Object.keys(f),...t.getSymbols(f)];for(let b=0;b<v.length;b++){const y=v[b],C=Object.getOwnPropertyDescriptor(d,y);(C==null||C.writable)&&(d[y]=o(f[y],y,h,p,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=i,e.cloneDeepWithImpl=o,e.copyProperties=c}(tj)),tj}var b$;function C7e(){return b$||(b$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jae();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(ej)),ej}var y$;function _7e(){return y$||(y$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PR(),r=C7e();function n(a){return a=r.cloneDeep(a),s=>t.isMatch(s,a)}e.matches=n}(q3)),q3}var ij={},oj={},lj={},w$;function S7e(){return w$||(w$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jae(),r=LR();function n(a,s){return t.cloneDeepWith(a,(i,o,c,u)=>{const d=s==null?void 0:s(i,o,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n}(lj)),lj}var E$;function N7e(){return E$||(E$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=S7e();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(oj)),oj}var cj={},uj={},C$;function Zae(){return C$||(C$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(uj)),uj}var dj={},_$;function k7e(){return _$||(_$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RR();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(dj)),dj}var S$;function B7e(){return S$||(S$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Sae(),r=Zae(),n=k7e(),a=wR();function s(i,o){let c;if(Array.isArray(o)?c=o:typeof o=="string"&&t.isDeepKey(o)&&(i==null?void 0:i[o])==null?c=a.toPath(o):c=[o],c.length===0)return!1;let u=i;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=s}(cj)),cj}var N$;function T7e(){return N$||(N$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PR(),r=Nae(),n=N7e(),a=ER(),s=B7e();function i(o,c){switch(typeof o){case"object":{Object.is(o==null?void 0:o.valueOf(),-0)&&(o="-0");break}case"number":{o=r.toKey(o);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,o);return d===void 0?s.has(u,o):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=i}(ij)),ij}var k$;function MR(){return k$||(k$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z4(),r=y7e(),n=_7e(),a=T7e();function s(i){if(i==null)return t.identity;switch(typeof i){case"function":return i;case"object":return Array.isArray(i)&&i.length===2?a.matchesProperty(i[0],i[1]):n.matches(i);case"string":case"symbol":case"number":return r.property(i)}}e.iteratee=s}(G3)),G3}var B$;function j7e(){return B$||(B$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=g7e(),r=z4(),n=b7e(),a=MR();function s(i,o=r.identity){return n.isArrayLikeObject(i)?t.uniqBy(Array.from(i),a.iteratee(o)):[]}e.uniqBy=s}(M3)),M3}var Aj,T$;function I7e(){return T$||(T$=1,Aj=j7e().uniqBy),Aj}var F7e=I7e();const j$=wl(F7e);function ese(e,t,r){return t===!0?j$(e,r):typeof t=="function"?j$(e,t):e}var fj={exports:{}},hj={},mj={exports:{}},pj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I$;function O7e(){if(I$)return pj;I$=1;var e=d1();function t(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,s=e.useLayoutEffect,i=e.useDebugValue;function o(f,h){var p=h(),g=n({inst:{value:p,getSnapshot:h}}),v=g[0].inst,b=g[1];return s(function(){v.value=p,v.getSnapshot=h,c(v)&&b({inst:v})},[f,p,h]),a(function(){return c(v)&&b({inst:v}),f(function(){c(v)&&b({inst:v})})},[f]),i(p),p}function c(f){var h=f.getSnapshot;f=f.value;try{var p=h();return!r(f,p)}catch{return!0}}function u(f,h){return h()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return pj.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:d,pj}var F$;function D7e(){return F$||(F$=1,mj.exports=O7e()),mj.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O$;function P7e(){if(O$)return hj;O$=1;var e=d1(),t=D7e();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,a=t.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,c=e.useDebugValue;return hj.useSyncExternalStoreWithSelector=function(u,d,f,h,p){var g=s(null);if(g.current===null){var v={hasValue:!1,value:null};g.current=v}else v=g.current;g=o(function(){function y(B){if(!C){if(C=!0,N=B,B=h(B),p!==void 0&&v.hasValue){var w=v.value;if(p(w,B))return T=w}return T=B}if(w=T,n(N,B))return w;var _=h(B);return p!==void 0&&p(w,_)?(N=B,w):(N=B,T=_)}var C=!1,N,T,S=f===void 0?null:f;return[function(){return y(d())},S===null?void 0:function(){return y(S())}]},[d,f,h,p]);var b=a(u,g[0],g[1]);return i(function(){v.hasValue=!0,v.value=b},[b]),c(b),b},hj}var D$;function R7e(){return D$||(D$=1,fj.exports=P7e()),fj.exports}var tse=R7e();const L7e=wl(tse);var UR=k.createContext(null),M7e=e=>e,$a=()=>{var e=k.useContext(UR);return e?e.store.dispatch:M7e},q_=()=>{},U7e=()=>q_,Q7e=(e,t)=>e===t;function sr(e){var t=k.useContext(UR);return tse.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:U7e,t?t.store.getState:q_,t?t.store.getState:q_,t?e:q_,Q7e)}function H7e(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function V7e(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function z7e(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var P$=e=>Array.isArray(e)?e:[e];function $7e(e){const t=Array.isArray(e[0])?e[0]:e;return z7e(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function G7e(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var K7e=class{constructor(e){this.value=e}deref(){return this.value}},q7e=typeof WeakRef<"u"?WeakRef:K7e,W7e=0,R$=1;function XC(){return{s:W7e,v:void 0,o:null,p:null}}function rse(e,t={}){let r=XC();const{resultEqualityCheck:n}=t;let a,s=0;function i(){var f;let o=r;const{length:c}=arguments;for(let h=0,p=c;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let v=o.o;v===null&&(o.o=v=new WeakMap);const b=v.get(g);b===void 0?(o=XC(),v.set(g,o)):o=b}else{let v=o.p;v===null&&(o.p=v=new Map);const b=v.get(g);b===void 0?(o=XC(),v.set(g,o)):o=b}}const u=o;let d;if(o.s===R$)d=o.v;else if(d=e.apply(null,arguments),s++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,s!==0&&s--),a=typeof d=="object"&&d!==null||typeof d=="function"?new q7e(d):d}return u.s=R$,u.v=d,d}return i.clearCache=()=>{r=XC(),i.resetResultsCount()},i.resultsCount=()=>s,i.resetResultsCount=()=>{s=0},i}function X7e(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let s=0,i=0,o,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),H7e(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:p=rse,argsMemoizeOptions:g=[]}=d,v=P$(h),b=P$(g),y=$7e(a),C=f(function(){return s++,u.apply(null,arguments)},...v),N=p(function(){i++;const S=G7e(y,arguments);return o=C.apply(null,S),o},...b);return Object.assign(N,{resultFunc:u,memoizedResultFunc:C,dependencies:y,dependencyRecomputations:()=>i,resetDependencyRecomputations:()=>{i=0},lastResult:()=>o,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var ct=X7e(rse),Y7e=Object.assign((e,t=ct)=>{V7e(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(s=>e[s]);return t(n,(...s)=>s.reduce((i,o,c)=>(i[r[c]]=o,i),{}))},{withTypes:()=>Y7e}),gj={},vj={},xj={},L$;function J7e(){return L$||(L$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,s)=>{if(n!==a){const i=t(n),o=t(a);if(i===o&&i===0){if(n<a)return s==="desc"?1:-1;if(n>a)return s==="desc"?-1:1}return s==="desc"?o-i:i-o}return 0};e.compareValues=r}(xj)),xj}var bj={},yj={},M$;function nse(){return M$||(M$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(yj)),yj}var U$;function Z7e(){return U$||(U$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nse(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(s,i){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||t.isSymbol(s)?!0:typeof s=="string"&&(n.test(s)||!r.test(s))||i!=null&&Object.hasOwn(i,s)}e.isKey=a}(bj)),bj}var Q$;function e9e(){return Q$||(Q$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=J7e(),r=Z7e(),n=wR();function a(s,i,o,c){if(s==null)return[];o=c?void 0:o,Array.isArray(s)||(s=Object.values(s)),Array.isArray(i)||(i=i==null?[null]:[i]),i.length===0&&(i=[null]),Array.isArray(o)||(o=o==null?[]:[o]),o=o.map(p=>String(p));const u=(p,g)=>{let v=p;for(let b=0;b<g.length&&v!=null;++b)v=v[g[b]];return v},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:u(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?u(g,p):typeof g=="object"?g[p]:g,f=i.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return s.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let v=0;v<f.length;v++){const b=t.compareValues(p.criteria[v],g.criteria[v],o[v]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=a}(vj)),vj}var wj={},H$;function t9e(){return H$||(H$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],s=Math.floor(n),i=(o,c)=>{for(let u=0;u<o.length;u++){const d=o[u];Array.isArray(d)&&c<s?i(d,c+1):a.push(d)}};return i(r,0),a}e.flatten=t}(wj)),wj}var Ej={},V$;function ase(){return V$||(V$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zae(),r=OR(),n=Wae(),a=DR();function s(i,o,c){return n.isObject(c)&&(typeof o=="number"&&r.isArrayLike(c)&&t.isIndex(o)&&o<c.length||typeof o=="string"&&o in c)?a.eq(c[o],i):!1}e.isIterateeCall=s}(Ej)),Ej}var z$;function r9e(){return z$||(z$=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=e9e(),r=t9e(),n=ase();function a(s,...i){const o=i.length;return o>1&&n.isIterateeCall(s,i[0],i[1])?i=[]:o>2&&n.isIterateeCall(i[0],i[1],i[2])&&(i=[i[0]]),t.orderBy(s,r.flatten(i),["asc"])}e.sortBy=a}(gj)),gj}var Cj,$$;function n9e(){return $$||($$=1,Cj=r9e().sortBy),Cj}var a9e=n9e();const $4=wl(a9e);var sse=e=>e.legend.settings,s9e=e=>e.legend.size,i9e=e=>e.legend.payload,o9e=ct([i9e,sse],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?$4(n,r):n});function l9e(){return sr(o9e)}var YC=1;function ise(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=k.useState({height:0,left:0,top:0,width:0}),n=k.useCallback(a=>{if(a!=null){var s=a.getBoundingClientRect(),i={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(i.height-t.height)>YC||Math.abs(i.left-t.left)>YC||Math.abs(i.top-t.top)>YC||Math.abs(i.width-t.width)>YC)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function uo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var c9e=typeof Symbol=="function"&&Symbol.observable||"@@observable",G$=c9e,_j=()=>Math.random().toString(36).substring(7).split("").join("."),u9e={INIT:`@@redux/INIT${_j()}`,REPLACE:`@@redux/REPLACE${_j()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${_j()}`},S5=u9e;function QR(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function ose(e,t,r){if(typeof e!="function")throw new Error(uo(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(uo(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(uo(1));return r(ose)(e,t)}let n=e,a=t,s=new Map,i=s,o=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((b,y)=>{i.set(y,b)}))}function d(){if(c)throw new Error(uo(3));return a}function f(b){if(typeof b!="function")throw new Error(uo(4));if(c)throw new Error(uo(5));let y=!0;u();const C=o++;return i.set(C,b),function(){if(y){if(c)throw new Error(uo(6));y=!1,u(),i.delete(C),s=null}}}function h(b){if(!QR(b))throw new Error(uo(7));if(typeof b.type>"u")throw new Error(uo(8));if(typeof b.type!="string")throw new Error(uo(17));if(c)throw new Error(uo(9));try{c=!0,a=n(a,b)}finally{c=!1}return(s=i).forEach(C=>{C()}),b}function p(b){if(typeof b!="function")throw new Error(uo(10));n=b,h({type:S5.REPLACE})}function g(){const b=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(uo(11));function C(){const T=y;T.next&&T.next(d())}return C(),{unsubscribe:b(C)}},[G$](){return this}}}return h({type:S5.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[G$]:g}}function d9e(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:S5.INIT})>"u")throw new Error(uo(12));if(typeof r(void 0,{type:S5.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(uo(13))})}function lse(e){const t=Object.keys(e),r={};for(let s=0;s<t.length;s++){const i=t[s];typeof e[i]=="function"&&(r[i]=e[i])}const n=Object.keys(r);let a;try{d9e(r)}catch(s){a=s}return function(i={},o){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],p=i[f],g=h(p,o);if(typeof g>"u")throw o&&o.type,new Error(uo(14));u[f]=g,c=c||g!==p}return c=c||n.length!==Object.keys(i).length,c?u:i}}function N5(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function A9e(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(uo(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},o=e.map(c=>c(i));return s=N5(...o)(a.dispatch),{...a,dispatch:s}}}function cse(e){return QR(e)&&"type"in e&&typeof e.type=="string"}var use=Symbol.for("immer-nothing"),K$=Symbol.for("immer-draftable"),Lc=Symbol.for("immer-state");function gd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Kx=Object.getPrototypeOf;function og(e){return!!e&&!!e[Lc]}function vh(e){var t;return e?dse(e)||Array.isArray(e)||!!e[K$]||!!((t=e.constructor)!=null&&t[K$])||K4(e)||q4(e):!1}var f9e=Object.prototype.constructor.toString();function dse(e){if(!e||typeof e!="object")return!1;const t=Kx(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===f9e}function k5(e,t){G4(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function G4(e){const t=e[Lc];return t?t.type_:Array.isArray(e)?1:K4(e)?2:q4(e)?3:0}function O6(e,t){return G4(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ase(e,t,r){const n=G4(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function h9e(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function K4(e){return e instanceof Map}function q4(e){return e instanceof Set}function mp(e){return e.copy_||e.base_}function D6(e,t){if(K4(e))return new Map(e);if(q4(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=dse(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Lc];let a=Reflect.ownKeys(n);for(let s=0;s<a.length;s++){const i=a[s],o=n[i];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Kx(e),n)}else{const n=Kx(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function HR(e,t=!1){return W4(e)||og(e)||!vh(e)||(G4(e)>1&&(e.set=e.add=e.clear=e.delete=m9e),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>HR(n,!0))),e}function m9e(){gd(2)}function W4(e){return Object.isFrozen(e)}var p9e={};function lg(e){const t=p9e[e];return t||gd(0,e),t}var Uw;function fse(){return Uw}function g9e(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function q$(e,t){t&&(lg("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function P6(e){R6(e),e.drafts_.forEach(v9e),e.drafts_=null}function R6(e){e===Uw&&(Uw=e.parent_)}function W$(e){return Uw=g9e(Uw,e)}function v9e(e){const t=e[Lc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function X$(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Lc].modified_&&(P6(t),gd(4)),vh(e)&&(e=B5(t,e),t.parent_||T5(t,e)),t.patches_&&lg("Patches").generateReplacementPatches_(r[Lc].base_,e,t.patches_,t.inversePatches_)):e=B5(t,r,[]),P6(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==use?e:void 0}function B5(e,t,r){if(W4(t))return t;const n=t[Lc];if(!n)return k5(t,(a,s)=>Y$(e,n,t,a,s,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return T5(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let s=a,i=!1;n.type_===3&&(s=new Set(a),a.clear(),i=!0),k5(s,(o,c)=>Y$(e,n,a,o,c,r,i)),T5(e,a,!1),r&&e.patches_&&lg("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function Y$(e,t,r,n,a,s,i){if(og(a)){const o=s&&t&&t.type_!==3&&!O6(t.assigned_,n)?s.concat(n):void 0,c=B5(e,a,o);if(Ase(r,n,c),og(c))e.canAutoFreeze_=!1;else return}else i&&r.add(a);if(vh(a)&&!W4(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;B5(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&T5(e,a)}}function T5(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&HR(t,r)}function x9e(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:fse(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,s=VR;r&&(a=[n],s=Qw);const{revoke:i,proxy:o}=Proxy.revocable(a,s);return n.draft_=o,n.revoke_=i,o}var VR={get(e,t){if(t===Lc)return e;const r=mp(e);if(!O6(r,t))return b9e(e,r,t);const n=r[t];return e.finalized_||!vh(n)?n:n===Sj(e.base_,t)?(Nj(e),e.copy_[t]=M6(n,e)):n},has(e,t){return t in mp(e)},ownKeys(e){return Reflect.ownKeys(mp(e))},set(e,t,r){const n=hse(mp(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=Sj(mp(e),t),s=a==null?void 0:a[Lc];if(s&&s.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(h9e(r,a)&&(r!==void 0||O6(e.base_,t)))return!0;Nj(e),L6(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Sj(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Nj(e),L6(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=mp(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){gd(11)},getPrototypeOf(e){return Kx(e.base_)},setPrototypeOf(){gd(12)}},Qw={};k5(VR,(e,t)=>{Qw[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Qw.deleteProperty=function(e,t){return Qw.set.call(this,e,t,void 0)};Qw.set=function(e,t,r){return VR.set.call(this,e[0],t,r,e[0])};function Sj(e,t){const r=e[Lc];return(r?mp(r):e)[t]}function b9e(e,t,r){var a;const n=hse(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function hse(e,t){if(!(t in e))return;let r=Kx(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Kx(r)}}function L6(e){e.modified_||(e.modified_=!0,e.parent_&&L6(e.parent_))}function Nj(e){e.copy_||(e.copy_=D6(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var y9e=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const s=r;r=t;const i=this;return function(c=s,...u){return i.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&gd(6),n!==void 0&&typeof n!="function"&&gd(7);let a;if(vh(t)){const s=W$(this),i=M6(t,void 0);let o=!0;try{a=r(i),o=!1}finally{o?P6(s):R6(s)}return q$(s,n),X$(a,s)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===use&&(a=void 0),this.autoFreeze_&&HR(a,!0),n){const s=[],i=[];lg("Patches").generateReplacementPatches_(t,a,s,i),n(s,i)}return a}else gd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(i,...o)=>this.produceWithPatches(i,c=>t(c,...o));let n,a;return[this.produce(t,r,(i,o)=>{n=i,a=o}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){vh(e)||gd(8),og(e)&&(e=ih(e));const t=W$(this),r=M6(e,void 0);return r[Lc].isManual_=!0,R6(t),r}finishDraft(e,t){const r=e&&e[Lc];(!r||!r.isManual_)&&gd(9);const{scope_:n}=r;return q$(n,t),X$(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=lg("Patches").applyPatches_;return og(e)?n(e,t):this.produce(e,a=>n(a,t))}};function M6(e,t){const r=K4(e)?lg("MapSet").proxyMap_(e,t):q4(e)?lg("MapSet").proxySet_(e,t):x9e(e,t);return(t?t.scope_:fse()).drafts_.push(r),r}function ih(e){return og(e)||gd(10,e),mse(e)}function mse(e){if(!vh(e)||W4(e))return e;const t=e[Lc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=D6(e,t.scope_.immer_.useStrictShallowCopy_)}else r=D6(e,!0);return k5(r,(n,a)=>{Ase(r,n,mse(a))}),t&&(t.finalized_=!1),r}var Mc=new y9e,pse=Mc.produce;Mc.produceWithPatches.bind(Mc);Mc.setAutoFreeze.bind(Mc);Mc.setUseStrictShallowCopy.bind(Mc);Mc.applyPatches.bind(Mc);Mc.createDraft.bind(Mc);Mc.finishDraft.bind(Mc);function gse(e){return({dispatch:r,getState:n})=>a=>s=>typeof s=="function"?s(r,n,e):a(s)}var w9e=gse(),E9e=gse,C9e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?N5:N5.apply(null,arguments)};function Ru(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Oc(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>cse(n)&&n.type===e,r}var vse=class wy extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,wy.prototype)}static get[Symbol.species](){return wy}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new wy(...t[0].concat(this)):new wy(...t.concat(this))}};function J$(e){return vh(e)?pse(e,()=>{}):e}function JC(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function _9e(e){return typeof e=="boolean"}var S9e=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:s=!0}=t??{};let i=new vse;return r&&(_9e(r)?i.push(w9e):i.push(E9e(r.extraArgument))),i},N9e="RTK_autoBatch",Z$=e=>t=>{setTimeout(t,e)},k9e=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,s=!1,i=!1;const o=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Z$(10):e.type==="callback"?e.queueNotification:Z$(e.timeout),u=()=>{i=!1,s&&(s=!1,o.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return o.add(d),()=>{h(),o.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[N9e]),s=!a,s&&(i||(i=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},B9e=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new vse(e);return n&&a.push(k9e(typeof n=="object"?n:void 0)),a};function T9e(e){const t=S9e(),{reducer:r=void 0,middleware:n,devTools:a=!0,preloadedState:s=void 0,enhancers:i=void 0}=e||{};let o;if(typeof r=="function")o=r;else if(QR(r))o=lse(r);else throw new Error(Oc(1));let c;typeof n=="function"?c=n(t):c=t();let u=N5;a&&(u=C9e({trace:!1,...typeof a=="object"&&a}));const d=A9e(...c),f=B9e(d);let h=typeof i=="function"?i(f):f();const p=u(...h);return ose(o,s,p)}function xse(e){const t={},r=[];let n;const a={addCase(s,i){const o=typeof s=="string"?s:s.type;if(!o)throw new Error(Oc(28));if(o in t)throw new Error(Oc(29));return t[o]=i,a},addMatcher(s,i){return r.push({matcher:s,reducer:i}),a},addDefaultCase(s){return n=s,a}};return e(a),[t,r,n]}function j9e(e){return typeof e=="function"}function I9e(e,t){let[r,n,a]=xse(t),s;if(j9e(e))s=()=>J$(e());else{const o=J$(e);s=()=>o}function i(o=s(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(og(d)){const p=f(d,c);return p===void 0?d:p}else{if(vh(d))return pse(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},o)}return i.getInitialState=s,i}var F9e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",O9e=(e=21)=>{let t="",r=e;for(;r--;)t+=F9e[Math.random()*64|0];return t},D9e=Symbol.for("rtk-slice-createasyncthunk");function P9e(e,t){return`${e}/${t}`}function R9e({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[D9e];return function(a){const{name:s,reducerPath:i=s}=a;if(!s)throw new Error(Oc(11));const o=(typeof a.reducers=="function"?a.reducers(M9e()):a.reducers)||{},c=Object.keys(o),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(T,S){const B=typeof T=="string"?T:T.type;if(!B)throw new Error(Oc(12));if(B in u.sliceCaseReducersByType)throw new Error(Oc(13));return u.sliceCaseReducersByType[B]=S,d},addMatcher(T,S){return u.sliceMatchers.push({matcher:T,reducer:S}),d},exposeAction(T,S){return u.actionCreators[T]=S,d},exposeCaseReducer(T,S){return u.sliceCaseReducersByName[T]=S,d}};c.forEach(T=>{const S=o[T],B={reducerName:T,type:P9e(s,T),createNotation:typeof a.reducers=="function"};Q9e(S)?V9e(B,S,d,t):U9e(B,S,d)});function f(){const[T={},S=[],B=void 0]=typeof a.extraReducers=="function"?xse(a.extraReducers):[a.extraReducers],w={...T,...u.sliceCaseReducersByType};return I9e(a.initialState,_=>{for(let F in w)_.addCase(F,w[F]);for(let F of u.sliceMatchers)_.addMatcher(F.matcher,F.reducer);for(let F of S)_.addMatcher(F.matcher,F.reducer);B&&_.addDefaultCase(B)})}const h=T=>T,p=new Map,g=new WeakMap;let v;function b(T,S){return v||(v=f()),v(T,S)}function y(){return v||(v=f()),v.getInitialState()}function C(T,S=!1){function B(_){let F=_[T];return typeof F>"u"&&S&&(F=JC(g,B,y)),F}function w(_=h){const F=JC(p,S,()=>new WeakMap);return JC(F,_,()=>{const M={};for(const[D,I]of Object.entries(a.selectors??{}))M[D]=L9e(I,_,()=>JC(g,_,y),S);return M})}return{reducerPath:T,getSelectors:w,get selectors(){return w(B)},selectSlice:B}}const N={name:s,reducer:b,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:y,...C(i),injectInto(T,{reducerPath:S,...B}={}){const w=S??i;return T.inject({reducerPath:w,reducer:b},B),{...N,...C(w,!0)}}};return N}}function L9e(e,t,r,n){function a(s,...i){let o=t(s);return typeof o>"u"&&n&&(o=r()),e(o,...i)}return a.unwrapped=e,a}var Hc=R9e();function M9e(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function U9e({type:e,reducerName:t,createNotation:r},n,a){let s,i;if("reducer"in n){if(r&&!H9e(n))throw new Error(Oc(17));s=n.reducer,i=n.prepare}else s=n;a.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,i?Ru(e,i):Ru(e))}function Q9e(e){return e._reducerDefinitionType==="asyncThunk"}function H9e(e){return e._reducerDefinitionType==="reducerWithPrepare"}function V9e({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Oc(18));const{payloadCreator:s,fulfilled:i,pending:o,rejected:c,settled:u,options:d}=r,f=a(e,s,d);n.exposeAction(t,f),i&&n.addCase(f.fulfilled,i),o&&n.addCase(f.pending,o),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:i||ZC,pending:o||ZC,rejected:c||ZC,settled:u||ZC})}function ZC(){}var z9e="task",bse="listener",yse="completed",zR="cancelled",$9e=`task-${zR}`,G9e=`task-${yse}`,U6=`${bse}-${zR}`,K9e=`${bse}-${yse}`,X4=class{constructor(e){XB(this,"name","TaskAbortError");XB(this,"message");this.code=e,this.message=`${z9e} ${zR} (reason: ${e})`}},$R=(e,t)=>{if(typeof e!="function")throw new TypeError(Oc(32))},j5=()=>{},wse=(e,t=j5)=>(e.catch(t),e),Ese=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Hp=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Vp=e=>{if(e.aborted){const{reason:t}=e;throw new X4(t)}};function Cse(e,t){let r=j5;return new Promise((n,a)=>{const s=()=>a(new X4(e.reason));if(e.aborted){s();return}r=Ese(e,s),t.finally(()=>r()).then(n,a)}).finally(()=>{r=j5})}var q9e=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof X4?"cancelled":"rejected",error:r}}finally{t==null||t()}},I5=e=>t=>wse(Cse(e,t).then(r=>(Vp(e),r))),_se=e=>{const t=I5(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:yx}=Object,eG={},Y4="listenerMiddleware",W9e=(e,t)=>{const r=n=>Ese(e,()=>Hp(n,e.reason));return(n,a)=>{$R(n);const s=new AbortController;r(s);const i=q9e(async()=>{Vp(e),Vp(s.signal);const o=await n({pause:I5(s.signal),delay:_se(s.signal),signal:s.signal});return Vp(s.signal),o},()=>Hp(s,G9e));return a!=null&&a.autoJoin&&t.push(i.catch(j5)),{result:I5(e)(i),cancel(){Hp(s,$9e)}}}},X9e=(e,t)=>{const r=async(n,a)=>{Vp(t);let s=()=>{};const o=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});s=()=>{d(),u()}})];a!=null&&o.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await Cse(t,Promise.race(o));return Vp(t),c}finally{s()}};return(n,a)=>wse(r(n,a))},Sse=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:s}=e;if(t)a=Ru(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Oc(21));return $R(s),{predicate:a,type:t,effect:s}},Nse=yx(e=>{const{type:t,predicate:r,effect:n}=Sse(e);return{id:O9e(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Oc(22))}}},{withTypes:()=>Nse}),tG=(e,t)=>{const{type:r,effect:n,predicate:a}=Sse(t);return Array.from(e.values()).find(s=>(typeof r=="string"?s.type===r:s.predicate===a)&&s.effect===n)},Q6=e=>{e.pending.forEach(t=>{Hp(t,U6)})},Y9e=e=>()=>{e.forEach(Q6),e.clear()},rG=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},kse=yx(Ru(`${Y4}/add`),{withTypes:()=>kse}),J9e=Ru(`${Y4}/removeAll`),Bse=yx(Ru(`${Y4}/remove`),{withTypes:()=>Bse}),Z9e=(...e)=>{console.error(`${Y4}/error`,...e)},O2=(e={})=>{const t=new Map,{extra:r,onError:n=Z9e}=e;$R(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&Q6(d)}),s=d=>{const f=tG(t,d)??Nse(d);return a(f)};yx(s,{withTypes:()=>s});const i=d=>{const f=tG(t,d);return f&&(f.unsubscribe(),d.cancelActive&&Q6(f)),!!f};yx(i,{withTypes:()=>i});const o=async(d,f,h,p)=>{const g=new AbortController,v=X9e(s,g.signal),b=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,yx({},h,{getOriginalState:p,condition:(y,C)=>v(y,C).then(Boolean),take:v,delay:_se(g.signal),pause:I5(g.signal),extra:r,signal:g.signal,fork:W9e(g.signal,b),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((y,C,N)=>{y!==g&&(Hp(y,U6),N.delete(y))})},cancel:()=>{Hp(g,U6),d.pending.delete(g)},throwIfCancelled:()=>{Vp(g.signal)}})))}catch(y){y instanceof X4||rG(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),Hp(g,K9e),d.pending.delete(g)}},c=Y9e(t);return{middleware:d=>f=>h=>{if(!cse(h))return f(h);if(kse.match(h))return s(h.payload);if(J9e.match(h)){c();return}if(Bse.match(h))return i(h.payload);let p=d.getState();const g=()=>{if(p===eG)throw new Error(Oc(23));return p};let v;try{if(v=f(h),t.size>0){const b=d.getState(),y=Array.from(t.values());for(const C of y){let N=!1;try{N=C.predicate(h,b,p)}catch(T){N=!1,rG(n,T,{raisedBy:"predicate"})}N&&o(C,h,d,g)}}}finally{p=eG}return v},startListening:s,stopListening:i,clearListeners:c}};function Oc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var eQe={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},Tse=Hc({name:"chartLayout",initialState:eQe,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:tQe,setLayout:rQe,setChartSize:nQe,setScale:aQe}=Tse.actions,sQe=Tse.reducer;function nG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nG(Object(r),!0).forEach(function(n){iQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iQe(e,t,r){return(t=oQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oQe(e){var t=lQe(e,"string");return typeof t=="symbol"?t:t+""}function lQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var F5=Math.PI/180,cQe=e=>e*180/Math.PI,ta=(e,t,r,n)=>({x:e+Math.cos(-F5*n)*r,y:t+Math.sin(-F5*n)*r}),jse=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},uQe=(e,t)=>{var{x:r,y:n}=e,{x:a,y:s}=t;return Math.sqrt((r-a)**2+(n-s)**2)},dQe=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:s}=t,i=uQe({x:r,y:n},{x:a,y:s});if(i<=0)return{radius:i,angle:0};var o=(r-a)/i,c=Math.acos(o);return n>s&&(c=2*Math.PI-c),{radius:i,angle:cQe(c),angleInRadian:c}},AQe=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),s=Math.min(n,a);return{startAngle:t-s*360,endAngle:r-s*360}},fQe=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),s=Math.floor(n/360),i=Math.min(a,s);return e+i*360},hQe=(e,t)=>{var{x:r,y:n}=e,{radius:a,angle:s}=dQe({x:r,y:n},t),{innerRadius:i,outerRadius:o}=t;if(a<i||a>o||a===0)return null;var{startAngle:c,endAngle:u}=AQe(t),d=s,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?aG(aG({},t),{},{radius:a,angle:fQe(d,t)}):null},Ise=e=>!k.isValidElement(e)&&typeof e!="function"&&typeof e!="boolean"&&e!=null?e.className:"";function Fse(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function sG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _u(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sG(Object(r),!0).forEach(function(n){mQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mQe(e,t,r){return(t=pQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pQe(e){var t=gQe(e,"string");return typeof t=="symbol"?t:t+""}function gQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Da(e,t,r){return js(e)||js(t)?r:YA(t)?Em(e,t,r):typeof t=="function"?t(e):r}var vQe=(e,t,r,n,a)=>{var s,i=-1,o=(s=t==null?void 0:t.length)!==null&&s!==void 0?s:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var c=0;c<o;c++){var u=c>0?r[c-1].coordinate:r[o-1].coordinate,d=r[c].coordinate,f=c>=o-1?r[0].coordinate:r[c+1].coordinate,h=void 0;if(Xi(d-u)!==Xi(f-d)){var p=[];if(Xi(f-d)===Xi(a[1]-a[0])){h=f;var g=d+a[1]-a[0];p[0]=Math.min(g,(g+u)/2),p[1]=Math.max(g,(g+u)/2)}else{h=u;var v=f+a[1]-a[0];p[0]=Math.min(d,(v+d)/2),p[1]=Math.max(d,(v+d)/2)}var b=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:i}=r[c]);break}}else{var y=Math.min(u,f),C=Math.max(u,f);if(e>(y+d)/2&&e<=(C+d)/2){({index:i}=r[c]);break}}}else if(t){for(var N=0;N<o;N++)if(N===0&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N>0&&N<o-1&&e>(t[N].coordinate+t[N-1].coordinate)/2&&e<=(t[N].coordinate+t[N+1].coordinate)/2||N===o-1&&e>(t[N].coordinate+t[N-1].coordinate)/2){({index:i}=t[N]);break}}return i},xQe=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:s,verticalAlign:i,layout:o}=t;if((o==="vertical"||o==="horizontal"&&i==="middle")&&s!=="center"&&cr(e[s]))return _u(_u({},e),{},{[s]:e[s]+(n||0)});if((o==="horizontal"||o==="vertical"&&s==="center")&&i!=="middle"&&cr(e[i]))return _u(_u({},e),{},{[i]:e[i]+(a||0)})}return e},Im=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",Ose=(e,t,r,n)=>{if(n)return e.map(o=>o.coordinate);var a,s,i=e.map(o=>(o.coordinate===t&&(a=!0),o.coordinate===r&&(s=!0),o.coordinate));return a||i.push(t),s||i.push(r),i},Dse=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:s,scale:i,realScaleType:o,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!i)return null;var g=o==="scaleBand"&&i.bandwidth?i.bandwidth()/2:2,v=a==="category"&&i.bandwidth?i.bandwidth()/g:0;if(v=p==="angleAxis"&&s&&s.length>=2?Xi(s[0]-s[1])*2*v:v,f||h){var b=(f||h||[]).map((y,C)=>{var N=n?n.indexOf(y):y;return{coordinate:i(N)+v,value:y,offset:v,index:C}});return b.filter(y=>!Rc(y.coordinate))}return c&&u?u.map((y,C)=>({coordinate:i(y)+v,value:y,index:C,offset:v})):i.ticks&&d!=null?i.ticks(d).map((y,C)=>({coordinate:i(y)+v,value:y,offset:v,index:C})):i.domain().map((y,C)=>({coordinate:i(y)+v,value:n?n[y]:y,index:C,offset:v}))},iG=1e-4,bQe=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-iG,s=Math.max(n[0],n[1])+iG,i=e(t[0]),o=e(t[r-1]);(i<a||i>s||o<a||o>s)&&e.domain([t[0],t[r-1]])}},yQe=(e,t)=>{if(!t||t.length!==2||!cr(t[0])||!cr(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!cr(e[0])||e[0]<r)&&(a[0]=r),(!cr(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},wQe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0,i=0;i<t;++i){var o=Rc(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=a,e[i][r][1]=a+o,a=e[i][r][1]):(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1])}},EQe=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var a=0,s=0;s<t;++s){var i=Rc(e[s][r][1])?e[s][r][0]:e[s][r][1];i>=0?(e[s][r][0]=a,e[s][r][1]=a+i,a=e[s][r][1]):(e[s][r][0]=0,e[s][r][1]=0)}},CQe={sign:wQe,expand:t7e,none:Gx,silhouette:r7e,wiggle:n7e,positive:EQe},_Qe=(e,t,r)=>{var n=CQe[r],a=e7e().keys(t).value((s,i)=>+Da(s,i,0)).order(j6).offset(n);return a(e)};function SQe(e){return e==null?void 0:String(e)}var oG=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:s,index:i}=e;if(t.type==="category")return r[i]?r[i].coordinate+n:null;var o=Da(s,t.dataKey,t.scale.domain()[i]);return js(o)?null:t.scale(o)-a/2+n},NQe=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},kQe=e=>{var t=e.flat(2).filter(cr);return[Math.min(...t),Math.max(...t)]},BQe=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],TQe=(e,t,r)=>{if(e!=null)return BQe(Object.keys(e).reduce((n,a)=>{var s=e[a],{stackedData:i}=s,o=i.reduce((c,u)=>{var d=Fse(u,t,r),f=kQe(d);return[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(o[0],n[0]),Math.max(o[1],n[1])]},[1/0,-1/0]))},lG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Hw=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=$4(t,d=>d.coordinate),s=1/0,i=1,o=a.length;i<o;i++){var c=a[i],u=a[i-1];s=Math.min((c.coordinate||0)-(u.coordinate||0),s)}return s===1/0?0:s}return r?void 0:0};function uG(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:s}=e;return _u(_u({},t),{},{dataKey:r,payload:n,value:a,name:s})}function T1(e,t){if(e)return String(e);if(typeof t=="string")return t}function jQe(e,t,r,n,a){if(r==="horizontal"||r==="vertical"){var s=e>=a.left&&e<=a.left+a.width&&t>=a.top&&t<=a.top+a.height;return s?{x:e,y:t}:null}return n?hQe({x:e,y:t},n):null}var IQe=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:a.coordinate};if(e==="centric"){var s=a.coordinate,{radius:i}=n;return _u(_u(_u({},n),ta(n.cx,n.cy,i,s)),{},{angle:s,radius:i})}var o=a.coordinate,{angle:c}=n;return _u(_u(_u({},n),ta(n.cx,n.cy,o,c)),{},{angle:c,radius:o})}return{x:0,y:0}},FQe=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,Ih=e=>e.layout.width,Fh=e=>e.layout.height,OQe=e=>e.layout.scale,Pse=e=>e.layout.margin,GR=ct(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),KR=ct(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Rse="data-recharts-item-index",Lse="data-recharts-item-data-key",J4=60;function dG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function w0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dG(Object(r),!0).forEach(function(n){DQe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DQe(e,t,r){return(t=PQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PQe(e){var t=RQe(e,"string");return typeof t=="symbol"?t:t+""}function RQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var LQe=e=>e.brush.height,ki=ct([Ih,Fh,Pse,LQe,GR,KR,sse,s9e],(e,t,r,n,a,s,i,o)=>{var c=s.reduce((g,v)=>{var{orientation:b}=v;if(!v.mirror&&!v.hide){var y=typeof v.width=="number"?v.width:J4;return w0(w0({},g),{},{[b]:g[b]+y})}return g},{left:r.left||0,right:r.right||0}),u=a.reduce((g,v)=>{var{orientation:b}=v;return!v.mirror&&!v.hide?w0(w0({},g),{},{[b]:Em(g,"".concat(b))+v.height}):g},{top:r.top||0,bottom:r.bottom||0}),d=w0(w0({},u),c),f=d.bottom;d.bottom+=n,d=xQe(d,i,o);var h=e-d.left-d.right,p=t-d.top-d.bottom;return w0(w0({brushBottom:f},d),{},{width:Math.max(h,0),height:Math.max(p,0)})}),MQe=ct(ki,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Mse=ct(Ih,Fh,(e,t)=>({x:0,y:0,width:e,height:t})),UQe=k.createContext(null),rc=()=>k.useContext(UQe)!=null,Z4=e=>e.brush,ek=ct([Z4,ki,Pse],(e,t,r)=>({height:e.height,x:cr(e.x)?e.x:t.left,y:cr(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:cr(e.width)?e.width:t.width})),qR=()=>{var e,t=rc(),r=sr(MQe),n=sr(ek),a=(e=sr(Z4))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},QQe={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Use=()=>{var e;return(e=sr(ki))!==null&&e!==void 0?e:QQe},WR=()=>sr(Ih),XR=()=>sr(Fh),HQe={top:0,right:0,bottom:0,left:0},VQe=()=>{var e;return(e=sr(t=>t.layout.margin))!==null&&e!==void 0?e:HQe},In=e=>e.layout.layoutType,YR=()=>sr(In),zQe={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Qse=Hc({name:"legend",initialState:zQe,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=ih(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:AG,setLegendSettings:$Qe,addLegendPayload:Hse,removeLegendPayload:Vse}=Qse.actions,GQe=Qse.reducer,KQe=["contextPayload"];function H6(){return H6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},H6.apply(null,arguments)}function fG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fG(Object(r),!0).forEach(function(n){JR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JR(e,t,r){return(t=qQe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qQe(e){var t=WQe(e,"string");return typeof t=="symbol"?t:t+""}function WQe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XQe(e,t){if(e==null)return{};var r,n,a=YQe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function YQe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function JQe(e){return e.value}function ZQe(e){var{contextPayload:t}=e,r=XQe(e,KQe),n=ese(t,e.payloadUniqBy,JQe),a=qx(qx({},r),{},{payload:n});return k.isValidElement(e.content)?k.cloneElement(e.content,a):typeof e.content=="function"?k.createElement(e.content,a):k.createElement(FR,a)}function eHe(e,t,r,n,a,s){var{layout:i,align:o,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(o==="center"&&i==="vertical"?u={left:((n||0)-s.width)/2}:u=o==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-s.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),qx(qx({},u),d)}function tHe(e){var t=$a();return k.useEffect(()=>{t($Qe(e))},[t,e]),null}function rHe(e){var t=$a();return k.useEffect(()=>(t(AG(e)),()=>{t(AG({width:0,height:0}))}),[t,e]),null}function nHe(e){var t=l9e(),r=CUe(),n=VQe(),{width:a,height:s,wrapperStyle:i,portal:o}=e,[c,u]=ise([t]),d=WR(),f=XR(),h=d-(n.left||0)-(n.right||0),p=tk.getWidthOrHeight(e.layout,s,a,h),g=o?i:qx(qx({position:"absolute",width:(p==null?void 0:p.width)||a||"auto",height:(p==null?void 0:p.height)||s||"auto"},eHe(i,e,n,d,f,c)),i),v=o??r;if(v==null)return null;var b=k.createElement("div",{className:"recharts-legend-wrapper",style:g,ref:u},k.createElement(tHe,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),k.createElement(rHe,{width:c.width,height:c.height}),k.createElement(ZQe,H6({},e,p,{margin:n,chartWidth:d,chartHeight:f,contextPayload:t})));return NR.createPortal(b,v)}class tk extends k.PureComponent{static getWidthOrHeight(t,r,n,a){return t==="vertical"&&cr(r)?{height:r}:t==="horizontal"?{width:n||a}:null}render(){return k.createElement(nHe,this.props)}}JR(tk,"displayName","Legend");JR(tk,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function V6(){return V6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},V6.apply(null,arguments)}function hG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function kj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hG(Object(r),!0).forEach(function(n){aHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aHe(e,t,r){return(t=sHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sHe(e){var t=iHe(e,"string");return typeof t=="symbol"?t:t+""}function iHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oHe(e){return Array.isArray(e)&&YA(e[0])&&YA(e[1])?e.join(" ~ "):e}var lHe=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:s,formatter:i,itemSorter:o,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(s&&s.length){var S={padding:0,margin:0},B=(o?$4(s,o):s).map((w,_)=>{if(w.type==="none")return null;var F=w.formatter||i||oHe,{value:M,name:D}=w,I=M,U=D;if(F){var P=F(M,D,w,_,s);if(Array.isArray(P))[I,U]=P;else if(P!=null)I=P;else return null}var X=kj({display:"block",paddingTop:4,paddingBottom:4,color:w.color||"#000"},n);return k.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(_),style:X},YA(U)?k.createElement("span",{className:"recharts-tooltip-item-name"},U):null,YA(U)?k.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,k.createElement("span",{className:"recharts-tooltip-item-value"},I),k.createElement("span",{className:"recharts-tooltip-item-unit"},w.unit||""))});return k.createElement("ul",{className:"recharts-tooltip-item-list",style:S},B)}return null},g=kj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),v=kj({margin:0},a),b=!js(d),y=b?d:"",C=gn("recharts-default-tooltip",c),N=gn("recharts-tooltip-label",u);b&&f&&s!==void 0&&s!==null&&(y=f(d,s));var T=h?{role:"status","aria-live":"assertive"}:{};return k.createElement("div",V6({className:C,style:g},T),k.createElement("p",{className:N,style:v},k.isValidElement(y)?y:"".concat(y)),p())},Hb="recharts-tooltip-wrapper",cHe={visibility:"hidden"};function uHe(e){var{coordinate:t,translateX:r,translateY:n}=e;return gn(Hb,{["".concat(Hb,"-right")]:cr(r)&&t&&cr(t.x)&&r>=t.x,["".concat(Hb,"-left")]:cr(r)&&t&&cr(t.x)&&r<t.x,["".concat(Hb,"-bottom")]:cr(n)&&t&&cr(t.y)&&n>=t.y,["".concat(Hb,"-top")]:cr(n)&&t&&cr(t.y)&&n<t.y})}function mG(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o,viewBox:c,viewBoxDimension:u}=e;if(s&&cr(s[n]))return s[n];var d=r[n]-o-(a>0?a:0),f=r[n]+a;if(t[n])return i[n]?d:f;var h=c[n];if(h==null)return 0;if(i[n]){var p=d,g=h;return p<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var v=f+o,b=h+u;return v>b?Math.max(d,h):Math.max(f,h)}function dHe(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function AHe(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:s,tooltipBox:i,useTranslate3d:o,viewBox:c}=e,u,d,f;return i.height>0&&i.width>0&&r?(d=mG({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.width,viewBox:c,viewBoxDimension:c.width}),f=mG({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:s,tooltipDimension:i.height,viewBox:c,viewBoxDimension:c.height}),u=dHe({translateX:d,translateY:f,useTranslate3d:o})):u=cHe,{cssProperties:u,cssClasses:uHe({translateX:d,translateY:f,coordinate:r})}}function pG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function e_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pG(Object(r),!0).forEach(function(n){z6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z6(e,t,r){return(t=fHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fHe(e){var t=hHe(e,"string");return typeof t=="symbol"?t:t+""}function hHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class mHe extends k.PureComponent{constructor(){super(...arguments),z6(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),z6(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:s,coordinate:i,hasPayload:o,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:g,lastBoundingBox:v,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:C,cssProperties:N}=AHe({allowEscapeViewBox:r,coordinate:i,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:v.height,width:v.width},useTranslate3d:h,viewBox:p}),T=y?{}:e_(e_({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&o?"visible":"hidden",position:"absolute",top:0,left:0}),S=e_(e_({},T),{},{visibility:!this.state.dismissed&&t&&o?"visible":"hidden"},g);return k.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:S,ref:b},s)}}var pHe=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Ng={isSsr:pHe()},zse=()=>sr(e=>e.rootProps.accessibilityLayer);function Uc(e){return Number.isFinite(e)}function Wx(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function $6(){return $6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$6.apply(null,arguments)}function gG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function vG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gG(Object(r),!0).forEach(function(n){gHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gHe(e,t,r){return(t=vHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vHe(e){var t=xHe(e,"string");return typeof t=="symbol"?t:t+""}function xHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xG={curveBasisClosed:VUe,curveBasisOpen:zUe,curveBasis:HUe,curveBumpX:kUe,curveBumpY:BUe,curveLinearClosed:$Ue,curveLinear:H4,curveMonotoneX:GUe,curveMonotoneY:KUe,curveNatural:qUe,curveStep:WUe,curveStepAfter:YUe,curveStepBefore:XUe},t_=e=>Uc(e.x)&&Uc(e.y),Vb=e=>e.x,zb=e=>e.y,bHe=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(I2(e));return(r==="curveMonotone"||r==="curveBump")&&t?xG["".concat(r).concat(t==="vertical"?"Y":"X")]:xG[r]||H4},yHe=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:s=!1}=e,i=bHe(t,a),o=s?r.filter(t_):r,c;if(Array.isArray(n)){var u=s?n.filter(f=>t_(f)):n,d=o.map((f,h)=>vG(vG({},f),{},{base:u[h]}));return a==="vertical"?c=WC().y(zb).x1(Vb).x0(f=>f.base.x):c=WC().x(Vb).y1(zb).y0(f=>f.base.y),c.defined(t_).curve(i),c(d)}return a==="vertical"&&cr(n)?c=WC().y(zb).x1(Vb).x0(n):cr(n)?c=WC().x(Vb).y1(zb).y0(n):c=Rae().x(Vb).y(zb),c.defined(t_).curve(i),c(o)},$se=e=>{var{className:t,points:r,path:n,pathRef:a}=e;if((!r||!r.length)&&!n)return null;var s=r&&r.length?yHe(e):n;return k.createElement("path",$6({},al(e),_R(e),{className:gn("recharts-curve",t),d:s===null?void 0:s,ref:a}))},wHe=["x","y","top","left","width","height","className"];function G6(){return G6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},G6.apply(null,arguments)}function bG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function EHe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bG(Object(r),!0).forEach(function(n){CHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CHe(e,t,r){return(t=_He(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _He(e){var t=SHe(e,"string");return typeof t=="symbol"?t:t+""}function SHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NHe(e,t){if(e==null)return{};var r,n,a=kHe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kHe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var BHe=(e,t,r,n,a,s)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(s,",").concat(t,"h").concat(r),THe=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:s=0,height:i=0,className:o}=e,c=NHe(e,wHe),u=EHe({x:t,y:r,top:n,left:a,width:s,height:i},c);return!cr(t)||!cr(r)||!cr(s)||!cr(i)||!cr(n)||!cr(a)?null:k.createElement("path",G6({},Yn(u,!0),{className:gn("recharts-cross",o),d:BHe(t,r,s,i,n,a)}))};function jHe(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function yG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IHe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yG(Object(r),!0).forEach(function(n){FHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FHe(e,t,r){return(t=OHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OHe(e){var t=DHe(e,"string");return typeof t=="symbol"?t:t+""}function DHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uu(e,t){var r=IHe({},e),n=t,a=Object.keys(t),s=a.reduce((i,o)=>(i[o]===void 0&&n[o]!==void 0&&(i[o]=n[o]),i),r);return s}var Bj={},Tj={},jj={},wG;function PHe(){return wG||(wG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(jj)),jj}var EG;function RHe(){return EG||(EG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PHe(),r=Yae(),n=RR(),a=LR(),s=DR();function i(u,d,f){return o(u,d,void 0,void 0,void 0,void 0,f)}function o(u,d,f,h,p,g,v){const b=v(u,d,f,h,p,g);if(b!==void 0)return b;if(typeof u==typeof d)switch(typeof u){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return u===d;case"number":return u===d||Object.is(u,d);case"function":return u===d;case"object":return c(u,d,g,v)}return c(u,d,g,v)}function c(u,d,f,h){if(Object.is(u,d))return!0;let p=n.getTag(u),g=n.getTag(d);if(p===a.argumentsTag&&(p=a.objectTag),g===a.argumentsTag&&(g=a.objectTag),p!==g)return!1;switch(p){case a.stringTag:return u.toString()===d.toString();case a.numberTag:{const y=u.valueOf(),C=d.valueOf();return s.eq(y,C)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(u.valueOf(),d.valueOf());case a.regexpTag:return u.source===d.source&&u.flags===d.flags;case a.functionTag:return u===d}f=f??new Map;const v=f.get(u),b=f.get(d);if(v!=null&&b!=null)return v===d;f.set(u,d),f.set(d,u);try{switch(p){case a.mapTag:{if(u.size!==d.size)return!1;for(const[y,C]of u.entries())if(!d.has(y)||!o(C,d.get(y),y,u,d,f,h))return!1;return!0}case a.setTag:{if(u.size!==d.size)return!1;const y=Array.from(u.values()),C=Array.from(d.values());for(let N=0;N<y.length;N++){const T=y[N],S=C.findIndex(B=>o(T,B,void 0,u,d,f,h));if(S===-1)return!1;C.splice(S,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(u)!==Buffer.isBuffer(d)||u.length!==d.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],d[y],y,u,d,f,h))return!1;return!0}case a.arrayBufferTag:return u.byteLength!==d.byteLength?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.dataViewTag:return u.byteLength!==d.byteLength||u.byteOffset!==d.byteOffset?!1:c(new Uint8Array(u),new Uint8Array(d),f,h);case a.errorTag:return u.name===d.name&&u.message===d.message;case a.objectTag:{if(!(c(u.constructor,d.constructor,f,h)||t.isPlainObject(u)&&t.isPlainObject(d)))return!1;const C=[...Object.keys(u),...r.getSymbols(u)],N=[...Object.keys(d),...r.getSymbols(d)];if(C.length!==N.length)return!1;for(let T=0;T<C.length;T++){const S=C[T],B=u[S];if(!Object.hasOwn(d,S))return!1;const w=d[S];if(!o(B,w,S,u,d,f,h))return!1}return!0}default:return!1}}finally{f.delete(u),f.delete(d)}}e.isEqualWith=i}(Tj)),Tj}var Ij={},CG;function LHe(){return CG||(CG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(Ij)),Ij}var _G;function MHe(){return _G||(_G=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RHe(),r=LHe();function n(a,s){return t.isEqualWith(a,s,r.noop)}e.isEqual=n}(Bj)),Bj}var Fj,SG;function UHe(){return SG||(SG=1,Fj=MHe().isEqual),Fj}var QHe=UHe();const HHe=wl(QHe);var O5=1e-4,Gse=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],Kse=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),NG=(e,t)=>r=>{var n=Gse(e,t);return Kse(n,r)},VHe=(e,t)=>r=>{var n=Gse(e,t),a=[...n.map((s,i)=>s*i).slice(1),0];return Kse(a,r)},kG=function(){for(var t,r,n,a,s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];if(i.length===1)switch(i[0]){case"linear":[t,n,r,a]=[0,0,1,1];break;case"ease":[t,n,r,a]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,a]=[.42,0,1,1];break;case"ease-out":[t,n,r,a]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,a]=[0,0,.58,1];break;default:{var c=i[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,a]=c[1].split(")")[0].split(",").map(g=>parseFloat(g)))}}else i.length===4&&([t,n,r,a]=i);var u=NG(t,r),d=NG(n,a),f=VHe(t,r),h=g=>g>1?1:g<0?0:g,p=g=>{for(var v=g>1?1:g,b=v,y=0;y<8;++y){var C=u(b)-v,N=f(b);if(Math.abs(C-v)<O5||N<O5)return d(b);b=h(b-C/N)}return d(b)};return p.isStepper=!1,p},zHe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,s=(i,o,c)=>{var u=-(i-o)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+i;return Math.abs(h-o)<O5&&Math.abs(f)<O5?[o,0]:[h,f]};return s.isStepper=!0,s.dt=a,s},qse=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return kG(e);case"spring":return zHe();default:if(e.split("(")[0]==="cubic-bezier")return kG(e)}return typeof e=="function"?e:null};function BG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function TG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BG(Object(r),!0).forEach(function(n){$He(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $He(e,t,r){return(t=GHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GHe(e){var t=KHe(e,"string");return typeof t=="symbol"?t:t+""}function KHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qHe=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),WHe=(e,t,r)=>e.map(n=>"".concat(qHe(n)," ").concat(t,"ms ").concat(r)).join(","),XHe=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Vw=(e,t)=>Object.keys(t).reduce((r,n)=>TG(TG({},r),{},{[n]:e(n,t[n])}),{});function jG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jG(Object(r),!0).forEach(function(n){YHe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YHe(e,t,r){return(t=JHe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JHe(e){var t=ZHe(e,"string");return typeof t=="symbol"?t:t+""}function ZHe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D5=(e,t,r)=>e+(t-e)*r,K6=e=>{var{from:t,to:r}=e;return t!==r},Wse=(e,t,r)=>{var n=Vw((a,s)=>{if(K6(s)){var[i,o]=e(s.from,s.to,s.velocity);return mo(mo({},s),{},{from:i,velocity:o})}return s},t);return r<1?Vw((a,s)=>K6(s)?mo(mo({},s),{},{velocity:D5(s.velocity,n[a].velocity,r),from:D5(s.from,n[a].from,r)}):s,t):Wse(e,n,r-1)};function eVe(e,t,r,n,a,s){var i,o=n.reduce((h,p)=>mo(mo({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>Vw((h,p)=>p.from,o),u=()=>!Object.values(o).filter(K6).length,d=null,f=h=>{i||(i=h);var p=h-i,g=p/r.dt;o=Wse(r,o,g),a(mo(mo(mo({},e),t),c())),i=h,u()||(d=s.setTimeout(f))};return()=>(d=s.setTimeout(f),()=>{d()})}function tVe(e,t,r,n,a,s,i){var o=null,c=a.reduce((f,h)=>mo(mo({},f),{},{[h]:[e[h],t[h]]}),{}),u,d=f=>{u||(u=f);var h=(f-u)/n,p=Vw((v,b)=>D5(...b,r(h)),c);if(s(mo(mo(mo({},e),t),p)),h<1)o=i.setTimeout(d);else{var g=Vw((v,b)=>D5(...b,r(1)),c);s(mo(mo(mo({},e),t),g))}};return()=>(o=i.setTimeout(d),()=>{o()})}const Xse=(e,t,r,n,a,s)=>{var i=XHe(e,t);return r.isStepper===!0?eVe(e,t,r,i,a,s):tVe(e,t,r,n,i,a,s)};function rVe(e){var t,r=()=>null,n=!1,a=null,s=i=>{if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,[c,...u]=o;if(typeof c=="number"){a=e.setTimeout(s.bind(null,u),c);return}s(c),a=e.setTimeout(s.bind(null,u));return}typeof i=="string"&&(t=i,r(t)),typeof i=="object"&&(t=i,r(t)),typeof i=="function"&&i()}};return{stop:()=>{n=!0},start:i=>{n=!1,a&&(a(),a=null),s(i)},subscribe:i=>(r=i,()=>{r=()=>null}),getTimeoutController:()=>e}}class nVe{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,s=i=>{i-n>=r?t(i):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(s))};return a=requestAnimationFrame(s),()=>{cancelAnimationFrame(a)}}}function aVe(){return rVe(new nVe)}var sVe=k.createContext(aVe);function Yse(e,t){var r=k.useContext(sVe);return k.useMemo(()=>t??r(e),[e,t,r])}var iVe=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function q6(){return q6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q6.apply(null,arguments)}function oVe(e,t){if(e==null)return{};var r,n,a=lVe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lVe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function IG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function E0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IG(Object(r),!0).forEach(function(n){Np(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IG(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Np(e,t,r){return(t=cVe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cVe(e){var t=uVe(e,"string");return typeof t=="symbol"?t:t+""}function uVe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class ZR extends k.PureComponent{constructor(t,r){super(t,r),Np(this,"mounted",!1),Np(this,"manager",void 0),Np(this,"stopJSAnimation",null),Np(this,"unSubscribe",null);var{isActive:n,attributeName:a,from:s,to:i,children:o,duration:c,animationManager:u}=this.props;if(this.manager=u,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof o=="function"&&(this.state={style:i});return}if(s){if(typeof o=="function"){this.state={style:s};return}this.state={style:a?{[a]:s}:s}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:a,shouldReAnimate:s,to:i,from:o}=this.props,{style:c}=this.state;if(n){if(!r){var u={style:a?{[a]:i}:i};this.state&&c&&(a&&c[a]!==i||!a&&c!==i)&&this.setState(u);return}if(!(HHe(t.to,i)&&t.canBegin&&t.isActive)){var d=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var f=d||s?o:t.to;if(this.state&&c){var h={style:a?{[a]:f}:f};(a&&c[a]!==f||!a&&c!==f)&&this.setState(h)}this.runAnimation(E0(E0({},this.props),{},{from:f,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c}=t,u=Xse(r,n,qse(s),a,this.changeStyle,this.manager.getTimeoutController()),d=()=>{this.stopJSAnimation=u()};this.manager.start([c,i,d,a,o])}runAnimation(t){var{begin:r,duration:n,attributeName:a,to:s,easing:i,onAnimationStart:o,onAnimationEnd:c,children:u}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof i=="function"||typeof u=="function"||i==="spring"){this.runJSAnimation(t);return}var d=a?{[a]:s}:s,f=WHe(Object.keys(d),n,i);this.manager.start([o,r,E0(E0({},d),{},{transition:f}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:a,attributeName:s,easing:i,isActive:o,from:c,to:u,canBegin:d,onAnimationEnd:f,shouldReAnimate:h,onAnimationReStart:p,animationManager:g}=t,v=oVe(t,iVe),b=k.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!o||b===0||a<=0)return r;var C=N=>{var{style:T={},className:S}=N.props,B=k.cloneElement(N,E0(E0({},v),{},{style:E0(E0({},T),y),className:S}));return B};return b===1?C(k.Children.only(r)):k.createElement("div",null,k.Children.map(r,N=>C(N)))}}Np(ZR,"displayName","Animate");Np(ZR,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function P5(e){var t,r=Yse((t=e.attributeName)!==null&&t!==void 0?t:Object.keys(e.to).join(","),e.animationManager);return k.createElement(ZR,q6({},e,{animationManager:r}))}function R5(){return R5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R5.apply(null,arguments)}var FG=(e,t,r,n,a)=>{var s=Math.min(Math.abs(r)/2,Math.abs(n)/2),i=n>=0?1:-1,o=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,u;if(s>0&&a instanceof Array){for(var d=[0,0,0,0],f=0,h=4;f<h;f++)d[f]=a[f]>s?s:a[f];u="M".concat(e,",").concat(t+i*d[0]),d[0]>0&&(u+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+o*d[0],",").concat(t)),u+="L ".concat(e+r-o*d[1],",").concat(t),d[1]>0&&(u+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+i*d[1])),u+="L ".concat(e+r,",").concat(t+n-i*d[2]),d[2]>0&&(u+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,`,
        `).concat(e+r-o*d[2],",").concat(t+n)),u+="L ".concat(e+o*d[3],",").concat(t+n),d[3]>0&&(u+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-i*d[3])),u+="Z"}else if(s>0&&a===+a&&a>0){var p=Math.min(s,a);u="M ".concat(e,",").concat(t+i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+o*p,",").concat(t,`
            L `).concat(e+r-o*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+i*p,`
            L `).concat(e+r,",").concat(t+n-i*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-o*p,",").concat(t+n,`
            L `).concat(e+o*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-i*p," Z")}else u="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return u},dVe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Jse=e=>{var t=Uu(e,dVe),r=k.useRef(null),[n,a]=k.useState(-1);k.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&a(y)}catch{}},[]);var{x:s,y:i,width:o,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:v}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||o===0||c===0)return null;var b=gn("recharts-rectangle",d);return v?k.createElement(P5,{canBegin:n>0,from:{width:o,height:c,x:s,y:i},to:{width:o,height:c,x:s,y:i},duration:h,animationEasing:f,isActive:v},y=>{var{width:C,height:N,x:T,y:S}=y;return k.createElement(P5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,isActive:g,easing:f},k.createElement("path",R5({},Yn(t,!0),{className:b,d:FG(T,S,C,N,u),ref:r})))}):k.createElement("path",R5({},Yn(t,!0),{className:b,d:FG(s,i,o,c,u)}))};function Zse(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:s}=e,i=ta(t,r,n,a),o=ta(t,r,n,s);return{points:[i,o],cx:t,cy:r,radius:n,startAngle:a,endAngle:s}}function W6(){return W6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W6.apply(null,arguments)}var AVe=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},r_=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:s,isExternal:i,cornerRadius:o,cornerIsExternal:c}=e,u=o*(i?1:-1)+n,d=Math.asin(o/u)/F5,f=c?a:a+s*d,h=ta(t,r,u,f),p=ta(t,r,n,f),g=c?a-s*d:a,v=ta(t,r,u*Math.cos(d*F5),g);return{center:h,circleTangency:p,lineTangency:v,theta:d}},eie=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:s,endAngle:i}=e,o=AVe(s,i),c=s+o,u=ta(t,r,a,s),d=ta(t,r,a,c),f="M ".concat(u.x,",").concat(u.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(o)>180),",").concat(+(s>c),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(n>0){var h=ta(t,r,n,s),p=ta(t,r,n,c);f+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(o)>180),",").concat(+(s<=c),`,
            `).concat(h.x,",").concat(h.y," Z")}else f+="L ".concat(t,",").concat(r," Z");return f},fVe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:s,forceCornerRadius:i,cornerIsExternal:o,startAngle:c,endAngle:u}=e,d=Xi(u-c),{circleTangency:f,lineTangency:h,theta:p}=r_({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:g,lineTangency:v,theta:b}=r_({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:s,cornerIsExternal:o}),y=o?Math.abs(c-u):Math.abs(c-u)-p-b;if(y<0)return i?"M ".concat(h.x,",").concat(h.y,`
        a`).concat(s,",").concat(s,",0,0,1,").concat(s*2,`,0
        a`).concat(s,",").concat(s,",0,0,1,").concat(-s*2,`,0
      `):eie({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var C="M ".concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(y>180),",").concat(+(d<0),",").concat(g.x,",").concat(g.y,`
    A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(v.x,",").concat(v.y,`
  `);if(n>0){var{circleTangency:N,lineTangency:T,theta:S}=r_({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:B,lineTangency:w,theta:_}=r_({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),F=o?Math.abs(c-u):Math.abs(c-u)-S-_;if(F<0&&s===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+="L".concat(w.x,",").concat(w.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(B.x,",").concat(B.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(F>180),",").concat(+(d>0),",").concat(N.x,",").concat(N.y,`
      A`).concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else C+="L".concat(t,",").concat(r,"Z");return C},hVe={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},tie=e=>{var t=Uu(e,hVe),{cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(s<a||u===d)return null;var h=gn("recharts-sector",f),p=s-a,g=yl(i,p,0,!0),v;return g>0&&Math.abs(u-d)<360?v=fVe({cx:r,cy:n,innerRadius:a,outerRadius:s,cornerRadius:Math.min(g,p/2),forceCornerRadius:o,cornerIsExternal:c,startAngle:u,endAngle:d}):v=eie({cx:r,cy:n,innerRadius:a,outerRadius:s,startAngle:u,endAngle:d}),k.createElement("path",W6({},Yn(t,!0),{className:h,d:v}))};function mVe(e,t,r){var n,a,s,i;if(e==="horizontal")n=t.x,s=n,a=r.top,i=r.top+r.height;else if(e==="vertical")a=t.y,i=a,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:o,cy:c,innerRadius:u,outerRadius:d,angle:f}=t,h=ta(o,c,u,f),p=ta(o,c,d,f);n=h.x,a=h.y,s=p.x,i=p.y}else return Zse(t);return[{x:n,y:a},{x:s,y:i}]}var Oj={},Dj={},Pj={},OG;function pVe(){return OG||(OG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=nse();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(Pj)),Pj}var DG;function gVe(){return DG||(DG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pVe();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(Dj)),Dj}var PG;function vVe(){return PG||(PG=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ase(),r=gVe();function n(a,s,i){i&&typeof i!="number"&&t.isIterateeCall(a,s,i)&&(s=i=void 0),a=r.toFinite(a),s===void 0?(s=a,a=0):s=r.toFinite(s),i=i===void 0?a<s?1:-1:r.toFinite(i);const o=Math.max(Math.ceil((s-a)/(i||1)),0),c=new Array(o);for(let u=0;u<o;u++)c[u]=a,a+=i;return c}e.range=n}(Oj)),Oj}var Rj,RG;function xVe(){return RG||(RG=1,Rj=vVe().range),Rj}var bVe=xVe();const rie=wl(bVe);function rm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yVe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function eL(e){let t,r,n;e.length!==2?(t=rm,r=(o,c)=>rm(e(o),c),n=(o,c)=>e(o)-c):(t=e===rm||e===yVe?e:wVe,r=e,n=e);function a(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(o,c,u=0,d=o.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(o[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function i(o,c,u=0,d=o.length){const f=a(o,c,u,d-1);return f>u&&n(o[f-1],c)>-n(o[f],c)?f-1:f}return{left:a,center:i,right:s}}function wVe(){return 0}function nie(e){return e===null?NaN:+e}function*EVe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const CVe=eL(rm),D2=CVe.right;eL(nie).center;class LG extends Map{constructor(t,r=NVe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(MG(this,t))}has(t){return super.has(MG(this,t))}set(t,r){return super.set(_Ve(this,t),r)}delete(t){return super.delete(SVe(this,t))}}function MG({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function _Ve({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function SVe({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function NVe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function kVe(e=rm){if(e===rm)return aie;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function aie(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const BVe=Math.sqrt(50),TVe=Math.sqrt(10),jVe=Math.sqrt(2);function L5(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),s=n/Math.pow(10,a),i=s>=BVe?10:s>=TVe?5:s>=jVe?2:1;let o,c,u;return a<0?(u=Math.pow(10,-a)/i,o=Math.round(e*u),c=Math.round(t*u),o/u<e&&++o,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*i,o=Math.round(e/u),c=Math.round(t/u),o*u<e&&++o,c*u>t&&--c),c<o&&.5<=r&&r<2?L5(e,t,r*2):[o,c,u]}function X6(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,s,i]=n?L5(t,e,r):L5(e,t,r);if(!(s>=a))return[];const o=s-a+1,c=new Array(o);if(n)if(i<0)for(let u=0;u<o;++u)c[u]=(s-u)/-i;else for(let u=0;u<o;++u)c[u]=(s-u)*i;else if(i<0)for(let u=0;u<o;++u)c[u]=(a+u)/-i;else for(let u=0;u<o;++u)c[u]=(a+u)*i;return c}function Y6(e,t,r){return t=+t,e=+e,r=+r,L5(e,t,r)[2]}function J6(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?Y6(t,e,r):Y6(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function UG(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function QG(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function sie(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?aie:kVe(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));sie(e,t,p,g,a)}const s=e[t];let i=r,o=n;for($b(e,r,t),a(e[n],s)>0&&$b(e,r,n);i<o;){for($b(e,i,o),++i,--o;a(e[i],s)<0;)++i;for(;a(e[o],s)>0;)--o}a(e[r],s)===0?$b(e,r,o):(++o,$b(e,o,n)),o<=t&&(r=o+1),t<=o&&(n=o-1)}return e}function $b(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function IVe(e,t,r){if(e=Float64Array.from(EVe(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return QG(e);if(t>=1)return UG(e);var n,a=(n-1)*t,s=Math.floor(a),i=UG(sie(e,s).subarray(0,s+1)),o=QG(e.subarray(s+1));return i+(o-i)*(a-s)}}function FVe(e,t,r=nie){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,s=Math.floor(a),i=+r(e[s],s,e),o=+r(e[s+1],s+1,e);return i+(o-i)*(a-s)}}function OVe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(a);++n<a;)s[n]=e+n*r;return s}function Qu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Oh(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Z6=Symbol("implicit");function rk(){var e=new LG,t=[],r=[],n=Z6;function a(s){let i=e.get(s);if(i===void 0){if(n!==Z6)return n;e.set(s,i=t.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new LG;for(const i of s)e.has(i)||e.set(i,t.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return rk(t,r).unknown(n)},Qu.apply(a,arguments),a}function tL(){var e=rk().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,s,i,o=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,g=p?a:n,v=p?n:a;s=(v-g)/Math.max(1,h-c+u*2),o&&(s=Math.floor(s)),g+=(v-g-s*(h-c))*d,i=s*(1-c),o&&(g=Math.round(g),i=Math.round(i));var b=OVe(h).map(function(y){return g+s*y});return r(p?b.reverse():b)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,o=!0,f()},e.bandwidth=function(){return i},e.step=function(){return s},e.round=function(h){return arguments.length?(o=!!h,f()):o},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return tL(t(),[n,a]).round(o).paddingInner(c).paddingOuter(u).align(d)},Qu.apply(f(),arguments)}function iie(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return iie(t())},e}function DVe(){return iie(tL.apply(null,arguments).paddingInner(1))}function rL(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function oie(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function P2(){}var zw=.7,M5=1/zw,wx="\\s*([+-]?\\d+)\\s*",$w="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",PVe=/^#([0-9a-f]{3,8})$/,RVe=new RegExp(`^rgb\\(${wx},${wx},${wx}\\)$`),LVe=new RegExp(`^rgb\\(${qA},${qA},${qA}\\)$`),MVe=new RegExp(`^rgba\\(${wx},${wx},${wx},${$w}\\)$`),UVe=new RegExp(`^rgba\\(${qA},${qA},${qA},${$w}\\)$`),QVe=new RegExp(`^hsl\\(${$w},${qA},${qA}\\)$`),HVe=new RegExp(`^hsla\\(${$w},${qA},${qA},${$w}\\)$`),HG={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};rL(P2,cg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:VG,formatHex:VG,formatHex8:VVe,formatHsl:zVe,formatRgb:zG,toString:zG});function VG(){return this.rgb().formatHex()}function VVe(){return this.rgb().formatHex8()}function zVe(){return lie(this).formatHsl()}function zG(){return this.rgb().formatRgb()}function cg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=PVe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?$G(t):r===3?new Wl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?n_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?n_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=RVe.exec(e))?new Wl(t[1],t[2],t[3],1):(t=LVe.exec(e))?new Wl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=MVe.exec(e))?n_(t[1],t[2],t[3],t[4]):(t=UVe.exec(e))?n_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=QVe.exec(e))?qG(t[1],t[2]/100,t[3]/100,1):(t=HVe.exec(e))?qG(t[1],t[2]/100,t[3]/100,t[4]):HG.hasOwnProperty(e)?$G(HG[e]):e==="transparent"?new Wl(NaN,NaN,NaN,0):null}function $G(e){return new Wl(e>>16&255,e>>8&255,e&255,1)}function n_(e,t,r,n){return n<=0&&(e=t=r=NaN),new Wl(e,t,r,n)}function $Ve(e){return e instanceof P2||(e=cg(e)),e?(e=e.rgb(),new Wl(e.r,e.g,e.b,e.opacity)):new Wl}function eO(e,t,r,n){return arguments.length===1?$Ve(e):new Wl(e,t,r,n??1)}function Wl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}rL(Wl,eO,oie(P2,{brighter(e){return e=e==null?M5:Math.pow(M5,e),new Wl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?zw:Math.pow(zw,e),new Wl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Wl(zp(this.r),zp(this.g),zp(this.b),U5(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:GG,formatHex:GG,formatHex8:GVe,formatRgb:KG,toString:KG}));function GG(){return`#${kp(this.r)}${kp(this.g)}${kp(this.b)}`}function GVe(){return`#${kp(this.r)}${kp(this.g)}${kp(this.b)}${kp((isNaN(this.opacity)?1:this.opacity)*255)}`}function KG(){const e=U5(this.opacity);return`${e===1?"rgb(":"rgba("}${zp(this.r)}, ${zp(this.g)}, ${zp(this.b)}${e===1?")":`, ${e})`}`}function U5(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function zp(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kp(e){return e=zp(e),(e<16?"0":"")+e.toString(16)}function qG(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new vd(e,t,r,n)}function lie(e){if(e instanceof vd)return new vd(e.h,e.s,e.l,e.opacity);if(e instanceof P2||(e=cg(e)),!e)return new vd;if(e instanceof vd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),s=Math.max(t,r,n),i=NaN,o=s-a,c=(s+a)/2;return o?(t===s?i=(r-n)/o+(r<n)*6:r===s?i=(n-t)/o+2:i=(t-r)/o+4,o/=c<.5?s+a:2-s-a,i*=60):o=c>0&&c<1?0:i,new vd(i,o,c,e.opacity)}function KVe(e,t,r,n){return arguments.length===1?lie(e):new vd(e,t,r,n??1)}function vd(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}rL(vd,KVe,oie(P2,{brighter(e){return e=e==null?M5:Math.pow(M5,e),new vd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?zw:Math.pow(zw,e),new vd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new Wl(Lj(e>=240?e-240:e+120,a,n),Lj(e,a,n),Lj(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new vd(WG(this.h),a_(this.s),a_(this.l),U5(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=U5(this.opacity);return`${e===1?"hsl(":"hsla("}${WG(this.h)}, ${a_(this.s)*100}%, ${a_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function WG(e){return e=(e||0)%360,e<0?e+360:e}function a_(e){return Math.max(0,Math.min(1,e||0))}function Lj(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const nL=e=>()=>e;function qVe(e,t){return function(r){return e+r*t}}function WVe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function XVe(e){return(e=+e)==1?cie:function(t,r){return r-t?WVe(t,r,e):nL(isNaN(t)?r:t)}}function cie(e,t){var r=t-e;return r?qVe(e,r):nL(isNaN(e)?t:e)}const Q5=function e(t){var r=XVe(t);function n(a,s){var i=r((a=eO(a)).r,(s=eO(s)).r),o=r(a.g,s.g),c=r(a.b,s.b),u=cie(a.opacity,s.opacity);return function(d){return a.r=i(d),a.g=o(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function YVe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(s){for(a=0;a<r;++a)n[a]=e[a]*(1-s)+t[a]*s;return n}}function JVe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function ZVe(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),s=new Array(r),i;for(i=0;i<n;++i)a[i]=j1(e[i],t[i]);for(;i<r;++i)s[i]=t[i];return function(o){for(i=0;i<n;++i)s[i]=a[i](o);return s}}function eze(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function pd(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function tze(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=j1(e[a],t[a]):n[a]=t[a];return function(s){for(a in r)n[a]=r[a](s);return n}}var tO=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mj=new RegExp(tO.source,"g");function rze(e){return function(){return e}}function nze(e){return function(t){return e(t)+""}}function uie(e,t){var r=tO.lastIndex=Mj.lastIndex=0,n,a,s,i=-1,o=[],c=[];for(e=e+"",t=t+"";(n=tO.exec(e))&&(a=Mj.exec(t));)(s=a.index)>r&&(s=t.slice(r,s),o[i]?o[i]+=s:o[++i]=s),(n=n[0])===(a=a[0])?o[i]?o[i]+=a:o[++i]=a:(o[++i]=null,c.push({i,x:pd(n,a)})),r=Mj.lastIndex;return r<t.length&&(s=t.slice(r),o[i]?o[i]+=s:o[++i]=s),o.length<2?c[0]?nze(c[0].x):rze(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)o[(f=c[d]).i]=f.x(u);return o.join("")})}function j1(e,t){var r=typeof t,n;return t==null||r==="boolean"?nL(t):(r==="number"?pd:r==="string"?(n=cg(t))?(t=n,Q5):uie:t instanceof cg?Q5:t instanceof Date?eze:JVe(t)?YVe:Array.isArray(t)?ZVe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?tze:pd)(e,t)}function aL(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var XG=180/Math.PI,rO={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function die(e,t,r,n,a,s){var i,o,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*r+t*n)&&(r-=e*c,n-=t*c),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,c/=o),e*n<t*r&&(e=-e,t=-t,c=-c,i=-i),{translateX:a,translateY:s,rotate:Math.atan2(t,e)*XG,skewX:Math.atan(c)*XG,scaleX:i,scaleY:o}}var s_;function aze(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?rO:die(t.a,t.b,t.c,t.d,t.e,t.f)}function sze(e){return e==null||(s_||(s_=document.createElementNS("http://www.w3.org/2000/svg","g")),s_.setAttribute("transform",e),!(e=s_.transform.baseVal.consolidate()))?rO:(e=e.matrix,die(e.a,e.b,e.c,e.d,e.e,e.f))}function Aie(e,t,r,n){function a(u){return u.length?u.pop()+" ":""}function s(u,d,f,h,p,g){if(u!==f||d!==h){var v=p.push("translate(",null,t,null,r);g.push({i:v-4,x:pd(u,f)},{i:v-2,x:pd(d,h)})}else(f||h)&&p.push("translate("+f+t+h+r)}function i(u,d,f,h){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),h.push({i:f.push(a(f)+"rotate(",null,n)-2,x:pd(u,d)})):d&&f.push(a(f)+"rotate("+d+n)}function o(u,d,f,h){u!==d?h.push({i:f.push(a(f)+"skewX(",null,n)-2,x:pd(u,d)}):d&&f.push(a(f)+"skewX("+d+n)}function c(u,d,f,h,p,g){if(u!==f||d!==h){var v=p.push(a(p)+"scale(",null,",",null,")");g.push({i:v-4,x:pd(u,f)},{i:v-2,x:pd(d,h)})}else(f!==1||h!==1)&&p.push(a(p)+"scale("+f+","+h+")")}return function(u,d){var f=[],h=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,h),i(u.rotate,d.rotate,f,h),o(u.skewX,d.skewX,f,h),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,h),u=d=null,function(p){for(var g=-1,v=h.length,b;++g<v;)f[(b=h[g]).i]=b.x(p);return f.join("")}}}var ize=Aie(aze,"px, ","px)","deg)"),oze=Aie(sze,", ",")",")"),lze=1e-12;function YG(e){return((e=Math.exp(e))+1/e)/2}function cze(e){return((e=Math.exp(e))-1/e)/2}function uze(e){return((e=Math.exp(2*e))-1)/(e+1)}const dze=function e(t,r,n){function a(s,i){var o=s[0],c=s[1],u=s[2],d=i[0],f=i[1],h=i[2],p=d-o,g=f-c,v=p*p+g*g,b,y;if(v<lze)y=Math.log(h/u)/t,b=function(w){return[o+w*p,c+w*g,u*Math.exp(t*w*y)]};else{var C=Math.sqrt(v),N=(h*h-u*u+n*v)/(2*u*r*C),T=(h*h-u*u-n*v)/(2*h*r*C),S=Math.log(Math.sqrt(N*N+1)-N),B=Math.log(Math.sqrt(T*T+1)-T);y=(B-S)/t,b=function(w){var _=w*y,F=YG(S),M=u/(r*C)*(F*uze(t*_+S)-cze(S));return[o+M*p,c+M*g,u*F/YG(t*_+S)]}}return b.duration=y*1e3*t/Math.SQRT2,b}return a.rho=function(s){var i=Math.max(.001,+s),o=i*i,c=o*o;return e(i,o,c)},a}(Math.SQRT2,2,4);function Aze(e,t){t===void 0&&(t=e,e=j1);for(var r=0,n=t.length-1,a=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(a,a=t[++r]);return function(i){var o=Math.max(0,Math.min(n-1,Math.floor(i*=n)));return s[o](i-o)}}function fze(e){return function(){return e}}function H5(e){return+e}var JG=[0,1];function pl(e){return e}function nO(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:fze(isNaN(t)?NaN:.5)}function hze(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function mze(e,t,r){var n=e[0],a=e[1],s=t[0],i=t[1];return a<n?(n=nO(a,n),s=r(i,s)):(n=nO(n,a),s=r(s,i)),function(o){return s(n(o))}}function pze(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)a[i]=nO(e[i],e[i+1]),s[i]=r(t[i],t[i+1]);return function(o){var c=D2(e,o,1,n)-1;return s[c](a[c](o))}}function R2(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function nk(){var e=JG,t=JG,r=j1,n,a,s,i=pl,o,c,u;function d(){var h=Math.min(e.length,t.length);return i!==pl&&(i=hze(e[0],e[h-1])),o=h>2?pze:mze,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?s:(c||(c=o(e.map(n),t,r)))(n(i(h)))}return f.invert=function(h){return i(a((u||(u=o(t,e.map(n),pd)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,H5),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=aL,d()},f.clamp=function(h){return arguments.length?(i=h?!0:pl,d()):i!==pl},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(s=h,f):s},function(h,p){return n=h,a=p,d()}}function sL(){return nk()(pl,pl)}function gze(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function V5(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Xx(e){return e=V5(Math.abs(e)),e?e[1]:NaN}function vze(e,t){return function(r,n){for(var a=r.length,s=[],i=0,o=e[0],c=0;a>0&&o>0&&(c+o+1>n&&(o=Math.max(1,n-c)),s.push(r.substring(a-=o,a+o)),!((c+=o+1)>n));)o=e[i=(i+1)%e.length];return s.reverse().join(t)}}function xze(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var bze=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Gw(e){if(!(t=bze.exec(e)))throw new Error("invalid format: "+e);var t;return new iL({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Gw.prototype=iL.prototype;function iL(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}iL.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yze(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var fie;function wze(e,t){var r=V5(e,t);if(!r)return e+"";var n=r[0],a=r[1],s=a-(fie=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,i=n.length;return s===i?n:s>i?n+new Array(s-i+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+V5(e,Math.max(0,t+s-1))[0]}function ZG(e,t){var r=V5(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const eK={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:gze,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ZG(e*100,t),r:ZG,s:wze,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function tK(e){return e}var rK=Array.prototype.map,nK=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Eze(e){var t=e.grouping===void 0||e.thousands===void 0?tK:vze(rK.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?tK:xze(rK.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Gw(f);var h=f.fill,p=f.align,g=f.sign,v=f.symbol,b=f.zero,y=f.width,C=f.comma,N=f.precision,T=f.trim,S=f.type;S==="n"?(C=!0,S="g"):eK[S]||(N===void 0&&(N=12),T=!0,S="g"),(b||h==="0"&&p==="=")&&(b=!0,h="0",p="=");var B=v==="$"?r:v==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",w=v==="$"?n:/[%p]/.test(S)?i:"",_=eK[S],F=/[defgprs%]/.test(S);N=N===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function M(D){var I=B,U=w,P,X,H;if(S==="c")U=_(D)+U,D="";else{D=+D;var Y=D<0||1/D<0;if(D=isNaN(D)?c:_(Math.abs(D),N),T&&(D=yze(D)),Y&&+D==0&&g!=="+"&&(Y=!1),I=(Y?g==="("?g:o:g==="-"||g==="("?"":g)+I,U=(S==="s"?nK[8+fie/3]:"")+U+(Y&&g==="("?")":""),F){for(P=-1,X=D.length;++P<X;)if(H=D.charCodeAt(P),48>H||H>57){U=(H===46?a+D.slice(P+1):D.slice(P))+U,D=D.slice(0,P);break}}}C&&!b&&(D=t(D,1/0));var V=I.length+D.length+U.length,z=V<y?new Array(y-V+1).join(h):"";switch(C&&b&&(D=t(z+D,z.length?y-U.length:1/0),z=""),p){case"<":D=I+D+U+z;break;case"=":D=I+z+D+U;break;case"^":D=z.slice(0,V=z.length>>1)+I+D+U+z.slice(V);break;default:D=z+I+D+U;break}return s(D)}return M.toString=function(){return f+""},M}function d(f,h){var p=u((f=Gw(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Xx(h)/3)))*3,v=Math.pow(10,-g),b=nK[8+g/3];return function(y){return p(v*y)+b}}return{format:u,formatPrefix:d}}var i_,oL,hie;Cze({thousands:",",grouping:[3],currency:["$",""]});function Cze(e){return i_=Eze(e),oL=i_.format,hie=i_.formatPrefix,i_}function _ze(e){return Math.max(0,-Xx(Math.abs(e)))}function Sze(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xx(t)/3)))*3-Xx(Math.abs(e)))}function Nze(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Xx(t)-Xx(e))+1}function mie(e,t,r,n){var a=J6(e,t,r),s;switch(n=Gw(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=Sze(a,i))&&(n.precision=s),hie(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=Nze(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=_ze(a))&&(n.precision=s-(n.type==="%")*2);break}}return oL(n)}function Fm(e){var t=e.domain;return e.ticks=function(r){var n=t();return X6(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return mie(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,s=n.length-1,i=n[a],o=n[s],c,u,d=10;for(o<i&&(u=i,i=o,o=u,u=a,a=s,s=u);d-- >0;){if(u=Y6(i,o,r),u===c)return n[a]=i,n[s]=o,t(n);if(u>0)i=Math.floor(i/u)*u,o=Math.ceil(o/u)*u;else if(u<0)i=Math.ceil(i*u)/u,o=Math.floor(o*u)/u;else break;c=u}return e},e}function pie(){var e=sL();return e.copy=function(){return R2(e,pie())},Qu.apply(e,arguments),Fm(e)}function gie(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,H5),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return gie(e).unknown(t)},e=arguments.length?Array.from(e,H5):[0,1],Fm(r)}function vie(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],s=e[n],i;return s<a&&(i=r,r=n,n=i,i=a,a=s,s=i),e[r]=t.floor(a),e[n]=t.ceil(s),e}function aK(e){return Math.log(e)}function sK(e){return Math.exp(e)}function kze(e){return-Math.log(-e)}function Bze(e){return-Math.exp(-e)}function Tze(e){return isFinite(e)?+("1e"+e):e<0?0:e}function jze(e){return e===10?Tze:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Ize(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function iK(e){return(t,r)=>-e(-t,r)}function lL(e){const t=e(aK,sK),r=t.domain;let n=10,a,s;function i(){return a=Ize(n),s=jze(n),r()[0]<0?(a=iK(a),s=iK(s),e(kze,Bze)):e(aK,sK),t}return t.base=function(o){return arguments.length?(n=+o,i()):n},t.domain=function(o){return arguments.length?(r(o),i()):r()},t.ticks=o=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),g,v;const b=o==null?10:+o;let y=[];if(!(n%1)&&p-h<b){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<n;++g)if(v=h<0?g/s(-h):g*s(h),!(v<u)){if(v>d)break;y.push(v)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(v=h>0?g/s(-h):g*s(h),!(v<u)){if(v>d)break;y.push(v)}y.length*2<b&&(y=X6(u,d,b))}else y=X6(h,p,Math.min(p-h,b)).map(s);return f?y.reverse():y},t.tickFormat=(o,c)=>{if(o==null&&(o=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Gw(c)).precision==null&&(c.trim=!0),c=oL(c)),o===1/0)return c;const u=Math.max(1,n*o/t.ticks().length);return d=>{let f=d/s(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(vie(r(),{floor:o=>s(Math.floor(a(o))),ceil:o=>s(Math.ceil(a(o)))})),t}function xie(){const e=lL(nk()).domain([1,10]);return e.copy=()=>R2(e,xie()).base(e.base()),Qu.apply(e,arguments),e}function oK(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function lK(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function cL(e){var t=1,r=e(oK(t),lK(t));return r.constant=function(n){return arguments.length?e(oK(t=+n),lK(t)):t},Fm(r)}function bie(){var e=cL(nk());return e.copy=function(){return R2(e,bie()).constant(e.constant())},Qu.apply(e,arguments)}function cK(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Fze(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Oze(e){return e<0?-e*e:e*e}function uL(e){var t=e(pl,pl),r=1;function n(){return r===1?e(pl,pl):r===.5?e(Fze,Oze):e(cK(r),cK(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Fm(t)}function dL(){var e=uL(nk());return e.copy=function(){return R2(e,dL()).exponent(e.exponent())},Qu.apply(e,arguments),e}function Dze(){return dL.apply(null,arguments).exponent(.5)}function uK(e){return Math.sign(e)*e*e}function Pze(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function yie(){var e=sL(),t=[0,1],r=!1,n;function a(s){var i=Pze(e(s));return isNaN(i)?n:r?Math.round(i):i}return a.invert=function(s){return e.invert(uK(s))},a.domain=function(s){return arguments.length?(e.domain(s),a):e.domain()},a.range=function(s){return arguments.length?(e.range((t=Array.from(s,H5)).map(uK)),a):t.slice()},a.rangeRound=function(s){return a.range(s).round(!0)},a.round=function(s){return arguments.length?(r=!!s,a):r},a.clamp=function(s){return arguments.length?(e.clamp(s),a):e.clamp()},a.unknown=function(s){return arguments.length?(n=s,a):n},a.copy=function(){return yie(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Qu.apply(a,arguments),Fm(a)}function wie(){var e=[],t=[],r=[],n;function a(){var i=0,o=Math.max(1,t.length);for(r=new Array(o-1);++i<o;)r[i-1]=FVe(e,i/o);return s}function s(i){return i==null||isNaN(i=+i)?n:t[D2(r,i)]}return s.invertExtent=function(i){var o=t.indexOf(i);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},s.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let o of i)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(rm),a()},s.range=function(i){return arguments.length?(t=Array.from(i),a()):t.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return wie().domain(e).range(t).unknown(n)},Qu.apply(s,arguments)}function Eie(){var e=0,t=1,r=1,n=[.5],a=[0,1],s;function i(c){return c!=null&&c<=c?a[D2(n,c,0,r)]:s}function o(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,o()):[e,t]},i.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,o()):a.slice()},i.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},i.unknown=function(c){return arguments.length&&(s=c),i},i.thresholds=function(){return n.slice()},i.copy=function(){return Eie().domain([e,t]).range(a).unknown(s)},Qu.apply(Fm(i),arguments)}function Cie(){var e=[.5],t=[0,1],r,n=1;function a(s){return s!=null&&s<=s?t[D2(e,s,0,n)]:r}return a.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(s){var i=t.indexOf(s);return[e[i-1],e[i]]},a.unknown=function(s){return arguments.length?(r=s,a):r},a.copy=function(){return Cie().domain(e).range(t).unknown(r)},Qu.apply(a,arguments)}const Uj=new Date,Qj=new Date;function Bi(e,t,r,n){function a(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return a.floor=s=>(e(s=new Date(+s)),s),a.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),a.round=s=>{const i=a(s),o=a.ceil(s);return s-i<o-s?i:o},a.offset=(s,i)=>(t(s=new Date(+s),i==null?1:Math.floor(i)),s),a.range=(s,i,o)=>{const c=[];if(s=a.ceil(s),o=o==null?1:Math.floor(o),!(s<i)||!(o>0))return c;let u;do c.push(u=new Date(+s)),t(s,o),e(s);while(u<s&&s<i);return c},a.filter=s=>Bi(i=>{if(i>=i)for(;e(i),!s(i);)i.setTime(i-1)},(i,o)=>{if(i>=i)if(o<0)for(;++o<=0;)for(;t(i,-1),!s(i););else for(;--o>=0;)for(;t(i,1),!s(i););}),r&&(a.count=(s,i)=>(Uj.setTime(+s),Qj.setTime(+i),e(Uj),e(Qj),Math.floor(r(Uj,Qj))),a.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?a.filter(n?i=>n(i)%s===0:i=>a.count(0,i)%s===0):a)),a}const z5=Bi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);z5.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Bi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):z5);z5.range;const Wf=1e3,ju=Wf*60,Xf=ju*60,xh=Xf*24,AL=xh*7,dK=xh*30,Hj=xh*365,Bp=Bi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Wf)},(e,t)=>(t-e)/Wf,e=>e.getUTCSeconds());Bp.range;const fL=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wf)},(e,t)=>{e.setTime(+e+t*ju)},(e,t)=>(t-e)/ju,e=>e.getMinutes());fL.range;const hL=Bi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ju)},(e,t)=>(t-e)/ju,e=>e.getUTCMinutes());hL.range;const mL=Bi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Wf-e.getMinutes()*ju)},(e,t)=>{e.setTime(+e+t*Xf)},(e,t)=>(t-e)/Xf,e=>e.getHours());mL.range;const pL=Bi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Xf)},(e,t)=>(t-e)/Xf,e=>e.getUTCHours());pL.range;const L2=Bi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ju)/xh,e=>e.getDate()-1);L2.range;const ak=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xh,e=>e.getUTCDate()-1);ak.range;const _ie=Bi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xh,e=>Math.floor(e/xh));_ie.range;function kg(e){return Bi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*ju)/AL)}const sk=kg(0),$5=kg(1),Rze=kg(2),Lze=kg(3),Yx=kg(4),Mze=kg(5),Uze=kg(6);sk.range;$5.range;Rze.range;Lze.range;Yx.range;Mze.range;Uze.range;function Bg(e){return Bi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/AL)}const ik=Bg(0),G5=Bg(1),Qze=Bg(2),Hze=Bg(3),Jx=Bg(4),Vze=Bg(5),zze=Bg(6);ik.range;G5.range;Qze.range;Hze.range;Jx.range;Vze.range;zze.range;const gL=Bi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());gL.range;const vL=Bi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());vL.range;const bh=Bi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());bh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});bh.range;const yh=Bi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());yh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Bi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});yh.range;function Sie(e,t,r,n,a,s){const i=[[Bp,1,Wf],[Bp,5,5*Wf],[Bp,15,15*Wf],[Bp,30,30*Wf],[s,1,ju],[s,5,5*ju],[s,15,15*ju],[s,30,30*ju],[a,1,Xf],[a,3,3*Xf],[a,6,6*Xf],[a,12,12*Xf],[n,1,xh],[n,2,2*xh],[r,1,AL],[t,1,dK],[t,3,3*dK],[e,1,Hj]];function o(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,p=eL(([,,b])=>b).right(i,h);if(p===i.length)return e.every(J6(u/Hj,d/Hj,f));if(p===0)return z5.every(Math.max(J6(u,d,f),1));const[g,v]=i[h/i[p-1][2]<i[p][2]/h?p-1:p];return g.every(v)}return[o,c]}const[$ze,Gze]=Sie(yh,vL,ik,_ie,pL,hL),[Kze,qze]=Sie(bh,gL,sk,L2,mL,fL);function Vj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function zj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Gb(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Wze(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,s=e.days,i=e.shortDays,o=e.months,c=e.shortMonths,u=Kb(a),d=qb(a),f=Kb(s),h=qb(s),p=Kb(i),g=qb(i),v=Kb(o),b=qb(o),y=Kb(c),C=qb(c),N={a:Y,A:V,b:z,B:G,c:null,d:gK,e:gK,f:v$e,g:k$e,G:T$e,H:m$e,I:p$e,j:g$e,L:Nie,m:x$e,M:b$e,p:re,q:R,Q:bK,s:yK,S:y$e,u:w$e,U:E$e,V:C$e,w:_$e,W:S$e,x:null,X:null,y:N$e,Y:B$e,Z:j$e,"%":xK},T={a:q,A:J,b:te,B:ie,c:null,d:vK,e:vK,f:D$e,g:$$e,G:K$e,H:I$e,I:F$e,j:O$e,L:Bie,m:P$e,M:R$e,p:Ae,q:oe,Q:bK,s:yK,S:L$e,u:M$e,U:U$e,V:Q$e,w:H$e,W:V$e,x:null,X:null,y:z$e,Y:G$e,Z:q$e,"%":xK},S={a:M,A:D,b:I,B:U,c:P,d:mK,e:mK,f:d$e,g:hK,G:fK,H:pK,I:pK,j:o$e,L:u$e,m:i$e,M:l$e,p:F,q:s$e,Q:f$e,s:h$e,S:c$e,u:e$e,U:t$e,V:r$e,w:Zze,W:n$e,x:X,X:H,y:hK,Y:fK,Z:a$e,"%":A$e};N.x=B(r,N),N.X=B(n,N),N.c=B(t,N),T.x=B(r,T),T.X=B(n,T),T.c=B(t,T);function B(ce,pe){return function(Ie){var ne=[],Se=-1,De=0,_e=ce.length,he,je,He;for(Ie instanceof Date||(Ie=new Date(+Ie));++Se<_e;)ce.charCodeAt(Se)===37&&(ne.push(ce.slice(De,Se)),(je=AK[he=ce.charAt(++Se)])!=null?he=ce.charAt(++Se):je=he==="e"?" ":"0",(He=pe[he])&&(he=He(Ie,je)),ne.push(he),De=Se+1);return ne.push(ce.slice(De,Se)),ne.join("")}}function w(ce,pe){return function(Ie){var ne=Gb(1900,void 0,1),Se=_(ne,ce,Ie+="",0),De,_e;if(Se!=Ie.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(pe&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(De=zj(Gb(ne.y,0,1)),_e=De.getUTCDay(),De=_e>4||_e===0?G5.ceil(De):G5(De),De=ak.offset(De,(ne.V-1)*7),ne.y=De.getUTCFullYear(),ne.m=De.getUTCMonth(),ne.d=De.getUTCDate()+(ne.w+6)%7):(De=Vj(Gb(ne.y,0,1)),_e=De.getDay(),De=_e>4||_e===0?$5.ceil(De):$5(De),De=L2.offset(De,(ne.V-1)*7),ne.y=De.getFullYear(),ne.m=De.getMonth(),ne.d=De.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),_e="Z"in ne?zj(Gb(ne.y,0,1)).getUTCDay():Vj(Gb(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(_e+5)%7:ne.w+ne.U*7-(_e+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,zj(ne)):Vj(ne)}}function _(ce,pe,Ie,ne){for(var Se=0,De=pe.length,_e=Ie.length,he,je;Se<De;){if(ne>=_e)return-1;if(he=pe.charCodeAt(Se++),he===37){if(he=pe.charAt(Se++),je=S[he in AK?pe.charAt(Se++):he],!je||(ne=je(ce,Ie,ne))<0)return-1}else if(he!=Ie.charCodeAt(ne++))return-1}return ne}function F(ce,pe,Ie){var ne=u.exec(pe.slice(Ie));return ne?(ce.p=d.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function M(ce,pe,Ie){var ne=p.exec(pe.slice(Ie));return ne?(ce.w=g.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function D(ce,pe,Ie){var ne=f.exec(pe.slice(Ie));return ne?(ce.w=h.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function I(ce,pe,Ie){var ne=y.exec(pe.slice(Ie));return ne?(ce.m=C.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function U(ce,pe,Ie){var ne=v.exec(pe.slice(Ie));return ne?(ce.m=b.get(ne[0].toLowerCase()),Ie+ne[0].length):-1}function P(ce,pe,Ie){return _(ce,t,pe,Ie)}function X(ce,pe,Ie){return _(ce,r,pe,Ie)}function H(ce,pe,Ie){return _(ce,n,pe,Ie)}function Y(ce){return i[ce.getDay()]}function V(ce){return s[ce.getDay()]}function z(ce){return c[ce.getMonth()]}function G(ce){return o[ce.getMonth()]}function re(ce){return a[+(ce.getHours()>=12)]}function R(ce){return 1+~~(ce.getMonth()/3)}function q(ce){return i[ce.getUTCDay()]}function J(ce){return s[ce.getUTCDay()]}function te(ce){return c[ce.getUTCMonth()]}function ie(ce){return o[ce.getUTCMonth()]}function Ae(ce){return a[+(ce.getUTCHours()>=12)]}function oe(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var pe=B(ce+="",N);return pe.toString=function(){return ce},pe},parse:function(ce){var pe=w(ce+="",!1);return pe.toString=function(){return ce},pe},utcFormat:function(ce){var pe=B(ce+="",T);return pe.toString=function(){return ce},pe},utcParse:function(ce){var pe=w(ce+="",!0);return pe.toString=function(){return ce},pe}}}var AK={"-":"",_:" ",0:"0"},Zi=/^\s*\d+/,Xze=/^%/,Yze=/[\\^$*+?|[\]().{}]/g;function Zn(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",s=a.length;return n+(s<r?new Array(r-s+1).join(t)+a:a)}function Jze(e){return e.replace(Yze,"\\$&")}function Kb(e){return new RegExp("^(?:"+e.map(Jze).join("|")+")","i")}function qb(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function Zze(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function e$e(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function t$e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function r$e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function n$e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function fK(e,t,r){var n=Zi.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function hK(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function a$e(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function s$e(e,t,r){var n=Zi.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function i$e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function mK(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function o$e(e,t,r){var n=Zi.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function pK(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function l$e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function c$e(e,t,r){var n=Zi.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function u$e(e,t,r){var n=Zi.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function d$e(e,t,r){var n=Zi.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function A$e(e,t,r){var n=Xze.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function f$e(e,t,r){var n=Zi.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function h$e(e,t,r){var n=Zi.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function gK(e,t){return Zn(e.getDate(),t,2)}function m$e(e,t){return Zn(e.getHours(),t,2)}function p$e(e,t){return Zn(e.getHours()%12||12,t,2)}function g$e(e,t){return Zn(1+L2.count(bh(e),e),t,3)}function Nie(e,t){return Zn(e.getMilliseconds(),t,3)}function v$e(e,t){return Nie(e,t)+"000"}function x$e(e,t){return Zn(e.getMonth()+1,t,2)}function b$e(e,t){return Zn(e.getMinutes(),t,2)}function y$e(e,t){return Zn(e.getSeconds(),t,2)}function w$e(e){var t=e.getDay();return t===0?7:t}function E$e(e,t){return Zn(sk.count(bh(e)-1,e),t,2)}function kie(e){var t=e.getDay();return t>=4||t===0?Yx(e):Yx.ceil(e)}function C$e(e,t){return e=kie(e),Zn(Yx.count(bh(e),e)+(bh(e).getDay()===4),t,2)}function _$e(e){return e.getDay()}function S$e(e,t){return Zn($5.count(bh(e)-1,e),t,2)}function N$e(e,t){return Zn(e.getFullYear()%100,t,2)}function k$e(e,t){return e=kie(e),Zn(e.getFullYear()%100,t,2)}function B$e(e,t){return Zn(e.getFullYear()%1e4,t,4)}function T$e(e,t){var r=e.getDay();return e=r>=4||r===0?Yx(e):Yx.ceil(e),Zn(e.getFullYear()%1e4,t,4)}function j$e(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Zn(t/60|0,"0",2)+Zn(t%60,"0",2)}function vK(e,t){return Zn(e.getUTCDate(),t,2)}function I$e(e,t){return Zn(e.getUTCHours(),t,2)}function F$e(e,t){return Zn(e.getUTCHours()%12||12,t,2)}function O$e(e,t){return Zn(1+ak.count(yh(e),e),t,3)}function Bie(e,t){return Zn(e.getUTCMilliseconds(),t,3)}function D$e(e,t){return Bie(e,t)+"000"}function P$e(e,t){return Zn(e.getUTCMonth()+1,t,2)}function R$e(e,t){return Zn(e.getUTCMinutes(),t,2)}function L$e(e,t){return Zn(e.getUTCSeconds(),t,2)}function M$e(e){var t=e.getUTCDay();return t===0?7:t}function U$e(e,t){return Zn(ik.count(yh(e)-1,e),t,2)}function Tie(e){var t=e.getUTCDay();return t>=4||t===0?Jx(e):Jx.ceil(e)}function Q$e(e,t){return e=Tie(e),Zn(Jx.count(yh(e),e)+(yh(e).getUTCDay()===4),t,2)}function H$e(e){return e.getUTCDay()}function V$e(e,t){return Zn(G5.count(yh(e)-1,e),t,2)}function z$e(e,t){return Zn(e.getUTCFullYear()%100,t,2)}function $$e(e,t){return e=Tie(e),Zn(e.getUTCFullYear()%100,t,2)}function G$e(e,t){return Zn(e.getUTCFullYear()%1e4,t,4)}function K$e(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Jx(e):Jx.ceil(e),Zn(e.getUTCFullYear()%1e4,t,4)}function q$e(){return"+0000"}function xK(){return"%"}function bK(e){return+e}function yK(e){return Math.floor(+e/1e3)}var Cv,jie,Iie;W$e({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function W$e(e){return Cv=Wze(e),jie=Cv.format,Cv.parse,Iie=Cv.utcFormat,Cv.utcParse,Cv}function X$e(e){return new Date(e)}function Y$e(e){return e instanceof Date?+e:+new Date(+e)}function xL(e,t,r,n,a,s,i,o,c,u){var d=sL(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),v=u("%I:%M"),b=u("%I %p"),y=u("%a %d"),C=u("%b %d"),N=u("%B"),T=u("%Y");function S(B){return(c(B)<B?p:o(B)<B?g:i(B)<B?v:s(B)<B?b:n(B)<B?a(B)<B?y:C:r(B)<B?N:T)(B)}return d.invert=function(B){return new Date(f(B))},d.domain=function(B){return arguments.length?h(Array.from(B,Y$e)):h().map(X$e)},d.ticks=function(B){var w=h();return e(w[0],w[w.length-1],B??10)},d.tickFormat=function(B,w){return w==null?S:u(w)},d.nice=function(B){var w=h();return(!B||typeof B.range!="function")&&(B=t(w[0],w[w.length-1],B??10)),B?h(vie(w,B)):d},d.copy=function(){return R2(d,xL(e,t,r,n,a,s,i,o,c,u))},d}function J$e(){return Qu.apply(xL(Kze,qze,bh,gL,sk,L2,mL,fL,Bp,jie).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Z$e(){return Qu.apply(xL($ze,Gze,yh,vL,ik,ak,pL,hL,Bp,Iie).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ok(){var e=0,t=1,r,n,a,s,i=pl,o=!1,c;function u(f){return f==null||isNaN(f=+f)?c:i(a===0?.5:(f=(s(f)-r)*a,o?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(o=!!f,u):o},u.interpolator=function(f){return arguments.length?(i=f,u):i};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,i=f(p,g),u):[i(0),i(1)]}}return u.range=d(j1),u.rangeRound=d(aL),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Om(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Fie(){var e=Fm(ok()(pl));return e.copy=function(){return Om(e,Fie())},Oh.apply(e,arguments)}function Oie(){var e=lL(ok()).domain([1,10]);return e.copy=function(){return Om(e,Oie()).base(e.base())},Oh.apply(e,arguments)}function Die(){var e=cL(ok());return e.copy=function(){return Om(e,Die()).constant(e.constant())},Oh.apply(e,arguments)}function bL(){var e=uL(ok());return e.copy=function(){return Om(e,bL()).exponent(e.exponent())},Oh.apply(e,arguments)}function eGe(){return bL.apply(null,arguments).exponent(.5)}function Pie(){var e=[],t=pl;function r(n){if(n!=null&&!isNaN(n=+n))return t((D2(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(rm),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,s)=>IVe(e,s/n))},r.copy=function(){return Pie(t).domain(e)},Oh.apply(r,arguments)}function lk(){var e=0,t=.5,r=1,n=1,a,s,i,o,c,u=pl,d,f=!1,h;function p(v){return isNaN(v=+v)?h:(v=.5+((v=+d(v))-s)*(n*v<n*s?o:c),u(f?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,a=d(e=+e),s=d(t=+t),i=d(r=+r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(f=!!v,p):f},p.interpolator=function(v){return arguments.length?(u=v,p):u};function g(v){return function(b){var y,C,N;return arguments.length?([y,C,N]=b,u=Aze(v,[y,C,N]),p):[u(0),u(.5),u(1)]}}return p.range=g(j1),p.rangeRound=g(aL),p.unknown=function(v){return arguments.length?(h=v,p):h},function(v){return d=v,a=v(e),s=v(t),i=v(r),o=a===s?0:.5/(s-a),c=s===i?0:.5/(i-s),n=s<a?-1:1,p}}function Rie(){var e=Fm(lk()(pl));return e.copy=function(){return Om(e,Rie())},Oh.apply(e,arguments)}function Lie(){var e=lL(lk()).domain([.1,1,10]);return e.copy=function(){return Om(e,Lie()).base(e.base())},Oh.apply(e,arguments)}function Mie(){var e=cL(lk());return e.copy=function(){return Om(e,Mie()).constant(e.constant())},Oh.apply(e,arguments)}function yL(){var e=uL(lk());return e.copy=function(){return Om(e,yL()).exponent(e.exponent())},Oh.apply(e,arguments)}function tGe(){return yL.apply(null,arguments).exponent(.5)}const Ey=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:tL,scaleDiverging:Rie,scaleDivergingLog:Lie,scaleDivergingPow:yL,scaleDivergingSqrt:tGe,scaleDivergingSymlog:Mie,scaleIdentity:gie,scaleImplicit:Z6,scaleLinear:pie,scaleLog:xie,scaleOrdinal:rk,scalePoint:DVe,scalePow:dL,scaleQuantile:wie,scaleQuantize:Eie,scaleRadial:yie,scaleSequential:Fie,scaleSequentialLog:Oie,scaleSequentialPow:bL,scaleSequentialQuantile:Pie,scaleSequentialSqrt:eGe,scaleSequentialSymlog:Die,scaleSqrt:Dze,scaleSymlog:bie,scaleThreshold:Cie,scaleTime:J$e,scaleUtc:Z$e,tickFormat:mie},Symbol.toStringTag,{value:"Module"}));var Dm=e=>e.chartData,ck=ct([Dm],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),wL=(e,t,r,n)=>n?ck(e):Dm(e);function Zx(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Uc(t)&&Uc(r))return!0}return!1}function wK(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function rGe(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,s;if(Uc(r))a=r;else if(typeof r=="function")return;if(Uc(n))s=n;else if(typeof n=="function")return;var i=[a,s];if(Zx(i))return i}}function nGe(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Zx(n))return wK(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,s]=e,i,o;if(a==="auto")t!=null&&(i=Math.min(...t));else if(cr(a))i=a;else if(typeof a=="function")try{t!=null&&(i=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&lG.test(a)){var c=lG.exec(a);if(c==null||t==null)i=void 0;else{var u=+c[1];i=t[0]-u}}else i=t==null?void 0:t[0];if(s==="auto")t!=null&&(o=Math.max(...t));else if(cr(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[1]))}catch{}else if(typeof s=="string"&&cG.test(s)){var d=cG.exec(s);if(d==null||t==null)o=void 0;else{var f=+d[1];o=t[1]+f}}else o=t==null?void 0:t[1];var h=[i,o];if(Zx(h))return t==null?h:wK(h,t,r)}}}var I1=1e9,aGe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},CL,es=!0,Lu="[DecimalError] ",$p=Lu+"Invalid argument: ",EL=Lu+"Exponent out of range: ",F1=Math.floor,pp=Math.pow,sGe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,jc,zi=1e7,Ma=7,Uie=9007199254740991,K5=F1(Uie/Ma),Ar={};Ar.absoluteValue=Ar.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ar.comparedTo=Ar.cmp=function(e){var t,r,n,a,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===a?0:n>a^s.s<0?1:-1};Ar.decimalPlaces=Ar.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ma;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ar.dividedBy=Ar.div=function(e){return oh(this,new this.constructor(e))};Ar.dividedToIntegerBy=Ar.idiv=function(e){var t=this,r=t.constructor;return ka(oh(t,new r(e),0,1),r.precision)};Ar.equals=Ar.eq=function(e){return!this.cmp(e)};Ar.exponent=function(){return mi(this)};Ar.greaterThan=Ar.gt=function(e){return this.cmp(e)>0};Ar.greaterThanOrEqualTo=Ar.gte=function(e){return this.cmp(e)>=0};Ar.isInteger=Ar.isint=function(){return this.e>this.d.length-2};Ar.isNegative=Ar.isneg=function(){return this.s<0};Ar.isPositive=Ar.ispos=function(){return this.s>0};Ar.isZero=function(){return this.s===0};Ar.lessThan=Ar.lt=function(e){return this.cmp(e)<0};Ar.lessThanOrEqualTo=Ar.lte=function(e){return this.cmp(e)<1};Ar.logarithm=Ar.log=function(e){var t,r=this,n=r.constructor,a=n.precision,s=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(jc))throw Error(Lu+"NaN");if(r.s<1)throw Error(Lu+(r.s?"NaN":"-Infinity"));return r.eq(jc)?new n(0):(es=!1,t=oh(Kw(r,s),Kw(e,s),s),es=!0,ka(t,a))};Ar.minus=Ar.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Vie(t,e):Qie(t,(e.s=-e.s,e))};Ar.modulo=Ar.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(Lu+"NaN");return r.s?(es=!1,t=oh(r,e,0,1).times(e),es=!0,r.minus(t)):ka(new n(r),a)};Ar.naturalExponential=Ar.exp=function(){return Hie(this)};Ar.naturalLogarithm=Ar.ln=function(){return Kw(this)};Ar.negated=Ar.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ar.plus=Ar.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Qie(t,e):Vie(t,(e.s=-e.s,e))};Ar.precision=Ar.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error($p+e);if(t=mi(a)+1,n=a.d.length-1,r=n*Ma+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ar.squareRoot=Ar.sqrt=function(){var e,t,r,n,a,s,i,o=this,c=o.constructor;if(o.s<1){if(!o.s)return new c(0);throw Error(Lu+"NaN")}for(e=mi(o),es=!1,a=Math.sqrt(+o),a==0||a==1/0?(t=LA(o.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=F1((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=i=r+3;;)if(s=n,n=s.plus(oh(o,s,i+2)).times(.5),LA(s.d).slice(0,i)===(t=LA(n.d)).slice(0,i)){if(t=t.slice(i-3,i+1),a==i&&t=="4999"){if(ka(s,r+1,0),s.times(s).eq(o)){n=s;break}}else if(t!="9999")break;i+=4}return es=!0,ka(n,r)};Ar.times=Ar.mul=function(e){var t,r,n,a,s,i,o,c,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=p.length,c<u&&(s=h,h=p,p=s,i=c,c=u,u=i),s=[],i=c+u,n=i;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)o=s[a]+p[n]*h[a-n-1]+t,s[a--]=o%zi|0,t=o/zi|0;s[a]=(s[a]+t)%zi|0}for(;!s[--i];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,es?ka(e,f.precision):e};Ar.toDecimalPlaces=Ar.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(JA(e,0,I1),t===void 0?t=n.rounding:JA(t,0,8),ka(r,e+mi(r)+1,t))};Ar.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=ug(n,!0):(JA(e,0,I1),t===void 0?t=a.rounding:JA(t,0,8),n=ka(new a(n),e+1,t),r=ug(n,!0,e+1)),r};Ar.toFixed=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?ug(a):(JA(e,0,I1),t===void 0?t=s.rounding:JA(t,0,8),n=ka(new s(a),e+mi(a)+1,t),r=ug(n.abs(),!1,e+mi(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ar.toInteger=Ar.toint=function(){var e=this,t=e.constructor;return ka(new t(e),mi(e)+1,t.rounding)};Ar.toNumber=function(){return+this};Ar.toPower=Ar.pow=function(e){var t,r,n,a,s,i,o=this,c=o.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(jc);if(o=new c(o),!o.s){if(e.s<1)throw Error(Lu+"Infinity");return o}if(o.eq(jc))return o;if(n=c.precision,e.eq(jc))return ka(o,n);if(t=e.e,r=e.d.length-1,i=t>=r,s=o.s,i){if((r=d<0?-d:d)<=Uie){for(a=new c(jc),t=Math.ceil(n/Ma+4),es=!1;r%2&&(a=a.times(o),CK(a.d,t)),r=F1(r/2),r!==0;)o=o.times(o),CK(o.d,t);return es=!0,e.s<0?new c(jc).div(a):ka(a,n)}}else if(s<0)throw Error(Lu+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,es=!1,a=e.times(Kw(o,n+u)),es=!0,a=Hie(a),a.s=s,a};Ar.toPrecision=function(e,t){var r,n,a=this,s=a.constructor;return e===void 0?(r=mi(a),n=ug(a,r<=s.toExpNeg||r>=s.toExpPos)):(JA(e,1,I1),t===void 0?t=s.rounding:JA(t,0,8),a=ka(new s(a),e,t),r=mi(a),n=ug(a,e<=r||r<=s.toExpNeg,e)),n};Ar.toSignificantDigits=Ar.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(JA(e,1,I1),t===void 0?t=n.rounding:JA(t,0,8)),ka(new n(r),e,t)};Ar.toString=Ar.valueOf=Ar.val=Ar.toJSON=Ar[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=mi(e),r=e.constructor;return ug(e,t<=r.toExpNeg||t>=r.toExpPos)};function Qie(e,t){var r,n,a,s,i,o,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),es?ka(t,f):t;if(c=e.d,u=t.d,i=e.e,a=t.e,c=c.slice(),s=i-a,s){for(s<0?(n=c,s=-s,o=u.length):(n=u,a=i,o=c.length),i=Math.ceil(f/Ma),o=i>o?i+1:o+1,s>o&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(o=c.length,s=u.length,o-s<0&&(s=o,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/zi|0,c[s]%=zi;for(r&&(c.unshift(r),++a),o=c.length;c[--o]==0;)c.pop();return t.d=c,t.e=a,es?ka(t,f):t}function JA(e,t,r){if(e!==~~e||e<t||e>r)throw Error($p+e)}function LA(e){var t,r,n,a=e.length-1,s="",i=e[0];if(a>0){for(s+=i,t=1;t<a;t++)n=e[t]+"",r=Ma-n.length,r&&(s+=T0(r)),s+=n;i=e[t],n=i+"",r=Ma-n.length,r&&(s+=T0(r))}else if(i===0)return"0";for(;i%10===0;)i/=10;return s+i}var oh=function(){function e(n,a){var s,i=0,o=n.length;for(n=n.slice();o--;)s=n[o]*a+i,n[o]=s%zi|0,i=s/zi|0;return i&&n.unshift(i),n}function t(n,a,s,i){var o,c;if(s!=i)c=s>i?1:-1;else for(o=c=0;o<s;o++)if(n[o]!=a[o]){c=n[o]>a[o]?1:-1;break}return c}function r(n,a,s){for(var i=0;s--;)n[s]-=i,i=n[s]<a[s]?1:0,n[s]=i*zi+n[s]-a[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,s,i){var o,c,u,d,f,h,p,g,v,b,y,C,N,T,S,B,w,_,F=n.constructor,M=n.s==a.s?1:-1,D=n.d,I=a.d;if(!n.s)return new F(n);if(!a.s)throw Error(Lu+"Division by zero");for(c=n.e-a.e,w=I.length,S=D.length,p=new F(M),g=p.d=[],u=0;I[u]==(D[u]||0);)++u;if(I[u]>(D[u]||0)&&--c,s==null?C=s=F.precision:i?C=s+(mi(n)-mi(a))+1:C=s,C<0)return new F(0);if(C=C/Ma+2|0,u=0,w==1)for(d=0,I=I[0],C++;(u<S||d)&&C--;u++)N=d*zi+(D[u]||0),g[u]=N/I|0,d=N%I|0;else{for(d=zi/(I[0]+1)|0,d>1&&(I=e(I,d),D=e(D,d),w=I.length,S=D.length),T=w,v=D.slice(0,w),b=v.length;b<w;)v[b++]=0;_=I.slice(),_.unshift(0),B=I[0],I[1]>=zi/2&&++B;do d=0,o=t(I,v,w,b),o<0?(y=v[0],w!=b&&(y=y*zi+(v[1]||0)),d=y/B|0,d>1?(d>=zi&&(d=zi-1),f=e(I,d),h=f.length,b=v.length,o=t(f,v,h,b),o==1&&(d--,r(f,w<h?_:I,h))):(d==0&&(o=d=1),f=I.slice()),h=f.length,h<b&&f.unshift(0),r(v,f,b),o==-1&&(b=v.length,o=t(I,v,w,b),o<1&&(d++,r(v,w<b?_:I,b))),b=v.length):o===0&&(d++,v=[0]),g[u++]=d,o&&v[0]?v[b++]=D[T]||0:(v=[D[T]],b=1);while((T++<S||v[0]!==void 0)&&C--)}return g[0]||g.shift(),p.e=c,ka(p,i?s+mi(p)+1:s)}}();function Hie(e,t){var r,n,a,s,i,o,c=0,u=0,d=e.constructor,f=d.precision;if(mi(e)>16)throw Error(EL+mi(e));if(!e.s)return new d(jc);for(es=!1,o=f,i=new d(.03125);e.abs().gte(.1);)e=e.times(i),u+=5;for(n=Math.log(pp(2,u))/Math.LN10*2+5|0,o+=n,r=a=s=new d(jc),d.precision=o;;){if(a=ka(a.times(e),o),r=r.times(++c),i=s.plus(oh(a,r,o)),LA(i.d).slice(0,o)===LA(s.d).slice(0,o)){for(;u--;)s=ka(s.times(s),o);return d.precision=f,t==null?(es=!0,ka(s,f)):s}s=i}}function mi(e){for(var t=e.e*Ma,r=e.d[0];r>=10;r/=10)t++;return t}function $j(e,t,r){if(t>e.LN10.sd())throw es=!0,r&&(e.precision=r),Error(Lu+"LN10 precision limit exceeded");return ka(new e(e.LN10),t)}function T0(e){for(var t="";e--;)t+="0";return t}function Kw(e,t){var r,n,a,s,i,o,c,u,d,f=1,h=10,p=e,g=p.d,v=p.constructor,b=v.precision;if(p.s<1)throw Error(Lu+(p.s?"NaN":"-Infinity"));if(p.eq(jc))return new v(0);if(t==null?(es=!1,u=b):u=t,p.eq(10))return t==null&&(es=!0),$j(v,u);if(u+=h,v.precision=u,r=LA(g),n=r.charAt(0),s=mi(p),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=LA(p.d),n=r.charAt(0),f++;s=mi(p),n>1?(p=new v("0."+r),s++):p=new v(n+"."+r.slice(1))}else return c=$j(v,u+2,b).times(s+""),p=Kw(new v(n+"."+r.slice(1)),u-h).plus(c),v.precision=b,t==null?(es=!0,ka(p,b)):p;for(o=i=p=oh(p.minus(jc),p.plus(jc),u),d=ka(p.times(p),u),a=3;;){if(i=ka(i.times(d),u),c=o.plus(oh(i,new v(a),u)),LA(c.d).slice(0,u)===LA(o.d).slice(0,u))return o=o.times(2),s!==0&&(o=o.plus($j(v,u+2,b).times(s+""))),o=oh(o,new v(f),u),v.precision=b,t==null?(es=!0,ka(o,b)):o;o=c,a+=2}}function EK(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=F1(r/Ma),e.d=[],n=(r+1)%Ma,r<0&&(n+=Ma),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ma;n<a;)e.d.push(+t.slice(n,n+=Ma));t=t.slice(n),n=Ma-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),es&&(e.e>K5||e.e<-K5))throw Error(EL+r)}else e.s=0,e.e=0,e.d=[0];return e}function ka(e,t,r){var n,a,s,i,o,c,u,d,f=e.d;for(i=1,s=f[0];s>=10;s/=10)i++;if(n=t-i,n<0)n+=Ma,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ma),s=f.length,d>=s)return e;for(u=s=f[d],i=1;s>=10;s/=10)i++;n%=Ma,a=n-Ma+i}if(r!==void 0&&(s=pp(10,i-a-1),o=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(o||c)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||c||r==6&&(n>0?a>0?u/pp(10,i-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=mi(e),f.length=1,t=t-s-1,f[0]=pp(10,(Ma-t%Ma)%Ma),e.e=F1(-t/Ma)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=pp(10,Ma-n),f[d]=a>0?(u/pp(10,i-a)%pp(10,a)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==zi&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=zi)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(es&&(e.e>K5||e.e<-K5))throw Error(EL+mi(e));return e}function Vie(e,t){var r,n,a,s,i,o,c,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),es?ka(t,p):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),i=u-n,i){for(d=i<0,d?(r=c,i=-i,o=f.length):(r=f,n=u,o=c.length),a=Math.max(Math.ceil(p/Ma),o)+2,i>a&&(i=a,r.length=1),r.reverse(),a=i;a--;)r.push(0);r.reverse()}else{for(a=c.length,o=f.length,d=a<o,d&&(o=a),a=0;a<o;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}i=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),o=c.length,a=f.length-o;a>0;--a)c[o++]=0;for(a=f.length;a>i;){if(c[--a]<f[a]){for(s=a;s&&c[--s]===0;)c[s]=zi-1;--c[s],c[a]+=zi}c[a]-=f[a]}for(;c[--o]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,es?ka(t,p):t):new h(0)}function ug(e,t,r){var n,a=mi(e),s=LA(e.d),i=s.length;return t?(r&&(n=r-i)>0?s=s.charAt(0)+"."+s.slice(1)+T0(n):i>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(a<0?"e":"e+")+a):a<0?(s="0."+T0(-a-1)+s,r&&(n=r-i)>0&&(s+=T0(n))):a>=i?(s+=T0(a+1-i),r&&(n=r-a-1)>0&&(s=s+"."+T0(n))):((n=a+1)<i&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-i)>0&&(a+1===i&&(s+="."),s+=T0(n))),e.s<0?"-"+s:s}function CK(e,t){if(e.length>t)return e.length=t,!0}function zie(e){var t,r,n;function a(s){var i=this;if(!(i instanceof a))return new a(s);if(i.constructor=a,s instanceof a){i.s=s.s,i.e=s.e,i.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error($p+s);if(s>0)i.s=1;else if(s<0)s=-s,i.s=-1;else{i.s=0,i.e=0,i.d=[0];return}if(s===~~s&&s<1e7){i.e=0,i.d=[s];return}return EK(i,s.toString())}else if(typeof s!="string")throw Error($p+s);if(s.charCodeAt(0)===45?(s=s.slice(1),i.s=-1):i.s=1,sGe.test(s))EK(i,s);else throw Error($p+s)}if(a.prototype=Ar,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=zie,a.config=a.set=iGe,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function iGe(e){if(!e||typeof e!="object")throw Error(Lu+"Object expected");var t,r,n,a=["precision",1,I1,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(F1(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error($p+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error($p+r+": "+n);return this}var CL=zie(aGe);jc=new CL(1);const pa=CL;var oGe=e=>e,$ie={},Gie=e=>e===$ie,_K=e=>function t(){return arguments.length===0||arguments.length===1&&Gie(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Kie=(e,t)=>e===1?t:_K(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var s=n.filter(i=>i!==$ie).length;return s>=e?t(...n):Kie(e-s,_K(function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=n.map(d=>Gie(d)?o.shift():d);return t(...u,...o)}))}),uk=e=>Kie(e.length,e),aO=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},lGe=uk((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),cGe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return oGe;var a=r.reverse(),s=a[0],i=a.slice(1);return function(){return i.reduce((o,c)=>c(o),s(...arguments))}},sO=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),qie=e=>{var t=null,r=null;return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];return t&&a.every((i,o)=>{var c;return i===((c=t)===null||c===void 0?void 0:c[o])})||(t=a,r=e(...a)),r}};function Wie(e){var t;return e===0?t=1:t=Math.floor(new pa(e).abs().log(10).toNumber())+1,t}function Xie(e,t,r){for(var n=new pa(e),a=0,s=[];n.lt(t)&&a<1e5;)s.push(n.toNumber()),n=n.add(r),a++;return s}uk((e,t,r)=>{var n=+e,a=+t;return n+r*(a-n)});uk((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});uk((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Yie=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},Jie=(e,t,r)=>{if(e.lte(0))return new pa(0);var n=Wie(e.toNumber()),a=new pa(10).pow(n),s=e.div(a),i=n!==1?.05:.1,o=new pa(Math.ceil(s.div(i).toNumber())).add(r).mul(i),c=o.mul(a);return t?new pa(c.toNumber()):new pa(Math.ceil(c.toNumber()))},uGe=(e,t,r)=>{var n=new pa(1),a=new pa(e);if(!a.isint()&&r){var s=Math.abs(e);s<1?(n=new pa(10).pow(Wie(e)-1),a=new pa(Math.floor(a.div(n).toNumber())).mul(n)):s>1&&(a=new pa(Math.floor(e)))}else e===0?a=new pa(Math.floor((t-1)/2)):r||(a=new pa(Math.floor(e)));var i=Math.floor((t-1)/2),o=cGe(lGe(c=>a.add(new pa(c-i).mul(n)).toNumber()),aO);return o(0,t)},Zie=function(t,r,n,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new pa(0),tickMin:new pa(0),tickMax:new pa(0)};var i=Jie(new pa(r).sub(t).div(n-1),a,s),o;t<=0&&r>=0?o=new pa(0):(o=new pa(t).add(r).div(2),o=o.sub(new pa(o).mod(i)));var c=Math.ceil(o.sub(t).div(i).toNumber()),u=Math.ceil(new pa(r).sub(o).div(i).toNumber()),d=c+u+1;return d>n?Zie(t,r,n,a,s+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:i,tickMin:o.sub(new pa(c).mul(i)),tickMax:o.add(new pa(u).mul(i))})};function dGe(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,s=Math.max(n,2),[i,o]=Yie([t,r]);if(i===-1/0||o===1/0){var c=o===1/0?[i,...aO(0,n-1).map(()=>1/0)]:[...aO(0,n-1).map(()=>-1/0),o];return t>r?sO(c):c}if(i===o)return uGe(i,n,a);var{step:u,tickMin:d,tickMax:f}=Zie(i,o,s,a,0),h=Xie(d,f.add(new pa(.1).mul(u)),u);return t>r?sO(h):h}function AGe(e,t){var[r,n]=e,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[s,i]=Yie([r,n]);if(s===-1/0||i===1/0)return[r,n];if(s===i)return[s];var o=Math.max(t,2),c=Jie(new pa(i).sub(s).div(o-1),a,0),u=[...Xie(new pa(s),new pa(i),c),i];return a===!1&&(u=u.map(d=>Math.round(d))),r>n?sO(u):u}var fGe=qie(dGe),hGe=qie(AGe),eoe=e=>e.rootProps.maxBarSize,mGe=e=>e.rootProps.barGap,toe=e=>e.rootProps.barCategoryGap,pGe=e=>e.rootProps.barSize,M2=e=>e.rootProps.stackOffset,_L=e=>e.options.chartName,SL=e=>e.rootProps.syncId,roe=e=>e.rootProps.syncMethod,NL=e=>e.options.eventEmitter,IA={allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category"},$l={allowDataOverflow:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,cx:0,cy:0,orientation:"right",radiusAxisId:0,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number"},dk=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},gGe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:IA.angleAxisId,includeHidden:!1,name:void 0,reversed:IA.reversed,scale:IA.scale,tick:IA.tick,tickCount:void 0,ticks:void 0,type:IA.type,unit:void 0},vGe={allowDataOverflow:$l.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:$l.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$l.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$l.scale,tick:$l.tick,tickCount:$l.tickCount,ticks:void 0,type:$l.type,unit:void 0},xGe={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:IA.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:IA.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:IA.scale,tick:IA.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},bGe={allowDataOverflow:$l.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:$l.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:$l.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:$l.scale,tick:$l.tick,tickCount:$l.tickCount,ticks:void 0,type:"category",unit:void 0},O1=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?xGe:gGe,U2=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?bGe:vGe,Ak=e=>e.polarOptions,kL=ct([Ih,Fh,ki],jse),noe=ct([Ak,kL],(e,t)=>{if(e!=null)return yl(e.innerRadius,t,0)}),aoe=ct([Ak,kL],(e,t)=>{if(e!=null)return yl(e.outerRadius,t,t*.8)}),yGe=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},soe=ct([Ak],yGe),wGe=ct([O1,soe],dk),ioe=ct([kL,noe,aoe],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]}),EGe=ct([U2,ioe],dk),D1=ct([In,Ak,noe,aoe,Ih,Fh],(e,t,r,n,a,s)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:i,cy:o,startAngle:c,endAngle:u}=t;return{cx:yl(i,a,a/2),cy:yl(o,s,s/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Ba=(e,t)=>t,Q2=(e,t,r)=>r;function BL(e){return e==null?void 0:e.id}var Ti=e=>{var t=In(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},P1=e=>e.tooltip.settings.axisId,ji=e=>{var t=Ti(e),r=P1(e);return R1(e,t,r)};function ooe(e,t,r){var{chartData:n=[]}=t,a=r==null?void 0:r.dataKey,s=new Map;return e.forEach(i=>{var o,c=(o=i.data)!==null&&o!==void 0?o:n;if(!(c==null||c.length===0)){var u=BL(i);c.forEach((d,f)=>{var h=a==null?f:String(Da(d,a,null)),p=Da(d,i.dataKey,0),g;s.has(h)?g=s.get(h):g={},Object.assign(g,{[u]:p}),s.set(h,g)})}}),Array.from(s.values())}function fk(e){return e.stackId!=null&&e.dataKey!=null}function SK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function q5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SK(Object(r),!0).forEach(function(n){CGe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CGe(e,t,r){return(t=_Ge(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Ge(e){var t=SGe(e,"string");return typeof t=="symbol"?t:t+""}function SGe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iO=[0,"auto"],Ec={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},Dh=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Ec},Cc={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:iO,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:J4},Pm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Cc},NGe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},TL=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??NGe},Js=(e,t,r)=>{switch(t){case"xAxis":return Dh(e,r);case"yAxis":return Pm(e,r);case"zAxis":return TL(e,r);case"angleAxis":return O1(e,r);case"radiusAxis":return U2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},kGe=(e,t,r)=>{switch(t){case"xAxis":return Dh(e,r);case"yAxis":return Pm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},R1=(e,t,r)=>{switch(t){case"xAxis":return Dh(e,r);case"yAxis":return Pm(e,r);case"angleAxis":return O1(e,r);case"radiusAxis":return U2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},loe=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function jL(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var IL=e=>e.graphicalItems.cartesianItems,BGe=ct([Ba,Q2],jL),FL=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),H2=ct([IL,Js,BGe],FL),coe=ct([H2],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(fk)),uoe=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),doe=ct([H2],uoe),OL=e=>e.map(t=>t.data).filter(Boolean).flat(1),TGe=ct([H2],OL),DL=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},PL=ct([TGe,wL],DL),RL=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Da(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:Da(a,n)}))):e.map(n=>({value:n})),hk=ct([PL,Js,H2],RL);function Aoe(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Tg(e){return e.filter(t=>YA(t)||t instanceof Date).map(Number).filter(t=>Rc(t)===!1)}function jGe(e,t,r){return!r||typeof t!="number"||Rc(t)?[]:r.length?Tg(r.flatMap(n=>{var a=Da(e,n.dataKey),s,i;if(Array.isArray(a)?[s,i]=a:s=i=a,!(!Uc(s)||!Uc(i)))return[t-s,t+i]})):[]}var IGe=ct([coe,wL,ji],ooe),foe=(e,t,r)=>{var n={},a=t.reduce((s,i)=>(i.stackId==null||(s[i.stackId]==null&&(s[i.stackId]=[]),s[i.stackId].push(i)),s),n);return Object.fromEntries(Object.entries(a).map(s=>{var[i,o]=s,c=o.map(BL);return[i,{stackedData:_Qe(e,c,r),graphicalItems:o}]}))},oO=ct([IGe,coe,M2],foe),hoe=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:a}=t;if(r!=="zAxis"){var s=TQe(e,n,a);if(!(s!=null&&s[0]===0&&s[1]===0))return s}},FGe=ct([oO,Dm,Ba],hoe),moe=(e,t,r,n,a)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,c,u=(o=n[i.id])===null||o===void 0?void 0:o.filter(f=>Aoe(a,f)),d=Da(s,(c=t.dataKey)!==null&&c!==void 0?c:i.dataKey);return{value:d,errorDomain:jGe(s,d,u)}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(s=>({value:Da(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),mk=e=>e.errorBars,poe=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>Aoe(r,n));ct([doe,mk,Ba],poe);var OGe=ct([PL,Js,doe,mk,Ba],moe);function DGe(e){var{value:t}=e;if(YA(t)||t instanceof Date)return t}var NK=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Tg(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},PGe=(e,t,r)=>{var n=e.map(DGe).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&kae(n))?rie(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},LL=e=>{var t;if(e==null||!("domain"in e))return iO;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Tg(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:iO},W5=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var s=a.flat(),i=Math.min(...s),o=Math.max(...s);return[i,o]}},goe=e=>e.referenceElements.dots,L1=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),RGe=ct([goe,Ba,Q2],L1),voe=e=>e.referenceElements.areas,LGe=ct([voe,Ba,Q2],L1),xoe=e=>e.referenceElements.lines,MGe=ct([xoe,Ba,Q2],L1),boe=(e,t)=>{var r=Tg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},UGe=ct(RGe,Ba,boe),yoe=(e,t)=>{var r=Tg(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},QGe=ct([LGe,Ba],yoe),woe=(e,t)=>{var r=Tg(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},HGe=ct(MGe,Ba,woe),VGe=ct(UGe,HGe,QGe,(e,t,r)=>W5(e,r,t)),Eoe=ct([Js],LL),ML=(e,t,r,n,a,s,i)=>{var o=rGe(t,e.allowDataOverflow);if(o!=null)return o;var c=s==="vertical"&&i==="xAxis"||s==="horizontal"&&i==="yAxis",u=c?W5(r,a,NK(n)):W5(a,NK(n));return nGe(t,u,e.allowDataOverflow)},zGe=ct([Js,Eoe,FGe,OGe,VGe,In,Ba],ML),$Ge=[0,1],UL=(e,t,r,n,a,s,i)=>{if(!((e==null||r==null||r.length===0)&&i===void 0)){var{dataKey:o,type:c}=e,u=Im(t,s);return u&&o==null?rie(0,r.length):c==="category"?PGe(n,e,u):a==="expand"?$Ge:i}},QL=ct([Js,In,PL,hk,M2,Ba,zGe],UL),Coe=(e,t,r,n,a)=>{if(e!=null){var{scale:s,type:i}=e;if(s==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":i==="category"?"band":"linear";if(typeof s=="string"){var o="scale".concat(I2(s));return o in Ey?o:"point"}}},Rm=ct([Js,In,loe,_L,Ba],Coe);function GGe(e){if(e!=null){if(e in Ey)return Ey[e]();var t="scale".concat(I2(e));if(t in Ey)return Ey[t]()}}function pk(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=GGe(t);if(a!=null){var s=a.domain(r).range(n);return bQe(s),s}}}var HL=(e,t,r)=>{var n=LL(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Zx(e))return fGe(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Zx(e))return hGe(e,t.tickCount,t.allowDecimals)}},VL=ct([QL,R1,Rm],HL),zL=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Zx(t)&&Array.isArray(r)&&r.length>0){var a=t[0],s=r[0],i=t[1],o=r[r.length-1];return[Math.min(a,s),Math.max(i,o)]}return t},KGe=ct([Js,QL,VL,Ba],zL),qGe=ct(hk,Js,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Tg(e.map(o=>o.value))).sort((o,c)=>o-c);if(n.length<2)return 1/0;var a=n[n.length-1]-n[0];if(a===0)return 1/0;for(var s=0;s<n.length-1;s++){var i=n[s+1]-n[s];r=Math.min(r,i)}return r/a}}),_oe=ct(qGe,In,toe,ki,(e,t,r,n)=>n,(e,t,r,n,a)=>{if(!Uc(e))return 0;var s=t==="vertical"?n.height:n.width;if(a==="gap")return e*s/2;if(a==="no-gap"){var i=yl(r,e*s),o=e*s/2;return o-i-(o-i)/s*i}return 0}),WGe=(e,t)=>{var r=Dh(e,t);return r==null||typeof r.padding!="string"?0:_oe(e,"xAxis",t,r.padding)},XGe=(e,t)=>{var r=Pm(e,t);return r==null||typeof r.padding!="string"?0:_oe(e,"yAxis",t,r.padding)},YGe=ct(Dh,WGe,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),JGe=ct(Pm,XGe,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),ZGe=ct([ki,YGe,ek,Z4,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:s}=n;return a?[s.left,r.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),eKe=ct([ki,In,JGe,ek,Z4,(e,t,r)=>r],(e,t,r,n,a,s)=>{var{padding:i}=a;return s?[n.height-i.bottom,i.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),V2=(e,t,r,n)=>{var a;switch(t){case"xAxis":return ZGe(e,r,n);case"yAxis":return eKe(e,r,n);case"zAxis":return(a=TL(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return soe(e);case"radiusAxis":return ioe(e,r);default:return}},Soe=ct([Js,V2],dk),M1=ct([Js,Rm,KGe,Soe],pk);ct([H2,mk,Ba],poe);function Noe(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var gk=(e,t)=>t,vk=(e,t,r)=>r,tKe=ct(GR,gk,vk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Noe)),rKe=ct(KR,gk,vk,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(Noe)),koe=(e,t)=>({width:e.width,height:t.height}),nKe=(e,t)=>{var r=typeof t.width=="number"?t.width:J4;return{width:r,height:e.height}},Boe=ct(ki,Dh,koe),aKe=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},sKe=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},iKe=ct(Fh,ki,tKe,gk,vk,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=koe(t,o);i==null&&(i=aKe(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;s[o.id]=i-Number(u)*c.height,i+=(u?-1:1)*c.height}),s}),oKe=ct(Ih,ki,rKe,gk,vk,(e,t,r,n,a)=>{var s={},i;return r.forEach(o=>{var c=nKe(t,o);i==null&&(i=sKe(t,n,e));var u=n==="left"&&!a||n==="right"&&a;s[o.id]=i-Number(u)*c.width,i+=(u?-1:1)*c.width}),s}),lKe=(e,t)=>{var r=ki(e),n=Dh(e,t);if(n!=null){var a=iKe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:r.left,y:0}:{x:r.left,y:s}}},cKe=(e,t)=>{var r=ki(e),n=Pm(e,t);if(n!=null){var a=oKe(e,n.orientation,n.mirror),s=a[t];return s==null?{x:0,y:r.top}:{x:s,y:r.top}}},Toe=ct(ki,Pm,(e,t)=>{var r=typeof t.width=="number"?t.width:J4;return{width:r,height:e.height}}),kK=(e,t,r)=>{switch(t){case"xAxis":return Boe(e,r).width;case"yAxis":return Toe(e,r).height;default:return}},joe=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:s,dataKey:i}=r,o=Im(e,n),c=t.map(u=>u.value);if(i&&o&&s==="category"&&a&&kae(c))return c}},z2=ct([In,hk,Js,Ba],joe),$L=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:s}=r,i=Im(e,n);if(i&&(a==="number"||s!=="auto"))return t.map(o=>o.value)}},GL=ct([In,hk,R1,Ba],$L),BK=ct([In,kGe,Rm,M1,z2,GL,V2,VL,Ba],(e,t,r,n,a,s,i,o,c)=>{if(t==null)return null;var u=Im(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:s,duplicateDomain:a,isCategorical:u,niceTicks:o,range:i,realScaleType:r,scale:n}}),Ioe=(e,t,r,n,a,s,i,o,c)=>{if(!(t==null||n==null)){var u=Im(e,c),{type:d,ticks:f,tickCount:h}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=c==="angleAxis"&&s!=null&&s.length>=2?Xi(s[0]-s[1])*2*g:g;var v=f||a;if(v){var b=v.map((y,C)=>{var N=i?i.indexOf(y):y;return{index:C,coordinate:n(N)+g,value:y,offset:g}});return b.filter(y=>!Rc(y.coordinate))}return u&&o?o.map((y,C)=>({coordinate:n(y)+g,value:y,index:C,offset:g})):n.ticks?n.ticks(h).map(y=>({coordinate:n(y)+g,value:y,offset:g})):n.domain().map((y,C)=>({coordinate:n(y)+g,value:i?i[y]:y,index:C,offset:g}))}},Foe=ct([In,R1,Rm,M1,VL,V2,z2,GL,Ba],Ioe),Ooe=(e,t,r,n,a,s,i)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var o=Im(e,i),{tickCount:c}=t,u=0;return u=i==="angleAxis"&&(n==null?void 0:n.length)>=2?Xi(n[0]-n[1])*2*u:u,o&&s?s.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},e1=ct([In,R1,M1,V2,z2,GL,Ba],Ooe),t1=ct(Js,M1,(e,t)=>{if(!(e==null||t==null))return q5(q5({},e),{},{scale:t})}),uKe=ct([Js,Rm,QL,Soe],pk);ct((e,t,r)=>TL(e,r),uKe,(e,t)=>{if(!(e==null||t==null))return q5(q5({},e),{},{scale:t})});var dKe=ct([In,GR,KR],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),Doe=e=>e.options.defaultTooltipEventType,Poe=e=>e.options.validateTooltipEventTypes;function Roe(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function KL(e,t){var r=Doe(e),n=Poe(e);return Roe(t,r,n)}function AKe(e){return sr(t=>KL(t,e))}var Loe=(e,t)=>{var r,n=Number(t);if(!(Rc(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},fKe=e=>e.tooltip.settings,P0={active:!1,index:null,dataKey:void 0,coordinate:void 0},hKe={itemInteraction:{click:P0,hover:P0},axisInteraction:{click:P0,hover:P0},keyboardInteraction:P0,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},Moe=Hc({name:"tooltip",initialState:hKe,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=ih(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:mKe,removeTooltipEntrySettings:pKe,setTooltipSettingsState:gKe,setActiveMouseOverItemIndex:Uoe,mouseLeaveItem:vKe,mouseLeaveChart:Qoe,setActiveClickItemIndex:xKe,setMouseOverAxisIndex:Hoe,setMouseClickAxisIndex:bKe,setSyncInteraction:lO,setKeyboardInteraction:cO}=Moe.actions,yKe=Moe.reducer;function TK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function o_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TK(Object(r),!0).forEach(function(n){wKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wKe(e,t,r){return(t=EKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EKe(e){var t=CKe(e,"string");return typeof t=="symbol"?t:t+""}function CKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _Ke(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function SKe(e){return e.index!=null}var Voe=(e,t,r,n)=>{if(t==null)return P0;var a=_Ke(e,t,r);if(a==null)return P0;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var s=e.settings.active===!0;if(SKe(a)){if(s)return o_(o_({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return o_(o_({},P0),{},{coordinate:a.coordinate})},qL=(e,t)=>{var r=e==null?void 0:e.index;if(r==null)return null;var n=Number(r);if(!Uc(n))return r;var a=0,s=1/0;return t.length>0&&(s=t.length-1),String(Math.max(a,Math.min(n,s)))},zoe=(e,t,r,n,a,s,i,o)=>{if(!(s==null||o==null)){var c=i[0],u=c==null?void 0:o(c.positions,s);if(u!=null)return u;var d=a==null?void 0:a[Number(s)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},$oe=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;return r==="hover"?a=e.itemInteraction.hover.dataKey:a=e.itemInteraction.click.dataKey,a==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(s=>{var i;return((i=s.settings)===null||i===void 0?void 0:i.dataKey)===a})},$2=e=>e.options.tooltipPayloadSearcher,U1=e=>e.tooltip;function jK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function IK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jK(Object(r),!0).forEach(function(n){NKe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NKe(e,t,r){return(t=kKe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kKe(e){var t=BKe(e,"string");return typeof t=="symbol"?t:t+""}function BKe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TKe(e,t){return e??t}var Goe=(e,t,r,n,a,s,i)=>{if(!(t==null||s==null)){var{chartData:o,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,p)=>{var g,{dataDefinedOnItem:v,settings:b}=p,y=TKe(v,o),C=Array.isArray(y)?Fse(y,u,d):y,N=(g=b==null?void 0:b.dataKey)!==null&&g!==void 0?g:n==null?void 0:n.dataKey,T=b==null?void 0:b.nameKey,S;if(n!=null&&n.dataKey&&Array.isArray(C)&&!Array.isArray(C[0])&&i==="axis"?S=AUe(C,n.dataKey,a):S=s(C,t,c,T),Array.isArray(S))S.forEach(w=>{var _=IK(IK({},b),{},{name:w.name,unit:w.unit,color:void 0,fill:void 0});h.push(uG({tooltipEntrySettings:_,dataKey:w.dataKey,payload:w.payload,value:Da(w.payload,w.dataKey),name:w.name}))});else{var B;h.push(uG({tooltipEntrySettings:b,dataKey:N,payload:S,value:Da(S,N),name:(B=Da(S,T))!==null&&B!==void 0?B:b==null?void 0:b.name}))}return h},f)}},WL=ct([ji,In,loe,_L,Ti],Coe),jKe=ct([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),IKe=ct([Ti,P1],jL),G2=ct([jKe,ji,IKe],FL),FKe=ct([G2],e=>e.filter(fk)),OKe=ct([G2],OL),Q1=ct([OKe,Dm],DL),DKe=ct([FKe,Dm,ji],ooe),XL=ct([Q1,ji,G2],RL),PKe=ct([ji],LL),RKe=ct([G2],e=>e.filter(fk)),LKe=ct([DKe,RKe,M2],foe),MKe=ct([LKe,Dm,Ti],hoe),UKe=ct([G2],uoe),QKe=ct([Q1,ji,UKe,mk,Ti],moe),HKe=ct([goe,Ti,P1],L1),VKe=ct([HKe,Ti],boe),zKe=ct([voe,Ti,P1],L1),$Ke=ct([zKe,Ti],yoe),GKe=ct([xoe,Ti,P1],L1),KKe=ct([GKe,Ti],woe),qKe=ct([VKe,KKe,$Ke],W5),WKe=ct([ji,PKe,MKe,QKe,qKe,In,Ti],ML),Koe=ct([ji,In,Q1,XL,M2,Ti,WKe],UL),XKe=ct([Koe,ji,WL],HL),YKe=ct([ji,Koe,XKe,Ti],zL),qoe=e=>{var t=Ti(e),r=P1(e),n=!1;return V2(e,t,r,n)},Woe=ct([ji,qoe],dk),Xoe=ct([ji,WL,YKe,Woe],pk),JKe=ct([In,XL,ji,Ti],joe),ZKe=ct([In,XL,ji,Ti],$L),eqe=(e,t,r,n,a,s,i,o)=>{if(t){var{type:c}=t,u=Im(e,o);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=o==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?Xi(a[0]-a[1])*2*f:f,u&&i?i.map((h,p)=>({coordinate:n(h)+f,value:h,index:p,offset:f})):n.domain().map((h,p)=>({coordinate:n(h)+f,value:s?s[h]:h,index:p,offset:f}))}}},Ph=ct([In,ji,WL,Xoe,qoe,JKe,ZKe,Ti],eqe),YL=ct([Doe,Poe,fKe],(e,t,r)=>Roe(r.shared,e,t)),Yoe=e=>e.tooltip.settings.trigger,JL=e=>e.tooltip.settings.defaultIndex,xk=ct([U1,YL,Yoe,JL],Voe),Cm=ct([xk,Q1],qL),Joe=ct([Ph,Cm],Loe),Zoe=ct([xk],e=>{if(e)return e.dataKey}),ele=ct([U1,YL,Yoe,JL],$oe),tqe=ct([Ih,Fh,In,ki,Ph,JL,ele,$2],zoe),rqe=ct([xk,tqe],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),nqe=ct([xk],e=>e.active),aqe=ct([ele,Cm,Dm,ji,Joe,$2,YL],Goe),sqe=ct([aqe],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function FK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function OK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FK(Object(r),!0).forEach(function(n){iqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iqe(e,t,r){return(t=oqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oqe(e){var t=lqe(e,"string");return typeof t=="symbol"?t:t+""}function lqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cqe=()=>sr(ji),uqe=()=>{var e=cqe(),t=sr(Ph),r=sr(Xoe);return Hw(OK(OK({},e),{},{scale:r}),t)},dqe=()=>sr(_L),ZL=(e,t)=>t,tle=(e,t,r)=>r,e8=(e,t,r,n)=>n,Aqe=ct(Ph,e=>$4(e,t=>t.coordinate)),t8=ct([U1,ZL,tle,e8],Voe),rle=ct([t8,Q1],qL),fqe=(e,t,r)=>{if(t!=null){var n=U1(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},nle=ct([U1,ZL,tle,e8],$oe),X5=ct([Ih,Fh,In,ki,Ph,e8,nle,$2],zoe),hqe=ct([t8,X5],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),ale=ct(Ph,rle,Loe),mqe=ct([nle,rle,Dm,ji,ale,$2,ZL],Goe),pqe=ct([t8],e=>({isActive:e.active,activeIndex:e.index})),gqe=(e,t,r,n,a,s,i,o)=>{if(!(!e||!t||!n||!a||!s)){var c=jQe(e.chartX,e.chartY,t,r,o);if(c){var u=FQe(c,t),d=vQe(u,i,s,n,a),f=IQe(t,s,d,c);return{activeIndex:String(d),activeCoordinate:f}}}};function uO(){return uO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uO.apply(null,arguments)}function DK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function l_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DK(Object(r),!0).forEach(function(n){vqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vqe(e,t,r){return(t=xqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xqe(e){var t=bqe(e,"string");return typeof t=="symbol"?t:t+""}function bqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yqe(e){var{coordinate:t,payload:r,index:n,offset:a,tooltipAxisBandSize:s,layout:i,cursor:o,tooltipEventType:c,chartName:u}=e,d=t,f=r,h=n;if(!o||!d||u!=="ScatterChart"&&c!=="axis")return null;var p,g;if(u==="ScatterChart")p=d,g=THe;else if(u==="BarChart")p=jHe(i,d,a,s),g=Jse;else if(i==="radial"){var{cx:v,cy:b,radius:y,startAngle:C,endAngle:N}=Zse(d);p={cx:v,cy:b,startAngle:C,endAngle:N,innerRadius:y,outerRadius:y},g=tie}else p={points:mVe(i,d,a)},g=$se;var T=typeof o=="object"&&"className"in o?o.className:void 0,S=l_(l_(l_(l_({stroke:"#ccc",pointerEvents:"none"},a),p),Yn(o,!1)),{},{payload:f,payloadIndex:h,className:gn("recharts-tooltip-cursor",T)});return k.isValidElement(o)?k.cloneElement(o,S):k.createElement(g,S)}function wqe(e){var t=uqe(),r=Use(),n=YR(),a=dqe();return k.createElement(yqe,uO({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var sle=k.createContext(null),Eqe=()=>k.useContext(sle),Gj={exports:{}},PK;function Cqe(){return PK||(PK=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function i(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},o.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},o.prototype.emit=function(u,d,f,h,p,g){var v=r?r+u:u;if(!this._events[v])return!1;var b=this._events[v],y=arguments.length,C,N;if(b.fn){switch(b.once&&this.removeListener(u,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,f),!0;case 4:return b.fn.call(b.context,d,f,h),!0;case 5:return b.fn.call(b.context,d,f,h,p),!0;case 6:return b.fn.call(b.context,d,f,h,p,g),!0}for(N=1,C=new Array(y-1);N<y;N++)C[N-1]=arguments[N];b.fn.apply(b.context,C)}else{var T=b.length,S;for(N=0;N<T;N++)switch(b[N].once&&this.removeListener(u,b[N].fn,void 0,!0),y){case 1:b[N].fn.call(b[N].context);break;case 2:b[N].fn.call(b[N].context,d);break;case 3:b[N].fn.call(b[N].context,d,f);break;case 4:b[N].fn.call(b[N].context,d,f,h);break;default:if(!C)for(S=1,C=new Array(y-1);S<y;S++)C[S-1]=arguments[S];b[N].fn.apply(b[N].context,C)}}return!0},o.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},o.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},o.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return i(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&i(this,p);else{for(var v=0,b=[],y=g.length;v<y;v++)(g[v].fn!==d||h&&!g[v].once||f&&g[v].context!==f)&&b.push(g[v]);b.length?this._events[p]=b.length===1?b[0]:b:i(this,p)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&i(this,d)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(Gj)),Gj.exports}var _qe=Cqe();const Sqe=wl(_qe);var qw=new Sqe,dO="recharts.syncEvent.tooltip",RK="recharts.syncEvent.brush";function r8(e,t){if(t){var r=Number.parseInt(t,10);if(!Rc(r))return e==null?void 0:e[r]}}var Nqe={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},ile=Hc({name:"options",initialState:Nqe,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),kqe=ile.reducer,{createEventEmitter:Bqe}=ile.actions;function Tqe(e){return e.tooltip.syncInteraction}var jqe={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ole=Hc({name:"chartData",initialState:jqe,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:LK,setDataStartEndIndexes:Iqe,setComputedData:oft}=ole.actions,Fqe=ole.reducer,lle=()=>{};function Oqe(){var e=sr(SL),t=sr(NL),r=$a(),n=sr(roe),a=sr(Ph),s=YR(),i=qR(),o=sr(c=>c.rootProps.className);k.useEffect(()=>{if(e==null)return lle;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){r(d);return}if(a!=null){var h;if(typeof n=="function"){var p={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},g=n(a,p);h=a[g]}else n==="value"&&(h=a.find(B=>String(B.value)===d.payload.label));var{coordinate:v}=d.payload;if(h==null||d.payload.active===!1||v==null||i==null){r(lO({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=v,C=Math.min(b,i.x+i.width),N=Math.min(y,i.y+i.height),T={x:s==="horizontal"?h.coordinate:C,y:s==="horizontal"?N:h.coordinate},S=lO({active:d.payload.active,coordinate:T,dataKey:d.payload.dataKey,index:String(h.index),label:d.payload.label});r(S)}}};return qw.on(dO,c),()=>{qw.off(dO,c)}},[o,r,t,e,n,a,s,i])}function Dqe(){var e=sr(SL),t=sr(NL),r=$a();k.useEffect(()=>{if(e==null)return lle;var n=(a,s,i)=>{t!==i&&e===a&&r(Iqe(s))};return qw.on(RK,n),()=>{qw.off(RK,n)}},[r,t,e])}function Pqe(){var e=$a();k.useEffect(()=>{e(Bqe())},[e]),Oqe(),Dqe()}function Rqe(e,t,r,n,a,s){var i=sr(h=>fqe(h,e,t)),o=sr(NL),c=sr(SL),u=sr(roe),d=sr(Tqe),f=d==null?void 0:d.active;k.useEffect(()=>{if(!f&&c!=null&&o!=null){var h=lO({active:s,coordinate:r,dataKey:i,index:a,label:typeof n=="number"?String(n):n});qw.emit(dO,c,h,o)}},[f,r,i,a,n,o,c,u,s])}function MK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MK(Object(r),!0).forEach(function(n){Lqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lqe(e,t,r){return(t=Mqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mqe(e){var t=Uqe(e,"string");return typeof t=="symbol"?t:t+""}function Uqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qqe(e){return e.dataKey}function Hqe(e,t){return k.isValidElement(e)?k.cloneElement(e,t):typeof e=="function"?k.createElement(e,t):k.createElement(lHe,t)}var QK=[],Vqe={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!Ng.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Cy(e){var t=Uu(e,Vqe),{active:r,allowEscapeViewBox:n,animationDuration:a,animationEasing:s,content:i,filterNull:o,isAnimationActive:c,offset:u,payloadUniqBy:d,position:f,reverseDirection:h,useTranslate3d:p,wrapperStyle:g,cursor:v,shared:b,trigger:y,defaultIndex:C,portal:N,axisId:T}=t,S=$a(),B=typeof C=="number"?String(C):C;k.useEffect(()=>{S(gKe({shared:b,trigger:y,axisId:T,active:r,defaultIndex:B}))},[S,b,y,T,r,B]);var w=qR(),_=zse(),F=AKe(b),{activeIndex:M,isActive:D}=sr(te=>pqe(te,F,y,B)),I=sr(te=>mqe(te,F,y,B)),U=sr(te=>ale(te,F,y,B)),P=sr(te=>hqe(te,F,y,B)),X=I,H=Eqe(),Y=r??D,[V,z]=ise([X,Y]),G=F==="axis"?U:void 0;Rqe(F,y,P,G,M,Y);var re=N??H;if(re==null)return null;var R=X??QK;Y||(R=QK),o&&R.length&&(R=ese(X.filter(te=>te.value!=null&&(te.hide!==!0||t.includeHidden)),d,Qqe));var q=R.length>0,J=k.createElement(mHe,{allowEscapeViewBox:n,animationDuration:a,animationEasing:s,isAnimationActive:c,active:Y,coordinate:P,hasPayload:q,offset:u,position:f,reverseDirection:h,useTranslate3d:p,viewBox:w,wrapperStyle:g,lastBoundingBox:V,innerRef:z,hasPortalFromProps:!!N},Hqe(i,UK(UK({},t),{},{payload:R,label:G,active:Y,coordinate:P,accessibilityLayer:_})));return k.createElement(k.Fragment,null,NR.createPortal(J,re),Y&&k.createElement(wqe,{cursor:v,tooltipEventType:F,coordinate:P,payload:X,index:M}))}var Kj={},qj={},Wj={},HK;function zqe(){return HK||(HK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:s}={}){let i,o=null;const c=s!=null&&s.includes("leading"),u=s==null||s.includes("trailing"),d=()=>{o!==null&&(r.apply(i,o),i=void 0,o=null)},f=()=>{u&&d(),v()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},v=()=>{g(),i=void 0,o=null},b=()=>{d()},y=function(...C){if(a!=null&&a.aborted)return;i=this,o=C;const N=h==null;p(),c&&N&&d()};return y.schedule=p,y.cancel=v,y.flush=b,a==null||a.addEventListener("abort",v,{once:!0}),y}e.debounce=t}(Wj)),Wj}var VK;function $qe(){return VK||(VK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zqe();function r(n,a=0,s={}){typeof s!="object"&&(s={});const{leading:i=!1,trailing:o=!0,maxWait:c}=s,u=Array(2);i&&(u[0]="leading"),o&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...v){d=n.apply(this,v),f=null},a,{edges:u}),p=function(...v){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,v),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,v),d)},g=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=g,p}e.debounce=r}(qj)),qj}var zK;function Gqe(){return zK||(zK=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$qe();function r(n,a=0,s={}){const{leading:i=!0,trailing:o=!0}=s;return t.debounce(n,a,{leading:i,maxWait:a,trailing:o})}e.throttle=r}(Kj)),Kj}var Xj,$K;function Kqe(){return $K||($K=1,Xj=Gqe().throttle),Xj}var qqe=Kqe();const Wqe=wl(qqe);var ew=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s]};function GK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Yj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GK(Object(r),!0).forEach(function(n){Xqe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xqe(e,t,r){return(t=Yqe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yqe(e){var t=Jqe(e,"string");return typeof t=="symbol"?t:t+""}function Jqe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _y=k.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a="100%",height:s="100%",minWidth:i=0,minHeight:o,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:p,style:g={}}=e,v=k.useRef(null),b=k.useRef();b.current=p,k.useImperativeHandle(t,()=>v.current);var[y,C]=k.useState({containerWidth:n.width,containerHeight:n.height}),N=k.useCallback((S,B)=>{C(w=>{var _=Math.round(S),F=Math.round(B);return w.containerWidth===_&&w.containerHeight===F?w:{containerWidth:_,containerHeight:F}})},[]);k.useEffect(()=>{var S=F=>{var M,{width:D,height:I}=F[0].contentRect;N(D,I),(M=b.current)===null||M===void 0||M.call(b,D,I)};d>0&&(S=Wqe(S,d,{trailing:!0,leading:!1}));var B=new ResizeObserver(S),{width:w,height:_}=v.current.getBoundingClientRect();return N(w,_),B.observe(v.current),()=>{B.disconnect()}},[N,d]);var T=k.useMemo(()=>{var{containerWidth:S,containerHeight:B}=y;if(S<0||B<0)return null;ew(Sp(a)||Sp(s),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,s),ew(!r||r>0,"The aspect(%s) must be greater than zero.",r);var w=Sp(a)?S:a,_=Sp(s)?B:s;return r&&r>0&&(w?_=w/r:_&&(w=_*r),c&&_>c&&(_=c)),ew(w>0||_>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,w,_,a,s,i,o,r),k.Children.map(u,F=>k.cloneElement(F,{width:w,height:_,style:Yj({width:w,height:_},F.props.style)}))},[r,u,s,c,o,i,y,a]);return k.createElement("div",{id:f?"".concat(f):void 0,className:gn("recharts-responsive-container",h),style:Yj(Yj({},g),{},{width:a,height:s,minWidth:i,minHeight:o,maxHeight:c}),ref:v},k.createElement("div",{style:{width:0,height:0,overflow:"visible"}},T))}),K2=e=>null;K2.displayName="Cell";function Zqe(e,t,r){return(t=eWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eWe(e){var t=tWe(e,"string");return typeof t=="symbol"?t:t+""}function tWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class rWe{constructor(t){Zqe(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function KK(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function nWe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KK(Object(r),!0).forEach(function(n){aWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KK(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aWe(e,t,r){return(t=sWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sWe(e){var t=iWe(e,"string");return typeof t=="symbol"?t:t+""}function iWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oWe={cacheSize:2e3,enableCache:!0},cle=nWe({},oWe),qK=new rWe(cle.cacheSize),lWe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},WK="recharts_measurement_span";function cWe(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",s=t.fontStyle||"",i=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(s,"|").concat(i,"|").concat(o)}var XK=(e,t)=>{try{var r=document.getElementById(WK);r||(r=document.createElement("span"),r.setAttribute("id",WK),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,lWe,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},tw=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ng.isSsr)return{width:0,height:0};if(!cle.enableCache)return XK(t,r);var n=cWe(t,r),a=qK.get(n);if(a)return a;var s=XK(t,r);return qK.set(n,s),s},YK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,JK=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,uWe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,dWe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ule={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},AWe=Object.keys(ule),Jv="NaN";function fWe(e,t){return e*ule[t]}class Ql{static parse(t){var r,[,n,a]=(r=dWe.exec(t))!==null&&r!==void 0?r:[];return new Ql(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,Rc(t)&&(this.unit=""),r!==""&&!uWe.test(r)&&(this.num=NaN,this.unit=""),AWe.includes(r)&&(this.num=fWe(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Ql(NaN,""):new Ql(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Ql(NaN,""):new Ql(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ql(NaN,""):new Ql(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Ql(NaN,""):new Ql(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Rc(this.num)}}function dle(e){if(e.includes(Jv))return Jv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,s]=(r=YK.exec(t))!==null&&r!==void 0?r:[],i=Ql.parse(n??""),o=Ql.parse(s??""),c=a==="*"?i.multiply(o):i.divide(o);if(c.isNaN())return Jv;t=t.replace(YK,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=JK.exec(t))!==null&&u!==void 0?u:[],p=Ql.parse(d??""),g=Ql.parse(h??""),v=f==="+"?p.add(g):p.subtract(g);if(v.isNaN())return Jv;t=t.replace(JK,v.toString())}return t}var ZK=/\(([^()]*)\)/;function hWe(e){for(var t=e,r;(r=ZK.exec(t))!=null;){var[,n]=r;t=t.replace(ZK,dle(n))}return t}function mWe(e){var t=e.replace(/\s+/g,"");return t=hWe(t),t=dle(t),t}function pWe(e){try{return mWe(e)}catch{return Jv}}function Jj(e){var t=pWe(e.slice(5,-1));return t===Jv?"":t}var gWe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],vWe=["dx","dy","angle","className","breakAll"];function AO(){return AO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},AO.apply(null,arguments)}function eq(e,t){if(e==null)return{};var r,n,a=xWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function xWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Ale=/[ \f\n\r\t\v\u2028\u2029]+/,fle=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];js(t)||(r?a=t.toString().split(""):a=t.toString().split(Ale));var s=a.map(o=>({word:o,width:tw(o,n).width})),i=r?0:tw(" ",n).width;return{wordsWithComputedWidth:s,spaceWidth:i}}catch{return null}},bWe=(e,t,r,n,a)=>{var{maxLines:s,children:i,style:o,breakAll:c}=e,u=cr(s),d=i,f=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce((I,U)=>{var{word:P,width:X}=U,H=I[I.length-1];if(H&&(n==null||a||H.width+X+r<Number(n)))H.words.push(P),H.width+=X+r;else{var Y={words:[P],width:X};I.push(Y)}return I},[])},h=f(t),p=M=>M.reduce((D,I)=>D.width>I.width?D:I);if(!u||a)return h;var g=h.length>s||p(h).width>Number(n);if(!g)return h;for(var v="…",b=M=>{var D=d.slice(0,M),I=fle({breakAll:c,style:o,children:D+v}).wordsWithComputedWidth,U=f(I),P=U.length>s||p(U).width>Number(n);return[P,U]},y=0,C=d.length-1,N=0,T;y<=C&&N<=d.length-1;){var S=Math.floor((y+C)/2),B=S-1,[w,_]=b(B),[F]=b(S);if(!w&&!F&&(y=S+1),w&&F&&(C=S-1),!w&&F){T=_;break}N++}return T||h},tq=e=>{var t=js(e)?[]:e.toString().split(Ale);return[{words:t}]},yWe=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:s,maxLines:i}=e;if((t||r)&&!Ng.isSsr){var o,c,u=fle({breakAll:s,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;o=d,c=f}else return tq(n);return bWe({breakAll:s,children:n,maxLines:i,style:a},o,c,t,r)}return tq(n)},rq="#808080",H1=k.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:a="1em",capHeight:s="0.71em",scaleToFit:i=!1,textAnchor:o="start",verticalAnchor:c="end",fill:u=rq}=e,d=eq(e,gWe),f=k.useMemo(()=>yWe({breakAll:d.breakAll,children:d.children,maxLines:d.maxLines,scaleToFit:i,style:d.style,width:d.width}),[d.breakAll,d.children,d.maxLines,i,d.style,d.width]),{dx:h,dy:p,angle:g,className:v,breakAll:b}=d,y=eq(d,vWe);if(!YA(r)||!YA(n))return null;var C=r+(cr(h)?h:0),N=n+(cr(p)?p:0),T;switch(c){case"start":T=Jj("calc(".concat(s,")"));break;case"middle":T=Jj("calc(".concat((f.length-1)/2," * -").concat(a," + (").concat(s," / 2))"));break;default:T=Jj("calc(".concat(f.length-1," * -").concat(a,")"));break}var S=[];if(i){var B=f[0].width,{width:w}=d;S.push("scale(".concat(cr(w)?w/B:1,")"))}return g&&S.push("rotate(".concat(g,", ").concat(C,", ").concat(N,")")),S.length&&(y.transform=S.join(" ")),k.createElement("text",AO({},Yn(y,!0),{ref:t,x:C,y:N,className:gn("recharts-text",v),textAnchor:o,fill:u.includes("url")?rq:u}),f.map((_,F)=>{var M=_.words.join(b?"":" ");return k.createElement("tspan",{x:C,dy:F===0?T:a,key:"".concat(M,"-").concat(F)},M)}))});H1.displayName="Text";var wWe=["offset"],EWe=["labelRef"];function nq(e,t){if(e==null)return{};var r,n,a=CWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function CWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function aq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Es(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aq(Object(r),!0).forEach(function(n){_We(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _We(e,t,r){return(t=SWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SWe(e){var t=NWe(e,"string");return typeof t=="symbol"?t:t+""}function NWe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zf(){return zf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zf.apply(null,arguments)}var kWe=e=>{var{value:t,formatter:r}=e,n=js(e.children)?t:e.children;return typeof r=="function"?r(n):n},n8=e=>e!=null&&typeof e=="function",BWe=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},TWe=(e,t,r,n)=>{var{position:a,offset:s,className:i}=e,{cx:o,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=n,g=(u+d)/2,v=BWe(f,h),b=v>=0?1:-1,y,C;a==="insideStart"?(y=f+b*s,C=p):a==="insideEnd"?(y=h-b*s,C=!p):a==="end"&&(y=h+b*s,C=p),C=v<=0?C:!C;var N=ta(o,c,g,y),T=ta(o,c,g,y+(C?1:-1)*359),S="M".concat(N.x,",").concat(N.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(C?0:1,`,
    `).concat(T.x,",").concat(T.y),B=js(e.id)?Mw("recharts-radial-line-"):e.id;return k.createElement("text",zf({},r,{dominantBaseline:"central",className:gn("recharts-radial-bar-label",i)}),k.createElement("defs",null,k.createElement("path",{id:B,d:S})),k.createElement("textPath",{xlinkHref:"#".concat(B)},t))},jWe=(e,t,r)=>{var{cx:n,cy:a,innerRadius:s,outerRadius:i,startAngle:o,endAngle:c}=e,u=(o+c)/2;if(r==="outside"){var{x:d,y:f}=ta(n,a,i+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(s+i)/2,{x:p,y:g}=ta(n,a,h,u);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},IWe=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,{x:s,y:i,width:o,height:c}=t,u=c>=0?1:-1,d=u*n,f=u>0?"end":"start",h=u>0?"start":"end",p=o>=0?1:-1,g=p*n,v=p>0?"end":"start",b=p>0?"start":"end";if(a==="top"){var y={x:s+o/2,y:i-u*n,textAnchor:"middle",verticalAnchor:f};return Es(Es({},y),r?{height:Math.max(i-r.y,0),width:o}:{})}if(a==="bottom"){var C={x:s+o/2,y:i+c+d,textAnchor:"middle",verticalAnchor:h};return Es(Es({},C),r?{height:Math.max(r.y+r.height-(i+c),0),width:o}:{})}if(a==="left"){var N={x:s-g,y:i+c/2,textAnchor:v,verticalAnchor:"middle"};return Es(Es({},N),r?{width:Math.max(N.x-r.x,0),height:c}:{})}if(a==="right"){var T={x:s+o+g,y:i+c/2,textAnchor:b,verticalAnchor:"middle"};return Es(Es({},T),r?{width:Math.max(r.x+r.width-T.x,0),height:c}:{})}var S=r?{width:o,height:c}:{};return a==="insideLeft"?Es({x:s+g,y:i+c/2,textAnchor:b,verticalAnchor:"middle"},S):a==="insideRight"?Es({x:s+o-g,y:i+c/2,textAnchor:v,verticalAnchor:"middle"},S):a==="insideTop"?Es({x:s+o/2,y:i+d,textAnchor:"middle",verticalAnchor:h},S):a==="insideBottom"?Es({x:s+o/2,y:i+c-d,textAnchor:"middle",verticalAnchor:f},S):a==="insideTopLeft"?Es({x:s+g,y:i+d,textAnchor:b,verticalAnchor:h},S):a==="insideTopRight"?Es({x:s+o-g,y:i+d,textAnchor:v,verticalAnchor:h},S):a==="insideBottomLeft"?Es({x:s+g,y:i+c-d,textAnchor:b,verticalAnchor:f},S):a==="insideBottomRight"?Es({x:s+o-g,y:i+c-d,textAnchor:v,verticalAnchor:f},S):a&&typeof a=="object"&&(cr(a.x)||Sp(a.x))&&(cr(a.y)||Sp(a.y))?Es({x:s+yl(a.x,o),y:i+yl(a.y,c),textAnchor:"end",verticalAnchor:"end"},S):Es({x:s+o/2,y:i+c/2,textAnchor:"middle",verticalAnchor:"middle"},S)},FWe=e=>"cx"in e&&cr(e.cx);function Gl(e){var{offset:t=5}=e,r=nq(e,wWe),n=Es({offset:t},r),{viewBox:a,position:s,value:i,children:o,content:c,className:u="",textBreakAll:d,labelRef:f}=n,h=sr(D1),p=qR(),g=s==="center"?p:h??p,v=a||g;if(!v||js(i)&&js(o)&&!k.isValidElement(c)&&typeof c!="function")return null;var b=Es(Es({},n),{},{viewBox:v});if(k.isValidElement(c)){var{labelRef:y}=b,C=nq(b,EWe);return k.cloneElement(c,C)}var N;if(typeof c=="function"){if(N=k.createElement(c,b),k.isValidElement(N))return N}else N=kWe(n);var T=FWe(v),S=Yn(n,!0);if(T&&(s==="insideStart"||s==="insideEnd"||s==="end"))return TWe(n,N,S,v);var B=T?jWe(v,n.offset,n.position):IWe(n,v);return k.createElement(H1,zf({ref:f,className:gn("recharts-label",u)},S,B,{breakAll:d}),N)}Gl.displayName="Label";var hle=e=>{var{cx:t,cy:r,angle:n,startAngle:a,endAngle:s,r:i,radius:o,innerRadius:c,outerRadius:u,x:d,y:f,top:h,left:p,width:g,height:v,clockWise:b,labelViewBox:y}=e;if(y)return y;if(cr(g)&&cr(v)){if(cr(d)&&cr(f))return{x:d,y:f,width:g,height:v};if(cr(h)&&cr(p))return{x:h,y:p,width:g,height:v}}if(cr(d)&&cr(f))return{x:d,y:f,width:0,height:0};if(cr(t)&&cr(r))return{cx:t,cy:r,startAngle:a||n||0,endAngle:s||n||0,innerRadius:c||0,outerRadius:u||o||i||0,clockWise:b};if(e.viewBox)return e.viewBox},OWe=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?k.createElement(Gl,zf({key:"label-implicit"},n)):YA(e)?k.createElement(Gl,zf({key:"label-implicit",value:e},n)):k.isValidElement(e)?e.type===Gl?k.cloneElement(e,Es({key:"label-implicit"},n)):k.createElement(Gl,zf({key:"label-implicit",content:e},n)):n8(e)?k.createElement(Gl,zf({key:"label-implicit",content:e},n)):e&&typeof e=="object"?k.createElement(Gl,zf({},e,{key:"label-implicit"},n)):null},DWe=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:a,labelRef:s}=t,i=hle(t),o=F2(a,Gl).map((u,d)=>k.cloneElement(u,{viewBox:r||i,key:"label-".concat(d)}));if(!n)return o;var c=OWe(t.label,r||i,s);return[c,...o]};Gl.parseViewBox=hle;Gl.renderCallByParent=DWe;var Zj={},eI={},sq;function PWe(){return sq||(sq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(eI)),eI}var tI={},iq;function RWe(){return iq||(iq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(tI)),tI}var oq;function LWe(){return oq||(oq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PWe(),r=RWe(),n=OR();function a(s){if(n.isArrayLike(s))return t.last(r.toArray(s))}e.last=a}(Zj)),Zj}var rI,lq;function MWe(){return lq||(lq=1,rI=LWe().last),rI}var UWe=MWe();const mle=wl(UWe);var QWe=["valueAccessor"],HWe=["data","dataKey","clockWise","id","textBreakAll"];function Y5(){return Y5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y5.apply(null,arguments)}function cq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function uq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cq(Object(r),!0).forEach(function(n){VWe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VWe(e,t,r){return(t=zWe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zWe(e){var t=$We(e,"string");return typeof t=="symbol"?t:t+""}function $We(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dq(e,t){if(e==null)return{};var r,n,a=GWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function GWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var KWe=e=>Array.isArray(e.value)?mle(e.value):e.value;function nm(e){var{valueAccessor:t=KWe}=e,r=dq(e,QWe),{data:n,dataKey:a,clockWise:s,id:i,textBreakAll:o}=r,c=dq(r,HWe);return!n||!n.length?null:k.createElement(As,{className:"recharts-label-list"},n.map((u,d)=>{var f=js(a)?t(u,d):Da(u&&u.payload,a),h=js(i)?{}:{id:"".concat(i,"-").concat(d)};return k.createElement(Gl,Y5({},Yn(u,!0),c,h,{parentViewBox:u.parentViewBox,value:f,textBreakAll:o,viewBox:Gl.parseViewBox(js(s)?u:uq(uq({},u),{},{clockWise:s})),key:"label-".concat(d),index:d}))}))}nm.displayName="LabelList";function qWe(e,t){return e?e===!0?k.createElement(nm,{key:"labelList-implicit",data:t}):k.isValidElement(e)||n8(e)?k.createElement(nm,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?k.createElement(nm,Y5({data:t},e,{key:"labelList-implicit"})):null:null}function WWe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,a=F2(n,nm).map((i,o)=>k.cloneElement(i,{data:t,key:"labelList-".concat(o)}));if(!r)return a;var s=qWe(e.label,t);return[s,...a]}nm.renderCallByParent=WWe;var XWe=["points","className","baseLinePoints","connectNulls"];function Zv(){return Zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zv.apply(null,arguments)}function YWe(e,t){if(e==null)return{};var r,n,a=JWe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function JWe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Aq=e=>e&&e.x===+e.x&&e.y===+e.y,ZWe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(n=>{Aq(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),Aq(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},rw=(e,t)=>{var r=ZWe(e);t&&(r=[r.reduce((a,s)=>[...a,...s],[])]);var n=r.map(a=>a.reduce((s,i,o)=>"".concat(s).concat(o===0?"M":"L").concat(i.x,",").concat(i.y),"")).join("");return r.length===1?"".concat(n,"Z"):n},eXe=(e,t,r)=>{var n=rw(e,r);return"".concat(n.slice(-1)==="Z"?n.slice(0,-1):n,"L").concat(rw(t.reverse(),r).slice(1))},ple=e=>{var{points:t,className:r,baseLinePoints:n,connectNulls:a}=e,s=YWe(e,XWe);if(!t||!t.length)return null;var i=gn("recharts-polygon",r);if(n&&n.length){var o=s.stroke&&s.stroke!=="none",c=eXe(t,n,a);return k.createElement("g",{className:i},k.createElement("path",Zv({},Yn(s,!0),{fill:c.slice(-1)==="Z"?s.fill:"none",stroke:"none",d:c})),o?k.createElement("path",Zv({},Yn(s,!0),{fill:"none",d:rw(t,a)})):null,o?k.createElement("path",Zv({},Yn(s,!0),{fill:"none",d:rw(n,a)})):null)}var u=rw(t,a);return k.createElement("path",Zv({},Yn(s,!0),{fill:u.slice(-1)==="Z"?s.fill:"none",className:i,d:u}))};function fO(){return fO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fO.apply(null,arguments)}var a8=e=>{var{cx:t,cy:r,r:n,className:a}=e,s=gn("recharts-dot",a);return t===+t&&r===+r&&n===+n?k.createElement("circle",fO({},al(e),_R(e),{className:s,cx:t,cy:r,r:n})):null},s8=e=>e.graphicalItems.polarItems,tXe=ct([Ba,Q2],jL),i8=ct([s8,Js,tXe],FL),rXe=ct([i8],OL),o8=ct([rXe,ck],DL),gle=ct([o8,Js,i8],RL),nXe=ct([o8,Js,i8],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var s,i=Da(n,(s=t.dataKey)!==null&&s!==void 0?s:a.dataKey);return{value:i,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:Da(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]}))),fq=()=>{},aXe=ct([Js,Eoe,fq,nXe,fq,In,Ba],ML),vle=ct([Js,In,o8,gle,M2,Ba,aXe],UL),xle=ct([vle,Js,Rm],HL),sXe=ct([Js,vle,xle,Ba],zL),l8=(e,t,r)=>{switch(t){case"angleAxis":return O1(e,r);case"radiusAxis":return U2(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},c8=(e,t,r)=>{switch(t){case"angleAxis":return wGe(e,r);case"radiusAxis":return EGe(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},V1=ct([l8,Rm,sXe,c8],pk),ble=ct([In,gle,R1,Ba],$L),z1=ct([In,l8,Rm,V1,xle,c8,z2,ble,Ba],Ioe);ct([In,l8,V1,c8,z2,ble,Ba],Ooe);var iXe=(e,t)=>z1(e,"angleAxis",t,!1),oXe=ct([iXe],e=>{if(e)return e.map(t=>t.coordinate)}),lXe=(e,t)=>z1(e,"radiusAxis",t,!1),cXe=ct([lXe],e=>{if(e)return e.map(t=>t.coordinate)}),uXe=["gridType","radialLines","angleAxisId","radiusAxisId","cx","cy","innerRadius","outerRadius"];function dXe(e,t){if(e==null)return{};var r,n,a=AXe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function AXe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function wh(){return wh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wh.apply(null,arguments)}function hq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function r1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hq(Object(r),!0).forEach(function(n){fXe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fXe(e,t,r){return(t=hXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hXe(e){var t=mXe(e,"string");return typeof t=="symbol"?t:t+""}function mXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pXe=(e,t,r,n)=>{var a="";return n.forEach((s,i)=>{var o=ta(t,r,e,s);i?a+="L ".concat(o.x,",").concat(o.y):a+="M ".concat(o.x,",").concat(o.y)}),a+="Z",a},gXe=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,polarAngles:s,radialLines:i}=e;if(!s||!s.length||!i)return null;var o=r1({stroke:"#ccc"},al(e));return k.createElement("g",{className:"recharts-polar-grid-angle"},s.map(c=>{var u=ta(t,r,n,c),d=ta(t,r,a,c);return k.createElement("line",wh({},o,{key:"line-".concat(c),x1:u.x,y1:u.y,x2:d.x,y2:d.y}))}))},vXe=e=>{var{cx:t,cy:r,radius:n,index:a}=e,s=r1(r1({stroke:"#ccc"},al(e)),{},{fill:"none"});return k.createElement("circle",wh({},s,{className:gn("recharts-polar-grid-concentric-circle",e.className),key:"circle-".concat(a),cx:t,cy:r,r:n}))},xXe=e=>{var{radius:t,index:r}=e,n=r1(r1({stroke:"#ccc"},al(e)),{},{fill:"none"});return k.createElement("path",wh({},n,{className:gn("recharts-polar-grid-concentric-polygon",e.className),key:"path-".concat(r),d:pXe(t,e.cx,e.cy,e.polarAngles)}))},bXe=e=>{var{polarRadius:t,gridType:r}=e;return!t||!t.length?null:k.createElement("g",{className:"recharts-polar-grid-concentric"},t.map((n,a)=>{var s=a;return r==="circle"?k.createElement(vXe,wh({key:s},e,{radius:n,index:a})):k.createElement(xXe,wh({key:s},e,{radius:n,index:a}))}))},yle=e=>{var t,r,n,a,s,i,o,c,{gridType:u="polygon",radialLines:d=!0,angleAxisId:f=0,radiusAxisId:h=0,cx:p,cy:g,innerRadius:v,outerRadius:b}=e,y=dXe(e,uXe),C=sr(D1),N=r1({cx:(t=(r=C==null?void 0:C.cx)!==null&&r!==void 0?r:p)!==null&&t!==void 0?t:0,cy:(n=(a=C==null?void 0:C.cy)!==null&&a!==void 0?a:g)!==null&&n!==void 0?n:0,innerRadius:(s=(i=C==null?void 0:C.innerRadius)!==null&&i!==void 0?i:v)!==null&&s!==void 0?s:0,outerRadius:(o=(c=C==null?void 0:C.outerRadius)!==null&&c!==void 0?c:b)!==null&&o!==void 0?o:0},y),{polarAngles:T,polarRadius:S,cx:B,cy:w,innerRadius:_,outerRadius:F}=N,M=sr(P=>oXe(P,f)),D=sr(P=>cXe(P,h)),I=Array.isArray(T)?T:M,U=Array.isArray(S)?S:D;return F<=0||I==null||U==null?null:k.createElement("g",{className:"recharts-polar-grid"},k.createElement(gXe,wh({cx:B,cy:w,innerRadius:_,outerRadius:F,gridType:u,radialLines:d},N,{polarAngles:I,polarRadius:U})),k.createElement(bXe,wh({cx:B,cy:w,innerRadius:_,outerRadius:F,gridType:u,radialLines:d},N,{polarAngles:I,polarRadius:U})))};yle.displayName="PolarGrid";var nI={},aI={},mq;function yXe(){return mq||(mq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c>s&&(s=c,a=o)}return a}e.maxBy=t}(aI)),aI}var pq;function wXe(){return pq||(pq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yXe(),r=z4(),n=MR();function a(s,i){if(s!=null)return t.maxBy(Array.from(s),n.iteratee(i??r.identity))}e.maxBy=a}(nI)),nI}var sI,gq;function EXe(){return gq||(gq=1,sI=wXe().maxBy),sI}var CXe=EXe();const _Xe=wl(CXe);var iI={},oI={},vq;function SXe(){return vq||(vq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){if(r.length===0)return;let a=r[0],s=n(a);for(let i=1;i<r.length;i++){const o=r[i],c=n(o);c<s&&(s=c,a=o)}return a}e.minBy=t}(oI)),oI}var xq;function NXe(){return xq||(xq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=SXe(),r=z4(),n=MR();function a(s,i){if(s!=null)return t.minBy(Array.from(s),n.iteratee(i??r.identity))}e.minBy=a}(iI)),iI}var lI,bq;function kXe(){return bq||(bq=1,lI=NXe().minBy),lI}var BXe=kXe();const TXe=wl(BXe);var jXe={radiusAxis:{},angleAxis:{}},wle=Hc({name:"polarAxis",initialState:jXe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:IXe,removeRadiusAxis:FXe,addAngleAxis:OXe,removeAngleAxis:DXe}=wle.actions,PXe=wle.reducer,RXe=["cx","cy","angle","axisLine"],LXe=["angle","tickFormatter","stroke","tick"];function Ww(){return Ww=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ww.apply(null,arguments)}function yq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function MA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yq(Object(r),!0).forEach(function(n){bk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bk(e,t,r){return(t=MXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MXe(e){var t=UXe(e,"string");return typeof t=="symbol"?t:t+""}function UXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ele(e,t){if(e==null)return{};var r,n,a=QXe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function QXe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Cle="radiusAxis";function HXe(e){var t=$a();return k.useEffect(()=>(t(IXe(e)),()=>{t(FXe(e))})),null}var VXe=(e,t,r,n)=>{var{coordinate:a}=e;return ta(r,n,a,t)},zXe=e=>{var t;switch(e){case"left":t="end";break;case"right":t="start";break;default:t="middle";break}return t},$Xe=(e,t,r,n)=>{var a=_Xe(n,i=>i.coordinate||0),s=TXe(n,i=>i.coordinate||0);return{cx:t,cy:r,startAngle:e,endAngle:e,innerRadius:s.coordinate||0,outerRadius:a.coordinate||0}},GXe=(e,t)=>{var{cx:r,cy:n,angle:a,axisLine:s}=e,i=Ele(e,RXe),o=t.reduce((f,h)=>[Math.min(f[0],h.coordinate),Math.max(f[1],h.coordinate)],[1/0,-1/0]),c=ta(r,n,o[0],a),u=ta(r,n,o[1],a),d=MA(MA(MA({},al(i)),{},{fill:"none"},Yn(s,!1)),{},{x1:c.x,y1:c.y,x2:u.x,y2:u.y});return k.createElement("line",Ww({className:"recharts-polar-radius-axis-line"},d))},KXe=(e,t,r)=>{var n;return k.isValidElement(e)?n=k.cloneElement(e,t):typeof e=="function"?n=e(t):n=k.createElement(H1,Ww({},t,{className:"recharts-polar-radius-axis-tick-value"}),r),n},qXe=(e,t)=>{var{angle:r,tickFormatter:n,stroke:a,tick:s}=e,i=Ele(e,LXe),o=zXe(e.orientation),c=al(i),u=Yn(s,!1),d=t.map((f,h)=>{var p=VXe(f,e.angle,e.cx,e.cy),g=MA(MA(MA(MA({textAnchor:o,transform:"rotate(".concat(90-r,", ").concat(p.x,", ").concat(p.y,")")},c),{},{stroke:"none",fill:a},u),{},{index:h},p),{},{payload:f});return k.createElement(As,Ww({className:gn("recharts-polar-radius-axis-tick",Ise(s)),key:"tick-".concat(f.coordinate)},Sg(e,f,h)),KXe(s,g,n?n(f.value,h):f.value))});return k.createElement(As,{className:"recharts-polar-radius-axis-ticks"},d)},WXe=e=>{var{radiusAxisId:t}=e,r=sr(D1),n=sr(c=>V1(c,"radiusAxis",t)),a=sr(c=>z1(c,"radiusAxis",t,!1));if(r==null||!a||!a.length)return null;var s=MA(MA(MA({},e),{},{scale:n},r),{},{radius:r.outerRadius}),{tick:i,axisLine:o}=s;return k.createElement(As,{className:gn("recharts-polar-radius-axis",Cle,s.className)},o&&GXe(s,a),i&&qXe(s,a),Gl.renderCallByParent(s,$Xe(s.angle,s.cx,s.cy,a)))};class yk extends k.PureComponent{render(){return k.createElement(k.Fragment,null,k.createElement(HXe,{domain:this.props.domain,id:this.props.radiusAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:this.props.allowDuplicatedCategory,allowDataOverflow:this.props.allowDataOverflow,reversed:this.props.reversed,includeHidden:this.props.includeHidden,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick}),k.createElement(WXe,this.props))}}bk(yk,"displayName","PolarRadiusAxis");bk(yk,"axisType",Cle);bk(yk,"defaultProps",$l);var XXe=["children"];function Eh(){return Eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Eh.apply(null,arguments)}function wq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function FA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wq(Object(r),!0).forEach(function(n){wk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wk(e,t,r){return(t=YXe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YXe(e){var t=JXe(e,"string");return typeof t=="symbol"?t:t+""}function JXe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZXe(e,t){if(e==null)return{};var r,n,a=eYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function eYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tYe=Math.PI/180,Eq=1e-5,_le="angleAxis";function rYe(e){var t=$a(),r=k.useMemo(()=>{var{children:s}=e,i=ZXe(e,XXe);return i},[e]),n=sr(s=>O1(s,r.id)),a=r===n;return k.useEffect(()=>(t(OXe(r)),()=>{t(DXe(r))}),[t,r]),a?e.children:null}var nYe=(e,t)=>{var{cx:r,cy:n,radius:a,orientation:s,tickSize:i}=t,o=i||8,c=ta(r,n,a,e.coordinate),u=ta(r,n,a+(s==="inner"?-1:1)*o,e.coordinate);return{x1:c.x,y1:c.y,x2:u.x,y2:u.y}},aYe=(e,t)=>{var r=Math.cos(-e.coordinate*tYe);return r>Eq?t==="outer"?"start":"end":r<-Eq?t==="outer"?"end":"start":"middle"},sYe=e=>{var{cx:t,cy:r,radius:n,axisLineType:a,axisLine:s,ticks:i}=e;if(!s)return null;var o=FA(FA({},al(e)),{},{fill:"none"},Yn(s,!1));if(a==="circle")return k.createElement(a8,Eh({className:"recharts-polar-angle-axis-line"},o,{cx:t,cy:r,r:n}));var c=i.map(u=>ta(t,r,n,u.coordinate));return k.createElement(ple,Eh({className:"recharts-polar-angle-axis-line"},o,{points:c}))},iYe=e=>{var{tick:t,tickProps:r,value:n}=e;return t?k.isValidElement(t)?k.cloneElement(t,r):typeof t=="function"?t(r):k.createElement(H1,Eh({},r,{className:"recharts-polar-angle-axis-tick-value"}),n):null},oYe=e=>{var{tick:t,tickLine:r,tickFormatter:n,stroke:a,ticks:s}=e,i=al(e),o=Yn(t,!1),c=FA(FA({},i),{},{fill:"none"},Yn(r,!1)),u=s.map((d,f)=>{var h=nYe(d,e),p=aYe(d,e.orientation),g=FA(FA(FA({},i),{},{textAnchor:p,stroke:"none",fill:a},o),{},{index:f,payload:d,x:h.x2,y:h.y2});return k.createElement(As,Eh({className:gn("recharts-polar-angle-axis-tick",Ise(t)),key:"tick-".concat(d.coordinate)},Sg(e,d,f)),r&&k.createElement("line",Eh({className:"recharts-polar-angle-axis-tick-line"},c,h)),k.createElement(iYe,{tick:t,tickProps:g,value:n?n(d.value,f):d.value}))});return k.createElement(As,{className:"recharts-polar-angle-axis-ticks"},u)},lYe=e=>{var{angleAxisId:t}=e,r=sr(D1),n=sr(o=>V1(o,"angleAxis",t)),a=rc(),s=sr(o=>z1(o,"angleAxis",t,a));if(r==null||!s||!s.length)return null;var i=FA(FA(FA({},e),{},{scale:n},r),{},{radius:r.outerRadius});return k.createElement(As,{className:gn("recharts-polar-angle-axis",_le,i.className)},k.createElement(sYe,Eh({},i,{ticks:s})),k.createElement(oYe,Eh({},i,{ticks:s})))};class Ek extends k.PureComponent{render(){return this.props.radius<=0?null:k.createElement(rYe,{id:this.props.angleAxisId,scale:this.props.scale,type:this.props.type,dataKey:this.props.dataKey,unit:void 0,name:this.props.name,allowDuplicatedCategory:!1,allowDataOverflow:!1,reversed:this.props.reversed,includeHidden:!1,allowDecimals:this.props.allowDecimals,tickCount:this.props.tickCount,ticks:this.props.ticks,tick:this.props.tick,domain:this.props.domain},k.createElement(lYe,this.props))}}wk(Ek,"displayName","PolarAngleAxis");wk(Ek,"axisType",_le);wk(Ek,"defaultProps",IA);function Cq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function _q(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cq(Object(r),!0).forEach(function(n){cYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cYe(e,t,r){return(t=uYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uYe(e){var t=dYe(e,"string");return typeof t=="symbol"?t:t+""}function dYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AYe=(e,t)=>t,u8=ct([s8,AYe],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),fYe=[],d8=(e,t,r)=>(r==null?void 0:r.length)===0?fYe:r,Sle=ct([ck,u8,d8],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(s=>_q(_q({},t.presentationProps),s.props))),a!=null)return a}}),hYe=ct([Sle,u8,d8],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var s,i=Da(n,t.nameKey,t.name),o;return r!=null&&(s=r[a])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?o=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?o=n.fill:o=t.fill,{value:T1(i,t.dataKey),color:o,payload:n,type:t.legendType}})}),mYe=ct([Sle,u8,d8,ki],(e,t,r,n)=>{if(!(t==null||e==null))return lJe({offset:n,pieSettings:t,displayedData:e,cells:r})}),cI={},Sq;function pYe(){return Sq||(Sq=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const s=r[Symbol.toStringTag];return s==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${s}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t}(cI)),cI}var uI,Nq;function gYe(){return Nq||(Nq=1,uI=pYe().isPlainObject),uI}var vYe=gYe();const xYe=wl(vYe);function J5(){return J5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},J5.apply(null,arguments)}var kq=(e,t,r,n,a)=>{var s=r-n,i;return i="M ".concat(e,",").concat(t),i+="L ".concat(e+r,",").concat(t),i+="L ".concat(e+r-s/2,",").concat(t+a),i+="L ".concat(e+r-s/2-n,",").concat(t+a),i+="L ".concat(e,",").concat(t," Z"),i},bYe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},yYe=e=>{var t=Uu(e,bYe),r=k.useRef(),[n,a]=k.useState(-1);k.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var b=r.current.getTotalLength();b&&a(b)}catch{}},[]);var{x:s,y:i,upperWidth:o,lowerWidth:c,height:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isUpdateAnimationActive:g}=t;if(s!==+s||i!==+i||o!==+o||c!==+c||u!==+u||o===0&&c===0||u===0)return null;var v=gn("recharts-trapezoid",d);return g?k.createElement(P5,{canBegin:n>0,from:{upperWidth:0,lowerWidth:0,height:u,x:s,y:i},to:{upperWidth:o,lowerWidth:c,height:u,x:s,y:i},duration:h,animationEasing:f,isActive:g},b=>{var{upperWidth:y,lowerWidth:C,height:N,x:T,y:S}=b;return k.createElement(P5,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:h,easing:f},k.createElement("path",J5({},Yn(t,!0),{className:v,d:kq(T,S,y,C,N),ref:r})))}):k.createElement("g",null,k.createElement("path",J5({},Yn(t,!0),{className:v,d:kq(s,i,o,c,u)})))},wYe=["option","shapeType","propTransformer","activeClassName","isActive"];function EYe(e,t){if(e==null)return{};var r,n,a=CYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function CYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Bq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Z5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Bq(Object(r),!0).forEach(function(n){_Ye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _Ye(e,t,r){return(t=SYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SYe(e){var t=NYe(e,"string");return typeof t=="symbol"?t:t+""}function NYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kYe(e,t){return Z5(Z5({},t),e)}function BYe(e,t){return e==="symbols"}function Tq(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return k.createElement(Jse,r);case"trapezoid":return k.createElement(yYe,r);case"sector":return k.createElement(tie,r);case"symbols":if(BYe(t))return k.createElement(jR,r);break;default:return null}}function TYe(e){return k.isValidElement(e)?e.props:e}function Nle(e){var{option:t,shapeType:r,propTransformer:n=kYe,activeClassName:a="recharts-active-shape",isActive:s}=e,i=EYe(e,wYe),o;if(k.isValidElement(t))o=k.cloneElement(t,Z5(Z5({},i),TYe(t)));else if(typeof t=="function")o=t(i);else if(xYe(t)&&typeof t!="boolean"){var c=n(t,i);o=k.createElement(Tq,{shapeType:r,elementProps:c})}else{var u=i;o=k.createElement(Tq,{shapeType:r,elementProps:u})}return s?k.createElement(As,{className:a},o):o}var A8=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(Uoe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}},f8=e=>{var t=$a();return(r,n)=>a=>{e==null||e(r,n,a),t(vKe())}},h8=(e,t)=>{var r=$a();return(n,a)=>s=>{e==null||e(n,a,s),r(xKe({activeIndex:String(a),activeDataKey:t,activeCoordinate:n.tooltipPosition}))}};function m8(e){var{fn:t,args:r}=e,n=$a(),a=rc();return k.useEffect(()=>{if(!a){var s=t(r);return n(mKe(s)),()=>{n(pKe(s))}}},[t,r,n,a]),null}var kle=()=>{};function jYe(e){var{legendPayload:t}=e,r=$a(),n=rc();return k.useEffect(()=>n?kle:(r(Hse(t)),()=>{r(Vse(t))}),[r,n,t]),null}function Ble(e){var{legendPayload:t}=e,r=$a(),n=sr(In);return k.useEffect(()=>n!=="centric"&&n!=="radial"?kle:(r(Hse(t)),()=>{r(Vse(t))}),[r,n,t]),null}function p8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=k.useRef(Mw(t)),n=k.useRef(e);return n.current!==e&&(r.current=Mw(t),n.current=e),r.current}var dI,IYe=()=>{var[e]=k.useState(()=>Mw("uid-"));return e},FYe=(dI=tfe.useId)!==null&&dI!==void 0?dI:IYe;function OYe(e,t){var r=FYe();return t||(e?"".concat(e,"-").concat(r):r)}var DYe=k.createContext(void 0),g8=e=>{var{id:t,type:r,children:n}=e,a=OYe("recharts-".concat(r),t);return k.createElement(DYe.Provider,{value:a},n(a))},PYe={cartesianItems:[],polarItems:[]},Tle=Hc({name:"graphicalItems",initialState:PYe,reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,a=ih(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},removeCartesianGraphicalItem(e,t){var r=ih(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=ih(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addCartesianGraphicalItem:RYe,replaceCartesianGraphicalItem:LYe,removeCartesianGraphicalItem:MYe,addPolarGraphicalItem:UYe,removePolarGraphicalItem:QYe}=Tle.actions,HYe=Tle.reducer;function VYe(e){var t=$a(),r=k.useRef(null);return k.useEffect(()=>{r.current===null?t(RYe(e)):r.current!==e&&t(LYe({prev:r.current,next:e})),r.current=e},[t,e]),k.useEffect(()=>()=>{r.current&&(t(MYe(r.current)),r.current=null)},[t]),null}function jle(e){var t=$a();return k.useEffect(()=>(t(UYe(e)),()=>{t(QYe(e))}),[t,e]),null}function zYe(){}var $Ye={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},jq={t:0},AI={t:1};function v8(e){var t=Uu(e,$Ye),{isActive:r,canBegin:n,duration:a,easing:s,begin:i,onAnimationEnd:o,onAnimationStart:c,children:u}=t,d=Yse("JavascriptAnimate",t.animationManager),[f,h]=k.useState(r?jq:AI),p=k.useRef(null);return k.useEffect(()=>{r||h(AI)},[r]),k.useEffect(()=>{if(!r||!n)return zYe;var g=Xse(jq,AI,qse(s),a,h,d.getTimeoutController()),v=()=>{p.current=g()};return d.start([c,i,v,a,o]),()=>{d.stop(),p.current&&p.current(),o()}},[r,n,a,s,i,c,o,d]),u(f.t)}var GYe=["onMouseEnter","onClick","onMouseLeave"],KYe=["id"],qYe=["id"];function x8(e,t){if(e==null)return{};var r,n,a=WYe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function WYe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Iq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ns(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iq(Object(r),!0).forEach(function(n){XYe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XYe(e,t,r){return(t=YYe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YYe(e){var t=JYe(e,"string");return typeof t=="symbol"?t:t+""}function JYe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ch(){return Ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ch.apply(null,arguments)}function ZYe(e){var t=k.useMemo(()=>F2(e.children,K2),[e.children]),r=sr(n=>hYe(n,e.id,t));return r==null?null:k.createElement(Ble,{legendPayload:r})}function eJe(e){var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:s,fill:i,name:o,hide:c,tooltipType:u}=e;return{dataDefinedOnItem:n==null?void 0:n.map(d=>d.tooltipPayload),positions:n==null?void 0:n.map(d=>d.tooltipPosition),settings:{stroke:a,strokeWidth:s,fill:i,dataKey:t,nameKey:r,name:T1(o,t),hide:c,type:u,color:i,unit:""}}}var tJe=(e,t)=>e>t?"start":e<t?"end":"middle",rJe=(e,t,r)=>typeof t=="function"?t(e):yl(t,r,r*.8),nJe=(e,t,r)=>{var{top:n,left:a,width:s,height:i}=t,o=jse(s,i),c=a+yl(e.cx,s,s/2),u=n+yl(e.cy,i,i/2),d=yl(e.innerRadius,o,0),f=rJe(r,e.outerRadius,o),h=e.maxRadius||Math.sqrt(s*s+i*i)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},aJe=(e,t)=>{var r=Xi(t-e),n=Math.min(Math.abs(t-e),360);return r*n},sJe=(e,t)=>{if(k.isValidElement(e))return k.cloneElement(e,t);if(typeof e=="function")return e(t);var r=gn("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return k.createElement($se,Ch({},t,{type:"linear",className:r}))},iJe=(e,t,r)=>{if(k.isValidElement(e))return k.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),k.isValidElement(n)))return n;var a=gn("recharts-pie-label-text",typeof e!="boolean"&&typeof e!="function"?e.className:"");return k.createElement(H1,Ch({},t,{alignmentBaseline:"middle",className:a}),n)};function oJe(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:s,dataKey:i}=r;if(!n||!a||!t)return null;var o=al(r),c=Yn(a,!1),u=Yn(s,!1),d=typeof a=="object"&&"offsetRadius"in a&&a.offsetRadius||20,f=t.map((h,p)=>{var g=(h.startAngle+h.endAngle)/2,v=ta(h.cx,h.cy,h.outerRadius+d,g),b=Ns(Ns(Ns(Ns({},o),h),{},{stroke:"none"},c),{},{index:p,textAnchor:tJe(v.x,h.cx)},v),y=Ns(Ns(Ns(Ns({},o),h),{},{fill:"none",stroke:h.fill},u),{},{index:p,points:[ta(h.cx,h.cy,h.outerRadius,g),v],key:"line"});return k.createElement(As,{key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},s&&sJe(s,y),iJe(a,b,Da(h,i)))});return k.createElement(As,{className:"recharts-pie-labels"},f)}function Ile(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,showLabels:s}=e,i=sr(Cm),{onMouseEnter:o,onClick:c,onMouseLeave:u}=a,d=x8(a,GYe),f=A8(o,a.dataKey),h=f8(u),p=h8(c,a.dataKey);return t==null?null:k.createElement(k.Fragment,null,t.map((g,v)=>{if((g==null?void 0:g.startAngle)===0&&(g==null?void 0:g.endAngle)===0&&t.length!==1)return null;var b=r&&String(v)===i,y=i?n:null,C=b?r:y,N=Ns(Ns({},g),{},{stroke:g.stroke,tabIndex:-1,[Rse]:v,[Lse]:a.dataKey});return k.createElement(As,Ch({tabIndex:-1,className:"recharts-pie-sector"},Sg(d,g,v),{onMouseEnter:f(g,v),onMouseLeave:h(g,v),onClick:p(g,v),key:"sector-".concat(g==null?void 0:g.startAngle,"-").concat(g==null?void 0:g.endAngle,"-").concat(g.midAngle,"-").concat(v)}),k.createElement(Nle,Ch({option:C,isActive:b,shapeType:"sector"},N)))}),k.createElement(oJe,{sectors:t,props:a,showLabels:s}))}function lJe(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:s}=e,{cornerRadius:i,startAngle:o,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),p=aJe(o,c),g=Math.abs(p),v=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,b=n.filter(B=>Da(B,u,0)!==0).length,y=(g>=360?b:b-1)*v,C=g-b*h-y,N=n.reduce((B,w)=>{var _=Da(w,u,0);return B+(cr(_)?_:0)},0),T;if(N>0){var S;T=n.map((B,w)=>{var _=Da(B,u,0),F=Da(B,d,w),M=nJe(r,s,B),D=(cr(_)?_:0)/N,I,U=Ns(Ns({},B),a&&a[w]&&a[w].props);w?I=S.endAngle+Xi(p)*v*(_!==0?1:0):I=o;var P=I+Xi(p)*((_!==0?h:0)+D*C),X=(I+P)/2,H=(M.innerRadius+M.outerRadius)/2,Y=[{name:F,value:_,payload:U,dataKey:u,type:f}],V=ta(M.cx,M.cy,H,X);return S=Ns(Ns(Ns(Ns({},r.presentationProps),{},{percent:D,cornerRadius:i,name:F,tooltipPayload:Y,midAngle:X,middleRadius:H,tooltipPosition:V},U),M),{},{value:Da(B,u),startAngle:I,endAngle:P,payload:U,paddingAngle:Xi(p)*v}),S})}return T}function cJe(e){var{props:t,previousSectorsRef:r}=e,{sectors:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,activeShape:c,inactiveShape:u,onAnimationStart:d,onAnimationEnd:f}=t,h=p8(t,"recharts-pie-"),p=r.current,[g,v]=k.useState(!0),b=k.useCallback(()=>{typeof f=="function"&&f(),v(!1)},[f]),y=k.useCallback(()=>{typeof d=="function"&&d(),v(!0)},[d]);return k.createElement(v8,{begin:s,duration:i,isActive:a,easing:o,onAnimationStart:y,onAnimationEnd:b,key:h},C=>{var N=[],T=n&&n[0],S=T.startAngle;return n.forEach((B,w)=>{var _=p&&p[w],F=w>0?Em(B,"paddingAngle",0):0;if(_){var M=Yv(_.endAngle-_.startAngle,B.endAngle-B.startAngle),D=Ns(Ns({},B),{},{startAngle:S+F,endAngle:S+M(C)+F});N.push(D),S=D.endAngle}else{var{endAngle:I,startAngle:U}=B,P=Yv(0,I-U),X=P(C),H=Ns(Ns({},B),{},{startAngle:S+F,endAngle:S+X+F});N.push(H),S=H.endAngle}}),r.current=N,k.createElement(As,null,k.createElement(Ile,{sectors:N,activeShape:c,inactiveShape:u,allOtherPieProps:t,showLabels:!g}))})}function uJe(e){var{sectors:t,isAnimationActive:r,activeShape:n,inactiveShape:a}=e,s=k.useRef(null),i=s.current;return r&&t&&t.length&&(!i||i!==t)?k.createElement(cJe,{props:e,previousSectorsRef:s}):k.createElement(Ile,{sectors:t,activeShape:n,inactiveShape:a,allOtherPieProps:e,showLabels:!0})}function dJe(e){var{hide:t,className:r,rootTabIndex:n}=e,a=gn("recharts-pie",r);return t?null:k.createElement(As,{tabIndex:n,className:a},k.createElement(uJe,e))}var AJe={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!Ng.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function fJe(e){var{id:t}=e,r=x8(e,KYe),n=k.useMemo(()=>F2(e.children,K2),[e.children]),a=sr(s=>mYe(s,t,n));return k.createElement(k.Fragment,null,k.createElement(m8,{fn:eJe,args:Ns(Ns({},e),{},{sectors:a})}),k.createElement(dJe,Ch({},r,{sectors:a})))}function Fle(e){var t=Uu(e,AJe),{id:r}=t,n=x8(t,qYe),a=al(n);return k.createElement(g8,{id:r,type:"pie"},s=>k.createElement(k.Fragment,null,k.createElement(jle,{type:"pie",id:s,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a}),k.createElement(ZYe,Ch({},n,{id:s})),k.createElement(fJe,Ch({},n,{id:s})),n.children))}Fle.displayName="Pie";var hJe=ct([ki],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),mJe=ct([hJe,Ih,Fh],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Ole=()=>sr(mJe),pJe=()=>sr(sqe);function Fq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Oq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fq(Object(r),!0).forEach(function(n){gJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gJe(e,t,r){return(t=vJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vJe(e){var t=xJe(e,"string");return typeof t=="symbol"?t:t+""}function xJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var bJe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:s}=e;if(a===!1||t.x==null||t.y==null)return null;var i=Oq(Oq({index:r,dataKey:s,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Yn(a,!1)),_R(a)),o;return k.isValidElement(a)?o=k.cloneElement(a,i):typeof a=="function"?o=a(i):o=k.createElement(a8,i),k.createElement(As,{className:"recharts-active-dot"},o)};function yJe(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a}=e,s=sr(Cm),i=pJe();if(t==null||i==null)return null;var o=t.find(c=>i.includes(c.payload));return js(o)?null:bJe({point:o,childIndex:Number(s),mainColor:r,dataKey:a,activeDot:n})}function Dq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dq(Object(r),!0).forEach(function(n){wJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wJe(e,t,r){return(t=EJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EJe(e){var t=CJe(e,"string");return typeof t=="symbol"?t:t+""}function CJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dle=(e,t)=>V1(e,"radiusAxis",t),_Je=ct([Dle],e=>{if(e!=null)return{scale:e}}),SJe=ct([U2,Dle],(e,t)=>{if(!(e==null||t==null))return eN(eN({},e),{},{scale:t})}),NJe=(e,t,r,n)=>z1(e,"radiusAxis",t,n),Ple=(e,t,r)=>O1(e,r),Rle=(e,t,r)=>V1(e,"angleAxis",r),kJe=ct([Ple,Rle],(e,t)=>{if(!(e==null||t==null))return eN(eN({},e),{},{scale:t})}),BJe=(e,t,r,n)=>z1(e,"angleAxis",r,n),TJe=ct([Ple,Rle,D1],(e,t,r)=>{if(!(r==null||t==null))return{scale:t,type:e.type,dataKey:e.dataKey,cx:r.cx,cy:r.cy}}),jJe=(e,t,r,n,a)=>a,IJe=ct([In,SJe,NJe,kJe,BJe],(e,t,r,n,a)=>Im(e,"radiusAxis")?Hw(t,r,!1):Hw(n,a,!1)),FJe=ct([s8,jJe],(e,t)=>{if(e.some(r=>r.type==="radar"&&t===r.dataKey))return t}),OJe=ct([_Je,TJe,ck,FJe,IJe],(e,t,r,n,a)=>{var{chartData:s,dataStartIndex:i,dataEndIndex:o}=r;if(!(e==null||t==null||s==null||a==null||n==null)){var c=s.slice(i,o+1);return VJe({radiusAxis:e,angleAxis:t,displayedData:c,dataKey:n,bandSize:a})}}),DJe=["id"];function PJe(e,t){if(e==null)return{};var r,n,a=RJe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function RJe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Pq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pq(Object(r),!0).forEach(function(n){b8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function b8(e,t,r){return(t=LJe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LJe(e){var t=MJe(e,"string");return typeof t=="symbol"?t:t+""}function MJe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n1.apply(null,arguments)}function y8(e,t){return e&&e!=="none"?e:t}var UJe=e=>{var{dataKey:t,name:r,stroke:n,fill:a,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:y8(n,a),value:T1(r,t),payload:e}]};function QJe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,tooltipType:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,nameKey:void 0,dataKey:t,name:T1(s,t),hide:i,type:o,color:y8(r,a),unit:""}}}function HJe(e,t){var r;return k.isValidElement(e)?r=k.cloneElement(e,t):typeof e=="function"?r=e(t):r=k.createElement(a8,n1({},t,{className:gn("recharts-radar-dot",typeof e!="boolean"?e.className:"")})),r}function VJe(e){var{radiusAxis:t,angleAxis:r,displayedData:n,dataKey:a,bandSize:s}=e,{cx:i,cy:o}=r,c=!1,u=[],d=r.type!=="number"?s??0:0;n.forEach((h,p)=>{var g=Da(h,r.dataKey,p),v=Da(h,a),b=r.scale(g)+d,y=Array.isArray(v)?mle(v):v,C=js(y)?void 0:t.scale(y);Array.isArray(v)&&v.length>=2&&(c=!0),u.push(gl(gl({},ta(i,o,C,b)),{},{name:g,value:v,cx:i,cy:o,radius:C,angle:b,payload:h}))});var f=[];return c&&u.forEach(h=>{if(Array.isArray(h.value)){var p=h.value[0],g=js(p)?void 0:t.scale(p);f.push(gl(gl({},h),{},{radius:g},ta(i,o,g,h.angle)))}else f.push(h)}),{points:u,isRange:c,baseLinePoints:f}}function zJe(e){var{points:t,props:r}=e,{dot:n,dataKey:a}=r;if(!n)return null;var{id:s}=r,i=PJe(r,DJe),o=al(i),c=Yn(n,!0),u=t.map((d,f)=>{var h=gl(gl(gl({key:"dot-".concat(f),r:3},o),c),{},{dataKey:a,cx:d.x,cy:d.y,index:f,payload:d});return HJe(n,h)});return k.createElement(As,{className:"recharts-radar-dots"},u)}function Lle(e){var{points:t,props:r,showLabels:n}=e;if(t==null)return null;var{shape:a,isRange:s,baseLinePoints:i,connectNulls:o}=r,c=f=>{var{onMouseEnter:h}=r;h&&h(r,f)},u=f=>{var{onMouseLeave:h}=r;h&&h(r,f)},d;return k.isValidElement(a)?d=k.cloneElement(a,gl(gl({},r),{},{points:t})):typeof a=="function"?d=a(gl(gl({},r),{},{points:t})):d=k.createElement(ple,n1({},Yn(r,!0),{onMouseEnter:c,onMouseLeave:u,points:t,baseLinePoints:s?i:null,connectNulls:o})),k.createElement(As,{className:"recharts-radar-polygon"},d,k.createElement(zJe,{props:r,points:t}),n&&nm.renderCallByParent(r,t))}function $Je(e){var{props:t,previousPointsRef:r}=e,{points:n,isAnimationActive:a,animationBegin:s,animationDuration:i,animationEasing:o,onAnimationEnd:c,onAnimationStart:u}=t,d=r.current,f=p8(t,"recharts-radar-"),[h,p]=k.useState(!0),g=k.useCallback(()=>{typeof c=="function"&&c(),p(!1)},[c]),v=k.useCallback(()=>{typeof u=="function"&&u(),p(!0)},[u]);return k.createElement(v8,{begin:s,duration:i,isActive:a,easing:o,key:"radar-".concat(f),onAnimationEnd:g,onAnimationStart:v},b=>{var y=d&&d.length/n.length,C=b===1?n:n.map((N,T)=>{var S=d&&d[Math.floor(T*y)];if(S){var B=Yv(S.x,N.x),w=Yv(S.y,N.y);return gl(gl({},N),{},{x:B(b),y:w(b)})}var _=Yv(N.cx,N.x),F=Yv(N.cy,N.y);return gl(gl({},N),{},{x:_(b),y:F(b)})});return b>0&&(r.current=C),k.createElement(Lle,{points:C,props:t,showLabels:!h})})}function GJe(e){var{points:t,isAnimationActive:r,isRange:n}=e,a=k.useRef(void 0),s=a.current;return r&&t&&t.length&&!n&&(!s||s!==t)?k.createElement($Je,{props:e,previousPointsRef:a}):k.createElement(Lle,{points:t,props:e,showLabels:!0})}var KJe={angleAxisId:0,radiusAxisId:0,hide:!1,activeDot:!0,dot:!1,legendType:"rect",isAnimationActive:!Ng.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"};class qJe extends k.PureComponent{render(){var{hide:t,className:r,points:n}=this.props;if(t)return null;var a=gn("recharts-radar",r);return k.createElement(k.Fragment,null,k.createElement(As,{className:a},k.createElement(GJe,this.props)),k.createElement(yJe,{points:n,mainColor:y8(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}function WJe(e){var t=rc(),r=sr(n=>OJe(n,e.radiusAxisId,e.angleAxisId,t,e.dataKey));return k.createElement(qJe,n1({},e,{points:r==null?void 0:r.points,baseLinePoints:r==null?void 0:r.baseLinePoints,isRange:r==null?void 0:r.isRange}))}class w8 extends k.PureComponent{render(){return k.createElement(g8,{id:this.props.id,type:"radar"},t=>k.createElement(k.Fragment,null,k.createElement(jle,{type:"radar",id:t,data:void 0,dataKey:this.props.dataKey,hide:this.props.hide,angleAxisId:this.props.angleAxisId,radiusAxisId:this.props.radiusAxisId}),k.createElement(Ble,{legendPayload:UJe(this.props)}),k.createElement(m8,{fn:QJe,args:this.props}),k.createElement(WJe,n1({},this.props,{id:t}))))}}b8(w8,"displayName","Radar");b8(w8,"defaultProps",KJe);var XJe="Invariant failed";function YJe(e,t){throw new Error(XJe)}var JJe=["x","y"];function hO(){return hO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hO.apply(null,arguments)}function Rq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Rq(Object(r),!0).forEach(function(n){ZJe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZJe(e,t,r){return(t=eZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eZe(e){var t=tZe(e,"string");return typeof t=="symbol"?t:t+""}function tZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rZe(e,t){if(e==null)return{};var r,n,a=nZe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function aZe(e,t){var{x:r,y:n}=e,a=rZe(e,JJe),s="".concat(r),i=parseInt(s,10),o="".concat(n),c=parseInt(o,10),u="".concat(t.height||a.height),d=parseInt(u,10),f="".concat(t.width||a.width),h=parseInt(f,10);return Wb(Wb(Wb(Wb(Wb({},t),a),i?{x:i}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function Mle(e){return k.createElement(Nle,hO({shapeType:"rectangle",propTransformer:aZe,activeClassName:"recharts-active-bar"},e))}var sZe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(cr(t))return t;var s=cr(n)||js(n);return s?t(n,a):(s||YJe(),r)}},iZe={},Ule=Hc({name:"errorBars",initialState:iZe,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}}),{addErrorBar:lft,removeErrorBar:cft}=Ule.actions,oZe=Ule.reducer,lZe=["children"];function cZe(e,t){if(e==null)return{};var r,n,a=uZe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function uZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var dZe={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},AZe=k.createContext(dZe);function fZe(e){var{children:t}=e,r=cZe(e,lZe);return k.createElement(AZe.Provider,{value:r},t)}function Qle(e,t){var r,n,a=sr(u=>Dh(u,e)),s=sr(u=>Pm(u,t)),i=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:Ec.allowDataOverflow,o=(n=s==null?void 0:s.allowDataOverflow)!==null&&n!==void 0?n:Cc.allowDataOverflow,c=i||o;return{needClip:c,needClipX:i,needClipY:o}}function hZe(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Ole(),{needClipX:s,needClipY:i,needClip:o}=Qle(t,r);if(!o)return null;var{x:c,y:u,width:d,height:f}=a;return k.createElement("clipPath",{id:"clipPath-".concat(n)},k.createElement("rect",{x:s?c:c-d/2,y:i?u:u-f/2,width:s?d:d*2,height:i?f:f*2}))}var mZe=["onMouseEnter","onMouseLeave","onClick"],pZe=["value","background","tooltipPosition"],gZe=["id"],vZe=["onMouseEnter","onClick","onMouseLeave"];function a1(){return a1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},a1.apply(null,arguments)}function Lq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lq(Object(r),!0).forEach(function(n){xZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xZe(e,t,r){return(t=bZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bZe(e){var t=yZe(e,"string");return typeof t=="symbol"?t:t+""}function yZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tN(e,t){if(e==null)return{};var r,n,a=wZe(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function wZe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var EZe=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:s}=e;return[{inactive:s,dataKey:t,type:a,color:n,value:T1(r,t),payload:e}]};function CZe(e){var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:s,hide:i,unit:o}=e;return{dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:T1(s,t),hide:i,type:e.tooltipType,color:e.fill,unit:o}}}function _Ze(e){var t=sr(Cm),{data:r,dataKey:n,background:a,allOtherBarProps:s}=e,{onMouseEnter:i,onMouseLeave:o,onClick:c}=s,u=tN(s,mZe),d=A8(i,n),f=f8(o),h=h8(c,n);if(!a||r==null)return null;var p=Yn(a,!1);return k.createElement(k.Fragment,null,r.map((g,v)=>{var{value:b,background:y,tooltipPosition:C}=g,N=tN(g,pZe);if(!y)return null;var T=d(g,v),S=f(g,v),B=h(g,v),w=Go(Go(Go(Go(Go({option:a,isActive:String(v)===t},N),{},{fill:"#eee"},y),p),Sg(u,g,v)),{},{onMouseEnter:T,onMouseLeave:S,onClick:B,dataKey:n,index:v,className:"recharts-bar-background-rectangle"});return k.createElement(Mle,a1({key:"background-bar-".concat(v)},w))}))}function Hle(e){var{data:t,props:r,showLabels:n}=e,a=al(r),{id:s}=a,i=tN(a,gZe),{shape:o,dataKey:c,activeBar:u}=r,d=sr(Cm),f=sr(Zoe),{onMouseEnter:h,onClick:p,onMouseLeave:g}=r,v=tN(r,vZe),b=A8(h,c),y=f8(g),C=h8(p,c);return t?k.createElement(k.Fragment,null,t.map((N,T)=>{var S=u&&String(T)===d&&(f==null||c===f),B=S?u:o,w=Go(Go(Go({},i),N),{},{isActive:S,option:B,index:T,dataKey:c});return k.createElement(As,a1({className:"recharts-bar-rectangle"},Sg(v,N,T),{onMouseEnter:b(N,T),onMouseLeave:y(N,T),onClick:C(N,T),key:"rectangle-".concat(N==null?void 0:N.x,"-").concat(N==null?void 0:N.y,"-").concat(N==null?void 0:N.value,"-").concat(T)}),k.createElement(Mle,w))}),n&&nm.renderCallByParent(r,t)):null}function SZe(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:s,animationBegin:i,animationDuration:o,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=p8(t,"recharts-bar-"),[p,g]=k.useState(!1),v=k.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),b=k.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return k.createElement(v8,{begin:i,duration:o,isActive:s,easing:c,onAnimationEnd:v,onAnimationStart:b,key:h},y=>{var C=y===1?n:n==null?void 0:n.map((N,T)=>{var S=f&&f[T];if(S)return Go(Go({},N),{},{x:Ev(S.x,N.x,y),y:Ev(S.y,N.y,y),width:Ev(S.width,N.width,y),height:Ev(S.height,N.height,y)});if(a==="horizontal"){var B=Ev(0,N.height,y);return Go(Go({},N),{},{y:N.y+N.height-B,height:B})}var w=Ev(0,N.width,y);return Go(Go({},N),{},{width:w})});return y>0&&(r.current=C??null),C==null?null:k.createElement(As,null,k.createElement(Hle,{props:t,data:C,showLabels:!p}))})}function NZe(e){var{data:t,isAnimationActive:r}=e,n=k.useRef(null);return r&&t&&t.length&&(n.current==null||n.current!==t)?k.createElement(SZe,{previousRectanglesRef:n,props:e}):k.createElement(Hle,{props:e,data:t,showLabels:!0})}var Vle=0,kZe=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:Da(e,t)}};class BZe extends k.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:s,yAxisId:i,needClip:o,background:c,id:u}=this.props;if(t)return null;var d=gn("recharts-bar",a),f=u;return k.createElement(As,{className:d,id:u},o&&k.createElement("defs",null,k.createElement(hZe,{clipPathId:f,xAxisId:s,yAxisId:i})),k.createElement(As,{className:"recharts-bar-rectangles",clipPath:o?"url(#clipPath-".concat(f,")"):void 0},k.createElement(_Ze,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),k.createElement(NZe,this.props)),this.props.children)}}var TZe={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",hide:!1,isAnimationActive:!Ng.isSsr,legendType:"rect",minPointSize:Vle,xAxisId:0,yAxisId:0};function jZe(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Qle(t,r),h=YR(),p=rc(),g=F2(e.children,K2),v=sr(C=>aet(C,t,r,p,e.id,g));if(h!=="vertical"&&h!=="horizontal")return null;var b,y=v==null?void 0:v[0];return y==null||y.height==null||y.width==null?b=0:b=h==="vertical"?y.height/2:y.width/2,k.createElement(fZe,{xAxisId:t,yAxisId:r,data:v,dataPointFormatter:kZe,errorBarOffset:b},k.createElement(BZe,a1({},e,{layout:h,needClip:f,data:v,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:s,activeBar:i,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function IZe(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:s,xAxis:i,yAxis:o,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p}=e,g=t==="horizontal"?o:i,v=d?g.scale.domain():null,b=NQe({numericAxis:g});return f.map((y,C)=>{var N,T,S,B,w,_;d?N=yQe(d[C],v):(N=Da(y,r),Array.isArray(N)||(N=[b,N]));var F=sZe(n,Vle)(N[1],C);if(t==="horizontal"){var M,[D,I]=[o.scale(N[0]),o.scale(N[1])];T=oG({axis:i,ticks:c,bandSize:s,offset:a.offset,entry:y,index:C}),S=(M=I??D)!==null&&M!==void 0?M:void 0,B=a.size;var U=D-I;if(w=Rc(U)?0:U,_={x:T,y:h.top,width:B,height:h.height},Math.abs(F)>0&&Math.abs(w)<Math.abs(F)){var P=Xi(w||F)*(Math.abs(F)-Math.abs(w));S-=P,w+=P}}else{var[X,H]=[i.scale(N[0]),i.scale(N[1])];if(T=X,S=oG({axis:o,ticks:u,bandSize:s,offset:a.offset,entry:y,index:C}),B=H-X,w=a.size,_={x:h.left,y:S,width:h.width,height:w},Math.abs(F)>0&&Math.abs(B)<Math.abs(F)){var Y=Xi(B||F)*(Math.abs(F)-Math.abs(B));B+=Y}}if(T==null||S==null||B==null||w==null)return null;var V=Go(Go({},y),{},{x:T,y:S,width:B,height:w,value:d?N:N[1],payload:y,background:_,tooltipPosition:{x:T+B/2,y:S+w/2}},p&&p[C]&&p[C].props);return V}).filter(Boolean)}function rN(e){var t=Uu(e,TZe),r=rc();return k.createElement(g8,{id:t.id,type:"bar"},n=>k.createElement(k.Fragment,null,k.createElement(jYe,{legendPayload:EZe(t)}),k.createElement(m8,{fn:CZe,args:t}),k.createElement(VYe,{type:"bar",id:n,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:SQe(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:r}),k.createElement(jZe,a1({},t,{id:n}))))}rN.displayName="Bar";function Mq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function c_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mq(Object(r),!0).forEach(function(n){FZe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FZe(e,t,r){return(t=OZe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OZe(e){var t=DZe(e,"string");return typeof t=="symbol"?t:t+""}function DZe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PZe=(e,t)=>t,RZe=(e,t,r)=>r,LZe=(e,t,r,n)=>n,MZe=(e,t,r,n,a)=>a,q2=ct([IL,MZe],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),UZe=ct([q2],e=>e==null?void 0:e.maxBarSize),QZe=(e,t,r,n,a,s)=>s,Uq=(e,t,r)=>{var n=r??e;if(!js(n))return yl(n,t,0)},HZe=ct([In,IL,PZe,RZe,LZe],(e,t,r,n,a)=>t.filter(s=>e==="horizontal"?s.xAxisId===r:s.yAxisId===n).filter(s=>s.isPanorama===a).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),VZe=(e,t,r,n)=>{var a=In(e);return a==="horizontal"?oO(e,"yAxis",r,n):oO(e,"xAxis",t,n)},zZe=(e,t,r)=>{var n=In(e);return n==="horizontal"?kK(e,"xAxis",t):kK(e,"yAxis",r)},$Ze=(e,t,r)=>{var n={},a=e.filter(fk),s=e.filter(u=>u.stackId==null),i=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),o=Object.entries(i).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),p=Uq(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),c=s.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=Uq(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...o,...c]},GZe=ct([HZe,pGe,zZe],$Ze),KZe=(e,t,r,n,a)=>{var s,i,o=q2(e,t,r,n,a);if(o!=null){var c=In(e),u=eoe(e),{maxBarSize:d}=o,f=js(d)?u:d,h,p;return c==="horizontal"?(h=t1(e,"xAxis",t,n),p=e1(e,"xAxis",t,n)):(h=t1(e,"yAxis",r,n),p=e1(e,"yAxis",r,n)),(s=(i=Hw(h,p,!0))!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:0}},zle=(e,t,r,n)=>{var a=In(e),s,i;return a==="horizontal"?(s=t1(e,"xAxis",t,n),i=e1(e,"xAxis",t,n)):(s=t1(e,"yAxis",r,n),i=e1(e,"yAxis",r,n)),Hw(s,i)};function qZe(e,t,r,n,a){var s=n.length;if(!(s<1)){var i=yl(e,r,0,!0),o,c=[];if(Uc(n[0].barSize)){var u=!1,d=r/s,f=n.reduce((y,C)=>y+(C.barSize||0),0);f+=(s-1)*i,f>=r&&(f-=(s-1)*i,i=0),f>=r&&d>0&&(u=!0,d*=.9,f=s*d);var h=(r-f)/2>>0,p={offset:h-i,size:0};o=n.reduce((y,C)=>{var N,T={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:p.offset+p.size+i,size:u?d:(N=C.barSize)!==null&&N!==void 0?N:0}},S=[...y,T];return p=S[S.length-1].position,S},c)}else{var g=yl(t,r,0,!0);r-2*g-(s-1)*i<=0&&(i=0);var v=(r-2*g-(s-1)*i)/s;v>1&&(v>>=0);var b=Uc(a)?Math.min(v,a):v;o=n.reduce((y,C,N)=>[...y,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:g+(v+i)*N+(v-b)/2,size:b}}],c)}return o}}var WZe=(e,t,r,n,a,s,i)=>{var o=js(i)?t:i,c=qZe(r,n,a!==s?a:s,e,o);return a!==s&&c!=null&&(c=c.map(u=>c_(c_({},u),{},{position:c_(c_({},u.position),{},{offset:u.position.offset-a/2})}))),c},XZe=ct([GZe,eoe,mGe,toe,KZe,zle,UZe],WZe),YZe=(e,t,r,n)=>t1(e,"xAxis",t,n),JZe=(e,t,r,n)=>t1(e,"yAxis",r,n),ZZe=(e,t,r,n)=>e1(e,"xAxis",t,n),eet=(e,t,r,n)=>e1(e,"yAxis",r,n),tet=ct([XZe,q2],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),ret=(e,t)=>{var r=BL(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:s}=a;if(s)return s.find(i=>i.key===r)}}}},net=ct([VZe,q2],ret),aet=ct([ki,YZe,JZe,ZZe,eet,tet,In,wL,zle,net,q2,QZe],(e,t,r,n,a,s,i,o,c,u,d,f)=>{var{chartData:h,dataStartIndex:p,dataEndIndex:g}=o;if(!(d==null||s==null||i!=="horizontal"&&i!=="vertical"||t==null||r==null||n==null||a==null||c==null)){var{data:v}=d,b;if(v!=null&&v.length>0?b=v:b=h==null?void 0:h.slice(p,g+1),b!=null)return IZe({layout:i,barSettings:d,pos:s,bandSize:c,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,stackedData:u,displayedData:b,offset:e,cells:f})}}),$le=e=>{var{chartData:t}=e,r=$a(),n=rc();return k.useEffect(()=>n?()=>{}:(r(LK(t)),()=>{r(LK(void 0))}),[t,r,n]),null},Qq={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Gle=Hc({name:"brush",initialState:Qq,reducers:{setBrushSettings(e,t){return t.payload==null?Qq:t.payload}}}),{setBrushSettings:uft}=Gle.actions,set=Gle.reducer;function iet(e,t,r){return(t=oet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oet(e){var t=cet(e,"string");return typeof t=="symbol"?t:t+""}function cet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class E8{static create(t){return new E8(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var s=this.bandwidth?this.bandwidth():0;return this.scale(t)+s}default:return this.scale(t)}if(r){var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+i}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}iet(E8,"EPS",1e-4);function uet(e){return(e%180+180)%180}var det=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=uet(a),i=s*Math.PI/180,o=Math.atan(n/r),c=i>o&&i<Math.PI-o?n/Math.sin(i):r/Math.cos(i);return Math.abs(c)},Aet={dots:[],areas:[],lines:[]},Kle=Hc({name:"referenceElements",initialState:Aet,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=ih(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=ih(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=ih(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:dft,removeDot:Aft,addArea:fft,removeArea:hft,addLine:mft,removeLine:pft}=Kle.actions,fet=Kle.reducer,het=k.createContext(void 0),met=e=>{var{children:t}=e,[r]=k.useState("".concat(Mw("recharts"),"-clip")),n=Ole();if(n==null)return null;var{x:a,y:s,width:i,height:o}=n;return k.createElement(het.Provider,{value:r},k.createElement("defs",null,k.createElement("clipPath",{id:r},k.createElement("rect",{x:a,y:s,height:o,width:i}))),t)};function fI(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function qle(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],a=0;a<e.length;a+=t)n.push(e[a]);return n}function pet(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return det(n,r)}function get(e,t,r){var n=r==="width",{x:a,y:s,width:i,height:o}=e;return t===1?{start:n?a:s,end:n?a+i:s+o}:{start:n?a+i:s+o,end:n?a:s}}function nN(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-a)<=0}function vet(e,t){return qle(e,t+1)}function xet(e,t,r,n,a){for(var s=(n||[]).slice(),{start:i,end:o}=t,c=0,u=1,d=i,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:qle(n,u)};var v=c,b,y=()=>(b===void 0&&(b=r(g,v)),b),C=g.coordinate,N=c===0||nN(e,C,y,d,o);N||(c=0,d=i,u+=1),N&&(d=C+e*(y()/2+a),c+=u)},h;u<=s.length;)if(h=f(),h)return h.v;return[]}function Hq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hq(Object(r),!0).forEach(function(n){bet(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bet(e,t,r){return(t=yet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yet(e){var t=wet(e,"string");return typeof t=="symbol"?t:t+""}function wet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eet(e,t,r,n,a){for(var s=(n||[]).slice(),i=s.length,{start:o}=t,{end:c}=t,u=function(h){var p=s[h],g,v=()=>(g===void 0&&(g=r(p,h)),g);if(h===i-1){var b=e*(p.coordinate+e*v()/2-c);s[h]=p=Mo(Mo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else s[h]=p=Mo(Mo({},p),{},{tickCoord:p.coordinate});var y=nN(e,p.tickCoord,v,o,c);y&&(c=p.tickCoord-e*(v()/2+a),s[h]=Mo(Mo({},p),{},{isShow:!0}))},d=i-1;d>=0;d--)u(d);return s}function Cet(e,t,r,n,a,s){var i=(n||[]).slice(),o=i.length,{start:c,end:u}=t;if(s){var d=n[o-1],f=r(d,o-1),h=e*(d.coordinate+e*f/2-u);i[o-1]=d=Mo(Mo({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var p=nN(e,d.tickCoord,()=>f,c,u);p&&(u=d.tickCoord-e*(f/2+a),i[o-1]=Mo(Mo({},d),{},{isShow:!0}))}for(var g=s?o-1:o,v=function(C){var N=i[C],T,S=()=>(T===void 0&&(T=r(N,C)),T);if(C===0){var B=e*(N.coordinate-e*S()/2-c);i[C]=N=Mo(Mo({},N),{},{tickCoord:B<0?N.coordinate-B*e:N.coordinate})}else i[C]=N=Mo(Mo({},N),{},{tickCoord:N.coordinate});var w=nN(e,N.tickCoord,S,c,u);w&&(c=N.tickCoord+e*(S()/2+a),i[C]=Mo(Mo({},N),{},{isShow:!0}))},b=0;b<g;b++)v(b);return i}function C8(e,t,r){var{tick:n,ticks:a,viewBox:s,minTickGap:i,orientation:o,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(cr(c)||Ng.isSsr){var h;return(h=vet(a,cr(c)?c:0))!==null&&h!==void 0?h:[]}var p=[],g=o==="top"||o==="bottom"?"width":"height",v=d&&g==="width"?tw(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(N,T)=>{var S=typeof u=="function"?u(N.value,T):N.value;return g==="width"?pet(tw(S,{fontSize:t,letterSpacing:r}),v,f):tw(S,{fontSize:t,letterSpacing:r})[g]},y=a.length>=2?Xi(a[1].coordinate-a[0].coordinate):1,C=get(s,y,g);return c==="equidistantPreserveStart"?xet(y,C,b,a,i):(c==="preserveStart"||c==="preserveStartEnd"?p=Cet(y,C,b,a,i,c==="preserveStartEnd"):p=Eet(y,C,b,a,i),p.filter(N=>N.isShow))}var _et=["viewBox"],Net=["viewBox"];function ex(){return ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ex.apply(null,arguments)}function Vq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ei(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vq(Object(r),!0).forEach(function(n){_8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zq(e,t){if(e==null)return{};var r,n,a=ket(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ket(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function _8(e,t,r){return(t=Bet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bet(e){var t=Tet(e,"string");return typeof t=="symbol"?t:t+""}function Tet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Lm extends k.Component{constructor(t){super(t),this.tickRefs=k.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,a=zq(t,_et),s=this.props,{viewBox:i}=s,o=zq(s,Net);return!fI(n,i)||!fI(a,o)||!fI(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:a,height:s,orientation:i,tickSize:o,mirror:c,tickMargin:u}=this.props,d,f,h,p,g,v,b=c?-1:1,y=t.tickSize||o,C=cr(t.tickCoord)?t.tickCoord:t.coordinate;switch(i){case"top":d=f=t.coordinate,p=n+ +!c*s,h=p-b*y,v=h-b*u,g=C;break;case"left":h=p=t.coordinate,f=r+ +!c*a,d=f-b*y,g=d-b*u,v=C;break;case"right":h=p=t.coordinate,f=r+ +c*a,d=f+b*y,g=d+b*u,v=C;break;default:d=f=t.coordinate,p=n+ +c*s,h=p+b*y,v=h+b*u,g=C;break}return{line:{x1:d,y1:h,x2:f,y2:p},tick:{x:g,y:v}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:a,orientation:s,mirror:i,axisLine:o}=this.props,c=Ei(Ei(Ei({},Yn(this.props,!1)),Yn(o,!1)),{},{fill:"none"});if(s==="top"||s==="bottom"){var u=+(s==="top"&&!i||s==="bottom"&&i);c=Ei(Ei({},c),{},{x1:t,y1:r+u*a,x2:t+n,y2:r+u*a})}else{var d=+(s==="left"&&!i||s==="right"&&i);c=Ei(Ei({},c),{},{x1:t+d*n,y1:r,x2:t+d*n,y2:r+a})}return k.createElement("line",ex({},c,{className:gn("recharts-cartesian-axis-line",Em(o,"className"))}))}static renderTickItem(t,r,n){var a,s=gn(r.className,"recharts-cartesian-axis-tick-value");if(k.isValidElement(t))a=k.cloneElement(t,Ei(Ei({},r),{},{className:s}));else if(typeof t=="function")a=t(Ei(Ei({},r),{},{className:s}));else{var i="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(i=gn(i,t.className)),a=k.createElement(H1,ex({},r,{className:i}),n)}return a}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:s,tick:i,tickFormatter:o,unit:c,padding:u}=this.props,d=C8(Ei(Ei({},this.props),{},{ticks:n}),t,r),f=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),p=al(this.props),g=Yn(i,!1),v=Ei(Ei({},p),{},{fill:"none"},Yn(a,!1)),b=d.map((y,C)=>{var{line:N,tick:T}=this.getTickLineCoord(y),S=Ei(Ei(Ei(Ei({textAnchor:f,verticalAnchor:h},p),{},{stroke:"none",fill:s},g),T),{},{index:C,payload:y,visibleTicksCount:d.length,tickFormatter:o,padding:u});return k.createElement(As,ex({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},Sg(this.props,y,C)),a&&k.createElement("line",ex({},v,N,{className:gn("recharts-cartesian-axis-tick-line",Em(a,"className"))})),i&&Lm.renderTickItem(i,S,"".concat(typeof o=="function"?o(y.value,C):y.value).concat(c||"")))});return b.length>0?k.createElement("g",{className:"recharts-cartesian-axis-ticks"},b):null}render(){var{axisLine:t,width:r,height:n,className:a,hide:s}=this.props;if(s)return null;var{ticks:i}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:k.createElement(As,{className:gn("recharts-cartesian-axis",a),ref:o=>{if(o){var c=o.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var u=c[0];if(u){var d=window.getComputedStyle(u).fontSize,f=window.getComputedStyle(u).letterSpacing;(d!==this.state.fontSize||f!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,i),Gl.renderCallByParent(this.props))}}_8(Lm,"displayName","CartesianAxis");_8(Lm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var jet=["x1","y1","x2","y2","key"],Iet=["offset"],Fet=["xAxisId","yAxisId"],Oet=["xAxisId","yAxisId"];function $q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ko(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$q(Object(r),!0).forEach(function(n){Det(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$q(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Det(e,t,r){return(t=Pet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pet(e){var t=Ret(e,"string");return typeof t=="symbol"?t:t+""}function Ret(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tp.apply(null,arguments)}function aN(e,t){if(e==null)return{};var r,n,a=Let(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Let(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Met=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:s,height:i,ry:o}=e;return k.createElement("rect",{x:n,y:a,ry:o,width:s,height:i,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Wle(e,t){var r;if(k.isValidElement(e))r=k.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:a,x2:s,y2:i,key:o}=t,c=aN(t,jet),u=al(c),{offset:d}=u,f=aN(u,Iet);r=k.createElement("line",Tp({},f,{x1:n,y1:a,x2:s,y2:i,fill:"none",key:o}))}return r}function Uet(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=aN(e,Fet),c=a.map((u,d)=>{var f=Ko(Ko({},o),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return Wle(n,f)});return k.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Qet(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var{xAxisId:s,yAxisId:i}=e,o=aN(e,Oet),c=a.map((u,d)=>{var f=Ko(Ko({},o),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return Wle(n,f)});return k.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Het(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:s,height:i,horizontalPoints:o,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var u=o.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var v=h%t.length;return k.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:s,stroke:"none",fill:t[v],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Vet(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:s,width:i,height:o,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+i-f:u[h+1]-f;if(g<=0)return null;var v=h%r.length;return k.createElement("rect",{key:"react-".concat(h),x:f,y:s,width:g,height:o,stroke:"none",fill:r[v],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return k.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var zet=(e,t)=>{var{xAxis:r,width:n,height:a,offset:s}=e;return Ose(C8(Ko(Ko(Ko({},Lm.defaultProps),r),{},{ticks:Dse(r),viewBox:{x:0,y:0,width:n,height:a}})),s.left,s.left+s.width,t)},$et=(e,t)=>{var{yAxis:r,width:n,height:a,offset:s}=e;return Ose(C8(Ko(Ko(Ko({},Lm.defaultProps),r),{},{ticks:Dse(r),viewBox:{x:0,y:0,width:n,height:a}})),s.top,s.top+s.height,t)},Get={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function sN(e){var t=WR(),r=XR(),n=Use(),a=Ko(Ko({},Uu(e,Get)),{},{x:cr(e.x)?e.x:n.left,y:cr(e.y)?e.y:n.top,width:cr(e.width)?e.width:n.width,height:cr(e.height)?e.height:n.height}),{xAxisId:s,yAxisId:i,x:o,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=a,g=rc(),v=sr(F=>BK(F,"xAxis",s,g)),b=sr(F=>BK(F,"yAxis",i,g));if(!cr(u)||u<=0||!cr(d)||d<=0||!cr(o)||o!==+o||!cr(c)||c!==+c)return null;var y=a.verticalCoordinatesGenerator||zet,C=a.horizontalCoordinatesGenerator||$et,{horizontalPoints:N,verticalPoints:T}=a;if((!N||!N.length)&&typeof C=="function"){var S=h&&h.length,B=C({yAxis:b?Ko(Ko({},b),{},{ticks:S?h:b.ticks}):void 0,width:t,height:r,offset:n},S?!0:f);ew(Array.isArray(B),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof B,"]")),Array.isArray(B)&&(N=B)}if((!T||!T.length)&&typeof y=="function"){var w=p&&p.length,_=y({xAxis:v?Ko(Ko({},v),{},{ticks:w?p:v.ticks}):void 0,width:t,height:r,offset:n},w?!0:f);ew(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(T=_)}return k.createElement("g",{className:"recharts-cartesian-grid"},k.createElement(Met,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),k.createElement(Het,Tp({},a,{horizontalPoints:N})),k.createElement(Vet,Tp({},a,{verticalPoints:T})),k.createElement(Uet,Tp({},a,{offset:n,horizontalPoints:N,xAxis:v,yAxis:b})),k.createElement(Qet,Tp({},a,{offset:n,verticalPoints:T,xAxis:v,yAxis:b})))}sN.displayName="CartesianGrid";function Gq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kq(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gq(Object(r),!0).forEach(function(n){Ket(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ket(e,t,r){return(t=qet(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qet(e){var t=Wet(e,"string");return typeof t=="symbol"?t:t+""}function Wet(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xet={xAxis:{},yAxis:{},zAxis:{}},Xle=Hc({name:"cartesianAxis",initialState:Xet,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=Kq(Kq({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:Yet,removeXAxis:Jet,addYAxis:Zet,removeYAxis:ett,addZAxis:gft,removeZAxis:vft,updateYAxisWidth:ttt}=Xle.actions,rtt=Xle.reducer,ntt=["children"],att=["dangerouslySetInnerHTML","ticks"];function Yle(e,t,r){return(t=stt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function stt(e){var t=itt(e,"string");return typeof t=="symbol"?t:t+""}function itt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mO(){return mO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mO.apply(null,arguments)}function Jle(e,t){if(e==null)return{};var r,n,a=ott(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ott(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function ltt(e){var t=$a(),r=k.useMemo(()=>{var{children:s}=e,i=Jle(e,ntt);return i},[e]),n=sr(s=>Dh(s,r.id)),a=r===n;return k.useEffect(()=>(t(Yet(r)),()=>{t(Jet(r))}),[r,t]),a?e.children:null}var ctt=e=>{var{xAxisId:t,className:r}=e,n=sr(Mse),a=rc(),s="xAxis",i=sr(p=>M1(p,s,t,a)),o=sr(p=>Foe(p,s,t,a)),c=sr(p=>Boe(p,t)),u=sr(p=>lKe(p,t));if(c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:f}=e,h=Jle(e,att);return k.createElement(Lm,mO({},h,{scale:i,x:u.x,y:u.y,width:c.width,height:c.height,className:gn("recharts-".concat(s," ").concat(s),r),viewBox:n,ticks:o}))},utt=e=>{var t,r,n,a,s;return k.createElement(ltt,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter},k.createElement(ctt,e))};class Xw extends k.Component{render(){return k.createElement(utt,this.props)}}Yle(Xw,"displayName","XAxis");Yle(Xw,"defaultProps",{allowDataOverflow:Ec.allowDataOverflow,allowDecimals:Ec.allowDecimals,allowDuplicatedCategory:Ec.allowDuplicatedCategory,height:Ec.height,hide:!1,mirror:Ec.mirror,orientation:Ec.orientation,padding:Ec.padding,reversed:Ec.reversed,scale:Ec.scale,tickCount:Ec.tickCount,type:Ec.type,xAxisId:0});var dtt=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:s=0}=e,i=0;if(t){t.forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>i&&(i=f.width)}});var o=r?r.getBoundingClientRect().width:0,c=a+s,u=i+c+o+(r?n:0);return Math.round(u)}return 0},Att=["dangerouslySetInnerHTML","ticks"];function Zle(e,t,r){return(t=ftt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ftt(e){var t=htt(e,"string");return typeof t=="symbol"?t:t+""}function htt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pO(){return pO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},pO.apply(null,arguments)}function mtt(e,t){if(e==null)return{};var r,n,a=ptt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ptt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function gtt(e){var t=$a();return k.useEffect(()=>(t(Zet(e)),()=>{t(ett(e))}),[e,t]),null}var vtt=e=>{var t,{yAxisId:r,className:n,width:a,label:s}=e,i=k.useRef(null),o=k.useRef(null),c=sr(Mse),u=rc(),d=$a(),f="yAxis",h=sr(N=>M1(N,f,r,u)),p=sr(N=>Toe(N,r)),g=sr(N=>cKe(N,r)),v=sr(N=>Foe(N,f,r,u));if(k.useLayoutEffect(()=>{var N;if(!(a!=="auto"||!p||n8(s)||k.isValidElement(s))){var T=i.current,S=T==null||(N=T.tickRefs)===null||N===void 0?void 0:N.current,{tickSize:B,tickMargin:w}=T.props,_=dtt({ticks:S,label:o.current,labelGapWithTick:5,tickSize:B,tickMargin:w});Math.round(p.width)!==Math.round(_)&&d(ttt({id:r,width:_}))}},[i,i==null||(t=i.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p==null?void 0:p.width,p,d,s,r,a]),p==null||g==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,C=mtt(e,Att);return k.createElement(Lm,pO({},C,{ref:i,labelRef:o,scale:h,x:g.x,y:g.y,width:p.width,height:p.height,className:gn("recharts-".concat(f," ").concat(f),n),viewBox:c,ticks:v}))},xtt=e=>{var t,r,n,a,s;return k.createElement(k.Fragment,null,k.createElement(gtt,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(a=e.minTickGap)!==null&&a!==void 0?a:5,tick:(s=e.tick)!==null&&s!==void 0?s:!0,tickFormatter:e.tickFormatter}),k.createElement(vtt,e))},btt={allowDataOverflow:Cc.allowDataOverflow,allowDecimals:Cc.allowDecimals,allowDuplicatedCategory:Cc.allowDuplicatedCategory,hide:!1,mirror:Cc.mirror,orientation:Cc.orientation,padding:Cc.padding,reversed:Cc.reversed,scale:Cc.scale,tickCount:Cc.tickCount,type:Cc.type,width:Cc.width,yAxisId:0};class Yw extends k.Component{render(){return k.createElement(xtt,this.props)}}Zle(Yw,"displayName","YAxis");Zle(Yw,"defaultProps",btt);var hI={exports:{}},mI={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qq;function ytt(){if(qq)return mI;qq=1;var e=d1();function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,a=e.useRef,s=e.useEffect,i=e.useMemo,o=e.useDebugValue;return mI.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var p=a(null);if(p.current===null){var g={hasValue:!1,value:null};p.current=g}else g=p.current;p=i(function(){function b(S){if(!y){if(y=!0,C=S,S=f(S),h!==void 0&&g.hasValue){var B=g.value;if(h(B,S))return N=B}return N=S}if(B=N,r(C,S))return B;var w=f(S);return h!==void 0&&h(B,w)?(C=S,B):(C=S,N=w)}var y=!1,C,N,T=d===void 0?null:d;return[function(){return b(u())},T===null?void 0:function(){return b(T())}]},[u,d,f,h]);var v=n(c,p[0],p[1]);return s(function(){g.hasValue=!0,g.value=v},[v]),o(v),v},mI}var Wq;function wtt(){return Wq||(Wq=1,hI.exports=ytt()),hI.exports}wtt();function Ett(e){e()}function Ctt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Ett(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var Xq={notify(){},get:()=>[]};function _tt(e,t){let r,n=Xq,a=0,s=!1;function i(v){d();const b=n.subscribe(v);let y=!1;return()=>{y||(y=!0,b(),f())}}function o(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return s}function d(){a++,r||(r=e.subscribe(c),n=Ctt())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=Xq)}function h(){s||(s=!0,d())}function p(){s&&(s=!1,f())}const g={addNestedSub:i,notifyNestedSubs:o,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var Stt=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ntt=Stt(),ktt=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Btt=ktt(),Ttt=()=>Ntt||Btt?k.useLayoutEffect:k.useEffect,jtt=Ttt(),pI=Symbol.for("react-redux-context"),gI=typeof globalThis<"u"?globalThis:{};function Itt(){if(!k.createContext)return{};const e=gI[pI]??(gI[pI]=new Map);let t=e.get(k.createContext);return t||(t=k.createContext(null),e.set(k.createContext,t)),t}var Ftt=Itt();function Ott(e){const{children:t,context:r,serverState:n,store:a}=e,s=k.useMemo(()=>{const c=_tt(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=k.useMemo(()=>a.getState(),[a]);jtt(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const o=r||Ftt;return k.createElement(o.Provider,{value:s},t)}var Dtt=Ott,Ptt=(e,t)=>t,S8=ct([Ptt,In,D1,Ti,Woe,Ph,Aqe,ki],gqe),N8=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},ece=Ru("mouseClick"),tce=O2();tce.startListening({actionCreator:ece,effect:(e,t)=>{var r=e.payload,n=S8(t.getState(),N8(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(bKe({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var gO=Ru("mouseMove"),rce=O2();rce.startListening({actionCreator:gO,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=KL(n,n.tooltip.settings.shared),s=S8(n,N8(r));a==="axis"&&((s==null?void 0:s.activeIndex)!=null?t.dispatch(Hoe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(Qoe()))}});function Rtt(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var Yq={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},nce=Hc({name:"rootProps",initialState:Yq,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:Yq.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Ltt=nce.reducer,{updateOptions:Mtt}=nce.actions,ace=Hc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Utt}=ace.actions,Qtt=ace.reducer,sce=Ru("keyDown"),ice=Ru("focus"),k8=O2();k8.startListening({actionCreator:sce,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,s=e.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var i=Number(qL(a,Q1(r))),o=Ph(r);if(s==="Enter"){var c=X5(r,"axis","hover",String(a.index));t.dispatch(cO({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:c}));return}var u=dKe(r),d=u==="left-to-right"?1:-1,f=s==="ArrowRight"?1:-1,h=i+f*d;if(!(o==null||h>=o.length||h<0)){var p=X5(r,"axis","hover",String(h));t.dispatch(cO({active:!0,activeIndex:h.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});k8.startListening({actionCreator:ice,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var s="0",i=X5(r,"axis","hover",String(s));t.dispatch(cO({activeDataKey:void 0,active:!0,activeIndex:s,activeCoordinate:i}))}}}});var bu=Ru("externalEvent"),oce=O2();oce.startListening({actionCreator:bu,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:rqe(r),activeDataKey:Zoe(r),activeIndex:Cm(r),activeLabel:Joe(r),activeTooltipIndex:Cm(r),isTooltipActive:nqe(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Htt=ct([U1],e=>e.tooltipItemPayloads),Vtt=ct([Htt,$2,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(o=>o.settings.dataKey===n);if(a!=null){var{positions:s}=a;if(s!=null){var i=t(s,r);return i}}}),lce=Ru("touchMove"),cce=O2();cce.startListening({actionCreator:lce,effect:(e,t)=>{var r=e.payload,n=t.getState(),a=KL(n,n.tooltip.settings.shared);if(a==="axis"){var s=S8(n,N8({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));(s==null?void 0:s.activeIndex)!=null&&t.dispatch(Hoe({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if(a==="item"){var i,o=r.touches[0],c=document.elementFromPoint(o.clientX,o.clientY);if(!c||!c.getAttribute)return;var u=c.getAttribute(Rse),d=(i=c.getAttribute(Lse))!==null&&i!==void 0?i:void 0,f=Vtt(t.getState(),u,d);t.dispatch(Uoe({activeDataKey:d,activeIndex:u,activeCoordinate:f}))}}});var ztt=lse({brush:set,cartesianAxis:rtt,chartData:Fqe,errorBars:oZe,graphicalItems:HYe,layout:sQe,legend:GQe,options:kqe,polarAxis:PXe,polarOptions:Qtt,referenceElements:fet,rootProps:Ltt,tooltip:yKe}),$tt=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return T9e({reducer:ztt,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([tce.middleware,rce.middleware,k8.middleware,oce.middleware,cce.middleware]),devTools:{serialize:{replacer:Rtt},name:"recharts-".concat(r)}})};function uce(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=rc(),s=k.useRef(null);if(a)return r;s.current==null&&(s.current=$tt(t,n));var i=UR;return k.createElement(Dtt,{context:i,store:s.current},r)}function dce(e){var{layout:t,width:r,height:n,margin:a}=e,s=$a(),i=rc();return k.useEffect(()=>{i||(s(rQe(t)),s(nQe({width:r,height:n})),s(tQe(a)))},[s,i,t,r,n,a]),null}function Ace(e){var t=$a();return k.useEffect(()=>{t(Mtt(e))},[t,e]),null}var Gtt=["children"];function Ktt(e,t){if(e==null)return{};var r,n,a=qtt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function qtt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iN(){return iN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iN.apply(null,arguments)}var Wtt={width:"100%",height:"100%"},Xtt=k.forwardRef((e,t)=>{var r=WR(),n=XR(),a=zse();if(!Wx(r)||!Wx(n))return null;var{children:s,otherAttributes:i,title:o,desc:c}=e,u,d;return typeof i.tabIndex=="number"?u=i.tabIndex:u=a?0:void 0,typeof i.role=="string"?d=i.role:d=a?"application":void 0,k.createElement(SR,iN({},i,{title:o,desc:c,role:d,tabIndex:u,width:r,height:n,style:Wtt,ref:t}),s)}),Ytt=e=>{var{children:t}=e,r=sr(ek);if(!r)return null;var{width:n,height:a,y:s,x:i}=r;return k.createElement(SR,{width:n,height:a,x:i,y:s},t)},Jq=k.forwardRef((e,t)=>{var{children:r}=e,n=Ktt(e,Gtt),a=rc();return a?k.createElement(Ytt,null,r):k.createElement(Xtt,iN({ref:t},n),r)});function Jtt(){var e=$a(),[t,r]=k.useState(null),n=sr(OQe);return k.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),s=a.width/t.offsetWidth;Uc(s)&&s!==n&&e(aQe(s))}},[t,e,n]),r}function Zq(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Ztt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zq(Object(r),!0).forEach(function(n){ert(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zq(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ert(e,t,r){return(t=trt(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function trt(e){var t=rrt(e,"string");return typeof t=="symbol"?t:t+""}function rrt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nrt=k.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:s,onContextMenu:i,onDoubleClick:o,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:g,onTouchStart:v,style:b,width:y}=e,C=$a(),[N,T]=k.useState(null),[S,B]=k.useState(null);Pqe();var w=Jtt(),_=k.useCallback(R=>{w(R),typeof t=="function"&&t(R),T(R),B(R)},[w,t,T,B]),F=k.useCallback(R=>{C(ece(R)),C(bu({handler:s,reactEvent:R}))},[C,s]),M=k.useCallback(R=>{C(gO(R)),C(bu({handler:u,reactEvent:R}))},[C,u]),D=k.useCallback(R=>{C(Qoe()),C(bu({handler:d,reactEvent:R}))},[C,d]),I=k.useCallback(R=>{C(gO(R)),C(bu({handler:f,reactEvent:R}))},[C,f]),U=k.useCallback(()=>{C(ice())},[C]),P=k.useCallback(R=>{C(sce(R.key))},[C]),X=k.useCallback(R=>{C(bu({handler:i,reactEvent:R}))},[C,i]),H=k.useCallback(R=>{C(bu({handler:o,reactEvent:R}))},[C,o]),Y=k.useCallback(R=>{C(bu({handler:c,reactEvent:R}))},[C,c]),V=k.useCallback(R=>{C(bu({handler:h,reactEvent:R}))},[C,h]),z=k.useCallback(R=>{C(bu({handler:v,reactEvent:R}))},[C,v]),G=k.useCallback(R=>{C(lce(R)),C(bu({handler:g,reactEvent:R}))},[C,g]),re=k.useCallback(R=>{C(bu({handler:p,reactEvent:R}))},[C,p]);return k.createElement(sle.Provider,{value:N},k.createElement(jae.Provider,{value:S},k.createElement("div",{className:gn("recharts-wrapper",n),style:Ztt({position:"relative",cursor:"default",width:y,height:a},b),onClick:F,onContextMenu:X,onDoubleClick:H,onFocus:U,onKeyDown:P,onMouseDown:Y,onMouseEnter:M,onMouseLeave:D,onMouseMove:I,onMouseUp:V,onTouchEnd:re,onTouchMove:G,onTouchStart:z,ref:_},r)))}),art=["children","className","width","height","style","compact","title","desc"];function srt(e,t){if(e==null)return{};var r,n,a=irt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function irt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var fce=k.forwardRef((e,t)=>{var{children:r,className:n,width:a,height:s,style:i,compact:o,title:c,desc:u}=e,d=srt(e,art),f=al(d);return o?k.createElement(Jq,{otherAttributes:f,title:c,desc:u},r):k.createElement(nrt,{className:n,style:i,width:a,height:s,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},k.createElement(Jq,{otherAttributes:f,title:c,desc:u,ref:t},k.createElement(met,null,r)))}),ort=["width","height"];function vO(){return vO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vO.apply(null,arguments)}function lrt(e,t){if(e==null)return{};var r,n,a=crt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function crt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var urt={top:5,right:5,bottom:5,left:5},drt={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:urt,reverseStackOrder:!1,syncMethod:"index"},Art=k.forwardRef(function(t,r){var n,a=Uu(t.categoricalChartProps,drt),{width:s,height:i}=a,o=lrt(a,ort);if(!Wx(s)||!Wx(i))return null;var{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,categoricalChartProps:h}=t,p={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:d,tooltipPayloadSearcher:f,eventEmitter:void 0};return k.createElement(uce,{preloadedState:{options:p},reduxStoreName:(n=h.id)!==null&&n!==void 0?n:c},k.createElement($le,{chartData:h.data}),k.createElement(dce,{width:s,height:i,layout:a.layout,margin:a.margin}),k.createElement(Ace,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),k.createElement(fce,vO({},o,{width:s,height:i,ref:r})))}),frt=["axis","item"],xO=k.forwardRef((e,t)=>k.createElement(Art,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:frt,tooltipPayloadSearcher:r8,categoricalChartProps:e,ref:t}));function hrt(e){var t=$a();return k.useEffect(()=>{t(Utt(e))},[t,e]),null}var mrt=["width","height","layout"];function bO(){return bO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bO.apply(null,arguments)}function prt(e,t){if(e==null)return{};var r,n,a=grt(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function grt(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var vrt={top:5,right:5,bottom:5,left:5},xrt={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:vrt,reverseStackOrder:!1,syncMethod:"index",layout:"radial"},hce=k.forwardRef(function(t,r){var n,a=Uu(t.categoricalChartProps,xrt),{width:s,height:i,layout:o}=a,c=prt(a,mrt);if(!Wx(s)||!Wx(i))return null;var{chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h}=t,p={chartName:u,defaultTooltipEventType:d,validateTooltipEventTypes:f,tooltipPayloadSearcher:h,eventEmitter:void 0};return k.createElement(uce,{preloadedState:{options:p},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:u},k.createElement($le,{chartData:a.data}),k.createElement(dce,{width:s,height:i,layout:o,margin:a.margin}),k.createElement(Ace,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),k.createElement(hrt,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),k.createElement(fce,bO({width:s,height:i},c,{ref:r})))}),brt=["item"],yrt={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},wrt=k.forwardRef((e,t)=>{var r=Uu(e,yrt);return k.createElement(hce,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:brt,tooltipPayloadSearcher:r8,categoricalChartProps:r,ref:t})}),Ert=["axis"],Crt={layout:"centric",startAngle:90,endAngle:-270,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},_rt=k.forwardRef((e,t)=>{var r=Uu(e,Crt);return k.createElement(hce,{chartName:"RadarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ert,tooltipPayloadSearcher:r8,categoricalChartProps:r,ref:t})});const s1="panol_maquinas",W2="panol_registros",Srt=e=>{const t=tr(It(bt,s1),Rr("nombre","asc"));return gr(t,r=>{const n=r.docs.map(a=>({id:a.id,...a.data()}));e(n)})},Nrt=e=>{const t=tr(It(bt,W2),Rr("fecha","desc"));return gr(t,r=>{const n=r.docs.map(a=>{const s=a.data();return{id:a.id,fecha:s.fecha,curso:s.curso,profesorResponsable:s.profesorResponsable,maquinaId:s.maquinaId,totalHoras:s.totalHoras,observaciones:s.observaciones||""}});e(n)})},krt=async e=>(await Un(It(bt,s1),{...e,createdAt:el(),updatedAt:el()})).id,Brt=async(e,t)=>{await Ld(pr(bt,s1,e),{...t,updatedAt:el()})},Trt=async e=>{const t=tr(It(bt,W2),vn("maquinaId","==",e));if(!(await Pa(t)).empty)throw new Error("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");await ts(pr(bt,s1,e))},jrt=async e=>(await Un(It(bt,W2),{...e,createdAt:el(),updatedAt:el()})).id,Irt=async(e,t)=>{await Ld(pr(bt,W2,e),{...t,updatedAt:el()})},Frt=async e=>{await ts(pr(bt,W2,e))},Ort=async()=>{if(!(await Pa(It(bt,s1))).empty)return;const t=E1(bt);[{nombre:"Torno",especialidad:"Industrial"},{nombre:"Fresadora",especialidad:"Industrial"},{nombre:"Rectificadora",especialidad:"Industrial"},{nombre:"Soldadora MIG",especialidad:"Industrial"},{nombre:"Soldadora TIG",especialidad:"Industrial"},{nombre:"Torno CNC",especialidad:"Industrial"},{nombre:"Elevador",especialidad:"Automotriz"},{nombre:"Compresor",especialidad:"Automotriz"},{nombre:"Rectificadora",especialidad:"Automotriz"},{nombre:"Maqueta de motor",especialidad:"Automotriz"},{nombre:"Maqueta hidráulica",especialidad:"Automotriz"}].forEach(n=>{const a=pr(It(bt,s1));t.set(a,{...n,createdAt:el(),updatedAt:el()})}),await t.commit()},Drt=()=>{var X;const[e,t]=k.useState([]),[r,n]=k.useState([]),a={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[s,i]=k.useState(a),[o,c]=k.useState(null),u={nombre:"",especialidad:"Industrial"},[d,f]=k.useState(u),[h,p]=k.useState(null),[g,v]=k.useState({maquinaId:"",curso:"",profesor:"",fecha:""});k.useEffect(()=>{Ort().catch(console.error);const H=Srt(t),Y=Nrt(n);return()=>{H&&H(),Y&&Y()}},[]);const b=async H=>{if(H.preventDefault(),!!d.nombre.trim())try{h?await Brt(h.id,{...d}):await krt({...d}),f(u),p(null)}catch(Y){alert(Y.message||"Error al guardar máquina")}},y=k.useCallback(async H=>{try{await Trt(H)}catch(Y){alert(Y.message||"Error al eliminar máquina")}},[]),C=async H=>{H.preventDefault();const Y=o||s;if(!Y.curso||!Y.profesorResponsable.trim()||!Y.maquinaId||Number(Y.totalHoras)<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}try{if(o){const{id:V,...z}=o;await Irt(V,z)}else await jrt({...s});i(a),c(null)}catch(V){alert(V.message||"Error al guardar registro")}},N=k.useCallback(async H=>{try{await Frt(H)}catch(Y){alert(Y.message||"Error al eliminar registro")}},[]),T=k.useMemo(()=>r.filter(H=>(g.maquinaId===""||H.maquinaId===g.maquinaId)&&(g.curso===""||H.curso===g.curso)&&(g.profesor===""||H.profesorResponsable.toLowerCase().includes(g.profesor.toLowerCase()))&&(g.fecha===""||H.fecha===g.fecha)).sort((H,Y)=>new Date(Y.fecha).getTime()-new Date(H.fecha).getTime()),[r,g]),S=k.useMemo(()=>new Map(e.map(H=>[H.id,H])),[e]),B=k.useMemo(()=>T.reduce((H,Y)=>H+(Number(Y.totalHoras)||0),0),[T]),w=k.useMemo(()=>{const H=new Map;T.forEach(V=>{var G;const z=((G=S.get(V.maquinaId))==null?void 0:G.nombre)||"N/A";H.set(z,(H.get(z)||0)+(Number(V.totalHoras)||0))});const Y=Array.from(H.entries()).map(([V,z])=>({maquina:V,horas:Number(z.toFixed(2))}));return Y.sort((V,z)=>z.horas-V.horas),Y},[T,S]),_=()=>{const H=T.map(z=>{var G,re;return{Fecha:z.fecha,Curso:z.curso,Profesor:z.profesorResponsable,Máquina:((G=S.get(z.maquinaId))==null?void 0:G.nombre)||"N/A",Especialidad:((re=S.get(z.maquinaId))==null?void 0:re.especialidad)||"N/A","Total Horas":z.totalHoras,Observaciones:z.observaciones}}),Y=ku.json_to_sheet(H),V=ku.book_new();ku.book_append_sheet(V,Y,"RegistrosPañol"),nR(V,"Registros_Pañol.xlsx")},F=()=>{const H=new xr;xl(H,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:T.map(Y=>{var V,z;return[Y.fecha,Y.curso,Y.profesorResponsable,((V=S.get(Y.maquinaId))==null?void 0:V.nombre)||"N/A",((z=S.get(Y.maquinaId))==null?void 0:z.especialidad)||"N/A",Y.totalHoras,Y.observaciones]}),margin:{top:24,right:10,bottom:20,left:10},didDrawPage:Y=>{H.setFontSize(12),H.setFont("helvetica","bold"),H.text("LICEO INDUSTRIAL DE RECOLETA",Y.settings.margin.left,14),H.setFontSize(10),H.setFont("helvetica","normal"),H.text("Informe de Registros de Pañol",Y.settings.margin.left,20)}}),H.save("Registros_Pañol.pdf")},M="w-full border border-slate-300 rounded-xl px-3 py-2 shadow-sm focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-400 dark:bg-slate-800 dark:border-slate-700 dark:text-slate-100 dark:placeholder-slate-400",D=(H,Y)=>l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${Y}`,children:H}),I=({icon:H,label:Y,value:V,accent:z="from-indigo-500 to-sky-500"})=>l.jsxs("div",{className:"relative rounded-2xl p-4 shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-tr ${z} opacity-10`}),l.jsxs("div",{className:"relative flex items-center gap-3 bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[l.jsx("div",{className:"p-2 rounded-xl bg-white dark:bg-slate-700 shadow",children:H}),l.jsxs("div",{children:[l.jsx("div",{className:"text-xs text-slate-600 dark:text-slate-400",children:Y}),l.jsx("div",{className:"text-xl font-semibold text-slate-900 dark:text-slate-100",children:V})]})]})]}),U=({title:H,icon:Y,children:V,right:z,accent:G="from-indigo-600/10 via-sky-500/10 to-emerald-500/10"})=>l.jsxs("section",{className:"rounded-2xl p-6 shadow-sm border border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 relative overflow-hidden",children:[l.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${G}`}),l.jsxs("div",{className:"relative",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"flex items-center gap-2 text-lg font-bold text-slate-800 dark:text-slate-100",children:[Y," ",l.jsx("span",{children:H})]}),z]}),V]})]}),P=()=>{const H=o||s,Y=o?c:i;return l.jsxs("form",{onSubmit:C,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4 items-end",children:[l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(yd,{size:16})," Fecha"]}),l.jsx("input",{name:"fecha",type:"date",value:H.fecha,onChange:V=>Y({...H,fecha:V.target.value}),className:M,required:!0})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(Ou,{size:16})," Curso"]}),l.jsxs("select",{name:"curso",value:H.curso,onChange:V=>Y({...H,curso:V.target.value}),className:M,required:!0,children:[l.jsx("option",{value:"",children:"Curso"}),ks.map(V=>l.jsx("option",{children:V},V))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(hh,{size:16})," Profesor"]}),l.jsxs("select",{name:"profesorResponsable",value:H.profesorResponsable,onChange:V=>Y({...H,profesorResponsable:V.target.value}),className:M,required:!0,children:[l.jsx("option",{value:"",children:"Profesor Responsable"}),yF.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(P_,{size:16})," Máquina"]}),l.jsxs("select",{name:"maquinaId",value:H.maquinaId,onChange:V=>Y({...H,maquinaId:V.target.value}),className:M,required:!0,children:[l.jsx("option",{value:"",children:"Máquina"}),e.map(V=>l.jsx("option",{value:V.id,children:V.nombre},V.id))]})]}),l.jsxs("div",{className:"lg:col-span-1",children:[l.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[l.jsx(oQ,{size:16})," Total de Horas"]}),l.jsx("input",{name:"totalHoras",type:"number",value:H.totalHoras,onChange:V=>Y({...H,totalHoras:Number(V.target.value)}),className:M,required:!0,min:.5,step:.5})]}),l.jsxs("div",{className:"lg:col-span-6",children:[l.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),l.jsx("textarea",{name:"observaciones",value:H.observaciones,onChange:V=>Y({...H,observaciones:V.target.value}),placeholder:"Observaciones...",className:M+" min-h-[40px]",rows:2})]})]}),l.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&l.jsxs("button",{type:"button",onClick:()=>c(null),className:"inline-flex items-center gap-2 bg-white text-slate-700 border border-slate-200 dark:bg-slate-800 dark:text-slate-200 dark:border-slate-700 font-medium py-2 px-4 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700 transition",children:[l.jsx(HS,{size:16})," Cancelar"]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-indigo-500 transition",children:[o?l.jsx(pw,{size:16}):l.jsx(th,{size:16}),o?"Actualizar":"Registrar"]})]})]})};return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsxs("header",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-indigo-600 via-sky-500 to-emerald-500",children:"Pañol: Registro de Uso de Máquinas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Administra máquinas, registra usos y exporta informes (Firestore)."})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:_,className:"inline-flex items-center gap-2 bg-white dark:bg-slate-900 text-slate-800 dark:text-slate-100 border border-slate-200 dark:border-slate-800 px-3 py-2 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-800 transition",title:"Exportar a Excel",children:[l.jsx(Ybe,{size:18})," Excel"]}),l.jsxs("button",{onClick:F,className:"inline-flex items-center gap-2 bg-emerald-600 text-white px-3 py-2 rounded-xl hover:bg-emerald-500 transition",title:"Exportar a PDF",children:[l.jsx(GA,{size:18})," PDF"]})]})]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[l.jsx(I,{icon:l.jsx(P_,{className:"w-5 h-5 text-indigo-600"}),label:"Máquinas registradas",value:e.length,accent:"from-indigo-500 to-sky-500"}),l.jsx(I,{icon:l.jsx(GA,{className:"w-5 h-5 text-sky-600"}),label:"Registros",value:T.length,accent:"from-sky-500 to-cyan-500"}),l.jsx(I,{icon:l.jsx(oQ,{className:"w-5 h-5 text-emerald-600"}),label:"Horas totales (filtradas)",value:B.toFixed(1),accent:"from-emerald-500 to-lime-500"}),l.jsx(I,{icon:l.jsx(yd,{className:"w-5 h-5 text-amber-600"}),label:"Última actualización",value:(X=r[0])!=null&&X.fecha?new Date(r[0].fecha).toLocaleDateString():"—",accent:"from-amber-500 to-rose-400"})]}),l.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-8",children:[l.jsx("div",{className:"xl:col-span-3",children:l.jsx(U,{title:o?`Editando registro #${o.id.slice(0,4)}`:"Nuevo registro de uso",icon:l.jsx(Kbe,{size:18}),children:l.jsx(P,{})})}),l.jsx("div",{className:"xl:col-span-2 order-1 xl:order-none",children:l.jsx(U,{title:"Uso por máquina (horas)",icon:l.jsx(Ry,{size:18}),accent:"from-indigo-600/10 via-sky-500/10 to-amber-500/10",right:l.jsx("div",{className:"flex gap-2 items-center",children:D(`${w.length} máquinas`,"bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200")}),children:l.jsx("div",{className:"h-[320px] w-full",children:l.jsx(_y,{width:"100%",height:"100%",children:l.jsxs(xO,{data:w,margin:{top:8,right:16,bottom:8,left:0},children:[l.jsx(sN,{strokeDasharray:"3 3"}),l.jsx(Xw,{dataKey:"maquina",tick:{fontSize:12},interval:0,angle:0,height:50}),l.jsx(Yw,{}),l.jsx(Cy,{}),l.jsx(tk,{}),l.jsx(rN,{dataKey:"horas",name:"Horas",fill:"#6366F1",radius:[6,6,0,0]})]})})})})}),l.jsx("div",{className:"xl:col-span-1 order-2 xl:order-none",children:l.jsxs(U,{title:"Administrar máquinas",icon:l.jsx(P_,{size:18}),accent:"from-emerald-600/10 via-sky-500/10 to-indigo-600/10",children:[l.jsxs("form",{onSubmit:b,className:"grid grid-cols-1 md:grid-cols-5 gap-2 mb-4",children:[l.jsx("input",{value:d.nombre,onChange:H=>f({...d,nombre:H.target.value}),placeholder:"Nombre máquina",className:M+" md:col-span-2"}),l.jsxs("select",{value:d.especialidad,onChange:H=>f({...d,especialidad:H.target.value}),className:M+" md:col-span-2",children:[l.jsx("option",{value:"Industrial",children:"Industrial"}),l.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),l.jsxs("button",{type:"submit",className:"inline-flex items-center justify-center gap-2 bg-indigo-600 text-white font-semibold py-2 px-3 rounded-xl hover:bg-indigo-500 transition md:col-span-1",children:[h?l.jsx(pw,{size:16}):l.jsx(th,{size:16}),h?"Guardar":"Agregar"]})]}),l.jsx("ul",{className:"space-y-2 max-h-72 overflow-y-auto pr-1",children:e.map(H=>l.jsxs("li",{className:"flex justify-between items-center bg-gradient-to-r from-slate-50 to-white dark:from-slate-800/60 dark:to-slate-800/30 border border-slate-200 dark:border-slate-700 p-3 rounded-xl",children:[l.jsxs("div",{className:"space-y-0.5",children:[l.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:H.nombre}),l.jsx("div",{className:"text-xs",children:H.especialidad==="Industrial"?D("Industrial","bg-indigo-50 text-indigo-700 dark:bg-indigo-500/20 dark:text-indigo-200"):D("Automotriz","bg-emerald-50 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-200")})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>{p(H),f(H)},className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Editar",children:l.jsx(CF,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>y(H.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition",title:"Eliminar",children:l.jsx(Dd,{size:16,className:"text-red-600"})})]})]},H.id))})]})}),l.jsx("div",{className:"xl:col-span-2 order-3",children:l.jsxs(U,{title:"Historial de uso",icon:l.jsx(GA,{size:18}),accent:"from-rose-500/10 via-amber-400/10 to-indigo-500/10",right:l.jsx("div",{className:"flex items-center gap-2",children:l.jsx(oP,{size:16,className:"text-slate-600"})}),children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[l.jsx("input",{type:"date",value:g.fecha,onChange:H=>v({...g,fecha:H.target.value}),className:M,placeholder:"Fecha"}),l.jsxs("select",{value:g.curso,onChange:H=>v({...g,curso:H.target.value}),className:M,children:[l.jsx("option",{value:"",children:"Todos los Cursos"}),ks.map(H=>l.jsx("option",{children:H},H))]}),l.jsxs("select",{value:g.maquinaId,onChange:H=>v({...g,maquinaId:H.target.value}),className:M,children:[l.jsx("option",{value:"",children:"Todas las Máquinas"}),e.map(H=>l.jsx("option",{value:H.id,children:H.nombre},H.id))]}),l.jsxs("div",{className:"relative",children:[l.jsx(US,{size:16,className:"absolute left-3 top-2.5 text-slate-400"}),l.jsx("input",{value:g.profesor,onChange:H=>v({...g,profesor:H.target.value}),placeholder:"Buscar profesor...",className:M+" pl-9"})]})]}),l.jsx("div",{className:"max-h-[420px] overflow-y-auto border border-slate-200 dark:border-slate-800 rounded-xl",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-800",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-800 sticky top-0 z-10",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Fecha"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Máquina"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Profesor / Curso"}),l.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 uppercase",children:"Total Horas"}),l.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-600 uppercase",children:"Acciones"})]})}),l.jsxs("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-800",children:[T.map(H=>{var Y;return l.jsxs("tr",{className:"hover:bg-slate-50/60 dark:hover:bg-slate-800/50 transition",children:[l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:H.fecha}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((Y=S.get(H.maquinaId))==null?void 0:Y.nombre)||"N/A"}),l.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[H.profesorResponsable," ",l.jsxs("span",{className:"text-slate-400",children:["(",H.curso,")"]})]}),l.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:H.totalHoras}),l.jsxs("td",{className:"px-3 py-2 text-center",children:[l.jsx("button",{onClick:()=>c(H),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Editar",children:l.jsx(CF,{size:16,className:"text-blue-600"})}),l.jsx("button",{onClick:()=>N(H.id),className:"p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-800 transition",title:"Eliminar",children:l.jsx(Dd,{size:16,className:"text-red-600"})})]})]},H.id)}),T.length===0&&l.jsx("tr",{children:l.jsx("td",{className:"px-3 py-6 text-center text-sm text-slate-500",colSpan:5,children:"No hay registros que coincidan con los filtros."})})]})]})})]})})]})]})};function El(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=El(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}const Prt={},eW=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const p=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(g=>g(t,p))}},a=()=>t,c={setState:n,getState:a,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Prt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,a,c);return c},Rrt=e=>e?eW(e):eW,{useDebugValue:Lrt}=lt,{useSyncExternalStoreWithSelector:Mrt}=L7e,Urt=e=>e;function mce(e,t=Urt,r){const n=Mrt(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Lrt(n),n}const tW=(e,t)=>{const r=Rrt(e),n=(a,s=t)=>mce(r,a,s);return Object.assign(n,r),n},Qrt=(e,t)=>e?tW(e,t):tW;function rl(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,a]of e)if(!Object.is(a,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}var Hrt={value:()=>{}};function Ck(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new W_(r)}function W_(e){this._=e}function Vrt(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}W_.prototype=Ck.prototype={constructor:W_,on:function(e,t){var r=this._,n=Vrt(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=zrt(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=rW(r[a],e.name,t);else if(t==null)for(a in r)r[a]=rW(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new W_(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function zrt(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function rW(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Hrt,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var yO="http://www.w3.org/1999/xhtml";const nW={svg:"http://www.w3.org/2000/svg",xhtml:yO,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _k(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),nW.hasOwnProperty(t)?{space:nW[t],local:e}:e}function $rt(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===yO&&t.documentElement.namespaceURI===yO?t.createElement(e):t.createElementNS(r,e)}}function Grt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function pce(e){var t=_k(e);return(t.local?Grt:$rt)(t)}function Krt(){}function B8(e){return e==null?Krt:function(){return this.querySelector(e)}}function qrt(e){typeof e!="function"&&(e=B8(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),o[d]=u);return new Qc(n,this._parents)}function Wrt(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Xrt(){return[]}function gce(e){return e==null?Xrt:function(){return this.querySelectorAll(e)}}function Yrt(e){return function(){return Wrt(e.apply(this,arguments))}}function Jrt(e){typeof e=="function"?e=Yrt(e):e=gce(e);for(var t=this._groups,r=t.length,n=[],a=[],s=0;s<r;++s)for(var i=t[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&(n.push(e.call(c,c.__data__,u,i)),a.push(c));return new Qc(n,a)}function vce(e){return function(){return this.matches(e)}}function xce(e){return function(t){return t.matches(e)}}var Zrt=Array.prototype.find;function ent(e){return function(){return Zrt.call(this.children,e)}}function tnt(){return this.firstElementChild}function rnt(e){return this.select(e==null?tnt:ent(typeof e=="function"?e:xce(e)))}var nnt=Array.prototype.filter;function ant(){return Array.from(this.children)}function snt(e){return function(){return nnt.call(this.children,e)}}function int(e){return this.selectAll(e==null?ant:snt(typeof e=="function"?e:xce(e)))}function ont(e){typeof e!="function"&&(e=vce(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new Qc(n,this._parents)}function bce(e){return new Array(e.length)}function lnt(){return new Qc(this._enter||this._groups.map(bce),this._parents)}function oN(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}oN.prototype={constructor:oN,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cnt(e){return function(){return e}}function unt(e,t,r,n,a,s){for(var i=0,o,c=t.length,u=s.length;i<u;++i)(o=t[i])?(o.__data__=s[i],n[i]=o):r[i]=new oN(e,s[i]);for(;i<c;++i)(o=t[i])&&(a[i]=o)}function dnt(e,t,r,n,a,s,i){var o,c,u=new Map,d=t.length,f=s.length,h=new Array(d),p;for(o=0;o<d;++o)(c=t[o])&&(h[o]=p=i.call(c,c.__data__,o,t)+"",u.has(p)?a[o]=c:u.set(p,c));for(o=0;o<f;++o)p=i.call(e,s[o],o,s)+"",(c=u.get(p))?(n[o]=c,c.__data__=s[o],u.delete(p)):r[o]=new oN(e,s[o]);for(o=0;o<d;++o)(c=t[o])&&u.get(h[o])===c&&(a[o]=c)}function Ant(e){return e.__data__}function fnt(e,t){if(!arguments.length)return Array.from(this,Ant);var r=t?dnt:unt,n=this._parents,a=this._groups;typeof e!="function"&&(e=cnt(e));for(var s=a.length,i=new Array(s),o=new Array(s),c=new Array(s),u=0;u<s;++u){var d=n[u],f=a[u],h=f.length,p=hnt(e.call(d,d&&d.__data__,u,n)),g=p.length,v=o[u]=new Array(g),b=i[u]=new Array(g),y=c[u]=new Array(h);r(d,f,v,b,y,p,t);for(var C=0,N=0,T,S;C<g;++C)if(T=v[C]){for(C>=N&&(N=C+1);!(S=b[N])&&++N<g;);T._next=S||null}}return i=new Qc(i,n),i._enter=o,i._exit=c,i}function hnt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mnt(){return new Qc(this._exit||this._groups.map(bce),this._parents)}function pnt(e,t,r){var n=this.enter(),a=this,s=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),r==null?s.remove():r(s),n&&a?n.merge(a).order():a}function gnt(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,a=r.length,s=n.length,i=Math.min(a,s),o=new Array(a),c=0;c<i;++c)for(var u=r[c],d=n[c],f=u.length,h=o[c]=new Array(f),p,g=0;g<f;++g)(p=u[g]||d[g])&&(h[g]=p);for(;c<a;++c)o[c]=r[c];return new Qc(o,this._parents)}function vnt(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],a=n.length-1,s=n[a],i;--a>=0;)(i=n[a])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function xnt(e){e||(e=bnt);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var r=this._groups,n=r.length,a=new Array(n),s=0;s<n;++s){for(var i=r[s],o=i.length,c=a[s]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new Qc(a,this._parents).order()}function bnt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ynt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wnt(){return Array.from(this)}function Ent(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length;a<s;++a){var i=n[a];if(i)return i}return null}function Cnt(){let e=0;for(const t of this)++e;return e}function _nt(){return!this.node()}function Snt(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var a=t[r],s=0,i=a.length,o;s<i;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this}function Nnt(e){return function(){this.removeAttribute(e)}}function knt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Bnt(e,t){return function(){this.setAttribute(e,t)}}function Tnt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function jnt(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function Int(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Fnt(e,t){var r=_k(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?knt:Nnt:typeof t=="function"?r.local?Int:jnt:r.local?Tnt:Bnt)(r,t))}function yce(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ont(e){return function(){this.style.removeProperty(e)}}function Dnt(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Pnt(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Rnt(e,t,r){return arguments.length>1?this.each((t==null?Ont:typeof t=="function"?Pnt:Dnt)(e,t,r??"")):i1(this.node(),e)}function i1(e,t){return e.style.getPropertyValue(t)||yce(e).getComputedStyle(e,null).getPropertyValue(t)}function Lnt(e){return function(){delete this[e]}}function Mnt(e,t){return function(){this[e]=t}}function Unt(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Qnt(e,t){return arguments.length>1?this.each((t==null?Lnt:typeof t=="function"?Unt:Mnt)(e,t)):this.node()[e]}function wce(e){return e.trim().split(/^|\s+/)}function T8(e){return e.classList||new Ece(e)}function Ece(e){this._node=e,this._names=wce(e.getAttribute("class")||"")}Ece.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Cce(e,t){for(var r=T8(e),n=-1,a=t.length;++n<a;)r.add(t[n])}function _ce(e,t){for(var r=T8(e),n=-1,a=t.length;++n<a;)r.remove(t[n])}function Hnt(e){return function(){Cce(this,e)}}function Vnt(e){return function(){_ce(this,e)}}function znt(e,t){return function(){(t.apply(this,arguments)?Cce:_ce)(this,e)}}function $nt(e,t){var r=wce(e+"");if(arguments.length<2){for(var n=T8(this.node()),a=-1,s=r.length;++a<s;)if(!n.contains(r[a]))return!1;return!0}return this.each((typeof t=="function"?znt:t?Hnt:Vnt)(r,t))}function Gnt(){this.textContent=""}function Knt(e){return function(){this.textContent=e}}function qnt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Wnt(e){return arguments.length?this.each(e==null?Gnt:(typeof e=="function"?qnt:Knt)(e)):this.node().textContent}function Xnt(){this.innerHTML=""}function Ynt(e){return function(){this.innerHTML=e}}function Jnt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Znt(e){return arguments.length?this.each(e==null?Xnt:(typeof e=="function"?Jnt:Ynt)(e)):this.node().innerHTML}function eat(){this.nextSibling&&this.parentNode.appendChild(this)}function tat(){return this.each(eat)}function rat(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function nat(){return this.each(rat)}function aat(e){var t=typeof e=="function"?e:pce(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sat(){return null}function iat(e,t){var r=typeof e=="function"?e:pce(e),n=t==null?sat:typeof t=="function"?t:B8(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function oat(){var e=this.parentNode;e&&e.removeChild(this)}function lat(){return this.each(oat)}function cat(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function uat(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dat(e){return this.select(e?uat:cat)}function Aat(e){return arguments.length?this.property("__data__",e):this.node().__data__}function fat(e){return function(t){e.call(this,t,this.__data__)}}function hat(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function mat(e){return function(){var t=this.__on;if(t){for(var r=0,n=-1,a=t.length,s;r<a;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++n]=s;++n?t.length=n:delete this.__on}}}function pat(e,t,r){return function(){var n=this.__on,a,s=fat(t);if(n){for(var i=0,o=n.length;i<o;++i)if((a=n[i]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=s,a.options=r),a.value=t;return}}this.addEventListener(e.type,s,r),a={type:e.type,name:e.name,value:t,listener:s,options:r},n?n.push(a):this.__on=[a]}}function gat(e,t,r){var n=hat(e+""),a,s=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var c=0,u=o.length,d;c<u;++c)for(a=0,d=o[c];a<s;++a)if((i=n[a]).type===d.type&&i.name===d.name)return d.value}return}for(o=t?pat:mat,a=0;a<s;++a)this.each(o(n[a],t,r));return this}function Sce(e,t,r){var n=yce(e),a=n.CustomEvent;typeof a=="function"?a=new a(t,r):(a=n.document.createEvent("Event"),r?(a.initEvent(t,r.bubbles,r.cancelable),a.detail=r.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function vat(e,t){return function(){return Sce(this,e,t)}}function xat(e,t){return function(){return Sce(this,e,t.apply(this,arguments))}}function bat(e,t){return this.each((typeof t=="function"?xat:vat)(e,t))}function*yat(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],a=0,s=n.length,i;a<s;++a)(i=n[a])&&(yield i)}var Nce=[null];function Qc(e,t){this._groups=e,this._parents=t}function X2(){return new Qc([[document.documentElement]],Nce)}function wat(){return this}Qc.prototype=X2.prototype={constructor:Qc,select:qrt,selectAll:Jrt,selectChild:rnt,selectChildren:int,filter:ont,data:fnt,enter:lnt,exit:mnt,join:pnt,merge:gnt,selection:wat,order:vnt,sort:xnt,call:ynt,nodes:wnt,node:Ent,size:Cnt,empty:_nt,each:Snt,attr:Fnt,style:Rnt,property:Qnt,classed:$nt,text:Wnt,html:Znt,raise:tat,lower:nat,append:aat,insert:iat,remove:lat,clone:dat,datum:Aat,on:gat,dispatch:bat,[Symbol.iterator]:yat};function Su(e){return typeof e=="string"?new Qc([[document.querySelector(e)]],[document.documentElement]):new Qc([[e]],Nce)}function Eat(e){let t;for(;t=e.sourceEvent;)e=t;return e}function kA(e,t){if(e=Eat(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const Cat={passive:!1},Jw={capture:!0,passive:!1};function vI(e){e.stopImmediatePropagation()}function Ex(e){e.preventDefault(),e.stopImmediatePropagation()}function kce(e){var t=e.document.documentElement,r=Su(e).on("dragstart.drag",Ex,Jw);"onselectstart"in t?r.on("selectstart.drag",Ex,Jw):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Bce(e,t){var r=e.document.documentElement,n=Su(e).on("dragstart.drag",null);t&&(n.on("click.drag",Ex,Jw),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const u_=e=>()=>e;function wO(e,{sourceEvent:t,subject:r,target:n,identifier:a,active:s,x:i,y:o,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}wO.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function _at(e){return!e.ctrlKey&&!e.button}function Sat(){return this.parentNode}function Nat(e,t){return t??{x:e.x,y:e.y}}function kat(){return navigator.maxTouchPoints||"ontouchstart"in this}function Bat(){var e=_at,t=Sat,r=Nat,n=kat,a={},s=Ck("start","drag","end"),i=0,o,c,u,d,f=0;function h(T){T.on("mousedown.drag",p).filter(n).on("touchstart.drag",b).on("touchmove.drag",y,Cat).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(T,S){if(!(d||!e.call(this,T,S))){var B=N(this,t.call(this,T,S),T,S,"mouse");B&&(Su(T.view).on("mousemove.drag",g,Jw).on("mouseup.drag",v,Jw),kce(T.view),vI(T),u=!1,o=T.clientX,c=T.clientY,B("start",T))}}function g(T){if(Ex(T),!u){var S=T.clientX-o,B=T.clientY-c;u=S*S+B*B>f}a.mouse("drag",T)}function v(T){Su(T.view).on("mousemove.drag mouseup.drag",null),Bce(T.view,u),Ex(T),a.mouse("end",T)}function b(T,S){if(e.call(this,T,S)){var B=T.changedTouches,w=t.call(this,T,S),_=B.length,F,M;for(F=0;F<_;++F)(M=N(this,w,T,S,B[F].identifier,B[F]))&&(vI(T),M("start",T,B[F]))}}function y(T){var S=T.changedTouches,B=S.length,w,_;for(w=0;w<B;++w)(_=a[S[w].identifier])&&(Ex(T),_("drag",T,S[w]))}function C(T){var S=T.changedTouches,B=S.length,w,_;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),w=0;w<B;++w)(_=a[S[w].identifier])&&(vI(T),_("end",T,S[w]))}function N(T,S,B,w,_,F){var M=s.copy(),D=kA(F||B,S),I,U,P;if((P=r.call(T,new wO("beforestart",{sourceEvent:B,target:h,identifier:_,active:i,x:D[0],y:D[1],dx:0,dy:0,dispatch:M}),w))!=null)return I=P.x-D[0]||0,U=P.y-D[1]||0,function X(H,Y,V){var z=D,G;switch(H){case"start":a[_]=X,G=i++;break;case"end":delete a[_],--i;case"drag":D=kA(V||Y,S),G=i;break}M.call(H,T,new wO(H,{sourceEvent:Y,subject:P,target:h,identifier:_,active:G,x:D[0]+I,y:D[1]+U,dx:D[0]-z[0],dy:D[1]-z[1],dispatch:M}),w)}}return h.filter=function(T){return arguments.length?(e=typeof T=="function"?T:u_(!!T),h):e},h.container=function(T){return arguments.length?(t=typeof T=="function"?T:u_(T),h):t},h.subject=function(T){return arguments.length?(r=typeof T=="function"?T:u_(T),h):r},h.touchable=function(T){return arguments.length?(n=typeof T=="function"?T:u_(!!T),h):n},h.on=function(){var T=s.on.apply(s,arguments);return T===s?h:T},h.clickDistance=function(T){return arguments.length?(f=(T=+T)*T,h):Math.sqrt(f)},h}var o1=0,Sy=0,Xb=0,Tce=1e3,lN,Ny,cN=0,dg=0,Sk=0,Zw=typeof performance=="object"&&performance.now?performance:Date,jce=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function j8(){return dg||(jce(Tat),dg=Zw.now()+Sk)}function Tat(){dg=0}function uN(){this._call=this._time=this._next=null}uN.prototype=Ice.prototype={constructor:uN,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?j8():+r)+(t==null?0:+t),!this._next&&Ny!==this&&(Ny?Ny._next=this:lN=this,Ny=this),this._call=e,this._time=r,EO()},stop:function(){this._call&&(this._call=null,this._time=1/0,EO())}};function Ice(e,t,r){var n=new uN;return n.restart(e,t,r),n}function jat(){j8(),++o1;for(var e=lN,t;e;)(t=dg-e._time)>=0&&e._call.call(void 0,t),e=e._next;--o1}function aW(){dg=(cN=Zw.now())+Sk,o1=Sy=0;try{jat()}finally{o1=0,Fat(),dg=0}}function Iat(){var e=Zw.now(),t=e-cN;t>Tce&&(Sk-=t,cN=e)}function Fat(){for(var e,t=lN,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:lN=r);Ny=e,EO(n)}function EO(e){if(!o1){Sy&&(Sy=clearTimeout(Sy));var t=e-dg;t>24?(e<1/0&&(Sy=setTimeout(aW,e-Zw.now()-Sk)),Xb&&(Xb=clearInterval(Xb))):(Xb||(cN=Zw.now(),Xb=setInterval(Iat,Tce)),o1=1,jce(aW))}}function sW(e,t,r){var n=new uN;return t=t==null?0:+t,n.restart(a=>{n.stop(),e(a+t)},t,r),n}var Oat=Ck("start","end","cancel","interrupt"),Dat=[],Fce=0,iW=1,CO=2,X_=3,oW=4,_O=5,Y_=6;function Nk(e,t,r,n,a,s){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;Pat(e,r,{name:t,index:n,group:a,on:Oat,tween:Dat,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Fce})}function I8(e,t){var r=Vd(e,t);if(r.state>Fce)throw new Error("too late; already scheduled");return r}function af(e,t){var r=Vd(e,t);if(r.state>X_)throw new Error("too late; already running");return r}function Vd(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Pat(e,t,r){var n=e.__transition,a;n[t]=r,r.timer=Ice(s,0,r.time);function s(u){r.state=iW,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,f,h,p;if(r.state!==iW)return c();for(d in n)if(p=n[d],p.name===r.name){if(p.state===X_)return sW(i);p.state===oW?(p.state=Y_,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete n[d]):+d<t&&(p.state=Y_,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete n[d])}if(sW(function(){r.state===X_&&(r.state=oW,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=CO,r.on.call("start",e,e.__data__,r.index,r.group),r.state===CO){for(r.state=X_,a=new Array(h=r.tween.length),d=0,f=-1;d<h;++d)(p=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(a[++f]=p);a.length=f+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(c),r.state=_O,1),f=-1,h=a.length;++f<h;)a[f].call(e,d);r.state===_O&&(r.on.call("end",e,e.__data__,r.index,r.group),c())}function c(){r.state=Y_,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function J_(e,t){var r=e.__transition,n,a,s=!0,i;if(r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){s=!1;continue}a=n.state>CO&&n.state<_O,n.state=Y_,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}s&&delete e.__transition}}function Rat(e){return this.each(function(){J_(this,e)})}function Lat(e,t){var r,n;return function(){var a=af(this,e),s=a.tween;if(s!==r){n=r=s;for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}a.tween=n}}function Mat(e,t,r){var n,a;if(typeof r!="function")throw new Error;return function(){var s=af(this,e),i=s.tween;if(i!==n){a=(n=i).slice();for(var o={name:t,value:r},c=0,u=a.length;c<u;++c)if(a[c].name===t){a[c]=o;break}c===u&&a.push(o)}s.tween=a}}function Uat(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=Vd(this.node(),r).tween,a=0,s=n.length,i;a<s;++a)if((i=n[a]).name===e)return i.value;return null}return this.each((t==null?Lat:Mat)(r,e,t))}function F8(e,t,r){var n=e._id;return e.each(function(){var a=af(this,n);(a.value||(a.value={}))[t]=r.apply(this,arguments)}),function(a){return Vd(a,n).value[t]}}function Oce(e,t){var r;return(typeof t=="number"?pd:t instanceof cg?Q5:(r=cg(t))?(t=r,Q5):uie)(e,t)}function Qat(e){return function(){this.removeAttribute(e)}}function Hat(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vat(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttribute(e);return i===a?null:i===n?s:s=t(n=i,r)}}function zat(e,t,r){var n,a=r+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===n?s:s=t(n=i,r)}}function $at(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function Gat(e,t,r){var n,a,s;return function(){var i,o=r(this),c;return o==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=o+"",i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o)))}}function Kat(e,t){var r=_k(e),n=r==="transform"?oze:Oce;return this.attrTween(e,typeof t=="function"?(r.local?Gat:$at)(r,n,F8(this,"attr."+e,t)):t==null?(r.local?Hat:Qat)(r):(r.local?zat:Vat)(r,n,t))}function qat(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Wat(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Xat(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&Wat(e,s)),r}return a._value=t,a}function Yat(e,t){var r,n;function a(){var s=t.apply(this,arguments);return s!==n&&(r=(n=s)&&qat(e,s)),r}return a._value=t,a}function Jat(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=_k(e);return this.tween(r,(n.local?Xat:Yat)(n,t))}function Zat(e,t){return function(){I8(this,e).delay=+t.apply(this,arguments)}}function est(e,t){return t=+t,function(){I8(this,e).delay=t}}function tst(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zat:est)(t,e)):Vd(this.node(),t).delay}function rst(e,t){return function(){af(this,e).duration=+t.apply(this,arguments)}}function nst(e,t){return t=+t,function(){af(this,e).duration=t}}function ast(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rst:nst)(t,e)):Vd(this.node(),t).duration}function sst(e,t){if(typeof t!="function")throw new Error;return function(){af(this,e).ease=t}}function ist(e){var t=this._id;return arguments.length?this.each(sst(t,e)):Vd(this.node(),t).ease}function ost(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;af(this,e).ease=r}}function lst(e){if(typeof e!="function")throw new Error;return this.each(ost(this._id,e))}function cst(e){typeof e!="function"&&(e=vce(e));for(var t=this._groups,r=t.length,n=new Array(r),a=0;a<r;++a)for(var s=t[a],i=s.length,o=n[a]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&o.push(c);return new _h(n,this._parents,this._name,this._id)}function ust(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,a=r.length,s=Math.min(n,a),i=new Array(n),o=0;o<s;++o)for(var c=t[o],u=r[o],d=c.length,f=i[o]=new Array(d),h,p=0;p<d;++p)(h=c[p]||u[p])&&(f[p]=h);for(;o<n;++o)i[o]=t[o];return new _h(i,this._parents,this._name,this._id)}function dst(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Ast(e,t,r){var n,a,s=dst(t)?I8:af;return function(){var i=s(this,e),o=i.on;o!==n&&(a=(n=o).copy()).on(t,r),i.on=a}}function fst(e,t){var r=this._id;return arguments.length<2?Vd(this.node(),r).on.on(e):this.each(Ast(r,e,t))}function hst(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function mst(){return this.on("end.remove",hst(this._id))}function pst(e){var t=this._name,r=this._id;typeof e!="function"&&(e=B8(e));for(var n=this._groups,a=n.length,s=new Array(a),i=0;i<a;++i)for(var o=n[i],c=o.length,u=s[i]=new Array(c),d,f,h=0;h<c;++h)(d=o[h])&&(f=e.call(d,d.__data__,h,o))&&("__data__"in d&&(f.__data__=d.__data__),u[h]=f,Nk(u[h],t,r,h,u,Vd(d,r)));return new _h(s,this._parents,t,r)}function gst(e){var t=this._name,r=this._id;typeof e!="function"&&(e=gce(e));for(var n=this._groups,a=n.length,s=[],i=[],o=0;o<a;++o)for(var c=n[o],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var h=e.call(d,d.__data__,f,c),p,g=Vd(d,r),v=0,b=h.length;v<b;++v)(p=h[v])&&Nk(p,t,r,v,h,g);s.push(h),i.push(d)}return new _h(s,i,t,r)}var vst=X2.prototype.constructor;function xst(){return new vst(this._groups,this._parents)}function bst(e,t){var r,n,a;return function(){var s=i1(this,e),i=(this.style.removeProperty(e),i1(this,e));return s===i?null:s===r&&i===n?a:a=t(r=s,n=i)}}function Dce(e){return function(){this.style.removeProperty(e)}}function yst(e,t,r){var n,a=r+"",s;return function(){var i=i1(this,e);return i===a?null:i===n?s:s=t(n=i,r)}}function wst(e,t,r){var n,a,s;return function(){var i=i1(this,e),o=r(this),c=o+"";return o==null&&(c=o=(this.style.removeProperty(e),i1(this,e))),i===c?null:i===n&&c===a?s:(a=c,s=t(n=i,o))}}function Est(e,t){var r,n,a,s="style."+t,i="end."+s,o;return function(){var c=af(this,e),u=c.on,d=c.value[s]==null?o||(o=Dce(t)):void 0;(u!==r||a!==d)&&(n=(r=u).copy()).on(i,a=d),c.on=n}}function Cst(e,t,r){var n=(e+="")=="transform"?ize:Oce;return t==null?this.styleTween(e,bst(e,n)).on("end.style."+e,Dce(e)):typeof t=="function"?this.styleTween(e,wst(e,n,F8(this,"style."+e,t))).each(Est(this._id,e)):this.styleTween(e,yst(e,n,t),r).on("end.style."+e,null)}function _st(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Sst(e,t,r){var n,a;function s(){var i=t.apply(this,arguments);return i!==a&&(n=(a=i)&&_st(e,i,r)),n}return s._value=t,s}function Nst(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Sst(e,t,r??""))}function kst(e){return function(){this.textContent=e}}function Bst(e){return function(){var t=e(this);this.textContent=t??""}}function Tst(e){return this.tween("text",typeof e=="function"?Bst(F8(this,"text",e)):kst(e==null?"":e+""))}function jst(e){return function(t){this.textContent=e.call(this,t)}}function Ist(e){var t,r;function n(){var a=e.apply(this,arguments);return a!==r&&(t=(r=a)&&jst(a)),t}return n._value=e,n}function Fst(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ist(e))}function Ost(){for(var e=this._name,t=this._id,r=Pce(),n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)if(c=i[u]){var d=Vd(c,t);Nk(c,e,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new _h(n,this._parents,e,r)}function Dst(){var e,t,r=this,n=r._id,a=r.size();return new Promise(function(s,i){var o={value:i},c={value:function(){--a===0&&s()}};r.each(function(){var u=af(this,n),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(c)),u.on=t}),a===0&&s()})}var Pst=0;function _h(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Pce(){return++Pst}var Mf=X2.prototype;_h.prototype={constructor:_h,select:pst,selectAll:gst,selectChild:Mf.selectChild,selectChildren:Mf.selectChildren,filter:cst,merge:ust,selection:xst,transition:Ost,call:Mf.call,nodes:Mf.nodes,node:Mf.node,size:Mf.size,empty:Mf.empty,each:Mf.each,on:fst,attr:Kat,attrTween:Jat,style:Cst,styleTween:Nst,text:Tst,textTween:Fst,remove:mst,tween:Uat,delay:tst,duration:ast,ease:ist,easeVarying:lst,end:Dst,[Symbol.iterator]:Mf[Symbol.iterator]};function Rst(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Lst={time:null,delay:0,duration:250,ease:Rst};function Mst(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function Ust(e){var t,r;e instanceof _h?(t=e._id,e=e._name):(t=Pce(),(r=Lst).time=j8(),e=e==null?null:e+"");for(var n=this._groups,a=n.length,s=0;s<a;++s)for(var i=n[s],o=i.length,c,u=0;u<o;++u)(c=i[u])&&Nk(c,e,t,u,i,r||Mst(c,t));return new _h(n,this._parents,e,t)}X2.prototype.interrupt=Rat;X2.prototype.transition=Ust;const d_=e=>()=>e;function Qst(e,{sourceEvent:t,target:r,transform:n,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:a}})}function Yf(e,t,r){this.k=e,this.x=t,this.y=r}Yf.prototype={constructor:Yf,scale:function(e){return e===1?this:new Yf(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Yf(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var am=new Yf(1,0,0);Yf.prototype;function xI(e){e.stopImmediatePropagation()}function Yb(e){e.preventDefault(),e.stopImmediatePropagation()}function Hst(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Vst(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function lW(){return this.__zoom||am}function zst(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function $st(){return navigator.maxTouchPoints||"ontouchstart"in this}function Gst(e,t,r){var n=e.invertX(t[0][0])-r[0][0],a=e.invertX(t[1][0])-r[1][0],s=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(a>n?(n+a)/2:Math.min(0,n)||Math.max(0,a),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function Kst(){var e=Hst,t=Vst,r=Gst,n=zst,a=$st,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,c=dze,u=Ck("start","zoom","end"),d,f,h,p=500,g=150,v=0,b=10;function y(P){P.property("__zoom",lW).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",F).on("dblclick.zoom",M).filter(a).on("touchstart.zoom",D).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",U).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(P,X,H,Y){var V=P.selection?P.selection():P;V.property("__zoom",lW),P!==V?S(P,X,H,Y):V.interrupt().each(function(){B(this,arguments).event(Y).start().zoom(null,typeof X=="function"?X.apply(this,arguments):X).end()})},y.scaleBy=function(P,X,H,Y){y.scaleTo(P,function(){var V=this.__zoom.k,z=typeof X=="function"?X.apply(this,arguments):X;return V*z},H,Y)},y.scaleTo=function(P,X,H,Y){y.transform(P,function(){var V=t.apply(this,arguments),z=this.__zoom,G=H==null?T(V):typeof H=="function"?H.apply(this,arguments):H,re=z.invert(G),R=typeof X=="function"?X.apply(this,arguments):X;return r(N(C(z,R),G,re),V,i)},H,Y)},y.translateBy=function(P,X,H,Y){y.transform(P,function(){return r(this.__zoom.translate(typeof X=="function"?X.apply(this,arguments):X,typeof H=="function"?H.apply(this,arguments):H),t.apply(this,arguments),i)},null,Y)},y.translateTo=function(P,X,H,Y,V){y.transform(P,function(){var z=t.apply(this,arguments),G=this.__zoom,re=Y==null?T(z):typeof Y=="function"?Y.apply(this,arguments):Y;return r(am.translate(re[0],re[1]).scale(G.k).translate(typeof X=="function"?-X.apply(this,arguments):-X,typeof H=="function"?-H.apply(this,arguments):-H),z,i)},Y,V)};function C(P,X){return X=Math.max(s[0],Math.min(s[1],X)),X===P.k?P:new Yf(X,P.x,P.y)}function N(P,X,H){var Y=X[0]-H[0]*P.k,V=X[1]-H[1]*P.k;return Y===P.x&&V===P.y?P:new Yf(P.k,Y,V)}function T(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function S(P,X,H,Y){P.on("start.zoom",function(){B(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){B(this,arguments).event(Y).end()}).tween("zoom",function(){var V=this,z=arguments,G=B(V,z).event(Y),re=t.apply(V,z),R=H==null?T(re):typeof H=="function"?H.apply(V,z):H,q=Math.max(re[1][0]-re[0][0],re[1][1]-re[0][1]),J=V.__zoom,te=typeof X=="function"?X.apply(V,z):X,ie=c(J.invert(R).concat(q/J.k),te.invert(R).concat(q/te.k));return function(Ae){if(Ae===1)Ae=te;else{var oe=ie(Ae),ce=q/oe[2];Ae=new Yf(ce,R[0]-oe[0]*ce,R[1]-oe[1]*ce)}G.zoom(null,Ae)}})}function B(P,X,H){return!H&&P.__zooming||new w(P,X)}function w(P,X){this.that=P,this.args=X,this.active=0,this.sourceEvent=null,this.extent=t.apply(P,X),this.taps=0}w.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,X){return this.mouse&&P!=="mouse"&&(this.mouse[1]=X.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=X.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=X.invert(this.touch1[0])),this.that.__zoom=X,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var X=Su(this.that).datum();u.call(P,this.that,new Qst(P,{sourceEvent:this.sourceEvent,target:y,transform:this.that.__zoom,dispatch:u}),X)}};function _(P,...X){if(!e.apply(this,arguments))return;var H=B(this,X).event(P),Y=this.__zoom,V=Math.max(s[0],Math.min(s[1],Y.k*Math.pow(2,n.apply(this,arguments)))),z=kA(P);if(H.wheel)(H.mouse[0][0]!==z[0]||H.mouse[0][1]!==z[1])&&(H.mouse[1]=Y.invert(H.mouse[0]=z)),clearTimeout(H.wheel);else{if(Y.k===V)return;H.mouse=[z,Y.invert(z)],J_(this),H.start()}Yb(P),H.wheel=setTimeout(G,g),H.zoom("mouse",r(N(C(Y,V),H.mouse[0],H.mouse[1]),H.extent,i));function G(){H.wheel=null,H.end()}}function F(P,...X){if(h||!e.apply(this,arguments))return;var H=P.currentTarget,Y=B(this,X,!0).event(P),V=Su(P.view).on("mousemove.zoom",R,!0).on("mouseup.zoom",q,!0),z=kA(P,H),G=P.clientX,re=P.clientY;kce(P.view),xI(P),Y.mouse=[z,this.__zoom.invert(z)],J_(this),Y.start();function R(J){if(Yb(J),!Y.moved){var te=J.clientX-G,ie=J.clientY-re;Y.moved=te*te+ie*ie>v}Y.event(J).zoom("mouse",r(N(Y.that.__zoom,Y.mouse[0]=kA(J,H),Y.mouse[1]),Y.extent,i))}function q(J){V.on("mousemove.zoom mouseup.zoom",null),Bce(J.view,Y.moved),Yb(J),Y.event(J).end()}}function M(P,...X){if(e.apply(this,arguments)){var H=this.__zoom,Y=kA(P.changedTouches?P.changedTouches[0]:P,this),V=H.invert(Y),z=H.k*(P.shiftKey?.5:2),G=r(N(C(H,z),Y,V),t.apply(this,X),i);Yb(P),o>0?Su(this).transition().duration(o).call(S,G,Y,P):Su(this).call(y.transform,G,Y,P)}}function D(P,...X){if(e.apply(this,arguments)){var H=P.touches,Y=H.length,V=B(this,X,P.changedTouches.length===Y).event(P),z,G,re,R;for(xI(P),G=0;G<Y;++G)re=H[G],R=kA(re,this),R=[R,this.__zoom.invert(R),re.identifier],V.touch0?!V.touch1&&V.touch0[2]!==R[2]&&(V.touch1=R,V.taps=0):(V.touch0=R,z=!0,V.taps=1+!!d);d&&(d=clearTimeout(d)),z&&(V.taps<2&&(f=R[0],d=setTimeout(function(){d=null},p)),J_(this),V.start())}}function I(P,...X){if(this.__zooming){var H=B(this,X).event(P),Y=P.changedTouches,V=Y.length,z,G,re,R;for(Yb(P),z=0;z<V;++z)G=Y[z],re=kA(G,this),H.touch0&&H.touch0[2]===G.identifier?H.touch0[0]=re:H.touch1&&H.touch1[2]===G.identifier&&(H.touch1[0]=re);if(G=H.that.__zoom,H.touch1){var q=H.touch0[0],J=H.touch0[1],te=H.touch1[0],ie=H.touch1[1],Ae=(Ae=te[0]-q[0])*Ae+(Ae=te[1]-q[1])*Ae,oe=(oe=ie[0]-J[0])*oe+(oe=ie[1]-J[1])*oe;G=C(G,Math.sqrt(Ae/oe)),re=[(q[0]+te[0])/2,(q[1]+te[1])/2],R=[(J[0]+ie[0])/2,(J[1]+ie[1])/2]}else if(H.touch0)re=H.touch0[0],R=H.touch0[1];else return;H.zoom("touch",r(N(G,re,R),H.extent,i))}}function U(P,...X){if(this.__zooming){var H=B(this,X).event(P),Y=P.changedTouches,V=Y.length,z,G;for(xI(P),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),z=0;z<V;++z)G=Y[z],H.touch0&&H.touch0[2]===G.identifier?delete H.touch0:H.touch1&&H.touch1[2]===G.identifier&&delete H.touch1;if(H.touch1&&!H.touch0&&(H.touch0=H.touch1,delete H.touch1),H.touch0)H.touch0[1]=this.__zoom.invert(H.touch0[0]);else if(H.end(),H.taps===2&&(G=kA(G,this),Math.hypot(f[0]-G[0],f[1]-G[1])<b)){var re=Su(this).on("dblclick.zoom");re&&re.apply(this,arguments)}}}return y.wheelDelta=function(P){return arguments.length?(n=typeof P=="function"?P:d_(+P),y):n},y.filter=function(P){return arguments.length?(e=typeof P=="function"?P:d_(!!P),y):e},y.touchable=function(P){return arguments.length?(a=typeof P=="function"?P:d_(!!P),y):a},y.extent=function(P){return arguments.length?(t=typeof P=="function"?P:d_([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),y):t},y.scaleExtent=function(P){return arguments.length?(s[0]=+P[0],s[1]=+P[1],y):[s[0],s[1]]},y.translateExtent=function(P){return arguments.length?(i[0][0]=+P[0][0],i[1][0]=+P[1][0],i[0][1]=+P[0][1],i[1][1]=+P[1][1],y):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},y.constrain=function(P){return arguments.length?(r=P,y):r},y.duration=function(P){return arguments.length?(o=+P,y):o},y.interpolate=function(P){return arguments.length?(c=P,y):c},y.on=function(){var P=u.on.apply(u,arguments);return P===u?y:P},y.clickDistance=function(P){return arguments.length?(v=(P=+P)*P,y):Math.sqrt(v)},y.tapDistance=function(P){return arguments.length?(b=+P,y):b},y}const kk=k.createContext(null),qst=kk.Provider,Sh={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Rce=Sh.error001();function fs(e,t){const r=k.useContext(kk);if(r===null)throw new Error(Rce);return mce(r,e,t)}const eo=()=>{const e=k.useContext(kk);if(e===null)throw new Error(Rce);return k.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},Wst=e=>e.userSelectionActive?"none":"all";function Lce({position:e,children:t,className:r,style:n,...a}){const s=fs(Wst),i=`${e}`.split("-");return lt.createElement("div",{className:El(["react-flow__panel",r,...i]),style:{...n,pointerEvents:s},...a},t)}function Xst({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:lt.createElement(Lce,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},lt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Yst=({x:e,y:t,label:r,labelStyle:n={},labelShowBg:a=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:c,className:u,...d})=>{const f=k.useRef(null),[h,p]=k.useState({x:0,y:0,width:0,height:0}),g=El(["react-flow__edge-textwrapper",u]);return k.useEffect(()=>{if(f.current){const v=f.current.getBBox();p({x:v.x,y:v.y,width:v.width,height:v.height})}},[r]),typeof r>"u"||!r?null:lt.createElement("g",{transform:`translate(${e-h.width/2} ${t-h.height/2})`,className:g,visibility:h.width?"visible":"hidden",...d},a&&lt.createElement("rect",{width:h.width+2*i[0],x:-i[0],y:-i[1],height:h.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:o,ry:o}),lt.createElement("text",{className:"react-flow__edge-text",y:h.height/2,dy:"0.3em",ref:f,style:n},r),c)};var Jst=k.memo(Yst);const O8=e=>({width:e.offsetWidth,height:e.offsetHeight}),l1=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),D8=(e={x:0,y:0},t)=>({x:l1(e.x,t[0][0],t[1][0]),y:l1(e.y,t[0][1],t[1][1])}),cW=(e,t,r)=>e<t?l1(Math.abs(e-t),1,50)/50:e>r?-l1(Math.abs(e-r),1,50)/50:0,Mce=(e,t)=>{const r=cW(e.x,35,t.width-35)*20,n=cW(e.y,35,t.height-35)*20;return[r,n]},Uce=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},Zst=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),P8=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),eit=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),uW=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),SO=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},tit=e=>Iu(e.width)&&Iu(e.height)&&Iu(e.x)&&Iu(e.y),Iu=e=>!isNaN(e)&&isFinite(e),Bs=Symbol.for("internals"),Qce=["Enter"," ","Escape"],rit=(e,t)=>{},nit=e=>"nativeEvent"in e;function NO(e){var a,s;const t=nit(e)?e.nativeEvent:e,r=((s=(a=t.composedPath)==null?void 0:a.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Hce=e=>"clientX"in e,sm=(e,t)=>{var s,i;const r=Hce(e),n=r?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,a=r?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:n-((t==null?void 0:t.left)??0),y:a-((t==null?void 0:t.top)??0)}},dN=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},Y2=({id:e,path:t,labelX:r,labelY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p=20})=>lt.createElement(lt.Fragment,null,lt.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:h}),p&&lt.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:p,className:"react-flow__edge-interaction"}),a&&Iu(r)&&Iu(n)?lt.createElement(Jst,{x:r,y:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u}):null);Y2.displayName="BaseEdge";function Jb(e,t,r){return r===void 0?r:n=>{const a=t().edges.find(s=>s.id===e);a&&r(n,{...a})}}function Vce({sourceX:e,sourceY:t,targetX:r,targetY:n}){const a=Math.abs(r-e)/2,s=r<e?r+a:r-a,i=Math.abs(n-t)/2,o=n<t?n+i:n-i;return[s,o,a,i]}function zce({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:a,sourceControlY:s,targetControlX:i,targetControlY:o}){const c=e*.125+a*.375+i*.375+r*.125,u=t*.125+s*.375+o*.375+n*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var Ag;(function(e){e.Strict="strict",e.Loose="loose"})(Ag||(Ag={}));var jp;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(jp||(jp={}));var e2;(function(e){e.Partial="partial",e.Full="full"})(e2||(e2={}));var R0;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(R0||(R0={}));var AN;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(AN||(AN={}));var Er;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Er||(Er={}));function dW({pos:e,x1:t,y1:r,x2:n,y2:a}){return e===Er.Left||e===Er.Right?[.5*(t+n),r]:[t,.5*(r+a)]}function $ce({sourceX:e,sourceY:t,sourcePosition:r=Er.Bottom,targetX:n,targetY:a,targetPosition:s=Er.Top}){const[i,o]=dW({pos:r,x1:e,y1:t,x2:n,y2:a}),[c,u]=dW({pos:s,x1:n,y1:a,x2:e,y2:t}),[d,f,h,p]=zce({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:i,sourceControlY:o,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${o} ${c},${u} ${n},${a}`,d,f,h,p]}const R8=k.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Er.Bottom,targetPosition:s=Er.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:v})=>{const[b,y,C]=$ce({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s});return lt.createElement(Y2,{path:b,labelX:y,labelY:C,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:v})});R8.displayName="SimpleBezierEdge";const AW={[Er.Left]:{x:-1,y:0},[Er.Right]:{x:1,y:0},[Er.Top]:{x:0,y:-1},[Er.Bottom]:{x:0,y:1}},ait=({source:e,sourcePosition:t=Er.Bottom,target:r})=>t===Er.Left||t===Er.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},fW=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function sit({source:e,sourcePosition:t=Er.Bottom,target:r,targetPosition:n=Er.Top,center:a,offset:s}){const i=AW[t],o=AW[n],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:r.x+o.x*s,y:r.y+o.y*s},d=ait({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",h=d[f];let p=[],g,v;const b={x:0,y:0},y={x:0,y:0},[C,N,T,S]=Vce({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(i[f]*o[f]===-1){g=a.x??C,v=a.y??N;const w=[{x:g,y:c.y},{x:g,y:u.y}],_=[{x:c.x,y:v},{x:u.x,y:v}];i[f]===h?p=f==="x"?w:_:p=f==="x"?_:w}else{const w=[{x:c.x,y:u.y}],_=[{x:u.x,y:c.y}];if(f==="x"?p=i.x===h?_:w:p=i.y===h?w:_,t===n){const U=Math.abs(e[f]-r[f]);if(U<=s){const P=Math.min(s-1,s-U);i[f]===h?b[f]=(c[f]>e[f]?-1:1)*P:y[f]=(u[f]>r[f]?-1:1)*P}}if(t!==n){const U=f==="x"?"y":"x",P=i[f]===o[U],X=c[U]>u[U],H=c[U]<u[U];(i[f]===1&&(!P&&X||P&&H)||i[f]!==1&&(!P&&H||P&&X))&&(p=f==="x"?w:_)}const F={x:c.x+b.x,y:c.y+b.y},M={x:u.x+y.x,y:u.y+y.y},D=Math.max(Math.abs(F.x-p[0].x),Math.abs(M.x-p[0].x)),I=Math.max(Math.abs(F.y-p[0].y),Math.abs(M.y-p[0].y));D>=I?(g=(F.x+M.x)/2,v=p[0].y):(g=p[0].x,v=(F.y+M.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...p,{x:u.x+y.x,y:u.y+y.y},r],g,v,T,S]}function iit(e,t,r,n){const a=Math.min(fW(e,t)/2,fW(t,r)/2,n),{x:s,y:i}=t;if(e.x===s&&s===r.x||e.y===i&&i===r.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${s+a*u},${i}Q ${s},${i} ${s},${i+a*d}`}const o=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${s},${i+a*c}Q ${s},${i} ${s+a*o},${i}`}function kO({sourceX:e,sourceY:t,sourcePosition:r=Er.Bottom,targetX:n,targetY:a,targetPosition:s=Er.Top,borderRadius:i=5,centerX:o,centerY:c,offset:u=20}){const[d,f,h,p,g]=sit({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:a},targetPosition:s,center:{x:o,y:c},offset:u});return[d.reduce((b,y,C)=>{let N="";return C>0&&C<d.length-1?N=iit(d[C-1],y,d[C+1],i):N=`${C===0?"M":"L"}${y.x} ${y.y}`,b+=N,b},""),f,h,p,g]}const Bk=k.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=Er.Bottom,targetPosition:h=Er.Top,markerEnd:p,markerStart:g,pathOptions:v,interactionWidth:b})=>{const[y,C,N]=kO({sourceX:e,sourceY:t,sourcePosition:f,targetX:r,targetY:n,targetPosition:h,borderRadius:v==null?void 0:v.borderRadius,offset:v==null?void 0:v.offset});return lt.createElement(Y2,{path:y,labelX:C,labelY:N,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:p,markerStart:g,interactionWidth:b})});Bk.displayName="SmoothStepEdge";const L8=k.memo(e=>{var t;return lt.createElement(Bk,{...e,pathOptions:k.useMemo(()=>{var r;return{borderRadius:0,offset:(r=e.pathOptions)==null?void 0:r.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});L8.displayName="StepEdge";function oit({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[a,s,i,o]=Vce({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,a,s,i,o]}const M8=k.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})=>{const[g,v,b]=oit({sourceX:e,sourceY:t,targetX:r,targetY:n});return lt.createElement(Y2,{path:g,labelX:v,labelY:b,label:a,labelStyle:s,labelShowBg:i,labelBgStyle:o,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:h,interactionWidth:p})});M8.displayName="StraightEdge";function A_(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function hW({pos:e,x1:t,y1:r,x2:n,y2:a,c:s}){switch(e){case Er.Left:return[t-A_(t-n,s),r];case Er.Right:return[t+A_(n-t,s),r];case Er.Top:return[t,r-A_(r-a,s)];case Er.Bottom:return[t,r+A_(a-r,s)]}}function Gce({sourceX:e,sourceY:t,sourcePosition:r=Er.Bottom,targetX:n,targetY:a,targetPosition:s=Er.Top,curvature:i=.25}){const[o,c]=hW({pos:r,x1:e,y1:t,x2:n,y2:a,c:i}),[u,d]=hW({pos:s,x1:n,y1:a,x2:e,y2:t,c:i}),[f,h,p,g]=zce({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:o,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${c} ${u},${d} ${n},${a}`,f,h,p,g]}const fN=k.memo(({sourceX:e,sourceY:t,targetX:r,targetY:n,sourcePosition:a=Er.Bottom,targetPosition:s=Er.Top,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,pathOptions:v,interactionWidth:b})=>{const[y,C,N]=Gce({sourceX:e,sourceY:t,sourcePosition:a,targetX:r,targetY:n,targetPosition:s,curvature:v==null?void 0:v.curvature});return lt.createElement(Y2,{path:y,labelX:C,labelY:N,label:i,labelStyle:o,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:g,interactionWidth:b})});fN.displayName="BezierEdge";const U8=k.createContext(null),lit=U8.Provider;U8.Consumer;const cit=()=>k.useContext(U8),uit=e=>"id"in e&&"source"in e&&"target"in e,dit=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`reactflow__edge-${e}${t||""}-${r}${n||""}`,BO=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`,Ait=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),fit=(e,t)=>{if(!e.source||!e.target)return t;let r;return uit(e)?r={...e}:r={...e,id:dit(e)},Ait(r,t)?t:t.concat(r)},TO=({x:e,y:t},[r,n,a],s,[i,o])=>{const c={x:(e-r)/a,y:(t-n)/a};return s?{x:i*Math.round(c.x/i),y:o*Math.round(c.y/o)}:c},Kce=({x:e,y:t},[r,n,a])=>({x:e*a+r,y:t*a+n}),Cx=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*t[0],n=(e.height??0)*t[1],a={x:e.position.x-r,y:e.position.y-n};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-n}:a}},Q8=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,a)=>{const{x:s,y:i}=Cx(a,t).positionAbsolute;return Zst(n,P8({x:s,y:i,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return eit(r)},qce=(e,t,[r,n,a]=[0,0,1],s=!1,i=!1,o=[0,0])=>{const c={x:(t.x-r)/a,y:(t.y-n)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(d=>{const{width:f,height:h,selectable:p=!0,hidden:g=!1}=d;if(i&&!p||g)return!1;const{positionAbsolute:v}=Cx(d,o),b={x:v.x,y:v.y,width:f||0,height:h||0},y=SO(c,b),C=typeof f>"u"||typeof h>"u"||f===null||h===null,N=s&&y>0,T=(f||0)*(h||0);(C||N||y>=T||d.dragging)&&u.push(d)}),u},Wce=(e,t)=>{const r=e.map(n=>n.id);return t.filter(n=>r.includes(n.source)||r.includes(n.target))},Xce=(e,t,r,n,a,s=.1)=>{const i=t/(e.width*(1+s)),o=r/(e.height*(1+s)),c=Math.min(i,o),u=l1(c,n,a),d=e.x+e.width/2,f=e.y+e.height/2,h=t/2-d*u,p=r/2-f*u;return{x:h,y:p,zoom:u}},gp=(e,t=0)=>e.transition().duration(t);function mW(e,t,r,n){return(t[r]||[]).reduce((a,s)=>{var i,o;return`${e.id}-${s.id}-${r}`!==n&&a.push({id:s.id||null,type:r,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((o=e.positionAbsolute)==null?void 0:o.y)??0)+s.y+s.height/2}),a},[])}function hit(e,t,r,n,a,s){const{x:i,y:o}=sm(e),u=t.elementsFromPoint(i,o).find(g=>g.classList.contains("react-flow__handle"));if(u){const g=u.getAttribute("data-nodeid");if(g){const v=H8(void 0,u),b=u.getAttribute("data-handleid"),y=s({nodeId:g,id:b,type:v});if(y){const C=a.find(N=>N.nodeId===g&&N.type===v&&N.id===b);return{handle:{id:b,type:v,nodeId:g,x:(C==null?void 0:C.x)||r.x,y:(C==null?void 0:C.y)||r.y},validHandleResult:y}}}}let d=[],f=1/0;if(a.forEach(g=>{const v=Math.sqrt((g.x-r.x)**2+(g.y-r.y)**2);if(v<=n){const b=s(g);v<=f&&(v<f?d=[{handle:g,validHandleResult:b}]:v===f&&d.push({handle:g,validHandleResult:b}),f=v)}}),!d.length)return{handle:null,validHandleResult:Yce()};if(d.length===1)return d[0];const h=d.some(({validHandleResult:g})=>g.isValid),p=d.some(({handle:g})=>g.type==="target");return d.find(({handle:g,validHandleResult:v})=>p?g.type==="target":h?v.isValid:!0)||d[0]}const mit={source:null,target:null,sourceHandle:null,targetHandle:null},Yce=()=>({handleDomNode:null,isValid:!1,connection:mit,endHandle:null});function Jce(e,t,r,n,a,s,i){const o=a==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Yce(),handleDomNode:c};if(c){const d=H8(void 0,c),f=c.getAttribute("data-nodeid"),h=c.getAttribute("data-handleid"),p=c.classList.contains("connectable"),g=c.classList.contains("connectableend"),v={source:o?f:r,sourceHandle:o?h:n,target:o?r:f,targetHandle:o?n:h};u.connection=v,p&&g&&(t===Ag.Strict?o&&d==="source"||!o&&d==="target":f!==r||h!==n)&&(u.endHandle={nodeId:f,handleId:h,type:d},u.isValid=s(v))}return u}function pit({nodes:e,nodeId:t,handleId:r,handleType:n}){return e.reduce((a,s)=>{if(s[Bs]){const{handleBounds:i}=s[Bs];let o=[],c=[];i&&(o=mW(s,i,"source",`${t}-${r}-${n}`),c=mW(s,i,"target",`${t}-${r}-${n}`)),a.push(...o,...c)}return a},[])}function H8(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function bI(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function git(e,t){let r=null;return t?r="valid":e&&!t&&(r="invalid"),r}function Zce({event:e,handleId:t,nodeId:r,onConnect:n,isTarget:a,getState:s,setState:i,isValidConnection:o,edgeUpdaterType:c,onReconnectEnd:u}){const d=Uce(e.target),{connectionMode:f,domNode:h,autoPanOnConnect:p,connectionRadius:g,onConnectStart:v,panBy:b,getNodes:y,cancelConnection:C}=s();let N=0,T;const{x:S,y:B}=sm(e),w=d==null?void 0:d.elementFromPoint(S,B),_=H8(c,w),F=h==null?void 0:h.getBoundingClientRect();if(!F||!_)return;let M,D=sm(e,F),I=!1,U=null,P=!1,X=null;const H=pit({nodes:y(),nodeId:r,handleId:t,handleType:_}),Y=()=>{if(!p)return;const[G,re]=Mce(D,F);b({x:G,y:re}),N=requestAnimationFrame(Y)};i({connectionPosition:D,connectionStatus:null,connectionNodeId:r,connectionHandleId:t,connectionHandleType:_,connectionStartHandle:{nodeId:r,handleId:t,type:_},connectionEndHandle:null}),v==null||v(e,{nodeId:r,handleId:t,handleType:_});function V(G){const{transform:re}=s();D=sm(G,F);const{handle:R,validHandleResult:q}=hit(G,d,TO(D,re,!1,[1,1]),g,H,J=>Jce(J,f,r,t,a?"target":"source",o,d));if(T=R,I||(Y(),I=!0),X=q.handleDomNode,U=q.connection,P=q.isValid,i({connectionPosition:T&&P?Kce({x:T.x,y:T.y},re):D,connectionStatus:git(!!T,P),connectionEndHandle:q.endHandle}),!T&&!P&&!X)return bI(M);U.source!==U.target&&X&&(bI(M),M=X,X.classList.add("connecting","react-flow__handle-connecting"),X.classList.toggle("valid",P),X.classList.toggle("react-flow__handle-valid",P))}function z(G){var re,R;(T||X)&&U&&P&&(n==null||n(U)),(R=(re=s()).onConnectEnd)==null||R.call(re,G),c&&(u==null||u(G)),bI(M),C(),cancelAnimationFrame(N),I=!1,P=!1,U=null,X=null,d.removeEventListener("mousemove",V),d.removeEventListener("mouseup",z),d.removeEventListener("touchmove",V),d.removeEventListener("touchend",z)}d.addEventListener("mousemove",V),d.addEventListener("mouseup",z),d.addEventListener("touchmove",V),d.addEventListener("touchend",z)}const pW=()=>!0,vit=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),xit=(e,t,r)=>n=>{const{connectionStartHandle:a,connectionEndHandle:s,connectionClickStartHandle:i}=n;return{connecting:(a==null?void 0:a.nodeId)===e&&(a==null?void 0:a.handleId)===t&&(a==null?void 0:a.type)===r||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===r}},eue=k.forwardRef(({type:e="source",position:t=Er.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:a=!0,isConnectableEnd:s=!0,id:i,onConnect:o,children:c,className:u,onMouseDown:d,onTouchStart:f,...h},p)=>{var F,M;const g=i||null,v=e==="target",b=eo(),y=cit(),{connectOnClick:C,noPanClassName:N}=fs(vit,rl),{connecting:T,clickConnecting:S}=fs(xit(y,g,e),rl);y||(M=(F=b.getState()).onError)==null||M.call(F,"010",Sh.error010());const B=D=>{const{defaultEdgeOptions:I,onConnect:U,hasDefaultEdges:P}=b.getState(),X={...I,...D};if(P){const{edges:H,setEdges:Y}=b.getState();Y(fit(X,H))}U==null||U(X),o==null||o(X)},w=D=>{if(!y)return;const I=Hce(D);a&&(I&&D.button===0||!I)&&Zce({event:D,handleId:g,nodeId:y,onConnect:B,isTarget:v,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||pW}),I?d==null||d(D):f==null||f(D)},_=D=>{const{onClickConnectStart:I,onClickConnectEnd:U,connectionClickStartHandle:P,connectionMode:X,isValidConnection:H}=b.getState();if(!y||!P&&!a)return;if(!P){I==null||I(D,{nodeId:y,handleId:g,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:g}});return}const Y=Uce(D.target),V=r||H||pW,{connection:z,isValid:G}=Jce({nodeId:y,id:g,type:e},X,P.nodeId,P.handleId||null,P.type,V,Y);G&&B(z),U==null||U(D),b.setState({connectionClickStartHandle:null})};return lt.createElement("div",{"data-handleid":g,"data-nodeid":y,"data-handlepos":t,"data-id":`${y}-${g}-${e}`,className:El(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",N,u,{source:!v,target:v,connectable:n,connectablestart:a,connectableend:s,connecting:S,connectionindicator:n&&(a&&!T||s&&T)}]),onMouseDown:w,onTouchStart:w,onClick:C?_:void 0,ref:p,...h},c)});eue.displayName="Handle";var c1=k.memo(eue);const tue=({data:e,isConnectable:t,targetPosition:r=Er.Top,sourcePosition:n=Er.Bottom})=>lt.createElement(lt.Fragment,null,lt.createElement(c1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label,lt.createElement(c1,{type:"source",position:n,isConnectable:t}));tue.displayName="DefaultNode";var jO=k.memo(tue);const rue=({data:e,isConnectable:t,sourcePosition:r=Er.Bottom})=>lt.createElement(lt.Fragment,null,e==null?void 0:e.label,lt.createElement(c1,{type:"source",position:r,isConnectable:t}));rue.displayName="InputNode";var nue=k.memo(rue);const aue=({data:e,isConnectable:t,targetPosition:r=Er.Top})=>lt.createElement(lt.Fragment,null,lt.createElement(c1,{type:"target",position:r,isConnectable:t}),e==null?void 0:e.label);aue.displayName="OutputNode";var sue=k.memo(aue);const V8=()=>null;V8.displayName="GroupNode";const bit=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),f_=e=>e.id;function yit(e,t){return rl(e.selectedNodes.map(f_),t.selectedNodes.map(f_))&&rl(e.selectedEdges.map(f_),t.selectedEdges.map(f_))}const iue=k.memo(({onSelectionChange:e})=>{const t=eo(),{selectedNodes:r,selectedEdges:n}=fs(bit,yit);return k.useEffect(()=>{const a={nodes:r,edges:n};e==null||e(a),t.getState().onSelectionChange.forEach(s=>s(a))},[r,n,e]),null});iue.displayName="SelectionListener";const wit=e=>!!e.onSelectionChange;function Eit({onSelectionChange:e}){const t=fs(wit);return e||t?lt.createElement(iue,{onSelectionChange:e}):null}const Cit=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function _v(e,t){k.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Cn(e,t,r){k.useEffect(()=>{typeof t<"u"&&r({[e]:t})},[t])}const _it=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:a,onConnectStart:s,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:h,edgesUpdatable:p,elevateNodesOnSelect:g,minZoom:v,maxZoom:b,nodeExtent:y,onNodesChange:C,onEdgesChange:N,elementsSelectable:T,connectionMode:S,snapGrid:B,snapToGrid:w,translateExtent:_,connectOnClick:F,defaultEdgeOptions:M,fitView:D,fitViewOptions:I,onNodesDelete:U,onEdgesDelete:P,onNodeDrag:X,onNodeDragStart:H,onNodeDragStop:Y,onSelectionDrag:V,onSelectionDragStart:z,onSelectionDragStop:G,noPanClassName:re,nodeOrigin:R,rfId:q,autoPanOnConnect:J,autoPanOnNodeDrag:te,onError:ie,connectionRadius:Ae,isValidConnection:oe,nodeDragThreshold:ce})=>{const{setNodes:pe,setEdges:Ie,setDefaultNodesAndEdges:ne,setMinZoom:Se,setMaxZoom:De,setTranslateExtent:_e,setNodeExtent:he,reset:je}=fs(Cit,rl),He=eo();return k.useEffect(()=>{const Xe=n==null?void 0:n.map(ye=>({...ye,...M}));return ne(r,Xe),()=>{je()}},[]),Cn("defaultEdgeOptions",M,He.setState),Cn("connectionMode",S,He.setState),Cn("onConnect",a,He.setState),Cn("onConnectStart",s,He.setState),Cn("onConnectEnd",i,He.setState),Cn("onClickConnectStart",o,He.setState),Cn("onClickConnectEnd",c,He.setState),Cn("nodesDraggable",u,He.setState),Cn("nodesConnectable",d,He.setState),Cn("nodesFocusable",f,He.setState),Cn("edgesFocusable",h,He.setState),Cn("edgesUpdatable",p,He.setState),Cn("elementsSelectable",T,He.setState),Cn("elevateNodesOnSelect",g,He.setState),Cn("snapToGrid",w,He.setState),Cn("snapGrid",B,He.setState),Cn("onNodesChange",C,He.setState),Cn("onEdgesChange",N,He.setState),Cn("connectOnClick",F,He.setState),Cn("fitViewOnInit",D,He.setState),Cn("fitViewOnInitOptions",I,He.setState),Cn("onNodesDelete",U,He.setState),Cn("onEdgesDelete",P,He.setState),Cn("onNodeDrag",X,He.setState),Cn("onNodeDragStart",H,He.setState),Cn("onNodeDragStop",Y,He.setState),Cn("onSelectionDrag",V,He.setState),Cn("onSelectionDragStart",z,He.setState),Cn("onSelectionDragStop",G,He.setState),Cn("noPanClassName",re,He.setState),Cn("nodeOrigin",R,He.setState),Cn("rfId",q,He.setState),Cn("autoPanOnConnect",J,He.setState),Cn("autoPanOnNodeDrag",te,He.setState),Cn("onError",ie,He.setState),Cn("connectionRadius",Ae,He.setState),Cn("isValidConnection",oe,He.setState),Cn("nodeDragThreshold",ce,He.setState),_v(e,pe),_v(t,Ie),_v(v,Se),_v(b,De),_v(_,_e),_v(y,he),null},gW={display:"none"},Sit={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},oue="react-flow__node-desc",lue="react-flow__edge-desc",Nit="react-flow__aria-live",kit=e=>e.ariaLiveMessage;function Bit({rfId:e}){const t=fs(kit);return lt.createElement("div",{id:`${Nit}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Sit},t)}function Tit({rfId:e,disableKeyboardA11y:t}){return lt.createElement(lt.Fragment,null,lt.createElement("div",{id:`${oue}-${e}`,style:gW},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),lt.createElement("div",{id:`${lue}-${e}`,style:gW},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&lt.createElement(Bit,{rfId:e}))}var t2=(e=null,t={actInsideInputWithModifier:!0})=>{const[r,n]=k.useState(!1),a=k.useRef(!1),s=k.useRef(new Set([])),[i,o]=k.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,h)=>f.concat(...h),[]);return[u,d]}return[[],[]]},[e]);return k.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=p=>{if(a.current=p.ctrlKey||p.metaKey||p.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&NO(p))return!1;const v=xW(p.code,o);s.current.add(p[v]),vW(i,s.current,!1)&&(p.preventDefault(),n(!0))},f=p=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&NO(p))return!1;const v=xW(p.code,o);vW(i,s.current,!0)?(n(!1),s.current.clear()):s.current.delete(p[v]),p.key==="Meta"&&s.current.clear(),a.current=!1},h=()=>{s.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",h),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",h)}}},[e,n]),r};function vW(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(a=>t.has(a)))}function xW(e,t){return t.includes(e)?"code":"key"}function cue(e,t,r,n){var o,c;const a=e.parentNode||e.parentId;if(!a)return r;const s=t.get(a),i=Cx(s,n);return cue(s,t,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=s[Bs])==null?void 0:o.z)??0)>(r.z??0)?((c=s[Bs])==null?void 0:c.z)??0:r.z??0},n)}function uue(e,t,r){e.forEach(n=>{var s;const a=n.parentNode||n.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||r!=null&&r[n.id]){const{x:i,y:o,z:c}=cue(n,e,{...n.position,z:((s=n[Bs])==null?void 0:s.z)??0},t);n.positionAbsolute={x:i,y:o},n[Bs].z=c,r!=null&&r[n.id]&&(n[Bs].isParent=!0)}})}function yI(e,t,r,n){const a=new Map,s={},i=n?1e3:0;return e.forEach(o=>{var p;const c=(Iu(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=t.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},f=o.parentNode||o.parentId;f&&(s[f]=!0);const h=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,Bs,{enumerable:!1,value:{handleBounds:h||(p=u==null?void 0:u[Bs])==null?void 0:p.handleBounds,z:c}}),a.set(o.id,d)}),uue(a,r,s),a}function due(e,t={}){const{getNodes:r,width:n,height:a,minZoom:s,maxZoom:i,d3Zoom:o,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),h=t.initial&&!u&&d;if(o&&c&&(h||!t.initial)){const g=r().filter(b=>{var C;const y=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(C=t.nodes)!=null&&C.length?y&&t.nodes.some(N=>N.id===b.id):y}),v=g.every(b=>b.width&&b.height);if(g.length>0&&v){const b=Q8(g,f),{x:y,y:C,zoom:N}=Xce(b,n,a,t.minZoom??s,t.maxZoom??i,t.padding??.1),T=am.translate(y,C).scale(N);return typeof t.duration=="number"&&t.duration>0?o.transform(gp(c,t.duration),T):o.transform(c,T),!0}}return!1}function jit(e,t){return e.forEach(r=>{const n=t.get(r.id);n&&t.set(n.id,{...n,[Bs]:n[Bs],selected:r.selected})}),new Map(t)}function Iit(e,t){return t.map(r=>{const n=e.find(a=>a.id===r.id);return n&&(r.selected=n.selected),r})}function h_({changedNodes:e,changedEdges:t,get:r,set:n}){const{nodeInternals:a,edges:s,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:c,hasDefaultEdges:u}=r();e!=null&&e.length&&(c&&n({nodeInternals:jit(e,a)}),i==null||i(e)),t!=null&&t.length&&(u&&n({edges:Iit(t,s)}),o==null||o(t))}const Sv=()=>{},Fit={zoomIn:Sv,zoomOut:Sv,zoomTo:Sv,getZoom:()=>1,setViewport:Sv,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Sv,fitBounds:Sv,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Oit=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Dit=()=>{const e=eo(),{d3Zoom:t,d3Selection:r}=fs(Oit,rl);return k.useMemo(()=>r&&t?{zoomIn:a=>t.scaleBy(gp(r,a==null?void 0:a.duration),1.2),zoomOut:a=>t.scaleBy(gp(r,a==null?void 0:a.duration),1/1.2),zoomTo:(a,s)=>t.scaleTo(gp(r,s==null?void 0:s.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,s)=>{const[i,o,c]=e.getState().transform,u=am.translate(a.x??i,a.y??o).scale(a.zoom??c);t.transform(gp(r,s==null?void 0:s.duration),u)},getViewport:()=>{const[a,s,i]=e.getState().transform;return{x:a,y:s,zoom:i}},fitView:a=>due(e.getState,a),setCenter:(a,s,i)=>{const{width:o,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=o/2-a*d,h=c/2-s*d,p=am.translate(f,h).scale(d);t.transform(gp(r,i==null?void 0:i.duration),p)},fitBounds:(a,s)=>{const{width:i,height:o,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:h}=Xce(a,i,o,c,u,(s==null?void 0:s.padding)??.1),p=am.translate(d,f).scale(h);t.transform(gp(r,s==null?void 0:s.duration),p)},project:a=>{const{transform:s,snapToGrid:i,snapGrid:o}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),TO(a,s,i,o)},screenToFlowPosition:a=>{const{transform:s,snapToGrid:i,snapGrid:o,domNode:c}=e.getState();if(!c)return a;const{x:u,y:d}=c.getBoundingClientRect(),f={x:a.x-u,y:a.y-d};return TO(f,s,i,o)},flowToScreenPosition:a=>{const{transform:s,domNode:i}=e.getState();if(!i)return a;const{x:o,y:c}=i.getBoundingClientRect(),u=Kce(a,s);return{x:u.x+o,y:u.y+c}},viewportInitialized:!0}:Fit,[t,r])};function Tk(){const e=Dit(),t=eo(),r=k.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),n=k.useCallback(v=>t.getState().nodeInternals.get(v),[]),a=k.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(b=>({...b}))},[]),s=k.useCallback(v=>{const{edges:b=[]}=t.getState();return b.find(y=>y.id===v)},[]),i=k.useCallback(v=>{const{getNodes:b,setNodes:y,hasDefaultNodes:C,onNodesChange:N}=t.getState(),T=b(),S=typeof v=="function"?v(T):v;if(C)y(S);else if(N){const B=S.length===0?T.map(w=>({type:"remove",id:w.id})):S.map(w=>({item:w,type:"reset"}));N(B)}},[]),o=k.useCallback(v=>{const{edges:b=[],setEdges:y,hasDefaultEdges:C,onEdgesChange:N}=t.getState(),T=typeof v=="function"?v(b):v;if(C)y(T);else if(N){const S=T.length===0?b.map(B=>({type:"remove",id:B.id})):T.map(B=>({item:B,type:"reset"}));N(S)}},[]),c=k.useCallback(v=>{const b=Array.isArray(v)?v:[v],{getNodes:y,setNodes:C,hasDefaultNodes:N,onNodesChange:T}=t.getState();if(N){const B=[...y(),...b];C(B)}else if(T){const S=b.map(B=>({item:B,type:"add"}));T(S)}},[]),u=k.useCallback(v=>{const b=Array.isArray(v)?v:[v],{edges:y=[],setEdges:C,hasDefaultEdges:N,onEdgesChange:T}=t.getState();if(N)C([...y,...b]);else if(T){const S=b.map(B=>({item:B,type:"add"}));T(S)}},[]),d=k.useCallback(()=>{const{getNodes:v,edges:b=[],transform:y}=t.getState(),[C,N,T]=y;return{nodes:v().map(S=>({...S})),edges:b.map(S=>({...S})),viewport:{x:C,y:N,zoom:T}}},[]),f=k.useCallback(({nodes:v,edges:b})=>{const{nodeInternals:y,getNodes:C,edges:N,hasDefaultNodes:T,hasDefaultEdges:S,onNodesDelete:B,onEdgesDelete:w,onNodesChange:_,onEdgesChange:F}=t.getState(),M=(v||[]).map(X=>X.id),D=(b||[]).map(X=>X.id),I=C().reduce((X,H)=>{const Y=H.parentNode||H.parentId,V=!M.includes(H.id)&&Y&&X.find(G=>G.id===Y);return(typeof H.deletable=="boolean"?H.deletable:!0)&&(M.includes(H.id)||V)&&X.push(H),X},[]),U=N.filter(X=>typeof X.deletable=="boolean"?X.deletable:!0),P=U.filter(X=>D.includes(X.id));if(I||P){const X=Wce(I,U),H=[...P,...X],Y=H.reduce((V,z)=>(V.includes(z.id)||V.push(z.id),V),[]);if((S||T)&&(S&&t.setState({edges:N.filter(V=>!Y.includes(V.id))}),T&&(I.forEach(V=>{y.delete(V.id)}),t.setState({nodeInternals:new Map(y)}))),Y.length>0&&(w==null||w(H),F&&F(Y.map(V=>({id:V,type:"remove"})))),I.length>0&&(B==null||B(I),_)){const V=I.map(z=>({id:z.id,type:"remove"}));_(V)}}},[]),h=k.useCallback(v=>{const b=tit(v),y=b?null:t.getState().nodeInternals.get(v.id);return!b&&!y?[null,null,b]:[b?v:uW(y),y,b]},[]),p=k.useCallback((v,b=!0,y)=>{const[C,N,T]=h(v);return C?(y||t.getState().getNodes()).filter(S=>{if(!T&&(S.id===N.id||!S.positionAbsolute))return!1;const B=uW(S),w=SO(B,C);return b&&w>0||w>=C.width*C.height}):[]},[]),g=k.useCallback((v,b,y=!0)=>{const[C]=h(v);if(!C)return!1;const N=SO(C,b);return y&&N>0||N>=C.width*C.height},[]);return k.useMemo(()=>({...e,getNodes:r,getNode:n,getEdges:a,getEdge:s,setNodes:i,setEdges:o,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:p,isNodeIntersecting:g}),[e,r,n,a,s,i,o,c,u,d,f,p,g])}const Pit={actInsideInputWithModifier:!1};var Rit=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const r=eo(),{deleteElements:n}=Tk(),a=t2(e,Pit),s=t2(t);k.useEffect(()=>{if(a){const{edges:i,getNodes:o}=r.getState(),c=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:c,edges:u}),r.setState({nodesSelectionActive:!1})}},[a]),k.useEffect(()=>{r.setState({multiSelectionActive:s})},[s])};function Lit(e){const t=eo();k.useEffect(()=>{let r;const n=()=>{var s,i;if(!e.current)return;const a=O8(e.current);(a.height===0||a.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Sh.error004())),t.setState({width:a.width||500,height:a.height||500})};return n(),window.addEventListener("resize",n),e.current&&(r=new ResizeObserver(()=>n()),r.observe(e.current)),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}},[])}const z8={position:"absolute",width:"100%",height:"100%",top:0,left:0},Mit=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,m_=e=>({x:e.x,y:e.y,zoom:e.k}),Nv=(e,t)=>e.target.closest(`.${t}`),bW=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),yW=e=>{const t=e.ctrlKey&&dN()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Uit=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),Qit=({onMove:e,onMoveStart:t,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:a=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:c=jp.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:h,translateExtent:p,minZoom:g,maxZoom:v,zoomActivationKeyCode:b,preventScrolling:y=!0,children:C,noWheelClassName:N,noPanClassName:T})=>{const S=k.useRef(),B=eo(),w=k.useRef(!1),_=k.useRef(!1),F=k.useRef(null),M=k.useRef({x:0,y:0,zoom:0}),{d3Zoom:D,d3Selection:I,d3ZoomHandler:U,userSelectionActive:P}=fs(Uit,rl),X=t2(b),H=k.useRef(0),Y=k.useRef(!1),V=k.useRef();return Lit(F),k.useEffect(()=>{if(F.current){const z=F.current.getBoundingClientRect(),G=Kst().scaleExtent([g,v]).translateExtent(p),re=Su(F.current).call(G),R=am.translate(h.x,h.y).scale(l1(h.zoom,g,v)),q=[[0,0],[z.width,z.height]],J=G.constrain()(R,q,p);G.transform(re,J),G.wheelDelta(yW),B.setState({d3Zoom:G,d3Selection:re,d3ZoomHandler:re.on("wheel.zoom"),transform:[J.x,J.y,J.k],domNode:F.current.closest(".react-flow")})}},[]),k.useEffect(()=>{I&&D&&(i&&!X&&!P?I.on("wheel.zoom",z=>{if(Nv(z,N))return!1;z.preventDefault(),z.stopImmediatePropagation();const G=I.property("__zoom").k||1;if(z.ctrlKey&&s){const oe=kA(z),ce=yW(z),pe=G*Math.pow(2,ce);D.scaleTo(I,pe,oe,z);return}const re=z.deltaMode===1?20:1;let R=c===jp.Vertical?0:z.deltaX*re,q=c===jp.Horizontal?0:z.deltaY*re;!dN()&&z.shiftKey&&c!==jp.Vertical&&(R=z.deltaY*re,q=0),D.translateBy(I,-(R/G)*o,-(q/G)*o,{internal:!0});const J=m_(I.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ie,onViewportChangeEnd:Ae}=B.getState();clearTimeout(V.current),Y.current||(Y.current=!0,t==null||t(z,J),te==null||te(J)),Y.current&&(e==null||e(z,J),ie==null||ie(J),V.current=setTimeout(()=>{r==null||r(z,J),Ae==null||Ae(J),Y.current=!1},150))},{passive:!1}):typeof U<"u"&&I.on("wheel.zoom",function(z,G){if(!y&&z.type==="wheel"&&!z.ctrlKey||Nv(z,N))return null;z.preventDefault(),U.call(this,z,G)},{passive:!1}))},[P,i,c,I,D,U,X,s,y,N,t,e,r]),k.useEffect(()=>{D&&D.on("start",z=>{var R,q;if(!z.sourceEvent||z.sourceEvent.internal)return null;H.current=(R=z.sourceEvent)==null?void 0:R.button;const{onViewportChangeStart:G}=B.getState(),re=m_(z.transform);w.current=!0,M.current=re,((q=z.sourceEvent)==null?void 0:q.type)==="mousedown"&&B.setState({paneDragging:!0}),G==null||G(re),t==null||t(z.sourceEvent,re)})},[D,t]),k.useEffect(()=>{D&&(P&&!w.current?D.on("zoom",null):P||D.on("zoom",z=>{var re;const{onViewportChange:G}=B.getState();if(B.setState({transform:[z.transform.x,z.transform.y,z.transform.k]}),_.current=!!(n&&bW(f,H.current??0)),(e||G)&&!((re=z.sourceEvent)!=null&&re.internal)){const R=m_(z.transform);G==null||G(R),e==null||e(z.sourceEvent,R)}}))},[P,D,e,f,n]),k.useEffect(()=>{D&&D.on("end",z=>{if(!z.sourceEvent||z.sourceEvent.internal)return null;const{onViewportChangeEnd:G}=B.getState();if(w.current=!1,B.setState({paneDragging:!1}),n&&bW(f,H.current??0)&&!_.current&&n(z.sourceEvent),_.current=!1,(r||G)&&Mit(M.current,z.transform)){const re=m_(z.transform);M.current=re,clearTimeout(S.current),S.current=setTimeout(()=>{G==null||G(re),r==null||r(z.sourceEvent,re)},i?150:0)}})},[D,i,f,r,n]),k.useEffect(()=>{D&&D.filter(z=>{const G=X||a,re=s&&z.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&z.button===1&&z.type==="mousedown"&&(Nv(z,"react-flow__node")||Nv(z,"react-flow__edge")))return!0;if(!f&&!G&&!i&&!u&&!s||P||!u&&z.type==="dblclick"||Nv(z,N)&&z.type==="wheel"||Nv(z,T)&&(z.type!=="wheel"||i&&z.type==="wheel"&&!X)||!s&&z.ctrlKey&&z.type==="wheel"||!G&&!i&&!re&&z.type==="wheel"||!f&&(z.type==="mousedown"||z.type==="touchstart")||Array.isArray(f)&&!f.includes(z.button)&&z.type==="mousedown")return!1;const R=Array.isArray(f)&&f.includes(z.button)||!z.button||z.button<=1;return(!z.ctrlKey||z.type==="wheel")&&R})},[P,D,a,s,i,u,f,d,X]),lt.createElement("div",{className:"react-flow__renderer",ref:F,style:z8},C)},Hit=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Vit(){const{userSelectionActive:e,userSelectionRect:t}=fs(Hit,rl);return e&&t?lt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function wW(e,t){const r=t.parentNode||t.parentId,n=e.find(a=>a.id===r);if(n){const a=t.position.x+t.width-n.width,s=t.position.y+t.height-n.height;if(a>0||s>0||t.position.x<0||t.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,a>0&&(n.style.width+=a),s>0&&(n.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);n.position.x=n.position.x-i,n.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);n.position.y=n.position.y-i,n.style.height+=i,t.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Aue(e,t){if(e.some(n=>n.type==="reset"))return e.filter(n=>n.type==="reset").map(n=>n.item);const r=e.filter(n=>n.type==="add").map(n=>n.item);return t.reduce((n,a)=>{const s=e.filter(o=>o.id===a.id);if(s.length===0)return n.push(a),n;const i={...a};for(const o of s)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&wW(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&wW(n,i);break}case"remove":return n}return n.push(i),n},r)}function fue(e,t){return Aue(e,t)}function zit(e,t){return Aue(e,t)}const j0=(e,t)=>({id:e,type:"select",selected:t});function tx(e,t){return e.reduce((r,n)=>{const a=t.includes(n.id);return!n.selected&&a?(n.selected=!0,r.push(j0(n.id,!0))):n.selected&&!a&&(n.selected=!1,r.push(j0(n.id,!1))),r},[])}const wI=(e,t)=>r=>{r.target===t.current&&(e==null||e(r))},$it=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),hue=k.memo(({isSelecting:e,selectionMode:t=e2.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:a,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const h=k.useRef(null),p=eo(),g=k.useRef(0),v=k.useRef(0),b=k.useRef(),{userSelectionActive:y,elementsSelectable:C,dragging:N}=fs($it,rl),T=()=>{p.setState({userSelectionActive:!1,userSelectionRect:null}),g.current=0,v.current=0},S=U=>{s==null||s(U),p.getState().resetSelectedElements(),p.setState({nodesSelectionActive:!1})},B=U=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){U.preventDefault();return}i==null||i(U)},w=o?U=>o(U):void 0,_=U=>{const{resetSelectedElements:P,domNode:X}=p.getState();if(b.current=X==null?void 0:X.getBoundingClientRect(),!C||!e||U.button!==0||U.target!==h.current||!b.current)return;const{x:H,y:Y}=sm(U,b.current);P(),p.setState({userSelectionRect:{width:0,height:0,startX:H,startY:Y,x:H,y:Y}}),n==null||n(U)},F=U=>{const{userSelectionRect:P,nodeInternals:X,edges:H,transform:Y,onNodesChange:V,onEdgesChange:z,nodeOrigin:G,getNodes:re}=p.getState();if(!e||!b.current||!P)return;p.setState({userSelectionActive:!0,nodesSelectionActive:!1});const R=sm(U,b.current),q=P.startX??0,J=P.startY??0,te={...P,x:R.x<q?R.x:q,y:R.y<J?R.y:J,width:Math.abs(R.x-q),height:Math.abs(R.y-J)},ie=re(),Ae=qce(X,te,Y,t===e2.Partial,!0,G),oe=Wce(Ae,H).map(pe=>pe.id),ce=Ae.map(pe=>pe.id);if(g.current!==ce.length){g.current=ce.length;const pe=tx(ie,ce);pe.length&&(V==null||V(pe))}if(v.current!==oe.length){v.current=oe.length;const pe=tx(H,oe);pe.length&&(z==null||z(pe))}p.setState({userSelectionRect:te})},M=U=>{if(U.button!==0)return;const{userSelectionRect:P}=p.getState();!y&&P&&U.target===h.current&&(S==null||S(U)),p.setState({nodesSelectionActive:g.current>0}),T(),a==null||a(U)},D=U=>{y&&(p.setState({nodesSelectionActive:g.current>0}),a==null||a(U)),T()},I=C&&(e||y);return lt.createElement("div",{className:El(["react-flow__pane",{dragging:N,selection:e}]),onClick:I?void 0:wI(S,h),onContextMenu:wI(B,h),onWheel:wI(w,h),onMouseEnter:I?void 0:c,onMouseDown:I?_:void 0,onMouseMove:I?F:u,onMouseUp:I?M:void 0,onMouseLeave:I?D:d,ref:h,style:z8},f,lt.createElement(Vit,null))});hue.displayName="Pane";function mue(e,t){const r=e.parentNode||e.parentId;if(!r)return!1;const n=t.get(r);return n?n.selected?!0:mue(n,t):!1}function EW(e,t,r){let n=e;do{if(n!=null&&n.matches(t))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function Git(e,t,r,n){return Array.from(e.values()).filter(a=>(a.selected||a.id===n)&&(!a.parentNode||a.parentId||!mue(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>{var s,i;return{id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((s=a.positionAbsolute)==null?void 0:s.x)??0),y:r.y-(((i=a.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}})}function Kit(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function pue(e,t,r,n,a=[0,0],s){const i=Kit(e,e.extent||n);let o=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=r.get(c),{x:h,y:p}=Cx(f,a).positionAbsolute;o=f&&Iu(h)&&Iu(p)&&Iu(f.width)&&Iu(f.height)?[[h+e.width*a[0],p+e.height*a[1]],[h+f.width-e.width+e.width*a[0],p+f.height-e.height+e.height*a[1]]]:o}else s==null||s("005",Sh.error005()),o=i;else if(e.extent&&c&&e.extent!=="parent"){const f=r.get(c),{x:h,y:p}=Cx(f,a).positionAbsolute;o=[[e.extent[0][0]+h,e.extent[0][1]+p],[e.extent[1][0]+h,e.extent[1][1]+p]]}let u={x:0,y:0};if(c){const f=r.get(c);u=Cx(f,a).positionAbsolute}const d=o&&o!=="parent"?D8(t,o):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function EI({nodeId:e,dragItems:t,nodeInternals:r}){const n=t.map(a=>({...r.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?n.find(a=>a.id===e):n[0],n]}const CW=(e,t,r,n)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const s=Array.from(a),i=t.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...O8(c)}})};function Zb(e,t,r){return r===void 0?r:n=>{const a=t().nodeInternals.get(e);a&&r(n,{...a})}}function IO({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:a,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:o,onError:c}=t.getState(),u=o.get(e);if(!u){c==null||c("012",Sh.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):a([e])}function qit(){const e=eo();return k.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:a,snapToGrid:s}=e.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,c={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:s?a[0]*Math.round(c.x/a[0]):c.x,ySnapped:s?a[1]*Math.round(c.y/a[1]):c.y,...c}},[])}function CI(e){return(t,r,n)=>e==null?void 0:e(t,n)}function gue({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:a,isSelectable:s,selectNodesOnDrag:i}){const o=eo(),[c,u]=k.useState(!1),d=k.useRef([]),f=k.useRef({x:null,y:null}),h=k.useRef(0),p=k.useRef(null),g=k.useRef({x:0,y:0}),v=k.useRef(null),b=k.useRef(!1),y=k.useRef(!1),C=k.useRef(!1),N=qit();return k.useEffect(()=>{if(e!=null&&e.current){const T=Su(e.current),S=({x:_,y:F})=>{const{nodeInternals:M,onNodeDrag:D,onSelectionDrag:I,updateNodePositions:U,nodeExtent:P,snapGrid:X,snapToGrid:H,nodeOrigin:Y,onError:V}=o.getState();f.current={x:_,y:F};let z=!1,G={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&P){const R=Q8(d.current,Y);G=P8(R)}if(d.current=d.current.map(R=>{const q={x:_-R.distance.x,y:F-R.distance.y};H&&(q.x=X[0]*Math.round(q.x/X[0]),q.y=X[1]*Math.round(q.y/X[1]));const J=[[P[0][0],P[0][1]],[P[1][0],P[1][1]]];d.current.length>1&&P&&!R.extent&&(J[0][0]=R.positionAbsolute.x-G.x+P[0][0],J[1][0]=R.positionAbsolute.x+(R.width??0)-G.x2+P[1][0],J[0][1]=R.positionAbsolute.y-G.y+P[0][1],J[1][1]=R.positionAbsolute.y+(R.height??0)-G.y2+P[1][1]);const te=pue(R,q,M,J,Y,V);return z=z||R.position.x!==te.position.x||R.position.y!==te.position.y,R.position=te.position,R.positionAbsolute=te.positionAbsolute,R}),!z)return;U(d.current,!0,!0),u(!0);const re=a?D:CI(I);if(re&&v.current){const[R,q]=EI({nodeId:a,dragItems:d.current,nodeInternals:M});re(v.current,R,q)}},B=()=>{if(!p.current)return;const[_,F]=Mce(g.current,p.current);if(_!==0||F!==0){const{transform:M,panBy:D}=o.getState();f.current.x=(f.current.x??0)-_/M[2],f.current.y=(f.current.y??0)-F/M[2],D({x:_,y:F})&&S(f.current)}h.current=requestAnimationFrame(B)},w=_=>{var Y;const{nodeInternals:F,multiSelectionActive:M,nodesDraggable:D,unselectNodesAndEdges:I,onNodeDragStart:U,onSelectionDragStart:P}=o.getState();y.current=!0;const X=a?U:CI(P);(!i||!s)&&!M&&a&&((Y=F.get(a))!=null&&Y.selected||I()),a&&s&&i&&IO({id:a,store:o,nodeRef:e});const H=N(_);if(f.current=H,d.current=Git(F,D,H,a),X&&d.current){const[V,z]=EI({nodeId:a,dragItems:d.current,nodeInternals:F});X(_.sourceEvent,V,z)}};if(t)T.on(".drag",null);else{const _=Bat().on("start",F=>{const{domNode:M,nodeDragThreshold:D}=o.getState();D===0&&w(F),C.current=!1;const I=N(F);f.current=I,p.current=(M==null?void 0:M.getBoundingClientRect())||null,g.current=sm(F.sourceEvent,p.current)}).on("drag",F=>{var U,P;const M=N(F),{autoPanOnNodeDrag:D,nodeDragThreshold:I}=o.getState();if(F.sourceEvent.type==="touchmove"&&F.sourceEvent.touches.length>1&&(C.current=!0),!C.current){if(!b.current&&y.current&&D&&(b.current=!0,B()),!y.current){const X=M.xSnapped-(((U=f==null?void 0:f.current)==null?void 0:U.x)??0),H=M.ySnapped-(((P=f==null?void 0:f.current)==null?void 0:P.y)??0);Math.sqrt(X*X+H*H)>I&&w(F)}(f.current.x!==M.xSnapped||f.current.y!==M.ySnapped)&&d.current&&y.current&&(v.current=F.sourceEvent,g.current=sm(F.sourceEvent,p.current),S(M))}}).on("end",F=>{if(!(!y.current||C.current)&&(u(!1),b.current=!1,y.current=!1,cancelAnimationFrame(h.current),d.current)){const{updateNodePositions:M,nodeInternals:D,onNodeDragStop:I,onSelectionDragStop:U}=o.getState(),P=a?I:CI(U);if(M(d.current,!1,!1),P){const[X,H]=EI({nodeId:a,dragItems:d.current,nodeInternals:D});P(F.sourceEvent,X,H)}}}).filter(F=>{const M=F.target;return!F.button&&(!r||!EW(M,`.${r}`,e))&&(!n||EW(M,n,e))});return T.call(_),()=>{T.on(".drag",null)}}}},[e,t,r,n,s,o,a,i,N]),c}function vue(){const e=eo();return k.useCallback(r=>{const{nodeInternals:n,nodeExtent:a,updateNodePositions:s,getNodes:i,snapToGrid:o,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(C=>C.selected&&(C.draggable||d&&typeof C.draggable>"u")),h=o?c[0]:5,p=o?c[1]:5,g=r.isShiftPressed?4:1,v=r.x*h*g,b=r.y*p*g,y=f.map(C=>{if(C.positionAbsolute){const N={x:C.positionAbsolute.x+v,y:C.positionAbsolute.y+b};o&&(N.x=c[0]*Math.round(N.x/c[0]),N.y=c[1]*Math.round(N.y/c[1]));const{positionAbsolute:T,position:S}=pue(C,N,n,a,void 0,u);C.position=S,C.positionAbsolute=T}return C});s(y,!0,!1)},[])}const _x={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ey=e=>{const t=({id:r,type:n,data:a,xPos:s,yPos:i,xPosOrigin:o,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:h,onMouseLeave:p,onContextMenu:g,onDoubleClick:v,style:b,className:y,isDraggable:C,isSelectable:N,isConnectable:T,isFocusable:S,selectNodesOnDrag:B,sourcePosition:w,targetPosition:_,hidden:F,resizeObserver:M,dragHandle:D,zIndex:I,isParent:U,noDragClassName:P,noPanClassName:X,initialized:H,disableKeyboardA11y:Y,ariaLabel:V,rfId:z,hasHandleBounds:G})=>{const re=eo(),R=k.useRef(null),q=k.useRef(null),J=k.useRef(w),te=k.useRef(_),ie=k.useRef(n),Ae=N||C||d||f||h||p,oe=vue(),ce=Zb(r,re.getState,f),pe=Zb(r,re.getState,h),Ie=Zb(r,re.getState,p),ne=Zb(r,re.getState,g),Se=Zb(r,re.getState,v),De=je=>{const{nodeDragThreshold:He}=re.getState();if(N&&(!B||!C||He>0)&&IO({id:r,store:re,nodeRef:R}),d){const Xe=re.getState().nodeInternals.get(r);Xe&&d(je,{...Xe})}},_e=je=>{if(!NO(je)&&!Y)if(Qce.includes(je.key)&&N){const He=je.key==="Escape";IO({id:r,store:re,unselect:He,nodeRef:R})}else C&&u&&Object.prototype.hasOwnProperty.call(_x,je.key)&&(re.setState({ariaLiveMessage:`Moved selected node ${je.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),oe({x:_x[je.key].x,y:_x[je.key].y,isShiftPressed:je.shiftKey}))};k.useEffect(()=>()=>{q.current&&(M==null||M.unobserve(q.current),q.current=null)},[]),k.useEffect(()=>{if(R.current&&!F){const je=R.current;(!H||!G||q.current!==je)&&(q.current&&(M==null||M.unobserve(q.current)),M==null||M.observe(je),q.current=je)}},[F,H,G]),k.useEffect(()=>{const je=ie.current!==n,He=J.current!==w,Xe=te.current!==_;R.current&&(je||He||Xe)&&(je&&(ie.current=n),He&&(J.current=w),Xe&&(te.current=_),re.getState().updateNodeDimensions([{id:r,nodeElement:R.current,forceUpdate:!0}]))},[r,n,w,_]);const he=gue({nodeRef:R,disabled:F||!C,noDragClassName:P,handleSelector:D,nodeId:r,isSelectable:N,selectNodesOnDrag:B});return F?null:lt.createElement("div",{className:El(["react-flow__node",`react-flow__node-${n}`,{[X]:C},y,{selected:u,selectable:N,parent:U,dragging:he}]),ref:R,style:{zIndex:I,transform:`translate(${o}px,${c}px)`,pointerEvents:Ae?"all":"none",visibility:H?"visible":"hidden",...b},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ce,onMouseMove:pe,onMouseLeave:Ie,onContextMenu:ne,onClick:De,onDoubleClick:Se,onKeyDown:S?_e:void 0,tabIndex:S?0:void 0,role:S?"button":void 0,"aria-describedby":Y?void 0:`${oue}-${z}`,"aria-label":V},lt.createElement(lit,{value:r},lt.createElement(e,{id:r,data:a,type:n,xPos:s,yPos:i,selected:u,isConnectable:T,sourcePosition:w,targetPosition:_,dragging:he,dragHandle:D,zIndex:I})))};return t.displayName="NodeWrapper",k.memo(t)};const Wit=e=>{const t=e.getNodes().filter(r=>r.selected);return{...Q8(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function Xit({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=eo(),{width:a,height:s,x:i,y:o,transformString:c,userSelectionActive:u}=fs(Wit,rl),d=vue(),f=k.useRef(null);if(k.useEffect(()=>{var g;r||(g=f.current)==null||g.focus({preventScroll:!0})},[r]),gue({nodeRef:f}),u||!a||!s)return null;const h=e?g=>{const v=n.getState().getNodes().filter(b=>b.selected);e(g,v)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(_x,g.key)&&d({x:_x[g.key].x,y:_x[g.key].y,isShiftPressed:g.shiftKey})};return lt.createElement("div",{className:El(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},lt.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:r?void 0:-1,onKeyDown:r?void 0:p,style:{width:a,height:s,top:o,left:i}}))}var Yit=k.memo(Xit);const Jit=e=>e.nodesSelectionActive,xue=({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:o,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:v,multiSelectionKeyCode:b,panActivationKeyCode:y,zoomActivationKeyCode:C,elementsSelectable:N,zoomOnScroll:T,zoomOnPinch:S,panOnScroll:B,panOnScrollSpeed:w,panOnScrollMode:_,zoomOnDoubleClick:F,panOnDrag:M,defaultViewport:D,translateExtent:I,minZoom:U,maxZoom:P,preventScrolling:X,onSelectionContextMenu:H,noWheelClassName:Y,noPanClassName:V,disableKeyboardA11y:z})=>{const G=fs(Jit),re=t2(f),R=t2(y),q=R||M,J=R||B,te=re||h&&q!==!0;return Rit({deleteKeyCode:o,multiSelectionKeyCode:b}),lt.createElement(Qit,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:N,zoomOnScroll:T,zoomOnPinch:S,panOnScroll:J,panOnScrollSpeed:w,panOnScrollMode:_,zoomOnDoubleClick:F,panOnDrag:!re&&q,defaultViewport:D,translateExtent:I,minZoom:U,maxZoom:P,zoomActivationKeyCode:C,preventScrolling:X,noWheelClassName:Y,noPanClassName:V},lt.createElement(hue,{onSelectionStart:g,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:a,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:q,isSelecting:!!te,selectionMode:p},e,G&&lt.createElement(Yit,{onSelectionContextMenu:H,noPanClassName:V,disableKeyboardA11y:z})))};xue.displayName="FlowRenderer";var Zit=k.memo(xue);function eot(e){return fs(k.useCallback(r=>e?qce(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function tot(e){const t={input:ey(e.input||nue),default:ey(e.default||jO),output:ey(e.output||sue),group:ey(e.group||V8)},r={},n=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,s)=>(a[s]=ey(e[s]||jO),a),r);return{...t,...n}}const rot=({x:e,y:t,width:r,height:n,origin:a})=>!r||!n?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-r*a[0],y:t-n*a[1]},not=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),bue=e=>{const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:a,updateNodeDimensions:s,onError:i}=fs(not,rl),o=eot(e.onlyRenderVisibleElements),c=k.useRef(),u=k.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const h=f.map(p=>({id:p.target.getAttribute("data-id"),nodeElement:p.target,forceUpdate:!0}));s(h)});return c.current=d,d},[]);return k.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),lt.createElement("div",{className:"react-flow__nodes",style:z8},o.map(d=>{var S,B,w;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",Sh.error003(f)),f="default");const h=e.nodeTypes[f]||e.nodeTypes.default,p=!!(d.draggable||t&&typeof d.draggable>"u"),g=!!(d.selectable||a&&typeof d.selectable>"u"),v=!!(d.connectable||r&&typeof d.connectable>"u"),b=!!(d.focusable||n&&typeof d.focusable>"u"),y=e.nodeExtent?D8(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,C=(y==null?void 0:y.x)??0,N=(y==null?void 0:y.y)??0,T=rot({x:C,y:N,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return lt.createElement(h,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||Er.Bottom,targetPosition:d.targetPosition||Er.Top,hidden:d.hidden,xPos:C,yPos:N,xPosOrigin:T.x,yPosOrigin:T.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:p,isSelectable:g,isConnectable:v,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((S=d[Bs])==null?void 0:S.z)??0,isParent:!!((B=d[Bs])!=null&&B.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((w=d[Bs])!=null&&w.handleBounds)})}))};bue.displayName="NodeRenderer";var aot=k.memo(bue);const sot=(e,t,r)=>r===Er.Left?e-t:r===Er.Right?e+t:e,iot=(e,t,r)=>r===Er.Top?e-t:r===Er.Bottom?e+t:e,_W="react-flow__edgeupdater",SW=({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:a,onMouseEnter:s,onMouseOut:i,type:o})=>lt.createElement("circle",{onMouseDown:a,onMouseEnter:s,onMouseOut:i,className:El([_W,`${_W}-${o}`]),cx:sot(t,n,e),cy:iot(r,n,e),r:n,stroke:"transparent",fill:"transparent"}),oot=()=>!0;var kv=e=>{const t=({id:r,className:n,type:a,data:s,onClick:i,onEdgeDoubleClick:o,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,style:b,source:y,target:C,sourceX:N,sourceY:T,targetX:S,targetY:B,sourcePosition:w,targetPosition:_,elementsSelectable:F,hidden:M,sourceHandleId:D,targetHandleId:I,onContextMenu:U,onMouseEnter:P,onMouseMove:X,onMouseLeave:H,reconnectRadius:Y,onReconnect:V,onReconnectStart:z,onReconnectEnd:G,markerEnd:re,markerStart:R,rfId:q,ariaLabel:J,isFocusable:te,isReconnectable:ie,pathOptions:Ae,interactionWidth:oe,disableKeyboardA11y:ce})=>{const pe=k.useRef(null),[Ie,ne]=k.useState(!1),[Se,De]=k.useState(!1),_e=eo(),he=k.useMemo(()=>`url('#${BO(R,q)}')`,[R,q]),je=k.useMemo(()=>`url('#${BO(re,q)}')`,[re,q]);if(M)return null;const He=yt=>{var Fn;const{edges:kr,addSelectedEdges:rr,unselectNodesAndEdges:an,multiSelectionActive:_r}=_e.getState(),zr=kr.find(Fr=>Fr.id===r);zr&&(F&&(_e.setState({nodesSelectionActive:!1}),zr.selected&&_r?(an({nodes:[],edges:[zr]}),(Fn=pe.current)==null||Fn.blur()):rr([r])),i&&i(yt,zr))},Xe=Jb(r,_e.getState,o),ye=Jb(r,_e.getState,U),Oe=Jb(r,_e.getState,P),Re=Jb(r,_e.getState,X),qe=Jb(r,_e.getState,H),Ze=(yt,kr)=>{if(yt.button!==0)return;const{edges:rr,isValidConnection:an}=_e.getState(),_r=kr?C:y,zr=(kr?I:D)||null,Fn=kr?"target":"source",Fr=an||oot,vt=kr,pt=rr.find(dt=>dt.id===r);De(!0),z==null||z(yt,pt,Fn);const Je=dt=>{De(!1),G==null||G(dt,pt,Fn)};Zce({event:yt,handleId:zr,nodeId:_r,onConnect:dt=>V==null?void 0:V(pt,dt),isTarget:vt,getState:_e.getState,setState:_e.setState,isValidConnection:Fr,edgeUpdaterType:Fn,onReconnectEnd:Je})},ot=yt=>Ze(yt,!0),mt=yt=>Ze(yt,!1),Tt=()=>ne(!0),Mt=()=>ne(!1),Dt=!F&&!i,Qt=yt=>{var kr;if(!ce&&Qce.includes(yt.key)&&F){const{unselectNodesAndEdges:rr,addSelectedEdges:an,edges:_r}=_e.getState();yt.key==="Escape"?((kr=pe.current)==null||kr.blur(),rr({edges:[_r.find(Fn=>Fn.id===r)]})):an([r])}};return lt.createElement("g",{className:El(["react-flow__edge",`react-flow__edge-${a}`,n,{selected:c,animated:u,inactive:Dt,updating:Ie}]),onClick:He,onDoubleClick:Xe,onContextMenu:ye,onMouseEnter:Oe,onMouseMove:Re,onMouseLeave:qe,onKeyDown:te?Qt:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":J===null?void 0:J||`Edge from ${y} to ${C}`,"aria-describedby":te?`${lue}-${q}`:void 0,ref:pe},!Se&&lt.createElement(e,{id:r,source:y,target:C,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:v,data:s,style:b,sourceX:N,sourceY:T,targetX:S,targetY:B,sourcePosition:w,targetPosition:_,sourceHandleId:D,targetHandleId:I,markerStart:he,markerEnd:je,pathOptions:Ae,interactionWidth:oe}),ie&&lt.createElement(lt.Fragment,null,(ie==="source"||ie===!0)&&lt.createElement(SW,{position:w,centerX:N,centerY:T,radius:Y,onMouseDown:ot,onMouseEnter:Tt,onMouseOut:Mt,type:"source"}),(ie==="target"||ie===!0)&&lt.createElement(SW,{position:_,centerX:S,centerY:B,radius:Y,onMouseDown:mt,onMouseEnter:Tt,onMouseOut:Mt,type:"target"})))};return t.displayName="EdgeWrapper",k.memo(t)};function lot(e){const t={default:kv(e.default||fN),straight:kv(e.bezier||M8),step:kv(e.step||L8),smoothstep:kv(e.step||Bk),simplebezier:kv(e.simplebezier||R8)},r={},n=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,s)=>(a[s]=kv(e[s]||fN),a),r);return{...t,...n}}function NW(e,t,r=null){const n=((r==null?void 0:r.x)||0)+t.x,a=((r==null?void 0:r.y)||0)+t.y,s=(r==null?void 0:r.width)||t.width,i=(r==null?void 0:r.height)||t.height;switch(e){case Er.Top:return{x:n+s/2,y:a};case Er.Right:return{x:n+s,y:a+i/2};case Er.Bottom:return{x:n+s/2,y:a+i};case Er.Left:return{x:n,y:a+i/2}}}function kW(e,t){return e?e.length===1||!t?e[0]:t&&e.find(r=>r.id===t)||null:null}const cot=(e,t,r,n,a,s)=>{const i=NW(r,e,t),o=NW(s,n,a);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function uot({sourcePos:e,targetPos:t,sourceWidth:r,sourceHeight:n,targetWidth:a,targetHeight:s,width:i,height:o,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+r,t.x+a),y2:Math.max(e.y+n,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=P8({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:o/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),h=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*h)>0}function BW(e){var n,a,s,i,o;const t=((n=e==null?void 0:e[Bs])==null?void 0:n.handleBounds)||null,r=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((o=e==null?void 0:e.positionAbsolute)==null?void 0:o.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!r]}const dot=[{level:0,isMaxLevel:!0,edges:[]}];function Aot(e,t,r=!1){let n=-1;const a=e.reduce((i,o)=>{var d,f;const c=Iu(o.zIndex);let u=c?o.zIndex:0;if(r){const h=t.get(o.target),p=t.get(o.source),g=o.selected||(h==null?void 0:h.selected)||(p==null?void 0:p.selected),v=Math.max(((d=p==null?void 0:p[Bs])==null?void 0:d.z)||0,((f=h==null?void 0:h[Bs])==null?void 0:f.z)||0,1e3);u=(c?o.zIndex:0)+(g?v:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),s=Object.entries(a).map(([i,o])=>{const c=+i;return{edges:o,level:c,isMaxLevel:c===n}});return s.length===0?dot:s}function fot(e,t,r){const n=fs(k.useCallback(a=>e?a.edges.filter(s=>{const i=t.get(s.source),o=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&uot({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return Aot(n,t,r)}const hot=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),mot=({color:e="none",strokeWidth:t=1})=>lt.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),TW={[AN.Arrow]:hot,[AN.ArrowClosed]:mot};function pot(e){const t=eo();return k.useMemo(()=>{var a,s;return Object.prototype.hasOwnProperty.call(TW,e)?TW[e]:((s=(a=t.getState()).onError)==null||s.call(a,"009",Sh.error009(e)),null)},[e])}const got=({id:e,type:t,color:r,width:n=12.5,height:a=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const c=pot(t);return c?lt.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:o,refX:"0",refY:"0"},lt.createElement(c,{color:r,strokeWidth:i})):null},vot=({defaultColor:e,rfId:t})=>r=>{const n=[];return r.edges.reduce((a,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=BO(i,t);n.includes(o)||(a.push({id:o,color:i.color||e,...i}),n.push(o))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))},yue=({defaultColor:e,rfId:t})=>{const r=fs(k.useCallback(vot({defaultColor:e,rfId:t}),[e,t]),(n,a)=>!(n.length!==a.length||n.some((s,i)=>s.id!==a[i].id)));return lt.createElement("defs",null,r.map(n=>lt.createElement(got,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};yue.displayName="MarkerDefinitions";var xot=k.memo(yue);const bot=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),wue=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:r,rfId:n,edgeTypes:a,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:v,children:b,disableKeyboardA11y:y})=>{const{edgesFocusable:C,edgesUpdatable:N,elementsSelectable:T,width:S,height:B,connectionMode:w,nodeInternals:_,onError:F}=fs(bot,rl),M=fot(t,_,r);return S?lt.createElement(lt.Fragment,null,M.map(({level:D,edges:I,isMaxLevel:U})=>lt.createElement("svg",{key:D,style:{zIndex:D},width:S,height:B,className:"react-flow__edges react-flow__container"},U&&lt.createElement(xot,{defaultColor:e,rfId:n}),lt.createElement("g",null,I.map(P=>{const[X,H,Y]=BW(_.get(P.source)),[V,z,G]=BW(_.get(P.target));if(!Y||!G)return null;let re=P.type||"default";a[re]||(F==null||F("011",Sh.error011(re)),re="default");const R=a[re]||a.default,q=w===Ag.Strict?z.target:(z.target??[]).concat(z.source??[]),J=kW(H.source,P.sourceHandle),te=kW(q,P.targetHandle),ie=(J==null?void 0:J.position)||Er.Bottom,Ae=(te==null?void 0:te.position)||Er.Top,oe=!!(P.focusable||C&&typeof P.focusable>"u"),ce=P.reconnectable||P.updatable,pe=typeof h<"u"&&(ce||N&&typeof ce>"u");if(!J||!te)return F==null||F("008",Sh.error008(J,P)),null;const{sourceX:Ie,sourceY:ne,targetX:Se,targetY:De}=cot(X,J,ie,V,te,Ae);return lt.createElement(R,{key:P.id,id:P.id,className:El([P.className,s]),type:re,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:Ie,sourceY:ne,targetX:Se,targetY:De,sourcePosition:ie,targetPosition:Ae,elementsSelectable:T,onContextMenu:i,onMouseEnter:o,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:h,onReconnectStart:p,onReconnectEnd:g,reconnectRadius:v,rfId:n,ariaLabel:P.ariaLabel,isFocusable:oe,isReconnectable:pe,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth,disableKeyboardA11y:y})})))),b):null};wue.displayName="EdgeRenderer";var yot=k.memo(wue);const wot=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Eot({children:e}){const t=fs(wot);return lt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Cot(e){const t=Tk(),r=k.useRef(!1);k.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const _ot={[Er.Left]:Er.Right,[Er.Right]:Er.Left,[Er.Top]:Er.Bottom,[Er.Bottom]:Er.Top},Eue=({nodeId:e,handleType:t,style:r,type:n=R0.Bezier,CustomComponent:a,connectionStatus:s})=>{var B,w,_;const{fromNode:i,handleId:o,toX:c,toY:u,connectionMode:d}=fs(k.useCallback(F=>({fromNode:F.nodeInternals.get(e),handleId:F.connectionHandleId,toX:(F.connectionPosition.x-F.transform[0])/F.transform[2],toY:(F.connectionPosition.y-F.transform[1])/F.transform[2],connectionMode:F.connectionMode}),[e]),rl),f=(B=i==null?void 0:i[Bs])==null?void 0:B.handleBounds;let h=f==null?void 0:f[t];if(d===Ag.Loose&&(h=h||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!h)return null;const p=o?h.find(F=>F.id===o):h[0],g=p?p.x+p.width/2:(i.width??0)/2,v=p?p.y+p.height/2:i.height??0,b=(((w=i.positionAbsolute)==null?void 0:w.x)??0)+g,y=(((_=i.positionAbsolute)==null?void 0:_.y)??0)+v,C=p==null?void 0:p.position,N=C?_ot[C]:null;if(!C||!N)return null;if(a)return lt.createElement(a,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:p,fromX:b,fromY:y,toX:c,toY:u,fromPosition:C,toPosition:N,connectionStatus:s});let T="";const S={sourceX:b,sourceY:y,sourcePosition:C,targetX:c,targetY:u,targetPosition:N};return n===R0.Bezier?[T]=Gce(S):n===R0.Step?[T]=kO({...S,borderRadius:0}):n===R0.SmoothStep?[T]=kO(S):n===R0.SimpleBezier?[T]=$ce(S):T=`M${b},${y} ${c},${u}`,lt.createElement("path",{d:T,fill:"none",className:"react-flow__connection-path",style:r})};Eue.displayName="ConnectionLine";const Sot=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Not({containerStyle:e,style:t,type:r,component:n}){const{nodeId:a,handleType:s,nodesConnectable:i,width:o,height:c,connectionStatus:u}=fs(Sot,rl);return!(a&&s&&o&&i)?null:lt.createElement("svg",{style:e,width:o,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},lt.createElement("g",{className:El(["react-flow__connection",u])},lt.createElement(Eue,{nodeId:a,handleType:s,style:t,type:r,CustomComponent:n,connectionStatus:u})))}function jW(e,t){return k.useRef(null),eo(),k.useMemo(()=>t(e),[e])}const Cue=({nodeTypes:e,edgeTypes:t,onMove:r,onMoveStart:n,onMoveEnd:a,onInit:s,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,onSelectionContextMenu:g,onSelectionStart:v,onSelectionEnd:b,connectionLineType:y,connectionLineStyle:C,connectionLineComponent:N,connectionLineContainerStyle:T,selectionKeyCode:S,selectionOnDrag:B,selectionMode:w,multiSelectionKeyCode:_,panActivationKeyCode:F,zoomActivationKeyCode:M,deleteKeyCode:D,onlyRenderVisibleElements:I,elementsSelectable:U,selectNodesOnDrag:P,defaultViewport:X,translateExtent:H,minZoom:Y,maxZoom:V,preventScrolling:z,defaultMarkerColor:G,zoomOnScroll:re,zoomOnPinch:R,panOnScroll:q,panOnScrollSpeed:J,panOnScrollMode:te,zoomOnDoubleClick:ie,panOnDrag:Ae,onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:pe,onPaneMouseLeave:Ie,onPaneScroll:ne,onPaneContextMenu:Se,onEdgeContextMenu:De,onEdgeMouseEnter:_e,onEdgeMouseMove:he,onEdgeMouseLeave:je,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:ye,reconnectRadius:Oe,noDragClassName:Re,noWheelClassName:qe,noPanClassName:Ze,elevateEdgesOnSelect:ot,disableKeyboardA11y:mt,nodeOrigin:Tt,nodeExtent:Mt,rfId:Dt})=>{const Qt=jW(e,tot),yt=jW(t,lot);return Cot(s),lt.createElement(Zit,{onPaneClick:oe,onPaneMouseEnter:ce,onPaneMouseMove:pe,onPaneMouseLeave:Ie,onPaneContextMenu:Se,onPaneScroll:ne,deleteKeyCode:D,selectionKeyCode:S,selectionOnDrag:B,selectionMode:w,onSelectionStart:v,onSelectionEnd:b,multiSelectionKeyCode:_,panActivationKeyCode:F,zoomActivationKeyCode:M,elementsSelectable:U,onMove:r,onMoveStart:n,onMoveEnd:a,zoomOnScroll:re,zoomOnPinch:R,zoomOnDoubleClick:ie,panOnScroll:q,panOnScrollSpeed:J,panOnScrollMode:te,panOnDrag:Ae,defaultViewport:X,translateExtent:H,minZoom:Y,maxZoom:V,onSelectionContextMenu:g,preventScrolling:z,noDragClassName:Re,noWheelClassName:qe,noPanClassName:Ze,disableKeyboardA11y:mt},lt.createElement(Eot,null,lt.createElement(yot,{edgeTypes:yt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:I,onEdgeContextMenu:De,onEdgeMouseEnter:_e,onEdgeMouseMove:he,onEdgeMouseLeave:je,onReconnect:He,onReconnectStart:Xe,onReconnectEnd:ye,reconnectRadius:Oe,defaultMarkerColor:G,noPanClassName:Ze,elevateEdgesOnSelect:!!ot,disableKeyboardA11y:mt,rfId:Dt},lt.createElement(Not,{style:C,type:y,component:N,containerStyle:T})),lt.createElement("div",{className:"react-flow__edgelabel-renderer"}),lt.createElement(aot,{nodeTypes:Qt,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:h,onNodeContextMenu:p,selectNodesOnDrag:P,onlyRenderVisibleElements:I,noPanClassName:Ze,noDragClassName:Re,disableKeyboardA11y:mt,nodeOrigin:Tt,nodeExtent:Mt,rfId:Dt})))};Cue.displayName="GraphView";var kot=k.memo(Cue);const FO=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],C0={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:FO,nodeExtent:FO,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ag.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:rit,isValidConnection:void 0},Bot=()=>Qrt((e,t)=>({...C0,setNodes:r=>{const{nodeInternals:n,nodeOrigin:a,elevateNodesOnSelect:s}=t();e({nodeInternals:yI(r,n,a,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=t();e({edges:r.map(a=>({...n,...a}))})},setDefaultNodesAndEdges:(r,n)=>{const a=typeof r<"u",s=typeof n<"u",i=a?yI(r,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?n:[],hasDefaultNodes:a,hasDefaultEdges:s})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:a,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=r.reduce((v,b)=>{const y=a.get(b.id);if(y!=null&&y.hidden)a.set(y.id,{...y,[Bs]:{...y[Bs],handleBounds:void 0}});else if(y){const C=O8(b.nodeElement);!!(C.width&&C.height&&(y.width!==C.width||y.height!==C.height||b.forceUpdate))&&(a.set(y.id,{...y,[Bs]:{...y[Bs],handleBounds:{source:CW(".source",b.nodeElement,h,u),target:CW(".target",b.nodeElement,h,u)}},...C}),v.push({id:y.id,type:"dimensions",dimensions:C}))}return v},[]);uue(a,u);const g=i||s&&!i&&due(t,{initial:!0,...o});e({nodeInternals:new Map(a),fitViewOnInitDone:g}),(p==null?void 0:p.length)>0&&(n==null||n(p))},updateNodePositions:(r,n=!0,a=!1)=>{const{triggerNodeChanges:s}=t(),i=r.map(o=>{const c={id:o.id,type:"position",dragging:a};return n&&(c.positionAbsolute=o.positionAbsolute,c.position=o.position),c});s(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:a,hasDefaultNodes:s,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:c}=t();if(r!=null&&r.length){if(s){const u=fue(r,o()),d=yI(u,a,i,c);e({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>j0(c,!0)):(i=tx(s(),r),o=tx(a,[])),h_({changedNodes:i,changedEdges:o,get:t,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:a,getNodes:s}=t();let i,o=null;n?i=r.map(c=>j0(c,!0)):(i=tx(a,r),o=tx(s(),[])),h_({changedNodes:o,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:a,getNodes:s}=t(),i=r||s(),o=n||a,c=i.map(d=>(d.selected=!1,j0(d.id,!1))),u=o.map(d=>j0(d.id,!1));h_({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:a}=t();n==null||n.scaleExtent([r,a]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:a}=t();n==null||n.scaleExtent([a,r]),e({maxZoom:r})},setTranslateExtent:r=>{var n;(n=t().d3Zoom)==null||n.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=t(),s=n().filter(o=>o.selected).map(o=>j0(o.id,!1)),i=r.filter(o=>o.selected).map(o=>j0(o.id,!1));h_({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:r=>{const{nodeInternals:n}=t();n.forEach(a=>{a.positionAbsolute=D8(a.position,r)}),e({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:a,height:s,d3Zoom:i,d3Selection:o,translateExtent:c}=t();if(!i||!o||!r.x&&!r.y)return!1;const u=am.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[a,s]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(o,f),n[0]!==f.x||n[1]!==f.y||n[2]!==f.k},cancelConnection:()=>e({connectionNodeId:C0.connectionNodeId,connectionHandleId:C0.connectionHandleId,connectionHandleType:C0.connectionHandleType,connectionStatus:C0.connectionStatus,connectionStartHandle:C0.connectionStartHandle,connectionEndHandle:C0.connectionEndHandle}),reset:()=>e({...C0})}),Object.is),$8=({children:e})=>{const t=k.useRef(null);return t.current||(t.current=Bot()),lt.createElement(qst,{value:t.current},e)};$8.displayName="ReactFlowProvider";const _ue=({children:e})=>k.useContext(kk)?lt.createElement(lt.Fragment,null,e):lt.createElement($8,null,e);_ue.displayName="ReactFlowWrapper";const Tot={input:nue,default:jO,output:sue,group:V8},jot={default:fN,straight:M8,step:L8,smoothstep:Bk,simplebezier:R8},Iot=[0,0],Fot=[15,15],Oot={x:0,y:0,zoom:1},Dot={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Sue=k.forwardRef(({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:a,nodeTypes:s=Tot,edgeTypes:i=jot,onNodeClick:o,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:g,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:y,onNodeMouseEnter:C,onNodeMouseMove:N,onNodeMouseLeave:T,onNodeContextMenu:S,onNodeDoubleClick:B,onNodeDragStart:w,onNodeDrag:_,onNodeDragStop:F,onNodesDelete:M,onEdgesDelete:D,onSelectionChange:I,onSelectionDragStart:U,onSelectionDrag:P,onSelectionDragStop:X,onSelectionContextMenu:H,onSelectionStart:Y,onSelectionEnd:V,connectionMode:z=Ag.Strict,connectionLineType:G=R0.Bezier,connectionLineStyle:re,connectionLineComponent:R,connectionLineContainerStyle:q,deleteKeyCode:J="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ie=!1,selectionMode:Ae=e2.Full,panActivationKeyCode:oe="Space",multiSelectionKeyCode:ce=dN()?"Meta":"Control",zoomActivationKeyCode:pe=dN()?"Meta":"Control",snapToGrid:Ie=!1,snapGrid:ne=Fot,onlyRenderVisibleElements:Se=!1,selectNodesOnDrag:De=!0,nodesDraggable:_e,nodesConnectable:he,nodesFocusable:je,nodeOrigin:He=Iot,edgesFocusable:Xe,edgesUpdatable:ye,elementsSelectable:Oe,defaultViewport:Re=Oot,minZoom:qe=.5,maxZoom:Ze=2,translateExtent:ot=FO,preventScrolling:mt=!0,nodeExtent:Tt,defaultMarkerColor:Mt="#b1b1b7",zoomOnScroll:Dt=!0,zoomOnPinch:Qt=!0,panOnScroll:yt=!1,panOnScrollSpeed:kr=.5,panOnScrollMode:rr=jp.Free,zoomOnDoubleClick:an=!0,panOnDrag:_r=!0,onPaneClick:zr,onPaneMouseEnter:Fn,onPaneMouseMove:Fr,onPaneMouseLeave:vt,onPaneScroll:pt,onPaneContextMenu:Je,children:gt,onEdgeContextMenu:dt,onEdgeDoubleClick:Pt,onEdgeMouseEnter:zt,onEdgeMouseMove:Lr,onEdgeMouseLeave:Xr,onEdgeUpdate:xn,onEdgeUpdateStart:bn,onEdgeUpdateEnd:$t,onReconnect:rn,onReconnectStart:en,onReconnectEnd:dr,reconnectRadius:Yr=10,edgeUpdaterRadius:ra=10,onNodesChange:fe,onEdgesChange:Be,noDragClassName:Ee="nodrag",noWheelClassName:Ce="nowheel",noPanClassName:Ne="nopan",fitView:Te=!1,fitViewOptions:Ye,connectOnClick:ut=!0,attributionPosition:$e,proOptions:tt,defaultEdgeOptions:at,elevateNodesOnSelect:jt=!0,elevateEdgesOnSelect:Vt=!1,disableKeyboardA11y:Jt=!1,autoPanOnConnect:Ht=!0,autoPanOnNodeDrag:Gt=!0,connectionRadius:Sr=20,isValidConnection:sn,onError:on,style:An,id:ms,nodeDragThreshold:bo,...ps},Zs)=>{const Fs=ms||"1";return lt.createElement("div",{...ps,style:{...An,...Dot},ref:Zs,className:El(["react-flow",a]),"data-testid":"rf__wrapper",id:ms},lt.createElement(_ue,null,lt.createElement(kot,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:h,onNodeClick:o,onEdgeClick:c,onNodeMouseEnter:C,onNodeMouseMove:N,onNodeMouseLeave:T,onNodeContextMenu:S,onNodeDoubleClick:B,nodeTypes:s,edgeTypes:i,connectionLineType:G,connectionLineStyle:re,connectionLineComponent:R,connectionLineContainerStyle:q,selectionKeyCode:te,selectionOnDrag:ie,selectionMode:Ae,deleteKeyCode:J,multiSelectionKeyCode:ce,panActivationKeyCode:oe,zoomActivationKeyCode:pe,onlyRenderVisibleElements:Se,selectNodesOnDrag:De,defaultViewport:Re,translateExtent:ot,minZoom:qe,maxZoom:Ze,preventScrolling:mt,zoomOnScroll:Dt,zoomOnPinch:Qt,zoomOnDoubleClick:an,panOnScroll:yt,panOnScrollSpeed:kr,panOnScrollMode:rr,panOnDrag:_r,onPaneClick:zr,onPaneMouseEnter:Fn,onPaneMouseMove:Fr,onPaneMouseLeave:vt,onPaneScroll:pt,onPaneContextMenu:Je,onSelectionContextMenu:H,onSelectionStart:Y,onSelectionEnd:V,onEdgeContextMenu:dt,onEdgeDoubleClick:Pt,onEdgeMouseEnter:zt,onEdgeMouseMove:Lr,onEdgeMouseLeave:Xr,onReconnect:rn??xn,onReconnectStart:en??bn,onReconnectEnd:dr??$t,reconnectRadius:Yr??ra,defaultMarkerColor:Mt,noDragClassName:Ee,noWheelClassName:Ce,noPanClassName:Ne,elevateEdgesOnSelect:Vt,rfId:Fs,disableKeyboardA11y:Jt,nodeOrigin:He,nodeExtent:Tt}),lt.createElement(_it,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:p,onConnectStart:g,onConnectEnd:v,onClickConnectStart:b,onClickConnectEnd:y,nodesDraggable:_e,nodesConnectable:he,nodesFocusable:je,edgesFocusable:Xe,edgesUpdatable:ye,elementsSelectable:Oe,elevateNodesOnSelect:jt,minZoom:qe,maxZoom:Ze,nodeExtent:Tt,onNodesChange:fe,onEdgesChange:Be,snapToGrid:Ie,snapGrid:ne,connectionMode:z,translateExtent:ot,connectOnClick:ut,defaultEdgeOptions:at,fitView:Te,fitViewOptions:Ye,onNodesDelete:M,onEdgesDelete:D,onNodeDragStart:w,onNodeDrag:_,onNodeDragStop:F,onSelectionDrag:P,onSelectionDragStart:U,onSelectionDragStop:X,noPanClassName:Ne,nodeOrigin:He,rfId:Fs,autoPanOnConnect:Ht,autoPanOnNodeDrag:Gt,onError:on,connectionRadius:Sr,isValidConnection:sn,nodeDragThreshold:bo}),lt.createElement(Eit,{onSelectionChange:I}),gt,lt.createElement(Xst,{proOptions:tt,position:$e}),lt.createElement(Tit,{rfId:Fs,disableKeyboardA11y:Jt})))});Sue.displayName="ReactFlow";function Nue(e){return t=>{const[r,n]=k.useState(t),a=k.useCallback(s=>n(i=>e(s,i)),[]);return[r,n,a]}}const Pot=Nue(fue),Rot=Nue(zit);function Lot(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},lt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Mot(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},lt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Uot(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},lt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Qot(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Hot(){return lt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},lt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ky=({children:e,className:t,...r})=>lt.createElement("button",{type:"button",className:El(["react-flow__controls-button",t]),...r},e);ky.displayName="ControlButton";const Vot=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),kue=({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:a,onZoomIn:s,onZoomOut:i,onFitView:o,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const h=eo(),[p,g]=k.useState(!1),{isInteractive:v,minZoomReached:b,maxZoomReached:y}=fs(Vot,rl),{zoomIn:C,zoomOut:N,fitView:T}=Tk();if(k.useEffect(()=>{g(!0)},[]),!p)return null;const S=()=>{C(),s==null||s()},B=()=>{N(),i==null||i()},w=()=>{T(a),o==null||o()},_=()=>{h.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),c==null||c(!v)};return lt.createElement(Lce,{className:El(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&lt.createElement(lt.Fragment,null,lt.createElement(ky,{onClick:S,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},lt.createElement(Lot,null)),lt.createElement(ky,{onClick:B,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},lt.createElement(Mot,null))),r&&lt.createElement(ky,{className:"react-flow__controls-fitview",onClick:w,title:"fit view","aria-label":"fit view"},lt.createElement(Uot,null)),n&&lt.createElement(ky,{className:"react-flow__controls-interactive",onClick:_,title:"toggle interactivity","aria-label":"toggle interactivity"},v?lt.createElement(Hot,null):lt.createElement(Qot,null)),d)};kue.displayName="Controls";var zot=k.memo(kue),jd;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(jd||(jd={}));function $ot({color:e,dimensions:t,lineWidth:r}){return lt.createElement("path",{stroke:e,strokeWidth:r,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Got({color:e,radius:t}){return lt.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Kot={[jd.Dots]:"#91919a",[jd.Lines]:"#eee",[jd.Cross]:"#e2e2e2"},qot={[jd.Dots]:1,[jd.Lines]:1,[jd.Cross]:6},Wot=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Bue({id:e,variant:t=jd.Dots,gap:r=20,size:n,lineWidth:a=1,offset:s=2,color:i,style:o,className:c}){const u=k.useRef(null),{transform:d,patternId:f}=fs(Wot,rl),h=i||Kot[t],p=n||qot[t],g=t===jd.Dots,v=t===jd.Cross,b=Array.isArray(r)?r:[r,r],y=[b[0]*d[2]||1,b[1]*d[2]||1],C=p*d[2],N=v?[C,C]:y,T=g?[C/s,C/s]:[N[0]/s,N[1]/s];return lt.createElement("svg",{className:El(["react-flow__background",c]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},lt.createElement("pattern",{id:f+e,x:d[0]%y[0],y:d[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`},g?lt.createElement(Got,{color:h,radius:C/s}):lt.createElement($ot,{dimensions:N,color:h,lineWidth:a})),lt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}Bue.displayName="Background";var Xot=k.memo(Bue);function Yot(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),a=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(a),t&&(n.href=t),a.href=e,a.href}const Jot=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function im(e){const t=[];for(let r=0,n=e.length;r<n;r++)t.push(e[r]);return t}let Bv=null;function Tue(e={}){return Bv||(e.includeStyleProperties?(Bv=e.includeStyleProperties,Bv):(Bv=im(window.getComputedStyle(document.documentElement)),Bv))}function hN(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function Zot(e){const t=hN(e,"border-left-width"),r=hN(e,"border-right-width");return e.clientWidth+t+r}function elt(e){const t=hN(e,"border-top-width"),r=hN(e,"border-bottom-width");return e.clientHeight+t+r}function jue(e,t={}){const r=t.width||Zot(e),n=t.height||elt(e);return{width:r,height:n}}function tlt(){let e,t;try{t=process}catch{}const r=t&&t.env?t.env.devicePixelRatio:null;return r&&(e=parseInt(r,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const bc=16384;function rlt(e){(e.width>bc||e.height>bc)&&(e.width>bc&&e.height>bc?e.width>e.height?(e.height*=bc/e.width,e.width=bc):(e.width*=bc/e.height,e.height=bc):e.width>bc?(e.height*=bc/e.width,e.width=bc):(e.width*=bc/e.height,e.height=bc))}function mN(e){return new Promise((t,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>t(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=e})}async function nlt(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function alt(e,t,r){const n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),s=document.createElementNS(n,"foreignObject");return a.setAttribute("width",`${t}`),a.setAttribute("height",`${r}`),a.setAttribute("viewBox",`0 0 ${t} ${r}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),a.appendChild(s),s.appendChild(e),nlt(a)}const Jl=(e,t)=>{if(e instanceof t)return!0;const r=Object.getPrototypeOf(e);return r===null?!1:r.constructor.name===t.name||Jl(r,t)};function slt(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function ilt(e,t){return Tue(t).map(r=>{const n=e.getPropertyValue(r),a=e.getPropertyPriority(r);return`${r}: ${n}${a?" !important":""};`}).join(" ")}function olt(e,t,r,n){const a=`.${e}:${t}`,s=r.cssText?slt(r):ilt(r,n);return document.createTextNode(`${a}{${s}}`)}function IW(e,t,r,n){const a=window.getComputedStyle(e,r),s=a.getPropertyValue("content");if(s===""||s==="none")return;const i=Jot();try{t.className=`${t.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(olt(i,r,a,n)),t.appendChild(o)}function llt(e,t,r){IW(e,t,":before",r),IW(e,t,":after",r)}const FW="application/font-woff",OW="image/jpeg",clt={woff:FW,woff2:FW,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:OW,jpeg:OW,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function ult(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function G8(e){const t=ult(e).toLowerCase();return clt[t]||""}function dlt(e){return e.split(/,/)[1]}function OO(e){return e.search(/^(data:)/)!==-1}function Alt(e,t){return`data:${t};base64,${e}`}async function Iue(e,t,r){const n=await fetch(e,t);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const a=await n.blob();return new Promise((s,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{s(r({res:n,result:o.result}))}catch(c){i(c)}},o.readAsDataURL(a)})}const _I={};function flt(e,t,r){let n=e.replace(/\?.*/,"");return r&&(n=e),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),t?`[${t}]${n}`:n}async function K8(e,t,r){const n=flt(e,t,r.includeQueryParams);if(_I[n]!=null)return _I[n];r.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let a;try{const s=await Iue(e,r.fetchRequestInit,({res:i,result:o})=>(t||(t=i.headers.get("Content-Type")||""),dlt(o)));a=Alt(s,t)}catch(s){a=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${e}`;s&&(i=typeof s=="string"?s:s.message),i&&console.warn(i)}return _I[n]=a,a}async function hlt(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):mN(t)}async function mlt(e,t){if(e.currentSrc){const s=document.createElement("canvas"),i=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,i==null||i.drawImage(e,0,0,s.width,s.height);const o=s.toDataURL();return mN(o)}const r=e.poster,n=G8(r),a=await K8(r,n,t);return mN(a)}async function plt(e,t){var r;try{if(!((r=e==null?void 0:e.contentDocument)===null||r===void 0)&&r.body)return await jk(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function glt(e,t){return Jl(e,HTMLCanvasElement)?hlt(e):Jl(e,HTMLVideoElement)?mlt(e,t):Jl(e,HTMLIFrameElement)?plt(e,t):e.cloneNode(Fue(e))}const vlt=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Fue=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function xlt(e,t,r){var n,a;if(Fue(t))return t;let s=[];return vlt(e)&&e.assignedNodes?s=im(e.assignedNodes()):Jl(e,HTMLIFrameElement)&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?s=im(e.contentDocument.body.childNodes):s=im(((a=e.shadowRoot)!==null&&a!==void 0?a:e).childNodes),s.length===0||Jl(e,HTMLVideoElement)||await s.reduce((i,o)=>i.then(()=>jk(o,r)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function blt(e,t,r){const n=t.style;if(!n)return;const a=window.getComputedStyle(e);a.cssText?(n.cssText=a.cssText,n.transformOrigin=a.transformOrigin):Tue(r).forEach(s=>{let i=a.getPropertyValue(s);s==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Jl(e,HTMLIFrameElement)&&s==="display"&&i==="inline"&&(i="block"),s==="d"&&t.getAttribute("d")&&(i=`path(${t.getAttribute("d")})`),n.setProperty(s,i,a.getPropertyPriority(s))})}function ylt(e,t){Jl(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Jl(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function wlt(e,t){if(Jl(e,HTMLSelectElement)){const r=t,n=Array.from(r.children).find(a=>e.value===a.getAttribute("value"));n&&n.setAttribute("selected","")}}function Elt(e,t,r){return Jl(t,Element)&&(blt(e,t,r),llt(e,t,r),ylt(e,t),wlt(e,t)),t}async function Clt(e,t){const r=e.querySelectorAll?e.querySelectorAll("use"):[];if(r.length===0)return e;const n={};for(let s=0;s<r.length;s++){const o=r[s].getAttribute("xlink:href");if(o){const c=e.querySelector(o),u=document.querySelector(o);!c&&u&&!n[o]&&(n[o]=await jk(u,t,!0))}}const a=Object.values(n);if(a.length){const s="http://www.w3.org/1999/xhtml",i=document.createElementNS(s,"svg");i.setAttribute("xmlns",s),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(s,"defs");i.appendChild(o);for(let c=0;c<a.length;c++)o.appendChild(a[c]);e.appendChild(i)}return e}async function jk(e,t,r){return!r&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(n=>glt(n,t)).then(n=>xlt(e,n,t)).then(n=>Elt(e,n,t)).then(n=>Clt(n,t))}const Oue=/url\((['"]?)([^'"]+?)\1\)/g,_lt=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Slt=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Nlt(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function klt(e){const t=[];return e.replace(Oue,(r,n,a)=>(t.push(a),r)),t.filter(r=>!OO(r))}async function Blt(e,t,r,n,a){try{const s=r?Yot(t,r):t,i=G8(t);let o;return a||(o=await K8(s,i,n)),e.replace(Nlt(t),`$1${o}$3`)}catch{}return e}function Tlt(e,{preferredFontFormat:t}){return t?e.replace(Slt,r=>{for(;;){const[n,,a]=_lt.exec(r)||[];if(!a)return"";if(a===t)return`src: ${n};`}}):e}function Due(e){return e.search(Oue)!==-1}async function Pue(e,t,r){if(!Due(e))return e;const n=Tlt(e,r);return klt(n).reduce((s,i)=>s.then(o=>Blt(o,i,t,r)),Promise.resolve(n))}async function Tv(e,t,r){var n;const a=(n=t.style)===null||n===void 0?void 0:n.getPropertyValue(e);if(a){const s=await Pue(a,null,r);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function jlt(e,t){await Tv("background",e,t)||await Tv("background-image",e,t),await Tv("mask",e,t)||await Tv("-webkit-mask",e,t)||await Tv("mask-image",e,t)||await Tv("-webkit-mask-image",e,t)}async function Ilt(e,t){const r=Jl(e,HTMLImageElement);if(!(r&&!OO(e.src))&&!(Jl(e,SVGImageElement)&&!OO(e.href.baseVal)))return;const n=r?e.src:e.href.baseVal,a=await K8(n,G8(n),t);await new Promise((s,i)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(u){i(u)}}:i;const o=e;o.decode&&(o.decode=s),o.loading==="lazy"&&(o.loading="eager"),r?(e.srcset="",e.src=a):e.href.baseVal=a})}async function Flt(e,t){const n=im(e.childNodes).map(a=>Rue(a,t));await Promise.all(n).then(()=>e)}async function Rue(e,t){Jl(e,Element)&&(await jlt(e,t),await Ilt(e,t),await Flt(e,t))}function Olt(e,t){const{style:r}=e;t.backgroundColor&&(r.backgroundColor=t.backgroundColor),t.width&&(r.width=`${t.width}px`),t.height&&(r.height=`${t.height}px`);const n=t.style;return n!=null&&Object.keys(n).forEach(a=>{r[a]=n[a]}),e}const DW={};async function PW(e){let t=DW[e];if(t!=null)return t;const n=await(await fetch(e)).text();return t={url:e,cssText:n},DW[e]=t,t}async function RW(e,t){let r=e.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,s=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,e.url).href),Iue(o,t.fetchRequestInit,({result:c})=>(r=r.replace(i,`url(${c})`),[i,c]))});return Promise.all(s).then(()=>r)}function LW(e){if(e==null)return[];const t=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=e.replace(r,"");const a=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=a.exec(n);if(c===null)break;t.push(c[0])}n=n.replace(a,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let c=s.exec(n);if(c===null){if(c=o.exec(n),c===null)break;s.lastIndex=o.lastIndex}else o.lastIndex=s.lastIndex;t.push(c[0])}return t}async function Dlt(e,t){const r=[],n=[];return e.forEach(a=>{if("cssRules"in a)try{im(a.cssRules||[]).forEach((s,i)=>{if(s.type===CSSRule.IMPORT_RULE){let o=i+1;const c=s.href,u=PW(c).then(d=>RW(d,t)).then(d=>LW(d).forEach(f=>{try{a.insertRule(f,f.startsWith("@import")?o+=1:a.cssRules.length)}catch(h){console.error("Error inserting rule from remote css",{rule:f,error:h})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(s){const i=e.find(o=>o.href==null)||document.styleSheets[0];a.href!=null&&n.push(PW(a.href).then(o=>RW(o,t)).then(o=>LW(o).forEach(c=>{i.insertRule(c,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",s)}}),Promise.all(n).then(()=>(e.forEach(a=>{if("cssRules"in a)try{im(a.cssRules||[]).forEach(s=>{r.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${a.href}`,s)}}),r))}function Plt(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Due(t.style.getPropertyValue("src")))}async function Rlt(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=im(e.ownerDocument.styleSheets),n=await Dlt(r,t);return Plt(n)}function Lue(e){return e.trim().replace(/["']/g,"")}function Llt(e){const t=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(s=>{t.add(Lue(s))}),Array.from(n.children).forEach(s=>{s instanceof HTMLElement&&r(s)})}return r(e),t}async function Mlt(e,t){const r=await Rlt(e,t),n=Llt(e);return(await Promise.all(r.filter(s=>n.has(Lue(s.style.fontFamily))).map(s=>{const i=s.parentStyleSheet?s.parentStyleSheet.href:null;return Pue(s.cssText,i,t)}))).join(`
`)}async function Ult(e,t){const r=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Mlt(e,t);if(r){const n=document.createElement("style"),a=document.createTextNode(r);n.appendChild(a),e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}}async function Qlt(e,t={}){const{width:r,height:n}=jue(e,t),a=await jk(e,t,!0);return await Ult(a,t),await Rue(a,t),Olt(a,t),await alt(a,r,n)}async function Hlt(e,t={}){const{width:r,height:n}=jue(e,t),a=await Qlt(e,t),s=await mN(a),i=document.createElement("canvas"),o=i.getContext("2d"),c=t.pixelRatio||tlt(),u=t.canvasWidth||r,d=t.canvasHeight||n;return i.width=u*c,i.height=d*c,t.skipAutoScale||rlt(i),i.style.width=`${u}`,i.style.height=`${d}`,t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(s,0,0,i.width,i.height),i}async function Ik(e,t={}){return(await Hlt(e,t)).toDataURL()}const Mue="recursos_crucigramas",Fk="recursos_lineas_de_tiempo",Ok="recursos_mapas_mentales",Uue="recursos_sopas_de_letras",Dk=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,createdAt:((s=(a=t.createdAt)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.createdAt}},Vlt=e=>{const t=tr(It(bt,Mue),Rr("fechaCreacion","desc"));return gr(t,r=>{const n=r.docs.map(a=>Dk(a));e(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),e([])})},zlt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,fechaCreacion:mr.fromDate(new Date)};return(await Un(It(bt,Mue),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},$lt=e=>{const t=tr(It(bt,Fk),Rr("createdAt","desc"));return gr(t,r=>{const n=r.docs.map(a=>Dk(a));e(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),e([])})},Glt=async(e,t)=>{try{const{id:r,...n}=e,a=pr(bt,Fk,r);await Ji(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:mr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},Klt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:mr.fromDate(new Date)};return(await Un(It(bt,Fk),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},qlt=async e=>{try{const t=pr(bt,Fk,e);await ts(t)}catch(t){throw console.error("Error al eliminar la línea de tiempo:",t),new Error("No se pudo eliminar la línea de tiempo.")}},Wlt=e=>{const t=tr(It(bt,Ok),Rr("createdAt","desc"));return gr(t,r=>{const n=r.docs.map(a=>Dk(a));e(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),e([])})},Xlt=async(e,t)=>{try{const{id:r,...n}=e,a=pr(bt,Ok,r);await Ji(a,{...n,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:mr.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},Ylt=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:mr.fromDate(new Date)};return(await Un(It(bt,Ok),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},Jlt=async e=>{try{const t=pr(bt,Ok,e);await ts(t)}catch(t){throw console.error("Error al eliminar el mapa mental:",t),new Error("No se pudo eliminar el mapa mental.")}},Zlt=e=>{const t=tr(It(bt,Uue),Rr("createdAt","desc"));return gr(t,r=>{const n=r.docs.map(a=>Dk(a));e(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),e([])})},ect=async(e,t)=>{try{const r={...e,creadorId:t.id,creadorNombre:t.nombreCompleto,createdAt:mr.fromDate(new Date)};return(await Un(It(bt,Uue),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},tct=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),rct=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),nct=()=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),act=({data:e})=>{const t={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=t[e.type||"default"]||t.default;return l.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[l.jsx(c1,{type:"target",position:Er.Left,className:"w-2 h-2 !bg-slate-400"}),l.jsx("span",{className:"text-xl",children:e.icon||"🧠"}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:e.label}),e.type&&l.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:e.type})]}),l.jsx(c1,{type:"source",position:Er.Right,className:"w-2 h-2 !bg-slate-400"})]})},DO=(e,t)=>!e.children||e.children.length===0?t:e.children.reduce((r,n)=>r+DO(n,t),0),PO=(e,t="tree")=>{const r=[],n=[];if(t==="tree"){const i=(o,c,u)=>{r.push({id:o.id,position:{x:c*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=DO(o,100);let f=u-d/2+100/2;(o.children||[]).forEach(h=>{const p=DO(h,100),g=f+p/2-100/2;n.push({id:`e-${o.id}-${h.id}`,source:o.id,target:h.id,type:"smoothstep",animated:!0}),i(h,c+1,g),f+=p})};i(e,0,0)}else{r.push({id:e.id,position:{x:0,y:0},data:{label:e.label,icon:e.icon,type:e.type},type:"custom"});const i=300,o=500;(e.children||[]).forEach((c,u)=>{const d=u/e.children.length*2*Math.PI;r.push({id:c.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:c.label,icon:c.icon,type:c.type},type:"custom"}),n.push({id:`e-${e.id}-${c.id}`,source:e.id,target:c.id,type:"smoothstep"}),(c.children||[]).forEach((f,h)=>{const p=d+(h-(c.children.length-1)/2)*.25;r.push({id:f.id,position:{x:o*Math.cos(p),y:o*Math.sin(p)},data:{label:f.label,icon:f.icon,type:f.type},type:"custom"}),n.push({id:`e-${c.id}-${f.id}`,source:c.id,target:f.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},Que=({node:e,onUpdate:t,onAddChild:r,onDelete:n,level:a=0})=>{const s=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return l.jsxs("div",{className:`pl-4 ${a>0?"border-l "+i[a-1%i.length]:""}`,children:[l.jsx("div",{className:`p-2 rounded-lg my-1 ${s[a%s.length]}`,children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:e.label,onChange:o=>t(e.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),l.jsx("button",{onClick:()=>r(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),a>0&&l.jsx("button",{onClick:()=>n(e.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(e.children||[]).map(o=>l.jsx(Que,{node:o,onUpdate:t,onAddChild:r,onDelete:n,level:a+1},o.id))]})},sct={custom:act},ict=({mapData:e,onBack:t,onSave:r})=>{const[n,a]=k.useState(e.treeData),[s,i]=k.useState("tree"),[o,c]=k.useState(!1),[u,d,f]=Pot([]),[h,p,g]=Rot([]),{fitView:v}=Tk();k.useEffect(()=>{const{nodes:S,edges:B}=PO(n,s);d(S),p(B),setTimeout(()=>v({duration:300}),50)},[n,s,d,p,v]);const b=(S,B)=>{const w=JSON.parse(JSON.stringify(n)),_=F=>F.id===S?(F.label=B,!0):(F.children||[]).some(_);_(w),a(w)},y=S=>{const B=JSON.parse(JSON.stringify(n)),w=_=>_.id===S?(_.children||(_.children=[]),_.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(_.children||[]).some(w);w(B),a(B)},C=S=>{const B=JSON.parse(JSON.stringify(n)),w=_=>{const F=(_.children||[]).findIndex(M=>M.id===S);return F!==-1?(_.children.splice(F,1),!0):(_.children||[]).some(w)};w(B),a(B)},N=()=>{c(!0);const{nodes:S,edges:B}=PO(n,s);r({...e,treeData:n,nodes:S,edges:B}),setTimeout(()=>c(!1),1e3)},T=async S=>{const B=document.querySelector(".react-flow");B&&Ik(B,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(w=>{{const _=document.createElement("a");_.download=`${e.tema}.png`,_.href=w,_.click()}}).catch(w=>console.error("oops, something went wrong!",w))};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:e.tema}),l.jsx("button",{onClick:t,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:l.jsxs(Sue,{nodes:u,edges:h,onNodesChange:f,onEdgesChange:g,fitView:!0,nodeTypes:sct,children:[l.jsx(zot,{}),l.jsx(Xot,{})]})}),l.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),l.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[l.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(rct,{})," Vista en árbol"]}),l.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${s==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[l.jsx(nct,{})," Vista central"]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:l.jsx(Que,{node:n,onUpdate:b,onAddChild:y,onDelete:C})}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>T(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),l.jsx("button",{onClick:N,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},oct=({onBack:e,currentUser:t})=>{const[r,n]=k.useState("list"),[a,s]=k.useState([]),[i,o]=k.useState(null),[c,u]=k.useState(!1),[d,f]=k.useState(!0),[h,p]=k.useState(""),[g,v]=k.useState(""),[b,y]=k.useState("");k.useEffect(()=>{f(!0);const w=Wlt(_=>{s(_),f(!1)});return()=>w()},[]);const C=async w=>{if(w.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const _="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=`
            Basado en el tema central "${h}", y considerando el contenido adicional "${b}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${h}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const X=(await(await new ds(_).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(F)).response).text().replace(/^```json\s*|```\s*$/g,""),H=JSON.parse(X),Y=q=>({id:crypto.randomUUID(),label:q.label||"Sin etiqueta",icon:q.icon||"🧠",type:q.type||"default",children:(q.children||[]).map(Y)}),V=Y(H),{nodes:z,edges:G}=PO(V),re={tema:h,nivel:g,treeData:V,nodes:z,edges:G},R=await Ylt(re,t);o({...re,id:R,createdAt:new Date().toISOString()}),n("editor")}catch(M){console.error("AI Generation Error:",M),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},N=async w=>{try{await Xlt(w,t)}catch(_){console.error("Error saving mind map:",_),alert("No se pudo guardar el mapa mental.")}},T=w=>{o(w),n("editor")},S=async w=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await Jlt(w)}catch(_){console.error("Error deleting mind map:",_),alert("No se pudo eliminar el mapa mental.")}},B=()=>{switch(r){case"editor":return i?l.jsx($8,{children:l.jsx(ict,{mapData:i,onBack:()=>n("list"),onSave:N})}):null;case"config":return l.jsxs("div",{className:"max-w-2xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),l.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),l.jsxs("form",{onSubmit:C,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:w=>p(w.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),l.jsx("textarea",{id:"contenido",value:b,onChange:w=>y(w.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsx("div",{className:"flex justify-end pt-4",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:c?l.jsx(tct,{}):"Generar Mapa con IA"})})]})]});case"list":default:return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),l.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.length>0?a.map(w=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[l.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:w.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(w.createdAt).toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-4 flex gap-2",children:[l.jsx("button",{onClick:()=>T(w),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),l.jsx("button",{onClick:()=>S(w.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},w.id)):l.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?l.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[l.jsx("span",{className:"text-4xl",children:"🧠"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),B()]})},lct=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),cct=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),uct=({onBack:e,currentUser:t})=>{const[r,n]=k.useState([]),[a,s]=k.useState("Media"),[i,o]=k.useState(10),[c,u]=k.useState(!1),[d,f]=k.useState(Array(10).fill("")),[h,p]=k.useState(""),[g,v]=k.useState(null),[b,y]=k.useState({ai:!1,puzzle:!1,data:!0}),C=k.useRef(null);k.useEffect(()=>{y(D=>({...D,data:!0}));const M=Zlt(D=>{n(D),y(I=>({...I,data:!1}))});return()=>M()},[]),k.useEffect(()=>{f(M=>{const D=Array(i).fill("");for(let I=0;I<Math.min(M.length,i);I++)D[I]=M[I];return D})},[i]);const N=(M,D)=>{const I=[...d];I[M]=D,f(I)},T=async()=>{if(h.trim()){y(M=>({...M,ai:!0}));try{const M="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",I=new ds(M).getGenerativeModel({model:"gemini-1.5-flash-latest"}),U=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,Y=(await(await I.generateContent(U)).response).text().replace(/^```json\s*|```\s*$/g,""),V=JSON.parse(Y);if(!V.palabras||!Array.isArray(V.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const G=[...V.palabras.map(re=>re.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;G.length<i;)G.push("");f(G)}catch(M){console.error("Error generating words with AI:",M),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{y(M=>({...M,ai:!1}))}}},S=(M,D,I,U,P,X)=>{for(let H=0;H<M.length;H++){const Y=I+H*P.y,V=U+H*P.x;if(Y<0||Y>=X||V<0||V>=X||D[Y][V]&&D[Y][V]!==M[H])return!1}return!0},B=(M,D,I,U,P)=>{for(let X=0;X<M.length;X++)D[I+X*P.y][U+X*P.x]=M[X]},w=async()=>{y(Y=>({...Y,puzzle:!0})),v(null),await new Promise(Y=>setTimeout(Y,100));const M=d.map(Y=>Y.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(M.length===0){alert("Por favor, ingrese al menos una palabra válida."),y(Y=>({...Y,puzzle:!1}));return}const D=Math.max(...M.map(Y=>Y.length));let I=Math.max(D,M.length)+2;a==="Media"&&(I+=3),a==="Difícil"&&(I+=5),I=Math.min(Math.max(I,10),25);const U=Array(I).fill(null).map(()=>Array(I).fill(null)),P=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];a!=="Fácil"&&P.push({x:1,y:-1}),a==="Difícil"&&P.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const Y of M.sort((V,z)=>z.length-V.length)){let V=!1;for(let z=0;z<100;z++){const G=P[Math.floor(Math.random()*P.length)],re=Math.floor(Math.random()*I),R=Math.floor(Math.random()*I);if(S(Y,U,re,R,G,I)){B(Y,U,re,R,G),V=!0;break}}V||console.warn(`No se pudo colocar la palabra: ${Y}`)}const X=U.map(Y=>Y.map(V=>V||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),H={tema:h||"Personalizado",grid:X.map(Y=>Y.join("")),words:M.sort()};try{const Y=await ect(H,t);v({...H,id:Y,createdAt:new Date().toISOString()})}catch(Y){console.error("Error saving puzzle:",Y),alert("No se pudo guardar la sopa de letras.")}finally{y(Y=>({...Y,puzzle:!1}))}},_=()=>{C.current&&Ik(C.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(M=>{const D=document.createElement("a");D.download="sopa-de-letras.png",D.href=M,D.click()}).catch(M=>{console.error("oops, something went wrong!",M),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},F=()=>{var I;if(!g)return null;const M=((I=g.grid[0])==null?void 0:I.length)||1,D=g.grid.join("").split("");return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:C,className:"p-6 bg-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[l.jsx("div",{className:"md:col-span-2",children:l.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${M}, minmax(0, 1fr))`},children:D.map((U,P)=>l.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:U},P))})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),l.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:g.words.map(U=>l.jsx("li",{children:U},U))})]})]})}),l.jsxs("div",{className:"flex justify-end gap-4",children:[l.jsx("button",{onClick:()=>v(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),l.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return b.data?l.jsx("div",{className:"text-center py-10",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🅰️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!g&&l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),l.jsxs("select",{value:a,onChange:M=>s(M.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{children:"Fácil"}),l.jsx("option",{children:"Media"}),l.jsx("option",{children:"Difícil"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(M=>l.jsx("button",{onClick:()=>{o(M),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!c&&i===M?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:M},M)),l.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${c?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),c&&l.jsx("input",{type:"number",value:i,onChange:M=>o(parseInt(M.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:M=>p(M.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:T,disabled:b.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:b.ai?l.jsx(lct,{}):l.jsxs(l.Fragment,{children:[l.jsx(cct,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((M,D)=>l.jsx("input",{type:"text",value:M,onChange:I=>N(D,I.target.value),placeholder:`Palabra ${D+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},D))})]}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:w,disabled:b.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:b.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),g&&F()]})},dct=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Act=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),fct=({timeline:e,onSave:t,onBack:r})=>{const[n,a]=k.useState(e),[s,i]=k.useState(null),o=k.useRef(null),c=(p,g,v)=>{a(b=>({...b,events:b.events.map(y=>y.id===p?{...y,[g]:v}:y)}))},u=()=>{const p={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},g=[...n.events,p].sort((v,b)=>parseInt(v.date)-parseInt(b.date));a(v=>({...v,events:g}))},d=p=>{a(g=>({...g,events:g.events.filter(v=>v.id!==p)}))},f=async p=>{if(!p.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(p.id);const g="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",v=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${p.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const S=(await(await new ds(g).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(v)).response).text().replace(/^```json\s*|```\s*$/g,""),B=JSON.parse(S);a(w=>({...w,events:w.events.map(_=>_.id===p.id?{..._,date:B.date,description:B.description,icon:B.icon}:_).sort((_,F)=>parseInt(_.date)-parseInt(F.date))}))}catch(b){console.error("Error al generar descripción del hito:",b),alert("No se pudo autocompletar el hito.")}finally{i(null)}},h=()=>{o.current&&Ik(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(p=>{const g=document.createElement("a");g.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,g.href=p,g.click()}).catch(p=>{console.error("Error al generar la imagen:",p),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),l.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:l.jsxs("div",{ref:o,className:"relative p-10",children:[l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),l.jsx("div",{className:"relative",children:n.events.sort((p,g)=>parseInt(p.date)-parseInt(g.date)).map((p,g)=>{const v=g%2===0;return l.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[l.jsx("div",{className:"w-1/2",children:v&&l.jsx("div",{className:"text-right pr-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})}),l.jsx("div",{className:"z-10 flex-shrink-0",children:l.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),l.jsx("div",{className:"w-1/2",children:!v&&l.jsx("div",{className:"text-left pl-8",children:l.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[l.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:p.icon}),l.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:p.date}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:p.description})]})})})]},p.id)})})]})}),l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(p=>l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[l.jsx("input",{type:"text",value:p.date,onChange:g=>c(p.id,"date",g.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx("textarea",{value:p.description,onChange:g=>c(p.id,"description",g.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),l.jsx("button",{onClick:()=>f(p),disabled:s===p.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:s===p.id?l.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):l.jsx(Act,{})})]}),l.jsx("button",{onClick:()=>d(p.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},p.id))}),l.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[l.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:h,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),l.jsx("button",{onClick:()=>t(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},hct=({onBack:e,currentUser:t})=>{const[r,n]=k.useState("list"),[a,s]=k.useState([]),[i,o]=k.useState(null),[c,u]=k.useState(!1),[d,f]=k.useState(!0),[h,p]=k.useState(""),[g,v]=k.useState(""),[b,y]=k.useState("");k.useEffect(()=>{f(!0);const S=$lt(B=>{s(B),f(!1)});return()=>S()},[]);const C=async S=>{if(S.preventDefault(),!h.trim()){alert("El tema es obligatorio.");return}u(!0);const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",w=g&&b?`entre ${g} y ${b}`:g?`a partir de ${g}`:b?`hasta ${b}`:"",_=`
            Genera una línea de tiempo sobre el tema "${h}" ${w}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const P=(await(await new ds(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(_)).response).text().replace(/^```json\s*|```\s*$/g,""),X=JSON.parse(P);if(!X.events||!Array.isArray(X.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const H={tema:h,fechaInicio:g,fechaFin:b,events:X.events.map(V=>({id:crypto.randomUUID(),date:V.date||"Sin fecha",description:V.description||"Sin descripción",icon:V.icon||"🗓️"}))},Y=await Klt(H,t);o({...H,id:Y,createdAt:new Date().toISOString()}),n("editor")}catch(F){console.error("AI Generation Error:",F),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},N=async S=>{try{await Glt(S,t),n("list"),o(null)}catch(B){console.error("Error saving timeline:",B),alert("No se pudo guardar la línea de tiempo.")}},T=async S=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await qlt(S)}catch(B){console.error("Error deleting timeline:",B),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?l.jsx(fct,{timeline:i,onSave:N,onBack:()=>n("list")}):d?l.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"🕒"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),l.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),l.jsxs("form",{onSubmit:C,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"tema",value:h,onChange:S=>p(S.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),l.jsx("input",{type:"text",id:"fechaInicio",value:g,onChange:S=>v(S.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),l.jsx("input",{type:"text",id:"fechaFin",value:b,onChange:S=>y(S.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:c?l.jsx(dct,{}):"Generar con IA"})})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),a.length>0?a.map(S=>l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:S.tema}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(S.createdAt).toLocaleDateString("es-CL")]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{o(S),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),l.jsx("button",{onClick:()=>T(S.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},S.id)):l.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},mct=()=>l.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),MW=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),pct=({onBack:e,currentUser:t})=>{const[r,n]=k.useState([]),[a,s]=k.useState(10),[i,o]=k.useState(!1),[c,u]=k.useState(Array(10).fill("")),[d,f]=k.useState(Array(10).fill("")),[h,p]=k.useState(""),[g,v]=k.useState(null),[b,y]=k.useState(!1),[C,N]=k.useState({ai:!1,puzzle:!1,data:!0}),[T,S]=k.useState(null),B=k.useRef(null);k.useEffect(()=>{N(X=>({...X,data:!0}));const P=Vlt(X=>{const H=X.map(Y=>{const{grid_flat:V,grid_width:z,...G}=Y,re=[];if(V&&z>0)for(let R=0;R<V.length;R+=z)re.push(V.slice(R,R+z));return{...G,grid:re}});n(H),N(Y=>({...Y,data:!1}))});return()=>P()},[]),k.useEffect(()=>{const P=a;u(X=>Array.from({length:P},(H,Y)=>X[Y]||"")),f(X=>Array.from({length:P},(H,Y)=>X[Y]||""))},[a]);const w=(P,X)=>{const H=[...c];H[P]=X,u(H)},_=(P,X)=>{const H=[...d];H[P]=X,f(H)},F=async()=>{if(h.trim()){N(P=>({...P,ai:!0}));try{const P="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=new ds(P).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Y=`
                Genera una lista de ${a} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${h}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${a} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let re=(await(await H.generateContent(Y)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const R=re.indexOf("{"),q=re.lastIndexOf("}");R!==-1&&q!==-1&&(re=re.substring(R,q+1)),re=re.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),re.includes("__SPLIT__")&&(re=re.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(Ae,oe,ce,pe)=>{const Ie=ce.split("__SPLIT__").map(ne=>ne.trim().replace(/,$/,""));return oe+Ie.join(",")+pe})),re=re.replace(/,\s*]/g,"]");let J;try{J=JSON.parse(re)}catch{console.error("Respuesta IA no es JSON válido:",re),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),N(oe=>({...oe,ai:!1}));return}if(!J.items||!Array.isArray(J.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const te=J.items.map(Ae=>(Ae.word||"").toUpperCase().replace(/\s/g,"")),ie=J.items.map(Ae=>Ae.clue||"");u(Array.from({length:a},(Ae,oe)=>te[oe]||"")),f(Array.from({length:a},(Ae,oe)=>ie[oe]||""))}catch(P){console.error("Error generating words/clues with AI:",P),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{N(P=>({...P,ai:!1}))}}},M=async P=>{const X=c[P];if(!X||!X.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}S(P);try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",V=new ds(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}),z=`Para un crucigrama con el tema "${h||"general"}", genera una pista concisa y creativa para la palabra "${X}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,q=(await(await V.generateContent(z)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(q);J.clue&&_(P,J.clue)}catch(H){console.error("Error generating clue with AI:",H),alert("No se pudo generar la pista.")}finally{S(null)}},D=k.useCallback(()=>{try{const P=c.map((je,He)=>({word:je.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[He]})).filter(je=>je.word.length>0);if(P.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;P.sort((je,He)=>He.word.length-je.word.length);const X=P[0].word.length,H=Math.max(X,P.length)*2;let Y=Array.from({length:H},()=>Array(H).fill(null));const V=[],z=P.shift(),G=Math.floor(H/2),re=Math.floor((H-z.word.length)/2);for(let je=0;je<z.word.length;je++)Y[G][re+je]=z.word[je];V.push({word:z.word,clue:z.clue,direction:"across",row:G,col:re});for(const je of P){let He={score:-1,row:-1,col:-1,direction:"across"};for(const Xe of V)for(let ye=0;ye<Xe.word.length;ye++)for(let Oe=0;Oe<je.word.length;Oe++)if(Xe.word[ye]===je.word[Oe]){let Re=0,qe,Ze,ot;Xe.direction==="across"?(ot="down",qe=Xe.row-Oe,Ze=Xe.col+ye):(ot="across",qe=Xe.row+ye,Ze=Xe.col-Oe);let mt=!0;for(let Tt=0;Tt<je.word.length;Tt++){const Mt=qe+(ot==="down"?Tt:0),Dt=Ze+(ot==="across"?Tt:0);if(Mt<0||Mt>=H||Dt<0||Dt>=H){mt=!1;break}const Qt=Y[Mt][Dt],yt=Mt===Xe.row+(Xe.direction==="down"?ye:0)&&Dt===Xe.col+(Xe.direction==="across"?ye:0);if(Qt&&!yt){mt=!1;break}if(Qt&&yt&&Qt!==je.word[Oe]){mt=!1;break}if(!yt){if(ot==="across"&&(Mt>0&&Y[Mt-1][Dt]||Mt<H-1&&Y[Mt+1][Dt])){mt=!1;break}if(ot==="down"&&(Dt>0&&Y[Mt][Dt-1]||Dt<H-1&&Y[Mt][Dt+1])){mt=!1;break}}Qt&&Re++}mt&&Re>He.score&&(He={score:Re,row:qe,col:Ze,direction:ot})}if(He.score>-1){for(let Xe=0;Xe<je.word.length;Xe++){const ye=He.row+(He.direction==="down"?Xe:0),Oe=He.col+(He.direction==="across"?Xe:0);Y[ye][Oe]=je.word[Xe]}V.push({word:je.word,clue:je.clue,direction:He.direction,row:He.row,col:He.col})}}let R=H,q=-1,J=H,te=-1;V.forEach(je=>{R=Math.min(R,je.row),q=Math.max(q,je.row+(je.direction==="down"?je.word.length-1:0)),J=Math.min(J,je.col),te=Math.max(te,je.col+(je.direction==="across"?je.word.length-1:0))}),q===-1&&(R=V[0].row,q=V[0].row,J=V[0].col,te=V[0].col+V[0].word.length-1);const ie=1,Ae=Math.max(0,R-ie),oe=Math.min(H,q+1+ie),ce=Math.max(0,J-ie),pe=Math.min(H,te+1+ie),Ie=Y.slice(Ae,oe).map(je=>je.slice(ce,pe)),ne=V.map(je=>({...je,row:je.row-Ae,col:je.col-ce})).sort((je,He)=>je.row-He.row||je.col-He.col);let Se=1;const De=[],_e=new Map;ne.forEach(je=>{const He=`${je.row},${je.col}`;_e.has(He)||_e.set(He,Se++),De.push({...je,number:_e.get(He)})});const he=Ie.map(je=>je.map(He=>({char:He,number:null})));return De.forEach(je=>{const He=`${je.row},${je.col}`;he[je.row]&&he[je.row][je.col]!==void 0&&(he[je.row][je.col].number=_e.get(He))}),{grid:he,clues:{across:De.filter(je=>je.direction==="across").sort((je,He)=>je.number-He.number),down:De.filter(je=>je.direction==="down").sort((je,He)=>je.number-He.number)}}}catch(P){return console.error("Error generating crossword grid:",P),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[c,d]),I=async()=>{var X;N(H=>({...H,puzzle:!0})),v(null),await new Promise(H=>setTimeout(H,100));const P=D();if(P){const H={creadorId:t.id,creadorNombre:t.nombreCompleto,tema:h||"Personalizado",grid:P.grid,clues:P.clues},{grid:Y,...V}=H,z={...V,grid_flat:Y.flat().map(G=>G.char||""),grid_width:((X=Y[0])==null?void 0:X.length)||0};try{const G=await zlt(z,t);v({...H,id:G,fechaCreacion:new Date().toISOString()})}catch(G){console.error("Error saving puzzle:",G),alert("No se pudo guardar el crucigrama en la base de datos.")}}N(H=>({...H,puzzle:!1}))},U=()=>{B.current&&(y(!1),setTimeout(()=>{Ik(B.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(P=>{const X=document.createElement("a");X.download="crucigrama.png",X.href=P,X.click()}).catch(P=>console.error("Error generating image",P))},100))};return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"text-4xl",children:"✏️"}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),l.jsx("button",{onClick:e,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),g?l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{ref:B,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[l.jsx("div",{children:l.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${g.grid[0].length}, 2rem)`},children:g.grid.flat().map((P,X)=>l.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:P.char?"white":"black"},children:[P.number&&l.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:P.number}),b&&P.char&&l.jsx("span",{children:P.char})]},X))})}),l.jsxs("div",{className:"text-sm",children:[l.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.across.map(P=>l.jsxs("li",{children:[l.jsxs("strong",{children:[P.number,"."]})," ",P.clue]},`${P.word}-${P.clue}`))}),l.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),l.jsx("ul",{className:"space-y-1",children:g.clues.down.map(P=>l.jsxs("li",{children:[l.jsxs("strong",{children:[P.number,"."]})," ",P.clue]},`${P.word}-${P.clue}`))})]})]})}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("label",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"checkbox",checked:b,onChange:()=>y(!b),className:"h-5 w-5 rounded"}),l.jsx("span",{children:"Mostrar Solución"})]}),l.jsxs("div",{className:"flex gap-4",children:[l.jsx("button",{onClick:()=>v(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),l.jsx("button",{onClick:U,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):l.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(P=>l.jsx("button",{onClick:()=>{s(P),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&a===P?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:P},P)),l.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&l.jsx("input",{type:"number",value:a,onChange:P=>s(parseInt(P.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{id:"ai-theme",type:"text",value:h,onChange:P=>p(P.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:F,disabled:C.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:C.ai?l.jsx(mct,{}):l.jsxs(l.Fragment,{children:[l.jsx(MW,{}),l.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),l.jsx("div",{className:"space-y-3",children:Array.from({length:a}).map((P,X)=>l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsx("input",{type:"text",value:c[X],onChange:H=>w(X,H.target.value),placeholder:`Palabra ${X+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[l.jsx("textarea",{value:d[X],onChange:H=>_(X,H.target.value),placeholder:`Pista ${X+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),l.jsx("button",{onClick:()=>M(X),disabled:T===X,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:T===X?l.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):l.jsx(MW,{})})]})]},X))}),l.jsx("div",{className:"text-right pt-4",children:l.jsx("button",{onClick:I,disabled:C.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:C.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},gct=()=>{const[e,t]=k.useState(null),[r,n]=k.useState(!0);return k.useEffect(()=>{const a=SY(SF,async s=>{if(s&&s.email)try{const i=await HZ(s.email);t(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),t(null)}else t(null);n(!1)});return()=>a()},[]),{currentUser:e,loading:r}},vct=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],xct=({recurso:e,onClick:t})=>l.jsxs("button",{onClick:t,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[l.jsx("div",{className:"text-6xl mb-4",children:e.icon}),l.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:e.nombre}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:e.descripcion})]}),bct=()=>{const[e,t]=k.useState("menu"),{currentUser:r}=gct(),n=()=>e!=="menu"&&!r?l.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):e==="mapasMentales"?l.jsx(oct,{onBack:()=>t("menu"),currentUser:r}):e==="sopaDeLetras"?l.jsx(uct,{onBack:()=>t("menu"),currentUser:r}):e==="lineasDeTiempo"?l.jsx(hct,{onBack:()=>t("menu"),currentUser:r}):e==="crucigramas"?l.jsx(pct,{onBack:()=>t("menu"),currentUser:r}):l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:vct.map(a=>l.jsx(xct,{recurso:a,onClick:()=>t(a.id)},a.id))})]});return l.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},yct="evaluaciones_formativas",wct="calificaciones_formativas",Hue="trabajos_grupales_formativos",Vue=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fecha:((n=(r=t.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||t.fecha,fechaPresentacion:((s=(a=t.fechaPresentacion)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString().split("T")[0])||t.fechaPresentacion}},Ect=(e,t)=>{const r=tr(It(bt,yct),vn("curso","==",e));return gr(r,n=>{t(n.docs.map(a=>Vue(a)))},n=>{console.error("Error subscribing to student evaluations:",n),t([])})},Cct=e=>{const t=tr(It(bt,wct));return gr(t,r=>{const n={};r.forEach(a=>{n[a.id]=a.data()}),e(n)},r=>{console.error("Error subscribing to grades:",r),e({})})},_ct=(e,t)=>{const r=tr(It(bt,Hue),vn("curso","==",e));return gr(r,n=>{t(n.docs.map(a=>Vue(a)))},n=>{console.error("Error subscribing to group projects:",n),t([])})},Sct=async e=>{try{const{id:t,...r}=e,n=pr(bt,Hue,t);await Ji(n,r)}catch(t){throw console.error("Error updating group project:",t),new Error("Could not update group project.")}},Nct=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState({}),[s,i]=k.useState([]),[o,c]=k.useState(!0),[u,d]=k.useState(null),[f,h]=k.useState(!1),[p,g]=k.useState(null),v=k.useRef(null);k.useEffect(()=>{if(!e.curso){c(!1);return}c(!0);const T=Ect(e.curso,r),S=Cct(a),B=_ct(e.curso,w=>{i(w),c(!1)});return()=>{T(),S(),B()}},[e.curso]);const b=k.useMemo(()=>{if(!e.curso)return[];const S=t.filter(B=>B.curso===e.curso).reduce((B,w)=>((B[w.asignatura]=B[w.asignatura]||[]).push(w),B),{});return Object.entries(S).map(([B,w])=>{let _=0,F=0;const M=w.map(I=>{var X;const U=(X=n[I.id])==null?void 0:X[e.nombreCompleto];let P="No Trabajado";return U==="trabajado"?(_+=7,F++,P="Trabajado"):U==="no trabajado"&&(_+=2,F++,P="No Trabajado"),{id:I.id,nombreActividad:I.nombreActividad,fecha:I.fecha,estado:P}}).filter(I=>{var U;return(U=n[I.id])==null?void 0:U[e.nombreCompleto]}),D=F>0?(_/F).toFixed(1):"N/A";return{asignatura:B,promedio:D,actividades:M.sort((I,U)=>new Date(U.fecha).getTime()-new Date(I.fecha).getTime())}}).filter(B=>B.actividades.length>0).sort((B,w)=>B.asignatura.localeCompare(w.asignatura))},[t,n,e]);k.useEffect(()=>{if(b.reduce((F,M)=>F+M.actividades.length,0)===0){d(null);return}const S=b.reduce((F,M)=>{const D=parseFloat(M.promedio);return isNaN(D)?F:F+D},0),B=b.length>0?S/b.length:0,w=lC.find(F=>B>=F.promedioMin&&B<=F.promedioMax)||null,_=lC.filter(F=>B>=F.promedioMin);if(d({puntajeTotal:0,promedio:B,rangoActual:w,insigniasGanadas:_}),v.current!==null){const F=lC.find(M=>v.current>=M.promedioMin&&v.current<=M.promedioMax)||null;w&&(!F||w.nombre!==F.nombre)&&g(w)}v.current=B},[b]);const y=k.useMemo(()=>e.curso?s.filter(T=>T.curso===e.curso).map(T=>{const S=T.grupos.find(B=>B.integrantes.some(w=>w.nombre===e.nombreCompleto));return S?{...T,miGrupo:S}:null}).filter(T=>T!==null).sort((T,S)=>new Date(S.fechaPresentacion).getTime()-new Date(T.fechaPresentacion).getTime()):[],[s,e]),C=async(T,S)=>{const B=s.find(_=>_.id===T);if(!B)return;const w={...B,grupos:B.grupos.map(_=>_.integrantes.some(M=>M.nombre===e.nombreCompleto)?{..._,integrantes:_.integrantes.map(M=>M.nombre===e.nombreCompleto?{...M,rol:S||void 0}:M)}:_)};try{await Sct(w)}catch(_){console.error("Error updating role:",_),alert("No se pudo actualizar el rol.")}},N=T=>{const S=parseFloat(T);return isNaN(S)?"bg-slate-400":S<4?"bg-red-500":S<5.5?"bg-yellow-500":"bg-green-500"};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[p&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>g(null),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:T=>T.stopPropagation(),children:[l.jsx("div",{className:"text-8xl animate-bounce",children:p.emoji}),l.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),l.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:p.nombre}),l.jsx("p",{className:"text-slate-600 mt-4",children:p.mensaje}),l.jsx("button",{onClick:()=>g(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),f&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>h(!1),children:l.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:T=>T.stopPropagation(),children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),l.jsx("div",{className:"overflow-y-auto space-y-3",children:lC.map(T=>{const S=u==null?void 0:u.insigniasGanadas.some(B=>B.nombre===T.nombre);return l.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${S?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[l.jsx("div",{className:"text-5xl",children:T.emoji}),l.jsxs("div",{children:[l.jsx("h3",{className:`font-bold ${S?"text-amber-700":"text-slate-600"}`,children:T.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",T.promedioMin," y ",T.promedioMax]})]})]},T.nombre)})})]})}),l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),l.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&l.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),l.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),l.jsx("button",{onClick:()=>h(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),l.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),l.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),b.length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:b.map(T=>l.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800",children:T.asignatura}),l.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),l.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${N(T.promedio)}`,children:T.promedio})]}),l.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[l.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),T.actividades.map(S=>l.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-medium text-slate-700",children:S.nombreActividad}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(S.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),l.jsx("span",{className:`font-semibold ${S.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:S.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},S.id))]})]},T.asignatura))}):l.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"📊"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),y.length>0&&l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),l.jsx("div",{className:"space-y-4",children:y.map(T=>{const S=T.miGrupo.integrantes.filter(w=>w.nombre!==e.nombreCompleto&&w.rol).map(w=>w.rol),B=zZ.filter(w=>!S.includes(w));return l.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[l.jsx("h3",{className:"font-bold text-slate-800",children:T.nombreActividad}),l.jsxs("p",{className:"text-sm text-slate-500",children:[T.asignatura," - Presentación: ",new Date(T.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),l.jsxs("div",{className:"mt-3 pt-3 border-t",children:[l.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",T.miGrupo.numero]}),l.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:T.miGrupo.integrantes.map(w=>l.jsxs("li",{className:"grid grid-cols-2 items-center",children:[l.jsx("span",{className:w.nombre===e.nombreCompleto?"font-bold":"",children:w.nombre}),w.nombre===e.nombreCompleto?l.jsxs("select",{value:w.rol||"",onChange:_=>C(T.id,_.target.value),className:"text-sm p-1 border rounded w-full",children:[l.jsx("option",{value:"",children:"-- Seleccionar rol --"}),w.rol&&!B.includes(w.rol)&&l.jsx("option",{value:w.rol,children:w.rol}),B.map(_=>l.jsx("option",{value:_,children:_},_))]}):l.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:w.rol||"Sin rol"})]},w.nombre))})]})]},T.id)})})]})]})},kct="proyectos_interdisciplinarios",zue="entregas_interdisciplinarias",$ue=e=>{var r,n,a,s;const t=e.data();return{id:e.id,...t,fechaCreacion:((n=(r=t.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||t.fechaCreacion,fechaCompletado:((s=(a=t.fechaCompletado)==null?void 0:a.toDate)==null?void 0:s.call(a).toISOString())||t.fechaCompletado}},Bct=(e,t)=>{const r=tr(It(bt,kct),vn("cursos","array-contains",e));return gr(r,n=>{const a=n.docs.map(s=>$ue(s));t(a)},n=>{console.error("Error al suscribirse a los proyectos:",n),t([])})},Tct=(e,t)=>{const r=tr(It(bt,zue),vn("estudianteId","==",e));return gr(r,n=>{const a=n.docs.map(s=>$ue(s));t(a)},n=>{console.error("Error al suscribirse a las entregas:",n),t([])})},jct=async e=>{try{const{id:t,...r}=e,n=pr(bt,zue,t),a={...r,fechaCompletado:mr.fromDate(new Date(r.fechaCompletado||Date.now()))};await Ji(n,a,{merge:!0})}catch(t){throw console.error("Error al actualizar la entrega:",t),new Error("No se pudo guardar la entrega.")}},Ict=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState([]),[s,i]=k.useState(null),[o,c]=k.useState(!0);k.useEffect(()=>{if(!e.curso||!e.id){c(!1);return}c(!0);const f=Bct(e.curso,r),h=Tct(e.id,p=>{a(p),c(!1)});return()=>{f(),h()}},[e.curso,e.id]);const u=async f=>{try{await jct(f)}catch(h){console.error("Failed to update submission:",h),alert("Hubo un error al guardar tu entrega.")}},d=({plan:f,tarea:h})=>{const p=k.useMemo(()=>{const S=n.find(B=>B.planificacionId===f.id&&B.tareaId===h.id);return S||{id:`${f.id}_${h.id}_${e.id}`,planificacionId:f.id,tareaId:h.id,estudianteId:e.id,estudianteNombre:e.nombreCompleto,completada:!1}},[f.id,h.id,n]),[g,v]=k.useState(!1),[b,y]=k.useState({observaciones:p.observacionesEstudiante||"",enlace:p.enlaceUrl||""}),C=S=>{var w;const B=(w=S.target.files)==null?void 0:w[0];B&&(alert(`Simulación: Archivo "${B.name}" listo para subir.`),u({...p,archivoAdjunto:{nombre:B.name,url:`simulated/path/${B.name}`},fechaCompletado:new Date().toISOString()}))},N=()=>{u({...p,observacionesEstudiante:b.observaciones,enlaceUrl:b.enlace,fechaCompletado:new Date().toISOString()})},T=()=>{u({...p,completada:!p.completada,fechaCompletado:new Date().toISOString()})};return l.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("input",{type:"checkbox",checked:p.completada,onChange:T,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("p",{className:`font-semibold ${p.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",h.numero,": ",h.instrucciones]}),l.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",h.fechaEntrega]}),h.recursoUrl&&l.jsx("a",{href:h.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),l.jsx("button",{onClick:()=>v(!g),className:"text-sm font-semibold",children:g?"Ocultar":"Entregar"})]}),g&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[l.jsx("textarea",{value:b.observaciones,onChange:S=>y({...b,observaciones:S.target.value}),onBlur:N,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"url",value:b.enlace,onChange:S=>y({...b,enlace:S.target.value}),onBlur:N,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),l.jsx("input",{type:"file",onChange:C,className:"text-sm"}),p.archivoAdjunto&&l.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",p.archivoAdjunto.nombre]})]}),p.feedbackProfesor&&l.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[l.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),l.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:p.feedbackProfesor})]})]})};return o?l.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),t.length>0?t.map(f=>{const h=f.tareas||[],g=n.filter(b=>b.planificacionId===f.id).filter(b=>b.completada).length,v=h.length>0?g/h.length*100:0;return l.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[l.jsxs("button",{onClick:()=>i(s===f.id?null:f.id),className:"w-full text-left",children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:f.nombreProyecto}),l.jsxs("div",{className:"mt-2 space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[l.jsx("span",{children:"Progreso"}),l.jsxs("span",{children:[Math.round(v),"%"]})]}),l.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:l.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${v}%`}})})]})]}),s===f.id&&l.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:h.length>0?h.map(b=>l.jsx(d,{plan:f,tarea:b},b.id)):l.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},f.id)}):l.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[l.jsx("span",{className:"text-5xl",children:"🎉"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),l.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},Fct=({data:e})=>l.jsx("div",{className:"space-y-4",children:e.map((r,n)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),l.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),Oct=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState(!1),[s,i]=k.useState(null),[o,c]=k.useState(null),[u,d]=k.useState(Py),f=k.useCallback(async()=>{a(!0);try{const b=(await ADe(e.nombreCompleto)).sort((y,C)=>new Date(C.fecha).getTime()-new Date(y.fecha).getTime());r(b),i(null)}catch(v){console.error("Error al cargar acompañamientos desde Firestore",v),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{a(!1)}},[e.nombreCompleto]),h=k.useCallback(async()=>{try{const v=await fDe();v&&d(v)}catch(v){console.error("Error al cargar rúbrica personalizada",v)}},[]);k.useEffect(()=>{f(),h()},[f,h]);const p=k.useMemo(()=>{if(!o)return[];const v={};return u.forEach(b=>{v[b.domain]={total:0,count:0},b.criteria.forEach(y=>{const C=o.rubricaResultados[y.name];C&&(v[b.domain].total+=C,v[b.domain].count++)})}),Object.entries(v).map(([b,y])=>({label:b,value:y.count>0?y.total/y.count:0}))},[o,u]),g=v=>{const b=new xr;b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),b.setFont("helvetica","bold"),b.setFontSize(16),b.setTextColor(40),b.text("Informe de Acompañamiento Docente",b.internal.pageSize.getWidth()/2,25,{align:"center"}),b.setFontSize(12),b.setFont("helvetica","normal"),xl(b,{startY:35,body:[["Docente:",v.docente],["Fecha:",new Date(v.fecha).toLocaleDateString("es-CL")],["Asignatura:",v.asignatura],["Curso:",v.curso],["Bloques:",v.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let y=b.lastAutoTable.finalY+15;if(Object.keys(v.rubricaResultados).length>0){const T=[],S=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(B=>{T.push([{content:B.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),B.criteria.forEach(w=>{const _=v.rubricaResultados[w.name],F=_?S[_-1]:"No evaluado";T.push([w.name,F])})}),xl(b,{startY:y,head:[["Indicador","Nivel de Logro"]],body:T,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),y=b.lastAutoTable.finalY+15}const C=(T,S)=>{if(!S)return;y>250&&(b.addPage(),y=20,b.setFont("helvetica","bold"),b.setFontSize(10),b.setTextColor(100),b.text("LICEO INDUSTRIAL DE RECOLETA",b.internal.pageSize.getWidth()/2,15,{align:"center"}),y=25),b.setFont("helvetica","bold"),b.setFontSize(14),b.setTextColor(40),b.text(T,14,y),y+=8,b.setFont("helvetica","normal"),b.setFontSize(11),b.setTextColor(60);const B=b.splitTextToSize(S.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);b.text(B,14,y),y+=B.length*5+10};C("Observaciones Generales",v.observacionesGenerales),C("Retroalimentación Consolidada",v.retroalimentacionConsolidada);const N=b.getNumberOfPages();for(let T=1;T<=N;T++)b.setPage(T),b.setFontSize(8),b.setTextColor(128),b.text(`Página ${T} de ${N}`,b.internal.pageSize.getWidth()/2,b.internal.pageSize.getHeight()-10,{align:"center"});b.save(`Acompanamiento_${e.nombreCompleto.replace(/\s/g,"_")}_${new Date(v.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:()=>c(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),l.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),l.jsxs("button",{onClick:()=>g(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[l.jsx(VZ,{})," Exportar PDF"]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-2 space-y-6",children:l.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[l.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),l.jsx("h3",{children:"Observaciones Generales"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),l.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:l.jsx(Fct,{data:p})})]})]})]}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&l.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),!n&&t.length===0&&l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),l.jsx("div",{className:"space-y-4",children:!n&&t.length>0?t.map(v=>l.jsx("button",{onClick:()=>c(v),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[v.curso," - ",v.asignatura]}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(v.fecha).toLocaleDateString("es-CL"),v.bloques&&` | Bloques: ${v.bloques}`]}),Object.keys(v.rubricaResultados).length>0&&l.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(v.rubricaResultados).length," criterios"]})]}),l.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},v.id)):!n&&l.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsx("span",{className:"text-5xl",children:"👍"}),l.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},Dct=e=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const t=It(tn,"planificaciones"),r=tr(t,Rr("fechaCreacion","desc"));return gr(r,a=>{const s=[];a.forEach(i=>{const o=i.data();s.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",s.length),e(s)},a=>{throw console.error("❌ Error al cargar todas las planificaciones:",a),a})}catch(t){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",t),t}},Pct=(e,t)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",e),!e)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=It(tn,"planificaciones"),n=tr(r,vn("userId","==",e),Rr("fechaCreacion","desc"));return gr(n,s=>{const i=[];s.forEach(o=>{const c=o.data();i.push({id:o.id,...c})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),t(i)},s=>{throw console.error("❌ Error al cargar planificaciones del usuario:",s),s})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}};function Rct(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}const Lct=Rct("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Mct={value:function(){}};function Gue(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Z_(r)}function Z_(e){this._=e}function Uct(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",a=r.indexOf(".");if(a>=0&&(n=r.slice(a+1),r=r.slice(0,a)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Z_.prototype=Gue.prototype={constructor:Z_,on:function(e,t){var r=this._,n=Uct(e+"",r),a,s=-1,i=n.length;if(arguments.length<2){for(;++s<i;)if((a=(e=n[s]).type)&&(a=Qct(r[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(a=(e=n[s]).type)r[a]=UW(r[a],e.name,t);else if(t==null)for(a in r)r[a]=UW(r[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Z_(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var r=new Array(a),n=0,a,s;n<a;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,a=s.length;n<a;++n)s[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],a=0,s=n.length;a<s;++a)n[a].value.apply(t,r)}};function Qct(e,t){for(var r=0,n=e.length,a;r<n;++r)if((a=e[r]).name===t)return a.value}function UW(e,t,r){for(var n=0,a=e.length;n<a;++n)if(e[n].name===t){e[n]=Mct,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}const Hct=Object.freeze(Object.defineProperty({__proto__:null,dispatch:Gue},Symbol.toStringTag,{value:"Module"})),Vct=YAe(Hct);var SI,QW;function zct(){if(QW)return SI;QW=1;const e=Vct.dispatch,t=Math.PI/180,r={archimedean:v,rectangular:b},n=64,a=2048;SI=function(){var T=[256,256],S=s,B=i,w=c,_=o,F=o,M=u,D=d,I=v,U=[],P=1/0,X=e("word","end"),H=null,Y=Math.random,V={},z=C;V.canvas=function(R){return arguments.length?(z=N(R),V):z},V.start=function(){var R=G(z()),q=y((T[0]>>5)*T[1]),J=null,te=U.length,ie=-1,Ae=[],oe=U.map(function(pe,Ie){return pe.text=S.call(this,pe,Ie),pe.font=B.call(this,pe,Ie),pe.style=_.call(this,pe,Ie),pe.weight=F.call(this,pe,Ie),pe.rotate=M.call(this,pe,Ie),pe.size=~~w.call(this,pe,Ie),pe.padding=D.call(this,pe,Ie),pe}).sort(function(pe,Ie){return Ie.size-pe.size});return H&&clearInterval(H),H=setInterval(ce,0),ce(),V;function ce(){for(var pe=Date.now();Date.now()-pe<P&&++ie<te&&H;){var Ie=oe[ie];Ie.x=T[0]*(Y()+.5)>>1,Ie.y=T[1]*(Y()+.5)>>1,f(R,Ie,oe,ie),Ie.hasText&&re(q,Ie,J)&&(Ae.push(Ie),X.call("word",V,Ie),J?p(J,Ie):J=[{x:Ie.x+Ie.x0,y:Ie.y+Ie.y0},{x:Ie.x+Ie.x1,y:Ie.y+Ie.y1}],Ie.x-=T[0]>>1,Ie.y-=T[1]>>1)}ie>=te&&(V.stop(),X.call("end",V,Ae,J))}},V.stop=function(){H&&(clearInterval(H),H=null);for(const R of U)delete R.sprite;return V};function G(R){const q=R.getContext("2d",{willReadFrequently:!0});R.width=R.height=1;const J=Math.sqrt(q.getImageData(0,0,1,1).data.length>>2);return R.width=(n<<5)/J,R.height=a/J,q.fillStyle=q.strokeStyle="red",{context:q,ratio:J}}function re(R,q,J){T[0],T[1];for(var te=q.x,ie=q.y,Ae=Math.sqrt(T[0]*T[0]+T[1]*T[1]),oe=I(T),ce=Y()<.5?1:-1,pe=-ce,Ie,ne,Se;(Ie=oe(pe+=ce))&&(ne=~~Ie[0],Se=~~Ie[1],!(Math.min(Math.abs(ne),Math.abs(Se))>=Ae));)if(q.x=te+ne,q.y=ie+Se,!(q.x+q.x0<0||q.y+q.y0<0||q.x+q.x1>T[0]||q.y+q.y1>T[1])&&(!J||g(q,J))&&!h(q,R,T[0])){for(var De=q.sprite,_e=q.width>>5,he=T[0]>>5,je=q.x-(_e<<4),He=je&127,Xe=32-He,ye=q.y1-q.y0,Oe=(q.y+q.y0)*he+(je>>5),Re,qe=0;qe<ye;qe++){Re=0;for(var Ze=0;Ze<=_e;Ze++)R[Oe+Ze]|=Re<<Xe|(Ze<_e?(Re=De[qe*_e+Ze])>>>He:0);Oe+=he}return!0}return!1}return V.timeInterval=function(R){return arguments.length?(P=R??1/0,V):P},V.words=function(R){return arguments.length?(U=R,V):U},V.size=function(R){return arguments.length?(T=[+R[0],+R[1]],V):T},V.font=function(R){return arguments.length?(B=N(R),V):B},V.fontStyle=function(R){return arguments.length?(_=N(R),V):_},V.fontWeight=function(R){return arguments.length?(F=N(R),V):F},V.rotate=function(R){return arguments.length?(M=N(R),V):M},V.text=function(R){return arguments.length?(S=N(R),V):S},V.spiral=function(R){return arguments.length?(I=r[R]||R,V):I},V.fontSize=function(R){return arguments.length?(w=N(R),V):w},V.padding=function(R){return arguments.length?(D=N(R),V):D},V.random=function(R){return arguments.length?(Y=R,V):Y},V.on=function(){var R=X.on.apply(X,arguments);return R===X?V:R},V};function s(T){return T.text}function i(){return"serif"}function o(){return"normal"}function c(T){return Math.sqrt(T.value)}function u(){return(~~(random()*6)-3)*30}function d(){return 1}function f(T,S,B,w){if(!S.sprite){var _=T.context,F=T.ratio;_.clearRect(0,0,(n<<5)/F,a/F);var M=0,D=0,I=0,U=B.length;for(--w;++w<U;){S=B[w],_.save(),_.font=S.style+" "+S.weight+" "+~~((S.size+1)/F)+"px "+S.font;const Ie=_.measureText(S.text),ne=-Math.floor(Ie.width/2);let Se=(Ie.width+1)*F,De=S.size<<1;if(S.rotate){var P=Math.sin(S.rotate*t),X=Math.cos(S.rotate*t),H=Se*X,Y=Se*P,V=De*X,z=De*P;Se=Math.max(Math.abs(H+z),Math.abs(H-z))+31>>5<<5,De=~~Math.max(Math.abs(Y+V),Math.abs(Y-V))}else Se=Se+31>>5<<5;if(De>I&&(I=De),M+Se>=n<<5&&(M=0,D+=I,I=0),D+De>=a)break;_.translate((M+(Se>>1))/F,(D+(De>>1))/F),S.rotate&&_.rotate(S.rotate*t),_.fillText(S.text,ne,0),S.padding&&(_.lineWidth=2*S.padding,_.strokeText(S.text,ne,0)),_.restore(),S.width=Se,S.height=De,S.xoff=M,S.yoff=D,S.x1=Se>>1,S.y1=De>>1,S.x0=-S.x1,S.y0=-S.y1,S.hasText=!0,M+=Se}for(var G=_.getImageData(0,0,(n<<5)/F,a/F).data,re=[];--w>=0;)if(S=B[w],!!S.hasText){for(var R=S.width,q=R>>5,J=S.y1-S.y0,te=0;te<J*q;te++)re[te]=0;if(M=S.xoff,M==null)return;D=S.yoff;for(var ie=0,Ae=-1,oe=0;oe<J;oe++){for(var te=0;te<R;te++){var ce=q*oe+(te>>5),pe=G[(D+oe)*(n<<5)+(M+te)<<2]?1<<31-te%32:0;re[ce]|=pe,ie|=pe}ie?Ae=oe:(S.y0++,J--,oe--,D++)}S.y1=S.y0+Ae,S.sprite=re.slice(0,(S.y1-S.y0)*q)}}}function h(T,S,B){B>>=5;for(var w=T.sprite,_=T.width>>5,F=T.x-(_<<4),M=F&127,D=32-M,I=T.y1-T.y0,U=(T.y+T.y0)*B+(F>>5),P,X=0;X<I;X++){P=0;for(var H=0;H<=_;H++)if((P<<D|(H<_?(P=w[X*_+H])>>>M:0))&S[U+H])return!0;U+=B}return!1}function p(T,S){var B=T[0],w=T[1];S.x+S.x0<B.x&&(B.x=S.x+S.x0),S.y+S.y0<B.y&&(B.y=S.y+S.y0),S.x+S.x1>w.x&&(w.x=S.x+S.x1),S.y+S.y1>w.y&&(w.y=S.y+S.y1)}function g(T,S){return T.x+T.x1>S[0].x&&T.x+T.x0<S[1].x&&T.y+T.y1>S[0].y&&T.y+T.y0<S[1].y}function v(T){var S=T[0]/T[1];return function(B){return[S*(B*=.1)*Math.cos(B),B*Math.sin(B)]}}function b(T){var S=4,B=S*T[0]/T[1],w=0,_=0;return function(F){var M=F<0?-1:1;switch(Math.sqrt(1+4*M*F)-M&3){case 0:w+=B;break;case 1:_+=S;break;case 2:w-=B;break;default:_-=S;break}return[w,_]}}function y(T){for(var S=[],B=-1;++B<T;)S[B]=0;return S}function C(){return document.createElement("canvas")}function N(T){return typeof T=="function"?T:function(){return T}}return SI}var $ct=zct();const Gct=wl($ct),Kct=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),qct=()=>l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Wct=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Xct=e=>{const[t,r]=k.useState([]),[n,a]=k.useState(!0),[s,i]=k.useState(null),o=k.useMemo(()=>(e==null?void 0:e.profile)==="SUBDIRECCION",[e]);return k.useEffect(()=>{if(!(e!=null&&e.email)&&!(e!=null&&e.id)){i("Usuario no autenticado"),a(!1);return}try{let c;const u=d=>{r(d),a(!1),i(null)};if(o)c=Dct(u);else{const d=e.email||e.id||"";c=Pct(u,d)}return c}catch(c){i(c instanceof Error?c.message:"Error al conectar con la base de datos"),a(!1)}},[e,o]),{planificaciones:t,loading:n,error:s,canViewAllPlans:o}},Yct=({plan:e,onClose:t})=>l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:t,children:l.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:r=>r.stopPropagation(),children:[l.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:e.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[e.asignatura," | ",e.nivel," | Autor: ",e.autor||"N/A"]})]}),l.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:l.jsx(qct,{})})]}),l.jsxs("main",{className:"p-6 flex-1 overflow-y-auto space-y-6",children:[l.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-800 rounded-lg",children:[l.jsxs("p",{children:[l.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",e.objetivosAprendizaje]}),l.jsxs("p",{className:"mt-2",children:[l.jsx("strong",{children:"Indicadores de Evaluación:"})," ",e.indicadoresEvaluacion]}),l.jsx("div",{className:"mt-3",children:l.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof e.progreso=="number"?`${e.progreso}%`:"No registrado"]})})]}),l.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",e.detallesLeccion.length,")"]}),l.jsx("div",{className:"space-y-3 max-h-[30vh] overflow-y-auto pr-2",children:e.detallesLeccion.map((r,n)=>l.jsxs("div",{className:"p-3 border dark:border-slate-700 rounded-md bg-white dark:bg-slate-800",children:[l.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",n+1,": ",r.actividades]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("span",{children:[l.jsx("strong",{children:"Objetivo:"})," ",r.objetivosAprendizaje]}),l.jsxs("span",{children:[l.jsx("strong",{children:"Contenidos:"})," ",r.contenidosConceptuales]})]})]},n))}),e.reflexionUnidad&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2 mt-6",children:"Reflexión Docente"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 bg-slate-100 dark:bg-slate-800 rounded-lg mt-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Habilidades Desarrolladas (Priorizadas)"}),e.reflexionUnidad.ordenHabilidades&&e.reflexionUnidad.ordenHabilidades.length>0?l.jsx("ul",{className:"space-y-2",children:e.reflexionUnidad.ordenHabilidades.map((r,n)=>l.jsxs("li",{className:"p-2 bg-white dark:bg-slate-700 rounded-md flex items-center gap-2 shadow-sm",children:[l.jsxs("span",{className:"font-bold text-amber-500",children:[n+1,"."]})," ",r]},r))}):l.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No priorizadas."})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Fortalezas"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.fortalezas||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Mejoras"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.mejoras||"N/A"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-1",children:"Desafíos"}),l.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 p-2 bg-white dark:bg-slate-700 rounded-md",children:e.reflexionUnidad.debilidades||"N/A"})]})]})]})]})]})]})}),HW=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],Jct=["1º Medio","2º Medio","3º Medio","4º Medio"],Zct=({words:e})=>{const t=k.useRef(null);return k.useEffect(()=>{if(!e.length||!t.current)return;const r=Su(t.current);r.selectAll("*").remove();const n=Gct().size([500,350]).words(e.map(s=>({...s}))).padding(5).rotate(()=>(~~(Math.random()*6)-3)*15).font("Impact").fontSize(s=>Math.sqrt(s.value)*12).on("end",a);n.start();function a(s){r.attr("width",n.size()[0]).attr("height",n.size()[1]).append("g").attr("transform",`translate(${n.size()[0]/2},${n.size()[1]/2})`).selectAll("text").data(s).enter().append("text").style("font-size",i=>`${i.size}px`).style("font-family","Impact").style("fill",(i,o)=>rk(Lct)(o.toString())).attr("text-anchor","middle").attr("transform",i=>`translate(${[i.x,i.y]})rotate(${i.rotate})`).text(i=>i.text)}},[e]),l.jsx("svg",{ref:t})},eut=({planificaciones:e})=>{const[t,r]=k.useState("todos"),[n,a]=k.useState("todos"),s=k.useMemo(()=>["todos",...Array.from(new Set(e.map(d=>d.asignatura)))],[e]),i=k.useMemo(()=>e.filter(d=>(t==="todos"||d.nivel===t)&&(n==="todos"||d.asignatura===n)&&d.reflexionUnidad),[e,t,n]),o=k.useMemo(()=>{const d=HW.reduce((f,h)=>({...f,[h]:0}),{});return i.forEach(f=>{var h,p;return(p=(h=f.reflexionUnidad)==null?void 0:h.ordenHabilidades)==null?void 0:p.forEach((g,v)=>{d[g]!==void 0&&(d[g]+=HW.length-v)})}),Object.entries(d).map(([f,h])=>({text:f,value:h})).sort((f,h)=>h.value-f.value)},[i]),c=k.useMemo(()=>{const d=new Set(["y","e","o","u","de","la","el","los","las","un","una","unos","unas","a","con","que","se","del","al","no","si","fue","es","son","muy","mas","lo","como","sus","para","por","este","esta","actividad","clase","alumnos","estudiantes"]),h=(i.map(p=>{var g,v;return`${((g=p.reflexionUnidad)==null?void 0:g.fortalezas)||""} ${((v=p.reflexionUnidad)==null?void 0:v.debilidades)||""}`}).join(" ").toLowerCase().match(/\b(\w{4,})\b/g)||[]).reduce((p,g)=>(d.has(g)||(p[g]=(p[g]||0)+1),p),{});return Object.entries(h).map(([p,g])=>({text:p,value:g})).sort((p,g)=>g.value-p.value).slice(0,50)},[i]),u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600";return l.jsxs("div",{className:"animate-fade-in",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:t,onChange:d=>r(d.target.value),className:u,children:[l.jsx("option",{value:"todos",children:"Todos los Niveles"}),Jct.map(d=>l.jsx("option",{value:d,children:d},d))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsx("select",{value:n,onChange:d=>a(d.target.value),className:u,children:s.map(d=>l.jsx("option",{value:d,children:d==="todos"?"Todas las Asignaturas":d},d))})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Ranking de Habilidades"}),o.every(d=>d.value===0)?l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos"}):l.jsx("ul",{className:"space-y-3",children:o.map((d,f)=>l.jsxs("li",{className:"flex items-center gap-4",children:[l.jsx("span",{className:"font-bold text-lg text-amber-500 w-6 text-center",children:f+1}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:d.text}),l.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2.5",children:l.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full",style:{width:`${d.value/(o[0].value||1)*100}%`}})})]})]},d.text))})]}),l.jsxs("div",{className:"p-6 border dark:border-slate-700 rounded-lg flex flex-col items-center justify-center",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nube de Contenidos"}),c.length>0?l.jsx(Zct,{words:c}):l.jsx("p",{className:"text-center py-10 text-slate-500",children:"No hay datos suficientes"})]})]})]})},tut=({currentUser:e})=>{const{planificaciones:t,loading:r,error:n,canViewAllPlans:a}=Xct(e),[s,i]=k.useState("seguimiento"),[o,c]=k.useState("1º"),[u,d]=k.useState(null),[f,h]=k.useState(null),p=k.useMemo(()=>{const b={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"};return t.filter(y=>y.nivel===b[o]&&y.tipo==="Unidad")},[t,o]),g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];if(!(e!=null&&e.id))return l.jsx("div",{className:"text-center py-8",children:l.jsx("p",{children:"Usuario no autenticado."})});if(r)return l.jsxs("div",{className:"text-center py-8 flex justify-center items-center gap-3",children:[l.jsx(Wct,{}),l.jsx("span",{children:"Cargando planificaciones..."})]});if(n)return l.jsx("div",{className:"text-center py-8",children:l.jsxs("p",{className:"text-red-500",children:["Error: ",n]})});const v=()=>l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>l.jsx("button",{onClick:()=>c(b.key),className:`${o===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg`,children:b.label},b.key))})}),p.length===0?l.jsx("div",{className:"text-center py-12",children:l.jsx("p",{className:"text-slate-500",children:"No hay planificaciones de unidad para este nivel."})}):l.jsx("div",{className:"space-y-4",children:qi.map(b=>{const y=p.filter(N=>N.asignatura===b);if(y.length===0)return null;const C=u===b;return l.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[l.jsxs("button",{onClick:()=>d(C?null:b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),l.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," unidad",y.length>1?"es":""]})]}),l.jsx("span",{className:`transform transition-transform ${C?"rotate-180":""}`,children:l.jsx(Kct,{})})]}),C&&l.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:l.jsx("ul",{className:"space-y-3",children:y.map(N=>l.jsx("li",{children:l.jsxs("button",{onClick:()=>h(N),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 group",children:[l.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600",children:N.nombreUnidad}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:["Autor: ",N.autor||"N/A"]})]})},N.id))})})]},b)})})]});return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-6xl mx-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),a&&l.jsx("div",{className:"text-sm text-amber-600 font-medium",children:"👑 Vista administrativa"})]}),l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>i("seguimiento"),className:`${s==="seguimiento"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Seguimiento por Nivel"}),l.jsx("button",{onClick:()=>i("analisis"),className:`${s==="analisis"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} py-4 px-1 border-b-2 font-medium text-lg`,children:"Análisis de Reflexiones"})]})}),s==="seguimiento"&&v(),s==="analisis"&&l.jsx(eut,{planificaciones:t.filter(b=>b.tipo==="Unidad")})]}),f&&l.jsx(Yct,{plan:f,onClose:()=>h(null)})]})},Pk="analisisTaxonomicos",rut=async()=>{try{const e=tr(It(tn,Pk),Rr("uploadDate","desc"));return(await Pa(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error al obtener todos los análisis:",e),new Error("No se pudieron cargar los análisis taxonómicos")}},nut=async e=>{if(!e)return[];try{const t=tr(It(tn,Pk),vn("userId","==",e),Rr("uploadDate","desc"));return(await Pa(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error al obtener análisis por usuario:",t),new Error("No se pudieron cargar los análisis del usuario")}},aut=async e=>{try{return{id:(await Un(It(tn,Pk),e)).id,...e}}catch(t){throw console.error("Error al crear análisis:",t),new Error("No se pudo crear el análisis taxonómico")}},sut=async e=>{try{const t=pr(tn,Pk,e);await ts(t)}catch(t){throw console.error("Error al eliminar análisis:",t,"ID:",e),new Error("No se pudo eliminar el análisis taxonómico")}},VW=["1º Medio","2º Medio","3º Medio","4º Medio"],Uf=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],jv={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},iut=()=>l.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),out=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState(!1),[s,i]=k.useState(null),[o,c]=k.useState(null),[u,d]=k.useState(""),[f,h]=k.useState(!1),[p,g]=k.useState(null),[v,b]=k.useState(null),[y,C]=k.useState(""),[N,T]=k.useState(""),[S,B]=k.useState(""),[w,_]=k.useState(""),[F,M]=k.useState("resumen"),D=k.useCallback(async()=>{if(e!=null&&e.id){a(!0);try{const z=e.profile==="SUBDIRECCION"?await rut():await nut(e.id);r(z),i(null)}catch(z){console.error("Error al cargar análisis:",z),i("No se pudieron cargar los análisis.")}finally{a(!1)}}},[e]);k.useEffect(()=>{D()},[D]);const I=async z=>{var re;const G=(re=z.target.files)==null?void 0:re[0];if(G){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(G.type)){i("Por favor, suba un archivo PDF o DOCX válido.");return}g(G),d(G.name),i(null);const q=new FileReader;q.onloadend=()=>{var te;const J=(te=q.result)==null?void 0:te.split(",")[1];if(!J){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),b(null);return}b({mimeType:G.type,data:J})},q.onerror=()=>i("Error al leer el archivo."),q.readAsDataURL(G)}},U=async()=>{if(!u.trim()||!v){i("Debe subir un documento y asignarle un nombre para analizar.");return}if(!y||!N){i("Seleccione Nivel y Asignatura antes de analizar.");return}h(!0),i(null);const z=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados. El JSON debe ser válido.
        `,G={type:"object",properties:{analysisResults:{type:"array",items:{type:"object",properties:{question:{type:"string"},habilidadBloom:{type:"string",enum:Uf}},required:["question","habilidadBloom"]}},summary:{type:"object",properties:Uf.reduce((re,R)=>({...re,[R]:{type:"number"}}),{})}},required:["analysisResults","summary"]};try{mm("Análisis Taxonómico",e);const re="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=new ds(re).getGenerativeModel({model:"gemini-1.5-pro",generationConfig:{responseMimeType:"application/json",responseSchema:G}}),J={inlineData:{mimeType:v.mimeType,data:v.data}},ie=(await q.generateContent([z,J])).response.text();let Ae;try{Ae=JSON.parse(ie)}catch(pe){throw console.error("Error al parsear JSON:",pe),console.error("Respuesta recibida (no es JSON válido):",ie),new Error("La respuesta de la IA no tuvo un formato válido. Intente de nuevo.")}const oe={documentName:u,uploadDate:new Date().toISOString(),userId:e.id,analysisResults:Ae.analysisResults,summary:Ae.summary,nivel:y,asignatura:N},ce=await aut(oe);await D(),c(ce),d(""),g(null),b(null),C(""),T("")}catch(re){console.error(re);const R=re instanceof Error?re.message:"Hubo un error al analizar el documento.";i(R)}finally{h(!1)}},P=async z=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await sut(z),await D(),(o==null?void 0:o.id)===z&&c(null)}catch{i("No se pudo eliminar el análisis.")}},X=k.useMemo(()=>t.filter(z=>{const G=S?z.nivel===S:!0,re=w?z.asignatura===w:!0;return G&&re}),[t,S,w]),H=k.useMemo(()=>{const z={Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0};X.forEach(re=>{Uf.forEach(R=>{var J;const q=((J=re.summary)==null?void 0:J[R])||0;z[R]+=q})});const G=Object.values(z).reduce((re,R)=>re+R,0);return{acc:z,total:G}},[X]),Y=k.useMemo(()=>{const z=new Map;X.forEach(re=>{const R=re.asignatura||"Sin asignatura";z.has(R)||z.set(R,{Recordar:0,Comprender:0,Aplicar:0,Analizar:0,Evaluar:0,Crear:0});const q=z.get(R);Uf.forEach(J=>{var te;q[J]+=((te=re.summary)==null?void 0:te[J])||0})});const G=Array.from(z.entries()).map(([re,R])=>({asignatura:re,counts:R,total:Object.values(R).reduce((q,J)=>q+J,0)}));return G.sort((re,R)=>R.total-re.total),G},[X]),V=k.useMemo(()=>o?Object.values(o.summary).reduce((z,G)=>z+(G||0),0):0,[o]);return l.jsxs("div",{className:"space-y-8 animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),s&&l.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),l.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:l.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),l.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[l.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500",children:[l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:I,accept:".pdf,.doc,.docx"}),l.jsx("span",{children:"Cargue un archivo"})]}),l.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),l.jsx("p",{className:"text-xs text-slate-500",children:p?p.name:"PDF, DOCX hasta 10MB"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),l.jsxs("select",{value:y,onChange:z=>C(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),VW.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),l.jsxs("select",{value:N,onChange:z=>T(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Seleccione"}),qi.map(z=>l.jsx("option",{value:z,children:z},z))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento"}),l.jsx("input",{type:"text",id:"documentName",value:u,onChange:z=>d(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),l.jsx("button",{onClick:U,disabled:f||!v,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:f?l.jsx(iut,{}):"Analizar con IA"})]})]}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),n?l.jsx("p",{className:"text-sm text-slate-500",children:"Cargando..."}):t.length===0?l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados."}):l.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:t.map(z=>l.jsxs("button",{onClick:()=>c(z),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===z.id?"bg-amber-100 border-amber-300":"bg-slate-50 hover:bg-slate-100"}`,children:[l.jsx("p",{className:"font-semibold truncate",children:z.documentName}),l.jsx("p",{className:"text-xs text-slate-500",children:new Date(z.uploadDate).toLocaleString("es-CL")}),(z.nivel||z.asignatura)&&l.jsxs("p",{className:"text-xs text-slate-500",children:[z.nivel||"Nivel s/i"," • ",z.asignatura||"Asignatura s/i"]})]},z.id))})]})]}),l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsx("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-md",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Nivel"}),l.jsxs("select",{value:S,onChange:z=>B(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todos"}),VW.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Asignatura"}),l.jsxs("select",{value:w,onChange:z=>_(z.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[l.jsx("option",{value:"",children:"Todas"}),qi.map(z=>l.jsx("option",{value:z,children:z},z))]})]}),l.jsx("button",{type:"button",onClick:()=>{B(""),_("")},className:"px-4 py-2 rounded-md bg-slate-200 hover:bg-slate-300 dark:bg-slate-700 dark:hover:bg-slate-600 text-slate-800 dark:text-slate-200 font-semibold",children:"Limpiar filtros"})]})}),l.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-md",children:[l.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 px-4",children:l.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>M("resumen"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${F==="resumen"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Resumen Global"}),l.jsx("button",{onClick:()=>M("comparacion"),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${F==="comparacion"?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300"}`,children:"Comparación por Asignatura"})]})}),F==="resumen"?l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Resumen Global de Habilidades"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[X.length," análisis considerados"]})]}),l.jsx("div",{className:"space-y-3",children:Uf.map(z=>{const G=H.acc[z],re=H.total>0?G/H.total*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:z}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[G," (",re.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${jv[z]} h-4 rounded-full`,style:{width:`${re}%`}})})]},z)})}),l.jsx("div",{className:"mt-6 grid grid-cols-2 md:grid-cols-3 gap-3",children:Uf.map(z=>l.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded-lg border dark:border-slate-700",children:[l.jsx("span",{className:"text-sm",children:z}),l.jsx("span",{className:`text-xs font-bold text-white px-2 py-1 rounded ${jv[z]}`,children:H.acc[z]})]},z))})]}):l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Comparación por Asignatura"}),l.jsxs("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:[Y.length," asignaturas comparadas"]})]}),Y.length===0?l.jsx("div",{className:"text-sm text-slate-500",children:"No hay datos con los filtros actuales."}):l.jsx("div",{className:"space-y-5",children:Y.map(z=>{const G=z.total||1;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-300",children:z.asignatura}),l.jsxs("span",{className:"text-slate-500 dark:text-slate-400",children:[z.total," ítems"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-5 overflow-hidden flex",children:Uf.map(re=>{const R=z.counts[re]||0,q=R/G*100;return l.jsx("div",{className:`${jv[re]} h-5`,style:{width:`${q}%`},title:`${re}: ${R} (${q.toFixed(0)}%)`},re)})}),l.jsx("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-2",children:Uf.map(re=>l.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[l.jsx("span",{className:`inline-block w-3 h-3 rounded ${jv[re]}`}),l.jsx("span",{children:re})]},re))})]},z.asignatura)})})]})]}),l.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),l.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL"),(o.nivel||o.asignatura)&&l.jsxs(l.Fragment,{children:[" ","• ",o.nivel||"Nivel s/i"," • ",o.asignatura||"Asignatura s/i"]})]})]}),l.jsx("button",{onClick:()=>P(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado del Documento (",V," preguntas)"]}),l.jsx("div",{className:"space-y-3",children:Uf.map(z=>{const G=o.summary[z]||0,re=V>0?G/V*100:0;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[l.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:z}),l.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[G," (",re.toFixed(0),"%)"]})]}),l.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:l.jsx("div",{className:`${jv[z]} h-4 rounded-full`,style:{width:`${re}%`}})})]},z)})})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),l.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:l.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[l.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),l.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),l.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((z,G)=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:z.question}),l.jsx("td",{className:"px-4 py-3 text-sm",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${jv[z.habilidadBloom]}`,children:z.habilidadBloom})})]},G))})]})})]})]}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center py-8",children:[l.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),l.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})]})},pN="empresas_practicas",lut="usuarios",q8="rutas_supervision",W8=e=>{const t=e.data();return{id:e.id,...t}};async function cut(e){const r=`https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURIComponent(e)}&key=AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4&region=CL`;try{const a=await(await fetch(r)).json();return a.status==="OK"&&a.results[0]?a.results[0].geometry.location:null}catch(n){return console.error("Error en la llamada a la API de Geocodificación:",n),null}}const uut=e=>{const t=tr(It(bt,pN),Rr("nombre","asc"));return gr(t,r=>{const n=r.docs.map(a=>W8(a));e(n)},r=>console.error("Error al suscribirse a empresas:",r))},dut=async e=>{const t=e.calificaciones.reduce((n,a)=>n+(a.score||0),0),r={...e,puntajeTotal:t};if(e.direccion){const n=await cut(e.direccion);n&&(r.coordenadas=n)}if("id"in e&&e.id){const{id:n,...a}=r,s=pr(bt,pN,n);return await Ji(s,a,{merge:!0}),n}else return(await Un(It(bt,pN),{...r,createdAt:el()})).id},Aut=async e=>{const t=pr(bt,pN,e);await ts(t)},fut=e=>{const t=tr(It(bt,lut),vn("profile","==","PROFESORADO"),Rr("nombreCompleto","asc"));return gr(t,r=>{const n=r.docs.map(a=>W8(a));e(n)},r=>console.error("Error al suscribirse a profesores:",r))},hut=async e=>(await Un(It(bt,q8),{...e,createdAt:el()})).id,mut=e=>{const t=tr(It(bt,q8),Rr("createdAt","desc"));return gr(t,r=>{const n=r.docs.map(a=>W8(a));e(n)},r=>console.error("Error al suscribirse a rutas guardadas:",r))},put=async e=>{const t=pr(bt,q8,e);await ts(t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Gp=function(){return Gp=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Gp.apply(this,arguments)};function gut(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(u){try{c(n.next(u))}catch(d){s(d)}}function o(u){try{c(n.throw(u))}catch(d){s(d)}}function c(u){var d;u.done?a(u.value):(d=u.value,d instanceof r?d:new r(function(f){f(d)})).then(i,o)}c((n=n.apply(e,[])).next())})}function vut(e,t){var r,n,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(c){return function(u){return function(d){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&d[0]?n.return:d[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,d[1])).done)return a;switch(n=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return i.label++,{value:d[1],done:!1};case 5:i.label++,n=d[1],d=[0];continue;case 7:d=i.ops.pop(),i.trys.pop();continue;default:if(a=i.trys,!((a=a.length>0&&a[a.length-1])||d[0]!==6&&d[0]!==2)){i=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){i.label=d[1];break}if(d[0]===6&&i.label<a[1]){i.label=a[1],a=d;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(d);break}a[2]&&i.ops.pop(),i.trys.pop();continue}d=t.call(e,i)}catch(f){d=[6,f],n=0}finally{r=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([c,u])}}}function Dr(){return Dr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dr.apply(this,arguments)}function Kp(e){return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function Kue(e){var t=function(r,n){if(Kp(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n);if(Kp(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)}(e,"string");return Kp(t)==="symbol"?t:String(t)}function rx(e,t,r){return(t=Kue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zW(Object(r),!0).forEach(function(n){rx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zW(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Kue(n.key),n)}}function RO(e,t){return RO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},RO(e,t)}function gN(e){return gN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gN(e)}function xut(e,t){if(t&&(Kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(e)}function but(e){var t=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var r,n=gN(e);if(t){var a=gN(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return xut(this,r)}}function LO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function que(e,t){if(e){if(typeof e=="string")return LO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?LO(e,t):void 0}}function X8(e){return function(t){if(Array.isArray(t))return LO(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||que(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}var yut=function(){function e(r){var n=this;this._insertTag=function(a){var s;s=n.tags.length===0?n.insertionPoint?n.insertionPoint.nextSibling:n.prepend?n.container.firstChild:n.before:n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(a,s),n.tags.push(a)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(s){var i=document.createElement("style");return i.setAttribute("data-emotion",s.key),s.nonce!==void 0&&i.setAttribute("nonce",s.nonce),i.appendChild(document.createTextNode("")),i.setAttribute("data-s",""),i}(this));var n=this.tags[this.tags.length-1];if(this.isSpeedy){var a=function(s){if(s.sheet)return s.sheet;for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].ownerNode===s)return document.styleSheets[i]}(n);try{a.insertRule(r,a.cssRules.length)}catch{}}else n.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),pu="-ms-",GW="-moz-",ea="-webkit-",Y8="decl",Wue="@keyframes",wut=Math.abs,Rk=String.fromCharCode,Eut=Object.assign;function Xue(e){return e.trim()}function oa(e,t,r){return e.replace(t,r)}function MO(e,t){return e.indexOf(t)}function Ao(e,t){return 0|e.charCodeAt(t)}function r2(e,t,r){return e.slice(t,r)}function TA(e){return e.length}function J8(e){return e.length}function p_(e,t){return t.push(e),e}var Lk=1,u1=1,Yue=0,ec=0,Ai=0,$1="";function Mk(e,t,r,n,a,s,i){return{value:e,root:t,parent:r,type:n,props:a,children:s,line:Lk,column:u1,length:i,return:""}}function ty(e,t){return Eut(Mk("",null,null,"",null,null,0),e,{length:-e.length},t)}function Dc(){return Ai=ec<Yue?Ao($1,ec++):0,u1++,Ai===10&&(u1=1,Lk++),Ai}function WA(){return Ao($1,ec)}function eS(){return ec}function J2(e,t){return r2($1,e,t)}function n2(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Jue(e){return Lk=u1=1,Yue=TA($1=e),ec=0,[]}function Zue(e){return $1="",e}function tS(e){return Xue(J2(ec-1,UO(e===91?e+2:e===40?e+1:e)))}function Cut(e){for(;(Ai=WA())&&Ai<33;)Dc();return n2(e)>2||n2(Ai)>3?"":" "}function _ut(e,t){for(;--t&&Dc()&&!(Ai<48||Ai>102||Ai>57&&Ai<65||Ai>70&&Ai<97););return J2(e,eS()+(t<6&&WA()==32&&Dc()==32))}function UO(e){for(;Dc();)switch(Ai){case e:return ec;case 34:case 39:e!==34&&e!==39&&UO(Ai);break;case 40:e===41&&UO(e);break;case 92:Dc()}return ec}function Sut(e,t){for(;Dc()&&e+Ai!==57&&(e+Ai!==84||WA()!==47););return"/*"+J2(t,ec-1)+"*"+Rk(e===47?e:Dc())}function Nut(e){for(;!n2(WA());)Dc();return J2(e,ec)}function KW(e){return Zue(rS("",null,null,null,[""],e=Jue(e),0,[0],e))}function rS(e,t,r,n,a,s,i,o,c){for(var u=0,d=0,f=i,h=0,p=0,g=0,v=1,b=1,y=1,C=0,N="",T=a,S=s,B=n,w=N;b;)switch(g=C,C=Dc()){case 40:if(g!=108&&Ao(w,f-1)==58){MO(w+=oa(tS(C),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:w+=tS(C);break;case 9:case 10:case 13:case 32:w+=Cut(g);break;case 92:w+=_ut(eS()-1,7);continue;case 47:switch(WA()){case 42:case 47:p_(kut(Sut(Dc(),eS()),t,r),c);break;default:w+="/"}break;case 123*v:o[u++]=TA(w)*y;case 125*v:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+d:p>0&&TA(w)-f&&p_(p>32?WW(w+";",n,r,f-1):WW(oa(w," ","")+";",n,r,f-2),c);break;case 59:w+=";";default:if(p_(B=qW(w,t,r,u,d,a,o,N,T=[],S=[],f),s),C===123)if(d===0)rS(w,t,B,B,T,s,f,o,S);else switch(h===99&&Ao(w,3)===110?100:h){case 100:case 109:case 115:rS(e,B,B,n&&p_(qW(e,B,B,0,0,a,o,N,a,T=[],f),S),a,S,f,o,n?T:S);break;default:rS(w,B,B,B,[""],S,0,o,S)}}u=d=p=0,v=y=1,N=w="",f=i;break;case 58:f=1+TA(w),p=g;default:if(v<1){if(C==123)--v;else if(C==125&&v++==0&&(Ai=ec>0?Ao($1,--ec):0,u1--,Ai===10&&(u1=1,Lk--),Ai==125))continue}switch(w+=Rk(C),C*v){case 38:y=d>0?1:(w+="\f",-1);break;case 44:o[u++]=(TA(w)-1)*y,y=1;break;case 64:WA()===45&&(w+=tS(Dc())),h=WA(),d=f=TA(N=w+=Nut(eS())),C++;break;case 45:g===45&&TA(w)==2&&(v=0)}}return s}function qW(e,t,r,n,a,s,i,o,c,u,d){for(var f=a-1,h=a===0?s:[""],p=J8(h),g=0,v=0,b=0;g<n;++g)for(var y=0,C=r2(e,f+1,f=wut(v=i[g])),N=e;y<p;++y)(N=Xue(v>0?h[y]+" "+C:oa(C,/&\f/g,h[y])))&&(c[b++]=N);return Mk(e,t,r,a===0?"rule":o,c,u,d)}function kut(e,t,r){return Mk(e,t,r,"comm",Rk(Ai),r2(e,2,-2),0)}function WW(e,t,r,n){return Mk(e,t,r,Y8,r2(e,0,n),r2(e,n+1,-1),n)}function qp(e,t){for(var r="",n=J8(e),a=0;a<n;a++)r+=t(e[a],a,e,t)||"";return r}function XW(e,t,r,n){switch(e.type){case"@import":case Y8:return e.return=e.return||e.value;case"comm":return"";case Wue:return e.return=e.value+"{"+qp(e.children,n)+"}";case"rule":e.value=e.props.join(",")}return TA(r=qp(e.children,n))?e.return=e.value+"{"+r+"}":""}function YW(e){var t=J8(e);return function(r,n,a,s){for(var i="",o=0;o<t;o++)i+=e[o](r,n,a,s)||"";return i}}function But(e){return function(t){t.root||(t=t.return)&&e(t)}}function ede(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Tut=function(e,t,r){for(var n=0,a=0;n=a,a=WA(),n===38&&a===12&&(t[r]=1),!n2(a);)Dc();return J2(e,ec)},jut=function(e,t){return Zue(function(r,n){var a=-1,s=44;do switch(n2(s)){case 0:s===38&&WA()===12&&(n[a]=1),r[a]+=Tut(ec-1,n,a);break;case 2:r[a]+=tS(s);break;case 4:if(s===44){r[++a]=WA()===58?"&\f":"",n[a]=r[a].length;break}default:r[a]+=Rk(s)}while(s=Dc());return r}(Jue(e),t))},JW=new WeakMap,Iut=function(e){if(e.type==="rule"&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(!(r=r.parent))return;if((e.props.length!==1||t.charCodeAt(0)===58||JW.get(r))&&!n){JW.set(e,!0);for(var a=[],s=jut(t,a),i=r.props,o=0,c=0;o<s.length;o++)for(var u=0;u<i.length;u++,c++)e.props[c]=a[o]?s[o].replace(/&\f/g,i[u]):i[u]+" "+s[o]}}},Fut=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function tde(e,t){switch(function(r,n){return 45^Ao(r,0)?(((n<<2^Ao(r,0))<<2^Ao(r,1))<<2^Ao(r,2))<<2^Ao(r,3):0}(e,t)){case 5103:return ea+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ea+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ea+e+GW+e+pu+e+e;case 6828:case 4268:return ea+e+pu+e+e;case 6165:return ea+e+pu+"flex-"+e+e;case 5187:return ea+e+oa(e,/(\w+).+(:[^]+)/,ea+"box-$1$2-ms-flex-$1$2")+e;case 5443:return ea+e+pu+"flex-item-"+oa(e,/flex-|-self/,"")+e;case 4675:return ea+e+pu+"flex-line-pack"+oa(e,/align-content|flex-|-self/,"")+e;case 5548:return ea+e+pu+oa(e,"shrink","negative")+e;case 5292:return ea+e+pu+oa(e,"basis","preferred-size")+e;case 6060:return ea+"box-"+oa(e,"-grow","")+ea+e+pu+oa(e,"grow","positive")+e;case 4554:return ea+oa(e,/([^-])(transform)/g,"$1"+ea+"$2")+e;case 6187:return oa(oa(oa(e,/(zoom-|grab)/,ea+"$1"),/(image-set)/,ea+"$1"),e,"")+e;case 5495:case 3959:return oa(e,/(image-set\([^]*)/,ea+"$1$`$1");case 4968:return oa(oa(e,/(.+:)(flex-)?(.*)/,ea+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+ea+e+e;case 4095:case 3583:case 4068:case 2532:return oa(e,/(.+)-inline(.+)/,ea+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(TA(e)-1-t>6)switch(Ao(e,t+1)){case 109:if(Ao(e,t+4)!==45)break;case 102:return oa(e,/(.+:)(.+)-([^]+)/,"$1"+ea+"$2-$3$1"+GW+(Ao(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~MO(e,"stretch")?tde(oa(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ao(e,t+1)!==115)break;case 6444:switch(Ao(e,TA(e)-3-(~MO(e,"!important")&&10))){case 107:return oa(e,":",":"+ea)+e;case 101:return oa(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ea+(Ao(e,14)===45?"inline-":"")+"box$3$1"+ea+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(Ao(e,t+11)){case 114:return ea+e+pu+oa(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ea+e+pu+oa(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ea+e+pu+oa(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ea+e+pu+e+e}return e}var ZW,g_,nS=typeof document<"u",Out=nS?void 0:(ZW=function(){return ede(function(){var e={};return function(t){return e[t]}})},g_=new WeakMap,function(e){if(g_.has(e))return g_.get(e);var t=ZW(e);return g_.set(e,t),t}),Dut=[function(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case Y8:e.return=tde(e.value,e.length);break;case Wue:return qp([ty(e,{value:oa(e.value,"@","@"+ea)})],n);case"rule":if(e.length)return function(a,s){return a.map(s).join("")}(e.props,function(a){switch(function(s,i){return(s=i.exec(s))?s[0]:s}(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return qp([ty(e,{props:[oa(a,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return qp([ty(e,{props:[oa(a,/:(plac\w+)/,":"+ea+"input-$1")]}),ty(e,{props:[oa(a,/:(plac\w+)/,":-moz-$1")]}),ty(e,{props:[oa(a,/:(plac\w+)/,"-ms-input-$1")]})],n)}return""})}}],rde=function(e){var t=e.key;if(nS&&t==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){y.getAttribute("data-emotion").indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var n=e.stylisPlugins||Dut,a,s,i={},o=[];nS&&(a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var C=y.getAttribute("data-emotion").split(" "),N=1;N<C.length;N++)i[C[N]]=!0;o.push(y)}));var c=[Iut,Fut];if(nS){var u,d=[XW,But(function(y){u.insert(y)})],f=YW(c.concat(n,d));s=function(y,C,N,T){u=N,qp(KW(y?y+"{"+C.styles+"}":C.styles),f),T&&(b.inserted[C.name]=!0)}}else{var h=[XW],p=YW(c.concat(n,h)),g=Out(n)(t),v=function(y,C){var N=C.name;return g[N]===void 0&&(g[N]=qp(KW(y?y+"{"+C.styles+"}":C.styles),p)),g[N]};s=function(y,C,N,T){var S=C.name,B=v(y,C);return b.compat===void 0?(T&&(b.inserted[S]=!0),B):T?void(b.inserted[S]=B):B}}var b={key:t,sheet:new yut({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:s};return b.sheet.hydrate(o),b};function ca(e,t,r){return e(r={path:t,exports:{},require:function(n,a){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(a==null&&r.path)}},r.exports),r.exports}var to=typeof Symbol=="function"&&Symbol.for,QO=to?Symbol.for("react.element"):60103,HO=to?Symbol.for("react.portal"):60106,aS=to?Symbol.for("react.fragment"):60107,sS=to?Symbol.for("react.strict_mode"):60108,iS=to?Symbol.for("react.profiler"):60114,oS=to?Symbol.for("react.provider"):60109,lS=to?Symbol.for("react.context"):60110,VO=to?Symbol.for("react.async_mode"):60111,vN=to?Symbol.for("react.concurrent_mode"):60111,cS=to?Symbol.for("react.forward_ref"):60112,uS=to?Symbol.for("react.suspense"):60113,Put=to?Symbol.for("react.suspense_list"):60120,dS=to?Symbol.for("react.memo"):60115,AS=to?Symbol.for("react.lazy"):60116,Rut=to?Symbol.for("react.block"):60121,Lut=to?Symbol.for("react.fundamental"):60117,Mut=to?Symbol.for("react.responder"):60118,Uut=to?Symbol.for("react.scope"):60119;function wc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case QO:switch(e=e.type){case VO:case vN:case aS:case iS:case sS:case uS:return e;default:switch(e=e&&e.$$typeof){case lS:case cS:case AS:case dS:case oS:return e;default:return t}}case HO:return t}}}function eX(e){return wc(e)===vN}var Qut={AsyncMode:VO,ConcurrentMode:vN,ContextConsumer:lS,ContextProvider:oS,Element:QO,ForwardRef:cS,Fragment:aS,Lazy:AS,Memo:dS,Portal:HO,Profiler:iS,StrictMode:sS,Suspense:uS,isAsyncMode:function(e){return eX(e)||wc(e)===VO},isConcurrentMode:eX,isContextConsumer:function(e){return wc(e)===lS},isContextProvider:function(e){return wc(e)===oS},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===QO},isForwardRef:function(e){return wc(e)===cS},isFragment:function(e){return wc(e)===aS},isLazy:function(e){return wc(e)===AS},isMemo:function(e){return wc(e)===dS},isPortal:function(e){return wc(e)===HO},isProfiler:function(e){return wc(e)===iS},isStrictMode:function(e){return wc(e)===sS},isSuspense:function(e){return wc(e)===uS},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===aS||e===vN||e===iS||e===sS||e===uS||e===Put||typeof e=="object"&&e!==null&&(e.$$typeof===AS||e.$$typeof===dS||e.$$typeof===oS||e.$$typeof===lS||e.$$typeof===cS||e.$$typeof===Lut||e.$$typeof===Mut||e.$$typeof===Uut||e.$$typeof===Rut)},typeOf:wc};ca(function(e,t){});var tX=ca(function(e){e.exports=Qut}),rX={};rX[tX.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},rX[tX.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var zO=typeof document<"u";function nde(e,t,r){var n="";return r.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):n+=a+" "}),n}var Z8=function(e,t,r){var n=e.key+"-"+t.name;(r===!1||zO===!1&&e.compat!==void 0)&&e.registered[n]===void 0&&(e.registered[n]=t.styles)},eM=function(e,t,r){Z8(e,t,r);var n=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var a="",s=t;do{var i=e.insert(t===s?"."+n:"",s,e.sheet,!0);zO||i===void 0||(a+=i),s=s.next}while(s!==void 0);if(!zO&&a.length!==0)return a}},Hut={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Vut=/[A-Z]|^ms/g,zut=/_EMO_([^_]+?)_([^]*?)_EMO_/g,ade=function(e){return e.charCodeAt(1)===45},nX=function(e){return e!=null&&typeof e!="boolean"},NI=ede(function(e){return ade(e)?e:e.replace(Vut,"-$&").toLowerCase()}),aX=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(zut,function(r,n,a){return jA={name:n,styles:a,next:jA},n})}return Hut[e]===1||ade(e)||typeof t!="number"||t===0?t:t+"px"};function nw(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":if(r.anim===1)return jA={name:r.name,styles:r.styles,next:jA},r.name;if(r.styles!==void 0){var n=r.next;if(n!==void 0)for(;n!==void 0;)jA={name:n.name,styles:n.styles,next:jA},n=n.next;var a=r.styles+";";return a}return function(c,u,d){var f="";if(Array.isArray(d))for(var h=0;h<d.length;h++)f+=nw(c,u,d[h])+";";else for(var p in d){var g=d[p];if(typeof g!="object")u!=null&&u[g]!==void 0?f+=p+"{"+u[g]+"}":nX(g)&&(f+=NI(p)+":"+aX(p,g)+";");else if(!Array.isArray(g)||typeof g[0]!="string"||u!=null&&u[g[0]]!==void 0){var v=nw(c,u,g);switch(p){case"animation":case"animationName":f+=NI(p)+":"+v+";";break;default:f+=p+"{"+v+"}"}}else for(var b=0;b<g.length;b++)nX(g[b])&&(f+=NI(p)+":"+aX(p,g[b])+";")}return f}(e,t,r);case"function":if(e!==void 0){var s=jA,i=r(e);return jA=s,nw(e,t,i)}break}if(t==null)return r;var o=t[r];return o!==void 0?o:r}var jA,sX=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Uk=function(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,a="";jA=void 0;var s=e[0];s==null||s.raw===void 0?(n=!1,a+=nw(r,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=nw(r,t,e[i]),n&&(a+=s[i]);sX.lastIndex=0;for(var o,c="";(o=sX.exec(a))!==null;)c+="-"+o[1];var u=function(d){for(var f,h=0,p=0,g=d.length;g>=4;++p,g-=4)f=1540483477*(65535&(f=255&d.charCodeAt(p)|(255&d.charCodeAt(++p))<<8|(255&d.charCodeAt(++p))<<16|(255&d.charCodeAt(++p))<<24))+(59797*(f>>>16)<<16),h=1540483477*(65535&(f^=f>>>24))+(59797*(f>>>16)<<16)^1540483477*(65535&h)+(59797*(h>>>16)<<16);switch(g){case 3:h^=(255&d.charCodeAt(p+2))<<16;case 2:h^=(255&d.charCodeAt(p+1))<<8;case 1:h=1540483477*(65535&(h^=255&d.charCodeAt(p)))+(59797*(h>>>16)<<16)}return(((h=1540483477*(65535&(h^=h>>>13))+(59797*(h>>>16)<<16))^h>>>15)>>>0).toString(36)}(a)+c;return{name:u,styles:a,next:jA}},$ut=typeof document<"u",Gut=function(e){return e()},sde=!!k.useInsertionEffect&&k.useInsertionEffect,ide=$ut&&sde||Gut,iX=sde||k.useLayoutEffect,Sx=typeof document<"u",tM={}.hasOwnProperty,xN=k.createContext(typeof HTMLElement<"u"?rde({key:"css"}):null);xN.Provider;var Qk=function(e){return k.forwardRef(function(t,r){var n=k.useContext(xN);return e(t,n,r)})};Sx||(Qk=function(e){return function(t){var r=k.useContext(xN);return r===null?(r=rde({key:"css"}),k.createElement(xN.Provider,{value:r},e(t,r))):e(t,r)}});var rM=k.createContext({}),$O="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Kut=function(e,t){var r={};for(var n in t)tM.call(t,n)&&(r[n]=t[n]);return r[$O]=e,r},qut=function(e){var t=e.cache,r=e.serialized,n=e.isStringTag;Z8(t,r,n);var a=ide(function(){return eM(t,r,n)});if(!Sx&&a!==void 0){for(var s,i=r.name,o=r.next;o!==void 0;)i+=" "+o.name,o=o.next;return k.createElement("style",((s={})["data-emotion"]=t.key+" "+i,s.dangerouslySetInnerHTML={__html:a},s.nonce=t.sheet.nonce,s))}return null},Wut=Qk(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var a=e[$O],s=[n],i="";typeof e.className=="string"?i=nde(t.registered,s,e.className):e.className!=null&&(i=e.className+" ");var o=Uk(s,void 0,k.useContext(rM));i+=t.key+"-"+o.name;var c={};for(var u in e)!tM.call(e,u)||u==="css"||u===$O||(c[u]=e[u]);return c.ref=r,c.className=i,k.createElement(k.Fragment,null,k.createElement(qut,{cache:t,serialized:o,isStringTag:typeof a=="string"}),k.createElement(a,c))});ca(function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});var Br=function(e,t){var r=arguments;if(t==null||!tM.call(t,"css"))return k.createElement.apply(void 0,r);var n=r.length,a=new Array(n);a[0]=Wut,a[1]=Kut(e,t);for(var s=2;s<n;s++)a[s]=r[s];return k.createElement.apply(null,a)};Qk(function(e,t){var r=e.styles,n=Uk([r],void 0,k.useContext(rM));if(!Sx){for(var a,s=n.name,i=n.styles,o=n.next;o!==void 0;)s+=" "+o.name,i+=o.styles,o=o.next;var c=t.compat===!0,u=t.insert("",{name:s,styles:i},t.sheet,c);return c?null:k.createElement("style",((a={})["data-emotion"]=t.key+"-global "+s,a.dangerouslySetInnerHTML={__html:u},a.nonce=t.sheet.nonce,a))}var d=k.useRef();return iX(function(){var f=t.key+"-global",h=new t.sheet.constructor({key:f,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),p=!1,g=document.querySelector('style[data-emotion="'+f+" "+n.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),g!==null&&(p=!0,g.setAttribute("data-emotion",f),h.hydrate([g])),d.current=[h,p],function(){h.flush()}},[t]),iX(function(){var f=d.current,h=f[0];if(f[1])f[1]=!1;else{if(n.next!==void 0&&eM(t,n.next,!0),h.tags.length){var p=h.tags[h.tags.length-1].nextElementSibling;h.before=p,h.flush()}t.insert("",n,h,!1)}},[t,n.name]),null});function nM(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Uk(t)}var Xut=function e(t){for(var r=t.length,n=0,a="";n<r;n++){var s=t[n];if(s!=null){var i=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))i=e(s);else for(var o in i="",s)s[o]&&o&&(i&&(i+=" "),i+=o);break;default:i=s}i&&(a&&(a+=" "),a+=i)}}return a};function Yut(e,t,r){var n=[],a=nde(e,n,r);return n.length<2?r:a+t(n)}var Jut=function(e){var t,r=e.cache,n=e.serializedArr,a=ide(function(){for(var s="",i=0;i<n.length;i++){var o=eM(r,n[i],!1);Sx||o===void 0||(s+=o)}if(!Sx)return s});return Sx||a.length===0?null:k.createElement("style",((t={})["data-emotion"]=r.key+" "+n.map(function(s){return s.name}).join(" "),t.dangerouslySetInnerHTML={__html:a},t.nonce=r.sheet.nonce,t))};Qk(function(e,t){var r=[],n=function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];var u=Uk(o,t.registered);return r.push(u),Z8(t,u,!1),t.key+"-"+u.name},a={css:n,cx:function(){for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return Yut(t.registered,n,Xut(o))},theme:k.useContext(rM)},s=e.children(a);return k.createElement(k.Fragment,null,k.createElement(Jut,{cache:t,serializedArr:r}),s)});function Qi(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var a=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(a!=null){var s,i,o,c,u=[],d=!0,f=!1;try{if(o=(a=a.call(r)).next,n===0){if(Object(a)!==a)return;d=!1}else for(;!(d=(s=o.call(a)).done)&&(u.push(s.value),u.length!==n);d=!0);}catch(h){f=!0,i=h}finally{try{if(!d&&a.return!=null&&(c=a.return(),Object(c)!==c))return}finally{if(f)throw i}}return u}}(e,t)||que(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function OA(e,t){if(e==null)return{};var r,n,a=function(i,o){if(i==null)return{};var c,u,d={},f=Object.keys(i);for(u=0;u<f.length;u++)c=f[u],o.indexOf(c)>=0||(d[c]=i[c]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function lh(e){var t;return((t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ode(e){return lh(e).getComputedStyle(e)}const v_=Math.round;function lde(e){return ude(e)?(e.nodeName||"").toLowerCase():""}let x_;function cde(e){return e instanceof lh(e).HTMLElement}function fS(e){return e instanceof lh(e).Element}function ude(e){return e instanceof lh(e).Node}function oX(e){return typeof ShadowRoot>"u"?!1:e instanceof lh(e).ShadowRoot||e instanceof ShadowRoot}function dde(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=ode(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(a)}function Zut(){return/^((?!chrome|android).)*safari/i.test(function(){if(x_)return x_;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(x_=e.brands.map(t=>t.brand+"/"+t.version).join(" "),x_):navigator.userAgent}())}function Ade(e){return fS(e)?e:e.contextElement}const fde={x:1,y:1};function lX(e){const t=Ade(e);if(!cde(t))return fde;const r=t.getBoundingClientRect(),{width:n,height:a,fallback:s}=function(c){const u=ode(c);let d=parseFloat(u.width),f=parseFloat(u.height);const h=c.offsetWidth,p=c.offsetHeight,g=v_(d)!==h||v_(f)!==p;return g&&(d=h,f=p),{width:d,height:f,fallback:g}}(t);let i=(s?v_(r.width):r.width)/n,o=(s?v_(r.height):r.height)/a;return i&&Number.isFinite(i)||(i=1),o&&Number.isFinite(o)||(o=1),{x:i,y:o}}function cX(e,t,r,n){var a,s;t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),o=Ade(e);let c=fde;t&&(c=lX(e));const u=o?lh(o):window,d=Zut()&&r;let f=(i.left+(d&&((a=u.visualViewport)==null?void 0:a.offsetLeft)||0))/c.x,h=(i.top+(d&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/c.y,p=i.width/c.x,g=i.height/c.y;if(o){const v=lh(o),b=n;let y=v.frameElement;for(;y&&n&&b!==v;){const C=lX(y),N=y.getBoundingClientRect(),T=getComputedStyle(y);N.x+=(y.clientLeft+parseFloat(T.paddingLeft))*C.x,N.y+=(y.clientTop+parseFloat(T.paddingTop))*C.y,f*=C.x,h*=C.y,p*=C.x,g*=C.y,f+=N.x,h+=N.y,y=lh(y).frameElement}}return{width:p,height:g,top:h,right:f+p,bottom:h+g,left:f,x:f,y:h}}function edt(e){if(lde(e)==="html")return e;const t=e.assignedSlot||e.parentNode||oX(e)&&e.host||function(r){return((ude(r)?r.ownerDocument:r.document)||window.document).documentElement}(e);return oX(t)?t.host:t}function hde(e){const t=edt(e);return function(r){return["html","body","#document"].includes(lde(r))}(t)?t.ownerDocument.body:cde(t)&&dde(t)?t:hde(t)}function hS(e,t){var r;t===void 0&&(t=[]);const n=hde(e),a=n===((r=e.ownerDocument)==null?void 0:r.body),s=lh(n);return a?t.concat(s,s.visualViewport||[],dde(n)?n:[]):t.concat(n,hS(n))}var GO=typeof document<"u"?k.useLayoutEffect:k.useEffect,tdt=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],bN=function(){};function rdt(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function ndt(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var s=[].concat(n);if(t&&e)for(var i in t)t.hasOwnProperty(i)&&t[i]&&s.push("".concat(rdt(e,i)));return s.filter(function(o){return o}).map(function(o){return String(o).trim()}).join(" ")}var uX=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):Kp(e)==="object"&&e!==null?[e]:[];var t},dX=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,wr({},OA(e,tdt))},Cs=function(e,t,r){var n=e.cx,a=e.getStyles,s=e.getClassNames,i=e.className;return{css:a(t,e),className:n(r??{},s(t,e),i)}};function Hk(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function mde(e){return Hk(e)?window.pageYOffset:e.scrollTop}function yN(e,t){Hk(e)?window.scrollTo(0,t):e.scrollTop=t}function adt(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function b_(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:bN,a=mde(e),s=t-a,i=10,o=0;function c(){var u=adt(o+=i,a,s,r);yN(e,u),o<r?window.requestAnimationFrame(c):n(e)}c()}function AX(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=t.offsetHeight/3;n.bottom+a>r.bottom?yN(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):n.top-a<r.top&&yN(e,Math.max(t.offsetTop-a,0))}function fX(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}var pde=!1,sdt={get passive(){return pde=!0}},y_=typeof window<"u"?window:{};y_.addEventListener&&y_.removeEventListener&&(y_.addEventListener("p",bN,sdt),y_.removeEventListener("p",bN,!1));var idt=pde;function odt(e){return e!=null}function w_(e,t,r){return e?t:r}var ldt=["children","innerProps"],cdt=["children","innerProps"];function udt(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,a=e.placement,s=e.shouldScroll,i=e.isFixedPosition,o=e.controlHeight,c=function(X){var H=getComputedStyle(X),Y=H.position==="absolute",V=/(auto|scroll)/;if(H.position==="fixed")return document.documentElement;for(var z=X;z=z.parentElement;)if(H=getComputedStyle(z),(!Y||H.position!=="static")&&V.test(H.overflow+H.overflowY+H.overflowX))return z;return document.documentElement}(r),u={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return u;var d,f=c.getBoundingClientRect().height,h=r.getBoundingClientRect(),p=h.bottom,g=h.height,v=h.top,b=r.offsetParent.getBoundingClientRect().top,y=i||Hk(d=c)?window.innerHeight:d.clientHeight,C=mde(c),N=parseInt(getComputedStyle(r).marginBottom,10),T=parseInt(getComputedStyle(r).marginTop,10),S=b-T,B=y-v,w=S+C,_=f-C-v,F=p-y+C+N,M=C+v-T,D=160;switch(a){case"auto":case"bottom":if(B>=g)return{placement:"bottom",maxHeight:t};if(_>=g&&!i)return s&&b_(c,F,D),{placement:"bottom",maxHeight:t};if(!i&&_>=n||i&&B>=n)return s&&b_(c,F,D),{placement:"bottom",maxHeight:i?B-N:_-N};if(a==="auto"||i){var I=t,U=i?S:w;return U>=n&&(I=Math.min(U-N-o,t)),{placement:"top",maxHeight:I}}if(a==="bottom")return s&&yN(c,F),{placement:"bottom",maxHeight:t};break;case"top":if(S>=g)return{placement:"top",maxHeight:t};if(w>=g&&!i)return s&&b_(c,M,D),{placement:"top",maxHeight:t};if(!i&&w>=n||i&&S>=n){var P=t;return(!i&&w>=n||i&&S>=n)&&(P=i?S-T:w-T),s&&b_(c,M,D),{placement:"top",maxHeight:P}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(a,'".'))}return u}var hX,gde=function(e){return e==="auto"?"bottom":e},vde=k.createContext(null),ddt=function(e){var t=e.children,r=e.minMenuHeight,n=e.maxMenuHeight,a=e.menuPlacement,s=e.menuPosition,i=e.menuShouldScrollIntoView,o=e.theme,c=(k.useContext(vde)||{}).setPortalPlacement,u=k.useRef(null),d=Qi(k.useState(n),2),f=d[0],h=d[1],p=Qi(k.useState(null),2),g=p[0],v=p[1],b=o.spacing.controlHeight;return GO(function(){var y=u.current;if(y){var C=s==="fixed",N=udt({maxHeight:n,menuEl:y,minHeight:r,placement:a,shouldScroll:i&&!C,isFixedPosition:C,controlHeight:b});h(N.maxHeight),v(N.placement),c==null||c(N.placement)}},[n,a,s,i,r,c,b]),t({ref:u,placerProps:wr(wr({},e),{},{placement:g||gde(a),maxHeight:f})})},Adt=function(e){var t=e.children,r=e.innerRef,n=e.innerProps;return Br("div",Dr({},Cs(e,"menu",{menu:!0}),{ref:r},n),t)},xde=function(e,t){var r=e.theme,n=r.spacing.baseUnit,a=r.colors;return wr({textAlign:"center"},t?{}:{color:a.neutral40,padding:"".concat(2*n,"px ").concat(3*n,"px")})},fdt=xde,hdt=xde,mdt=["size"],pdt=["innerProps","isRtl","size"],kI,BI,gdt={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},bde=function(e){var t=e.size,r=OA(e,mdt);return Br("svg",Dr({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:gdt},r))},TI=function(e){return Br(bde,Dr({size:20},e),Br("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},mX=function(e){return Br(bde,Dr({size:20},e),Br("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},yde=function(e,t){var r=e.isFocused,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return wr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*a,":hover":{color:r?s.neutral80:s.neutral40}})},vdt=yde,xdt=yde,bdt=function(){var e=nM.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(hX||(kI=[`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`],BI||(BI=kI.slice(0)),hX=Object.freeze(Object.defineProperties(kI,{raw:{value:Object.freeze(BI)}})))),jI=function(e){var t=e.delay,r=e.offset;return Br("span",{css:nM({animation:"".concat(bdt," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},ydt=function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.innerRef,s=e.innerProps,i=e.menuIsOpen;return Br("div",Dr({ref:a},Cs(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":n,"control--menu-is-open":i}),s,{"aria-disabled":r||void 0}),t)},wdt=["data"],Edt=function(e){var t=e.children,r=e.cx,n=e.getStyles,a=e.getClassNames,s=e.Heading,i=e.headingProps,o=e.innerProps,c=e.label,u=e.theme,d=e.selectProps;return Br("div",Dr({},Cs(e,"group",{group:!0}),o),Br(s,Dr({},i,{selectProps:d,theme:u,getStyles:n,getClassNames:a,cx:r}),c),Br("div",null,t))},Cdt=["innerRef","isDisabled","isHidden","inputClassName"],wde={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},_dt={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":wr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},wde)},Sdt=function(e){return wr({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},wde)},pX=function(e){var t=e.children,r=e.innerProps;return Br("div",r,t)},Ndt=function(e){var t=e.children,r=e.components,n=e.data,a=e.innerProps,s=e.isDisabled,i=e.removeProps,o=e.selectProps,c=r.Container,u=r.Label,d=r.Remove;return Br(c,{data:n,innerProps:wr(wr({},Cs(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":s})),a),selectProps:o},Br(u,{data:n,innerProps:wr({},Cs(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:o},t),Br(d,{data:n,innerProps:wr(wr({},Cs(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},i),selectProps:o}))},kdt={ClearIndicator:function(e){var t=e.children,r=e.innerProps;return Br("div",Dr({},Cs(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),t||Br(TI,null))},Control:ydt,DropdownIndicator:function(e){var t=e.children,r=e.innerProps;return Br("div",Dr({},Cs(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),t||Br(mX,null))},DownChevron:mX,CrossIcon:TI,Group:Edt,GroupHeading:function(e){var t=dX(e);t.data;var r=OA(t,wdt);return Br("div",Dr({},Cs(e,"groupHeading",{"group-heading":!0}),r))},IndicatorsContainer:function(e){var t=e.children,r=e.innerProps;return Br("div",Dr({},Cs(e,"indicatorsContainer",{indicators:!0}),r),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Br("span",Dr({},t,Cs(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,r=e.value,n=dX(e),a=n.innerRef,s=n.isDisabled,i=n.isHidden,o=n.inputClassName,c=OA(n,Cdt);return Br("div",Dr({},Cs(e,"input",{"input-container":!0}),{"data-value":r||""}),Br("input",Dr({className:t({input:!0},o),ref:a,style:Sdt(i),disabled:s},c)))},LoadingIndicator:function(e){var t=e.innerProps,r=e.isRtl,n=e.size,a=n===void 0?4:n,s=OA(e,pdt);return Br("div",Dr({},Cs(wr(wr({},s),{},{innerProps:t,isRtl:r,size:a}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Br(jI,{delay:0,offset:r}),Br(jI,{delay:160,offset:!0}),Br(jI,{delay:320,offset:!r}))},Menu:Adt,MenuList:function(e){var t=e.children,r=e.innerProps,n=e.innerRef,a=e.isMulti;return Br("div",Dr({},Cs(e,"menuList",{"menu-list":!0,"menu-list--is-multi":a}),{ref:n},r),t)},MenuPortal:function(e){var t=e.appendTo,r=e.children,n=e.controlElement,a=e.innerProps,s=e.menuPlacement,i=e.menuPosition,o=k.useRef(null),c=k.useRef(null),u=Qi(k.useState(gde(s)),2),d=u[0],f=u[1],h=k.useMemo(function(){return{setPortalPlacement:f}},[]),p=Qi(k.useState(null),2),g=p[0],v=p[1],b=k.useCallback(function(){if(n){var T=function(w){var _=w.getBoundingClientRect();return{bottom:_.bottom,height:_.height,left:_.left,right:_.right,top:_.top,width:_.width}}(n),S=i==="fixed"?0:window.pageYOffset,B=T[d]+S;B===(g==null?void 0:g.offset)&&T.left===(g==null?void 0:g.rect.left)&&T.width===(g==null?void 0:g.rect.width)||v({offset:B,rect:T})}},[n,i,d,g==null?void 0:g.offset,g==null?void 0:g.rect.left,g==null?void 0:g.rect.width]);GO(function(){b()},[b]);var y=k.useCallback(function(){typeof c.current=="function"&&(c.current(),c.current=null),n&&o.current&&(c.current=function(T,S,B,w){w===void 0&&(w={});const{ancestorScroll:_=!0,ancestorResize:F=!0,elementResize:M=!0,animationFrame:D=!1}=w,I=_&&!D,U=I||F?[...fS(T)?hS(T):T.contextElement?hS(T.contextElement):[],...hS(S)]:[];U.forEach(Y=>{I&&Y.addEventListener("scroll",B,{passive:!0}),F&&Y.addEventListener("resize",B)});let P,X=null;if(M){let Y=!0;X=new ResizeObserver(()=>{Y||B(),Y=!1}),fS(T)&&!D&&X.observe(T),fS(T)||!T.contextElement||D||X.observe(T.contextElement),X.observe(S)}let H=D?cX(T):null;return D&&function Y(){const V=cX(T);!H||V.x===H.x&&V.y===H.y&&V.width===H.width&&V.height===H.height||B(),H=V,P=requestAnimationFrame(Y)}(),B(),()=>{var Y;U.forEach(V=>{I&&V.removeEventListener("scroll",B),F&&V.removeEventListener("resize",B)}),(Y=X)==null||Y.disconnect(),X=null,D&&cancelAnimationFrame(P)}}(n,o.current,b,{elementResize:"ResizeObserver"in window}))},[n,b]);GO(function(){y()},[y]);var C=k.useCallback(function(T){o.current=T,y()},[y]);if(!t&&i!=="fixed"||!g)return null;var N=Br("div",Dr({ref:C},Cs(wr(wr({},e),{},{offset:g.offset,position:i,rect:g.rect}),"menuPortal",{"menu-portal":!0}),a),r);return Br(vde.Provider,{value:h},t?NR.createPortal(N,t):N)},LoadingMessage:function(e){var t=e.children,r=t===void 0?"Loading...":t,n=e.innerProps,a=OA(e,cdt);return Br("div",Dr({},Cs(wr(wr({},a),{},{children:r,innerProps:n}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),r)},NoOptionsMessage:function(e){var t=e.children,r=t===void 0?"No options":t,n=e.innerProps,a=OA(e,ldt);return Br("div",Dr({},Cs(wr(wr({},a),{},{children:r,innerProps:n}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),r)},MultiValue:Ndt,MultiValueContainer:pX,MultiValueLabel:pX,MultiValueRemove:function(e){var t=e.children,r=e.innerProps;return Br("div",Dr({role:"button"},r),t||Br(TI,{size:14}))},Option:function(e){var t=e.children,r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.innerRef,i=e.innerProps;return Br("div",Dr({},Cs(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":n,"option--is-selected":a}),{ref:s,"aria-disabled":r},i),t)},Placeholder:function(e){var t=e.children,r=e.innerProps;return Br("div",Dr({},Cs(e,"placeholder",{placeholder:!0}),r),t)},SelectContainer:function(e){var t=e.children,r=e.innerProps,n=e.isDisabled,a=e.isRtl;return Br("div",Dr({},Cs(e,"container",{"--is-disabled":n,"--is-rtl":a}),r),t)},SingleValue:function(e){var t=e.children,r=e.isDisabled,n=e.innerProps;return Br("div",Dr({},Cs(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),n),t)},ValueContainer:function(e){var t=e.children,r=e.innerProps,n=e.isMulti,a=e.hasValue;return Br("div",Dr({},Cs(e,"valueContainer",{"value-container":!0,"value-container--is-multi":n,"value-container--has-value":a}),r),t)}},gX=Number.isNaN||function(e){return typeof e=="number"&&e!=e};function Bdt(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(n=e[r],a=t[r],!(n===a||gX(n)&&gX(a)))return!1;var n,a;return!0}for(var Tdt={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},vX=function(e){return Br("span",Dr({css:Tdt},e))},jdt={guidance:function(e){var t=e.isSearchable,r=e.isMulti,n=e.tabSelectsValue,a=e.context,s=e.isInitialFocus;switch(a){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(n?", press Tab to select the option and exit the menu":"",".");case"input":return s?"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,r=e.label,n=r===void 0?"":r,a=e.labels,s=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(n,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(a.length>1?"s":""," ").concat(a.join(","),", selected.");case"select-option":return"option ".concat(n,s?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,r=e.focused,n=e.options,a=e.label,s=a===void 0?"":a,i=e.selectValue,o=e.isDisabled,c=e.isSelected,u=e.isAppleDevice,d=function(p,g){return p&&p.length?"".concat(p.indexOf(g)+1," of ").concat(p.length):""};if(t==="value"&&i)return"value ".concat(s," focused, ").concat(d(i,r),".");if(t==="menu"&&u){var f=o?" disabled":"",h="".concat(c?" selected":"").concat(f);return"".concat(s).concat(h,", ").concat(d(n,r),".")}return""},onFilter:function(e){var t=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(t?" for search term "+t:"",".")}},Idt=function(e){var t=e.ariaSelection,r=e.focusedOption,n=e.focusedValue,a=e.focusableOptions,s=e.isFocused,i=e.selectValue,o=e.selectProps,c=e.id,u=e.isAppleDevice,d=o.ariaLiveMessages,f=o.getOptionLabel,h=o.inputValue,p=o.isMulti,g=o.isOptionDisabled,v=o.isSearchable,b=o.menuIsOpen,y=o.options,C=o.screenReaderStatus,N=o.tabSelectsValue,T=o.isLoading,S=o["aria-label"],B=o["aria-live"],w=k.useMemo(function(){return wr(wr({},jdt),d||{})},[d]),_=k.useMemo(function(){var P,X="";if(t&&w.onChange){var H=t.option,Y=t.options,V=t.removedValue,z=t.removedValues,G=t.value,re=V||H||(P=G,Array.isArray(P)?null:P),R=re?f(re):"",q=Y||z||void 0,J=q?q.map(f):[],te=wr({isDisabled:re&&g(re,i),label:R,labels:J},t);X=w.onChange(te)}return X},[t,w,g,i,f]),F=k.useMemo(function(){var P="",X=r||n,H=!!(r&&i&&i.includes(r));if(X&&w.onFocus){var Y={focused:X,label:f(X),isDisabled:g(X,i),isSelected:H,options:a,context:X===r?"menu":"value",selectValue:i,isAppleDevice:u};P=w.onFocus(Y)}return P},[r,n,f,g,w,a,i,u]),M=k.useMemo(function(){var P="";if(b&&y.length&&!T&&w.onFilter){var X=C({count:a.length});P=w.onFilter({inputValue:h,resultsMessage:X})}return P},[a,h,b,w,y,C,T]),D=(t==null?void 0:t.action)==="initial-input-focus",I=k.useMemo(function(){var P="";if(w.guidance){var X=n?"value":b?"menu":"input";P=w.guidance({"aria-label":S,context:X,isDisabled:r&&g(r,i),isMulti:p,isSearchable:v,tabSelectsValue:N,isInitialFocus:D})}return P},[S,r,n,p,g,v,b,w,i,N,D]),U=Br(k.Fragment,null,Br("span",{id:"aria-selection"},_),Br("span",{id:"aria-focused"},F),Br("span",{id:"aria-results"},M),Br("span",{id:"aria-guidance"},I));return Br(k.Fragment,null,Br(vX,{id:c},D&&U),Br(vX,{"aria-live":B,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},s&&!D&&U))},II=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],Fdt=new RegExp("["+II.map(function(e){return e.letters}).join("")+"]","g"),Ede={},FI=0;FI<II.length;FI++)for(var OI=II[FI],DI=0;DI<OI.letters.length;DI++)Ede[OI.letters[DI]]=OI.base;var Cde=function(e){return e.replace(Fdt,function(t){return Ede[t]})},Odt=function(e,t){t===void 0&&(t=Bdt);var r=null;function n(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;var i=e.apply(this,a);return r={lastResult:i,lastArgs:a,lastThis:this},i}return n.clear=function(){r=null},n}(Cde),xX=function(e){return e.replace(/^\s+|\s+$/g,"")},Ddt=function(e){return"".concat(e.label," ").concat(e.value)},Pdt=["innerRef"];function Rdt(e){var t=e.innerRef,r=function(n){for(var a=arguments.length,s=new Array(a>1?a-1:0),i=1;i<a;i++)s[i-1]=arguments[i];var o=Object.entries(n).filter(function(c){var u=Qi(c,1)[0];return!s.includes(u)});return o.reduce(function(c,u){var d=Qi(u,2),f=d[0],h=d[1];return c[f]=h,c},{})}(OA(e,Pdt),"onExited","in","enter","exit","appear");return Br("input",Dr({ref:t},r,{css:nM({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var bX=["boxSizing","height","overflow","paddingRight","position"],yX={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function wX(e){e.preventDefault()}function EX(e){e.stopPropagation()}function CX(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function _X(){return"ontouchstart"in window||navigator.maxTouchPoints}var SX=!(typeof window>"u"||!window.document||!window.document.createElement),ry=0,Iv={capture:!1,passive:!1},Ldt=function(e){var t=e.target;return t.ownerDocument.activeElement&&t.ownerDocument.activeElement.blur()},Mdt={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function Udt(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,a=function(i){var o=i.isEnabled,c=i.onBottomArrive,u=i.onBottomLeave,d=i.onTopArrive,f=i.onTopLeave,h=k.useRef(!1),p=k.useRef(!1),g=k.useRef(0),v=k.useRef(null),b=k.useCallback(function(B,w){if(v.current!==null){var _=v.current,F=_.scrollTop,M=_.scrollHeight,D=_.clientHeight,I=v.current,U=w>0,P=M-D-F,X=!1;P>w&&h.current&&(u&&u(B),h.current=!1),U&&p.current&&(f&&f(B),p.current=!1),U&&w>P?(c&&!h.current&&c(B),I.scrollTop=M,X=!0,h.current=!0):!U&&-w>F&&(d&&!p.current&&d(B),I.scrollTop=0,X=!0,p.current=!0),X&&function(H){H.cancelable&&H.preventDefault(),H.stopPropagation()}(B)}},[c,u,d,f]),y=k.useCallback(function(B){b(B,B.deltaY)},[b]),C=k.useCallback(function(B){g.current=B.changedTouches[0].clientY},[]),N=k.useCallback(function(B){var w=g.current-B.changedTouches[0].clientY;b(B,w)},[b]),T=k.useCallback(function(B){if(B){var w=!!idt&&{passive:!1};B.addEventListener("wheel",y,w),B.addEventListener("touchstart",C,w),B.addEventListener("touchmove",N,w)}},[N,C,y]),S=k.useCallback(function(B){B&&(B.removeEventListener("wheel",y,!1),B.removeEventListener("touchstart",C,!1),B.removeEventListener("touchmove",N,!1))},[N,C,y]);return k.useEffect(function(){if(o){var B=v.current;return T(B),function(){S(B)}}},[o,T,S]),function(B){v.current=B}}({isEnabled:n===void 0||n,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(i){var o=i.isEnabled,c=i.accountForScrollbars,u=c===void 0||c,d=k.useRef({}),f=k.useRef(null),h=k.useCallback(function(g){if(SX){var v=document.body,b=v&&v.style;if(u&&bX.forEach(function(T){var S=b&&b[T];d.current[T]=S}),u&&ry<1){var y=parseInt(d.current.paddingRight,10)||0,C=document.body?document.body.clientWidth:0,N=window.innerWidth-C+y||0;Object.keys(yX).forEach(function(T){var S=yX[T];b&&(b[T]=S)}),b&&(b.paddingRight="".concat(N,"px"))}v&&_X()&&(v.addEventListener("touchmove",wX,Iv),g&&(g.addEventListener("touchstart",CX,Iv),g.addEventListener("touchmove",EX,Iv))),ry+=1}},[u]),p=k.useCallback(function(g){if(SX){var v=document.body,b=v&&v.style;ry=Math.max(ry-1,0),u&&ry<1&&bX.forEach(function(y){var C=d.current[y];b&&(b[y]=C)}),v&&_X()&&(v.removeEventListener("touchmove",wX,Iv),g&&(g.removeEventListener("touchstart",CX,Iv),g.removeEventListener("touchmove",EX,Iv)))}},[u]);return k.useEffect(function(){if(o){var g=f.current;return h(g),function(){p(g)}}},[o,h,p]),function(g){f.current=g}}({isEnabled:r});return Br(k.Fragment,null,r&&Br("div",{onClick:Ldt,css:Mdt}),t(function(i){a(i),s(i)}))}var Qdt={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},Hdt=function(e){var t=e.name,r=e.onFocus;return Br("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:Qdt,value:"",onChange:function(){}})};function KO(e){var t;return typeof window<"u"&&window.navigator!=null&&e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform)}function _de(){return KO(/^Mac/i)}function Vdt(){return KO(/^iPhone/i)||KO(/^iPad/i)||_de()&&navigator.maxTouchPoints>1}var zdt,$dt={clearIndicator:xdt,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.theme,s=a.colors,i=a.borderRadius;return wr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:a.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:r?s.neutral5:s.neutral0,borderColor:r?s.neutral10:n?s.primary:s.neutral20,borderRadius:i,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px ".concat(s.primary):void 0,"&:hover":{borderColor:n?s.primary:s.neutral30}})},dropdownIndicator:vdt,group:function(e,t){var r=e.theme.spacing;return t?{}:{paddingBottom:2*r.baseUnit,paddingTop:2*r.baseUnit}},groupHeading:function(e,t){var r=e.theme,n=r.colors,a=r.spacing;return wr({label:"group",cursor:"default",display:"block"},t?{}:{color:n.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*a.baseUnit,paddingRight:3*a.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing.baseUnit,s=n.colors;return wr({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:r?s.neutral10:s.neutral20,marginBottom:2*a,marginTop:2*a})},input:function(e,t){var r=e.isDisabled,n=e.value,a=e.theme,s=a.spacing,i=a.colors;return wr(wr({visibility:r?"hidden":"visible",transform:n?"translateZ(0)":""},_dt),t?{}:{margin:s.baseUnit/2,paddingBottom:s.baseUnit/2,paddingTop:s.baseUnit/2,color:i.neutral80})},loadingIndicator:function(e,t){var r=e.isFocused,n=e.size,a=e.theme,s=a.colors,i=a.spacing.baseUnit;return wr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"},t?{}:{color:r?s.neutral60:s.neutral20,padding:2*i})},loadingMessage:hdt,menu:function(e,t){var r,n=e.placement,a=e.theme,s=a.borderRadius,i=a.spacing,o=a.colors;return wr((rx(r={label:"menu"},function(c){return c?{bottom:"top",top:"bottom"}[c]:"bottom"}(n),"100%"),rx(r,"position","absolute"),rx(r,"width","100%"),rx(r,"zIndex",1),r),t?{}:{backgroundColor:o.neutral0,borderRadius:s,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:i.menuGutter,marginTop:i.menuGutter})},menuList:function(e,t){var r=e.maxHeight,n=e.theme.spacing.baseUnit;return wr({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:n,paddingTop:n})},menuPortal:function(e){var t=e.rect,r=e.offset,n=e.position;return{left:t.left,position:n,top:r,width:t.width,zIndex:1}},multiValue:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors;return wr({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:s.neutral10,borderRadius:a/2,margin:n.baseUnit/2})},multiValueLabel:function(e,t){var r=e.theme,n=r.borderRadius,a=r.colors,s=e.cropWithEllipsis;return wr({overflow:"hidden",textOverflow:s||s===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:n/2,color:a.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var r=e.theme,n=r.spacing,a=r.borderRadius,s=r.colors,i=e.isFocused;return wr({alignItems:"center",display:"flex"},t?{}:{borderRadius:a/2,backgroundColor:i?s.dangerLight:void 0,paddingLeft:n.baseUnit,paddingRight:n.baseUnit,":hover":{backgroundColor:s.dangerLight,color:s.danger}})},noOptionsMessage:fdt,option:function(e,t){var r=e.isDisabled,n=e.isFocused,a=e.isSelected,s=e.theme,i=s.spacing,o=s.colors;return wr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:a?o.primary:n?o.primary25:"transparent",color:r?o.neutral20:a?o.neutral0:"inherit",padding:"".concat(2*i.baseUnit,"px ").concat(3*i.baseUnit,"px"),":active":{backgroundColor:r?void 0:a?o.primary:o.primary50}})},placeholder:function(e,t){var r=e.theme,n=r.spacing,a=r.colors;return wr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:a.neutral50,marginLeft:n.baseUnit/2,marginRight:n.baseUnit/2})},singleValue:function(e,t){var r=e.isDisabled,n=e.theme,a=n.spacing,s=n.colors;return wr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:r?s.neutral40:s.neutral80,marginLeft:a.baseUnit/2,marginRight:a.baseUnit/2})},valueContainer:function(e,t){var r=e.theme.spacing,n=e.isMulti,a=e.hasValue,s=e.selectProps.controlShouldRenderValue;return wr({alignItems:"center",display:n&&a&&s?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(2*r.baseUnit,"px")})}},PI={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},Gdt={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:fX(),captureMenuScroll:!fX(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var r=wr({ignoreCase:!0,ignoreAccents:!0,stringify:Ddt,trim:!0,matchFrom:"any"},zdt),n=r.ignoreCase,a=r.ignoreAccents,s=r.stringify,i=r.trim,o=r.matchFrom,c=i?xX(t):t,u=i?xX(s(e)):s(e);return n&&(c=c.toLowerCase(),u=u.toLowerCase()),a&&(c=Odt(c),u=Cde(u)),o==="start"?u.substr(0,c.length)===c:u.indexOf(c)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(t!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function NX(e,t,r,n){return{type:"option",data:t,isDisabled:Nde(e,t,r),isSelected:kde(e,t,r),label:Sde(e,t),value:wN(e,t),index:n}}function E_(e,t){return e.options.map(function(r,n){if("options"in r){var a=r.options.map(function(i,o){return NX(e,i,t,o)}).filter(function(i){return TX(e,i)});return a.length>0?{type:"group",data:r,options:a,index:n}:void 0}var s=NX(e,r,t,n);return TX(e,s)?s:void 0}).filter(odt)}function kX(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,X8(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function BX(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,X8(n.options.map(function(a){return{data:a.data,id:"".concat(t,"-").concat(n.index,"-").concat(a.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function TX(e,t){var r=e.inputValue,n=r===void 0?"":r,a=t.data,s=t.isSelected,i=t.label,o=t.value;return(!Tde(e)||!s)&&Bde(e,{label:i,value:o,data:a},n)}var RI=function(e,t){var r;return((r=e.find(function(n){return n.data===t}))===null||r===void 0?void 0:r.id)||null},Sde=function(e,t){return e.getOptionLabel(t)},wN=function(e,t){return e.getOptionValue(t)};function Nde(e,t,r){return typeof e.isOptionDisabled=="function"&&e.isOptionDisabled(t,r)}function kde(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=wN(e,t);return r.some(function(a){return wN(e,a)===n})}function Bde(e,t,r){return!e.filterOption||e.filterOption(t,r)}var Tde=function(e){var t=e.hideSelectedOptions,r=e.isMulti;return t===void 0?r:t},Kdt=1,jde=function(e){(function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),o&&RO(i,o)})(s,k.Component);var t,r,n,a=but(s);function s(i){var o;if(function(f,h){if(!(f instanceof h))throw new TypeError("Cannot call a class as a function")}(this,s),(o=a.call(this,i)).state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:""},o.blockOptionHover=!1,o.isComposing=!1,o.commonProps=void 0,o.initialTouchX=0,o.initialTouchY=0,o.openAfterFocus=!1,o.scrollToFocusedOptionOnUpdate=!1,o.userIsDragging=void 0,o.isAppleDevice=_de()||Vdt(),o.controlRef=null,o.getControlRef=function(f){o.controlRef=f},o.focusedOptionRef=null,o.getFocusedOptionRef=function(f){o.focusedOptionRef=f},o.menuListRef=null,o.getMenuListRef=function(f){o.menuListRef=f},o.inputRef=null,o.getInputRef=function(f){o.inputRef=f},o.focus=o.focusInput,o.blur=o.blurInput,o.onChange=function(f,h){var p=o.props,g=p.onChange,v=p.name;h.name=v,o.ariaOnChange(f,h),g(f,h)},o.setValue=function(f,h,p){var g=o.props,v=g.closeMenuOnSelect,b=g.isMulti,y=g.inputValue;o.onInputChange("",{action:"set-value",prevInputValue:y}),v&&(o.setState({inputIsHiddenAfterUpdate:!b}),o.onMenuClose()),o.setState({clearFocusValueOnUpdate:!0}),o.onChange(f,{action:h,option:p})},o.selectOption=function(f){var h=o.props,p=h.blurInputOnSelect,g=h.isMulti,v=h.name,b=o.state.selectValue,y=g&&o.isOptionSelected(f,b),C=o.isOptionDisabled(f,b);if(y){var N=o.getOptionValue(f);o.setValue(b.filter(function(T){return o.getOptionValue(T)!==N}),"deselect-option",f)}else{if(C)return void o.ariaOnChange(f,{action:"select-option",option:f,name:v});g?o.setValue([].concat(X8(b),[f]),"select-option",f):o.setValue(f,"select-option")}p&&o.blurInput()},o.removeValue=function(f){var h=o.props.isMulti,p=o.state.selectValue,g=o.getOptionValue(f),v=p.filter(function(y){return o.getOptionValue(y)!==g}),b=w_(h,v,v[0]||null);o.onChange(b,{action:"remove-value",removedValue:f}),o.focusInput()},o.clearValue=function(){var f=o.state.selectValue;o.onChange(w_(o.props.isMulti,[],null),{action:"clear",removedValues:f})},o.popValue=function(){var f=o.props.isMulti,h=o.state.selectValue,p=h[h.length-1],g=h.slice(0,h.length-1),v=w_(f,g,g[0]||null);o.onChange(v,{action:"pop-value",removedValue:p})},o.getFocusedOptionId=function(f){return RI(o.state.focusableOptionsWithIds,f)},o.getFocusableOptionsWithIds=function(){return BX(E_(o.props,o.state.selectValue),o.getElementId("option"))},o.getValue=function(){return o.state.selectValue},o.cx=function(){for(var f=arguments.length,h=new Array(f),p=0;p<f;p++)h[p]=arguments[p];return ndt.apply(void 0,[o.props.classNamePrefix].concat(h))},o.getOptionLabel=function(f){return Sde(o.props,f)},o.getOptionValue=function(f){return wN(o.props,f)},o.getStyles=function(f,h){var p=o.props.unstyled,g=$dt[f](h,p);g.boxSizing="border-box";var v=o.props.styles[f];return v?v(g,h):g},o.getClassNames=function(f,h){var p,g;return(p=(g=o.props.classNames)[f])===null||p===void 0?void 0:p.call(g,h)},o.getElementId=function(f){return"".concat(o.state.instancePrefix,"-").concat(f)},o.getComponents=function(){return f=o.props,wr(wr({},kdt),f.components);var f},o.buildCategorizedOptions=function(){return E_(o.props,o.state.selectValue)},o.getCategorizedOptions=function(){return o.props.menuIsOpen?o.buildCategorizedOptions():[]},o.buildFocusableOptions=function(){return kX(o.buildCategorizedOptions())},o.getFocusableOptions=function(){return o.props.menuIsOpen?o.buildFocusableOptions():[]},o.ariaOnChange=function(f,h){o.setState({ariaSelection:wr({value:f},h)})},o.onMenuMouseDown=function(f){f.button===0&&(f.stopPropagation(),f.preventDefault(),o.focusInput())},o.onMenuMouseMove=function(f){o.blockOptionHover=!1},o.onControlMouseDown=function(f){if(!f.defaultPrevented){var h=o.props.openMenuOnClick;o.state.isFocused?o.props.menuIsOpen?f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&o.onMenuClose():h&&o.openMenu("first"):(h&&(o.openAfterFocus=!0),o.focusInput()),f.target.tagName!=="INPUT"&&f.target.tagName!=="TEXTAREA"&&f.preventDefault()}},o.onDropdownIndicatorMouseDown=function(f){if(!(f&&f.type==="mousedown"&&f.button!==0||o.props.isDisabled)){var h=o.props,p=h.isMulti,g=h.menuIsOpen;o.focusInput(),g?(o.setState({inputIsHiddenAfterUpdate:!p}),o.onMenuClose()):o.openMenu("first"),f.preventDefault()}},o.onClearIndicatorMouseDown=function(f){f&&f.type==="mousedown"&&f.button!==0||(o.clearValue(),f.preventDefault(),o.openAfterFocus=!1,f.type==="touchend"?o.focusInput():setTimeout(function(){return o.focusInput()}))},o.onScroll=function(f){typeof o.props.closeMenuOnScroll=="boolean"?f.target instanceof HTMLElement&&Hk(f.target)&&o.props.onMenuClose():typeof o.props.closeMenuOnScroll=="function"&&o.props.closeMenuOnScroll(f)&&o.props.onMenuClose()},o.onCompositionStart=function(){o.isComposing=!0},o.onCompositionEnd=function(){o.isComposing=!1},o.onTouchStart=function(f){var h=f.touches,p=h&&h.item(0);p&&(o.initialTouchX=p.clientX,o.initialTouchY=p.clientY,o.userIsDragging=!1)},o.onTouchMove=function(f){var h=f.touches,p=h&&h.item(0);if(p){var g=Math.abs(p.clientX-o.initialTouchX),v=Math.abs(p.clientY-o.initialTouchY);o.userIsDragging=g>5||v>5}},o.onTouchEnd=function(f){o.userIsDragging||(o.controlRef&&!o.controlRef.contains(f.target)&&o.menuListRef&&!o.menuListRef.contains(f.target)&&o.blurInput(),o.initialTouchX=0,o.initialTouchY=0)},o.onControlTouchEnd=function(f){o.userIsDragging||o.onControlMouseDown(f)},o.onClearIndicatorTouchEnd=function(f){o.userIsDragging||o.onClearIndicatorMouseDown(f)},o.onDropdownIndicatorTouchEnd=function(f){o.userIsDragging||o.onDropdownIndicatorMouseDown(f)},o.handleInputChange=function(f){var h=o.props.inputValue,p=f.currentTarget.value;o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange(p,{action:"input-change",prevInputValue:h}),o.props.menuIsOpen||o.onMenuOpen()},o.onInputFocus=function(f){o.props.onFocus&&o.props.onFocus(f),o.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(o.openAfterFocus||o.props.openMenuOnFocus)&&o.openMenu("first"),o.openAfterFocus=!1},o.onInputBlur=function(f){var h=o.props.inputValue;o.menuListRef&&o.menuListRef.contains(document.activeElement)?o.inputRef.focus():(o.props.onBlur&&o.props.onBlur(f),o.onInputChange("",{action:"input-blur",prevInputValue:h}),o.onMenuClose(),o.setState({focusedValue:null,isFocused:!1}))},o.onOptionHover=function(f){if(!o.blockOptionHover&&o.state.focusedOption!==f){var h=o.getFocusableOptions().indexOf(f);o.setState({focusedOption:f,focusedOptionId:h>-1?o.getFocusedOptionId(f):null})}},o.shouldHideSelectedOptions=function(){return Tde(o.props)},o.onValueInputFocus=function(f){f.preventDefault(),f.stopPropagation(),o.focus()},o.onKeyDown=function(f){var h=o.props,p=h.isMulti,g=h.backspaceRemovesValue,v=h.escapeClearsValue,b=h.inputValue,y=h.isClearable,C=h.isDisabled,N=h.menuIsOpen,T=h.onKeyDown,S=h.tabSelectsValue,B=h.openMenuOnFocus,w=o.state,_=w.focusedOption,F=w.focusedValue,M=w.selectValue;if(!(C||typeof T=="function"&&(T(f),f.defaultPrevented))){switch(o.blockOptionHover=!0,f.key){case"ArrowLeft":if(!p||b)return;o.focusValue("previous");break;case"ArrowRight":if(!p||b)return;o.focusValue("next");break;case"Delete":case"Backspace":if(b)return;if(F)o.removeValue(F);else{if(!g)return;p?o.popValue():y&&o.clearValue()}break;case"Tab":if(o.isComposing||f.shiftKey||!N||!S||!_||B&&o.isOptionSelected(_,M))return;o.selectOption(_);break;case"Enter":if(f.keyCode===229)break;if(N){if(!_||o.isComposing)return;o.selectOption(_);break}return;case"Escape":N?(o.setState({inputIsHiddenAfterUpdate:!1}),o.onInputChange("",{action:"menu-close",prevInputValue:b}),o.onMenuClose()):y&&v&&o.clearValue();break;case" ":if(b)return;if(!N){o.openMenu("first");break}if(!_)return;o.selectOption(_);break;case"ArrowUp":N?o.focusOption("up"):o.openMenu("last");break;case"ArrowDown":N?o.focusOption("down"):o.openMenu("first");break;case"PageUp":if(!N)return;o.focusOption("pageup");break;case"PageDown":if(!N)return;o.focusOption("pagedown");break;case"Home":if(!N)return;o.focusOption("first");break;case"End":if(!N)return;o.focusOption("last");break;default:return}f.preventDefault()}},o.state.instancePrefix="react-select-"+(o.props.instanceId||++Kdt),o.state.selectValue=uX(i.value),i.menuIsOpen&&o.state.selectValue.length){var c=o.getFocusableOptionsWithIds(),u=o.buildFocusableOptions(),d=u.indexOf(o.state.selectValue[0]);o.state.focusableOptionsWithIds=c,o.state.focusedOption=u[d],o.state.focusedOptionId=RI(c,u[d])}return o}return t=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&AX(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(i){var o=this.props,c=o.isDisabled,u=o.menuIsOpen,d=this.state.isFocused;(d&&!c&&i.isDisabled||d&&u&&!i.menuIsOpen)&&this.focusInput(),d&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):d||c||!i.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(AX(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,c=this.state,u=c.selectValue,d=c.isFocused,f=this.buildFocusableOptions(),h=i==="first"?0:f.length-1;if(!this.props.isMulti){var p=f.indexOf(u[0]);p>-1&&(h=p)}this.scrollToFocusedOptionOnUpdate=!(d&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:f[h],focusedOptionId:this.getFocusedOptionId(f[h])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,c=o.selectValue,u=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var d=c.indexOf(u);u||(d=-1);var f=c.length-1,h=-1;if(c.length){switch(i){case"previous":h=d===0?0:d===-1?f:d-1;break;case"next":d>-1&&d<f&&(h=d+1)}this.setState({inputIsHidden:h!==-1,focusedValue:c[h]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,c=this.state.focusedOption,u=this.getFocusableOptions();if(u.length){var d=0,f=u.indexOf(c);c||(f=-1),i==="up"?d=f>0?f-1:u.length-1:i==="down"?d=(f+1)%u.length:i==="pageup"?(d=f-o)<0&&(d=0):i==="pagedown"?(d=f+o)>u.length-1&&(d=u.length-1):i==="last"&&(d=u.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:u[d],focusedValue:null,focusedOptionId:this.getFocusedOptionId(u[d])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(PI):wr(wr({},PI),this.props.theme):PI}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,c=this.getStyles,u=this.getClassNames,d=this.getValue,f=this.selectOption,h=this.setValue,p=this.props,g=p.isMulti,v=p.isRtl,b=p.options;return{clearValue:i,cx:o,getStyles:c,getClassNames:u,getValue:d,hasValue:this.hasValue(),isMulti:g,isRtl:v,options:b,selectOption:f,selectProps:p,setValue:h,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,c=i.isMulti;return o===void 0?c:o}},{key:"isOptionDisabled",value:function(i,o){return Nde(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return kde(this.props,i,o)}},{key:"filterOption",value:function(i,o){return Bde(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,u=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:c,selectValue:u})}return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,c=i.isSearchable,u=i.inputId,d=i.inputValue,f=i.tabIndex,h=i.form,p=i.menuIsOpen,g=i.required,v=this.getComponents().Input,b=this.state,y=b.inputIsHidden,C=b.ariaSelection,N=this.commonProps,T=u||this.getElementId("input"),S=wr(wr(wr({"aria-autocomplete":"list","aria-expanded":p,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":g,role:"combobox","aria-activedescendant":this.isAppleDevice?void 0:this.state.focusedOptionId||""},p&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(C==null?void 0:C.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?k.createElement(v,Dr({},N,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:T,innerRef:this.getInputRef,isDisabled:o,isHidden:y,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:f,form:h,type:"text",value:d},S)):k.createElement(Rdt,Dr({id:T,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:bN,onFocus:this.onInputFocus,disabled:o,tabIndex:f,inputMode:"none",form:h,value:""},S))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),c=o.MultiValue,u=o.MultiValueContainer,d=o.MultiValueLabel,f=o.MultiValueRemove,h=o.SingleValue,p=o.Placeholder,g=this.commonProps,v=this.props,b=v.controlShouldRenderValue,y=v.isDisabled,C=v.isMulti,N=v.inputValue,T=v.placeholder,S=this.state,B=S.selectValue,w=S.focusedValue,_=S.isFocused;if(!this.hasValue()||!b)return N?null:k.createElement(p,Dr({},g,{key:"placeholder",isDisabled:y,isFocused:_,innerProps:{id:this.getElementId("placeholder")}}),T);if(C)return B.map(function(M,D){var I=M===w,U="".concat(i.getOptionLabel(M),"-").concat(i.getOptionValue(M));return k.createElement(c,Dr({},g,{components:{Container:u,Label:d,Remove:f},isFocused:I,isDisabled:y,key:U,index:D,removeProps:{onClick:function(){return i.removeValue(M)},onTouchEnd:function(){return i.removeValue(M)},onMouseDown:function(P){P.preventDefault()}},data:M}),i.formatOptionLabel(M,"value"))});if(N)return null;var F=B[0];return k.createElement(h,Dr({},g,{data:F,isDisabled:y}),this.formatOptionLabel(F,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents().ClearIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;if(!this.isClearable()||!i||u||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return k.createElement(i,Dr({},o,{innerProps:h,isFocused:f}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents().LoadingIndicator,o=this.commonProps,c=this.props,u=c.isDisabled,d=c.isLoading,f=this.state.isFocused;return i&&d?k.createElement(i,Dr({},o,{innerProps:{"aria-hidden":"true"},isDisabled:u,isFocused:f})):null}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,c=i.IndicatorSeparator;if(!o||!c)return null;var u=this.commonProps,d=this.props.isDisabled,f=this.state.isFocused;return k.createElement(c,Dr({},u,{isDisabled:d,isFocused:f}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents().DropdownIndicator;if(!i)return null;var o=this.commonProps,c=this.props.isDisabled,u=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return k.createElement(i,Dr({},o,{innerProps:d,isDisabled:c,isFocused:u}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),c=o.Group,u=o.GroupHeading,d=o.Menu,f=o.MenuList,h=o.MenuPortal,p=o.LoadingMessage,g=o.NoOptionsMessage,v=o.Option,b=this.commonProps,y=this.state.focusedOption,C=this.props,N=C.captureMenuScroll,T=C.inputValue,S=C.isLoading,B=C.loadingMessage,w=C.minMenuHeight,_=C.maxMenuHeight,F=C.menuIsOpen,M=C.menuPlacement,D=C.menuPosition,I=C.menuPortalTarget,U=C.menuShouldBlockScroll,P=C.menuShouldScrollIntoView,X=C.noOptionsMessage,H=C.onMenuScrollToTop,Y=C.onMenuScrollToBottom;if(!F)return null;var V,z=function(J,te){var ie=J.type,Ae=J.data,oe=J.isDisabled,ce=J.isSelected,pe=J.label,Ie=J.value,ne=y===Ae,Se=oe?void 0:function(){return i.onOptionHover(Ae)},De=oe?void 0:function(){return i.selectOption(Ae)},_e="".concat(i.getElementId("option"),"-").concat(te),he={id:_e,onClick:De,onMouseMove:Se,onMouseOver:Se,tabIndex:-1,role:"option","aria-selected":i.isAppleDevice?void 0:ce};return k.createElement(v,Dr({},b,{innerProps:he,data:Ae,isDisabled:oe,isSelected:ce,key:_e,label:pe,type:ie,value:Ie,isFocused:ne,innerRef:ne?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(J.data,"menu"))};if(this.hasOptions())V=this.getCategorizedOptions().map(function(J){if(J.type==="group"){var te=J.data,ie=J.options,Ae=J.index,oe="".concat(i.getElementId("group"),"-").concat(Ae),ce="".concat(oe,"-heading");return k.createElement(c,Dr({},b,{key:oe,data:te,options:ie,Heading:u,headingProps:{id:ce,data:J.data},label:i.formatGroupLabel(J.data)}),J.options.map(function(pe){return z(pe,"".concat(Ae,"-").concat(pe.index))}))}if(J.type==="option")return z(J,"".concat(J.index))});else if(S){var G=B({inputValue:T});if(G===null)return null;V=k.createElement(p,b,G)}else{var re=X({inputValue:T});if(re===null)return null;V=k.createElement(g,b,re)}var R={minMenuHeight:w,maxMenuHeight:_,menuPlacement:M,menuPosition:D,menuShouldScrollIntoView:P},q=k.createElement(ddt,Dr({},b,R),function(J){var te=J.ref,ie=J.placerProps,Ae=ie.placement,oe=ie.maxHeight;return k.createElement(d,Dr({},b,R,{innerRef:te,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:S,placement:Ae}),k.createElement(Udt,{captureEnabled:N,onTopArrive:H,onBottomArrive:Y,lockEnabled:U},function(ce){return k.createElement(f,Dr({},b,{innerRef:function(pe){i.getMenuListRef(pe),ce(pe)},innerProps:{role:"listbox","aria-multiselectable":b.isMulti,id:i.getElementId("listbox")},isLoading:S,maxHeight:oe,focusedOption:y}),V)}))});return I||D==="fixed"?k.createElement(h,Dr({},b,{appendTo:I,controlElement:this.controlRef,menuPlacement:M,menuPosition:D}),q):q}},{key:"renderFormField",value:function(){var i=this,o=this.props,c=o.delimiter,u=o.isDisabled,d=o.isMulti,f=o.name,h=o.required,p=this.state.selectValue;if(h&&!this.hasValue()&&!u)return k.createElement(Hdt,{name:f,onFocus:this.onValueInputFocus});if(f&&!u){if(d){if(c){var g=p.map(function(y){return i.getOptionValue(y)}).join(c);return k.createElement("input",{name:f,type:"hidden",value:g})}var v=p.length>0?p.map(function(y,C){return k.createElement("input",{key:"i-".concat(C),name:f,type:"hidden",value:i.getOptionValue(y)})}):k.createElement("input",{name:f,type:"hidden",value:""});return k.createElement("div",null,v)}var b=p[0]?this.getOptionValue(p[0]):"";return k.createElement("input",{name:f,type:"hidden",value:b})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,c=o.ariaSelection,u=o.focusedOption,d=o.focusedValue,f=o.isFocused,h=o.selectValue,p=this.getFocusableOptions();return k.createElement(Idt,Dr({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:u,focusedValue:d,isFocused:f,selectValue:h,focusableOptions:p,isAppleDevice:this.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,c=i.IndicatorsContainer,u=i.SelectContainer,d=i.ValueContainer,f=this.props,h=f.className,p=f.id,g=f.isDisabled,v=f.menuIsOpen,b=this.state.isFocused,y=this.commonProps=this.getCommonProps();return k.createElement(u,Dr({},y,{className:h,innerProps:{id:p,onKeyDown:this.onKeyDown},isDisabled:g,isFocused:b}),this.renderLiveRegion(),k.createElement(o,Dr({},y,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:g,isFocused:b,menuIsOpen:v}),k.createElement(d,Dr({},y,{isDisabled:g}),this.renderPlaceholderOrValue(),this.renderInput()),k.createElement(c,Dr({},y,{isDisabled:g}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],n=[{key:"getDerivedStateFromProps",value:function(i,o){var c=o.prevProps,u=o.clearFocusValueOnUpdate,d=o.inputIsHiddenAfterUpdate,f=o.ariaSelection,h=o.isFocused,p=o.prevWasFocused,g=o.instancePrefix,v=i.options,b=i.value,y=i.menuIsOpen,C=i.inputValue,N=i.isMulti,T=uX(b),S={};if(c&&(b!==c.value||v!==c.options||y!==c.menuIsOpen||C!==c.inputValue)){var B=y?function(U,P){return kX(E_(U,P))}(i,T):[],w=y?BX(E_(i,T),"".concat(g,"-option")):[],_=u?function(U,P){var X=U.focusedValue,H=U.selectValue.indexOf(X);if(H>-1){if(P.indexOf(X)>-1)return X;if(H<P.length)return P[H]}return null}(o,T):null,F=function(U,P){var X=U.focusedOption;return X&&P.indexOf(X)>-1?X:P[0]}(o,B);S={selectValue:T,focusedOption:F,focusedOptionId:RI(w,F),focusableOptionsWithIds:w,focusedValue:_,clearFocusValueOnUpdate:!1}}var M=d!=null&&i!==c?{inputIsHidden:d,inputIsHiddenAfterUpdate:void 0}:{},D=f,I=h&&p;return h&&!I&&(D={value:w_(N,T,T[0]||null),options:T,action:"initial-input-focus"},I=!p),(f==null?void 0:f.action)==="initial-input-focus"&&(D=null),wr(wr(wr({},S),M),{},{prevProps:i,ariaSelection:D,prevWasFocused:I})}}],r&&$W(t.prototype,r),n&&$W(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}();jde.defaultProps=Gdt;var qdt=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],Wdt=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],aM=ca(function(e){function t(r){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Xdt=ca(function(e){var t=aM.default;e.exports=function(r,n){if(t(r)!=="object"||r===null)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var s=a.call(r,n||"default");if(t(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(r)},e.exports.__esModule=!0,e.exports.default=e.exports}),Ide=ca(function(e){var t=aM.default;e.exports=function(r){var n=Xdt(r,"string");return t(n)==="symbol"?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports}),Ydt=ca(function(e){e.exports=function(t,r,n){return(r=Ide(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t},e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){function t(r,n){var a=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);n&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),a.push.apply(a,s)}return a}e.exports=function(r){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?t(Object(a),!0).forEach(function(s){Ydt(r,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(a,s))})}return r},e.exports.__esModule=!0,e.exports.default=e.exports}),ca(function(e){e.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}),ca(function(e){function t(r,n){for(var a=0;a<n.length;a++){var s=n[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(r,Ide(s.key),s)}}e.exports=function(r,n,a){return n&&t(r.prototype,n),a&&t(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r},e.exports.__esModule=!0,e.exports.default=e.exports});var Jdt=ca(function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){e.exports=function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&Jdt(t,r)},e.exports.__esModule=!0,e.exports.default=e.exports});var jX=ca(function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}),Zdt=ca(function(e){e.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},e.exports.__esModule=!0,e.exports.default=e.exports}),eAt=ca(function(e){e.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},e.exports.__esModule=!0,e.exports.default=e.exports}),tAt=ca(function(e){var t=aM.default;e.exports=function(r,n){if(n&&(t(n)==="object"||typeof n=="function"))return n;if(n!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eAt(r)},e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){e.exports=function(t){var r=Zdt();return function(){var n,a=jX(t);if(r){var s=jX(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return tAt(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports});var qO=ca(function(e){e.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,a=new Array(r);n<r;n++)a[n]=t[n];return a},e.exports.__esModule=!0,e.exports.default=e.exports}),rAt=ca(function(e){e.exports=function(t){if(Array.isArray(t))return qO(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),nAt=ca(function(e){e.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},e.exports.__esModule=!0,e.exports.default=e.exports}),Fde=ca(function(e){e.exports=function(t,r){if(t){if(typeof t=="string")return qO(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qO(t,r):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports}),aAt=ca(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){e.exports=function(t){return rAt(t)||nAt(t)||Fde(t)||aAt()},e.exports.__esModule=!0,e.exports.default=e.exports});var sAt=ca(function(e){e.exports=function(t){if(Array.isArray(t))return t},e.exports.__esModule=!0,e.exports.default=e.exports}),iAt=ca(function(e){e.exports=function(t,r){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var a,s,i,o,c=[],u=!0,d=!1;try{if(i=(n=n.call(t)).next,r===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(a=i.call(n)).done)&&(c.push(a.value),c.length!==r);u=!0);}catch(f){d=!0,s=f}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw s}}return c}},e.exports.__esModule=!0,e.exports.default=e.exports}),oAt=ca(function(e){e.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){e.exports=function(t,r){return sAt(t)||iAt(t,r)||Fde(t,r)||oAt()},e.exports.__esModule=!0,e.exports.default=e.exports});var lAt=ca(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||(s[n]=t[n]);return s},e.exports.__esModule=!0,e.exports.default=e.exports});ca(function(e){e.exports=function(t,r){if(t==null)return{};var n,a,s=lAt(t,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s},e.exports.__esModule=!0,e.exports.default=e.exports}),ca(function(e){e.exports=function(t,r){return r||(r=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(r)}}))},e.exports.__esModule=!0,e.exports.default=e.exports});var cAt=k.forwardRef(function(e,t){var r=function(a){var s=a.defaultOptions,i=s!==void 0&&s,o=a.cacheOptions,c=o!==void 0&&o,u=a.loadOptions;a.options;var d=a.isLoading,f=d!==void 0&&d,h=a.onInputChange,p=a.filterOption,g=p===void 0?null:p,v=OA(a,Wdt),b=v.inputValue,y=k.useRef(void 0),C=k.useRef(!1),N=Qi(k.useState(Array.isArray(i)?i:void 0),2),T=N[0],S=N[1],B=Qi(k.useState(b!==void 0?b:""),2),w=B[0],_=B[1],F=Qi(k.useState(i===!0),2),M=F[0],D=F[1],I=Qi(k.useState(void 0),2),U=I[0],P=I[1],X=Qi(k.useState([]),2),H=X[0],Y=X[1],V=Qi(k.useState(!1),2),z=V[0],G=V[1],re=Qi(k.useState({}),2),R=re[0],q=re[1],J=Qi(k.useState(void 0),2),te=J[0],ie=J[1],Ae=Qi(k.useState(void 0),2),oe=Ae[0],ce=Ae[1];c!==oe&&(q({}),ce(c)),i!==te&&(S(Array.isArray(i)?i:void 0),ie(i)),k.useEffect(function(){return C.current=!0,function(){C.current=!1}},[]);var pe=k.useCallback(function(Se,De){if(!u)return De();var _e=u(Se,De);_e&&typeof _e.then=="function"&&_e.then(De,function(){return De()})},[u]);k.useEffect(function(){i===!0&&pe(w,function(Se){C.current&&(S(Se||[]),D(!!y.current))})},[]);var Ie=k.useCallback(function(Se,De){var _e=function(je,He,Xe){if(Xe){var ye=Xe(je,He);if(typeof ye=="string")return ye}return je}(Se,De,h);if(!_e)return y.current=void 0,_(""),P(""),Y([]),D(!1),void G(!1);if(c&&R[_e])_(_e),P(_e),Y(R[_e]),D(!1),G(!1);else{var he=y.current={};_(_e),D(!0),G(!U),pe(_e,function(je){C&&he===y.current&&(y.current=void 0,D(!1),P(_e),Y(je||[]),G(!1),q(je?wr(wr({},R),{},rx({},_e,je)):R))})}},[c,pe,U,R,h]),ne=z?[]:w&&U?H:T||[];return wr(wr({},v),{},{options:ne,isLoading:M||f,onInputChange:Ie,filterOption:g})}(e),n=function(a){var s=a.defaultInputValue,i=s===void 0?"":s,o=a.defaultMenuIsOpen,c=o!==void 0&&o,u=a.defaultValue,d=u===void 0?null:u,f=a.inputValue,h=a.menuIsOpen,p=a.onChange,g=a.onInputChange,v=a.onMenuClose,b=a.onMenuOpen,y=a.value,C=OA(a,qdt),N=Qi(k.useState(f!==void 0?f:i),2),T=N[0],S=N[1],B=Qi(k.useState(h!==void 0?h:c),2),w=B[0],_=B[1],F=Qi(k.useState(y!==void 0?y:d),2),M=F[0],D=F[1],I=k.useCallback(function(z,G){typeof p=="function"&&p(z,G),D(z)},[p]),U=k.useCallback(function(z,G){var re;typeof g=="function"&&(re=g(z,G)),S(re!==void 0?re:z)},[g]),P=k.useCallback(function(){typeof b=="function"&&b(),_(!0)},[b]),X=k.useCallback(function(){typeof v=="function"&&v(),_(!1)},[v]),H=f!==void 0?f:T,Y=h!==void 0?h:w,V=y!==void 0?y:M;return wr(wr({},C),{},{inputValue:H,menuIsOpen:Y,onChange:I,onInputChange:U,onMenuClose:X,onMenuOpen:P,value:V})}(r);return k.createElement(jde,Dr({ref:t},n))}),uAt=cAt,dAt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,a,s;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(a=n;a--!=0;)if(!e(t[a],r[a]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(a=n;a--!=0;)if(!Object.prototype.hasOwnProperty.call(r,s[a]))return!1;for(a=n;a--!=0;){var i=s[a];if(!e(t[i],r[i]))return!1}return!0}return t!=t&&r!=r},nx;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(nx||(nx={}));class wp{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:a,id:s="__googleMapsScriptId",language:i,libraries:o=[],mapIds:c,nonce:u,region:d,retries:f=3,url:h="https://maps.googleapis.com/maps/api/js",version:p}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=a,this.id=s||"__googleMapsScriptId",this.language=i,this.libraries=o,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=h,this.version=p,wp.instance){if(!dAt(this.options,wp.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(wp.instance.options)}`);return wp.instance}wp.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?nx.FAILURE:this.done?nx.SUCCESS:this.loading?nx.LOADING:nx.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+=`?callback=${this.CALLBACK}`,this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const t=this.createUrl(),r=document.createElement("script");r.id=this.id,r.type="text/javascript",r.src=t,r.onerror=this.loadErrorCallback.bind(this),r.defer=!0,r.async=!0,this.nonce&&(r.nonce=this.nonce),document.head.appendChild(r)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var AAt=function(e,t,r){var n,a=e.bounds,s=e.location,i=function(c,u){var d={};for(var f in c)Object.prototype.hasOwnProperty.call(c,f)&&u.indexOf(f)<0&&(d[f]=c[f]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var h=0;for(f=Object.getOwnPropertySymbols(c);h<f.length;h++)u.indexOf(f[h])<0&&Object.prototype.propertyIsEnumerable.call(c,f[h])&&(d[f[h]]=c[f[h]])}return d}(e,["bounds","location"]),o=Gp({input:t},i);return r&&(o.sessionToken=r),a&&(o.bounds=new((n=google.maps.LatLngBounds).bind.apply(n,function(){for(var c=0,u=0,d=arguments.length;u<d;u++)c+=arguments[u].length;var f=Array(c),h=0;for(u=0;u<d;u++)for(var p=arguments[u],g=0,v=p.length;g<v;g++,h++)f[h]=p[g];return f}([void 0],a)))),s&&(o.location=new google.maps.LatLng(s)),o},fAt=function(e){var t=e.autocompletionRequest,r=e.debounce,n=e.minLengthAutocomplete,a=e.placesService,s=e.sessionToken,i=e.withSessionToken,o=function(c,u,d){d===void 0&&(d={});var f=d.maxWait,h=k.useRef(null),p=k.useRef([]),g=d.leading,v=d.trailing===void 0||d.trailing,b=k.useRef(!1),y=k.useRef(null),C=k.useRef(!1),N=k.useRef(c);N.current=c;var T=k.useCallback(function(){clearTimeout(y.current),clearTimeout(h.current),h.current=null,p.current=[],y.current=null,b.current=!1},[]);k.useEffect(function(){return C.current=!1,function(){C.current=!0}},[]);var S=k.useCallback(function(){for(var w=[],_=0;_<arguments.length;_++)w[_]=arguments[_];p.current=w,clearTimeout(y.current),b.current&&(b.current=!1),y.current||!g||b.current||(N.current.apply(N,w),b.current=!0),y.current=setTimeout(function(){var F=!0;g&&b.current&&(F=!1),T(),!C.current&&v&&F&&N.current.apply(N,w)},u),f&&!h.current&&v&&(h.current=setTimeout(function(){var F=p.current;T(),C.current||N.current.apply(null,F)},f))},[f,u,T,g,v]),B=k.useCallback(function(){y.current&&(N.current.apply(null,p.current),T())},[T]);return[S,T,B]}(function(c,u){if(!a)return u([]);if(c.length<n)return u([]);var d=Gp({},t);a.getPlacePredictions(AAt(d,c,i&&s),function(f){u((f||[]).map(function(h){return{label:h.description,value:h}}))})},r)[0];return o},IX=k.forwardRef(function(e,t){var r,n,a,s,i,o,c,u,d=function(v){var b=v.apiKey,y=v.apiOptions,C=v.onLoadFailed,N=k.useState(void 0),T=N[0],S=N[1],B=k.useState(void 0),w=B[0],_=B[1],F=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");S(new window.google.maps.places.AutocompleteService),_(new google.maps.places.AutocompleteSessionToken)};return k.useEffect(function(){b?gut(void 0,void 0,void 0,function(){var M;return vut(this,function(D){switch(D.label){case 0:if(!b)return[2];D.label=1;case 1:return D.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new wp(Gp({apiKey:b},Gp({libraries:["places"]},y))).load()];case 2:D.sent(),D.label=3;case 3:return F(),[3,5];case 4:return M=D.sent(),typeof C=="function"&&C(M),[3,5];case 5:return[2]}})}):F()},[]),{placesService:T,sessionToken:w,setSessionToken:_}}({apiKey:(r=e.apiKey)!==null&&r!==void 0?r:"",apiOptions:(n=e.apiOptions)!==null&&n!==void 0?n:{},onLoadFailed:(a=e.onLoadFailed)!==null&&a!==void 0?a:console.error}),f=d.placesService,h=d.sessionToken,p=d.setSessionToken,g=fAt({autocompletionRequest:(s=e.autocompletionRequest)!==null&&s!==void 0?s:{},debounce:(i=e.debounce)!==null&&i!==void 0?i:300,minLengthAutocomplete:(o=e.minLengthAutocomplete)!==null&&o!==void 0?o:0,placesService:f,sessionToken:h,withSessionToken:(c=e.withSessionToken)!==null&&c!==void 0&&c});return k.useImperativeHandle(t,function(){return{getSessionToken:function(){return h},refreshSessionToken:function(){p(new google.maps.places.AutocompleteSessionToken)}}},[h]),lt.createElement(uAt,Gp({},(u=e.selectProps)!==null&&u!==void 0?u:{},{loadOptions:g,getOptionValue:function(v){return v.value.place_id}}))});const hAt=e=>{const[t,r]=k.useState(!1),[n,a]=k.useState(null);return k.useEffect(()=>{const s="google-maps-script";if(document.getElementById(s)||window.google){r(!0);return}const i=document.createElement("script");i.id=s,i.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places,directions&loading=async`,i.async=!0,i.defer=!0,i.onload=()=>r(!0),i.onerror=()=>a(new Error("No se pudo cargar Google Maps.")),document.head.appendChild(i)},[e]),{isLoaded:t,error:n}},Ode=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Ambiente laboral y clima organizacional"},{elemento:"Supervisión y mentoría"},{elemento:"Oportunidades de aprendizaje"},{elemento:"Recursos y herramientas disponibles"},{elemento:"Seguridad y salud ocupacional"},{elemento:"Comunicación interna"}],mAt=["Mecánica Industrial","Mecánica Automotriz"],pAt=()=>({nombre:"",rut:"",direccion:"",contacto:"",email:"",area:"",cupos:1,coordenadas:null,calificaciones:Ode.map(e=>({...e,score:null})),estudiantesAsignados:[],docenteSupervisor:void 0}),FX=({empresas:e,isLoaded:t,route:r})=>{const n=k.useRef(null),a=k.useRef(null),s=k.useRef([]),i=k.useRef(null),o=e.filter(c=>{var u,d;return((u=c.coordenadas)==null?void 0:u.lat)&&((d=c.coordenadas)==null?void 0:d.lng)});return k.useEffect(()=>{!t||!n.current||!window.google||(a.current||(a.current=new window.google.maps.Map(n.current,{center:{lat:-33.4489,lng:-70.6693},zoom:11})),i.current||(i.current=new window.google.maps.DirectionsRenderer),s.current.forEach(c=>c.setMap(null)),s.current=[],i.current.setMap(null),r?(i.current.setMap(a.current),i.current.setDirections(r)):o.forEach(c=>{const u=new window.google.maps.Marker({position:{lat:c.coordenadas.lat,lng:c.coordenadas.lng},map:a.current,title:c.nombre}),d=new window.google.maps.InfoWindow({content:`<div style="font-weight: bold;">${c.nombre}</div><div>${c.direccion}</div>`});u.addListener("click",()=>{d.open(a.current,u)}),s.current.push(u)}))},[o,t,r]),l.jsxs("div",{className:"relative",id:"map-container-for-pdf",children:[l.jsx("div",{ref:n,className:"h-[600px] w-full rounded-lg border"}),!r&&o.length===0&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-90 rounded-lg",children:l.jsx("div",{className:"text-center p-6",children:l.jsx("p",{className:"text-gray-600 text-lg",children:"📍 No hay empresas geo-localizadas"})})})]})},gAt=({route:e,travelMode:t})=>{const a=t==="TRANSIT"?45:30,s=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.duration)==null?void 0:p.value)||0)},0),o=(e.routes[0].legs.length>1?e.routes[0].legs.length-1:0)*a*60,c=s+o,u=e.routes[0].legs.reduce((f,h)=>{var p;return f+(((p=h.distance)==null?void 0:p.value)||0)},0),d=t==="DRIVING"?u/1e3/12*1300:0;return l.jsxs("div",{className:"mt-6 p-4 border rounded-lg bg-slate-50",id:"route-details-for-pdf",children:[l.jsx("h3",{className:"text-xl font-bold mb-3",children:"Detalles de la Ruta"}),l.jsx("div",{className:"space-y-4",children:e.routes[0].legs.map((f,h)=>{var p,g,v;return l.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"font-bold text-lg",children:["Tramo ",h+1,": ",f.start_address.split(",")[0]," → ",f.end_address.split(",")[0]]}),l.jsxs("div",{className:"text-sm text-gray-600",children:[(p=f.duration)==null?void 0:p.text," • ",(g=f.distance)==null?void 0:g.text]})]}),t==="TRANSIT"&&l.jsx("div",{className:"space-y-3",children:(v=f.steps)==null?void 0:v.map((b,y)=>b.transit&&l.jsxs("div",{className:"flex items-start gap-2 text-sm py-1",children:[l.jsx("span",{className:"text-lg",children:"🚌"}),l.jsx("span",{dangerouslySetInnerHTML:{__html:b.instructions}})]},y))})]},h)})}),l.jsxs("div",{className:"mt-4 pt-4 border-t font-bold text-right",children:[l.jsxs("p",{children:["Tiempo de viaje: ",Math.round(s/60)," min"]}),l.jsxs("p",{children:["Tiempo en paradas: ",Math.round(o/60)," min"]}),l.jsxs("p",{className:"text-lg",children:["Duración Total Estimada: ",Math.round(c/60)," min"]}),l.jsxs("p",{children:["Distancia Total: ",(u/1e3).toFixed(1)," km"]}),t==="DRIVING"&&l.jsxs("p",{className:"text-green-600",children:["Costo Bencina Aprox: $",d.toLocaleString("es-CL",{maximumFractionDigits:0})]})]})]})},OX=async e=>window.google?new Promise(t=>{new window.google.maps.places.PlacesService(document.createElement("div")).getDetails({placeId:e,fields:["geometry"]},(n,a)=>{var s;a===window.google.maps.places.PlacesServiceStatus.OK&&((s=n==null?void 0:n.geometry)!=null&&s.location)?t({lat:n.geometry.location.lat(),lng:n.geometry.location.lng()}):t(null)})}):null,vAt=({data:e})=>{const t=["#0088FE","#00C49F","#FFBB28","#FF8042"];return l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Especialidad"}),l.jsx(_y,{width:"100%",height:300,children:l.jsxs(wrt,{children:[l.jsx(Fle,{data:e.porEspecialidad,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",label:!0,children:e.porEspecialidad.map((r,n)=>l.jsx(K2,{fill:t[n%t.length]},`cell-${n}`))}),l.jsx(Cy,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Empresas por Supervisor"}),l.jsx(_y,{width:"100%",height:300,children:l.jsxs(xO,{data:e.porSupervisor,layout:"vertical",children:[l.jsx(sN,{strokeDasharray:"3 3"}),l.jsx(Xw,{type:"number"}),l.jsx(Yw,{type:"category",dataKey:"name",width:150}),l.jsx(Cy,{}),l.jsx(rN,{dataKey:"value",fill:"#82ca9d",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 lg:col-span-3",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Distribución por Comuna"}),l.jsx(_y,{width:"100%",height:300,children:l.jsxs(xO,{data:e.porComuna,children:[l.jsx(sN,{strokeDasharray:"3 3"}),l.jsx(Xw,{dataKey:"name"}),l.jsx(Yw,{}),l.jsx(Cy,{}),l.jsx(rN,{dataKey:"value",fill:"#8884d8",name:"Empresas"})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Calificación por Ámbito"}),l.jsx(_y,{width:"100%",height:300,children:l.jsxs(_rt,{cx:"50%",cy:"50%",outerRadius:"80%",data:e.calificacionPorAmbito,children:[l.jsx(yle,{}),l.jsx(Ek,{dataKey:"subject"}),l.jsx(yk,{angle:30,domain:[0,5]}),l.jsx(w8,{name:"Promedio",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),l.jsx(Cy,{})]})})]}),l.jsxs("div",{className:"p-4 border rounded-lg bg-white col-span-1 md:col-span-2",children:[l.jsx("h3",{className:"font-bold mb-4",children:"Ranking de Empresas"}),l.jsx("div",{className:"overflow-y-auto max-h-[300px]",children:l.jsx("ul",{className:"space-y-2",children:e.ranking.map((r,n)=>l.jsxs("li",{className:"flex items-center justify-between p-2 rounded-lg bg-slate-50",children:[l.jsxs("span",{className:"font-semibold",children:[n+1,". ",r.nombre]}),l.jsxs("span",{className:"font-bold text-amber-500",children:[r.promedio.toFixed(1)," ★"]})]},r.id))})})]})]})},xAt=()=>{const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,s]=k.useState("list"),[i,o]=k.useState(null),[c,u]=k.useState(!0),[d,f]=k.useState(null),[h,p]=k.useState(null),[g,v]=k.useState(null),[b,y]=k.useState([]),[C,N]=k.useState(null),[T,S]=k.useState(!1),[B,w]=k.useState("DRIVING"),[_,F]=k.useState(""),[M,D]=k.useState([]),I="AIzaSyBkpVIvmoJAoD1QlZOZBln0aM6bPpBuGy4",{isLoaded:U}=hAt(I);k.useEffect(()=>{u(!0);const oe=uut(t),ce=fut(n),pe=mut(D);return u(!1),()=>{oe(),ce(),pe()}},[]);const P=k.useMemo(()=>{const oe=e.reduce((Se,De)=>{const _e=De.area||"Sin especificar";return Se[_e]=(Se[_e]||0)+1,Se},{}),ce=e.reduce((Se,De)=>{var he;const _e=((he=De.docenteSupervisor)==null?void 0:he.nombreCompleto)||"Sin asignar";return Se[_e]=(Se[_e]||0)+1,Se},{}),pe=e.reduce((Se,De)=>{const _e=De.direccion.split(",").map(je=>je.trim()),he=_e.length>1?_e[1]:"Desconocida";return Se[he]=(Se[he]||0)+1,Se},{}),Ie=Ode.map(Se=>{const De=e.flatMap(he=>{var je;return(je=he.calificaciones.find(He=>He.elemento===Se.elemento))==null?void 0:je.score}).filter(he=>he!=null),_e=De.length>0?De.reduce((he,je)=>he+je,0)/De.length:0;return{subject:Se.elemento.split(" ")[0],A:_e,fullMark:5}}),ne=e.map(Se=>{const De=Se.calificaciones.map(he=>he.score).filter(he=>he!=null),_e=De.length>0?De.reduce((he,je)=>he+je,0)/De.length:0;return{...Se,promedio:_e}}).filter(Se=>Se.promedio>0).sort((Se,De)=>De.promedio-Se.promedio);return{porEspecialidad:Object.entries(oe).map(([Se,De])=>({name:Se,value:De})),porSupervisor:Object.entries(ce).map(([Se,De])=>({name:Se,value:De})),porComuna:Object.entries(pe).map(([Se,De])=>({name:Se,value:De})),calificacionPorAmbito:Ie,ranking:ne}},[e]),X=async()=>{if(i)try{await dut(i),s("list"),o(null),f(null)}catch{alert("No se pudo guardar la empresa.")}},H=async oe=>{window.confirm("¿Está seguro de eliminar esta empresa?")&&await Aut(oe)},Y=(oe,ce)=>{o(pe=>pe?{...pe,[oe]:ce}:null)},V=async oe=>{var ce;if(f(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&U){const pe=await OX(oe.value.place_id);Y("direccion",oe.label||""),Y("coordenadas",pe)}else Y("direccion",(oe==null?void 0:oe.label)||"")},z=oe=>{o(JSON.parse(JSON.stringify(oe))),oe.direccion&&f({label:oe.direccion,value:{description:oe.direccion}}),s("form")},G=async oe=>{var ce;if(p(oe),(ce=oe==null?void 0:oe.value)!=null&&ce.place_id&&U){const pe=await OX(oe.value.place_id);v(pe)}},re=oe=>{y(ce=>ce.some(pe=>pe.id===oe.id)?ce.filter(pe=>pe.id!==oe.id):[...ce,oe])},R=()=>{if(!g||b.length===0||!U)return;S(!0);const oe=new window.google.maps.DirectionsService,ce=b.filter(pe=>pe.coordenadas).map(pe=>({location:pe.coordenadas,stopover:!0}));oe.route({origin:g,destination:g,waypoints:ce,optimizeWaypoints:!0,travelMode:window.google.maps.TravelMode[B]},(pe,Ie)=>{S(!1),Ie===window.google.maps.DirectionsStatus.OK&&pe?N(pe):alert("No se pudo calcular la ruta: "+Ie)})},q=()=>{N(null),p(null),v(null),y([]),F("")},J=async()=>{if(!_||!h||!g||b.length===0){alert("Por favor, asigna un nombre a la ruta y asegúrate de tener un punto de partida y empresas seleccionadas.");return}const oe={nombre:_,startPoint:{label:h.label,coords:g},empresas:b.map(ce=>({id:ce.id,nombre:ce.nombre,coordenadas:ce.coordenadas})),travelMode:B};try{await hut(oe),alert("Ruta guardada con éxito."),s("saved-routes")}catch{alert("Error al guardar la ruta.")}},te=async()=>{const oe=document.getElementById("map-container-for-pdf"),ce=document.getElementById("route-details-for-pdf");if(!oe||!ce)return;const pe=new xr("p","mm","a4"),Ie=pe.internal.pageSize.getWidth();pe.text(`Ruta de Supervisión: ${_||"Sin nombre"}`,10,15),pe.setFontSize(10),pe.text(`Fecha: ${new Date().toLocaleDateString("es-CL")}`,10,22);const Se=(await b5(oe,{useCORS:!0})).toDataURL("image/png");pe.addImage(Se,"PNG",10,30,Ie-20,100);const _e=(await b5(ce)).toDataURL("image/png"),he=pe.getImageProperties(_e),je=he.height*(Ie-20)/he.width;pe.addImage(_e,"PNG",10,135,Ie-20,je),pe.save(`ruta-${_||"supervision"}.pdf`)},ie=oe=>{p({label:oe.startPoint.label,value:null}),v(oe.startPoint.coords),y(oe.empresas),w(oe.travelMode),F(oe.nombre),s("route")},Ae=async oe=>{window.confirm("¿Estás seguro de que quieres eliminar esta ruta guardada?")&&(await put(oe),alert("Ruta eliminada."))};return c?l.jsx("div",{className:"text-center p-8",children:"Cargando..."}):l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas"}),l.jsxs("div",{className:"flex items-center gap-4",children:[a!=="list"&&l.jsx("button",{onClick:()=>{s("list"),f(null),o(null),q()},className:"font-semibold hover:text-blue-600",children:"← Volver al listado"}),a==="list"&&l.jsxs(l.Fragment,{children:[l.jsxs("button",{onClick:()=>s("dashboard"),title:"Dashboard",className:"bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[l.jsx(cye,{size:18})," Dashboard"]}),l.jsx("button",{onClick:()=>s("saved-routes"),title:"Rutas Guardadas",className:"bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Rutas Guardadas"}),l.jsx("button",{onClick:()=>s("route"),title:"Ruta de Supervisión",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Ruta de Supervisión"}),l.jsx("button",{onClick:()=>s("map"),title:"Vista de Mapa",className:"bg-slate-200 hover:bg-slate-300 p-2 rounded-lg transition-colors",children:"🗺️"}),l.jsx("button",{onClick:()=>{o(pAt()),s("form")},className:"bg-amber-500 hover:bg-amber-600 text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Crear Empresa"})]})]})]}),a==="dashboard"&&l.jsx(vAt,{data:P}),a==="saved-routes"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Rutas de Supervisión Guardadas"}),l.jsx("div",{className:"space-y-3",children:M.length===0?l.jsx("p",{className:"text-gray-500",children:"No tienes rutas guardadas."}):M.map(oe=>l.jsxs("div",{className:"p-4 border rounded-lg flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"font-bold",children:oe.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[oe.empresas.length," paradas"]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>ie(oe),className:"bg-blue-500 text-white px-3 py-1 rounded-md text-sm",children:"Cargar"}),l.jsx("button",{onClick:()=>Ae(oe.id),className:"bg-red-500 text-white px-3 py-1 rounded-md text-sm",children:"Eliminar"})]})]},oe.id))})]}),a==="route"&&l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Planificador de Ruta de Supervisión"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"1. Ingresa un nombre para la ruta"}),l.jsx("input",{type:"text",value:_,onChange:oe=>F(oe.target.value),placeholder:"Ej: Supervisión Zona Norte",className:"input-style w-full"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"2. Ingresa el punto de partida"}),l.jsx(IX,{apiKey:I,selectProps:{value:h,onChange:G,placeholder:"Buscar dirección de partida..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"3. Elige el modo de transporte"}),l.jsxs("div",{className:"flex gap-4 rounded-lg bg-slate-100 p-1",children:[l.jsx("button",{onClick:()=>w("DRIVING"),className:`w-full py-2 rounded-md transition ${B==="DRIVING"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Automóvil"}),l.jsx("button",{onClick:()=>w("TRANSIT"),className:`w-full py-2 rounded-md transition ${B==="TRANSIT"?"bg-blue-500 text-white":"hover:bg-slate-200"}`,children:"Transporte Público"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"4. Selecciona las empresas a visitar"}),l.jsx("div",{className:"max-h-48 overflow-y-auto border rounded-lg p-2 space-y-2",children:e.filter(oe=>oe.coordenadas).map(oe=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:`route-${oe.id}`,checked:b.some(ce=>ce.id===oe.id),onChange:()=>re(oe),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),l.jsx("label",{htmlFor:`route-${oe.id}`,className:"ml-3 text-sm text-gray-700",children:oe.nombre})]},oe.id))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("button",{onClick:R,disabled:!g||b.length===0||T,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:T?"Calculando...":"Visualizar Ruta"}),l.jsx("button",{onClick:J,disabled:!_||!g||b.length===0,className:"w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Guardar Ruta"}),l.jsx("button",{onClick:te,disabled:!C,className:"w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg transition-colors disabled:opacity-50",children:"Exportar PDF"}),l.jsx("button",{onClick:q,className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-bold py-3 rounded-lg transition-colors",children:"Limpiar"})]})]}),l.jsx("div",{children:l.jsx(FX,{empresas:b,isLoaded:U,route:C})})]}),C&&l.jsx(gAt,{route:C,travelMode:B})]}),a==="map"&&l.jsx(FX,{empresas:e,isLoaded:U}),a==="list"&&l.jsx("div",{className:"space-y-3",children:e.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay empresas registradas."}):e.map(oe=>{var ce;return l.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg",children:oe.nombre}),l.jsxs("p",{className:"text-sm text-slate-500",children:[oe.rut," | ",oe.direccion]}),l.jsxs("p",{className:"text-sm text-slate-600",children:["Área: ",oe.area||"No especificada"," | Cupos: ",oe.cupos," | Supervisor: ",((ce=oe.docenteSupervisor)==null?void 0:ce.nombreCompleto)||"Ninguno"]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:()=>z(oe),className:"text-sm font-semibold text-blue-600 hover:text-blue-800",children:"Editar"}),l.jsx("button",{onClick:()=>H(oe.id),className:"text-sm text-red-500 hover:text-red-700",children:"Eliminar"})]})]})},oe.id)})}),a==="form"&&i&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(kbe,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.nombre,onChange:oe=>Y("nombre",oe.target.value),placeholder:"Nombre Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(nye,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.rut,onChange:oe=>Y("rut",oe.target.value),placeholder:"RUT Empresa",className:"input-style pl-10",required:!0})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(LS,{className:"absolute left-3 top-5 -translate-y-1/2 w-5 h-5 text-slate-400 z-10"}),l.jsx("div",{className:"w-full pl-10",children:l.jsx(IX,{apiKey:I,selectProps:{value:d,onChange:V,placeholder:"Buscar dirección..."},autocompletionRequest:{componentRestrictions:{country:["cl"]}}})})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(QS,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{value:i.contacto,onChange:oe=>Y("contacto",oe.target.value),placeholder:"Contacto",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(gye,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"email",value:i.email||"",onChange:oe=>Y("email",oe.target.value),placeholder:"Correo electrónico",className:"input-style pl-10"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(Ou,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsx("input",{type:"number",value:i.cupos,onChange:oe=>Y("cupos",parseInt(oe.target.value)||1),placeholder:"N° de cupos",className:"input-style pl-10",min:"1"})]}),l.jsxs("div",{className:"relative flex items-center",children:[l.jsx(KZ,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.area||"",onChange:oe=>Y("area",oe.target.value),className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",disabled:!0,children:"Seleccione un área"}),mAt.map(oe=>l.jsx("option",{value:oe,children:oe},oe))]})]}),l.jsxs("div",{className:"md:col-span-2 relative flex items-center",children:[l.jsx(QS,{className:"absolute left-3 w-5 h-5 text-slate-400"}),l.jsxs("select",{value:i.docenteSupervisor?JSON.stringify(i.docenteSupervisor):"",onChange:oe=>{const ce=oe.target.value;Y("docenteSupervisor",ce?JSON.parse(ce):void 0)},className:"input-style pl-10 w-full",children:[l.jsx("option",{value:"",children:"Sin supervisor asignado"}),r.map(oe=>l.jsx("option",{value:JSON.stringify({id:oe.id,nombre:oe.nombreCompleto}),children:oe.nombreCompleto},oe.id))]})]})]}),l.jsxs("div",{className:"space-y-4 pt-4",children:[l.jsx("h3",{className:"text-lg font-semibold",children:"Evaluación de la Empresa"}),i.calificaciones.map((oe,ce)=>l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border",children:[l.jsx($ye,{className:"w-5 h-5 text-slate-400"}),l.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700",children:oe.elemento}),l.jsxs("select",{value:oe.score||"",onChange:pe=>{const Ie=[...i.calificaciones];Ie[ce].score=pe.target.value?parseInt(pe.target.value):null,Y("calificaciones",Ie)},className:"px-3 py-1 border border-gray-300 rounded-md text-sm",children:[l.jsx("option",{value:"",children:"Sin calificar"}),[1,2,3,4,5].map(pe=>l.jsx("option",{value:pe,children:pe},pe))]})]},ce))]}),l.jsx("div",{className:"pt-6",children:l.jsx("button",{onClick:X,className:"w-full bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 rounded-lg transition-colors",disabled:!i.nombre||!i.rut,children:"Guardar Empresa"})})]})]})};var Z2=e=>e.type==="checkbox",Ip=e=>e instanceof Date,hl=e=>e==null;const Dde=e=>typeof e=="object";var Xs=e=>!hl(e)&&!Array.isArray(e)&&Dde(e)&&!Ip(e),bAt=e=>Xs(e)&&e.target?Z2(e.target)?e.target.checked:e.target.value:e,yAt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,wAt=(e,t)=>e.has(yAt(t)),EAt=e=>{const t=e.constructor&&e.constructor.prototype;return Xs(t)&&t.hasOwnProperty("isPrototypeOf")},sM=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Ja(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(sM&&(e instanceof Blob||n))&&(r||Xs(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!EAt(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Ja(e[a]));else return e;return t}var Vk=e=>/^\w*$/.test(e),Za=e=>e===void 0,zk=e=>Array.isArray(e)?e.filter(Boolean):[],iM=e=>zk(e.replace(/["|']|\]/g,"").split(/\.|\[/)),or=(e,t,r)=>{if(!t||!Xs(e))return r;const n=(Vk(t)?[t]:iM(t)).reduce((a,s)=>hl(a)?a:a[s],e);return Za(n)||n===e?Za(e[t])?r:e[t]:n},BA=e=>typeof e=="boolean",Ia=(e,t,r)=>{let n=-1;const a=Vk(t)?[t]:iM(t),s=a.length,i=s-1;for(;++n<s;){const o=a[n];let c=r;if(n!==i){const u=e[o];c=Xs(u)||Array.isArray(u)?u:isNaN(+a[n+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;e[o]=c,e=e[o]}};const DX={BLUR:"blur",FOCUS_OUT:"focusout"},Nu={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Qf={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Pde=lt.createContext(null);Pde.displayName="HookFormContext";const CAt=()=>lt.useContext(Pde);var _At=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(a,s,{get:()=>{const i=s;return t._proxyFormState[i]!==Nu.all&&(t._proxyFormState[i]=!n||Nu.all),e[i]}});return a};const Rde=typeof window<"u"?lt.useLayoutEffect:lt.useEffect;var UA=e=>typeof e=="string",SAt=(e,t,r,n,a)=>UA(e)?(n&&t.watch.add(e),or(r,e,a)):Array.isArray(e)?e.map(s=>(n&&t.watch.add(s),or(r,s))):(n&&(t.watchAll=!0),r),WO=e=>hl(e)||!Dde(e);function L0(e,t,r=new WeakSet){if(WO(e)||WO(t))return e===t;if(Ip(e)&&Ip(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const s of n){const i=e[s];if(!a.includes(s))return!1;if(s!=="ref"){const o=t[s];if(Ip(i)&&Ip(o)||Xs(i)&&Xs(o)||Array.isArray(i)&&Array.isArray(o)?!L0(i,o,r):i!==o)return!1}}return!0}var NAt=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},Xl=e=>Array.isArray(e)?e:[e],PX=()=>{let e=[];return{get observers(){return e},next:a=>{for(const s of e)s.next&&s.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(s=>s!==a)}}),unsubscribe:()=>{e=[]}}},dl=e=>Xs(e)&&!Object.keys(e).length,oM=e=>e.type==="file",xd=e=>typeof e=="function",EN=e=>{if(!sM)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Lde=e=>e.type==="select-multiple",lM=e=>e.type==="radio",kAt=e=>lM(e)||Z2(e),LI=e=>EN(e)&&e.isConnected;function BAt(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Za(e)?n++:e[t[n++]];return e}function TAt(e){for(const t in e)if(e.hasOwnProperty(t)&&!Za(e[t]))return!1;return!0}function Hs(e,t){const r=Array.isArray(t)?t:Vk(t)?[t]:iM(t),n=r.length===1?e:BAt(e,r),a=r.length-1,s=r[a];return n&&delete n[s],a!==0&&(Xs(n)&&dl(n)||Array.isArray(n)&&TAt(n))&&Hs(e,r.slice(0,-1)),e}var Mde=e=>{for(const t in e)if(xd(e[t]))return!0;return!1};function CN(e,t={}){const r=Array.isArray(e);if(Xs(e)||r)for(const n in e)Array.isArray(e[n])||Xs(e[n])&&!Mde(e[n])?(t[n]=Array.isArray(e[n])?[]:{},CN(e[n],t[n])):hl(e[n])||(t[n]=!0);return t}function Ude(e,t,r){const n=Array.isArray(e);if(Xs(e)||n)for(const a in e)Array.isArray(e[a])||Xs(e[a])&&!Mde(e[a])?Za(t)||WO(r[a])?r[a]=Array.isArray(e[a])?CN(e[a],[]):{...CN(e[a])}:Ude(e[a],hl(t)?{}:t[a],r[a]):r[a]=!L0(e[a],t[a]);return r}var ny=(e,t)=>Ude(e,t,CN(t));const RX={value:!1,isValid:!1},LX={value:!0,isValid:!0};var Qde=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Za(e[0].attributes.value)?Za(e[0].value)||e[0].value===""?LX:{value:e[0].value,isValid:!0}:LX:RX}return RX},Hde=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Za(e)?e:t?e===""?NaN:e&&+e:r&&UA(e)?new Date(e):n?n(e):e;const MX={isValid:!1,value:null};var Vde=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,MX):MX;function UX(e){const t=e.ref;return oM(t)?t.files:lM(t)?Vde(e.refs).value:Lde(t)?[...t.selectedOptions].map(({value:r})=>r):Z2(t)?Qde(e.refs).value:Hde(Za(t.value)?e.ref.value:t.value,e)}var jAt=(e,t,r,n)=>{const a={};for(const s of e){const i=or(t,s);i&&Ia(a,s,i._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},_N=e=>e instanceof RegExp,ay=e=>Za(e)?e:_N(e)?e.source:Xs(e)?_N(e.value)?e.value.source:e.value:e,ax=e=>({isOnSubmit:!e||e===Nu.onSubmit,isOnBlur:e===Nu.onBlur,isOnChange:e===Nu.onChange,isOnAll:e===Nu.all,isOnTouch:e===Nu.onTouched});const QX="AsyncFunction";var IAt=e=>!!e&&!!e.validate&&!!(xd(e.validate)&&e.validate.constructor.name===QX||Xs(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===QX)),FAt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),XO=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const Nx=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const s=or(e,a);if(s){const{_f:i,...o}=s;if(i){if(i.refs&&i.refs[0]&&t(i.refs[0],a)&&!n)return!0;if(i.ref&&t(i.ref,i.name)&&!n)return!0;if(Nx(o,t))break}else if(Xs(o)&&Nx(o,t))break}}};function HX(e,t,r){const n=or(e,r);if(n||Vk(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const s=a.join("."),i=or(t,s),o=or(e,s);if(i&&!Array.isArray(i)&&r!==s)return{name:r};if(o&&o.type)return{name:s,error:o};if(o&&o.root&&o.root.type)return{name:`${s}.root`,error:o.root};a.pop()}return{name:r}}var OAt=(e,t,r,n)=>{r(e);const{name:a,...s}=e;return dl(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(i=>t[i]===(!n||Nu.all))},DAt=(e,t,r)=>!e||!t||e===t||Xl(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),PAt=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,RAt=(e,t)=>!zk(or(e,t)).length&&Hs(e,t),zde=(e,t,r)=>{const n=Xl(or(e,r));return Ia(n,"root",t[r]),Ia(e,r,n),e},mS=e=>UA(e);function VX(e,t,r="validate"){if(mS(e)||Array.isArray(e)&&e.every(mS)||BA(e)&&!e)return{type:r,message:mS(e)?e:"",ref:t}}var Fv=e=>Xs(e)&&!_N(e)?e:{value:e,message:""},YO=async(e,t,r,n,a,s)=>{const{ref:i,refs:o,required:c,maxLength:u,minLength:d,min:f,max:h,pattern:p,validate:g,name:v,valueAsNumber:b,mount:y}=e._f,C=or(r,v);if(!y||t.has(v))return{};const N=o?o[0]:i,T=I=>{a&&N.reportValidity&&(N.setCustomValidity(BA(I)?"":I||""),N.reportValidity())},S={},B=lM(i),w=Z2(i),_=B||w,F=(b||oM(i))&&Za(i.value)&&Za(C)||EN(i)&&i.value===""||C===""||Array.isArray(C)&&!C.length,M=NAt.bind(null,v,n,S),D=(I,U,P,X=Qf.maxLength,H=Qf.minLength)=>{const Y=I?U:P;S[v]={type:I?X:H,message:Y,ref:i,...M(I?X:H,Y)}};if(s?!Array.isArray(C)||!C.length:c&&(!_&&(F||hl(C))||BA(C)&&!C||w&&!Qde(o).isValid||B&&!Vde(o).isValid)){const{value:I,message:U}=mS(c)?{value:!!c,message:c}:Fv(c);if(I&&(S[v]={type:Qf.required,message:U,ref:N,...M(Qf.required,U)},!n))return T(U),S}if(!F&&(!hl(f)||!hl(h))){let I,U;const P=Fv(h),X=Fv(f);if(!hl(C)&&!isNaN(C)){const H=i.valueAsNumber||C&&+C;hl(P.value)||(I=H>P.value),hl(X.value)||(U=H<X.value)}else{const H=i.valueAsDate||new Date(C),Y=G=>new Date(new Date().toDateString()+" "+G),V=i.type=="time",z=i.type=="week";UA(P.value)&&C&&(I=V?Y(C)>Y(P.value):z?C>P.value:H>new Date(P.value)),UA(X.value)&&C&&(U=V?Y(C)<Y(X.value):z?C<X.value:H<new Date(X.value))}if((I||U)&&(D(!!I,P.message,X.message,Qf.max,Qf.min),!n))return T(S[v].message),S}if((u||d)&&!F&&(UA(C)||s&&Array.isArray(C))){const I=Fv(u),U=Fv(d),P=!hl(I.value)&&C.length>+I.value,X=!hl(U.value)&&C.length<+U.value;if((P||X)&&(D(P,I.message,U.message),!n))return T(S[v].message),S}if(p&&!F&&UA(C)){const{value:I,message:U}=Fv(p);if(_N(I)&&!C.match(I)&&(S[v]={type:Qf.pattern,message:U,ref:i,...M(Qf.pattern,U)},!n))return T(U),S}if(g){if(xd(g)){const I=await g(C,r),U=VX(I,N);if(U&&(S[v]={...U,...M(Qf.validate,U.message)},!n))return T(U.message),S}else if(Xs(g)){let I={};for(const U in g){if(!dl(I)&&!n)break;const P=VX(await g[U](C,r),N,U);P&&(I={...P,...M(U,P.message)},T(P.message),n&&(S[v]=I))}if(!dl(I)&&(S[v]={ref:N,...I},!n))return S}}return T(!0),S};const LAt={mode:Nu.onSubmit,reValidateMode:Nu.onChange,shouldFocusError:!0};function MAt(e={}){let t={...LAt,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:xd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=Xs(t.defaultValues)||Xs(t.values)?Ja(t.defaultValues||t.values)||{}:{},s=t.shouldUnregister?{}:Ja(a),i={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...d};const h={array:PX(),state:PX()},p=t.criteriaMode===Nu.all,g=ye=>Oe=>{clearTimeout(u),u=setTimeout(ye,Oe)},v=async ye=>{if(!t.disabled&&(d.isValid||f.isValid||ye)){const Oe=t.resolver?dl((await w()).errors):await F(n,!0);Oe!==r.isValid&&h.state.next({isValid:Oe})}},b=(ye,Oe)=>{!t.disabled&&(d.isValidating||d.validatingFields||f.isValidating||f.validatingFields)&&((ye||Array.from(o.mount)).forEach(Re=>{Re&&(Oe?Ia(r.validatingFields,Re,Oe):Hs(r.validatingFields,Re))}),h.state.next({validatingFields:r.validatingFields,isValidating:!dl(r.validatingFields)}))},y=(ye,Oe=[],Re,qe,Ze=!0,ot=!0)=>{if(qe&&Re&&!t.disabled){if(i.action=!0,ot&&Array.isArray(or(n,ye))){const mt=Re(or(n,ye),qe.argA,qe.argB);Ze&&Ia(n,ye,mt)}if(ot&&Array.isArray(or(r.errors,ye))){const mt=Re(or(r.errors,ye),qe.argA,qe.argB);Ze&&Ia(r.errors,ye,mt),RAt(r.errors,ye)}if((d.touchedFields||f.touchedFields)&&ot&&Array.isArray(or(r.touchedFields,ye))){const mt=Re(or(r.touchedFields,ye),qe.argA,qe.argB);Ze&&Ia(r.touchedFields,ye,mt)}(d.dirtyFields||f.dirtyFields)&&(r.dirtyFields=ny(a,s)),h.state.next({name:ye,isDirty:D(ye,Oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ia(s,ye,Oe)},C=(ye,Oe)=>{Ia(r.errors,ye,Oe),h.state.next({errors:r.errors})},N=ye=>{r.errors=ye,h.state.next({errors:r.errors,isValid:!1})},T=(ye,Oe,Re,qe)=>{const Ze=or(n,ye);if(Ze){const ot=or(s,ye,Za(Re)?or(a,ye):Re);Za(ot)||qe&&qe.defaultChecked||Oe?Ia(s,ye,Oe?ot:UX(Ze._f)):P(ye,ot),i.mount&&v()}},S=(ye,Oe,Re,qe,Ze)=>{let ot=!1,mt=!1;const Tt={name:ye};if(!t.disabled){if(!Re||qe){(d.isDirty||f.isDirty)&&(mt=r.isDirty,r.isDirty=Tt.isDirty=D(),ot=mt!==Tt.isDirty);const Mt=L0(or(a,ye),Oe);mt=!!or(r.dirtyFields,ye),Mt?Hs(r.dirtyFields,ye):Ia(r.dirtyFields,ye,!0),Tt.dirtyFields=r.dirtyFields,ot=ot||(d.dirtyFields||f.dirtyFields)&&mt!==!Mt}if(Re){const Mt=or(r.touchedFields,ye);Mt||(Ia(r.touchedFields,ye,Re),Tt.touchedFields=r.touchedFields,ot=ot||(d.touchedFields||f.touchedFields)&&Mt!==Re)}ot&&Ze&&h.state.next(Tt)}return ot?Tt:{}},B=(ye,Oe,Re,qe)=>{const Ze=or(r.errors,ye),ot=(d.isValid||f.isValid)&&BA(Oe)&&r.isValid!==Oe;if(t.delayError&&Re?(c=g(()=>C(ye,Re)),c(t.delayError)):(clearTimeout(u),c=null,Re?Ia(r.errors,ye,Re):Hs(r.errors,ye)),(Re?!L0(Ze,Re):Ze)||!dl(qe)||ot){const mt={...qe,...ot&&BA(Oe)?{isValid:Oe}:{},errors:r.errors,name:ye};r={...r,...mt},h.state.next(mt)}},w=async ye=>{b(ye,!0);const Oe=await t.resolver(s,t.context,jAt(ye||o.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return b(ye),Oe},_=async ye=>{const{errors:Oe}=await w(ye);if(ye)for(const Re of ye){const qe=or(Oe,Re);qe?Ia(r.errors,Re,qe):Hs(r.errors,Re)}else r.errors=Oe;return Oe},F=async(ye,Oe,Re={valid:!0})=>{for(const qe in ye){const Ze=ye[qe];if(Ze){const{_f:ot,...mt}=Ze;if(ot){const Tt=o.array.has(ot.name),Mt=Ze._f&&IAt(Ze._f);Mt&&d.validatingFields&&b([qe],!0);const Dt=await YO(Ze,o.disabled,s,p,t.shouldUseNativeValidation&&!Oe,Tt);if(Mt&&d.validatingFields&&b([qe]),Dt[ot.name]&&(Re.valid=!1,Oe))break;!Oe&&(or(Dt,ot.name)?Tt?zde(r.errors,Dt,ot.name):Ia(r.errors,ot.name,Dt[ot.name]):Hs(r.errors,ot.name))}!dl(mt)&&await F(mt,Oe,Re)}}return Re.valid},M=()=>{for(const ye of o.unMount){const Oe=or(n,ye);Oe&&(Oe._f.refs?Oe._f.refs.every(Re=>!LI(Re)):!LI(Oe._f.ref))&&Ae(ye)}o.unMount=new Set},D=(ye,Oe)=>!t.disabled&&(ye&&Oe&&Ia(s,ye,Oe),!L0(G(),a)),I=(ye,Oe,Re)=>SAt(ye,o,{...i.mount?s:Za(Oe)?a:UA(ye)?{[ye]:Oe}:Oe},Re,Oe),U=ye=>zk(or(i.mount?s:a,ye,t.shouldUnregister?or(a,ye,[]):[])),P=(ye,Oe,Re={})=>{const qe=or(n,ye);let Ze=Oe;if(qe){const ot=qe._f;ot&&(!ot.disabled&&Ia(s,ye,Hde(Oe,ot)),Ze=EN(ot.ref)&&hl(Oe)?"":Oe,Lde(ot.ref)?[...ot.ref.options].forEach(mt=>mt.selected=Ze.includes(mt.value)):ot.refs?Z2(ot.ref)?ot.refs.forEach(mt=>{(!mt.defaultChecked||!mt.disabled)&&(Array.isArray(Ze)?mt.checked=!!Ze.find(Tt=>Tt===mt.value):mt.checked=Ze===mt.value||!!Ze)}):ot.refs.forEach(mt=>mt.checked=mt.value===Ze):oM(ot.ref)?ot.ref.value="":(ot.ref.value=Ze,ot.ref.type||h.state.next({name:ye,values:Ja(s)})))}(Re.shouldDirty||Re.shouldTouch)&&S(ye,Ze,Re.shouldTouch,Re.shouldDirty,!0),Re.shouldValidate&&z(ye)},X=(ye,Oe,Re)=>{for(const qe in Oe){if(!Oe.hasOwnProperty(qe))return;const Ze=Oe[qe],ot=ye+"."+qe,mt=or(n,ot);(o.array.has(ye)||Xs(Ze)||mt&&!mt._f)&&!Ip(Ze)?X(ot,Ze,Re):P(ot,Ze,Re)}},H=(ye,Oe,Re={})=>{const qe=or(n,ye),Ze=o.array.has(ye),ot=Ja(Oe);Ia(s,ye,ot),Ze?(h.array.next({name:ye,values:Ja(s)}),(d.isDirty||d.dirtyFields||f.isDirty||f.dirtyFields)&&Re.shouldDirty&&h.state.next({name:ye,dirtyFields:ny(a,s),isDirty:D(ye,ot)})):qe&&!qe._f&&!hl(ot)?X(ye,ot,Re):P(ye,ot,Re),XO(ye,o)&&h.state.next({...r,name:ye}),h.state.next({name:i.mount?ye:void 0,values:Ja(s)})},Y=async ye=>{i.mount=!0;const Oe=ye.target;let Re=Oe.name,qe=!0;const Ze=or(n,Re),ot=Mt=>{qe=Number.isNaN(Mt)||Ip(Mt)&&isNaN(Mt.getTime())||L0(Mt,or(s,Re,Mt))},mt=ax(t.mode),Tt=ax(t.reValidateMode);if(Ze){let Mt,Dt;const Qt=Oe.type?UX(Ze._f):bAt(ye),yt=ye.type===DX.BLUR||ye.type===DX.FOCUS_OUT,kr=!FAt(Ze._f)&&!t.resolver&&!or(r.errors,Re)&&!Ze._f.deps||PAt(yt,or(r.touchedFields,Re),r.isSubmitted,Tt,mt),rr=XO(Re,o,yt);Ia(s,Re,Qt),yt?(!Oe||!Oe.readOnly)&&(Ze._f.onBlur&&Ze._f.onBlur(ye),c&&c(0)):Ze._f.onChange&&Ze._f.onChange(ye);const an=S(Re,Qt,yt),_r=!dl(an)||rr;if(!yt&&h.state.next({name:Re,type:ye.type,values:Ja(s)}),kr)return(d.isValid||f.isValid)&&(t.mode==="onBlur"?yt&&v():yt||v()),_r&&h.state.next({name:Re,...rr?{}:an});if(!yt&&rr&&h.state.next({...r}),t.resolver){const{errors:zr}=await w([Re]);if(ot(Qt),qe){const Fn=HX(r.errors,n,Re),Fr=HX(zr,n,Fn.name||Re);Mt=Fr.error,Re=Fr.name,Dt=dl(zr)}}else b([Re],!0),Mt=(await YO(Ze,o.disabled,s,p,t.shouldUseNativeValidation))[Re],b([Re]),ot(Qt),qe&&(Mt?Dt=!1:(d.isValid||f.isValid)&&(Dt=await F(n,!0)));qe&&(Ze._f.deps&&z(Ze._f.deps),B(Re,Dt,Mt,an))}},V=(ye,Oe)=>{if(or(r.errors,Oe)&&ye.focus)return ye.focus(),1},z=async(ye,Oe={})=>{let Re,qe;const Ze=Xl(ye);if(t.resolver){const ot=await _(Za(ye)?ye:Ze);Re=dl(ot),qe=ye?!Ze.some(mt=>or(ot,mt)):Re}else ye?(qe=(await Promise.all(Ze.map(async ot=>{const mt=or(n,ot);return await F(mt&&mt._f?{[ot]:mt}:mt)}))).every(Boolean),!(!qe&&!r.isValid)&&v()):qe=Re=await F(n);return h.state.next({...!UA(ye)||(d.isValid||f.isValid)&&Re!==r.isValid?{}:{name:ye},...t.resolver||!ye?{isValid:Re}:{},errors:r.errors}),Oe.shouldFocus&&!qe&&Nx(n,V,ye?Ze:o.mount),qe},G=ye=>{const Oe={...i.mount?s:a};return Za(ye)?Oe:UA(ye)?or(Oe,ye):ye.map(Re=>or(Oe,Re))},re=(ye,Oe)=>({invalid:!!or((Oe||r).errors,ye),isDirty:!!or((Oe||r).dirtyFields,ye),error:or((Oe||r).errors,ye),isValidating:!!or(r.validatingFields,ye),isTouched:!!or((Oe||r).touchedFields,ye)}),R=ye=>{ye&&Xl(ye).forEach(Oe=>Hs(r.errors,Oe)),h.state.next({errors:ye?r.errors:{}})},q=(ye,Oe,Re)=>{const qe=(or(n,ye,{_f:{}})._f||{}).ref,Ze=or(r.errors,ye)||{},{ref:ot,message:mt,type:Tt,...Mt}=Ze;Ia(r.errors,ye,{...Mt,...Oe,ref:qe}),h.state.next({name:ye,errors:r.errors,isValid:!1}),Re&&Re.shouldFocus&&qe&&qe.focus&&qe.focus()},J=(ye,Oe)=>xd(ye)?h.state.subscribe({next:Re=>"values"in Re&&ye(I(void 0,Oe),Re)}):I(ye,Oe,!0),te=ye=>h.state.subscribe({next:Oe=>{DAt(ye.name,Oe.name,ye.exact)&&OAt(Oe,ye.formState||d,je,ye.reRenderRoot)&&ye.callback({values:{...s},...r,...Oe,defaultValues:a})}}).unsubscribe,ie=ye=>(i.mount=!0,f={...f,...ye.formState},te({...ye,formState:f})),Ae=(ye,Oe={})=>{for(const Re of ye?Xl(ye):o.mount)o.mount.delete(Re),o.array.delete(Re),Oe.keepValue||(Hs(n,Re),Hs(s,Re)),!Oe.keepError&&Hs(r.errors,Re),!Oe.keepDirty&&Hs(r.dirtyFields,Re),!Oe.keepTouched&&Hs(r.touchedFields,Re),!Oe.keepIsValidating&&Hs(r.validatingFields,Re),!t.shouldUnregister&&!Oe.keepDefaultValue&&Hs(a,Re);h.state.next({values:Ja(s)}),h.state.next({...r,...Oe.keepDirty?{isDirty:D()}:{}}),!Oe.keepIsValid&&v()},oe=({disabled:ye,name:Oe})=>{(BA(ye)&&i.mount||ye||o.disabled.has(Oe))&&(ye?o.disabled.add(Oe):o.disabled.delete(Oe))},ce=(ye,Oe={})=>{let Re=or(n,ye);const qe=BA(Oe.disabled)||BA(t.disabled);return Ia(n,ye,{...Re||{},_f:{...Re&&Re._f?Re._f:{ref:{name:ye}},name:ye,mount:!0,...Oe}}),o.mount.add(ye),Re?oe({disabled:BA(Oe.disabled)?Oe.disabled:t.disabled,name:ye}):T(ye,!0,Oe.value),{...qe?{disabled:Oe.disabled||t.disabled}:{},...t.progressive?{required:!!Oe.required,min:ay(Oe.min),max:ay(Oe.max),minLength:ay(Oe.minLength),maxLength:ay(Oe.maxLength),pattern:ay(Oe.pattern)}:{},name:ye,onChange:Y,onBlur:Y,ref:Ze=>{if(Ze){ce(ye,Oe),Re=or(n,ye);const ot=Za(Ze.value)&&Ze.querySelectorAll&&Ze.querySelectorAll("input,select,textarea")[0]||Ze,mt=kAt(ot),Tt=Re._f.refs||[];if(mt?Tt.find(Mt=>Mt===ot):ot===Re._f.ref)return;Ia(n,ye,{_f:{...Re._f,...mt?{refs:[...Tt.filter(LI),ot,...Array.isArray(or(a,ye))?[{}]:[]],ref:{type:ot.type,name:ye}}:{ref:ot}}}),T(ye,!1,void 0,ot)}else Re=or(n,ye,{}),Re._f&&(Re._f.mount=!1),(t.shouldUnregister||Oe.shouldUnregister)&&!(wAt(o.array,ye)&&i.action)&&o.unMount.add(ye)}}},pe=()=>t.shouldFocusError&&Nx(n,V,o.mount),Ie=ye=>{BA(ye)&&(h.state.next({disabled:ye}),Nx(n,(Oe,Re)=>{const qe=or(n,Re);qe&&(Oe.disabled=qe._f.disabled||ye,Array.isArray(qe._f.refs)&&qe._f.refs.forEach(Ze=>{Ze.disabled=qe._f.disabled||ye}))},0,!1))},ne=(ye,Oe)=>async Re=>{let qe;Re&&(Re.preventDefault&&Re.preventDefault(),Re.persist&&Re.persist());let Ze=Ja(s);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:ot,values:mt}=await w();r.errors=ot,Ze=Ja(mt)}else await F(n);if(o.disabled.size)for(const ot of o.disabled)Hs(Ze,ot);if(Hs(r.errors,"root"),dl(r.errors)){h.state.next({errors:{}});try{await ye(Ze,Re)}catch(ot){qe=ot}}else Oe&&await Oe({...r.errors},Re),pe(),setTimeout(pe);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:dl(r.errors)&&!qe,submitCount:r.submitCount+1,errors:r.errors}),qe)throw qe},Se=(ye,Oe={})=>{or(n,ye)&&(Za(Oe.defaultValue)?H(ye,Ja(or(a,ye))):(H(ye,Oe.defaultValue),Ia(a,ye,Ja(Oe.defaultValue))),Oe.keepTouched||Hs(r.touchedFields,ye),Oe.keepDirty||(Hs(r.dirtyFields,ye),r.isDirty=Oe.defaultValue?D(ye,Ja(or(a,ye))):D()),Oe.keepError||(Hs(r.errors,ye),d.isValid&&v()),h.state.next({...r}))},De=(ye,Oe={})=>{const Re=ye?Ja(ye):a,qe=Ja(Re),Ze=dl(ye),ot=Ze?a:qe;if(Oe.keepDefaultValues||(a=Re),!Oe.keepValues){if(Oe.keepDirtyValues){const mt=new Set([...o.mount,...Object.keys(ny(a,s))]);for(const Tt of Array.from(mt))or(r.dirtyFields,Tt)?Ia(ot,Tt,or(s,Tt)):H(Tt,or(ot,Tt))}else{if(sM&&Za(ye))for(const mt of o.mount){const Tt=or(n,mt);if(Tt&&Tt._f){const Mt=Array.isArray(Tt._f.refs)?Tt._f.refs[0]:Tt._f.ref;if(EN(Mt)){const Dt=Mt.closest("form");if(Dt){Dt.reset();break}}}}if(Oe.keepFieldsRef)for(const mt of o.mount)H(mt,or(ot,mt));else n={}}s=t.shouldUnregister?Oe.keepDefaultValues?Ja(a):{}:Ja(ot),h.array.next({values:{...ot}}),h.state.next({values:{...ot}})}o={mount:Oe.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},i.mount=!d.isValid||!!Oe.keepIsValid||!!Oe.keepDirtyValues,i.watch=!!t.shouldUnregister,h.state.next({submitCount:Oe.keepSubmitCount?r.submitCount:0,isDirty:Ze?!1:Oe.keepDirty?r.isDirty:!!(Oe.keepDefaultValues&&!L0(ye,a)),isSubmitted:Oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Ze?{}:Oe.keepDirtyValues?Oe.keepDefaultValues&&s?ny(a,s):r.dirtyFields:Oe.keepDefaultValues&&ye?ny(a,ye):Oe.keepDirty?r.dirtyFields:{},touchedFields:Oe.keepTouched?r.touchedFields:{},errors:Oe.keepErrors?r.errors:{},isSubmitSuccessful:Oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},_e=(ye,Oe)=>De(xd(ye)?ye(s):ye,Oe),he=(ye,Oe={})=>{const Re=or(n,ye),qe=Re&&Re._f;if(qe){const Ze=qe.refs?qe.refs[0]:qe.ref;Ze.focus&&(Ze.focus(),Oe.shouldSelect&&xd(Ze.select)&&Ze.select())}},je=ye=>{r={...r,...ye}},Xe={control:{register:ce,unregister:Ae,getFieldState:re,handleSubmit:ne,setError:q,_subscribe:te,_runSchema:w,_focusError:pe,_getWatch:I,_getDirty:D,_setValid:v,_setFieldArray:y,_setDisabledField:oe,_setErrors:N,_getFieldArray:U,_reset:De,_resetDefaultValues:()=>xd(t.defaultValues)&&t.defaultValues().then(ye=>{_e(ye,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:M,_disableForm:Ie,_subjects:h,_proxyFormState:d,get _fields(){return n},get _formValues(){return s},get _state(){return i},set _state(ye){i=ye},get _defaultValues(){return a},get _names(){return o},set _names(ye){o=ye},get _formState(){return r},get _options(){return t},set _options(ye){t={...t,...ye}}},subscribe:ie,trigger:z,register:ce,handleSubmit:ne,watch:J,setValue:H,getValues:G,reset:_e,resetField:Se,clearErrors:R,unregister:Ae,setError:q,setFocus:he,getFieldState:re};return{...Xe,formControl:Xe}}var _0=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},MI=(e,t,r={})=>r.shouldFocus||Za(r.shouldFocus)?r.focusName||`${e}.${Za(r.focusIndex)?t:r.focusIndex}.`:"",UI=(e,t)=>[...e,...Xl(t)],QI=e=>Array.isArray(e)?e.map(()=>{}):void 0;function HI(e,t,r){return[...e.slice(0,t),...Xl(r),...e.slice(t)]}var VI=(e,t,r)=>Array.isArray(e)?(Za(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],zI=(e,t)=>[...Xl(t),...Xl(e)];function UAt(e,t){let r=0;const n=[...e];for(const a of t)n.splice(a-r,1),r++;return zk(n).length?n:[]}var $I=(e,t)=>Za(t)?[]:UAt(e,Xl(t).sort((r,n)=>r-n)),GI=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]},zX=(e,t,r)=>(e[t]=r,e);function QAt(e){const t=CAt(),{control:r=t.control,name:n,keyName:a="id",shouldUnregister:s,rules:i}=e,[o,c]=lt.useState(r._getFieldArray(n)),u=lt.useRef(r._getFieldArray(n).map(_0)),d=lt.useRef(o),f=lt.useRef(!1);d.current=o,r._names.array.add(n),lt.useMemo(()=>i&&r.register(n,i),[r,i,n]),Rde(()=>r._subjects.array.subscribe({next:({values:S,name:B})=>{if(B===n||!B){const w=or(S,n);Array.isArray(w)&&(c(w),u.current=w.map(_0))}}}).unsubscribe,[r,n]);const h=lt.useCallback(S=>{f.current=!0,r._setFieldArray(n,S)},[r,n]),p=(S,B)=>{const w=Xl(Ja(S)),_=UI(r._getFieldArray(n),w);r._names.focus=MI(n,_.length-1,B),u.current=UI(u.current,w.map(_0)),h(_),c(_),r._setFieldArray(n,_,UI,{argA:QI(S)})},g=(S,B)=>{const w=Xl(Ja(S)),_=zI(r._getFieldArray(n),w);r._names.focus=MI(n,0,B),u.current=zI(u.current,w.map(_0)),h(_),c(_),r._setFieldArray(n,_,zI,{argA:QI(S)})},v=S=>{const B=$I(r._getFieldArray(n),S);u.current=$I(u.current,S),h(B),c(B),!Array.isArray(or(r._fields,n))&&Ia(r._fields,n,void 0),r._setFieldArray(n,B,$I,{argA:S})},b=(S,B,w)=>{const _=Xl(Ja(B)),F=HI(r._getFieldArray(n),S,_);r._names.focus=MI(n,S,w),u.current=HI(u.current,S,_.map(_0)),h(F),c(F),r._setFieldArray(n,F,HI,{argA:S,argB:QI(B)})},y=(S,B)=>{const w=r._getFieldArray(n);GI(w,S,B),GI(u.current,S,B),h(w),c(w),r._setFieldArray(n,w,GI,{argA:S,argB:B},!1)},C=(S,B)=>{const w=r._getFieldArray(n);VI(w,S,B),VI(u.current,S,B),h(w),c(w),r._setFieldArray(n,w,VI,{argA:S,argB:B},!1)},N=(S,B)=>{const w=Ja(B),_=zX(r._getFieldArray(n),S,w);u.current=[..._].map((F,M)=>!F||M===S?_0():u.current[M]),h(_),c([..._]),r._setFieldArray(n,_,zX,{argA:S,argB:w},!0,!1)},T=S=>{const B=Xl(Ja(S));u.current=B.map(_0),h([...B]),c([...B]),r._setFieldArray(n,[...B],w=>w,{},!0,!1)};return lt.useEffect(()=>{if(r._state.action=!1,XO(n,r._names)&&r._subjects.state.next({...r._formState}),f.current&&(!ax(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!ax(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([n]).then(S=>{const B=or(S.errors,n),w=or(r._formState.errors,n);(w?!B&&w.type||B&&(w.type!==B.type||w.message!==B.message):B&&B.type)&&(B?Ia(r._formState.errors,n,B):Hs(r._formState.errors,n),r._subjects.state.next({errors:r._formState.errors}))});else{const S=or(r._fields,n);S&&S._f&&!(ax(r._options.reValidateMode).isOnSubmit&&ax(r._options.mode).isOnSubmit)&&YO(S,r._names.disabled,r._formValues,r._options.criteriaMode===Nu.all,r._options.shouldUseNativeValidation,!0).then(B=>!dl(B)&&r._subjects.state.next({errors:zde(r._formState.errors,B,n)}))}r._subjects.state.next({name:n,values:Ja(r._formValues)}),r._names.focus&&Nx(r._fields,(S,B)=>{if(r._names.focus&&B.startsWith(r._names.focus)&&S.focus)return S.focus(),1}),r._names.focus="",r._setValid(),f.current=!1},[o,n,r]),lt.useEffect(()=>(!or(r._formValues,n)&&r._setFieldArray(n),()=>{const S=(B,w)=>{const _=or(r._fields,B);_&&_._f&&(_._f.mount=w)};r._options.shouldUnregister||s?r.unregister(n):S(n,!1)}),[n,r,a,s]),{swap:lt.useCallback(y,[h,n,r]),move:lt.useCallback(C,[h,n,r]),prepend:lt.useCallback(g,[h,n,r]),append:lt.useCallback(p,[h,n,r]),remove:lt.useCallback(v,[h,n,r]),insert:lt.useCallback(b,[h,n,r]),update:lt.useCallback(N,[h,n,r]),replace:lt.useCallback(T,[h,n,r]),fields:lt.useMemo(()=>o.map((S,B)=>({...S,[a]:u.current[B]||_0()})),[o,a])}}function HAt(e={}){const t=lt.useRef(void 0),r=lt.useRef(void 0),[n,a]=lt.useState({isDirty:!1,isValidating:!1,isLoading:xd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:xd(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!xd(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:i,...o}=MAt(e);t.current={...o,formState:n}}const s=t.current.control;return s._options=e,Rde(()=>{const i=s._subscribe({formState:s._proxyFormState,callback:()=>a({...s._formState}),reRenderRoot:!0});return a(o=>({...o,isReady:!0})),s._formState.isReady=!0,i},[s]),lt.useEffect(()=>s._disableForm(e.disabled),[s,e.disabled]),lt.useEffect(()=>{e.mode&&(s._options.mode=e.mode),e.reValidateMode&&(s._options.reValidateMode=e.reValidateMode)},[s,e.mode,e.reValidateMode]),lt.useEffect(()=>{e.errors&&(s._setErrors(e.errors),s._focusError())},[s,e.errors]),lt.useEffect(()=>{e.shouldUnregister&&s._subjects.state.next({values:s._getWatch()})},[s,e.shouldUnregister]),lt.useEffect(()=>{if(s._proxyFormState.isDirty){const i=s._getDirty();i!==n.isDirty&&s._subjects.state.next({isDirty:i})}},[s,n.isDirty]),lt.useEffect(()=>{e.values&&!L0(e.values,r.current)?(s._reset(e.values,{keepFieldsRef:!0,...s._options.resetOptions}),r.current=e.values,a(i=>({...i}))):s._resetDefaultValues()},[s,e.values]),lt.useEffect(()=>{s._state.mount||(s._setValid(),s._state.mount=!0),s._state.watch&&(s._state.watch=!1,s._subjects.state.next({...s._formState})),s._removeUnmounted()}),t.current.formState=_At(n,s),t.current}const JO=It(tn,"alternancias");async function VAt(e){return(await Un(JO,{...e,createdAt:el(),updatedAt:el()})).id}async function zAt({especialidad:e,pageSize:t=10,lastDoc:r}){let n=tr(JO,Rr("createdAt","desc"),Nd(t));e&&(n=tr(JO,vn("especialidad","==",e),Rr("createdAt","desc"),Nd(t))),r&&(n=tr(n,hZ(r)));const a=await Pa(n);return{items:a.docs.map(i=>({id:i.id,...i.data()})),lastDoc:a.docs[a.docs.length-1]}}async function $At(e,t){const r=pr(tn,"alternancias",e);await Ld(r,{...t,updatedAt:el()})}async function GAt(e){const t=pr(tn,"alternancias",e);await ts(t)}async function KAt(e,t,r){const n=It(tn,"alternancias",e,t);await Un(n,{...r,createdAt:el()})}async function qAt(e,t){const r=`alternancias/${e}/evidencias/${Date.now()}_${t.name}`,n=s4(UZ,r);await MZ(n,t);const a=await rP(n);return await KAt(e,"evidencias",{url:a,path:r,nombre:t.name}),{url:a,path:r}}const up=({title:e,icon:t,children:r,accent:n="indigo"})=>{const a={indigo:"border-indigo-200 bg-indigo-50/60",emerald:"border-emerald-200 bg-emerald-50/60",amber:"border-amber-200 bg-amber-50/60",sky:"border-sky-200 bg-sky-50/60",slate:"border-slate-200 bg-white/70"};return l.jsxs("div",{className:`rounded-2xl border ${a[n]} p-4 md:p-5 shadow-sm`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[l.jsx("div",{className:"inline-flex items-center justify-center w-9 h-9 rounded-xl bg-white shadow-sm border border-slate-200",children:t}),l.jsx("h2",{className:"text-lg md:text-xl font-semibold text-slate-800",children:e})]}),r]})},EA=({children:e,hint:t})=>l.jsxs("div",{className:"mb-1 flex items-center gap-2",children:[l.jsx("span",{className:"text-sm font-medium text-slate-700",children:e}),t&&l.jsx("span",{className:"text-[11px] text-slate-500",children:t})]}),C_=({children:e,tone:t="indigo"})=>{const r={indigo:"bg-indigo-100 text-indigo-700 border-indigo-200",emerald:"bg-emerald-100 text-emerald-700 border-emerald-200",amber:"bg-amber-100 text-amber-800 border-amber-200",sky:"bg-sky-100 text-sky-700 border-sky-200"};return l.jsx("span",{className:`text-xs px-2 py-1 rounded-full border ${r[t]}`,children:e})},dp=({title:e,onClick:t,tone:r="neutral",children:n,type:a="button",disabled:s})=>{const i={primary:"bg-indigo-600 hover:bg-indigo-700 text-white border border-indigo-700 shadow-sm",danger:"bg-rose-600 hover:bg-rose-700 text-white border border-rose-700 shadow-sm",warning:"bg-amber-500 hover:bg-amber-600 text-white border border-amber-600 shadow-sm",success:"bg-emerald-600 hover:bg-emerald-700 text-white border border-emerald-700 shadow-sm",neutral:"bg-white hover:bg-slate-50 text-slate-700 border border-slate-200 shadow-sm"};return l.jsx("button",{type:a,title:e,onClick:t,disabled:s,className:`inline-flex items-center gap-2 px-3 py-2 rounded-xl text-sm transition ${i[r]} disabled:opacity-60`,children:n})},WAt=({currentUser:e})=>{const[t,r]=k.useState([]),[n,a]=k.useState(null),[s,i]=k.useState(!1),{register:o,control:c,handleSubmit:u,reset:d,watch:f,setValue:h,formState:{isSubmitting:p}}=HAt({defaultValues:{especialidad:"",curso:[],institucion:"",modulos:[],tipoAlternancia:[],fundamentacion:"",actividades:[],equipo:[],contrapartes:[],tutores:[],analisisCurricular:""}}),g=QAt({control:c,name:"actividades"}),v=["COORDINACION_TP","SUBDIRECCION"],b=((e==null?void 0:e.role)||"").toString().trim().toUpperCase();if(!(!b||v.some(P=>b.includes(P))))return l.jsx("div",{className:"p-6",children:l.jsxs("div",{className:"rounded-xl border border-rose-200 bg-rose-50/60 p-4 text-rose-700 flex items-center gap-2",children:[l.jsx(Uye,{className:"w-5 h-5"}),"Acceso no autorizado"]})});const C=P=>(P||"").replace(/\s*[-–]\s*\d+\s*horas?$/i,"").trim(),N=(P,X)=>{var H;return!P||!X?[]:((H=lbe[P])==null?void 0:H[X])??[]},T=f("especialidad"),S=f("modulos")||[],B=k.useMemo(()=>T?sbe[T]??[]:[],[T]),w=k.useMemo(()=>T?obe[T]??[]:[],[T]);k.useEffect(()=>{h("curso",[]),h("modulos",[]);const P=[...f("actividades")||[]].map(X=>({...X,modulo:"",oa:""}));h("actividades",P)},[T]),k.useEffect(()=>{const P=[...f("actividades")||[]].map(X=>X.modulo&&!S.includes(X.modulo)?{...X,modulo:"",oa:""}:X);h("actividades",P)},[S]);const _=async()=>{i(!0);const{items:P}=await zAt({});r(P),i(!1)};k.useEffect(()=>{_()},[]);const F=async P=>{n?await $At(n,{...P}):await VAt({...P,createdBy:(e==null?void 0:e.email)||"desconocido"}),d(),a(null),await _()},M=P=>{const X=Array.isArray(P.curso)?P.curso:P.curso?[P.curso]:[],H=Array.isArray(P.modulos)?P.modulos.map(V=>C(V)):[],Y=Array.isArray(P.actividades)?P.actividades.map(V=>({...V,modulo:V!=null&&V.modulo?C(V.modulo):"",oa:(V==null?void 0:V.oa)||""})):[];d({...P,curso:X,modulos:H,actividades:Y}),a(P.id),window.scrollTo({top:0,behavior:"smooth"})},D=async P=>{confirm("¿Eliminar esta alternancia?")&&(await GAt(P),await _())},I=async(P,X)=>{await qAt(P,X),alert("Evidencia subida correctamente")},U=P=>{const X=Array.from(P.currentTarget.selectedOptions).map(H=>H.value);h("curso",X,{shouldDirty:!0})};return l.jsxs("div",{className:"p-4 md:p-6",children:[l.jsx("div",{className:"mb-6 rounded-2xl bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white p-5 shadow-sm",children:l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-11 h-11 rounded-xl bg-white/10 flex items-center justify-center",children:l.jsx(KZ,{className:"w-6 h-6"})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-xl md:text-2xl font-semibold",children:"Formación por Alternancia"}),l.jsx("p",{className:"text-white/90 text-sm",children:"Registra planes, actividades y evidencias. Interfaz moderna, responsiva y con íconos."})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs(dp,{title:"Nuevo plan",onClick:()=>{d(),a(null)},tone:"neutral",children:[l.jsx(HS,{className:"w-4 h-4"}),"Limpiar"]}),l.jsxs(dp,{title:"Guardar",type:"submit",tone:"success",disabled:p,children:[p?l.jsx(U0,{className:"w-4 h-4 animate-spin"}):l.jsx(pw,{className:"w-4 h-4"}),"Guardar"]})]})]})}),l.jsx(up,{title:"Planes guardados",icon:l.jsx(EF,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:s?l.jsxs("div",{className:"flex items-center gap-2 text-slate-600",children:[l.jsx(U0,{className:"w-4 h-4 animate-spin"})," Cargando…"]}):t.length===0?l.jsx("p",{className:"text-slate-500 text-sm",children:"No hay alternancias registradas"}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:t.map(P=>l.jsx("div",{className:"rounded-2xl border border-slate-200 bg-white p-4 shadow-sm hover:shadow-md transition",children:l.jsxs("div",{className:"flex items-start justify-between gap-2",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-semibold",children:[l.jsx(_T,{className:"w-4 h-4 text-indigo-600"}),P.especialidad]}),l.jsxs("div",{className:"text-sm text-slate-600 flex flex-wrap gap-2",children:[l.jsx(C_,{tone:"indigo",children:Array.isArray(P.curso)?P.curso.join(", "):P.curso}),l.jsx(C_,{tone:"sky",children:P.institucion}),(Array.isArray(P.tipoAlternancia)?P.tipoAlternancia:[]).slice(0,2).map(X=>l.jsx(C_,{tone:"emerald",children:X},X))]})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("label",{className:"cursor-pointer inline-flex items-center gap-1 rounded-xl bg-amber-500 hover:bg-amber-600 text-white text-xs px-3 py-2 transition",children:[l.jsx(JZ,{className:"w-4 h-4"}),l.jsx("input",{type:"file",className:"hidden",onChange:X=>X.target.files&&I(P.id,X.target.files[0])}),"Evidencia"]}),l.jsxs(dp,{title:"Editar",onClick:()=>M(P),children:[l.jsx(CF,{className:"w-4 h-4"})," Editar"]}),l.jsxs(dp,{title:"Eliminar",onClick:()=>D(P.id),tone:"danger",children:[l.jsx(Dd,{className:"w-4 h-4"})," Eliminar"]})]})]})},P.id))})}),l.jsxs("form",{onSubmit:u(F),className:"mt-6 space-y-5",children:[l.jsx(up,{title:"Contexto de la Alternancia",icon:l.jsx(RS,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx(EA,{children:"Especialidad"}),l.jsxs("div",{className:"relative",children:[l.jsx(_T,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("especialidad"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-indigo-100",children:[l.jsx("option",{value:"",children:"Selecciona…"}),nbe.map(P=>l.jsx("option",{value:P,children:P},P))]})]})]}),l.jsxs("div",{children:[l.jsx(EA,{children:"Institución"}),l.jsxs("div",{className:"relative",children:[l.jsx(RS,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsxs("select",{...o("institucion"),className:"w-full appearance-none rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-sky-100",children:[l.jsx("option",{value:"",children:"Selecciona…"}),abe.map(P=>l.jsx("option",{value:P,children:P},P))]})]})]}),l.jsxs("div",{children:[l.jsx(EA,{hint:"Ctrl/Cmd + clic para seleccionar múltiples cursos.",children:"Cursos"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ou,{className:"w-4 h-4 absolute left-3 top-3 text-slate-400"}),l.jsx("select",{multiple:!0,size:4,...o("curso"),onChange:U,className:"w-full min-h-[120px] rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-emerald-100 disabled:opacity-50",disabled:!T,children:T?B.map(P=>l.jsx("option",{value:P,children:P},P)):l.jsx("option",{value:"",children:"Elige especialidad primero"})})]}),l.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:(f("curso")||[]).map(P=>l.jsx(C_,{tone:"sky",children:P},P))})]})]})}),l.jsx(up,{title:"Módulos implicados",icon:l.jsx(dye,{className:"w-5 h-5 text-emerald-700"}),accent:"emerald",children:T?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:w.map(P=>l.jsxs("label",{className:"flex items-start gap-2 rounded-xl border border-emerald-200 bg-white p-3 shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:P,className:"mt-1 accent-emerald-600",...o("modulos")}),l.jsx("span",{className:"text-sm text-slate-700",children:P})]},P))}):l.jsx("p",{className:"text-sm text-slate-500",children:"Elige una especialidad para ver los módulos."})}),l.jsx(up,{title:"Tipo de Alternancia",icon:l.jsx(hye,{className:"w-5 h-5 text-amber-700"}),accent:"amber",children:l.jsx("div",{className:"flex gap-3 flex-wrap",children:ibe.map(P=>l.jsxs("label",{className:"inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-3 py-2 text-sm shadow-sm hover:shadow transition",children:[l.jsx("input",{type:"checkbox",value:P,className:"accent-amber-600",...o("tipoAlternancia")}),l.jsx("span",{className:"text-slate-700",children:P})]},P))})}),l.jsx(up,{title:"Fundamentación técnico‑pedagógica",icon:l.jsx(wbe,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("fundamentacion"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Describe brevemente la finalidad pedagógica, vínculos curriculares y el aporte para los estudiantes."})}),l.jsx(up,{title:"Plan de actividades",icon:l.jsx(EF,{className:"w-5 h-5 text-indigo-700"}),accent:"indigo",children:l.jsxs("div",{className:"space-y-3",children:[g.fields.map((P,X)=>{const H=f(`actividades.${X}.modulo`)||"",Y=N(T,H);return l.jsxs("div",{className:"rounded-2xl border border-slate-200 bg-white p-3 shadow-sm",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(EA,{children:"Fecha"}),l.jsx(yd,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{type:"date",placeholder:"Fecha",...o(`actividades.${X}.fecha`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(EA,{children:"Tipo"}),l.jsx("input",{placeholder:"Pasantía, visita, taller...",...o(`actividades.${X}.tipo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{children:[l.jsx(EA,{children:"Actividad"}),l.jsx("input",{placeholder:"Descripción breve",...o(`actividades.${X}.actividad`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(EA,{children:"Lugar"}),l.jsx(LS,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Empresa/IP/CFT/Lab",...o(`actividades.${X}.lugar`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(EA,{children:"Evidencias"}),l.jsx(Wbe,{className:"w-4 h-4 absolute left-3 top-9 text-slate-400"}),l.jsx("input",{placeholder:"Informe, fotos, lista asistencia...",...o(`actividades.${X}.evidencias`),className:"w-full rounded-xl border border-slate-300 bg-white px-9 py-2 text-sm shadow-sm"})]})]}),l.jsxs("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx(EA,{children:"Módulo"}),l.jsxs("select",{...o(`actividades.${X}.modulo`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!T||S.length===0,children:[l.jsx("option",{value:"",children:!T&&"Elige especialidad arriba"||S.length===0&&"Selecciona módulos arriba"||"Selecciona…"}),S.map(V=>l.jsx("option",{value:V,children:V},V))]})]}),l.jsxs("div",{children:[l.jsx(EA,{children:"Objetivo de Aprendizaje (OA)"}),l.jsxs("select",{...o(`actividades.${X}.oa`),className:"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm shadow-sm disabled:opacity-50",disabled:!H||Y.length===0,children:[l.jsx("option",{value:"",children:H?Y.length===0?"Sin OA definidos para este módulo":"Selecciona…":"Selecciona módulo primero"}),Y.map(V=>l.jsx("option",{value:V,children:V},V))]})]})]}),l.jsx("div",{className:"mt-3 flex justify-end",children:l.jsxs(dp,{title:"Eliminar fila",onClick:()=>g.remove(X),tone:"danger",children:[l.jsx(Dd,{className:"w-4 h-4"}),"Eliminar actividad"]})})]},P.id)}),l.jsxs(dp,{title:"Agregar actividad",onClick:()=>g.append({fecha:"",tipo:"",actividad:"",lugar:"",evidencias:"",modulo:"",oa:""}),tone:"primary",children:[l.jsx(th,{className:"w-4 h-4"})," Agregar actividad"]})]})}),l.jsx(up,{title:"Análisis Curricular",icon:l.jsx(_T,{className:"w-5 h-5 text-slate-700"}),accent:"slate",children:l.jsx("textarea",{...o("analisisCurricular"),className:"w-full rounded-xl border border-slate-300 bg-white p-3 text-sm shadow-sm focus:outline-none focus:ring-4 focus:ring-slate-100",rows:4,placeholder:"Módulos implicados + OA/AE asociados + distribución de horas (liceo/otro lugar)."})}),l.jsx("div",{className:"flex items-center justify-end gap-2",children:l.jsxs(dp,{title:"Guardar",type:"submit",tone:"success",disabled:p,children:[p?l.jsx(U0,{className:"w-4 h-4 animate-spin"}):l.jsx(eh,{className:"w-4 h-4"}),"Guardar"]})})]})]})},XAt=e=>{if(!e)return"";let t=e.trim().toLowerCase();return t=t.replace(/°/g,"º"),t=t.replace(/\s+(medio|básico|basico)/g,""),t=t.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),t=t.replace(/^(\d)(?![º])/,"$1º"),t=t.replace(/\s+/g,"").toUpperCase(),t},YAt=({currentUser:e,onLogout:t,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,unreadMessagesCount:s,refreshUnreadCount:i})=>{const o=e.profile,c=k.useMemo(()=>{const T=Z1e[o]||[];return o!==Yt.ESTUDIANTE?T:T.filter(S=>{if(S.name==="Asistencia a Empresa"){const B=XAt(e.curso||"");return B.startsWith("3º")||B.startsWith("4º")}return!0})},[o,e.curso]),[u,d]=k.useState(null),[f,h]=k.useState(!1),[p,g]=k.useState(!1),v=k.useRef([]);k.useEffect(()=>{c&&c.length>0?d(c[0]):d(null)},[o,c]);const b=k.useCallback(T=>{d(T),window.innerWidth<768&&h(!1)},[]),y=k.useCallback(T=>{const S=c.find(B=>B.name===T);S&&b(S)},[c,b]),C=()=>l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center h-20 px-4 border-b border-white/10 bg-[#121926]",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-400 flex items-center justify-center shadow-inner",children:l.jsx("span",{className:"text-slate-900 inline-flex items-center justify-center",children:l.jsx(R1e,{className:"w-5 h-5"})})}),!p&&l.jsx("span",{className:"text-white font-extrabold text-xl tracking-tight",children:"Gestión LIR"})]}),l.jsx("button",{type:"button",onClick:()=>g(T=>!T),className:"ml-auto w-9 h-9 inline-flex items-center justify-center rounded-full hover:bg-white/10 transition",title:p?"Expandir":"Colapsar",children:p?l.jsx(qZ,{className:"w-5 h-5 text-slate-200"}):l.jsx(hw,{className:"w-5 h-5 text-slate-200"})})]}),l.jsx("nav",{className:"flex-1 overflow-y-auto p-3 bg-[#1B2433]",onKeyDown:T=>{var B,w,_;const S=v.current.findIndex(F=>F===document.activeElement);if(T.key==="ArrowDown"){T.preventDefault();const F=Math.min(S===-1?0:S+1,v.current.length-1);(B=v.current[F])==null||B.focus()}else if(T.key==="ArrowUp"){T.preventDefault();const F=Math.max(S===-1?0:S-1,0);(w=v.current[F])==null||w.focus()}else T.key==="Enter"&&S>=0&&((_=v.current[S])==null||_.click())},children:l.jsx("div",{className:"space-y-1",children:c.map((T,S)=>{const B=(u==null?void 0:u.name)===T.name;return l.jsxs("button",{ref:w=>v.current[S]=w,onClick:()=>b(T),className:`w-full group flex items-center ${p?"justify-center px-2":"justify-start px-4"} gap-3 py-3 rounded-2xl transition-all
                  ${B?"bg-amber-400 text-slate-900 font-bold shadow-md":"text-slate-300 hover:text-white hover:bg-white/5"}`,title:p?T.name:void 0,children:[l.jsx("span",{className:`shrink-0 ${B?"text-slate-900":"text-slate-300 group-hover:text-white"}`,children:T.icon}),!p&&l.jsx("span",{className:"text-[1.05rem] leading-tight whitespace-normal break-words text-left",children:T.name})]},T.name)})})})]}),N=()=>{if(!u)return l.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full flex items-center justify-center",children:l.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return l.jsx($2e,{profile:o});if(u.name==="Muro de Anuncios")return l.jsx(X2e,{currentUser:e});if(u.name==="Mensajería Interna")return l.jsx(CDe,{currentUser:e,refreshUnreadCount:i});if(u.name==="Generador de Actas")return l.jsx(aEe,{});if(o===Yt.SUBDIRECCION){if(u.name==="Dashboard")return l.jsx(Owe,{currentUser:e});if(u.name==="Administración")return l.jsx(k6e,{});if(u.name==="Seguimiento Curricular")return l.jsx(tut,{currentUser:e});if(u.name==="Acompañamiento docente")return l.jsx(pDe,{currentUser:e});if(u.name==="Análisis Taxonómico")return l.jsx(out,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx(Lz,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return l.jsx(Bwe,{currentUser:e});if(u.name==="Crear horarios")return l.jsx(g2e,{});if(u.name==="Seguimiento de acciones pedagógicas")return l.jsx(C2e,{});if(u.name==="Inclusión")return l.jsx(PV,{currentUser:e})}if(o===Yt.PROFESORADO){if(u.name==="Planificación")return l.jsx(R2e,{currentUser:e});if(u.name==="Mis Acompañamientos")return l.jsx(Oct,{currentUser:e});if(u.name==="Recursos de Aprendizaje")return l.jsx(bct,{});if(u.name==="Análisis Taxonómico")return l.jsx(AnalisisTaxonómico,{currentUser:e});if(u.name==="Interdisciplinario")return l.jsx(Lz,{});if(u.name==="Inclusión")return l.jsx(PV,{currentUser:e});if(u.name==="Actividades Remotas")return l.jsx(aOe,{});if(u.name==="Evaluación de Aprendizajes")return l.jsx(s_e,{});if(u.name==="Evaluaciones Formativas")return l.jsx(aDe,{currentUser:e})}if(o===Yt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return l.jsx(L6e,{});if(u.name==="Asistencia Dual")return l.jsx(HOe,{});if(u.name==="Pañol")return l.jsx(Drt,{});if(u.name==="Gestión de Empresas")return l.jsx(xAt,{});if(u.name==="Alternancia TP")return l.jsx(WAt,{})}if(o===Yt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return l.jsx(xOe,{currentUser:e});if(u.name==="Evaluación Formativa")return l.jsx(Nct,{currentUser:e});if(u.name==="Tareas Interdisciplinarias")return l.jsx(Ict,{currentUser:e});if(u.name==="Asistencia a Empresa")return l.jsx(OOe,{currentUser:e})}return l.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-2xl shadow-md h-full w-full animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),l.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:l.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",l.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return l.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-b from-slate-100 to-slate-50 dark:from-slate-950 dark:to-slate-900",children:[l.jsx(uwe,{currentUser:e,onLogout:t,onNavigate:y,onUserUpdate:r,onChangeProfile:n,canChangeProfile:a,toggleSidebar:()=>h(T=>!T),unreadMessagesCount:s,refreshUnreadCount:i}),l.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f&&l.jsx("div",{onClick:()=>h(!1),className:"fixed inset-0 bg-black/40 backdrop-blur-[1px] z-20 md:hidden"}),l.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 ${p?"w-16":"w-72"} 
          bg-[#0F1724] text-white flex flex-col transform md:translate-x-0
          ${f?"translate-x-0":"-translate-x-full"} md:translate-x-0
          transition-all duration-300 ease-in-out border-r border-white/10`,children:l.jsx(C,{})}),l.jsx("main",{className:"flex-1 overflow-y-auto",children:l.jsxs("div",{className:"relative p-5 md:p-8 space-y-6",children:[l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{className:"md:hidden inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow hover:shadow-md transition",onClick:()=>h(!0),title:"Abrir menú",children:l.jsx(wye,{className:"w-5 h-5"})}),(u==null?void 0:u.icon)&&l.jsx("span",{className:"inline-flex items-center justify-center w-10 h-10 rounded-xl bg-white dark:bg-slate-800 shadow",children:u.icon}),l.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-slate-800 dark:text-slate-100",children:(u==null?void 0:u.name)??"Dashboard"})]})}),l.jsx("div",{className:"min-h-[60vh]",children:N()})]})})]})]})},JAt=({onSelectProfile:e,isAdminView:t=!1})=>l.jsxs("div",{className:`relative flex flex-col items-center justify-center min-h-screen p-6 overflow-hidden
                    bg-gradient-to-br from-blue-50 via-blue-100 to-yellow-50
                    dark:from-slate-900 dark:via-slate-950 dark:to-black`,children:[l.jsxs("div",{className:"pointer-events-none absolute inset-0 -z-10",children:[l.jsx("div",{className:`absolute -top-24 -left-16 h-72 w-72 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-yellow-300 to-yellow-200
                        dark:from-yellow-400/20 dark:to-yellow-500/20`}),l.jsx("div",{className:`absolute top-40 -right-10 h-80 w-80 rounded-full blur-3xl opacity-40
                        bg-gradient-to-tr from-blue-300 to-sky-300
                        dark:from-blue-500/20 dark:to-sky-500/20`}),l.jsx("div",{className:`absolute bottom-0 left-1/2 -translate-x-1/2 h-96 w-96 rounded-full blur-3xl opacity-30
                        bg-gradient-to-tr from-sky-200 to-blue-200
                        dark:from-sky-500/20 dark:to-blue-500/20`})]}),l.jsxs("div",{className:"text-center mb-10",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(sP,{})}),l.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-100 mt-2 drop-shadow-sm",children:"Gestión Pedagógica LIR"}),l.jsx("p",{className:"text-slate-700/80 dark:text-slate-300/80 mt-2 text-lg",children:t?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:J1e.map(r=>l.jsxs("button",{onClick:()=>e(r.id),className:`group relative overflow-hidden p-8 rounded-2xl
                       bg-white/10 dark:bg-white/5
                       backdrop-blur-xl border border-white/30 dark:border-white/10
                       shadow-lg hover:shadow-2xl hover:-translate-y-1.5
                       transition-all duration-300 ease-out
                       focus:outline-none focus:ring-4 focus:ring-yellow-400/40`,children:[l.jsx("div",{className:`pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100
                            transition-opacity duration-300
                            bg-gradient-to-br from-white/40 to-transparent`}),l.jsx("div",{className:"text-slate-800 dark:text-slate-200 group-hover:text-yellow-500 transition-colors duration-300",children:r.icon}),l.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-900 dark:text-slate-100 drop-shadow-[0_1px_0_rgba(0,0,0,0.1)]",children:r.label})]},r.id))}),l.jsxs("footer",{className:"absolute bottom-4 text-slate-600 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),ZAt=()=>{const[e,t]=k.useState(null),[r,n]=k.useState(null),[a,s]=k.useState(!0),[i,o]=k.useState(null),[c,u]=k.useState(!1),[d,f]=k.useState(null);k.useEffect(()=>{const C=SY(v2,async N=>{if(t(N),N)try{const T=await HZ(N.email);T?(n(T),T.profile===Yt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await xT())}catch{o("Error al conectar con la base de datos."),await xT()}else n(null),f(null),u(!1),o(null);s(!1)});return()=>C()},[]);const h=async(C,N)=>{if(o(null),!C.trim()||!N.trim()){o("Por favor ingrese email y contraseña");return}try{await O1e(C.trim(),N)}catch(T){switch(T.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},p=async C=>{try{await D1e(C)}catch(N){console.error("Error al enviar email de recuperación:",N)}},g=C=>{f(C),u(!1)},v=()=>{u(!0),f(null)},b=async()=>{try{await xT()}catch(C){console.error("Error al cerrar sesión:",C)}};if(a)return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"mb-4 flex justify-center items-center",children:l.jsx(sP,{})}),l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),l.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!e||!r)return l.jsx(cbe,{onLoginAttempt:h,onForgotPasswordRequest:p,error:i});if(c&&r.profile===Yt.SUBDIRECCION)return l.jsx(JAt,{onSelectProfile:g,isAdminView:!0});const y=d||r.profile;return l.jsx(YAt,{currentUser:{...r,profile:y},onLogout:b,onChangeProfile:r.profile===Yt.SUBDIRECCION?v:void 0,canChangeProfile:r.profile===Yt.SUBDIRECCION})},$de=document.getElementById("root");if(!$de)throw new Error("Could not find root element to mount to");const eft=lfe.createRoot($de);eft.render(l.jsx(lt.StrictMode,{children:l.jsx(ZAt,{})}));export{ga as _,rft as c,wl as g};
