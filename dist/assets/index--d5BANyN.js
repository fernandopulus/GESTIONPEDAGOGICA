(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var MIe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B5(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VC={exports:{}},eg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uk;function uV(){if(uk)return eg;uk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function r(n,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:t,type:n,key:i,ref:s!==void 0?s:null,props:a}}return eg.Fragment=e,eg.jsx=r,eg.jsxs=r,eg}var Ak;function AV(){return Ak||(Ak=1,VC.exports=uV()),VC.exports}var c=AV(),zC={exports:{}},Vr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dk;function dV(){if(dk)return Vr;dk=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(W){return W===null||typeof W!="object"?null:(W=h&&W[h]||W["@@iterator"],typeof W=="function"?W:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,y={};function _(W,ie,j){this.props=W,this.context=ie,this.refs=y,this.updater=j||g}_.prototype.isReactComponent={},_.prototype.setState=function(W,ie){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,ie,"setState")},_.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function T(){}T.prototype=_.prototype;function k(W,ie,j){this.props=W,this.context=ie,this.refs=y,this.updater=j||g}var D=k.prototype=new T;D.constructor=k,b(D,_.prototype),D.isPureReactComponent=!0;var M=Array.isArray,P={H:null,A:null,T:null,S:null,V:null},L=Object.prototype.hasOwnProperty;function C(W,ie,j,Y,ee,te){return j=te.ref,{$$typeof:t,type:W,key:ie,ref:j!==void 0?j:null,props:te}}function E(W,ie){return C(W.type,ie,void 0,void 0,void 0,W.props)}function B(W){return typeof W=="object"&&W!==null&&W.$$typeof===t}function O(W){var ie={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(j){return ie[j]})}var R=/\/+/g;function F(W,ie){return typeof W=="object"&&W!==null&&W.key!=null?O(""+W.key):ie.toString(36)}function Q(){}function H(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(Q,Q):(W.status="pending",W.then(function(ie){W.status==="pending"&&(W.status="fulfilled",W.value=ie)},function(ie){W.status==="pending"&&(W.status="rejected",W.reason=ie)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function ne(W,ie,j,Y,ee){var te=typeof W;(te==="undefined"||te==="boolean")&&(W=null);var ce=!1;if(W===null)ce=!0;else switch(te){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(W.$$typeof){case t:case e:ce=!0;break;case d:return ce=W._init,ne(ce(W._payload),ie,j,Y,ee)}}if(ce)return ee=ee(W),ce=Y===""?"."+F(W,0):Y,M(ee)?(j="",ce!=null&&(j=ce.replace(R,"$&/")+"/"),ne(ee,ie,j,"",function(fe){return fe})):ee!=null&&(B(ee)&&(ee=E(ee,j+(ee.key==null||W&&W.key===ee.key?"":(""+ee.key).replace(R,"$&/")+"/")+ce)),ie.push(ee)),1;ce=0;var be=Y===""?".":Y+":";if(M(W))for(var he=0;he<W.length;he++)Y=W[he],te=be+F(Y,he),ce+=ne(Y,ie,j,te,ee);else if(he=m(W),typeof he=="function")for(W=he.call(W),he=0;!(Y=W.next()).done;)Y=Y.value,te=be+F(Y,he++),ce+=ne(Y,ie,j,te,ee);else if(te==="object"){if(typeof W.then=="function")return ne(H(W),ie,j,Y,ee);throw ie=String(W),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ce}function J(W,ie,j){if(W==null)return W;var Y=[],ee=0;return ne(W,Y,"","",function(te){return ie.call(j,te,ee++)}),Y}function re(W){if(W._status===-1){var ie=W._result;ie=ie(),ie.then(function(j){(W._status===0||W._status===-1)&&(W._status=1,W._result=j)},function(j){(W._status===0||W._status===-1)&&(W._status=2,W._result=j)}),W._status===-1&&(W._status=0,W._result=ie)}if(W._status===1)return W._result.default;throw W._result}var G=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)};function q(){}return Vr.Children={map:J,forEach:function(W,ie,j){J(W,function(){ie.apply(this,arguments)},j)},count:function(W){var ie=0;return J(W,function(){ie++}),ie},toArray:function(W){return J(W,function(ie){return ie})||[]},only:function(W){if(!B(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Vr.Component=_,Vr.Fragment=r,Vr.Profiler=s,Vr.PureComponent=k,Vr.StrictMode=n,Vr.Suspense=l,Vr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Vr.__COMPILER_RUNTIME={__proto__:null,c:function(W){return P.H.useMemoCache(W)}},Vr.cache=function(W){return function(){return W.apply(null,arguments)}},Vr.cloneElement=function(W,ie,j){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var Y=b({},W.props),ee=W.key,te=void 0;if(ie!=null)for(ce in ie.ref!==void 0&&(te=void 0),ie.key!==void 0&&(ee=""+ie.key),ie)!L.call(ie,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&ie.ref===void 0||(Y[ce]=ie[ce]);var ce=arguments.length-2;if(ce===1)Y.children=j;else if(1<ce){for(var be=Array(ce),he=0;he<ce;he++)be[he]=arguments[he+2];Y.children=be}return C(W.type,ee,void 0,void 0,te,Y)},Vr.createContext=function(W){return W={$$typeof:i,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:a,_context:W},W},Vr.createElement=function(W,ie,j){var Y,ee={},te=null;if(ie!=null)for(Y in ie.key!==void 0&&(te=""+ie.key),ie)L.call(ie,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ee[Y]=ie[Y]);var ce=arguments.length-2;if(ce===1)ee.children=j;else if(1<ce){for(var be=Array(ce),he=0;he<ce;he++)be[he]=arguments[he+2];ee.children=be}if(W&&W.defaultProps)for(Y in ce=W.defaultProps,ce)ee[Y]===void 0&&(ee[Y]=ce[Y]);return C(W,te,void 0,void 0,null,ee)},Vr.createRef=function(){return{current:null}},Vr.forwardRef=function(W){return{$$typeof:o,render:W}},Vr.isValidElement=B,Vr.lazy=function(W){return{$$typeof:d,_payload:{_status:-1,_result:W},_init:re}},Vr.memo=function(W,ie){return{$$typeof:u,type:W,compare:ie===void 0?null:ie}},Vr.startTransition=function(W){var ie=P.T,j={};P.T=j;try{var Y=W(),ee=P.S;ee!==null&&ee(j,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(q,G)}catch(te){G(te)}finally{P.T=ie}},Vr.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Vr.use=function(W){return P.H.use(W)},Vr.useActionState=function(W,ie,j){return P.H.useActionState(W,ie,j)},Vr.useCallback=function(W,ie){return P.H.useCallback(W,ie)},Vr.useContext=function(W){return P.H.useContext(W)},Vr.useDebugValue=function(){},Vr.useDeferredValue=function(W,ie){return P.H.useDeferredValue(W,ie)},Vr.useEffect=function(W,ie,j){var Y=P.H;if(typeof j=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(W,ie)},Vr.useId=function(){return P.H.useId()},Vr.useImperativeHandle=function(W,ie,j){return P.H.useImperativeHandle(W,ie,j)},Vr.useInsertionEffect=function(W,ie){return P.H.useInsertionEffect(W,ie)},Vr.useLayoutEffect=function(W,ie){return P.H.useLayoutEffect(W,ie)},Vr.useMemo=function(W,ie){return P.H.useMemo(W,ie)},Vr.useOptimistic=function(W,ie){return P.H.useOptimistic(W,ie)},Vr.useReducer=function(W,ie,j){return P.H.useReducer(W,ie,j)},Vr.useRef=function(W){return P.H.useRef(W)},Vr.useState=function(W){return P.H.useState(W)},Vr.useSyncExternalStore=function(W,ie,j){return P.H.useSyncExternalStore(W,ie,j)},Vr.useTransition=function(){return P.H.useTransition()},Vr.version="19.1.1",Vr}var fk;function Wx(){return fk||(fk=1,zC.exports=dV()),zC.exports}var Z=Wx();const dt=B5(Z);var GC={exports:{}},tg={},qC={exports:{}},KC={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hk;function fV(){return hk||(hk=1,function(t){function e(J,re){var G=J.length;J.push(re);e:for(;0<G;){var q=G-1>>>1,W=J[q];if(0<s(W,re))J[q]=re,J[G]=W,G=q;else break e}}function r(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var re=J[0],G=J.pop();if(G!==re){J[0]=G;e:for(var q=0,W=J.length,ie=W>>>1;q<ie;){var j=2*(q+1)-1,Y=J[j],ee=j+1,te=J[ee];if(0>s(Y,G))ee<W&&0>s(te,Y)?(J[q]=te,J[ee]=G,q=ee):(J[q]=Y,J[j]=G,q=j);else if(ee<W&&0>s(te,G))J[q]=te,J[ee]=G,q=ee;else break e}}return re}function s(J,re){var G=J.sortIndex-re.sortIndex;return G!==0?G:J.id-re.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var l=[],u=[],d=1,h=null,m=3,g=!1,b=!1,y=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function M(J){for(var re=r(u);re!==null;){if(re.callback===null)n(u);else if(re.startTime<=J)n(u),re.sortIndex=re.expirationTime,e(l,re);else break;re=r(u)}}function P(J){if(y=!1,M(J),!b)if(r(l)!==null)b=!0,L||(L=!0,F());else{var re=r(u);re!==null&&ne(P,re.startTime-J)}}var L=!1,C=-1,E=5,B=-1;function O(){return _?!0:!(t.unstable_now()-B<E)}function R(){if(_=!1,L){var J=t.unstable_now();B=J;var re=!0;try{e:{b=!1,y&&(y=!1,k(C),C=-1),g=!0;var G=m;try{t:{for(M(J),h=r(l);h!==null&&!(h.expirationTime>J&&O());){var q=h.callback;if(typeof q=="function"){h.callback=null,m=h.priorityLevel;var W=q(h.expirationTime<=J);if(J=t.unstable_now(),typeof W=="function"){h.callback=W,M(J),re=!0;break t}h===r(l)&&n(l),M(J)}else n(l);h=r(l)}if(h!==null)re=!0;else{var ie=r(u);ie!==null&&ne(P,ie.startTime-J),re=!1}}break e}finally{h=null,m=G,g=!1}re=void 0}}finally{re?F():L=!1}}}var F;if(typeof D=="function")F=function(){D(R)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,H=Q.port2;Q.port1.onmessage=R,F=function(){H.postMessage(null)}}else F=function(){T(R,0)};function ne(J,re){C=T(function(){J(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_next=function(J){switch(m){case 1:case 2:case 3:var re=3;break;default:re=m}var G=m;m=re;try{return J()}finally{m=G}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(J,re){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var G=m;m=J;try{return re()}finally{m=G}},t.unstable_scheduleCallback=function(J,re,G){var q=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?q+G:q):G=q,J){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=G+W,J={id:d++,callback:re,priorityLevel:J,startTime:G,expirationTime:W,sortIndex:-1},G>q?(J.sortIndex=G,e(u,J),r(l)===null&&J===r(u)&&(y?(k(C),C=-1):y=!0,ne(P,G-q))):(J.sortIndex=W,e(l,J),b||g||(b=!0,L||(L=!0,F()))),J},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(J){var re=m;return function(){var G=m;m=re;try{return J.apply(this,arguments)}finally{m=G}}}}(KC)),KC}var mk;function hV(){return mk||(mk=1,qC.exports=fV()),qC.exports}var $C={exports:{}},Ni={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pk;function mV(){if(pk)return Ni;pk=1;var t=Wx();function e(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(e(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var i=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ni.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Ni.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return a(l,u,null,d)},Ni.flushSync=function(l){var u=i.T,d=n.p;try{if(i.T=null,n.p=2,l)return l()}finally{i.T=u,n.p=d,n.d.f()}},Ni.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,n.d.C(l,u))},Ni.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Ni.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?n.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&n.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ni.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);n.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&n.d.M(l)},Ni.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);n.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ni.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);n.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else n.d.m(l)},Ni.requestFormReset=function(l){n.d.r(l)},Ni.unstable_batchedUpdates=function(l,u){return l(u)},Ni.useFormState=function(l,u,d){return i.H.useFormState(l,u,d)},Ni.useFormStatus=function(){return i.H.useHostTransitionStatus()},Ni.version="19.1.1",Ni}var gk;function KL(){if(gk)return $C.exports;gk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),$C.exports=mV(),$C.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xk;function pV(){if(xk)return tg;xk=1;var t=hV(),e=Wx(),r=KL();function n(A){var f="https://react.dev/errors/"+A;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+A+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(A){return!(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)}function a(A){var f=A,p=A;if(A.alternate)for(;f.return;)f=f.return;else{A=f;do f=A,(f.flags&4098)!==0&&(p=f.return),A=f.return;while(A)}return f.tag===3?p:null}function i(A){if(A.tag===13){var f=A.memoizedState;if(f===null&&(A=A.alternate,A!==null&&(f=A.memoizedState)),f!==null)return f.dehydrated}return null}function o(A){if(a(A)!==A)throw Error(n(188))}function l(A){var f=A.alternate;if(!f){if(f=a(A),f===null)throw Error(n(188));return f!==A?null:A}for(var p=A,w=f;;){var I=p.return;if(I===null)break;var V=I.alternate;if(V===null){if(w=I.return,w!==null){p=w;continue}break}if(I.child===V.child){for(V=I.child;V;){if(V===p)return o(I),A;if(V===w)return o(I),f;V=V.sibling}throw Error(n(188))}if(p.return!==w.return)p=I,w=V;else{for(var le=!1,we=I.child;we;){if(we===p){le=!0,p=I,w=V;break}if(we===w){le=!0,w=I,p=V;break}we=we.sibling}if(!le){for(we=V.child;we;){if(we===p){le=!0,p=V,w=I;break}if(we===w){le=!0,w=V,p=I;break}we=we.sibling}if(!le)throw Error(n(189))}}if(p.alternate!==w)throw Error(n(190))}if(p.tag!==3)throw Error(n(188));return p.stateNode.current===p?A:f}function u(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A;for(A=A.child;A!==null;){if(f=u(A),f!==null)return f;A=A.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function F(A){return A===null||typeof A!="object"?null:(A=R&&A[R]||A["@@iterator"],typeof A=="function"?A:null)}var Q=Symbol.for("react.client.reference");function H(A){if(A==null)return null;if(typeof A=="function")return A.$$typeof===Q?null:A.displayName||A.name||null;if(typeof A=="string")return A;switch(A){case b:return"Fragment";case _:return"Profiler";case y:return"StrictMode";case P:return"Suspense";case L:return"SuspenseList";case B:return"Activity"}if(typeof A=="object")switch(A.$$typeof){case g:return"Portal";case D:return(A.displayName||"Context")+".Provider";case k:return(A._context.displayName||"Context")+".Consumer";case M:var f=A.render;return A=A.displayName,A||(A=f.displayName||f.name||"",A=A!==""?"ForwardRef("+A+")":"ForwardRef"),A;case C:return f=A.displayName||null,f!==null?f:H(A.type)||"Memo";case E:f=A._payload,A=A._init;try{return H(A(f))}catch{}}return null}var ne=Array.isArray,J=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},q=[],W=-1;function ie(A){return{current:A}}function j(A){0>W||(A.current=q[W],q[W]=null,W--)}function Y(A,f){W++,q[W]=A.current,A.current=f}var ee=ie(null),te=ie(null),ce=ie(null),be=ie(null);function he(A,f){switch(Y(ce,f),Y(te,A),Y(ee,null),f.nodeType){case 9:case 11:A=(A=f.documentElement)&&(A=A.namespaceURI)?PB(A):0;break;default:if(A=f.tagName,f=f.namespaceURI)f=PB(f),A=jB(f,A);else switch(A){case"svg":A=1;break;case"math":A=2;break;default:A=0}}j(ee),Y(ee,A)}function fe(){j(ee),j(te),j(ce)}function ge(A){A.memoizedState!==null&&Y(be,A);var f=ee.current,p=jB(f,A.type);f!==p&&(Y(te,A),Y(ee,p))}function de(A){te.current===A&&(j(ee),j(te)),be.current===A&&(j(be),Wp._currentValue=G)}var oe=Object.prototype.hasOwnProperty,Ue=t.unstable_scheduleCallback,tt=t.unstable_cancelCallback,Fe=t.unstable_shouldYield,Ee=t.unstable_requestPaint,De=t.unstable_now,Qe=t.unstable_getCurrentPriorityLevel,$e=t.unstable_ImmediatePriority,ut=t.unstable_UserBlockingPriority,Et=t.unstable_NormalPriority,lt=t.unstable_LowPriority,Dt=t.unstable_IdlePriority,zt=t.log,Jt=t.unstable_setDisableYieldValue,Rt=null,Ot=null;function qt(A){if(typeof zt=="function"&&Jt(A),Ot&&typeof Ot.setStrictMode=="function")try{Ot.setStrictMode(Rt,A)}catch{}}var It=Math.clz32?Math.clz32:br,Ft=Math.log,pt=Math.LN2;function br(A){return A>>>=0,A===0?32:31-(Ft(A)/pt|0)|0}var Zt=256,hn=4194304;function vr(A){var f=A&42;if(f!==0)return f;switch(A&-A){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return A&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return A}}function Ur(A,f,p){var w=A.pendingLanes;if(w===0)return 0;var I=0,V=A.suspendedLanes,le=A.pingedLanes;A=A.warmLanes;var we=w&134217727;return we!==0?(w=we&~V,w!==0?I=vr(w):(le&=we,le!==0?I=vr(le):p||(p=we&~A,p!==0&&(I=vr(p))))):(we=w&~V,we!==0?I=vr(we):le!==0?I=vr(le):p||(p=w&~A,p!==0&&(I=vr(p)))),I===0?0:f!==0&&f!==I&&(f&V)===0&&(V=I&-I,p=f&-f,V>=p||V===32&&(p&4194048)!==0)?f:I}function Dn(A,f){return(A.pendingLanes&~(A.suspendedLanes&~A.pingedLanes)&f)===0}function Fr(A,f){switch(A){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function da(){var A=Zt;return Zt<<=1,(Zt&4194048)===0&&(Zt=256),A}function an(){var A=hn;return hn<<=1,(hn&62914560)===0&&(hn=4194304),A}function ns(A){for(var f=[],p=0;31>p;p++)f.push(A);return f}function gs(A,f){A.pendingLanes|=f,f!==268435456&&(A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0)}function jr(A,f,p,w,I,V){var le=A.pendingLanes;A.pendingLanes=p,A.suspendedLanes=0,A.pingedLanes=0,A.warmLanes=0,A.expiredLanes&=p,A.entangledLanes&=p,A.errorRecoveryDisabledLanes&=p,A.shellSuspendCounter=0;var we=A.entanglements,Re=A.expirationTimes,rt=A.hiddenUpdates;for(p=le&~p;0<p;){var ft=31-It(p),bt=1<<ft;we[ft]=0,Re[ft]=-1;var st=rt[ft];if(st!==null)for(rt[ft]=null,ft=0;ft<st.length;ft++){var at=st[ft];at!==null&&(at.lane&=-536870913)}p&=~bt}w!==0&&nr(A,w,0),V!==0&&I===0&&A.tag!==0&&(A.suspendedLanes|=V&~(le&~f))}function nr(A,f,p){A.pendingLanes|=f,A.suspendedLanes&=~f;var w=31-It(f);A.entangledLanes|=f,A.entanglements[w]=A.entanglements[w]|1073741824|p&4194090}function Gr(A,f){var p=A.entangledLanes|=f;for(A=A.entanglements;p;){var w=31-It(p),I=1<<w;I&f|A[w]&f&&(A[w]|=f),p&=~I}}function fa(A){switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=128;break;case 268435456:A=134217728;break;default:A=0}return A}function Wn(A){return A&=-A,2<A?8<A?(A&134217727)!==0?32:268435456:8:2}function _s(){var A=re.p;return A!==0?A:(A=window.event,A===void 0?32:sk(A.type))}function Ba(A,f){var p=re.p;try{return re.p=A,f()}finally{re.p=p}}var Gt=Math.random().toString(36).slice(2),mn="__reactFiber$"+Gt,on="__reactProps$"+Gt,Rn="__reactContainer$"+Gt,jn="__reactEvents$"+Gt,Yn="__reactListeners$"+Gt,me="__reactHandles$"+Gt,Be="__reactResources$"+Gt,_e="__reactMarker$"+Gt;function Se(A){delete A[mn],delete A[on],delete A[jn],delete A[Yn],delete A[me]}function Te(A){var f=A[mn];if(f)return f;for(var p=A.parentNode;p;){if(f=p[Rn]||p[mn]){if(p=f.alternate,f.child!==null||p!==null&&p.child!==null)for(A=VB(A);A!==null;){if(p=A[mn])return p;A=VB(A)}return f}A=p,p=A.parentNode}return null}function ke(A){if(A=A[mn]||A[Rn]){var f=A.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return A}return null}function Ke(A){var f=A.tag;if(f===5||f===26||f===27||f===6)return A.stateNode;throw Error(n(33))}function nt(A){var f=A[Be];return f||(f=A[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function Ve(A){A[_e]=!0}var Ye=new Set,Ze={};function wt(A,f){Bt(A,f),Bt(A+"Capture",f)}function Bt(A,f){for(Ze[A]=f,A=0;A<f.length;A++)Ye.add(f[A])}var Qt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nt={},Lt={};function fr(A){return oe.call(Lt,A)?!0:oe.call(Nt,A)?!1:Qt.test(A)?Lt[A]=!0:(Nt[A]=!0,!1)}function Or(A,f,p){if(fr(f))if(p===null)A.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":A.removeAttribute(f);return;case"boolean":var w=f.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){A.removeAttribute(f);return}}A.setAttribute(f,""+p)}}function Qr(A,f,p){if(p===null)A.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(f);return}A.setAttribute(f,""+p)}}function qr(A,f,p,w){if(w===null)A.removeAttribute(p);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":A.removeAttribute(p);return}A.setAttributeNS(f,p,""+w)}}var Ls,gi;function Us(A){if(Ls===void 0)try{throw Error()}catch(p){var f=p.stack.trim().match(/\n( *(at )?)/);Ls=f&&f[1]||"",gi=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ls+A+gi}var ha=!1;function Ws(A,f){if(!A||ha)return"";ha=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(f){var bt=function(){throw Error()};if(Object.defineProperty(bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(bt,[])}catch(at){var st=at}Reflect.construct(A,[],bt)}else{try{bt.call()}catch(at){st=at}A.call(bt.prototype)}}else{try{throw Error()}catch(at){st=at}(bt=A())&&typeof bt.catch=="function"&&bt.catch(function(){})}}catch(at){if(at&&st&&typeof at.stack=="string")return[at.stack,st.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var I=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");I&&I.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=w.DetermineComponentFrameRoot(),le=V[0],we=V[1];if(le&&we){var Re=le.split(`
`),rt=we.split(`
`);for(I=w=0;w<Re.length&&!Re[w].includes("DetermineComponentFrameRoot");)w++;for(;I<rt.length&&!rt[I].includes("DetermineComponentFrameRoot");)I++;if(w===Re.length||I===rt.length)for(w=Re.length-1,I=rt.length-1;1<=w&&0<=I&&Re[w]!==rt[I];)I--;for(;1<=w&&0<=I;w--,I--)if(Re[w]!==rt[I]){if(w!==1||I!==1)do if(w--,I--,0>I||Re[w]!==rt[I]){var ft=`
`+Re[w].replace(" at new "," at ");return A.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",A.displayName)),ft}while(1<=w&&0<=I);break}}}finally{ha=!1,Error.prepareStackTrace=p}return(p=A?A.displayName||A.name:"")?Us(p):""}function ka(A){switch(A.tag){case 26:case 27:case 5:return Us(A.type);case 16:return Us("Lazy");case 13:return Us("Suspense");case 19:return Us("SuspenseList");case 0:case 15:return Ws(A.type,!1);case 11:return Ws(A.type.render,!1);case 1:return Ws(A.type,!0);case 31:return Us("Activity");default:return""}}function Jn(A){try{var f="";do f+=ka(A),A=A.return;while(A);return f}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function ma(A){switch(typeof A){case"bigint":case"boolean":case"number":case"string":case"undefined":return A;case"object":return A;default:return""}}function Oc(A){var f=A.type;return(A=A.nodeName)&&A.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function YA(A){var f=Oc(A)?"checked":"value",p=Object.getOwnPropertyDescriptor(A.constructor.prototype,f),w=""+A[f];if(!A.hasOwnProperty(f)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var I=p.get,V=p.set;return Object.defineProperty(A,f,{configurable:!0,get:function(){return I.call(this)},set:function(le){w=""+le,V.call(this,le)}}),Object.defineProperty(A,f,{enumerable:p.enumerable}),{getValue:function(){return w},setValue:function(le){w=""+le},stopTracking:function(){A._valueTracker=null,delete A[f]}}}}function ul(A){A._valueTracker||(A._valueTracker=YA(A))}function zu(A){if(!A)return!1;var f=A._valueTracker;if(!f)return!0;var p=f.getValue(),w="";return A&&(w=Oc(A)?A.checked?"true":"false":A.value),A=w,A!==p?(f.setValue(A),!0):!1}function Ia(A){if(A=A||(typeof document<"u"?document:void 0),typeof A>"u")return null;try{return A.activeElement||A.body}catch{return A.body}}var Qc=/[\n"\\]/g;function pn(A){return A.replace(Qc,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Fa(A,f,p,w,I,V,le,we){A.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?A.type=le:A.removeAttribute("type"),f!=null?le==="number"?(f===0&&A.value===""||A.value!=f)&&(A.value=""+ma(f)):A.value!==""+ma(f)&&(A.value=""+ma(f)):le!=="submit"&&le!=="reset"||A.removeAttribute("value"),f!=null?dl(A,le,ma(f)):p!=null?dl(A,le,ma(p)):w!=null&&A.removeAttribute("value"),I==null&&V!=null&&(A.defaultChecked=!!V),I!=null&&(A.checked=I&&typeof I!="function"&&typeof I!="symbol"),we!=null&&typeof we!="function"&&typeof we!="symbol"&&typeof we!="boolean"?A.name=""+ma(we):A.removeAttribute("name")}function Al(A,f,p,w,I,V,le,we){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(A.type=V),f!=null||p!=null){if(!(V!=="submit"&&V!=="reset"||f!=null))return;p=p!=null?""+ma(p):"",f=f!=null?""+ma(f):p,we||f===A.value||(A.value=f),A.defaultValue=f}w=w??I,w=typeof w!="function"&&typeof w!="symbol"&&!!w,A.checked=we?A.checked:!!w,A.defaultChecked=!!w,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(A.name=le)}function dl(A,f,p){f==="number"&&Ia(A.ownerDocument)===A||A.defaultValue===""+p||(A.defaultValue=""+p)}function co(A,f,p,w){if(A=A.options,f){f={};for(var I=0;I<p.length;I++)f["$"+p[I]]=!0;for(p=0;p<A.length;p++)I=f.hasOwnProperty("$"+A[p].value),A[p].selected!==I&&(A[p].selected=I),I&&w&&(A[p].defaultSelected=!0)}else{for(p=""+ma(p),f=null,I=0;I<A.length;I++){if(A[I].value===p){A[I].selected=!0,w&&(A[I].defaultSelected=!0);return}f!==null||A[I].disabled||(f=A[I])}f!==null&&(f.selected=!0)}}function Sn(A,f,p){if(f!=null&&(f=""+ma(f),f!==A.value&&(A.value=f),p==null)){A.defaultValue!==f&&(A.defaultValue=f);return}A.defaultValue=p!=null?""+ma(p):""}function fl(A,f,p,w){if(f==null){if(w!=null){if(p!=null)throw Error(n(92));if(ne(w)){if(1<w.length)throw Error(n(93));w=w[0]}p=w}p==null&&(p=""),f=p}p=ma(f),A.defaultValue=p,w=A.textContent,w===p&&w!==""&&w!==null&&(A.value=w)}function xi(A,f){if(f){var p=A.firstChild;if(p&&p===A.lastChild&&p.nodeType===3){p.nodeValue=f;return}}A.textContent=f}var Lo=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function JA(A,f,p){var w=f.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?w?A.setProperty(f,""):f==="float"?A.cssFloat="":A[f]="":w?A.setProperty(f,p):typeof p!="number"||p===0||Lo.has(f)?f==="float"?A.cssFloat=p:A[f]=(""+p).trim():A[f]=p+"px"}function Gu(A,f,p){if(f!=null&&typeof f!="object")throw Error(n(62));if(A=A.style,p!=null){for(var w in p)!p.hasOwnProperty(w)||f!=null&&f.hasOwnProperty(w)||(w.indexOf("--")===0?A.setProperty(w,""):w==="float"?A.cssFloat="":A[w]="");for(var I in f)w=f[I],f.hasOwnProperty(I)&&p[I]!==w&&JA(A,I,w)}else for(var V in f)f.hasOwnProperty(V)&&JA(A,V,f[V])}function qu(A){if(A.indexOf("-")===-1)return!1;switch(A){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mo(A){return Hc.test(""+A)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":A}var uo=null;function On(A){return A=A.target||A.srcElement||window,A.correspondingUseElement&&(A=A.correspondingUseElement),A.nodeType===3?A.parentNode:A}var Po=null,Ao=null;function pr(A){var f=ke(A);if(f&&(A=f.stateNode)){var p=A[on]||null;e:switch(A=f.stateNode,f.type){case"input":if(Fa(A,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),f=p.name,p.type==="radio"&&f!=null){for(p=A;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+pn(""+f)+'"][type="radio"]'),f=0;f<p.length;f++){var w=p[f];if(w!==A&&w.form===A.form){var I=w[on]||null;if(!I)throw Error(n(90));Fa(w,I.value,I.defaultValue,I.defaultValue,I.checked,I.defaultChecked,I.type,I.name)}}for(f=0;f<p.length;f++)w=p[f],w.form===A.form&&zu(w)}break e;case"textarea":Sn(A,p.value,p.defaultValue);break e;case"select":f=p.value,f!=null&&co(A,!!p.multiple,f,!1)}}}var fo=!1;function XA(A,f,p){if(fo)return A(f,p);fo=!0;try{var w=A(f);return w}finally{if(fo=!1,(Po!==null||Ao!==null)&&(ov(),Po&&(f=Po,A=Ao,Ao=Po=null,pr(f),A)))for(f=0;f<A.length;f++)pr(A[f])}}function Oa(A,f){var p=A.stateNode;if(p===null)return null;var w=p[on]||null;if(w===null)return null;p=w[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(A=A.type,w=!(A==="button"||A==="input"||A==="select"||A==="textarea")),A=!w;break e;default:A=!1}if(A)return null;if(p&&typeof p!="function")throw Error(n(231,f,typeof p));return p}var vi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ti=!1;if(vi)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){ti=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{ti=!1}var yi=null,hl=null,jo=null;function Ku(){if(jo)return jo;var A,f=hl,p=f.length,w,I="value"in yi?yi.value:yi.textContent,V=I.length;for(A=0;A<p&&f[A]===I[A];A++);var le=p-A;for(w=1;w<=le&&f[p-w]===I[V-w];w++);return jo=I.slice(A,1<w?1-w:void 0)}function wi(A){var f=A.keyCode;return"charCode"in A?(A=A.charCode,A===0&&f===13&&(A=13)):A=f,A===10&&(A=13),32<=A||A===13?A:0}function Qa(){return!0}function mo(){return!1}function Ms(A){function f(p,w,I,V,le){this._reactName=p,this._targetInst=I,this.type=w,this.nativeEvent=V,this.target=le,this.currentTarget=null;for(var we in A)A.hasOwnProperty(we)&&(p=A[we],this[we]=p?p(V):V[we]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?Qa:mo,this.isPropagationStopped=mo,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),f}var en={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(A){return A.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ml=Ms(en),po=d({},en,{view:0,detail:0}),$u=Ms(po),Xl,Zl,Xi,Ha=d({},po,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vl,button:0,buttons:0,relatedTarget:function(A){return A.relatedTarget===void 0?A.fromElement===A.srcElement?A.toElement:A.fromElement:A.relatedTarget},movementX:function(A){return"movementX"in A?A.movementX:(A!==Xi&&(Xi&&A.type==="mousemove"?(Xl=A.screenX-Xi.screenX,Zl=A.screenY-Xi.screenY):Zl=Xl=0,Xi=A),Xl)},movementY:function(A){return"movementY"in A?A.movementY:Zl}}),Ps=Ms(Ha),ZA=d({},Ha,{dataTransfer:0}),pl=Ms(ZA),Da=d({},po,{relatedTarget:0}),gl=Ms(Da),Oo=d({},en,{animationName:0,elapsedTime:0,pseudoElement:0}),Vc=Ms(Oo),ec=d({},en,{clipboardData:function(A){return"clipboardData"in A?A.clipboardData:window.clipboardData}}),zc=Ms(ec),Wu=d({},en,{data:0}),tc=Ms(Wu),xl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(A){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(A):(A=Gc[A])?!!f[A]:!1}function vl(){return nc}var ed=d({},po,{key:function(A){if(A.key){var f=xl[A.key]||A.key;if(f!=="Unidentified")return f}return A.type==="keypress"?(A=wi(A),A===13?"Enter":String.fromCharCode(A)):A.type==="keydown"||A.type==="keyup"?rc[A.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vl,charCode:function(A){return A.type==="keypress"?wi(A):0},keyCode:function(A){return A.type==="keydown"||A.type==="keyup"?A.keyCode:0},which:function(A){return A.type==="keypress"?wi(A):A.type==="keydown"||A.type==="keyup"?A.keyCode:0}}),Qo=Ms(ed),yl=d({},Ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sc=Ms(yl),Va=d({},po,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vl}),qc=Ms(Va),z=d({},en,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ae=Ms(z),Ie=d({},Ha,{deltaX:function(A){return"deltaX"in A?A.deltaX:"wheelDeltaX"in A?-A.wheelDeltaX:0},deltaY:function(A){return"deltaY"in A?A.deltaY:"wheelDeltaY"in A?-A.wheelDeltaY:"wheelDelta"in A?-A.wheelDelta:0},deltaZ:0,deltaMode:0}),Le=Ms(Ie),ze=d({},en,{newState:0,oldState:0}),ot=Ms(ze),St=[9,13,27,32],Ht=vi&&"CompositionEvent"in window,N=null;vi&&"documentMode"in document&&(N=document.documentMode);var X=vi&&"TextEvent"in window&&!N,ae=vi&&(!Ht||N&&8<N&&11>=N),ye=" ",He=!1;function et(A,f){switch(A){case"keyup":return St.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tt(A){return A=A.detail,typeof A=="object"&&"data"in A?A.data:null}var gr=!1;function tn(A,f){switch(A){case"compositionend":return Tt(f);case"keypress":return f.which!==32?null:(He=!0,ye);case"textInput":return A=f.data,A===ye&&He?null:A;default:return null}}function kr(A,f){if(gr)return A==="compositionend"||!Ht&&et(A,f)?(A=Ku(),jo=hl=yi=null,gr=!1,A):null;switch(A){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return ae&&f.locale!=="ko"?null:f.data;default:return null}}var Tn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ln(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f==="input"?!!Tn[A.type]:f==="textarea"}function go(A,f,p,w){Po?Ao?Ao.push(w):Ao=[w]:Po=w,f=fv(f,"onChange"),0<f.length&&(p=new ml("onChange","change",null,p,w),A.push({event:p,listeners:f}))}var Ss=null,bi=null;function wl(A){DB(A,0)}function Kc(A){var f=Ke(A);if(zu(f))return A}function td(A,f){if(A==="change")return f}var Yu=!1;if(vi){var Ys;if(vi){var $c="oninput"in document;if(!$c){var Ju=document.createElement("div");Ju.setAttribute("oninput","return;"),$c=typeof Ju.oninput=="function"}Ys=$c}else Ys=!1;Yu=Ys&&(!document.documentMode||9<document.documentMode)}function Xu(){Ss&&(Ss.detachEvent("onpropertychange",rd),bi=Ss=null)}function rd(A){if(A.propertyName==="value"&&Kc(bi)){var f=[];go(f,bi,A,On(A)),XA(wl,f)}}function Ci(A,f,p){A==="focusin"?(Xu(),Ss=f,bi=p,Ss.attachEvent("onpropertychange",rd)):A==="focusout"&&Xu()}function pp(A){if(A==="selectionchange"||A==="keyup"||A==="keydown")return Kc(bi)}function Rf(A,f){if(A==="click")return Kc(f)}function n0(A,f){if(A==="input"||A==="change")return Kc(f)}function xo(A,f){return A===f&&(A!==0||1/A===1/f)||A!==A&&f!==f}var pa=typeof Object.is=="function"?Object.is:xo;function Wc(A,f){if(pa(A,f))return!0;if(typeof A!="object"||A===null||typeof f!="object"||f===null)return!1;var p=Object.keys(A),w=Object.keys(f);if(p.length!==w.length)return!1;for(w=0;w<p.length;w++){var I=p[w];if(!oe.call(f,I)||!pa(A[I],f[I]))return!1}return!0}function Lf(A){for(;A&&A.firstChild;)A=A.firstChild;return A}function ac(A,f){var p=Lf(A);A=0;for(var w;p;){if(p.nodeType===3){if(w=A+p.textContent.length,A<=f&&w>=f)return{node:p,offset:f-A};A=w}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Lf(p)}}function Yc(A,f){return A&&f?A===f?!0:A&&A.nodeType===3?!1:f&&f.nodeType===3?Yc(A,f.parentNode):"contains"in A?A.contains(f):A.compareDocumentPosition?!!(A.compareDocumentPosition(f)&16):!1:!1}function ri(A){A=A!=null&&A.ownerDocument!=null&&A.ownerDocument.defaultView!=null?A.ownerDocument.defaultView:window;for(var f=Ia(A.document);f instanceof A.HTMLIFrameElement;){try{var p=typeof f.contentWindow.location.href=="string"}catch{p=!1}if(p)A=f.contentWindow;else break;f=Ia(A.document)}return f}function Ra(A){var f=A&&A.nodeName&&A.nodeName.toLowerCase();return f&&(f==="input"&&(A.type==="text"||A.type==="search"||A.type==="tel"||A.type==="url"||A.type==="password")||f==="textarea"||A.contentEditable==="true")}var Jc=vi&&"documentMode"in document&&11>=document.documentMode,Ei=null,Ho=null,bl=null,Vo=!1;function xs(A,f,p){var w=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Vo||Ei==null||Ei!==Ia(w)||(w=Ei,"selectionStart"in w&&Ra(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),bl&&Wc(bl,w)||(bl=w,w=fv(Ho,"onSelect"),0<w.length&&(f=new ml("onSelect","select",null,f,p),A.push({event:f,listeners:w}),f.target=Ei)))}function zo(A,f){var p={};return p[A.toLowerCase()]=f.toLowerCase(),p["Webkit"+A]="webkit"+f,p["Moz"+A]="moz"+f,p}var js={animationend:zo("Animation","AnimationEnd"),animationiteration:zo("Animation","AnimationIteration"),animationstart:zo("Animation","AnimationStart"),transitionrun:zo("Transition","TransitionRun"),transitionstart:zo("Transition","TransitionStart"),transitioncancel:zo("Transition","TransitionCancel"),transitionend:zo("Transition","TransitionEnd")},_i={},Zu={};vi&&(Zu=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function Cl(A){if(_i[A])return _i[A];if(!js[A])return A;var f=js[A],p;for(p in f)if(f.hasOwnProperty(p)&&p in Zu)return _i[A]=f[p];return A}var nd=Cl("animationend"),Xc=Cl("animationiteration"),Zc=Cl("animationstart"),eu=Cl("transitionrun"),eA=Cl("transitionstart"),sd=Cl("transitioncancel"),tu=Cl("transitionend"),ic=new Map,tA="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tA.push("scrollEnd");function vs(A,f){ic.set(A,f),wt(f,[A])}var Zi=new WeakMap;function $r(A,f){if(typeof A=="object"&&A!==null){var p=Zi.get(A);return p!==void 0?p:(f={value:A,source:f,stack:Jn(f)},Zi.set(A,f),f)}return{value:A,source:f,stack:Jn(f)}}var Wr=[],Xn=0,Ts=0;function vo(){for(var A=Xn,f=Ts=Xn=0;f<A;){var p=Wr[f];Wr[f++]=null;var w=Wr[f];Wr[f++]=null;var I=Wr[f];Wr[f++]=null;var V=Wr[f];if(Wr[f++]=null,w!==null&&I!==null){var le=w.pending;le===null?I.next=I:(I.next=le.next,le.next=I),w.pending=I}V!==0&&s0(p,I,V)}}function ru(A,f,p,w){Wr[Xn++]=A,Wr[Xn++]=f,Wr[Xn++]=p,Wr[Xn++]=w,Ts|=w,A.lanes|=w,A=A.alternate,A!==null&&(A.lanes|=w)}function nu(A,f,p,w){return ru(A,f,p,w),rA(A)}function oc(A,f){return ru(A,null,null,f),rA(A)}function s0(A,f,p){A.lanes|=p;var w=A.alternate;w!==null&&(w.lanes|=p);for(var I=!1,V=A.return;V!==null;)V.childLanes|=p,w=V.alternate,w!==null&&(w.childLanes|=p),V.tag===22&&(A=V.stateNode,A===null||A._visibility&1||(I=!0)),A=V,V=V.return;return A.tag===3?(V=A.stateNode,I&&f!==null&&(I=31-It(p),A=V.hiddenUpdates,w=A[I],w===null?A[I]=[f]:w.push(f),f.lane=p|536870912),V):null}function rA(A){if(50<Qp)throw Qp=0,fC=null,Error(n(185));for(var f=A.return;f!==null;)A=f,f=A.return;return A.tag===3?A.stateNode:null}var ga={};function yo(A,f,p,w){this.tag=A,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(A,f,p,w){return new yo(A,f,p,w)}function ad(A){return A=A.prototype,!(!A||!A.isReactComponent)}function El(A,f){var p=A.alternate;return p===null?(p=za(A.tag,f,A.key,A.mode),p.elementType=A.elementType,p.type=A.type,p.stateNode=A.stateNode,p.alternate=A,A.alternate=p):(p.pendingProps=f,p.type=A.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=A.flags&65011712,p.childLanes=A.childLanes,p.lanes=A.lanes,p.child=A.child,p.memoizedProps=A.memoizedProps,p.memoizedState=A.memoizedState,p.updateQueue=A.updateQueue,f=A.dependencies,p.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},p.sibling=A.sibling,p.index=A.index,p.ref=A.ref,p.refCleanup=A.refCleanup,p}function Uf(A,f){A.flags&=65011714;var p=A.alternate;return p===null?(A.childLanes=0,A.lanes=f,A.child=null,A.subtreeFlags=0,A.memoizedProps=null,A.memoizedState=null,A.updateQueue=null,A.dependencies=null,A.stateNode=null):(A.childLanes=p.childLanes,A.lanes=p.lanes,A.child=p.child,A.subtreeFlags=0,A.deletions=null,A.memoizedProps=p.memoizedProps,A.memoizedState=p.memoizedState,A.updateQueue=p.updateQueue,A.type=p.type,f=p.dependencies,A.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),A}function nA(A,f,p,w,I,V){var le=0;if(w=A,typeof A=="function")ad(A)&&(le=1);else if(typeof A=="string")le=J9(A,p,ee.current)?26:A==="html"||A==="head"||A==="body"?27:5;else e:switch(A){case B:return A=za(31,p,f,I),A.elementType=B,A.lanes=V,A;case b:return lc(p.children,I,V,f);case y:le=8,I|=24;break;case _:return A=za(12,p,f,I|2),A.elementType=_,A.lanes=V,A;case P:return A=za(13,p,f,I),A.elementType=P,A.lanes=V,A;case L:return A=za(19,p,f,I),A.elementType=L,A.lanes=V,A;default:if(typeof A=="object"&&A!==null)switch(A.$$typeof){case T:case D:le=10;break e;case k:le=9;break e;case M:le=11;break e;case C:le=14;break e;case E:le=16,w=null;break e}le=29,p=Error(n(130,A===null?"null":typeof A,"")),w=null}return f=za(le,p,f,I),f.elementType=A,f.type=w,f.lanes=V,f}function lc(A,f,p,w){return A=za(7,A,w,f),A.lanes=p,A}function a0(A,f,p){return A=za(6,A,null,f),A.lanes=p,A}function Mf(A,f,p){return f=za(4,A.children!==null?A.children:[],A.key,f),f.lanes=p,f.stateNode={containerInfo:A.containerInfo,pendingChildren:null,implementation:A.implementation},f}var su=[],cc=0,id=null,i0=0,wo=[],eo=0,sA=null,uc=1,Ac="";function aA(A,f){su[cc++]=i0,su[cc++]=id,id=A,i0=f}function I1(A,f,p){wo[eo++]=uc,wo[eo++]=Ac,wo[eo++]=sA,sA=A;var w=uc;A=Ac;var I=32-It(w)-1;w&=~(1<<I),p+=1;var V=32-It(f)+I;if(30<V){var le=I-I%5;V=(w&(1<<le)-1).toString(32),w>>=le,I-=le,uc=1<<32-It(f)+I|p<<I|w,Ac=V+A}else uc=1<<V|p<<I|w,Ac=A}function Pf(A){A.return!==null&&(aA(A,1),I1(A,1,0))}function jf(A){for(;A===id;)id=su[--cc],su[cc]=null,i0=su[--cc],su[cc]=null;for(;A===sA;)sA=wo[--eo],wo[eo]=null,Ac=wo[--eo],wo[eo]=null,uc=wo[--eo],wo[eo]=null}var Js=null,ys=null,Cn=!1,au=null,_l=!1,gp=Error(n(519));function iA(A){var f=Error(n(418,""));throw od($r(f,A)),gp}function F1(A){var f=A.stateNode,p=A.type,w=A.memoizedProps;switch(f[mn]=A,f[on]=w,p){case"dialog":cn("cancel",f),cn("close",f);break;case"iframe":case"object":case"embed":cn("load",f);break;case"video":case"audio":for(p=0;p<Vp.length;p++)cn(Vp[p],f);break;case"source":cn("error",f);break;case"img":case"image":case"link":cn("error",f),cn("load",f);break;case"details":cn("toggle",f);break;case"input":cn("invalid",f),Al(f,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),ul(f);break;case"select":cn("invalid",f);break;case"textarea":cn("invalid",f),fl(f,w.value,w.defaultValue,w.children),ul(f)}p=w.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||f.textContent===""+p||w.suppressHydrationWarning===!0||MB(f.textContent,p)?(w.popover!=null&&(cn("beforetoggle",f),cn("toggle",f)),w.onScroll!=null&&cn("scroll",f),w.onScrollEnd!=null&&cn("scrollend",f),w.onClick!=null&&(f.onclick=hv),f=!0):f=!1,f||iA(A)}function dc(A){for(Js=A.return;Js;)switch(Js.tag){case 5:case 13:_l=!1;return;case 27:case 3:_l=!0;return;default:Js=Js.return}}function ni(A){if(A!==Js)return!1;if(!Cn)return dc(A),Cn=!0,!1;var f=A.tag,p;if((p=f!==3&&f!==27)&&((p=f===5)&&(p=A.type,p=!(p!=="form"&&p!=="button")||BC(A.type,A.memoizedProps)),p=!p),p&&ys&&iA(A),dc(A),f===13){if(A=A.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(n(317));e:{for(A=A.nextSibling,f=0;A;){if(A.nodeType===8)if(p=A.data,p==="/$"){if(f===0){ys=yc(A.nextSibling);break e}f--}else p!=="$"&&p!=="$!"&&p!=="$?"||f++;A=A.nextSibling}ys=null}}else f===27?(f=ys,Ed(A.type)?(A=DC,DC=null,ys=A):ys=f):ys=Js?yc(A.stateNode.nextSibling):null;return!0}function to(){ys=Js=null,Cn=!1}function D1(){var A=au;return A!==null&&(Eo===null?Eo=A:Eo.push.apply(Eo,A),au=null),A}function od(A){au===null?au=[A]:au.push(A)}var Sl=ie(null),xa=null,fc=null;function iu(A,f,p){Y(Sl,f._currentValue),f._currentValue=p}function Tl(A){A._currentValue=Sl.current,j(Sl)}function o0(A,f,p){for(;A!==null;){var w=A.alternate;if((A.childLanes&f)!==f?(A.childLanes|=f,w!==null&&(w.childLanes|=f)):w!==null&&(w.childLanes&f)!==f&&(w.childLanes|=f),A===p)break;A=A.return}}function l0(A,f,p,w){var I=A.child;for(I!==null&&(I.return=A);I!==null;){var V=I.dependencies;if(V!==null){var le=I.child;V=V.firstContext;e:for(;V!==null;){var we=V;V=I;for(var Re=0;Re<f.length;Re++)if(we.context===f[Re]){V.lanes|=p,we=V.alternate,we!==null&&(we.lanes|=p),o0(V.return,p,A),w||(le=null);break e}V=we.next}}else if(I.tag===18){if(le=I.return,le===null)throw Error(n(341));le.lanes|=p,V=le.alternate,V!==null&&(V.lanes|=p),o0(le,p,A),le=null}else le=I.child;if(le!==null)le.return=I;else for(le=I;le!==null;){if(le===A){le=null;break}if(I=le.sibling,I!==null){I.return=le.return,le=I;break}le=le.return}I=le}}function ld(A,f,p,w){A=null;for(var I=f,V=!1;I!==null;){if(!V){if((I.flags&524288)!==0)V=!0;else if((I.flags&262144)!==0)break}if(I.tag===10){var le=I.alternate;if(le===null)throw Error(n(387));if(le=le.memoizedProps,le!==null){var we=I.type;pa(I.pendingProps.value,le.value)||(A!==null?A.push(we):A=[we])}}else if(I===be.current){if(le=I.alternate,le===null)throw Error(n(387));le.memoizedState.memoizedState!==I.memoizedState.memoizedState&&(A!==null?A.push(Wp):A=[Wp])}I=I.return}A!==null&&l0(f,A,p,w),f.flags|=262144}function c0(A){for(A=A.firstContext;A!==null;){if(!pa(A.context._currentValue,A.memoizedValue))return!0;A=A.next}return!1}function Nl(A){xa=A,fc=null,A=A.dependencies,A!==null&&(A.firstContext=null)}function Xs(A){return u0(xa,A)}function ou(A,f){return xa===null&&Nl(A),u0(A,f)}function u0(A,f){var p=f._currentValue;if(f={context:f,memoizedValue:p,next:null},fc===null){if(A===null)throw Error(n(308));fc=f,A.dependencies={lanes:0,firstContext:f},A.flags|=524288}else fc=fc.next=f;return p}var Pb=typeof AbortController<"u"?AbortController:function(){var A=[],f=this.signal={aborted:!1,addEventListener:function(p,w){A.push(w)}};this.abort=function(){f.aborted=!0,A.forEach(function(p){return p()})}},R1=t.unstable_scheduleCallback,jb=t.unstable_NormalPriority,Zs={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xp(){return{controller:new Pb,data:new Map,refCount:0}}function Of(A){A.refCount--,A.refCount===0&&R1(jb,function(){A.controller.abort()})}var Qf=null,vp=0,oA=0,hc=null;function Ob(A,f){if(Qf===null){var p=Qf=[];vp=0,oA=yC(),hc={status:"pending",value:void 0,then:function(w){p.push(w)}}}return vp++,f.then(L1,L1),f}function L1(){if(--vp===0&&Qf!==null){hc!==null&&(hc.status="fulfilled");var A=Qf;Qf=null,oA=0,hc=null;for(var f=0;f<A.length;f++)(0,A[f])()}}function U1(A,f){var p=[],w={status:"pending",value:null,reason:null,then:function(I){p.push(I)}};return A.then(function(){w.status="fulfilled",w.value=f;for(var I=0;I<p.length;I++)(0,p[I])(f)},function(I){for(w.status="rejected",w.reason=I,I=0;I<p.length;I++)(0,p[I])(void 0)}),w}var S=J.S;J.S=function(A,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Ob(A,f),S!==null&&S(A,f)};var U=ie(null);function K(){var A=U.current;return A!==null?A:os.pooledCache}function se(A,f){f===null?Y(U,U.current):Y(U,f.pool)}function ue(){var A=K();return A===null?null:{parent:Zs._currentValue,pool:A}}var pe=Error(n(460)),xe=Error(n(474)),ve=Error(n(542)),Ce={then:function(){}};function Ne(A){return A=A.status,A==="fulfilled"||A==="rejected"}function Me(){}function Xe(A,f,p){switch(p=A[p],p===void 0?A.push(f):p!==f&&(f.then(Me,Me),f=p),f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,xt(A),A;default:if(typeof f.status=="string")f.then(Me,Me);else{if(A=os,A!==null&&100<A.shellSuspendCounter)throw Error(n(482));A=f,A.status="pending",A.then(function(w){if(f.status==="pending"){var I=f;I.status="fulfilled",I.value=w}},function(w){if(f.status==="pending"){var I=f;I.status="rejected",I.reason=w}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw A=f.reason,xt(A),A}throw We=f,pe}}var We=null;function Ge(){if(We===null)throw Error(n(459));var A=We;return We=null,A}function xt(A){if(A===pe||A===ve)throw Error(n(483))}var it=!1;function Pe(A){A.updateQueue={baseState:A.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Oe(A,f){A=A.updateQueue,f.updateQueue===A&&(f.updateQueue={baseState:A.baseState,firstBaseUpdate:A.firstBaseUpdate,lastBaseUpdate:A.lastBaseUpdate,shared:A.shared,callbacks:null})}function At(A){return{lane:A,tag:0,payload:null,callback:null,next:null}}function yt(A,f,p){var w=A.updateQueue;if(w===null)return null;if(w=w.shared,(Hn&2)!==0){var I=w.pending;return I===null?f.next=f:(f.next=I.next,I.next=f),w.pending=f,f=rA(A),s0(A,null,p),f}return ru(A,w,f,p),rA(A)}function ht(A,f,p){if(f=f.updateQueue,f!==null&&(f=f.shared,(p&4194048)!==0)){var w=f.lanes;w&=A.pendingLanes,p|=w,f.lanes=p,Gr(A,p)}}function $t(A,f){var p=A.updateQueue,w=A.alternate;if(w!==null&&(w=w.updateQueue,p===w)){var I=null,V=null;if(p=p.firstBaseUpdate,p!==null){do{var le={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};V===null?I=V=le:V=V.next=le,p=p.next}while(p!==null);V===null?I=V=f:V=V.next=f}else I=V=f;p={baseState:w.baseState,firstBaseUpdate:I,lastBaseUpdate:V,shared:w.shared,callbacks:w.callbacks},A.updateQueue=p;return}A=p.lastBaseUpdate,A===null?p.firstBaseUpdate=f:A.next=f,p.lastBaseUpdate=f}var Pt=!1;function sr(){if(Pt){var A=hc;if(A!==null)throw A}}function Vt(A,f,p,w){Pt=!1;var I=A.updateQueue;it=!1;var V=I.firstBaseUpdate,le=I.lastBaseUpdate,we=I.shared.pending;if(we!==null){I.shared.pending=null;var Re=we,rt=Re.next;Re.next=null,le===null?V=rt:le.next=rt,le=Re;var ft=A.alternate;ft!==null&&(ft=ft.updateQueue,we=ft.lastBaseUpdate,we!==le&&(we===null?ft.firstBaseUpdate=rt:we.next=rt,ft.lastBaseUpdate=Re))}if(V!==null){var bt=I.baseState;le=0,ft=rt=Re=null,we=V;do{var st=we.lane&-536870913,at=st!==we.lane;if(at?(wn&st)===st:(w&st)===st){st!==0&&st===oA&&(Pt=!0),ft!==null&&(ft=ft.next={lane:0,tag:we.tag,payload:we.payload,callback:null,next:null});e:{var Nr=A,xr=we;st=f;var es=p;switch(xr.tag){case 1:if(Nr=xr.payload,typeof Nr=="function"){bt=Nr.call(es,bt,st);break e}bt=Nr;break e;case 3:Nr.flags=Nr.flags&-65537|128;case 0:if(Nr=xr.payload,st=typeof Nr=="function"?Nr.call(es,bt,st):Nr,st==null)break e;bt=d({},bt,st);break e;case 2:it=!0}}st=we.callback,st!==null&&(A.flags|=64,at&&(A.flags|=8192),at=I.callbacks,at===null?I.callbacks=[st]:at.push(st))}else at={lane:st,tag:we.tag,payload:we.payload,callback:we.callback,next:null},ft===null?(rt=ft=at,Re=bt):ft=ft.next=at,le|=st;if(we=we.next,we===null){if(we=I.shared.pending,we===null)break;at=we,we=at.next,at.next=null,I.lastBaseUpdate=at,I.shared.pending=null}}while(!0);ft===null&&(Re=bt),I.baseState=Re,I.firstBaseUpdate=rt,I.lastBaseUpdate=ft,V===null&&(I.shared.lanes=0),yd|=le,A.lanes=le,A.memoizedState=bt}}function vn(A,f){if(typeof A!="function")throw Error(n(191,A));A.call(f)}function Nn(A,f){var p=A.callbacks;if(p!==null)for(A.callbacks=null,A=0;A<p.length;A++)vn(p[A],f)}var Kr=ie(null),Hr=ie(0);function Un(A,f){A=gA,Y(Hr,A),Y(Kr,f),gA=A|f.baseLanes}function Bn(){Y(Hr,gA),Y(Kr,Kr.current)}function Ir(){gA=Hr.current,j(Kr),j(Hr)}var Qn=0,hr=null,Cr=null,gn=null,yn=!1,va=!1,ea=!1,Ns=0,Bs=0,Os=null,bo=0;function kn(){throw Error(n(321))}function Qs(A,f){if(f===null)return!1;for(var p=0;p<f.length&&p<A.length;p++)if(!pa(A[p],f[p]))return!1;return!0}function Go(A,f,p,w,I,V){return Qn=V,hr=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,J.H=A===null||A.memoizedState===null?gN:xN,ea=!1,V=p(w,I),ea=!1,va&&(V=lA(f,p,w,I)),lu(A),V}function lu(A){J.H=$1;var f=Cr!==null&&Cr.next!==null;if(Qn=0,gn=Cr=hr=null,yn=!1,Bs=0,Os=null,f)throw Error(n(300));A===null||Ga||(A=A.dependencies,A!==null&&c0(A)&&(Ga=!0))}function lA(A,f,p,w){hr=A;var I=0;do{if(va&&(Os=null),Bs=0,va=!1,25<=I)throw Error(n(301));if(I+=1,gn=Cr=null,A.updateQueue!=null){var V=A.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}J.H=l9,V=f(p,w)}while(va);return V}function cu(){var A=J.H,f=A.useState()[0];return f=typeof f.then=="function"?uu(f):f,A=A.useState()[0],(Cr!==null?Cr.memoizedState:null)!==A&&(hr.flags|=1024),f}function is(){var A=Ns!==0;return Ns=0,A}function Hf(A,f,p){f.updateQueue=A.updateQueue,f.flags&=-2053,A.lanes&=~p}function A0(A){if(yn){for(A=A.memoizedState;A!==null;){var f=A.queue;f!==null&&(f.pending=null),A=A.next}yn=!1}Qn=0,gn=Cr=hr=null,va=!1,Bs=Ns=0,Os=null}function si(){var A={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?hr.memoizedState=gn=A:gn=gn.next=A,gn}function us(){if(Cr===null){var A=hr.alternate;A=A!==null?A.memoizedState:null}else A=Cr.next;var f=gn===null?hr.memoizedState:gn.next;if(f!==null)gn=f,Cr=A;else{if(A===null)throw hr.alternate===null?Error(n(467)):Error(n(310));Cr=A,A={memoizedState:Cr.memoizedState,baseState:Cr.baseState,baseQueue:Cr.baseQueue,queue:Cr.queue,next:null},gn===null?hr.memoizedState=gn=A:gn=gn.next=A}return gn}function cA(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uu(A){var f=Bs;return Bs+=1,Os===null&&(Os=[]),A=Xe(Os,A,f),f=hr,(gn===null?f.memoizedState:gn.next)===null&&(f=f.alternate,J.H=f===null||f.memoizedState===null?gN:xN),A}function Si(A){if(A!==null&&typeof A=="object"){if(typeof A.then=="function")return uu(A);if(A.$$typeof===D)return Xs(A)}throw Error(n(438,String(A)))}function Au(A){var f=null,p=hr.updateQueue;if(p!==null&&(f=p.memoCache),f==null){var w=hr.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(f={data:w.data.map(function(I){return I.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),p===null&&(p=cA(),hr.updateQueue=p),p.memoCache=f,p=f.data[f.index],p===void 0)for(p=f.data[f.index]=Array(A),w=0;w<A;w++)p[w]=O;return f.index++,p}function Ti(A,f){return typeof f=="function"?f(A):f}function Vf(A){var f=us();return cd(f,Cr,A)}function cd(A,f,p){var w=A.queue;if(w===null)throw Error(n(311));w.lastRenderedReducer=p;var I=A.baseQueue,V=w.pending;if(V!==null){if(I!==null){var le=I.next;I.next=V.next,V.next=le}f.baseQueue=I=V,w.pending=null}if(V=A.baseState,I===null)A.memoizedState=V;else{f=I.next;var we=le=null,Re=null,rt=f,ft=!1;do{var bt=rt.lane&-536870913;if(bt!==rt.lane?(wn&bt)===bt:(Qn&bt)===bt){var st=rt.revertLane;if(st===0)Re!==null&&(Re=Re.next={lane:0,revertLane:0,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null}),bt===oA&&(ft=!0);else if((Qn&st)===st){rt=rt.next,st===oA&&(ft=!0);continue}else bt={lane:0,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Re===null?(we=Re=bt,le=V):Re=Re.next=bt,hr.lanes|=st,yd|=st;bt=rt.action,ea&&p(V,bt),V=rt.hasEagerState?rt.eagerState:p(V,bt)}else st={lane:bt,revertLane:rt.revertLane,action:rt.action,hasEagerState:rt.hasEagerState,eagerState:rt.eagerState,next:null},Re===null?(we=Re=st,le=V):Re=Re.next=st,hr.lanes|=bt,yd|=bt;rt=rt.next}while(rt!==null&&rt!==f);if(Re===null?le=V:Re.next=we,!pa(V,A.memoizedState)&&(Ga=!0,ft&&(p=hc,p!==null)))throw p;A.memoizedState=V,A.baseState=le,A.baseQueue=Re,w.lastRenderedState=V}return I===null&&(w.lanes=0),[A.memoizedState,w.dispatch]}function d0(A){var f=us(),p=f.queue;if(p===null)throw Error(n(311));p.lastRenderedReducer=A;var w=p.dispatch,I=p.pending,V=f.memoizedState;if(I!==null){p.pending=null;var le=I=I.next;do V=A(V,le.action),le=le.next;while(le!==I);pa(V,f.memoizedState)||(Ga=!0),f.memoizedState=V,f.baseQueue===null&&(f.baseState=V),p.lastRenderedState=V}return[V,w]}function zf(A,f,p){var w=hr,I=us(),V=Cn;if(V){if(p===void 0)throw Error(n(407));p=p()}else p=f();var le=!pa((Cr||I).memoizedState,p);le&&(I.memoizedState=p,Ga=!0),I=I.queue;var we=ud.bind(null,w,I,A);if(fd(2048,8,we,[A]),I.getSnapshot!==f||le||gn!==null&&gn.memoizedState.tag&1){if(w.flags|=2048,pc(9,$f(),Gf.bind(null,w,I,p,f),null),os===null)throw Error(n(349));V||(Qn&124)!==0||f0(w,f,p)}return p}function f0(A,f,p){A.flags|=16384,A={getSnapshot:f,value:p},f=hr.updateQueue,f===null?(f=cA(),hr.updateQueue=f,f.stores=[A]):(p=f.stores,p===null?f.stores=[A]:p.push(A))}function Gf(A,f,p,w){f.value=p,f.getSnapshot=w,M1(f)&&P1(A)}function ud(A,f,p){return p(function(){M1(f)&&P1(A)})}function M1(A){var f=A.getSnapshot;A=A.value;try{var p=f();return!pa(A,p)}catch{return!0}}function P1(A){var f=oc(A,2);f!==null&&Jo(f,A,2)}function qf(A){var f=si();if(typeof A=="function"){var p=A;if(A=p(),ea){qt(!0);try{p()}finally{qt(!1)}}}return f.memoizedState=f.baseState=A,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:A},f}function mc(A,f,p,w){return A.baseState=p,cd(A,Cr,typeof w=="function"?w:Ti)}function Qb(A,f,p,w,I){if(K1(A))throw Error(n(485));if(A=f.action,A!==null){var V={payload:I,action:A,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){V.listeners.push(le)}};J.T!==null?p(!0):V.isTransition=!1,w(V),p=f.pending,p===null?(V.next=f.pending=V,j1(f,V)):(V.next=p.next,f.pending=p.next=V)}}function j1(A,f){var p=f.action,w=f.payload,I=A.state;if(f.isTransition){var V=J.T,le={};J.T=le;try{var we=p(I,w),Re=J.S;Re!==null&&Re(le,we),O1(A,f,we)}catch(rt){Ad(A,f,rt)}finally{J.T=V}}else try{V=p(I,w),O1(A,f,V)}catch(rt){Ad(A,f,rt)}}function O1(A,f,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(w){yp(A,f,w)},function(w){return Ad(A,f,w)}):yp(A,f,p)}function yp(A,f,p){f.status="fulfilled",f.value=p,wp(f),A.state=p,f=A.pending,f!==null&&(p=f.next,p===f?A.pending=null:(p=p.next,f.next=p,j1(A,p)))}function Ad(A,f,p){var w=A.pending;if(A.pending=null,w!==null){w=w.next;do f.status="rejected",f.reason=p,wp(f),f=f.next;while(f!==w)}A.action=null}function wp(A){A=A.listeners;for(var f=0;f<A.length;f++)(0,A[f])()}function bp(A,f){return f}function Kf(A,f){if(Cn){var p=os.formState;if(p!==null){e:{var w=hr;if(Cn){if(ys){t:{for(var I=ys,V=_l;I.nodeType!==8;){if(!V){I=null;break t}if(I=yc(I.nextSibling),I===null){I=null;break t}}V=I.data,I=V==="F!"||V==="F"?I:null}if(I){ys=yc(I.nextSibling),w=I.data==="F!";break e}}iA(w)}w=!1}w&&(f=p[0])}}return p=si(),p.memoizedState=p.baseState=f,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bp,lastRenderedState:f},p.queue=w,p=hN.bind(null,hr,w),w.dispatch=p,w=qf(!1),V=Hb.bind(null,hr,!1,w.queue),w=si(),I={state:f,dispatch:null,action:A,pending:null},w.queue=I,p=Qb.bind(null,hr,I,V,p),I.dispatch=p,w.memoizedState=A,[f,p,!1]}function h0(A){var f=us();return dd(f,Cr,A)}function dd(A,f,p){if(f=cd(A,f,bp)[0],A=Vf(Ti)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var w=uu(f)}catch(le){throw le===pe?ve:le}else w=f;f=us();var I=f.queue,V=I.dispatch;return p!==f.memoizedState&&(hr.flags|=2048,pc(9,$f(),Q1.bind(null,I,p),null)),[w,V,A]}function Q1(A,f){A.action=f}function H1(A){var f=us(),p=Cr;if(p!==null)return dd(f,p,A);us(),f=f.memoizedState,p=us();var w=p.queue.dispatch;return p.memoizedState=A,[f,w,!1]}function pc(A,f,p,w){return A={tag:A,create:p,deps:w,inst:f,next:null},f=hr.updateQueue,f===null&&(f=cA(),hr.updateQueue=f),p=f.lastEffect,p===null?f.lastEffect=A.next=A:(w=p.next,p.next=A,A.next=w,f.lastEffect=A),A}function $f(){return{destroy:void 0,resource:void 0}}function m0(){return us().memoizedState}function qo(A,f,p,w){var I=si();w=w===void 0?null:w,hr.flags|=A,I.memoizedState=pc(1|f,$f(),p,w)}function fd(A,f,p,w){var I=us();w=w===void 0?null:w;var V=I.memoizedState.inst;Cr!==null&&w!==null&&Qs(w,Cr.memoizedState.deps)?I.memoizedState=pc(f,V,p,w):(hr.flags|=A,I.memoizedState=pc(1|f,V,p,w))}function Cp(A,f){qo(8390656,8,A,f)}function V1(A,f){fd(2048,8,A,f)}function Ep(A,f){return fd(4,2,A,f)}function uA(A,f){return fd(4,4,A,f)}function z1(A,f){if(typeof f=="function"){A=A();var p=f(A);return function(){typeof p=="function"?p():f(null)}}if(f!=null)return A=A(),f.current=A,function(){f.current=null}}function _p(A,f,p){p=p!=null?p.concat([A]):null,fd(4,4,z1.bind(null,f,A),p)}function Sp(){}function Tp(A,f){var p=us();f=f===void 0?null:f;var w=p.memoizedState;return f!==null&&Qs(f,w[1])?w[0]:(p.memoizedState=[A,f],A)}function G1(A,f){var p=us();f=f===void 0?null:f;var w=p.memoizedState;if(f!==null&&Qs(f,w[1]))return w[0];if(w=A(),ea){qt(!0);try{A()}finally{qt(!1)}}return p.memoizedState=[w,f],w}function AA(A,f,p){return p===void 0||(Qn&1073741824)!==0?A.memoizedState=f:(A.memoizedState=p,A=uB(),hr.lanes|=A,yd|=A,p)}function p0(A,f,p,w){return pa(p,f)?p:Kr.current!==null?(A=AA(A,p,w),pa(A,f)||(Ga=!0),A):(Qn&42)===0?(Ga=!0,A.memoizedState=p):(A=uB(),hr.lanes|=A,yd|=A,f)}function Wf(A,f,p,w,I){var V=re.p;re.p=V!==0&&8>V?V:8;var le=J.T,we={};J.T=we,Hb(A,!1,f,p);try{var Re=I(),rt=J.S;if(rt!==null&&rt(we,Re),Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var ft=U1(Re,w);Ip(A,f,ft,Yo(A))}else Ip(A,f,w,Yo(A))}catch(bt){Ip(A,f,{then:function(){},status:"rejected",reason:bt},Yo())}finally{re.p=V,J.T=le}}function gc(){}function Bl(A,f,p,w){if(A.tag!==5)throw Error(n(476));var I=xc(A).queue;Wf(A,I,f,G,p===null?gc:function(){return Yf(A),p(w)})}function xc(A){var f=A.memoizedState;if(f!==null)return f;f={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:G},next:null};var p={};return f.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:p},next:null},A.memoizedState=f,A=A.alternate,A!==null&&(A.memoizedState=f),f}function Yf(A){var f=xc(A).next.queue;Ip(A,f,{},Yo())}function Jf(){return Xs(Wp)}function Np(){return us().memoizedState}function q1(){return us().memoizedState}function Bp(A){for(var f=A.return;f!==null;){switch(f.tag){case 24:case 3:var p=Yo();A=At(p);var w=yt(f,A,p);w!==null&&(Jo(w,f,p),ht(w,f,p)),f={cache:xp()},A.payload=f;return}f=f.return}}function kp(A,f,p){var w=Yo();p={lane:w,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},K1(A)?mN(f,p):(p=nu(A,f,p,w),p!==null&&(Jo(p,A,w),pN(p,f,w)))}function hN(A,f,p){var w=Yo();Ip(A,f,p,w)}function Ip(A,f,p,w){var I={lane:w,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(K1(A))mN(f,I);else{var V=A.alternate;if(A.lanes===0&&(V===null||V.lanes===0)&&(V=f.lastRenderedReducer,V!==null))try{var le=f.lastRenderedState,we=V(le,p);if(I.hasEagerState=!0,I.eagerState=we,pa(we,le))return ru(A,f,I,0),os===null&&vo(),!1}catch{}finally{}if(p=nu(A,f,I,w),p!==null)return Jo(p,A,w),pN(p,f,w),!0}return!1}function Hb(A,f,p,w){if(w={lane:2,revertLane:yC(),action:w,hasEagerState:!1,eagerState:null,next:null},K1(A)){if(f)throw Error(n(479))}else f=nu(A,p,w,2),f!==null&&Jo(f,A,2)}function K1(A){var f=A.alternate;return A===hr||f!==null&&f===hr}function mN(A,f){va=yn=!0;var p=A.pending;p===null?f.next=f:(f.next=p.next,p.next=f),A.pending=f}function pN(A,f,p){if((p&4194048)!==0){var w=f.lanes;w&=A.pendingLanes,p|=w,f.lanes=p,Gr(A,p)}}var $1={readContext:Xs,use:Si,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useLayoutEffect:kn,useInsertionEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useSyncExternalStore:kn,useId:kn,useHostTransitionStatus:kn,useFormState:kn,useActionState:kn,useOptimistic:kn,useMemoCache:kn,useCacheRefresh:kn},gN={readContext:Xs,use:Si,useCallback:function(A,f){return si().memoizedState=[A,f===void 0?null:f],A},useContext:Xs,useEffect:Cp,useImperativeHandle:function(A,f,p){p=p!=null?p.concat([A]):null,qo(4194308,4,z1.bind(null,f,A),p)},useLayoutEffect:function(A,f){return qo(4194308,4,A,f)},useInsertionEffect:function(A,f){qo(4,2,A,f)},useMemo:function(A,f){var p=si();f=f===void 0?null:f;var w=A();if(ea){qt(!0);try{A()}finally{qt(!1)}}return p.memoizedState=[w,f],w},useReducer:function(A,f,p){var w=si();if(p!==void 0){var I=p(f);if(ea){qt(!0);try{p(f)}finally{qt(!1)}}}else I=f;return w.memoizedState=w.baseState=I,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A,lastRenderedState:I},w.queue=A,A=A.dispatch=kp.bind(null,hr,A),[w.memoizedState,A]},useRef:function(A){var f=si();return A={current:A},f.memoizedState=A},useState:function(A){A=qf(A);var f=A.queue,p=hN.bind(null,hr,f);return f.dispatch=p,[A.memoizedState,p]},useDebugValue:Sp,useDeferredValue:function(A,f){var p=si();return AA(p,A,f)},useTransition:function(){var A=qf(!1);return A=Wf.bind(null,hr,A.queue,!0,!1),si().memoizedState=A,[!1,A]},useSyncExternalStore:function(A,f,p){var w=hr,I=si();if(Cn){if(p===void 0)throw Error(n(407));p=p()}else{if(p=f(),os===null)throw Error(n(349));(wn&124)!==0||f0(w,f,p)}I.memoizedState=p;var V={value:p,getSnapshot:f};return I.queue=V,Cp(ud.bind(null,w,V,A),[A]),w.flags|=2048,pc(9,$f(),Gf.bind(null,w,V,p,f),null),p},useId:function(){var A=si(),f=os.identifierPrefix;if(Cn){var p=Ac,w=uc;p=(w&~(1<<32-It(w)-1)).toString(32)+p,f="«"+f+"R"+p,p=Ns++,0<p&&(f+="H"+p.toString(32)),f+="»"}else p=bo++,f="«"+f+"r"+p.toString(32)+"»";return A.memoizedState=f},useHostTransitionStatus:Jf,useFormState:Kf,useActionState:Kf,useOptimistic:function(A){var f=si();f.memoizedState=f.baseState=A;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=p,f=Hb.bind(null,hr,!0,p),p.dispatch=f,[A,f]},useMemoCache:Au,useCacheRefresh:function(){return si().memoizedState=Bp.bind(null,hr)}},xN={readContext:Xs,use:Si,useCallback:Tp,useContext:Xs,useEffect:V1,useImperativeHandle:_p,useInsertionEffect:Ep,useLayoutEffect:uA,useMemo:G1,useReducer:Vf,useRef:m0,useState:function(){return Vf(Ti)},useDebugValue:Sp,useDeferredValue:function(A,f){var p=us();return p0(p,Cr.memoizedState,A,f)},useTransition:function(){var A=Vf(Ti)[0],f=us().memoizedState;return[typeof A=="boolean"?A:uu(A),f]},useSyncExternalStore:zf,useId:Np,useHostTransitionStatus:Jf,useFormState:h0,useActionState:h0,useOptimistic:function(A,f){var p=us();return mc(p,Cr,A,f)},useMemoCache:Au,useCacheRefresh:q1},l9={readContext:Xs,use:Si,useCallback:Tp,useContext:Xs,useEffect:V1,useImperativeHandle:_p,useInsertionEffect:Ep,useLayoutEffect:uA,useMemo:G1,useReducer:d0,useRef:m0,useState:function(){return d0(Ti)},useDebugValue:Sp,useDeferredValue:function(A,f){var p=us();return Cr===null?AA(p,A,f):p0(p,Cr.memoizedState,A,f)},useTransition:function(){var A=d0(Ti)[0],f=us().memoizedState;return[typeof A=="boolean"?A:uu(A),f]},useSyncExternalStore:zf,useId:Np,useHostTransitionStatus:Jf,useFormState:H1,useActionState:H1,useOptimistic:function(A,f){var p=us();return Cr!==null?mc(p,Cr,A,f):(p.baseState=A,[A,p.queue.dispatch])},useMemoCache:Au,useCacheRefresh:q1},g0=null,Fp=0;function W1(A){var f=Fp;return Fp+=1,g0===null&&(g0=[]),Xe(g0,A,f)}function Dp(A,f){f=f.props.ref,A.ref=f!==void 0?f:null}function Y1(A,f){throw f.$$typeof===h?Error(n(525)):(A=Object.prototype.toString.call(f),Error(n(31,A==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":A)))}function vN(A){var f=A._init;return f(A._payload)}function yN(A){function f(qe,je){if(A){var Je=qe.deletions;Je===null?(qe.deletions=[je],qe.flags|=16):Je.push(je)}}function p(qe,je){if(!A)return null;for(;je!==null;)f(qe,je),je=je.sibling;return null}function w(qe){for(var je=new Map;qe!==null;)qe.key!==null?je.set(qe.key,qe):je.set(qe.index,qe),qe=qe.sibling;return je}function I(qe,je){return qe=El(qe,je),qe.index=0,qe.sibling=null,qe}function V(qe,je,Je){return qe.index=Je,A?(Je=qe.alternate,Je!==null?(Je=Je.index,Je<je?(qe.flags|=67108866,je):Je):(qe.flags|=67108866,je)):(qe.flags|=1048576,je)}function le(qe){return A&&qe.alternate===null&&(qe.flags|=67108866),qe}function we(qe,je,Je,gt){return je===null||je.tag!==6?(je=a0(Je,qe.mode,gt),je.return=qe,je):(je=I(je,Je),je.return=qe,je)}function Re(qe,je,Je,gt){var tr=Je.type;return tr===b?ft(qe,je,Je.props.children,gt,Je.key):je!==null&&(je.elementType===tr||typeof tr=="object"&&tr!==null&&tr.$$typeof===E&&vN(tr)===je.type)?(je=I(je,Je.props),Dp(je,Je),je.return=qe,je):(je=nA(Je.type,Je.key,Je.props,null,qe.mode,gt),Dp(je,Je),je.return=qe,je)}function rt(qe,je,Je,gt){return je===null||je.tag!==4||je.stateNode.containerInfo!==Je.containerInfo||je.stateNode.implementation!==Je.implementation?(je=Mf(Je,qe.mode,gt),je.return=qe,je):(je=I(je,Je.children||[]),je.return=qe,je)}function ft(qe,je,Je,gt,tr){return je===null||je.tag!==7?(je=lc(Je,qe.mode,gt,tr),je.return=qe,je):(je=I(je,Je),je.return=qe,je)}function bt(qe,je,Je){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return je=a0(""+je,qe.mode,Je),je.return=qe,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case m:return Je=nA(je.type,je.key,je.props,null,qe.mode,Je),Dp(Je,je),Je.return=qe,Je;case g:return je=Mf(je,qe.mode,Je),je.return=qe,je;case E:var gt=je._init;return je=gt(je._payload),bt(qe,je,Je)}if(ne(je)||F(je))return je=lc(je,qe.mode,Je,null),je.return=qe,je;if(typeof je.then=="function")return bt(qe,W1(je),Je);if(je.$$typeof===D)return bt(qe,ou(qe,je),Je);Y1(qe,je)}return null}function st(qe,je,Je,gt){var tr=je!==null?je.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return tr!==null?null:we(qe,je,""+Je,gt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case m:return Je.key===tr?Re(qe,je,Je,gt):null;case g:return Je.key===tr?rt(qe,je,Je,gt):null;case E:return tr=Je._init,Je=tr(Je._payload),st(qe,je,Je,gt)}if(ne(Je)||F(Je))return tr!==null?null:ft(qe,je,Je,gt,null);if(typeof Je.then=="function")return st(qe,je,W1(Je),gt);if(Je.$$typeof===D)return st(qe,je,ou(qe,Je),gt);Y1(qe,Je)}return null}function at(qe,je,Je,gt,tr){if(typeof gt=="string"&&gt!==""||typeof gt=="number"||typeof gt=="bigint")return qe=qe.get(Je)||null,we(je,qe,""+gt,tr);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case m:return qe=qe.get(gt.key===null?Je:gt.key)||null,Re(je,qe,gt,tr);case g:return qe=qe.get(gt.key===null?Je:gt.key)||null,rt(je,qe,gt,tr);case E:var rn=gt._init;return gt=rn(gt._payload),at(qe,je,Je,gt,tr)}if(ne(gt)||F(gt))return qe=qe.get(Je)||null,ft(je,qe,gt,tr,null);if(typeof gt.then=="function")return at(qe,je,Je,W1(gt),tr);if(gt.$$typeof===D)return at(qe,je,Je,ou(je,gt),tr);Y1(je,gt)}return null}function Nr(qe,je,Je,gt){for(var tr=null,rn=null,ir=je,yr=je=0,Ka=null;ir!==null&&yr<Je.length;yr++){ir.index>yr?(Ka=ir,ir=null):Ka=ir.sibling;var In=st(qe,ir,Je[yr],gt);if(In===null){ir===null&&(ir=Ka);break}A&&ir&&In.alternate===null&&f(qe,ir),je=V(In,je,yr),rn===null?tr=In:rn.sibling=In,rn=In,ir=Ka}if(yr===Je.length)return p(qe,ir),Cn&&aA(qe,yr),tr;if(ir===null){for(;yr<Je.length;yr++)ir=bt(qe,Je[yr],gt),ir!==null&&(je=V(ir,je,yr),rn===null?tr=ir:rn.sibling=ir,rn=ir);return Cn&&aA(qe,yr),tr}for(ir=w(ir);yr<Je.length;yr++)Ka=at(ir,qe,yr,Je[yr],gt),Ka!==null&&(A&&Ka.alternate!==null&&ir.delete(Ka.key===null?yr:Ka.key),je=V(Ka,je,yr),rn===null?tr=Ka:rn.sibling=Ka,rn=Ka);return A&&ir.forEach(function(Bd){return f(qe,Bd)}),Cn&&aA(qe,yr),tr}function xr(qe,je,Je,gt){if(Je==null)throw Error(n(151));for(var tr=null,rn=null,ir=je,yr=je=0,Ka=null,In=Je.next();ir!==null&&!In.done;yr++,In=Je.next()){ir.index>yr?(Ka=ir,ir=null):Ka=ir.sibling;var Bd=st(qe,ir,In.value,gt);if(Bd===null){ir===null&&(ir=Ka);break}A&&ir&&Bd.alternate===null&&f(qe,ir),je=V(Bd,je,yr),rn===null?tr=Bd:rn.sibling=Bd,rn=Bd,ir=Ka}if(In.done)return p(qe,ir),Cn&&aA(qe,yr),tr;if(ir===null){for(;!In.done;yr++,In=Je.next())In=bt(qe,In.value,gt),In!==null&&(je=V(In,je,yr),rn===null?tr=In:rn.sibling=In,rn=In);return Cn&&aA(qe,yr),tr}for(ir=w(ir);!In.done;yr++,In=Je.next())In=at(ir,qe,yr,In.value,gt),In!==null&&(A&&In.alternate!==null&&ir.delete(In.key===null?yr:In.key),je=V(In,je,yr),rn===null?tr=In:rn.sibling=In,rn=In);return A&&ir.forEach(function(cV){return f(qe,cV)}),Cn&&aA(qe,yr),tr}function es(qe,je,Je,gt){if(typeof Je=="object"&&Je!==null&&Je.type===b&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case m:e:{for(var tr=Je.key;je!==null;){if(je.key===tr){if(tr=Je.type,tr===b){if(je.tag===7){p(qe,je.sibling),gt=I(je,Je.props.children),gt.return=qe,qe=gt;break e}}else if(je.elementType===tr||typeof tr=="object"&&tr!==null&&tr.$$typeof===E&&vN(tr)===je.type){p(qe,je.sibling),gt=I(je,Je.props),Dp(gt,Je),gt.return=qe,qe=gt;break e}p(qe,je);break}else f(qe,je);je=je.sibling}Je.type===b?(gt=lc(Je.props.children,qe.mode,gt,Je.key),gt.return=qe,qe=gt):(gt=nA(Je.type,Je.key,Je.props,null,qe.mode,gt),Dp(gt,Je),gt.return=qe,qe=gt)}return le(qe);case g:e:{for(tr=Je.key;je!==null;){if(je.key===tr)if(je.tag===4&&je.stateNode.containerInfo===Je.containerInfo&&je.stateNode.implementation===Je.implementation){p(qe,je.sibling),gt=I(je,Je.children||[]),gt.return=qe,qe=gt;break e}else{p(qe,je);break}else f(qe,je);je=je.sibling}gt=Mf(Je,qe.mode,gt),gt.return=qe,qe=gt}return le(qe);case E:return tr=Je._init,Je=tr(Je._payload),es(qe,je,Je,gt)}if(ne(Je))return Nr(qe,je,Je,gt);if(F(Je)){if(tr=F(Je),typeof tr!="function")throw Error(n(150));return Je=tr.call(Je),xr(qe,je,Je,gt)}if(typeof Je.then=="function")return es(qe,je,W1(Je),gt);if(Je.$$typeof===D)return es(qe,je,ou(qe,Je),gt);Y1(qe,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint"?(Je=""+Je,je!==null&&je.tag===6?(p(qe,je.sibling),gt=I(je,Je),gt.return=qe,qe=gt):(p(qe,je),gt=a0(Je,qe.mode,gt),gt.return=qe,qe=gt),le(qe)):p(qe,je)}return function(qe,je,Je,gt){try{Fp=0;var tr=es(qe,je,Je,gt);return g0=null,tr}catch(ir){if(ir===pe||ir===ve)throw ir;var rn=za(29,ir,null,qe.mode);return rn.lanes=gt,rn.return=qe,rn}finally{}}}var x0=yN(!0),wN=yN(!1),kl=ie(null),du=null;function hd(A){var f=A.alternate;Y(La,La.current&1),Y(kl,A),du===null&&(f===null||Kr.current!==null||f.memoizedState!==null)&&(du=A)}function bN(A){if(A.tag===22){if(Y(La,La.current),Y(kl,A),du===null){var f=A.alternate;f!==null&&f.memoizedState!==null&&(du=A)}}else md()}function md(){Y(La,La.current),Y(kl,kl.current)}function dA(A){j(kl),du===A&&(du=null),j(La)}var La=ie(0);function J1(A){for(var f=A;f!==null;){if(f.tag===13){var p=f.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||FC(p)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function Vb(A,f,p,w){f=A.memoizedState,p=p(w,f),p=p==null?f:d({},f,p),A.memoizedState=p,A.lanes===0&&(A.updateQueue.baseState=p)}var zb={enqueueSetState:function(A,f,p){A=A._reactInternals;var w=Yo(),I=At(w);I.payload=f,p!=null&&(I.callback=p),f=yt(A,I,w),f!==null&&(Jo(f,A,w),ht(f,A,w))},enqueueReplaceState:function(A,f,p){A=A._reactInternals;var w=Yo(),I=At(w);I.tag=1,I.payload=f,p!=null&&(I.callback=p),f=yt(A,I,w),f!==null&&(Jo(f,A,w),ht(f,A,w))},enqueueForceUpdate:function(A,f){A=A._reactInternals;var p=Yo(),w=At(p);w.tag=2,f!=null&&(w.callback=f),f=yt(A,w,p),f!==null&&(Jo(f,A,p),ht(f,A,p))}};function CN(A,f,p,w,I,V,le){return A=A.stateNode,typeof A.shouldComponentUpdate=="function"?A.shouldComponentUpdate(w,V,le):f.prototype&&f.prototype.isPureReactComponent?!Wc(p,w)||!Wc(I,V):!0}function EN(A,f,p,w){A=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(p,w),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(p,w),f.state!==A&&zb.enqueueReplaceState(f,f.state,null)}function Xf(A,f){var p=f;if("ref"in f){p={};for(var w in f)w!=="ref"&&(p[w]=f[w])}if(A=A.defaultProps){p===f&&(p=d({},p));for(var I in A)p[I]===void 0&&(p[I]=A[I])}return p}var X1=typeof reportError=="function"?reportError:function(A){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof A=="object"&&A!==null&&typeof A.message=="string"?String(A.message):String(A),error:A});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",A);return}console.error(A)};function _N(A){X1(A)}function SN(A){console.error(A)}function TN(A){X1(A)}function Z1(A,f){try{var p=A.onUncaughtError;p(f.value,{componentStack:f.stack})}catch(w){setTimeout(function(){throw w})}}function NN(A,f,p){try{var w=A.onCaughtError;w(p.value,{componentStack:p.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(I){setTimeout(function(){throw I})}}function Gb(A,f,p){return p=At(p),p.tag=3,p.payload={element:null},p.callback=function(){Z1(A,f)},p}function BN(A){return A=At(A),A.tag=3,A}function kN(A,f,p,w){var I=p.type.getDerivedStateFromError;if(typeof I=="function"){var V=w.value;A.payload=function(){return I(V)},A.callback=function(){NN(f,p,w)}}var le=p.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(A.callback=function(){NN(f,p,w),typeof I!="function"&&(wd===null?wd=new Set([this]):wd.add(this));var we=w.stack;this.componentDidCatch(w.value,{componentStack:we!==null?we:""})})}function c9(A,f,p,w,I){if(p.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(f=p.alternate,f!==null&&ld(f,p,I,!0),p=kl.current,p!==null){switch(p.tag){case 13:return du===null?mC():p.alternate===null&&Hs===0&&(Hs=3),p.flags&=-257,p.flags|=65536,p.lanes=I,w===Ce?p.flags|=16384:(f=p.updateQueue,f===null?p.updateQueue=new Set([w]):f.add(w),gC(A,w,I)),!1;case 22:return p.flags|=65536,w===Ce?p.flags|=16384:(f=p.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([w])},p.updateQueue=f):(p=f.retryQueue,p===null?f.retryQueue=new Set([w]):p.add(w)),gC(A,w,I)),!1}throw Error(n(435,p.tag))}return gC(A,w,I),mC(),!1}if(Cn)return f=kl.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=I,w!==gp&&(A=Error(n(422),{cause:w}),od($r(A,p)))):(w!==gp&&(f=Error(n(423),{cause:w}),od($r(f,p))),A=A.current.alternate,A.flags|=65536,I&=-I,A.lanes|=I,w=$r(w,p),I=Gb(A.stateNode,w,I),$t(A,I),Hs!==4&&(Hs=2)),!1;var V=Error(n(520),{cause:w});if(V=$r(V,p),Op===null?Op=[V]:Op.push(V),Hs!==4&&(Hs=2),f===null)return!0;w=$r(w,p),p=f;do{switch(p.tag){case 3:return p.flags|=65536,A=I&-I,p.lanes|=A,A=Gb(p.stateNode,w,A),$t(p,A),!1;case 1:if(f=p.type,V=p.stateNode,(p.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(wd===null||!wd.has(V))))return p.flags|=65536,I&=-I,p.lanes|=I,I=BN(I),kN(I,A,p,w),$t(p,I),!1}p=p.return}while(p!==null);return!1}var IN=Error(n(461)),Ga=!1;function ai(A,f,p,w){f.child=A===null?wN(f,null,p,w):x0(f,A.child,p,w)}function FN(A,f,p,w,I){p=p.render;var V=f.ref;if("ref"in w){var le={};for(var we in w)we!=="ref"&&(le[we]=w[we])}else le=w;return Nl(f),w=Go(A,f,p,le,V,I),we=is(),A!==null&&!Ga?(Hf(A,f,I),fA(A,f,I)):(Cn&&we&&Pf(f),f.flags|=1,ai(A,f,w,I),f.child)}function DN(A,f,p,w,I){if(A===null){var V=p.type;return typeof V=="function"&&!ad(V)&&V.defaultProps===void 0&&p.compare===null?(f.tag=15,f.type=V,RN(A,f,V,w,I)):(A=nA(p.type,null,w,f,f.mode,I),A.ref=f.ref,A.return=f,f.child=A)}if(V=A.child,!Zb(A,I)){var le=V.memoizedProps;if(p=p.compare,p=p!==null?p:Wc,p(le,w)&&A.ref===f.ref)return fA(A,f,I)}return f.flags|=1,A=El(V,w),A.ref=f.ref,A.return=f,f.child=A}function RN(A,f,p,w,I){if(A!==null){var V=A.memoizedProps;if(Wc(V,w)&&A.ref===f.ref)if(Ga=!1,f.pendingProps=w=V,Zb(A,I))(A.flags&131072)!==0&&(Ga=!0);else return f.lanes=A.lanes,fA(A,f,I)}return qb(A,f,p,w,I)}function LN(A,f,p){var w=f.pendingProps,I=w.children,V=A!==null?A.memoizedState:null;if(w.mode==="hidden"){if((f.flags&128)!==0){if(w=V!==null?V.baseLanes|p:p,A!==null){for(I=f.child=A.child,V=0;I!==null;)V=V|I.lanes|I.childLanes,I=I.sibling;f.childLanes=V&~w}else f.childLanes=0,f.child=null;return UN(A,f,w,p)}if((p&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},A!==null&&se(f,V!==null?V.cachePool:null),V!==null?Un(f,V):Bn(),bN(f);else return f.lanes=f.childLanes=536870912,UN(A,f,V!==null?V.baseLanes|p:p,p)}else V!==null?(se(f,V.cachePool),Un(f,V),md(),f.memoizedState=null):(A!==null&&se(f,null),Bn(),md());return ai(A,f,I,p),f.child}function UN(A,f,p,w){var I=K();return I=I===null?null:{parent:Zs._currentValue,pool:I},f.memoizedState={baseLanes:p,cachePool:I},A!==null&&se(f,null),Bn(),bN(f),A!==null&&ld(A,f,w,!0),null}function ev(A,f){var p=f.ref;if(p===null)A!==null&&A.ref!==null&&(f.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(n(284));(A===null||A.ref!==p)&&(f.flags|=4194816)}}function qb(A,f,p,w,I){return Nl(f),p=Go(A,f,p,w,void 0,I),w=is(),A!==null&&!Ga?(Hf(A,f,I),fA(A,f,I)):(Cn&&w&&Pf(f),f.flags|=1,ai(A,f,p,I),f.child)}function MN(A,f,p,w,I,V){return Nl(f),f.updateQueue=null,p=lA(f,w,p,I),lu(A),w=is(),A!==null&&!Ga?(Hf(A,f,V),fA(A,f,V)):(Cn&&w&&Pf(f),f.flags|=1,ai(A,f,p,V),f.child)}function PN(A,f,p,w,I){if(Nl(f),f.stateNode===null){var V=ga,le=p.contextType;typeof le=="object"&&le!==null&&(V=Xs(le)),V=new p(w,V),f.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=zb,f.stateNode=V,V._reactInternals=f,V=f.stateNode,V.props=w,V.state=f.memoizedState,V.refs={},Pe(f),le=p.contextType,V.context=typeof le=="object"&&le!==null?Xs(le):ga,V.state=f.memoizedState,le=p.getDerivedStateFromProps,typeof le=="function"&&(Vb(f,p,le,w),V.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(le=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),le!==V.state&&zb.enqueueReplaceState(V,V.state,null),Vt(f,w,V,I),sr(),V.state=f.memoizedState),typeof V.componentDidMount=="function"&&(f.flags|=4194308),w=!0}else if(A===null){V=f.stateNode;var we=f.memoizedProps,Re=Xf(p,we);V.props=Re;var rt=V.context,ft=p.contextType;le=ga,typeof ft=="object"&&ft!==null&&(le=Xs(ft));var bt=p.getDerivedStateFromProps;ft=typeof bt=="function"||typeof V.getSnapshotBeforeUpdate=="function",we=f.pendingProps!==we,ft||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(we||rt!==le)&&EN(f,V,w,le),it=!1;var st=f.memoizedState;V.state=st,Vt(f,w,V,I),sr(),rt=f.memoizedState,we||st!==rt||it?(typeof bt=="function"&&(Vb(f,p,bt,w),rt=f.memoizedState),(Re=it||CN(f,p,Re,w,st,rt,le))?(ft||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(f.flags|=4194308)):(typeof V.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=w,f.memoizedState=rt),V.props=w,V.state=rt,V.context=le,w=Re):(typeof V.componentDidMount=="function"&&(f.flags|=4194308),w=!1)}else{V=f.stateNode,Oe(A,f),le=f.memoizedProps,ft=Xf(p,le),V.props=ft,bt=f.pendingProps,st=V.context,rt=p.contextType,Re=ga,typeof rt=="object"&&rt!==null&&(Re=Xs(rt)),we=p.getDerivedStateFromProps,(rt=typeof we=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(le!==bt||st!==Re)&&EN(f,V,w,Re),it=!1,st=f.memoizedState,V.state=st,Vt(f,w,V,I),sr();var at=f.memoizedState;le!==bt||st!==at||it||A!==null&&A.dependencies!==null&&c0(A.dependencies)?(typeof we=="function"&&(Vb(f,p,we,w),at=f.memoizedState),(ft=it||CN(f,p,ft,w,st,at,Re)||A!==null&&A.dependencies!==null&&c0(A.dependencies))?(rt||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(w,at,Re),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(w,at,Re)),typeof V.componentDidUpdate=="function"&&(f.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof V.componentDidUpdate!="function"||le===A.memoizedProps&&st===A.memoizedState||(f.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&st===A.memoizedState||(f.flags|=1024),f.memoizedProps=w,f.memoizedState=at),V.props=w,V.state=at,V.context=Re,w=ft):(typeof V.componentDidUpdate!="function"||le===A.memoizedProps&&st===A.memoizedState||(f.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||le===A.memoizedProps&&st===A.memoizedState||(f.flags|=1024),w=!1)}return V=w,ev(A,f),w=(f.flags&128)!==0,V||w?(V=f.stateNode,p=w&&typeof p.getDerivedStateFromError!="function"?null:V.render(),f.flags|=1,A!==null&&w?(f.child=x0(f,A.child,null,I),f.child=x0(f,null,p,I)):ai(A,f,p,I),f.memoizedState=V.state,A=f.child):A=fA(A,f,I),A}function jN(A,f,p,w){return to(),f.flags|=256,ai(A,f,p,w),f.child}var Kb={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $b(A){return{baseLanes:A,cachePool:ue()}}function Wb(A,f,p){return A=A!==null?A.childLanes&~p:0,f&&(A|=Il),A}function ON(A,f,p){var w=f.pendingProps,I=!1,V=(f.flags&128)!==0,le;if((le=V)||(le=A!==null&&A.memoizedState===null?!1:(La.current&2)!==0),le&&(I=!0,f.flags&=-129),le=(f.flags&32)!==0,f.flags&=-33,A===null){if(Cn){if(I?hd(f):md(),Cn){var we=ys,Re;if(Re=we){e:{for(Re=we,we=_l;Re.nodeType!==8;){if(!we){we=null;break e}if(Re=yc(Re.nextSibling),Re===null){we=null;break e}}we=Re}we!==null?(f.memoizedState={dehydrated:we,treeContext:sA!==null?{id:uc,overflow:Ac}:null,retryLane:536870912,hydrationErrors:null},Re=za(18,null,null,0),Re.stateNode=we,Re.return=f,f.child=Re,Js=f,ys=null,Re=!0):Re=!1}Re||iA(f)}if(we=f.memoizedState,we!==null&&(we=we.dehydrated,we!==null))return FC(we)?f.lanes=32:f.lanes=536870912,null;dA(f)}return we=w.children,w=w.fallback,I?(md(),I=f.mode,we=tv({mode:"hidden",children:we},I),w=lc(w,I,p,null),we.return=f,w.return=f,we.sibling=w,f.child=we,I=f.child,I.memoizedState=$b(p),I.childLanes=Wb(A,le,p),f.memoizedState=Kb,w):(hd(f),Yb(f,we))}if(Re=A.memoizedState,Re!==null&&(we=Re.dehydrated,we!==null)){if(V)f.flags&256?(hd(f),f.flags&=-257,f=Jb(A,f,p)):f.memoizedState!==null?(md(),f.child=A.child,f.flags|=128,f=null):(md(),I=w.fallback,we=f.mode,w=tv({mode:"visible",children:w.children},we),I=lc(I,we,p,null),I.flags|=2,w.return=f,I.return=f,w.sibling=I,f.child=w,x0(f,A.child,null,p),w=f.child,w.memoizedState=$b(p),w.childLanes=Wb(A,le,p),f.memoizedState=Kb,f=I);else if(hd(f),FC(we)){if(le=we.nextSibling&&we.nextSibling.dataset,le)var rt=le.dgst;le=rt,w=Error(n(419)),w.stack="",w.digest=le,od({value:w,source:null,stack:null}),f=Jb(A,f,p)}else if(Ga||ld(A,f,p,!1),le=(p&A.childLanes)!==0,Ga||le){if(le=os,le!==null&&(w=p&-p,w=(w&42)!==0?1:fa(w),w=(w&(le.suspendedLanes|p))!==0?0:w,w!==0&&w!==Re.retryLane))throw Re.retryLane=w,oc(A,w),Jo(le,A,w),IN;we.data==="$?"||mC(),f=Jb(A,f,p)}else we.data==="$?"?(f.flags|=192,f.child=A.child,f=null):(A=Re.treeContext,ys=yc(we.nextSibling),Js=f,Cn=!0,au=null,_l=!1,A!==null&&(wo[eo++]=uc,wo[eo++]=Ac,wo[eo++]=sA,uc=A.id,Ac=A.overflow,sA=f),f=Yb(f,w.children),f.flags|=4096);return f}return I?(md(),I=w.fallback,we=f.mode,Re=A.child,rt=Re.sibling,w=El(Re,{mode:"hidden",children:w.children}),w.subtreeFlags=Re.subtreeFlags&65011712,rt!==null?I=El(rt,I):(I=lc(I,we,p,null),I.flags|=2),I.return=f,w.return=f,w.sibling=I,f.child=w,w=I,I=f.child,we=A.child.memoizedState,we===null?we=$b(p):(Re=we.cachePool,Re!==null?(rt=Zs._currentValue,Re=Re.parent!==rt?{parent:rt,pool:rt}:Re):Re=ue(),we={baseLanes:we.baseLanes|p,cachePool:Re}),I.memoizedState=we,I.childLanes=Wb(A,le,p),f.memoizedState=Kb,w):(hd(f),p=A.child,A=p.sibling,p=El(p,{mode:"visible",children:w.children}),p.return=f,p.sibling=null,A!==null&&(le=f.deletions,le===null?(f.deletions=[A],f.flags|=16):le.push(A)),f.child=p,f.memoizedState=null,p)}function Yb(A,f){return f=tv({mode:"visible",children:f},A.mode),f.return=A,A.child=f}function tv(A,f){return A=za(22,A,null,f),A.lanes=0,A.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},A}function Jb(A,f,p){return x0(f,A.child,null,p),A=Yb(f,f.pendingProps.children),A.flags|=2,f.memoizedState=null,A}function QN(A,f,p){A.lanes|=f;var w=A.alternate;w!==null&&(w.lanes|=f),o0(A.return,f,p)}function Xb(A,f,p,w,I){var V=A.memoizedState;V===null?A.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:w,tail:p,tailMode:I}:(V.isBackwards=f,V.rendering=null,V.renderingStartTime=0,V.last=w,V.tail=p,V.tailMode=I)}function HN(A,f,p){var w=f.pendingProps,I=w.revealOrder,V=w.tail;if(ai(A,f,w.children,p),w=La.current,(w&2)!==0)w=w&1|2,f.flags|=128;else{if(A!==null&&(A.flags&128)!==0)e:for(A=f.child;A!==null;){if(A.tag===13)A.memoizedState!==null&&QN(A,p,f);else if(A.tag===19)QN(A,p,f);else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break e;for(;A.sibling===null;){if(A.return===null||A.return===f)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}w&=1}switch(Y(La,w),I){case"forwards":for(p=f.child,I=null;p!==null;)A=p.alternate,A!==null&&J1(A)===null&&(I=p),p=p.sibling;p=I,p===null?(I=f.child,f.child=null):(I=p.sibling,p.sibling=null),Xb(f,!1,I,p,V);break;case"backwards":for(p=null,I=f.child,f.child=null;I!==null;){if(A=I.alternate,A!==null&&J1(A)===null){f.child=I;break}A=I.sibling,I.sibling=p,p=I,I=A}Xb(f,!0,p,null,V);break;case"together":Xb(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function fA(A,f,p){if(A!==null&&(f.dependencies=A.dependencies),yd|=f.lanes,(p&f.childLanes)===0)if(A!==null){if(ld(A,f,p,!1),(p&f.childLanes)===0)return null}else return null;if(A!==null&&f.child!==A.child)throw Error(n(153));if(f.child!==null){for(A=f.child,p=El(A,A.pendingProps),f.child=p,p.return=f;A.sibling!==null;)A=A.sibling,p=p.sibling=El(A,A.pendingProps),p.return=f;p.sibling=null}return f.child}function Zb(A,f){return(A.lanes&f)!==0?!0:(A=A.dependencies,!!(A!==null&&c0(A)))}function u9(A,f,p){switch(f.tag){case 3:he(f,f.stateNode.containerInfo),iu(f,Zs,A.memoizedState.cache),to();break;case 27:case 5:ge(f);break;case 4:he(f,f.stateNode.containerInfo);break;case 10:iu(f,f.type,f.memoizedProps.value);break;case 13:var w=f.memoizedState;if(w!==null)return w.dehydrated!==null?(hd(f),f.flags|=128,null):(p&f.child.childLanes)!==0?ON(A,f,p):(hd(f),A=fA(A,f,p),A!==null?A.sibling:null);hd(f);break;case 19:var I=(A.flags&128)!==0;if(w=(p&f.childLanes)!==0,w||(ld(A,f,p,!1),w=(p&f.childLanes)!==0),I){if(w)return HN(A,f,p);f.flags|=128}if(I=f.memoizedState,I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),Y(La,La.current),w)break;return null;case 22:case 23:return f.lanes=0,LN(A,f,p);case 24:iu(f,Zs,A.memoizedState.cache)}return fA(A,f,p)}function VN(A,f,p){if(A!==null)if(A.memoizedProps!==f.pendingProps)Ga=!0;else{if(!Zb(A,p)&&(f.flags&128)===0)return Ga=!1,u9(A,f,p);Ga=(A.flags&131072)!==0}else Ga=!1,Cn&&(f.flags&1048576)!==0&&I1(f,i0,f.index);switch(f.lanes=0,f.tag){case 16:e:{A=f.pendingProps;var w=f.elementType,I=w._init;if(w=I(w._payload),f.type=w,typeof w=="function")ad(w)?(A=Xf(w,A),f.tag=1,f=PN(null,f,w,A,p)):(f.tag=0,f=qb(null,f,w,A,p));else{if(w!=null){if(I=w.$$typeof,I===M){f.tag=11,f=FN(null,f,w,A,p);break e}else if(I===C){f.tag=14,f=DN(null,f,w,A,p);break e}}throw f=H(w)||w,Error(n(306,f,""))}}return f;case 0:return qb(A,f,f.type,f.pendingProps,p);case 1:return w=f.type,I=Xf(w,f.pendingProps),PN(A,f,w,I,p);case 3:e:{if(he(f,f.stateNode.containerInfo),A===null)throw Error(n(387));w=f.pendingProps;var V=f.memoizedState;I=V.element,Oe(A,f),Vt(f,w,null,p);var le=f.memoizedState;if(w=le.cache,iu(f,Zs,w),w!==V.cache&&l0(f,[Zs],p,!0),sr(),w=le.element,V.isDehydrated)if(V={element:w,isDehydrated:!1,cache:le.cache},f.updateQueue.baseState=V,f.memoizedState=V,f.flags&256){f=jN(A,f,w,p);break e}else if(w!==I){I=$r(Error(n(424)),f),od(I),f=jN(A,f,w,p);break e}else{switch(A=f.stateNode.containerInfo,A.nodeType){case 9:A=A.body;break;default:A=A.nodeName==="HTML"?A.ownerDocument.body:A}for(ys=yc(A.firstChild),Js=f,Cn=!0,au=null,_l=!0,p=wN(f,null,w,p),f.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(to(),w===I){f=fA(A,f,p);break e}ai(A,f,w,p)}f=f.child}return f;case 26:return ev(A,f),A===null?(p=KB(f.type,null,f.pendingProps,null))?f.memoizedState=p:Cn||(p=f.type,A=f.pendingProps,w=mv(ce.current).createElement(p),w[mn]=f,w[on]=A,oi(w,p,A),Ve(w),f.stateNode=w):f.memoizedState=KB(f.type,A.memoizedProps,f.pendingProps,A.memoizedState),null;case 27:return ge(f),A===null&&Cn&&(w=f.stateNode=zB(f.type,f.pendingProps,ce.current),Js=f,_l=!0,I=ys,Ed(f.type)?(DC=I,ys=yc(w.firstChild)):ys=I),ai(A,f,f.pendingProps.children,p),ev(A,f),A===null&&(f.flags|=4194304),f.child;case 5:return A===null&&Cn&&((I=w=ys)&&(w=P9(w,f.type,f.pendingProps,_l),w!==null?(f.stateNode=w,Js=f,ys=yc(w.firstChild),_l=!1,I=!0):I=!1),I||iA(f)),ge(f),I=f.type,V=f.pendingProps,le=A!==null?A.memoizedProps:null,w=V.children,BC(I,V)?w=null:le!==null&&BC(I,le)&&(f.flags|=32),f.memoizedState!==null&&(I=Go(A,f,cu,null,null,p),Wp._currentValue=I),ev(A,f),ai(A,f,w,p),f.child;case 6:return A===null&&Cn&&((A=p=ys)&&(p=j9(p,f.pendingProps,_l),p!==null?(f.stateNode=p,Js=f,ys=null,A=!0):A=!1),A||iA(f)),null;case 13:return ON(A,f,p);case 4:return he(f,f.stateNode.containerInfo),w=f.pendingProps,A===null?f.child=x0(f,null,w,p):ai(A,f,w,p),f.child;case 11:return FN(A,f,f.type,f.pendingProps,p);case 7:return ai(A,f,f.pendingProps,p),f.child;case 8:return ai(A,f,f.pendingProps.children,p),f.child;case 12:return ai(A,f,f.pendingProps.children,p),f.child;case 10:return w=f.pendingProps,iu(f,f.type,w.value),ai(A,f,w.children,p),f.child;case 9:return I=f.type._context,w=f.pendingProps.children,Nl(f),I=Xs(I),w=w(I),f.flags|=1,ai(A,f,w,p),f.child;case 14:return DN(A,f,f.type,f.pendingProps,p);case 15:return RN(A,f,f.type,f.pendingProps,p);case 19:return HN(A,f,p);case 31:return w=f.pendingProps,p=f.mode,w={mode:w.mode,children:w.children},A===null?(p=tv(w,p),p.ref=f.ref,f.child=p,p.return=f,f=p):(p=El(A.child,w),p.ref=f.ref,f.child=p,p.return=f,f=p),f;case 22:return LN(A,f,p);case 24:return Nl(f),w=Xs(Zs),A===null?(I=K(),I===null&&(I=os,V=xp(),I.pooledCache=V,V.refCount++,V!==null&&(I.pooledCacheLanes|=p),I=V),f.memoizedState={parent:w,cache:I},Pe(f),iu(f,Zs,I)):((A.lanes&p)!==0&&(Oe(A,f),Vt(f,null,null,p),sr()),I=A.memoizedState,V=f.memoizedState,I.parent!==w?(I={parent:w,cache:w},f.memoizedState=I,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=I),iu(f,Zs,w)):(w=V.cache,iu(f,Zs,w),w!==I.cache&&l0(f,[Zs],p,!0))),ai(A,f,f.pendingProps.children,p),f.child;case 29:throw f.pendingProps}throw Error(n(156,f.tag))}function hA(A){A.flags|=4}function zN(A,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)A.flags&=-16777217;else if(A.flags|=16777216,!XB(f)){if(f=kl.current,f!==null&&((wn&4194048)===wn?du!==null:(wn&62914560)!==wn&&(wn&536870912)===0||f!==du))throw We=Ce,xe;A.flags|=8192}}function rv(A,f){f!==null&&(A.flags|=4),A.flags&16384&&(f=A.tag!==22?an():536870912,A.lanes|=f,b0|=f)}function Rp(A,f){if(!Cn)switch(A.tailMode){case"hidden":f=A.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?A.tail=null:p.sibling=null;break;case"collapsed":p=A.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?f||A.tail===null?A.tail=null:A.tail.sibling=null:w.sibling=null}}function ks(A){var f=A.alternate!==null&&A.alternate.child===A.child,p=0,w=0;if(f)for(var I=A.child;I!==null;)p|=I.lanes|I.childLanes,w|=I.subtreeFlags&65011712,w|=I.flags&65011712,I.return=A,I=I.sibling;else for(I=A.child;I!==null;)p|=I.lanes|I.childLanes,w|=I.subtreeFlags,w|=I.flags,I.return=A,I=I.sibling;return A.subtreeFlags|=w,A.childLanes=p,f}function A9(A,f,p){var w=f.pendingProps;switch(jf(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ks(f),null;case 1:return ks(f),null;case 3:return p=f.stateNode,w=null,A!==null&&(w=A.memoizedState.cache),f.memoizedState.cache!==w&&(f.flags|=2048),Tl(Zs),fe(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(A===null||A.child===null)&&(ni(f)?hA(f):A===null||A.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,D1())),ks(f),null;case 26:return p=f.memoizedState,A===null?(hA(f),p!==null?(ks(f),zN(f,p)):(ks(f),f.flags&=-16777217)):p?p!==A.memoizedState?(hA(f),ks(f),zN(f,p)):(ks(f),f.flags&=-16777217):(A.memoizedProps!==w&&hA(f),ks(f),f.flags&=-16777217),null;case 27:de(f),p=ce.current;var I=f.type;if(A!==null&&f.stateNode!=null)A.memoizedProps!==w&&hA(f);else{if(!w){if(f.stateNode===null)throw Error(n(166));return ks(f),null}A=ee.current,ni(f)?F1(f):(A=zB(I,w,p),f.stateNode=A,hA(f))}return ks(f),null;case 5:if(de(f),p=f.type,A!==null&&f.stateNode!=null)A.memoizedProps!==w&&hA(f);else{if(!w){if(f.stateNode===null)throw Error(n(166));return ks(f),null}if(A=ee.current,ni(f))F1(f);else{switch(I=mv(ce.current),A){case 1:A=I.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:A=I.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":A=I.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":A=I.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":A=I.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof w.is=="string"?I.createElement("select",{is:w.is}):I.createElement("select"),w.multiple?A.multiple=!0:w.size&&(A.size=w.size);break;default:A=typeof w.is=="string"?I.createElement(p,{is:w.is}):I.createElement(p)}}A[mn]=f,A[on]=w;e:for(I=f.child;I!==null;){if(I.tag===5||I.tag===6)A.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===f)break e;for(;I.sibling===null;){if(I.return===null||I.return===f)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}f.stateNode=A;e:switch(oi(A,p,w),p){case"button":case"input":case"select":case"textarea":A=!!w.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&hA(f)}}return ks(f),f.flags&=-16777217,null;case 6:if(A&&f.stateNode!=null)A.memoizedProps!==w&&hA(f);else{if(typeof w!="string"&&f.stateNode===null)throw Error(n(166));if(A=ce.current,ni(f)){if(A=f.stateNode,p=f.memoizedProps,w=null,I=Js,I!==null)switch(I.tag){case 27:case 5:w=I.memoizedProps}A[mn]=f,A=!!(A.nodeValue===p||w!==null&&w.suppressHydrationWarning===!0||MB(A.nodeValue,p)),A||iA(f)}else A=mv(A).createTextNode(w),A[mn]=f,f.stateNode=A}return ks(f),null;case 13:if(w=f.memoizedState,A===null||A.memoizedState!==null&&A.memoizedState.dehydrated!==null){if(I=ni(f),w!==null&&w.dehydrated!==null){if(A===null){if(!I)throw Error(n(318));if(I=f.memoizedState,I=I!==null?I.dehydrated:null,!I)throw Error(n(317));I[mn]=f}else to(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ks(f),I=!1}else I=D1(),A!==null&&A.memoizedState!==null&&(A.memoizedState.hydrationErrors=I),I=!0;if(!I)return f.flags&256?(dA(f),f):(dA(f),null)}if(dA(f),(f.flags&128)!==0)return f.lanes=p,f;if(p=w!==null,A=A!==null&&A.memoizedState!==null,p){w=f.child,I=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(I=w.alternate.memoizedState.cachePool.pool);var V=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(V=w.memoizedState.cachePool.pool),V!==I&&(w.flags|=2048)}return p!==A&&p&&(f.child.flags|=8192),rv(f,f.updateQueue),ks(f),null;case 4:return fe(),A===null&&EC(f.stateNode.containerInfo),ks(f),null;case 10:return Tl(f.type),ks(f),null;case 19:if(j(La),I=f.memoizedState,I===null)return ks(f),null;if(w=(f.flags&128)!==0,V=I.rendering,V===null)if(w)Rp(I,!1);else{if(Hs!==0||A!==null&&(A.flags&128)!==0)for(A=f.child;A!==null;){if(V=J1(A),V!==null){for(f.flags|=128,Rp(I,!1),A=V.updateQueue,f.updateQueue=A,rv(f,A),f.subtreeFlags=0,A=p,p=f.child;p!==null;)Uf(p,A),p=p.sibling;return Y(La,La.current&1|2),f.child}A=A.sibling}I.tail!==null&&De()>av&&(f.flags|=128,w=!0,Rp(I,!1),f.lanes=4194304)}else{if(!w)if(A=J1(V),A!==null){if(f.flags|=128,w=!0,A=A.updateQueue,f.updateQueue=A,rv(f,A),Rp(I,!0),I.tail===null&&I.tailMode==="hidden"&&!V.alternate&&!Cn)return ks(f),null}else 2*De()-I.renderingStartTime>av&&p!==536870912&&(f.flags|=128,w=!0,Rp(I,!1),f.lanes=4194304);I.isBackwards?(V.sibling=f.child,f.child=V):(A=I.last,A!==null?A.sibling=V:f.child=V,I.last=V)}return I.tail!==null?(f=I.tail,I.rendering=f,I.tail=f.sibling,I.renderingStartTime=De(),f.sibling=null,A=La.current,Y(La,w?A&1|2:A&1),f):(ks(f),null);case 22:case 23:return dA(f),Ir(),w=f.memoizedState!==null,A!==null?A.memoizedState!==null!==w&&(f.flags|=8192):w&&(f.flags|=8192),w?(p&536870912)!==0&&(f.flags&128)===0&&(ks(f),f.subtreeFlags&6&&(f.flags|=8192)):ks(f),p=f.updateQueue,p!==null&&rv(f,p.retryQueue),p=null,A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(p=A.memoizedState.cachePool.pool),w=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==p&&(f.flags|=2048),A!==null&&j(U),null;case 24:return p=null,A!==null&&(p=A.memoizedState.cache),f.memoizedState.cache!==p&&(f.flags|=2048),Tl(Zs),ks(f),null;case 25:return null;case 30:return null}throw Error(n(156,f.tag))}function d9(A,f){switch(jf(f),f.tag){case 1:return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 3:return Tl(Zs),fe(),A=f.flags,(A&65536)!==0&&(A&128)===0?(f.flags=A&-65537|128,f):null;case 26:case 27:case 5:return de(f),null;case 13:if(dA(f),A=f.memoizedState,A!==null&&A.dehydrated!==null){if(f.alternate===null)throw Error(n(340));to()}return A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 19:return j(La),null;case 4:return fe(),null;case 10:return Tl(f.type),null;case 22:case 23:return dA(f),Ir(),A!==null&&j(U),A=f.flags,A&65536?(f.flags=A&-65537|128,f):null;case 24:return Tl(Zs),null;case 25:return null;default:return null}}function GN(A,f){switch(jf(f),f.tag){case 3:Tl(Zs),fe();break;case 26:case 27:case 5:de(f);break;case 4:fe();break;case 13:dA(f);break;case 19:j(La);break;case 10:Tl(f.type);break;case 22:case 23:dA(f),Ir(),A!==null&&j(U);break;case 24:Tl(Zs)}}function Lp(A,f){try{var p=f.updateQueue,w=p!==null?p.lastEffect:null;if(w!==null){var I=w.next;p=I;do{if((p.tag&A)===A){w=void 0;var V=p.create,le=p.inst;w=V(),le.destroy=w}p=p.next}while(p!==I)}}catch(we){ss(f,f.return,we)}}function pd(A,f,p){try{var w=f.updateQueue,I=w!==null?w.lastEffect:null;if(I!==null){var V=I.next;w=V;do{if((w.tag&A)===A){var le=w.inst,we=le.destroy;if(we!==void 0){le.destroy=void 0,I=f;var Re=p,rt=we;try{rt()}catch(ft){ss(I,Re,ft)}}}w=w.next}while(w!==V)}}catch(ft){ss(f,f.return,ft)}}function qN(A){var f=A.updateQueue;if(f!==null){var p=A.stateNode;try{Nn(f,p)}catch(w){ss(A,A.return,w)}}}function KN(A,f,p){p.props=Xf(A.type,A.memoizedProps),p.state=A.memoizedState;try{p.componentWillUnmount()}catch(w){ss(A,f,w)}}function Up(A,f){try{var p=A.ref;if(p!==null){switch(A.tag){case 26:case 27:case 5:var w=A.stateNode;break;case 30:w=A.stateNode;break;default:w=A.stateNode}typeof p=="function"?A.refCleanup=p(w):p.current=w}}catch(I){ss(A,f,I)}}function fu(A,f){var p=A.ref,w=A.refCleanup;if(p!==null)if(typeof w=="function")try{w()}catch(I){ss(A,f,I)}finally{A.refCleanup=null,A=A.alternate,A!=null&&(A.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(I){ss(A,f,I)}else p.current=null}function $N(A){var f=A.type,p=A.memoizedProps,w=A.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":p.autoFocus&&w.focus();break e;case"img":p.src?w.src=p.src:p.srcSet&&(w.srcset=p.srcSet)}}catch(I){ss(A,A.return,I)}}function eC(A,f,p){try{var w=A.stateNode;D9(w,A.type,p,f),w[on]=f}catch(I){ss(A,A.return,I)}}function WN(A){return A.tag===5||A.tag===3||A.tag===26||A.tag===27&&Ed(A.type)||A.tag===4}function tC(A){e:for(;;){for(;A.sibling===null;){if(A.return===null||WN(A.return))return null;A=A.return}for(A.sibling.return=A.return,A=A.sibling;A.tag!==5&&A.tag!==6&&A.tag!==18;){if(A.tag===27&&Ed(A.type)||A.flags&2||A.child===null||A.tag===4)continue e;A.child.return=A,A=A.child}if(!(A.flags&2))return A.stateNode}}function rC(A,f,p){var w=A.tag;if(w===5||w===6)A=A.stateNode,f?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(A,f):(f=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,f.appendChild(A),p=p._reactRootContainer,p!=null||f.onclick!==null||(f.onclick=hv));else if(w!==4&&(w===27&&Ed(A.type)&&(p=A.stateNode,f=null),A=A.child,A!==null))for(rC(A,f,p),A=A.sibling;A!==null;)rC(A,f,p),A=A.sibling}function nv(A,f,p){var w=A.tag;if(w===5||w===6)A=A.stateNode,f?p.insertBefore(A,f):p.appendChild(A);else if(w!==4&&(w===27&&Ed(A.type)&&(p=A.stateNode),A=A.child,A!==null))for(nv(A,f,p),A=A.sibling;A!==null;)nv(A,f,p),A=A.sibling}function YN(A){var f=A.stateNode,p=A.memoizedProps;try{for(var w=A.type,I=f.attributes;I.length;)f.removeAttributeNode(I[0]);oi(f,w,p),f[mn]=A,f[on]=p}catch(V){ss(A,A.return,V)}}var mA=!1,ta=!1,nC=!1,JN=typeof WeakSet=="function"?WeakSet:Set,qa=null;function f9(A,f){if(A=A.containerInfo,TC=wv,A=ri(A),Ra(A)){if("selectionStart"in A)var p={start:A.selectionStart,end:A.selectionEnd};else e:{p=(p=A.ownerDocument)&&p.defaultView||window;var w=p.getSelection&&p.getSelection();if(w&&w.rangeCount!==0){p=w.anchorNode;var I=w.anchorOffset,V=w.focusNode;w=w.focusOffset;try{p.nodeType,V.nodeType}catch{p=null;break e}var le=0,we=-1,Re=-1,rt=0,ft=0,bt=A,st=null;t:for(;;){for(var at;bt!==p||I!==0&&bt.nodeType!==3||(we=le+I),bt!==V||w!==0&&bt.nodeType!==3||(Re=le+w),bt.nodeType===3&&(le+=bt.nodeValue.length),(at=bt.firstChild)!==null;)st=bt,bt=at;for(;;){if(bt===A)break t;if(st===p&&++rt===I&&(we=le),st===V&&++ft===w&&(Re=le),(at=bt.nextSibling)!==null)break;bt=st,st=bt.parentNode}bt=at}p=we===-1||Re===-1?null:{start:we,end:Re}}else p=null}p=p||{start:0,end:0}}else p=null;for(NC={focusedElem:A,selectionRange:p},wv=!1,qa=f;qa!==null;)if(f=qa,A=f.child,(f.subtreeFlags&1024)!==0&&A!==null)A.return=f,qa=A;else for(;qa!==null;){switch(f=qa,V=f.alternate,A=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((A&1024)!==0&&V!==null){A=void 0,p=f,I=V.memoizedProps,V=V.memoizedState,w=p.stateNode;try{var Nr=Xf(p.type,I,p.elementType===p.type);A=w.getSnapshotBeforeUpdate(Nr,V),w.__reactInternalSnapshotBeforeUpdate=A}catch(xr){ss(p,p.return,xr)}}break;case 3:if((A&1024)!==0){if(A=f.stateNode.containerInfo,p=A.nodeType,p===9)IC(A);else if(p===1)switch(A.nodeName){case"HEAD":case"HTML":case"BODY":IC(A);break;default:A.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((A&1024)!==0)throw Error(n(163))}if(A=f.sibling,A!==null){A.return=f.return,qa=A;break}qa=f.return}}function XN(A,f,p){var w=p.flags;switch(p.tag){case 0:case 11:case 15:gd(A,p),w&4&&Lp(5,p);break;case 1:if(gd(A,p),w&4)if(A=p.stateNode,f===null)try{A.componentDidMount()}catch(le){ss(p,p.return,le)}else{var I=Xf(p.type,f.memoizedProps);f=f.memoizedState;try{A.componentDidUpdate(I,f,A.__reactInternalSnapshotBeforeUpdate)}catch(le){ss(p,p.return,le)}}w&64&&qN(p),w&512&&Up(p,p.return);break;case 3:if(gd(A,p),w&64&&(A=p.updateQueue,A!==null)){if(f=null,p.child!==null)switch(p.child.tag){case 27:case 5:f=p.child.stateNode;break;case 1:f=p.child.stateNode}try{Nn(A,f)}catch(le){ss(p,p.return,le)}}break;case 27:f===null&&w&4&&YN(p);case 26:case 5:gd(A,p),f===null&&w&4&&$N(p),w&512&&Up(p,p.return);break;case 12:gd(A,p);break;case 13:gd(A,p),w&4&&tB(A,p),w&64&&(A=p.memoizedState,A!==null&&(A=A.dehydrated,A!==null&&(p=b9.bind(null,p),O9(A,p))));break;case 22:if(w=p.memoizedState!==null||mA,!w){f=f!==null&&f.memoizedState!==null||ta,I=mA;var V=ta;mA=w,(ta=f)&&!V?xd(A,p,(p.subtreeFlags&8772)!==0):gd(A,p),mA=I,ta=V}break;case 30:break;default:gd(A,p)}}function ZN(A){var f=A.alternate;f!==null&&(A.alternate=null,ZN(f)),A.child=null,A.deletions=null,A.sibling=null,A.tag===5&&(f=A.stateNode,f!==null&&Se(f)),A.stateNode=null,A.return=null,A.dependencies=null,A.memoizedProps=null,A.memoizedState=null,A.pendingProps=null,A.stateNode=null,A.updateQueue=null}var ws=null,Co=!1;function pA(A,f,p){for(p=p.child;p!==null;)eB(A,f,p),p=p.sibling}function eB(A,f,p){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Rt,p)}catch{}switch(p.tag){case 26:ta||fu(p,f),pA(A,f,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:ta||fu(p,f);var w=ws,I=Co;Ed(p.type)&&(ws=p.stateNode,Co=!1),pA(A,f,p),Gp(p.stateNode),ws=w,Co=I;break;case 5:ta||fu(p,f);case 6:if(w=ws,I=Co,ws=null,pA(A,f,p),ws=w,Co=I,ws!==null)if(Co)try{(ws.nodeType===9?ws.body:ws.nodeName==="HTML"?ws.ownerDocument.body:ws).removeChild(p.stateNode)}catch(V){ss(p,f,V)}else try{ws.removeChild(p.stateNode)}catch(V){ss(p,f,V)}break;case 18:ws!==null&&(Co?(A=ws,HB(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,p.stateNode),Zp(A)):HB(ws,p.stateNode));break;case 4:w=ws,I=Co,ws=p.stateNode.containerInfo,Co=!0,pA(A,f,p),ws=w,Co=I;break;case 0:case 11:case 14:case 15:ta||pd(2,p,f),ta||pd(4,p,f),pA(A,f,p);break;case 1:ta||(fu(p,f),w=p.stateNode,typeof w.componentWillUnmount=="function"&&KN(p,f,w)),pA(A,f,p);break;case 21:pA(A,f,p);break;case 22:ta=(w=ta)||p.memoizedState!==null,pA(A,f,p),ta=w;break;default:pA(A,f,p)}}function tB(A,f){if(f.memoizedState===null&&(A=f.alternate,A!==null&&(A=A.memoizedState,A!==null&&(A=A.dehydrated,A!==null))))try{Zp(A)}catch(p){ss(f,f.return,p)}}function h9(A){switch(A.tag){case 13:case 19:var f=A.stateNode;return f===null&&(f=A.stateNode=new JN),f;case 22:return A=A.stateNode,f=A._retryCache,f===null&&(f=A._retryCache=new JN),f;default:throw Error(n(435,A.tag))}}function sC(A,f){var p=h9(A);f.forEach(function(w){var I=C9.bind(null,A,w);p.has(w)||(p.add(w),w.then(I,I))})}function Ko(A,f){var p=f.deletions;if(p!==null)for(var w=0;w<p.length;w++){var I=p[w],V=A,le=f,we=le;e:for(;we!==null;){switch(we.tag){case 27:if(Ed(we.type)){ws=we.stateNode,Co=!1;break e}break;case 5:ws=we.stateNode,Co=!1;break e;case 3:case 4:ws=we.stateNode.containerInfo,Co=!0;break e}we=we.return}if(ws===null)throw Error(n(160));eB(V,le,I),ws=null,Co=!1,V=I.alternate,V!==null&&(V.return=null),I.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)rB(f,A),f=f.sibling}var vc=null;function rB(A,f){var p=A.alternate,w=A.flags;switch(A.tag){case 0:case 11:case 14:case 15:Ko(f,A),$o(A),w&4&&(pd(3,A,A.return),Lp(3,A),pd(5,A,A.return));break;case 1:Ko(f,A),$o(A),w&512&&(ta||p===null||fu(p,p.return)),w&64&&mA&&(A=A.updateQueue,A!==null&&(w=A.callbacks,w!==null&&(p=A.shared.hiddenCallbacks,A.shared.hiddenCallbacks=p===null?w:p.concat(w))));break;case 26:var I=vc;if(Ko(f,A),$o(A),w&512&&(ta||p===null||fu(p,p.return)),w&4){var V=p!==null?p.memoizedState:null;if(w=A.memoizedState,p===null)if(w===null)if(A.stateNode===null){e:{w=A.type,p=A.memoizedProps,I=I.ownerDocument||I;t:switch(w){case"title":V=I.getElementsByTagName("title")[0],(!V||V[_e]||V[mn]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=I.createElement(w),I.head.insertBefore(V,I.querySelector("head > title"))),oi(V,w,p),V[mn]=A,Ve(V),w=V;break e;case"link":var le=YB("link","href",I).get(w+(p.href||""));if(le){for(var we=0;we<le.length;we++)if(V=le[we],V.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&V.getAttribute("rel")===(p.rel==null?null:p.rel)&&V.getAttribute("title")===(p.title==null?null:p.title)&&V.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){le.splice(we,1);break t}}V=I.createElement(w),oi(V,w,p),I.head.appendChild(V);break;case"meta":if(le=YB("meta","content",I).get(w+(p.content||""))){for(we=0;we<le.length;we++)if(V=le[we],V.getAttribute("content")===(p.content==null?null:""+p.content)&&V.getAttribute("name")===(p.name==null?null:p.name)&&V.getAttribute("property")===(p.property==null?null:p.property)&&V.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&V.getAttribute("charset")===(p.charSet==null?null:p.charSet)){le.splice(we,1);break t}}V=I.createElement(w),oi(V,w,p),I.head.appendChild(V);break;default:throw Error(n(468,w))}V[mn]=A,Ve(V),w=V}A.stateNode=w}else JB(I,A.type,A.stateNode);else A.stateNode=WB(I,w,A.memoizedProps);else V!==w?(V===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):V.count--,w===null?JB(I,A.type,A.stateNode):WB(I,w,A.memoizedProps)):w===null&&A.stateNode!==null&&eC(A,A.memoizedProps,p.memoizedProps)}break;case 27:Ko(f,A),$o(A),w&512&&(ta||p===null||fu(p,p.return)),p!==null&&w&4&&eC(A,A.memoizedProps,p.memoizedProps);break;case 5:if(Ko(f,A),$o(A),w&512&&(ta||p===null||fu(p,p.return)),A.flags&32){I=A.stateNode;try{xi(I,"")}catch(at){ss(A,A.return,at)}}w&4&&A.stateNode!=null&&(I=A.memoizedProps,eC(A,I,p!==null?p.memoizedProps:I)),w&1024&&(nC=!0);break;case 6:if(Ko(f,A),$o(A),w&4){if(A.stateNode===null)throw Error(n(162));w=A.memoizedProps,p=A.stateNode;try{p.nodeValue=w}catch(at){ss(A,A.return,at)}}break;case 3:if(xv=null,I=vc,vc=pv(f.containerInfo),Ko(f,A),vc=I,$o(A),w&4&&p!==null&&p.memoizedState.isDehydrated)try{Zp(f.containerInfo)}catch(at){ss(A,A.return,at)}nC&&(nC=!1,nB(A));break;case 4:w=vc,vc=pv(A.stateNode.containerInfo),Ko(f,A),$o(A),vc=w;break;case 12:Ko(f,A),$o(A);break;case 13:Ko(f,A),$o(A),A.child.flags&8192&&A.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(uC=De()),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,sC(A,w)));break;case 22:I=A.memoizedState!==null;var Re=p!==null&&p.memoizedState!==null,rt=mA,ft=ta;if(mA=rt||I,ta=ft||Re,Ko(f,A),ta=ft,mA=rt,$o(A),w&8192)e:for(f=A.stateNode,f._visibility=I?f._visibility&-2:f._visibility|1,I&&(p===null||Re||mA||ta||Zf(A)),p=null,f=A;;){if(f.tag===5||f.tag===26){if(p===null){Re=p=f;try{if(V=Re.stateNode,I)le=V.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{we=Re.stateNode;var bt=Re.memoizedProps.style,st=bt!=null&&bt.hasOwnProperty("display")?bt.display:null;we.style.display=st==null||typeof st=="boolean"?"":(""+st).trim()}}catch(at){ss(Re,Re.return,at)}}}else if(f.tag===6){if(p===null){Re=f;try{Re.stateNode.nodeValue=I?"":Re.memoizedProps}catch(at){ss(Re,Re.return,at)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===A)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===A)break e;for(;f.sibling===null;){if(f.return===null||f.return===A)break e;p===f&&(p=null),f=f.return}p===f&&(p=null),f.sibling.return=f.return,f=f.sibling}w&4&&(w=A.updateQueue,w!==null&&(p=w.retryQueue,p!==null&&(w.retryQueue=null,sC(A,p))));break;case 19:Ko(f,A),$o(A),w&4&&(w=A.updateQueue,w!==null&&(A.updateQueue=null,sC(A,w)));break;case 30:break;case 21:break;default:Ko(f,A),$o(A)}}function $o(A){var f=A.flags;if(f&2){try{for(var p,w=A.return;w!==null;){if(WN(w)){p=w;break}w=w.return}if(p==null)throw Error(n(160));switch(p.tag){case 27:var I=p.stateNode,V=tC(A);nv(A,V,I);break;case 5:var le=p.stateNode;p.flags&32&&(xi(le,""),p.flags&=-33);var we=tC(A);nv(A,we,le);break;case 3:case 4:var Re=p.stateNode.containerInfo,rt=tC(A);rC(A,rt,Re);break;default:throw Error(n(161))}}catch(ft){ss(A,A.return,ft)}A.flags&=-3}f&4096&&(A.flags&=-4097)}function nB(A){if(A.subtreeFlags&1024)for(A=A.child;A!==null;){var f=A;nB(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),A=A.sibling}}function gd(A,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)XN(A,f.alternate,f),f=f.sibling}function Zf(A){for(A=A.child;A!==null;){var f=A;switch(f.tag){case 0:case 11:case 14:case 15:pd(4,f,f.return),Zf(f);break;case 1:fu(f,f.return);var p=f.stateNode;typeof p.componentWillUnmount=="function"&&KN(f,f.return,p),Zf(f);break;case 27:Gp(f.stateNode);case 26:case 5:fu(f,f.return),Zf(f);break;case 22:f.memoizedState===null&&Zf(f);break;case 30:Zf(f);break;default:Zf(f)}A=A.sibling}}function xd(A,f,p){for(p=p&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var w=f.alternate,I=A,V=f,le=V.flags;switch(V.tag){case 0:case 11:case 15:xd(I,V,p),Lp(4,V);break;case 1:if(xd(I,V,p),w=V,I=w.stateNode,typeof I.componentDidMount=="function")try{I.componentDidMount()}catch(rt){ss(w,w.return,rt)}if(w=V,I=w.updateQueue,I!==null){var we=w.stateNode;try{var Re=I.shared.hiddenCallbacks;if(Re!==null)for(I.shared.hiddenCallbacks=null,I=0;I<Re.length;I++)vn(Re[I],we)}catch(rt){ss(w,w.return,rt)}}p&&le&64&&qN(V),Up(V,V.return);break;case 27:YN(V);case 26:case 5:xd(I,V,p),p&&w===null&&le&4&&$N(V),Up(V,V.return);break;case 12:xd(I,V,p);break;case 13:xd(I,V,p),p&&le&4&&tB(I,V);break;case 22:V.memoizedState===null&&xd(I,V,p),Up(V,V.return);break;case 30:break;default:xd(I,V,p)}f=f.sibling}}function aC(A,f){var p=null;A!==null&&A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(p=A.memoizedState.cachePool.pool),A=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(A=f.memoizedState.cachePool.pool),A!==p&&(A!=null&&A.refCount++,p!=null&&Of(p))}function iC(A,f){A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&Of(A))}function hu(A,f,p,w){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)sB(A,f,p,w),f=f.sibling}function sB(A,f,p,w){var I=f.flags;switch(f.tag){case 0:case 11:case 15:hu(A,f,p,w),I&2048&&Lp(9,f);break;case 1:hu(A,f,p,w);break;case 3:hu(A,f,p,w),I&2048&&(A=null,f.alternate!==null&&(A=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==A&&(f.refCount++,A!=null&&Of(A)));break;case 12:if(I&2048){hu(A,f,p,w),A=f.stateNode;try{var V=f.memoizedProps,le=V.id,we=V.onPostCommit;typeof we=="function"&&we(le,f.alternate===null?"mount":"update",A.passiveEffectDuration,-0)}catch(Re){ss(f,f.return,Re)}}else hu(A,f,p,w);break;case 13:hu(A,f,p,w);break;case 23:break;case 22:V=f.stateNode,le=f.alternate,f.memoizedState!==null?V._visibility&2?hu(A,f,p,w):Mp(A,f):V._visibility&2?hu(A,f,p,w):(V._visibility|=2,v0(A,f,p,w,(f.subtreeFlags&10256)!==0)),I&2048&&aC(le,f);break;case 24:hu(A,f,p,w),I&2048&&iC(f.alternate,f);break;default:hu(A,f,p,w)}}function v0(A,f,p,w,I){for(I=I&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var V=A,le=f,we=p,Re=w,rt=le.flags;switch(le.tag){case 0:case 11:case 15:v0(V,le,we,Re,I),Lp(8,le);break;case 23:break;case 22:var ft=le.stateNode;le.memoizedState!==null?ft._visibility&2?v0(V,le,we,Re,I):Mp(V,le):(ft._visibility|=2,v0(V,le,we,Re,I)),I&&rt&2048&&aC(le.alternate,le);break;case 24:v0(V,le,we,Re,I),I&&rt&2048&&iC(le.alternate,le);break;default:v0(V,le,we,Re,I)}f=f.sibling}}function Mp(A,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var p=A,w=f,I=w.flags;switch(w.tag){case 22:Mp(p,w),I&2048&&aC(w.alternate,w);break;case 24:Mp(p,w),I&2048&&iC(w.alternate,w);break;default:Mp(p,w)}f=f.sibling}}var Pp=8192;function y0(A){if(A.subtreeFlags&Pp)for(A=A.child;A!==null;)aB(A),A=A.sibling}function aB(A){switch(A.tag){case 26:y0(A),A.flags&Pp&&A.memoizedState!==null&&Z9(vc,A.memoizedState,A.memoizedProps);break;case 5:y0(A);break;case 3:case 4:var f=vc;vc=pv(A.stateNode.containerInfo),y0(A),vc=f;break;case 22:A.memoizedState===null&&(f=A.alternate,f!==null&&f.memoizedState!==null?(f=Pp,Pp=16777216,y0(A),Pp=f):y0(A));break;default:y0(A)}}function iB(A){var f=A.alternate;if(f!==null&&(A=f.child,A!==null)){f.child=null;do f=A.sibling,A.sibling=null,A=f;while(A!==null)}}function jp(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var w=f[p];qa=w,lB(w,A)}iB(A)}if(A.subtreeFlags&10256)for(A=A.child;A!==null;)oB(A),A=A.sibling}function oB(A){switch(A.tag){case 0:case 11:case 15:jp(A),A.flags&2048&&pd(9,A,A.return);break;case 3:jp(A);break;case 12:jp(A);break;case 22:var f=A.stateNode;A.memoizedState!==null&&f._visibility&2&&(A.return===null||A.return.tag!==13)?(f._visibility&=-3,sv(A)):jp(A);break;default:jp(A)}}function sv(A){var f=A.deletions;if((A.flags&16)!==0){if(f!==null)for(var p=0;p<f.length;p++){var w=f[p];qa=w,lB(w,A)}iB(A)}for(A=A.child;A!==null;){switch(f=A,f.tag){case 0:case 11:case 15:pd(8,f,f.return),sv(f);break;case 22:p=f.stateNode,p._visibility&2&&(p._visibility&=-3,sv(f));break;default:sv(f)}A=A.sibling}}function lB(A,f){for(;qa!==null;){var p=qa;switch(p.tag){case 0:case 11:case 15:pd(8,p,f);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var w=p.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:Of(p.memoizedState.cache)}if(w=p.child,w!==null)w.return=p,qa=w;else e:for(p=A;qa!==null;){w=qa;var I=w.sibling,V=w.return;if(ZN(w),w===p){qa=null;break e}if(I!==null){I.return=V,qa=I;break e}qa=V}}}var m9={getCacheForType:function(A){var f=Xs(Zs),p=f.data.get(A);return p===void 0&&(p=A(),f.data.set(A,p)),p}},p9=typeof WeakMap=="function"?WeakMap:Map,Hn=0,os=null,ln=null,wn=0,Vn=0,Wo=null,vd=!1,w0=!1,oC=!1,gA=0,Hs=0,yd=0,eh=0,lC=0,Il=0,b0=0,Op=null,Eo=null,cC=!1,uC=0,av=1/0,iv=null,wd=null,ii=0,bd=null,C0=null,E0=0,AC=0,dC=null,cB=null,Qp=0,fC=null;function Yo(){if((Hn&2)!==0&&wn!==0)return wn&-wn;if(J.T!==null){var A=oA;return A!==0?A:yC()}return _s()}function uB(){Il===0&&(Il=(wn&536870912)===0||Cn?da():536870912);var A=kl.current;return A!==null&&(A.flags|=32),Il}function Jo(A,f,p){(A===os&&(Vn===2||Vn===9)||A.cancelPendingCommit!==null)&&(_0(A,0),Cd(A,wn,Il,!1)),gs(A,p),((Hn&2)===0||A!==os)&&(A===os&&((Hn&2)===0&&(eh|=p),Hs===4&&Cd(A,wn,Il,!1)),mu(A))}function AB(A,f,p){if((Hn&6)!==0)throw Error(n(327));var w=!p&&(f&124)===0&&(f&A.expiredLanes)===0||Dn(A,f),I=w?v9(A,f):pC(A,f,!0),V=w;do{if(I===0){w0&&!w&&Cd(A,f,0,!1);break}else{if(p=A.current.alternate,V&&!g9(p)){I=pC(A,f,!1),V=!1;continue}if(I===2){if(V=f,A.errorRecoveryDisabledLanes&V)var le=0;else le=A.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){f=le;e:{var we=A;I=Op;var Re=we.current.memoizedState.isDehydrated;if(Re&&(_0(we,le).flags|=256),le=pC(we,le,!1),le!==2){if(oC&&!Re){we.errorRecoveryDisabledLanes|=V,eh|=V,I=4;break e}V=Eo,Eo=I,V!==null&&(Eo===null?Eo=V:Eo.push.apply(Eo,V))}I=le}if(V=!1,I!==2)continue}}if(I===1){_0(A,0),Cd(A,f,0,!0);break}e:{switch(w=A,V=I,V){case 0:case 1:throw Error(n(345));case 4:if((f&4194048)!==f)break;case 6:Cd(w,f,Il,!vd);break e;case 2:Eo=null;break;case 3:case 5:break;default:throw Error(n(329))}if((f&62914560)===f&&(I=uC+300-De(),10<I)){if(Cd(w,f,Il,!vd),Ur(w,0,!0)!==0)break e;w.timeoutHandle=OB(dB.bind(null,w,p,Eo,iv,cC,f,Il,eh,b0,vd,V,2,-0,0),I);break e}dB(w,p,Eo,iv,cC,f,Il,eh,b0,vd,V,0,-0,0)}}break}while(!0);mu(A)}function dB(A,f,p,w,I,V,le,we,Re,rt,ft,bt,st,at){if(A.timeoutHandle=-1,bt=f.subtreeFlags,(bt&8192||(bt&16785408)===16785408)&&($p={stylesheets:null,count:0,unsuspend:X9},aB(f),bt=eV(),bt!==null)){A.cancelPendingCommit=bt(vB.bind(null,A,f,V,p,w,I,le,we,Re,ft,1,st,at)),Cd(A,V,le,!rt);return}vB(A,f,V,p,w,I,le,we,Re)}function g9(A){for(var f=A;;){var p=f.tag;if((p===0||p===11||p===15)&&f.flags&16384&&(p=f.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var w=0;w<p.length;w++){var I=p[w],V=I.getSnapshot;I=I.value;try{if(!pa(V(),I))return!1}catch{return!1}}if(p=f.child,f.subtreeFlags&16384&&p!==null)p.return=f,f=p;else{if(f===A)break;for(;f.sibling===null;){if(f.return===null||f.return===A)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Cd(A,f,p,w){f&=~lC,f&=~eh,A.suspendedLanes|=f,A.pingedLanes&=~f,w&&(A.warmLanes|=f),w=A.expirationTimes;for(var I=f;0<I;){var V=31-It(I),le=1<<V;w[V]=-1,I&=~le}p!==0&&nr(A,p,f)}function ov(){return(Hn&6)===0?(Hp(0),!1):!0}function hC(){if(ln!==null){if(Vn===0)var A=ln.return;else A=ln,fc=xa=null,A0(A),g0=null,Fp=0,A=ln;for(;A!==null;)GN(A.alternate,A),A=A.return;ln=null}}function _0(A,f){var p=A.timeoutHandle;p!==-1&&(A.timeoutHandle=-1,L9(p)),p=A.cancelPendingCommit,p!==null&&(A.cancelPendingCommit=null,p()),hC(),os=A,ln=p=El(A.current,null),wn=f,Vn=0,Wo=null,vd=!1,w0=Dn(A,f),oC=!1,b0=Il=lC=eh=yd=Hs=0,Eo=Op=null,cC=!1,(f&8)!==0&&(f|=f&32);var w=A.entangledLanes;if(w!==0)for(A=A.entanglements,w&=f;0<w;){var I=31-It(w),V=1<<I;f|=A[I],w&=~V}return gA=f,vo(),p}function fB(A,f){hr=null,J.H=$1,f===pe||f===ve?(f=Ge(),Vn=3):f===xe?(f=Ge(),Vn=4):Vn=f===IN?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Wo=f,ln===null&&(Hs=1,Z1(A,$r(f,A.current)))}function hB(){var A=J.H;return J.H=$1,A===null?$1:A}function mB(){var A=J.A;return J.A=m9,A}function mC(){Hs=4,vd||(wn&4194048)!==wn&&kl.current!==null||(w0=!0),(yd&134217727)===0&&(eh&134217727)===0||os===null||Cd(os,wn,Il,!1)}function pC(A,f,p){var w=Hn;Hn|=2;var I=hB(),V=mB();(os!==A||wn!==f)&&(iv=null,_0(A,f)),f=!1;var le=Hs;e:do try{if(Vn!==0&&ln!==null){var we=ln,Re=Wo;switch(Vn){case 8:hC(),le=6;break e;case 3:case 2:case 9:case 6:kl.current===null&&(f=!0);var rt=Vn;if(Vn=0,Wo=null,S0(A,we,Re,rt),p&&w0){le=0;break e}break;default:rt=Vn,Vn=0,Wo=null,S0(A,we,Re,rt)}}x9(),le=Hs;break}catch(ft){fB(A,ft)}while(!0);return f&&A.shellSuspendCounter++,fc=xa=null,Hn=w,J.H=I,J.A=V,ln===null&&(os=null,wn=0,vo()),le}function x9(){for(;ln!==null;)pB(ln)}function v9(A,f){var p=Hn;Hn|=2;var w=hB(),I=mB();os!==A||wn!==f?(iv=null,av=De()+500,_0(A,f)):w0=Dn(A,f);e:do try{if(Vn!==0&&ln!==null){f=ln;var V=Wo;t:switch(Vn){case 1:Vn=0,Wo=null,S0(A,f,V,1);break;case 2:case 9:if(Ne(V)){Vn=0,Wo=null,gB(f);break}f=function(){Vn!==2&&Vn!==9||os!==A||(Vn=7),mu(A)},V.then(f,f);break e;case 3:Vn=7;break e;case 4:Vn=5;break e;case 7:Ne(V)?(Vn=0,Wo=null,gB(f)):(Vn=0,Wo=null,S0(A,f,V,7));break;case 5:var le=null;switch(ln.tag){case 26:le=ln.memoizedState;case 5:case 27:var we=ln;if(!le||XB(le)){Vn=0,Wo=null;var Re=we.sibling;if(Re!==null)ln=Re;else{var rt=we.return;rt!==null?(ln=rt,lv(rt)):ln=null}break t}}Vn=0,Wo=null,S0(A,f,V,5);break;case 6:Vn=0,Wo=null,S0(A,f,V,6);break;case 8:hC(),Hs=6;break e;default:throw Error(n(462))}}y9();break}catch(ft){fB(A,ft)}while(!0);return fc=xa=null,J.H=w,J.A=I,Hn=p,ln!==null?0:(os=null,wn=0,vo(),Hs)}function y9(){for(;ln!==null&&!Fe();)pB(ln)}function pB(A){var f=VN(A.alternate,A,gA);A.memoizedProps=A.pendingProps,f===null?lv(A):ln=f}function gB(A){var f=A,p=f.alternate;switch(f.tag){case 15:case 0:f=MN(p,f,f.pendingProps,f.type,void 0,wn);break;case 11:f=MN(p,f,f.pendingProps,f.type.render,f.ref,wn);break;case 5:A0(f);default:GN(p,f),f=ln=Uf(f,gA),f=VN(p,f,gA)}A.memoizedProps=A.pendingProps,f===null?lv(A):ln=f}function S0(A,f,p,w){fc=xa=null,A0(f),g0=null,Fp=0;var I=f.return;try{if(c9(A,I,f,p,wn)){Hs=1,Z1(A,$r(p,A.current)),ln=null;return}}catch(V){if(I!==null)throw ln=I,V;Hs=1,Z1(A,$r(p,A.current)),ln=null;return}f.flags&32768?(Cn||w===1?A=!0:w0||(wn&536870912)!==0?A=!1:(vd=A=!0,(w===2||w===9||w===3||w===6)&&(w=kl.current,w!==null&&w.tag===13&&(w.flags|=16384))),xB(f,A)):lv(f)}function lv(A){var f=A;do{if((f.flags&32768)!==0){xB(f,vd);return}A=f.return;var p=A9(f.alternate,f,gA);if(p!==null){ln=p;return}if(f=f.sibling,f!==null){ln=f;return}ln=f=A}while(f!==null);Hs===0&&(Hs=5)}function xB(A,f){do{var p=d9(A.alternate,A);if(p!==null){p.flags&=32767,ln=p;return}if(p=A.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!f&&(A=A.sibling,A!==null)){ln=A;return}ln=A=p}while(A!==null);Hs=6,ln=null}function vB(A,f,p,w,I,V,le,we,Re){A.cancelPendingCommit=null;do cv();while(ii!==0);if((Hn&6)!==0)throw Error(n(327));if(f!==null){if(f===A.current)throw Error(n(177));if(V=f.lanes|f.childLanes,V|=Ts,jr(A,p,V,le,we,Re),A===os&&(ln=os=null,wn=0),C0=f,bd=A,E0=p,AC=V,dC=I,cB=w,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(A.callbackNode=null,A.callbackPriority=0,E9(Et,function(){return EB(),null})):(A.callbackNode=null,A.callbackPriority=0),w=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||w){w=J.T,J.T=null,I=re.p,re.p=2,le=Hn,Hn|=4;try{f9(A,f,p)}finally{Hn=le,re.p=I,J.T=w}}ii=1,yB(),wB(),bB()}}function yB(){if(ii===1){ii=0;var A=bd,f=C0,p=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||p){p=J.T,J.T=null;var w=re.p;re.p=2;var I=Hn;Hn|=4;try{rB(f,A);var V=NC,le=ri(A.containerInfo),we=V.focusedElem,Re=V.selectionRange;if(le!==we&&we&&we.ownerDocument&&Yc(we.ownerDocument.documentElement,we)){if(Re!==null&&Ra(we)){var rt=Re.start,ft=Re.end;if(ft===void 0&&(ft=rt),"selectionStart"in we)we.selectionStart=rt,we.selectionEnd=Math.min(ft,we.value.length);else{var bt=we.ownerDocument||document,st=bt&&bt.defaultView||window;if(st.getSelection){var at=st.getSelection(),Nr=we.textContent.length,xr=Math.min(Re.start,Nr),es=Re.end===void 0?xr:Math.min(Re.end,Nr);!at.extend&&xr>es&&(le=es,es=xr,xr=le);var qe=ac(we,xr),je=ac(we,es);if(qe&&je&&(at.rangeCount!==1||at.anchorNode!==qe.node||at.anchorOffset!==qe.offset||at.focusNode!==je.node||at.focusOffset!==je.offset)){var Je=bt.createRange();Je.setStart(qe.node,qe.offset),at.removeAllRanges(),xr>es?(at.addRange(Je),at.extend(je.node,je.offset)):(Je.setEnd(je.node,je.offset),at.addRange(Je))}}}}for(bt=[],at=we;at=at.parentNode;)at.nodeType===1&&bt.push({element:at,left:at.scrollLeft,top:at.scrollTop});for(typeof we.focus=="function"&&we.focus(),we=0;we<bt.length;we++){var gt=bt[we];gt.element.scrollLeft=gt.left,gt.element.scrollTop=gt.top}}wv=!!TC,NC=TC=null}finally{Hn=I,re.p=w,J.T=p}}A.current=f,ii=2}}function wB(){if(ii===2){ii=0;var A=bd,f=C0,p=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||p){p=J.T,J.T=null;var w=re.p;re.p=2;var I=Hn;Hn|=4;try{XN(A,f.alternate,f)}finally{Hn=I,re.p=w,J.T=p}}ii=3}}function bB(){if(ii===4||ii===3){ii=0,Ee();var A=bd,f=C0,p=E0,w=cB;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?ii=5:(ii=0,C0=bd=null,CB(A,A.pendingLanes));var I=A.pendingLanes;if(I===0&&(wd=null),Wn(p),f=f.stateNode,Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Rt,f,void 0,(f.current.flags&128)===128)}catch{}if(w!==null){f=J.T,I=re.p,re.p=2,J.T=null;try{for(var V=A.onRecoverableError,le=0;le<w.length;le++){var we=w[le];V(we.value,{componentStack:we.stack})}}finally{J.T=f,re.p=I}}(E0&3)!==0&&cv(),mu(A),I=A.pendingLanes,(p&4194090)!==0&&(I&42)!==0?A===fC?Qp++:(Qp=0,fC=A):Qp=0,Hp(0)}}function CB(A,f){(A.pooledCacheLanes&=f)===0&&(f=A.pooledCache,f!=null&&(A.pooledCache=null,Of(f)))}function cv(A){return yB(),wB(),bB(),EB()}function EB(){if(ii!==5)return!1;var A=bd,f=AC;AC=0;var p=Wn(E0),w=J.T,I=re.p;try{re.p=32>p?32:p,J.T=null,p=dC,dC=null;var V=bd,le=E0;if(ii=0,C0=bd=null,E0=0,(Hn&6)!==0)throw Error(n(331));var we=Hn;if(Hn|=4,oB(V.current),sB(V,V.current,le,p),Hn=we,Hp(0,!1),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Rt,V)}catch{}return!0}finally{re.p=I,J.T=w,CB(A,f)}}function _B(A,f,p){f=$r(p,f),f=Gb(A.stateNode,f,2),A=yt(A,f,2),A!==null&&(gs(A,2),mu(A))}function ss(A,f,p){if(A.tag===3)_B(A,A,p);else for(;f!==null;){if(f.tag===3){_B(f,A,p);break}else if(f.tag===1){var w=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(wd===null||!wd.has(w))){A=$r(p,A),p=BN(2),w=yt(f,p,2),w!==null&&(kN(p,w,f,A),gs(w,2),mu(w));break}}f=f.return}}function gC(A,f,p){var w=A.pingCache;if(w===null){w=A.pingCache=new p9;var I=new Set;w.set(f,I)}else I=w.get(f),I===void 0&&(I=new Set,w.set(f,I));I.has(p)||(oC=!0,I.add(p),A=w9.bind(null,A,f,p),f.then(A,A))}function w9(A,f,p){var w=A.pingCache;w!==null&&w.delete(f),A.pingedLanes|=A.suspendedLanes&p,A.warmLanes&=~p,os===A&&(wn&p)===p&&(Hs===4||Hs===3&&(wn&62914560)===wn&&300>De()-uC?(Hn&2)===0&&_0(A,0):lC|=p,b0===wn&&(b0=0)),mu(A)}function SB(A,f){f===0&&(f=an()),A=oc(A,f),A!==null&&(gs(A,f),mu(A))}function b9(A){var f=A.memoizedState,p=0;f!==null&&(p=f.retryLane),SB(A,p)}function C9(A,f){var p=0;switch(A.tag){case 13:var w=A.stateNode,I=A.memoizedState;I!==null&&(p=I.retryLane);break;case 19:w=A.stateNode;break;case 22:w=A.stateNode._retryCache;break;default:throw Error(n(314))}w!==null&&w.delete(f),SB(A,p)}function E9(A,f){return Ue(A,f)}var uv=null,T0=null,xC=!1,Av=!1,vC=!1,th=0;function mu(A){A!==T0&&A.next===null&&(T0===null?uv=T0=A:T0=T0.next=A),Av=!0,xC||(xC=!0,S9())}function Hp(A,f){if(!vC&&Av){vC=!0;do for(var p=!1,w=uv;w!==null;){if(A!==0){var I=w.pendingLanes;if(I===0)var V=0;else{var le=w.suspendedLanes,we=w.pingedLanes;V=(1<<31-It(42|A)+1)-1,V&=I&~(le&~we),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(p=!0,kB(w,V))}else V=wn,V=Ur(w,w===os?V:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(V&3)===0||Dn(w,V)||(p=!0,kB(w,V));w=w.next}while(p);vC=!1}}function _9(){TB()}function TB(){Av=xC=!1;var A=0;th!==0&&(R9()&&(A=th),th=0);for(var f=De(),p=null,w=uv;w!==null;){var I=w.next,V=NB(w,f);V===0?(w.next=null,p===null?uv=I:p.next=I,I===null&&(T0=p)):(p=w,(A!==0||(V&3)!==0)&&(Av=!0)),w=I}Hp(A)}function NB(A,f){for(var p=A.suspendedLanes,w=A.pingedLanes,I=A.expirationTimes,V=A.pendingLanes&-62914561;0<V;){var le=31-It(V),we=1<<le,Re=I[le];Re===-1?((we&p)===0||(we&w)!==0)&&(I[le]=Fr(we,f)):Re<=f&&(A.expiredLanes|=we),V&=~we}if(f=os,p=wn,p=Ur(A,A===f?p:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w=A.callbackNode,p===0||A===f&&(Vn===2||Vn===9)||A.cancelPendingCommit!==null)return w!==null&&w!==null&&tt(w),A.callbackNode=null,A.callbackPriority=0;if((p&3)===0||Dn(A,p)){if(f=p&-p,f===A.callbackPriority)return f;switch(w!==null&&tt(w),Wn(p)){case 2:case 8:p=ut;break;case 32:p=Et;break;case 268435456:p=Dt;break;default:p=Et}return w=BB.bind(null,A),p=Ue(p,w),A.callbackPriority=f,A.callbackNode=p,f}return w!==null&&w!==null&&tt(w),A.callbackPriority=2,A.callbackNode=null,2}function BB(A,f){if(ii!==0&&ii!==5)return A.callbackNode=null,A.callbackPriority=0,null;var p=A.callbackNode;if(cv()&&A.callbackNode!==p)return null;var w=wn;return w=Ur(A,A===os?w:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),w===0?null:(AB(A,w,f),NB(A,De()),A.callbackNode!=null&&A.callbackNode===p?BB.bind(null,A):null)}function kB(A,f){if(cv())return null;AB(A,f,!0)}function S9(){U9(function(){(Hn&6)!==0?Ue($e,_9):TB()})}function yC(){return th===0&&(th=da()),th}function IB(A){return A==null||typeof A=="symbol"||typeof A=="boolean"?null:typeof A=="function"?A:Mo(""+A)}function FB(A,f){var p=f.ownerDocument.createElement("input");return p.name=f.name,p.value=f.value,A.id&&p.setAttribute("form",A.id),f.parentNode.insertBefore(p,f),A=new FormData(A),p.parentNode.removeChild(p),A}function T9(A,f,p,w,I){if(f==="submit"&&p&&p.stateNode===I){var V=IB((I[on]||null).action),le=w.submitter;le&&(f=(f=le[on]||null)?IB(f.formAction):le.getAttribute("formAction"),f!==null&&(V=f,le=null));var we=new ml("action","action",null,w,I);A.push({event:we,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(th!==0){var Re=le?FB(I,le):new FormData(I);Bl(p,{pending:!0,data:Re,method:I.method,action:V},null,Re)}}else typeof V=="function"&&(we.preventDefault(),Re=le?FB(I,le):new FormData(I),Bl(p,{pending:!0,data:Re,method:I.method,action:V},V,Re))},currentTarget:I}]})}}for(var wC=0;wC<tA.length;wC++){var bC=tA[wC],N9=bC.toLowerCase(),B9=bC[0].toUpperCase()+bC.slice(1);vs(N9,"on"+B9)}vs(nd,"onAnimationEnd"),vs(Xc,"onAnimationIteration"),vs(Zc,"onAnimationStart"),vs("dblclick","onDoubleClick"),vs("focusin","onFocus"),vs("focusout","onBlur"),vs(eu,"onTransitionRun"),vs(eA,"onTransitionStart"),vs(sd,"onTransitionCancel"),vs(tu,"onTransitionEnd"),Bt("onMouseEnter",["mouseout","mouseover"]),Bt("onMouseLeave",["mouseout","mouseover"]),Bt("onPointerEnter",["pointerout","pointerover"]),Bt("onPointerLeave",["pointerout","pointerover"]),wt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),wt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),wt("onBeforeInput",["compositionend","keypress","textInput","paste"]),wt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),wt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),wt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vp));function DB(A,f){f=(f&4)!==0;for(var p=0;p<A.length;p++){var w=A[p],I=w.event;w=w.listeners;e:{var V=void 0;if(f)for(var le=w.length-1;0<=le;le--){var we=w[le],Re=we.instance,rt=we.currentTarget;if(we=we.listener,Re!==V&&I.isPropagationStopped())break e;V=we,I.currentTarget=rt;try{V(I)}catch(ft){X1(ft)}I.currentTarget=null,V=Re}else for(le=0;le<w.length;le++){if(we=w[le],Re=we.instance,rt=we.currentTarget,we=we.listener,Re!==V&&I.isPropagationStopped())break e;V=we,I.currentTarget=rt;try{V(I)}catch(ft){X1(ft)}I.currentTarget=null,V=Re}}}}function cn(A,f){var p=f[jn];p===void 0&&(p=f[jn]=new Set);var w=A+"__bubble";p.has(w)||(RB(f,A,2,!1),p.add(w))}function CC(A,f,p){var w=0;f&&(w|=4),RB(p,A,w,f)}var dv="_reactListening"+Math.random().toString(36).slice(2);function EC(A){if(!A[dv]){A[dv]=!0,Ye.forEach(function(p){p!=="selectionchange"&&(k9.has(p)||CC(p,!1,A),CC(p,!0,A))});var f=A.nodeType===9?A:A.ownerDocument;f===null||f[dv]||(f[dv]=!0,CC("selectionchange",!1,f))}}function RB(A,f,p,w){switch(sk(f)){case 2:var I=nV;break;case 8:I=sV;break;default:I=PC}p=I.bind(null,f,p,A),I=void 0,!ti||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(I=!0),w?I!==void 0?A.addEventListener(f,p,{capture:!0,passive:I}):A.addEventListener(f,p,!0):I!==void 0?A.addEventListener(f,p,{passive:I}):A.addEventListener(f,p,!1)}function _C(A,f,p,w,I){var V=w;if((f&1)===0&&(f&2)===0&&w!==null)e:for(;;){if(w===null)return;var le=w.tag;if(le===3||le===4){var we=w.stateNode.containerInfo;if(we===I)break;if(le===4)for(le=w.return;le!==null;){var Re=le.tag;if((Re===3||Re===4)&&le.stateNode.containerInfo===I)return;le=le.return}for(;we!==null;){if(le=Te(we),le===null)return;if(Re=le.tag,Re===5||Re===6||Re===26||Re===27){w=V=le;continue e}we=we.parentNode}}w=w.return}XA(function(){var rt=V,ft=On(p),bt=[];e:{var st=ic.get(A);if(st!==void 0){var at=ml,Nr=A;switch(A){case"keypress":if(wi(p)===0)break e;case"keydown":case"keyup":at=Qo;break;case"focusin":Nr="focus",at=gl;break;case"focusout":Nr="blur",at=gl;break;case"beforeblur":case"afterblur":at=gl;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":at=Ps;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":at=pl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":at=qc;break;case nd:case Xc:case Zc:at=Vc;break;case tu:at=Ae;break;case"scroll":case"scrollend":at=$u;break;case"wheel":at=Le;break;case"copy":case"cut":case"paste":at=zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":at=sc;break;case"toggle":case"beforetoggle":at=ot}var xr=(f&4)!==0,es=!xr&&(A==="scroll"||A==="scrollend"),qe=xr?st!==null?st+"Capture":null:st;xr=[];for(var je=rt,Je;je!==null;){var gt=je;if(Je=gt.stateNode,gt=gt.tag,gt!==5&&gt!==26&&gt!==27||Je===null||qe===null||(gt=Oa(je,qe),gt!=null&&xr.push(zp(je,gt,Je))),es)break;je=je.return}0<xr.length&&(st=new at(st,Nr,null,p,ft),bt.push({event:st,listeners:xr}))}}if((f&7)===0){e:{if(st=A==="mouseover"||A==="pointerover",at=A==="mouseout"||A==="pointerout",st&&p!==uo&&(Nr=p.relatedTarget||p.fromElement)&&(Te(Nr)||Nr[Rn]))break e;if((at||st)&&(st=ft.window===ft?ft:(st=ft.ownerDocument)?st.defaultView||st.parentWindow:window,at?(Nr=p.relatedTarget||p.toElement,at=rt,Nr=Nr?Te(Nr):null,Nr!==null&&(es=a(Nr),xr=Nr.tag,Nr!==es||xr!==5&&xr!==27&&xr!==6)&&(Nr=null)):(at=null,Nr=rt),at!==Nr)){if(xr=Ps,gt="onMouseLeave",qe="onMouseEnter",je="mouse",(A==="pointerout"||A==="pointerover")&&(xr=sc,gt="onPointerLeave",qe="onPointerEnter",je="pointer"),es=at==null?st:Ke(at),Je=Nr==null?st:Ke(Nr),st=new xr(gt,je+"leave",at,p,ft),st.target=es,st.relatedTarget=Je,gt=null,Te(ft)===rt&&(xr=new xr(qe,je+"enter",Nr,p,ft),xr.target=Je,xr.relatedTarget=es,gt=xr),es=gt,at&&Nr)t:{for(xr=at,qe=Nr,je=0,Je=xr;Je;Je=N0(Je))je++;for(Je=0,gt=qe;gt;gt=N0(gt))Je++;for(;0<je-Je;)xr=N0(xr),je--;for(;0<Je-je;)qe=N0(qe),Je--;for(;je--;){if(xr===qe||qe!==null&&xr===qe.alternate)break t;xr=N0(xr),qe=N0(qe)}xr=null}else xr=null;at!==null&&LB(bt,st,at,xr,!1),Nr!==null&&es!==null&&LB(bt,es,Nr,xr,!0)}}e:{if(st=rt?Ke(rt):window,at=st.nodeName&&st.nodeName.toLowerCase(),at==="select"||at==="input"&&st.type==="file")var tr=td;else if(Ln(st))if(Yu)tr=n0;else{tr=pp;var rn=Ci}else at=st.nodeName,!at||at.toLowerCase()!=="input"||st.type!=="checkbox"&&st.type!=="radio"?rt&&qu(rt.elementType)&&(tr=td):tr=Rf;if(tr&&(tr=tr(A,rt))){go(bt,tr,p,ft);break e}rn&&rn(A,st,rt),A==="focusout"&&rt&&st.type==="number"&&rt.memoizedProps.value!=null&&dl(st,"number",st.value)}switch(rn=rt?Ke(rt):window,A){case"focusin":(Ln(rn)||rn.contentEditable==="true")&&(Ei=rn,Ho=rt,bl=null);break;case"focusout":bl=Ho=Ei=null;break;case"mousedown":Vo=!0;break;case"contextmenu":case"mouseup":case"dragend":Vo=!1,xs(bt,p,ft);break;case"selectionchange":if(Jc)break;case"keydown":case"keyup":xs(bt,p,ft)}var ir;if(Ht)e:{switch(A){case"compositionstart":var yr="onCompositionStart";break e;case"compositionend":yr="onCompositionEnd";break e;case"compositionupdate":yr="onCompositionUpdate";break e}yr=void 0}else gr?et(A,p)&&(yr="onCompositionEnd"):A==="keydown"&&p.keyCode===229&&(yr="onCompositionStart");yr&&(ae&&p.locale!=="ko"&&(gr||yr!=="onCompositionStart"?yr==="onCompositionEnd"&&gr&&(ir=Ku()):(yi=ft,hl="value"in yi?yi.value:yi.textContent,gr=!0)),rn=fv(rt,yr),0<rn.length&&(yr=new tc(yr,A,null,p,ft),bt.push({event:yr,listeners:rn}),ir?yr.data=ir:(ir=Tt(p),ir!==null&&(yr.data=ir)))),(ir=X?tn(A,p):kr(A,p))&&(yr=fv(rt,"onBeforeInput"),0<yr.length&&(rn=new tc("onBeforeInput","beforeinput",null,p,ft),bt.push({event:rn,listeners:yr}),rn.data=ir)),T9(bt,A,rt,p,ft)}DB(bt,f)})}function zp(A,f,p){return{instance:A,listener:f,currentTarget:p}}function fv(A,f){for(var p=f+"Capture",w=[];A!==null;){var I=A,V=I.stateNode;if(I=I.tag,I!==5&&I!==26&&I!==27||V===null||(I=Oa(A,p),I!=null&&w.unshift(zp(A,I,V)),I=Oa(A,f),I!=null&&w.push(zp(A,I,V))),A.tag===3)return w;A=A.return}return[]}function N0(A){if(A===null)return null;do A=A.return;while(A&&A.tag!==5&&A.tag!==27);return A||null}function LB(A,f,p,w,I){for(var V=f._reactName,le=[];p!==null&&p!==w;){var we=p,Re=we.alternate,rt=we.stateNode;if(we=we.tag,Re!==null&&Re===w)break;we!==5&&we!==26&&we!==27||rt===null||(Re=rt,I?(rt=Oa(p,V),rt!=null&&le.unshift(zp(p,rt,Re))):I||(rt=Oa(p,V),rt!=null&&le.push(zp(p,rt,Re)))),p=p.return}le.length!==0&&A.push({event:f,listeners:le})}var I9=/\r\n?/g,F9=/\u0000|\uFFFD/g;function UB(A){return(typeof A=="string"?A:""+A).replace(I9,`
`).replace(F9,"")}function MB(A,f){return f=UB(f),UB(A)===f}function hv(){}function Zn(A,f,p,w,I,V){switch(p){case"children":typeof w=="string"?f==="body"||f==="textarea"&&w===""||xi(A,w):(typeof w=="number"||typeof w=="bigint")&&f!=="body"&&xi(A,""+w);break;case"className":Qr(A,"class",w);break;case"tabIndex":Qr(A,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Qr(A,p,w);break;case"style":Gu(A,w,V);break;case"data":if(f!=="object"){Qr(A,"data",w);break}case"src":case"href":if(w===""&&(f!=="a"||p!=="href")){A.removeAttribute(p);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(p);break}w=Mo(""+w),A.setAttribute(p,w);break;case"action":case"formAction":if(typeof w=="function"){A.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(p==="formAction"?(f!=="input"&&Zn(A,f,"name",I.name,I,null),Zn(A,f,"formEncType",I.formEncType,I,null),Zn(A,f,"formMethod",I.formMethod,I,null),Zn(A,f,"formTarget",I.formTarget,I,null)):(Zn(A,f,"encType",I.encType,I,null),Zn(A,f,"method",I.method,I,null),Zn(A,f,"target",I.target,I,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){A.removeAttribute(p);break}w=Mo(""+w),A.setAttribute(p,w);break;case"onClick":w!=null&&(A.onclick=hv);break;case"onScroll":w!=null&&cn("scroll",A);break;case"onScrollEnd":w!=null&&cn("scrollend",A);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(p=w.__html,p!=null){if(I.children!=null)throw Error(n(60));A.innerHTML=p}}break;case"multiple":A.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":A.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){A.removeAttribute("xlink:href");break}p=Mo(""+w),A.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,""+w):A.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,""):A.removeAttribute(p);break;case"capture":case"download":w===!0?A.setAttribute(p,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?A.setAttribute(p,w):A.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?A.setAttribute(p,w):A.removeAttribute(p);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?A.removeAttribute(p):A.setAttribute(p,w);break;case"popover":cn("beforetoggle",A),cn("toggle",A),Or(A,"popover",w);break;case"xlinkActuate":qr(A,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":qr(A,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":qr(A,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":qr(A,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":qr(A,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":qr(A,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":qr(A,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":qr(A,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":qr(A,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Or(A,"is",w);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Uo.get(p)||p,Or(A,p,w))}}function SC(A,f,p,w,I,V){switch(p){case"style":Gu(A,w,V);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(n(61));if(p=w.__html,p!=null){if(I.children!=null)throw Error(n(60));A.innerHTML=p}}break;case"children":typeof w=="string"?xi(A,w):(typeof w=="number"||typeof w=="bigint")&&xi(A,""+w);break;case"onScroll":w!=null&&cn("scroll",A);break;case"onScrollEnd":w!=null&&cn("scrollend",A);break;case"onClick":w!=null&&(A.onclick=hv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ze.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(I=p.endsWith("Capture"),f=p.slice(2,I?p.length-7:void 0),V=A[on]||null,V=V!=null?V[p]:null,typeof V=="function"&&A.removeEventListener(f,V,I),typeof w=="function")){typeof V!="function"&&V!==null&&(p in A?A[p]=null:A.hasAttribute(p)&&A.removeAttribute(p)),A.addEventListener(f,w,I);break e}p in A?A[p]=w:w===!0?A.setAttribute(p,""):Or(A,p,w)}}}function oi(A,f,p){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":cn("error",A),cn("load",A);var w=!1,I=!1,V;for(V in p)if(p.hasOwnProperty(V)){var le=p[V];if(le!=null)switch(V){case"src":w=!0;break;case"srcSet":I=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Zn(A,f,V,le,p,null)}}I&&Zn(A,f,"srcSet",p.srcSet,p,null),w&&Zn(A,f,"src",p.src,p,null);return;case"input":cn("invalid",A);var we=V=le=I=null,Re=null,rt=null;for(w in p)if(p.hasOwnProperty(w)){var ft=p[w];if(ft!=null)switch(w){case"name":I=ft;break;case"type":le=ft;break;case"checked":Re=ft;break;case"defaultChecked":rt=ft;break;case"value":V=ft;break;case"defaultValue":we=ft;break;case"children":case"dangerouslySetInnerHTML":if(ft!=null)throw Error(n(137,f));break;default:Zn(A,f,w,ft,p,null)}}Al(A,V,we,Re,rt,le,I,!1),ul(A);return;case"select":cn("invalid",A),w=le=V=null;for(I in p)if(p.hasOwnProperty(I)&&(we=p[I],we!=null))switch(I){case"value":V=we;break;case"defaultValue":le=we;break;case"multiple":w=we;default:Zn(A,f,I,we,p,null)}f=V,p=le,A.multiple=!!w,f!=null?co(A,!!w,f,!1):p!=null&&co(A,!!w,p,!0);return;case"textarea":cn("invalid",A),V=I=w=null;for(le in p)if(p.hasOwnProperty(le)&&(we=p[le],we!=null))switch(le){case"value":w=we;break;case"defaultValue":I=we;break;case"children":V=we;break;case"dangerouslySetInnerHTML":if(we!=null)throw Error(n(91));break;default:Zn(A,f,le,we,p,null)}fl(A,w,I,V),ul(A);return;case"option":for(Re in p)if(p.hasOwnProperty(Re)&&(w=p[Re],w!=null))switch(Re){case"selected":A.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:Zn(A,f,Re,w,p,null)}return;case"dialog":cn("beforetoggle",A),cn("toggle",A),cn("cancel",A),cn("close",A);break;case"iframe":case"object":cn("load",A);break;case"video":case"audio":for(w=0;w<Vp.length;w++)cn(Vp[w],A);break;case"image":cn("error",A),cn("load",A);break;case"details":cn("toggle",A);break;case"embed":case"source":case"link":cn("error",A),cn("load",A);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(rt in p)if(p.hasOwnProperty(rt)&&(w=p[rt],w!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,f));default:Zn(A,f,rt,w,p,null)}return;default:if(qu(f)){for(ft in p)p.hasOwnProperty(ft)&&(w=p[ft],w!==void 0&&SC(A,f,ft,w,p,void 0));return}}for(we in p)p.hasOwnProperty(we)&&(w=p[we],w!=null&&Zn(A,f,we,w,p,null))}function D9(A,f,p,w){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var I=null,V=null,le=null,we=null,Re=null,rt=null,ft=null;for(at in p){var bt=p[at];if(p.hasOwnProperty(at)&&bt!=null)switch(at){case"checked":break;case"value":break;case"defaultValue":Re=bt;default:w.hasOwnProperty(at)||Zn(A,f,at,null,w,bt)}}for(var st in w){var at=w[st];if(bt=p[st],w.hasOwnProperty(st)&&(at!=null||bt!=null))switch(st){case"type":V=at;break;case"name":I=at;break;case"checked":rt=at;break;case"defaultChecked":ft=at;break;case"value":le=at;break;case"defaultValue":we=at;break;case"children":case"dangerouslySetInnerHTML":if(at!=null)throw Error(n(137,f));break;default:at!==bt&&Zn(A,f,st,at,w,bt)}}Fa(A,le,we,Re,rt,ft,V,I);return;case"select":at=le=we=st=null;for(V in p)if(Re=p[V],p.hasOwnProperty(V)&&Re!=null)switch(V){case"value":break;case"multiple":at=Re;default:w.hasOwnProperty(V)||Zn(A,f,V,null,w,Re)}for(I in w)if(V=w[I],Re=p[I],w.hasOwnProperty(I)&&(V!=null||Re!=null))switch(I){case"value":st=V;break;case"defaultValue":we=V;break;case"multiple":le=V;default:V!==Re&&Zn(A,f,I,V,w,Re)}f=we,p=le,w=at,st!=null?co(A,!!p,st,!1):!!w!=!!p&&(f!=null?co(A,!!p,f,!0):co(A,!!p,p?[]:"",!1));return;case"textarea":at=st=null;for(we in p)if(I=p[we],p.hasOwnProperty(we)&&I!=null&&!w.hasOwnProperty(we))switch(we){case"value":break;case"children":break;default:Zn(A,f,we,null,w,I)}for(le in w)if(I=w[le],V=p[le],w.hasOwnProperty(le)&&(I!=null||V!=null))switch(le){case"value":st=I;break;case"defaultValue":at=I;break;case"children":break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(n(91));break;default:I!==V&&Zn(A,f,le,I,w,V)}Sn(A,st,at);return;case"option":for(var Nr in p)if(st=p[Nr],p.hasOwnProperty(Nr)&&st!=null&&!w.hasOwnProperty(Nr))switch(Nr){case"selected":A.selected=!1;break;default:Zn(A,f,Nr,null,w,st)}for(Re in w)if(st=w[Re],at=p[Re],w.hasOwnProperty(Re)&&st!==at&&(st!=null||at!=null))switch(Re){case"selected":A.selected=st&&typeof st!="function"&&typeof st!="symbol";break;default:Zn(A,f,Re,st,w,at)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xr in p)st=p[xr],p.hasOwnProperty(xr)&&st!=null&&!w.hasOwnProperty(xr)&&Zn(A,f,xr,null,w,st);for(rt in w)if(st=w[rt],at=p[rt],w.hasOwnProperty(rt)&&st!==at&&(st!=null||at!=null))switch(rt){case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(n(137,f));break;default:Zn(A,f,rt,st,w,at)}return;default:if(qu(f)){for(var es in p)st=p[es],p.hasOwnProperty(es)&&st!==void 0&&!w.hasOwnProperty(es)&&SC(A,f,es,void 0,w,st);for(ft in w)st=w[ft],at=p[ft],!w.hasOwnProperty(ft)||st===at||st===void 0&&at===void 0||SC(A,f,ft,st,w,at);return}}for(var qe in p)st=p[qe],p.hasOwnProperty(qe)&&st!=null&&!w.hasOwnProperty(qe)&&Zn(A,f,qe,null,w,st);for(bt in w)st=w[bt],at=p[bt],!w.hasOwnProperty(bt)||st===at||st==null&&at==null||Zn(A,f,bt,st,w,at)}var TC=null,NC=null;function mv(A){return A.nodeType===9?A:A.ownerDocument}function PB(A){switch(A){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jB(A,f){if(A===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return A===1&&f==="foreignObject"?0:A}function BC(A,f){return A==="textarea"||A==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var kC=null;function R9(){var A=window.event;return A&&A.type==="popstate"?A===kC?!1:(kC=A,!0):(kC=null,!1)}var OB=typeof setTimeout=="function"?setTimeout:void 0,L9=typeof clearTimeout=="function"?clearTimeout:void 0,QB=typeof Promise=="function"?Promise:void 0,U9=typeof queueMicrotask=="function"?queueMicrotask:typeof QB<"u"?function(A){return QB.resolve(null).then(A).catch(M9)}:OB;function M9(A){setTimeout(function(){throw A})}function Ed(A){return A==="head"}function HB(A,f){var p=f,w=0,I=0;do{var V=p.nextSibling;if(A.removeChild(p),V&&V.nodeType===8)if(p=V.data,p==="/$"){if(0<w&&8>w){p=w;var le=A.ownerDocument;if(p&1&&Gp(le.documentElement),p&2&&Gp(le.body),p&4)for(p=le.head,Gp(p),le=p.firstChild;le;){var we=le.nextSibling,Re=le.nodeName;le[_e]||Re==="SCRIPT"||Re==="STYLE"||Re==="LINK"&&le.rel.toLowerCase()==="stylesheet"||p.removeChild(le),le=we}}if(I===0){A.removeChild(V),Zp(f);return}I--}else p==="$"||p==="$?"||p==="$!"?I++:w=p.charCodeAt(0)-48;else w=0;p=V}while(p);Zp(f)}function IC(A){var f=A.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var p=f;switch(f=f.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":IC(p),Se(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}A.removeChild(p)}}function P9(A,f,p,w){for(;A.nodeType===1;){var I=p;if(A.nodeName.toLowerCase()!==f.toLowerCase()){if(!w&&(A.nodeName!=="INPUT"||A.type!=="hidden"))break}else if(w){if(!A[_e])switch(f){case"meta":if(!A.hasAttribute("itemprop"))break;return A;case"link":if(V=A.getAttribute("rel"),V==="stylesheet"&&A.hasAttribute("data-precedence"))break;if(V!==I.rel||A.getAttribute("href")!==(I.href==null||I.href===""?null:I.href)||A.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin)||A.getAttribute("title")!==(I.title==null?null:I.title))break;return A;case"style":if(A.hasAttribute("data-precedence"))break;return A;case"script":if(V=A.getAttribute("src"),(V!==(I.src==null?null:I.src)||A.getAttribute("type")!==(I.type==null?null:I.type)||A.getAttribute("crossorigin")!==(I.crossOrigin==null?null:I.crossOrigin))&&V&&A.hasAttribute("async")&&!A.hasAttribute("itemprop"))break;return A;default:return A}}else if(f==="input"&&A.type==="hidden"){var V=I.name==null?null:""+I.name;if(I.type==="hidden"&&A.getAttribute("name")===V)return A}else return A;if(A=yc(A.nextSibling),A===null)break}return null}function j9(A,f,p){if(f==="")return null;for(;A.nodeType!==3;)if((A.nodeType!==1||A.nodeName!=="INPUT"||A.type!=="hidden")&&!p||(A=yc(A.nextSibling),A===null))return null;return A}function FC(A){return A.data==="$!"||A.data==="$?"&&A.ownerDocument.readyState==="complete"}function O9(A,f){var p=A.ownerDocument;if(A.data!=="$?"||p.readyState==="complete")f();else{var w=function(){f(),p.removeEventListener("DOMContentLoaded",w)};p.addEventListener("DOMContentLoaded",w),A._reactRetry=w}}function yc(A){for(;A!=null;A=A.nextSibling){var f=A.nodeType;if(f===1||f===3)break;if(f===8){if(f=A.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return A}var DC=null;function VB(A){A=A.previousSibling;for(var f=0;A;){if(A.nodeType===8){var p=A.data;if(p==="$"||p==="$!"||p==="$?"){if(f===0)return A;f--}else p==="/$"&&f++}A=A.previousSibling}return null}function zB(A,f,p){switch(f=mv(p),A){case"html":if(A=f.documentElement,!A)throw Error(n(452));return A;case"head":if(A=f.head,!A)throw Error(n(453));return A;case"body":if(A=f.body,!A)throw Error(n(454));return A;default:throw Error(n(451))}}function Gp(A){for(var f=A.attributes;f.length;)A.removeAttributeNode(f[0]);Se(A)}var Fl=new Map,GB=new Set;function pv(A){return typeof A.getRootNode=="function"?A.getRootNode():A.nodeType===9?A:A.ownerDocument}var xA=re.d;re.d={f:Q9,r:H9,D:V9,C:z9,L:G9,m:q9,X:$9,S:K9,M:W9};function Q9(){var A=xA.f(),f=ov();return A||f}function H9(A){var f=ke(A);f!==null&&f.tag===5&&f.type==="form"?Yf(f):xA.r(A)}var B0=typeof document>"u"?null:document;function qB(A,f,p){var w=B0;if(w&&typeof f=="string"&&f){var I=pn(f);I='link[rel="'+A+'"][href="'+I+'"]',typeof p=="string"&&(I+='[crossorigin="'+p+'"]'),GB.has(I)||(GB.add(I),A={rel:A,crossOrigin:p,href:f},w.querySelector(I)===null&&(f=w.createElement("link"),oi(f,"link",A),Ve(f),w.head.appendChild(f)))}}function V9(A){xA.D(A),qB("dns-prefetch",A,null)}function z9(A,f){xA.C(A,f),qB("preconnect",A,f)}function G9(A,f,p){xA.L(A,f,p);var w=B0;if(w&&A&&f){var I='link[rel="preload"][as="'+pn(f)+'"]';f==="image"&&p&&p.imageSrcSet?(I+='[imagesrcset="'+pn(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(I+='[imagesizes="'+pn(p.imageSizes)+'"]')):I+='[href="'+pn(A)+'"]';var V=I;switch(f){case"style":V=k0(A);break;case"script":V=I0(A)}Fl.has(V)||(A=d({rel:"preload",href:f==="image"&&p&&p.imageSrcSet?void 0:A,as:f},p),Fl.set(V,A),w.querySelector(I)!==null||f==="style"&&w.querySelector(qp(V))||f==="script"&&w.querySelector(Kp(V))||(f=w.createElement("link"),oi(f,"link",A),Ve(f),w.head.appendChild(f)))}}function q9(A,f){xA.m(A,f);var p=B0;if(p&&A){var w=f&&typeof f.as=="string"?f.as:"script",I='link[rel="modulepreload"][as="'+pn(w)+'"][href="'+pn(A)+'"]',V=I;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=I0(A)}if(!Fl.has(V)&&(A=d({rel:"modulepreload",href:A},f),Fl.set(V,A),p.querySelector(I)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(Kp(V)))return}w=p.createElement("link"),oi(w,"link",A),Ve(w),p.head.appendChild(w)}}}function K9(A,f,p){xA.S(A,f,p);var w=B0;if(w&&A){var I=nt(w).hoistableStyles,V=k0(A);f=f||"default";var le=I.get(V);if(!le){var we={loading:0,preload:null};if(le=w.querySelector(qp(V)))we.loading=5;else{A=d({rel:"stylesheet",href:A,"data-precedence":f},p),(p=Fl.get(V))&&RC(A,p);var Re=le=w.createElement("link");Ve(Re),oi(Re,"link",A),Re._p=new Promise(function(rt,ft){Re.onload=rt,Re.onerror=ft}),Re.addEventListener("load",function(){we.loading|=1}),Re.addEventListener("error",function(){we.loading|=2}),we.loading|=4,gv(le,f,w)}le={type:"stylesheet",instance:le,count:1,state:we},I.set(V,le)}}}function $9(A,f){xA.X(A,f);var p=B0;if(p&&A){var w=nt(p).hoistableScripts,I=I0(A),V=w.get(I);V||(V=p.querySelector(Kp(I)),V||(A=d({src:A,async:!0},f),(f=Fl.get(I))&&LC(A,f),V=p.createElement("script"),Ve(V),oi(V,"link",A),p.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},w.set(I,V))}}function W9(A,f){xA.M(A,f);var p=B0;if(p&&A){var w=nt(p).hoistableScripts,I=I0(A),V=w.get(I);V||(V=p.querySelector(Kp(I)),V||(A=d({src:A,async:!0,type:"module"},f),(f=Fl.get(I))&&LC(A,f),V=p.createElement("script"),Ve(V),oi(V,"link",A),p.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},w.set(I,V))}}function KB(A,f,p,w){var I=(I=ce.current)?pv(I):null;if(!I)throw Error(n(446));switch(A){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(f=k0(p.href),p=nt(I).hoistableStyles,w=p.get(f),w||(w={type:"style",instance:null,count:0,state:null},p.set(f,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){A=k0(p.href);var V=nt(I).hoistableStyles,le=V.get(A);if(le||(I=I.ownerDocument||I,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(A,le),(V=I.querySelector(qp(A)))&&!V._p&&(le.instance=V,le.state.loading=5),Fl.has(A)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},Fl.set(A,p),V||Y9(I,A,p,le.state))),f&&w===null)throw Error(n(528,""));return le}if(f&&w!==null)throw Error(n(529,""));return null;case"script":return f=p.async,p=p.src,typeof p=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=I0(p),p=nt(I).hoistableScripts,w=p.get(f),w||(w={type:"script",instance:null,count:0,state:null},p.set(f,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,A))}}function k0(A){return'href="'+pn(A)+'"'}function qp(A){return'link[rel="stylesheet"]['+A+"]"}function $B(A){return d({},A,{"data-precedence":A.precedence,precedence:null})}function Y9(A,f,p,w){A.querySelector('link[rel="preload"][as="style"]['+f+"]")?w.loading=1:(f=A.createElement("link"),w.preload=f,f.addEventListener("load",function(){return w.loading|=1}),f.addEventListener("error",function(){return w.loading|=2}),oi(f,"link",p),Ve(f),A.head.appendChild(f))}function I0(A){return'[src="'+pn(A)+'"]'}function Kp(A){return"script[async]"+A}function WB(A,f,p){if(f.count++,f.instance===null)switch(f.type){case"style":var w=A.querySelector('style[data-href~="'+pn(p.href)+'"]');if(w)return f.instance=w,Ve(w),w;var I=d({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return w=(A.ownerDocument||A).createElement("style"),Ve(w),oi(w,"style",I),gv(w,p.precedence,A),f.instance=w;case"stylesheet":I=k0(p.href);var V=A.querySelector(qp(I));if(V)return f.state.loading|=4,f.instance=V,Ve(V),V;w=$B(p),(I=Fl.get(I))&&RC(w,I),V=(A.ownerDocument||A).createElement("link"),Ve(V);var le=V;return le._p=new Promise(function(we,Re){le.onload=we,le.onerror=Re}),oi(V,"link",w),f.state.loading|=4,gv(V,p.precedence,A),f.instance=V;case"script":return V=I0(p.src),(I=A.querySelector(Kp(V)))?(f.instance=I,Ve(I),I):(w=p,(I=Fl.get(V))&&(w=d({},p),LC(w,I)),A=A.ownerDocument||A,I=A.createElement("script"),Ve(I),oi(I,"link",w),A.head.appendChild(I),f.instance=I);case"void":return null;default:throw Error(n(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(w=f.instance,f.state.loading|=4,gv(w,p.precedence,A));return f.instance}function gv(A,f,p){for(var w=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),I=w.length?w[w.length-1]:null,V=I,le=0;le<w.length;le++){var we=w[le];if(we.dataset.precedence===f)V=we;else if(V!==I)break}V?V.parentNode.insertBefore(A,V.nextSibling):(f=p.nodeType===9?p.head:p,f.insertBefore(A,f.firstChild))}function RC(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.title==null&&(A.title=f.title)}function LC(A,f){A.crossOrigin==null&&(A.crossOrigin=f.crossOrigin),A.referrerPolicy==null&&(A.referrerPolicy=f.referrerPolicy),A.integrity==null&&(A.integrity=f.integrity)}var xv=null;function YB(A,f,p){if(xv===null){var w=new Map,I=xv=new Map;I.set(p,w)}else I=xv,w=I.get(p),w||(w=new Map,I.set(p,w));if(w.has(A))return w;for(w.set(A,null),p=p.getElementsByTagName(A),I=0;I<p.length;I++){var V=p[I];if(!(V[_e]||V[mn]||A==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var le=V.getAttribute(f)||"";le=A+le;var we=w.get(le);we?we.push(V):w.set(le,[V])}}return w}function JB(A,f,p){A=A.ownerDocument||A,A.head.insertBefore(p,f==="title"?A.querySelector("head > title"):null)}function J9(A,f,p){if(p===1||f.itemProp!=null)return!1;switch(A){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return A=f.disabled,typeof f.precedence=="string"&&A==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function XB(A){return!(A.type==="stylesheet"&&(A.state.loading&3)===0)}var $p=null;function X9(){}function Z9(A,f,p){if($p===null)throw Error(n(475));var w=$p;if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var I=k0(p.href),V=A.querySelector(qp(I));if(V){A=V._p,A!==null&&typeof A=="object"&&typeof A.then=="function"&&(w.count++,w=vv.bind(w),A.then(w,w)),f.state.loading|=4,f.instance=V,Ve(V);return}V=A.ownerDocument||A,p=$B(p),(I=Fl.get(I))&&RC(p,I),V=V.createElement("link"),Ve(V);var le=V;le._p=new Promise(function(we,Re){le.onload=we,le.onerror=Re}),oi(V,"link",p),f.instance=V}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(f,A),(A=f.state.preload)&&(f.state.loading&3)===0&&(w.count++,f=vv.bind(w),A.addEventListener("load",f),A.addEventListener("error",f))}}function eV(){if($p===null)throw Error(n(475));var A=$p;return A.stylesheets&&A.count===0&&UC(A,A.stylesheets),0<A.count?function(f){var p=setTimeout(function(){if(A.stylesheets&&UC(A,A.stylesheets),A.unsuspend){var w=A.unsuspend;A.unsuspend=null,w()}},6e4);return A.unsuspend=f,function(){A.unsuspend=null,clearTimeout(p)}}:null}function vv(){if(this.count--,this.count===0){if(this.stylesheets)UC(this,this.stylesheets);else if(this.unsuspend){var A=this.unsuspend;this.unsuspend=null,A()}}}var yv=null;function UC(A,f){A.stylesheets=null,A.unsuspend!==null&&(A.count++,yv=new Map,f.forEach(tV,A),yv=null,vv.call(A))}function tV(A,f){if(!(f.state.loading&4)){var p=yv.get(A);if(p)var w=p.get(null);else{p=new Map,yv.set(A,p);for(var I=A.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<I.length;V++){var le=I[V];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(p.set(le.dataset.precedence,le),w=le)}w&&p.set(null,w)}I=f.instance,le=I.getAttribute("data-precedence"),V=p.get(le)||w,V===w&&p.set(null,I),p.set(le,I),this.count++,w=vv.bind(this),I.addEventListener("load",w),I.addEventListener("error",w),V?V.parentNode.insertBefore(I,V.nextSibling):(A=A.nodeType===9?A.head:A,A.insertBefore(I,A.firstChild)),f.state.loading|=4}}var Wp={$$typeof:D,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function rV(A,f,p,w,I,V,le,we){this.tag=1,this.containerInfo=A,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ns(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ns(0),this.hiddenUpdates=ns(null),this.identifierPrefix=w,this.onUncaughtError=I,this.onCaughtError=V,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=we,this.incompleteTransitions=new Map}function ZB(A,f,p,w,I,V,le,we,Re,rt,ft,bt){return A=new rV(A,f,p,le,we,Re,rt,bt),f=1,V===!0&&(f|=24),V=za(3,null,null,f),A.current=V,V.stateNode=A,f=xp(),f.refCount++,A.pooledCache=f,f.refCount++,V.memoizedState={element:w,isDehydrated:p,cache:f},Pe(V),A}function ek(A){return A?(A=ga,A):ga}function tk(A,f,p,w,I,V){I=ek(I),w.context===null?w.context=I:w.pendingContext=I,w=At(f),w.payload={element:p},V=V===void 0?null:V,V!==null&&(w.callback=V),p=yt(A,w,f),p!==null&&(Jo(p,A,f),ht(p,A,f))}function rk(A,f){if(A=A.memoizedState,A!==null&&A.dehydrated!==null){var p=A.retryLane;A.retryLane=p!==0&&p<f?p:f}}function MC(A,f){rk(A,f),(A=A.alternate)&&rk(A,f)}function nk(A){if(A.tag===13){var f=oc(A,67108864);f!==null&&Jo(f,A,67108864),MC(A,67108864)}}var wv=!0;function nV(A,f,p,w){var I=J.T;J.T=null;var V=re.p;try{re.p=2,PC(A,f,p,w)}finally{re.p=V,J.T=I}}function sV(A,f,p,w){var I=J.T;J.T=null;var V=re.p;try{re.p=8,PC(A,f,p,w)}finally{re.p=V,J.T=I}}function PC(A,f,p,w){if(wv){var I=jC(w);if(I===null)_C(A,f,w,bv,p),ak(A,w);else if(iV(I,A,f,p,w))w.stopPropagation();else if(ak(A,w),f&4&&-1<aV.indexOf(A)){for(;I!==null;){var V=ke(I);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var le=vr(V.pendingLanes);if(le!==0){var we=V;for(we.pendingLanes|=2,we.entangledLanes|=2;le;){var Re=1<<31-It(le);we.entanglements[1]|=Re,le&=~Re}mu(V),(Hn&6)===0&&(av=De()+500,Hp(0))}}break;case 13:we=oc(V,2),we!==null&&Jo(we,V,2),ov(),MC(V,2)}if(V=jC(w),V===null&&_C(A,f,w,bv,p),V===I)break;I=V}I!==null&&w.stopPropagation()}else _C(A,f,w,null,p)}}function jC(A){return A=On(A),OC(A)}var bv=null;function OC(A){if(bv=null,A=Te(A),A!==null){var f=a(A);if(f===null)A=null;else{var p=f.tag;if(p===13){if(A=i(f),A!==null)return A;A=null}else if(p===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;A=null}else f!==A&&(A=null)}}return bv=A,null}function sk(A){switch(A){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qe()){case $e:return 2;case ut:return 8;case Et:case lt:return 32;case Dt:return 268435456;default:return 32}default:return 32}}var QC=!1,_d=null,Sd=null,Td=null,Yp=new Map,Jp=new Map,Nd=[],aV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ak(A,f){switch(A){case"focusin":case"focusout":_d=null;break;case"dragenter":case"dragleave":Sd=null;break;case"mouseover":case"mouseout":Td=null;break;case"pointerover":case"pointerout":Yp.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jp.delete(f.pointerId)}}function Xp(A,f,p,w,I,V){return A===null||A.nativeEvent!==V?(A={blockedOn:f,domEventName:p,eventSystemFlags:w,nativeEvent:V,targetContainers:[I]},f!==null&&(f=ke(f),f!==null&&nk(f)),A):(A.eventSystemFlags|=w,f=A.targetContainers,I!==null&&f.indexOf(I)===-1&&f.push(I),A)}function iV(A,f,p,w,I){switch(f){case"focusin":return _d=Xp(_d,A,f,p,w,I),!0;case"dragenter":return Sd=Xp(Sd,A,f,p,w,I),!0;case"mouseover":return Td=Xp(Td,A,f,p,w,I),!0;case"pointerover":var V=I.pointerId;return Yp.set(V,Xp(Yp.get(V)||null,A,f,p,w,I)),!0;case"gotpointercapture":return V=I.pointerId,Jp.set(V,Xp(Jp.get(V)||null,A,f,p,w,I)),!0}return!1}function ik(A){var f=Te(A.target);if(f!==null){var p=a(f);if(p!==null){if(f=p.tag,f===13){if(f=i(p),f!==null){A.blockedOn=f,Ba(A.priority,function(){if(p.tag===13){var w=Yo();w=fa(w);var I=oc(p,w);I!==null&&Jo(I,p,w),MC(p,w)}});return}}else if(f===3&&p.stateNode.current.memoizedState.isDehydrated){A.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}A.blockedOn=null}function Cv(A){if(A.blockedOn!==null)return!1;for(var f=A.targetContainers;0<f.length;){var p=jC(A.nativeEvent);if(p===null){p=A.nativeEvent;var w=new p.constructor(p.type,p);uo=w,p.target.dispatchEvent(w),uo=null}else return f=ke(p),f!==null&&nk(f),A.blockedOn=p,!1;f.shift()}return!0}function ok(A,f,p){Cv(A)&&p.delete(f)}function oV(){QC=!1,_d!==null&&Cv(_d)&&(_d=null),Sd!==null&&Cv(Sd)&&(Sd=null),Td!==null&&Cv(Td)&&(Td=null),Yp.forEach(ok),Jp.forEach(ok)}function Ev(A,f){A.blockedOn===f&&(A.blockedOn=null,QC||(QC=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,oV)))}var _v=null;function lk(A){_v!==A&&(_v=A,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){_v===A&&(_v=null);for(var f=0;f<A.length;f+=3){var p=A[f],w=A[f+1],I=A[f+2];if(typeof w!="function"){if(OC(w||p)===null)continue;break}var V=ke(p);V!==null&&(A.splice(f,3),f-=3,Bl(V,{pending:!0,data:I,method:p.method,action:w},w,I))}}))}function Zp(A){function f(Re){return Ev(Re,A)}_d!==null&&Ev(_d,A),Sd!==null&&Ev(Sd,A),Td!==null&&Ev(Td,A),Yp.forEach(f),Jp.forEach(f);for(var p=0;p<Nd.length;p++){var w=Nd[p];w.blockedOn===A&&(w.blockedOn=null)}for(;0<Nd.length&&(p=Nd[0],p.blockedOn===null);)ik(p),p.blockedOn===null&&Nd.shift();if(p=(A.ownerDocument||A).$$reactFormReplay,p!=null)for(w=0;w<p.length;w+=3){var I=p[w],V=p[w+1],le=I[on]||null;if(typeof V=="function")le||lk(p);else if(le){var we=null;if(V&&V.hasAttribute("formAction")){if(I=V,le=V[on]||null)we=le.formAction;else if(OC(I)!==null)continue}else we=le.action;typeof we=="function"?p[w+1]=we:(p.splice(w,3),w-=3),lk(p)}}}function HC(A){this._internalRoot=A}Sv.prototype.render=HC.prototype.render=function(A){var f=this._internalRoot;if(f===null)throw Error(n(409));var p=f.current,w=Yo();tk(p,w,A,f,null,null)},Sv.prototype.unmount=HC.prototype.unmount=function(){var A=this._internalRoot;if(A!==null){this._internalRoot=null;var f=A.containerInfo;tk(A.current,2,null,A,null,null),ov(),f[Rn]=null}};function Sv(A){this._internalRoot=A}Sv.prototype.unstable_scheduleHydration=function(A){if(A){var f=_s();A={blockedOn:null,target:A,priority:f};for(var p=0;p<Nd.length&&f!==0&&f<Nd[p].priority;p++);Nd.splice(p,0,A),p===0&&ik(A)}};var ck=e.version;if(ck!=="19.1.1")throw Error(n(527,ck,"19.1.1"));re.findDOMNode=function(A){var f=A._reactInternals;if(f===void 0)throw typeof A.render=="function"?Error(n(188)):(A=Object.keys(A).join(","),Error(n(268,A)));return A=l(f),A=A!==null?u(A):null,A=A===null?null:A.stateNode,A};var lV={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:J,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tv.isDisabled&&Tv.supportsFiber)try{Rt=Tv.inject(lV),Ot=Tv}catch{}}return tg.createRoot=function(A,f){if(!s(A))throw Error(n(299));var p=!1,w="",I=_N,V=SN,le=TN,we=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(I=f.onUncaughtError),f.onCaughtError!==void 0&&(V=f.onCaughtError),f.onRecoverableError!==void 0&&(le=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(we=f.unstable_transitionCallbacks)),f=ZB(A,1,!1,null,null,p,w,I,V,le,we,null),A[Rn]=f.current,EC(A),new HC(f)},tg.hydrateRoot=function(A,f,p){if(!s(A))throw Error(n(299));var w=!1,I="",V=_N,le=SN,we=TN,Re=null,rt=null;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(I=p.identifierPrefix),p.onUncaughtError!==void 0&&(V=p.onUncaughtError),p.onCaughtError!==void 0&&(le=p.onCaughtError),p.onRecoverableError!==void 0&&(we=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(Re=p.unstable_transitionCallbacks),p.formState!==void 0&&(rt=p.formState)),f=ZB(A,1,!0,f,p??null,w,I,V,le,we,Re,rt),f.context=ek(null),p=f.current,w=Yo(),w=fa(w),I=At(w),I.callback=null,yt(p,I,w),p=w,f.current.lanes=p,gs(f,p),mu(f),A[Rn]=f.current,EC(A),new Sv(f)},tg.version="19.1.1",tg}var vk;function gV(){if(vk)return GC.exports;vk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),GC.exports=pV(),GC.exports}var xV=gV();const vV=B5(xV),yV=()=>{};var yk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},wV=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[n++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],i=t[r++],o=t[r++],l=((s&7)<<18|(a&63)<<12|(i&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const a=t[r++],i=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(a&63)<<6|i&63)}}return e.join("")},WL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const a=t[s],i=s+1<t.length,o=i?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=a>>2,h=(a&3)<<4|o>>4;let m=(o&15)<<2|u>>6,g=u&63;l||(g=64,i||(m=64)),n.push(r[d],r[h],r[m],r[g])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($L(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],o=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||o==null||u==null||h==null)throw new bV;const m=a<<2|o>>4;if(n.push(m),u!==64){const g=o<<4&240|u>>2;if(n.push(g),h!==64){const b=u<<6&192|h;n.push(b)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class bV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CV=function(t){const e=$L(t);return WL.encodeByteArray(e,!0)},i2=function(t){return CV(t).replace(/\./g,"")},YL=function(t){try{return WL.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=()=>EV().__FIREBASE_DEFAULTS__,SV=()=>{if(typeof process>"u"||typeof yk>"u")return;const t=yk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&YL(t[1]);return e&&JSON.parse(e)},vw=()=>{try{return yV()||_V()||SV()||TV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},JL=t=>{var e,r;return(r=(e=vw())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},XL=t=>{const e=JL(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},ZL=()=>{var t;return(t=vw())==null?void 0:t.config},eU=t=>{var e;return(e=vw())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function k5(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[i2(JSON.stringify(r)),i2(JSON.stringify(i)),""].join(".")}const Pg={};function kV(){const t={prod:[],emulator:[]};for(const e of Object.keys(Pg))Pg[e]?t.emulator.push(e):t.prod.push(e);return t}function IV(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let wk=!1;function I5(t,e){if(typeof window>"u"||typeof document>"u"||!Hh(window.location.host)||Pg[t]===e||Pg[t]||wk)return;Pg[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",a=kV().prod.length>0;function i(){const m=document.getElementById(n);m&&m.remove()}function o(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{wk=!0,i()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=IV(n),g=r("text"),b=document.getElementById(g)||document.createElement("span"),y=r("learnmore"),_=document.getElementById(y)||document.createElement("a"),T=r("preprendIcon"),k=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const D=m.element;o(D),d(_,y);const M=u();l(k,T),D.append(k,b,_,M),document.body.appendChild(D)}a?(b.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ki())}function DV(){var e;const t=(e=vw())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function MV(){const t=Ki();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function PV(){return!DV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jV(){try{return typeof indexedDB=="object"}catch{return!1}}function OV(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV="FirebaseError";class Mu extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=QV,Object.setPrototypeOf(this,Mu.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yx.prototype.create)}}class Yx{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],i=a?HV(a,n):"Error",o=`${this.serviceName}: ${i} (${s}).`;return new Mu(s,o,n)}}function HV(t,e){return t.replace(VV,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const VV=/\{\$([^}]+)}/g;function zV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ff(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const a=t[s],i=e[s];if(bk(a)&&bk(i)){if(!ff(a,i))return!1}else if(a!==i)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function bk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function gg(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,a]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function xg(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function GV(t,e){const r=new qV(t,e);return r.subscribe.bind(r)}class qV{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");KV(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=WC),s.error===void 0&&(s.error=WC),s.complete===void 0&&(s.complete=WC);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KV(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function WC(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t){return t&&t._delegate?t._delegate:t}class hf{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $V=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new NV;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(YV(e))try{this.getOrInitializeService({instanceIdentifier:ah})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});n.resolve(a)}catch{}}}}clearInstance(e=ah){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ah){return this.instances.has(e)}getOptions(e=ah){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[a,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(a);n===o&&i.resolve(s)}return s}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const a=this.instances.get(n);return a&&e(a,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:WV(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ah){return this.component?this.component.multipleInstances?e:ah:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function WV(t){return t===ah?void 0:t}function YV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new $V(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(An||(An={}));const XV={debug:An.DEBUG,verbose:An.VERBOSE,info:An.INFO,warn:An.WARN,error:An.ERROR,silent:An.SILENT},ZV=An.INFO,ez={[An.DEBUG]:"log",[An.VERBOSE]:"log",[An.INFO]:"info",[An.WARN]:"warn",[An.ERROR]:"error"},tz=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=ez[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let F5=class{constructor(e){this.name=e,this._logLevel=ZV,this._logHandler=tz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in An))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,An.DEBUG,...e),this._logHandler(this,An.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,An.VERBOSE,...e),this._logHandler(this,An.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,An.INFO,...e),this._logHandler(this,An.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,An.WARN,...e),this._logHandler(this,An.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,An.ERROR,...e),this._logHandler(this,An.ERROR,...e)}};const rz=(t,e)=>e.some(r=>t instanceof r);let Ck,Ek;function nz(){return Ck||(Ck=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sz(){return Ek||(Ek=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tU=new WeakMap,N_=new WeakMap,rU=new WeakMap,YC=new WeakMap,D5=new WeakMap;function az(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",i)},a=()=>{r(tf(t.result)),s()},i=()=>{n(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",i)});return e.then(r=>{r instanceof IDBCursor&&tU.set(r,t)}).catch(()=>{}),D5.set(e,t),e}function iz(t){if(N_.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",i),t.removeEventListener("abort",i)},a=()=>{r(),s()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",i),t.addEventListener("abort",i)});N_.set(t,e)}let B_={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return N_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rU.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return tf(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oz(t){B_=t(B_)}function lz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(JC(this),e,...r);return rU.set(n,e.sort?e.sort():[e]),tf(n)}:sz().includes(t)?function(...e){return t.apply(JC(this),e),tf(tU.get(this))}:function(...e){return tf(t.apply(JC(this),e))}}function cz(t){return typeof t=="function"?lz(t):(t instanceof IDBTransaction&&iz(t),rz(t,nz())?new Proxy(t,B_):t)}function tf(t){if(t instanceof IDBRequest)return az(t);if(YC.has(t))return YC.get(t);const e=cz(t);return e!==t&&(YC.set(t,e),D5.set(e,t)),e}const JC=t=>D5.get(t);function uz(t,e,{blocked:r,upgrade:n,blocking:s,terminated:a}={}){const i=indexedDB.open(t,e),o=tf(i);return n&&i.addEventListener("upgradeneeded",l=>{n(tf(i.result),l.oldVersion,l.newVersion,tf(i.transaction),l)}),r&&i.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),o.then(l=>{a&&l.addEventListener("close",()=>a()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const Az=["get","getKey","getAll","getAllKeys","count"],dz=["put","add","delete","clear"],XC=new Map;function _k(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(XC.get(e))return XC.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=dz.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||Az.includes(r)))return;const a=async function(i,...o){const l=this.transaction(i,s?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[r](...o),s&&l.done]))[0]};return XC.set(e,a),a}oz(t=>({...t,get:(e,r,n)=>_k(e,r)||t.get(e,r,n),has:(e,r)=>!!_k(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(hz(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function hz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const k_="@firebase/app",Sk="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RA=new F5("@firebase/app"),mz="@firebase/app-compat",pz="@firebase/analytics-compat",gz="@firebase/analytics",xz="@firebase/app-check-compat",vz="@firebase/app-check",yz="@firebase/auth",wz="@firebase/auth-compat",bz="@firebase/database",Cz="@firebase/data-connect",Ez="@firebase/database-compat",_z="@firebase/functions",Sz="@firebase/functions-compat",Tz="@firebase/installations",Nz="@firebase/installations-compat",Bz="@firebase/messaging",kz="@firebase/messaging-compat",Iz="@firebase/performance",Fz="@firebase/performance-compat",Dz="@firebase/remote-config",Rz="@firebase/remote-config-compat",Lz="@firebase/storage",Uz="@firebase/storage-compat",Mz="@firebase/firestore",Pz="@firebase/ai",jz="@firebase/firestore-compat",Oz="firebase",Qz="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="[DEFAULT]",Hz={[k_]:"fire-core",[mz]:"fire-core-compat",[gz]:"fire-analytics",[pz]:"fire-analytics-compat",[vz]:"fire-app-check",[xz]:"fire-app-check-compat",[yz]:"fire-auth",[wz]:"fire-auth-compat",[bz]:"fire-rtdb",[Cz]:"fire-data-connect",[Ez]:"fire-rtdb-compat",[_z]:"fire-fn",[Sz]:"fire-fn-compat",[Tz]:"fire-iid",[Nz]:"fire-iid-compat",[Bz]:"fire-fcm",[kz]:"fire-fcm-compat",[Iz]:"fire-perf",[Fz]:"fire-perf-compat",[Dz]:"fire-rc",[Rz]:"fire-rc-compat",[Lz]:"fire-gcs",[Uz]:"fire-gcs-compat",[Mz]:"fire-fst",[jz]:"fire-fst-compat",[Pz]:"fire-vertex","fire-js":"fire-js",[Oz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=new Map,Vz=new Map,F_=new Map;function Tk(t,e){try{t.container.addComponent(e)}catch(r){RA.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Nh(t){const e=t.name;if(F_.has(e))return RA.debug(`There were multiple attempts to register component ${e}.`),!1;F_.set(e,t);for(const r of lx.values())Tk(r,t);for(const r of Vz.values())Tk(r,t);return!0}function yw(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Ql(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rf=new Yx("app","Firebase",zz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gz{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new hf("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm=Qz;function R5(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:I_,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw rf.create("bad-app-name",{appName:String(s)});if(r||(r=ZL()),!r)throw rf.create("no-options");const a=lx.get(s);if(a){if(ff(r,a.options)&&ff(n,a.config))return a;throw rf.create("duplicate-app",{appName:s})}const i=new JV(s);for(const l of F_.values())i.addComponent(l);const o=new Gz(r,n,i);return lx.set(s,o),o}function L5(t=I_){const e=lx.get(t);if(!e&&t===I_&&ZL())return R5();if(!e)throw rf.create("no-app",{appName:t});return e}function Nk(){return Array.from(lx.values())}function Su(t,e,r){let n=Hz[t]??t;r&&(n+=`-${r}`);const s=n.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const i=[`Unable to register library "${n}" with version "${e}":`];s&&i.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&a&&i.push("and"),a&&i.push(`version name "${e}" contains illegal characters (whitespace or "/")`),RA.warn(i.join(" "));return}Nh(new hf(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz="firebase-heartbeat-database",Kz=1,cx="firebase-heartbeat-store";let ZC=null;function nU(){return ZC||(ZC=uz(qz,Kz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cx)}catch(r){console.warn(r)}}}}).catch(t=>{throw rf.create("idb-open",{originalErrorMessage:t.message})})),ZC}async function $z(t){try{const r=(await nU()).transaction(cx),n=await r.objectStore(cx).get(sU(t));return await r.done,n}catch(e){if(e instanceof Mu)RA.warn(e.message);else{const r=rf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});RA.warn(r.message)}}}async function Bk(t,e){try{const n=(await nU()).transaction(cx,"readwrite");await n.objectStore(cx).put(e,sU(t)),await n.done}catch(r){if(r instanceof Mu)RA.warn(r.message);else{const n=rf.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});RA.warn(n.message)}}}function sU(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wz=1024,Yz=30;class Jz{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Zz(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=kk();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(i=>i.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>Yz){const i=eG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){RA.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=kk(),{heartbeatsToSend:n,unsentEntries:s}=Xz(this._heartbeatsCache.heartbeats),a=i2(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return RA.warn(r),""}}}function kk(){return new Date().toISOString().substring(0,10)}function Xz(t,e=Wz){const r=[];let n=t.slice();for(const s of t){const a=r.find(i=>i.agent===s.agent);if(a){if(a.dates.push(s.date),Ik(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Ik(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Zz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jV()?OV().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await $z(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Bk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return Bk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Ik(t){return i2(JSON.stringify({version:2,heartbeats:t})).length}function eG(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG(t){Nh(new hf("platform-logger",e=>new fz(e),"PRIVATE")),Nh(new hf("heartbeat",e=>new Jz(e),"PRIVATE")),Su(k_,Sk,t),Su(k_,Sk,"esm2020"),Su("fire-js","")}tG("");function aU(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rG=aU,iU=new Yx("auth","Firebase",aU());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=new F5("@firebase/auth");function nG(t,...e){o2.logLevel<=An.WARN&&o2.warn(`Auth (${Xm}): ${t}`,...e)}function Dy(t,...e){o2.logLevel<=An.ERROR&&o2.error(`Auth (${Xm}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t,...e){throw U5(t,...e)}function Tu(t,...e){return U5(t,...e)}function oU(t,e,r){const n={...rG(),[e]:r};return new Yx("auth","Firebase",n).create(e,{appName:t.name})}function nf(t){return oU(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function U5(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return iU.create(t,...e)}function Sr(t,e,...r){if(!t)throw U5(e,...r)}function CA(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dy(e),new Error(e)}function LA(t,e){t||CA(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function sG(){return Fk()==="http:"||Fk()==="https:"}function Fk(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sG()||LV()||"connection"in navigator)?navigator.onLine:!0}function iG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,r){this.shortDelay=e,this.longDelay=r,LA(r>e,"Short delay should be less than long delay!"),this.isMobile=FV()||UV()}get(){return aG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(t,e){LA(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lU{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;CA("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;CA("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;CA("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lG=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cG=new Xx(3e4,6e4);function Nf(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function VA(t,e,r,n,s={}){return cU(t,s,async()=>{let a={},i={};n&&(e==="GET"?i=n:a={body:JSON.stringify(n)});const o=Jx({key:t.config.apiKey,...i}).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:l,...a};return RV()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Hh(t.emulatorConfig.host)&&(u.credentials="include"),lU.fetch()(await uU(t,t.config.apiHost,r,o),u)})}async function cU(t,e,r){t._canInitEmulator=!1;const n={...oG,...e};try{const s=new AG(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw Nv(t,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const o=a.ok?i.errorMessage:i.error.message,[l,u]=o.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nv(t,"credential-already-in-use",i);if(l==="EMAIL_EXISTS")throw Nv(t,"email-already-in-use",i);if(l==="USER_DISABLED")throw Nv(t,"user-disabled",i);const d=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw oU(t,d,u);Rc(t,d)}}catch(s){if(s instanceof Mu)throw s;Rc(t,"network-request-failed",{message:String(s)})}}async function ww(t,e,r,n,s={}){const a=await VA(t,e,r,n,s);return"mfaPendingCredential"in a&&Rc(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function uU(t,e,r,n){const s=`${e}${r}?${n}`,a=t,i=a.config.emulator?M5(t.config,s):`${t.config.apiScheme}://${s}`;return lG.includes(r)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(i).toString():i}function uG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Tu(this.auth,"network-request-failed")),cG.get())})}}function Nv(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Tu(t,e,n);return s.customData._tokenResponse=r,s}function Dk(t){return t!==void 0&&t.enterprise!==void 0}class dG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return uG(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fG(t,e){return VA(t,"GET","/v2/recaptchaConfig",Nf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hG(t,e){return VA(t,"POST","/v1/accounts:delete",e)}async function l2(t,e){return VA(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mG(t,e=!1){const r=Es(t),n=await r.getIdToken(e),s=P5(n);Sr(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,i=a==null?void 0:a.sign_in_provider;return{claims:s,token:n,authTime:jg(eE(s.auth_time)),issuedAtTime:jg(eE(s.iat)),expirationTime:jg(eE(s.exp)),signInProvider:i||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function eE(t){return Number(t)*1e3}function P5(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Dy("JWT malformed, contained fewer than 3 sections"),null;try{const s=YL(r);return s?JSON.parse(s):(Dy("Failed to decode base64 JWT payload"),null)}catch(s){return Dy("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Rk(t){const e=P5(t);return Sr(e,"internal-error"),Sr(typeof e.exp<"u","internal-error"),Sr(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Mu&&pG(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function pG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=jg(this.lastLoginAt),this.creationTime=jg(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(t){var h;const e=t.auth,r=await t.getIdToken(),n=await ux(t,l2(e,{idToken:r}));Sr(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const a=(h=s.providerUserInfo)!=null&&h.length?AU(s.providerUserInfo):[],i=vG(t.providerData,a),o=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!(i!=null&&i.length),u=o?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new R_(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function xG(t){const e=Es(t);await c2(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function vG(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function AU(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yG(t,e){const r=await cU(t,{},async()=>{const n=Jx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,i=await uU(t,s,"/v1/token",`key=${a}`),o=await t._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:o,body:n};return t.emulatorConfig&&Hh(t.emulatorConfig.host)&&(l.credentials="include"),lU.fetch()(i,l)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function wG(t,e){return VA(t,"POST","/v2/accounts:revokeToken",Nf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Sr(e.idToken,"internal-error"),Sr(typeof e.idToken<"u","internal-error"),Sr(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Sr(e.length!==0,"internal-error");const r=Rk(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Sr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:a}=await yG(e,r);this.updateTokensAndExpiration(n,s,Number(a))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:a}=r,i=new fm;return n&&(Sr(typeof n=="string","internal-error",{appName:e}),i.refreshToken=n),s&&(Sr(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),a&&(Sr(typeof a=="number","internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new fm,this.toJSON())}_performRefresh(){return CA("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(t,e){Sr(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nc{constructor({uid:e,auth:r,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new gG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new R_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await ux(this,this.stsTokenManager.getToken(this.auth,e));return Sr(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return mG(this,e)}reload(){return xG(this)}_assign(e){this!==e&&(Sr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Nc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){Sr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await c2(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ql(this.auth.app))return Promise.reject(nf(this.auth));const e=await this.getIdToken();return await ux(this,hG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,s=r.email??void 0,a=r.phoneNumber??void 0,i=r.photoURL??void 0,o=r.tenantId??void 0,l=r._redirectEventId??void 0,u=r.createdAt??void 0,d=r.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:g,providerData:b,stsTokenManager:y}=r;Sr(h&&y,e,"internal-error");const _=fm.fromJSON(this.name,y);Sr(typeof h=="string",e,"internal-error"),kd(n,e.name),kd(s,e.name),Sr(typeof m=="boolean",e,"internal-error"),Sr(typeof g=="boolean",e,"internal-error"),kd(a,e.name),kd(i,e.name),kd(o,e.name),kd(l,e.name),kd(u,e.name),kd(d,e.name);const T=new Nc({uid:h,auth:e,email:s,emailVerified:m,displayName:n,isAnonymous:g,photoURL:i,phoneNumber:a,tenantId:o,stsTokenManager:_,createdAt:u,lastLoginAt:d});return b&&Array.isArray(b)&&(T.providerData=b.map(k=>({...k}))),l&&(T._redirectEventId=l),T}static async _fromIdTokenResponse(e,r,n=!1){const s=new fm;s.updateFromServerResponse(r);const a=new Nc({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await c2(a),a}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];Sr(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?AU(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),o=new fm;o.updateFromIdToken(n);const l=new Nc({uid:s.localId,auth:e,stsTokenManager:o,isAnonymous:i}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new R_(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=new Map;function EA(t){LA(t instanceof Function,"Expected a class definition");let e=Lk.get(t);return e?(LA(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Lk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dU{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}dU.type="NONE";const Uk=dU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(t,e,r){return`firebase:${t}:${e}:${r}`}class hm{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:a}=this.auth;this.fullUserKey=Ry(this.userKey,s.apiKey,a),this.fullPersistenceKey=Ry("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await l2(this.auth,{idToken:e}).catch(()=>{});return r?Nc._fromGetAccountInfoResponse(this.auth,r,e):null}return Nc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new hm(EA(Uk),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||EA(Uk);const i=Ry(n,e.config.apiKey,e.name);let o=null;for(const u of r)try{const d=await u._get(i);if(d){let h;if(typeof d=="string"){const m=await l2(e,{idToken:d}).catch(()=>{});if(!m)break;h=await Nc._fromGetAccountInfoResponse(e,m,d)}else h=Nc._fromJSON(e,d);u!==a&&(o=h),a=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!l.length?new hm(a,e,n):(a=l[0],o&&await a._set(i,o.toJSON()),await Promise.all(r.map(async u=>{if(u!==a)try{await u._remove(i)}catch{}})),new hm(a,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(fU(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xU(e))return"Blackberry";if(vU(e))return"Webos";if(hU(e))return"Safari";if((e.includes("chrome/")||mU(e))&&!e.includes("edge/"))return"Chrome";if(gU(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function fU(t=Ki()){return/firefox\//i.test(t)}function hU(t=Ki()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mU(t=Ki()){return/crios\//i.test(t)}function pU(t=Ki()){return/iemobile/i.test(t)}function gU(t=Ki()){return/android/i.test(t)}function xU(t=Ki()){return/blackberry/i.test(t)}function vU(t=Ki()){return/webos/i.test(t)}function j5(t=Ki()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function bG(t=Ki()){var e;return j5(t)&&!!((e=window.navigator)!=null&&e.standalone)}function CG(){return MV()&&document.documentMode===10}function yU(t=Ki()){return j5(t)||gU(t)||vU(t)||xU(t)||/windows phone/i.test(t)||pU(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t,e=[]){let r;switch(t){case"Browser":r=Mk(Ki());break;case"Worker":r=`${Mk(Ki())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Xm}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=a=>new Promise((i,o)=>{try{const l=e(a);i(l)}catch(l){o(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _G(t,e={}){return VA(t,"GET","/v2/passwordPolicy",Nf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SG=6;class TG{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??SG,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NG{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Pk(this),this.idTokenSubscription=new Pk(this),this.beforeStateQueue=new EG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iU,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=EA(r)),this._initializationPromise=this.queue(async()=>{var n,s,a;if(!this._deleted&&(this.persistenceManager=await hm.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await l2(this,{idToken:e}),n=await Nc._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Ql(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(a=this.redirectUser)==null?void 0:a._redirectEventId,o=n==null?void 0:n._redirectEventId,l=await this.tryRedirectSignIn(e);(!i||i===o)&&(l!=null&&l.user)&&(n=l.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Sr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await c2(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ql(this.app))return Promise.reject(nf(this));const r=e?Es(e):null;return r&&Sr(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Sr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ql(this.app)?Promise.reject(nf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ql(this.app)?Promise.reject(nf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(EA(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _G(this),r=new TG(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yx("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await wG(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&EA(e)||this._popupRedirectResolver;Sr(r,this,"argument-error"),this.redirectPersistenceManager=await hm.create(this,[EA(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Sr(o,this,"internal-error"),o.then(()=>{i||a(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{i=!0,l()}}else{const l=e.addObserver(r);return()=>{i=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Sr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wU(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if(Ql(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&nG(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Vh(t){return Es(t)}class Pk{constructor(e){this.auth=e,this.observer=null,this.addObserver=GV(r=>this.observer=r)}get next(){return Sr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function BG(t){bw=t}function bU(t){return bw.loadJS(t)}function kG(){return bw.recaptchaEnterpriseScript}function IG(){return bw.gapiScript}function FG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class DG{constructor(){this.enterprise=new RG}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class RG{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const LG="recaptcha-enterprise",CU="NO_RECAPTCHA";class UG{constructor(e){this.type=LG,this.auth=Vh(e)}async verify(e="verify",r=!1){async function n(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(i,o)=>{fG(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new dG(l);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,i(u.siteKey)}}).catch(l=>{o(l)})})}function s(a,i,o){const l=window.grecaptcha;Dk(l)?l.enterprise.ready(()=>{l.enterprise.execute(a,{action:e}).then(u=>{i(u)}).catch(()=>{i(CU)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new DG().execute("siteKey",{action:"verify"}):new Promise((a,i)=>{n(this.auth).then(o=>{if(!r&&Dk(window.grecaptcha))s(o,a,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let l=kG();l.length!==0&&(l+=o),bU(l).then(()=>{s(o,a,i)}).catch(u=>{i(u)})}}).catch(o=>{i(o)})})}}async function jk(t,e,r,n=!1,s=!1){const a=new UG(t);let i;if(s)i=CU;else try{i=await a.verify(r)}catch{i=await a.verify(r,!0)}const o={...e};if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function L_(t,e,r,n,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await jk(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await jk(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MG(t,e){const r=yw(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(ff(a,e??{}))return s;Rc(s,"already-initialized")}return r.initialize({options:e})}function PG(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(EA);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function jG(t,e,r){const n=Vh(t);Sr(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,a=EU(e),{host:i,port:o}=OG(e),l=o===null?"":`:${o}`,u={url:`${a}//${i}${l}/`},d=Object.freeze({host:i,port:o,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){Sr(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),Sr(ff(u,n.config.emulator)&&ff(d,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=u,n.emulatorConfig=d,n.settings.appVerificationDisabledForTesting=!0,Hh(i)?(k5(`${a}//${i}${l}`),I5("Auth",!0)):QG()}function EU(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OG(t){const e=EU(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const a=s[1];return{host:a,port:Ok(n.substr(a.length+1))}}else{const[a,i]=n.split(":");return{host:a,port:Ok(i)}}}function Ok(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function QG(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return CA("not implemented")}_getIdTokenResponse(e){return CA("not implemented")}_linkToIdToken(e,r){return CA("not implemented")}_getReauthenticationResolver(e){return CA("not implemented")}}async function HG(t,e){return VA(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VG(t,e){return ww(t,"POST","/v1/accounts:signInWithPassword",Nf(t,e))}async function zG(t,e){return VA(t,"POST","/v1/accounts:sendOobCode",Nf(t,e))}async function GG(t,e){return zG(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qG(t,e){return ww(t,"POST","/v1/accounts:signInWithEmailLink",Nf(t,e))}async function KG(t,e){return ww(t,"POST","/v1/accounts:signInWithEmailLink",Nf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax extends O5{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Ax(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new Ax(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return L_(e,r,"signInWithPassword",VG);case"emailLink":return qG(e,{email:this._email,oobCode:this._password});default:Rc(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return L_(e,n,"signUpPassword",HG);case"emailLink":return KG(e,{idToken:r,email:this._email,oobCode:this._password});default:Rc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mm(t,e){return ww(t,"POST","/v1/accounts:signInWithIdp",Nf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $G="http://localhost";class Bh extends O5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Bh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Rc("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...a}=r;if(!n||!s)return null;const i=new Bh(n,s);return i.idToken=a.idToken||void 0,i.accessToken=a.accessToken||void 0,i.secret=a.secret,i.nonce=a.nonce,i.pendingToken=a.pendingToken||null,i}_getIdTokenResponse(e){const r=this.buildRequest();return mm(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,mm(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,mm(e,r)}buildRequest(){const e={requestUri:$G,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Jx(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WG(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function YG(t){const e=gg(xg(t)).link,r=e?gg(xg(e)).deep_link_id:null,n=gg(xg(t)).deep_link_id;return(n?gg(xg(n)).link:null)||n||r||e||t}class Q5{constructor(e){const r=gg(xg(e)),n=r.apiKey??null,s=r.oobCode??null,a=WG(r.mode??null);Sr(n&&s&&a,"argument-error"),this.apiKey=n,this.operation=a,this.code=s,this.continueUrl=r.continueUrl??null,this.languageCode=r.lang??null,this.tenantId=r.tenantId??null}static parseLink(e){const r=YG(e);try{return new Q5(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.providerId=Zm.PROVIDER_ID}static credential(e,r){return Ax._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Q5.parseLink(r);return Sr(n,"argument-error"),Ax._fromEmailAndCode(e,n.code,n.tenantId)}}Zm.PROVIDER_ID="password";Zm.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zm.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx extends _U{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd extends Zx{constructor(){super("facebook.com")}static credential(e){return Bh._fromParams({providerId:Hd.PROVIDER_ID,signInMethod:Hd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hd.credentialFromTaggedObject(e)}static credentialFromError(e){return Hd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hd.credential(e.oauthAccessToken)}catch{return null}}}Hd.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hd.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends Zx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Bh._fromParams({providerId:Vd.PROVIDER_ID,signInMethod:Vd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Vd.credentialFromTaggedObject(e)}static credentialFromError(e){return Vd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Vd.credential(r,n)}catch{return null}}}Vd.GOOGLE_SIGN_IN_METHOD="google.com";Vd.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd extends Zx{constructor(){super("github.com")}static credential(e){return Bh._fromParams({providerId:zd.PROVIDER_ID,signInMethod:zd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zd.credentialFromTaggedObject(e)}static credentialFromError(e){return zd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zd.credential(e.oauthAccessToken)}catch{return null}}}zd.GITHUB_SIGN_IN_METHOD="github.com";zd.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd extends Zx{constructor(){super("twitter.com")}static credential(e,r){return Bh._fromParams({providerId:Gd.PROVIDER_ID,signInMethod:Gd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Gd.credentialFromTaggedObject(e)}static credentialFromError(e){return Gd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return Gd.credential(r,n)}catch{return null}}}Gd.TWITTER_SIGN_IN_METHOD="twitter.com";Gd.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const a=await Nc._fromIdTokenResponse(e,n,s),i=Qk(n);return new Rm({user:a,providerId:i,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=Qk(n);return new Rm({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function Qk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2 extends Mu{constructor(e,r,n,s){super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,u2.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new u2(e,r,n,s)}}function SU(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?u2._fromErrorAndOperation(t,a,e,n):a})}async function JG(t,e,r=!1){const n=await ux(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Rm._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XG(t,e,r=!1){const{auth:n}=t;if(Ql(n.app))return Promise.reject(nf(n));const s="reauthenticate";try{const a=await ux(t,SU(n,s,e,t),r);Sr(a.idToken,n,"internal-error");const i=P5(a.idToken);Sr(i,n,"internal-error");const{sub:o}=i;return Sr(t.uid===o,n,"user-mismatch"),Rm._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Rc(n,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TU(t,e,r=!1){if(Ql(t.app))return Promise.reject(nf(t));const n="signIn",s=await SU(t,n,e),a=await Rm._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(a.user),a}async function ZG(t,e){return TU(Vh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eq(t){const e=Vh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function tq(t,e,r){const n=Vh(t);await L_(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",GG)}function rq(t,e,r){return Ql(t.app)?Promise.reject(nf(t)):ZG(Es(t),Zm.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&eq(t),n})}function nq(t,e,r,n){return Es(t).onIdTokenChanged(e,r,n)}function sq(t,e,r){return Es(t).beforeAuthStateChanged(e,r)}function NU(t,e,r,n){return Es(t).onAuthStateChanged(e,r,n)}function aq(t){return Es(t).signOut()}const A2="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(A2,"1"),this.storage.removeItem(A2),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iq=1e3,oq=10;class kU extends BU{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yU(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((i,o,l)=>{this.notifyListeners(i,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(n);!r&&this.localCache[n]===i||this.notifyListeners(n,i)},a=this.storage.getItem(n);CG()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,oq):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},iq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}kU.type="LOCAL";const lq=kU;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IU extends BU{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}IU.type="SESSION";const FU=IU;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Cw(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:a}=r.data,i=this.handlersMap[s];if(!(i!=null&&i.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const o=Array.from(i).map(async u=>u(r.origin,a)),l=await cq(o);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,i;return new Promise((o,l)=>{const u=H5("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},n);i={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),o(m.data.response);break;default:clearTimeout(d),clearTimeout(a),l(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(){return window}function Aq(t){Nu().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(){return typeof Nu().WorkerGlobalScope<"u"&&typeof Nu().importScripts=="function"}async function dq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function hq(){return DU()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU="firebaseLocalStorageDb",mq=1,d2="firebaseLocalStorage",LU="fbase_key";class e1{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Ew(t,e){return t.transaction([d2],e?"readwrite":"readonly").objectStore(d2)}function pq(){const t=indexedDB.deleteDatabase(RU);return new e1(t).toPromise()}function U_(){const t=indexedDB.open(RU,mq);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(d2,{keyPath:LU})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(d2)?e(n):(n.close(),await pq(),e(await U_()))})})}async function Hk(t,e,r){const n=Ew(t,!0).put({[LU]:e,value:r});return new e1(n).toPromise()}async function gq(t,e){const r=Ew(t,!1).get(e),n=await new e1(r).toPromise();return n===void 0?null:n.value}function Vk(t,e){const r=Ew(t,!0).delete(e);return new e1(r).toPromise()}const xq=800,vq=3;class UU{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await U_(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>vq)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DU()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cw._getInstance(hq()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await dq(),!this.activeServiceWorker)return;this.sender=new uq(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await U_();return await Hk(e,A2,"1"),await Vk(e,A2),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hk(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>gq(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vk(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Ew(s,!1).getAll();return new e1(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}UU.type="LOCAL";const yq=UU;new Xx(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wq(t,e){return e?EA(e):(Sr(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5 extends O5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mm(e,this._buildIdpRequest())}_linkToIdToken(e,r){return mm(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return mm(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function bq(t){return TU(t.auth,new V5(t),t.bypassAuthState)}function Cq(t){const{auth:e,user:r}=t;return Sr(r,e,"internal-error"),XG(r,new V5(t),t.bypassAuthState)}async function Eq(t){const{auth:e,user:r}=t;return Sr(r,e,"internal-error"),JG(r,new V5(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MU{constructor(e,r,n,s,a=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:a,error:i,type:o}=e;if(i){this.reject(i);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bq;case"linkViaPopup":case"linkViaRedirect":return Eq;case"reauthViaPopup":case"reauthViaRedirect":return Cq;default:Rc(this.auth,"internal-error")}}resolve(e){LA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){LA(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _q=new Xx(2e3,1e4);class om extends MU{constructor(e,r,n,s,a){super(e,r,s,a),this.provider=n,this.authWindow=null,this.pollId=null,om.currentPopupAction&&om.currentPopupAction.cancel(),om.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Sr(e,this.auth,"internal-error"),e}async onExecution(){LA(this.filter.length===1,"Popup operations only handle one event");const e=H5();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Tu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Tu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,om.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_q.get())};e()}}om.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq="pendingRedirect",Ly=new Map;class Tq extends MU{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Ly.get(this.auth._key());if(!e){try{const n=await Nq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Ly.set(this.auth._key(),e)}return this.bypassAuthState||Ly.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Nq(t,e){const r=Iq(e),n=kq(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function Bq(t,e){Ly.set(t._key(),e)}function kq(t){return EA(t._redirectPersistence)}function Iq(t){return Ry(Sq,t.config.apiKey,t.name)}async function Fq(t,e,r=!1){if(Ql(t.app))return Promise.reject(nf(t));const n=Vh(t),s=wq(n,e),i=await new Tq(n,s,r).execute();return i&&!r&&(delete i.user._redirectEventId,await n._persistUserIfCurrent(i.user),await n._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dq=600*1e3;class Rq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Lq(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!PU(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Tu(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Dq&&this.cachedEventUids.clear(),this.cachedEventUids.has(zk(e))}saveEventToCache(e){this.cachedEventUids.add(zk(e)),this.lastProcessedEventTime=Date.now()}}function zk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PU({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Lq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PU(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uq(t,e={}){return VA(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pq=/^https?/;async function jq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Uq(t);for(const r of e)try{if(Oq(r))return}catch{}Rc(t,"unauthorized-domain")}function Oq(t){const e=D_(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&i.hostname===n}if(!Pq.test(r))return!1;if(Mq.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq=new Xx(3e4,6e4);function Gk(){const t=Nu().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function Hq(t){return new Promise((e,r)=>{var s,a,i;function n(){Gk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gk(),r(Tu(t,"network-request-failed"))},timeout:Qq.get()})}if((a=(s=Nu().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((i=Nu().gapi)!=null&&i.load)n();else{const o=FG("iframefcb");return Nu()[o]=()=>{gapi.load?n():r(Tu(t,"network-request-failed"))},bU(`${IG()}?onload=${o}`).catch(l=>r(l))}}).catch(e=>{throw Uy=null,e})}let Uy=null;function Vq(t){return Uy=Uy||Hq(t),Uy}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq=new Xx(5e3,15e3),Gq="__/auth/iframe",qq="emulator/auth/iframe",Kq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$q=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Wq(t){const e=t.config;Sr(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?M5(e,qq):`https://${t.config.authDomain}/${Gq}`,n={apiKey:e.apiKey,appName:t.name,v:Xm},s=$q.get(t.config.apiHost);s&&(n.eid=s);const a=t._getFrameworks();return a.length&&(n.fw=a.join(",")),`${r}?${Jx(n).slice(1)}`}async function Yq(t){const e=await Vq(t),r=Nu().gapi;return Sr(r,t,"internal-error"),e.open({where:document.body,url:Wq(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Kq,dontclear:!0},n=>new Promise(async(s,a)=>{await n.restyle({setHideOnLeave:!1});const i=Tu(t,"network-request-failed"),o=Nu().setTimeout(()=>{a(i)},zq.get());function l(){Nu().clearTimeout(o),s(n)}n.ping(l).then(l,()=>{a(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xq=500,Zq=600,eK="_blank",tK="http://localhost";class qk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rK(t,e,r,n=Xq,s=Zq){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const l={...Jq,width:n.toString(),height:s.toString(),top:a,left:i},u=Ki().toLowerCase();r&&(o=mU(u)?eK:r),fU(u)&&(e=e||tK,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[g,b])=>`${m}${g}=${b},`,"");if(bG(u)&&o!=="_self")return nK(e||"",o),new qk(null);const h=window.open(e||"",o,d);Sr(h,t,"popup-blocked");try{h.focus()}catch{}return new qk(h)}function nK(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sK="__/auth/handler",aK="emulator/auth/handler",iK=encodeURIComponent("fac");async function Kk(t,e,r,n,s,a){Sr(t.config.authDomain,t,"auth-domain-config-required"),Sr(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Xm,eventId:s};if(e instanceof _U){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",zV(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))i[d]=h}if(e instanceof Zx){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(i.scopes=d.join(","))}t.tenantId&&(i.tid=t.tenantId);const o=i;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const l=await t._getAppCheckToken(),u=l?`#${iK}=${encodeURIComponent(l)}`:"";return`${oK(t)}?${Jx(o).slice(1)}${u}`}function oK({config:t}){return t.emulator?M5(t,aK):`https://${t.authDomain}/${sK}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="webStorageSupport";class lK{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=FU,this._completeRedirectFn=Fq,this._overrideRedirectResult=Bq}async _openPopup(e,r,n,s){var i;LA((i=this.eventManagers[e._key()])==null?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Kk(e,r,n,D_(),s);return rK(e,a,H5())}async _openRedirect(e,r,n,s){await this._originValidation(e);const a=await Kk(e,r,n,D_(),s);return Aq(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(LA(a,"If manager is not set, promise should be"),a)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await Yq(e),n=new Rq(e);return r.register("authEvent",s=>(Sr(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(tE,{type:tE},s=>{var i;const a=(i=s==null?void 0:s[0])==null?void 0:i[tE];a!==void 0&&r(!!a),Rc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=jq(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return yU()||hU()||j5()}}const cK=lK;var $k="@firebase/auth",Wk="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Sr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AK(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dK(t){Nh(new hf("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:i,authDomain:o}=n.options;Sr(i&&!i.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wU(t)},u=new NG(n,s,a,l);return PG(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),Nh(new hf("auth-internal",e=>{const r=Vh(e.getProvider("auth").getImmediate());return(n=>new uK(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Su($k,Wk,AK(t)),Su($k,Wk,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fK=300,hK=eU("authIdTokenMaxAge")||fK;let Yk=null;const mK=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>hK)return;const s=r==null?void 0:r.token;Yk!==s&&(Yk=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function jU(t=L5()){const e=yw(t,"auth");if(e.isInitialized())return e.getImmediate();const r=MG(t,{popupRedirectResolver:cK,persistence:[yq,lq,FU]}),n=eU("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(n,location.origin);if(location.origin===a.origin){const i=mK(a.toString());sq(r,i,()=>i(r.currentUser)),nq(r,o=>i(o))}}const s=JL("auth");return s&&jG(r,`http://${s}`),r}function pK(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}BG({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const a=Tu("internal-error");a.customData=s,r(a)},n.type="text/javascript",n.charset="UTF-8",pK().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dK("Browser");var gK="firebase",xK="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Su(gK,xK,"app");var Jk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sf,OU;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function B(){}B.prototype=E.prototype,C.D=E.prototype,C.prototype=new B,C.prototype.constructor=C,C.C=function(O,R,F){for(var Q=Array(arguments.length-2),H=2;H<arguments.length;H++)Q[H-2]=arguments[H];return E.prototype[R].apply(O,Q)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,E,B){B||(B=0);var O=Array(16);if(typeof E=="string")for(var R=0;16>R;++R)O[R]=E.charCodeAt(B++)|E.charCodeAt(B++)<<8|E.charCodeAt(B++)<<16|E.charCodeAt(B++)<<24;else for(R=0;16>R;++R)O[R]=E[B++]|E[B++]<<8|E[B++]<<16|E[B++]<<24;E=C.g[0],B=C.g[1],R=C.g[2];var F=C.g[3],Q=E+(F^B&(R^F))+O[0]+3614090360&4294967295;E=B+(Q<<7&4294967295|Q>>>25),Q=F+(R^E&(B^R))+O[1]+3905402710&4294967295,F=E+(Q<<12&4294967295|Q>>>20),Q=R+(B^F&(E^B))+O[2]+606105819&4294967295,R=F+(Q<<17&4294967295|Q>>>15),Q=B+(E^R&(F^E))+O[3]+3250441966&4294967295,B=R+(Q<<22&4294967295|Q>>>10),Q=E+(F^B&(R^F))+O[4]+4118548399&4294967295,E=B+(Q<<7&4294967295|Q>>>25),Q=F+(R^E&(B^R))+O[5]+1200080426&4294967295,F=E+(Q<<12&4294967295|Q>>>20),Q=R+(B^F&(E^B))+O[6]+2821735955&4294967295,R=F+(Q<<17&4294967295|Q>>>15),Q=B+(E^R&(F^E))+O[7]+4249261313&4294967295,B=R+(Q<<22&4294967295|Q>>>10),Q=E+(F^B&(R^F))+O[8]+1770035416&4294967295,E=B+(Q<<7&4294967295|Q>>>25),Q=F+(R^E&(B^R))+O[9]+2336552879&4294967295,F=E+(Q<<12&4294967295|Q>>>20),Q=R+(B^F&(E^B))+O[10]+4294925233&4294967295,R=F+(Q<<17&4294967295|Q>>>15),Q=B+(E^R&(F^E))+O[11]+2304563134&4294967295,B=R+(Q<<22&4294967295|Q>>>10),Q=E+(F^B&(R^F))+O[12]+1804603682&4294967295,E=B+(Q<<7&4294967295|Q>>>25),Q=F+(R^E&(B^R))+O[13]+4254626195&4294967295,F=E+(Q<<12&4294967295|Q>>>20),Q=R+(B^F&(E^B))+O[14]+2792965006&4294967295,R=F+(Q<<17&4294967295|Q>>>15),Q=B+(E^R&(F^E))+O[15]+1236535329&4294967295,B=R+(Q<<22&4294967295|Q>>>10),Q=E+(R^F&(B^R))+O[1]+4129170786&4294967295,E=B+(Q<<5&4294967295|Q>>>27),Q=F+(B^R&(E^B))+O[6]+3225465664&4294967295,F=E+(Q<<9&4294967295|Q>>>23),Q=R+(E^B&(F^E))+O[11]+643717713&4294967295,R=F+(Q<<14&4294967295|Q>>>18),Q=B+(F^E&(R^F))+O[0]+3921069994&4294967295,B=R+(Q<<20&4294967295|Q>>>12),Q=E+(R^F&(B^R))+O[5]+3593408605&4294967295,E=B+(Q<<5&4294967295|Q>>>27),Q=F+(B^R&(E^B))+O[10]+38016083&4294967295,F=E+(Q<<9&4294967295|Q>>>23),Q=R+(E^B&(F^E))+O[15]+3634488961&4294967295,R=F+(Q<<14&4294967295|Q>>>18),Q=B+(F^E&(R^F))+O[4]+3889429448&4294967295,B=R+(Q<<20&4294967295|Q>>>12),Q=E+(R^F&(B^R))+O[9]+568446438&4294967295,E=B+(Q<<5&4294967295|Q>>>27),Q=F+(B^R&(E^B))+O[14]+3275163606&4294967295,F=E+(Q<<9&4294967295|Q>>>23),Q=R+(E^B&(F^E))+O[3]+4107603335&4294967295,R=F+(Q<<14&4294967295|Q>>>18),Q=B+(F^E&(R^F))+O[8]+1163531501&4294967295,B=R+(Q<<20&4294967295|Q>>>12),Q=E+(R^F&(B^R))+O[13]+2850285829&4294967295,E=B+(Q<<5&4294967295|Q>>>27),Q=F+(B^R&(E^B))+O[2]+4243563512&4294967295,F=E+(Q<<9&4294967295|Q>>>23),Q=R+(E^B&(F^E))+O[7]+1735328473&4294967295,R=F+(Q<<14&4294967295|Q>>>18),Q=B+(F^E&(R^F))+O[12]+2368359562&4294967295,B=R+(Q<<20&4294967295|Q>>>12),Q=E+(B^R^F)+O[5]+4294588738&4294967295,E=B+(Q<<4&4294967295|Q>>>28),Q=F+(E^B^R)+O[8]+2272392833&4294967295,F=E+(Q<<11&4294967295|Q>>>21),Q=R+(F^E^B)+O[11]+1839030562&4294967295,R=F+(Q<<16&4294967295|Q>>>16),Q=B+(R^F^E)+O[14]+4259657740&4294967295,B=R+(Q<<23&4294967295|Q>>>9),Q=E+(B^R^F)+O[1]+2763975236&4294967295,E=B+(Q<<4&4294967295|Q>>>28),Q=F+(E^B^R)+O[4]+1272893353&4294967295,F=E+(Q<<11&4294967295|Q>>>21),Q=R+(F^E^B)+O[7]+4139469664&4294967295,R=F+(Q<<16&4294967295|Q>>>16),Q=B+(R^F^E)+O[10]+3200236656&4294967295,B=R+(Q<<23&4294967295|Q>>>9),Q=E+(B^R^F)+O[13]+681279174&4294967295,E=B+(Q<<4&4294967295|Q>>>28),Q=F+(E^B^R)+O[0]+3936430074&4294967295,F=E+(Q<<11&4294967295|Q>>>21),Q=R+(F^E^B)+O[3]+3572445317&4294967295,R=F+(Q<<16&4294967295|Q>>>16),Q=B+(R^F^E)+O[6]+76029189&4294967295,B=R+(Q<<23&4294967295|Q>>>9),Q=E+(B^R^F)+O[9]+3654602809&4294967295,E=B+(Q<<4&4294967295|Q>>>28),Q=F+(E^B^R)+O[12]+3873151461&4294967295,F=E+(Q<<11&4294967295|Q>>>21),Q=R+(F^E^B)+O[15]+530742520&4294967295,R=F+(Q<<16&4294967295|Q>>>16),Q=B+(R^F^E)+O[2]+3299628645&4294967295,B=R+(Q<<23&4294967295|Q>>>9),Q=E+(R^(B|~F))+O[0]+4096336452&4294967295,E=B+(Q<<6&4294967295|Q>>>26),Q=F+(B^(E|~R))+O[7]+1126891415&4294967295,F=E+(Q<<10&4294967295|Q>>>22),Q=R+(E^(F|~B))+O[14]+2878612391&4294967295,R=F+(Q<<15&4294967295|Q>>>17),Q=B+(F^(R|~E))+O[5]+4237533241&4294967295,B=R+(Q<<21&4294967295|Q>>>11),Q=E+(R^(B|~F))+O[12]+1700485571&4294967295,E=B+(Q<<6&4294967295|Q>>>26),Q=F+(B^(E|~R))+O[3]+2399980690&4294967295,F=E+(Q<<10&4294967295|Q>>>22),Q=R+(E^(F|~B))+O[10]+4293915773&4294967295,R=F+(Q<<15&4294967295|Q>>>17),Q=B+(F^(R|~E))+O[1]+2240044497&4294967295,B=R+(Q<<21&4294967295|Q>>>11),Q=E+(R^(B|~F))+O[8]+1873313359&4294967295,E=B+(Q<<6&4294967295|Q>>>26),Q=F+(B^(E|~R))+O[15]+4264355552&4294967295,F=E+(Q<<10&4294967295|Q>>>22),Q=R+(E^(F|~B))+O[6]+2734768916&4294967295,R=F+(Q<<15&4294967295|Q>>>17),Q=B+(F^(R|~E))+O[13]+1309151649&4294967295,B=R+(Q<<21&4294967295|Q>>>11),Q=E+(R^(B|~F))+O[4]+4149444226&4294967295,E=B+(Q<<6&4294967295|Q>>>26),Q=F+(B^(E|~R))+O[11]+3174756917&4294967295,F=E+(Q<<10&4294967295|Q>>>22),Q=R+(E^(F|~B))+O[2]+718787259&4294967295,R=F+(Q<<15&4294967295|Q>>>17),Q=B+(F^(R|~E))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(R+(Q<<21&4294967295|Q>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+F&4294967295}n.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var B=E-this.blockSize,O=this.B,R=this.h,F=0;F<E;){if(R==0)for(;F<=B;)s(this,C,F),F+=this.blockSize;if(typeof C=="string"){for(;F<E;)if(O[R++]=C.charCodeAt(F++),R==this.blockSize){s(this,O),R=0;break}}else for(;F<E;)if(O[R++]=C[F++],R==this.blockSize){s(this,O),R=0;break}}this.h=R,this.o+=E},n.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var B=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=B&255,B/=256;for(this.u(C),C=Array(16),E=B=0;4>E;++E)for(var O=0;32>O;O+=8)C[B++]=this.g[E]>>>O&255;return C};function a(C,E){var B=o;return Object.prototype.hasOwnProperty.call(B,C)?B[C]:B[C]=E(C)}function i(C,E){this.h=E;for(var B=[],O=!0,R=C.length-1;0<=R;R--){var F=C[R]|0;O&&F==E||(B[R]=F,O=!1)}this.g=B}var o={};function l(C){return-128<=C&&128>C?a(C,function(E){return new i([E|0],0>E?-1:0)}):new i([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return _(u(-C));for(var E=[],B=1,O=0;C>=B;O++)E[O]=C/B|0,B*=4294967296;return new i(E,0)}function d(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return _(d(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var B=u(Math.pow(E,8)),O=h,R=0;R<C.length;R+=8){var F=Math.min(8,C.length-R),Q=parseInt(C.substring(R,R+F),E);8>F?(F=u(Math.pow(E,F)),O=O.j(F).add(u(Q))):(O=O.j(B),O=O.add(u(Q)))}return O}var h=l(0),m=l(1),g=l(16777216);t=i.prototype,t.m=function(){if(y(this))return-_(this).m();for(var C=0,E=1,B=0;B<this.g.length;B++){var O=this.i(B);C+=(0<=O?O:4294967296+O)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(y(this))return"-"+_(this).toString(C);for(var E=u(Math.pow(C,6)),B=this,O="";;){var R=M(B,E).g;B=T(B,R.j(E));var F=((0<B.g.length?B.g[0]:B.h)>>>0).toString(C);if(B=R,b(B))return F+O;for(;6>F.length;)F="0"+F;O=F+O}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function y(C){return C.h==-1}t.l=function(C){return C=T(this,C),y(C)?-1:b(C)?0:1};function _(C){for(var E=C.g.length,B=[],O=0;O<E;O++)B[O]=~C.g[O];return new i(B,~C.h).add(m)}t.abs=function(){return y(this)?_(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),B=[],O=0,R=0;R<=E;R++){var F=O+(this.i(R)&65535)+(C.i(R)&65535),Q=(F>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);O=Q>>>16,F&=65535,Q&=65535,B[R]=Q<<16|F}return new i(B,B[B.length-1]&-2147483648?-1:0)};function T(C,E){return C.add(_(E))}t.j=function(C){if(b(this)||b(C))return h;if(y(this))return y(C)?_(this).j(_(C)):_(_(this).j(C));if(y(C))return _(this.j(_(C)));if(0>this.l(g)&&0>C.l(g))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,B=[],O=0;O<2*E;O++)B[O]=0;for(O=0;O<this.g.length;O++)for(var R=0;R<C.g.length;R++){var F=this.i(O)>>>16,Q=this.i(O)&65535,H=C.i(R)>>>16,ne=C.i(R)&65535;B[2*O+2*R]+=Q*ne,k(B,2*O+2*R),B[2*O+2*R+1]+=F*ne,k(B,2*O+2*R+1),B[2*O+2*R+1]+=Q*H,k(B,2*O+2*R+1),B[2*O+2*R+2]+=F*H,k(B,2*O+2*R+2)}for(O=0;O<E;O++)B[O]=B[2*O+1]<<16|B[2*O];for(O=E;O<2*E;O++)B[O]=0;return new i(B,0)};function k(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function D(C,E){this.g=C,this.h=E}function M(C,E){if(b(E))throw Error("division by zero");if(b(C))return new D(h,h);if(y(C))return E=M(_(C),E),new D(_(E.g),_(E.h));if(y(E))return E=M(C,_(E)),new D(_(E.g),E.h);if(30<C.g.length){if(y(C)||y(E))throw Error("slowDivide_ only works with positive integers.");for(var B=m,O=E;0>=O.l(C);)B=P(B),O=P(O);var R=L(B,1),F=L(O,1);for(O=L(O,2),B=L(B,2);!b(O);){var Q=F.add(O);0>=Q.l(C)&&(R=R.add(B),F=Q),O=L(O,1),B=L(B,1)}return E=T(C,R.j(E)),new D(R,E)}for(R=h;0<=C.l(E);){for(B=Math.max(1,Math.floor(C.m()/E.m())),O=Math.ceil(Math.log(B)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),F=u(B),Q=F.j(E);y(Q)||0<Q.l(C);)B-=O,F=u(B),Q=F.j(E);b(F)&&(F=m),R=R.add(F),C=T(C,Q)}return new D(R,C)}t.A=function(C){return M(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),B=[],O=0;O<E;O++)B[O]=this.i(O)&C.i(O);return new i(B,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),B=[],O=0;O<E;O++)B[O]=this.i(O)|C.i(O);return new i(B,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),B=[],O=0;O<E;O++)B[O]=this.i(O)^C.i(O);return new i(B,this.h^C.h)};function P(C){for(var E=C.g.length+1,B=[],O=0;O<E;O++)B[O]=C.i(O)<<1|C.i(O-1)>>>31;return new i(B,C.h)}function L(C,E){var B=E>>5;E%=32;for(var O=C.g.length-B,R=[],F=0;F<O;F++)R[F]=0<E?C.i(F+B)>>>E|C.i(F+B+1)<<32-E:C.i(F+B);return new i(R,C.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,OU=n,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=d,sf=i}).apply(typeof Jk<"u"?Jk:typeof self<"u"?self:typeof window<"u"?window:{});var Bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var QU,vg,HU,My,M_,VU,zU,GU;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(N,X,ae){return N==Array.prototype||N==Object.prototype||(N[X]=ae.value),N};function r(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bv=="object"&&Bv];for(var X=0;X<N.length;++X){var ae=N[X];if(ae&&ae.Math==Math)return ae}throw Error("Cannot find global object")}var n=r(this);function s(N,X){if(X)e:{var ae=n;N=N.split(".");for(var ye=0;ye<N.length-1;ye++){var He=N[ye];if(!(He in ae))break e;ae=ae[He]}N=N[N.length-1],ye=ae[N],X=X(ye),X!=ye&&X!=null&&e(ae,N,{configurable:!0,writable:!0,value:X})}}function a(N,X){N instanceof String&&(N+="");var ae=0,ye=!1,He={next:function(){if(!ye&&ae<N.length){var et=ae++;return{value:X(et,N[et]),done:!1}}return ye=!0,{done:!0,value:void 0}}};return He[Symbol.iterator]=function(){return He},He}s("Array.prototype.values",function(N){return N||function(){return a(this,function(X,ae){return ae})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(N){var X=typeof N;return X=X!="object"?X:N?Array.isArray(N)?"array":X:"null",X=="array"||X=="object"&&typeof N.length=="number"}function u(N){var X=typeof N;return X=="object"&&N!=null||X=="function"}function d(N,X,ae){return N.call.apply(N.bind,arguments)}function h(N,X,ae){if(!N)throw Error();if(2<arguments.length){var ye=Array.prototype.slice.call(arguments,2);return function(){var He=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(He,ye),N.apply(X,He)}}return function(){return N.apply(X,arguments)}}function m(N,X,ae){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(N,X){var ae=Array.prototype.slice.call(arguments,1);return function(){var ye=ae.slice();return ye.push.apply(ye,arguments),N.apply(this,ye)}}function b(N,X){function ae(){}ae.prototype=X.prototype,N.aa=X.prototype,N.prototype=new ae,N.prototype.constructor=N,N.Qb=function(ye,He,et){for(var Tt=Array(arguments.length-2),gr=2;gr<arguments.length;gr++)Tt[gr-2]=arguments[gr];return X.prototype[He].apply(ye,Tt)}}function y(N){const X=N.length;if(0<X){const ae=Array(X);for(let ye=0;ye<X;ye++)ae[ye]=N[ye];return ae}return[]}function _(N,X){for(let ae=1;ae<arguments.length;ae++){const ye=arguments[ae];if(l(ye)){const He=N.length||0,et=ye.length||0;N.length=He+et;for(let Tt=0;Tt<et;Tt++)N[He+Tt]=ye[Tt]}else N.push(ye)}}class T{constructor(X,ae){this.i=X,this.j=ae,this.h=0,this.g=null}get(){let X;return 0<this.h?(this.h--,X=this.g,this.g=X.next,X.next=null):X=this.i(),X}}function k(N){return/^[\s\xa0]*$/.test(N)}function D(){var N=o.navigator;return N&&(N=N.userAgent)?N:""}function M(N){return M[" "](N),N}M[" "]=function(){};var P=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function L(N,X,ae){for(const ye in N)X.call(ae,N[ye],ye,N)}function C(N,X){for(const ae in N)X.call(void 0,N[ae],ae,N)}function E(N){const X={};for(const ae in N)X[ae]=N[ae];return X}const B="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(N,X){let ae,ye;for(let He=1;He<arguments.length;He++){ye=arguments[He];for(ae in ye)N[ae]=ye[ae];for(let et=0;et<B.length;et++)ae=B[et],Object.prototype.hasOwnProperty.call(ye,ae)&&(N[ae]=ye[ae])}}function R(N){var X=1;N=N.split(":");const ae=[];for(;0<X&&N.length;)ae.push(N.shift()),X--;return N.length&&ae.push(N.join(":")),ae}function F(N){o.setTimeout(()=>{throw N},0)}function Q(){var N=q;let X=null;return N.g&&(X=N.g,N.g=N.g.next,N.g||(N.h=null),X.next=null),X}class H{constructor(){this.h=this.g=null}add(X,ae){const ye=ne.get();ye.set(X,ae),this.h?this.h.next=ye:this.g=ye,this.h=ye}}var ne=new T(()=>new J,N=>N.reset());class J{constructor(){this.next=this.g=this.h=null}set(X,ae){this.h=X,this.g=ae,this.next=null}reset(){this.next=this.g=this.h=null}}let re,G=!1,q=new H,W=()=>{const N=o.Promise.resolve(void 0);re=()=>{N.then(ie)}};var ie=()=>{for(var N;N=Q();){try{N.h.call(N.g)}catch(ae){F(ae)}var X=ne;X.j(N),100>X.h&&(X.h++,N.next=X.g,X.g=N)}G=!1};function j(){this.s=this.s,this.C=this.C}j.prototype.s=!1,j.prototype.ma=function(){this.s||(this.s=!0,this.N())},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Y(N,X){this.type=N,this.g=this.target=X,this.defaultPrevented=!1}Y.prototype.h=function(){this.defaultPrevented=!0};var ee=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var N=!1,X=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const ae=()=>{};o.addEventListener("test",ae,X),o.removeEventListener("test",ae,X)}catch{}return N}();function te(N,X){if(Y.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N){var ae=this.type=N.type,ye=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;if(this.target=N.target||N.srcElement,this.g=X,X=N.relatedTarget){if(P){e:{try{M(X.nodeName);var He=!0;break e}catch{}He=!1}He||(X=null)}}else ae=="mouseover"?X=N.fromElement:ae=="mouseout"&&(X=N.toElement);this.relatedTarget=X,ye?(this.clientX=ye.clientX!==void 0?ye.clientX:ye.pageX,this.clientY=ye.clientY!==void 0?ye.clientY:ye.pageY,this.screenX=ye.screenX||0,this.screenY=ye.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=typeof N.pointerType=="string"?N.pointerType:ce[N.pointerType]||"",this.state=N.state,this.i=N,N.defaultPrevented&&te.aa.h.call(this)}}b(te,Y);var ce={2:"touch",3:"pen",4:"mouse"};te.prototype.h=function(){te.aa.h.call(this);var N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var be="closure_listenable_"+(1e6*Math.random()|0),he=0;function fe(N,X,ae,ye,He){this.listener=N,this.proxy=null,this.src=X,this.type=ae,this.capture=!!ye,this.ha=He,this.key=++he,this.da=this.fa=!1}function ge(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function de(N){this.src=N,this.g={},this.h=0}de.prototype.add=function(N,X,ae,ye,He){var et=N.toString();N=this.g[et],N||(N=this.g[et]=[],this.h++);var Tt=Ue(N,X,ye,He);return-1<Tt?(X=N[Tt],ae||(X.fa=!1)):(X=new fe(X,this.src,et,!!ye,He),X.fa=ae,N.push(X)),X};function oe(N,X){var ae=X.type;if(ae in N.g){var ye=N.g[ae],He=Array.prototype.indexOf.call(ye,X,void 0),et;(et=0<=He)&&Array.prototype.splice.call(ye,He,1),et&&(ge(X),N.g[ae].length==0&&(delete N.g[ae],N.h--))}}function Ue(N,X,ae,ye){for(var He=0;He<N.length;++He){var et=N[He];if(!et.da&&et.listener==X&&et.capture==!!ae&&et.ha==ye)return He}return-1}var tt="closure_lm_"+(1e6*Math.random()|0),Fe={};function Ee(N,X,ae,ye,He){if(Array.isArray(X)){for(var et=0;et<X.length;et++)Ee(N,X[et],ae,ye,He);return null}return ae=Jt(ae),N&&N[be]?N.K(X,ae,u(ye)?!!ye.capture:!1,He):De(N,X,ae,!1,ye,He)}function De(N,X,ae,ye,He,et){if(!X)throw Error("Invalid event type");var Tt=u(He)?!!He.capture:!!He,gr=Dt(N);if(gr||(N[tt]=gr=new de(N)),ae=gr.add(X,ae,ye,Tt,et),ae.proxy)return ae;if(ye=Qe(),ae.proxy=ye,ye.src=N,ye.listener=ae,N.addEventListener)ee||(He=Tt),He===void 0&&(He=!1),N.addEventListener(X.toString(),ye,He);else if(N.attachEvent)N.attachEvent(Et(X.toString()),ye);else if(N.addListener&&N.removeListener)N.addListener(ye);else throw Error("addEventListener and attachEvent are unavailable.");return ae}function Qe(){function N(ae){return X.call(N.src,N.listener,ae)}const X=lt;return N}function $e(N,X,ae,ye,He){if(Array.isArray(X))for(var et=0;et<X.length;et++)$e(N,X[et],ae,ye,He);else ye=u(ye)?!!ye.capture:!!ye,ae=Jt(ae),N&&N[be]?(N=N.i,X=String(X).toString(),X in N.g&&(et=N.g[X],ae=Ue(et,ae,ye,He),-1<ae&&(ge(et[ae]),Array.prototype.splice.call(et,ae,1),et.length==0&&(delete N.g[X],N.h--)))):N&&(N=Dt(N))&&(X=N.g[X.toString()],N=-1,X&&(N=Ue(X,ae,ye,He)),(ae=-1<N?X[N]:null)&&ut(ae))}function ut(N){if(typeof N!="number"&&N&&!N.da){var X=N.src;if(X&&X[be])oe(X.i,N);else{var ae=N.type,ye=N.proxy;X.removeEventListener?X.removeEventListener(ae,ye,N.capture):X.detachEvent?X.detachEvent(Et(ae),ye):X.addListener&&X.removeListener&&X.removeListener(ye),(ae=Dt(X))?(oe(ae,N),ae.h==0&&(ae.src=null,X[tt]=null)):ge(N)}}}function Et(N){return N in Fe?Fe[N]:Fe[N]="on"+N}function lt(N,X){if(N.da)N=!0;else{X=new te(X,this);var ae=N.listener,ye=N.ha||N.src;N.fa&&ut(N),N=ae.call(ye,X)}return N}function Dt(N){return N=N[tt],N instanceof de?N:null}var zt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jt(N){return typeof N=="function"?N:(N[zt]||(N[zt]=function(X){return N.handleEvent(X)}),N[zt])}function Rt(){j.call(this),this.i=new de(this),this.M=this,this.F=null}b(Rt,j),Rt.prototype[be]=!0,Rt.prototype.removeEventListener=function(N,X,ae,ye){$e(this,N,X,ae,ye)};function Ot(N,X){var ae,ye=N.F;if(ye)for(ae=[];ye;ye=ye.F)ae.push(ye);if(N=N.M,ye=X.type||X,typeof X=="string")X=new Y(X,N);else if(X instanceof Y)X.target=X.target||N;else{var He=X;X=new Y(ye,N),O(X,He)}if(He=!0,ae)for(var et=ae.length-1;0<=et;et--){var Tt=X.g=ae[et];He=qt(Tt,ye,!0,X)&&He}if(Tt=X.g=N,He=qt(Tt,ye,!0,X)&&He,He=qt(Tt,ye,!1,X)&&He,ae)for(et=0;et<ae.length;et++)Tt=X.g=ae[et],He=qt(Tt,ye,!1,X)&&He}Rt.prototype.N=function(){if(Rt.aa.N.call(this),this.i){var N=this.i,X;for(X in N.g){for(var ae=N.g[X],ye=0;ye<ae.length;ye++)ge(ae[ye]);delete N.g[X],N.h--}}this.F=null},Rt.prototype.K=function(N,X,ae,ye){return this.i.add(String(N),X,!1,ae,ye)},Rt.prototype.L=function(N,X,ae,ye){return this.i.add(String(N),X,!0,ae,ye)};function qt(N,X,ae,ye){if(X=N.i.g[String(X)],!X)return!0;X=X.concat();for(var He=!0,et=0;et<X.length;++et){var Tt=X[et];if(Tt&&!Tt.da&&Tt.capture==ae){var gr=Tt.listener,tn=Tt.ha||Tt.src;Tt.fa&&oe(N.i,Tt),He=gr.call(tn,ye)!==!1&&He}}return He&&!ye.defaultPrevented}function It(N,X,ae){if(typeof N=="function")ae&&(N=m(N,ae));else if(N&&typeof N.handleEvent=="function")N=m(N.handleEvent,N);else throw Error("Invalid listener argument");return 2147483647<Number(X)?-1:o.setTimeout(N,X||0)}function Ft(N){N.g=It(()=>{N.g=null,N.i&&(N.i=!1,Ft(N))},N.l);const X=N.h;N.h=null,N.m.apply(null,X)}class pt extends j{constructor(X,ae){super(),this.m=X,this.l=ae,this.h=null,this.i=!1,this.g=null}j(X){this.h=arguments,this.g?this.i=!0:Ft(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(N){j.call(this),this.h=N,this.g={}}b(br,j);var Zt=[];function hn(N){L(N.g,function(X,ae){this.g.hasOwnProperty(ae)&&ut(X)},N),N.g={}}br.prototype.N=function(){br.aa.N.call(this),hn(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vr=o.JSON.stringify,Ur=o.JSON.parse,Dn=class{stringify(N){return o.JSON.stringify(N,void 0)}parse(N){return o.JSON.parse(N,void 0)}};function Fr(){}Fr.prototype.h=null;function da(N){return N.h||(N.h=N.i())}function an(){}var ns={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gs(){Y.call(this,"d")}b(gs,Y);function jr(){Y.call(this,"c")}b(jr,Y);var nr={},Gr=null;function fa(){return Gr=Gr||new Rt}nr.La="serverreachability";function Wn(N){Y.call(this,nr.La,N)}b(Wn,Y);function _s(N){const X=fa();Ot(X,new Wn(X))}nr.STAT_EVENT="statevent";function Ba(N,X){Y.call(this,nr.STAT_EVENT,N),this.stat=X}b(Ba,Y);function Gt(N){const X=fa();Ot(X,new Ba(X,N))}nr.Ma="timingevent";function mn(N,X){Y.call(this,nr.Ma,N),this.size=X}b(mn,Y);function on(N,X){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){N()},X)}function Rn(){this.g=!0}Rn.prototype.xa=function(){this.g=!1};function jn(N,X,ae,ye,He,et){N.info(function(){if(N.g)if(et)for(var Tt="",gr=et.split("&"),tn=0;tn<gr.length;tn++){var kr=gr[tn].split("=");if(1<kr.length){var Tn=kr[0];kr=kr[1];var Ln=Tn.split("_");Tt=2<=Ln.length&&Ln[1]=="type"?Tt+(Tn+"="+kr+"&"):Tt+(Tn+"=redacted&")}}else Tt=null;else Tt=et;return"XMLHTTP REQ ("+ye+") [attempt "+He+"]: "+X+`
`+ae+`
`+Tt})}function Yn(N,X,ae,ye,He,et,Tt){N.info(function(){return"XMLHTTP RESP ("+ye+") [ attempt "+He+"]: "+X+`
`+ae+`
`+et+" "+Tt})}function me(N,X,ae,ye){N.info(function(){return"XMLHTTP TEXT ("+X+"): "+_e(N,ae)+(ye?" "+ye:"")})}function Be(N,X){N.info(function(){return"TIMEOUT: "+X})}Rn.prototype.info=function(){};function _e(N,X){if(!N.g)return X;if(!X)return null;try{var ae=JSON.parse(X);if(ae){for(N=0;N<ae.length;N++)if(Array.isArray(ae[N])){var ye=ae[N];if(!(2>ye.length)){var He=ye[1];if(Array.isArray(He)&&!(1>He.length)){var et=He[0];if(et!="noop"&&et!="stop"&&et!="close")for(var Tt=1;Tt<He.length;Tt++)He[Tt]=""}}}}return vr(ae)}catch{return X}}var Se={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Te={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ke;function Ke(){}b(Ke,Fr),Ke.prototype.g=function(){return new XMLHttpRequest},Ke.prototype.i=function(){return{}},ke=new Ke;function nt(N,X,ae,ye){this.j=N,this.i=X,this.l=ae,this.R=ye||1,this.U=new br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ve}function Ve(){this.i=null,this.g="",this.h=!1}var Ye={},Ze={};function wt(N,X,ae){N.L=1,N.v=fl(Fa(X)),N.m=ae,N.P=!0,Bt(N,null)}function Bt(N,X){N.F=Date.now(),Lt(N),N.A=Fa(N.v);var ae=N.A,ye=N.R;Array.isArray(ye)||(ye=[String(ye)]),pr(ae.i,"t",ye),N.C=0,ae=N.j.J,N.h=new Ve,N.g=Ae(N.j,ae?X:null,!N.m),0<N.O&&(N.M=new pt(m(N.Y,N,N.g),N.O)),X=N.U,ae=N.g,ye=N.ca;var He="readystatechange";Array.isArray(He)||(He&&(Zt[0]=He.toString()),He=Zt);for(var et=0;et<He.length;et++){var Tt=Ee(ae,He[et],ye||X.handleEvent,!1,X.h||X);if(!Tt)break;X.g[Tt.key]=Tt}X=N.H?E(N.H):{},N.m?(N.u||(N.u="POST"),X["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.A,N.u,N.m,X)):(N.u="GET",N.g.ea(N.A,N.u,null,X)),_s(),jn(N.i,N.u,N.A,N.l,N.R,N.m)}nt.prototype.ca=function(N){N=N.target;const X=this.M;X&&Ps(N)==3?X.j():this.Y(N)},nt.prototype.Y=function(N){try{if(N==this.g)e:{const Ln=Ps(this.g);var X=this.g.Ba();const go=this.g.Z();if(!(3>Ln)&&(Ln!=3||this.g&&(this.h.h||this.g.oa()||ZA(this.g)))){this.J||Ln!=4||X==7||(X==8||0>=go?_s(3):_s(2)),Or(this);var ae=this.g.Z();this.X=ae;t:if(Qt(this)){var ye=ZA(this.g);N="";var He=ye.length,et=Ps(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),Qr(this);var Tt="";break t}this.h.i=new o.TextDecoder}for(X=0;X<He;X++)this.h.h=!0,N+=this.h.i.decode(ye[X],{stream:!(et&&X==He-1)});ye.length=0,this.h.g+=N,this.C=0,Tt=this.h.g}else Tt=this.g.oa();if(this.o=ae==200,Yn(this.i,this.u,this.A,this.l,this.R,Ln,ae),this.o){if(this.T&&!this.K){t:{if(this.g){var gr,tn=this.g;if((gr=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(gr)){var kr=gr;break t}}kr=null}if(ae=kr)me(this.i,this.l,ae,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ls(this,ae);else{this.o=!1,this.s=3,Gt(12),qr(this),Qr(this);break e}}if(this.P){ae=!0;let Ss;for(;!this.J&&this.C<Tt.length;)if(Ss=Nt(this,Tt),Ss==Ze){Ln==4&&(this.s=4,Gt(14),ae=!1),me(this.i,this.l,null,"[Incomplete Response]");break}else if(Ss==Ye){this.s=4,Gt(15),me(this.i,this.l,Tt,"[Invalid Chunk]"),ae=!1;break}else me(this.i,this.l,Ss,null),Ls(this,Ss);if(Qt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ln!=4||Tt.length!=0||this.h.h||(this.s=1,Gt(16),ae=!1),this.o=this.o&&ae,!ae)me(this.i,this.l,Tt,"[Invalid Chunked Response]"),qr(this),Qr(this);else if(0<Tt.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+Tt.length),vl(Tn),Tn.M=!0,Gt(11))}}else me(this.i,this.l,Tt,null),Ls(this,Tt);Ln==4&&qr(this),this.o&&!this.J&&(Ln==4?yl(this.j,this):(this.o=!1,Lt(this)))}else pl(this.g),ae==400&&0<Tt.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),qr(this),Qr(this)}}}catch{}finally{}};function Qt(N){return N.g?N.u=="GET"&&N.L!=2&&N.j.Ca:!1}function Nt(N,X){var ae=N.C,ye=X.indexOf(`
`,ae);return ye==-1?Ze:(ae=Number(X.substring(ae,ye)),isNaN(ae)?Ye:(ye+=1,ye+ae>X.length?Ze:(X=X.slice(ye,ye+ae),N.C=ye+ae,X)))}nt.prototype.cancel=function(){this.J=!0,qr(this)};function Lt(N){N.S=Date.now()+N.I,fr(N,N.I)}function fr(N,X){if(N.B!=null)throw Error("WatchDog timer not null");N.B=on(m(N.ba,N),X)}function Or(N){N.B&&(o.clearTimeout(N.B),N.B=null)}nt.prototype.ba=function(){this.B=null;const N=Date.now();0<=N-this.S?(Be(this.i,this.A),this.L!=2&&(_s(),Gt(17)),qr(this),this.s=2,Qr(this)):fr(this,this.S-N)};function Qr(N){N.j.G==0||N.J||yl(N.j,N)}function qr(N){Or(N);var X=N.M;X&&typeof X.ma=="function"&&X.ma(),N.M=null,hn(N.U),N.g&&(X=N.g,N.g=null,X.abort(),X.ma())}function Ls(N,X){try{var ae=N.j;if(ae.G!=0&&(ae.g==N||ka(ae.h,N))){if(!N.K&&ka(ae.h,N)&&ae.G==3){try{var ye=ae.Da.g.parse(X)}catch{ye=null}if(Array.isArray(ye)&&ye.length==3){var He=ye;if(He[0]==0){e:if(!ae.u){if(ae.g)if(ae.g.F+3e3<N.F)Qo(ae),Vc(ae);else break e;nc(ae),Gt(18)}}else ae.za=He[1],0<ae.za-ae.T&&37500>He[2]&&ae.F&&ae.v==0&&!ae.C&&(ae.C=on(m(ae.Za,ae),6e3));if(1>=Ws(ae.h)&&ae.ca){try{ae.ca()}catch{}ae.ca=void 0}}else Va(ae,11)}else if((N.K||ae.g==N)&&Qo(ae),!k(X))for(He=ae.Da.g.parse(X),X=0;X<He.length;X++){let kr=He[X];if(ae.T=kr[0],kr=kr[1],ae.G==2)if(kr[0]=="c"){ae.K=kr[1],ae.ia=kr[2];const Tn=kr[3];Tn!=null&&(ae.la=Tn,ae.j.info("VER="+ae.la));const Ln=kr[4];Ln!=null&&(ae.Aa=Ln,ae.j.info("SVER="+ae.Aa));const go=kr[5];go!=null&&typeof go=="number"&&0<go&&(ye=1.5*go,ae.L=ye,ae.j.info("backChannelRequestTimeoutMs_="+ye)),ye=ae;const Ss=N.g;if(Ss){const bi=Ss.g?Ss.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bi){var et=ye.h;et.g||bi.indexOf("spdy")==-1&&bi.indexOf("quic")==-1&&bi.indexOf("h2")==-1||(et.j=et.l,et.g=new Set,et.h&&(Jn(et,et.h),et.h=null))}if(ye.D){const wl=Ss.g?Ss.g.getResponseHeader("X-HTTP-Session-Id"):null;wl&&(ye.ya=wl,Sn(ye.I,ye.D,wl))}}ae.G=3,ae.l&&ae.l.ua(),ae.ba&&(ae.R=Date.now()-N.F,ae.j.info("Handshake RTT: "+ae.R+"ms")),ye=ae;var Tt=N;if(ye.qa=z(ye,ye.J?ye.ia:null,ye.W),Tt.K){ma(ye.h,Tt);var gr=Tt,tn=ye.L;tn&&(gr.I=tn),gr.B&&(Or(gr),Lt(gr)),ye.g=Tt}else Gc(ye);0<ae.i.length&&zc(ae)}else kr[0]!="stop"&&kr[0]!="close"||Va(ae,7);else ae.G==3&&(kr[0]=="stop"||kr[0]=="close"?kr[0]=="stop"?Va(ae,7):Oo(ae):kr[0]!="noop"&&ae.l&&ae.l.ta(kr),ae.v=0)}}_s(4)}catch{}}var gi=class{constructor(N,X){this.g=N,this.map=X}};function Us(N){this.l=N||10,o.PerformanceNavigationTiming?(N=o.performance.getEntriesByType("navigation"),N=0<N.length&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ha(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function Ws(N){return N.h?1:N.g?N.g.size:0}function ka(N,X){return N.h?N.h==X:N.g?N.g.has(X):!1}function Jn(N,X){N.g?N.g.add(X):N.h=X}function ma(N,X){N.h&&N.h==X?N.h=null:N.g&&N.g.has(X)&&N.g.delete(X)}Us.prototype.cancel=function(){if(this.i=Oc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function Oc(N){if(N.h!=null)return N.i.concat(N.h.D);if(N.g!=null&&N.g.size!==0){let X=N.i;for(const ae of N.g.values())X=X.concat(ae.D);return X}return y(N.i)}function YA(N){if(N.V&&typeof N.V=="function")return N.V();if(typeof Map<"u"&&N instanceof Map||typeof Set<"u"&&N instanceof Set)return Array.from(N.values());if(typeof N=="string")return N.split("");if(l(N)){for(var X=[],ae=N.length,ye=0;ye<ae;ye++)X.push(N[ye]);return X}X=[],ae=0;for(ye in N)X[ae++]=N[ye];return X}function ul(N){if(N.na&&typeof N.na=="function")return N.na();if(!N.V||typeof N.V!="function"){if(typeof Map<"u"&&N instanceof Map)return Array.from(N.keys());if(!(typeof Set<"u"&&N instanceof Set)){if(l(N)||typeof N=="string"){var X=[];N=N.length;for(var ae=0;ae<N;ae++)X.push(ae);return X}X=[],ae=0;for(const ye in N)X[ae++]=ye;return X}}}function zu(N,X){if(N.forEach&&typeof N.forEach=="function")N.forEach(X,void 0);else if(l(N)||typeof N=="string")Array.prototype.forEach.call(N,X,void 0);else for(var ae=ul(N),ye=YA(N),He=ye.length,et=0;et<He;et++)X.call(void 0,ye[et],ae&&ae[et],N)}var Ia=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qc(N,X){if(N){N=N.split("&");for(var ae=0;ae<N.length;ae++){var ye=N[ae].indexOf("="),He=null;if(0<=ye){var et=N[ae].substring(0,ye);He=N[ae].substring(ye+1)}else et=N[ae];X(et,He?decodeURIComponent(He.replace(/\+/g," ")):"")}}}function pn(N){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,N instanceof pn){this.h=N.h,Al(this,N.j),this.o=N.o,this.g=N.g,dl(this,N.s),this.l=N.l;var X=N.i,ae=new uo;ae.i=X.i,X.g&&(ae.g=new Map(X.g),ae.h=X.h),co(this,ae),this.m=N.m}else N&&(X=String(N).match(Ia))?(this.h=!1,Al(this,X[1]||"",!0),this.o=xi(X[2]||""),this.g=xi(X[3]||"",!0),dl(this,X[4]),this.l=xi(X[5]||"",!0),co(this,X[6]||"",!0),this.m=xi(X[7]||"")):(this.h=!1,this.i=new uo(null,this.h))}pn.prototype.toString=function(){var N=[],X=this.j;X&&N.push(Lo(X,Gu,!0),":");var ae=this.g;return(ae||X=="file")&&(N.push("//"),(X=this.o)&&N.push(Lo(X,Gu,!0),"@"),N.push(encodeURIComponent(String(ae)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),ae=this.s,ae!=null&&N.push(":",String(ae))),(ae=this.l)&&(this.g&&ae.charAt(0)!="/"&&N.push("/"),N.push(Lo(ae,ae.charAt(0)=="/"?Uo:qu,!0))),(ae=this.i.toString())&&N.push("?",ae),(ae=this.m)&&N.push("#",Lo(ae,Mo)),N.join("")};function Fa(N){return new pn(N)}function Al(N,X,ae){N.j=ae?xi(X,!0):X,N.j&&(N.j=N.j.replace(/:$/,""))}function dl(N,X){if(X){if(X=Number(X),isNaN(X)||0>X)throw Error("Bad port number "+X);N.s=X}else N.s=null}function co(N,X,ae){X instanceof uo?(N.i=X,XA(N.i,N.h)):(ae||(X=Lo(X,Hc)),N.i=new uo(X,N.h))}function Sn(N,X,ae){N.i.set(X,ae)}function fl(N){return Sn(N,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),N}function xi(N,X){return N?X?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function Lo(N,X,ae){return typeof N=="string"?(N=encodeURI(N).replace(X,JA),ae&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function JA(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var Gu=/[#\/\?@]/g,qu=/[#\?:]/g,Uo=/[#\?]/g,Hc=/[#\?@]/g,Mo=/#/g;function uo(N,X){this.h=this.g=null,this.i=N||null,this.j=!!X}function On(N){N.g||(N.g=new Map,N.h=0,N.i&&Qc(N.i,function(X,ae){N.add(decodeURIComponent(X.replace(/\+/g," ")),ae)}))}t=uo.prototype,t.add=function(N,X){On(this),this.i=null,N=fo(this,N);var ae=this.g.get(N);return ae||this.g.set(N,ae=[]),ae.push(X),this.h+=1,this};function Po(N,X){On(N),X=fo(N,X),N.g.has(X)&&(N.i=null,N.h-=N.g.get(X).length,N.g.delete(X))}function Ao(N,X){return On(N),X=fo(N,X),N.g.has(X)}t.forEach=function(N,X){On(this),this.g.forEach(function(ae,ye){ae.forEach(function(He){N.call(X,He,ye,this)},this)},this)},t.na=function(){On(this);const N=Array.from(this.g.values()),X=Array.from(this.g.keys()),ae=[];for(let ye=0;ye<X.length;ye++){const He=N[ye];for(let et=0;et<He.length;et++)ae.push(X[ye])}return ae},t.V=function(N){On(this);let X=[];if(typeof N=="string")Ao(this,N)&&(X=X.concat(this.g.get(fo(this,N))));else{N=Array.from(this.g.values());for(let ae=0;ae<N.length;ae++)X=X.concat(N[ae])}return X},t.set=function(N,X){return On(this),this.i=null,N=fo(this,N),Ao(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[X]),this.h+=1,this},t.get=function(N,X){return N?(N=this.V(N),0<N.length?String(N[0]):X):X};function pr(N,X,ae){Po(N,X),0<ae.length&&(N.i=null,N.g.set(fo(N,X),y(ae)),N.h+=ae.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],X=Array.from(this.g.keys());for(var ae=0;ae<X.length;ae++){var ye=X[ae];const et=encodeURIComponent(String(ye)),Tt=this.V(ye);for(ye=0;ye<Tt.length;ye++){var He=et;Tt[ye]!==""&&(He+="="+encodeURIComponent(String(Tt[ye]))),N.push(He)}}return this.i=N.join("&")};function fo(N,X){return X=String(X),N.j&&(X=X.toLowerCase()),X}function XA(N,X){X&&!N.j&&(On(N),N.i=null,N.g.forEach(function(ae,ye){var He=ye.toLowerCase();ye!=He&&(Po(this,ye),pr(this,He,ae))},N)),N.j=X}function Oa(N,X){const ae=new Rn;if(o.Image){const ye=new Image;ye.onload=g(ti,ae,"TestLoadImage: loaded",!0,X,ye),ye.onerror=g(ti,ae,"TestLoadImage: error",!1,X,ye),ye.onabort=g(ti,ae,"TestLoadImage: abort",!1,X,ye),ye.ontimeout=g(ti,ae,"TestLoadImage: timeout",!1,X,ye),o.setTimeout(function(){ye.ontimeout&&ye.ontimeout()},1e4),ye.src=N}else X(!1)}function vi(N,X){const ae=new Rn,ye=new AbortController,He=setTimeout(()=>{ye.abort(),ti(ae,"TestPingServer: timeout",!1,X)},1e4);fetch(N,{signal:ye.signal}).then(et=>{clearTimeout(He),et.ok?ti(ae,"TestPingServer: ok",!0,X):ti(ae,"TestPingServer: server error",!1,X)}).catch(()=>{clearTimeout(He),ti(ae,"TestPingServer: error",!1,X)})}function ti(N,X,ae,ye,He){try{He&&(He.onload=null,He.onerror=null,He.onabort=null,He.ontimeout=null),ye(ae)}catch{}}function ho(){this.g=new Dn}function yi(N,X,ae){const ye=ae||"";try{zu(N,function(He,et){let Tt=He;u(He)&&(Tt=vr(He)),X.push(ye+et+"="+encodeURIComponent(Tt))})}catch(He){throw X.push(ye+"type="+encodeURIComponent("_badmap")),He}}function hl(N){this.l=N.Ub||null,this.j=N.eb||!1}b(hl,Fr),hl.prototype.g=function(){return new jo(this.l,this.j)},hl.prototype.i=function(N){return function(){return N}}({});function jo(N,X){Rt.call(this),this.D=N,this.o=X,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(jo,Rt),t=jo.prototype,t.open=function(N,X){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=N,this.A=X,this.readyState=1,Qa(this)},t.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const X={headers:this.u,method:this.B,credentials:this.m,cache:void 0};N&&(X.body=N),(this.D||o).fetch(new Request(this.A,X)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,wi(this)),this.readyState=0},t.Sa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,Qa(this)),this.g&&(this.readyState=3,Qa(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ku(this)}else N.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ku(N){N.j.read().then(N.Pa.bind(N)).catch(N.ga.bind(N))}t.Pa=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var X=N.value?N.value:new Uint8Array(0);(X=this.v.decode(X,{stream:!N.done}))&&(this.response=this.responseText+=X)}N.done?wi(this):Qa(this),this.readyState==3&&Ku(this)}},t.Ra=function(N){this.g&&(this.response=this.responseText=N,wi(this))},t.Qa=function(N){this.g&&(this.response=N,wi(this))},t.ga=function(){this.g&&wi(this)};function wi(N){N.readyState=4,N.l=null,N.j=null,N.v=null,Qa(N)}t.setRequestHeader=function(N,X){this.u.append(N,X)},t.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],X=this.h.entries();for(var ae=X.next();!ae.done;)ae=ae.value,N.push(ae[0]+": "+ae[1]),ae=X.next();return N.join(`\r
`)};function Qa(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(jo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function mo(N){let X="";return L(N,function(ae,ye){X+=ye,X+=":",X+=ae,X+=`\r
`}),X}function Ms(N,X,ae){e:{for(ye in ae){var ye=!1;break e}ye=!0}ye||(ae=mo(ae),typeof N=="string"?ae!=null&&encodeURIComponent(String(ae)):Sn(N,X,ae))}function en(N){Rt.call(this),this.headers=new Map,this.o=N||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(en,Rt);var ml=/^https?$/i,po=["POST","PUT"];t=en.prototype,t.Ha=function(N){this.J=N},t.ea=function(N,X,ae,ye){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);X=X?X.toUpperCase():"GET",this.D=N,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ke.g(),this.v=this.o?da(this.o):da(ke),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(X,String(N),!0),this.B=!1}catch(et){$u(this,et);return}if(N=ae||"",ae=new Map(this.headers),ye)if(Object.getPrototypeOf(ye)===Object.prototype)for(var He in ye)ae.set(He,ye[He]);else if(typeof ye.keys=="function"&&typeof ye.get=="function")for(const et of ye.keys())ae.set(et,ye.get(et));else throw Error("Unknown input type for opt_headers: "+String(ye));ye=Array.from(ae.keys()).find(et=>et.toLowerCase()=="content-type"),He=o.FormData&&N instanceof o.FormData,!(0<=Array.prototype.indexOf.call(po,X,void 0))||ye||He||ae.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[et,Tt]of ae)this.g.setRequestHeader(et,Tt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ha(this),this.u=!0,this.g.send(N),this.u=!1}catch(et){$u(this,et)}};function $u(N,X){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=X,N.m=5,Xl(N),Xi(N)}function Xl(N){N.A||(N.A=!0,Ot(N,"complete"),Ot(N,"error"))}t.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=N||7,Ot(this,"complete"),Ot(this,"abort"),Xi(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),en.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zl(this):this.bb())},t.bb=function(){Zl(this)};function Zl(N){if(N.h&&typeof i<"u"&&(!N.v[1]||Ps(N)!=4||N.Z()!=2)){if(N.u&&Ps(N)==4)It(N.Ea,0,N);else if(Ot(N,"readystatechange"),Ps(N)==4){N.h=!1;try{const Tt=N.Z();e:switch(Tt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var X=!0;break e;default:X=!1}var ae;if(!(ae=X)){var ye;if(ye=Tt===0){var He=String(N.D).match(Ia)[1]||null;!He&&o.self&&o.self.location&&(He=o.self.location.protocol.slice(0,-1)),ye=!ml.test(He?He.toLowerCase():"")}ae=ye}if(ae)Ot(N,"complete"),Ot(N,"success");else{N.m=6;try{var et=2<Ps(N)?N.g.statusText:""}catch{et=""}N.l=et+" ["+N.Z()+"]",Xl(N)}}finally{Xi(N)}}}}function Xi(N,X){if(N.g){Ha(N);const ae=N.g,ye=N.v[0]?()=>{}:null;N.g=null,N.v=null,X||Ot(N,"ready");try{ae.onreadystatechange=ye}catch{}}}function Ha(N){N.I&&(o.clearTimeout(N.I),N.I=null)}t.isActive=function(){return!!this.g};function Ps(N){return N.g?N.g.readyState:0}t.Z=function(){try{return 2<Ps(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(N){if(this.g){var X=this.g.responseText;return N&&X.indexOf(N)==0&&(X=X.substring(N.length)),Ur(X)}};function ZA(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.H){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function pl(N){const X={};N=(N.g&&2<=Ps(N)&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let ye=0;ye<N.length;ye++){if(k(N[ye]))continue;var ae=R(N[ye]);const He=ae[0];if(ae=ae[1],typeof ae!="string")continue;ae=ae.trim();const et=X[He]||[];X[He]=et,et.push(ae)}C(X,function(ye){return ye.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Da(N,X,ae){return ae&&ae.internalChannelParams&&ae.internalChannelParams[N]||X}function gl(N){this.Aa=0,this.i=[],this.j=new Rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Da("failFast",!1,N),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Da("baseRetryDelayMs",5e3,N),this.cb=Da("retryDelaySeedMs",1e4,N),this.Wa=Da("forwardChannelMaxRetries",2,N),this.wa=Da("forwardChannelRequestTimeoutMs",2e4,N),this.pa=N&&N.xmlHttpFactory||void 0,this.Xa=N&&N.Tb||void 0,this.Ca=N&&N.useFetchStreams||!1,this.L=void 0,this.J=N&&N.supportsCrossDomainXhr||!1,this.K="",this.h=new Us(N&&N.concurrentRequestLimit),this.Da=new ho,this.P=N&&N.fastHandshake||!1,this.O=N&&N.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=N&&N.Rb||!1,N&&N.xa&&this.j.xa(),N&&N.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&N&&N.detectBufferingProxy||!1,this.ja=void 0,N&&N.longPollingTimeout&&0<N.longPollingTimeout&&(this.ja=N.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gl.prototype,t.la=8,t.G=1,t.connect=function(N,X,ae,ye){Gt(0),this.W=N,this.H=X||{},ae&&ye!==void 0&&(this.H.OSID=ae,this.H.OAID=ye),this.F=this.X,this.I=z(this,null,this.W),zc(this)};function Oo(N){if(ec(N),N.G==3){var X=N.U++,ae=Fa(N.I);if(Sn(ae,"SID",N.K),Sn(ae,"RID",X),Sn(ae,"TYPE","terminate"),xl(N,ae),X=new nt(N,N.j,X),X.L=2,X.v=fl(Fa(ae)),ae=!1,o.navigator&&o.navigator.sendBeacon)try{ae=o.navigator.sendBeacon(X.v.toString(),"")}catch{}!ae&&o.Image&&(new Image().src=X.v,ae=!0),ae||(X.g=Ae(X.j,null),X.g.ea(X.v)),X.F=Date.now(),Lt(X)}qc(N)}function Vc(N){N.g&&(vl(N),N.g.cancel(),N.g=null)}function ec(N){Vc(N),N.u&&(o.clearTimeout(N.u),N.u=null),Qo(N),N.h.cancel(),N.s&&(typeof N.s=="number"&&o.clearTimeout(N.s),N.s=null)}function zc(N){if(!ha(N.h)&&!N.s){N.s=!0;var X=N.Ga;re||W(),G||(re(),G=!0),q.add(X,N),N.B=0}}function Wu(N,X){return Ws(N.h)>=N.h.j-(N.s?1:0)?!1:N.s?(N.i=X.D.concat(N.i),!0):N.G==1||N.G==2||N.B>=(N.Va?0:N.Wa)?!1:(N.s=on(m(N.Ga,N,X),sc(N,N.B)),N.B++,!0)}t.Ga=function(N){if(this.s)if(this.s=null,this.G==1){if(!N){this.U=Math.floor(1e5*Math.random()),N=this.U++;const He=new nt(this,this.j,N);let et=this.o;if(this.S&&(et?(et=E(et),O(et,this.S)):et=this.S),this.m!==null||this.O||(He.H=et,et=null),this.P)e:{for(var X=0,ae=0;ae<this.i.length;ae++){t:{var ye=this.i[ae];if("__data__"in ye.map&&(ye=ye.map.__data__,typeof ye=="string")){ye=ye.length;break t}ye=void 0}if(ye===void 0)break;if(X+=ye,4096<X){X=ae;break e}if(X===4096||ae===this.i.length-1){X=ae+1;break e}}X=1e3}else X=1e3;X=rc(this,He,X),ae=Fa(this.I),Sn(ae,"RID",N),Sn(ae,"CVER",22),this.D&&Sn(ae,"X-HTTP-Session-Id",this.D),xl(this,ae),et&&(this.O?X="headers="+encodeURIComponent(String(mo(et)))+"&"+X:this.m&&Ms(ae,this.m,et)),Jn(this.h,He),this.Ua&&Sn(ae,"TYPE","init"),this.P?(Sn(ae,"$req",X),Sn(ae,"SID","null"),He.T=!0,wt(He,ae,null)):wt(He,ae,X),this.G=2}}else this.G==3&&(N?tc(this,N):this.i.length==0||ha(this.h)||tc(this))};function tc(N,X){var ae;X?ae=X.l:ae=N.U++;const ye=Fa(N.I);Sn(ye,"SID",N.K),Sn(ye,"RID",ae),Sn(ye,"AID",N.T),xl(N,ye),N.m&&N.o&&Ms(ye,N.m,N.o),ae=new nt(N,N.j,ae,N.B+1),N.m===null&&(ae.H=N.o),X&&(N.i=X.D.concat(N.i)),X=rc(N,ae,1e3),ae.I=Math.round(.5*N.wa)+Math.round(.5*N.wa*Math.random()),Jn(N.h,ae),wt(ae,ye,X)}function xl(N,X){N.H&&L(N.H,function(ae,ye){Sn(X,ye,ae)}),N.l&&zu({},function(ae,ye){Sn(X,ye,ae)})}function rc(N,X,ae){ae=Math.min(N.i.length,ae);var ye=N.l?m(N.l.Na,N.l,N):null;e:{var He=N.i;let et=-1;for(;;){const Tt=["count="+ae];et==-1?0<ae?(et=He[0].g,Tt.push("ofs="+et)):et=0:Tt.push("ofs="+et);let gr=!0;for(let tn=0;tn<ae;tn++){let kr=He[tn].g;const Tn=He[tn].map;if(kr-=et,0>kr)et=Math.max(0,He[tn].g-100),gr=!1;else try{yi(Tn,Tt,"req"+kr+"_")}catch{ye&&ye(Tn)}}if(gr){ye=Tt.join("&");break e}}}return N=N.i.splice(0,ae),X.D=N,ye}function Gc(N){if(!N.g&&!N.u){N.Y=1;var X=N.Fa;re||W(),G||(re(),G=!0),q.add(X,N),N.v=0}}function nc(N){return N.g||N.u||3<=N.v?!1:(N.Y++,N.u=on(m(N.Fa,N),sc(N,N.v)),N.v++,!0)}t.Fa=function(){if(this.u=null,ed(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var N=2*this.R;this.j.info("BP detection timer enabled: "+N),this.A=on(m(this.ab,this),N)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Vc(this),ed(this))};function vl(N){N.A!=null&&(o.clearTimeout(N.A),N.A=null)}function ed(N){N.g=new nt(N,N.j,"rpc",N.Y),N.m===null&&(N.g.H=N.o),N.g.O=0;var X=Fa(N.qa);Sn(X,"RID","rpc"),Sn(X,"SID",N.K),Sn(X,"AID",N.T),Sn(X,"CI",N.F?"0":"1"),!N.F&&N.ja&&Sn(X,"TO",N.ja),Sn(X,"TYPE","xmlhttp"),xl(N,X),N.m&&N.o&&Ms(X,N.m,N.o),N.L&&(N.g.I=N.L);var ae=N.g;N=N.ia,ae.L=1,ae.v=fl(Fa(X)),ae.m=null,ae.P=!0,Bt(ae,N)}t.Za=function(){this.C!=null&&(this.C=null,Vc(this),nc(this),Gt(19))};function Qo(N){N.C!=null&&(o.clearTimeout(N.C),N.C=null)}function yl(N,X){var ae=null;if(N.g==X){Qo(N),vl(N),N.g=null;var ye=2}else if(ka(N.h,X))ae=X.D,ma(N.h,X),ye=1;else return;if(N.G!=0){if(X.o)if(ye==1){ae=X.m?X.m.length:0,X=Date.now()-X.F;var He=N.B;ye=fa(),Ot(ye,new mn(ye,ae)),zc(N)}else Gc(N);else if(He=X.s,He==3||He==0&&0<X.X||!(ye==1&&Wu(N,X)||ye==2&&nc(N)))switch(ae&&0<ae.length&&(X=N.h,X.i=X.i.concat(ae)),He){case 1:Va(N,5);break;case 4:Va(N,10);break;case 3:Va(N,6);break;default:Va(N,2)}}}function sc(N,X){let ae=N.Ta+Math.floor(Math.random()*N.cb);return N.isActive()||(ae*=2),ae*X}function Va(N,X){if(N.j.info("Error code "+X),X==2){var ae=m(N.fb,N),ye=N.Xa;const He=!ye;ye=new pn(ye||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Al(ye,"https"),fl(ye),He?Oa(ye.toString(),ae):vi(ye.toString(),ae)}else Gt(2);N.G=0,N.l&&N.l.sa(X),qc(N),ec(N)}t.fb=function(N){N?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function qc(N){if(N.G=0,N.ka=[],N.l){const X=Oc(N.h);(X.length!=0||N.i.length!=0)&&(_(N.ka,X),_(N.ka,N.i),N.h.i.length=0,y(N.i),N.i.length=0),N.l.ra()}}function z(N,X,ae){var ye=ae instanceof pn?Fa(ae):new pn(ae);if(ye.g!="")X&&(ye.g=X+"."+ye.g),dl(ye,ye.s);else{var He=o.location;ye=He.protocol,X=X?X+"."+He.hostname:He.hostname,He=+He.port;var et=new pn(null);ye&&Al(et,ye),X&&(et.g=X),He&&dl(et,He),ae&&(et.l=ae),ye=et}return ae=N.D,X=N.ya,ae&&X&&Sn(ye,ae,X),Sn(ye,"VER",N.la),xl(N,ye),ye}function Ae(N,X,ae){if(X&&!N.J)throw Error("Can't create secondary domain capable XhrIo object.");return X=N.Ca&&!N.pa?new en(new hl({eb:ae})):new en(N.pa),X.Ha(N.J),X}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ie(){}t=Ie.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Le(){}Le.prototype.g=function(N,X){return new ze(N,X)};function ze(N,X){Rt.call(this),this.g=new gl(X),this.l=N,this.h=X&&X.messageUrlParams||null,N=X&&X.messageHeaders||null,X&&X.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=X&&X.initMessageHeaders||null,X&&X.messageContentType&&(N?N["X-WebChannel-Content-Type"]=X.messageContentType:N={"X-WebChannel-Content-Type":X.messageContentType}),X&&X.va&&(N?N["X-WebChannel-Client-Profile"]=X.va:N={"X-WebChannel-Client-Profile":X.va}),this.g.S=N,(N=X&&X.Sb)&&!k(N)&&(this.g.m=N),this.v=X&&X.supportsCrossDomainXhr||!1,this.u=X&&X.sendRawJson||!1,(X=X&&X.httpSessionIdParam)&&!k(X)&&(this.g.D=X,N=this.h,N!==null&&X in N&&(N=this.h,X in N&&delete N[X])),this.j=new Ht(this)}b(ze,Rt),ze.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ze.prototype.close=function(){Oo(this.g)},ze.prototype.o=function(N){var X=this.g;if(typeof N=="string"){var ae={};ae.__data__=N,N=ae}else this.u&&(ae={},ae.__data__=vr(N),N=ae);X.i.push(new gi(X.Ya++,N)),X.G==3&&zc(X)},ze.prototype.N=function(){this.g.l=null,delete this.j,Oo(this.g),delete this.g,ze.aa.N.call(this)};function ot(N){gs.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var X=N.__sm__;if(X){e:{for(const ae in X){N=ae;break e}N=void 0}(this.i=N)&&(N=this.i,X=X!==null&&N in X?X[N]:void 0),this.data=X}else this.data=N}b(ot,gs);function St(){jr.call(this),this.status=1}b(St,jr);function Ht(N){this.g=N}b(Ht,Ie),Ht.prototype.ua=function(){Ot(this.g,"a")},Ht.prototype.ta=function(N){Ot(this.g,new ot(N))},Ht.prototype.sa=function(N){Ot(this.g,new St)},Ht.prototype.ra=function(){Ot(this.g,"b")},Le.prototype.createWebChannel=Le.prototype.g,ze.prototype.send=ze.prototype.o,ze.prototype.open=ze.prototype.m,ze.prototype.close=ze.prototype.close,GU=function(){return new Le},zU=function(){return fa()},VU=nr,M_={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,My=Se,Te.COMPLETE="complete",HU=Te,an.EventType=ns,ns.OPEN="a",ns.CLOSE="b",ns.ERROR="c",ns.MESSAGE="d",Rt.prototype.listen=Rt.prototype.K,vg=an,en.prototype.listenOnce=en.prototype.L,en.prototype.getLastError=en.prototype.Ka,en.prototype.getLastErrorCode=en.prototype.Ba,en.prototype.getStatus=en.prototype.Z,en.prototype.getResponseJson=en.prototype.Oa,en.prototype.getResponseText=en.prototype.oa,en.prototype.send=en.prototype.ea,en.prototype.setWithCredentials=en.prototype.Ha,QU=en}).apply(typeof Bv<"u"?Bv:typeof self<"u"?self:typeof window<"u"?window:{});const Xk="@firebase/firestore",Zk="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ui.UNAUTHENTICATED=new Ui(null),Ui.GOOGLE_CREDENTIALS=new Ui("google-credentials-uid"),Ui.FIRST_PARTY=new Ui("first-party-uid"),Ui.MOCK_USER=new Ui("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ep="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new F5("@firebase/firestore");function X0(){return kh.logLevel}function er(t,...e){if(kh.logLevel<=An.DEBUG){const r=e.map(z5);kh.debug(`Firestore (${ep}): ${t}`,...r)}}function UA(t,...e){if(kh.logLevel<=An.ERROR){const r=e.map(z5);kh.error(`Firestore (${ep}): ${t}`,...r)}}function Lm(t,...e){if(kh.logLevel<=An.WARN){const r=e.map(z5);kh.warn(`Firestore (${ep}): ${t}`,...r)}}function z5(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,qU(t,n,r)}function qU(t,e,r){let n=`FIRESTORE (${ep}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw UA(n),new Error(n)}function Pn(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||qU(e,s,n)}function Lr(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Kt extends Mu{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class vK{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Ui.UNAUTHENTICATED))}shutdown(){}}class yK{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class wK{constructor(e){this.t=e,this.currentUser=Ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Pn(this.o===void 0,42304);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let a=new NA;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new NA,e.enqueueRetryable(()=>s(this.currentUser))};const i=()=>{const l=a;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},o=l=>{er("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(l=>o(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?o(l):(er("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new NA)}},0),i()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(er("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Pn(typeof n.accessToken=="string",31837,{l:n}),new KU(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pn(e===null||typeof e=="string",2055,{h:e}),new Ui(e)}}class bK{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Ui.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class CK{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new bK(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Ui.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class e3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EK{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ql(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Pn(this.o===void 0,3512);const n=a=>{a.error!=null&&er("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const i=a.token!==this.m;return this.m=a.token,er("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>n(a))};const s=a=>{er("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):er("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new e3(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Pn(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new e3(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _K(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=_K(40);for(let a=0;a<s.length;++a)n.length<20&&s[a]<r&&(n+=e.charAt(s[a]%62))}return n}}function dn(t,e){return t<e?-1:t>e?1:0}function P_(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const s=t.charAt(n),a=e.charAt(n);if(s!==a)return rE(s)===rE(a)?dn(s,a):rE(s)?1:-1}return dn(t.length,e.length)}const SK=55296,TK=57343;function rE(t){const e=t.charCodeAt(0);return e>=SK&&e<=TK}function Um(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3="__name__";class bu{constructor(e,r,n){r===void 0?r=0:r>e.length&&Tr(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&Tr(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return bu.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof bu?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const a=bu.compareSegments(e.get(s),r.get(s));if(a!==0)return a}return dn(e.length,r.length)}static compareSegments(e,r){const n=bu.isNumericId(e),s=bu.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?bu.extractNumericId(e).compare(bu.extractNumericId(r)):P_(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sf.fromString(e.substring(4,e.length-2))}}class ls extends bu{construct(e,r,n){return new ls(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Kt(mt.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new ls(r)}static emptyPath(){return new ls([])}}const NK=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class di extends bu{construct(e,r,n){return new di(e,r,n)}static isValidIdentifier(e){return NK.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),di.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t3}static keyField(){return new di([t3])}static fromServerFormat(e){const r=[];let n="",s=0;const a=()=>{if(n.length===0)throw new Kt(mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let i=!1;for(;s<e.length;){const o=e[s];if(o==="\\"){if(s+1===e.length)throw new Kt(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Kt(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else o==="`"?(i=!i,s++):o!=="."||i?(n+=o,s++):(a(),s++)}if(a(),i)throw new Kt(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new di(r)}static emptyPath(){return new di([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.path=e}static fromPath(e){return new dr(ls.fromString(e))}static fromName(e){return new dr(ls.fromString(e).popFirst(5))}static empty(){return new dr(ls.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ls.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return ls.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dr(new ls(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $U(t,e,r){if(!r)throw new Kt(mt.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BK(t,e,r,n){if(e===!0&&n===!0)throw new Kt(mt.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function r3(t){if(!dr.isDocumentKey(t))throw new Kt(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n3(t){if(dr.isDocumentKey(t))throw new Kt(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function WU(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function _w(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Tr(12329,{type:typeof t})}function ao(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Kt(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=_w(t);throw new Kt(mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function kK(t,e){if(e<=0)throw new Kt(mt.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(t,e){const r={typeString:t};return e&&(r.value=e),r}function t1(t,e){if(!WU(t))throw new Kt(mt.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,a="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const i=t[n];if(s&&typeof i!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(a!==void 0&&i!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new Kt(mt.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=-62135596800,a3=1e6;class or{static now(){return or.fromMillis(Date.now())}static fromDate(e){return or.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*a3);return new or(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Kt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Kt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<s3)throw new Kt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Kt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a3}_compareTo(e){return this.seconds===e.seconds?dn(this.nanoseconds,e.nanoseconds):dn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:or._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(t1(e,or._jsonSchema))return new or(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-s3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}or._jsonSchemaVersion="firestore/timestamp/1.0",or._jsonSchema={type:Sa("string",or._jsonSchemaVersion),seconds:Sa("number"),nanoseconds:Sa("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{static fromTimestamp(e){return new Dr(e)}static min(){return new Dr(new or(0,0))}static max(){return new Dr(new or(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=-1;function IK(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Dr.fromTimestamp(n===1e9?new or(r+1,0):new or(r,n));return new mf(s,dr.empty(),e)}function FK(t){return new mf(t.readTime,t.key,dx)}class mf{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new mf(Dr.min(),dr.empty(),dx)}static max(){return new mf(Dr.max(),dr.empty(),dx)}}function DK(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=dr.comparator(t.documentKey,e.documentKey),r!==0?r:dn(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RK="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LK{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tp(t){if(t.code!==mt.FAILED_PRECONDITION||t.message!==RK)throw t;er("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Tr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ct((n,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(n,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ct?r:Ct.resolve(r)}catch(r){return Ct.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ct.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ct.reject(r)}static resolve(e){return new Ct((r,n)=>{r(e)})}static reject(e){return new Ct((r,n)=>{n(e)})}static waitFor(e){return new Ct((r,n)=>{let s=0,a=0,i=!1;e.forEach(o=>{++s,o.next(()=>{++a,i&&a===s&&r()},l=>n(l))}),i=!0,a===s&&r()})}static or(e){let r=Ct.resolve(!1);for(const n of e)r=r.next(s=>s?Ct.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,a)=>{n.push(r.call(this,s,a))}),this.waitFor(n)}static mapArray(e,r){return new Ct((n,s)=>{const a=e.length,i=new Array(a);let o=0;for(let l=0;l<a;l++){const u=l;r(e[u]).next(d=>{i[u]=d,++o,o===a&&n(i)},d=>s(d))}})}static doWhile(e,r){return new Ct((n,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):n()};a()})}}function UK(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function rp(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Sw.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5=-1;function Tw(t){return t==null}function f2(t){return t===0&&1/t==-1/0}function MK(t){return typeof t=="number"&&Number.isInteger(t)&&!f2(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU="";function PK(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=i3(e)),e=jK(t.get(r),e);return i3(e)}function jK(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case YU:r+="";break;default:r+=a}}return r}function i3(t){return t+YU+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o3(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Bf(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function JU(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,r){this.comparator=e,this.root=r||ui.EMPTY}insert(e,r){return new Ds(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new Ds(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kv(this.root,e,this.comparator,!1)}getReverseIterator(){return new kv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kv(this.root,e,this.comparator,!0)}}class kv{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?n(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,r,n,s,a){this.key=e,this.value=r,this.color=n??ui.RED,this.left=s??ui.EMPTY,this.right=a??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,a){return new ui(e??this.key,r??this.value,n??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const a=n(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,n),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return ui.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Tr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Tr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Tr(27949);return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1;ui.EMPTY=new class{constructor(){this.size=0}get key(){throw Tr(57766)}get value(){throw Tr(16141)}get color(){throw Tr(16727)}get left(){throw Tr(29726)}get right(){throw Tr(36894)}copy(e,r,n,s,a){return this}insert(e,r,n){return new ui(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.comparator=e,this.data=new Ds(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new l3(this.data.getIterator())}getIteratorFrom(e){return new l3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Pa(this.comparator);return r.data=e,r}}class l3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e){this.fields=e,e.sort(di.comparator)}static empty(){return new sl([])}unionWith(e){let r=new Pa(di.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new sl(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Um(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new XU("Invalid base64 string: "+a):a}}(e);return new mi(r)}static fromUint8Array(e){const r=function(s){let a="";for(let i=0;i<s.length;++i)a+=String.fromCharCode(s[i]);return a}(e);return new mi(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return dn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}mi.EMPTY_BYTE_STRING=new mi("");const OK=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pf(t){if(Pn(!!t,39018),typeof t=="string"){let e=0;const r=OK.exec(t);if(Pn(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:aa(t.seconds),nanos:aa(t.nanos)}}function aa(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gf(t){return typeof t=="string"?mi.fromBase64String(t):mi.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU="server_timestamp",e8="__type__",t8="__previous_value__",r8="__local_write_time__";function K5(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[e8])==null?void 0:n.stringValue)===ZU}function Nw(t){const e=t.mapValue.fields[t8];return K5(e)?Nw(e):e}function fx(t){const e=pf(t.mapValue.fields[r8].timestampValue);return new or(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QK{constructor(e,r,n,s,a,i,o,l,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const h2="(default)";class hx{constructor(e,r){this.projectId=e,this.database=r||h2}static empty(){return new hx("","")}get isDefaultDatabase(){return this.database===h2}isEqual(e){return e instanceof hx&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8="__type__",HK="__max__",Iv={mapValue:{}},s8="__vector__",m2="value";function xf(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?K5(t)?4:zK(t)?9007199254740991:VK(t)?10:11:Tr(28295,{value:t})}function Lu(t,e){if(t===e)return!0;const r=xf(t);if(r!==xf(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fx(t).isEqual(fx(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const i=pf(s.timestampValue),o=pf(a.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return gf(s.bytesValue).isEqual(gf(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return aa(s.geoPointValue.latitude)===aa(a.geoPointValue.latitude)&&aa(s.geoPointValue.longitude)===aa(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return aa(s.integerValue)===aa(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const i=aa(s.doubleValue),o=aa(a.doubleValue);return i===o?f2(i)===f2(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return Um(t.arrayValue.values||[],e.arrayValue.values||[],Lu);case 10:case 11:return function(s,a){const i=s.mapValue.fields||{},o=a.mapValue.fields||{};if(o3(i)!==o3(o))return!1;for(const l in i)if(i.hasOwnProperty(l)&&(o[l]===void 0||!Lu(i[l],o[l])))return!1;return!0}(t,e);default:return Tr(52216,{left:t})}}function mx(t,e){return(t.values||[]).find(r=>Lu(r,e))!==void 0}function Mm(t,e){if(t===e)return 0;const r=xf(t),n=xf(e);if(r!==n)return dn(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return dn(t.booleanValue,e.booleanValue);case 2:return function(a,i){const o=aa(a.integerValue||a.doubleValue),l=aa(i.integerValue||i.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return c3(t.timestampValue,e.timestampValue);case 4:return c3(fx(t),fx(e));case 5:return P_(t.stringValue,e.stringValue);case 6:return function(a,i){const o=gf(a),l=gf(i);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(a,i){const o=a.split("/"),l=i.split("/");for(let u=0;u<o.length&&u<l.length;u++){const d=dn(o[u],l[u]);if(d!==0)return d}return dn(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,i){const o=dn(aa(a.latitude),aa(i.latitude));return o!==0?o:dn(aa(a.longitude),aa(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return u3(t.arrayValue,e.arrayValue);case 10:return function(a,i){var m,g,b,y;const o=a.fields||{},l=i.fields||{},u=(m=o[m2])==null?void 0:m.arrayValue,d=(g=l[m2])==null?void 0:g.arrayValue,h=dn(((b=u==null?void 0:u.values)==null?void 0:b.length)||0,((y=d==null?void 0:d.values)==null?void 0:y.length)||0);return h!==0?h:u3(u,d)}(t.mapValue,e.mapValue);case 11:return function(a,i){if(a===Iv.mapValue&&i===Iv.mapValue)return 0;if(a===Iv.mapValue)return 1;if(i===Iv.mapValue)return-1;const o=a.fields||{},l=Object.keys(o),u=i.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let h=0;h<l.length&&h<d.length;++h){const m=P_(l[h],d[h]);if(m!==0)return m;const g=Mm(o[l[h]],u[d[h]]);if(g!==0)return g}return dn(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Tr(23264,{he:r})}}function c3(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return dn(t,e);const r=pf(t),n=pf(e),s=dn(r.seconds,n.seconds);return s!==0?s:dn(r.nanos,n.nanos)}function u3(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const a=Mm(r[s],n[s]);if(a)return a}return dn(r.length,n.length)}function Pm(t){return j_(t)}function j_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=pf(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return gf(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return dr.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const a of r.values||[])s?s=!1:n+=",",n+=j_(a);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const i of n)a?a=!1:s+=",",s+=`${i}:${j_(r.fields[i])}`;return s+"}"}(t.mapValue):Tr(61005,{value:t})}function Py(t){switch(xf(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Nw(t);return e?16+Py(e):16;case 5:return 2*t.stringValue.length;case 6:return gf(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,a)=>s+Py(a),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Bf(n.fields,(a,i)=>{s+=a.length+Py(i)}),s}(t.mapValue);default:throw Tr(13486,{value:t})}}function A3(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function O_(t){return!!t&&"integerValue"in t}function $5(t){return!!t&&"arrayValue"in t}function d3(t){return!!t&&"nullValue"in t}function f3(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jy(t){return!!t&&"mapValue"in t}function VK(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[n8])==null?void 0:n.stringValue)===s8}function Og(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Bf(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Og(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Og(t.arrayValue.values[r]);return e}return{...t}}function zK(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===HK}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{constructor(e){this.value=e}static empty(){return new No({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!jy(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Og(r)}setAll(e){let r=di.emptyPath(),n={},s=[];e.forEach((i,o)=>{if(!r.isImmediateParentOf(o)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=o.popLast()}i?n[o.lastSegment()]=Og(i):s.push(o.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,n,s)}delete(e){const r=this.field(e.popLast());jy(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Lu(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];jy(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Bf(r,(s,a)=>e[s]=a);for(const s of n)delete e[s]}clone(){return new No(Og(this.value))}}function a8(t){const e=[];return Bf(t.fields,(r,n)=>{const s=new di([r]);if(jy(n)){const a=a8(n.mapValue).fields;if(a.length===0)e.push(s);else for(const i of a)e.push(s.child(i))}else e.push(s)}),new sl(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,r,n,s,a,i,o){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=a,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Oi(e,0,Dr.min(),Dr.min(),Dr.min(),No.empty(),0)}static newFoundDocument(e,r,n,s){return new Oi(e,1,r,Dr.min(),n,s,0)}static newNoDocument(e,r){return new Oi(e,2,r,Dr.min(),Dr.min(),No.empty(),0)}static newUnknownDocument(e,r){return new Oi(e,3,r,Dr.min(),Dr.min(),No.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Dr.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=No.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=No.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dr.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Oi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Oi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,r){this.position=e,this.inclusive=r}}function h3(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const a=e[s],i=t.position[s];if(a.field.isKeyField()?n=dr.comparator(dr.fromName(i.referenceValue),r.key):n=Mm(i,r.data.field(a.field)),a.dir==="desc"&&(n*=-1),n!==0)break}return n}function m3(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Lu(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,r="asc"){this.field=e,this.dir=r}}function GK(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{}class _a extends i8{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new KK(e,r,n):r==="array-contains"?new YK(e,n):r==="in"?new JK(e,n):r==="not-in"?new XK(e,n):r==="array-contains-any"?new ZK(e,n):new _a(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new $K(e,n):new WK(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(Mm(r,this.value)):r!==null&&xf(this.value)===xf(r)&&this.matchesComparison(Mm(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Tr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lc extends i8{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Lc(e,r)}matches(e){return o8(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function o8(t){return t.op==="and"}function l8(t){return qK(t)&&o8(t)}function qK(t){for(const e of t.filters)if(e instanceof Lc)return!1;return!0}function Q_(t){if(t instanceof _a)return t.field.canonicalString()+t.op.toString()+Pm(t.value);if(l8(t))return t.filters.map(e=>Q_(e)).join(",");{const e=t.filters.map(r=>Q_(r)).join(",");return`${t.op}(${e})`}}function c8(t,e){return t instanceof _a?function(n,s){return s instanceof _a&&n.op===s.op&&n.field.isEqual(s.field)&&Lu(n.value,s.value)}(t,e):t instanceof Lc?function(n,s){return s instanceof Lc&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((a,i,o)=>a&&c8(i,s.filters[o]),!0):!1}(t,e):void Tr(19439)}function u8(t){return t instanceof _a?function(r){return`${r.field.canonicalString()} ${r.op} ${Pm(r.value)}`}(t):t instanceof Lc?function(r){return r.op.toString()+" {"+r.getFilters().map(u8).join(" ,")+"}"}(t):"Filter"}class KK extends _a{constructor(e,r,n){super(e,r,n),this.key=dr.fromName(n.referenceValue)}matches(e){const r=dr.comparator(e.key,this.key);return this.matchesComparison(r)}}class $K extends _a{constructor(e,r){super(e,"in",r),this.keys=A8("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class WK extends _a{constructor(e,r){super(e,"not-in",r),this.keys=A8("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function A8(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>dr.fromName(n.referenceValue))}class YK extends _a{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return $5(r)&&mx(r.arrayValue,this.value)}}class JK extends _a{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&mx(this.value.arrayValue,r)}}class XK extends _a{constructor(e,r){super(e,"not-in",r)}matches(e){if(mx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!mx(this.value.arrayValue,r)}}class ZK extends _a{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!$5(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>mx(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e,r=null,n=[],s=[],a=null,i=null,o=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=a,this.startAt=i,this.endAt=o,this.Te=null}}function p3(t,e=null,r=[],n=[],s=null,a=null,i=null){return new e$(t,e,r,n,s,a,i)}function W5(t){const e=Lr(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Q_(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(a){return a.field.canonicalString()+a.dir}(n)).join(","),Tw(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>Pm(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>Pm(n)).join(",")),e.Te=r}return e.Te}function Y5(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!GK(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!c8(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!m3(t.startAt,e.startAt)&&m3(t.endAt,e.endAt)}function H_(t){return dr.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,r=null,n=[],s=[],a=null,i="F",o=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=a,this.limitType=i,this.startAt=o,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function t$(t,e,r,n,s,a,i,o){return new np(t,e,r,n,s,a,i,o)}function Bw(t){return new np(t)}function g3(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function d8(t){return t.collectionGroup!==null}function Qg(t){const e=Lr(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),r.add(a.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let o=new Pa(di.comparator);return i.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new px(a,n))}),r.has(di.keyField().canonicalString())||e.Ie.push(new px(di.keyField(),n))}return e.Ie}function Bu(t){const e=Lr(t);return e.Ee||(e.Ee=r$(e,Qg(t))),e.Ee}function r$(t,e){if(t.limitType==="F")return p3(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new px(s.field,a)});const r=t.endAt?new p2(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new p2(t.startAt.position,t.startAt.inclusive):null;return p3(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function V_(t,e){const r=t.filters.concat([e]);return new np(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function g2(t,e,r){return new np(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function kw(t,e){return Y5(Bu(t),Bu(e))&&t.limitType===e.limitType}function f8(t){return`${W5(Bu(t))}|lt:${t.limitType}`}function Z0(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>u8(s)).join(", ")}]`),Tw(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>Pm(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>Pm(s)).join(",")),`Target(${n})`}(Bu(t))}; limitType=${t.limitType})`}function Iw(t,e){return e.isFoundDocument()&&function(n,s){const a=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(a):dr.isDocumentKey(n.path)?n.path.isEqual(a):n.path.isImmediateParentOf(a)}(t,e)&&function(n,s){for(const a of Qg(n))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const a of n.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(i,o,l){const u=h3(i,o,l);return i.inclusive?u<=0:u<0}(n.startAt,Qg(n),s)||n.endAt&&!function(i,o,l){const u=h3(i,o,l);return i.inclusive?u>=0:u>0}(n.endAt,Qg(n),s))}(t,e)}function n$(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function h8(t){return(e,r)=>{let n=!1;for(const s of Qg(t)){const a=s$(s,e,r);if(a!==0)return a;n=n||s.field.isKeyField()}return 0}}function s$(t,e,r){const n=t.field.isKeyField()?dr.comparator(e.key,r.key):function(a,i,o){const l=i.data.field(a),u=o.data.field(a);return l!==null&&u!==null?Mm(l,u):Tr(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Tr(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,a]of n)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bf(this.inner,(r,n)=>{for(const[s,a]of n)e(s,a)})}isEmpty(){return JU(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a$=new Ds(dr.comparator);function MA(){return a$}const m8=new Ds(dr.comparator);function yg(...t){let e=m8;for(const r of t)e=e.insert(r.key,r);return e}function p8(t){let e=m8;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function dh(){return Hg()}function g8(){return Hg()}function Hg(){return new zh(t=>t.toString(),(t,e)=>t.isEqual(e))}const i$=new Ds(dr.comparator),o$=new Pa(dr.comparator);function fn(...t){let e=o$;for(const r of t)e=e.add(r);return e}const l$=new Pa(dn);function c$(){return l$}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J5(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:f2(e)?"-0":e}}function x8(t){return{integerValue:""+t}}function u$(t,e){return MK(e)?x8(e):J5(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this._=void 0}}function A$(t,e,r){return t instanceof gx?function(s,a){const i={fields:{[e8]:{stringValue:ZU},[r8]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&K5(a)&&(a=Nw(a)),a&&(i.fields[t8]=a),{mapValue:i}}(r,e):t instanceof jm?y8(t,e):t instanceof xx?w8(t,e):function(s,a){const i=v8(s,a),o=x3(i)+x3(s.Ae);return O_(i)&&O_(s.Ae)?x8(o):J5(s.serializer,o)}(t,e)}function d$(t,e,r){return t instanceof jm?y8(t,e):t instanceof xx?w8(t,e):r}function v8(t,e){return t instanceof x2?function(n){return O_(n)||function(a){return!!a&&"doubleValue"in a}(n)}(e)?e:{integerValue:0}:null}class gx extends Fw{}class jm extends Fw{constructor(e){super(),this.elements=e}}function y8(t,e){const r=b8(e);for(const n of t.elements)r.some(s=>Lu(s,n))||r.push(n);return{arrayValue:{values:r}}}class xx extends Fw{constructor(e){super(),this.elements=e}}function w8(t,e){let r=b8(e);for(const n of t.elements)r=r.filter(s=>!Lu(s,n));return{arrayValue:{values:r}}}class x2 extends Fw{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function x3(t){return aa(t.integerValue||t.doubleValue)}function b8(t){return $5(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e,r){this.field=e,this.transform=r}}function f$(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof jm&&s instanceof jm||n instanceof xx&&s instanceof xx?Um(n.elements,s.elements,Lu):n instanceof x2&&s instanceof x2?Lu(n.Ae,s.Ae):n instanceof gx&&s instanceof gx}(t.transform,e.transform)}class h${constructor(e,r){this.version=e,this.transformResults=r}}class io{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new io}static exists(e){return new io(void 0,e)}static updateTime(e){return new io(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Oy(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Dw{}function E8(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Rw(t.key,io.none()):new r1(t.key,t.data,io.none());{const r=t.data,n=No.empty();let s=new Pa(di.comparator);for(let a of e.fields)if(!s.has(a)){let i=r.field(a);i===null&&a.length>1&&(a=a.popLast(),i=r.field(a)),i===null?n.delete(a):n.set(a,i),s=s.add(a)}return new kf(t.key,n,new sl(s.toArray()),io.none())}}function m$(t,e,r){t instanceof r1?function(s,a,i){const o=s.value.clone(),l=y3(s.fieldTransforms,a,i.transformResults);o.setAll(l),a.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,r):t instanceof kf?function(s,a,i){if(!Oy(s.precondition,a))return void a.convertToUnknownDocument(i.version);const o=y3(s.fieldTransforms,a,i.transformResults),l=a.data;l.setAll(_8(s)),l.setAll(o),a.convertToFoundDocument(i.version,l).setHasCommittedMutations()}(t,e,r):function(s,a,i){a.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,r)}function Vg(t,e,r,n){return t instanceof r1?function(a,i,o,l){if(!Oy(a.precondition,i))return o;const u=a.value.clone(),d=w3(a.fieldTransforms,l,i);return u.setAll(d),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof kf?function(a,i,o,l){if(!Oy(a.precondition,i))return o;const u=w3(a.fieldTransforms,l,i),d=i.data;return d.setAll(_8(a)),d.setAll(u),i.convertToFoundDocument(i.version,d).setHasLocalMutations(),o===null?null:o.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,r,n):function(a,i,o){return Oy(a.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,r)}function p$(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),a=v8(n.transform,s||null);a!=null&&(r===null&&(r=No.empty()),r.set(n.field,a))}return r||null}function v3(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&Um(n,s,(a,i)=>f$(a,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class r1 extends Dw{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class kf extends Dw{constructor(e,r,n,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function _8(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function y3(t,e,r){const n=new Map;Pn(t.length===r.length,32656,{Re:r.length,Ve:t.length});for(let s=0;s<r.length;s++){const a=t[s],i=a.transform,o=e.data.field(a.field);n.set(a.field,d$(i,o,r[s]))}return n}function w3(t,e,r){const n=new Map;for(const s of t){const a=s.transform,i=r.data.field(s.field);n.set(s.field,A$(a,i,e))}return n}class Rw extends Dw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g$ extends Dw{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x${constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&m$(a,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Vg(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Vg(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=g8();return this.mutations.forEach(s=>{const a=e.get(s.key),i=a.overlayedDocument;let o=this.applyToLocalView(i,a.mutatedFields);o=r.has(s.key)?null:o;const l=E8(i,o);l!==null&&n.set(s.key,l),i.isValidDocument()||i.convertToNoDocument(Dr.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),fn())}isEqual(e){return this.batchId===e.batchId&&Um(this.mutations,e.mutations,(r,n)=>v3(r,n))&&Um(this.baseMutations,e.baseMutations,(r,n)=>v3(r,n))}}class X5{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Pn(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return i$}();const a=e.mutations;for(let i=0;i<a.length;i++)s=s.insert(a[i].key,n[i].version);return new X5(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v${constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y${constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wa,bn;function w$(t){switch(t){case mt.OK:return Tr(64938);case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0;default:return Tr(15467,{code:t})}}function S8(t){if(t===void 0)return UA("GRPC error has no .code"),mt.UNKNOWN;switch(t){case wa.OK:return mt.OK;case wa.CANCELLED:return mt.CANCELLED;case wa.UNKNOWN:return mt.UNKNOWN;case wa.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case wa.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case wa.INTERNAL:return mt.INTERNAL;case wa.UNAVAILABLE:return mt.UNAVAILABLE;case wa.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case wa.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case wa.NOT_FOUND:return mt.NOT_FOUND;case wa.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case wa.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case wa.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case wa.ABORTED:return mt.ABORTED;case wa.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case wa.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case wa.DATA_LOSS:return mt.DATA_LOSS;default:return Tr(39323,{code:t})}}(bn=wa||(wa={}))[bn.OK=0]="OK",bn[bn.CANCELLED=1]="CANCELLED",bn[bn.UNKNOWN=2]="UNKNOWN",bn[bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bn[bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bn[bn.NOT_FOUND=5]="NOT_FOUND",bn[bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",bn[bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",bn[bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",bn[bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bn[bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bn[bn.ABORTED=10]="ABORTED",bn[bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",bn[bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",bn[bn.INTERNAL=13]="INTERNAL",bn[bn.UNAVAILABLE=14]="UNAVAILABLE",bn[bn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C$=new sf([4294967295,4294967295],0);function b3(t){const e=b$().encode(t),r=new OU;return r.update(e),new Uint8Array(r.digest())}function C3(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new sf([r,n],0),new sf([s,a],0)]}class Z5{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new wg(`Invalid padding: ${r}`);if(n<0)throw new wg(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new wg(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new wg(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=sf.fromNumber(this.ge)}ye(e,r,n){let s=e.add(r.multiply(sf.fromNumber(n)));return s.compare(C$)===1&&(s=new sf([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=b3(e),[n,s]=C3(r);for(let a=0;a<this.hashCount;a++){const i=this.ye(n,s,a);if(!this.we(i))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),i=new Z5(a,s,r);return n.forEach(o=>i.insert(o)),i}insert(e){if(this.ge===0)return;const r=b3(e),[n,s]=C3(r);for(let a=0;a<this.hashCount;a++){const i=this.ye(n,s,a);this.Se(i)}}Se(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class wg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(e,r,n,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,n1.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Lw(Dr.min(),s,new Ds(dn),MA(),fn())}}class n1{constructor(e,r,n,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new n1(n,r,fn(),fn(),fn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e,r,n,s){this.be=e,this.removedTargetIds=r,this.key=n,this.De=s}}class T8{constructor(e,r){this.targetId=e,this.Ce=r}}class N8{constructor(e,r,n=mi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class E3{constructor(){this.ve=0,this.Fe=_3(),this.Me=mi.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=fn(),r=fn(),n=fn();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:Tr(38017,{changeType:a})}}),new n1(this.Me,this.xe,e,r,n)}qe(){this.Oe=!1,this.Fe=_3()}Qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class E${constructor(e){this.Ge=e,this.ze=new Map,this.je=MA(),this.Je=Fv(),this.He=Fv(),this.Ye=new Ds(dn)}Ze(e){for(const r of e.be)e.De&&e.De.isFoundDocument()?this.Xe(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:Tr(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,n=e.Ce.count,s=this.ot(r);if(s){const a=s.target;if(H_(a))if(n===0){const i=new dr(a.path);this.et(r,i,Oi.newNoDocument(i,Dr.min()))}else Pn(n===1,20013,{expectedCount:n});else{const i=this._t(r);if(i!==n){const o=this.ut(e),l=o?this.ct(o,e,i):1;if(l!==0){this.it(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(r,u)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=r;let i,o;try{i=gf(n).toUint8Array()}catch(l){if(l instanceof XU)return Lm("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{o=new Z5(i,s,a)}catch(l){return Lm(l instanceof wg?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return o.ge===0?null:o}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let s=0;return n.forEach(a=>{const i=this.Ge.ht(),o=`projects/${i.projectId}/databases/${i.database}/documents/${a.path.canonicalString()}`;e.mightContain(o)||(this.et(r,a,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((a,i)=>{const o=this.ot(i);if(o){if(a.current&&H_(o.target)){const l=new dr(o.target.path);this.It(l).has(i)||this.Et(i,l)||this.et(i,l,Oi.newNoDocument(l,e))}a.Be&&(r.set(i,a.ke()),a.qe())}});let n=fn();this.He.forEach((a,i)=>{let o=!0;i.forEachWhile(l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(a))}),this.je.forEach((a,i)=>i.setReadTime(e));const s=new Lw(e,r,this.Ye,this.je,n);return this.je=MA(),this.Je=Fv(),this.He=Fv(),this.Ye=new Ds(dn),s}Xe(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).Qe(r.key,n),this.je=this.je.insert(r.key,r),this.Je=this.Je.insert(r.key,this.It(r.key).add(e)),this.He=this.He.insert(r.key,this.dt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.Qe(r,1):s.$e(r),this.He=this.He.insert(r,this.dt(r).delete(e)),this.He=this.He.insert(r,this.dt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let r=this.ze.get(e);return r||(r=new E3,this.ze.set(e,r)),r}dt(e){let r=this.He.get(e);return r||(r=new Pa(dn),this.He=this.He.insert(e,r)),r}It(e){let r=this.Je.get(e);return r||(r=new Pa(dn),this.Je=this.Je.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||er("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new E3),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Fv(){return new Ds(dr.comparator)}function _3(){return new Ds(dr.comparator)}const _$={asc:"ASCENDING",desc:"DESCENDING"},S$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T$={and:"AND",or:"OR"};class N${constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function z_(t,e){return t.useProto3Json||Tw(e)?e:{value:e}}function v2(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function B8(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function B$(t,e){return v2(t,e.toTimestamp())}function ku(t){return Pn(!!t,49232),Dr.fromTimestamp(function(r){const n=pf(r);return new or(n.seconds,n.nanos)}(t))}function e4(t,e){return G_(t,e).canonicalString()}function G_(t,e){const r=function(s){return new ls(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function k8(t){const e=ls.fromString(t);return Pn(L8(e),10190,{key:e.toString()}),e}function q_(t,e){return e4(t.databaseId,e.path)}function nE(t,e){const r=k8(e);if(r.get(1)!==t.databaseId.projectId)throw new Kt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Kt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new dr(F8(r))}function I8(t,e){return e4(t.databaseId,e)}function k$(t){const e=k8(t);return e.length===4?ls.emptyPath():F8(e)}function K_(t){return new ls(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function F8(t){return Pn(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function S3(t,e,r){return{name:q_(t,e),fields:r.value.mapValue.fields}}function I$(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Tr(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,d){return u.useProto3Json?(Pn(d===void 0||typeof d=="string",58123),mi.fromBase64String(d||"")):(Pn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),mi.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),i=e.targetChange.cause,o=i&&function(u){const d=u.code===void 0?mt.UNKNOWN:S8(u.code);return new Kt(d,u.message||"")}(i);r=new N8(n,s,a,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=nE(t,n.document.name),a=ku(n.document.updateTime),i=n.document.createTime?ku(n.document.createTime):Dr.min(),o=new No({mapValue:{fields:n.document.fields}}),l=Oi.newFoundDocument(s,a,i,o),u=n.targetIds||[],d=n.removedTargetIds||[];r=new Qy(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=nE(t,n.document),a=n.readTime?ku(n.readTime):Dr.min(),i=Oi.newNoDocument(s,a),o=n.removedTargetIds||[];r=new Qy([],o,i.key,i)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=nE(t,n.document),a=n.removedTargetIds||[];r=new Qy([],a,s,null)}else{if(!("filter"in e))return Tr(11601,{Rt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:a}=n,i=new y$(s,a),o=n.targetId;r=new T8(o,i)}}return r}function F$(t,e){let r;if(e instanceof r1)r={update:S3(t,e.key,e.value)};else if(e instanceof Rw)r={delete:q_(t,e.key)};else if(e instanceof kf)r={update:S3(t,e.key,e.data),updateMask:Q$(e.fieldMask)};else{if(!(e instanceof g$))return Tr(16599,{Vt:e.type});r={verify:q_(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(a,i){const o=i.transform;if(o instanceof gx)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof jm)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof xx)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof x2)return{fieldPath:i.field.canonicalString(),increment:o.Ae};throw Tr(20930,{transform:i.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:B$(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Tr(27497)}(t,e.precondition)),r}function D$(t,e){return t&&t.length>0?(Pn(e!==void 0,14353),t.map(r=>function(s,a){let i=s.updateTime?ku(s.updateTime):ku(a);return i.isEqual(Dr.min())&&(i=ku(a)),new h$(i,s.transformResults||[])}(r,e))):[]}function R$(t,e){return{documents:[I8(t,e.path)]}}function L$(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=I8(t,s);const a=function(u){if(u.length!==0)return R8(Lc.create(u,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const i=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:em(m.field),direction:P$(m.dir)}}(d))}(e.orderBy);i&&(r.structuredQuery.orderBy=i);const o=z_(t,e.limit);return o!==null&&(r.structuredQuery.limit=o),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:r,parent:s}}function U$(t){let e=k$(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Pn(n===1,65062);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=function(h){const m=D8(h);return m instanceof Lc&&l8(m)?m.getFilters():[m]}(r.where));let i=[];r.orderBy&&(i=function(h){return h.map(m=>function(b){return new px(tm(b.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(r.orderBy));let o=null;r.limit&&(o=function(h){let m;return m=typeof h=="object"?h.value:h,Tw(m)?null:m}(r.limit));let l=null;r.startAt&&(l=function(h){const m=!!h.before,g=h.values||[];return new p2(g,m)}(r.startAt));let u=null;return r.endAt&&(u=function(h){const m=!h.before,g=h.values||[];return new p2(g,m)}(r.endAt)),t$(e,s,i,a,o,"F",l,u)}function M$(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Tr(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function D8(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=tm(r.unaryFilter.field);return _a.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=tm(r.unaryFilter.field);return _a.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=tm(r.unaryFilter.field);return _a.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=tm(r.unaryFilter.field);return _a.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Tr(61313);default:return Tr(60726)}}(t):t.fieldFilter!==void 0?function(r){return _a.create(tm(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Tr(58110);default:return Tr(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Lc.create(r.compositeFilter.filters.map(n=>D8(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Tr(1026)}}(r.compositeFilter.op))}(t):Tr(30097,{filter:t})}function P$(t){return _$[t]}function j$(t){return S$[t]}function O$(t){return T$[t]}function em(t){return{fieldPath:t.canonicalString()}}function tm(t){return di.fromServerFormat(t.fieldPath)}function R8(t){return t instanceof _a?function(r){if(r.op==="=="){if(f3(r.value))return{unaryFilter:{field:em(r.field),op:"IS_NAN"}};if(d3(r.value))return{unaryFilter:{field:em(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(f3(r.value))return{unaryFilter:{field:em(r.field),op:"IS_NOT_NAN"}};if(d3(r.value))return{unaryFilter:{field:em(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:em(r.field),op:j$(r.op),value:r.value}}}(t):t instanceof Lc?function(r){const n=r.getFilters().map(s=>R8(s));return n.length===1?n[0]:{compositeFilter:{op:O$(r.op),filters:n}}}(t):Tr(54877,{filter:t})}function Q$(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function L8(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,r,n,s,a=Dr.min(),i=Dr.min(),o=mi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=l}withSequenceNumber(e){return new $d(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $d(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(e){this.yt=e}}function V$(t){const e=U$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?g2(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(){this.Cn=new G$}addToCollectionParentIndex(e,r){return this.Cn.add(r),Ct.resolve()}getCollectionParents(e,r){return Ct.resolve(this.Cn.getEntries(r))}addFieldIndex(e,r){return Ct.resolve()}deleteFieldIndex(e,r){return Ct.resolve()}deleteAllFieldIndexes(e){return Ct.resolve()}createTargetIndexes(e,r){return Ct.resolve()}getDocumentsMatchingTarget(e,r){return Ct.resolve(null)}getIndexType(e,r){return Ct.resolve(0)}getFieldIndexes(e,r){return Ct.resolve([])}getNextCollectionGroupToUpdate(e){return Ct.resolve(null)}getMinOffset(e,r){return Ct.resolve(mf.min())}getMinOffsetFromCollectionGroup(e,r){return Ct.resolve(mf.min())}updateCollectionGroup(e,r,n){return Ct.resolve()}updateIndexEntries(e,r){return Ct.resolve()}}class G${constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new Pa(ls.comparator),a=!s.has(n);return this.index[r]=s.add(n),a}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new Pa(ls.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},U8=41943040;class So{static withCacheSize(e){return new So(e,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */So.DEFAULT_COLLECTION_PERCENTILE=10,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,So.DEFAULT=new So(U8,So.DEFAULT_COLLECTION_PERCENTILE,So.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),So.DISABLED=new So(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Om(0)}static cr(){return new Om(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3="LruGarbageCollector",q$=1048576;function B3([t,e],[r,n]){const s=dn(t,r);return s===0?dn(e,n):s}class K${constructor(e){this.Ir=e,this.buffer=new Pa(B3),this.Er=0}dr(){return++this.Er}Ar(e){const r=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();B3(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class $${constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){er(N3,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){rp(r)?er(N3,"Ignoring IndexedDB error during garbage collection: ",r):await tp(r)}await this.Vr(3e5)})}}class W${constructor(e,r){this.mr=e,this.params=r}calculateTargetCount(e,r){return this.mr.gr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return Ct.resolve(Sw.ce);const n=new K$(r);return this.mr.forEachTarget(e,s=>n.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>n.Ar(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.mr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.mr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(er("LruGarbageCollector","Garbage collection skipped; disabled"),Ct.resolve(T3)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(er("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T3):this.yr(e,r))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,r){let n,s,a,i,o,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(er("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,i=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(n=h,o=Date.now(),this.removeTargets(e,n,r))).next(h=>(a=h,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(h=>(u=Date.now(),X0()<=An.DEBUG&&er("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-d}ms
	Determined least recently used ${s} in `+(o-i)+`ms
	Removed ${a} targets in `+(l-o)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),Ct.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function Y$(t,e){return new W$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(){this.changes=new zh(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Oi.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ct.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X${constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z${constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Vg(n.mutation,s,sl.empty(),or.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,fn()).next(()=>n))}getLocalViewOfDocuments(e,r,n=fn()){const s=dh();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(a=>{let i=yg();return a.forEach((o,l)=>{i=i.insert(o,l.overlayedDocument)}),i}))}getOverlayedDocuments(e,r){const n=dh();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,fn()))}populateOverlays(e,r,n){const s=[];return n.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((i,o)=>{r.set(i,o)})})}computeViews(e,r,n,s){let a=MA();const i=Hg(),o=function(){return Hg()}();return r.forEach((l,u)=>{const d=n.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof kf)?a=a.insert(u.key,u):d!==void 0?(i.set(u.key,d.mutation.getFieldMask()),Vg(d.mutation,u,d.mutation.getFieldMask(),or.now())):i.set(u.key,sl.empty())}),this.recalculateAndSaveOverlays(e,a).next(l=>(l.forEach((u,d)=>i.set(u,d)),r.forEach((u,d)=>o.set(u,new X$(d,i.get(u)??null))),o))}recalculateAndSaveOverlays(e,r){const n=Hg();let s=new Ds((i,o)=>i-o),a=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(i=>{for(const o of i)o.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let d=n.get(l)||sl.empty();d=o.applyToLocalView(u,d),n.set(l,d);const h=(s.get(o.batchId)||fn()).add(l);s=s.insert(o.batchId,h)})}).next(()=>{const i=[],o=s.getReverseIterator();for(;o.hasNext();){const l=o.getNext(),u=l.key,d=l.value,h=g8();d.forEach(m=>{if(!a.has(m)){const g=E8(r.get(m),n.get(m));g!==null&&h.set(m,g),a=a.add(m)}}),i.push(this.documentOverlayCache.saveOverlays(e,u,h))}return Ct.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(i){return dr.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):d8(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(a=>{const i=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-a.size):Ct.resolve(dh());let o=dx,l=a;return i.next(u=>Ct.forEach(u,(d,h)=>(o<h.largestBatchId&&(o=h.largestBatchId),a.get(d)?Ct.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,l,u,fn())).next(d=>({batchId:o,changes:p8(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new dr(r)).next(n=>{let s=yg();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const a=r.collectionGroup;let i=yg();return this.indexManager.getCollectionParents(e,a).next(o=>Ct.forEach(o,l=>{const u=function(h,m){return new np(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,l.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next(d=>{d.forEach((h,m)=>{i=i.insert(h,m)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,r,n,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,a,s))).next(i=>{a.forEach((l,u)=>{const d=u.getKey();i.get(d)===null&&(i=i.insert(d,Oi.newInvalidDocument(d)))});let o=yg();return i.forEach((l,u)=>{const d=a.get(l);d!==void 0&&Vg(d.mutation,u,sl.empty(),or.now()),Iw(r,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eW{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,r){return Ct.resolve(this.Lr.get(r))}saveBundleMetadata(e,r){return this.Lr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ku(s.createTime)}}(r)),Ct.resolve()}getNamedQuery(e,r){return Ct.resolve(this.kr.get(r))}saveNamedQuery(e,r){return this.kr.set(r.name,function(s){return{name:s.name,query:V$(s.bundledQuery),readTime:ku(s.readTime)}}(r)),Ct.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tW{constructor(){this.overlays=new Ds(dr.comparator),this.qr=new Map}getOverlay(e,r){return Ct.resolve(this.overlays.get(r))}getOverlays(e,r){const n=dh();return Ct.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&n.set(s,a)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,a)=>{this.St(e,r,a)}),Ct.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.qr.get(n);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(n)),Ct.resolve()}getOverlaysForCollection(e,r,n){const s=dh(),a=r.length+1,i=new dr(r.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const l=o.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===a&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Ct.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let a=new Ds((u,d)=>u-d);const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let d=a.get(u.largestBatchId);d===null&&(d=dh(),a=a.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=dh(),l=a.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>o.set(u,d)),!(o.size()>=s)););return Ct.resolve(o)}St(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const i=this.qr.get(s.largestBatchId).delete(n.key);this.qr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new v$(r,n));let a=this.qr.get(r);a===void 0&&(a=fn(),this.qr.set(r,a)),this.qr.set(r,a.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rW{constructor(){this.sessionToken=mi.EMPTY_BYTE_STRING}getSessionToken(e){return Ct.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ct.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(){this.Qr=new Pa(Wa.$r),this.Ur=new Pa(Wa.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,r){const n=new Wa(e,r);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Gr(new Wa(e,r))}zr(e,r){e.forEach(n=>this.removeReference(n,r))}jr(e){const r=new dr(new ls([])),n=new Wa(r,e),s=new Wa(r,e+1),a=[];return this.Ur.forEachInRange([n,s],i=>{this.Gr(i),a.push(i.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const r=new dr(new ls([])),n=new Wa(r,e),s=new Wa(r,e+1);let a=fn();return this.Ur.forEachInRange([n,s],i=>{a=a.add(i.key)}),a}containsKey(e){const r=new Wa(e,0),n=this.Qr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Wa{constructor(e,r){this.key=e,this.Yr=r}static $r(e,r){return dr.comparator(e.key,r.key)||dn(e.Yr,r.Yr)}static Kr(e,r){return dn(e.Yr,r.Yr)||dr.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nW{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.tr=1,this.Zr=new Pa(Wa.$r)}checkEmpty(e){return Ct.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new x$(a,r,n,s);this.mutationQueue.push(i);for(const o of s)this.Zr=this.Zr.add(new Wa(o.key,a)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ct.resolve(i)}lookupMutationBatch(e,r){return Ct.resolve(this.Xr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.ei(n),a=s<0?0:s;return Ct.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Ct.resolve(this.mutationQueue.length===0?q5:this.tr-1)}getAllMutationBatches(e){return Ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Wa(r,0),s=new Wa(r,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,s],i=>{const o=this.Xr(i.Yr);a.push(o)}),Ct.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new Pa(dn);return r.forEach(s=>{const a=new Wa(s,0),i=new Wa(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,i],o=>{n=n.add(o.Yr)})}),Ct.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let a=n;dr.isDocumentKey(a)||(a=a.child(""));const i=new Wa(new dr(a),0);let o=new Pa(dn);return this.Zr.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(o=o.add(l.Yr)),!0)},i),Ct.resolve(this.ti(o))}ti(e){const r=[];return e.forEach(n=>{const s=this.Xr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Pn(this.ni(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Zr;return Ct.forEach(r.mutations,s=>{const a=new Wa(s.key,r.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,r){const n=new Wa(r,0),s=this.Zr.firstAfterOrEqual(n);return Ct.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ct.resolve()}ni(e,r){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const r=this.ei(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sW{constructor(e){this.ri=e,this.docs=function(){return new Ds(dr.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),a=s?s.size:0,i=this.ri(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ct.resolve(n?n.document.mutableCopy():Oi.newInvalidDocument(r))}getEntries(e,r){let n=MA();return r.forEach(s=>{const a=this.docs.get(s);n=n.insert(s,a?a.document.mutableCopy():Oi.newInvalidDocument(s))}),Ct.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let a=MA();const i=r.path,o=new dr(i.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(o);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||DK(FK(d),n)<=0||(s.has(d.key)||Iw(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return Ct.resolve(a)}getAllFromCollectionGroup(e,r,n,s){Tr(9500)}ii(e,r){return Ct.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new aW(this)}getSize(e){return Ct.resolve(this.size)}}class aW extends J${constructor(e){super(),this.Nr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(n)}),Ct.waitFor(r)}getFromCache(e,r){return this.Nr.getEntry(e,r)}getAllFromCache(e,r){return this.Nr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e){this.persistence=e,this.si=new zh(r=>W5(r),Y5),this.lastRemoteSnapshotVersion=Dr.min(),this.highestTargetId=0,this.oi=0,this._i=new t4,this.targetCount=0,this.ai=Om.ur()}forEachTarget(e,r){return this.si.forEach((n,s)=>r(s)),Ct.resolve()}getLastRemoteSnapshotVersion(e){return Ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ct.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ct.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.oi&&(this.oi=r),Ct.resolve()}Pr(e){this.si.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.ai=new Om(r),this.highestTargetId=r),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,r){return this.Pr(r),this.targetCount+=1,Ct.resolve()}updateTargetData(e,r){return this.Pr(r),Ct.resolve()}removeTargetData(e,r){return this.si.delete(r.target),this._i.jr(r.targetId),this.targetCount-=1,Ct.resolve()}removeTargets(e,r,n){let s=0;const a=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=r&&n.get(o.targetId)===null&&(this.si.delete(i),a.push(this.removeMatchingKeysForTargetId(e,o.targetId)),s++)}),Ct.waitFor(a).next(()=>s)}getTargetCount(e){return Ct.resolve(this.targetCount)}getTargetData(e,r){const n=this.si.get(r)||null;return Ct.resolve(n)}addMatchingKeys(e,r,n){return this._i.Wr(r,n),Ct.resolve()}removeMatchingKeys(e,r,n){this._i.zr(r,n);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(i=>{a.push(s.markPotentiallyOrphaned(e,i))}),Ct.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this._i.jr(r),Ct.resolve()}getMatchingKeysForTargetId(e,r){const n=this._i.Hr(r);return Ct.resolve(n)}containsKey(e,r){return Ct.resolve(this._i.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M8{constructor(e,r){this.ui={},this.overlays={},this.ci=new Sw(0),this.li=!1,this.li=!0,this.hi=new rW,this.referenceDelegate=e(this),this.Pi=new iW(this),this.indexManager=new z$,this.remoteDocumentCache=function(s){return new sW(s)}(n=>this.referenceDelegate.Ti(n)),this.serializer=new H$(r),this.Ii=new eW(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new tW,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.ui[e.toKey()];return n||(n=new nW(r,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,r,n){er("MemoryPersistence","Starting transaction:",e);const s=new oW(this.ci.next());return this.referenceDelegate.Ei(),n(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,r){return Ct.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,r)))}}class oW extends LK{constructor(e){super(),this.currentSequenceNumber=e}}class r4{constructor(e){this.persistence=e,this.Ri=new t4,this.Vi=null}static mi(e){return new r4(e)}get fi(){if(this.Vi)return this.Vi;throw Tr(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.fi.delete(n.toString()),Ct.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.fi.add(n.toString()),Ct.resolve()}markPotentiallyOrphaned(e,r){return this.fi.add(r.toString()),Ct.resolve()}removeTarget(e,r){this.Ri.jr(r.targetId).forEach(s=>this.fi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>n.removeTargetData(e,r))}Ei(){this.Vi=new Set}di(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ct.forEach(this.fi,n=>{const s=dr.fromPath(n);return this.gi(e,s).next(a=>{a||r.removeEntry(s,Dr.min())})}).next(()=>(this.Vi=null,r.apply(e)))}updateLimboDocument(e,r){return this.gi(e,r).next(n=>{n?this.fi.delete(r.toString()):this.fi.add(r.toString())})}Ti(e){return 0}gi(e,r){return Ct.or([()=>Ct.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ai(e,r)])}}class y2{constructor(e,r){this.persistence=e,this.pi=new zh(n=>PK(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=Y$(this,r)}static mi(e,r){return new y2(e,r)}Ei(){}di(e){return Ct.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}gr(e){const r=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}wr(e){let r=0;return this.pr(e,n=>{r++}).next(()=>r)}pr(e,r){return Ct.forEach(this.pi,(n,s)=>this.br(e,n,s).next(a=>a?Ct.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,i=>this.br(e,i,r).next(o=>{o||(n++,a.removeEntry(i,Dr.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.pi.set(r,e.currentSequenceNumber),Ct.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ct.resolve()}removeReference(e,r,n){return this.pi.set(n,e.currentSequenceNumber),Ct.resolve()}updateLimboDocument(e,r){return this.pi.set(r,e.currentSequenceNumber),Ct.resolve()}Ti(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Py(e.data.value)),r}br(e,r,n){return Ct.or([()=>this.persistence.Ai(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.pi.get(r);return Ct.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Es=n,this.ds=s}static As(e,r){let n=fn(),s=fn();for(const a of r.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new n4(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lW{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cW{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return PV()?8:UK(Ki())>0?6:4}()}initialize(e,r){this.ps=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,s){const a={result:null};return this.ys(e,r).next(i=>{a.result=i}).next(()=>{if(!a.result)return this.ws(e,r,s,n).next(i=>{a.result=i})}).next(()=>{if(a.result)return;const i=new lW;return this.Ss(e,r,i).next(o=>{if(a.result=o,this.Vs)return this.bs(e,r,i,o.size)})}).next(()=>a.result)}bs(e,r,n,s){return n.documentReadCount<this.fs?(X0()<=An.DEBUG&&er("QueryEngine","SDK will not create cache indexes for query:",Z0(r),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ct.resolve()):(X0()<=An.DEBUG&&er("QueryEngine","Query:",Z0(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.gs*s?(X0()<=An.DEBUG&&er("QueryEngine","The SDK decides to create cache indexes for query:",Z0(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bu(r))):Ct.resolve())}ys(e,r){if(g3(r))return Ct.resolve(null);let n=Bu(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=g2(r,null,"F"),n=Bu(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(a=>{const i=fn(...a);return this.ps.getDocuments(e,i).next(o=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.Ds(r,o);return this.Cs(r,u,i,l.readTime)?this.ys(e,g2(r,null,"F")):this.vs(e,u,r,l)}))})))}ws(e,r,n,s){return g3(r)||s.isEqual(Dr.min())?Ct.resolve(null):this.ps.getDocuments(e,n).next(a=>{const i=this.Ds(r,a);return this.Cs(r,i,n,s)?Ct.resolve(null):(X0()<=An.DEBUG&&er("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Z0(r)),this.vs(e,i,r,IK(s,dx)).next(o=>o))})}Ds(e,r){let n=new Pa(h8(e));return r.forEach((s,a)=>{Iw(e,a)&&(n=n.add(a))}),n}Cs(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,r,n){return X0()<=An.DEBUG&&er("QueryEngine","Using full collection scan to execute query:",Z0(r)),this.ps.getDocumentsMatchingQuery(e,r,mf.min(),n)}vs(e,r,n,s){return this.ps.getDocumentsMatchingQuery(e,n,s).next(a=>(r.forEach(i=>{a=a.insert(i.key,i)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4="LocalStore",uW=3e8;class AW{constructor(e,r,n,s){this.persistence=e,this.Fs=r,this.serializer=s,this.Ms=new Ds(dn),this.xs=new zh(a=>W5(a),Y5),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Z$(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ms))}}function dW(t,e,r,n){return new AW(t,e,r,n)}async function P8(t,e){const r=Lr(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(a=>(s=a,r.Bs(e),r.mutationQueue.getAllMutationBatches(n))).next(a=>{const i=[],o=[];let l=fn();for(const u of s){i.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of a){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return r.localDocuments.getDocuments(n,l).next(u=>({Ls:u,removedBatchIds:i,addedBatchIds:o}))})})}function fW(t,e){const r=Lr(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),a=r.Ns.newChangeBuffer({trackRemovals:!0});return function(o,l,u,d){const h=u.batch,m=h.keys();let g=Ct.resolve();return m.forEach(b=>{g=g.next(()=>d.getEntry(l,b)).next(y=>{const _=u.docVersions.get(b);Pn(_!==null,48541),y.version.compareTo(_)<0&&(h.applyToRemoteDocument(y,u),y.isValidDocument()&&(y.setReadTime(u.commitVersion),d.addEntry(y)))})}),g.next(()=>o.mutationQueue.removeMutationBatch(l,h))}(r,n,e,a).next(()=>a.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let l=fn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function j8(t){const e=Lr(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Pi.getLastRemoteSnapshotVersion(r))}function hW(t,e){const r=Lr(t),n=e.snapshotVersion;let s=r.Ms;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const i=r.Ns.newChangeBuffer({trackRemovals:!0});s=r.Ms;const o=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;o.push(r.Pi.removeMatchingKeys(a,d.removedDocuments,h).next(()=>r.Pi.addMatchingKeys(a,d.addedDocuments,h)));let g=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken(mi.EMPTY_BYTE_STRING,Dr.min()).withLastLimboFreeSnapshotVersion(Dr.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,n)),s=s.insert(h,g),function(y,_,T){return y.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=uW?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(m,g,d)&&o.push(r.Pi.updateTargetData(a,g))});let l=MA(),u=fn();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))}),o.push(mW(a,i,e.documentUpdates).next(d=>{l=d.ks,u=d.qs})),!n.isEqual(Dr.min())){const d=r.Pi.getLastRemoteSnapshotVersion(a).next(h=>r.Pi.setTargetsMetadata(a,a.currentSequenceNumber,n));o.push(d)}return Ct.waitFor(o).next(()=>i.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,l,u)).next(()=>l)}).then(a=>(r.Ms=s,a))}function mW(t,e,r){let n=fn(),s=fn();return r.forEach(a=>n=n.add(a)),e.getEntries(t,n).next(a=>{let i=MA();return r.forEach((o,l)=>{const u=a.get(o);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(o)),l.isNoDocument()&&l.version.isEqual(Dr.min())?(e.removeEntry(o,l.readTime),i=i.insert(o,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),i=i.insert(o,l)):er(s4,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",l.version)}),{ks:i,qs:s}})}function pW(t,e){const r=Lr(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=q5),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function gW(t,e){const r=Lr(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Pi.getTargetData(n,e).next(a=>a?(s=a,Ct.resolve(s)):r.Pi.allocateTargetId(n).next(i=>(s=new $d(e,i,"TargetPurposeListen",n.currentSequenceNumber),r.Pi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.Ms.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ms=r.Ms.insert(n.targetId,n),r.xs.set(e,n.targetId)),n})}async function $_(t,e,r){const n=Lr(t),s=n.Ms.get(e),a=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",a,i=>n.persistence.referenceDelegate.removeTarget(i,s))}catch(i){if(!rp(i))throw i;er(s4,`Failed to update sequence numbers for target ${e}: ${i}`)}n.Ms=n.Ms.remove(e),n.xs.delete(s.target)}function k3(t,e,r){const n=Lr(t);let s=Dr.min(),a=fn();return n.persistence.runTransaction("Execute query","readwrite",i=>function(l,u,d){const h=Lr(l),m=h.xs.get(d);return m!==void 0?Ct.resolve(h.Ms.get(m)):h.Pi.getTargetData(u,d)}(n,i,Bu(e)).next(o=>{if(o)return s=o.lastLimboFreeSnapshotVersion,n.Pi.getMatchingKeysForTargetId(i,o.targetId).next(l=>{a=l})}).next(()=>n.Fs.getDocumentsMatchingQuery(i,e,r?s:Dr.min(),r?a:fn())).next(o=>(xW(n,n$(e),o),{documents:o,Qs:a})))}function xW(t,e,r){let n=t.Os.get(e)||Dr.min();r.forEach((s,a)=>{a.readTime.compareTo(n)>0&&(n=a.readTime)}),t.Os.set(e,n)}class I3{constructor(){this.activeTargetIds=c$()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vW{constructor(){this.Mo=new I3,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,r,n){this.xo[e]=r}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new I3,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yW{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3="ConnectivityMonitor";class D3{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){er(F3,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){er(F3,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dv=null;function W_(){return Dv===null?Dv=function(){return 268435456+Math.round(2147483648*Math.random())}():Dv++,"0x"+Dv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="RestConnection",wW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bW{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=r+"://"+e.host,this.Ko=`projects/${n}/databases/${s}`,this.Wo=this.databaseId.database===h2?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Go(e,r,n,s,a){const i=W_(),o=this.zo(e,r.toUriEncodedString());er(sE,`Sending RPC '${e}' ${i}:`,o,n);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,a);const{host:u}=new URL(o),d=Hh(u);return this.Jo(e,o,l,n,d).then(h=>(er(sE,`Received RPC '${e}' ${i}: `,h),h),h=>{throw Lm(sE,`RPC '${e}' ${i} failed with error: `,h,"url: ",o,"request:",n),h})}Ho(e,r,n,s,a,i){return this.Go(e,r,n,s,a)}jo(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ep}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>e[a]=s),n&&n.headers.forEach((s,a)=>e[a]=s)}zo(e,r){const n=wW[e];return`${this.Uo}/v1/${r}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CW{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="WebChannelConnection";class EW extends bW{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,r,n,s,a){const i=W_();return new Promise((o,l)=>{const u=new QU;u.setWithCredentials(!0),u.listenOnce(HU.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case My.NO_ERROR:const h=u.getResponseJson();er(Bi,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case My.TIMEOUT:er(Bi,`RPC '${e}' ${i} timed out`),l(new Kt(mt.DEADLINE_EXCEEDED,"Request time out"));break;case My.HTTP_ERROR:const m=u.getStatus();if(er(Bi,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const b=g==null?void 0:g.error;if(b&&b.status&&b.message){const y=function(T){const k=T.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(k)>=0?k:mt.UNKNOWN}(b.status);l(new Kt(y,b.message))}else l(new Kt(mt.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Kt(mt.UNAVAILABLE,"Connection failed."));break;default:Tr(9055,{l_:e,streamId:i,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{er(Bi,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);er(Bi,`RPC '${e}' ${i} sending request:`,s),u.send(r,"POST",d,n,15)})}T_(e,r,n){const s=W_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=GU(),o=zU(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=a.join("");er(Bi,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=i.createWebChannel(d,l);this.I_(h);let m=!1,g=!1;const b=new CW({Yo:_=>{g?er(Bi,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(er(Bi,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),er(Bi,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},Zo:()=>h.close()}),y=(_,T,k)=>{_.listen(T,D=>{try{k(D)}catch(M){setTimeout(()=>{throw M},0)}})};return y(h,vg.EventType.OPEN,()=>{g||(er(Bi,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),y(h,vg.EventType.CLOSE,()=>{g||(g=!0,er(Bi,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(h))}),y(h,vg.EventType.ERROR,_=>{g||(g=!0,Lm(Bi,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),b.a_(new Kt(mt.UNAVAILABLE,"The operation could not be completed")))}),y(h,vg.EventType.MESSAGE,_=>{var T;if(!g){const k=_.data[0];Pn(!!k,16349);const D=k,M=(D==null?void 0:D.error)||((T=D[0])==null?void 0:T.error);if(M){er(Bi,`RPC '${e}' stream ${s} received error:`,M);const P=M.status;let L=function(B){const O=wa[B];if(O!==void 0)return S8(O)}(P),C=M.message;L===void 0&&(L=mt.INTERNAL,C="Unknown error status: "+P+" with message "+M.message),g=!0,b.a_(new Kt(L,C)),h.close()}else er(Bi,`RPC '${e}' stream ${s} received:`,k),b.u_(k)}}),y(o,VU.STAT_EVENT,_=>{_.stat===M_.PROXY?er(Bi,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===M_.NOPROXY&&er(Bi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(r=>r===e)}}function aE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(t){return new N$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,r,n=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=r,this.d_=n,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const r=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-n);s>0&&er("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3="PersistentStream";class Q8{constructor(e,r,n,s,a,i,o,l){this.Mi=e,this.S_=n,this.b_=s,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new O8(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===mt.RESOURCE_EXHAUSTED?(UA(r.toString()),UA("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(r)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.D_===r&&this.G_(n,s)},n=>{e(()=>{const s=new Kt(mt.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)})})}G_(e,r){const n=this.W_(this.D_);this.stream=this.j_(e,r),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{n(()=>this.z_(s))}),this.stream.onMessage(s=>{n(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return er(R3,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return r=>{this.Mi.enqueueAndForget(()=>this.D_===e?r():(er(R3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _W extends Q8{constructor(e,r,n,s,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,i),this.serializer=a}j_(e,r){return this.connection.T_("Listen",e,r)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=I$(this.serializer,e),n=function(a){if(!("targetChange"in a))return Dr.min();const i=a.targetChange;return i.targetIds&&i.targetIds.length?Dr.min():i.readTime?ku(i.readTime):Dr.min()}(e);return this.listener.H_(r,n)}Y_(e){const r={};r.database=K_(this.serializer),r.addTarget=function(a,i){let o;const l=i.target;if(o=H_(l)?{documents:R$(a,l)}:{query:L$(a,l).ft},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){o.resumeToken=B8(a,i.resumeToken);const u=z_(a,i.expectedCount);u!==null&&(o.expectedCount=u)}else if(i.snapshotVersion.compareTo(Dr.min())>0){o.readTime=v2(a,i.snapshotVersion.toTimestamp());const u=z_(a,i.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=M$(this.serializer,e);n&&(r.labels=n),this.q_(r)}Z_(e){const r={};r.database=K_(this.serializer),r.removeTarget=e,this.q_(r)}}class SW extends Q8{constructor(e,r,n,s,a,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,i),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}J_(e){return Pn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=D$(e.writeResults,e.commitTime),n=ku(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=K_(this.serializer),this.q_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>F$(this.serializer,n))};this.q_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TW{}class NW extends TW{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Kt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,r,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,i])=>this.connection.Go(e,G_(r,n),s,a,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Kt(mt.UNKNOWN,a.toString())})}Ho(e,r,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Ho(e,G_(r,n),s,i,o,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Kt(mt.UNKNOWN,i.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class BW{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(UA(r),this.aa=!1):er("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="RemoteStore";class kW{constructor(e,r,n,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(i=>{n.enqueueAndForget(async()=>{Gh(this)&&(er(Ih,"Restarting streams for network reachability change."),await async function(l){const u=Lr(l);u.Ea.add(4),await s1(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Mw(u)}(this))})}),this.Ra=new BW(n,s)}}async function Mw(t){if(Gh(t))for(const e of t.da)await e(!0)}async function s1(t){for(const e of t.da)await e(!1)}function H8(t,e){const r=Lr(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),l4(r)?o4(r):sp(r).O_()&&i4(r,e))}function a4(t,e){const r=Lr(t),n=sp(r);r.Ia.delete(e),n.O_()&&V8(r,e),r.Ia.size===0&&(n.O_()?n.L_():Gh(r)&&r.Ra.set("Unknown"))}function i4(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dr.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}sp(t).Y_(e)}function V8(t,e){t.Va.Ue(e),sp(t).Z_(e)}function o4(t){t.Va=new E$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),sp(t).start(),t.Ra.ua()}function l4(t){return Gh(t)&&!sp(t).x_()&&t.Ia.size>0}function Gh(t){return Lr(t).Ea.size===0}function z8(t){t.Va=void 0}async function IW(t){t.Ra.set("Online")}async function FW(t){t.Ia.forEach((e,r)=>{i4(t,e)})}async function DW(t,e){z8(t),l4(t)?(t.Ra.ha(e),o4(t)):t.Ra.set("Unknown")}async function RW(t,e,r){if(t.Ra.set("Online"),e instanceof N8&&e.state===2&&e.cause)try{await async function(s,a){const i=a.cause;for(const o of a.targetIds)s.Ia.has(o)&&(await s.remoteSyncer.rejectListen(o,i),s.Ia.delete(o),s.Va.removeTarget(o))}(t,e)}catch(n){er(Ih,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await w2(t,n)}else if(e instanceof Qy?t.Va.Ze(e):e instanceof T8?t.Va.st(e):t.Va.tt(e),!r.isEqual(Dr.min()))try{const n=await j8(t.localStore);r.compareTo(n)>=0&&await function(a,i){const o=a.Va.Tt(i);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=a.Ia.get(u);d&&a.Ia.set(u,d.withResumeToken(l.resumeToken,i))}}),o.targetMismatches.forEach((l,u)=>{const d=a.Ia.get(l);if(!d)return;a.Ia.set(l,d.withResumeToken(mi.EMPTY_BYTE_STRING,d.snapshotVersion)),V8(a,l);const h=new $d(d.target,l,u,d.sequenceNumber);i4(a,h)}),a.remoteSyncer.applyRemoteEvent(o)}(t,r)}catch(n){er(Ih,"Failed to raise snapshot:",n),await w2(t,n)}}async function w2(t,e,r){if(!rp(e))throw e;t.Ea.add(1),await s1(t),t.Ra.set("Offline"),r||(r=()=>j8(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{er(Ih,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Mw(t)})}function G8(t,e){return e().catch(r=>w2(t,r,e))}async function Pw(t){const e=Lr(t),r=vf(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:q5;for(;LW(e);)try{const s=await pW(e.localStore,n);if(s===null){e.Ta.length===0&&r.L_();break}n=s.batchId,UW(e,s)}catch(s){await w2(e,s)}q8(e)&&K8(e)}function LW(t){return Gh(t)&&t.Ta.length<10}function UW(t,e){t.Ta.push(e);const r=vf(t);r.O_()&&r.X_&&r.ea(e.mutations)}function q8(t){return Gh(t)&&!vf(t).x_()&&t.Ta.length>0}function K8(t){vf(t).start()}async function MW(t){vf(t).ra()}async function PW(t){const e=vf(t);for(const r of t.Ta)e.ea(r.mutations)}async function jW(t,e,r){const n=t.Ta.shift(),s=X5.from(n,e,r);await G8(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Pw(t)}async function OW(t,e){e&&vf(t).X_&&await async function(n,s){if(function(i){return w$(i)&&i!==mt.ABORTED}(s.code)){const a=n.Ta.shift();vf(n).B_(),await G8(n,()=>n.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Pw(n)}}(t,e),q8(t)&&K8(t)}async function L3(t,e){const r=Lr(t);r.asyncQueue.verifyOperationInProgress(),er(Ih,"RemoteStore received new credentials");const n=Gh(r);r.Ea.add(3),await s1(r),n&&r.Ra.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Mw(r)}async function QW(t,e){const r=Lr(t);e?(r.Ea.delete(2),await Mw(r)):e||(r.Ea.add(2),await s1(r),r.Ra.set("Unknown"))}function sp(t){return t.ma||(t.ma=function(r,n,s){const a=Lr(r);return a.sa(),new _W(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:IW.bind(null,t),t_:FW.bind(null,t),r_:DW.bind(null,t),H_:RW.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),l4(t)?o4(t):t.Ra.set("Unknown")):(await t.ma.stop(),z8(t))})),t.ma}function vf(t){return t.fa||(t.fa=function(r,n,s){const a=Lr(r);return a.sa(),new SW(n,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:MW.bind(null,t),r_:OW.bind(null,t),ta:PW.bind(null,t),na:jW.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Pw(t)):(await t.fa.stop(),t.Ta.length>0&&(er(Ih,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(e,r,n,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=a,this.deferred=new NA,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(i=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,a){const i=Date.now()+n,o=new c4(e,r,i,s,a);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Kt(mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u4(t,e){if(UA("AsyncQueue",`${e}: ${t}`),rp(t))return new Kt(mt.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{static emptySet(e){return new pm(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||dr.comparator(r.key,n.key):(r,n)=>dr.comparator(r.key,n.key),this.keyedMap=yg(),this.sortedSet=new Ds(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof pm)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=n.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new pm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3{constructor(){this.ga=new Ds(dr.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):Tr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class Qm{constructor(e,r,n,s,a,i,o,l,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,a){const i=[];return r.forEach(o=>{i.push({type:0,doc:o})}),new Qm(e,r,pm.emptySet(r),i,n,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class VW{constructor(){this.queries=M3(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=Lr(r),a=s.queries;s.queries=M3(),a.forEach((i,o)=>{for(const l of o.Sa)l.onError(n)})})(this,new Kt(mt.ABORTED,"Firestore shutting down"))}}function M3(){return new zh(t=>f8(t),kw)}async function A4(t,e){const r=Lr(t);let n=3;const s=e.query;let a=r.queries.get(s);a?!a.ba()&&e.Da()&&(n=2):(a=new HW,n=e.Da()?0:1);try{switch(n){case 0:a.wa=await r.onListen(s,!0);break;case 1:a.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(i){const o=u4(i,`Initialization of query '${Z0(e.query)}' failed`);return void e.onError(o)}r.queries.set(s,a),a.Sa.push(e),e.va(r.onlineState),a.wa&&e.Fa(a.wa)&&f4(r)}async function d4(t,e){const r=Lr(t),n=e.query;let s=3;const a=r.queries.get(n);if(a){const i=a.Sa.indexOf(e);i>=0&&(a.Sa.splice(i,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function zW(t,e){const r=Lr(t);let n=!1;for(const s of e){const a=s.query,i=r.queries.get(a);if(i){for(const o of i.Sa)o.Fa(s)&&(n=!0);i.wa=s}}n&&f4(r)}function GW(t,e,r){const n=Lr(t),s=n.queries.get(e);if(s)for(const a of s.Sa)a.onError(r);n.queries.delete(e)}function f4(t){t.Ca.forEach(e=>{e.next()})}var Y_,P3;(P3=Y_||(Y_={})).Ma="default",P3.Cache="cache";class h4{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new Qm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=Qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Y_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $8{constructor(e){this.key=e}}class W8{constructor(e){this.key=e}}class qW{constructor(e,r){this.query=e,this.Ya=r,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=fn(),this.mutatedKeys=fn(),this.eu=h8(e),this.tu=new pm(this.eu)}get nu(){return this.Ya}ru(e,r){const n=r?r.iu:new U3,s=r?r.tu:this.tu;let a=r?r.mutatedKeys:this.mutatedKeys,i=s,o=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),g=Iw(this.query,h)?h:null,b=!!m&&this.mutatedKeys.has(m.key),y=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let _=!1;m&&g?m.data.isEqual(g.data)?b!==y&&(n.track({type:3,doc:g}),_=!0):this.su(m,g)||(n.track({type:2,doc:g}),_=!0,(l&&this.eu(g,l)>0||u&&this.eu(g,u)<0)&&(o=!0)):!m&&g?(n.track({type:0,doc:g}),_=!0):m&&!g&&(n.track({type:1,doc:m}),_=!0,(l||u)&&(o=!0)),_&&(g?(i=i.add(g),a=y?a.add(d):a.delete(d)):(i=i.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;i.size>this.query.limit;){const d=this.query.limitType==="F"?i.last():i.first();i=i.delete(d.key),a=a.delete(d.key),n.track({type:1,doc:d})}return{tu:i,iu:n,Cs:o,mutatedKeys:a}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((d,h)=>function(g,b){const y=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Tr(20277,{Rt:_})}};return y(g)-y(b)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(n),s=s??!1;const o=r&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,i.length!==0||u?{snapshot:new Qm(this.query,e.tu,a,i,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new U3,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Ya=this.Ya.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ya=this.Ya.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=fn(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Xa=this.Xa.add(n.key))});const r=[];return e.forEach(n=>{this.Xa.has(n)||r.push(new W8(n))}),this.Xa.forEach(n=>{e.has(n)||r.push(new $8(n))}),r}cu(e){this.Ya=e.Qs,this.Xa=fn();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return Qm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const m4="SyncEngine";class KW{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class $W{constructor(e){this.key=e,this.hu=!1}}class WW{constructor(e,r,n,s,a,i){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new zh(o=>f8(o),kw),this.Iu=new Map,this.Eu=new Set,this.du=new Ds(dr.comparator),this.Au=new Map,this.Ru=new t4,this.Vu={},this.mu=new Map,this.fu=Om.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YW(t,e,r=!0){const n=tM(t);let s;const a=n.Tu.get(e);return a?(n.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await Y8(n,e,r,!0),s}async function JW(t,e){const r=tM(t);await Y8(r,e,!0,!1)}async function Y8(t,e,r,n){const s=await gW(t.localStore,Bu(e)),a=s.targetId,i=t.sharedClientState.addLocalQueryTarget(a,r);let o;return n&&(o=await XW(t,e,a,i==="current",s.resumeToken)),t.isPrimaryClient&&r&&H8(t.remoteStore,s),o}async function XW(t,e,r,n,s){t.pu=(h,m,g)=>async function(y,_,T,k){let D=_.view.ru(T);D.Cs&&(D=await k3(y.localStore,_.query,!1).then(({documents:C})=>_.view.ru(C,D)));const M=k&&k.targetChanges.get(_.targetId),P=k&&k.targetMismatches.get(_.targetId)!=null,L=_.view.applyChanges(D,y.isPrimaryClient,M,P);return O3(y,_.targetId,L.au),L.snapshot}(t,h,m,g);const a=await k3(t.localStore,e,!0),i=new qW(e,a.Qs),o=i.ru(a.documents),l=n1.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=i.applyChanges(o,t.isPrimaryClient,l);O3(t,r,u.au);const d=new KW(e,r,i);return t.Tu.set(e,d),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),u.snapshot}async function ZW(t,e,r){const n=Lr(t),s=n.Tu.get(e),a=n.Iu.get(s.targetId);if(a.length>1)return n.Iu.set(s.targetId,a.filter(i=>!kw(i,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await $_(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&a4(n.remoteStore,s.targetId),J_(n,s.targetId)}).catch(tp)):(J_(n,s.targetId),await $_(n.localStore,s.targetId,!0))}async function eY(t,e){const r=Lr(t),n=r.Tu.get(e),s=r.Iu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),a4(r.remoteStore,n.targetId))}async function tY(t,e,r){const n=lY(t);try{const s=await function(i,o){const l=Lr(i),u=or.now(),d=o.reduce((g,b)=>g.add(b.key),fn());let h,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=MA(),y=fn();return l.Ns.getEntries(g,d).next(_=>{b=_,b.forEach((T,k)=>{k.isValidDocument()||(y=y.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,b)).next(_=>{h=_;const T=[];for(const k of o){const D=p$(k,h.get(k.key).overlayedDocument);D!=null&&T.push(new kf(k.key,D,a8(D.value.mapValue),io.exists(!0)))}return l.mutationQueue.addMutationBatch(g,u,T,o)}).next(_=>{m=_;const T=_.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(g,_.batchId,T)})}).then(()=>({batchId:m.batchId,changes:p8(h)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(i,o,l){let u=i.Vu[i.currentUser.toKey()];u||(u=new Ds(dn)),u=u.insert(o,l),i.Vu[i.currentUser.toKey()]=u}(n,s.batchId,r),await a1(n,s.changes),await Pw(n.remoteStore)}catch(s){const a=u4(s,"Failed to persist write");r.reject(a)}}async function J8(t,e){const r=Lr(t);try{const n=await hW(r.localStore,e);e.targetChanges.forEach((s,a)=>{const i=r.Au.get(a);i&&(Pn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?i.hu=!0:s.modifiedDocuments.size>0?Pn(i.hu,14607):s.removedDocuments.size>0&&(Pn(i.hu,42227),i.hu=!1))}),await a1(r,n,e)}catch(n){await tp(n)}}function j3(t,e,r){const n=Lr(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Tu.forEach((a,i)=>{const o=i.view.va(e);o.snapshot&&s.push(o.snapshot)}),function(i,o){const l=Lr(i);l.onlineState=o;let u=!1;l.queries.forEach((d,h)=>{for(const m of h.Sa)m.va(o)&&(u=!0)}),u&&f4(l)}(n.eventManager,e),s.length&&n.Pu.H_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function rY(t,e,r){const n=Lr(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Au.get(e),a=s&&s.key;if(a){let i=new Ds(dr.comparator);i=i.insert(a,Oi.newNoDocument(a,Dr.min()));const o=fn().add(a),l=new Lw(Dr.min(),new Map,new Ds(dn),i,o);await J8(n,l),n.du=n.du.remove(a),n.Au.delete(e),p4(n)}else await $_(n.localStore,e,!1).then(()=>J_(n,e,r)).catch(tp)}async function nY(t,e){const r=Lr(t),n=e.batch.batchId;try{const s=await fW(r.localStore,e);Z8(r,n,null),X8(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await a1(r,s)}catch(s){await tp(s)}}async function sY(t,e,r){const n=Lr(t);try{const s=await function(i,o){const l=Lr(i);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,o).next(h=>(Pn(h!==null,37113),d=h.keys(),l.mutationQueue.removeMutationBatch(u,h))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(n.localStore,e);Z8(n,e,r),X8(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await a1(n,s)}catch(s){await tp(s)}}function X8(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function Z8(t,e,r){const n=Lr(t);let s=n.Vu[n.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),n.Vu[n.currentUser.toKey()]=s}}function J_(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(n=>{t.Ru.containsKey(n)||eM(t,n)})}function eM(t,e){t.Eu.delete(e.path.canonicalString());const r=t.du.get(e);r!==null&&(a4(t.remoteStore,r),t.du=t.du.remove(e),t.Au.delete(r),p4(t))}function O3(t,e,r){for(const n of r)n instanceof $8?(t.Ru.addReference(n.key,e),aY(t,n)):n instanceof W8?(er(m4,"Document no longer in limbo: "+n.key),t.Ru.removeReference(n.key,e),t.Ru.containsKey(n.key)||eM(t,n.key)):Tr(19791,{wu:n})}function aY(t,e){const r=e.key,n=r.path.canonicalString();t.du.get(r)||t.Eu.has(n)||(er(m4,"New document in limbo: "+r),t.Eu.add(n),p4(t))}function p4(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new dr(ls.fromString(e)),n=t.fu.next();t.Au.set(n,new $W(r)),t.du=t.du.insert(r,n),H8(t.remoteStore,new $d(Bu(Bw(r.path)),n,"TargetPurposeLimboResolution",Sw.ce))}}async function a1(t,e,r){const n=Lr(t),s=[],a=[],i=[];n.Tu.isEmpty()||(n.Tu.forEach((o,l)=>{i.push(n.pu(l,e,r).then(u=>{var d;if((u||r)&&n.isPrimaryClient){const h=u?!u.fromCache:(d=r==null?void 0:r.targetChanges.get(l.targetId))==null?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(u){s.push(u);const h=n4.As(l.targetId,u);a.push(h)}}))}),await Promise.all(i),n.Pu.H_(s),await async function(l,u){const d=Lr(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>Ct.forEach(u,m=>Ct.forEach(m.Es,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>Ct.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!rp(h))throw h;er(s4,"Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const g=d.Ms.get(m),b=g.snapshotVersion,y=g.withLastLimboFreeSnapshotVersion(b);d.Ms=d.Ms.insert(m,y)}}}(n.localStore,a))}async function iY(t,e){const r=Lr(t);if(!r.currentUser.isEqual(e)){er(m4,"User change. New user:",e.toKey());const n=await P8(r.localStore,e);r.currentUser=e,function(a,i){a.mu.forEach(o=>{o.forEach(l=>{l.reject(new Kt(mt.CANCELLED,i))})}),a.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await a1(r,n.Ls)}}function oY(t,e){const r=Lr(t),n=r.Au.get(e);if(n&&n.hu)return fn().add(n.key);{let s=fn();const a=r.Iu.get(e);if(!a)return s;for(const i of a){const o=r.Tu.get(i);s=s.unionWith(o.view.nu)}return s}}function tM(t){const e=Lr(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=J8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rY.bind(null,e),e.Pu.H_=zW.bind(null,e.eventManager),e.Pu.yu=GW.bind(null,e.eventManager),e}function lY(t){const e=Lr(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sY.bind(null,e),e}class b2{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uw(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return dW(this.persistence,new cW,e.initialUser,this.serializer)}Cu(e){return new M8(r4.mi,this.serializer)}Du(e){return new vW}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}b2.provider={build:()=>new b2};class cY extends b2{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Pn(this.persistence.referenceDelegate instanceof y2,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new $$(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?So.withCacheSize(this.cacheSizeBytes):So.DEFAULT;return new M8(n=>y2.mi(n,r),this.serializer)}}class X_{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>j3(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=iY.bind(null,this.syncEngine),await QW(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new VW}()}createDatastore(e){const r=Uw(e.databaseInfo.databaseId),n=function(a){return new EW(a)}(e.databaseInfo);return function(a,i,o,l){return new NW(a,i,o,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,a,i,o){return new kW(n,s,a,i,o)}(this.localStore,this.datastore,e.asyncQueue,r=>j3(this.syncEngine,r,0),function(){return D3.v()?new D3:new yW}())}createSyncEngine(e,r){return function(s,a,i,o,l,u,d){const h=new WW(s,a,i,o,l,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=Lr(s);er(Ih,"RemoteStore shutting down."),a.Ea.add(5),await s1(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}X_.provider={build:()=>new X_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):UA("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yf="FirestoreClient";class uY{constructor(e,r,n,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=Ui.UNAUTHENTICATED,this.clientId=G5.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async i=>{er(yf,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(n,i=>(er(yf,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new NA;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=u4(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function iE(t,e){t.asyncQueue.verifyOperationInProgress(),er(yf,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await P8(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Q3(t,e){t.asyncQueue.verifyOperationInProgress();const r=await AY(t);er(yf,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>L3(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>L3(e.remoteStore,s)),t._onlineComponents=e}async function AY(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){er(yf,"Using user provided OfflineComponentProvider");try{await iE(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===mt.FAILED_PRECONDITION||s.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Lm("Error using user provided cache. Falling back to memory cache: "+r),await iE(t,new b2)}}else er(yf,"Using default OfflineComponentProvider"),await iE(t,new cY(void 0));return t._offlineComponents}async function rM(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(er(yf,"Using user provided OnlineComponentProvider"),await Q3(t,t._uninitializedComponentsProvider._online)):(er(yf,"Using default OnlineComponentProvider"),await Q3(t,new X_))),t._onlineComponents}function dY(t){return rM(t).then(e=>e.syncEngine)}async function C2(t){const e=await rM(t),r=e.eventManager;return r.onListen=YW.bind(null,e.syncEngine),r.onUnlisten=ZW.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=JW.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=eY.bind(null,e.syncEngine),r}function fY(t,e,r={}){const n=new NA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,u){const d=new g4({next:m=>{d.Nu(),i.enqueueAndForget(()=>d4(a,h));const g=m.docs.has(o);!g&&m.fromCache?u.reject(new Kt(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?u.reject(new Kt(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new h4(Bw(o.path),d,{includeMetadataChanges:!0,qa:!0});return A4(a,h)}(await C2(t),t.asyncQueue,e,r,n)),n.promise}function hY(t,e,r={}){const n=new NA;return t.asyncQueue.enqueueAndForget(async()=>function(a,i,o,l,u){const d=new g4({next:m=>{d.Nu(),i.enqueueAndForget(()=>d4(a,h)),m.fromCache&&l.source==="server"?u.reject(new Kt(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new h4(o,d,{includeMetadataChanges:!0,qa:!0});return A4(a,h)}(await C2(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM="firestore.googleapis.com",V3=!0;class z3{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Kt(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sM,this.ssl=V3}else this.host=e.host,this.ssl=e.ssl??V3;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=U8;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<q$)throw new Kt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BK("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nM(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Kt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Kt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Kt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jw{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z3({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Kt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Kt(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z3(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new vK;switch(n.type){case"firstParty":return new CK(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Kt(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=H3.get(r);n&&(er("ComponentProvider","Removing Datastore"),H3.delete(r),n.terminate())}(this),Promise.resolve()}}function mY(t,e,r,n={}){var u;t=ao(t,jw);const s=Hh(e),a=t._getSettings(),i={...a,emulatorOptions:t._getEmulatorOptions()},o=`${e}:${r}`;s&&(k5(`https://${o}`),I5("Firestore",!0)),a.host!==sM&&a.host!==o&&Lm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...a,host:o,ssl:s,emulatorOptions:n};if(!ff(l,i)&&(t._setSettings(l),n.mockUserToken)){let d,h;if(typeof n.mockUserToken=="string")d=n.mockUserToken,h=Ui.MOCK_USER;else{d=BV(n.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new Kt(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ui(m)}t._authCredentials=new yK(new KU(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new zA(this.firestore,e,this._query)}}class Gs{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new af(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gs(this.firestore,e,this._key)}toJSON(){return{type:Gs._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(t1(r,Gs._jsonSchema))return new Gs(e,n||null,new dr(ls.fromString(r.referencePath)))}}Gs._jsonSchemaVersion="firestore/documentReference/1.0",Gs._jsonSchema={type:Sa("string",Gs._jsonSchemaVersion),referencePath:Sa("string")};class af extends zA{constructor(e,r,n){super(e,r,Bw(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gs(this.firestore,null,new dr(e))}withConverter(e){return new af(this.firestore,e,this._path)}}function kt(t,e,...r){if(t=Es(t),$U("collection","path",e),t instanceof jw){const n=ls.fromString(e,...r);return n3(n),new af(t,null,n)}{if(!(t instanceof Gs||t instanceof af))throw new Kt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ls.fromString(e,...r));return n3(n),new af(t.firestore,null,n)}}function ur(t,e,...r){if(t=Es(t),arguments.length===1&&(e=G5.newId()),$U("doc","path",e),t instanceof jw){const n=ls.fromString(e,...r);return r3(n),new Gs(t,null,new dr(n))}{if(!(t instanceof Gs||t instanceof af))throw new Kt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(ls.fromString(e,...r));return r3(n),new Gs(t.firestore,t instanceof af?t.converter:null,new dr(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G3="AsyncQueue";class q3{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new O8(this,"async_queue_retry"),this._c=()=>{const n=aE();n&&er(G3,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=aE();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=aE();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new NA;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!rp(e))throw e;er(G3,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,UA("INTERNAL UNHANDLED ERROR: ",K3(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=c4.createAndSchedule(this,e,r,n,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&Tr(47125,{Pc:K3(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function K3(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(t){return function(r,n){if(typeof r!="object"||r===null)return!1;const s=r;for(const a of n)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class Uu extends jw{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new q3,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new q3(e),this._firestoreClient=void 0,await e}}}function aM(t,e){const r=typeof t=="object"?t:L5(),n=typeof t=="string"?t:h2,s=yw(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const a=XL("firestore");a&&mY(s,...a)}return s}function i1(t){if(t._terminated)throw new Kt(mt.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||pY(t),t._firestoreClient}function pY(t){var n,s,a;const e=t._freezeSettings(),r=function(o,l,u,d){return new QK(o,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,nM(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new uY(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(o){const l=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hl(mi.fromBase64String(e))}catch(r){throw new Kt(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Hl(mi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(t1(e,Hl._jsonSchema))return Hl.fromBase64String(e.bytes)}}Hl._jsonSchemaVersion="firestore/bytes/1.0",Hl._jsonSchema={type:Sa("string",Hl._jsonSchemaVersion),bytes:Sa("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Kt(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Kt(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Kt(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return dn(this._lat,e._lat)||dn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Iu._jsonSchemaVersion}}static fromJSON(e){if(t1(e,Iu._jsonSchema))return new Iu(e.latitude,e.longitude)}}Iu._jsonSchemaVersion="firestore/geoPoint/1.0",Iu._jsonSchema={type:Sa("string",Iu._jsonSchemaVersion),latitude:Sa("number"),longitude:Sa("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let a=0;a<n.length;++a)if(n[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Fu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(t1(e,Fu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new Fu(e.vectorValues);throw new Kt(mt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fu._jsonSchemaVersion="firestore/vectorValue/1.0",Fu._jsonSchema={type:Sa("string",Fu._jsonSchemaVersion),vectorValues:Sa("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gY=/^__.*__$/;class xY{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new kf(e,this.data,this.fieldMask,r,this.fieldTransforms):new r1(e,this.data,r,this.fieldTransforms)}}class iM{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new kf(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function oM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Tr(40011,{Ac:t})}}class Ow{constructor(e,r,n,s,a,i){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ow({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.gc(e),n}yc(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.Vc({path:r,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return E2(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(oM(this.Ac)&&gY.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vY{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Uw(e)}Cc(e,r,n,s=!1){return new Ow({Ac:e,methodName:r,Dc:n,path:di.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function c1(t){const e=t._freezeSettings(),r=Uw(t._databaseId);return new vY(t._databaseId,!!e.ignoreUndefinedProperties,r)}function x4(t,e,r,n,s,a={}){const i=t.Cc(a.merge||a.mergeFields?2:0,e,r,s);w4("Data must be an object, but it was:",i,n);const o=uM(n,i);let l,u;if(a.merge)l=new sl(i.fieldMask),u=i.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const m=Z_(e,h,r);if(!i.contains(m))throw new Kt(mt.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);dM(d,m)||d.push(m)}l=new sl(d),u=i.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=i.fieldTransforms;return new xY(new No(o),l,u)}class Qw extends l1{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qw}}function yY(t,e,r){return new Ow({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class v4 extends l1{_toFieldTransform(e){return new C8(e.path,new gx)}isEqual(e){return e instanceof v4}}class y4 extends l1{constructor(e,r){super(e),this.vc=r}_toFieldTransform(e){const r=yY(this,e,!0),n=this.vc.map(a=>ap(a,r)),s=new jm(n);return new C8(e.path,s)}isEqual(e){return e instanceof y4&&ff(this.vc,e.vc)}}function lM(t,e,r,n){const s=t.Cc(1,e,r);w4("Data must be an object, but it was:",s,n);const a=[],i=No.empty();Bf(n,(l,u)=>{const d=b4(e,l,r);u=Es(u);const h=s.yc(d);if(u instanceof Qw)a.push(d);else{const m=ap(u,h);m!=null&&(a.push(d),i.set(d,m))}});const o=new sl(a);return new iM(i,o,s.fieldTransforms)}function cM(t,e,r,n,s,a){const i=t.Cc(1,e,r),o=[Z_(e,n,r)],l=[s];if(a.length%2!=0)throw new Kt(mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<a.length;m+=2)o.push(Z_(e,a[m])),l.push(a[m+1]);const u=[],d=No.empty();for(let m=o.length-1;m>=0;--m)if(!dM(u,o[m])){const g=o[m];let b=l[m];b=Es(b);const y=i.yc(g);if(b instanceof Qw)u.push(g);else{const _=ap(b,y);_!=null&&(u.push(g),d.set(g,_))}}const h=new sl(u);return new iM(d,h,i.fieldTransforms)}function wY(t,e,r,n=!1){return ap(r,t.Cc(n?4:3,e))}function ap(t,e){if(AM(t=Es(t)))return w4("Unsupported field value:",e,t),uM(t,e);if(t instanceof l1)return function(n,s){if(!oM(s.Ac))throw s.Sc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${n._methodName}() is not currently supported inside arrays`);const a=n._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(n,s){const a=[];let i=0;for(const o of n){let l=ap(o,s.wc(i));l==null&&(l={nullValue:"NULL_VALUE"}),a.push(l),i++}return{arrayValue:{values:a}}}(t,e)}return function(n,s){if((n=Es(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return u$(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const a=or.fromDate(n);return{timestampValue:v2(s.serializer,a)}}if(n instanceof or){const a=new or(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:v2(s.serializer,a)}}if(n instanceof Iu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Hl)return{bytesValue:B8(s.serializer,n._byteString)};if(n instanceof Gs){const a=s.databaseId,i=n.firestore._databaseId;if(!i.isEqual(a))throw s.Sc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:e4(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Fu)return function(i,o){return{mapValue:{fields:{[n8]:{stringValue:s8},[m2]:{arrayValue:{values:i.toArray().map(u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return J5(o.serializer,u)})}}}}}}(n,s);throw s.Sc(`Unsupported field value: ${_w(n)}`)}(t,e)}function uM(t,e){const r={};return JU(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bf(t,(n,s)=>{const a=ap(s,e.mc(n));a!=null&&(r[n]=a)}),{mapValue:{fields:r}}}function AM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof or||t instanceof Iu||t instanceof Hl||t instanceof Gs||t instanceof l1||t instanceof Fu)}function w4(t,e,r){if(!AM(r)||!WU(r)){const n=_w(r);throw n==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+n)}}function Z_(t,e,r){if((e=Es(e))instanceof o1)return e._internalPath;if(typeof e=="string")return b4(t,e);throw E2("Field path arguments must be of type string or ",t,!1,void 0,r)}const bY=new RegExp("[~\\*/\\[\\]]");function b4(t,e,r){if(e.search(bY)>=0)throw E2(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new o1(...e.split("."))._internalPath}catch{throw E2(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function E2(t,e,r,n,s){const a=n&&!n.isEmpty(),i=s!==void 0;let o=`Function ${e}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(a||i)&&(l+=" (found",a&&(l+=` in field ${n}`),i&&(l+=` in document ${s}`),l+=")"),new Kt(mt.INVALID_ARGUMENT,o+t+l)}function dM(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e,r,n,s,a){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Gs(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CY(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Hw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class CY extends fM{data(){return super.data()}}function Hw(t,e){return typeof e=="string"?b4(t,e):e instanceof o1?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Kt(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class C4{}class E4 extends C4{}function Yt(t,e,...r){let n=[];e instanceof C4&&n.push(e),n=n.concat(r),function(a){const i=a.filter(l=>l instanceof _4).length,o=a.filter(l=>l instanceof Vw).length;if(i>1||i>0&&o>0)throw new Kt(mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Vw extends E4{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Vw(e,r,n)}_apply(e){const r=this._parse(e);return mM(e._query,r),new zA(e.firestore,e.converter,V_(e._query,r))}_parse(e){const r=c1(e.firestore);return function(a,i,o,l,u,d,h){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Kt(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Y3(h,d);const b=[];for(const y of h)b.push(W3(l,a,y));m={arrayValue:{values:b}}}else m=W3(l,a,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Y3(h,d),m=wY(o,i,h,d==="in"||d==="not-in");return _a.create(u,d,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Xr(t,e,r){const n=e,s=Hw("where",t);return Vw._create(s,n,r)}class _4 extends C4{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new _4(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Lc.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,a){let i=s;const o=a.getFlattenedFilters();for(const l of o)mM(i,l),i=V_(i,l)}(e._query,r),new zA(e.firestore,e.converter,V_(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class S4 extends E4{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new S4(e,r)}_apply(e){const r=function(s,a,i){if(s.startAt!==null)throw new Kt(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Kt(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new px(a,i)}(e._query,this._field,this._direction);return new zA(e.firestore,e.converter,function(s,a){const i=s.explicitOrderBy.concat([a]);return new np(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Pr(t,e="asc"){const r=e,n=Hw("orderBy",t);return S4._create(n,r)}class T4 extends E4{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new T4(e,r,n)}_apply(e){return new zA(e.firestore,e.converter,g2(e._query,this._limit,this._limitType))}}function BA(t){return kK("limit",t),T4._create("limit",t,"F")}function W3(t,e,r){if(typeof(r=Es(r))=="string"){if(r==="")throw new Kt(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!d8(e)&&r.indexOf("/")!==-1)throw new Kt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(ls.fromString(r));if(!dr.isDocumentKey(n))throw new Kt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return A3(t,new dr(n))}if(r instanceof Gs)return A3(t,r._key);throw new Kt(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_w(r)}.`)}function Y3(t,e){if(!Array.isArray(t)||t.length===0)throw new Kt(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mM(t,e){const r=function(s,a){for(const i of s)for(const o of i.getFlattenedFilters())if(a.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Kt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Kt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class EY{convertValue(e,r="none"){switch(xf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return aa(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(gf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Tr(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Bf(e,(s,a)=>{n[s]=this.convertValue(a,r)}),n}convertVectorValue(e){var n,s,a;const r=(a=(s=(n=e.fields)==null?void 0:n[m2].arrayValue)==null?void 0:s.values)==null?void 0:a.map(i=>aa(i.doubleValue));return new Fu(r)}convertGeoPoint(e){return new Iu(aa(e.latitude),aa(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Nw(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(fx(e));default:return null}}convertTimestamp(e){const r=pf(e);return new or(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=ls.fromString(e);Pn(L8(n),9688,{name:e});const s=new hx(n.get(1),n.get(3)),a=new dr(n.popFirst(5));return s.isEqual(r)||UA(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class bg{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gh extends fM{constructor(e,r,n,s,a,i){super(e,r,n,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Hy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Hw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(mt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=gh._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}gh._jsonSchemaVersion="firestore/documentSnapshot/1.0",gh._jsonSchema={type:Sa("string",gh._jsonSchemaVersion),bundleSource:Sa("string","DocumentSnapshot"),bundleName:Sa("string"),bundle:Sa("string")};class Hy extends gh{data(e={}){return super.data(e)}}class xh{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new bg(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new Hy(this._firestore,this._userDataWriter,n.key,n,new bg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Kt(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map(o=>{const l=new Hy(s._firestore,s._userDataWriter,o.doc.key,o.doc,new bg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:i++}})}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(o=>a||o.type!==3).map(o=>{const l=new Hy(s._firestore,s._userDataWriter,o.doc.key,o.doc,new bg(s._snapshot.mutatedKeys.has(o.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return o.type!==0&&(u=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),d=i.indexOf(o.doc.key)),{type:_Y(o.type),doc:l,oldIndex:u,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Kt(mt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=xh._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G5.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(r.push(a._document),n.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _Y(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Tr(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){t=ao(t,Gs);const e=ao(t.firestore,Uu);return fY(i1(e),t._key).then(r=>pM(e,t,r))}xh._jsonSchemaVersion="firestore/querySnapshot/1.0",xh._jsonSchema={type:Sa("string",xh._jsonSchemaVersion),bundleSource:Sa("string","QuerySnapshot"),bundleName:Sa("string"),bundle:Sa("string")};class B4 extends EY{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hl(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Gs(this.firestore,null,r)}}function Cs(t){t=ao(t,zA);const e=ao(t.firestore,Uu),r=i1(e),n=new B4(e);return hM(t._query),hY(r,t._query).then(s=>new xh(e,n,t,s))}function pi(t,e,r){t=ao(t,Gs);const n=ao(t.firestore,Uu),s=N4(t.converter,e,r);return u1(n,[x4(c1(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,io.none())])}function ip(t,e,r,...n){t=ao(t,Gs);const s=ao(t.firestore,Uu),a=c1(s);let i;return i=typeof(e=Es(e))=="string"||e instanceof o1?cM(a,"updateDoc",t._key,e,r,n):lM(a,"updateDoc",t._key,e),u1(s,[i.toMutation(t._key,io.exists(!0))])}function Ta(t){return u1(ao(t.firestore,Uu),[new Rw(t._key,io.none())])}function ps(t,e){const r=ao(t.firestore,Uu),n=ur(t),s=N4(t.converter,e);return u1(r,[x4(c1(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,io.exists(!1))]).then(()=>n)}function mr(t,...e){var l,u,d;t=Es(t);let r={includeMetadataChanges:!1,source:"default"},n=0;typeof e[n]!="object"||$3(e[n])||(r=e[n++]);const s={includeMetadataChanges:r.includeMetadataChanges,source:r.source};if($3(e[n])){const h=e[n];e[n]=(l=h.next)==null?void 0:l.bind(h),e[n+1]=(u=h.error)==null?void 0:u.bind(h),e[n+2]=(d=h.complete)==null?void 0:d.bind(h)}let a,i,o;if(t instanceof Gs)i=ao(t.firestore,Uu),o=Bw(t._key.path),a={next:h=>{e[n]&&e[n](pM(i,t,h))},error:e[n+1],complete:e[n+2]};else{const h=ao(t,zA);i=ao(h.firestore,Uu),o=h._query;const m=new B4(i);a={next:g=>{e[n]&&e[n](new xh(i,m,h,g))},error:e[n+1],complete:e[n+2]},hM(t._query)}return function(m,g,b,y){const _=new g4(y),T=new h4(g,_,b);return m.asyncQueue.enqueueAndForget(async()=>A4(await C2(m),T)),()=>{_.Nu(),m.asyncQueue.enqueueAndForget(async()=>d4(await C2(m),T))}}(i1(i),o,s,a)}function u1(t,e){return function(n,s){const a=new NA;return n.asyncQueue.enqueueAndForget(async()=>tY(await dY(n),s,a)),a.promise}(i1(t),e)}function pM(t,e,r){const n=r.docs.get(e._key),s=new B4(t);return new gh(t,s,e._key,n,new bg(r.hasPendingWrites,r.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SY{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=c1(e)}set(e,r,n){this._verifyNotCommitted();const s=oE(e,this._firestore),a=N4(s.converter,r,n),i=x4(this._dataReader,"WriteBatch.set",s._key,a,s.converter!==null,n);return this._mutations.push(i.toMutation(s._key,io.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const a=oE(e,this._firestore);let i;return i=typeof(r=Es(r))=="string"||r instanceof o1?cM(this._dataReader,"WriteBatch.update",a._key,r,n,s):lM(this._dataReader,"WriteBatch.update",a._key,r),this._mutations.push(i.toMutation(a._key,io.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=oE(e,this._firestore);return this._mutations=this._mutations.concat(new Rw(r._key,io.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Kt(mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function oE(t,e){if((t=Es(t)).firestore!==e)throw new Kt(mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function TY(){return new v4("serverTimestamp")}function NY(...t){return new y4("arrayUnion",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(t){return i1(t=ao(t,Uu)),new SY(t,e=>u1(t,e))}(function(e,r=!0){(function(s){ep=s})(Xm),Nh(new hf("firestore",(n,{instanceIdentifier:s,options:a})=>{const i=n.getProvider("app").getImmediate(),o=new Uu(new wK(n.getProvider("auth-internal")),new EK(i,n.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Kt(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hx(u.options.projectId,d)}(i,s),i);return a={useFetchStreams:r,...a},o._setSettings(a),o},"PUBLIC").setMultipleInstances(!0)),Su(Xk,Zk,e),Su(Xk,Zk,"esm2020")})();const BY={apiKey:"AIzaSyAfL9dpeLfpWQPg4orpFSh3X5dzXrSsBwc",authDomain:"planificador-145df.firebaseapp.com",projectId:"planificador-145df",storageBucket:"planificador-145df.firebasestorage.app",messagingSenderId:"1022861144167",appId:"1:1022861144167:web:7c277dd701dad5986864c2",measurementId:"G-LKJRFMVC9F"},gM=R5(BY),A1=jU(gM),Zr=aM(gM),kY=Object.freeze(Object.defineProperty({__proto__:null,auth:A1,db:Zr},Symbol.toStringTag,{value:"Module"})),IY=async(t,e)=>{try{return(await rq(A1,t,e)).user}catch(r){throw console.error("Error en loginUser helper:",r),r}},lE=async()=>{try{await aq(A1)}catch(t){throw console.error("Error en logoutUser helper:",t),t}},FY=async t=>{try{await tq(A1,t)}catch(e){throw console.error("Error en resetPassword helper:",e),e}},xM=async t=>{try{const e=ur(Zr,"usuarios",t),r=await GA(e);return r.exists()?{id:r.id,...r.data()}:(console.warn(`No se encontró perfil en Firestore para: ${t}`),null)}catch(e){throw console.error("Error en getUserProfile helper:",e),e}};var jt=(t=>(t.SUBDIRECCION="SUBDIRECCION",t.PROFESORADO="PROFESORADO",t.COORDINACION_TP="COORDINACION_TP",t.ESTUDIANTE="ESTUDIANTE",t))(jt||{}),Yr=(t=>(t.EVALUACION="Evaluación",t.ACTO="Acto",t.ACTIVIDAD_FOCALIZADA="Actividad Focalizada",t.SALIDA_PEDAGOGICA="Salida Pedagógica",t))(Yr||{}),lh=(t=>(t.PRUEBA_PARCIAL="Prueba parcial",t.GUIA_APRENDIZAJE="Guía de Aprendizaje",t.RUBRICA="Rúbrica",t.PAUTA_COTEJO="Pauta de Cotejo",t))(lh||{});const DY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m-1 4h1m5-4h1m-1 4h1"})}),Na="w-6 h-6",Gw="w-24 h-24",k4=()=>c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-32 h-32 object-contain"}),RY=()=>c.jsxs("svg",{className:"w-10 h-10 text-amber-400",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M9 18h6"}),c.jsx("path",{d:"M10 22h4"}),c.jsx("path",{d:"M12 2a7 7 0 0 0-7 7c0 3 2 5 2 7h10c0-2 2-4 2-7a7 7 0 0 0-7-7z"})]}),LY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),UY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Cg=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),Eg=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),vM=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),MY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Gw,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125z"})}),PY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Gw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),jY=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Gw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.43.992a6.759 6.759 0 010 1.255c-.008.378.137.75.43.99l1.004.828c.421.346.564.95.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.68 6.68 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.68 6.68 0 01-.22-.127c-.325-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.369-.491l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.759 6.759 0 010-1.255c.008-.378-.137-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),OY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Gw,fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0l-2.072-1.036A48.257 48.257 0 0112 10.045a48.258 48.258 0 0110.332-1.036l-2.072 1.036m-16.425 0a48.27 48.27 0 00-2.223 2.218c.958.056 1.91.118 2.857.185m16.425 0c.947-.067 1.9-.129 2.857-.185a48.27 48.27 0 00-2.223-2.218m-12.182 0A11.947 11.947 0 0112 8.636a11.947 11.947 0 014.09 1.511"})}),QY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),J3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),Rv=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),cE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Lv=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),uE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),X3=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),HY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),VY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),zY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),GY=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Z3=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14v6"})]}),qY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),AE=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9V3m0 18a9 9 0 009-9m-9 9a9 9 0 00-9-9"})}),KY=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Na,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.528-1.036.94-2.197 1.088-3.386l-.7M11.42 15.17l-1.06-1.06a4.5 4.5 0 01-5.656-5.656l-1.06 1.06c-1.37.66-2.58 1.6-3.58 2.75a4.5 4.5 0 00-1.06 5.656l1.06 1.06c1.15.998 2.52 1.93 3.99 2.58l1.06-1.06a4.5 4.5 0 015.656-5.656l3.032 2.496m-3.582-2.58a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06m-3.032-2.496a4.5 4.5 0 00-5.656 5.656l1.06-1.06a4.5 4.5 0 015.656-5.656l1.06 1.06"})}),$Y=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:Na,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),eI=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:Na,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-1.125 0-2.25 1.125-2.25 2.25v15c0 1.125 1.125 2.25 2.25 2.25h11.25c1.125 0 2.25-1.125 2.25-2.25v-9.75M10.125 2.25c.621 0 1.125.504 1.125 1.125v3.375c0 .621-.504 1.125-1.125 1.125h-1.5c-.621 0-1.125-.504-1.125-1.125v-3.375c0-.621.504-1.125 1.125-1.125h1.5zM17.25 10.5h.375c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125h-.375m0-3.75V6.375c0-.621-.504-1.125-1.125-1.125h-1.5c-.621 0-1.125.504-1.125 1.125v3.375c0 .621.504 1.125 1.125 1.125h1.5c.621 0 1.125-.504 1.125-1.125v-1.5m-6.375 5.25v-1.5c0-.621.504-1.125 1.125-1.125h.375c.621 0 1.125.504 1.125 1.125v1.5m0 3.75V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5m6.375 0V16.5c0-.621-.504-1.125-1.125-1.125h-.375a1.125 1.125 0 00-1.125 1.125v1.5"})}),WY=[{id:jt.SUBDIRECCION,label:"Subdirección Pedagógica",icon:c.jsx(MY,{})},{id:jt.PROFESORADO,label:"Profesorado",icon:c.jsx(PY,{})},{id:jt.COORDINACION_TP,label:"Coordinación TP",icon:c.jsx(jY,{})},{id:jt.ESTUDIANTE,label:"Estudiantes",icon:c.jsx(OY,{})}],YY={[jt.SUBDIRECCION]:[{name:"Dashboard",icon:c.jsx(QY,{})},{name:"Administración",icon:c.jsx(GY,{})},{name:"Seguimiento Curricular",icon:c.jsx($Y,{})},{name:"Acompañamiento docente",icon:c.jsx(zY,{})},{name:"Análisis Taxonómico",icon:c.jsx(eI,{})},{name:"Interdisciplinario",icon:c.jsx(AE,{})},{name:"Registro de inasistencias y reemplazos docentes",icon:c.jsx(J3,{})},{name:"Crear horarios",icon:c.jsx(cE,{})},{name:"Seguimiento de acciones pedagógicas",icon:c.jsx(Lv,{})},{name:"Inclusión",icon:c.jsx(Z3,{})},{name:"Calendario Académico",icon:c.jsx(Rv,{})},{name:"Muro de Anuncios",icon:c.jsx(Cg,{})},{name:"Mensajería Interna",icon:c.jsx(Eg,{})},{name:"Generador de Actas",icon:c.jsx(uE,{})}],[jt.PROFESORADO]:[{name:"Planificación",icon:c.jsx(X3,{})},{name:"Mis Acompañamientos",icon:c.jsx(qY,{})},{name:"Recursos de Aprendizaje",icon:c.jsx(HY,{})},{name:"Análisis Taxonómico",icon:c.jsx(eI,{})},{name:"Interdisciplinario",icon:c.jsx(AE,{})},{name:"Inclusión",icon:c.jsx(Z3,{})},{name:"Actividades Remotas",icon:c.jsx(VY,{})},{name:"Evaluación de Aprendizajes",icon:c.jsx(uE,{})},{name:"Evaluaciones Formativas",icon:c.jsx(Lv,{})},{name:"Calendario Académico",icon:c.jsx(Rv,{})},{name:"Muro de Anuncios",icon:c.jsx(Cg,{})},{name:"Mensajería Interna",icon:c.jsx(Eg,{})},{name:"Generador de Actas",icon:c.jsx(J3,{})}],[jt.COORDINACION_TP]:[{name:"Seguimiento Dual",icon:c.jsx(Lv,{})},{name:"Asistencia Dual",icon:c.jsx(cE,{})},{name:"Pañol",icon:c.jsx(KY,{})},{name:"Gestión de Empresas",icon:c.jsx(DY,{})},{name:"Calendario Académico",icon:c.jsx(Rv,{})},{name:"Muro de Anuncios",icon:c.jsx(Cg,{})},{name:"Mensajería Interna",icon:c.jsx(Eg,{})},{name:"Generador de Actas",icon:c.jsx(uE,{})}],[jt.ESTUDIANTE]:[{name:"Auto-aprendizaje",icon:c.jsx(X3,{})},{name:"Evaluación Formativa",icon:c.jsx(Lv,{})},{name:"Tareas Interdisciplinarias",icon:c.jsx(AE,{})},{name:"Asistencia a Empresa",icon:c.jsx(cE,{})},{name:"Calendario Académico",icon:c.jsx(Rv,{})},{name:"Muro de Anuncios",icon:c.jsx(Cg,{})},{name:"Mensajería Interna",icon:c.jsx(Eg,{})}]},tI=["Currículum y Evaluación","Convivencia Escolar","Orientación","Gestión Pedagógica General"],rg=["Pendiente","En Proceso","Cumplida"],_2=["1º Medio","2º Medio","3º Medio","4º Medio"],ol=["Lengua y Literatura","Matemática","Inglés","Filosofía","Historia y Geografía","Educación Ciudadana","Ciencias","Ciencias para la Ciudadanía","Artes","Música","Educación Física","Orientación","Mecánica Industrial","Mecánica Automotriz","Emprendimiento","Tecnología","Pensamiento Lógico","Competencia Lectora"],ca=["1ºA","1ºB","1ºC","1ºD","1ºE","2ºA","2ºB","2ºC","2ºD","3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],eS=["Nelson Laubreaux","Julian Seguel","Martin Moya","Leonel Moya","Miguel Becerra"],Vy=["Lunes","Martes","Miércoles","Jueves","Viernes"],tS=[{bloque:1,inicio:"08:00",fin:"08:40"},{bloque:2,inicio:"08:40",fin:"09:20"},{bloque:3,inicio:"09:35",fin:"10:15"},{bloque:4,inicio:"10:15",fin:"10:55"},{bloque:5,inicio:"11:10",fin:"11:50"},{bloque:6,inicio:"11:50",fin:"12:30"},{bloque:7,inicio:"12:30",fin:"13:10"},{bloque:8,inicio:"13:10",fin:"13:50"},{bloque:9,inicio:"14:30",fin:"15:10"},{bloque:10,inicio:"15:10",fin:"15:50"},{bloque:11,inicio:"16:00",fin:"16:40"},{bloque:12,inicio:"16:40",fin:"17:20"}],JY={"1º y 2º medio":{"Lengua y Literatura":6,Matemática:6,Inglés:3,"Historia y Geografía":4,"Educación Física":2,Ciencias:4,"Artes/Música":2,Tecnología:2,Orientación:1},"3º y 4º medio (Humanista-Científico)":{"Lengua y Literatura":4,Matemática:4,Inglés:2,"Historia y Geografía":3,"Educación Ciudadana":2,Filosofía:3,"Ciencias para la Ciudadanía":2,"Educación Física":2},"3º y 4º medio (Técnico-Profesional)":{"Lengua y Literatura":2,Matemática:2,Inglés:2,"Historia y Geografía":2,Filosofía:2,"Educación Física":2,"Módulo TP":18}},qd={[Yr.EVALUACION]:{label:"Evaluación",icon:"📝",color:"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"},[Yr.ACTO]:{label:"Acto",icon:"🏛️",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"},[Yr.ACTIVIDAD_FOCALIZADA]:{label:"Act. Focalizada",icon:"🎯",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"},[Yr.SALIDA_PEDAGOGICA]:{label:"Salida Pedagógica",icon:"🚌",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}},XY=Object.values(lh),dE=["Humanidades","TP","Ciencias","Interdisciplinario","Gestión Pedagógica","Equipo Directivo","Equipo de Gestión","Consejo Escolar"],fE=["Vinculado","Desvinculado","En proceso","Empresa"],vh=["3ºA","3ºB","3ºC","3ºD","4ºA","4ºB","4ºC","4ºD"],ZY=["Quiz","Comprensión de Lectura","Términos Pareados","Desarrollo"],S2=["Discapacidad Intelectual Leve","Funcionamiento Intelectual Limítrofe","Trastorno Déficit Atencional (TDA)","Trastorno Déficit Atencional con Hiperactividad (TDAH)","Trastorno del Lenguaje","Dificultad Específica del Aprendizaje","Dificultad Específica de Aprendizaje en Matemáticas","Dificultades de Aprendizaje","Problemas de Idioma y de Escolarización"],zg=[{domain:"Dominio A: Preparación de la Enseñanza",criteria:[{name:"Conocimiento de la disciplina",levels:["Demuestra conocimiento parcial por la disciplina que enseña, evidenciando manejo poco preciso y confuso de los conceptos centrales en los que se articula la clase.","Conoce los principios centrales de la disciplina que enseña, no obstante evidencia falencias en el tratamiento conceptual a la luz de actualizaciones epistemológicas o metodológicas en su área.","Conoce y comprende los principios y conceptos centrales de las disciplinas que enseña, atendiendo a la permanente actualización curricular en su área.","Conoce, comprende y cuestiona los principios centrales de la disciplina que enseña a la luz de nuevos paradigmas epistemológicos o teóricos, permitiendo que el trabajo o la exposición conceptual invite al desarrollo del pensamiento crítico o la investigación continua."]},{name:"Conocimiento de los estudiantes",levels:["No conoce las fortalezas y debilidades de sus estudiantes, evidenciando una planificación o gestión de la clase estándar, sin atender a particularidades.","Conoce las fortalezas y debilidades de sus estudiantes de manera parcial en relación al contexto y características del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio.","Conoce las fortalezas y debilidades de sus estudiantes respecto de los contenidos que enseña en consonancia con el contexto y características propias del medio, siendo capaz de desarrollar diversas explicaciones y/o actividades para un mismo objetivo."]},{name:"Selección de recursos de aprendizaje",levels:["Los recursos de aprendizaje seleccionados demuestran desconocimiento respecto a las características de sus estudiantes y a la relación con el contenido y objetivo de la clase.","Conoce parcialmente distintos recursos didácticos de aprendizaje, siendo congruentes al contenido pero no a las características de sus estudiantes, o bien, siendo pertinentes a sus particularidades pero alejándose de los objetivos y contenidos de la clase.","Conoce y selecciona distintos recursos didácticos de aprendizaje congruentes con la complejidad de los contenidos y las características de sus alumnos.","Conoce y selecciona distintos recursos didácticos de aprendizaje que promueven el desarrollo de habilidades transversales y permiten asegurar la adquisición de aprendizajes profundos, todo en consonancia con las particularidades de sus estudiantes."]},{name:"Estrategias de evaluación",levels:["Establece estrategias de evaluación incongruentes con los contenidos o el desarrollo cognitivo de sus estudiantes, omitiendo además, las metodologías empleadas previamente en clases.","Establece estrategias de evaluación coherentes con los contenidos pero no con la complejidad, o bien, con una complejidad adecuada al desarrollo cognitivo de los estudiantes, pero no necesariamente a los contenidos y objetivos desarrollados previamente en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases.","Establece estrategias de evaluación coherentes con la complejidad de los contenidos involucrados y con las actividades previamente desarrolladas en clases. Dichas estrategias promueven la reflexión, y, la retroalimentación descriptiva."]},{name:"Estrategias de enseñanza-aprendizaje",levels:["*Los docentes establecen estrategias generales de apoyo sin considerar los distintos niveles de dominio de las competencias ni tampoco, las necesidades de los estudiantes","*Los docentes diseñan e implementan estrategias de enseñanza- aprendizaje efectivas, pero sin considerar las competencias involucradas en el perfil de egreso, o los recursos disponibles, o los espacios dentro fuera y del aula.","*Los docentes diseñan e implementan estrategias efectivas de enseñanza-aprendizaje para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula.","*Los docentes diseñan e implementan estrategias avanzadas de enseñanza-aprendizaje tales como (ABP, ABD, Gamificación, Aprendizaje basado en juegos) para el desarrollo de competencias definidas en el perfil de egreso de cada especialidad considerando el contexto educativo, los recursos de aprendizaje disponibles y los espacios de aprendizaje dentro y fuera del aula."]}]},{domain:"Dominio B: Creación de ambiente propicio para el aprendizaje",criteria:[{name:"Clima de respeto y empatía",levels:["Establece un clima centrado exclusivamente en las normas, pero no da cuenta de vínculos fundados en el respeto y/o en la empatía.","Establece un clima de relaciones interpersonales respetuosas y empáticas con la mayoría de sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos.","Establece un clima de relaciones interpersonales respetuosas y empáticas con todos sus alumnos, generando situaciones concretas de cooperación y ayuda mutua entre él/ella y los/las estudiantes, o entre los/las propios estudiantes."]},{name:"Interés por las especialidades",levels:["No transmite interés por las especialidades, centrándose exclusivamente en su área de desempeño.","Transmite interés general por las especialidades, no obstante no es capaz de acercarse a las características concretas de los módulos.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades.","Transmite interés por los contenidos y actividades de las asignaturas, módulos y especialidades, ejemplificando o relacionando de manera concreta, con situaciones reales en dicha área de desempeño."]},{name:"Actitudes de compromiso y solidaridad",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Promueve implícitamente actitudes de compromiso y solidaridad entre los alumnos.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello.","Promueve explícitamente actitudes de compromiso y solidaridad entre los alumnos, a través de estrategias, instrucciones o análisis que tiendan a ello, generando experiencias concretas para desarrollar estas habilidades y valores."]},{name:"Situaciones de aprendizaje",levels:["Presenta situaciones de aprendizaje estándar que implican un desarrollo mecánico y que no tienden hacia la consolidación de aprendizajes esperados o no movilizan a los estudiantes.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, no obstante no atiende a sus características personales y/o motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales.","Presenta situaciones de aprendizaje desafiantes y apropiadas para sus alumnos, atendiendo a sus características personales y motivacionales, integrando a sus clases actividades que complementan o profundizan aprendizajes en los casos que sean necesarios."]},{name:"Motivación por el aprendizaje",levels:["No transmite motivación por el aprendizaje, la búsqueda o la indagación.","Transmite una motivación positiva por el aprendizaje, no obstante no insta a los estudiantes a indagar o buscar de manera autónoma","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda.","Transmite una motivación positiva por el aprendizaje, la indagación y la búsqueda, ejemplificando o comunicando experiencias reales que permitan valorar estas actitudes."]},{name:"Normas de comportamiento",levels:["No establece normas de comportamento para sus estudiantes.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, no obstante, no es sistemático en su cumplimiento.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado.","Establece normas de comportamento que son conocidas y comprensibles para sus alumnos, creando y manteniendo un ambiente de aprendizaje organizado, permitiendo altos niveles de participación."]},{name:"Respuestas frente al quiebre de normas",levels:["No genera respuestas frente al quiebre de las normas de convivencia.","Genera respuestas efectivas frente al quiebre de las normas de convivencia, pero debe mejorar la asertividad.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia.","Genera respuestas asertivas y efectivas frente al quiebre de las normas de convivencia, que entregan sentido de la importancia de los acuerdos y las normas previamente comunicadas."]}]},{domain:"Dominio C: Enseñanza para el aprendizaje de todos los estudiantes",criteria:[{name:"Presentación de objetivos",levels:["Al iniciar las clases no presenta el objetivo o sólo lo enuncia sin profundizar en él.","Al iniciar las clases presenta el objetivo de aprendizaje y el propósito, pero no logra dar cuenta de la relación con el futuro laboral de los estudiantes o con otras áreas del conocimiento.","Al iniciar las clases presentan el objetivo de aprendizaje, relacionándolo con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro.","Al iniciar las clases presentan el objetivo de aprendizaje involucrando a los estudiantes a través de la relación con el propósito que posee desde la disciplina, otras áreas del conocimiento o para su desempeño laboral futuro."]},{name:"Clase en función de objetivos",levels:["No realiza su clase en función de los objetivos de aprendizaje estipulados en las bases curriculares, o bien, los incorpora pero sin mantener coherencia con las habilidades, contenidos o competencias del currículum nacional","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando sólo uno de los siguientes elementos: desarrollo de competencias, habilidades, conocimientos o actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional.","Realiza sus clases en función de los Objetivos de Aprendizaje estipulados en las Bases Curriculares, considerando el desarrollo de competencias, habilidades, conocimientos y actitudes establecidos en el currículum nacional y en el PEI."]},{name:"Introducción de nueva información",levels:["Promueve actitudes de buen comportamento en el aula, no obstante, no incorpora ni la solidaridad ni el compromiso con el otro ni con ellos mismos, en sus clases.","Los docentes introducen a los estudiantes a nueva información, sin considerar el desarrollo de habilidades y actitudes.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos.","Los docentes introducen a sus estudiantes a nueva información y al desarrollo de nuevas habilidades y actitudes, mediante estrategias efectivas y variadas, que consideran sus conocimientos previos y su realidad inmediata."]},{name:"Desarrollo de contenidos",levels:["Desarrolla los contenidos de la clase sin precisión conceptual ni claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual, pero sin una extrapolación que permita entregar claridad a los estudiantes.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad.","Desarrolla los contenidos de la clase con rigurosidad conceptual y claridad, recurriendo al ejemplo y a la vida cotidiana para anclar el conocimiento."]},{name:"Retroalimentación",levels:["No retroalimenta a los estudiantes","Retroalimentan constantemente a sus estudiantes sólo de modo general.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal.","Retroalimentan constantemente a sus estudiantes sobre su desempeño, de manera individual o grupal, a través de preguntas o instancias que permiten modelar su aprendizaje."]},{name:"Monitoreo del aprendizaje",levels:["No monitorea el grado de comprensión y desempeño de sus estudiantes.","Monitorea parcialmente el grado de comprensión y desempeño de sus estudiantes, no siempre a través de evidencia.","Monitorea constantemente el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo.","Monitorea constantemente y en diferentes instancias el grado de comprensión y el desempeño de sus estudiantes durante el desarrollo de las clases para obtener evidencias acerca de lo que están aprendiendo."]},{name:"Orientación a objetivos transversales",levels:["No enuncia o enuncia de modo incorrecto elementos ligados hacia los objetivos transversales.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales, no obstante, la orientación es superficial y no predispone la construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores.","Orienta a sus estudiantes hacia temáticas ligadas a los objetivos transversales del currículum, con el fin de favorecer su proceso de construcción de valores en consonancia a elementos propios del PEI."]},{name:"Conclusión de la clase",levels:["El docente concluye la clase sin actividad o reactivo hacia los estudiantes.*","El docente concluye la clase con una explicación que resume los contenidos fundamentales, no obstante, no moviliza acciones en los estudiantes, que permitan activar contenidos.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido.","El docente concluye las clases con una actividad breve que permite a sus estudiantes realizar algunas de las siguientes acciones: demostrar, identificar, sintetizar, jerarquizar, formular dudas, conectar o valorar lo aprendido. Incorpora además preguntas de metacognición y/o autoevaluación."]},{name:"Abordaje de errores",levels:["No aborda los errores, únicamente los señala.","Aborda los errores no como fracasos, sino que corrige oportunamente, no obstante no entrega nuevas herramientas para construir de mejor forma nuevos aprendizajes.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje.","Aborda los errores no como fracasos, sino como ocasiones para enriquecer el proceso de aprendizaje a través de estrategias o precisiones claves en virtud de las habilidades o contenidos tratados."]},{name:"Apoyo a todos los estudiantes",levels:["El docente se centra en un grupo objetivo y homogéneo, descuidando la diversidad y las características particulares de todos sus estudiantes.","El docente apoya parcialmente a todos los estudiantes en sus procesos educativos, no obstante no consideran diversas estrategias según nivel de dominio por parte de los estudiantes.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso.","El docente apoya a todos los estudiantes en sus procesos educativos, considerando estrategias de apoyo por grupos según el nivel de dominio de las competencias definidas en el perfil de egreso y en consonancia con el PEI."]}]}],yM=["Líder de Proyecto","Secretario/a","Encargado/a de Materiales","Expositor/a","Investigador/a","Editor/a"],Uv=[{nombre:"Aprendiz Emergente",emoji:"🌱",promedioMin:1,promedioMax:3.9,mensaje:"¡Estás comenzando tu viaje de aprendizaje! Sigue esforzándote."},{nombre:"Explorador del Conocimiento",emoji:"🧭",promedioMin:4,promedioMax:4.9,mensaje:"¡Buen trabajo! Estás construyendo una base sólida."},{nombre:"Arquitecto de Ideas",emoji:"🏛️",promedioMin:5,promedioMax:5.9,mensaje:"¡Excelente! Demuestras un gran dominio de los temas."},{nombre:"Maestro del Saber",emoji:"🎓",promedioMin:6,promedioMax:6.5,mensaje:"¡Impresionante! Tu dedicación te lleva a la excelencia."},{nombre:"Sabio Luminar",emoji:"🌟",promedioMin:6.6,promedioMax:7,mensaje:"¡Extraordinario! Eres una inspiración para tus compañeros."}],eJ=({onLoginAttempt:t,onForgotPasswordRequest:e,error:r})=>{const[n,s]=Z.useState(""),[a,i]=Z.useState(""),[o,l]=Z.useState("login"),u=m=>{m.preventDefault(),t(n,a)},d=m=>{m.preventDefault(),e(n),l("forgot_sent")},h=()=>o==="forgot"?c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico Registrado"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>s(m.target.value),placeholder:"Ingrese su correo",className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm"})})]}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700",children:"Enviar Enlace de Recuperación"})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("login"),className:"font-medium text-amber-600 hover:text-amber-500",children:"Volver a Iniciar Sesión"})})]}):o==="forgot_sent"?c.jsxs("div",{className:"text-center",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:"Revise su Correo"}),c.jsxs("p",{className:"mt-2 text-sm text-slate-600",children:["Si existe una cuenta asociada a ",c.jsx("strong",{children:n}),", hemos enviado un enlace para restablecer su contraseña."]}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"(Para esta simulación, revise la consola del navegador para ver el enlace)."}),c.jsx("button",{type:"button",onClick:()=>{l("login"),s("")},className:"mt-6 font-medium text-amber-600 hover:text-amber-500",children:"← Volver a Iniciar Sesión"})]}):c.jsxs("form",{onSubmit:u,className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Correo Electrónico"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:m=>s(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:a,onChange:m=>i(m.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),r&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4",role:"alert",children:c.jsx("p",{children:r})}),c.jsx("div",{className:"text-sm text-center",children:c.jsx("button",{type:"button",onClick:()=>l("forgot"),className:"font-medium text-amber-600 hover:text-amber-500",children:"¿Olvidó su contraseña?"})}),c.jsx("div",{children:c.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-800 hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:"Ingresar"})})]});return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(k4,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:o==="login"?"Bienvenido/a, por favor inicie sesión":"Recuperación de Contraseña"})]}),c.jsx("div",{className:"w-full max-w-sm bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:h()}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]})},hE=({trigger:t,children:e,onOpen:r})=>{const[n,s]=Z.useState(!1),a=Z.useRef(null),i=()=>{const l=!n;s(l),l&&r&&r()},o=l=>{a.current&&!a.current.contains(l.target)&&s(!1)};return Z.useEffect(()=>(document.addEventListener("mousedown",o),()=>{document.removeEventListener("mousedown",o)}),[]),c.jsxs("div",{className:"relative",ref:a,children:[c.jsx("div",{onClick:i,children:t}),n&&c.jsx("div",{className:"absolute right-0 mt-2 w-72 bg-white dark:bg-slate-700 rounded-lg shadow-xl border border-slate-200 dark:border-slate-600 z-50 animate-fade-in-up",onClick:()=>s(!1),children:e})]})},rI="usuariosLiceo",tJ=({user:t,onClose:e,onSave:r})=>{const[n,s]=Z.useState({nombreCompleto:t.nombreCompleto,email:t.email,fotoUrl:t.fotoUrl||""}),a=o=>{s({...n,[o.target.name]:o.target.value})},i=o=>{o.preventDefault();const l={...t,...n};try{const u=localStorage.getItem(rI);let d=u?JSON.parse(u):[];const h=d.findIndex(m=>m.id===t.id);h>-1?d[h]=l:d.push(l),localStorage.setItem(rI,JSON.stringify(d)),r(l),e()}catch(u){console.error("Failed to save user profile:",u),alert("No se pudo guardar el perfil.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:o=>o.stopPropagation(),children:c.jsxs("form",{onSubmit:i,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Editar Perfil"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fotoUrl",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"URL de la Foto de Perfil"}),c.jsx("input",{type:"url",id:"fotoUrl",name:"fotoUrl",value:n.fotoUrl,onChange:a,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white",placeholder:"https://ejemplo.com/foto.jpg"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nombreCompleto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",id:"nombreCompleto",name:"nombreCompleto",value:n.nombreCompleto,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Correo Electrónico"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:a,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Función"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.profile})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Guardar Cambios"})]})]})})})},nI="usuariosLiceo",rJ=({user:t,onClose:e,onSave:r})=>{const[n,s]=Z.useState(""),[a,i]=Z.useState(""),[o,l]=Z.useState(null),u=d=>{if(d.preventDefault(),l(null),!n){l("La contraseña no puede estar en blanco.");return}if(n!==a){l("Las contraseñas no coinciden.");return}const h={...t,password:n};try{const m=localStorage.getItem(nI);let g=m?JSON.parse(m):[];const b=g.findIndex(y=>y.id===t.id);b>-1?g[b]=h:g.push(h),localStorage.setItem(nI,JSON.stringify(g)),r(h),e()}catch(m){console.error("Failed to save new password:",m),l("No se pudo guardar la nueva contraseña.")}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-md animate-fade-in-up",onClick:d=>d.stopPropagation(),children:c.jsxs("form",{onSubmit:u,children:[c.jsxs("div",{className:"p-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Configuración de Cuenta"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Usuario"}),c.jsx("p",{className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-md text-slate-700 dark:text-slate-300",children:t.email})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"newPassword",name:"newPassword",type:"password",required:!0,value:n,onChange:d=>s(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Confirmar Nueva Contraseña"}),c.jsx("div",{className:"mt-1",children:c.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",required:!0,value:a,onChange:d=>i(d.target.value),className:"appearance-none block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm placeholder-slate-400 focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white"})})]}),o&&c.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-3 text-sm",role:"alert",children:c.jsx("p",{children:o})})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end items-center gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:"Cambiar Contraseña"})]})]})})})},sI="anunciosMuro",aI="mensajesInternos",iI="lir-read-status",nJ=({user:t})=>{if(t.fotoUrl)return c.jsx("img",{src:t.fotoUrl,alt:t.nombreCompleto||"Avatar de usuario",className:"h-9 w-9 rounded-full object-cover"});const e=t.nombreCompleto||"",r=String(e).split(" ").filter(n=>n).map(n=>n[0]).join("").toUpperCase();return c.jsx("div",{className:"h-9 w-9 rounded-full bg-amber-500 text-white flex items-center justify-center font-bold",children:r.substring(0,2)})},sJ=({currentUser:t,onLogout:e,onNavigate:r,onUserUpdate:n,onChangeProfile:s,canChangeProfile:a,toggleSidebar:i,unreadMessagesCount:o,refreshUnreadCount:l})=>{const[u,d]=Z.useState([]),[h,m]=Z.useState([]),[g,b]=Z.useState(!1),[y,_]=Z.useState(!1),T=Z.useCallback(()=>{try{const P=localStorage.getItem(`${iI}-${t.id}`);return P?JSON.parse(P):{announcements:[],messages:[]}}catch{return{announcements:[],messages:[]}}},[t.id]),k=Z.useCallback(P=>{try{localStorage.setItem(`${iI}-${t.id}`,JSON.stringify(P))}catch(L){console.error("Failed to set read status:",L)}},[t.id]);Z.useEffect(()=>{const P=JSON.parse(localStorage.getItem(sI)||"[]"),L=T();d(P.filter(E=>!L.announcements.includes(E.id)));const C=JSON.parse(localStorage.getItem(aI)||"[]");m(C.filter(E=>E.para===t.email).sort((E,B)=>new Date(B.fecha).getTime()-new Date(E.fecha).getTime()).slice(0,5))},[t.id,T,o]);const D=()=>{const P=T(),L=JSON.parse(localStorage.getItem(sI)||"[]").map(C=>C.id);P.announcements=L,k(P),d([])},M=()=>{const P=T(),C=JSON.parse(localStorage.getItem(aI)||"[]").filter(E=>E.para===t.email).map(E=>E.id);P.messages=[...new Set([...P.messages,...C])],k(P),l()};return c.jsxs(c.Fragment,{children:[c.jsx("header",{className:"bg-white shadow-md sticky top-0 z-40 h-16",children:c.jsxs("div",{className:"container mx-auto px-4 h-full flex justify-between items-center",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"text-slate-600 dark:text-slate-300 md:hidden mr-2",onClick:i,children:c.jsx(LY,{})}),c.jsxs("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>r("Dashboard"),children:[c.jsxs("svg",{className:"w-8 h-8 text-slate-700 dark:text-slate-200",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[c.jsx("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20V6.5A2.5 2.5 0 0 0 17.5 4h-11A2.5 2.5 0 0 0 4 6.5v13Z",stroke:"currentColor",strokeWidth:"1.5"}),c.jsx("path",{d:"M16 4.5V17",stroke:"currentColor",strokeWidth:"1.5"})]}),c.jsx("span",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 hidden sm:block",children:"Gestión LIR"})]})]}),c.jsx("div",{className:"flex-1 flex justify-center",children:c.jsx("button",{onClick:()=>r("Calendario Académico"),className:"p-2.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-600 dark:text-slate-300",title:"Calendario Académico",children:c.jsx(UY,{})})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"flex items-center gap-3",children:c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754153206/ChatGPT_Image_2_ago_2025_12_46_35_p.m._qsqj5e.png",alt:"Logo LIR",className:"h-10 w-10 object-contain"})}),c.jsx(hE,{onOpen:D,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Notificaciones",children:[c.jsx(Cg,{}),u.length>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:u.length})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Anuncios Recientes"}),c.jsxs("ul",{className:"mt-1",children:[u.slice(0,3).map(P=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsx("p",{className:"font-bold dark:text-slate-200",children:P.titulo}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:P.mensaje})]},P.id)),u.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay anuncios nuevos."})]}),c.jsx("button",{onClick:()=>r("Muro de Anuncios"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ver todo"})]})}),c.jsx(hE,{onOpen:M,trigger:c.jsxs("button",{className:"relative p-2 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-300 transition-colors",title:"Mensajes",children:[c.jsx(Eg,{}),o>0&&c.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-[10px] font-bold rounded-full flex items-center justify-center",children:o})]}),children:c.jsxs("div",{className:"p-2",children:[c.jsx("h3",{className:"font-semibold px-2 pb-1 border-b dark:border-slate-600 text-slate-800 dark:text-slate-200",children:"Mensajes"}),c.jsxs("ul",{className:"mt-1",children:[h.slice(0,3).map(P=>c.jsxs("li",{className:"p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600 text-sm",children:[c.jsxs("p",{className:"font-bold dark:text-slate-200",children:["De: ",P.de]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 truncate",children:P.asunto})]},P.id)),h.length===0&&c.jsx("li",{className:"p-2 text-sm text-slate-500 dark:text-slate-400",children:"No hay mensajes recientes."})]}),c.jsx("button",{onClick:()=>r("Mensajería Interna"),className:"w-full mt-2 text-center text-sm font-semibold text-amber-600 hover:underline p-2",children:"Ir a la bandeja"})]})}),c.jsx(hE,{trigger:c.jsx("button",{className:"p-1 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700",children:c.jsx(nJ,{user:t})}),children:c.jsxs("div",{className:"p-2",children:[c.jsxs("div",{className:"px-2 py-2 border-b dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:t.nombreCompleto}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:t.profile})]}),c.jsxs("ul",{className:"mt-2 text-slate-700 dark:text-slate-300",children:[c.jsx("li",{children:c.jsx("button",{onClick:()=>b(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Editar Perfil"})}),c.jsx("li",{children:c.jsx("button",{onClick:()=>_(!0),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Configuración"})}),a&&c.jsx("li",{children:c.jsx("button",{onClick:s,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"👑 Cambiar Vista"})}),c.jsx("li",{children:c.jsx("button",{onClick:e,className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-600",children:"Cerrar Sesión"})})]})]})})]})]})}),g&&c.jsx(tJ,{user:t,onClose:()=>b(!1),onSave:n}),y&&c.jsx(rJ,{user:t,onClose:()=>_(!1),onSave:n})]})};var rh={};const aJ={apiKey:rh.NEXT_PUBLIC_FIREBASE_API_KEY||"tu-api-key",authDomain:rh.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"tu-proyecto.firebaseapp.com",projectId:rh.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"tu-proyecto-id",storageBucket:rh.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"tu-proyecto.appspot.com",messagingSenderId:rh.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:rh.NEXT_PUBLIC_FIREBASE_APP_ID||"1:123456789:web:abcdef",measurementId:rh.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID||"G-XXXXXXXXXX"},wM=Nk().length===0?R5(aJ):Nk()[0],vt=aM(wM),iJ=jU(wM),d1="reemplazos_docentes",oJ="usuarios",I4=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaActualizacion:((a=(s=e.fechaActualizacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaActualizacion}},lJ=t=>{const e=t.data();return{id:t.id,...e}},cJ=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:or.fromDate(new Date),fechaActualizacion:or.fromDate(new Date)};return(await ps(kt(vt,d1),r)).id}catch(r){throw console.error("Error al guardar reemplazo:",r),new Error("No se pudo guardar el reemplazo")}},uJ=async(t,e)=>{try{const r=ur(vt,d1,t),n=await GA(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar este reemplazo");await Ta(r)}catch(r){throw console.error("Error al eliminar reemplazo:",r),new Error("No se pudo eliminar el reemplazo")}},AJ=(t,e,r=50)=>{try{const n=Yt(kt(vt,d1),Xr("userId","==",t),Pr("diaAusencia","desc"),BA(r));return mr(n,s=>{const a=s.docs.map(I4);e(a)},s=>{console.error("Error en suscripción a reemplazos:",s),e([])})}catch(n){return console.error("Error al crear la suscripción de reemplazos:",n),()=>{}}},dJ=t=>{try{const e=Yt(kt(vt,oJ),Xr("profile","==",jt.PROFESORADO));return mr(e,n=>{const s=n.docs.map(lJ);t(s)},n=>{console.error("Error al obtener la lista de profesores:",n),t([])})}catch(e){return console.error("Error al crear la suscripción de profesores:",e),()=>{}}},fJ=async t=>{try{const e=Yt(kt(vt,d1),Xr("userId","==",t)),n=(await Cs(e)).docs.map(I4),s=n.length,a=n.filter(o=>o.resultado==="Hora realizada").length,i=n.filter(o=>o.resultado==="Hora cubierta, no realizada").length;return{totalReemplazos:s,horasRealizadas:a,horasCubiertas:i,porcentajeRealizadas:s>0?a/s*100:0}}catch(e){throw console.error("Error al obtener estadísticas:",e),new Error("No se pudieron obtener las estadísticas")}},hJ=async(t,e)=>{try{if(!e.trim())return[];const r=Yt(kt(vt,d1),Xr("userId","==",t),Pr("diaAusencia","desc"),BA(100)),s=(await Cs(r)).docs.map(I4),a=e.toLowerCase();return s.filter(i=>i.docenteAusente.toLowerCase().includes(a)||i.docenteReemplazante.toLowerCase().includes(a)||i.curso.toLowerCase().includes(a)||i.diaAusencia.includes(a)||i.asignaturaAusente.toLowerCase().includes(a)||i.asignaturaReemplazante.toLowerCase().includes(a))}catch(r){return console.error("Error en búsqueda de reemplazos:",r),[]}},mJ=Array.from({length:12},(t,e)=>e+1),oI={docenteAusente:"",asignaturaAusente:"",curso:"",diaAusencia:"",bloquesAfectados:[],docenteReemplazante:"",asignaturaReemplazante:""},pJ=t=>{const[e,r]=Z.useState([]),[n,s]=Z.useState(!0),[a,i]=Z.useState(null);Z.useEffect(()=>t?AJ(t,h=>{r(h),s(!1)}):void 0,[t]);const o=Z.useCallback(async d=>{try{return i(null),await cJ(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=Z.useCallback(async d=>{try{i(null),await uJ(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]),u=Z.useCallback(async d=>{try{return i(null),d.trim()?await hJ(t,d):e}catch(h){return i(h instanceof Error?h.message:"Error en la búsqueda"),[]}},[t,e]);return{reemplazos:e,loading:n,error:a,save:o,remove:l,search:u}},gJ=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState(!0);Z.useEffect(()=>dJ(i=>{e(i),n(!1)}),[]);const s=Z.useMemo(()=>t.map(a=>a.nombreCompleto).sort(),[t]);return{profesores:t,profesorNames:s,loading:r}},xJ=({selectedBlocks:t,onChange:e,legend:r,disabled:n=!1})=>c.jsxs("fieldset",{children:[c.jsx("legend",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:r}),c.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-2",children:mJ.map(s=>c.jsxs("label",{className:`flex items-center space-x-2 p-2 border rounded-lg transition-colors ${n?"opacity-50 cursor-not-allowed":"hover:bg-slate-50 dark:border-slate-700 dark:hover:bg-slate-700"}`,children:[c.jsx("input",{type:"checkbox",value:s,checked:t.includes(s),onChange:e,disabled:n,className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500 disabled:opacity-50"}),c.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:s})]},s))})]}),vJ=({userId:t})=>{const[e,r]=Z.useState(null),[n,s]=Z.useState(!1),a=Z.useCallback(async()=>{try{s(!0);const i=new Date,o=(i.getMonth()+1).toString(),l=i.getFullYear().toString(),u=await fJ(t);r(u)}catch(i){console.error("Error al cargar estadísticas:",i)}finally{s(!1)}},[t]);return Z.useEffect(()=>{t&&a()},[t,a]),n?c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("div",{className:"animate-pulse flex justify-center",children:c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"})})}):e?c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:[c.jsx("h3",{className:"font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Estadísticas del Mes"}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:e.totalReemplazos}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Total"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:e.horasRealizadas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Realizadas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:e.horasCubiertas}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Cubiertas"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:[e.porcentajeRealizadas.toFixed(1),"%"]}),c.jsx("div",{className:"text-slate-500 dark:text-slate-400",children:"Efectividad"})]})]})]}):null},yJ=({currentUser:t})=>{const e=t.email||t.id||"",{reemplazos:r,save:n,remove:s,search:a,loading:i,error:o}=pJ(e),{profesorNames:l,loading:u}=gJ(),[d,h]=Z.useState(oI),[m,g]=Z.useState(""),[b,y]=Z.useState([]),[_,T]=Z.useState(null),[k,D]=Z.useState(!1),[M,P]=Z.useState(!1);Z.useEffect(()=>{(async()=>{if(!m.trim()){y(r);return}P(!0);try{const F=await a(m);y(F)}catch(F){console.error("Error en búsqueda:",F),y(r)}finally{P(!1)}})()},[r,m,a]);const L=Z.useCallback(R=>{const{name:F,value:Q}=R.target;h(H=>({...H,[F]:Q}))},[]),C=Z.useCallback(R=>{const F=parseInt(R.target.value,10);h(Q=>{const H=Q.bloquesAfectados,ne=H.includes(F)?H.filter(J=>J!==F):[...H,F].sort((J,re)=>J-re);return{...Q,bloquesAfectados:ne}})},[]),E=Z.useCallback(async R=>{R.preventDefault(),T(null),D(!0);const{docenteAusente:F,asignaturaAusente:Q,curso:H,diaAusencia:ne,bloquesAfectados:J,docenteReemplazante:re,asignaturaReemplazante:G}=d;if(!F||!Q||!H||!ne||!re||!G||J.length===0){T("Todos los campos son obligatorios y debe seleccionar al menos un bloque."),D(!1);return}if(F===re){T("El docente ausente y el reemplazante no pueden ser la misma persona."),D(!1);return}const q=new Date(ne),W=new Date;if(W.setHours(0,0,0,0),q<W&&!window.confirm("La fecha seleccionada es anterior a hoy. ¿Desea continuar?")){D(!1);return}try{const ie=Q.trim().toLowerCase()===G.trim().toLowerCase()?"Hora realizada":"Hora cubierta, no realizada",j={...d,resultado:ie};await n(j),h(oI);const Y=ie==="Hora realizada"?"✅ Reemplazo registrado - Hora realizada":"⚠️ Reemplazo registrado - Hora cubierta, no realizada",ee=document.createElement("div");ee.className="fixed top-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg z-50",ee.textContent=Y,document.body.appendChild(ee),setTimeout(()=>{document.body.contains(ee)&&document.body.removeChild(ee)},3e3)}catch(ie){console.error("Error al guardar reemplazo:",ie),T("Error al guardar el reemplazo. Por favor, intente nuevamente.")}finally{D(!1)}},[d,n]),B=Z.useCallback(async R=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await s(R)}catch(F){console.error("Error al eliminar reemplazo:",F),alert("Error al eliminar el reemplazo. Por favor, intente nuevamente.")}},[s]),O="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400 disabled:opacity-50 disabled:cursor-not-allowed";return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx(vJ,{userId:e}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Registro de Inasistencias y Reemplazos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete el formulario para registrar una nueva suplencia."}),u?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando profesores..."})]}):c.jsxs("form",{onSubmit:E,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Ausente"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteAusente",value:d.docenteAusente,onChange:L,className:O,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaAusente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaAusente",value:d.asignaturaAusente,onChange:L,className:O,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),ol.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:d.curso,onChange:L,className:O,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),ca.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"diaAusencia",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Día Ausencia"}),c.jsx("input",{type:"date",name:"diaAusencia",value:d.diaAusencia,onChange:L,className:O,disabled:k,required:!0})]}),c.jsx(xJ,{legend:"Bloques Afectados",selectedBlocks:d.bloquesAfectados,onChange:C,disabled:k})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2",children:"Docente Reemplazante"}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docenteReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre"}),c.jsxs("select",{name:"docenteReemplazante",value:d.docenteReemplazante,onChange:L,className:O,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un docente"}),l.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignaturaReemplazante",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignaturaReemplazante",value:d.asignaturaReemplazante,onChange:L,className:O,disabled:k,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una asignatura"}),ol.map(R=>c.jsx("option",{value:R,children:R},R))]})]}),d.asignaturaAusente&&d.asignaturaReemplazante&&c.jsxs("div",{className:"mt-6 p-4 rounded-lg border-2 border-dashed border-slate-300 dark:border-slate-600",children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300 mb-2",children:"Vista Previa del Resultado:"}),c.jsx("div",{className:`px-3 py-2 rounded-full text-sm font-semibold inline-flex ${d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"✅ Hora realizada":"⚠️ Hora cubierta, no realizada"}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:d.asignaturaAusente.toLowerCase()===d.asignaturaReemplazante.toLowerCase()?"Las asignaturas coinciden - se considera hora realizada":"Las asignaturas no coinciden - se considera hora cubierta pero no realizada"})]})]})]}),(_||o)&&c.jsx("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:c.jsx("p",{className:"text-red-600 dark:text-red-400",children:_||o})}),c.jsx("div",{className:"pt-4 text-right",children:c.jsxs("button",{type:"submit",disabled:k||u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[k&&c.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),k?"Registrando...":"Registrar Reemplazo"]})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Reemplazos"}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"Buscar por docente, curso o fecha (YYYY-MM-DD)...",value:m,onChange:R=>g(R.target.value),className:`${O} md:w-1/2 pl-10`,disabled:M}),c.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:M?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 border-t-transparent rounded-full animate-spin"}):c.jsx("svg",{className:"h-5 w-5 text-slate-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),m&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:M?"Buscando...":`${b.length} resultado(s) encontrado(s)`})]}),i?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-400",children:"Cargando reemplazos..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Ausente"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Docente Reemplazante"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Bloques"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Resultado"}),c.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:b.length>0?b.map(R=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(R.diaAusencia+"T12:00:00").toLocaleDateString("es-CL")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:R.curso}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[R.docenteAusente,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.asignaturaAusente})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:[R.docenteReemplazante,c.jsx("br",{}),c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:R.asignaturaReemplazante})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:R.bloquesAfectados.join(", ")}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${R.resultado==="Hora realizada"?"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300"}`,children:R.resultado})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("button",{onClick:()=>B(R.id),title:"Eliminar registro",className:"p-1 text-red-600 hover:text-red-800 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors disabled:opacity-50",disabled:k,children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},R.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:m?"No se encontraron registros que coincidan con la búsqueda.":"No hay registros de reemplazos."})})})]})}),b.length>0&&!m&&c.jsxs("div",{className:"mt-4 text-sm text-slate-500 dark:text-slate-400 text-center",children:["Mostrando los últimos ",b.length," registros"]})]})]})},wJ=t=>{console.log("🔄 Iniciando suscripción a todos los reemplazos...");try{const e=kt(Zr,"reemplazos"),r=Yt(e,Pr("fecha","desc"));return mr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Reemplazos cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar reemplazos:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a reemplazos:",e),e}},bJ=t=>{console.log("🔄 Iniciando suscripción a todos los acompañamientos...");try{const e=kt(Zr,"acompanamientos"),r=Yt(e,Pr("fecha","desc"));return mr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Acompañamientos cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar acompañamientos:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a acompañamientos:",e),e}},CJ=t=>{console.log("🔄 Iniciando suscripción a todos los eventos del calendario...");try{const e=kt(Zr,"calendar_events"),r=Yt(e,Pr("date","asc"));return mr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Eventos del calendario cargados para dashboard:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar eventos del calendario:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a eventos del calendario:",e),e}},pu=({title:t,value:e,description:r,isLoading:n=!1})=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-5 rounded-xl border border-slate-200 dark:border-slate-700",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),n?c.jsxs("div",{className:"flex items-center mt-2",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando..."})]}):c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:e}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]})]}),nh=({title:t,data:e,colorClass:r,valueFormatter:n=a=>String(a),isLoading:s=!1})=>{const a=Z.useMemo(()=>e.map(o=>typeof o.value=="number"?o.value:parseFloat(String(o.value))||0),[e]),i=Z.useMemo(()=>Math.max(...a,1),[a]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),s?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando datos..."})]}):c.jsx("div",{className:"space-y-4",children:e.length>0?e.sort((o,l)=>(typeof l.value=="number"?l.value:0)-(typeof o.value=="number"?o.value:0)).map((o,l)=>{const u=typeof o.value=="number"?o.value:parseFloat(String(o.value))||0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:o.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:n(o.value)})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${u/i*100}%`}})})]},o.label+l)}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay datos para mostrar."})})]})},EJ=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState([]),[s,a]=Z.useState([]),[i,o]=Z.useState(!0),[l,u]=Z.useState(null);return Z.useEffect(()=>{console.log("🔄 Iniciando carga de datos del dashboard...");let d=0;const h=3,m=()=>{d++,d>=h&&(o(!1),console.log("✅ Todos los datos del dashboard cargados"))};try{const g=wJ(_=>{e(_),m()}),b=bJ(_=>{n(_),m()}),y=CJ(_=>{a(_),m()});return()=>{g(),b(),y()}}catch(g){console.error("❌ Error al configurar suscripciones del dashboard:",g),u(g instanceof Error?g.message:"Error al cargar datos del dashboard"),o(!1)}},[]),{registros:t,acompanamientos:r,calendarEvents:s,loading:i,error:l}},_J=({currentUser:t})=>{var h,m;console.log("=== DASHBOARD SUBDIRECCION DEBUG ==="),console.log("🔍 Dashboard - currentUser completo:",t),console.log("🔍 Dashboard - currentUser.profile:",t==null?void 0:t.profile),console.log("🔍 Dashboard - Verificación de perfil:",(t==null?void 0:t.profile)==="SUBDIRECCION"),console.log("🔍 Dashboard - Typeof profile:",typeof(t==null?void 0:t.profile)),console.log("🔍 Dashboard - Profile length:",(h=t==null?void 0:t.profile)==null?void 0:h.length),console.log("🔍 Dashboard - Profile con comillas:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - Comparación con trim:",((m=t==null?void 0:t.profile)==null?void 0:m.trim())==="SUBDIRECCION"),console.log("=====================================");const{registros:e,acompanamientos:r,calendarEvents:n,loading:s,error:a}=EJ(),[i,o]=Z.useState(zg);if(console.log("🔍 Dashboard - Datos recibidos:",{registros:e.length,acompanamientos:r.length,calendarEvents:n.length,loading:s,error:a,currentUser:t==null?void 0:t.profile}),Z.useEffect(()=>{try{const g=localStorage.getItem("acompanamientoDocenteCustomRubrica");o(g?JSON.parse(g):zg)}catch(g){console.error("Error al leer rúbrica personalizada",g),o(zg)}},[]),console.log("🔍 Dashboard - Verificando permisos..."),console.log("🔍 Dashboard - currentUser existe:",!!t),console.log("🔍 Dashboard - profile value:",`"${t==null?void 0:t.profile}"`),console.log("🔍 Dashboard - comparación exacta:",(t==null?void 0:t.profile)==="SUBDIRECCION"),!t)return console.log("❌ Dashboard - currentUser es null/undefined"),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando usuario..."}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Esperando datos del usuario autenticado..."})]});if(t.profile!=="SUBDIRECCION")return console.log("❌ Dashboard - Perfil no autorizado:",t.profile),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"🚫"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Acceso Restringido"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Este dashboard está disponible solo para usuarios con perfil de Subdirección."}),c.jsxs("div",{className:"mt-4 p-3 bg-slate-100 dark:bg-slate-700 rounded text-xs text-slate-600 dark:text-slate-400",children:[c.jsx("p",{children:c.jsx("strong",{children:"Debug Info:"})}),c.jsxs("p",{children:['Su perfil actual: "',t.profile,'"']}),c.jsx("p",{children:'Perfil requerido: "SUBDIRECCION"'}),c.jsxs("p",{children:["Usuario: ",t.email||t.nombreCompleto]})]})]});if(console.log("✅ Dashboard - Permisos verificados correctamente"),a)return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"⚠️"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Error al Cargar Datos"}),c.jsx("p",{className:"text-red-500 dark:text-red-400 text-lg max-w-md mb-4",children:a}),c.jsx("button",{onClick:()=>window.location.reload(),className:"bg-amber-500 text-white px-4 py-2 rounded-lg hover:bg-amber-600 transition-colors",children:"Recargar Página"})]});const l=Z.useMemo(()=>{const g=e.length;if(g===0)return{totalInasistencias:0,horasRealizadas:0,horasCubiertas:0,tasaCobertura:"0%",inasistenciasPorDocente:[],reemplazosPorDocente:[],distribucionResultados:[],inasistenciasPorCurso:[]};const b=e.filter(P=>P.resultado==="Hora realizada").length,y=g-b,_=`${(b/g*100).toFixed(1)}%`,T=(P,L)=>P.reduce((C,E)=>{const B=E[L];return typeof B=="string"&&(C[B]=(C[B]||0)+1),C},{}),k=T(e,"docenteAusente"),D=T(e,"docenteReemplazante"),M=T(e,"curso");return{totalInasistencias:g,horasRealizadas:b,horasCubiertas:y,tasaCobertura:_,inasistenciasPorDocente:Object.entries(k).map(([P,L])=>({label:P,value:L})),reemplazosPorDocente:Object.entries(D).map(([P,L])=>({label:P,value:L})),inasistenciasPorCurso:Object.entries(M).map(([P,L])=>({label:P,value:L})),distribucionResultados:[{label:"Hora Realizada",value:b},{label:"Hora Cubierta",value:y}]}},[e]),u=Z.useMemo(()=>{const g=r.length;if(g===0)return{totalAcompanamientos:0,promedioGeneral:"N/A",desempenoPorDocente:[],desempenoPorDominio:[]};const b=new Map;i.forEach(L=>{L.criteria.forEach(C=>{b.set(C.name,L.domain)})});let y=0,_=0;const T={},k={};r.forEach(L=>{T[L.docente]||(T[L.docente]={total:0,count:0}),Object.entries(L.rubricaResultados).forEach(([C,E])=>{y+=E,_++,T[L.docente].total+=E,T[L.docente].count++;const B=b.get(C);B&&(k[B]||(k[B]={total:0,count:0}),k[B].total+=E,k[B].count++)})});const D=_>0?(y/_).toFixed(2):"N/A",M=Object.entries(T).map(([L,C])=>({label:L,value:C.count>0?(C.total/C.count).toFixed(2):0})),P=Object.entries(k).map(([L,C])=>({label:L,value:C.count>0?(C.total/C.count).toFixed(2):0}));return{totalAcompanamientos:g,promedioGeneral:D,desempenoPorDocente:M,desempenoPorDominio:P}},[r,i]),d=Z.useMemo(()=>{const g={[Yr.EVALUACION]:0,[Yr.ACTO]:0,[Yr.ACTIVIDAD_FOCALIZADA]:0,[Yr.SALIDA_PEDAGOGICA]:0};for(const y of n)g.hasOwnProperty(y.type)&&g[y.type]++;const b=Object.entries(g).map(([y,_])=>({label:qd[y].label,value:_}));return{totalEvaluaciones:g[Yr.EVALUACION],totalActos:g[Yr.ACTO],totalActividadesFocalizadas:g[Yr.ACTIVIDAD_FOCALIZADA],totalSalidasPedagogicas:g[Yr.SALIDA_PEDAGOGICA],distribucionEventos:b}},[n]);return s?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Cargando Dashboard"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md",children:"Obteniendo datos desde la base de datos..."})]}):l.totalInasistencias===0&&u.totalAcompanamientos===0&&n.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex flex-col items-center justify-center text-center animate-fade-in",children:[c.jsx("span",{className:"text-6xl mb-4",children:"📊"}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg max-w-md mb-4",children:"Aún no hay datos para mostrar. Comience por añadir registros en los módulos correspondientes."}),c.jsxs("div",{className:"text-sm text-slate-400 dark:text-slate-500",children:[c.jsx("p",{children:"• Módulo de Inasistencias y Reemplazos"}),c.jsx("p",{children:"• Módulo de Acompañamiento Docente"}),c.jsx("p",{children:"• Calendario Académico"})]})]}):c.jsxs("div",{className:"space-y-12 animate-fade-in",children:[c.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-amber-600 dark:from-amber-600 dark:to-amber-700 text-white p-6 rounded-xl shadow-lg",children:[c.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Dashboard de Subdirección"}),c.jsx("p",{className:"text-amber-100",children:"Vista consolidada de datos institucionales"}),c.jsxs("p",{className:"text-sm text-amber-200 mt-2",children:["Última actualización: ",new Date().toLocaleString("es-CL")]})]}),e.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📋 Dashboard de Inasistencias y Reemplazos"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(pu,{title:"Total Inasistencias",value:l.totalInasistencias,description:"Registros totales",isLoading:s}),c.jsx(pu,{title:"Horas Realizadas",value:l.horasRealizadas,description:"Reemplazo con misma asignatura",isLoading:s}),c.jsx(pu,{title:"Horas Cubiertas",value:l.horasCubiertas,description:"Reemplazo con otra asignatura",isLoading:s}),c.jsx(pu,{title:"Tasa de Cobertura Efectiva",value:l.tasaCobertura,description:"% de horas realizadas",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(nh,{title:"Inasistencias por Docente",data:l.inasistenciasPorDocente,colorClass:"bg-red-400",isLoading:s}),c.jsx(nh,{title:"Reemplazos por Docente",data:l.reemplazosPorDocente,colorClass:"bg-sky-400",isLoading:s}),c.jsx(nh,{title:"Inasistencias por Curso",data:l.inasistenciasPorCurso,colorClass:"bg-amber-400",isLoading:s}),c.jsx(nh,{title:"Distribución de Resultados",data:l.distribucionResultados,colorClass:"bg-green-400",isLoading:s})]})]}),r.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"👥 Dashboard de Acompañamiento Docente"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(pu,{title:"Total Acompañamientos",value:u.totalAcompanamientos,description:"Registros realizados",isLoading:s}),c.jsx(pu,{title:"Promedio General",value:u.promedioGeneral,description:"Calificación promedio (1-4)",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(nh,{title:"Desempeño Promedio por Docente",data:u.desempenoPorDocente,colorClass:"bg-indigo-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:s}),c.jsx(nh,{title:"Desempeño Promedio por Dominio",data:u.desempenoPorDominio,colorClass:"bg-teal-400",valueFormatter:g=>Number(g).toFixed(2),isLoading:s})]})]}),n.length>0&&c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 border-b border-slate-200 dark:border-slate-700 pb-2",children:"📅 Resumen del Calendario Académico"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsx(pu,{title:"Evaluaciones",value:d.totalEvaluaciones,description:"Eventos registrados",isLoading:s}),c.jsx(pu,{title:"Actos",value:d.totalActos,description:"Eventos registrados",isLoading:s}),c.jsx(pu,{title:"Act. Focalizadas",value:d.totalActividadesFocalizadas,description:"Eventos registrados",isLoading:s}),c.jsx(pu,{title:"Salidas Pedagógicas",value:d.totalSalidasPedagogicas,description:"Eventos registrados",isLoading:s})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[c.jsx(nh,{title:"Distribución de Eventos del Calendario",data:d.distribucionEventos,colorClass:"bg-violet-400",isLoading:s}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Próximos Eventos"}),s?c.jsxs("div",{className:"flex justify-center items-center py-8",children:[c.jsx("div",{className:"w-6 h-6 border-2 border-amber-500 border-t-transparent rounded-full animate-spin"}),c.jsx("span",{className:"ml-2 text-slate-500 dark:text-slate-400",children:"Cargando eventos..."})]}):c.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[n.filter(g=>new Date(g.date)>=new Date).slice(0,5).map((g,b)=>{var y,_;return c.jsx("div",{className:"p-3 border dark:border-slate-600 rounded-md",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200",children:g.responsables||"Evento sin título"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(g.date).toLocaleDateString("es-CL")}),g.ubicacion&&c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["📍 ",g.ubicacion]})]}),c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${((y=qd[g.type])==null?void 0:y.color)||"bg-gray-100 text-gray-800"}`,children:((_=qd[g.type])==null?void 0:_.label)||g.type})]})},g.id||b)}),n.filter(g=>new Date(g.date)>=new Date).length===0&&c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay eventos próximos programados"})]})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-r from-slate-50 to-slate-100 dark:from-slate-800 dark:to-slate-700 p-6 rounded-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"📈 Resumen Ejecutivo"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-amber-600 dark:text-amber-400",children:e.length+r.length+n.length}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Total de registros en el sistema"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:new Set([...e.map(g=>g.docenteAusente),...r.map(g=>g.docente)]).size}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Docentes con registros"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:[Math.round(e.filter(g=>g.resultado==="Hora realizada").length/Math.max(e.length,1)*100),"%"]}),c.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"Efectividad en cobertura"})]})]})]}),c.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 border-t border-slate-200 dark:border-slate-700 pt-6",children:[c.jsx("p",{children:"Dashboard de Subdirección - Sistema de Gestión Pedagógica"}),c.jsx("p",{children:"Los datos se actualizan en tiempo real desde la base de datos"})]})]})};var lI;(function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"})(lI||(lI={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cI;(function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"})(cI||(cI={}));var uI;(function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(uI||(uI={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=["user","model","function","system"];var dI;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(dI||(dI={}));var fI;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(fI||(fI={}));var hI;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(hI||(hI={}));var mI;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"})(mI||(mI={}));var Gg;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"})(Gg||(Gg={}));var pI;(function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"})(pI||(pI={}));var gI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(gI||(gI={}));var xI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(xI||(xI={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class F0 extends Hi{constructor(e,r){super(e),this.response=r}}class bM extends Hi{constructor(e,r,n,s){super(e),this.status=r,this.statusText=n,this.errorDetails=s}}class of extends Hi{}class CM extends Hi{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SJ="https://generativelanguage.googleapis.com",TJ="v1beta",NJ="0.24.1",BJ="genai-js";var Fh;(function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Fh||(Fh={}));class kJ{constructor(e,r,n,s,a){this.model=e,this.task=r,this.apiKey=n,this.stream=s,this.requestOptions=a}toString(){var e,r;const n=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||TJ;let a=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||SJ}/${n}/${this.model}:${this.task}`;return this.stream&&(a+="?alt=sse"),a}}function IJ(t){const e=[];return t!=null&&t.apiClient&&e.push(t.apiClient),e.push(`${BJ}/${NJ}`),e.join(" ")}async function FJ(t){var e;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",IJ(t.requestOptions)),r.append("x-goog-api-key",t.apiKey);let n=(e=t.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(n){if(!(n instanceof Headers))try{n=new Headers(n)}catch(s){throw new of(`unable to convert customHeaders value ${JSON.stringify(n)} to Headers: ${s.message}`)}for(const[s,a]of n.entries()){if(s==="x-goog-api-key")throw new of(`Cannot set reserved header name ${s}`);if(s==="x-goog-api-client")throw new of(`Header name ${s} can only be set using the apiClient field`);r.append(s,a)}}return r}async function DJ(t,e,r,n,s,a){const i=new kJ(t,e,r,n,a);return{url:i.toString(),fetchOptions:Object.assign(Object.assign({},MJ(a)),{method:"POST",headers:await FJ(i),body:s})}}async function f1(t,e,r,n,s,a={},i=fetch){const{url:o,fetchOptions:l}=await DJ(t,e,r,n,s,a);return RJ(o,l,i)}async function RJ(t,e,r=fetch){let n;try{n=await r(t,e)}catch(s){LJ(s,t)}return n.ok||await UJ(n,t),n}function LJ(t,e){let r=t;throw r.name==="AbortError"?(r=new CM(`Request aborted when fetching ${e.toString()}: ${t.message}`),r.stack=t.stack):t instanceof bM||t instanceof of||(r=new Hi(`Error fetching from ${e.toString()}: ${t.message}`),r.stack=t.stack),r}async function UJ(t,e){let r="",n;try{const s=await t.json();r=s.error.message,s.error.details&&(r+=` ${JSON.stringify(s.error.details)}`,n=s.error.details)}catch{}throw new bM(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${r}`,t.status,t.statusText,n)}function MJ(t){const e={};if((t==null?void 0:t.signal)!==void 0||(t==null?void 0:t.timeout)>=0){const r=new AbortController;(t==null?void 0:t.timeout)>=0&&setTimeout(()=>r.abort(),t.timeout),t!=null&&t.signal&&t.signal.addEventListener("abort",()=>{r.abort()}),e.signal=r.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),zy(t.candidates[0]))throw new F0(`${Pd(t)}`,t);return PJ(t)}else if(t.promptFeedback)throw new F0(`Text not available. ${Pd(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),zy(t.candidates[0]))throw new F0(`${Pd(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),vI(t)[0]}else if(t.promptFeedback)throw new F0(`Function call not available. ${Pd(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),zy(t.candidates[0]))throw new F0(`${Pd(t)}`,t);return vI(t)}else if(t.promptFeedback)throw new F0(`Function call not available. ${Pd(t)}`,t)},t}function PJ(t){var e,r,n,s;const a=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const i of(s=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)i.text&&a.push(i.text),i.executableCode&&a.push("\n```"+i.executableCode.language+`
`+i.executableCode.code+"\n```\n"),i.codeExecutionResult&&a.push("\n```\n"+i.codeExecutionResult.output+"\n```\n");return a.length>0?a.join(""):""}function vI(t){var e,r,n,s;const a=[];if(!((r=(e=t.candidates)===null||e===void 0?void 0:e[0].content)===null||r===void 0)&&r.parts)for(const i of(s=(n=t.candidates)===null||n===void 0?void 0:n[0].content)===null||s===void 0?void 0:s.parts)i.functionCall&&a.push(i.functionCall);if(a.length>0)return a}const jJ=[Gg.RECITATION,Gg.SAFETY,Gg.LANGUAGE];function zy(t){return!!t.finishReason&&jJ.includes(t.finishReason)}function Pd(t){var e,r,n;let s="";if((!t.candidates||t.candidates.length===0)&&t.promptFeedback)s+="Response was blocked",!((e=t.promptFeedback)===null||e===void 0)&&e.blockReason&&(s+=` due to ${t.promptFeedback.blockReason}`),!((r=t.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(s+=`: ${t.promptFeedback.blockReasonMessage}`);else if(!((n=t.candidates)===null||n===void 0)&&n[0]){const a=t.candidates[0];zy(a)&&(s+=`Candidate was blocked due to ${a.finishReason}`,a.finishMessage&&(s+=`: ${a.finishMessage}`))}return s}function vx(t){return this instanceof vx?(this.v=t,this):new vx(t)}function OJ(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,a=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(m){n[m]&&(s[m]=function(g){return new Promise(function(b,y){a.push([m,g,b,y])>1||o(m,g)})})}function o(m,g){try{l(n[m](g))}catch(b){h(a[0][3],b)}}function l(m){m.value instanceof vx?Promise.resolve(m.value.v).then(u,d):h(a[0][2],m)}function u(m){o("next",m)}function d(m){o("throw",m)}function h(m,g){m(g),a.shift(),a.length&&o(a[0][0],a[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function QJ(t){const e=t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=zJ(e),[n,s]=r.tee();return{stream:VJ(n),response:HJ(s)}}async function HJ(t){const e=[],r=t.getReader();for(;;){const{done:n,value:s}=await r.read();if(n)return F4(GJ(e));e.push(s)}}function VJ(t){return OJ(this,arguments,function*(){const r=t.getReader();for(;;){const{value:n,done:s}=yield vx(r.read());if(s)break;yield yield vx(F4(n))}})}function zJ(t){const e=t.getReader();return new ReadableStream({start(n){let s="";return a();function a(){return e.read().then(({value:i,done:o})=>{if(o){if(s.trim()){n.error(new Hi("Failed to parse stream"));return}n.close();return}s+=i;let l=s.match(yI),u;for(;l;){try{u=JSON.parse(l[1])}catch{n.error(new Hi(`Error parsing JSON response: "${l[1]}"`));return}n.enqueue(u),s=s.substring(l[0].length),l=s.match(yI)}return a()}).catch(i=>{let o=i;throw o.stack=i.stack,o.name==="AbortError"?o=new CM("Request aborted when reading from the stream"):o=new Hi("Error reading from the stream"),o})}}})}function GJ(t){const e=t[t.length-1],r={promptFeedback:e==null?void 0:e.promptFeedback};for(const n of t){if(n.candidates){let s=0;for(const a of n.candidates)if(r.candidates||(r.candidates=[]),r.candidates[s]||(r.candidates[s]={index:s}),r.candidates[s].citationMetadata=a.citationMetadata,r.candidates[s].groundingMetadata=a.groundingMetadata,r.candidates[s].finishReason=a.finishReason,r.candidates[s].finishMessage=a.finishMessage,r.candidates[s].safetyRatings=a.safetyRatings,a.content&&a.content.parts){r.candidates[s].content||(r.candidates[s].content={role:a.content.role||"user",parts:[]});const i={};for(const o of a.content.parts)o.text&&(i.text=o.text),o.functionCall&&(i.functionCall=o.functionCall),o.executableCode&&(i.executableCode=o.executableCode),o.codeExecutionResult&&(i.codeExecutionResult=o.codeExecutionResult),Object.keys(i).length===0&&(i.text=""),r.candidates[s].content.parts.push(i)}s++}n.usageMetadata&&(r.usageMetadata=n.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e,r,n){const s=await f1(e,Fh.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(r),n);return QJ(s)}async function _M(t,e,r,n){const a=await(await f1(e,Fh.GENERATE_CONTENT,t,!1,JSON.stringify(r),n)).json();return{response:F4(a)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){if(t!=null){if(typeof t=="string")return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function yx(t){let e=[];if(typeof t=="string")e=[{text:t}];else for(const r of t)typeof r=="string"?e.push({text:r}):e.push(r);return qJ(e)}function qJ(t){const e={role:"user",parts:[]},r={role:"function",parts:[]};let n=!1,s=!1;for(const a of t)"functionResponse"in a?(r.parts.push(a),s=!0):(e.parts.push(a),n=!0);if(n&&s)throw new Hi("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!n&&!s)throw new Hi("No content is provided for sending chat message.");return n?e:r}function KJ(t,e){var r;let n={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(r=e==null?void 0:e.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const s=t.generateContentRequest!=null;if(t.contents){if(s)throw new of("CountTokensRequest must have one of contents or generateContentRequest, not both.");n.contents=t.contents}else if(s)n=Object.assign(Object.assign({},n),t.generateContentRequest);else{const a=yx(t);n.contents=[a]}return{generateContentRequest:n}}function wI(t){let e;return t.contents?e=t:e={contents:[yx(t)]},t.systemInstruction&&(e.systemInstruction=SM(t.systemInstruction)),e}function $J(t){return typeof t=="string"||Array.isArray(t)?{content:yx(t)}:t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],WJ={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function YJ(t){let e=!1;for(const r of t){const{role:n,parts:s}=r;if(!e&&n!=="user")throw new Hi(`First content should be with role 'user', got ${n}`);if(!AI.includes(n))throw new Hi(`Each item should include role field. Got ${n} but valid roles are: ${JSON.stringify(AI)}`);if(!Array.isArray(s))throw new Hi("Content should have 'parts' property with an array of Parts");if(s.length===0)throw new Hi("Each Content should have at least one part");const a={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const o of s)for(const l of bI)l in o&&(a[l]+=1);const i=WJ[n];for(const o of bI)if(!i.includes(o)&&a[o]>0)throw new Hi(`Content with role '${n}' can't contain '${o}' part`);e=!0}}function CI(t){var e;if(t.candidates===void 0||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const n of r.parts)if(n===void 0||Object.keys(n).length===0||n.text!==void 0&&n.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="SILENT_ERROR";class JJ{constructor(e,r,n,s={}){this.model=r,this.params=n,this._requestOptions=s,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,n!=null&&n.history&&(YJ(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,r={}){var n,s,a,i,o,l;await this._sendPromise;const u=yx(e),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),r);let m;return this._sendPromise=this._sendPromise.then(()=>_M(this._apiKey,this.model,d,h)).then(g=>{var b;if(CI(g.response)){this._history.push(u);const y=Object.assign({parts:[],role:"model"},(b=g.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(y)}else{const y=Pd(g.response);y&&console.warn(`sendMessage() was unsuccessful. ${y}. Inspect response object for details.`)}m=g}).catch(g=>{throw this._sendPromise=Promise.resolve(),g}),await this._sendPromise,m}async sendMessageStream(e,r={}){var n,s,a,i,o,l;await this._sendPromise;const u=yx(e),d={safetySettings:(n=this.params)===null||n===void 0?void 0:n.safetySettings,generationConfig:(s=this.params)===null||s===void 0?void 0:s.generationConfig,tools:(a=this.params)===null||a===void 0?void 0:a.tools,toolConfig:(i=this.params)===null||i===void 0?void 0:i.toolConfig,systemInstruction:(o=this.params)===null||o===void 0?void 0:o.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,u]},h=Object.assign(Object.assign({},this._requestOptions),r),m=EM(this._apiKey,this.model,d,h);return this._sendPromise=this._sendPromise.then(()=>m).catch(g=>{throw new Error(EI)}).then(g=>g.response).then(g=>{if(CI(g)){this._history.push(u);const b=Object.assign({},g.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=Pd(g);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(g=>{g.message!==EI&&console.error(g)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XJ(t,e,r,n){return(await f1(e,Fh.COUNT_TOKENS,t,!1,JSON.stringify(r),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZJ(t,e,r,n){return(await f1(e,Fh.EMBED_CONTENT,t,!1,JSON.stringify(r),n)).json()}async function eX(t,e,r,n){const s=r.requests.map(i=>Object.assign(Object.assign({},i),{model:e}));return(await f1(e,Fh.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:s}),n)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,r,n={}){this.apiKey=e,this._requestOptions=n,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=SM(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(e,r={}){var n;const s=wI(e),a=Object.assign(Object.assign({},this._requestOptions),r);return _M(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),a)}async generateContentStream(e,r={}){var n;const s=wI(e),a=Object.assign(Object.assign({},this._requestOptions),r);return EM(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(n=this.cachedContent)===null||n===void 0?void 0:n.name},s),a)}startChat(e){var r;return new JJ(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},e),this._requestOptions)}async countTokens(e,r={}){const n=KJ(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),s=Object.assign(Object.assign({},this._requestOptions),r);return XJ(this.apiKey,this.model,n,s)}async embedContent(e,r={}){const n=$J(e),s=Object.assign(Object.assign({},this._requestOptions),r);return ZJ(this.apiKey,this.model,n,s)}async batchEmbedContents(e,r={}){const n=Object.assign(Object.assign({},this._requestOptions),r);return eX(this.apiKey,this.model,e,n)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.apiKey=e}getGenerativeModel(e,r){if(!e.model)throw new Hi("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new _I(this.apiKey,e,r)}getGenerativeModelFromCachedContent(e,r,n){if(!e.name)throw new of("Cached content must contain a `name` field.");if(!e.model)throw new of("Cached content must contain a `model` field.");const s=["model","systemInstruction"];for(const i of s)if(r!=null&&r[i]&&e[i]&&(r==null?void 0:r[i])!==e[i]){if(i==="model"){const o=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(o===l)continue}throw new of(`Different value for "${i}" specified in modelParams (${r[i]}) and cachedContent (${e[i]})`)}const a=Object.assign(Object.assign({},r),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new _I(this.apiKey,a,n)}}const D4="horario_asignaciones",TM="horarios_generados",tX="usuarios",NM=t=>{const e=t.data();return{id:t.id,...e}},rX=t=>{const e=Yt(kt(vt,D4));return mr(e,n=>{const s=n.docs.map(a=>NM(a));t(s)},n=>{console.error("Error al suscribirse a las asignaciones:",n),t([])})},nX=async t=>{try{return(await ps(kt(vt,D4),t)).id}catch(e){throw console.error("Error al agregar asignación:",e),new Error("No se pudo agregar la asignación.")}},sX=async t=>{try{const e=ur(vt,D4,t);await Ta(e)}catch(e){throw console.error("Error al eliminar asignación:",e),new Error("No se pudo eliminar la asignación.")}},SI=async t=>{try{const e=ur(vt,TM,"global");await pi(e,{data:t})}catch(e){throw console.error("Error al guardar los horarios:",e),new Error("No se pudieron guardar los horarios generados.")}},aX=t=>{const e=ur(vt,TM,"global");return mr(e,n=>{n.exists()?t(n.data().data||{}):t({})},n=>{console.error("Error al suscribirse a los horarios:",n),t({})})},iX=t=>{const e=Yt(kt(vt,tX),Xr("profile","==",jt.PROFESORADO));return mr(e,n=>{const s=n.docs.map(a=>NM(a));t(s)},n=>{console.error("Error al suscribirse a los profesores:",n),t([])})},oX=({horarios:t})=>Object.keys(t).length===0?c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-800 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:'Aún no se ha generado ningún horario. Utilice la pestaña de "Configuración" para generar uno.'})}):c.jsx("div",{className:"overflow-x-auto border border-slate-300 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700 sticky top-0 z-10",children:c.jsxs("tr",{children:[c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-16",children:"BLOQUE"}),c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs w-24",children:"HORARIO"}),ca.map(e=>c.jsx("th",{className:"border-b border-r border-slate-300 dark:border-slate-600 p-1 font-semibold text-slate-600 dark:text-slate-300 text-xs whitespace-nowrap min-w-[120px]",children:e},e))]})}),c.jsx("tbody",{children:Vy.map(e=>c.jsxs(dt.Fragment,{children:[c.jsx("tr",{className:"bg-slate-200 dark:bg-slate-800",children:c.jsx("th",{colSpan:2+ca.length,className:"text-center font-bold text-slate-700 dark:text-slate-200 p-2 border-b border-slate-300 dark:border-slate-600",children:e.toUpperCase()})}),tS.map(({bloque:r,inicio:n,fin:s})=>c.jsxs("tr",{className:"even:bg-white odd:bg-slate-50 dark:even:bg-slate-800/50 dark:odd:bg-slate-900/50",children:[c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center font-bold text-slate-700 dark:text-slate-300 text-sm",children:r}),c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center text-xs text-slate-500 dark:text-slate-400",children:`${n} - ${s}`}),ca.map(a=>{var o,l;const i=(l=(o=t[a])==null?void 0:o[e])==null?void 0:l[r];return c.jsx("td",{className:"border-r border-slate-300 dark:border-slate-700 p-1 text-center h-16",children:i!=null&&i.asignatura?c.jsxs("div",{className:"flex flex-col justify-center h-full",children:[c.jsx("p",{className:"font-semibold text-[11px] leading-tight text-slate-800 dark:text-slate-200 whitespace-normal",children:i.asignatura}),c.jsxs("p",{className:"text-[10px] leading-tight text-slate-500 dark:text-slate-400 whitespace-normal mt-0.5",children:["(",i.profesor,")"]})]}):c.jsx("span",{className:"text-slate-300 dark:text-slate-600 text-xs",children:"Libre"})},`${a}-${e}-${r}`)})]},`${e}-${r}`))]},e))})]})}),lX=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState({curso:"",asignatura:"",profesor:""}),[s,a]=Z.useState([]),[i,o]=Z.useState({}),[l,u]=Z.useState(ca[0]),[d,h]=Z.useState(!1),[m,g]=Z.useState(!0),[b,y]=Z.useState(null),[_,T]=Z.useState(null),[k,D]=Z.useState(null),[M,P]=Z.useState({asignatura:"",profesor:""}),[L,C]=Z.useState("edicion"),[E,B]=Z.useState("");Z.useEffect(()=>{g(!0);const G=rX(e),q=aX(o),W=iX(ie=>{const j=ie.map(Y=>Y.nombreCompleto).sort();a(j),g(!1)});return()=>{G(),q(),W()}},[]);const O=async G=>{if(G.preventDefault(),y(null),!r.curso||!r.asignatura||!r.profesor){y("Todos los campos de la asignación son obligatorios.");return}try{await nX({curso:r.curso,asignatura:r.asignatura,profesor:r.profesor}),n({curso:"",asignatura:"",profesor:""})}catch(q){y(q instanceof Error?q.message:"Error al guardar la asignación.")}},R=async G=>{try{await sX(G)}catch(q){y(q instanceof Error?q.message:"Error al eliminar la asignación.")}},F=async()=>{if(t.length===0){y("Debe agregar al menos una asignación de profesor antes de generar el horario.");return}h(!0),y(null),T(null);try{const G="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=new $i(G),W=`
                Eres un asistente experto en planificación de horarios escolares para un liceo técnico en Chile. 
                Tu tarea es generar un horario semanal completo (Lunes a Viernes) para todos los cursos proporcionados, siguiendo un conjunto estricto de reglas.

                **Contexto:**
                - Días de la semana: ${Vy.join(", ")}
                - Bloques horarios por día: 10 bloques con los siguientes horarios: ${JSON.stringify(tS,null,2)}
                - Cursos del liceo: ${ca.join(", ")}

                **Contexto Adicional de Especialidades (3º y 4º Medio):**
                - Los cursos que terminan en 'A' y 'B' pertenecen a la especialidad 'Mecánica Automotriz'.
                - Los cursos que terminan en 'C' y 'D' pertenecen a la especialidad 'Mecánica Industrial'.
                Utiliza este contexto para aplicar las reglas de "3°/4° Medio Automotriz" y "3°/4° Medio Industrial" correctamente.

                **Reglas de Asignación de Bloques por Asignatura:**
                Debes asignar la siguiente cantidad de bloques semanales para cada asignatura según el nivel del curso:
                ${JSON.stringify(JY,null,2)}
                Notas sobre las reglas:
                - '1º y 2º medio' aplica a cursos que empiezan con '1º' o '2º'.
                - '3º y 4º medio' aplica a cursos que empiezan con '3º' o '4º'.
                - Algunas reglas aplican a cursos específicos (ej. Mecánica).

                **Asignaciones de Profesores (Input):**
                Aquí está la lista de profesores asignados a cada curso y asignatura. Debes usar esta lista para poblar el horario.
                ${JSON.stringify(t,null,2)}

                **REGLA CRÍTICA INVIOLABLE:**
                La restricción más importante que NUNCA debe romperse es que un mismo profesor no puede ser asignado a dos cursos diferentes en el mismo día y mismo bloque horario. Es físicamente imposible para un profesor estar en dos lugares a la vez. Prioriza esta regla sobre todas las demás. No deben existir topes de horario para ningún profesor.

                **Instrucciones Adicionales del Usuario:**
                Considera las siguientes preferencias al organizar el horario: "${E||"No se proporcionaron instrucciones adicionales."}"

                **Objetivo Adicional:**
                Distribuye las asignaturas de la forma más balanceada posible durante la semana para cada curso. Evita agrupar todas las horas de una misma materia en un solo día si es posible, a menos que las instrucciones del usuario indiquen lo contrario.

                **Formato de Salida (Output):**
                Tu respuesta DEBE ser un único objeto JSON válido, sin texto adicional, explicaciones, ni el bloque \`\`\`json. La estructura del JSON debe ser la siguiente:
                {
                  "1ºA": {
                    "Lunes": { "1": { "asignatura": "Matemática", "profesor": "Nombre Profesor" }, "2": { "asignatura": "Matemática", "profesor": "Nombre Profesor" } },
                    "Martes": { ... },
                    ...
                  },
                  "1ºB": { ... }
                }
                Cada clave de primer nivel es un curso. Cada curso tiene claves para cada día de la semana. Cada día tiene claves para cada bloque del 1 al 10. Si un bloque está vacío, usa \`{ "asignatura": null, "profesor": null }\`.
            `,te=(await(await q.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(W)).response).text().replace(/^```json\s*|```\s*$/g,""),ce=JSON.parse(te);await SI(ce),T("¡Horario generado y guardado con éxito!")}catch(G){console.error("Error al generar horario con IA:",G),y("Ocurrió un error al contactar con la IA o al procesar la respuesta. Revisa la consola para más detalles.")}finally{h(!1)}},Q=(G,q,W)=>{D({dia:G,bloque:q}),P({asignatura:(W==null?void 0:W.asignatura)||"",profesor:(W==null?void 0:W.profesor)||""})},H=async()=>{if(!k)return;const{dia:G,bloque:q}=k,W=JSON.parse(JSON.stringify(i));W[l]||(W[l]={}),W[l][G]||(W[l][G]={}),W[l][G][q]={asignatura:M.asignatura||null,profesor:M.profesor||null};try{await SI(W),D(null)}catch(ie){y(ie instanceof Error?ie.message:"Error al guardar la edición.")}},ne="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",J=()=>{const G=i[l]||{};return c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-300 dark:border-slate-700",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-slate-100 dark:bg-slate-700",children:[c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:"Bloque"}),Vy.map(q=>c.jsx("th",{className:"border border-slate-300 dark:border-slate-600 p-2 font-semibold text-slate-600 dark:text-slate-300",children:q},q))]})}),c.jsx("tbody",{children:tS.map(({bloque:q,inicio:W,fin:ie})=>c.jsxs("tr",{className:"text-center dark:bg-slate-800",children:[c.jsxs("td",{className:"border border-slate-300 dark:border-slate-700 p-2 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:q}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:`${W} - ${ie}`})]}),Vy.map(j=>{var te;const Y=(k==null?void 0:k.dia)===j&&(k==null?void 0:k.bloque)===q,ee=(te=G[j])==null?void 0:te[q];return c.jsx("td",{className:"border border-slate-300 dark:border-slate-700 p-1 h-24 relative hover:bg-amber-50 dark:hover:bg-slate-700 cursor-pointer",onClick:()=>!Y&&Q(j,q,ee),children:Y?c.jsxs("div",{className:"flex flex-col p-1 bg-white dark:bg-slate-800 h-full justify-center",children:[c.jsx("input",{type:"text",placeholder:"Asignatura",value:M.asignatura,onChange:ce=>P(be=>({...be,asignatura:ce.target.value})),className:ne+" text-xs mb-1"}),c.jsx("input",{type:"text",placeholder:"Profesor",value:M.profesor,onChange:ce=>P(be=>({...be,profesor:ce.target.value})),className:ne+" text-xs"}),c.jsxs("div",{className:"flex justify-end mt-1 space-x-1",children:[c.jsx("button",{onClick:()=>D(null),className:"text-xs bg-slate-200 dark:bg-slate-600 px-1 rounded",children:"Cancelar"}),c.jsx("button",{onClick:H,className:"text-xs bg-amber-500 text-white px-1 rounded",children:"Guardar"})]})]}):ee!=null&&ee.asignatura?c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-sm text-slate-800 dark:text-slate-200",children:ee.asignatura}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["(",ee.profesor,")"]})]}):c.jsx("span",{className:"text-slate-400 dark:text-slate-500",children:"Libre"})},`${j}-${q}`)})]},q))})]})})},re=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Crear Horarios"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🔧 1. Configuración de Asignaciones"}),c.jsxs("form",{onSubmit:O,className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:r.curso,onChange:G=>n(q=>({...q,curso:G.target.value})),className:ne,children:[c.jsx("option",{value:"",children:"Seleccione"}),ca.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:r.asignatura,onChange:G=>n(q=>({...q,asignatura:G.target.value})),className:ne,children:[c.jsx("option",{value:"",children:"Seleccione"}),ol.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"profesor",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor"}),c.jsxs("select",{name:"profesor",value:r.profesor,onChange:G=>n(q=>({...q,profesor:G.target.value})),className:ne,children:[c.jsx("option",{value:"",children:"Seleccione"}),s.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 h-10",children:"Agregar"})]}),c.jsx("div",{className:"max-h-60 overflow-y-auto pr-2",children:c.jsx("ul",{className:"space-y-2",children:t.map(G=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded-md",children:[c.jsxs("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:[G.curso," - ",G.asignatura," - ",c.jsx("strong",{children:G.profesor})]}),c.jsx("button",{onClick:()=>R(G.id),className:"text-red-500 hover:text-red-700 font-bold text-xl",children:"×"})]},G.id))})})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"🧠 2. Generación Automática con IA"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"aiInstructions",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Instrucciones para la IA (Opcional)"}),c.jsx("textarea",{id:"aiInstructions",name:"aiInstructions",value:E,onChange:G=>B(G.target.value),rows:3,placeholder:"Ej: Dejar los módulos teóricos en la mañana y los prácticos en la tarde. Evitar poner 2 bloques de matemática seguidos.",className:ne})]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[c.jsxs("button",{onClick:F,disabled:d,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center",children:[d&&c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d?"Generando...":"Generar Horario Completo"]}),b&&c.jsx("p",{className:"text-red-600",children:b}),_&&c.jsx("p",{className:"text-green-600",children:_})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 border-b dark:border-slate-600 pb-2 mb-4",children:"📅 3. Visualización y Edición por Curso"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"selectCurso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione un curso para visualizar y editar:"}),c.jsx("select",{id:"selectCurso",value:l,onChange:G=>u(G.target.value),className:ne+" md:w-1/3",children:ca.map(G=>c.jsx("option",{value:G,children:G},G))})]}),Object.keys(i).length>0?J():c.jsx("div",{className:"text-center py-10 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"Aún no se ha generado ningún horario. Utilice el botón de generación con IA."})})]})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>C("edicion"),className:`${L==="edicion"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Configuración y Edición por Curso"}),c.jsx("button",{onClick:()=>C("global"),className:`${L==="global"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Horario Global"})]})}),L==="edicion"?re():c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Horario Global de Cursos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Vista consolidada de todos los horarios generados. La tabla es desplazable horizontalmente."}),c.jsx(oX,{horarios:i})]})]})},qw="acciones",cX=async()=>{try{const t=Yt(kt(Zr,qw),Pr("fechaRegistro","desc"));return(await Cs(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acciones:",t),new Error("No se pudieron cargar las acciones pedagógicas")}},uX=async t=>{try{return{id:(await ps(kt(Zr,qw),{...t,fechaRegistro:t.fechaRegistro||new Date().toISOString().split("T")[0],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acción:",e),new Error("No se pudo crear la acción pedagógica")}},TI=async(t,e)=>{try{const r=ur(Zr,qw,t);await ip(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acción:",r,"ID:",t),new Error("No se pudo actualizar la acción pedagógica")}},AX=async t=>{try{const e=ur(Zr,qw,t);await Ta(e)}catch(e){throw console.error("Error al eliminar acción:",e,"ID:",t),new Error("No se pudo eliminar la acción pedagógica")}},NI={fechaRegistro:new Date().toISOString().split("T")[0],responsable:"",area:"",descripcion:"",fechaCumplimiento:"",estado:"Pendiente"},dX={Pendiente:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En Proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Cumplida:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300"},fX=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState(!1),[s,a]=Z.useState(null),[i,o]=Z.useState(NI),[l,u]=Z.useState(null),[d,h]=Z.useState(""),[m,g]=Z.useState(""),[b,y]=Z.useState(""),_=Z.useCallback(async()=>{n(!0);try{const B=await cX();e(B),a(null)}catch(B){console.error("Error al cargar acciones desde Firestore",B),a("No se pudieron cargar las acciones pedagógicas desde la nube.")}finally{n(!1)}},[]);Z.useEffect(()=>{_()},[_]);const T=Z.useCallback(B=>{const{name:O,value:R}=B.target;o(F=>({...F,[O]:R}))},[]),k=Z.useCallback(()=>{o(NI),u(null),a(null)},[]),D=Z.useCallback(async B=>{B.preventDefault();const{fechaRegistro:O,responsable:R,area:F,descripcion:Q,fechaCumplimiento:H,estado:ne}=i;if(!O||!R||!F||!Q||!H){a("Todos los campos son obligatorios.");return}try{l?await TI(l,i):await uX(i),await _(),k()}catch(J){console.error("Error al guardar acción:",J),a("Error al guardar la acción en la nube.")}},[i,l,_,k]),M=Z.useCallback(B=>{window.scrollTo({top:0,behavior:"smooth"}),u(B.id),o(B)},[]),P=Z.useCallback(async B=>{if(window.confirm("¿Está seguro de que desea eliminar esta acción?"))try{await AX(B),await _()}catch(O){console.error("Error al eliminar acción:",O),a("No se pudo eliminar la acción en la nube.")}},[_]),L=Z.useCallback(async B=>{try{const O=t.find(R=>R.id===B);if(O){const F=(rg.indexOf(O.estado)+1)%rg.length,Q=rg[F];await TI(B,{estado:Q}),await _()}}catch(O){console.error("Error al cambiar estado:",O),a("No se pudo cambiar el estado de la acción en la nube.")}},[t,_]),C=Z.useMemo(()=>t.filter(B=>{const O=d===""||B.responsable.toLowerCase().includes(d.toLowerCase())||B.descripcion.toLowerCase().includes(d.toLowerCase()),R=m===""||B.area===m,F=b===""||B.estado===b;return O&&R&&F}),[t,d,m,b]),E="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seguimiento de Acciones Pedagógicas"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:l?"Editando acción existente.":"Registre una nueva acción de seguimiento."}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando acciones desde la nube..."}),s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("form",{onSubmit:D,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaRegistro",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Registro"}),c.jsx("input",{type:"date",name:"fechaRegistro",value:i.fechaRegistro,onChange:T,className:E})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{type:"text",name:"responsable",value:i.responsable,onChange:T,placeholder:"Nombre del responsable",className:E})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Área Vinculada"}),c.jsxs("select",{name:"area",value:i.area,onChange:T,className:E,children:[c.jsx("option",{value:"",children:"Seleccione un área"}),tI.map(B=>c.jsx("option",{value:B,children:B},B))]})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{htmlFor:"descripcion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Descripción de la Acción"}),c.jsx("textarea",{name:"descripcion",value:i.descripcion,onChange:T,rows:3,placeholder:"Detalle de la acción a realizar...",className:E})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaCumplimiento",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha de Cumplimiento"}),c.jsx("input",{type:"date",name:"fechaCumplimiento",value:i.fechaCumplimiento,onChange:T,className:E})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"estado",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado de Avance"}),c.jsx("select",{name:"estado",value:i.estado,onChange:T,className:E,children:rg.map(B=>c.jsx("option",{value:B,children:B},B))})]})]}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4",children:[l&&c.jsx("button",{type:"button",onClick:k,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Acción":"Registrar Acción"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Tabla de Seguimiento"}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-4",children:"No hay acciones pedagógicas registradas en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por responsable o palabra clave...",value:d,onChange:B=>h(B.target.value),className:E+" md:col-span-1"}),c.jsxs("select",{value:m,onChange:B=>g(B.target.value),className:E,children:[c.jsx("option",{value:"",children:"Filtrar por Área"}),tI.map(B=>c.jsx("option",{value:B,children:B},B))]}),c.jsxs("select",{value:b,onChange:B=>y(B.target.value),className:E,children:[c.jsx("option",{value:"",children:"Filtrar por Estado"}),rg.map(B=>c.jsx("option",{value:B,children:B},B))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Responsable"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Área"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Descripción"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fechas"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&C.length>0?C.map(B=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:B.responsable}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:B.area}),c.jsx("td",{className:"px-4 py-4 text-sm text-slate-600 dark:text-slate-300 max-w-sm whitespace-normal",children:B.descripcion}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("span",{children:["Reg: ",B.fechaRegistro]}),c.jsxs("span",{className:"font-semibold",children:["Comp: ",B.fechaCumplimiento]})]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${dX[B.estado]}`,children:B.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>L(B.id),title:"Cambiar Estado",className:"text-blue-600 hover:text-blue-800 p-1 rounded-full hover:bg-blue-100 dark:hover:bg-blue-900/40",children:"🔁"}),c.jsx("button",{onClick:()=>M(B),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>P(B.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},B.id)):!r&&c.jsx("tr",{children:c.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No se encontraron acciones con los filtros actuales."})})})]})})]})]})},hX="modulepreload",mX=function(t){return"/"+t},BI={},wx=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let i=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=i(r.map(u=>{if(u=mX(u),u in BI)return;BI[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":hX,d||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),d)return new Promise((g,b)=>{m.addEventListener("load",g),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return s.then(i=>{for(const o of i||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pX,gX;function xX(){return{geminiUrl:pX,vertexUrl:gX}}function vX(t,e,r,n){var s,a;if(!(t!=null&&t.baseUrl)){const i=xX();return e?(s=i.vertexUrl)!==null&&s!==void 0?s:r:(a=i.geminiUrl)!==null&&a!==void 0?a:n}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class qh{}function ar(t,e){const r=/\{([^}]+)\}/g;return t.replace(r,(n,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function v(t,e,r){for(let a=0;a<e.length-1;a++){const i=e[a];if(i.endsWith("[]")){const o=i.slice(0,-2);if(!(o in t))if(Array.isArray(r))t[o]=Array.from({length:r.length},()=>({}));else throw new Error(`Value must be a list given an array path ${i}`);if(Array.isArray(t[o])){const l=t[o];if(Array.isArray(r))for(let u=0;u<l.length;u++){const d=l[u];v(d,e.slice(a+1),r[u])}else for(const u of l)v(u,e.slice(a+1),r)}return}else if(i.endsWith("[0]")){const o=i.slice(0,-3);o in t||(t[o]=[{}]);const l=t[o];v(l[0],e.slice(a+1),r);return}(!t[i]||typeof t[i]!="object")&&(t[i]={}),t=t[i]}const n=e[e.length-1],s=t[n];if(s!==void 0){if(!r||typeof r=="object"&&Object.keys(r).length===0||r===s)return;if(typeof s=="object"&&typeof r=="object"&&s!==null&&r!==null)Object.assign(s,r);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else t[n]=r}function x(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return;const n=e[r];if(n.endsWith("[]")){const s=n.slice(0,-2);if(s in t){const a=t[s];return Array.isArray(a)?a.map(i=>x(i,e.slice(r+1))):void 0}else return}else t=t[n]}return t}catch(r){if(r instanceof TypeError)return;throw r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rS(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var kI;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(kI||(kI={}));var II;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(II||(II={}));var xn;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(xn||(xn={}));var FI;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(FI||(FI={}));var DI;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(DI||(DI={}));var RI;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(RI||(RI={}));var LI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(LI||(LI={}));var UI;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(UI||(UI={}));var MI;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(MI||(MI={}));var PI;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(PI||(PI={}));var jI;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(jI||(jI={}));var OI;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(OI||(OI={}));var QI;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(QI||(QI={}));var HI;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(HI||(HI={}));var VI;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(VI||(VI={}));var zI;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(zI||(zI={}));var T2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(T2||(T2={}));var GI;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(GI||(GI={}));var nS;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(nS||(nS={}));var qI;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(qI||(qI={}));var KI;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(KI||(KI={}));var $I;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})($I||($I={}));var WI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(WI||(WI={}));var YI;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"})(YI||(YI={}));var JI;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(JI||(JI={}));var XI;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(XI||(XI={}));var ZI;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(ZI||(ZI={}));var eF;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(eF||(eF={}));var tF;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(tF||(tF={}));var rF;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(rF||(rF={}));var nF;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(nF||(nF={}));var sF;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(sF||(sF={}));var aF;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(aF||(aF={}));var iF;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(iF||(iF={}));var oF;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(oF||(oF={}));var lF;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(lF||(lF={}));var cF;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(cF||(cF={}));var uF;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(uF||(uF={}));var AF;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(AF||(AF={}));var dF;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(dF||(dF={}));var fF;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(fF||(fF={}));var lm;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(lm||(lm={}));class sS{constructor(e){const r={};for(const n of e.headers.entries())r[n[0]]=n[1];this.headers=r,this.responseInternal=e}json(){return this.responseInternal.json()}}class ng{get text(){var e,r,n,s,a,i,o,l;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const h=[];for(const m of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[g,b]of Object.entries(m))g!=="text"&&g!=="thought"&&(b!==null||b!==void 0)&&h.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,r,n,s,a,i,o,l;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const h of(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)!==null&&l!==void 0?l:[]){for(const[m,g]of Object.entries(h))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(u+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,r,n,s,a,i,o,l;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,r,n,s,a,i,o,l,u;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,r,n,s,a,i,o,l,u;if(((s=(n=(r=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||r===void 0?void 0:r.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(o=(i=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content)===null||o===void 0?void 0:o.parts)===null||l===void 0?void 0:l.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class hF{}class mF{}class yX{}class wX{}class pF{}class gF{}class xF{}class bX{}class vF{}class yF{}class wF{}class bF{}class CX{}class EX{}class _X{}class CF{}class SX{get text(){var e,r,n;let s="",a=!1;const i=[];for(const o of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[l,u]of Object.entries(o))l!=="text"&&l!=="thought"&&u!==null&&i.push(l);if(typeof o.text=="string"){if(typeof o.thought=="boolean"&&o.thought)continue;a=!0,s+=o.text}}return i.length>0&&console.warn(`there are non-text parts ${i} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,r,n;let s="";const a=[];for(const i of(n=(r=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||r===void 0?void 0:r.parts)!==null&&n!==void 0?n:[]){for(const[o,l]of Object.entries(i))o!=="inlineData"&&l!==null&&a.push(o);i.inlineData&&typeof i.inlineData.data=="string"&&(s+=atob(i.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class N2{_fromAPIResponse({apiResponse:e,isVertexAI:r}){const n=new N2;if(n.name=e.name,n.metadata=e.metadata,n.done=e.done,n.error=e.error,r){const s=e.response;if(s){const a=new vF,i=s.videos;a.generatedVideos=i==null?void 0:i.map(o=>({video:{uri:o.gcsUri,videoBytes:o.bytesBase64Encoded?rS(o.bytesBase64Encoded):void 0,mimeType:o.mimeType}})),a.raiMediaFilteredCount=s.raiMediaFilteredCount,a.raiMediaFilteredReasons=s.raiMediaFilteredReasons,n.response=a}}else{const s=e.response;if(s){const a=new vF,i=s.generateVideoResponse,o=i==null?void 0:i.generatedSamples;a.generatedVideos=o==null?void 0:o.map(l=>{const u=l.video;return{video:{uri:u==null?void 0:u.uri,videoBytes:u!=null&&u.encodedVideo?rS(u==null?void 0:u.encodedVideo):void 0,mimeType:l.encoding}}}),a.raiMediaFilteredCount=i==null?void 0:i.raiMediaFilteredCount,a.raiMediaFilteredReasons=i==null?void 0:i.raiMediaFilteredReasons,n.response=a}}return n}}class TX{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $n(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const r=e.split("/",2);return`publishers/${r[0]}/models/${r[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function BM(t,e){const r=$n(t,e);return r?r.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}`:r.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${r}`:r:""}function kM(t){return Array.isArray(t)?t.map(e=>B2(e)):[B2(t)]}function B2(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function IM(t){const e=B2(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function FM(t){const e=B2(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function EF(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function DM(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>EF(e)):[EF(t)]}function aS(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function _F(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function SF(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Gi(t){if(t==null)throw new Error("ContentUnion is required");return aS(t)?t:{role:"user",parts:DM(t)}}function RM(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(r=>{const n=Gi(r);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(t.isVertexAI()){const r=Gi(e);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]}return Array.isArray(e)?e.map(r=>Gi(r)):[Gi(e)]}function Kl(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(_F(t)||SF(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gi(t)]}const e=[],r=[],n=aS(t[0]);for(const s of t){const a=aS(s);if(a!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(_F(s)||SF(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");r.push(s)}}return n||e.push({role:"user",parts:DM(r)}),e}function NX(t,e){t.includes("null")&&(e.nullable=!0);const r=t.filter(n=>n!=="null");if(r.length===1)e.type=Object.values(xn).includes(r[0].toUpperCase())?r[0].toUpperCase():xn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of r)e.anyOf.push({type:Object.values(xn).includes(n.toUpperCase())?n.toUpperCase():xn.TYPE_UNSPECIFIED})}}function gm(t){const e={},r=["items"],n=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=t.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,t=a[1]):a[1].type==="null"&&(e.nullable=!0,t=a[0])),t.type instanceof Array&&NX(t.type,e);for(const[i,o]of Object.entries(t))if(o!=null)if(i=="type"){if(o==="null")throw new Error("type: null can not be the only possible type for the field.");if(o instanceof Array)continue;e.type=Object.values(xn).includes(o.toUpperCase())?o.toUpperCase():xn.TYPE_UNSPECIFIED}else if(r.includes(i))e[i]=gm(o);else if(n.includes(i)){const l=[];for(const u of o){if(u.type=="null"){e.nullable=!0;continue}l.push(gm(u))}e[i]=l}else if(s.includes(i)){const l={};for(const[u,d]of Object.entries(o))l[u]=gm(d);e[i]=l}else{if(i==="additionalProperties")continue;e[i]=o}return e}function R4(t){return gm(t)}function L4(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function U4(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function op(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=gm(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=gm(e.response));return t}function lp(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const r of t)e.push(r);return e}function BX(t,e,r,n=1){const s=!e.startsWith(`${r}/`)&&e.split("/").length===n;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${r}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${r}/${e}`:e:s?`${r}/${e}`:e}function qA(t,e){if(typeof e!="string")throw new Error("name must be a string");return BX(t,e,"cachedContents")}function LM(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Kh(t){return rS(t)}function kX(t){return t!=null&&typeof t=="object"&&"name"in t}function IX(t){return t!=null&&typeof t=="object"&&"video"in t}function FX(t){return t!=null&&typeof t=="object"&&"uri"in t}function UM(t){var e;let r;if(kX(t)&&(r=t.name),!(FX(t)&&(r=t.uri,r===void 0))&&!(IX(t)&&(r=(e=t.video)===null||e===void 0?void 0:e.uri,r===void 0))){if(typeof t=="string"&&(r=t),r===void 0)throw new Error("Could not extract file name from the provided input.");if(r.startsWith("https://")){const s=r.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${r}`);r=s[0]}else r.startsWith("files/")&&(r=r.split("files/")[1]);return r}}function MM(t,e){let r;return t.isVertexAI()?r=e?"publishers/google/models":"models":r=e?"models":"tunedModels",r}function PM(t){for(const e of["models","tunedModels","publisherModels"])if(DX(t,e))return t[e];return[]}function DX(t,e){return t!==null&&typeof t=="object"&&e in t}function RX(t,e={}){const r=t,n={name:r.name,description:r.description,parametersJsonSchema:r.inputSchema};return e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function LX(t,e={}){const r=[],n=new Set;for(const s of t){const a=s.name;if(n.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);n.add(a);const i=RX(s,e);i.functionDeclarations&&r.push(...i.functionDeclarations)}return{functionDeclarations:r}}function jM(t,e){if(typeof e!="string"&&!Array.isArray(e)){if(t&&t.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function UX(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function cp(t,e){const r=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(r))return r.split("/").pop();throw new Error(`Invalid batch job name: ${r}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(r))return r.split("/").pop();if(/^\d+$/.test(r))return r;throw new Error(`Invalid batch job name: ${r}.`)}function OM(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function MX(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function PX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function jX(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function OX(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],MX(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],PX(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],jX(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function QM(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>OX(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function QX(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const _=x(t,["minimum"]);_!=null&&v(e,["minimum"],_);const T=x(t,["nullable"]);T!=null&&v(e,["nullable"],T);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const D=x(t,["properties"]);D!=null&&v(e,["properties"],D);const M=x(t,["propertyOrdering"]);M!=null&&v(e,["propertyOrdering"],M);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const L=x(t,["title"]);L!=null&&v(e,["title"],L);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function HX(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function VX(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function zX(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function GX(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],zX(r)),e}function qX(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function KX(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],qX(r)),e}function $X(){return{}}function WX(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>VX(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],GX(n));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],KX(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],$X());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function YX(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function JX(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function XX(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],JX(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function ZX(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],YX(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],XX(n)),e}function eZ(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function HM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],eZ(r)),e}function tZ(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],HM(n)),e}function rZ(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>tZ(s))),v(e,["speakerVoiceConfigs"],n)}return e}function nZ(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],HM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],rZ(n));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function sZ(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function aZ(t,e,r){const n={},s=x(e,["systemInstruction"]);r!==void 0&&s!=null&&v(r,["systemInstruction"],QM(Gi(s)));const a=x(e,["temperature"]);a!=null&&v(n,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const _=x(e,["responseMimeType"]);_!=null&&v(n,["responseMimeType"],_);const T=x(e,["responseSchema"]);T!=null&&v(n,["responseSchema"],QX(R4(T)));const k=x(e,["responseJsonSchema"]);if(k!=null&&v(n,["responseJsonSchema"],k),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=x(e,["safetySettings"]);if(r!==void 0&&D!=null){let R=D;Array.isArray(R)&&(R=R.map(F=>HX(F))),v(r,["safetySettings"],R)}const M=x(e,["tools"]);if(r!==void 0&&M!=null){let R=lp(M);Array.isArray(R)&&(R=R.map(F=>WX(op(F)))),v(r,["tools"],R)}const P=x(e,["toolConfig"]);if(r!==void 0&&P!=null&&v(r,["toolConfig"],ZX(P)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=x(e,["cachedContent"]);r!==void 0&&L!=null&&v(r,["cachedContent"],qA(t,L));const C=x(e,["responseModalities"]);C!=null&&v(n,["responseModalities"],C);const E=x(e,["mediaResolution"]);E!=null&&v(n,["mediaResolution"],E);const B=x(e,["speechConfig"]);if(B!=null&&v(n,["speechConfig"],nZ(L4(B))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=x(e,["thinkingConfig"]);return O!=null&&v(n,["thinkingConfig"],sZ(O)),n}function iZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["request","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=Kl(s);Array.isArray(i)&&(i=i.map(o=>QM(o))),v(r,["request","contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["request","generationConfig"],aZ(t,a,r)),r}function oZ(t,e){const r={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=x(e,["fileName"]);n!=null&&v(r,["fileName"],n);const s=x(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>iZ(t,i))),v(r,["requests","requests"],a)}return r}function lZ(t,e){const r={},n=x(t,["displayName"]);if(e!==void 0&&n!=null&&v(e,["batch","displayName"],n),x(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return r}function cZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["src"]);s!=null&&v(r,["batch","inputConfig"],oZ(t,jM(t,s)));const a=x(e,["config"]);return a!=null&&v(r,["config"],lZ(a,r)),r}function uZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],cp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function AZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],cp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function dZ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);if(e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),x(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return r}function fZ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],dZ(r,e)),e}function hZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],cp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function mZ(t){const e={},r=x(t,["format"]);r!=null&&v(e,["instancesFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsSource","uris"],n);const s=x(t,["bigqueryUri"]);if(s!=null&&v(e,["bigquerySource","inputUri"],s),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function pZ(t){const e={},r=x(t,["format"]);r!=null&&v(e,["predictionsFormat"],r);const n=x(t,["gcsUri"]);n!=null&&v(e,["gcsDestination","outputUriPrefix"],n);const s=x(t,["bigqueryUri"]);if(s!=null&&v(e,["bigqueryDestination","outputUri"],s),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function gZ(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const s=x(t,["dest"]);return e!==void 0&&s!=null&&v(e,["outputConfig"],pZ(UX(s))),r}function xZ(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],$n(t,n));const s=x(e,["src"]);s!=null&&v(r,["inputConfig"],mZ(jM(t,s)));const a=x(e,["config"]);return a!=null&&v(r,["config"],gZ(a,r)),r}function vZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],cp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function yZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],cp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function wZ(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),r}function bZ(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],wZ(r,e)),e}function CZ(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],cp(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function EZ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function _Z(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function SZ(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function TZ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],EZ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],_Z(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],SZ(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function NZ(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>TZ(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function BZ(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function kZ(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function IZ(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>kZ(s))),v(e,["urlMetadata"],n)}return e}function FZ(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],NZ(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],BZ(n));const s=x(t,["tokenCount"]);s!=null&&v(e,["tokenCount"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],IZ(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function DZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>FZ(l))),v(e,["candidates"],o)}const s=x(t,["modelVersion"]);s!=null&&v(e,["modelVersion"],s);const a=x(t,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function VM(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const s=x(t,["message"]);return s!=null&&v(e,["message"],s),e}function RZ(t){const e={},r=x(t,["response"]);r!=null&&v(e,["response"],DZ(r));const n=x(t,["error"]);return n!=null&&v(e,["error"],VM(n)),e}function LZ(t){const e={},r=x(t,["responsesFile"]);r!=null&&v(e,["fileName"],r);const n=x(t,["inlinedResponses","inlinedResponses"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>RZ(a))),v(e,["inlinedResponses"],s)}return e}function iS(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata","displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["metadata","state"]);s!=null&&v(e,["state"],OM(s));const a=x(t,["metadata","createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["metadata","endTime"]);i!=null&&v(e,["endTime"],i);const o=x(t,["metadata","updateTime"]);o!=null&&v(e,["updateTime"],o);const l=x(t,["metadata","model"]);l!=null&&v(e,["model"],l);const u=x(t,["metadata","output"]);return u!=null&&v(e,["dest"],LZ(u)),e}function UZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>iS(i))),v(e,["batchJobs"],a)}return e}function MZ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const s=x(t,["error"]);return s!=null&&v(e,["error"],VM(s)),e}function zM(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["code"]);n!=null&&v(e,["code"],n);const s=x(t,["message"]);return s!=null&&v(e,["message"],s),e}function PZ(t){const e={},r=x(t,["instancesFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsSource","uris"]);n!=null&&v(e,["gcsUri"],n);const s=x(t,["bigquerySource","inputUri"]);return s!=null&&v(e,["bigqueryUri"],s),e}function jZ(t){const e={},r=x(t,["predictionsFormat"]);r!=null&&v(e,["format"],r);const n=x(t,["gcsDestination","outputUriPrefix"]);n!=null&&v(e,["gcsUri"],n);const s=x(t,["bigqueryDestination","outputUri"]);return s!=null&&v(e,["bigqueryUri"],s),e}function oS(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["state"]);s!=null&&v(e,["state"],OM(s));const a=x(t,["error"]);a!=null&&v(e,["error"],zM(a));const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["startTime"]);o!=null&&v(e,["startTime"],o);const l=x(t,["endTime"]);l!=null&&v(e,["endTime"],l);const u=x(t,["updateTime"]);u!=null&&v(e,["updateTime"],u);const d=x(t,["model"]);d!=null&&v(e,["model"],d);const h=x(t,["inputConfig"]);h!=null&&v(e,["src"],PZ(h));const m=x(t,["outputConfig"]);return m!=null&&v(e,["dest"],jZ(m)),e}function OZ(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>oS(i))),v(e,["batchJobs"],a)}return e}function QZ(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["done"]);n!=null&&v(e,["done"],n);const s=x(t,["error"]);return s!=null&&v(e,["error"],zM(s)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Dh;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Dh||(Dh={}));class h1{constructor(e,r,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=r,this.init(e,n,s)}init(e,r,n){var s,a;this.nameInternal=e,this.pageInternal=r[this.nameInternal]||[],this.sdkHttpResponseInternal=r==null?void 0:r.sdkHttpResponse,this.idxInternal=0;let i={config:{}};!n||Object.keys(n).length===0?i={config:{}}:typeof n=="object"?i=Object.assign({},n):i=n,i.config&&(i.config.pageToken=r.nextPageToken),this.paramsInternal=i,this.pageInternalSize=(a=(s=i.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HZ extends qh{constructor(e){super(),this.apiClient=e,this.create=async r=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(r.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(r.config=r.config||{},r.config.displayName===void 0&&(r.config.displayName="genaiBatchJob_${timestampStr}"),r.config.dest===void 0&&typeof r.src=="string")if(r.src.startsWith("gs://")&&r.src.endsWith(".jsonl"))r.config.dest=`${r.src.slice(0,-6)}/dest`;else if(r.src.startsWith("bq://"))r.config.dest=`${r.src}_dest_${s}`;else throw new Error("Unsupported source:"+r.src)}return await this.createInternal(r)},this.list=async(r={})=>new h1(Dh.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(r),r)}async createInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=xZ(this.apiClient,e);return o=ar("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>oS(d))}else{const u=cZ(this.apiClient,e);return o=ar("{model}:batchGenerateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>iS(d))}}async get(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=vZ(this.apiClient,e);return o=ar("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>oS(d))}else{const u=uZ(this.apiClient,e);return o=ar("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>iS(d))}}async cancel(e){var r,n,s,a;let i="",o={};if(this.apiClient.isVertexAI()){const l=yZ(this.apiClient,e);i=ar("batchPredictionJobs/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const l=AZ(this.apiClient,e);i=ar("batches/{name}:cancel",l._url),o=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=bZ(e);return o=ar("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=OZ(d),m=new CF;return Object.assign(m,h),m})}else{const u=fZ(e);return o=ar("batches",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=UZ(d),m=new CF;return Object.assign(m,h),m})}}async delete(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=CZ(this.apiClient,e);return o=ar("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>QZ(d))}else{const u=hZ(this.apiClient,e);return o=ar("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>MZ(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VZ(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function zZ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function GZ(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function qZ(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],VZ(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],zZ(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],GZ(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function TF(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>qZ(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function KZ(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function $Z(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function WZ(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],$Z(r)),e}function YZ(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function JZ(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],YZ(r)),e}function XZ(){return{}}function ZZ(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>KZ(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],WZ(n));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],JZ(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],XZ());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function eee(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function tee(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function ree(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],tee(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function nee(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],eee(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],ree(n)),e}function see(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const s=x(t,["expireTime"]);e!==void 0&&s!=null&&v(e,["expireTime"],s);const a=x(t,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let d=Kl(i);Array.isArray(d)&&(d=d.map(h=>TF(h))),v(e,["contents"],d)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],TF(Gi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(h=>ZZ(h))),v(e,["tools"],d)}const u=x(t,["toolConfig"]);if(e!==void 0&&u!=null&&v(e,["toolConfig"],nee(u)),x(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return r}function aee(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],BM(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],see(s,r)),r}function iee(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],qA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function oee(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],qA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function lee(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const s=x(t,["expireTime"]);return e!==void 0&&s!=null&&v(e,["expireTime"],s),r}function cee(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],qA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],lee(s,r)),r}function uee(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),r}function Aee(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],uee(r,e)),e}function dee(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function fee(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function hee(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function mee(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],dee(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],fee(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],hee(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function NF(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>mee(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function pee(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function gee(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function xee(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],gee(r)),e}function vee(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function yee(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],vee(r)),e}function wee(){return{}}function bee(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function Cee(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],bee(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function Eee(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],Cee(r)),e}function _ee(){return{}}function See(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>pee(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],xee(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],yee(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],wee());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],Eee(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],_ee());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function Tee(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function Nee(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function Bee(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],Nee(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function kee(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],Tee(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],Bee(n)),e}function Iee(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const s=x(t,["expireTime"]);e!==void 0&&s!=null&&v(e,["expireTime"],s);const a=x(t,["displayName"]);e!==void 0&&a!=null&&v(e,["displayName"],a);const i=x(t,["contents"]);if(e!==void 0&&i!=null){let h=Kl(i);Array.isArray(h)&&(h=h.map(m=>NF(m))),v(e,["contents"],h)}const o=x(t,["systemInstruction"]);e!==void 0&&o!=null&&v(e,["systemInstruction"],NF(Gi(o)));const l=x(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(m=>See(m))),v(e,["tools"],h)}const u=x(t,["toolConfig"]);e!==void 0&&u!=null&&v(e,["toolConfig"],kee(u));const d=x(t,["kmsKeyName"]);return e!==void 0&&d!=null&&v(e,["encryption_spec","kmsKeyName"],d),r}function Fee(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["model"],BM(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],Iee(s,r)),r}function Dee(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],qA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function Ree(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],qA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function Lee(t,e){const r={},n=x(t,["ttl"]);e!==void 0&&n!=null&&v(e,["ttl"],n);const s=x(t,["expireTime"]);return e!==void 0&&s!=null&&v(e,["expireTime"],s),r}function Uee(t,e){const r={},n=x(e,["name"]);n!=null&&v(r,["_url","name"],qA(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],Lee(s,r)),r}function Mee(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),r}function Pee(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],Mee(r,e)),e}function Gy(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["model"]);s!=null&&v(e,["model"],s);const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function jee(){return{}}function Oee(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Gy(i))),v(e,["cachedContents"],a)}return e}function qy(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["model"]);s!=null&&v(e,["model"],s);const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["updateTime"]);i!=null&&v(e,["updateTime"],i);const o=x(t,["expireTime"]);o!=null&&v(e,["expireTime"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function Qee(){return{}}function Hee(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>qy(i))),v(e,["cachedContents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vee extends qh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new h1(Dh.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(r),r)}async create(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Fee(this.apiClient,e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>qy(d))}else{const u=aee(this.apiClient,e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>Gy(d))}}async get(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Dee(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>qy(d))}else{const u=iee(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>Gy(d))}}async delete(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Ree(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=Qee(),h=new wF;return Object.assign(h,d),h})}else{const u=oee(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=jee(),h=new wF;return Object.assign(h,d),h})}}async update(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Uee(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>qy(d))}else{const u=cee(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>Gy(d))}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Pee(e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Hee(d),m=new bF;return Object.assign(m,h),m})}else{const u=Aee(e);return o=ar("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Oee(d),m=new bF;return Object.assign(m,h),m})}}}function BF(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function As(t){return this instanceof As?(this.v=t,this):new As(t)}function xm(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",i),s[Symbol.asyncIterator]=function(){return this},s;function i(g){return function(b){return Promise.resolve(b).then(g,h)}}function o(g,b){n[g]&&(s[g]=function(y){return new Promise(function(_,T){a.push([g,y,_,T])>1||l(g,y)})},b&&(s[g]=b(s[g])))}function l(g,b){try{u(n[g](b))}catch(y){m(a[0][3],y)}}function u(g){g.value instanceof As?Promise.resolve(g.value.v).then(d,h):m(a[0][2],g)}function d(g){l("next",g)}function h(g){l("throw",g)}function m(g,b){g(b),a.shift(),a.length&&l(a[0][0],a[0][1])}}function qg(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof BF=="function"?BF(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(i){return new Promise(function(o,l){i=t[a](i),s(o,l,i.done,i.value)})}}function s(a,i,o,l){Promise.resolve(l).then(function(u){a({value:u,done:o})},i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function zee(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const r=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return r===void 0?!1:GM(r)}function GM(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function Gee(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function kF(t){if(t===void 0||t.length===0)return[];const e=[],r=t.length;let n=0;for(;n<r;)if(t[n].role==="user")e.push(t[n]),n++;else{const s=[];let a=!0;for(;n<r&&t[n].role==="model";)s.push(t[n]),a&&!GM(t[n])&&(a=!1),n++;a?e.push(...s):e.pop()}return e}class qee{constructor(e,r){this.modelsModule=e,this.apiClient=r}create(e){return new Kee(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Kee{constructor(e,r,n,s={},a=[]){this.apiClient=e,this.modelsModule=r,this.model=n,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),Gee(a)}async sendMessage(e){var r;await this.sendPromise;const n=Gi(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});return this.sendPromise=(async()=>{var a,i,o;const l=await s,u=(i=(a=l.candidates)===null||a===void 0?void 0:a[0])===null||i===void 0?void 0:i.content,d=l.automaticFunctionCallingHistory,h=this.getHistory(!0).length;let m=[];d!=null&&(m=(o=d.slice(h))!==null&&o!==void 0?o:[]);const g=u?[u]:[];this.recordHistory(n,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var r;await this.sendPromise;const n=Gi(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(r=e.config)!==null&&r!==void 0?r:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,n)}getHistory(e=!1){const r=e?kF(this.history):this.history;return structuredClone(r)}processStreamResponse(e,r){var n,s;return xm(this,arguments,function*(){var i,o,l,u;const d=[];try{for(var h=!0,m=qg(e),g;g=yield As(m.next()),i=g.done,!i;h=!0){u=g.value,h=!1;const b=u;if(zee(b)){const y=(s=(n=b.candidates)===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.content;y!==void 0&&d.push(y)}yield yield As(b)}}catch(b){o={error:b}}finally{try{!h&&!i&&(l=m.return)&&(yield As(l.call(m)))}finally{if(o)throw o.error}}this.recordHistory(r,d)})}recordHistory(e,r,n){let s=[];r.length>0&&r.every(a=>a.role!==void 0)?s=r:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...kF(n)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kw extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Kw.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $ee(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);return e!==void 0&&s!=null&&v(e,["_query","pageToken"],s),r}function Wee(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],$ee(r,e)),e}function Yee(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const s=x(t,["code"]);return s!=null&&v(e,["code"],s),e}function Jee(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["mimeType"]);s!=null&&v(e,["mimeType"],s);const a=x(t,["sizeBytes"]);a!=null&&v(e,["sizeBytes"],a);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const y=x(t,["error"]);return y!=null&&v(e,["error"],Yee(y)),e}function Xee(t){const e={},r=x(t,["file"]);r!=null&&v(e,["file"],Jee(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Zee(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],UM(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function ete(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","file"],UM(r));const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function tte(t){const e={},r=x(t,["details"]);r!=null&&v(e,["details"],r);const n=x(t,["message"]);n!=null&&v(e,["message"],n);const s=x(t,["code"]);return s!=null&&v(e,["code"],s),e}function lS(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["mimeType"]);s!=null&&v(e,["mimeType"],s);const a=x(t,["sizeBytes"]);a!=null&&v(e,["sizeBytes"],a);const i=x(t,["createTime"]);i!=null&&v(e,["createTime"],i);const o=x(t,["expirationTime"]);o!=null&&v(e,["expirationTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["sha256Hash"]);u!=null&&v(e,["sha256Hash"],u);const d=x(t,["uri"]);d!=null&&v(e,["uri"],d);const h=x(t,["downloadUri"]);h!=null&&v(e,["downloadUri"],h);const m=x(t,["state"]);m!=null&&v(e,["state"],m);const g=x(t,["source"]);g!=null&&v(e,["source"],g);const b=x(t,["videoMetadata"]);b!=null&&v(e,["videoMetadata"],b);const y=x(t,["error"]);return y!=null&&v(e,["error"],tte(y)),e}function rte(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>lS(i))),v(e,["files"],a)}return e}function nte(t){const e={},r=x(t,["sdkHttpResponse"]);return r!=null&&v(e,["sdkHttpResponse"],r),e}function ste(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ate extends qh{constructor(e){super(),this.apiClient=e,this.list=async(r={})=>new h1(Dh.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(r),r)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(r=>lS(r))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Wee(e);return a=ar("files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=rte(l),d=new CX;return Object.assign(d,u),d})}}async createInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Xee(e);return a=ar("upload/v1beta/files",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>{const u=nte(l),d=new EX;return Object.assign(d,u),d})}}async get(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Zee(e);return a=ar("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(l=>lS(l))}}async delete(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=ete(e);return a=ar("files/{file}",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s.then(()=>{const l=ste(),u=new _X;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ite(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function qM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],ite(r)),e}function ote(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],qM(n)),e}function lte(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>ote(s))),v(e,["speakerVoiceConfigs"],n)}return e}function cte(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],qM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],lte(n));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function ute(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function Ate(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function dte(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function fte(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],ute(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],Ate(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],dte(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function hte(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>fte(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function mte(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function pte(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function gte(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],pte(r)),e}function xte(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function vte(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],xte(r)),e}function yte(){return{}}function wte(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>mte(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],gte(n));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],vte(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],yte());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function bte(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function IF(){return{}}function Cte(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function Ete(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],Cte(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function _te(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function Ste(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],_te(n)),e}function Tte(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function Nte(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],cte(U4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],hte(Gi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=lp(b);Array.isArray(P)&&(P=P.map(L=>wte(op(L)))),v(e,["setup","tools"],P)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],bte(y));const _=x(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&v(e,["setup","inputAudioTranscription"],IF());const T=x(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","outputAudioTranscription"],IF());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],Ete(k));const D=x(t,["contextWindowCompression"]);e!==void 0&&D!=null&&v(e,["setup","contextWindowCompression"],Ste(D));const M=x(t,["proactivity"]);return e!==void 0&&M!=null&&v(e,["setup","proactivity"],Tte(M)),r}function Bte(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],Nte(s,r)),r}function kte(){return{}}function Ite(){return{}}function Fte(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],kM(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],FM(n));const s=x(t,["audioStreamEnd"]);s!=null&&v(e,["audioStreamEnd"],s);const a=x(t,["video"]);a!=null&&v(e,["video"],IM(a));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],kte()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],Ite()),e}function KM(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function Dte(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>KM(s))),v(e,["weightedPrompts"],n)}return e}function $M(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const s=x(t,["seed"]);s!=null&&v(e,["seed"],s);const a=x(t,["guidance"]);a!=null&&v(e,["guidance"],a);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function Rte(t){const e={},r=x(t,["musicGenerationConfig"]);return r!=null&&v(e,["musicGenerationConfig"],$M(r)),e}function WM(t){const e={},r=x(t,["model"]);return r!=null&&v(e,["model"],r),e}function YM(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>KM(s))),v(e,["weightedPrompts"],n)}return e}function cS(t){const e={},r=x(t,["setup"]);r!=null&&v(e,["setup"],WM(r));const n=x(t,["clientContent"]);n!=null&&v(e,["clientContent"],YM(n));const s=x(t,["musicGenerationConfig"]);s!=null&&v(e,["musicGenerationConfig"],$M(s));const a=x(t,["playbackControl"]);return a!=null&&v(e,["playbackControl"],a),e}function Lte(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function Ute(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],Lte(r)),e}function Mte(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],Ute(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function Pte(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function jte(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Ote(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Qte(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Pte(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],jte(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],Ote(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Hte(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Qte(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Vte(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function zte(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function Gte(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],zte(r)),e}function qte(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function Kte(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],qte(r)),e}function $te(){return{}}function Wte(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function Yte(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],Wte(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function Jte(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],Yte(r)),e}function Xte(){return{}}function Zte(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>Vte(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],Gte(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],Kte(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],$te());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],Jte(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],Xte());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function ere(t){const e={},r=x(t,["handle"]);r!=null&&v(e,["handle"],r);const n=x(t,["transparent"]);return n!=null&&v(e,["transparent"],n),e}function FF(){return{}}function tre(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function rre(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],tre(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function nre(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function sre(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],nre(n)),e}function are(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function ire(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],Mte(U4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],Hte(Gi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=lp(b);Array.isArray(P)&&(P=P.map(L=>Zte(op(L)))),v(e,["setup","tools"],P)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],ere(y));const _=x(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&v(e,["setup","inputAudioTranscription"],FF());const T=x(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","outputAudioTranscription"],FF());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],rre(k));const D=x(t,["contextWindowCompression"]);e!==void 0&&D!=null&&v(e,["setup","contextWindowCompression"],sre(D));const M=x(t,["proactivity"]);return e!==void 0&&M!=null&&v(e,["setup","proactivity"],are(M)),r}function ore(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],ire(s,r)),r}function lre(){return{}}function cre(){return{}}function ure(t){const e={},r=x(t,["media"]);r!=null&&v(e,["mediaChunks"],kM(r));const n=x(t,["audio"]);n!=null&&v(e,["audio"],FM(n));const s=x(t,["audioStreamEnd"]);s!=null&&v(e,["audioStreamEnd"],s);const a=x(t,["video"]);a!=null&&v(e,["video"],IM(a));const i=x(t,["text"]);return i!=null&&v(e,["text"],i),x(t,["activityStart"])!=null&&v(e,["activityStart"],lre()),x(t,["activityEnd"])!=null&&v(e,["activityEnd"],cre()),e}function Are(){return{}}function dre(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function fre(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function hre(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function mre(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],dre(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],fre(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],hre(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function pre(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>mre(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function DF(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function gre(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function xre(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>gre(s))),v(e,["urlMetadata"],n)}return e}function vre(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],pre(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const s=x(t,["interrupted"]);s!=null&&v(e,["interrupted"],s);const a=x(t,["groundingMetadata"]);a!=null&&v(e,["groundingMetadata"],a);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],DF(o));const l=x(t,["outputTranscription"]);l!=null&&v(e,["outputTranscription"],DF(l));const u=x(t,["urlContextMetadata"]);return u!=null&&v(e,["urlContextMetadata"],xre(u)),e}function yre(t){const e={},r=x(t,["id"]);r!=null&&v(e,["id"],r);const n=x(t,["args"]);n!=null&&v(e,["args"],n);const s=x(t,["name"]);return s!=null&&v(e,["name"],s),e}function wre(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>yre(s))),v(e,["functionCalls"],n)}return e}function bre(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function Mv(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function Cre(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const s=x(t,["responseTokenCount"]);s!=null&&v(e,["responseTokenCount"],s);const a=x(t,["toolUsePromptTokenCount"]);a!=null&&v(e,["toolUsePromptTokenCount"],a);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(g=>Mv(g))),v(e,["promptTokensDetails"],m)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>Mv(g))),v(e,["cacheTokensDetails"],m)}const d=x(t,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>Mv(g))),v(e,["responseTokensDetails"],m)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>Mv(g))),v(e,["toolUsePromptTokensDetails"],m)}return e}function Ere(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function _re(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const s=x(t,["lastConsumedClientMessageIndex"]);return s!=null&&v(e,["lastConsumedClientMessageIndex"],s),e}function Sre(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],Are());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],vre(n));const s=x(t,["toolCall"]);s!=null&&v(e,["toolCall"],wre(s));const a=x(t,["toolCallCancellation"]);a!=null&&v(e,["toolCallCancellation"],bre(a));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],Cre(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],Ere(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],_re(l)),e}function Tre(){return{}}function Nre(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["weight"]);return n!=null&&v(e,["weight"],n),e}function Bre(t){const e={},r=x(t,["weightedPrompts"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Nre(s))),v(e,["weightedPrompts"],n)}return e}function kre(t){const e={},r=x(t,["temperature"]);r!=null&&v(e,["temperature"],r);const n=x(t,["topK"]);n!=null&&v(e,["topK"],n);const s=x(t,["seed"]);s!=null&&v(e,["seed"],s);const a=x(t,["guidance"]);a!=null&&v(e,["guidance"],a);const i=x(t,["bpm"]);i!=null&&v(e,["bpm"],i);const o=x(t,["density"]);o!=null&&v(e,["density"],o);const l=x(t,["brightness"]);l!=null&&v(e,["brightness"],l);const u=x(t,["scale"]);u!=null&&v(e,["scale"],u);const d=x(t,["muteBass"]);d!=null&&v(e,["muteBass"],d);const h=x(t,["muteDrums"]);h!=null&&v(e,["muteDrums"],h);const m=x(t,["onlyBassAndDrums"]);return m!=null&&v(e,["onlyBassAndDrums"],m),e}function Ire(t){const e={},r=x(t,["clientContent"]);r!=null&&v(e,["clientContent"],Bre(r));const n=x(t,["musicGenerationConfig"]);return n!=null&&v(e,["musicGenerationConfig"],kre(n)),e}function Fre(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);n!=null&&v(e,["mimeType"],n);const s=x(t,["sourceMetadata"]);return s!=null&&v(e,["sourceMetadata"],Ire(s)),e}function Dre(t){const e={},r=x(t,["audioChunks"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Fre(s))),v(e,["audioChunks"],n)}return e}function Rre(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["filteredReason"]);return n!=null&&v(e,["filteredReason"],n),e}function Lre(t){const e={};x(t,["setupComplete"])!=null&&v(e,["setupComplete"],Tre());const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],Dre(n));const s=x(t,["filteredPrompt"]);return s!=null&&v(e,["filteredPrompt"],Rre(s)),e}function Ure(t){const e={},r=x(t,["sessionId"]);return r!=null&&v(e,["sessionId"],r),e}function Mre(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function Pre(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function jre(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Ore(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Mre(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],Pre(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],jre(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Qre(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Ore(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function RF(t){const e={},r=x(t,["text"]);r!=null&&v(e,["text"],r);const n=x(t,["finished"]);return n!=null&&v(e,["finished"],n),e}function Hre(t){const e={},r=x(t,["modelTurn"]);r!=null&&v(e,["modelTurn"],Qre(r));const n=x(t,["turnComplete"]);n!=null&&v(e,["turnComplete"],n);const s=x(t,["interrupted"]);s!=null&&v(e,["interrupted"],s);const a=x(t,["groundingMetadata"]);a!=null&&v(e,["groundingMetadata"],a);const i=x(t,["generationComplete"]);i!=null&&v(e,["generationComplete"],i);const o=x(t,["inputTranscription"]);o!=null&&v(e,["inputTranscription"],RF(o));const l=x(t,["outputTranscription"]);return l!=null&&v(e,["outputTranscription"],RF(l)),e}function Vre(t){const e={},r=x(t,["args"]);r!=null&&v(e,["args"],r);const n=x(t,["name"]);return n!=null&&v(e,["name"],n),e}function zre(t){const e={},r=x(t,["functionCalls"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Vre(s))),v(e,["functionCalls"],n)}return e}function Gre(t){const e={},r=x(t,["ids"]);return r!=null&&v(e,["ids"],r),e}function Pv(t){const e={},r=x(t,["modality"]);r!=null&&v(e,["modality"],r);const n=x(t,["tokenCount"]);return n!=null&&v(e,["tokenCount"],n),e}function qre(t){const e={},r=x(t,["promptTokenCount"]);r!=null&&v(e,["promptTokenCount"],r);const n=x(t,["cachedContentTokenCount"]);n!=null&&v(e,["cachedContentTokenCount"],n);const s=x(t,["candidatesTokenCount"]);s!=null&&v(e,["responseTokenCount"],s);const a=x(t,["toolUsePromptTokenCount"]);a!=null&&v(e,["toolUsePromptTokenCount"],a);const i=x(t,["thoughtsTokenCount"]);i!=null&&v(e,["thoughtsTokenCount"],i);const o=x(t,["totalTokenCount"]);o!=null&&v(e,["totalTokenCount"],o);const l=x(t,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(b=>Pv(b))),v(e,["promptTokensDetails"],g)}const u=x(t,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(b=>Pv(b))),v(e,["cacheTokensDetails"],g)}const d=x(t,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(b=>Pv(b))),v(e,["responseTokensDetails"],g)}const h=x(t,["toolUsePromptTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(b=>Pv(b))),v(e,["toolUsePromptTokensDetails"],g)}const m=x(t,["trafficType"]);return m!=null&&v(e,["trafficType"],m),e}function Kre(t){const e={},r=x(t,["timeLeft"]);return r!=null&&v(e,["timeLeft"],r),e}function $re(t){const e={},r=x(t,["newHandle"]);r!=null&&v(e,["newHandle"],r);const n=x(t,["resumable"]);n!=null&&v(e,["resumable"],n);const s=x(t,["lastConsumedClientMessageIndex"]);return s!=null&&v(e,["lastConsumedClientMessageIndex"],s),e}function Wre(t){const e={},r=x(t,["setupComplete"]);r!=null&&v(e,["setupComplete"],Ure(r));const n=x(t,["serverContent"]);n!=null&&v(e,["serverContent"],Hre(n));const s=x(t,["toolCall"]);s!=null&&v(e,["toolCall"],zre(s));const a=x(t,["toolCallCancellation"]);a!=null&&v(e,["toolCallCancellation"],Gre(a));const i=x(t,["usageMetadata"]);i!=null&&v(e,["usageMetadata"],qre(i));const o=x(t,["goAway"]);o!=null&&v(e,["goAway"],Kre(o));const l=x(t,["sessionResumptionUpdate"]);return l!=null&&v(e,["sessionResumptionUpdate"],$re(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Yre(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function Jre(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Xre(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Zre(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Yre(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],Jre(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],Xre(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function $w(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Zre(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function ene(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const _=x(t,["minimum"]);_!=null&&v(e,["minimum"],_);const T=x(t,["nullable"]);T!=null&&v(e,["nullable"],T);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const D=x(t,["properties"]);D!=null&&v(e,["properties"],D);const M=x(t,["propertyOrdering"]);M!=null&&v(e,["propertyOrdering"],M);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const L=x(t,["title"]);L!=null&&v(e,["title"],L);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function tne(t){const e={};if(x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["category"]);r!=null&&v(e,["category"],r);const n=x(t,["threshold"]);return n!=null&&v(e,["threshold"],n),e}function rne(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function nne(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function sne(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],nne(r)),e}function ane(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function ine(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],ane(r)),e}function one(){return{}}function lne(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>rne(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],sne(n));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],ine(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],one());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function cne(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function une(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function Ane(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],une(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function dne(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],cne(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],Ane(n)),e}function fne(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function JM(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],fne(r)),e}function hne(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],JM(n)),e}function mne(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>hne(s))),v(e,["speakerVoiceConfigs"],n)}return e}function pne(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],JM(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],mne(n));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function gne(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function xne(t,e,r){const n={},s=x(e,["systemInstruction"]);r!==void 0&&s!=null&&v(r,["systemInstruction"],$w(Gi(s)));const a=x(e,["temperature"]);a!=null&&v(n,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const _=x(e,["responseMimeType"]);_!=null&&v(n,["responseMimeType"],_);const T=x(e,["responseSchema"]);T!=null&&v(n,["responseSchema"],ene(R4(T)));const k=x(e,["responseJsonSchema"]);if(k!=null&&v(n,["responseJsonSchema"],k),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const D=x(e,["safetySettings"]);if(r!==void 0&&D!=null){let R=D;Array.isArray(R)&&(R=R.map(F=>tne(F))),v(r,["safetySettings"],R)}const M=x(e,["tools"]);if(r!==void 0&&M!=null){let R=lp(M);Array.isArray(R)&&(R=R.map(F=>lne(op(F)))),v(r,["tools"],R)}const P=x(e,["toolConfig"]);if(r!==void 0&&P!=null&&v(r,["toolConfig"],dne(P)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=x(e,["cachedContent"]);r!==void 0&&L!=null&&v(r,["cachedContent"],qA(t,L));const C=x(e,["responseModalities"]);C!=null&&v(n,["responseModalities"],C);const E=x(e,["mediaResolution"]);E!=null&&v(n,["mediaResolution"],E);const B=x(e,["speechConfig"]);if(B!=null&&v(n,["speechConfig"],pne(L4(B))),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=x(e,["thinkingConfig"]);return O!=null&&v(n,["thinkingConfig"],gne(O)),n}function LF(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=Kl(s);Array.isArray(i)&&(i=i.map(o=>$w(o))),v(r,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["generationConfig"],xne(t,a,r)),r}function vne(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["requests[]","taskType"],n);const s=x(t,["title"]);e!==void 0&&s!=null&&v(e,["requests[]","title"],s);const a=x(t,["outputDimensionality"]);if(e!==void 0&&a!=null&&v(e,["requests[]","outputDimensionality"],a),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function yne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);s!=null&&v(r,["requests[]","content"],RM(t,s));const a=x(e,["config"]);a!=null&&v(r,["config"],vne(a,r));const i=x(e,["model"]);return i!==void 0&&v(r,["requests[]","model"],$n(t,i)),r}function wne(t,e){const r={};if(x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=x(t,["numberOfImages"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const s=x(t,["aspectRatio"]);e!==void 0&&s!=null&&v(e,["parameters","aspectRatio"],s);const a=x(t,["guidanceScale"]);if(e!==void 0&&a!=null&&v(e,["parameters","guidanceScale"],a),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=x(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&v(e,["parameters","safetySetting"],i);const o=x(t,["personGeneration"]);e!==void 0&&o!=null&&v(e,["parameters","personGeneration"],o);const l=x(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&v(e,["parameters","includeSafetyAttributes"],l);const u=x(t,["includeRaiReason"]);e!==void 0&&u!=null&&v(e,["parameters","includeRaiReason"],u);const d=x(t,["language"]);e!==void 0&&d!=null&&v(e,["parameters","language"],d);const h=x(t,["outputMimeType"]);e!==void 0&&h!=null&&v(e,["parameters","outputOptions","mimeType"],h);const m=x(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&v(e,["parameters","outputOptions","compressionQuality"],m),x(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(t,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(x(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function bne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["prompt"]);s!=null&&v(r,["instances[0]","prompt"],s);const a=x(e,["config"]);return a!=null&&v(r,["config"],wne(a,r)),r}function Cne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function Ene(t,e,r){const n={},s=x(e,["pageSize"]);r!==void 0&&s!=null&&v(r,["_query","pageSize"],s);const a=x(e,["pageToken"]);r!==void 0&&a!=null&&v(r,["_query","pageToken"],a);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],MM(t,o)),n}function _ne(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],Ene(t,n,r)),r}function Sne(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const a=x(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),r}function Tne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],Sne(s,r)),r}function Nne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function Bne(t){const e={};if(x(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function kne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=Kl(s);Array.isArray(i)&&(i=i.map(o=>$w(o))),v(r,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["config"],Bne(a)),r}function Ine(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=x(t,["imageBytes"]);r!=null&&v(e,["bytesBase64Encoded"],Kh(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Fne(t,e){const r={},n=x(t,["numberOfVideos"]);if(e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n),x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=x(t,["durationSeconds"]);if(e!==void 0&&s!=null&&v(e,["parameters","durationSeconds"],s),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=x(t,["aspectRatio"]);if(e!==void 0&&a!=null&&v(e,["parameters","aspectRatio"],a),x(t,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const i=x(t,["personGeneration"]);if(e!==void 0&&i!=null&&v(e,["parameters","personGeneration"],i),x(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const o=x(t,["negativePrompt"]);e!==void 0&&o!=null&&v(e,["parameters","negativePrompt"],o);const l=x(t,["enhancePrompt"]);if(e!==void 0&&l!=null&&v(e,["parameters","enhancePrompt"],l),x(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(x(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(x(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function Dne(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["prompt"]);s!=null&&v(r,["instances[0]","prompt"],s);const a=x(e,["image"]);if(a!=null&&v(r,["instances[0]","image"],Ine(a)),x(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const i=x(e,["config"]);return i!=null&&v(r,["config"],Fne(i,r)),r}function Rne(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function Lne(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Une(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Mne(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Rne(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],Lne(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],Une(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function up(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Mne(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Pne(t){const e={},r=x(t,["anyOf"]);r!=null&&v(e,["anyOf"],r);const n=x(t,["default"]);n!=null&&v(e,["default"],n);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["enum"]);a!=null&&v(e,["enum"],a);const i=x(t,["example"]);i!=null&&v(e,["example"],i);const o=x(t,["format"]);o!=null&&v(e,["format"],o);const l=x(t,["items"]);l!=null&&v(e,["items"],l);const u=x(t,["maxItems"]);u!=null&&v(e,["maxItems"],u);const d=x(t,["maxLength"]);d!=null&&v(e,["maxLength"],d);const h=x(t,["maxProperties"]);h!=null&&v(e,["maxProperties"],h);const m=x(t,["maximum"]);m!=null&&v(e,["maximum"],m);const g=x(t,["minItems"]);g!=null&&v(e,["minItems"],g);const b=x(t,["minLength"]);b!=null&&v(e,["minLength"],b);const y=x(t,["minProperties"]);y!=null&&v(e,["minProperties"],y);const _=x(t,["minimum"]);_!=null&&v(e,["minimum"],_);const T=x(t,["nullable"]);T!=null&&v(e,["nullable"],T);const k=x(t,["pattern"]);k!=null&&v(e,["pattern"],k);const D=x(t,["properties"]);D!=null&&v(e,["properties"],D);const M=x(t,["propertyOrdering"]);M!=null&&v(e,["propertyOrdering"],M);const P=x(t,["required"]);P!=null&&v(e,["required"],P);const L=x(t,["title"]);L!=null&&v(e,["title"],L);const C=x(t,["type"]);return C!=null&&v(e,["type"],C),e}function jne(t){const e={},r=x(t,["featureSelectionPreference"]);return r!=null&&v(e,["featureSelectionPreference"],r),e}function One(t){const e={},r=x(t,["method"]);r!=null&&v(e,["method"],r);const n=x(t,["category"]);n!=null&&v(e,["category"],n);const s=x(t,["threshold"]);return s!=null&&v(e,["threshold"],s),e}function Qne(t){const e={};if(x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const r=x(t,["description"]);r!=null&&v(e,["description"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["parameters"]);s!=null&&v(e,["parameters"],s);const a=x(t,["parametersJsonSchema"]);a!=null&&v(e,["parametersJsonSchema"],a);const i=x(t,["response"]);i!=null&&v(e,["response"],i);const o=x(t,["responseJsonSchema"]);return o!=null&&v(e,["responseJsonSchema"],o),e}function Hne(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function Vne(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],Hne(r)),e}function zne(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function Gne(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],zne(r)),e}function qne(){return{}}function Kne(t){const e={},r=x(t,["apiKeyString"]);return r!=null&&v(e,["apiKeyString"],r),e}function $ne(t){const e={},r=x(t,["apiKeyConfig"]);r!=null&&v(e,["apiKeyConfig"],Kne(r));const n=x(t,["authType"]);n!=null&&v(e,["authType"],n);const s=x(t,["googleServiceAccountConfig"]);s!=null&&v(e,["googleServiceAccountConfig"],s);const a=x(t,["httpBasicAuthConfig"]);a!=null&&v(e,["httpBasicAuthConfig"],a);const i=x(t,["oauthConfig"]);i!=null&&v(e,["oauthConfig"],i);const o=x(t,["oidcConfig"]);return o!=null&&v(e,["oidcConfig"],o),e}function Wne(t){const e={},r=x(t,["authConfig"]);return r!=null&&v(e,["authConfig"],$ne(r)),e}function Yne(){return{}}function XM(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let h=r;Array.isArray(h)&&(h=h.map(m=>Qne(m))),v(e,["functionDeclarations"],h)}const n=x(t,["retrieval"]);n!=null&&v(e,["retrieval"],n);const s=x(t,["googleSearch"]);s!=null&&v(e,["googleSearch"],Vne(s));const a=x(t,["googleSearchRetrieval"]);a!=null&&v(e,["googleSearchRetrieval"],Gne(a)),x(t,["enterpriseWebSearch"])!=null&&v(e,["enterpriseWebSearch"],qne());const o=x(t,["googleMaps"]);o!=null&&v(e,["googleMaps"],Wne(o)),x(t,["urlContext"])!=null&&v(e,["urlContext"],Yne());const u=x(t,["codeExecution"]);u!=null&&v(e,["codeExecution"],u);const d=x(t,["computerUse"]);return d!=null&&v(e,["computerUse"],d),e}function Jne(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["allowedFunctionNames"]);return n!=null&&v(e,["allowedFunctionNames"],n),e}function Xne(t){const e={},r=x(t,["latitude"]);r!=null&&v(e,["latitude"],r);const n=x(t,["longitude"]);return n!=null&&v(e,["longitude"],n),e}function Zne(t){const e={},r=x(t,["latLng"]);r!=null&&v(e,["latLng"],Xne(r));const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function ese(t){const e={},r=x(t,["functionCallingConfig"]);r!=null&&v(e,["functionCallingConfig"],Jne(r));const n=x(t,["retrievalConfig"]);return n!=null&&v(e,["retrievalConfig"],Zne(n)),e}function tse(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function rse(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],tse(r)),e}function nse(t){const e={},r=x(t,["voiceConfig"]);if(r!=null&&v(e,["voiceConfig"],rse(r)),x(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const n=x(t,["languageCode"]);return n!=null&&v(e,["languageCode"],n),e}function sse(t){const e={},r=x(t,["includeThoughts"]);r!=null&&v(e,["includeThoughts"],r);const n=x(t,["thinkingBudget"]);return n!=null&&v(e,["thinkingBudget"],n),e}function ase(t,e,r){const n={},s=x(e,["systemInstruction"]);r!==void 0&&s!=null&&v(r,["systemInstruction"],up(Gi(s)));const a=x(e,["temperature"]);a!=null&&v(n,["temperature"],a);const i=x(e,["topP"]);i!=null&&v(n,["topP"],i);const o=x(e,["topK"]);o!=null&&v(n,["topK"],o);const l=x(e,["candidateCount"]);l!=null&&v(n,["candidateCount"],l);const u=x(e,["maxOutputTokens"]);u!=null&&v(n,["maxOutputTokens"],u);const d=x(e,["stopSequences"]);d!=null&&v(n,["stopSequences"],d);const h=x(e,["responseLogprobs"]);h!=null&&v(n,["responseLogprobs"],h);const m=x(e,["logprobs"]);m!=null&&v(n,["logprobs"],m);const g=x(e,["presencePenalty"]);g!=null&&v(n,["presencePenalty"],g);const b=x(e,["frequencyPenalty"]);b!=null&&v(n,["frequencyPenalty"],b);const y=x(e,["seed"]);y!=null&&v(n,["seed"],y);const _=x(e,["responseMimeType"]);_!=null&&v(n,["responseMimeType"],_);const T=x(e,["responseSchema"]);T!=null&&v(n,["responseSchema"],Pne(R4(T)));const k=x(e,["responseJsonSchema"]);k!=null&&v(n,["responseJsonSchema"],k);const D=x(e,["routingConfig"]);D!=null&&v(n,["routingConfig"],D);const M=x(e,["modelSelectionConfig"]);M!=null&&v(n,["modelConfig"],jne(M));const P=x(e,["safetySettings"]);if(r!==void 0&&P!=null){let ne=P;Array.isArray(ne)&&(ne=ne.map(J=>One(J))),v(r,["safetySettings"],ne)}const L=x(e,["tools"]);if(r!==void 0&&L!=null){let ne=lp(L);Array.isArray(ne)&&(ne=ne.map(J=>XM(op(J)))),v(r,["tools"],ne)}const C=x(e,["toolConfig"]);r!==void 0&&C!=null&&v(r,["toolConfig"],ese(C));const E=x(e,["labels"]);r!==void 0&&E!=null&&v(r,["labels"],E);const B=x(e,["cachedContent"]);r!==void 0&&B!=null&&v(r,["cachedContent"],qA(t,B));const O=x(e,["responseModalities"]);O!=null&&v(n,["responseModalities"],O);const R=x(e,["mediaResolution"]);R!=null&&v(n,["mediaResolution"],R);const F=x(e,["speechConfig"]);F!=null&&v(n,["speechConfig"],nse(L4(F)));const Q=x(e,["audioTimestamp"]);Q!=null&&v(n,["audioTimestamp"],Q);const H=x(e,["thinkingConfig"]);return H!=null&&v(n,["thinkingConfig"],sse(H)),n}function UF(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=Kl(s);Array.isArray(i)&&(i=i.map(o=>up(o))),v(r,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["generationConfig"],ase(t,a,r)),r}function ise(t,e){const r={},n=x(t,["taskType"]);e!==void 0&&n!=null&&v(e,["instances[]","task_type"],n);const s=x(t,["title"]);e!==void 0&&s!=null&&v(e,["instances[]","title"],s);const a=x(t,["outputDimensionality"]);e!==void 0&&a!=null&&v(e,["parameters","outputDimensionality"],a);const i=x(t,["mimeType"]);e!==void 0&&i!=null&&v(e,["instances[]","mimeType"],i);const o=x(t,["autoTruncate"]);return e!==void 0&&o!=null&&v(e,["parameters","autoTruncate"],o),r}function ose(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);s!=null&&v(r,["instances[]","content"],RM(t,s));const a=x(e,["config"]);return a!=null&&v(r,["config"],ise(a,r)),r}function lse(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const s=x(t,["negativePrompt"]);e!==void 0&&s!=null&&v(e,["parameters","negativePrompt"],s);const a=x(t,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const y=x(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const _=x(t,["addWatermark"]);e!==void 0&&_!=null&&v(e,["parameters","addWatermark"],_);const T=x(t,["imageSize"]);e!==void 0&&T!=null&&v(e,["parameters","sampleImageSize"],T);const k=x(t,["enhancePrompt"]);return e!==void 0&&k!=null&&v(e,["parameters","enhancePrompt"],k),r}function cse(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["prompt"]);s!=null&&v(r,["instances[0]","prompt"],s);const a=x(e,["config"]);return a!=null&&v(r,["config"],lse(a,r)),r}function Ww(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["imageBytes"]);n!=null&&v(e,["bytesBase64Encoded"],Kh(n));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function use(t){const e={},r=x(t,["maskMode"]);r!=null&&v(e,["maskMode"],r);const n=x(t,["segmentationClasses"]);n!=null&&v(e,["maskClasses"],n);const s=x(t,["maskDilation"]);return s!=null&&v(e,["dilation"],s),e}function Ase(t){const e={},r=x(t,["controlType"]);r!=null&&v(e,["controlType"],r);const n=x(t,["enableControlImageComputation"]);return n!=null&&v(e,["computeControl"],n),e}function dse(t){const e={},r=x(t,["styleDescription"]);return r!=null&&v(e,["styleDescription"],r),e}function fse(t){const e={},r=x(t,["subjectType"]);r!=null&&v(e,["subjectType"],r);const n=x(t,["subjectDescription"]);return n!=null&&v(e,["subjectDescription"],n),e}function hse(t){const e={},r=x(t,["referenceImage"]);r!=null&&v(e,["referenceImage"],Ww(r));const n=x(t,["referenceId"]);n!=null&&v(e,["referenceId"],n);const s=x(t,["referenceType"]);s!=null&&v(e,["referenceType"],s);const a=x(t,["maskImageConfig"]);a!=null&&v(e,["maskImageConfig"],use(a));const i=x(t,["controlImageConfig"]);i!=null&&v(e,["controlImageConfig"],Ase(i));const o=x(t,["styleImageConfig"]);o!=null&&v(e,["styleImageConfig"],dse(o));const l=x(t,["subjectImageConfig"]);return l!=null&&v(e,["subjectImageConfig"],fse(l)),e}function mse(t,e){const r={},n=x(t,["outputGcsUri"]);e!==void 0&&n!=null&&v(e,["parameters","storageUri"],n);const s=x(t,["negativePrompt"]);e!==void 0&&s!=null&&v(e,["parameters","negativePrompt"],s);const a=x(t,["numberOfImages"]);e!==void 0&&a!=null&&v(e,["parameters","sampleCount"],a);const i=x(t,["aspectRatio"]);e!==void 0&&i!=null&&v(e,["parameters","aspectRatio"],i);const o=x(t,["guidanceScale"]);e!==void 0&&o!=null&&v(e,["parameters","guidanceScale"],o);const l=x(t,["seed"]);e!==void 0&&l!=null&&v(e,["parameters","seed"],l);const u=x(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&v(e,["parameters","safetySetting"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["includeSafetyAttributes"]);e!==void 0&&h!=null&&v(e,["parameters","includeSafetyAttributes"],h);const m=x(t,["includeRaiReason"]);e!==void 0&&m!=null&&v(e,["parameters","includeRaiReason"],m);const g=x(t,["language"]);e!==void 0&&g!=null&&v(e,["parameters","language"],g);const b=x(t,["outputMimeType"]);e!==void 0&&b!=null&&v(e,["parameters","outputOptions","mimeType"],b);const y=x(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&v(e,["parameters","outputOptions","compressionQuality"],y);const _=x(t,["addWatermark"]);e!==void 0&&_!=null&&v(e,["parameters","addWatermark"],_);const T=x(t,["editMode"]);e!==void 0&&T!=null&&v(e,["parameters","editMode"],T);const k=x(t,["baseSteps"]);return e!==void 0&&k!=null&&v(e,["parameters","editConfig","baseSteps"],k),r}function pse(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["prompt"]);s!=null&&v(r,["instances[0]","prompt"],s);const a=x(e,["referenceImages"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(l=>hse(l))),v(r,["instances[0]","referenceImages"],o)}const i=x(e,["config"]);return i!=null&&v(r,["config"],mse(i,r)),r}function gse(t,e){const r={},n=x(t,["includeRaiReason"]);e!==void 0&&n!=null&&v(e,["parameters","includeRaiReason"],n);const s=x(t,["outputMimeType"]);e!==void 0&&s!=null&&v(e,["parameters","outputOptions","mimeType"],s);const a=x(t,["outputCompressionQuality"]);e!==void 0&&a!=null&&v(e,["parameters","outputOptions","compressionQuality"],a);const i=x(t,["enhanceInputImage"]);e!==void 0&&i!=null&&v(e,["parameters","upscaleConfig","enhanceInputImage"],i);const o=x(t,["imagePreservationFactor"]);e!==void 0&&o!=null&&v(e,["parameters","upscaleConfig","imagePreservationFactor"],o);const l=x(t,["numberOfImages"]);e!==void 0&&l!=null&&v(e,["parameters","sampleCount"],l);const u=x(t,["mode"]);return e!==void 0&&u!=null&&v(e,["parameters","mode"],u),r}function xse(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["image"]);s!=null&&v(r,["instances[0]","image"],Ww(s));const a=x(e,["upscaleFactor"]);a!=null&&v(r,["parameters","upscaleConfig","upscaleFactor"],a);const i=x(e,["config"]);return i!=null&&v(r,["config"],gse(i,r)),r}function vse(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function yse(t,e,r){const n={},s=x(e,["pageSize"]);r!==void 0&&s!=null&&v(r,["_query","pageSize"],s);const a=x(e,["pageToken"]);r!==void 0&&a!=null&&v(r,["_query","pageToken"],a);const i=x(e,["filter"]);r!==void 0&&i!=null&&v(r,["_query","filter"],i);const o=x(e,["queryBase"]);return r!==void 0&&o!=null&&v(r,["_url","models_url"],MM(t,o)),n}function wse(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],yse(t,n,r)),r}function bse(t,e){const r={},n=x(t,["displayName"]);e!==void 0&&n!=null&&v(e,["displayName"],n);const s=x(t,["description"]);e!==void 0&&s!=null&&v(e,["description"],s);const a=x(t,["defaultCheckpointId"]);return e!==void 0&&a!=null&&v(e,["defaultCheckpointId"],a),r}function Cse(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],bse(s,r)),r}function Ese(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","name"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],s),r}function _se(t,e){const r={},n=x(t,["systemInstruction"]);e!==void 0&&n!=null&&v(e,["systemInstruction"],up(Gi(n)));const s=x(t,["tools"]);if(e!==void 0&&s!=null){let i=s;Array.isArray(i)&&(i=i.map(o=>XM(o))),v(e,["tools"],i)}const a=x(t,["generationConfig"]);return e!==void 0&&a!=null&&v(e,["generationConfig"],a),r}function Sse(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=Kl(s);Array.isArray(i)&&(i=i.map(o=>up(o))),v(r,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["config"],_se(a,r)),r}function Tse(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["contents"]);if(s!=null){let i=Kl(s);Array.isArray(i)&&(i=i.map(o=>up(o))),v(r,["contents"],i)}const a=x(e,["config"]);return a!=null&&v(r,["config"],a),r}function Nse(t){const e={},r=x(t,["uri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["videoBytes"]);n!=null&&v(e,["bytesBase64Encoded"],Kh(n));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function Bse(t,e){const r={},n=x(t,["numberOfVideos"]);e!==void 0&&n!=null&&v(e,["parameters","sampleCount"],n);const s=x(t,["outputGcsUri"]);e!==void 0&&s!=null&&v(e,["parameters","storageUri"],s);const a=x(t,["fps"]);e!==void 0&&a!=null&&v(e,["parameters","fps"],a);const i=x(t,["durationSeconds"]);e!==void 0&&i!=null&&v(e,["parameters","durationSeconds"],i);const o=x(t,["seed"]);e!==void 0&&o!=null&&v(e,["parameters","seed"],o);const l=x(t,["aspectRatio"]);e!==void 0&&l!=null&&v(e,["parameters","aspectRatio"],l);const u=x(t,["resolution"]);e!==void 0&&u!=null&&v(e,["parameters","resolution"],u);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&v(e,["parameters","personGeneration"],d);const h=x(t,["pubsubTopic"]);e!==void 0&&h!=null&&v(e,["parameters","pubsubTopic"],h);const m=x(t,["negativePrompt"]);e!==void 0&&m!=null&&v(e,["parameters","negativePrompt"],m);const g=x(t,["enhancePrompt"]);e!==void 0&&g!=null&&v(e,["parameters","enhancePrompt"],g);const b=x(t,["generateAudio"]);e!==void 0&&b!=null&&v(e,["parameters","generateAudio"],b);const y=x(t,["lastFrame"]);e!==void 0&&y!=null&&v(e,["instances[0]","lastFrame"],Ww(y));const _=x(t,["compressionQuality"]);return e!==void 0&&_!=null&&v(e,["parameters","compressionQuality"],_),r}function kse(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["_url","model"],$n(t,n));const s=x(e,["prompt"]);s!=null&&v(r,["instances[0]","prompt"],s);const a=x(e,["image"]);a!=null&&v(r,["instances[0]","image"],Ww(a));const i=x(e,["video"]);i!=null&&v(r,["instances[0]","video"],Nse(i));const o=x(e,["config"]);return o!=null&&v(r,["config"],Bse(o,r)),r}function Ise(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function Fse(t){const e={},r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Dse(t){const e={},r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function Rse(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],Ise(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],Fse(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],Dse(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function Lse(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Rse(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function Use(t){const e={},r=x(t,["citationSources"]);return r!=null&&v(e,["citations"],r),e}function Mse(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function Pse(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>Mse(s))),v(e,["urlMetadata"],n)}return e}function jse(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],Lse(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],Use(n));const s=x(t,["tokenCount"]);s!=null&&v(e,["tokenCount"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],Pse(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function MF(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(l=>jse(l))),v(e,["candidates"],o)}const s=x(t,["modelVersion"]);s!=null&&v(e,["modelVersion"],s);const a=x(t,["promptFeedback"]);a!=null&&v(e,["promptFeedback"],a);const i=x(t,["usageMetadata"]);return i!=null&&v(e,["usageMetadata"],i),e}function Ose(t){const e={},r=x(t,["values"]);return r!=null&&v(e,["values"],r),e}function Qse(){return{}}function Hse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>Ose(i))),v(e,["embeddings"],a)}return x(t,["metadata"])!=null&&v(e,["metadata"],Qse()),e}function Vse(t){const e={},r=x(t,["bytesBase64Encoded"]);r!=null&&v(e,["imageBytes"],Kh(r));const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function ZM(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const s=x(t,["contentType"]);return s!=null&&v(e,["contentType"],s),e}function zse(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],Vse(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const s=x(t,["_self"]);return s!=null&&v(e,["safetyAttributes"],ZM(s)),e}function Gse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>zse(i))),v(e,["generatedImages"],a)}const s=x(t,["positivePromptSafetyAttributes"]);return s!=null&&v(e,["positivePromptSafetyAttributes"],ZM(s)),e}function qse(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const s=x(t,["updateTime"]);return s!=null&&v(e,["updateTime"],s),e}function uS(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["version"]);a!=null&&v(e,["version"],a);const i=x(t,["_self"]);i!=null&&v(e,["tunedModelInfo"],qse(i));const o=x(t,["inputTokenLimit"]);o!=null&&v(e,["inputTokenLimit"],o);const l=x(t,["outputTokenLimit"]);l!=null&&v(e,["outputTokenLimit"],l);const u=x(t,["supportedGenerationMethods"]);return u!=null&&v(e,["supportedActions"],u),e}function Kse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["_self"]);if(s!=null){let a=PM(s);Array.isArray(a)&&(a=a.map(i=>uS(i))),v(e,["models"],a)}return e}function $se(){return{}}function Wse(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);n!=null&&v(e,["totalTokens"],n);const s=x(t,["cachedContentTokenCount"]);return s!=null&&v(e,["cachedContentTokenCount"],s),e}function Yse(t){const e={},r=x(t,["video","uri"]);r!=null&&v(e,["uri"],r);const n=x(t,["video","encodedVideo"]);n!=null&&v(e,["videoBytes"],Kh(n));const s=x(t,["encoding"]);return s!=null&&v(e,["mimeType"],s),e}function Jse(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],Yse(r)),e}function Xse(t){const e={},r=x(t,["generatedSamples"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>Jse(i))),v(e,["generatedVideos"],a)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const s=x(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function Zse(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const a=x(t,["error"]);a!=null&&v(e,["error"],a);const i=x(t,["response","generateVideoResponse"]);return i!=null&&v(e,["response"],Xse(i)),e}function eae(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function tae(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["data"]);n!=null&&v(e,["data"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function rae(t){const e={},r=x(t,["displayName"]);r!=null&&v(e,["displayName"],r);const n=x(t,["fileUri"]);n!=null&&v(e,["fileUri"],n);const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function nae(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],eae(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],tae(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],rae(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function sae(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>nae(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function aae(t){const e={},r=x(t,["citations"]);return r!=null&&v(e,["citations"],r),e}function iae(t){const e={},r=x(t,["retrievedUrl"]);r!=null&&v(e,["retrievedUrl"],r);const n=x(t,["urlRetrievalStatus"]);return n!=null&&v(e,["urlRetrievalStatus"],n),e}function oae(t){const e={},r=x(t,["urlMetadata"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>iae(s))),v(e,["urlMetadata"],n)}return e}function lae(t){const e={},r=x(t,["content"]);r!=null&&v(e,["content"],sae(r));const n=x(t,["citationMetadata"]);n!=null&&v(e,["citationMetadata"],aae(n));const s=x(t,["finishMessage"]);s!=null&&v(e,["finishMessage"],s);const a=x(t,["finishReason"]);a!=null&&v(e,["finishReason"],a);const i=x(t,["urlContextMetadata"]);i!=null&&v(e,["urlContextMetadata"],oae(i));const o=x(t,["avgLogprobs"]);o!=null&&v(e,["avgLogprobs"],o);const l=x(t,["groundingMetadata"]);l!=null&&v(e,["groundingMetadata"],l);const u=x(t,["index"]);u!=null&&v(e,["index"],u);const d=x(t,["logprobsResult"]);d!=null&&v(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);return h!=null&&v(e,["safetyRatings"],h),e}function PF(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>lae(d))),v(e,["candidates"],u)}const s=x(t,["createTime"]);s!=null&&v(e,["createTime"],s);const a=x(t,["responseId"]);a!=null&&v(e,["responseId"],a);const i=x(t,["modelVersion"]);i!=null&&v(e,["modelVersion"],i);const o=x(t,["promptFeedback"]);o!=null&&v(e,["promptFeedback"],o);const l=x(t,["usageMetadata"]);return l!=null&&v(e,["usageMetadata"],l),e}function cae(t){const e={},r=x(t,["truncated"]);r!=null&&v(e,["truncated"],r);const n=x(t,["token_count"]);return n!=null&&v(e,["tokenCount"],n),e}function uae(t){const e={},r=x(t,["values"]);r!=null&&v(e,["values"],r);const n=x(t,["statistics"]);return n!=null&&v(e,["statistics"],cae(n)),e}function Aae(t){const e={},r=x(t,["billableCharacterCount"]);return r!=null&&v(e,["billableCharacterCount"],r),e}function dae(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions[]","embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>uae(i))),v(e,["embeddings"],a)}const s=x(t,["metadata"]);return s!=null&&v(e,["metadata"],Aae(s)),e}function fae(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["gcsUri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["imageBytes"],Kh(n));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function eP(t){const e={},r=x(t,["safetyAttributes","categories"]);r!=null&&v(e,["categories"],r);const n=x(t,["safetyAttributes","scores"]);n!=null&&v(e,["scores"],n);const s=x(t,["contentType"]);return s!=null&&v(e,["contentType"],s),e}function M4(t){const e={},r=x(t,["_self"]);r!=null&&v(e,["image"],fae(r));const n=x(t,["raiFilteredReason"]);n!=null&&v(e,["raiFilteredReason"],n);const s=x(t,["_self"]);s!=null&&v(e,["safetyAttributes"],eP(s));const a=x(t,["prompt"]);return a!=null&&v(e,["enhancedPrompt"],a),e}function hae(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(i=>M4(i))),v(e,["generatedImages"],a)}const s=x(t,["positivePromptSafetyAttributes"]);return s!=null&&v(e,["positivePromptSafetyAttributes"],eP(s)),e}function mae(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>M4(a))),v(e,["generatedImages"],s)}return e}function pae(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>M4(a))),v(e,["generatedImages"],s)}return e}function gae(t){const e={},r=x(t,["endpoint"]);r!=null&&v(e,["name"],r);const n=x(t,["deployedModelId"]);return n!=null&&v(e,["deployedModelId"],n),e}function xae(t){const e={},r=x(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["createTime"]);n!=null&&v(e,["createTime"],n);const s=x(t,["updateTime"]);return s!=null&&v(e,["updateTime"],s),e}function vae(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const s=x(t,["step"]);return s!=null&&v(e,["step"],s),e}function AS(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["displayName"]);n!=null&&v(e,["displayName"],n);const s=x(t,["description"]);s!=null&&v(e,["description"],s);const a=x(t,["versionId"]);a!=null&&v(e,["version"],a);const i=x(t,["deployedModels"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>gae(m))),v(e,["endpoints"],h)}const o=x(t,["labels"]);o!=null&&v(e,["labels"],o);const l=x(t,["_self"]);l!=null&&v(e,["tunedModelInfo"],xae(l));const u=x(t,["defaultCheckpointId"]);u!=null&&v(e,["defaultCheckpointId"],u);const d=x(t,["checkpoints"]);if(d!=null){let h=d;Array.isArray(h)&&(h=h.map(m=>vae(m))),v(e,["checkpoints"],h)}return e}function yae(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["_self"]);if(s!=null){let a=PM(s);Array.isArray(a)&&(a=a.map(i=>AS(i))),v(e,["models"],a)}return e}function wae(){return{}}function bae(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["totalTokens"]);return n!=null&&v(e,["totalTokens"],n),e}function Cae(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["tokensInfo"]);return n!=null&&v(e,["tokensInfo"],n),e}function Eae(t){const e={},r=x(t,["gcsUri"]);r!=null&&v(e,["uri"],r);const n=x(t,["bytesBase64Encoded"]);n!=null&&v(e,["videoBytes"],Kh(n));const s=x(t,["mimeType"]);return s!=null&&v(e,["mimeType"],s),e}function _ae(t){const e={},r=x(t,["_self"]);return r!=null&&v(e,["video"],Eae(r)),e}function Sae(t){const e={},r=x(t,["videos"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(i=>_ae(i))),v(e,["generatedVideos"],a)}const n=x(t,["raiMediaFilteredCount"]);n!=null&&v(e,["raiMediaFilteredCount"],n);const s=x(t,["raiMediaFilteredReasons"]);return s!=null&&v(e,["raiMediaFilteredReasons"],s),e}function Tae(t){const e={},r=x(t,["name"]);r!=null&&v(e,["name"],r);const n=x(t,["metadata"]);n!=null&&v(e,["metadata"],n);const s=x(t,["done"]);s!=null&&v(e,["done"],s);const a=x(t,["error"]);a!=null&&v(e,["error"],a);const i=x(t,["response"]);return i!=null&&v(e,["response"],Sae(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Nae="Content-Type",Bae="X-Server-Timeout",kae="User-Agent",dS="x-goog-api-client",Iae="1.12.0",Fae=`google-genai-sdk/${Iae}`,Dae="v1beta1",Rae="v1beta",jF=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Lae{constructor(e){var r,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Dae,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Rae,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),r=new URL(e);return r.protocol=r.protocol=="http:"?"ws":"wss",r.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,r,n){const s=[this.getRequestUrlInternal(r)];return n&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,r,n);if(e.queryParams)for(const[i,o]of Object.entries(e.queryParams))s.searchParams.append(i,String(o));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,r,e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,r){const n=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(r))typeof a=="object"?n[s]=Object.assign(Object.assign({},n[s]),a):a!==void 0&&(n[s]=a);return n}async requestStream(e){let r=this.clientOptions.httpOptions;e.httpOptions&&(r=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,r,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,r,e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,r,n){if(r&&r.timeout||n){const s=new AbortController,a=s.signal;if(r.timeout&&(r==null?void 0:r.timeout)>0){const i=setTimeout(()=>s.abort(),r.timeout);i&&typeof i.unref=="function"&&i.unref()}n&&n.addEventListener("abort",()=>{s.abort()}),e.signal=a}return r&&r.extraBody!==null&&Uae(e,r.extraBody),e.headers=await this.getHeadersInternal(r),e}async unaryApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async s=>(await OF(s),new sS(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,r,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},r),{method:n})).then(async s=>(await OF(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var r;return xm(this,arguments,function*(){const s=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let i="";for(;;){const{done:o,value:l}=yield As(s.read());if(o){if(i.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=a.decode(l,{stream:!0});try{const h=JSON.parse(u);if("error"in h){const m=JSON.parse(JSON.stringify(h.error)),g=m.status,b=m.code,y=`got status: ${g}. ${JSON.stringify(h)}`;if(b>=400&&b<600)throw new Kw({message:y,status:b})}}catch(h){if(h.name==="ApiError")throw h}i+=u;let d=i.match(jF);for(;d;){const h=d[1];try{const m=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield As(new sS(m)),i=i.slice(d[0].length),d=i.match(jF)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{s.releaseLock()}})}async apiCall(e,r){return fetch(e,r).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},r=Fae+" "+this.clientOptions.userAgentExtra;return e[kae]=r,e[dS]=r,e[Nae]="application/json",e}async getHeadersInternal(e){const r=new Headers;if(e&&e.headers){for(const[n,s]of Object.entries(e.headers))r.append(n,s);e.timeout&&e.timeout>0&&r.append(Bae,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r),r}async uploadFile(e,r){var n;const s={};r!=null&&(s.mimeType=r.mimeType,s.name=r.name,s.displayName=r.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,i=await a.stat(e);s.sizeBytes=String(i.size);const o=(n=r==null?void 0:r.mimeType)!==null&&n!==void 0?n:i.type;if(o===void 0||o==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=o;const l=await this.fetchUploadUrl(s,r);return a.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,r){var n;let s={};r!=null&&r.httpOptions?s=r.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const a={file:e},i=await this.request({path:ar("upload/v1beta/files",a._url),body:JSON.stringify(a),httpMethod:"POST",httpOptions:s});if(!i||!(i!=null&&i.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const o=(n=i==null?void 0:i.headers)===null||n===void 0?void 0:n["x-goog-upload-url"];if(o===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return o}}async function OF(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const r=t.status;let n;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await t.json():n={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(n);throw r>=400&&r<600?new Kw({message:s,status:r}):new Error(s)}}function Uae(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let r={};if(typeof t.body=="string"&&t.body.length>0)try{const a=JSON.parse(t.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))r=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(a,i){const o=Object.assign({},a);for(const l in i)if(Object.prototype.hasOwnProperty.call(i,l)){const u=i[l],d=o[l];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?o[l]=n(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),o[l]=u)}return o}const s=n(r,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mae="mcp_used/unknown";let Pae=!1;function tP(t){for(const e of t)if(jae(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Pae}function rP(t){var e;const r=(e=t[dS])!==null&&e!==void 0?e:"";t[dS]=(r+` ${Mae}`).trimStart()}function jae(t){return t!==null&&typeof t=="object"&&t instanceof P4}function Oae(t,e=100){return xm(this,arguments,function*(){let n,s=0;for(;s<e;){const a=yield As(t.listTools({cursor:n}));for(const i of a.tools)yield yield As(i),s++;if(!a.nextCursor)break;n=a.nextCursor}})}class P4{constructor(e=[],r){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=r}static create(e,r){return new P4(e,r)}async initialize(){var e,r,n,s;if(this.mcpTools.length>0)return;const a={},i=[];for(const d of this.mcpClients)try{for(var o=!0,l=(r=void 0,qg(Oae(d))),u;u=await l.next(),e=u.done,!e;o=!0){s=u.value,o=!1;const h=s;i.push(h);const m=h.name;if(a[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);a[m]=d}}catch(h){r={error:h}}finally{try{!o&&!e&&(n=l.return)&&await n.call(l)}finally{if(r)throw r.error}}this.mcpTools=i,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),LX(this.mcpTools,this.config)}async callTool(e){await this.initialize();const r=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[n.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const i=await s.callTool({name:n.name,arguments:n.args},void 0,a);r.push({functionResponse:{name:n.name,response:i.isError?{error:i}:i}})}return r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Qae(t,e,r){const n=new TX;let s;r.data instanceof Blob?s=JSON.parse(await r.data.text()):s=JSON.parse(r.data);const a=Lre(s);Object.assign(n,a),e(n)}class Hae{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n}async connect(e){var r,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),i=Gae(this.apiClient.getDefaultHeaders()),o=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${o}`;let u=()=>{};const d=new Promise(D=>{u=D}),h=e.callbacks,m=function(){u({})},g=this.apiClient,b={onopen:m,onmessage:D=>{Qae(g,h.onmessage,D)},onerror:(r=h==null?void 0:h.onerror)!==null&&r!==void 0?r:function(D){},onclose:(n=h==null?void 0:h.onclose)!==null&&n!==void 0?n:function(D){}},y=this.webSocketFactory.create(l,zae(i),b);y.connect(),await d;const _=$n(this.apiClient,e.model),T=WM({model:_}),k=cS({setup:T});return y.send(JSON.stringify(k)),new Vae(y,this.apiClient)}}class Vae{constructor(e,r){this.conn=e,this.apiClient=r}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const r=Dte(e),n=YM(r);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const r=Rte(e),n=cS(r);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const r=cS({playbackControl:e});this.conn.send(JSON.stringify(r))}play(){this.sendPlaybackControl(lm.PLAY)}pause(){this.sendPlaybackControl(lm.PAUSE)}stop(){this.sendPlaybackControl(lm.STOP)}resetContext(){this.sendPlaybackControl(lm.RESET_CONTEXT)}close(){this.conn.close()}}function zae(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function Gae(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qae="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Kae(t,e,r){const n=new SX;let s;r.data instanceof Blob?s=await r.data.text():r.data instanceof ArrayBuffer?s=new TextDecoder().decode(r.data):s=r.data;const a=JSON.parse(s);if(t.isVertexAI()){const i=Wre(a);Object.assign(n,i)}else{const i=Sre(a);Object.assign(n,i)}e(n)}class $ae{constructor(e,r,n){this.apiClient=e,this.auth=r,this.webSocketFactory=n,this.music=new Hae(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var r,n,s,a,i,o;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const h=this.apiClient.getHeaders();e.config&&e.config.tools&&tP(e.config.tools)&&rP(h);const m=Xae(h);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const B=this.apiClient.getApiKey();let O="BidiGenerateContent",R="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",R="access_token"),d=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${O}?${R}=${B}`}let g=()=>{};const b=new Promise(B=>{g=B}),y=e.callbacks,_=function(){var B;(B=y==null?void 0:y.onopen)===null||B===void 0||B.call(y),g({})},T=this.apiClient,k={onopen:_,onmessage:B=>{Kae(T,y.onmessage,B)},onerror:(r=y==null?void 0:y.onerror)!==null&&r!==void 0?r:function(B){},onclose:(n=y==null?void 0:y.onclose)!==null&&n!==void 0?n:function(B){}},D=this.webSocketFactory.create(d,Jae(m),k);D.connect(),await b;let M=$n(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){const B=this.apiClient.getProject(),O=this.apiClient.getLocation();M=`projects/${B}/locations/${O}/`+M}let P={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[T2.AUDIO]}:e.config.responseModalities=[T2.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const L=(o=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[],C=[];for(const B of L)if(this.isCallableTool(B)){const O=B;C.push(await O.tool())}else C.push(B);C.length>0&&(e.config.tools=C);const E={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=ore(this.apiClient,E):P=Bte(this.apiClient,E),delete P.config,D.send(JSON.stringify(P)),new Yae(D,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Wae={turnComplete:!0};class Yae{constructor(e,r){this.conn=e,this.apiClient=r}tLiveClientContent(e,r){if(r.turns!==null&&r.turns!==void 0){let n=[];try{n=Kl(r.turns),e.isVertexAI()?n=n.map(s=>up(s)):n=n.map(s=>$w(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof r.turns}'`)}return{clientContent:{turns:n,turnComplete:r.turnComplete}}}return{clientContent:{turnComplete:r.turnComplete}}}tLiveClienttToolResponse(e,r){let n=[];if(r.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(r.functionResponses)?n=r.functionResponses:n=[r.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(qae)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},Wae),e);const r=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(r))}sendRealtimeInput(e){let r={};this.apiClient.isVertexAI()?r={realtimeInput:ure(e)}:r={realtimeInput:Fte(e)},this.conn.send(JSON.stringify(r))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const r=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(r))}close(){this.conn.close()}}function Jae(t){const e={};return t.forEach((r,n)=>{e[n]=r}),e}function Xae(t){const e=new Headers;for(const[r,n]of Object.entries(t))e.append(r,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QF=10;function HF(t){var e,r,n;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const i of(r=t==null?void 0:t.tools)!==null&&r!==void 0?r:[])if(vm(i)){s=!0;break}if(!s)return!0;const a=(n=t==null?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function vm(t){return"callTool"in t&&typeof t.callTool=="function"}function Zae(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(s=>vm(s)))!==null&&n!==void 0?n:!1}function eie(t){var e,r,n;return(n=(r=(e=t.config)===null||e===void 0?void 0:e.tools)===null||r===void 0?void 0:r.some(s=>!vm(s)))!==null&&n!==void 0?n:!1}function VF(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tie extends qh{constructor(e){super(),this.apiClient=e,this.generateContent=async r=>{var n,s,a,i,o;const l=await this.processParamsMaybeAddMcpUsage(r);if(this.maybeMoveToResponseJsonSchem(r),!Zae(r)||HF(r.config))return await this.generateContentInternal(l);if(eie(r))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const h=Kl(l.contents),m=(a=(s=(n=l.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:QF;let g=0;for(;g<m&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const b=u.candidates[0].content,y=[];for(const _ of(o=(i=r.config)===null||i===void 0?void 0:i.tools)!==null&&o!==void 0?o:[])if(vm(_)){const k=await _.callTool(u.functionCalls);y.push(...k)}g++,d={role:"user",parts:y},l.contents=Kl(l.contents),l.contents.push(b),l.contents.push(d),VF(l.config)&&(h.push(b),h.push(d))}return VF(l.config)&&(u.automaticFunctionCallingHistory=h),u},this.generateContentStream=async r=>{if(this.maybeMoveToResponseJsonSchem(r),HF(r.config)){const n=await this.processParamsMaybeAddMcpUsage(r);return await this.generateContentStreamInternal(n)}else return await this.processAfcStream(r)},this.generateImages=async r=>await this.generateImagesInternal(r).then(n=>{var s;let a;const i=[];if(n!=null&&n.generatedImages)for(const l of n.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=l==null?void 0:l.safetyAttributes:i.push(l);let o;return a?o={generatedImages:i,positivePromptSafetyAttributes:a,sdkHttpResponse:n.sdkHttpResponse}:o={generatedImages:i,sdkHttpResponse:n.sdkHttpResponse},o}),this.list=async r=>{var n;const i={config:Object.assign(Object.assign({},{queryBase:!0}),r==null?void 0:r.config)};if(this.apiClient.isVertexAI()&&!i.config.queryBase){if(!((n=i.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");i.config.filter="labels.tune-type:*"}return new h1(Dh.PAGED_ITEM_MODELS,o=>this.listInternal(o),await this.listInternal(i),i)},this.editImage=async r=>{const n={model:r.model,prompt:r.prompt,referenceImages:[],config:r.config};return r.referenceImages&&r.referenceImages&&(n.referenceImages=r.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async r=>{let n={numberOfImages:1,mode:"upscale"};r.config&&(n=Object.assign(Object.assign({},n),r.config));const s={model:r.model,image:r.image,upscaleFactor:r.upscaleFactor,config:n};return await this.upscaleImageInternal(s)},this.generateVideos=async r=>await this.generateVideosInternal(r)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var r,n,s;const a=(r=e.config)===null||r===void 0?void 0:r.tools;if(!a)return e;const i=await Promise.all(a.map(async l=>vm(l)?await l.tool():l)),o={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:i})};if(o.config.tools=i,e.config&&e.config.tools&&tP(e.config.tools)){const l=(s=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),rP(u),o.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return o}async initAfcToolsMap(e){var r,n,s;const a=new Map;for(const i of(n=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&n!==void 0?n:[])if(vm(i)){const o=i,l=await o.tool();for(const u of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(a.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);a.set(u.name,o)}}return a}async processAfcStream(e){var r,n,s;const a=(s=(n=(r=e.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:QF;let i=!1,o=0;const l=await this.initAfcToolsMap(e);return function(u,d,h){var m,g;return xm(this,arguments,function*(){for(var b,y,_,T;o<a;){i&&(o++,i=!1);const P=yield As(u.processParamsMaybeAddMcpUsage(h)),L=yield As(u.generateContentStreamInternal(P)),C=[],E=[];try{for(var k=!0,D=(y=void 0,qg(L)),M;M=yield As(D.next()),b=M.done,!b;k=!0){T=M.value,k=!1;const B=T;if(yield yield As(B),B.candidates&&(!((m=B.candidates[0])===null||m===void 0)&&m.content)){E.push(B.candidates[0].content);for(const O of(g=B.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(o<a&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(O.functionCall.name)){const R=yield As(d.get(O.functionCall.name).callTool([O.functionCall]));C.push(...R)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(B){y={error:B}}finally{try{!k&&!b&&(_=D.return)&&(yield As(_.call(D)))}finally{if(y)throw y.error}}if(C.length>0){i=!0;const B=new ng;B.candidates=[{content:{role:"user",parts:C}}],yield yield As(B);const O=[];O.push(...E),O.push({role:"user",parts:C});const R=Kl(h.contents).concat(O);h.contents=R}else break}})}(this,l,e)}async generateContentInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=UF(this.apiClient,e);return o=ar("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=PF(d),m=new ng;return Object.assign(m,h),m})}else{const u=LF(this.apiClient,e);return o=ar("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=MF(d),m=new ng;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=UF(this.apiClient,e);return o=ar("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),i.then(function(h){return xm(this,arguments,function*(){var m,g,b,y;try{for(var _=!0,T=qg(h),k;k=yield As(T.next()),m=k.done,!m;_=!0){y=k.value,_=!1;const D=y,M=PF(yield As(D.json()));M.sdkHttpResponse={headers:D.headers};const P=new ng;Object.assign(P,M),yield yield As(P)}}catch(D){g={error:D}}finally{try{!_&&!m&&(b=T.return)&&(yield As(b.call(T)))}finally{if(g)throw g.error}}})})}else{const u=LF(this.apiClient,e);return o=ar("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.requestStream({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),i.then(function(h){return xm(this,arguments,function*(){var m,g,b,y;try{for(var _=!0,T=qg(h),k;k=yield As(T.next()),m=k.done,!m;_=!0){y=k.value,_=!1;const D=y,M=MF(yield As(D.json()));M.sdkHttpResponse={headers:D.headers};const P=new ng;Object.assign(P,M),yield yield As(P)}}catch(D){g={error:D}}finally{try{!_&&!m&&(b=T.return)&&(yield As(b.call(T)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=ose(this.apiClient,e);return o=ar("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=dae(d),m=new hF;return Object.assign(m,h),m})}else{const u=yne(this.apiClient,e);return o=ar("{model}:batchEmbedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Hse(d),m=new hF;return Object.assign(m,h),m})}}async generateImagesInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=cse(this.apiClient,e);return o=ar("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=hae(d),m=new mF;return Object.assign(m,h),m})}else{const u=bne(this.apiClient,e);return o=ar("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Gse(d),m=new mF;return Object.assign(m,h),m})}}async editImageInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=pse(this.apiClient,e);return a=ar("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=mae(l),d=new yX;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=xse(this.apiClient,e);return a=ar("{model}:predict",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=pae(l),d=new wX;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=vse(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>AS(d))}else{const u=Cne(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>uS(d))}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=wse(this.apiClient,e);return o=ar("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=yae(d),m=new pF;return Object.assign(m,h),m})}else{const u=_ne(this.apiClient,e);return o=ar("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Kse(d),m=new pF;return Object.assign(m,h),m})}}async update(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Cse(this.apiClient,e);return o=ar("{model}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>AS(d))}else{const u=Tne(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>uS(d))}}async delete(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Ese(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(()=>{const d=wae(),h=new gF;return Object.assign(h,d),h})}else{const u=Nne(this.apiClient,e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(()=>{const d=$se(),h=new gF;return Object.assign(h,d),h})}}async countTokens(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Sse(this.apiClient,e);return o=ar("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=bae(d),m=new xF;return Object.assign(m,h),m})}else{const u=kne(this.apiClient,e);return o=ar("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Wse(d),m=new xF;return Object.assign(m,h),m})}}async computeTokens(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Tse(this.apiClient,e);return a=ar("{model}:computeTokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const u=Cae(l),d=new bX;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=kse(this.apiClient,e);return o=ar("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Tae(d),m=new N2;return Object.assign(m,h),m})}else{const u=Dne(this.apiClient,e);return o=ar("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i.then(d=>{const h=Zse(d),m=new N2;return Object.assign(m,h),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rie(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function nie(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["_url","operationName"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function sie(t){const e={},r=x(t,["operationName"]);r!=null&&v(e,["operationName"],r);const n=x(t,["resourceName"]);n!=null&&v(e,["_url","resourceName"],n);const s=x(t,["config"]);return s!=null&&v(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class aie extends qh{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=r.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:s,config:{httpOptions:a}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const r=e.operation,n=e.config;if(r.name===void 0||r.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=r.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const i=await this.fetchPredictVideosOperationInternal({operationName:r.name,resourceName:s,config:{httpOptions:a}});return r._fromAPIResponse({apiResponse:i,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:r.name,config:n});return r._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=nie(e);return o=ar("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),i}else{const u=rie(e);return o=ar("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json()),i}}async fetchPredictVideosOperationInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=sie(e);return a=ar("{resourceName}:fetchPredictOperation",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iie(t){const e={},r=x(t,["voiceName"]);return r!=null&&v(e,["voiceName"],r),e}function nP(t){const e={},r=x(t,["prebuiltVoiceConfig"]);return r!=null&&v(e,["prebuiltVoiceConfig"],iie(r)),e}function oie(t){const e={},r=x(t,["speaker"]);r!=null&&v(e,["speaker"],r);const n=x(t,["voiceConfig"]);return n!=null&&v(e,["voiceConfig"],nP(n)),e}function lie(t){const e={},r=x(t,["speakerVoiceConfigs"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>oie(s))),v(e,["speakerVoiceConfigs"],n)}return e}function cie(t){const e={},r=x(t,["voiceConfig"]);r!=null&&v(e,["voiceConfig"],nP(r));const n=x(t,["multiSpeakerVoiceConfig"]);n!=null&&v(e,["multiSpeakerVoiceConfig"],lie(n));const s=x(t,["languageCode"]);return s!=null&&v(e,["languageCode"],s),e}function uie(t){const e={},r=x(t,["fps"]);r!=null&&v(e,["fps"],r);const n=x(t,["endOffset"]);n!=null&&v(e,["endOffset"],n);const s=x(t,["startOffset"]);return s!=null&&v(e,["startOffset"],s),e}function Aie(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["data"]);r!=null&&v(e,["data"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function die(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&v(e,["fileUri"],r);const n=x(t,["mimeType"]);return n!=null&&v(e,["mimeType"],n),e}function fie(t){const e={},r=x(t,["videoMetadata"]);r!=null&&v(e,["videoMetadata"],uie(r));const n=x(t,["thought"]);n!=null&&v(e,["thought"],n);const s=x(t,["inlineData"]);s!=null&&v(e,["inlineData"],Aie(s));const a=x(t,["fileData"]);a!=null&&v(e,["fileData"],die(a));const i=x(t,["thoughtSignature"]);i!=null&&v(e,["thoughtSignature"],i);const o=x(t,["codeExecutionResult"]);o!=null&&v(e,["codeExecutionResult"],o);const l=x(t,["executableCode"]);l!=null&&v(e,["executableCode"],l);const u=x(t,["functionCall"]);u!=null&&v(e,["functionCall"],u);const d=x(t,["functionResponse"]);d!=null&&v(e,["functionResponse"],d);const h=x(t,["text"]);return h!=null&&v(e,["text"],h),e}function hie(t){const e={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>fie(a))),v(e,["parts"],s)}const n=x(t,["role"]);return n!=null&&v(e,["role"],n),e}function mie(t){const e={},r=x(t,["behavior"]);r!=null&&v(e,["behavior"],r);const n=x(t,["description"]);n!=null&&v(e,["description"],n);const s=x(t,["name"]);s!=null&&v(e,["name"],s);const a=x(t,["parameters"]);a!=null&&v(e,["parameters"],a);const i=x(t,["parametersJsonSchema"]);i!=null&&v(e,["parametersJsonSchema"],i);const o=x(t,["response"]);o!=null&&v(e,["response"],o);const l=x(t,["responseJsonSchema"]);return l!=null&&v(e,["responseJsonSchema"],l),e}function pie(t){const e={},r=x(t,["startTime"]);r!=null&&v(e,["startTime"],r);const n=x(t,["endTime"]);return n!=null&&v(e,["endTime"],n),e}function gie(t){const e={},r=x(t,["timeRangeFilter"]);return r!=null&&v(e,["timeRangeFilter"],pie(r)),e}function xie(t){const e={},r=x(t,["mode"]);r!=null&&v(e,["mode"],r);const n=x(t,["dynamicThreshold"]);return n!=null&&v(e,["dynamicThreshold"],n),e}function vie(t){const e={},r=x(t,["dynamicRetrievalConfig"]);return r!=null&&v(e,["dynamicRetrievalConfig"],xie(r)),e}function yie(){return{}}function wie(t){const e={},r=x(t,["functionDeclarations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>mie(u))),v(e,["functionDeclarations"],l)}if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["googleSearch"]);n!=null&&v(e,["googleSearch"],gie(n));const s=x(t,["googleSearchRetrieval"]);if(s!=null&&v(e,["googleSearchRetrieval"],vie(s)),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(x(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");x(t,["urlContext"])!=null&&v(e,["urlContext"],yie());const i=x(t,["codeExecution"]);i!=null&&v(e,["codeExecution"],i);const o=x(t,["computerUse"]);return o!=null&&v(e,["computerUse"],o),e}function bie(t){const e={},r=x(t,["handle"]);if(r!=null&&v(e,["handle"],r),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function zF(){return{}}function Cie(t){const e={},r=x(t,["disabled"]);r!=null&&v(e,["disabled"],r);const n=x(t,["startOfSpeechSensitivity"]);n!=null&&v(e,["startOfSpeechSensitivity"],n);const s=x(t,["endOfSpeechSensitivity"]);s!=null&&v(e,["endOfSpeechSensitivity"],s);const a=x(t,["prefixPaddingMs"]);a!=null&&v(e,["prefixPaddingMs"],a);const i=x(t,["silenceDurationMs"]);return i!=null&&v(e,["silenceDurationMs"],i),e}function Eie(t){const e={},r=x(t,["automaticActivityDetection"]);r!=null&&v(e,["automaticActivityDetection"],Cie(r));const n=x(t,["activityHandling"]);n!=null&&v(e,["activityHandling"],n);const s=x(t,["turnCoverage"]);return s!=null&&v(e,["turnCoverage"],s),e}function _ie(t){const e={},r=x(t,["targetTokens"]);return r!=null&&v(e,["targetTokens"],r),e}function Sie(t){const e={},r=x(t,["triggerTokens"]);r!=null&&v(e,["triggerTokens"],r);const n=x(t,["slidingWindow"]);return n!=null&&v(e,["slidingWindow"],_ie(n)),e}function Tie(t){const e={},r=x(t,["proactiveAudio"]);return r!=null&&v(e,["proactiveAudio"],r),e}function Nie(t,e){const r={},n=x(t,["generationConfig"]);e!==void 0&&n!=null&&v(e,["setup","generationConfig"],n);const s=x(t,["responseModalities"]);e!==void 0&&s!=null&&v(e,["setup","generationConfig","responseModalities"],s);const a=x(t,["temperature"]);e!==void 0&&a!=null&&v(e,["setup","generationConfig","temperature"],a);const i=x(t,["topP"]);e!==void 0&&i!=null&&v(e,["setup","generationConfig","topP"],i);const o=x(t,["topK"]);e!==void 0&&o!=null&&v(e,["setup","generationConfig","topK"],o);const l=x(t,["maxOutputTokens"]);e!==void 0&&l!=null&&v(e,["setup","generationConfig","maxOutputTokens"],l);const u=x(t,["mediaResolution"]);e!==void 0&&u!=null&&v(e,["setup","generationConfig","mediaResolution"],u);const d=x(t,["seed"]);e!==void 0&&d!=null&&v(e,["setup","generationConfig","seed"],d);const h=x(t,["speechConfig"]);e!==void 0&&h!=null&&v(e,["setup","generationConfig","speechConfig"],cie(U4(h)));const m=x(t,["enableAffectiveDialog"]);e!==void 0&&m!=null&&v(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=x(t,["systemInstruction"]);e!==void 0&&g!=null&&v(e,["setup","systemInstruction"],hie(Gi(g)));const b=x(t,["tools"]);if(e!==void 0&&b!=null){let P=lp(b);Array.isArray(P)&&(P=P.map(L=>wie(op(L)))),v(e,["setup","tools"],P)}const y=x(t,["sessionResumption"]);e!==void 0&&y!=null&&v(e,["setup","sessionResumption"],bie(y));const _=x(t,["inputAudioTranscription"]);e!==void 0&&_!=null&&v(e,["setup","inputAudioTranscription"],zF());const T=x(t,["outputAudioTranscription"]);e!==void 0&&T!=null&&v(e,["setup","outputAudioTranscription"],zF());const k=x(t,["realtimeInputConfig"]);e!==void 0&&k!=null&&v(e,["setup","realtimeInputConfig"],Eie(k));const D=x(t,["contextWindowCompression"]);e!==void 0&&D!=null&&v(e,["setup","contextWindowCompression"],Sie(D));const M=x(t,["proactivity"]);return e!==void 0&&M!=null&&v(e,["setup","proactivity"],Tie(M)),r}function Bie(t,e){const r={},n=x(e,["model"]);n!=null&&v(r,["setup","model"],$n(t,n));const s=x(e,["config"]);return s!=null&&v(r,["config"],Nie(s,r)),r}function kie(t,e,r){const n={},s=x(e,["expireTime"]);r!==void 0&&s!=null&&v(r,["expireTime"],s);const a=x(e,["newSessionExpireTime"]);r!==void 0&&a!=null&&v(r,["newSessionExpireTime"],a);const i=x(e,["uses"]);r!==void 0&&i!=null&&v(r,["uses"],i);const o=x(e,["liveConnectConstraints"]);r!==void 0&&o!=null&&v(r,["bidiGenerateContentSetup"],Bie(t,o));const l=x(e,["lockAdditionalFields"]);return r!==void 0&&l!=null&&v(r,["fieldMask"],l),n}function Iie(t,e){const r={},n=x(e,["config"]);return n!=null&&v(r,["config"],kie(t,n,r)),r}function Fie(t){const e={},r=x(t,["name"]);return r!=null&&v(e,["name"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Die(t){const e=[];for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)){const n=t[r];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const s=Object.keys(n).map(a=>`${r}.${a}`);e.push(...s)}else e.push(r)}return e.join(",")}function Rie(t,e){let r=null;const n=t.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const a=n.setup;typeof a=="object"&&a!==null?(t.bidiGenerateContentSetup=a,r=a):delete t.bidiGenerateContentSetup}else n!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(r){const a=Die(r);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?t.fieldMask=a:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const i=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let o=[];s.length>0&&(o=s.map(u=>i.includes(u)?`generationConfig.${u}`:u));const l=[];a&&l.push(a),o.length>0&&l.push(...o),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class Lie extends qh{constructor(e){super(),this.apiClient=e}async create(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const o=Iie(this.apiClient,e);a=ar("auth_tokens",o._url),i=o._query,delete o.config,delete o._url,delete o._query;const l=Rie(o,e.config);return s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>Fie(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uie(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function Mie(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),r}function Pie(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],Mie(r,e)),e}function jie(t){const e={},r=x(t,["textInput"]);r!=null&&v(e,["textInput"],r);const n=x(t,["output"]);return n!=null&&v(e,["output"],n),e}function Oie(t){const e={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=x(t,["examples"]);if(r!=null){let n=r;Array.isArray(n)&&(n=n.map(s=>jie(s))),v(e,["examples","examples"],n)}return e}function Qie(t,e){const r={};if(x(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const n=x(t,["tunedModelDisplayName"]);if(e!==void 0&&n!=null&&v(e,["displayName"],n),x(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=x(t,["epochCount"]);e!==void 0&&s!=null&&v(e,["tuningTask","hyperparameters","epochCount"],s);const a=x(t,["learningRateMultiplier"]);if(a!=null&&v(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),x(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const i=x(t,["batchSize"]);e!==void 0&&i!=null&&v(e,["tuningTask","hyperparameters","batchSize"],i);const o=x(t,["learningRate"]);return e!==void 0&&o!=null&&v(e,["tuningTask","hyperparameters","learningRate"],o),r}function Hie(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["tuningTask","trainingData"],Oie(n));const s=x(t,["config"]);return s!=null&&v(e,["config"],Qie(s,e)),e}function Vie(t){const e={},r=x(t,["name"]);r!=null&&v(e,["_url","name"],r);const n=x(t,["config"]);return n!=null&&v(e,["config"],n),e}function zie(t,e){const r={},n=x(t,["pageSize"]);e!==void 0&&n!=null&&v(e,["_query","pageSize"],n);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&v(e,["_query","pageToken"],s);const a=x(t,["filter"]);return e!==void 0&&a!=null&&v(e,["_query","filter"],a),r}function Gie(t){const e={},r=x(t,["config"]);return r!=null&&v(e,["config"],zie(r,e)),e}function qie(t,e){const r={},n=x(t,["gcsUri"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],n);const s=x(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],s),x(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function Kie(t,e){const r={},n=x(t,["gcsUri"]);n!=null&&v(r,["validationDatasetUri"],n);const s=x(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],s),r}function $ie(t,e){const r={},n=x(t,["validationDataset"]);e!==void 0&&n!=null&&v(e,["supervisedTuningSpec"],Kie(n,r));const s=x(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&v(e,["tunedModelDisplayName"],s);const a=x(t,["description"]);e!==void 0&&a!=null&&v(e,["description"],a);const i=x(t,["epochCount"]);e!==void 0&&i!=null&&v(e,["supervisedTuningSpec","hyperParameters","epochCount"],i);const o=x(t,["learningRateMultiplier"]);e!==void 0&&o!=null&&v(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],o);const l=x(t,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&v(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=x(t,["adapterSize"]);if(e!==void 0&&u!=null&&v(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),x(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return r}function Wie(t){const e={},r=x(t,["baseModel"]);r!=null&&v(e,["baseModel"],r);const n=x(t,["trainingDataset"]);n!=null&&v(e,["supervisedTuningSpec","trainingDatasetUri"],qie(n,e));const s=x(t,["config"]);return s!=null&&v(e,["config"],$ie(s,e)),e}function Yie(t){const e={},r=x(t,["name"]);r!=null&&v(e,["model"],r);const n=x(t,["name"]);return n!=null&&v(e,["endpoint"],n),e}function sP(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["state"]);s!=null&&v(e,["state"],LM(s));const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["tuningTask","startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["tuningTask","completeTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["description"]);u!=null&&v(e,["description"],u);const d=x(t,["baseModel"]);d!=null&&v(e,["baseModel"],d);const h=x(t,["_self"]);h!=null&&v(e,["tunedModel"],Yie(h));const m=x(t,["distillationSpec"]);m!=null&&v(e,["distillationSpec"],m);const g=x(t,["experiment"]);g!=null&&v(e,["experiment"],g);const b=x(t,["labels"]);b!=null&&v(e,["labels"],b);const y=x(t,["pipelineJob"]);y!=null&&v(e,["pipelineJob"],y);const _=x(t,["satisfiesPzi"]);_!=null&&v(e,["satisfiesPzi"],_);const T=x(t,["satisfiesPzs"]);T!=null&&v(e,["satisfiesPzs"],T);const k=x(t,["serviceAccount"]);k!=null&&v(e,["serviceAccount"],k);const D=x(t,["tunedModelDisplayName"]);return D!=null&&v(e,["tunedModelDisplayName"],D),e}function Jie(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["tunedModels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>sP(i))),v(e,["tuningJobs"],a)}return e}function Xie(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["metadata"]);s!=null&&v(e,["metadata"],s);const a=x(t,["done"]);a!=null&&v(e,["done"],a);const i=x(t,["error"]);return i!=null&&v(e,["error"],i),e}function Zie(t){const e={},r=x(t,["checkpointId"]);r!=null&&v(e,["checkpointId"],r);const n=x(t,["epoch"]);n!=null&&v(e,["epoch"],n);const s=x(t,["step"]);s!=null&&v(e,["step"],s);const a=x(t,["endpoint"]);return a!=null&&v(e,["endpoint"],a),e}function eoe(t){const e={},r=x(t,["model"]);r!=null&&v(e,["model"],r);const n=x(t,["endpoint"]);n!=null&&v(e,["endpoint"],n);const s=x(t,["checkpoints"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>Zie(i))),v(e,["checkpoints"],a)}return e}function fS(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["name"]);n!=null&&v(e,["name"],n);const s=x(t,["state"]);s!=null&&v(e,["state"],LM(s));const a=x(t,["createTime"]);a!=null&&v(e,["createTime"],a);const i=x(t,["startTime"]);i!=null&&v(e,["startTime"],i);const o=x(t,["endTime"]);o!=null&&v(e,["endTime"],o);const l=x(t,["updateTime"]);l!=null&&v(e,["updateTime"],l);const u=x(t,["error"]);u!=null&&v(e,["error"],u);const d=x(t,["description"]);d!=null&&v(e,["description"],d);const h=x(t,["baseModel"]);h!=null&&v(e,["baseModel"],h);const m=x(t,["tunedModel"]);m!=null&&v(e,["tunedModel"],eoe(m));const g=x(t,["supervisedTuningSpec"]);g!=null&&v(e,["supervisedTuningSpec"],g);const b=x(t,["tuningDataStats"]);b!=null&&v(e,["tuningDataStats"],b);const y=x(t,["encryptionSpec"]);y!=null&&v(e,["encryptionSpec"],y);const _=x(t,["partnerModelTuningSpec"]);_!=null&&v(e,["partnerModelTuningSpec"],_);const T=x(t,["distillationSpec"]);T!=null&&v(e,["distillationSpec"],T);const k=x(t,["experiment"]);k!=null&&v(e,["experiment"],k);const D=x(t,["labels"]);D!=null&&v(e,["labels"],D);const M=x(t,["pipelineJob"]);M!=null&&v(e,["pipelineJob"],M);const P=x(t,["satisfiesPzi"]);P!=null&&v(e,["satisfiesPzi"],P);const L=x(t,["satisfiesPzs"]);L!=null&&v(e,["satisfiesPzs"],L);const C=x(t,["serviceAccount"]);C!=null&&v(e,["serviceAccount"],C);const E=x(t,["tunedModelDisplayName"]);return E!=null&&v(e,["tunedModelDisplayName"],E),e}function toe(t){const e={},r=x(t,["sdkHttpResponse"]);r!=null&&v(e,["sdkHttpResponse"],r);const n=x(t,["nextPageToken"]);n!=null&&v(e,["nextPageToken"],n);const s=x(t,["tuningJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(i=>fS(i))),v(e,["tuningJobs"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class roe extends qh{constructor(e){super(),this.apiClient=e,this.get=async r=>await this.getInternal(r),this.list=async(r={})=>new h1(Dh.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(r),r),this.tune=async r=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(r);{const n=await this.tuneMldevInternal(r);let s="";return n.metadata!==void 0&&n.metadata.tunedModel!==void 0?s=n.metadata.tunedModel:n.name!==void 0&&n.name.includes("/operations/")&&(s=n.name.split("/operations/")[0]),{name:s,state:nS.JOB_STATE_QUEUED}}}}async getInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Vie(e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>fS(d))}else{const u=Uie(e);return o=ar("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>sP(d))}}async listInternal(e){var r,n,s,a;let i,o="",l={};if(this.apiClient.isVertexAI()){const u=Gie(e);return o=ar("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=toe(d),m=new yF;return Object.assign(m,h),m})}else{const u=Pie(e);return o=ar("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,i=this.apiClient.request({path:o,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(d=>d.json().then(h=>{const m=h;return m.sdkHttpResponse={headers:d.headers},m})),i.then(d=>{const h=Jie(d),m=new yF;return Object.assign(m,h),m})}}async tuneInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI()){const o=Wie(e);return a=ar("tuningJobs",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>fS(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var r,n;let s,a="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Hie(e);return a=ar("tunedModels",o._url),i=o._query,delete o.config,delete o._url,delete o._query,s=this.apiClient.request({path:a,queryParams:i,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(l=>l.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>Xie(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class noe{async download(e,r){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const soe=1024*1024*8,aoe=3,ioe=1e3,ooe=2,mE="x-goog-upload-status";async function loe(t,e,r){var n,s,a;let i=0,o=0,l=new sS(new Response),u="upload";for(i=t.size;o<i;){const h=Math.min(soe,i-o),m=t.slice(o,o+h);o+h>=i&&(u+=", finalize");let g=0,b=ioe;for(;g<aoe&&(l=await r.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(h)}}}),!(!((n=l==null?void 0:l.headers)===null||n===void 0)&&n[mE]));)g++,await uoe(b),b=b*ooe;if(o+=h,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[mE])!=="active")break;if(i<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await(l==null?void 0:l.json());if(((a=l==null?void 0:l.headers)===null||a===void 0?void 0:a[mE])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function coe(t){return{size:t.size,type:t.type}}function uoe(t){return new Promise(e=>setTimeout(e,t))}class Aoe{async upload(e,r,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await loe(e,r,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await coe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class doe{create(e,r,n){return new foe(e,r,n)}}class foe{constructor(e,r,n){this.url=e,this.headers=r,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GF="x-goog-api-key";class hoe{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(GF)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(GF,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const moe="gl-node/";class bx{constructor(e){var r;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(r=e.vertexai)!==null&&r!==void 0?r:!1,this.apiKey=e.apiKey;const n=vX(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion;const s=new hoe(this.apiKey);this.apiClient=new Lae({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:moe+"web",uploader:new Aoe,downloader:new noe}),this.models=new tie(this.apiClient),this.live=new $ae(this.apiClient,s,new doe),this.batches=new HZ(this.apiClient),this.chats=new qee(this.models,this.apiClient),this.caches=new Vee(this.apiClient),this.files=new ate(this.apiClient),this.operations=new aie(this.apiClient),this.authTokens=new Lie(this.apiClient),this.tunings=new roe(this.apiClient)}}const poe="api_logs",goe=t=>{const e=Yt(kt(vt,poe),Pr("timestamp","desc"));return mr(e,n=>{const s=n.docs.map(a=>{var o,l;const i=a.data();return{id:a.id,...i,timestamp:((l=(o=i.timestamp)==null?void 0:o.toDate)==null?void 0:l.call(o).toISOString())||i.timestamp}});t(s)},n=>{console.error("Error al suscribirse a los logs de API:",n),t([])})},Wl=(t,e)=>{{console.warn("No se pudo registrar la llamada a la API: el objeto de usuario es inválido o no está en sesión.");return}},$h="planificaciones",m1="actividades_calendario",p1="eventos_calendario",Wh=t=>{var r,n,s;const e=t.data();return{id:t.id,...e,fechaCreacion:((s=(n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r))==null?void 0:s.toISOString())||e.fechaCreacion}},aP=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:or.fromDate(new Date),fechaActualizacion:or.fromDate(new Date)};return(await ps(kt(vt,$h),r)).id}catch(r){throw console.error("Error al guardar planificación:",r),new Error("No se pudo guardar la planificación")}},iP=async(t,e,r)=>{try{const n=ur(vt,$h,t),s=await GA(n);if(!s.exists()||s.data().userId!==r)throw new Error("No tienes permisos para actualizar esta planificación");await ip(n,{...e,fechaActualizacion:or.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar planificación:",n),new Error("No se pudo actualizar la planificación")}},oP=async(t,e)=>{try{const r=ur(vt,$h,t),n=await GA(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar esta planificación");await Ta(r)}catch(r){throw console.error("Error al eliminar planificación:",r),new Error("No se pudo eliminar la planificación")}},xoe=async t=>{try{const e=Yt(kt(vt,$h),Xr("userId","==",t),Pr("fechaCreacion","desc"));return(await Cs(e)).docs.map(Wh)}catch(e){return console.error("Error al obtener planificaciones:",e),[]}},voe=async(t,e)=>{try{const r=Yt(kt(vt,$h),Xr("userId","==",t),Xr("tipo","==",e),Pr("fechaCreacion","desc"));return(await Cs(r)).docs.map(Wh)}catch(r){return console.error("Error al obtener planificaciones por tipo:",r),[]}},lP=(t,e)=>{const r=Yt(kt(vt,$h),Xr("userId","==",t),Pr("fechaCreacion","desc"));return mr(r,n=>{const s=n.docs.map(Wh);e(s)},n=>{console.error("Error en suscripción a planificaciones:",n)})},cP=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:or.fromDate(new Date),fechaActualizacion:or.fromDate(new Date)};return(await ps(kt(vt,m1),r)).id}catch(r){throw console.error("Error al guardar actividad:",r),new Error("No se pudo guardar la actividad")}},yoe=async(t,e,r)=>{try{const n=ur(vt,m1,t),s=await GA(n);if(!s.exists()||s.data().userId!==r)throw new Error("No tienes permisos para actualizar esta actividad");await ip(n,{...e,fechaActualizacion:or.fromDate(new Date)})}catch(n){throw console.error("Error al actualizar actividad:",n),new Error("No se pudo actualizar la actividad")}},woe=async(t,e)=>{try{const r=ur(vt,m1,t),n=await GA(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar esta actividad");await Ta(r)}catch(r){throw console.error("Error al eliminar actividad:",r),new Error("No se pudo eliminar la actividad")}},boe=async t=>{try{const e=Yt(kt(vt,m1),Xr("userId","==",t),Pr("fecha","desc"));return(await Cs(e)).docs.map(Wh)}catch(e){return console.error("Error al obtener actividades:",e),[]}},uP=(t,e)=>{const r=Yt(kt(vt,m1),Xr("userId","==",t),Pr("fecha","desc"));return mr(r,n=>{const s=n.docs.map(Wh);e(s)},n=>{console.error("Error en suscripción a actividades:",n)})},AP=async(t,e)=>{try{const r={...t,userId:e,fechaCreacion:or.fromDate(new Date)};return(await ps(kt(vt,p1),r)).id}catch(r){throw console.error("Error al guardar evento:",r),new Error("No se pudo guardar el evento")}},Coe=async(t,e)=>{try{const r=ur(vt,p1,t),n=await GA(r);if(!n.exists()||n.data().userId!==e)throw new Error("No tienes permisos para eliminar este evento");await Ta(r)}catch(r){throw console.error("Error al eliminar evento:",r),new Error("No se pudo eliminar el evento")}},Eoe=async t=>{try{const e=Yt(kt(vt,p1),Xr("userId","==",t),Pr("date","desc"));return(await Cs(e)).docs.map(Wh)}catch(e){return console.error("Error al obtener eventos:",e),[]}},_oe=(t,e)=>{const r=Yt(kt(vt,p1),Xr("userId","==",t),Pr("date","desc"));return mr(r,n=>{const s=n.docs.map(Wh);e(s)},n=>{console.error("Error en suscripción a eventos:",n)})},dP=async(t,e,r,n)=>{try{const s=Yt(kt(vt,p1),Xr("userId","==",t),Xr("date","==",e),Xr("type","==",Yr.ACTIVIDAD_FOCALIZADA),BA(1));return(await Cs(s)).docs.some(i=>{const o=i.data();return o.responsables===r&&o.ubicacion===n})}catch(s){return console.error("Error al verificar evento existente:",s),!1}},Soe=async(t,e)=>{try{const r=zw(vt);for(const n of t){const s=ur(vt,$h,n),a=await GA(s);if(!a.exists()||a.data().userId!==e)throw new Error(`No tienes permisos para eliminar la planificación ${n}`);r.delete(s)}await r.commit()}catch(r){throw console.error("Error en eliminación por lotes:",r),new Error("No se pudieron eliminar todas las planificaciones")}},Toe=Object.freeze(Object.defineProperty({__proto__:null,batchDeletePlanificaciones:Soe,checkEventExists:dP,deleteActividad:woe,deleteCalendarEvent:Coe,deletePlanificacion:oP,getActividadesByUser:boe,getCalendarEventsByUser:Eoe,getPlanificacionesByType:voe,getPlanificacionesByUser:xoe,saveActividad:cP,saveCalendarEvent:AP,savePlanificacion:aP,subscribeToActividades:uP,subscribeToCalendarEvents:_oe,subscribeToPlanificaciones:lP,updateActividad:yoe,updatePlanificacion:iP},Symbol.toStringTag,{value:"Module"})),Noe={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_APP_ID:"1:1022861144167:web:7c277dd701dad5986864c2",VITE_FIREBASE_AUTH_DOMAIN:"planificador-145df.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-LKJRFMVC9F",VITE_FIREBASE_MESSAGING_SENDER_ID:"1022861144167",VITE_FIREBASE_PROJECT_ID:"planificador-145df",VITE_FIREBASE_STORAGE_BUCKET:"planificador-145df.appspot.com",VITE_GEMINI_API_KEY:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",VITE_GOOGLE_AI_API_KEY:void 0},Boe=t=>{const[e,r]=Z.useState([]),[n,s]=Z.useState(!0),[a,i]=Z.useState(null);Z.useEffect(()=>t?lP(t,h=>{r(h),s(!1)}):void 0,[t]);const o=Z.useCallback(async d=>{try{i(null),await aP(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al guardar"),h}},[t]),l=Z.useCallback(async(d,h)=>{try{i(null),await iP(d,h,t)}catch(m){throw i(m instanceof Error?m.message:"Error al actualizar"),m}},[t]),u=Z.useCallback(async d=>{try{i(null),await oP(d,t)}catch(h){throw i(h instanceof Error?h.message:"Error al eliminar"),h}},[t]);return{planificaciones:e,loading:n,error:a,save:o,update:l,remove:u}},koe=t=>{const[e,r]=Z.useState([]),[n,s]=Z.useState(!0),[a,i]=Z.useState(null);Z.useEffect(()=>t?uP(t,u=>{r(u),s(!1)}):void 0,[t]);const o=Z.useCallback(async l=>{try{return i(null),await cP(l,t)}catch(u){throw i(u instanceof Error?u.message:"Error al guardar actividad"),u}},[t]);return{actividades:e,loading:n,error:a,save:o}},Ioe=({lesson:t,onClose:e,onSave:r,isLoading:n=!1})=>{const[s,a]=Z.useState(t),i=l=>{a({...s,[l.target.name]:l.target.value})},o=async()=>{try{await r(s),e()}catch(l){console.error("Error al guardar lección:",l)}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 p-6 border-b dark:border-slate-700",children:"Editar Detalle de Lección"}),c.jsx("div",{className:"p-6 space-y-4 overflow-y-auto",children:Object.entries(s).map(([l,u])=>c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 capitalize mb-1",children:l.replace(/([A-Z])/g," $1")}),c.jsx("textarea",{name:l,value:u,onChange:i,rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:n})]},l))}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Cancelar"}),c.jsxs("button",{onClick:o,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2",disabled:n,children:[n&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})]})]})})},Foe=({plan:t,onEditLesson:e,onUseLesson:r,isLoading:n=!1})=>{const[s,a]=Z.useState(t.progreso??0),[i,o]=Z.useState(!1),l=async u=>{const d=parseInt(u.target.value,10);a(d),o(!0);try{t.id&&await wx(()=>Promise.resolve().then(()=>Toe),void 0).then(h=>h.updatePlanificacion(t.id,{progreso:d},t.autor||""))}catch{alert("Error al guardar el avance")}finally{o(!1)}};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",t.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",t.indicadoresEvaluacion]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Unidad"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"range",min:0,max:100,value:s,onChange:l,disabled:i||n}),c.jsxs("span",{className:"font-bold w-12",children:[s,"%"]}),i&&c.jsx("span",{className:"text-xs text-slate-400",children:"Guardando..."})]})]})]}),c.jsx("div",{className:"space-y-4",children:t.detallesLeccion.map((u,d)=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg",children:[c.jsxs("h4",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:["Clase ",d+1,": ",u.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2 mt-2 text-sm",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo:"})," ",u.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",u.contenidosConceptuales]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",u.habilidadesBloom]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",u.perfilEgreso]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",u.asignaturasInterdisciplinariedad]})]}),c.jsxs("div",{className:"flex gap-2 mt-4",children:[c.jsx("button",{onClick:()=>e(d,u),className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md hover:bg-slate-300 disabled:opacity-50",disabled:n,children:"Editar"}),c.jsx("button",{onClick:()=>r(u,t),className:"text-sm font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 py-1 px-3 rounded-md hover:bg-blue-200 disabled:opacity-50",disabled:n,children:"Usar para Plan de Clase"})]})]},d))})]})},Doe=({plan:t,onBack:e,onSave:r,isLoading:n=!1})=>{const[s,a]=Z.useState(t),[i,o]=Z.useState(!1),[l,u]=Z.useState(t.progreso??0),d=m=>{const{name:g,value:b,type:y}=m.target;if(g==="progreso"){const _=parseInt(b,10);u(_),a(T=>({...T,progreso:_}))}else{const[_,T]=g.split(".");a(_==="momentosClase"?k=>({...k,momentosClase:{...k.momentosClase,[T]:b}}):k=>({...k,[g]:b}))}},h=async()=>{o(!0);try{await r({...s,progreso:l})}catch(m){console.error("Error al guardar plan de clase:",m)}finally{o(!1)}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:t.nombreClase}),c.jsx("button",{onClick:e,className:"text-slate-600 hover:text-slate-900 font-semibold disabled:opacity-50",disabled:n||i,children:"← Volver"})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Inicio"}),c.jsx("textarea",{name:"momentosClase.inicio",value:s.momentosClase.inicio,onChange:d,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Desarrollo"}),c.jsx("textarea",{name:"momentosClase.desarrollo",value:s.momentosClase.desarrollo,onChange:d,rows:8,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),c.jsxs("div",{children:[c.jsx("label",{className:"font-bold text-lg text-slate-700 dark:text-slate-300",children:"Cierre"}),c.jsx("textarea",{name:"momentosClase.cierre",value:s.momentosClase.cierre,onChange:d,rows:4,className:"w-full mt-2 p-2 border rounded-md bg-slate-50 dark:bg-slate-700",disabled:n||i})]}),c.jsxs("div",{className:"mt-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Avance de la Clase"}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"range",min:0,max:100,name:"progreso",value:l,onChange:d,disabled:i||n}),c.jsxs("span",{className:"font-bold w-12",children:[l,"%"]})]})]})]}),c.jsx("div",{className:"text-right mt-6",children:c.jsxs("button",{onClick:h,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:opacity-50 flex items-center gap-2 ml-auto",disabled:n||i,children:[i&&c.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardar Cambios"]})})]})},Roe=({userId:t})=>{const{actividades:e,save:r}=koe(t),[n,s]=Z.useState("list"),[a,i]=Z.useState(null),[o,l]=Z.useState(!1),[u,d]=Z.useState(!1),h={nombre:"",fecha:"",hora:"",descripcion:"",ubicacion:"",participantes:"",recursosGenerales:"",tareas:[{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]},[m,g]=Z.useState(h);Z.useEffect(()=>{n==="summary"&&a&&b()},[n,a,t]);const b=async()=>{if(a)try{const L=await dP(t,a.fecha,a.nombre,a.ubicacion);d(L)}catch(L){console.error("Error al verificar evento en calendario:",L)}},y=L=>{const{name:C,value:E}=L.target;g(B=>({...B,[C]:E}))},_=(L,C,E)=>{g(B=>({...B,tareas:B.tareas.map(O=>O.id===L?{...O,[C]:E}:O)}))},T=()=>{g(L=>({...L,tareas:[...L.tareas,{id:crypto.randomUUID(),descripcion:"",responsable:"",recursos:""}]}))},k=L=>{g(C=>({...C,tareas:C.tareas.filter(E=>E.id!==L)}))},D=async L=>{L.preventDefault(),l(!0);const C=`Basado en la siguiente información de una actividad, genera un objetivo claro y conciso para esta.
    - Nombre: ${m.nombre}
    - Descripción: ${m.descripcion}
    - Tareas: ${m.tareas.map(E=>E.descripcion).join(", ")}
    El objetivo debe ser breve, empezar con un verbo en infinitivo y enfocarse en el propósito principal de la actividad.`;try{Wl("Planificación - Actividad Calendario");const B=await new bx({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:C}),O={...m,objetivo:B.text.replace(/(\*\*|\*)/g,"")},R=await r(O),F={...O,id:R};i(F),s("summary")}catch(E){console.error("Error al generar objetivo con IA:",E),alert("Hubo un error al generar el objetivo. La actividad se guardará sin él.");try{const B={...m,objetivo:"No generado"},O=await r(B),R={...B,id:O};i(R),s("summary")}catch(B){console.error("Error al guardar actividad:",B),alert("Error al guardar la actividad. Por favor, intente nuevamente.")}}finally{l(!1)}},M=async L=>{if(!L)return;const C={date:L.fecha,type:Yr.ACTIVIDAD_FOCALIZADA,responsables:L.nombre,ubicacion:L.ubicacion,horario:L.hora};try{await AP(C,t),d(!0),alert("Actividad añadida al Calendario Académico.")}catch(E){console.error("Error adding to calendar:",E),alert("Hubo un error al agregar la actividad al calendario.")}},P="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white";return n==="form"?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsxs("form",{onSubmit:D,className:"space-y-8",children:[c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold mb-4",children:"Información General"}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("input",{name:"nombre",value:m.nombre,onChange:y,placeholder:"Nombre de la Actividad",className:P,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"fecha",type:"date",value:m.fecha,onChange:y,className:P,required:!0,disabled:o}),c.jsx("input",{name:"hora",type:"time",value:m.hora,onChange:y,className:P,required:!0,disabled:o})]}),c.jsx("textarea",{name:"descripcion",value:m.descripcion,onChange:y,placeholder:"Descripción (objetivos, contenidos, metodología)",rows:4,className:P,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsx("input",{name:"ubicacion",value:m.ubicacion,onChange:y,placeholder:"Ubicación",className:P,required:!0,disabled:o}),c.jsx("input",{name:"participantes",value:m.participantes,onChange:y,placeholder:"Participantes",className:P,required:!0,disabled:o})]}),c.jsx("textarea",{name:"recursosGenerales",value:m.recursosGenerales,onChange:y,placeholder:"Recursos Generales Necesarios",rows:2,className:P,disabled:o})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg dark:border-slate-700",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-bold",children:"Tareas Asociadas"}),c.jsx("button",{type:"button",onClick:T,className:"bg-slate-200 dark:bg-slate-600 text-sm font-semibold px-3 py-1 rounded-md disabled:opacity-50",disabled:o,children:"+ Agregar Tarea"})]}),c.jsx("div",{className:"space-y-4 max-h-60 overflow-y-auto",children:m.tareas.map((L,C)=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md relative",children:[c.jsx("button",{type:"button",onClick:()=>k(L.id),className:"absolute top-1 right-1 text-red-500 text-lg disabled:opacity-50",disabled:o,children:"×"}),c.jsx("textarea",{value:L.descripcion,onChange:E=>_(L.id,"descripcion",E.target.value),placeholder:`Descripción de la Tarea ${C+1}`,rows:2,className:P,required:!0,disabled:o}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-2",children:[c.jsx("input",{value:L.responsable,onChange:E=>_(L.id,"responsable",E.target.value),placeholder:"Responsable",className:P,required:!0,disabled:o}),c.jsx("input",{value:L.recursos,onChange:E=>_(L.id,"recursos",E.target.value),placeholder:"Recursos Necesarios",className:P,disabled:o})]})]},L.id))})]}),c.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 rounded-lg text-center",children:[c.jsx("h3",{className:"font-bold",children:"Objetivo de la Actividad"}),c.jsx("p",{className:"text-sm",children:"Este objetivo se generará automáticamente a partir de la descripción y las tareas ingresadas. Una vez guardada la actividad, podrá revisar y ajustar el objetivo propuesto por el sistema."})]}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{type:"button",onClick:()=>s("list"),className:"bg-slate-200 dark:bg-slate-600 font-semibold px-6 py-2 rounded-lg disabled:opacity-50",disabled:o,children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:o,className:"bg-blue-600 text-white font-bold px-6 py-2 rounded-lg flex items-center min-w-[150px] justify-center disabled:opacity-50",children:o?c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):"Guardar Actividad"})]})]})}):n==="summary"&&a?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 rounded-lg flex items-center gap-4",children:[c.jsx("span",{className:"text-2xl",children:"✓"}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-lg",children:"¡Actividad Planificada con Éxito!"}),c.jsx("p",{className:"text-sm",children:"La actividad ha sido creada. Revisa los detalles a continuación."})]})]}),c.jsxs("div",{className:"border rounded-lg p-6 dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:"Resumen de la Actividad"}),c.jsxs("div",{className:"space-y-4 text-sm",children:[c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Nombre:"}),c.jsx("span",{children:a.nombre})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Fecha y Hora:"}),c.jsx("span",{children:new Date(`${a.fecha}T${a.hora}`).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Descripción:"}),c.jsx("p",{children:a.descripcion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Ubicación:"}),c.jsx("span",{children:a.ubicacion})]}),c.jsxs("div",{className:"flex justify-between border-b pb-2 dark:border-slate-600",children:[c.jsx("strong",{className:"text-slate-500",children:"Participantes:"}),c.jsx("span",{children:a.participantes})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Recursos Necesarios:"}),c.jsx("p",{children:a.recursosGenerales})]}),c.jsxs("div",{className:"border-b pb-2 dark:border-slate-600",children:[c.jsx("p",{className:"font-bold text-slate-500",children:"Objetivo (Generado por IA):"}),c.jsx("p",{children:a.objetivo})]})]}),c.jsxs("div",{className:"mt-6 p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg flex justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:"¿Quieres agregar esta actividad a tu calendario para recibir recordatorios?"}),c.jsx("button",{onClick:()=>M(a),disabled:u,className:`font-bold px-4 py-2 rounded-lg transition-colors ${u?"bg-green-600 text-white cursor-default":"bg-blue-600 text-white hover:bg-blue-700"}`,children:u?"✓ Añadido al Calendario":"Añadir al Calendario"})]})]}),c.jsx("button",{onClick:()=>{s("list"),i(null)},className:"w-full text-center font-semibold text-blue-600 hover:underline",children:"Volver al panel de actividades"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Actividades del Calendario"}),c.jsx("button",{onClick:()=>{s("form"),g(h)},className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Planificar Actividad"})]}),c.jsx("div",{className:"space-y-3",children:e.length>0?e.map(L=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700",children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:L.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[new Date(L.fecha+"T12:00:00").toLocaleDateString("es-CL")," - ",L.ubicacion]})]},L.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades planificadas."})})]})},Loe=({currentUser:t})=>{const e=t.email||t.id||"",{planificaciones:r,save:n,update:s,remove:a,loading:i}=Boe(e),o={asignatura:"",nivel:"",nombreUnidad:"",contenidos:"",cantidadClases:8,observaciones:"",ideasParaUnidad:""},[l,u]=Z.useState(o),[d,h]=Z.useState(null),[m,g]=Z.useState(!1),[b,y]=Z.useState(null),[_,T]=Z.useState("unidad"),[k,D]=Z.useState(null),[M,P]=Z.useState(null),L=Z.useMemo(()=>t.asignaturas||[],[t.asignaturas]),C=Z.useMemo(()=>{const q=t.cursos||[],W=new Set;return q.forEach(ie=>{ie.startsWith("1º")?W.add("1º Medio"):ie.startsWith("2º")?W.add("2º Medio"):ie.startsWith("3º")?W.add("3º Medio"):ie.startsWith("4º")&&W.add("4º Medio")}),Array.from(W)},[t.cursos]);Z.useEffect(()=>{u(q=>({...q,asignatura:L[0]||"",nivel:C[0]||""}))},[L,C]);const E=q=>{const{name:W,value:ie}=q.target;u(j=>({...j,[W]:W==="cantidadClases"?parseInt(ie,10):ie}))},B=()=>{const{asignatura:q,nivel:W,nombreUnidad:ie,contenidos:j,cantidadClases:Y,observaciones:ee,ideasParaUnidad:te}=l;return`Eres un experto diseñador curricular para la educación media técnico profesional en Chile. Tu tarea es generar una planificación de unidad didáctica completa en formato JSON estructurado, basándote en la información proporcionada.

    **Información Base:**
    - Asignatura: ${q}
    - Nivel: ${W}
    - Nombre de la Unidad: "${ie}"
    - Contenidos clave a trabajar (insumo principal): "${j}"
    - Cantidad de clases para la unidad: ${Y}
    - Ideas y perspectiva del docente para la unidad: "${te||"Ninguna. Sé creativo."}"
    - Observaciones y énfasis del docente: "${ee||"Ninguna"}"

    Debes generar un objeto JSON que se ajuste al esquema proporcionado. El JSON debe contener:
    1.  **objetivosAprendizaje**: Un objetivo de aprendizaje general y conciso para la unidad.
    2.  **indicadoresEvaluacion**: Un indicador de evaluación general y observable para la unidad.
    3.  **detallesLeccion**: Un array con EXACTAMENTE ${Y} objetos, donde cada objeto representa una clase o sub-tema de la unidad. Cada objeto en el array debe tener:
        - **objetivosAprendizaje**: Un objetivo de aprendizaje específico para la lección, redactado en infinitivo.
        - **contenidosConceptuales**: Los conceptos clave que se abordarán en la lección.
        - **habilidadesBloom**: La habilidad principal de la Taxonomía de Bloom que se trabajará (ej: Analizar, Crear, Evaluar).
        - **perfilEgreso**: Conecta la lección con una habilidad del perfil de egreso (ej: "Pensamiento crítico", "Colaboración").
        - **actividades**: Sugiere 1 o 2 actividades concretas, indicando el número de clase entre paréntesis (ej: "Debate grupal (Clase 1)").
        - **asignaturasInterdisciplinariedad**: Sugiere una asignatura con la que se podría realizar un trabajo interdisciplinario.

    Asegúrate de que el contenido generado sea coherente, pedagógicamente sólido y esté directamente relacionado con los contenidos clave proporcionados por el docente. El nombre de la unidad debe ser exactamente el proporcionado.`},O=async q=>{if(q.preventDefault(),g(!0),y(null),console.log("🔍 Debug API Key:"),console.log("VITE_GOOGLE_AI_API_KEY:",void 0),console.log("VITE_GEMINI_API_KEY:","AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"),console.log("Todas las variables env:",Noe),!l.contenidos||!l.nombreUnidad){y("Los campos 'Nombre de Unidad' y 'Contenidos Clave' son obligatorios."),g(!1);return}try{Wl("Planificación - Unidad");const W=new bx({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),ie=B(),j={type:xn.OBJECT,properties:{objetivosAprendizaje:{type:xn.STRING},indicadoresEvaluacion:{type:xn.STRING},detallesLeccion:{type:xn.ARRAY,items:{type:xn.OBJECT,properties:{objetivosAprendizaje:{type:xn.STRING},contenidosConceptuales:{type:xn.STRING},habilidadesBloom:{type:xn.STRING},perfilEgreso:{type:xn.STRING},actividades:{type:xn.STRING},asignaturasInterdisciplinariedad:{type:xn.STRING}},required:["objetivosAprendizaje","contenidosConceptuales","habilidadesBloom","perfilEgreso","actividades","asignaturasInterdisciplinariedad"]}}},required:["objetivosAprendizaje","indicadoresEvaluacion","detallesLeccion"]},Y=await W.models.generateContent({model:"gemini-2.5-flash",contents:ie,config:{responseMimeType:"application/json",responseSchema:j}}),ee=JSON.parse(Y.text),te={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Unidad",asignatura:l.asignatura,nivel:l.nivel,nombreUnidad:l.nombreUnidad,contenidos:l.contenidos,cantidadClases:l.cantidadClases,observaciones:l.observaciones,ideasParaUnidad:l.ideasParaUnidad,objetivosAprendizaje:ee.objetivosAprendizaje,indicadoresEvaluacion:ee.indicadoresEvaluacion,detallesLeccion:ee.detallesLeccion};if(d)await s(d.id,te),h({...te,id:d.id});else{const ce=await n(te);h({...te,id:ce})}}catch(W){console.error("Error al generar planificación con IA",W),y("Ocurrió un error al contactar con la IA. Verifique la configuración y reintente.")}finally{g(!1)}},R=async(q,W)=>{g(!0),y(null);const ie=`A partir de la siguiente información de una clase dentro de una unidad, genera un plan de clase detallado con momentos de inicio, desarrollo y cierre. La clase debe durar 80 minutos.
    
    - Asignatura: ${W.asignatura}
    - Nivel: ${W.nivel}
    - Objetivo de la clase: ${q.objetivosAprendizaje}
    - Contenidos: ${q.contenidosConceptuales}
    - Actividades sugeridas: ${q.actividades}
    
    Responde SÓLO con un objeto JSON que contenga las claves "inicio", "desarrollo" y "cierre", con las actividades detalladas para cada momento.`;try{Wl("Planificación - Utilizar Clase");const j=new bx({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),Y={type:xn.OBJECT,properties:{inicio:{type:xn.STRING},desarrollo:{type:xn.STRING},cierre:{type:xn.STRING}},required:["inicio","desarrollo","cierre"]},ee=await j.models.generateContent({model:"gemini-2.5-flash",contents:ie,config:{responseMimeType:"application/json",responseSchema:Y}}),te=JSON.parse(ee.text),ce={fechaCreacion:new Date().toISOString(),autor:t.nombreCompleto,tipo:"Clase",asignatura:W.asignatura,nivel:W.nivel,contenidos:q.contenidosConceptuales,observaciones:"",nombreClase:q.actividades,duracionClase:80,momentosClase:te,detalleLeccionOrigen:q};await n(ce),alert('¡Plan de clase generado y guardado en la pestaña "Clase"!'),T("clase")}catch(j){console.error("Error al generar plan de clase con IA",j),y("No se pudo generar el plan de clase. Inténtelo de nuevo.")}finally{g(!1)}},F=q=>{q.tipo==="Unidad"&&(u({asignatura:q.asignatura,nivel:q.nivel,nombreUnidad:q.nombreUnidad,contenidos:q.contenidos,cantidadClases:q.cantidadClases,observaciones:q.observaciones,ideasParaUnidad:q.ideasParaUnidad||""}),h(q),window.scrollTo({top:0,behavior:"smooth"}))},Q=async q=>{if(window.confirm("¿Está seguro de que desea eliminar esta planificación?"))try{await a(q),(d==null?void 0:d.id)===q&&(h(null),u(o))}catch(W){console.error("Error al eliminar planificación:",W),alert("Error al eliminar la planificación. Por favor, intente nuevamente.")}},H=(q,W)=>{d&&P({planId:d.id,lessonIndex:q,lessonData:W})},ne=async q=>{if(M)try{const{planId:W,lessonIndex:ie}=M,j=r.find(te=>te.id===W&&te.tipo==="Unidad");if(!j)return;const Y=[...j.detallesLeccion];Y[ie]=q;const ee={...j,detallesLeccion:Y};await s(W,ee),h(ee),P(null)}catch(W){console.error("Error al actualizar lección:",W),alert("Error al actualizar la lección. Por favor, intente nuevamente.")}},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",re=()=>c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Generador de Planificaciones de Unidad"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Complete los campos y use la IA para crear una planificación de unidad estructurada."}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsxs("form",{onSubmit:O,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:l.asignatura,onChange:E,className:J,disabled:m,children:L.length>0?L.map(q=>c.jsx("option",{value:q,children:q},q)):c.jsx("option",{disabled:!0,children:"No tiene asignaturas asignadas"})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"nivel",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:l.nivel,onChange:E,className:J,disabled:m,children:C.length>0?C.map(q=>c.jsx("option",{value:q,children:q},q)):c.jsx("option",{disabled:!0,children:"No tiene cursos/niveles asignados"})})]}),c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"nombreUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Nombre de Unidad ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombreUnidad",value:l.nombreUnidad,onChange:E,className:J,placeholder:"Ej: La Célula y sus procesos",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsxs("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Contenidos Clave ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenidos",value:l.contenidos,onChange:E,rows:3,placeholder:"Ingrese los temas, conceptos clave o unidades que la planificación debe abordar.",className:J,disabled:m})]}),c.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[c.jsx("label",{htmlFor:"ideasParaUnidad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ideas para la unidad"}),c.jsx("textarea",{name:"ideasParaUnidad",value:l.ideasParaUnidad,onChange:E,rows:3,placeholder:"Plantea tus ideas y perspectiva para que la IA construya una mejor planificación (ej: enfocar en trabajo colaborativo, usar casos prácticos, conectar con la actualidad).",className:J,disabled:m})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cantidadClases",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cantidad de Clases"}),c.jsx("input",{type:"number",name:"cantidadClases",value:l.cantidadClases,onChange:E,className:J,min:"1",max:"20",disabled:m})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones (Énfasis)"}),c.jsx("textarea",{name:"observaciones",value:l.observaciones,onChange:E,rows:1,placeholder:"Ej: clase práctica, modelo ABP, juego, reforzamiento...",className:J,disabled:m})]})]}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:m||i,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[150px] dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:m?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):d?"Regenerar":"Generar Plan"})}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:b})]})]}),d&&c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Revisión y Edición"}),c.jsx(Foe,{plan:d,onEditLesson:H,onUseLesson:R,isLoading:m})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Planificaciones de Unidad"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:r.filter(q=>q.tipo==="Unidad").length>0?r.filter(q=>q.tipo==="Unidad").map(q=>c.jsx("div",{className:`p-4 border rounded-lg ${(d==null?void 0:d.id)===q.id?"bg-amber-50 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:q.nombreUnidad}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(q.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",q.contenidos]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>F(q),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm disabled:opacity-50",disabled:m,children:"Ver y Editar"}),c.jsx("button",{onClick:()=>Q(q.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 disabled:opacity-50",disabled:m,children:"🗑️"})]})]})},q.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No hay planificaciones de unidad guardadas."})})]})]}),G=()=>{const q=r.filter(W=>W.tipo==="Clase").sort((W,ie)=>new Date(ie.fechaCreacion).getTime()-new Date(W.fechaCreacion).getTime());return k?c.jsx(Doe,{plan:k,onBack:()=>D(null),onSave:async W=>{try{await s(W.id,W),D(W)}catch(ie){console.error("Error al actualizar plan de clase:",ie),alert("Error al actualizar el plan de clase. Por favor, intente nuevamente.")}},isLoading:m}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Planes de Clase Guardados"}),i?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsx("div",{className:"w-8 h-8 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):c.jsx("div",{className:"space-y-4",children:q.length>0?q.map(W=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:W.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(W.fechaCreacion).toLocaleString("es-CL")]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Contenidos: ",W.contenidos]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("button",{onClick:()=>D(W),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver Plan de Clase"})})]},W.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-6",children:"No hay planes de clase guardados. Puede generarlos desde una unidad en la pestaña 'Unidad'."})})]})};return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Planificación"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>T("unidad"),className:`${_==="unidad"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Unidad"}),c.jsx("button",{onClick:()=>T("clase"),className:`${_==="clase"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Clase"}),c.jsx("button",{onClick:()=>T("calendario"),className:`${_==="calendario"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:"Actividades Calendario"})]})}),_==="unidad"&&re(),_==="clase"&&G(),_==="calendario"&&c.jsx(Roe,{userId:e}),M&&c.jsx(Ioe,{lesson:M.lessonData,onClose:()=>P(null),onSave:ne,isLoading:m})]})},Yw="events",Uoe=async()=>{try{const t=Yt(kt(Zr,Yw),Pr("date","asc"));return(await Cs(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener eventos:",t),new Error("No se pudieron cargar los eventos del calendario")}},Moe=async t=>{try{return{id:(await ps(kt(Zr,Yw),{...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear evento:",e),new Error("No se pudo crear el evento del calendario")}},Poe=async(t,e)=>{try{const r=ur(Zr,Yw,t);await ip(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar evento:",r,"ID:",t),new Error("No se pudo actualizar el evento del calendario")}},joe=async t=>{try{const e=ur(Zr,Yw,t);await Ta(e)}catch(e){throw console.error("Error al eliminar evento:",e,"ID:",t),new Error("No se pudo eliminar el evento del calendario")}},Ooe=["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"],Qoe=t=>{switch(t.type){case Yr.EVALUACION:return`${t.subtype} - ${t.asignatura}`;case Yr.ACTO:return`Acto: ${t.ubicacion}`;case Yr.ACTIVIDAD_FOCALIZADA:return"Actividad Focalizada";case Yr.SALIDA_PEDAGOGICA:return`Salida: ${t.ubicacion}`;default:return"Evento"}},Hoe=({isOpen:t,onClose:e,onSave:r,onDelete:n,event:s,date:a,isLoading:i})=>{const[o,l]=Z.useState({});Z.useEffect(()=>{l(s||{type:Yr.EVALUACION,subtype:lh.PRUEBA_PARCIAL,asignatura:ol[0],curso:ca[0],contenidos:"",enlace:"",responsables:"",ubicacion:"",horario:"",responsable:"",cursos:[]})},[s,t]);const u="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",d=y=>{const{name:_,value:T}=y.target;l(k=>({...k,[_]:T}))},h=y=>{l(_=>{if(_.type===Yr.SALIDA_PEDAGOGICA){const T=_.cursos||[],k=T.includes(y)?T.filter(D=>D!==y):[...T,y];return{..._,cursos:k.sort()}}return _})},m=y=>{var T;y.preventDefault();let _;switch(o.type){case Yr.EVALUACION:const k={date:a,type:Yr.EVALUACION,subtype:o.subtype,asignatura:o.asignatura,curso:o.curso,contenidos:o.contenidos};(o.subtype===lh.RUBRICA||o.subtype===lh.PAUTA_COTEJO)&&((T=o.enlace)!=null&&T.trim())&&(k.enlace=o.enlace.trim()),_=k;break;case Yr.ACTO:_={date:a,type:Yr.ACTO,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Yr.ACTIVIDAD_FOCALIZADA:_={date:a,type:Yr.ACTIVIDAD_FOCALIZADA,responsables:o.responsables,ubicacion:o.ubicacion,horario:o.horario};break;case Yr.SALIDA_PEDAGOGICA:_={date:a,type:Yr.SALIDA_PEDAGOGICA,responsable:o.responsable,ubicacion:o.ubicacion,cursos:o.cursos};break;default:console.error("Tipo de evento no reconocido");return}r(_)};if(!t)return null;const g=new Date(`${a}T12:00:00`).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"}),b=()=>{switch(o.type){case Yr.EVALUACION:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subtype",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subtipo"}),c.jsx("select",{id:"subtype",name:"subtype",value:o.subtype,onChange:d,required:!0,className:u,children:XY.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsx("select",{id:"asignatura",name:"asignatura",value:o.asignatura,onChange:d,required:!0,className:u,children:ol.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{id:"curso",name:"curso",value:o.curso,onChange:d,required:!0,className:u,children:ca.map(y=>c.jsx("option",{value:y,children:y},y))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenidos",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenidos"}),c.jsx("textarea",{id:"contenidos",name:"contenidos",value:o.contenidos||"",onChange:d,required:!0,rows:3,className:u})]}),(o.subtype===lh.RUBRICA||o.subtype===lh.PAUTA_COTEJO)&&c.jsxs("div",{children:[c.jsx("label",{htmlFor:"enlace",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace al Documento (URL)"}),c.jsx("input",{id:"enlace",name:"enlace",type:"url",value:o.enlace||"",onChange:d,placeholder:"https://...",className:u})]})]});case Yr.ACTO:case Yr.ACTIVIDAD_FOCALIZADA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsables",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsables"}),c.jsx("input",{id:"responsables",name:"responsables",type:"text",value:o.responsables||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"horario",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Horario"}),c.jsx("input",{id:"horario",name:"horario",type:"text",value:o.horario||"",onChange:d,required:!0,className:u})]})]});case Yr.SALIDA_PEDAGOGICA:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"responsable",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Responsable"}),c.jsx("input",{id:"responsable",name:"responsable",type:"text",value:o.responsable||"",onChange:d,required:!0,className:u})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ubicacion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Ubicación/Destino"}),c.jsx("input",{id:"ubicacion",name:"ubicacion",type:"text",value:o.ubicacion||"",onChange:d,required:!0,className:u})]}),c.jsxs("fieldset",{children:[c.jsx("legend",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cursos Involucrados"}),c.jsx("div",{className:"max-h-32 overflow-y-auto grid grid-cols-3 sm:grid-cols-4 gap-2 border p-2 rounded-md dark:border-slate-600 text-slate-700 dark:text-slate-300",children:ca.map(y=>c.jsxs("label",{className:"flex items-center space-x-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:(o.cursos||[]).includes(y),onChange:()=>h(y),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:y})]},y))})]})]});default:return null}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:e,children:c.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg animate-fade-in-up",onClick:y=>y.stopPropagation(),children:c.jsxs("form",{onSubmit:m,children:[c.jsxs("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:s?"Editar Evento":"Agregar Evento"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6 font-semibold",children:g}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Evento"}),c.jsx("select",{id:"type",name:"type",value:o.type,onChange:d,className:u,children:Object.values(Yr).map(y=>c.jsx("option",{value:y,children:y},y))})]}),b()]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[c.jsx("div",{children:s&&n&&c.jsx("button",{type:"button",onClick:n,disabled:i,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold disabled:opacity-50",children:i?"Eliminando...":"Eliminar"})}),c.jsxs("div",{className:"flex gap-3",children:[c.jsx("button",{type:"button",onClick:e,disabled:i,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500 disabled:opacity-50",children:"Cancelar"}),c.jsx("button",{type:"submit",disabled:i,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600 disabled:opacity-50",children:i?"Guardando...":"Guardar"})]})]})]})})})},Voe=({profile:t})=>{const[e,r]=Z.useState(new Date),[n,s]=Z.useState([]),[a,i]=Z.useState(!1),[o,l]=Z.useState(null),[u,d]=Z.useState(!1),[h,m]=Z.useState(Object.values(Yr)),[g,b]=Z.useState(!1),[y,_]=Z.useState(null),[T,k]=Z.useState(null),D=Z.useCallback(async()=>{i(!0);try{const R=await Uoe();s(R),l(null)}catch(R){console.error("Error al cargar eventos desde Firestore",R),l("No se pudieron cargar los eventos desde la nube.")}finally{i(!1)}},[]);Z.useEffect(()=>{D()},[D]);const M=Z.useMemo(()=>{const R=e.getFullYear(),F=e.getMonth(),Q=new Date(R,F,1).getDay(),H=new Date(R,F+1,0).getDate(),ne=[];let J=1;for(let re=0;re<6;re++){const G=[];for(let q=0;q<7;q++)re===0&&q<Q||J>H?G.push(null):(G.push(new Date(R,F,J)),J++);if(ne.push(G),J>H)break}return ne},[e]),P=R=>{m(F=>F.includes(R)?F.filter(Q=>Q!==R):[...F,R])},L=()=>{h.length===Object.values(Yr).length?m([]):m(Object.values(Yr))},C=R=>{t!==jt.ESTUDIANTE&&(_(R.toISOString().split("T")[0]),k(null),b(!0))},E=(R,F)=>{F.stopPropagation(),t!==jt.ESTUDIANTE&&(_(R.date),k(R),b(!0))},B=async R=>{d(!0);try{T?await Poe(T.id,R):await Moe(R),await D(),b(!1)}catch(F){console.error("Error al guardar evento:",F);const Q=F instanceof Error?F.message:"Error desconocido";l(`Error al guardar el evento: ${Q}`)}finally{d(!1)}},O=async()=>{if(T){d(!0);try{await joe(T.id),await D(),b(!1)}catch(R){console.error("Error al eliminar evento:",R);const F=R instanceof Error?R.message:"Error desconocido";l(`No se pudo eliminar el evento: ${F}`)}finally{d(!1)}}};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Calendario Académico"}),a&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando eventos desde la nube..."}),o&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:o}),!a&&n.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay eventos registrados en la nube."}),c.jsx("div",{className:"mb-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsx("p",{className:"text-sm",children:"Recuerda que el calendario escolar completo se encuentra disponible en la intranet. Este calendario es de exclusivo uso evaluativo y académico."})})]})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300 mb-3",children:"Filtrar por tipo de evento:"}),c.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[c.jsx("button",{onClick:L,className:"text-sm font-semibold px-3 py-1.5 rounded-full bg-slate-700 text-white hover:bg-slate-600 dark:bg-slate-600 dark:hover:bg-slate-500 transition-colors",children:h.length===Object.values(Yr).length?"Deseleccionar Todos":"Seleccionar Todos"}),Object.values(Yr).map(R=>c.jsxs("label",{className:`cursor-pointer text-sm font-medium px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-2 ${h.includes(R)?`shadow-sm ${qd[R].color}`:"bg-slate-100 text-slate-600 hover:bg-slate-200 opacity-70 dark:bg-slate-700 dark:text-slate-300 dark:hover:bg-slate-600 dark:opacity-60"}`,children:[c.jsx("input",{type:"checkbox",checked:h.includes(R),onChange:()=>P(R),className:"hidden"}),c.jsx("span",{children:qd[R].icon}),c.jsx("span",{children:qd[R].label})]},R))]})]}),c.jsxs("div",{className:"border dark:border-slate-700 rounded-lg overflow-hidden",children:[c.jsxs("header",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-700/50 border-b dark:border-slate-700",children:[c.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()-1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:"<"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize",children:e.toLocaleString("es-CL",{month:"long",year:"numeric"})}),c.jsx("button",{onClick:()=>r(new Date(e.setMonth(e.getMonth()+1))),className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300",children:">"}),c.jsx("button",{onClick:()=>r(new Date),className:"ml-4 bg-slate-800 text-white text-sm font-bold py-1.5 px-3 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Hoy"})]}),c.jsx("div",{className:"grid grid-cols-7",children:Ooe.map(R=>c.jsx("div",{className:"text-center font-semibold text-slate-500 dark:text-slate-400 text-sm py-3 bg-slate-50 dark:bg-slate-700/50 border-b border-r dark:border-slate-700",children:R},R))}),c.jsx("div",{className:"grid grid-cols-7 grid-rows-6",children:M.flat().map((R,F)=>{const Q=R&&R.toDateString()===new Date().toDateString(),H=R==null?void 0:R.toISOString().split("T")[0],ne=H?n.filter(J=>J.date===H&&h.includes(J.type)):[];return c.jsx("div",{onClick:()=>R&&C(R),className:`border-b border-r dark:border-slate-700 p-2 h-36 flex flex-col overflow-hidden relative group ${R?t!==jt.ESTUDIANTE?"cursor-pointer hover:bg-slate-50 dark:hover:bg-slate-700/50":"":"bg-slate-50 dark:bg-slate-800/50"}`,children:R&&c.jsxs(c.Fragment,{children:[c.jsx("span",{className:`self-end text-sm font-semibold ${Q?"bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center":"text-slate-600 dark:text-slate-300"}`,children:R.getDate()}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-1 mt-1 pr-1",children:ne.map(J=>c.jsxs("div",{onClick:re=>E(J,re),className:`text-xs font-medium p-1 rounded-md flex items-center gap-1.5 truncate ${qd[J.type].color}`,children:[c.jsx("span",{children:qd[J.type].icon}),c.jsx("span",{className:"truncate",children:Qoe(J)})]},J.id))}),t!==jt.ESTUDIANTE&&c.jsx("button",{className:"absolute bottom-1 right-1 bg-amber-400 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity text-lg font-bold",children:"+"})]})},F)})})]}),g&&c.jsx(Hoe,{isOpen:g,onClose:()=>b(!1),onSave:B,onDelete:O,event:T,date:y,isLoading:u})]})},Jw="anuncios",zoe=async()=>{try{const t=Yt(kt(Zr,Jw),Pr("fechaPublicacion","desc"));return(await Cs(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener anuncios:",t),new Error("No se pudieron cargar los anuncios")}},Goe=async t=>{try{return{id:(await ps(kt(Zr,Jw),{...t,fechaPublicacion:t.fechaPublicacion||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear anuncio:",e),new Error("No se pudo crear el anuncio")}},qoe=async(t,e)=>{try{const r=ur(Zr,Jw,t);await ip(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar anuncio:",r,"ID:",t),new Error("No se pudo actualizar el anuncio")}},Koe=async t=>{try{const e=ur(Zr,Jw,t);await Ta(e)}catch(e){throw console.error("Error al eliminar anuncio:",e,"ID:",t),new Error("No se pudo eliminar el anuncio")}},qF=[{bg:"bg-yellow-200 dark:bg-yellow-800/50",rotate:"transform -rotate-2"},{bg:"bg-lime-200 dark:bg-lime-800/50",rotate:"transform rotate-1"},{bg:"bg-sky-200 dark:bg-sky-800/50",rotate:"transform rotate-2"},{bg:"bg-red-200 dark:bg-red-800/50",rotate:"transform -rotate-1"},{bg:"bg-violet-200 dark:bg-violet-800/50",rotate:"transform rotate-1"}],$oe=({currentUser:t})=>{const[e,r]=Z.useState([]),[n,s]=Z.useState(!1),[a,i]=Z.useState(null),[o,l]=Z.useState({titulo:"",mensaje:"",adjunto:""}),[u,d]=Z.useState({tipo:"Todos",cursos:[]}),h=Z.useCallback(async()=>{s(!0);try{const C=await zoe();r(C),i(null)}catch(C){console.error("Error al cargar anuncios desde Firestore",C),i("No se pudieron cargar los anuncios desde la nube.")}finally{s(!1)}},[]);Z.useEffect(()=>{h()},[h]);const m=C=>{const{name:E,value:B}=C.target;l(O=>({...O,[E]:B}))},g=C=>{d({tipo:C,cursos:C==="Cursos"?[]:void 0})},b=C=>{d(E=>{var O;if(E.tipo!=="Cursos")return E;const B=(O=E.cursos)!=null&&O.includes(C)?E.cursos.filter(R=>R!==C):[...E.cursos||[],C];return{...E,cursos:B}})},y=async C=>{if(C.preventDefault(),!o.titulo||!o.mensaje){alert("Título y mensaje son obligatorios.");return}if(u.tipo==="Cursos"&&(!u.cursos||u.cursos.length===0)){alert('Debe seleccionar al menos un curso para el destinatario "Cursos".');return}try{const E={fechaPublicacion:new Date().toISOString(),destacado:!1,autor:t.nombreCompleto,profileCreador:t.profile,destinatarios:u,...o};await Goe(E),await h(),l({titulo:"",mensaje:"",adjunto:""}),d({tipo:"Todos",cursos:[]})}catch(E){console.error("Error al crear anuncio:",E),i("Error al publicar el anuncio en la nube.")}},_=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este anuncio?"))try{await Koe(C),await h()}catch(E){console.error("Error al eliminar anuncio:",E),i("No se pudo eliminar el anuncio en la nube.")}},T=async C=>{try{const E=e.find(B=>B.id===C);E&&(await qoe(C,{destacado:!E.destacado}),await h())}catch(E){console.error("Error al actualizar anuncio:",E),i("No se pudo actualizar el estado del anuncio en la nube.")}},k=Z.useMemo(()=>[...e].sort((C,E)=>C.destacado&&!E.destacado?-1:!C.destacado&&E.destacado?1:new Date(E.fechaPublicacion).getTime()-new Date(C.fechaPublicacion).getTime()),[e]),D=Z.useMemo(()=>{const C=t.profile,E=t.curso;return k.filter(B=>{if(C===jt.SUBDIRECCION)return!0;if(!B.destinatarios)return C!==jt.ESTUDIANTE;const{tipo:O,cursos:R}=B.destinatarios;return O==="Todos"||O==="Profesores"&&C===jt.PROFESORADO||O==="Coordinación TP"&&C===jt.COORDINACION_TP?!0:O==="Cursos"?C===jt.ESTUDIANTE?R==null?void 0:R.includes(E||""):!0:!1})},[k,t]),M=C=>t.profile===jt.ESTUDIANTE?!1:t.profile===jt.SUBDIRECCION||t.profile===C.profileCreador,P=()=>t.profile===jt.SUBDIRECCION||t.profile===jt.PROFESORADO,L="w-full border-slate-300 rounded-md shadow-sm focus:ring-amber-400 focus:border-amber-400 dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Muro de Anuncios"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando anuncios desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),t.profile!==jt.ESTUDIANTE?c.jsxs(c.Fragment,{children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Publique un nuevo anuncio para toda la comunidad escolar."}),c.jsxs("form",{onSubmit:y,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"titulo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Título"}),c.jsx("input",{type:"text",name:"titulo",value:o.titulo,onChange:m,required:!0,className:L})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"mensaje",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Mensaje"}),c.jsx("textarea",{name:"mensaje",value:o.mensaje,onChange:m,required:!0,rows:4,className:L})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Destinatarios"}),c.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:["Todos","Cursos","Profesores","Coordinación TP"].map(C=>c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[c.jsx("input",{type:"radio",name:"destinatarioTipo",value:C,checked:u.tipo===C,onChange:()=>g(C),className:"h-4 w-4 text-amber-600 focus:ring-amber-500 border-slate-300"}),c.jsx("span",{className:"text-slate-700 dark:text-slate-300",children:C.replace("Coordinación TP","Coord. TP")})]},C))})]}),u.tipo==="Cursos"&&c.jsxs("div",{className:"p-4 border rounded-md bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Cursos"}),c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 max-h-48 overflow-y-auto",children:ca.map(C=>{var E;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(E=u.cursos)==null?void 0:E.includes(C),onChange:()=>b(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400 border-slate-300 bg-slate-100"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:C})]},C)})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"adjunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Enlace adjunto (Opcional)"}),c.jsx("input",{type:"url",name:"adjunto",value:o.adjunto,onChange:m,placeholder:"https://ejemplo.com/documento.pdf",className:L})]}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500 transition-all duration-200 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Publicar Anuncio"})})]})]}):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Anuncios de la comunidad escolar. Este módulo es de solo lectura."})]}),!n&&D.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay anuncios para mostrar en la nube."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-8 py-4",children:!n&&D.length>0&&D.map((C,E)=>{const B=qF[E%qF.length];return c.jsxs("div",{className:`font-handwritten text-slate-800 dark:text-slate-200 shadow-xl p-4 flex flex-col relative transition-transform duration-300 ease-in-out hover:scale-105 hover:rotate-0 hover:z-10 ${B.bg} ${B.rotate}`,children:[C.destacado&&c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2",children:c.jsx("span",{className:"text-5xl",role:"img","aria-label":"Anuncio destacado",children:"📌"})}),c.jsx("h2",{className:"text-3xl font-bold border-b-2 border-slate-500/30 dark:border-slate-400/30 pb-2 mb-4 break-words",children:C.titulo}),c.jsx("p",{className:"flex-grow text-2xl whitespace-pre-wrap mb-4 break-words min-h-[100px]",children:C.mensaje}),C.adjunto&&c.jsx("div",{className:"font-sans text-sm mb-4",children:c.jsxs("a",{href:C.adjunto,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 font-semibold text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),"Ver Adjunto"]})}),c.jsxs("div",{className:"font-sans text-xs mt-auto pt-2 border-t border-slate-500/30 dark:border-slate-400/30 flex justify-between items-end",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold",children:C.autor}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:new Date(C.fechaPublicacion).toLocaleString("es-CL")})]}),c.jsxs("div",{className:"flex items-center",children:[P()&&c.jsx("button",{onClick:()=>T(C.id),title:C.destacado?"Desfijar":"Fijar",className:"p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("span",{className:`text-xl transition-opacity ${C.destacado?"opacity-100":"opacity-30"}`,children:"📌"})}),M(C)&&c.jsx("button",{onClick:()=>_(C.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded-full transition-colors",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]},C.id)})})]})},j4="actas_de_reunion",Woe=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},Yoe=t=>{const e=Yt(kt(vt,j4),Pr("fechaCreacion","desc"));return mr(e,n=>{const s=n.docs.map(a=>Woe(a));t(s)},n=>{console.error("Error al suscribirse a las actas:",n),t([])})},Joe=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:or.fromDate(new Date(t.fechaCreacion))};return(await ps(kt(vt,j4),r)).id}catch(r){throw console.error("Error al crear el acta:",r),new Error("No se pudo crear el acta.")}},Xoe=async t=>{try{const e=ur(vt,j4,t);await Ta(e)}catch(e){throw console.error("Error al eliminar el acta:",e),new Error("No se pudo eliminar el acta.")}},fP=window.SpeechRecognition||window.webkitSpeechRecognition,KF=!!fP,Zoe=({isListening:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"}):c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"})}),ele=({currentUser:t})=>{const[e,r]=Z.useState([]),[n,s]=Z.useState(null),[a,i]=Z.useState({tipoReunion:dE[0],asistentes:"",textoReunion:""}),[o,l]=Z.useState(!1),[u,d]=Z.useState(!1),[h,m]=Z.useState(!0),[g,b]=Z.useState(null),y=Z.useRef(null);Z.useEffect(()=>{m(!0);const C=Yoe(E=>{r(E),!n&&E.length>0&&s(E[0]),m(!1)});return()=>C()},[n]);const _=C=>{const{name:E,value:B}=C.target;i(O=>({...O,[E]:B}))},T=Z.useCallback(()=>{var C;if(!KF){b("El reconocimiento de voz no es compatible con este navegador.");return}o?(C=y.current)==null||C.stop():(y.current=new fP,y.current.lang="es-CL",y.current.continuous=!0,y.current.interimResults=!0,y.current.onresult=E=>{let B="";for(let O=E.resultIndex;O<E.results.length;++O)E.results[O].isFinal&&(B+=E.results[O][0].transcript+". ");i(O=>({...O,textoReunion:O.textoReunion+B}))},y.current.onstart=()=>l(!0),y.current.onend=()=>l(!1),y.current.onerror=E=>{console.error("Speech recognition error",E.error),b(`Error de reconocimiento: ${E.error}`),l(!1)},y.current.start())},[o]),k=async C=>{C.preventDefault();const{tipoReunion:E,asistentes:B,textoReunion:O}=a;if(!E||!B.trim()||!O.trim()){b("Todos los campos son obligatorios.");return}d(!0),b(null);try{Wl("Generador de Actas");const R="",Q=new globalThis.GoogleGenerativeAI(R).getGenerativeModel({model:"gemini-pro"}),H=`
                Analiza el siguiente texto de un acta de reunión y extrae la información clave.
                El texto es una transcripción de lo hablado.
                - Identifica los temas principales discutidos.
                - Extrae un resumen de los acuerdos o decisiones específicas tomadas.
                - Lista cualquier plazo o fecha límite mencionada.
                - Identifica los nombres de las personas a las que se les asignaron responsabilidades o tareas.
                
                Texto del acta:
                "${O}"
                
                Asistentes a la reunión para referencia de nombres: ${B}
            `,G=(await(await Q.generateContent(H)).response).text().replace(/^```json\s*|```\s*$/g,""),q=JSON.parse(G),W={fechaCreacion:new Date().toISOString(),...a,...q},ie=await Joe(W,t);i({tipoReunion:dE[0],asistentes:"",textoReunion:""})}catch(R){console.error("Error al analizar acta con IA:",R),b("Ocurrió un error al procesar el acta con la IA. Por favor, revise el texto e inténtelo de nuevo.")}finally{d(!1)}},D=async C=>{if(window.confirm("¿Está seguro de que desea eliminar esta acta?"))try{await Xoe(C),(n==null?void 0:n.id)===C&&s(e.length>1?e[1]:null)}catch(E){console.error("Error deleting acta:",E),alert("No se pudo eliminar el acta.")}},M=C=>{s(C)},P=C=>C.temas||C.acuerdos||C.plazos||C.responsables?c.jsxs("div",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Análisis con IA"}),C.temas&&C.temas.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Temas Tratados"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.temas.map((B,O)=>c.jsx("li",{children:B},O))})]}),C.acuerdos&&C.acuerdos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Acuerdos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.acuerdos.map((B,O)=>c.jsx("li",{children:B},O))})]}),C.plazos&&C.plazos.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Plazos"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.plazos.map((B,O)=>c.jsx("li",{children:B},O))})]}),C.responsables&&C.responsables.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsx("h3",{className:"font-semibold text-lg text-slate-700 dark:text-slate-300",children:"Responsables"}),c.jsx("ul",{className:"list-disc list-inside text-slate-600 dark:text-slate-400 mt-2 space-y-1",children:C.responsables.map((B,O)=>c.jsx("li",{children:B},O))})]})]}):null,L="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400";return h?c.jsx("div",{className:"text-center py-10",children:"Cargando actas..."}):c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 animate-fade-in",children:[c.jsxs("div",{className:"md:col-span-1 space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generador de Actas"}),c.jsx("div",{className:"mb-6 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-300 rounded-r-lg",children:c.jsxs("div",{className:"flex",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:c.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 3.001-1.742 3.001H4.42c-1.53 0-2.493-1.667-1.743-3.001l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.008a1 1 0 011 1v3.008a1 1 0 01-1 1h-.008a1 1 0 01-1-1V5z",clipRule:"evenodd"})})}),c.jsx("div",{className:"ml-3",children:c.jsxs("p",{className:"text-sm",children:["Recuerda que las actas debes subirlas por intranet en ",c.jsx("strong",{className:"font-semibold",children:"www.industrialderecoleta.cl"}),". Esta es sólo una herramienta para agilizar redacción."]})})]})}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"tipoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Tipo de Reunión"}),c.jsx("select",{name:"tipoReunion",value:a.tipoReunion,onChange:_,required:!0,className:L,children:dE.map(C=>c.jsx("option",{value:C,children:C},C))})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asistentes",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asistentes"}),c.jsx("textarea",{name:"asistentes",value:a.asistentes,onChange:_,required:!0,rows:3,placeholder:"Nombres, separados por comas...",className:L})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"textoReunion",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Texto de la Reunión"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{name:"textoReunion",value:a.textoReunion,onChange:_,required:!0,rows:6,placeholder:"Escriba o use el micrófono para dictar...",className:L}),KF&&c.jsx("button",{type:"button",onClick:T,title:o?"Detener grabación":"Iniciar grabación",className:`absolute top-2 right-2 p-2 rounded-full transition-colors ${o?"bg-red-500 text-white animate-pulse":"bg-slate-200 hover:bg-slate-300 text-slate-700 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500"}`,children:c.jsx(Zoe,{isListening:o})})]})]}),g&&c.jsx("p",{className:"text-red-600 bg-red-100 dark:bg-red-900/40 dark:text-red-300 p-3 rounded-md mt-4",children:g}),c.jsx("div",{className:"pt-2 text-right",children:c.jsx("button",{type:"submit",disabled:u,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 flex items-center justify-center min-w-[120px] disabled:bg-slate-400 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:u?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Crear Acta"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Actas"}),c.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2 pr-2",children:e.length>0?e.map(C=>c.jsxs("button",{onClick:()=>M(C),className:`w-full text-left p-3 rounded-lg border transition-colors ${(n==null?void 0:n.id)===C.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/20 dark:border-amber-500/50":"bg-slate-50 hover:bg-slate-100 border-transparent dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.tipoReunion}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:new Date(C.fechaCreacion).toLocaleDateString("es-CL")})]},C.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm",children:"No hay actas guardadas."})})]})]}),c.jsx("div",{className:"md:col-span-2 bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md",children:n?c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold mt-0",children:`Acta de Reunión: ${n.tipoReunion}`}),c.jsx("button",{onClick:()=>D(n.id),title:"Eliminar Acta",className:"text-red-500 hover:text-red-700 p-2 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40 -mt-2 -mr-2",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[c.jsx("strong",{children:"Fecha:"})," ",new Date(n.fechaCreacion).toLocaleString("es-CL")]}),c.jsx("h2",{children:"Asistentes"}),c.jsx("ul",{className:"list-disc pl-5",children:String(n.asistentes||"").split(",").map((C,E)=>C.trim()&&c.jsx("li",{children:C.trim()},E))}),P(n),c.jsx("h2",{className:"mt-8 pt-6 border-t dark:border-slate-600",children:"Transcripción Original"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-md whitespace-pre-wrap",children:c.jsx("p",{children:n.textoReunion})})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📄"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-700 dark:text-slate-300",children:"Seleccione un Acta"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Elija un acta del historial para ver sus detalles aquí, o cree una nueva usando el formulario."})]})})]})};function qn(t){"@babel/helpers - typeof";return qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(t)}var Vi=Uint8Array,al=Uint16Array,O4=Int32Array,Xw=new Vi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Zw=new Vi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hS=new Vi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),hP=function(t,e){for(var r=new al(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new O4(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)s[a]=a-r[n]<<5|n;return{b:r,r:s}},mP=hP(Xw,2),pP=mP.b,mS=mP.r;pP[28]=258,mS[258]=28;var gP=hP(Zw,0),tle=gP.b,$F=gP.r,pS=new al(32768);for(var fs=0;fs<32768;++fs){var Id=(fs&43690)>>1|(fs&21845)<<1;Id=(Id&52428)>>2|(Id&13107)<<2,Id=(Id&61680)>>4|(Id&3855)<<4,pS[fs]=((Id&65280)>>8|(Id&255)<<8)>>1}var Du=function(t,e,r){for(var n=t.length,s=0,a=new al(e);s<n;++s)t[s]&&++a[t[s]-1];var i=new al(e);for(s=1;s<e;++s)i[s]=i[s-1]+a[s-1]<<1;var o;if(r){o=new al(1<<e);var l=15-e;for(s=0;s<n;++s)if(t[s])for(var u=s<<4|t[s],d=e-t[s],h=i[t[s]-1]++<<d,m=h|(1<<d)-1;h<=m;++h)o[pS[h]>>l]=u}else for(o=new al(n),s=0;s<n;++s)t[s]&&(o[s]=pS[i[t[s]-1]++]>>15-t[s]);return o},wf=new Vi(288);for(var fs=0;fs<144;++fs)wf[fs]=8;for(var fs=144;fs<256;++fs)wf[fs]=9;for(var fs=256;fs<280;++fs)wf[fs]=7;for(var fs=280;fs<288;++fs)wf[fs]=8;var Cx=new Vi(32);for(var fs=0;fs<32;++fs)Cx[fs]=5;var rle=Du(wf,9,0),nle=Du(wf,9,1),sle=Du(Cx,5,0),ale=Du(Cx,5,1),pE=function(t){for(var e=t[0],r=1;r<t.length;++r)t[r]>e&&(e=t[r]);return e},wc=function(t,e,r){var n=e/8|0;return(t[n]|t[n+1]<<8)>>(e&7)&r},gE=function(t,e){var r=e/8|0;return(t[r]|t[r+1]<<8|t[r+2]<<16)>>(e&7)},Q4=function(t){return(t+7)/8|0},xP=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new Vi(t.subarray(e,r))},ile=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],_c=function(t,e,r){var n=new Error(e||ile[t]);if(n.code=t,Error.captureStackTrace&&Error.captureStackTrace(n,_c),!r)throw n;return n},ole=function(t,e,r,n){var s=t.length,a=0;if(!s||e.f&&!e.l)return r||new Vi(0);var i=!r,o=i||e.i!=2,l=e.i;i&&(r=new Vi(s*3));var u=function(de){var oe=r.length;if(de>oe){var Ue=new Vi(Math.max(oe*2,de));Ue.set(r),r=Ue}},d=e.f||0,h=e.p||0,m=e.b||0,g=e.l,b=e.d,y=e.m,_=e.n,T=s*8;do{if(!g){d=wc(t,h,1);var k=wc(t,h+1,3);if(h+=3,k)if(k==1)g=nle,b=ale,y=9,_=5;else if(k==2){var L=wc(t,h,31)+257,C=wc(t,h+10,15)+4,E=L+wc(t,h+5,31)+1;h+=14;for(var B=new Vi(E),O=new Vi(19),R=0;R<C;++R)O[hS[R]]=wc(t,h+R*3,7);h+=C*3;for(var F=pE(O),Q=(1<<F)-1,H=Du(O,F,1),R=0;R<E;){var ne=H[wc(t,h,Q)];h+=ne&15;var D=ne>>4;if(D<16)B[R++]=D;else{var J=0,re=0;for(D==16?(re=3+wc(t,h,3),h+=2,J=B[R-1]):D==17?(re=3+wc(t,h,7),h+=3):D==18&&(re=11+wc(t,h,127),h+=7);re--;)B[R++]=J}}var G=B.subarray(0,L),q=B.subarray(L);y=pE(G),_=pE(q),g=Du(G,y,1),b=Du(q,_,1)}else _c(1);else{var D=Q4(h)+4,M=t[D-4]|t[D-3]<<8,P=D+M;if(P>s){l&&_c(0);break}o&&u(m+M),r.set(t.subarray(D,P),m),e.b=m+=M,e.p=h=P*8,e.f=d;continue}if(h>T){l&&_c(0);break}}o&&u(m+131072);for(var W=(1<<y)-1,ie=(1<<_)-1,j=h;;j=h){var J=g[gE(t,h)&W],Y=J>>4;if(h+=J&15,h>T){l&&_c(0);break}if(J||_c(2),Y<256)r[m++]=Y;else if(Y==256){j=h,g=null;break}else{var ee=Y-254;if(Y>264){var R=Y-257,te=Xw[R];ee=wc(t,h,(1<<te)-1)+pP[R],h+=te}var ce=b[gE(t,h)&ie],be=ce>>4;ce||_c(3),h+=ce&15;var q=tle[be];if(be>3){var te=Zw[be];q+=gE(t,h)&(1<<te)-1,h+=te}if(h>T){l&&_c(0);break}o&&u(m+131072);var he=m+ee;if(m<q){var fe=a-q,ge=Math.min(q,he);for(fe+m<0&&_c(3);m<ge;++m)r[m]=n[fe+m]}for(;m<he;++m)r[m]=r[m-q]}}e.l=g,e.p=j,e.b=m,e.f=d,g&&(d=1,e.m=y,e.d=b,e.n=_)}while(!d);return m!=r.length&&i?xP(r,0,m):r.subarray(0,m)},vA=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},sg=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},xE=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,a=r.slice();if(!s)return{t:yP,l:0};if(s==1){var i=new Vi(r[0].s+1);return i[r[0].s]=1,{t:i,l:1}}r.sort(function(P,L){return P.f-L.f}),r.push({s:-1,f:25001});var o=r[0],l=r[1],u=0,d=1,h=2;for(r[0]={s:-1,f:o.f+l.f,l:o,r:l};d!=s-1;)o=r[r[u].f<r[h].f?u++:h++],l=r[u!=d&&r[u].f<r[h].f?u++:h++],r[d++]={s:-1,f:o.f+l.f,l:o,r:l};for(var m=a[0].s,n=1;n<s;++n)a[n].s>m&&(m=a[n].s);var g=new al(m+1),b=gS(r[d-1],g,0);if(b>e){var n=0,y=0,_=b-e,T=1<<_;for(a.sort(function(L,C){return g[C.s]-g[L.s]||L.f-C.f});n<s;++n){var k=a[n].s;if(g[k]>e)y+=T-(1<<b-g[k]),g[k]=e;else break}for(y>>=_;y>0;){var D=a[n].s;g[D]<e?y-=1<<e-g[D]++-1:++n}for(;n>=0&&y;--n){var M=a[n].s;g[M]==e&&(--g[M],++y)}b=e}return{t:new Vi(g),l:b}},gS=function(t,e,r){return t.s==-1?Math.max(gS(t.l,e,r+1),gS(t.r,e,r+1)):e[t.s]=r},WF=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new al(++e),n=0,s=t[0],a=1,i=function(l){r[n++]=l},o=1;o<=e;++o)if(t[o]==s&&o!=e)++a;else{if(!s&&a>2){for(;a>138;a-=138)i(32754);a>2&&(i(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(i(s),--a;a>6;a-=6)i(8304);a>2&&(i(a-3<<5|8208),a=0)}for(;a--;)i(s);a=1,s=t[o]}return{c:r.subarray(0,n),n:e}},ag=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},vP=function(t,e,r){var n=r.length,s=Q4(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var a=0;a<n;++a)t[s+a+4]=r[a];return(s+4+n)*8},YF=function(t,e,r,n,s,a,i,o,l,u,d){vA(e,d++,r),++s[256];for(var h=xE(s,15),m=h.t,g=h.l,b=xE(a,15),y=b.t,_=b.l,T=WF(m),k=T.c,D=T.n,M=WF(y),P=M.c,L=M.n,C=new al(19),E=0;E<k.length;++E)++C[k[E]&31];for(var E=0;E<P.length;++E)++C[P[E]&31];for(var B=xE(C,7),O=B.t,R=B.l,F=19;F>4&&!O[hS[F-1]];--F);var Q=u+5<<3,H=ag(s,wf)+ag(a,Cx)+i,ne=ag(s,m)+ag(a,y)+i+14+3*F+ag(C,O)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&Q<=H&&Q<=ne)return vP(e,d,t.subarray(l,l+u));var J,re,G,q;if(vA(e,d,1+(ne<H)),d+=2,ne<H){J=Du(m,g,0),re=m,G=Du(y,_,0),q=y;var W=Du(O,R,0);vA(e,d,D-257),vA(e,d+5,L-1),vA(e,d+10,F-4),d+=14;for(var E=0;E<F;++E)vA(e,d+3*E,O[hS[E]]);d+=3*F;for(var ie=[k,P],j=0;j<2;++j)for(var Y=ie[j],E=0;E<Y.length;++E){var ee=Y[E]&31;vA(e,d,W[ee]),d+=O[ee],ee>15&&(vA(e,d,Y[E]>>5&127),d+=Y[E]>>12)}}else J=rle,re=wf,G=sle,q=Cx;for(var E=0;E<o;++E){var te=n[E];if(te>255){var ee=te>>18&31;sg(e,d,J[ee+257]),d+=re[ee+257],ee>7&&(vA(e,d,te>>23&31),d+=Xw[ee]);var ce=te&31;sg(e,d,G[ce]),d+=q[ce],ce>3&&(sg(e,d,te>>5&8191),d+=Zw[ce])}else sg(e,d,J[te]),d+=re[te]}return sg(e,d,J[256]),d+re[256]},lle=new O4([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),yP=new Vi(0),cle=function(t,e,r,n,s,a){var i=a.z||t.length,o=new Vi(n+i+5*(1+Math.ceil(i/7e3))+s),l=o.subarray(n,o.length-s),u=a.l,d=(a.r||0)&7;if(e){d&&(l[0]=a.r>>3);for(var h=lle[e-1],m=h>>13,g=h&8191,b=(1<<r)-1,y=a.p||new al(32768),_=a.h||new al(b+1),T=Math.ceil(r/3),k=2*T,D=function(tt){return(t[tt]^t[tt+1]<<T^t[tt+2]<<k)&b},M=new O4(25e3),P=new al(288),L=new al(32),C=0,E=0,B=a.i||0,O=0,R=a.w||0,F=0;B+2<i;++B){var Q=D(B),H=B&32767,ne=_[Q];if(y[H]=ne,_[Q]=H,R<=B){var J=i-B;if((C>7e3||O>24576)&&(J>423||!u)){d=YF(t,l,0,M,P,L,E,O,F,B-F,d),O=C=E=0,F=B;for(var re=0;re<286;++re)P[re]=0;for(var re=0;re<30;++re)L[re]=0}var G=2,q=0,W=g,ie=H-ne&32767;if(J>2&&Q==D(B-ie))for(var j=Math.min(m,J)-1,Y=Math.min(32767,B),ee=Math.min(258,J);ie<=Y&&--W&&H!=ne;){if(t[B+G]==t[B+G-ie]){for(var te=0;te<ee&&t[B+te]==t[B+te-ie];++te);if(te>G){if(G=te,q=ie,te>j)break;for(var ce=Math.min(ie,te-2),be=0,re=0;re<ce;++re){var he=B-ie+re&32767,fe=y[he],ge=he-fe&32767;ge>be&&(be=ge,ne=he)}}}H=ne,ne=y[H],ie+=H-ne&32767}if(q){M[O++]=268435456|mS[G]<<18|$F[q];var de=mS[G]&31,oe=$F[q]&31;E+=Xw[de]+Zw[oe],++P[257+de],++L[oe],R=B+G,++C}else M[O++]=t[B],++P[t[B]]}}for(B=Math.max(B,R);B<i;++B)M[O++]=t[B],++P[t[B]];d=YF(t,l,u,M,P,L,E,O,F,B-F,d),u||(a.r=d&7|l[d/8|0]<<3,d-=7,a.h=_,a.p=y,a.i=B,a.w=R)}else{for(var B=a.w||0;B<i+u;B+=65535){var Ue=B+65535;Ue>=i&&(l[d/8|0]=u,Ue=i),d=vP(l,d+1,t.subarray(B,Ue))}a.i=i}return xP(o,0,n+Q4(d)+s)},wP=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,a=r.length|0,i=0;i!=a;){for(var o=Math.min(i+2655,a);i<o;++i)s+=n+=r[i];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},ule=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),i=new Vi(a.length+t.length);i.set(a),i.set(t,a.length),t=i,s.w=a.length}return cle(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},bP=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},Ale=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=wP();s.p(e.dictionary),bP(t,2,s.d())}},dle=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&_c(6,"invalid zlib data"),(t[1]>>5&1)==1&&_c(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function xS(t,e){e||(e={});var r=wP();r.p(t);var n=ule(t,e,e.dictionary?6:2,4);return Ale(n,e),bP(n,n.length-4,r.d()),n}function fle(t,e){return ole(t.subarray(dle(t),-4),{i:2},e,e)}var hle=typeof TextDecoder<"u"&&new TextDecoder,mle=0;try{hle.decode(yP,{stream:!0}),mle=1}catch{}var Er=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function vE(){Er.console&&typeof Er.console.log=="function"&&Er.console.log.apply(Er.console,arguments)}var as={log:vE,warn:function(t){Er.console&&(typeof Er.console.warn=="function"?Er.console.warn.apply(Er.console,arguments):vE.call(null,arguments))},error:function(t){Er.console&&(typeof Er.console.error=="function"?Er.console.error.apply(Er.console,arguments):vE(t))}};function yE(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){ih(n.response,e,r)},n.onerror=function(){as.error("could not download file")},n.send()}function JF(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function jv(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Kg,vS,ih=Er.saveAs||((typeof window>"u"?"undefined":qn(window))!=="object"||window!==Er?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=Er.URL||Er.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?JF(s.href)?yE(t,e,r):jv(s,s.target="_blank"):jv(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){jv(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(JF(t))yE(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){jv(n)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:qn(a)!=="object"&&(as.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return yE(t,e,r);var s=t.type==="application/octet-stream",a=/constructor/i.test(Er.HTMLElement)||Er.safari,i=/CriOS\/[\d]+/.test(navigator.userAgent);if((i||s&&a)&&(typeof FileReader>"u"?"undefined":qn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=i?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=d:location=d,n=null},o.readAsDataURL(t)}else{var l=Er.URL||Er.webkitURL,u=l.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function CP(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,a=r[n].process,i=s.exec(t);i&&(e=a(i),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+o+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function wE(t,e){var r=t[0],n=t[1],s=t[2],a=t[3];r=ki(r,n,s,a,e[0],7,-680876936),a=ki(a,r,n,s,e[1],12,-389564586),s=ki(s,a,r,n,e[2],17,606105819),n=ki(n,s,a,r,e[3],22,-1044525330),r=ki(r,n,s,a,e[4],7,-176418897),a=ki(a,r,n,s,e[5],12,1200080426),s=ki(s,a,r,n,e[6],17,-1473231341),n=ki(n,s,a,r,e[7],22,-45705983),r=ki(r,n,s,a,e[8],7,1770035416),a=ki(a,r,n,s,e[9],12,-1958414417),s=ki(s,a,r,n,e[10],17,-42063),n=ki(n,s,a,r,e[11],22,-1990404162),r=ki(r,n,s,a,e[12],7,1804603682),a=ki(a,r,n,s,e[13],12,-40341101),s=ki(s,a,r,n,e[14],17,-1502002290),r=Ii(r,n=ki(n,s,a,r,e[15],22,1236535329),s,a,e[1],5,-165796510),a=Ii(a,r,n,s,e[6],9,-1069501632),s=Ii(s,a,r,n,e[11],14,643717713),n=Ii(n,s,a,r,e[0],20,-373897302),r=Ii(r,n,s,a,e[5],5,-701558691),a=Ii(a,r,n,s,e[10],9,38016083),s=Ii(s,a,r,n,e[15],14,-660478335),n=Ii(n,s,a,r,e[4],20,-405537848),r=Ii(r,n,s,a,e[9],5,568446438),a=Ii(a,r,n,s,e[14],9,-1019803690),s=Ii(s,a,r,n,e[3],14,-187363961),n=Ii(n,s,a,r,e[8],20,1163531501),r=Ii(r,n,s,a,e[13],5,-1444681467),a=Ii(a,r,n,s,e[2],9,-51403784),s=Ii(s,a,r,n,e[7],14,1735328473),r=Fi(r,n=Ii(n,s,a,r,e[12],20,-1926607734),s,a,e[5],4,-378558),a=Fi(a,r,n,s,e[8],11,-2022574463),s=Fi(s,a,r,n,e[11],16,1839030562),n=Fi(n,s,a,r,e[14],23,-35309556),r=Fi(r,n,s,a,e[1],4,-1530992060),a=Fi(a,r,n,s,e[4],11,1272893353),s=Fi(s,a,r,n,e[7],16,-155497632),n=Fi(n,s,a,r,e[10],23,-1094730640),r=Fi(r,n,s,a,e[13],4,681279174),a=Fi(a,r,n,s,e[0],11,-358537222),s=Fi(s,a,r,n,e[3],16,-722521979),n=Fi(n,s,a,r,e[6],23,76029189),r=Fi(r,n,s,a,e[9],4,-640364487),a=Fi(a,r,n,s,e[12],11,-421815835),s=Fi(s,a,r,n,e[15],16,530742520),r=Di(r,n=Fi(n,s,a,r,e[2],23,-995338651),s,a,e[0],6,-198630844),a=Di(a,r,n,s,e[7],10,1126891415),s=Di(s,a,r,n,e[14],15,-1416354905),n=Di(n,s,a,r,e[5],21,-57434055),r=Di(r,n,s,a,e[12],6,1700485571),a=Di(a,r,n,s,e[3],10,-1894986606),s=Di(s,a,r,n,e[10],15,-1051523),n=Di(n,s,a,r,e[1],21,-2054922799),r=Di(r,n,s,a,e[8],6,1873313359),a=Di(a,r,n,s,e[15],10,-30611744),s=Di(s,a,r,n,e[6],15,-1560198380),n=Di(n,s,a,r,e[13],21,1309151649),r=Di(r,n,s,a,e[4],6,-145523070),a=Di(a,r,n,s,e[11],10,-1120210379),s=Di(s,a,r,n,e[2],15,718787259),n=Di(n,s,a,r,e[9],21,-343485551),t[0]=Wd(r,t[0]),t[1]=Wd(n,t[1]),t[2]=Wd(s,t[2]),t[3]=Wd(a,t[3])}function eb(t,e,r,n,s,a){return e=Wd(Wd(e,t),Wd(n,a)),Wd(e<<s|e>>>32-s,r)}function ki(t,e,r,n,s,a,i){return eb(e&r|~e&n,t,e,s,a,i)}function Ii(t,e,r,n,s,a,i){return eb(e&n|r&~n,t,e,s,a,i)}function Fi(t,e,r,n,s,a,i){return eb(e^r^n,t,e,s,a,i)}function Di(t,e,r,n,s,a,i){return eb(r^(e|~n),t,e,s,a,i)}function EP(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)wE(n,ple(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(wE(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,wE(n,s),n}function ple(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}Kg=Er.atob.bind(Er),vS=Er.btoa.bind(Er);var XF="0123456789abcdef".split("");function gle(t){for(var e="",r=0;r<4;r++)e+=XF[t>>8*r+4&15]+XF[t>>8*r&15];return e}function xle(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function yS(t){return EP(t).map(xle).join("")}var vle=function(t){for(var e=0;e<t.length;e++)t[e]=gle(t[e]);return t.join("")}(EP("hello"))!="5d41402abc4b2a76b9719d911017c592";function Wd(t,e){if(vle){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function wS(t,e){var r,n,s,a;if(t!==r){for(var i=(s=t,a=1+(256/t.length>>0),new Array(a+1).join(s)),o=[],l=0;l<256;l++)o[l]=l;var u=0;for(l=0;l<256;l++){var d=o[l];u=(u+d+i.charCodeAt(l))%256,o[l]=o[u],o[u]=d}r=t,n=o}else o=n;var h=e.length,m=0,g=0,b="";for(l=0;l<h;l++)g=(g+(d=o[m=(m+1)%256]))%256,o[m]=o[g],o[g]=d,i=o[(o[m]+o[g])%256],b+=String.fromCharCode(e.charCodeAt(l)^i);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var ZF={print:4,modify:8,copy:16,"annot-forms":32};function rm(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(o){if(ZF.perm!==void 0)throw new Error("Invalid permission: "+o);s+=ZF[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(e+this.padding).substr(0,32),i=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,i),this.P=-(1+(255^s)),this.encryptionKey=yS(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=wS(this.encryptionKey,this.padding)}function nm(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=t[n]}return e}function e6(t){if(qn(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var a=Math.random().toString(35);return e[r][a]=[n,!!s],a},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var a in e[r]){var i=e[r][a];try{i[0].apply(t,n)}catch(o){Er.console&&as.error("jsPDF PubSub Error",o.message,o)}i[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function k2(t){if(!(this instanceof k2))return new k2(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function _P(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function ch(t,e,r,n,s){if(!(this instanceof ch))return new ch(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,_P.call(this,n,s)}function cm(t,e,r,n,s){if(!(this instanceof cm))return new cm(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,_P.call(this,n,s)}function lr(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],a=arguments[3],i=[],o=1,l=16,u="S",d=null;qn(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,a=t.compress||t.compressPdf||a,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),i=t.filters||(a===!0?["FlateEncode"]:i),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,m={},g={internal:{},__private__:{}};g.__private__.PubSub=e6;var b="1.3",y=g.__private__.getPdfVersion=function(){return b};g.__private__.setPdfVersion=function(z){b=z};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return _};var T=g.__private__.getPageFormat=function(z){return _[z]};s=s||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},D=k.COMPAT;function M(){this.saveGraphicsState(),Ee(new Gt(pt,0,0,-pt,0,Va()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),u="n",D=k.ADVANCED}function P(){this.restoreGraphicsState(),u="S",D=k.COMPAT}var L=g.__private__.combineFontStyleAndFontWeight=function(z,Ae){if(z=="bold"&&Ae=="normal"||z=="bold"&&Ae==400||z=="normal"&&Ae=="italic"||z=="bold"&&Ae=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ae&&(z=Ae==400||Ae==="normal"?z==="italic"?"italic":"normal":Ae!=700&&Ae!=="bold"||z!=="normal"?(Ae==700?"bold":Ae)+""+z:"bold"),z};g.advancedAPI=function(z){var Ae=D===k.COMPAT;return Ae&&M.call(this),typeof z!="function"||(z(this),Ae&&P.call(this)),this},g.compatAPI=function(z){var Ae=D===k.ADVANCED;return Ae&&P.call(this),typeof z!="function"||(z(this),Ae&&M.call(this)),this},g.isAdvancedAPI=function(){return D===k.ADVANCED};var C,E=function(z){if(D!==k.ADVANCED)throw new Error(z+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},B=g.roundToPrecision=g.__private__.roundToPrecision=function(z,Ae){var Ie=e||Ae;if(isNaN(z)||isNaN(Ie))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return z.toFixed(Ie).replace(/0+$/,"")};C=g.hpf=g.__private__.hpf=typeof l=="number"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return B(z,l)}:l==="smart"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return B(z,z>-1&&z<1?16:5)}:function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return B(z,16)};var O=g.f2=g.__private__.f2=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f2");return B(z,2)},R=g.__private__.f3=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f3");return B(z,3)},F=g.scale=g.__private__.scale=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.scale");return D===k.COMPAT?z*pt:D===k.ADVANCED?z:void 0},Q=function(z){return D===k.COMPAT?Va()-z:D===k.ADVANCED?z:void 0},H=function(z){return F(Q(z))};g.__private__.setPrecision=g.setPrecision=function(z){typeof parseInt(z,10)=="number"&&(e=parseInt(z,10))};var ne,J="00000000000000000000000000000000",re=g.__private__.getFileId=function(){return J},G=g.__private__.setFileId=function(z){return J=z!==void 0&&/^[a-fA-F0-9]{32}$/.test(z)?z.toUpperCase():J.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(On=new rm(d.userPermissions,d.userPassword,d.ownerPassword,J)),J};g.setFileId=function(z){return G(z),this},g.getFileId=function(){return re()};var q=g.__private__.convertDateToPDFDate=function(z){var Ae=z.getTimezoneOffset(),Ie=Ae<0?"+":"-",Le=Math.floor(Math.abs(Ae/60)),ze=Math.abs(Ae%60),ot=[Ie,ee(Le),"'",ee(ze),"'"].join("");return["D:",z.getFullYear(),ee(z.getMonth()+1),ee(z.getDate()),ee(z.getHours()),ee(z.getMinutes()),ee(z.getSeconds()),ot].join("")},W=g.__private__.convertPDFDateToDate=function(z){var Ae=parseInt(z.substr(2,4),10),Ie=parseInt(z.substr(6,2),10)-1,Le=parseInt(z.substr(8,2),10),ze=parseInt(z.substr(10,2),10),ot=parseInt(z.substr(12,2),10),St=parseInt(z.substr(14,2),10);return new Date(Ae,Ie,Le,ze,ot,St,0)},ie=g.__private__.setCreationDate=function(z){var Ae;if(z===void 0&&(z=new Date),z instanceof Date)Ae=q(z);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(z))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ae=z}return ne=Ae},j=g.__private__.getCreationDate=function(z){var Ae=ne;return z==="jsDate"&&(Ae=W(ne)),Ae};g.setCreationDate=function(z){return ie(z),this},g.getCreationDate=function(z){return j(z)};var Y,ee=g.__private__.padd2=function(z){return("0"+parseInt(z)).slice(-2)},te=g.__private__.padd2Hex=function(z){return("00"+(z=z.toString())).substr(z.length)},ce=0,be=[],he=[],fe=0,ge=[],de=[],oe=!1,Ue=he,tt=function(){ce=0,fe=0,he=[],be=[],ge=[],_e=Yn(),Se=Yn()};g.__private__.setCustomOutputDestination=function(z){oe=!0,Ue=z};var Fe=function(z){oe||(Ue=z)};g.__private__.resetCustomOutputDestination=function(){oe=!1,Ue=he};var Ee=g.__private__.out=function(z){return z=z.toString(),fe+=z.length+1,Ue.push(z),Ue},De=g.__private__.write=function(z){return Ee(arguments.length===1?z.toString():Array.prototype.join.call(arguments," "))},Qe=g.__private__.getArrayBuffer=function(z){for(var Ae=z.length,Ie=new ArrayBuffer(Ae),Le=new Uint8Array(Ie);Ae--;)Le[Ae]=z.charCodeAt(Ae);return Ie},$e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return $e};var ut=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(z){return ut=D===k.ADVANCED?z/pt:z,this};var Et,lt=g.__private__.getFontSize=g.getFontSize=function(){return D===k.COMPAT?ut:ut*pt},Dt=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(z){return Dt=z,this},g.__private__.getR2L=g.getR2L=function(){return Dt};var zt,Jt=g.__private__.setZoomMode=function(z){var Ae=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(z))Et=z;else if(isNaN(z)){if(Ae.indexOf(z)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+z+'" is not recognized.');Et=z}else Et=parseInt(z,10)};g.__private__.getZoomMode=function(){return Et};var Rt,Ot=g.__private__.setPageMode=function(z){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(z)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+z+'" is not recognized.');zt=z};g.__private__.getPageMode=function(){return zt};var qt=g.__private__.setLayoutMode=function(z){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(z)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+z+'" is not recognized.');Rt=z};g.__private__.getLayoutMode=function(){return Rt},g.__private__.setDisplayMode=g.setDisplayMode=function(z,Ae,Ie){return Jt(z),qt(Ae),Ot(Ie),this};var It={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(z){if(Object.keys(It).indexOf(z)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return It[z]},g.__private__.getDocumentProperties=function(){return It},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(z){for(var Ae in It)It.hasOwnProperty(Ae)&&z[Ae]&&(It[Ae]=z[Ae]);return this},g.__private__.setDocumentProperty=function(z,Ae){if(Object.keys(It).indexOf(z)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return It[z]=Ae};var Ft,pt,br,Zt,hn,vr={},Ur={},Dn=[],Fr={},da={},an={},ns={},gs=null,jr=0,nr=[],Gr=new e6(g),fa=t.hotfixes||[],Wn={},_s={},Ba=[],Gt=function z(Ae,Ie,Le,ze,ot,St){if(!(this instanceof z))return new z(Ae,Ie,Le,ze,ot,St);isNaN(Ae)&&(Ae=1),isNaN(Ie)&&(Ie=0),isNaN(Le)&&(Le=0),isNaN(ze)&&(ze=1),isNaN(ot)&&(ot=0),isNaN(St)&&(St=0),this._matrix=[Ae,Ie,Le,ze,ot,St]};Object.defineProperty(Gt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(Gt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(Gt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(Gt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(Gt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(Gt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(Gt.prototype,"a",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(Gt.prototype,"b",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(Gt.prototype,"c",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(Gt.prototype,"d",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(Gt.prototype,"e",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(Gt.prototype,"f",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(Gt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Gt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Gt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Gt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Gt.prototype.join=function(z){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(z)},Gt.prototype.multiply=function(z){var Ae=z.sx*this.sx+z.shy*this.shx,Ie=z.sx*this.shy+z.shy*this.sy,Le=z.shx*this.sx+z.sy*this.shx,ze=z.shx*this.shy+z.sy*this.sy,ot=z.tx*this.sx+z.ty*this.shx+this.tx,St=z.tx*this.shy+z.ty*this.sy+this.ty;return new Gt(Ae,Ie,Le,ze,ot,St)},Gt.prototype.decompose=function(){var z=this.sx,Ae=this.shy,Ie=this.shx,Le=this.sy,ze=this.tx,ot=this.ty,St=Math.sqrt(z*z+Ae*Ae),Ht=(z/=St)*Ie+(Ae/=St)*Le;Ie-=z*Ht,Le-=Ae*Ht;var N=Math.sqrt(Ie*Ie+Le*Le);return Ht/=N,z*(Le/=N)<Ae*(Ie/=N)&&(z=-z,Ae=-Ae,Ht=-Ht,St=-St),{scale:new Gt(St,0,0,N,0,0),translate:new Gt(1,0,0,1,ze,ot),rotate:new Gt(z,Ae,-Ae,z,0,0),skew:new Gt(1,0,Ht,1,0,0)}},Gt.prototype.toString=function(z){return this.join(" ")},Gt.prototype.inversed=function(){var z=this.sx,Ae=this.shy,Ie=this.shx,Le=this.sy,ze=this.tx,ot=this.ty,St=1/(z*Le-Ae*Ie),Ht=Le*St,N=-Ae*St,X=-Ie*St,ae=z*St;return new Gt(Ht,N,X,ae,-Ht*ze-X*ot,-N*ze-ae*ot)},Gt.prototype.applyToPoint=function(z){var Ae=z.x*this.sx+z.y*this.shx+this.tx,Ie=z.x*this.shy+z.y*this.sy+this.ty;return new rc(Ae,Ie)},Gt.prototype.applyToRectangle=function(z){var Ae=this.applyToPoint(z),Ie=this.applyToPoint(new rc(z.x+z.w,z.y+z.h));return new Gc(Ae.x,Ae.y,Ie.x-Ae.x,Ie.y-Ae.y)},Gt.prototype.clone=function(){var z=this.sx,Ae=this.shy,Ie=this.shx,Le=this.sy,ze=this.tx,ot=this.ty;return new Gt(z,Ae,Ie,Le,ze,ot)},g.Matrix=Gt;var mn=g.matrixMult=function(z,Ae){return Ae.multiply(z)},on=new Gt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=on;var Rn=function(z,Ae){if(!da[z]){var Ie=(Ae instanceof ch?"Sh":"P")+(Object.keys(Fr).length+1).toString(10);Ae.id=Ie,da[z]=Ie,Fr[Ie]=Ae,Gr.publish("addPattern",Ae)}};g.ShadingPattern=ch,g.TilingPattern=cm,g.addShadingPattern=function(z,Ae){return E("addShadingPattern()"),Rn(z,Ae),this},g.beginTilingPattern=function(z){E("beginTilingPattern()"),vl(z.boundingBox[0],z.boundingBox[1],z.boundingBox[2]-z.boundingBox[0],z.boundingBox[3]-z.boundingBox[1],z.matrix)},g.endTilingPattern=function(z,Ae){E("endTilingPattern()"),Ae.stream=de[Y].join(`
`),Rn(z,Ae),Gr.publish("endTilingPattern",Ae),Ba.pop().restore()};var jn=g.__private__.newObject=function(){var z=Yn();return me(z,!0),z},Yn=g.__private__.newObjectDeferred=function(){return ce++,be[ce]=function(){return fe},ce},me=function(z,Ae){return Ae=typeof Ae=="boolean"&&Ae,be[z]=fe,Ae&&Ee(z+" 0 obj"),z},Be=g.__private__.newAdditionalObject=function(){var z={objId:Yn(),content:""};return ge.push(z),z},_e=Yn(),Se=Yn(),Te=g.__private__.decodeColorString=function(z){var Ae=z.split(" ");if(Ae.length!==2||Ae[1]!=="g"&&Ae[1]!=="G")Ae.length===5&&(Ae[4]==="k"||Ae[4]==="K")&&(Ae=[(1-Ae[0])*(1-Ae[3]),(1-Ae[1])*(1-Ae[3]),(1-Ae[2])*(1-Ae[3]),"r"]);else{var Ie=parseFloat(Ae[0]);Ae=[Ie,Ie,Ie,"r"]}for(var Le="#",ze=0;ze<3;ze++)Le+=("0"+Math.floor(255*parseFloat(Ae[ze])).toString(16)).slice(-2);return Le},ke=g.__private__.encodeColorString=function(z){var Ae;typeof z=="string"&&(z={ch1:z});var Ie=z.ch1,Le=z.ch2,ze=z.ch3,ot=z.ch4,St=z.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ie=="string"&&Ie.charAt(0)!=="#"){var Ht=new CP(Ie);if(Ht.ok)Ie=Ht.toHex();else if(!/^\d*\.?\d*$/.test(Ie))throw new Error('Invalid color "'+Ie+'" passed to jsPDF.encodeColorString.')}if(typeof Ie=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ie)&&(Ie="#"+Ie[1]+Ie[1]+Ie[2]+Ie[2]+Ie[3]+Ie[3]),typeof Ie=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ie)){var N=parseInt(Ie.substr(1),16);Ie=N>>16&255,Le=N>>8&255,ze=255&N}if(Le===void 0||ot===void 0&&Ie===Le&&Le===ze)if(typeof Ie=="string")Ae=Ie+" "+St[0];else switch(z.precision){case 2:Ae=O(Ie/255)+" "+St[0];break;case 3:default:Ae=R(Ie/255)+" "+St[0]}else if(ot===void 0||qn(ot)==="object"){if(ot&&!isNaN(ot.a)&&ot.a===0)return Ae=["1.","1.","1.",St[1]].join(" ");if(typeof Ie=="string")Ae=[Ie,Le,ze,St[1]].join(" ");else switch(z.precision){case 2:Ae=[O(Ie/255),O(Le/255),O(ze/255),St[1]].join(" ");break;default:case 3:Ae=[R(Ie/255),R(Le/255),R(ze/255),St[1]].join(" ")}}else if(typeof Ie=="string")Ae=[Ie,Le,ze,ot,St[2]].join(" ");else switch(z.precision){case 2:Ae=[O(Ie),O(Le),O(ze),O(ot),St[2]].join(" ");break;case 3:default:Ae=[R(Ie),R(Le),R(ze),R(ot),St[2]].join(" ")}return Ae},Ke=g.__private__.getFilters=function(){return i},nt=g.__private__.putStream=function(z){var Ae=(z=z||{}).data||"",Ie=z.filters||Ke(),Le=z.alreadyAppliedFilters||[],ze=z.addLength1||!1,ot=Ae.length,St=z.objectId,Ht=function(gr){return gr};if(d!==null&&St===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ht=On.encryptor(St,0));var N={};Ie===!0&&(Ie=["FlateEncode"]);var X=z.additionalKeyValues||[],ae=(N=lr.API.processDataByFilters!==void 0?lr.API.processDataByFilters(Ae,Ie):{data:Ae,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(N.data.length!==0&&(X.push({key:"Length",value:N.data.length}),ze===!0&&X.push({key:"Length1",value:ot})),ae.length!=0)if(ae.split("/").length-1==1)X.push({key:"Filter",value:ae});else{X.push({key:"Filter",value:"["+ae+"]"});for(var ye=0;ye<X.length;ye+=1)if(X[ye].key==="DecodeParms"){for(var He=[],et=0;et<N.reverseChain.split("/").length-1;et+=1)He.push("null");He.push(X[ye].value),X[ye].value="["+He.join(" ")+"]"}}Ee("<<");for(var Tt=0;Tt<X.length;Tt++)Ee("/"+X[Tt].key+" "+X[Tt].value);Ee(">>"),N.data.length!==0&&(Ee("stream"),Ee(Ht(N.data)),Ee("endstream"))},Ve=g.__private__.putPage=function(z){var Ae=z.number,Ie=z.data,Le=z.objId,ze=z.contentsObjId;me(Le,!0),Ee("<</Type /Page"),Ee("/Parent "+z.rootDictionaryObjId+" 0 R"),Ee("/Resources "+z.resourceDictionaryObjId+" 0 R"),Ee("/MediaBox ["+parseFloat(C(z.mediaBox.bottomLeftX))+" "+parseFloat(C(z.mediaBox.bottomLeftY))+" "+C(z.mediaBox.topRightX)+" "+C(z.mediaBox.topRightY)+"]"),z.cropBox!==null&&Ee("/CropBox ["+C(z.cropBox.bottomLeftX)+" "+C(z.cropBox.bottomLeftY)+" "+C(z.cropBox.topRightX)+" "+C(z.cropBox.topRightY)+"]"),z.bleedBox!==null&&Ee("/BleedBox ["+C(z.bleedBox.bottomLeftX)+" "+C(z.bleedBox.bottomLeftY)+" "+C(z.bleedBox.topRightX)+" "+C(z.bleedBox.topRightY)+"]"),z.trimBox!==null&&Ee("/TrimBox ["+C(z.trimBox.bottomLeftX)+" "+C(z.trimBox.bottomLeftY)+" "+C(z.trimBox.topRightX)+" "+C(z.trimBox.topRightY)+"]"),z.artBox!==null&&Ee("/ArtBox ["+C(z.artBox.bottomLeftX)+" "+C(z.artBox.bottomLeftY)+" "+C(z.artBox.topRightX)+" "+C(z.artBox.topRightY)+"]"),typeof z.userUnit=="number"&&z.userUnit!==1&&Ee("/UserUnit "+z.userUnit),Gr.publish("putPage",{objId:Le,pageContext:nr[Ae],pageNumber:Ae,page:Ie}),Ee("/Contents "+ze+" 0 R"),Ee(">>"),Ee("endobj");var ot=Ie.join(`
`);return D===k.ADVANCED&&(ot+=`
Q`),me(ze,!0),nt({data:ot,filters:Ke(),objectId:ze}),Ee("endobj"),Le},Ye=g.__private__.putPages=function(){var z,Ae,Ie=[];for(z=1;z<=jr;z++)nr[z].objId=Yn(),nr[z].contentsObjId=Yn();for(z=1;z<=jr;z++)Ie.push(Ve({number:z,data:de[z],objId:nr[z].objId,contentsObjId:nr[z].contentsObjId,mediaBox:nr[z].mediaBox,cropBox:nr[z].cropBox,bleedBox:nr[z].bleedBox,trimBox:nr[z].trimBox,artBox:nr[z].artBox,userUnit:nr[z].userUnit,rootDictionaryObjId:_e,resourceDictionaryObjId:Se}));me(_e,!0),Ee("<</Type /Pages");var Le="/Kids [";for(Ae=0;Ae<jr;Ae++)Le+=Ie[Ae]+" 0 R ";Ee(Le+"]"),Ee("/Count "+jr),Ee(">>"),Ee("endobj"),Gr.publish("postPutPages")},Ze=function(z){Gr.publish("putFont",{font:z,out:Ee,newObject:jn,putStream:nt}),z.isAlreadyPutted!==!0&&(z.objectNumber=jn(),Ee("<<"),Ee("/Type /Font"),Ee("/BaseFont /"+nm(z.postScriptName)),Ee("/Subtype /Type1"),typeof z.encoding=="string"&&Ee("/Encoding /"+z.encoding),Ee("/FirstChar 32"),Ee("/LastChar 255"),Ee(">>"),Ee("endobj"))},wt=function(){for(var z in vr)vr.hasOwnProperty(z)&&(h===!1||h===!0&&m.hasOwnProperty(z))&&Ze(vr[z])},Bt=function(z){z.objectNumber=jn();var Ae=[];Ae.push({key:"Type",value:"/XObject"}),Ae.push({key:"Subtype",value:"/Form"}),Ae.push({key:"BBox",value:"["+[C(z.x),C(z.y),C(z.x+z.width),C(z.y+z.height)].join(" ")+"]"}),Ae.push({key:"Matrix",value:"["+z.matrix.toString()+"]"});var Ie=z.pages[1].join(`
`);nt({data:Ie,additionalKeyValues:Ae,objectId:z.objectNumber}),Ee("endobj")},Qt=function(){for(var z in Wn)Wn.hasOwnProperty(z)&&Bt(Wn[z])},Nt=function(z,Ae){var Ie,Le=[],ze=1/(Ae-1);for(Ie=0;Ie<1;Ie+=ze)Le.push(Ie);if(Le.push(1),z[0].offset!=0){var ot={offset:0,color:z[0].color};z.unshift(ot)}if(z[z.length-1].offset!=1){var St={offset:1,color:z[z.length-1].color};z.push(St)}for(var Ht="",N=0,X=0;X<Le.length;X++){for(Ie=Le[X];Ie>z[N+1].offset;)N++;var ae=z[N].offset,ye=(Ie-ae)/(z[N+1].offset-ae),He=z[N].color,et=z[N+1].color;Ht+=te(Math.round((1-ye)*He[0]+ye*et[0]).toString(16))+te(Math.round((1-ye)*He[1]+ye*et[1]).toString(16))+te(Math.round((1-ye)*He[2]+ye*et[2]).toString(16))}return Ht.trim()},Lt=function(z,Ae){Ae||(Ae=21);var Ie=jn(),Le=Nt(z.colors,Ae),ze=[];ze.push({key:"FunctionType",value:"0"}),ze.push({key:"Domain",value:"[0.0 1.0]"}),ze.push({key:"Size",value:"["+Ae+"]"}),ze.push({key:"BitsPerSample",value:"8"}),ze.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ze.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt({data:Le,additionalKeyValues:ze,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ie}),Ee("endobj"),z.objectNumber=jn(),Ee("<< /ShadingType "+z.type),Ee("/ColorSpace /DeviceRGB");var ot="/Coords ["+C(parseFloat(z.coords[0]))+" "+C(parseFloat(z.coords[1]))+" ";z.type===2?ot+=C(parseFloat(z.coords[2]))+" "+C(parseFloat(z.coords[3])):ot+=C(parseFloat(z.coords[2]))+" "+C(parseFloat(z.coords[3]))+" "+C(parseFloat(z.coords[4]))+" "+C(parseFloat(z.coords[5])),Ee(ot+="]"),z.matrix&&Ee("/Matrix ["+z.matrix.toString()+"]"),Ee("/Function "+Ie+" 0 R"),Ee("/Extend [true true]"),Ee(">>"),Ee("endobj")},fr=function(z,Ae){var Ie=Yn(),Le=jn();Ae.push({resourcesOid:Ie,objectOid:Le}),z.objectNumber=Le;var ze=[];ze.push({key:"Type",value:"/Pattern"}),ze.push({key:"PatternType",value:"1"}),ze.push({key:"PaintType",value:"1"}),ze.push({key:"TilingType",value:"1"}),ze.push({key:"BBox",value:"["+z.boundingBox.map(C).join(" ")+"]"}),ze.push({key:"XStep",value:C(z.xStep)}),ze.push({key:"YStep",value:C(z.yStep)}),ze.push({key:"Resources",value:Ie+" 0 R"}),z.matrix&&ze.push({key:"Matrix",value:"["+z.matrix.toString()+"]"}),nt({data:z.stream,additionalKeyValues:ze,objectId:z.objectNumber}),Ee("endobj")},Or=function(z){var Ae;for(Ae in Fr)Fr.hasOwnProperty(Ae)&&(Fr[Ae]instanceof ch?Lt(Fr[Ae]):Fr[Ae]instanceof cm&&fr(Fr[Ae],z))},Qr=function(z){for(var Ae in z.objectNumber=jn(),Ee("<<"),z)switch(Ae){case"opacity":Ee("/ca "+O(z[Ae]));break;case"stroke-opacity":Ee("/CA "+O(z[Ae]))}Ee(">>"),Ee("endobj")},qr=function(){var z;for(z in an)an.hasOwnProperty(z)&&Qr(an[z])},Ls=function(){for(var z in Ee("/XObject <<"),Wn)Wn.hasOwnProperty(z)&&Wn[z].objectNumber>=0&&Ee("/"+z+" "+Wn[z].objectNumber+" 0 R");Gr.publish("putXobjectDict"),Ee(">>")},gi=function(){On.oid=jn(),Ee("<<"),Ee("/Filter /Standard"),Ee("/V "+On.v),Ee("/R "+On.r),Ee("/U <"+On.toHexString(On.U)+">"),Ee("/O <"+On.toHexString(On.O)+">"),Ee("/P "+On.P),Ee(">>"),Ee("endobj")},Us=function(){for(var z in Ee("/Font <<"),vr)vr.hasOwnProperty(z)&&(h===!1||h===!0&&m.hasOwnProperty(z))&&Ee("/"+z+" "+vr[z].objectNumber+" 0 R");Ee(">>")},ha=function(){if(Object.keys(Fr).length>0){for(var z in Ee("/Shading <<"),Fr)Fr.hasOwnProperty(z)&&Fr[z]instanceof ch&&Fr[z].objectNumber>=0&&Ee("/"+z+" "+Fr[z].objectNumber+" 0 R");Gr.publish("putShadingPatternDict"),Ee(">>")}},Ws=function(z){if(Object.keys(Fr).length>0){for(var Ae in Ee("/Pattern <<"),Fr)Fr.hasOwnProperty(Ae)&&Fr[Ae]instanceof g.TilingPattern&&Fr[Ae].objectNumber>=0&&Fr[Ae].objectNumber<z&&Ee("/"+Ae+" "+Fr[Ae].objectNumber+" 0 R");Gr.publish("putTilingPatternDict"),Ee(">>")}},ka=function(){if(Object.keys(an).length>0){var z;for(z in Ee("/ExtGState <<"),an)an.hasOwnProperty(z)&&an[z].objectNumber>=0&&Ee("/"+z+" "+an[z].objectNumber+" 0 R");Gr.publish("putGStateDict"),Ee(">>")}},Jn=function(z){me(z.resourcesOid,!0),Ee("<<"),Ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Us(),ha(),Ws(z.objectOid),ka(),Ls(),Ee(">>"),Ee("endobj")},ma=function(){var z=[];wt(),qr(),Qt(),Or(z),Gr.publish("putResources"),z.forEach(Jn),Jn({resourcesOid:Se,objectOid:Number.MAX_SAFE_INTEGER}),Gr.publish("postPutResources")},Oc=function(){Gr.publish("putAdditionalObjects");for(var z=0;z<ge.length;z++){var Ae=ge[z];me(Ae.objId,!0),Ee(Ae.content),Ee("endobj")}Gr.publish("postPutAdditionalObjects")},YA=function(z){Ur[z.fontName]=Ur[z.fontName]||{},Ur[z.fontName][z.fontStyle]=z.id},ul=function(z,Ae,Ie,Le,ze){var ot={id:"F"+(Object.keys(vr).length+1).toString(10),postScriptName:z,fontName:Ae,fontStyle:Ie,encoding:Le,isStandardFont:ze||!1,metadata:{}};return Gr.publish("addFont",{font:ot,instance:this}),vr[ot.id]=ot,YA(ot),ot.id},zu=function(z){for(var Ae=0,Ie=$e.length;Ae<Ie;Ae++){var Le=ul.call(this,z[Ae][0],z[Ae][1],z[Ae][2],$e[Ae][3],!0);h===!1&&(m[Le]=!0);var ze=z[Ae][0].split("-");YA({id:Le,fontName:ze[0],fontStyle:ze[1]||""})}Gr.publish("addFonts",{fonts:vr,dictionary:Ur})},Ia=function(z){return z.foo=function(){try{return z.apply(this,arguments)}catch(Le){var Ae=Le.stack||"";~Ae.indexOf(" at ")&&(Ae=Ae.split(" at ")[1]);var Ie="Error in function "+Ae.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Er.console)throw new Error(Ie);Er.console.error(Ie,Le),Er.alert&&alert(Ie)}},z.foo.bar=z,z.foo},Qc=function(z,Ae){var Ie,Le,ze,ot,St,Ht,N,X,ae;if(ze=(Ae=Ae||{}).sourceEncoding||"Unicode",St=Ae.outputEncoding,(Ae.autoencode||St)&&vr[Ft].metadata&&vr[Ft].metadata[ze]&&vr[Ft].metadata[ze].encoding&&(ot=vr[Ft].metadata[ze].encoding,!St&&vr[Ft].encoding&&(St=vr[Ft].encoding),!St&&ot.codePages&&(St=ot.codePages[0]),typeof St=="string"&&(St=ot[St]),St)){for(N=!1,Ht=[],Ie=0,Le=z.length;Ie<Le;Ie++)(X=St[z.charCodeAt(Ie)])?Ht.push(String.fromCharCode(X)):Ht.push(z[Ie]),Ht[Ie].charCodeAt(0)>>8&&(N=!0);z=Ht.join("")}for(Ie=z.length;N===void 0&&Ie!==0;)z.charCodeAt(Ie-1)>>8&&(N=!0),Ie--;if(!N)return z;for(Ht=Ae.noBOM?[]:[254,255],Ie=0,Le=z.length;Ie<Le;Ie++){if((ae=(X=z.charCodeAt(Ie))>>8)>>8)throw new Error("Character at position "+Ie+" of string '"+z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ht.push(ae),Ht.push(X-(ae<<8))}return String.fromCharCode.apply(void 0,Ht)},pn=g.__private__.pdfEscape=g.pdfEscape=function(z,Ae){return Qc(z,Ae).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Fa=g.__private__.beginPage=function(z){de[++jr]=[],nr[jr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(z[0]),topRightY:Number(z[1])}},co(jr),Fe(de[Y])},Al=function(z,Ae){var Ie,Le,ze;switch(r=Ae||r,typeof z=="string"&&(Ie=T(z.toLowerCase()),Array.isArray(Ie)&&(Le=Ie[0],ze=Ie[1])),Array.isArray(z)&&(Le=z[0]*pt,ze=z[1]*pt),isNaN(Le)&&(Le=s[0],ze=s[1]),(Le>14400||ze>14400)&&(as.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),ze=Math.min(14400,ze)),s=[Le,ze],r.substr(0,1)){case"l":ze>Le&&(s=[ze,Le]);break;case"p":Le>ze&&(s=[ze,Le])}Fa(s),$u(ml),Ee(Da),Wu!==0&&Ee(Wu+" J"),tc!==0&&Ee(tc+" j"),Gr.publish("addPage",{pageNumber:jr})},dl=function(z){z>0&&z<=jr&&(de.splice(z,1),nr.splice(z,1),jr--,Y>jr&&(Y=jr),this.setPage(Y))},co=function(z){z>0&&z<=jr&&(Y=z)},Sn=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return de.length-1},fl=function(z,Ae,Ie){var Le,ze=void 0;return Ie=Ie||{},z=z!==void 0?z:vr[Ft].fontName,Ae=Ae!==void 0?Ae:vr[Ft].fontStyle,Le=z.toLowerCase(),Ur[Le]!==void 0&&Ur[Le][Ae]!==void 0?ze=Ur[Le][Ae]:Ur[z]!==void 0&&Ur[z][Ae]!==void 0?ze=Ur[z][Ae]:Ie.disableWarning===!1&&as.warn("Unable to look up font label for font '"+z+"', '"+Ae+"'. Refer to getFontList() for available fonts."),ze||Ie.noFallback||(ze=Ur.times[Ae])==null&&(ze=Ur.times.normal),ze},xi=g.__private__.putInfo=function(){var z=jn(),Ae=function(Le){return Le};for(var Ie in d!==null&&(Ae=On.encryptor(z,0)),Ee("<<"),Ee("/Producer ("+pn(Ae("jsPDF "+lr.version))+")"),It)It.hasOwnProperty(Ie)&&It[Ie]&&Ee("/"+Ie.substr(0,1).toUpperCase()+Ie.substr(1)+" ("+pn(Ae(It[Ie]))+")");Ee("/CreationDate ("+pn(Ae(ne))+")"),Ee(">>"),Ee("endobj")},Lo=g.__private__.putCatalog=function(z){var Ae=(z=z||{}).rootDictionaryObjId||_e;switch(jn(),Ee("<<"),Ee("/Type /Catalog"),Ee("/Pages "+Ae+" 0 R"),Et||(Et="fullwidth"),Et){case"fullwidth":Ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ee("/OpenAction [3 0 R /Fit]");break;case"original":Ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ie=""+Et;Ie.substr(Ie.length-1)==="%"&&(Et=parseInt(Et)/100),typeof Et=="number"&&Ee("/OpenAction [3 0 R /XYZ null null "+O(Et)+"]")}switch(Rt||(Rt="continuous"),Rt){case"continuous":Ee("/PageLayout /OneColumn");break;case"single":Ee("/PageLayout /SinglePage");break;case"two":case"twoleft":Ee("/PageLayout /TwoColumnLeft");break;case"tworight":Ee("/PageLayout /TwoColumnRight")}zt&&Ee("/PageMode /"+zt),Gr.publish("putCatalog"),Ee(">>"),Ee("endobj")},JA=g.__private__.putTrailer=function(){Ee("trailer"),Ee("<<"),Ee("/Size "+(ce+1)),Ee("/Root "+ce+" 0 R"),Ee("/Info "+(ce-1)+" 0 R"),d!==null&&Ee("/Encrypt "+On.oid+" 0 R"),Ee("/ID [ <"+J+"> <"+J+"> ]"),Ee(">>")},Gu=g.__private__.putHeader=function(){Ee("%PDF-"+b),Ee("%ºß¬à")},qu=g.__private__.putXRef=function(){var z="0000000000";Ee("xref"),Ee("0 "+(ce+1)),Ee("0000000000 65535 f ");for(var Ae=1;Ae<=ce;Ae++)typeof be[Ae]=="function"?Ee((z+be[Ae]()).slice(-10)+" 00000 n "):be[Ae]!==void 0?Ee((z+be[Ae]).slice(-10)+" 00000 n "):Ee("0000000000 00000 n ")},Uo=g.__private__.buildDocument=function(){tt(),Fe(he),Gr.publish("buildDocument"),Gu(),Ye(),Oc(),ma(),d!==null&&gi(),xi(),Lo();var z=fe;return qu(),JA(),Ee("startxref"),Ee(""+z),Ee("%%EOF"),Fe(de[Y]),he.join(`
`)},Hc=g.__private__.getBlob=function(z){return new Blob([Qe(z)],{type:"application/pdf"})},Mo=g.output=g.__private__.output=Ia(function(z,Ae){switch(typeof(Ae=Ae||{})=="string"?Ae={filename:Ae}:Ae.filename=Ae.filename||"generated.pdf",z){case void 0:return Uo();case"save":g.save(Ae.filename);break;case"arraybuffer":return Qe(Uo());case"blob":return Hc(Uo());case"bloburi":case"bloburl":if(Er.URL!==void 0&&typeof Er.URL.createObjectURL=="function")return Er.URL&&Er.URL.createObjectURL(Hc(Uo()))||void 0;as.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ie="",Le=Uo();try{Ie=vS(Le)}catch{Ie=vS(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+Ae.filename+";base64,"+Ie;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var ze="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ot=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ae.pdfObjectUrl&&(ze=Ae.pdfObjectUrl,ot="");var St='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ze+'"'+ot+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ae)+");<\/script></body></html>",Ht=Er.open();return Ht!==null&&Ht.document.write(St),Ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Er)==="[object Window]"){var N='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ae.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ae.filename+'" width="500px" height="400px" /></body></html>',X=Er.open();if(X!==null){X.document.write(N);var ae=this;X.document.documentElement.querySelector("#pdfViewer").onload=function(){X.document.title=Ae.filename,X.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ae.output("bloburl"))}}return X}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Er)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ae)+'"></iframe></body></html>',He=Er.open();if(He!==null&&(He.document.write(ye),He.document.title=Ae.filename),He||typeof safari>"u")return He;break;case"datauri":case"dataurl":return Er.document.location.href=this.output("datauristring",Ae);default:return null}}),uo=function(z){return Array.isArray(fa)===!0&&fa.indexOf(z)>-1};switch(n){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=uo("px_scaling")==1?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);pt=n}var On=null;ie(),G();var Po=function(z){return d!==null?On.encryptor(z,0):function(Ae){return Ae}},Ao=g.__private__.getPageInfo=g.getPageInfo=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:nr[z].objId,pageNumber:z,pageContext:nr[z]}},pr=g.__private__.getPageInfoByObjId=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ae in nr)if(nr[Ae].objId===z)break;return Ao(Ae)},fo=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:nr[Y].objId,pageNumber:Y,pageContext:nr[Y]}};g.addPage=function(){return Al.apply(this,arguments),this},g.setPage=function(){return co.apply(this,arguments),Fe.call(this,de[Y]),this},g.insertPage=function(z){return this.addPage(),this.movePage(Y,z),this},g.movePage=function(z,Ae){var Ie,Le;if(z>Ae){Ie=de[z],Le=nr[z];for(var ze=z;ze>Ae;ze--)de[ze]=de[ze-1],nr[ze]=nr[ze-1];de[Ae]=Ie,nr[Ae]=Le,this.setPage(Ae)}else if(z<Ae){Ie=de[z],Le=nr[z];for(var ot=z;ot<Ae;ot++)de[ot]=de[ot+1],nr[ot]=nr[ot+1];de[Ae]=Ie,nr[Ae]=Le,this.setPage(Ae)}return this},g.deletePage=function(){return dl.apply(this,arguments),this},g.__private__.text=g.text=function(z,Ae,Ie,Le,ze){var ot,St,Ht,N,X,ae,ye,He,et,Tt=(Le=Le||{}).scope||this;if(typeof z=="number"&&typeof Ae=="number"&&(typeof Ie=="string"||Array.isArray(Ie))){var gr=Ie;Ie=Ae,Ae=z,z=gr}if(arguments[3]instanceof Gt?(E("The transform parameter of text() with a Matrix value"),et=ze):(Ht=arguments[4],N=arguments[5],qn(ye=arguments[3])==="object"&&ye!==null||(typeof Ht=="string"&&(N=Ht,Ht=null),typeof ye=="string"&&(N=ye,ye=null),typeof ye=="number"&&(Ht=ye,ye=null),Le={flags:ye,angle:Ht,align:N})),isNaN(Ae)||isNaN(Ie)||z==null)throw new Error("Invalid arguments passed to jsPDF.text");if(z.length===0)return Tt;var tn="",kr=!1,Tn=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:en,Ln=Tt.internal.scaleFactor;function go($r){return $r=$r.split("	").join(Array(Le.TabLen||9).join(" ")),pn($r,ye)}function Ss($r){for(var Wr,Xn=$r.concat(),Ts=[],vo=Xn.length;vo--;)typeof(Wr=Xn.shift())=="string"?Ts.push(Wr):Array.isArray($r)&&(Wr.length===1||Wr[1]===void 0&&Wr[2]===void 0)?Ts.push(Wr[0]):Ts.push([Wr[0],Wr[1],Wr[2]]);return Ts}function bi($r,Wr){var Xn;if(typeof $r=="string")Xn=Wr($r)[0];else if(Array.isArray($r)){for(var Ts,vo,ru=$r.concat(),nu=[],oc=ru.length;oc--;)typeof(Ts=ru.shift())=="string"?nu.push(Wr(Ts)[0]):Array.isArray(Ts)&&typeof Ts[0]=="string"&&(vo=Wr(Ts[0],Ts[1],Ts[2]),nu.push([vo[0],vo[1],vo[2]]));Xn=nu}return Xn}var wl=!1,Kc=!0;if(typeof z=="string")wl=!0;else if(Array.isArray(z)){var td=z.concat();St=[];for(var Yu,Ys=td.length;Ys--;)(typeof(Yu=td.shift())!="string"||Array.isArray(Yu)&&typeof Yu[0]!="string")&&(Kc=!1);wl=Kc}if(wl===!1)throw new Error('Type of text must be string or Array. "'+z+'" is not recognized.');typeof z=="string"&&(z=z.match(/[\r?\n]/)?z.split(/\r\n|\r|\n/g):[z]);var $c=ut/Tt.internal.scaleFactor,Ju=$c*(Tn-1);switch(Le.baseline){case"bottom":Ie-=Ju;break;case"top":Ie+=$c-Ju;break;case"hanging":Ie+=$c-2*Ju;break;case"middle":Ie+=$c/2-Ju}if((ae=Le.maxWidth||0)>0&&(typeof z=="string"?z=Tt.splitTextToSize(z,ae):Object.prototype.toString.call(z)==="[object Array]"&&(z=z.reduce(function($r,Wr){return $r.concat(Tt.splitTextToSize(Wr,ae))},[]))),ot={text:z,x:Ae,y:Ie,options:Le,mutex:{pdfEscape:pn,activeFontKey:Ft,fonts:vr,activeFontSize:ut}},Gr.publish("preProcessText",ot),z=ot.text,Ht=(Le=ot.options).angle,!(et instanceof Gt)&&Ht&&typeof Ht=="number"){Ht*=Math.PI/180,Le.rotationDirection===0&&(Ht=-Ht),D===k.ADVANCED&&(Ht=-Ht);var Xu=Math.cos(Ht),rd=Math.sin(Ht);et=new Gt(Xu,rd,-rd,Xu,0,0)}else Ht&&Ht instanceof Gt&&(et=Ht);D!==k.ADVANCED||et||(et=on),(X=Le.charSpace||ec)!==void 0&&(tn+=C(F(X))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(He=Le.horizontalScale)!==void 0&&(tn+=C(100*He)+` Tz
`),Le.lang;var Ci=-1,pp=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,Rf=Tt.internal.getCurrentPageInfo().pageContext;switch(pp){case 0:case!1:case"fill":Ci=0;break;case 1:case!0:case"stroke":Ci=1;break;case 2:case"fillThenStroke":Ci=2;break;case 3:case"invisible":Ci=3;break;case 4:case"fillAndAddForClipping":Ci=4;break;case 5:case"strokeAndAddPathForClipping":Ci=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ci=6;break;case 7:case"addToPathForClipping":Ci=7}var n0=Rf.usedRenderingMode!==void 0?Rf.usedRenderingMode:-1;Ci!==-1?tn+=Ci+` Tr
`:n0!==-1&&(tn+=`0 Tr
`),Ci!==-1&&(Rf.usedRenderingMode=Ci),N=Le.align||"left";var xo,pa=ut*Tn,Wc=Tt.internal.pageSize.getWidth(),Lf=vr[Ft];X=Le.charSpace||ec,ae=Le.maxWidth||0,ye=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var ac=[],Yc=function($r){return Tt.getStringUnitWidth($r,{font:Lf,charSpace:X,fontSize:ut,doKerning:!1})*ut/Ln};if(Object.prototype.toString.call(z)==="[object Array]"){var ri;St=Ss(z),N!=="left"&&(xo=St.map(Yc));var Ra,Jc=0;if(N==="right"){Ae-=xo[0],z=[],Ys=St.length;for(var Ei=0;Ei<Ys;Ei++)Ei===0?(Ra=Ha(Ae),ri=Ps(Ie)):(Ra=F(Jc-xo[Ei]),ri=-pa),z.push([St[Ei],Ra,ri]),Jc=xo[Ei]}else if(N==="center"){Ae-=xo[0]/2,z=[],Ys=St.length;for(var Ho=0;Ho<Ys;Ho++)Ho===0?(Ra=Ha(Ae),ri=Ps(Ie)):(Ra=F((Jc-xo[Ho])/2),ri=-pa),z.push([St[Ho],Ra,ri]),Jc=xo[Ho]}else if(N==="left"){z=[],Ys=St.length;for(var bl=0;bl<Ys;bl++)z.push(St[bl])}else if(N==="justify"&&Lf.encoding==="Identity-H"){z=[],Ys=St.length,ae=ae!==0?ae:Wc;for(var Vo=0,xs=0;xs<Ys;xs++)if(ri=xs===0?Ps(Ie):-pa,Ra=xs===0?Ha(Ae):Vo,xs<Ys-1){var zo=F((ae-xo[xs])/(St[xs].split(" ").length-1)),js=St[xs].split(" ");z.push([js[0]+" ",Ra,ri]),Vo=0;for(var _i=1;_i<js.length;_i++){var Zu=(Yc(js[_i-1]+" "+js[_i])-Yc(js[_i]))*Ln+zo;_i==js.length-1?z.push([js[_i],Zu,0]):z.push([js[_i]+" ",Zu,0]),Vo-=Zu}}else z.push([St[xs],Ra,ri]);z.push(["",Vo,0])}else{if(N!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(z=[],Ys=St.length,ae=ae!==0?ae:Wc,xs=0;xs<Ys;xs++)ri=xs===0?Ps(Ie):-pa,Ra=xs===0?Ha(Ae):0,xs<Ys-1?ac.push(C(F((ae-xo[xs])/(St[xs].split(" ").length-1)))):ac.push(0),z.push([St[xs],Ra,ri])}}var Cl=typeof Le.R2L=="boolean"?Le.R2L:Dt;Cl===!0&&(z=bi(z,function($r,Wr,Xn){return[$r.split("").reverse().join(""),Wr,Xn]})),ot={text:z,x:Ae,y:Ie,options:Le,mutex:{pdfEscape:pn,activeFontKey:Ft,fonts:vr,activeFontSize:ut}},Gr.publish("postProcessText",ot),z=ot.text,kr=ot.mutex.isHex||!1;var nd=vr[Ft].encoding;nd!=="WinAnsiEncoding"&&nd!=="StandardEncoding"||(z=bi(z,function($r,Wr,Xn){return[go($r),Wr,Xn]})),St=Ss(z),z=[];for(var Xc,Zc,eu,eA=0,sd=1,tu=Array.isArray(St[0])?sd:eA,ic="",tA=function($r,Wr,Xn){var Ts="";return Xn instanceof Gt?(Xn=typeof Le.angle=="number"?mn(Xn,new Gt(1,0,0,1,$r,Wr)):mn(new Gt(1,0,0,1,$r,Wr),Xn),D===k.ADVANCED&&(Xn=mn(new Gt(1,0,0,-1,0,0),Xn)),Ts=Xn.join(" ")+` Tm
`):Ts=C($r)+" "+C(Wr)+` Td
`,Ts},vs=0;vs<St.length;vs++){switch(ic="",tu){case sd:eu=(kr?"<":"(")+St[vs][0]+(kr?">":")"),Xc=parseFloat(St[vs][1]),Zc=parseFloat(St[vs][2]);break;case eA:eu=(kr?"<":"(")+St[vs]+(kr?">":")"),Xc=Ha(Ae),Zc=Ps(Ie)}ac!==void 0&&ac[vs]!==void 0&&(ic=ac[vs]+` Tw
`),vs===0?z.push(ic+tA(Xc,Zc,et)+eu):tu===eA?z.push(ic+eu):tu===sd&&z.push(ic+tA(Xc,Zc,et)+eu)}z=tu===eA?z.join(` Tj
T* `):z.join(` Tj
`),z+=` Tj
`;var Zi=`BT
/`;return Zi+=Ft+" "+ut+` Tf
`,Zi+=C(ut*Tn)+` TL
`,Zi+=Oo+`
`,Zi+=tn,Zi+=z,Ee(Zi+="ET"),m[Ft]=!0,Tt};var XA=g.__private__.clip=g.clip=function(z){return Ee(z==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return XA("evenodd")},g.__private__.discardPath=g.discardPath=function(){return Ee("n"),this};var Oa=g.__private__.isValidStyle=function(z){var Ae=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(z)!==-1&&(Ae=!0),Ae};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(z){return Oa(z)&&(u=z),this};var vi=g.__private__.getStyle=g.getStyle=function(z){var Ae=u;switch(z){case"D":case"S":Ae="S";break;case"F":Ae="f";break;case"FD":case"DF":Ae="B";break;case"f":case"f*":case"B":case"B*":Ae=z}return Ae},ti=g.close=function(){return Ee("h"),this};g.stroke=function(){return Ee("S"),this},g.fill=function(z){return ho("f",z),this},g.fillEvenOdd=function(z){return ho("f*",z),this},g.fillStroke=function(z){return ho("B",z),this},g.fillStrokeEvenOdd=function(z){return ho("B*",z),this};var ho=function(z,Ae){qn(Ae)==="object"?jo(Ae,z):Ee(z)},yi=function(z){z===null||D===k.ADVANCED&&z===void 0||(z=vi(z),Ee(z))};function hl(z,Ae,Ie,Le,ze){var ot=new cm(Ae||this.boundingBox,Ie||this.xStep,Le||this.yStep,this.gState,ze||this.matrix);ot.stream=this.stream;var St=z+"$$"+this.cloneIndex+++"$$";return Rn(St,ot),ot}var jo=function(z,Ae){var Ie=da[z.key],Le=Fr[Ie];if(Le instanceof ch)Ee("q"),Ee(Ku(Ae)),Le.gState&&g.setGState(Le.gState),Ee(z.matrix.toString()+" cm"),Ee("/"+Ie+" sh"),Ee("Q");else if(Le instanceof cm){var ze=new Gt(1,0,0,-1,0,Va());z.matrix&&(ze=ze.multiply(z.matrix||on),Ie=hl.call(Le,z.key,z.boundingBox,z.xStep,z.yStep,ze).id),Ee("q"),Ee("/Pattern cs"),Ee("/"+Ie+" scn"),Le.gState&&g.setGState(Le.gState),Ee(Ae),Ee("Q")}},Ku=function(z){switch(z){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},wi=g.moveTo=function(z,Ae){return Ee(C(F(z))+" "+C(H(Ae))+" m"),this},Qa=g.lineTo=function(z,Ae){return Ee(C(F(z))+" "+C(H(Ae))+" l"),this},mo=g.curveTo=function(z,Ae,Ie,Le,ze,ot){return Ee([C(F(z)),C(H(Ae)),C(F(Ie)),C(H(Le)),C(F(ze)),C(H(ot)),"c"].join(" ")),this};g.__private__.line=g.line=function(z,Ae,Ie,Le,ze){if(isNaN(z)||isNaN(Ae)||isNaN(Ie)||isNaN(Le)||!Oa(ze))throw new Error("Invalid arguments passed to jsPDF.line");return D===k.COMPAT?this.lines([[Ie-z,Le-Ae]],z,Ae,[1,1],ze||"S"):this.lines([[Ie-z,Le-Ae]],z,Ae,[1,1]).stroke()},g.__private__.lines=g.lines=function(z,Ae,Ie,Le,ze,ot){var St,Ht,N,X,ae,ye,He,et,Tt,gr,tn,kr;if(typeof z=="number"&&(kr=Ie,Ie=Ae,Ae=z,z=kr),Le=Le||[1,1],ot=ot||!1,isNaN(Ae)||isNaN(Ie)||!Array.isArray(z)||!Array.isArray(Le)||!Oa(ze)||typeof ot!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(wi(Ae,Ie),St=Le[0],Ht=Le[1],X=z.length,gr=Ae,tn=Ie,N=0;N<X;N++)(ae=z[N]).length===2?(gr=ae[0]*St+gr,tn=ae[1]*Ht+tn,Qa(gr,tn)):(ye=ae[0]*St+gr,He=ae[1]*Ht+tn,et=ae[2]*St+gr,Tt=ae[3]*Ht+tn,gr=ae[4]*St+gr,tn=ae[5]*Ht+tn,mo(ye,He,et,Tt,gr,tn));return ot&&ti(),yi(ze),this},g.path=function(z){for(var Ae=0;Ae<z.length;Ae++){var Ie=z[Ae],Le=Ie.c;switch(Ie.op){case"m":wi(Le[0],Le[1]);break;case"l":Qa(Le[0],Le[1]);break;case"c":mo.apply(this,Le);break;case"h":ti()}}return this},g.__private__.rect=g.rect=function(z,Ae,Ie,Le,ze){if(isNaN(z)||isNaN(Ae)||isNaN(Ie)||isNaN(Le)||!Oa(ze))throw new Error("Invalid arguments passed to jsPDF.rect");return D===k.COMPAT&&(Le=-Le),Ee([C(F(z)),C(H(Ae)),C(F(Ie)),C(F(Le)),"re"].join(" ")),yi(ze),this},g.__private__.triangle=g.triangle=function(z,Ae,Ie,Le,ze,ot,St){if(isNaN(z)||isNaN(Ae)||isNaN(Ie)||isNaN(Le)||isNaN(ze)||isNaN(ot)||!Oa(St))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ie-z,Le-Ae],[ze-Ie,ot-Le],[z-ze,Ae-ot]],z,Ae,[1,1],St,!0),this},g.__private__.roundedRect=g.roundedRect=function(z,Ae,Ie,Le,ze,ot,St){if(isNaN(z)||isNaN(Ae)||isNaN(Ie)||isNaN(Le)||isNaN(ze)||isNaN(ot)||!Oa(St))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ht=4/3*(Math.SQRT2-1);return ze=Math.min(ze,.5*Ie),ot=Math.min(ot,.5*Le),this.lines([[Ie-2*ze,0],[ze*Ht,0,ze,ot-ot*Ht,ze,ot],[0,Le-2*ot],[0,ot*Ht,-ze*Ht,ot,-ze,ot],[2*ze-Ie,0],[-ze*Ht,0,-ze,-ot*Ht,-ze,-ot],[0,2*ot-Le],[0,-ot*Ht,ze*Ht,-ot,ze,-ot]],z+ze,Ae,[1,1],St,!0),this},g.__private__.ellipse=g.ellipse=function(z,Ae,Ie,Le,ze){if(isNaN(z)||isNaN(Ae)||isNaN(Ie)||isNaN(Le)||!Oa(ze))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ot=4/3*(Math.SQRT2-1)*Ie,St=4/3*(Math.SQRT2-1)*Le;return wi(z+Ie,Ae),mo(z+Ie,Ae-St,z+ot,Ae-Le,z,Ae-Le),mo(z-ot,Ae-Le,z-Ie,Ae-St,z-Ie,Ae),mo(z-Ie,Ae+St,z-ot,Ae+Le,z,Ae+Le),mo(z+ot,Ae+Le,z+Ie,Ae+St,z+Ie,Ae),yi(ze),this},g.__private__.circle=g.circle=function(z,Ae,Ie,Le){if(isNaN(z)||isNaN(Ae)||isNaN(Ie)||!Oa(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(z,Ae,Ie,Ie,Le)},g.setFont=function(z,Ae,Ie){return Ie&&(Ae=L(Ae,Ie)),Ft=fl(z,Ae,{disableWarning:!1}),this};var Ms=g.__private__.getFont=g.getFont=function(){return vr[fl.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var z,Ae,Ie={};for(z in Ur)if(Ur.hasOwnProperty(z))for(Ae in Ie[z]=[],Ur[z])Ur[z].hasOwnProperty(Ae)&&Ie[z].push(Ae);return Ie},g.addFont=function(z,Ae,Ie,Le,ze){var ot=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ot.indexOf(arguments[3])!==-1?ze=arguments[3]:arguments[3]&&ot.indexOf(arguments[3])==-1&&(Ie=L(Ie,Le)),ze=ze||"Identity-H",ul.call(this,z,Ae,Ie,ze)};var en,ml=t.lineWidth||.200025,po=g.__private__.getLineWidth=g.getLineWidth=function(){return ml},$u=g.__private__.setLineWidth=g.setLineWidth=function(z){return ml=z,Ee(C(F(z))+" w"),this};g.__private__.setLineDash=lr.API.setLineDash=lr.API.setLineDashPattern=function(z,Ae){if(z=z||[],Ae=Ae||0,isNaN(Ae)||!Array.isArray(z))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return z=z.map(function(Ie){return C(F(Ie))}).join(" "),Ae=C(F(Ae)),Ee("["+z+"] "+Ae+" d"),this};var Xl=g.__private__.getLineHeight=g.getLineHeight=function(){return ut*en};g.__private__.getLineHeight=g.getLineHeight=function(){return ut*en};var Zl=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(z){return typeof(z=z||1.15)=="number"&&(en=z),this},Xi=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return en};Zl(t.lineHeight);var Ha=g.__private__.getHorizontalCoordinate=function(z){return F(z)},Ps=g.__private__.getVerticalCoordinate=function(z){return D===k.ADVANCED?z:nr[Y].mediaBox.topRightY-nr[Y].mediaBox.bottomLeftY-F(z)},ZA=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(z){return C(Ha(z))},pl=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(z){return C(Ps(z))},Da=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Te(Da)},g.__private__.setStrokeColor=g.setDrawColor=function(z,Ae,Ie,Le){return Da=ke({ch1:z,ch2:Ae,ch3:Ie,ch4:Le,pdfColorType:"draw",precision:2}),Ee(Da),this};var gl=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Te(gl)},g.__private__.setFillColor=g.setFillColor=function(z,Ae,Ie,Le){return gl=ke({ch1:z,ch2:Ae,ch3:Ie,ch4:Le,pdfColorType:"fill",precision:2}),Ee(gl),this};var Oo=t.textColor||"0 g",Vc=g.__private__.getTextColor=g.getTextColor=function(){return Te(Oo)};g.__private__.setTextColor=g.setTextColor=function(z,Ae,Ie,Le){return Oo=ke({ch1:z,ch2:Ae,ch3:Ie,ch4:Le,pdfColorType:"text",precision:3}),this};var ec=t.charSpace,zc=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(ec||0)};g.__private__.setCharSpace=g.setCharSpace=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ec=z,this};var Wu=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(z){var Ae=g.CapJoinStyles[z];if(Ae===void 0)throw new Error("Line cap style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wu=Ae,Ee(Ae+" J"),this};var tc=0;g.__private__.setLineJoin=g.setLineJoin=function(z){var Ae=g.CapJoinStyles[z];if(Ae===void 0)throw new Error("Line join style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return tc=Ae,Ee(Ae+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(z){if(z=z||0,isNaN(z))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ee(C(F(z))+" M"),this},g.GState=k2,g.setGState=function(z){(z=typeof z=="string"?an[ns[z]]:xl(null,z)).equals(gs)||(Ee("/"+z.id+" gs"),gs=z)};var xl=function(z,Ae){if(!z||!ns[z]){var Ie=!1;for(var Le in an)if(an.hasOwnProperty(Le)&&an[Le].equals(Ae)){Ie=!0;break}if(Ie)Ae=an[Le];else{var ze="GS"+(Object.keys(an).length+1).toString(10);an[ze]=Ae,Ae.id=ze}return z&&(ns[z]=Ae.id),Gr.publish("addGState",Ae),Ae}};g.addGState=function(z,Ae){return xl(z,Ae),this},g.saveGraphicsState=function(){return Ee("q"),Dn.push({key:Ft,size:ut,color:Oo}),this},g.restoreGraphicsState=function(){Ee("Q");var z=Dn.pop();return Ft=z.key,ut=z.size,Oo=z.color,gs=null,this},g.setCurrentTransformationMatrix=function(z){return Ee(z.toString()+" cm"),this},g.comment=function(z){return Ee("#"+z),this};var rc=function(z,Ae){var Ie=z||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ie},set:function(ot){isNaN(ot)||(Ie=parseFloat(ot))}});var Le=Ae||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(ot){isNaN(ot)||(Le=parseFloat(ot))}});var ze="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ze},set:function(ot){ze=ot.toString()}}),this},Gc=function(z,Ae,Ie,Le){rc.call(this,z,Ae),this.type="rect";var ze=Ie||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ze},set:function(St){isNaN(St)||(ze=parseFloat(St))}});var ot=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ot},set:function(St){isNaN(St)||(ot=parseFloat(St))}}),this},nc=function(){this.page=jr,this.currentPage=Y,this.pages=de.slice(0),this.pagesContext=nr.slice(0),this.x=br,this.y=Zt,this.matrix=hn,this.width=yl(Y),this.height=Va(Y),this.outputDestination=Ue,this.id="",this.objectNumber=-1};nc.prototype.restore=function(){jr=this.page,Y=this.currentPage,nr=this.pagesContext,de=this.pages,br=this.x,Zt=this.y,hn=this.matrix,sc(Y,this.width),qc(Y,this.height),Ue=this.outputDestination};var vl=function(z,Ae,Ie,Le,ze){Ba.push(new nc),jr=Y=0,de=[],br=z,Zt=Ae,hn=ze,Fa([Ie,Le])},ed=function(z){if(_s[z])Ba.pop().restore();else{var Ae=new nc,Ie="Xo"+(Object.keys(Wn).length+1).toString(10);Ae.id=Ie,_s[z]=Ie,Wn[Ie]=Ae,Gr.publish("addFormObject",Ae),Ba.pop().restore()}};for(var Qo in g.beginFormObject=function(z,Ae,Ie,Le,ze){return vl(z,Ae,Ie,Le,ze),this},g.endFormObject=function(z){return ed(z),this},g.doFormObject=function(z,Ae){var Ie=Wn[_s[z]];return Ee("q"),Ee(Ae.toString()+" cm"),Ee("/"+Ie.id+" Do"),Ee("Q"),this},g.getFormObject=function(z){var Ae=Wn[_s[z]];return{x:Ae.x,y:Ae.y,width:Ae.width,height:Ae.height,matrix:Ae.matrix}},g.save=function(z,Ae){return z=z||"generated.pdf",(Ae=Ae||{}).returnPromise=Ae.returnPromise||!1,Ae.returnPromise===!1?(ih(Hc(Uo()),z),typeof ih.unload=="function"&&Er.setTimeout&&setTimeout(ih.unload,911),this):new Promise(function(Ie,Le){try{var ze=ih(Hc(Uo()),z);typeof ih.unload=="function"&&Er.setTimeout&&setTimeout(ih.unload,911),Ie(ze)}catch(ot){Le(ot.message)}})},lr.API)lr.API.hasOwnProperty(Qo)&&(Qo==="events"&&lr.API.events.length?function(z,Ae){var Ie,Le,ze;for(ze=Ae.length-1;ze!==-1;ze--)Ie=Ae[ze][0],Le=Ae[ze][1],z.subscribe.apply(z,[Ie].concat(typeof Le=="function"?[Le]:Le))}(Gr,lr.API.events):g[Qo]=lr.API[Qo]);var yl=g.getPageWidth=function(z){return(nr[z=z||Y].mediaBox.topRightX-nr[z].mediaBox.bottomLeftX)/pt},sc=g.setPageWidth=function(z,Ae){nr[z].mediaBox.topRightX=Ae*pt+nr[z].mediaBox.bottomLeftX},Va=g.getPageHeight=function(z){return(nr[z=z||Y].mediaBox.topRightY-nr[z].mediaBox.bottomLeftY)/pt},qc=g.setPageHeight=function(z,Ae){nr[z].mediaBox.topRightY=Ae*pt+nr[z].mediaBox.bottomLeftY};return g.internal={pdfEscape:pn,getStyle:vi,getFont:Ms,getFontSize:lt,getCharSpace:zc,getTextColor:Vc,getLineHeight:Xl,getLineHeightFactor:Xi,getLineWidth:po,write:De,getHorizontalCoordinate:Ha,getVerticalCoordinate:Ps,getCoordinateString:ZA,getVerticalCoordinateString:pl,collections:{},newObject:jn,newAdditionalObject:Be,newObjectDeferred:Yn,newObjectDeferredBegin:me,getFilters:Ke,putStream:nt,events:Gr,scaleFactor:pt,pageSize:{getWidth:function(){return yl(Y)},setWidth:function(z){sc(Y,z)},getHeight:function(){return Va(Y)},setHeight:function(z){qc(Y,z)}},encryptionOptions:d,encryption:On,getEncryptor:Po,output:Mo,getNumberOfPages:Sn,pages:de,out:Ee,f2:O,f3:R,getPageInfo:Ao,getPageInfoByObjId:pr,getCurrentPageInfo:fo,getPDFVersion:y,Point:rc,Rectangle:Gc,Matrix:Gt,hasHotfix:uo},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return yl(Y)},set:function(z){sc(Y,z)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Va(Y)},set:function(z){qc(Y,z)},enumerable:!0,configurable:!0}),zu.call(g,$e),Ft="F1",Al(s,r),Gr.publish("initialized"),g}rm.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},rm.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},rm.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},rm.prototype.processOwnerPassword=function(t,e){return wS(yS(e).substr(0,5),t)},rm.prototype.encryptor=function(t,e){var r=yS(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return wS(r,n)}},k2.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||qn(t)!==qn(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},lr.API={events:[]},lr.version="2.5.2";var Vs=lr.API,H4=1,Yh=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},D0=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Rr=function(t){return t.toFixed(2)},Fd=function(t){return t.toFixed(5)};Vs.__acroform__={};var Ro=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},t6=function(t){return t*H4},vu=function(t){var e=new TP,r=rr.internal.getHeight(t)||0,n=rr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Rr(n)),Number(Rr(r))],e},yle=Vs.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},wle=Vs.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},ble=Vs.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(t&1<<e)==0?0:1},ia=Vs.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return ble(t,e-1)},oa=Vs.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return yle(t,e-1)},la=Vs.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return wle(t,e-1)},Cle=Vs.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],a=t[1],i=t[2],o=t[3],l={};return l.lowerLeft_X=r(s)||0,l.lowerLeft_Y=n(a+o)||0,l.upperRight_X=r(s+i)||0,l.upperRight_Y=n(a)||0,[Number(Rr(l.lowerLeft_X)),Number(Rr(l.lowerLeft_Y)),Number(Rr(l.upperRight_X)),Number(Rr(l.upperRight_Y))]},Ele=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=bS(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+Rr(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=vu(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},bS=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(R){return R.split(`
`)}):s.map(function(R){return[R]});var a=r,i=rr.internal.getHeight(t)||0;i=i<0?-i:i;var o=rr.internal.getWidth(t)||0;o=o<0?-o:o;var l=function(R,F,Q){if(R+1<s.length){var H=F+" "+s[R+1][0];return Ov(H,t,Q).width<=o-4}return!1};a++;e:for(;a>0;){e="",a--;var u,d,h=Ov("3",t,a).height,m=t.multiline?i-a:(i-h)/2,g=m+=2,b=0,y=0,_=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ov(e,t,a=12).width+", FieldWidth:"+o+`
`;break}for(var T="",k=0,D=0;D<s.length;D++)if(s.hasOwnProperty(D)){var M=!1;if(s[D].length!==1&&_!==s[D].length-1){if((h+2)*(k+2)+2>i)continue e;T+=s[D][_],M=!0,y=D,D--}else{T=(T+=s[D][_]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var P=parseInt(D),L=l(P,T,a),C=D>=s.length-1;if(L&&!C){T+=" ",_=0;continue}if(L||C){if(C)y=P;else if(t.multiline&&(h+2)*(k+2)+2>i)continue e}else{if(!t.multiline||(h+2)*(k+2)+2>i)continue e;y=P}}for(var E="",B=b;B<=y;B++){var O=s[B];if(t.multiline){if(B===y){E+=O[_]+" ",_=(_+1)%O.length;continue}if(B===b){E+=O[O.length-1]+" ";continue}}E+=O[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,d=Ov(E,t,a).width,t.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=Rr(u)+" "+Rr(g)+` Td
`,e+="("+Yh(E)+`) Tj
`,e+=-Rr(u)+` 0 Td
`,g=-(a+2),d=0,b=M?y:y+1,k++,T=""}break}return n.text=e,n.fontSize=a,n},Ov=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},_le={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Sle=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},Tle=function(t,e){for(var r in t)if(t.hasOwnProperty(r)){var n=r,s=t[r];e.internal.newObjectDeferredBegin(s.objId,!0),qn(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete t[n]}},Nle=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Uc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(_le)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");H4=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new NP,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];a.objId=void 0,a.hasAnnotation&&Sle(a,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var a=!n;for(var i in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(i)){var o=n[i],l=[],u=o.Rect;if(o.Rect&&(o.Rect=Cle(o.Rect,s)),s.internal.newObjectDeferredBegin(o.objId,!0),o.DA=rr.createDefaultAppearanceStream(o),qn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(l=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Ele(o);l.push({key:"AP",value:"<</N "+d+">>"}),s.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var h="";for(var m in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(m)){var g=o.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var i in g)if(g.hasOwnProperty(i)){var b=g[i];typeof b=="function"&&(b=b.call(s,o)),h+="/"+i+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=g)=="function"&&(b=b.call(s,o)),h+="/"+i+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:o.objId}),s.internal.out("endobj")}a&&Tle(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},SP=Vs.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(i){return i};if(Array.isArray(t)){for(var s="[",a=0;a<t.length;a++)switch(a!==0&&(s+=" "),qn(t[a])){case"boolean":case"number":case"object":s+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Yh(n(t[a].toString()))+")"):s+=t[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},bE=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Yh(n(t))+")"},Eu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Eu.prototype.toString=function(){return this.objId+" 0 R"},Eu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Eu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:SP(s,this.objId,this.scope)}):s instanceof Eu?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var TP=function(){Eu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Ro(TP,Eu);var NP=function(){Eu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Yh(r(t))+")"}},set:function(r){t=r}})};Ro(NP,Eu);var Uc=function t(){Eu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ia(e,3)},set:function(T){T?this.F=oa(e,3):this.F=la(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');r=T}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(T){n=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(T){n[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(T){n[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(T){n[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(T){n[3]=T}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof I2)return;a="FieldObject"+t.FieldNum++}var T=function(k){return k};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+Yh(T(a))+")"},set:function(T){a=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(T){a=T}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(T){i=T}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(T){o=T}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(T){l=T}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/H4:u},set:function(T){u=T}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(T){d=T}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof I2||this instanceof yh))return bE(h,this.objId,this.scope)},set:function(T){T=T.toString(),h=T}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ja?m:bE(m,this.objId,this.scope)},set:function(T){T=T.toString(),m=this instanceof Ja?T:T.substr(0,1)==="("?D0(T.substr(1,T.length-2)):D0(T)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ja?D0(m.substr(1,m.length-1)):m},set:function(T){T=T.toString(),m=this instanceof Ja?"/"+T:T}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Ja?g:bE(g,this.objId,this.scope)},set:function(T){T=T.toString(),g=this instanceof Ja?T:T.substr(0,1)==="("?D0(T.substr(1,T.length-2)):D0(T)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ja?D0(g.substr(1,g.length-1)):g},set:function(T){T=T.toString(),g=this instanceof Ja?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(T){T=!!T,y=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(T){b=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,1)},set:function(T){T?this.Ff=oa(this.Ff,1):this.Ff=la(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,2)},set:function(T){T?this.Ff=oa(this.Ff,2):this.Ff=la(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,3)},set:function(T){T?this.Ff=oa(this.Ff,3):this.Ff=la(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');_=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(_){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:_=2;break;case"center":case 1:_=1;break;case"left":case 0:default:_=0}}})};Ro(Uc,Eu);var ym=function(){Uc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return SP(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(a,i,o){o||(o=1);for(var l,u=[];l=i.exec(a);)u.push(l[o]);return u}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,18)},set:function(r){r?this.Ff=oa(this.Ff,18):this.Ff=la(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=oa(this.Ff,19):this.Ff=la(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,20)},set:function(r){r?(this.Ff=oa(this.Ff,20),e.sort()):this.Ff=la(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,22)},set:function(r){r?this.Ff=oa(this.Ff,22):this.Ff=la(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,23)},set:function(r){r?this.Ff=oa(this.Ff,23):this.Ff=la(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,27)},set:function(r){r?this.Ff=oa(this.Ff,27):this.Ff=la(this.Ff,27)}}),this.hasAppearanceStream=!1};Ro(ym,Uc);var wm=function(){ym.call(this),this.fontName="helvetica",this.combo=!1};Ro(wm,ym);var bm=function(){wm.call(this),this.combo=!0};Ro(bm,wm);var Ky=function(){bm.call(this),this.edit=!0};Ro(Ky,bm);var Ja=function(){Uc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,15)},set:function(r){r?this.Ff=oa(this.Ff,15):this.Ff=la(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,16)},set:function(r){r?this.Ff=oa(this.Ff,16):this.Ff=la(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,17)},set:function(r){r?this.Ff=oa(this.Ff,17):this.Ff=la(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,26)},set:function(r){r?this.Ff=oa(this.Ff,26):this.Ff=la(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Yh(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){qn(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Ro(Ja,Uc);var $y=function(){Ja.call(this),this.pushButton=!0};Ro($y,Ja);var Cm=function(){Ja.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ro(Cm,Ja);var I2=function(){var t,e;Uc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(o){return o};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,i=[];for(a in i.push("<<"),n)i.push("/"+a+" ("+Yh(s(n[a]))+")");return i.push(">>"),i.join(`
`)},set:function(s){qn(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ro(I2,Uc),Cm.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Cm.prototype.createOption=function(t){var e=new I2;return e.Parent=this,e.optionName=t,this.Kids.push(e),Ble.call(this.scope,e),e};var Wy=function(){Ja.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rr.CheckBox.createAppearanceStream()};Ro(Wy,Ja);var yh=function(){Uc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,13)},set:function(e){e?this.Ff=oa(this.Ff,13):this.Ff=la(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,21)},set:function(e){e?this.Ff=oa(this.Ff,21):this.Ff=la(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,23)},set:function(e){e?this.Ff=oa(this.Ff,23):this.Ff=la(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,24)},set:function(e){e?this.Ff=oa(this.Ff,24):this.Ff=la(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,25)},set:function(e){e?this.Ff=oa(this.Ff,25):this.Ff=la(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,26)},set:function(e){e?this.Ff=oa(this.Ff,26):this.Ff=la(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ro(yh,Uc);var Yy=function(){yh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ia(this.Ff,14)},set:function(t){t?this.Ff=oa(this.Ff,14):this.Ff=la(this.Ff,14)}}),this.password=!0};Ro(Yy,yh);var rr={CheckBox:{createAppearanceStream:function(){return{N:{On:rr.CheckBox.YesNormal},D:{On:rr.CheckBox.YesPushDown,Off:rr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=vu(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),a=bS(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Rr(a.fontSize)+" Tf "+s),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=vu(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],a=rr.internal.getHeight(t),i=rr.internal.getWidth(t),o=bS(t,t.caption);return s.push("1 g"),s.push("0 0 "+Rr(i)+" "+Rr(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Rr(i-1)+" "+Rr(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Rr(o.fontSize)+" Tf "+n),s.push(o.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=vu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Circle.YesNormal,e.D[t]=rr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=vu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=rr.internal.Bezier_C,a=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Fd(rr.internal.getWidth(t)/2)+" "+Fd(rr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=vu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*rr.internal.Bezier_C).toFixed(5)),i=Number((n*rr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Fd(rr.internal.getWidth(t)/2)+" "+Fd(rr.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Fd(rr.internal.getWidth(t)/2)+" "+Fd(rr.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=vu(t);e.scope=t.scope;var r=[],n=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),a=Number((s*rr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Fd(rr.internal.getWidth(t)/2)+" "+Fd(rr.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),r.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),r.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),r.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Cross.YesNormal,e.D[t]=rr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=vu(t);e.scope=t.scope;var r=[],n=rr.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+Rr(rr.internal.getWidth(t)-2)+" "+Rr(rr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Rr(n.x1.x)+" "+Rr(n.x1.y)+" m"),r.push(Rr(n.x2.x)+" "+Rr(n.x2.y)+" l"),r.push(Rr(n.x4.x)+" "+Rr(n.x4.y)+" m"),r.push(Rr(n.x3.x)+" "+Rr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=vu(t);e.scope=t.scope;var r=rr.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Rr(rr.internal.getWidth(t)-2)+" "+Rr(rr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Rr(r.x1.x)+" "+Rr(r.x1.y)+" m"),n.push(Rr(r.x2.x)+" "+Rr(r.x2.y)+" l"),n.push(Rr(r.x4.x)+" "+Rr(r.x4.y)+" m"),n.push(Rr(r.x3.x)+" "+Rr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=vu(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Rr(rr.internal.getWidth(t))+" "+Rr(rr.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};rr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=rr.internal.getWidth(t),r=rr.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},rr.internal.getWidth=function(t){var e=0;return qn(t)==="object"&&(e=t6(t.Rect[2])),e},rr.internal.getHeight=function(t){var e=0;return qn(t)==="object"&&(e=t6(t.Rect[3])),e};var Ble=Vs.addField=function(t){if(Nle(this,t),!(t instanceof Uc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Vs.AcroFormChoiceField=ym,Vs.AcroFormListBox=wm,Vs.AcroFormComboBox=bm,Vs.AcroFormEditBox=Ky,Vs.AcroFormButton=Ja,Vs.AcroFormPushButton=$y,Vs.AcroFormRadioButton=Cm,Vs.AcroFormCheckBox=Wy,Vs.AcroFormTextField=yh,Vs.AcroFormPasswordField=Yy,Vs.AcroFormAppearance=rr,Vs.AcroForm={ChoiceField:ym,ListBox:wm,ComboBox:bm,EditBox:Ky,Button:Ja,PushButton:$y,RadioButton:Cm,CheckBox:Wy,TextField:yh,PasswordField:Yy,Appearance:rr},lr.AcroForm={ChoiceField:ym,ListBox:wm,ComboBox:bm,EditBox:Ky,Button:Ja,PushButton:$y,RadioButton:Cm,CheckBox:Wy,TextField:yh,PasswordField:Yy,Appearance:rr};lr.AcroForm;function BP(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=t.__addimage__.getImageFileTypeByImageData=function(R,F){var Q,H,ne,J,re,G=e;if((F=F||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(L(R))for(re in r)for(ne=r[re],Q=0;Q<ne.length;Q+=1){for(J=!0,H=0;H<ne[Q].length;H+=1)if(ne[Q][H]!==void 0&&ne[Q][H]!==R[H]){J=!1;break}if(J===!0){G=re;break}}else for(re in r)for(ne=r[re],Q=0;Q<ne.length;Q+=1){for(J=!0,H=0;H<ne[Q].length;H+=1)if(ne[Q][H]!==void 0&&ne[Q][H]!==R.charCodeAt(H)){J=!1;break}if(J===!0){G=re;break}}return G===e&&F!==e&&(G=F),G},s=function R(F){for(var Q=this.internal.write,H=this.internal.putStream,ne=(0,this.internal.getFilters)();ne.indexOf("FlateEncode")!==-1;)ne.splice(ne.indexOf("FlateEncode"),1);F.objectId=this.internal.newObject();var J=[];if(J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Image"}),J.push({key:"Width",value:F.width}),J.push({key:"Height",value:F.height}),F.colorSpace===_.INDEXED?J.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(F.palette.length/3-1)+" "+("sMask"in F&&F.sMask!==void 0?F.objectId+2:F.objectId+1)+" 0 R]"}):(J.push({key:"ColorSpace",value:"/"+F.colorSpace}),F.colorSpace===_.DEVICE_CMYK&&J.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),J.push({key:"BitsPerComponent",value:F.bitsPerComponent}),"decodeParameters"in F&&F.decodeParameters!==void 0&&J.push({key:"DecodeParms",value:"<<"+F.decodeParameters+">>"}),"transparency"in F&&Array.isArray(F.transparency)){for(var re="",G=0,q=F.transparency.length;G<q;G++)re+=F.transparency[G]+" "+F.transparency[G]+" ";J.push({key:"Mask",value:"["+re+"]"})}F.sMask!==void 0&&J.push({key:"SMask",value:F.objectId+1+" 0 R"});var W=F.filter!==void 0?["/"+F.filter]:void 0;if(H({data:F.data,additionalKeyValues:J,alreadyAppliedFilters:W,objectId:F.objectId}),Q("endobj"),"sMask"in F&&F.sMask!==void 0){var ie="/Predictor "+F.predictor+" /Colors 1 /BitsPerComponent "+F.bitsPerComponent+" /Columns "+F.width,j={width:F.width,height:F.height,colorSpace:"DeviceGray",bitsPerComponent:F.bitsPerComponent,decodeParameters:ie,data:F.sMask};"filter"in F&&(j.filter=F.filter),R.call(this,j)}if(F.colorSpace===_.INDEXED){var Y=this.internal.newObject();H({data:E(new Uint8Array(F.palette)),objectId:Y}),Q("endobj")}},a=function(){var R=this.internal.collections.addImage_images;for(var F in R)s.call(this,R[F])},i=function(){var R,F=this.internal.collections.addImage_images,Q=this.internal.write;for(var H in F)Q("/I"+(R=F[H]).index,R.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",i))},l=function(){var R=this.internal.collections.addImage_images;return o.call(this),R},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(R){return typeof t["process"+R.toUpperCase()]=="function"},h=function(R){return qn(R)==="object"&&R.nodeType===1},m=function(R,F){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var Q=""+R.getAttribute("src");if(Q.indexOf("data:image/")===0)return Kg(unescape(Q).split("base64,").pop());var H=t.loadFile(Q,!0);if(H!==void 0)return H}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var ne;switch(F){case"PNG":ne="image/png";break;case"WEBP":ne="image/webp";break;case"JPEG":case"JPG":default:ne="image/jpeg"}return Kg(R.toDataURL(ne,1).split("base64,").pop())}},g=function(R){var F=this.internal.collections.addImage_images;if(F){for(var Q in F)if(R===F[Q].alias)return F[Q]}},b=function(R,F,Q){return R||F||(R=-96,F=-96),R<0&&(R=-1*Q.width*72/R/this.internal.scaleFactor),F<0&&(F=-1*Q.height*72/F/this.internal.scaleFactor),R===0&&(R=F*Q.width/Q.height),F===0&&(F=R*Q.height/Q.width),[R,F]},y=function(R,F,Q,H,ne,J){var re=b.call(this,Q,H,ne),G=this.internal.getCoordinateString,q=this.internal.getVerticalCoordinateString,W=l.call(this);if(Q=re[0],H=re[1],W[ne.index]=ne,J){J*=Math.PI/180;var ie=Math.cos(J),j=Math.sin(J),Y=function(te){return te.toFixed(4)},ee=[Y(ie),Y(j),Y(-1*j),Y(ie),0,0,"cm"]}this.internal.write("q"),J?(this.internal.write([1,"0","0",1,G(R),q(F+H),"cm"].join(" ")),this.internal.write(ee.join(" ")),this.internal.write([G(Q),"0","0",G(H),"0","0","cm"].join(" "))):this.internal.write([G(Q),"0","0",G(H),G(R),q(F+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ne.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=t.__addimage__.sHashCode=function(R){var F,Q,H=0;if(typeof R=="string")for(Q=R.length,F=0;F<Q;F++)H=(H<<5)-H+R.charCodeAt(F),H|=0;else if(L(R))for(Q=R.byteLength/2,F=0;F<Q;F++)H=(H<<5)-H+R[F],H|=0;return H},D=t.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var F=!0;return R.length===0&&(F=!1),R.length%4!=0&&(F=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(F=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(F=!1),F},M=t.__addimage__.extractImageFromDataUrl=function(R){var F=(R=R||"").split("base64,"),Q=null;if(F.length===2){var H=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(F[0]);Array.isArray(H)&&(Q={mimeType:H[1],charset:H[2],data:F[1]})}return Q},P=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(R){return P()&&R instanceof ArrayBuffer};var L=t.__addimage__.isArrayBufferView=function(R){return P()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},C=t.__addimage__.binaryStringToUint8Array=function(R){for(var F=R.length,Q=new Uint8Array(F),H=0;H<F;H++)Q[H]=R.charCodeAt(H);return Q},E=t.__addimage__.arrayBufferToBinaryString=function(R){for(var F="",Q=L(R)?R:new Uint8Array(R),H=0;H<Q.length;H+=8192)F+=String.fromCharCode.apply(null,Q.subarray(H,H+8192));return F};t.addImage=function(){var R,F,Q,H,ne,J,re,G,q;if(typeof arguments[1]=="number"?(F=e,Q=arguments[1],H=arguments[2],ne=arguments[3],J=arguments[4],re=arguments[5],G=arguments[6],q=arguments[7]):(F=arguments[1],Q=arguments[2],H=arguments[3],ne=arguments[4],J=arguments[5],re=arguments[6],G=arguments[7],q=arguments[8]),qn(R=arguments[0])==="object"&&!h(R)&&"imageData"in R){var W=R;R=W.imageData,F=W.format||F||e,Q=W.x||Q||0,H=W.y||H||0,ne=W.w||W.width||ne,J=W.h||W.height||J,re=W.alias||re,G=W.compression||G,q=W.rotation||W.angle||q}var ie=this.internal.getFilters();if(G===void 0&&ie.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(Q)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var j=B.call(this,R,F,re,G);return y.call(this,Q,H,ne,J,j,q),this};var B=function(R,F,Q,H){var ne,J,re;if(typeof R=="string"&&n(R)===e){R=unescape(R);var G=O(R,!1);(G!==""||(G=t.loadFile(R,!0))!==void 0)&&(R=G)}if(h(R)&&(R=m(R,F)),F=n(R,F),!d(F))throw new Error("addImage does not support files of type '"+F+"', please ensure that a plugin for '"+F+"' support is added.");if(((re=Q)==null||re.length===0)&&(Q=function(q){return typeof q=="string"||L(q)?k(q):L(q.data)?k(q.data):null}(R)),(ne=g.call(this,Q))||(P()&&(R instanceof Uint8Array||F==="RGBA"||(J=R,R=C(R))),ne=this["process"+F.toUpperCase()](R,u.call(this),Q,function(q){return q&&typeof q=="string"&&(q=q.toUpperCase()),q in t.image_compression?q:T.NONE}(H),J)),!ne)throw new Error("An unknown error occurred whilst processing the image.");return ne},O=t.__addimage__.convertBase64ToBinaryString=function(R,F){var Q;F=typeof F!="boolean"||F;var H,ne="";if(typeof R=="string"){H=(Q=M(R))!==null?Q.data:R;try{ne=Kg(H)}catch(J){if(F)throw D(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+J.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ne};t.getImageProperties=function(R){var F,Q,H="";if(h(R)&&(R=m(R)),typeof R=="string"&&n(R)===e&&((H=O(R,!1))===""&&(H=t.loadFile(R)||""),R=H),Q=n(R),!d(Q))throw new Error("addImage does not support files of type '"+Q+"', please ensure that a plugin for '"+Q+"' support is added.");if(!P()||R instanceof Uint8Array||(R=C(R)),!(F=this["process"+Q.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return F.fileType=Q,F}})(lr.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};lr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,a,i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,d=!1,h=0;h<u.length&&!d;h++)switch((n=u[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){n=u[m];var g=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(y.objId),k=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+g(T(n.contents))+")",a+=" /Popup "+_.objId+" 0 R",a+=" /P "+l.objId+" 0 R",a+=" /T ("+g(T(k))+") >>",y.content=a;var D=y.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+i(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+i(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+D,n.open&&(a+=" /Open true"),a+=" >>",_.content=a,this.internal.write(y.objId,"0 R",_.objId,"0 R");break;case"freetext":s="/Rect ["+i(n.bounds.x)+" "+o(n.bounds.y)+" "+i(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var M=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+g(b(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+M+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var P=this.annotations._nameMap[n.options.name];n.options.pageNumber=P.page,n.options.top=P.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+g(b(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var L=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+L+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,a,i){var o=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+s),h:u(n+a)},options:i,type:"link"})},t.textWithLink=function(r,n,s,a){var i,o,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){o=a.maxWidth;var d=this.splitTextToSize(r,o).length;i=Math.ceil(u*d)}else o=l,i=u;return this.text(r,n,s,a),s+=.2*u,a.align==="center"&&(n-=l/2),a.align==="right"&&(n-=l),this.link(n,s-u,o,i,a),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(lr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},i=t.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},o=t.__arabicParser__.isArabicEndLetter=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(y){return i(y)&&s.indexOf(y.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(y){return i(y)&&a(y)&&e[y.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(y){var _=0,T=r,k="",D=0;for(_=0;_<y.length;_+=1)T[y.charCodeAt(_)]!==void 0?(D++,typeof(T=T[y.charCodeAt(_)])=="number"&&(k+=String.fromCharCode(T),T=r,D=0),_===y.length-1&&(T=r,k+=y.charAt(_-(D-1)),_-=D-1,D=0)):(T=r,k+=y.charAt(_-D),_-=D,D=0);return k};t.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&n[y.charCodeAt(0)]!==void 0};var m=t.__arabicParser__.getCorrectForm=function(y,_,T){return i(y)?a(y)===!1?-1:!u(y)||!i(_)&&!i(T)||!i(T)&&o(_)||o(y)&&!i(_)||o(y)&&l(_)||o(y)&&o(_)?0:d(y)&&i(_)&&!o(_)&&i(T)&&u(T)?3:o(y)||!i(T)?1:2:-1},g=function(y){var _=0,T=0,k=0,D="",M="",P="",L=(y=y||"").split("\\s+"),C=[];for(_=0;_<L.length;_+=1){for(C.push(""),T=0;T<L[_].length;T+=1)D=L[_][T],M=L[_][T-1],P=L[_][T+1],i(D)?(k=m(D,M,P),C[_]+=k!==-1?String.fromCharCode(e[D.charCodeAt(0)][k]):D):C[_]+=D;C[_]=h(C[_])}return C.join(" ")},b=t.__arabicParser__.processArabic=t.processArabic=function(){var y,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(_)){var k=0;for(T=[],k=0;k<_.length;k+=1)Array.isArray(_[k])?T.push([g(_[k][0]),_[k][1],_[k][2]]):T.push([g(_[k])]);y=T}else y=g(_);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};t.events.push(["preProcessText",b])}(lr.API),lr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(o){s=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(o){a=o}});var i={};Object.defineProperty(this,"style",{get:function(){return i},set:function(o){i=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(lr.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(y){m=y}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(y){g=y}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(y){b=y}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){n.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,g=0,b=0,y=0,_=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var T=u.maxWidth;T>0?typeof l=="string"?l=this.splitTextToSize(l,T):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(D,M){return D.concat(_.splitTextToSize(M,T))},[])):l=Array.isArray(l)?l:[l];for(var k=0;k<l.length;k++)g<(y=this.getStringUnitWidth(l[k],{font:h})*d)&&(g=y);return g!==0&&(b=l.length),{w:g/=m,h:Math.max((b*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/m,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var i=t.cell=function(){var l;l=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,g&&m&&(this.printHeaderRow(l.lineNumber,!0),l.y+=m[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,d,h,m){if(n.call(this),!d)throw new Error("No data for PDF table.");var g,b,y,_,T=[],k=[],D=[],M={},P={},L=[],C=[],E=(m=m||{}).autoSize||!1,B=m.printHeaders!==!1,O=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,R=m.margins||Object.assign({width:this.getPageWidth()},e),F=typeof m.padding=="number"?m.padding:3,Q=m.headerBackgroundColor||"#c8c8c8",H=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=B,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=F,this.internal.__cell__.headerBackgroundColor=Q,this.internal.__cell__.headerTextColor=H,this.setFontSize(O),h==null)k=T=Object.keys(d[0]),D=T.map(function(){return"left"});else if(Array.isArray(h)&&qn(h[0])==="object")for(T=h.map(function(W){return W.name}),k=h.map(function(W){return W.prompt||W.name||""}),D=h.map(function(W){return W.align||"left"}),g=0;g<h.length;g+=1)P[h[g].name]=h[g].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(k=T=h,D=T.map(function(){return"left"}));if(E||Array.isArray(h)&&typeof h[0]=="string")for(g=0;g<T.length;g+=1){for(M[_=T[g]]=d.map(function(W){return W[_]}),this.setFont(void 0,"bold"),L.push(this.getTextDimensions(k[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=M[_],this.setFont(void 0,"normal"),y=0;y<b.length;y+=1)L.push(this.getTextDimensions(b[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);P[_]=Math.max.apply(null,L)+F+F,L=[]}if(B){var ne={};for(g=0;g<T.length;g+=1)ne[T[g]]={},ne[T[g]].text=k[g],ne[T[g]].align=D[g];var J=o.call(this,ne,P);C=T.map(function(W){return new a(l,u,P[W],J,ne[W].text,void 0,ne[W].align)}),this.setTableHeaderRow(C),this.printHeaderRow(1,!1)}var re=h.reduce(function(W,ie){return W[ie.name]=ie.align,W},{});for(g=0;g<d.length;g+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:g,data:d[g]},this);var G=o.call(this,d[g],P);for(y=0;y<T.length;y+=1){var q=d[g][T[y]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:g,col:y,data:q},this),i.call(this,new a(l,u,P[T[y]],G,q,g+2,re[T[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var o=function(l,u){var d=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(l).map(function(g){var b=l[g];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*h/m+d+d},this).reduce(function(g,b){return Math.max(g,b)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,m.push(d)),d.lineNumber=l;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),i.call(this,d),this.setTextColor(b)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(lr.API);var kP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},IP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],CS=BP(IP),FP=[100,200,300,400,500,600,700,800,900],kle=BP(FP);function ES(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(a){return kP[a=a||"normal"]?a:"normal"}(t.style),n=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(t.weight),s=function(a){return typeof CS[a=a||"normal"]=="number"?a:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function r6(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var Ile={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},n6={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function s6(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Fle(t,e,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},Ile,r.genericFontFamilies||{}),a=null,i=null,o=0;o<e.length;++o)if(s[(a=ES(e[o])).family]&&(a.family=s[a.family]),t.hasOwnProperty(a.family)){i=t[a.family];break}if(!(i=i||t[n]))throw new Error("Could not find a font-family for the rule '"+s6(a)+"' and default family '"+n+"'.");if(i=function(l,u){if(u[l])return u[l];var d=CS[l],h=d<=CS.normal?-1:1,m=r6(u,IP,d,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+l);return m}(a.stretch,i),i=function(l,u){if(u[l])return u[l];for(var d=kP[l],h=0;h<d.length;++h)if(u[d[h]])return u[d[h]];throw new Error("Could not find a matching font-style for "+l)}(a.style,i),!(i=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var d=kle[l],h=r6(u,FP,d,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(a.weight,i)))throw new Error("Failed to resolve a font for the rule '"+s6(a)+"'.");return i}function a6(t){return t.trimLeft()}function Dle(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function Rle(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Qv,i6,o6,CE=["times"];(function(t){var e,r,n,s,a,i,o,l,u,d=function(j){return j=j||{},this.isStrokeTransparent=j.isStrokeTransparent||!1,this.strokeOpacity=j.strokeOpacity||1,this.strokeStyle=j.strokeStyle||"#000000",this.fillStyle=j.fillStyle||"#000000",this.isFillTransparent=j.isFillTransparent||!1,this.fillOpacity=j.fillOpacity||1,this.font=j.font||"10px sans-serif",this.textBaseline=j.textBaseline||"alphabetic",this.textAlign=j.textAlign||"left",this.lineWidth=j.lineWidth||1,this.lineJoin=j.lineJoin||"miter",this.lineCap=j.lineCap||"butt",this.path=j.path||[],this.transform=j.transform!==void 0?j.transform.clone():new l,this.globalCompositeOperation=j.globalCompositeOperation||"normal",this.globalAlpha=j.globalAlpha||1,this.clip_path=j.clip_path||[],this.currentPoint=j.currentPoint||new i,this.miterLimit=j.miterLimit||10,this.lastPoint=j.lastPoint||new i,this.lineDashOffset=j.lineDashOffset||0,this.lineDash=j.lineDash||[],this.margin=j.margin||[0,0,0,0],this.prevPageLastElemOffset=j.prevPageLastElemOffset||0,this.ignoreClearRect=typeof j.ignoreClearRect!="boolean"||j.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,i=this.internal.Point,o=this.internal.Rectangle,l=this.internal.Matrix,u=new d}]);var h=function(j){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Y=j;Object.defineProperty(this,"pdf",{get:function(){return Y}});var ee=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ee},set:function(Fe){ee=!!Fe}});var te=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return te},set:function(Fe){te=!!Fe}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(Fe){isNaN(Fe)||(ce=Fe)}});var be=0;Object.defineProperty(this,"posY",{get:function(){return be},set:function(Fe){isNaN(Fe)||(be=Fe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Fe){var Ee;typeof Fe=="number"?Ee=[Fe,Fe,Fe,Fe]:((Ee=new Array(4))[0]=Fe[0],Ee[1]=Fe.length>=2?Fe[1]:Ee[0],Ee[2]=Fe.length>=3?Fe[2]:Ee[0],Ee[3]=Fe.length>=4?Fe[3]:Ee[1]),u.margin=Ee}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(Fe){he=Fe}});var fe=0;Object.defineProperty(this,"lastBreak",{get:function(){return fe},set:function(Fe){fe=Fe}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(Fe){ge=Fe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Fe){Fe instanceof d&&(u=Fe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Fe){u.path=Fe}});var de=[];Object.defineProperty(this,"ctxStack",{get:function(){return de},set:function(Fe){de=Fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Fe){var Ee;Ee=m(Fe),this.ctx.fillStyle=Ee.style,this.ctx.isFillTransparent=Ee.a===0,this.ctx.fillOpacity=Ee.a,this.pdf.setFillColor(Ee.r,Ee.g,Ee.b,{a:Ee.a}),this.pdf.setTextColor(Ee.r,Ee.g,Ee.b,{a:Ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Fe){var Ee=m(Fe);this.ctx.strokeStyle=Ee.style,this.ctx.isStrokeTransparent=Ee.a===0,this.ctx.strokeOpacity=Ee.a,Ee.a===0?this.pdf.setDrawColor(255,255,255):(Ee.a,this.pdf.setDrawColor(Ee.r,Ee.g,Ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Fe){["butt","round","square"].indexOf(Fe)!==-1&&(this.ctx.lineCap=Fe,this.pdf.setLineCap(Fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Fe){isNaN(Fe)||(this.ctx.lineWidth=Fe,this.pdf.setLineWidth(Fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Fe){["bevel","round","miter"].indexOf(Fe)!==-1&&(this.ctx.lineJoin=Fe,this.pdf.setLineJoin(Fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Fe){isNaN(Fe)||(this.ctx.miterLimit=Fe,this.pdf.setMiterLimit(Fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Fe){this.ctx.textBaseline=Fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Fe){["right","end","center","left","start"].indexOf(Fe)!==-1&&(this.ctx.textAlign=Fe)}});var oe=null;function Ue(Fe,Ee){if(oe===null){var De=function(Qe){var $e=[];return Object.keys(Qe).forEach(function(ut){Qe[ut].forEach(function(Et){var lt=null;switch(Et){case"bold":lt={family:ut,weight:"bold"};break;case"italic":lt={family:ut,style:"italic"};break;case"bolditalic":lt={family:ut,weight:"bold",style:"italic"};break;case"":case"normal":lt={family:ut}}lt!==null&&(lt.ref={name:ut,style:Et},$e.push(lt))})}),$e}(Fe.getFontList());oe=function(Qe){for(var $e={},ut=0;ut<Qe.length;++ut){var Et=ES(Qe[ut]),lt=Et.family,Dt=Et.stretch,zt=Et.style,Jt=Et.weight;$e[lt]=$e[lt]||{},$e[lt][Dt]=$e[lt][Dt]||{},$e[lt][Dt][zt]=$e[lt][Dt][zt]||{},$e[lt][Dt][zt][Jt]=Et}return $e}(De.concat(Ee))}return oe}var tt=null;Object.defineProperty(this,"fontFaces",{get:function(){return tt},set:function(Fe){oe=null,tt=Fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Fe){var Ee;if(this.ctx.font=Fe,(Ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Fe))!==null){var De=Ee[1],Qe=(Ee[2],Ee[3]),$e=Ee[4],ut=(Ee[5],Ee[6]),Et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(Et==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:Et==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var lt=function(It){var Ft,pt,br=[],Zt=It.trim();if(Zt==="")return CE;if(Zt in n6)return[n6[Zt]];for(;Zt!=="";){switch(pt=null,Ft=(Zt=a6(Zt)).charAt(0)){case'"':case"'":pt=Dle(Zt.substring(1),Ft);break;default:pt=Rle(Zt)}if(pt===null||(br.push(pt[0]),(Zt=a6(pt[1]))!==""&&Zt.charAt(0)!==","))return CE;Zt=Zt.replace(/^,/,"")}return br}(ut);if(this.fontFaces){var Dt=Fle(Ue(this.pdf,this.fontFaces),lt.map(function(It){return{family:It,stretch:"normal",weight:Qe,style:De}}));this.pdf.setFont(Dt.ref.name,Dt.ref.style)}else{var zt="";(Qe==="bold"||parseInt(Qe,10)>=700||De==="bold")&&(zt="bold"),De==="italic"&&(zt+="italic"),zt.length===0&&(zt="normal");for(var Jt="",Rt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ot=0;Ot<lt.length;Ot++){if(this.pdf.internal.getFont(lt[Ot],zt,{noFallback:!0,disableWarning:!0})!==void 0){Jt=lt[Ot];break}if(zt==="bolditalic"&&this.pdf.internal.getFont(lt[Ot],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Jt=lt[Ot],zt="bold";else if(this.pdf.internal.getFont(lt[Ot],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Jt=lt[Ot],zt="normal";break}}if(Jt===""){for(var qt=0;qt<lt.length;qt++)if(Rt[lt[qt]]){Jt=Rt[lt[qt]];break}}Jt=Jt===""?"Times":Jt,this.pdf.setFont(Jt,zt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Fe){this.ctx.globalCompositeOperation=Fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Fe){this.ctx.globalAlpha=Fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Fe){this.ctx.lineDashOffset=Fe,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Fe){this.ctx.lineDash=Fe,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Fe){this.ctx.ignoreClearRect=!!Fe}})};h.prototype.setLineDash=function(j){this.lineDash=j},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){M.call(this,"fill",!1)},h.prototype.stroke=function(){M.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(j,Y){if(isNaN(j)||isNaN(Y))throw as.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ee=this.ctx.transform.applyToPoint(new i(j,Y));this.path.push({type:"mt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new i(j,Y)},h.prototype.closePath=function(){var j=new i(0,0),Y=0;for(Y=this.path.length-1;Y!==-1;Y--)if(this.path[Y].type==="begin"&&qn(this.path[Y+1])==="object"&&typeof this.path[Y+1].x=="number"){j=new i(this.path[Y+1].x,this.path[Y+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new i(j.x,j.y)},h.prototype.lineTo=function(j,Y){if(isNaN(j)||isNaN(Y))throw as.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ee=this.ctx.transform.applyToPoint(new i(j,Y));this.path.push({type:"lt",x:ee.x,y:ee.y}),this.ctx.lastPoint=new i(ee.x,ee.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),M.call(this,null,!0)},h.prototype.quadraticCurveTo=function(j,Y,ee,te){if(isNaN(ee)||isNaN(te)||isNaN(j)||isNaN(Y))throw as.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new i(ee,te)),be=this.ctx.transform.applyToPoint(new i(j,Y));this.path.push({type:"qct",x1:be.x,y1:be.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new i(ce.x,ce.y)},h.prototype.bezierCurveTo=function(j,Y,ee,te,ce,be){if(isNaN(ce)||isNaN(be)||isNaN(j)||isNaN(Y)||isNaN(ee)||isNaN(te))throw as.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new i(ce,be)),fe=this.ctx.transform.applyToPoint(new i(j,Y)),ge=this.ctx.transform.applyToPoint(new i(ee,te));this.path.push({type:"bct",x1:fe.x,y1:fe.y,x2:ge.x,y2:ge.y,x:he.x,y:he.y}),this.ctx.lastPoint=new i(he.x,he.y)},h.prototype.arc=function(j,Y,ee,te,ce,be){if(isNaN(j)||isNaN(Y)||isNaN(ee)||isNaN(te)||isNaN(ce))throw as.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(be=!!be,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new i(j,Y));j=he.x,Y=he.y;var fe=this.ctx.transform.applyToPoint(new i(0,ee)),ge=this.ctx.transform.applyToPoint(new i(0,0));ee=Math.sqrt(Math.pow(fe.x-ge.x,2)+Math.pow(fe.y-ge.y,2))}Math.abs(ce-te)>=2*Math.PI&&(te=0,ce=2*Math.PI),this.path.push({type:"arc",x:j,y:Y,radius:ee,startAngle:te,endAngle:ce,counterclockwise:be})},h.prototype.arcTo=function(j,Y,ee,te,ce){throw new Error("arcTo not implemented.")},h.prototype.rect=function(j,Y,ee,te){if(isNaN(j)||isNaN(Y)||isNaN(ee)||isNaN(te))throw as.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(j,Y),this.lineTo(j+ee,Y),this.lineTo(j+ee,Y+te),this.lineTo(j,Y+te),this.lineTo(j,Y),this.lineTo(j+ee,Y),this.lineTo(j,Y)},h.prototype.fillRect=function(j,Y,ee,te){if(isNaN(j)||isNaN(Y)||isNaN(ee)||isNaN(te))throw as.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(j,Y,ee,te),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},h.prototype.strokeRect=function(j,Y,ee,te){if(isNaN(j)||isNaN(Y)||isNaN(ee)||isNaN(te))throw as.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(j,Y,ee,te),this.stroke())},h.prototype.clearRect=function(j,Y,ee,te){if(isNaN(j)||isNaN(Y)||isNaN(ee)||isNaN(te))throw as.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(j,Y,ee,te))},h.prototype.save=function(j){j=typeof j!="boolean"||j;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("q");if(this.pdf.setPage(Y),j){this.ctx.fontSize=this.pdf.internal.getFontSize();var te=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=te}},h.prototype.restore=function(j){j=typeof j!="boolean"||j;for(var Y=this.pdf.internal.getCurrentPageInfo().pageNumber,ee=0;ee<this.pdf.internal.getNumberOfPages();ee++)this.pdf.setPage(ee+1),this.pdf.internal.out("Q");this.pdf.setPage(Y),j&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(j){var Y,ee,te,ce;if(j.isCanvasGradient===!0&&(j=j.getColor()),!j)return{r:0,g:0,b:0,a:0,style:j};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(j))Y=0,ee=0,te=0,ce=0;else{var be=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(j);if(be!==null)Y=parseInt(be[1]),ee=parseInt(be[2]),te=parseInt(be[3]),ce=1;else if((be=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(j))!==null)Y=parseInt(be[1]),ee=parseInt(be[2]),te=parseInt(be[3]),ce=parseFloat(be[4]);else{if(ce=1,typeof j=="string"&&j.charAt(0)!=="#"){var he=new CP(j);j=he.ok?he.toHex():"#000000"}j.length===4?(Y=j.substring(1,2),Y+=Y,ee=j.substring(2,3),ee+=ee,te=j.substring(3,4),te+=te):(Y=j.substring(1,3),ee=j.substring(3,5),te=j.substring(5,7)),Y=parseInt(Y,16),ee=parseInt(ee,16),te=parseInt(te,16)}}return{r:Y,g:ee,b:te,a:ce,style:j}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(j,Y,ee,te){if(isNaN(Y)||isNaN(ee)||typeof j!="string")throw as.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(te=isNaN(te)?void 0:te,!g.call(this)){var ce=G(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;F.call(this,{text:j,x:Y,y:ee,scale:be,angle:ce,align:this.textAlign,maxWidth:te})}},h.prototype.strokeText=function(j,Y,ee,te){if(isNaN(Y)||isNaN(ee)||typeof j!="string")throw as.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){te=isNaN(te)?void 0:te;var ce=G(this.ctx.transform.rotation),be=this.ctx.transform.scaleX;F.call(this,{text:j,x:Y,y:ee,scale:be,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:te})}},h.prototype.measureText=function(j){if(typeof j!="string")throw as.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Y=this.pdf,ee=this.pdf.internal.scaleFactor,te=Y.internal.getFontSize(),ce=Y.getStringUnitWidth(j)*te/Y.internal.scaleFactor,be=function(he){var fe=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return fe}}),this};return new be({width:ce*=Math.round(96*ee/72*1e4)/1e4})},h.prototype.scale=function(j,Y){if(isNaN(j)||isNaN(Y))throw as.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ee=new l(j,0,0,Y,0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},h.prototype.rotate=function(j){if(isNaN(j))throw as.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Y=new l(Math.cos(j),Math.sin(j),-Math.sin(j),Math.cos(j),0,0);this.ctx.transform=this.ctx.transform.multiply(Y)},h.prototype.translate=function(j,Y){if(isNaN(j)||isNaN(Y))throw as.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ee=new l(1,0,0,1,j,Y);this.ctx.transform=this.ctx.transform.multiply(ee)},h.prototype.transform=function(j,Y,ee,te,ce,be){if(isNaN(j)||isNaN(Y)||isNaN(ee)||isNaN(te)||isNaN(ce)||isNaN(be))throw as.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new l(j,Y,ee,te,ce,be);this.ctx.transform=this.ctx.transform.multiply(he)},h.prototype.setTransform=function(j,Y,ee,te,ce,be){j=isNaN(j)?1:j,Y=isNaN(Y)?0:Y,ee=isNaN(ee)?0:ee,te=isNaN(te)?1:te,ce=isNaN(ce)?0:ce,be=isNaN(be)?0:be,this.ctx.transform=new l(j,Y,ee,te,ce,be)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(j,Y,ee,te,ce,be,he,fe,ge){var de=this.pdf.getImageProperties(j),oe=1,Ue=1,tt=1,Fe=1;te!==void 0&&fe!==void 0&&(tt=fe/te,Fe=ge/ce,oe=de.width/te*fe/te,Ue=de.height/ce*ge/ce),be===void 0&&(be=Y,he=ee,Y=0,ee=0),te!==void 0&&fe===void 0&&(fe=te,ge=ce),te===void 0&&fe===void 0&&(fe=de.width,ge=de.height);for(var Ee,De=this.ctx.transform.decompose(),Qe=G(De.rotate.shx),$e=new l,ut=($e=($e=($e=$e.multiply(De.translate)).multiply(De.skew)).multiply(De.scale)).applyToRectangle(new o(be-Y*tt,he-ee*Fe,te*oe,ce*Ue)),Et=_.call(this,ut),lt=[],Dt=0;Dt<Et.length;Dt+=1)lt.indexOf(Et[Dt])===-1&&lt.push(Et[Dt]);if(D(lt),this.autoPaging)for(var zt=lt[0],Jt=lt[lt.length-1],Rt=zt;Rt<Jt+1;Rt++){this.pdf.setPage(Rt);var Ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qt=Rt===1?this.posY+this.margin[0]:this.margin[0],It=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=Rt===1?0:It+(Rt-2)*Ft;if(this.ctx.clip_path.length!==0){var br=this.path;Ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Ee,this.posX+this.margin[3],-pt+qt+this.ctx.prevPageLastElemOffset),P.call(this,"fill",!0),this.path=br}var Zt=JSON.parse(JSON.stringify(ut));Zt=k([Zt],this.posX+this.margin[3],-pt+qt+this.ctx.prevPageLastElemOffset)[0];var hn=(Rt>zt||Rt<Jt)&&y.call(this);hn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ot,Ft,null).clip().discardPath()),this.pdf.addImage(j,"JPEG",Zt.x,Zt.y,Zt.w,Zt.h,null,null,Qe),hn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(j,"JPEG",ut.x,ut.y,ut.w,ut.h,null,null,Qe)};var _=function(j,Y,ee){var te=[];Y=Y||this.pdf.internal.pageSize.width,ee=ee||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(j.type){default:case"mt":case"lt":te.push(Math.floor((j.y+ce)/ee)+1);break;case"arc":te.push(Math.floor((j.y+ce-j.radius)/ee)+1),te.push(Math.floor((j.y+ce+j.radius)/ee)+1);break;case"qct":var be=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x,j.y);te.push(Math.floor((be.y+ce)/ee)+1),te.push(Math.floor((be.y+be.h+ce)/ee)+1);break;case"bct":var he=W(this.ctx.lastPoint.x,this.ctx.lastPoint.y,j.x1,j.y1,j.x2,j.y2,j.x,j.y);te.push(Math.floor((he.y+ce)/ee)+1),te.push(Math.floor((he.y+he.h+ce)/ee)+1);break;case"rect":te.push(Math.floor((j.y+ce)/ee)+1),te.push(Math.floor((j.y+j.h+ce)/ee)+1)}for(var fe=0;fe<te.length;fe+=1)for(;this.pdf.internal.getNumberOfPages()<te[fe];)T.call(this);return te},T=function(){var j=this.fillStyle,Y=this.strokeStyle,ee=this.font,te=this.lineCap,ce=this.lineWidth,be=this.lineJoin;this.pdf.addPage(),this.fillStyle=j,this.strokeStyle=Y,this.font=ee,this.lineCap=te,this.lineWidth=ce,this.lineJoin=be},k=function(j,Y,ee){for(var te=0;te<j.length;te++)switch(j[te].type){case"bct":j[te].x2+=Y,j[te].y2+=ee;case"qct":j[te].x1+=Y,j[te].y1+=ee;case"mt":case"lt":case"arc":default:j[te].x+=Y,j[te].y+=ee}return j},D=function(j){return j.sort(function(Y,ee){return Y-ee})},M=function(j,Y){for(var ee,te,ce=this.fillStyle,be=this.strokeStyle,he=this.lineCap,fe=this.lineWidth,ge=Math.abs(fe*this.ctx.transform.scaleX),de=this.lineJoin,oe=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),tt=[],Fe=0;Fe<Ue.length;Fe++)if(Ue[Fe].x!==void 0)for(var Ee=_.call(this,Ue[Fe]),De=0;De<Ee.length;De+=1)tt.indexOf(Ee[De])===-1&&tt.push(Ee[De]);for(var Qe=0;Qe<tt.length;Qe++)for(;this.pdf.internal.getNumberOfPages()<tt[Qe];)T.call(this);if(D(tt),this.autoPaging)for(var $e=tt[0],ut=tt[tt.length-1],Et=$e;Et<ut+1;Et++){this.pdf.setPage(Et),this.fillStyle=ce,this.strokeStyle=be,this.lineCap=he,this.lineWidth=ge,this.lineJoin=de;var lt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dt=Et===1?this.posY+this.margin[0]:this.margin[0],zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Jt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Rt=Et===1?0:zt+(Et-2)*Jt;if(this.ctx.clip_path.length!==0){var Ot=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(ee,this.posX+this.margin[3],-Rt+Dt+this.ctx.prevPageLastElemOffset),P.call(this,j,!0),this.path=Ot}if(te=JSON.parse(JSON.stringify(oe)),this.path=k(te,this.posX+this.margin[3],-Rt+Dt+this.ctx.prevPageLastElemOffset),Y===!1||Et===0){var qt=(Et>$e||Et<ut)&&y.call(this);qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],lt,Jt,null).clip().discardPath()),P.call(this,j,Y),qt&&this.pdf.restoreGraphicsState()}this.lineWidth=fe}else this.lineWidth=ge,P.call(this,j,Y),this.lineWidth=fe;this.path=oe},P=function(j,Y){if((j!=="stroke"||Y||!b.call(this))&&(j==="stroke"||Y||!g.call(this))){for(var ee,te,ce=[],be=this.path,he=0;he<be.length;he++){var fe=be[he];switch(fe.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:fe,deltas:[],abs:[]});break;case"lt":var ge=ce.length;if(be[he-1]&&!isNaN(be[he-1].x)&&(ee=[fe.x-be[he-1].x,fe.y-be[he-1].y],ge>0)){for(;ge>=0;ge--)if(ce[ge-1].close!==!0&&ce[ge-1].begin!==!0){ce[ge-1].deltas.push(ee),ce[ge-1].abs.push(fe);break}}break;case"bct":ee=[fe.x1-be[he-1].x,fe.y1-be[he-1].y,fe.x2-be[he-1].x,fe.y2-be[he-1].y,fe.x-be[he-1].x,fe.y-be[he-1].y],ce[ce.length-1].deltas.push(ee);break;case"qct":var de=be[he-1].x+2/3*(fe.x1-be[he-1].x),oe=be[he-1].y+2/3*(fe.y1-be[he-1].y),Ue=fe.x+2/3*(fe.x1-fe.x),tt=fe.y+2/3*(fe.y1-fe.y),Fe=fe.x,Ee=fe.y;ee=[de-be[he-1].x,oe-be[he-1].y,Ue-be[he-1].x,tt-be[he-1].y,Fe-be[he-1].x,Ee-be[he-1].y],ce[ce.length-1].deltas.push(ee);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(fe)}}te=Y?null:j==="stroke"?"stroke":"fill";for(var De=!1,Qe=0;Qe<ce.length;Qe++)if(ce[Qe].arc)for(var $e=ce[Qe].abs,ut=0;ut<$e.length;ut++){var Et=$e[ut];Et.type==="arc"?E.call(this,Et.x,Et.y,Et.radius,Et.startAngle,Et.endAngle,Et.counterclockwise,void 0,Y,!De):Q.call(this,Et.x,Et.y),De=!0}else if(ce[Qe].close===!0)this.pdf.internal.out("h"),De=!1;else if(ce[Qe].begin!==!0){var lt=ce[Qe].start.x,Dt=ce[Qe].start.y;H.call(this,ce[Qe].deltas,lt,Dt),De=!0}te&&B.call(this,te),Y&&O.call(this)}},L=function(j){var Y=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ee=Y*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return j-ee;case"top":return j+Y-ee;case"hanging":return j+Y-2*ee;case"middle":return j+Y/2-ee;case"ideographic":return j;case"alphabetic":default:return j}},C=function(j){return j+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var j=function(){};return j.colorStops=[],j.addColorStop=function(Y,ee){this.colorStops.push([Y,ee])},j.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},j.isCanvasGradient=!0,j},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(j,Y,ee,te,ce,be,he,fe,ge){for(var de=J.call(this,ee,te,ce,be),oe=0;oe<de.length;oe++){var Ue=de[oe];oe===0&&(ge?R.call(this,Ue.x1+j,Ue.y1+Y):Q.call(this,Ue.x1+j,Ue.y1+Y)),ne.call(this,j,Y,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}fe?O.call(this):B.call(this,he)},B=function(j){switch(j){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(j,Y){this.pdf.internal.out(r(j)+" "+n(Y)+" m")},F=function(j){var Y;switch(j.align){case"right":case"end":Y="right";break;case"center":Y="center";break;case"left":case"start":default:Y="left"}var ee=this.pdf.getTextDimensions(j.text),te=L.call(this,j.y),ce=C.call(this,te)-ee.h,be=this.ctx.transform.applyToPoint(new i(j.x,te)),he=this.ctx.transform.decompose(),fe=new l;fe=(fe=(fe=fe.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var ge,de,oe,Ue=this.ctx.transform.applyToRectangle(new o(j.x,te,ee.w,ee.h)),tt=fe.applyToRectangle(new o(j.x,ce,ee.w,ee.h)),Fe=_.call(this,tt),Ee=[],De=0;De<Fe.length;De+=1)Ee.indexOf(Fe[De])===-1&&Ee.push(Fe[De]);if(D(Ee),this.autoPaging)for(var Qe=Ee[0],$e=Ee[Ee.length-1],ut=Qe;ut<$e+1;ut++){this.pdf.setPage(ut);var Et=ut===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[2],zt=Dt-this.margin[0],Jt=this.pdf.internal.pageSize.width-this.margin[1],Rt=Jt-this.margin[3],Ot=ut===1?0:lt+(ut-2)*zt;if(this.ctx.clip_path.length!==0){var qt=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(ge,this.posX+this.margin[3],-1*Ot+Et),P.call(this,"fill",!0),this.path=qt}var It=k([JSON.parse(JSON.stringify(tt))],this.posX+this.margin[3],-Ot+Et+this.ctx.prevPageLastElemOffset)[0];j.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*j.scale),oe=this.lineWidth,this.lineWidth=oe*j.scale);var Ft=this.autoPaging!=="text";if(Ft||It.y+It.h<=Dt){if(Ft||It.y>=Et&&It.x<=Jt){var pt=Ft?j.text:this.pdf.splitTextToSize(j.text,j.maxWidth||Jt-It.x)[0],br=k([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-Ot+Et+this.ctx.prevPageLastElemOffset)[0],Zt=Ft&&(ut>Qe||ut<$e)&&y.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Rt,zt,null).clip().discardPath()),this.pdf.text(pt,br.x,br.y,{angle:j.angle,align:Y,renderingMode:j.renderingMode}),Zt&&this.pdf.restoreGraphicsState()}}else It.y<Dt&&(this.ctx.prevPageLastElemOffset+=Dt-It.y);j.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=oe)}else j.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*j.scale),oe=this.lineWidth,this.lineWidth=oe*j.scale),this.pdf.text(j.text,be.x+this.posX,be.y+this.posY,{angle:j.angle,align:Y,renderingMode:j.renderingMode,maxWidth:j.maxWidth}),j.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=oe)},Q=function(j,Y,ee,te){ee=ee||0,te=te||0,this.pdf.internal.out(r(j+ee)+" "+n(Y+te)+" l")},H=function(j,Y,ee){return this.pdf.lines(j,Y,ee,null,null)},ne=function(j,Y,ee,te,ce,be,he,fe){this.pdf.internal.out([e(s(ee+j)),e(a(te+Y)),e(s(ce+j)),e(a(be+Y)),e(s(he+j)),e(a(fe+Y)),"c"].join(" "))},J=function(j,Y,ee,te){for(var ce=2*Math.PI,be=Math.PI/2;Y>ee;)Y-=ce;var he=Math.abs(ee-Y);he<ce&&te&&(he=ce-he);for(var fe=[],ge=te?-1:1,de=Y;he>1e-5;){var oe=de+ge*Math.min(he,be);fe.push(re.call(this,j,de,oe)),he-=Math.abs(oe-de),de=oe}return fe},re=function(j,Y,ee){var te=(ee-Y)/2,ce=j*Math.cos(te),be=j*Math.sin(te),he=ce,fe=-be,ge=he*he+fe*fe,de=ge+he*ce+fe*be,oe=4/3*(Math.sqrt(2*ge*de)-de)/(he*be-fe*ce),Ue=he-oe*fe,tt=fe+oe*he,Fe=Ue,Ee=-tt,De=te+Y,Qe=Math.cos(De),$e=Math.sin(De);return{x1:j*Math.cos(Y),y1:j*Math.sin(Y),x2:Ue*Qe-tt*$e,y2:Ue*$e+tt*Qe,x3:Fe*Qe-Ee*$e,y3:Fe*$e+Ee*Qe,x4:j*Math.cos(ee),y4:j*Math.sin(ee)}},G=function(j){return 180*j/Math.PI},q=function(j,Y,ee,te,ce,be){var he=j+.5*(ee-j),fe=Y+.5*(te-Y),ge=ce+.5*(ee-ce),de=be+.5*(te-be),oe=Math.min(j,ce,he,ge),Ue=Math.max(j,ce,he,ge),tt=Math.min(Y,be,fe,de),Fe=Math.max(Y,be,fe,de);return new o(oe,tt,Ue-oe,Fe-tt)},W=function(j,Y,ee,te,ce,be,he,fe){var ge,de,oe,Ue,tt,Fe,Ee,De,Qe,$e,ut,Et,lt,Dt,zt=ee-j,Jt=te-Y,Rt=ce-ee,Ot=be-te,qt=he-ce,It=fe-be;for(de=0;de<41;de++)Qe=(Ee=(oe=j+(ge=de/40)*zt)+ge*((tt=ee+ge*Rt)-oe))+ge*(tt+ge*(ce+ge*qt-tt)-Ee),$e=(De=(Ue=Y+ge*Jt)+ge*((Fe=te+ge*Ot)-Ue))+ge*(Fe+ge*(be+ge*It-Fe)-De),de==0?(ut=Qe,Et=$e,lt=Qe,Dt=$e):(ut=Math.min(ut,Qe),Et=Math.min(Et,$e),lt=Math.max(lt,Qe),Dt=Math.max(Dt,$e));return new o(Math.round(ut),Math.round(Et),Math.round(lt-ut),Math.round(Dt-Et))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var j,Y,ee=(j=this.ctx.lineDash,Y=this.ctx.lineDashOffset,JSON.stringify({lineDash:j,lineDashOffset:Y}));this.prevLineDash!==ee&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ee)}}})(lr.API),function(t){var e=function(a){var i,o,l,u,d,h,m,g,b,y;for(o=[],l=0,u=(a+=i="\0\0\0\0".slice(a.length%4||4)).length;u>l;l+=4)(d=(a.charCodeAt(l)<<24)+(a.charCodeAt(l+1)<<16)+(a.charCodeAt(l+2)<<8)+a.charCodeAt(l+3))!==0?(h=(d=((d=((d=((d=(d-(y=d%85))/85)-(b=d%85))/85)-(g=d%85))/85)-(m=d%85))/85)%85,o.push(h+33,m+33,g+33,b+33,y+33)):o.push(122);return function(_,T){for(var k=T;k>0;k--)_.pop()}(o,i.length),String.fromCharCode.apply(String,o)+"~>"},r=function(a){var i,o,l,u,d,h=String,m="length",g=255,b="charCodeAt",y="slice",_="replace";for(a[y](-2),a=a[y](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),l=[],u=0,d=(a+=i="uuuuu"[y](a[m]%5||5))[m];d>u;u+=5)o=52200625*(a[b](u)-33)+614125*(a[b](u+1)-33)+7225*(a[b](u+2)-33)+85*(a[b](u+3)-33)+(a[b](u+4)-33),l.push(g&o>>24,g&o>>16,g&o>>8,g&o);return function(T,k){for(var D=k;D>0;D--)T.pop()}(l,i[m]),h.fromCharCode.apply(h,l)},n=function(a){var i=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),i.test(a)===!1)return"";for(var o="",l=0;l<a.length;l+=2)o+=String.fromCharCode("0x"+(a[l]+a[l+1]));return o},s=function(a){for(var i=new Uint8Array(a.length),o=a.length;o--;)i[o]=a.charCodeAt(o);return a=(i=xS(i)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(a,i){var o=0,l=a||"",u=[];for(typeof(i=i||[])=="string"&&(i=[i]),o=0;o<i.length;o+=1)switch(i[o]){case"ASCII85Decode":case"/ASCII85Decode":l=r(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=n(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=s(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+i[o]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(lr.API),function(t){t.loadFile=function(e,r,n){return function(s,a,i){a=a!==!1,i=typeof i=="function"?i:function(){};var o=void 0;try{o=function(l,u,d){var h=new XMLHttpRequest,m=0,g=function(b){var y=b.length,_=[],T=String.fromCharCode;for(m=0;m<y;m+=1)_.push(T(255&b.charCodeAt(m)));return _.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?d(g(this.responseText)):d(void 0)}),h.send(null),u&&h.status===200)return g(h.responseText)}(s,a,i)}catch{}return o}(e,r,n)},t.loadImageFile=t.loadFile}(lr.API),function(t){function e(){return(Er.html2canvas?Promise.resolve(Er.html2canvas):wx(()=>Promise.resolve().then(()=>xSe),void 0)).catch(function(i){return Promise.reject(new Error("Could not load html2canvas: "+i))}).then(function(i){return i.default?i.default:i})}function r(){return(Er.DOMPurify?Promise.resolve(Er.DOMPurify):wx(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(i){return Promise.reject(new Error("Could not load dompurify: "+i))}).then(function(i){return i.default?i.default:i})}var n=function(i){var o=qn(i);return o==="undefined"?"undefined":o==="string"||i instanceof String?"string":o==="number"||i instanceof Number?"number":o==="function"||i instanceof Function?"function":i&&i.constructor===Array?"array":i&&i.nodeType===1?"element":o==="object"?"object":"unknown"},s=function(i,o){var l=document.createElement(i);for(var u in o.className&&(l.className=o.className),o.innerHTML&&o.dompurify&&(l.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)l.style[u]=o.style[u];return l},a=function i(o){var l=Object.assign(i.convert(Promise.resolve()),JSON.parse(JSON.stringify(i.template))),u=i.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,i,1,[i])).set(o)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(i,o){return i.__proto__=o||a.prototype,i},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(i,o){return this.then(function(){switch(o=o||function(l){switch(n(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(i)){case"string":return this.then(r).then(function(l){return this.set({src:s("div",{innerHTML:i,dompurify:l})})});case"element":return this.set({src:i});case"canvas":return this.set({canvas:i});case"img":return this.set({img:i});default:return this.error("Unknown source type.")}})},a.prototype.to=function(i){switch(i){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var i={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function l(u,d){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)d!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(l(m,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(i.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:i}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,o(this.prop.container,l)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var i=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(i).then(e).then(function(o){var l=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var g=u[m],b=g.src.find(function(y){return y.format==="truetype"});b&&l.addFont(b.url,g.ref.name,g.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),o(this.prop.container,h)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var i=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=i})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(i,o,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(i,o):this.outputPdf(i,o)},a.prototype.outputPdf=function(i,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(i,o)})},a.prototype.outputImg=function(i){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(i){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+i+'" is not supported.'}})},a.prototype.save=function(i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(i?{filename:i}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(i){if(n(i)!=="object")return this;var o=Object.keys(i||{}).map(function(l){if(l in a.template.prop)return function(){this.prop[l]=i[l]};switch(l){case"margin":return this.setMargin.bind(this,i.margin);case"jsPDF":return function(){return this.opt.jsPDF=i.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,i.pageSize);default:return function(){this.opt[l]=i[l]}}},this);return this.then(function(){return this.thenList(o)})},a.prototype.get=function(i,o){return this.then(function(){var l=i in a.template.prop?this.prop[i]:this.opt[i];return o?o(l):l})},a.prototype.setMargin=function(i){return this.then(function(){switch(n(i)){case"number":i=[i,i,i,i];case"array":if(i.length===2&&(i=[i[0],i[1],i[0],i[1]]),i.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=i}).then(this.setPageSize)},a.prototype.setPageSize=function(i){function o(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(i=i||lr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(i.inner={width:i.width-this.opt.margin[1]-this.opt.margin[3],height:i.height-this.opt.margin[0]-this.opt.margin[2]},i.inner.px={width:o(i.inner.width,i.k),height:o(i.inner.height,i.k)},i.inner.ratio=i.inner.height/i.inner.width),this.prop.pageSize=i})},a.prototype.setProgress=function(i,o,l,u){return i!=null&&(this.progress.val=i),o!=null&&(this.progress.state=o),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(i,o,l,u){return this.setProgress(i?this.progress.val+i:null,o||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},a.prototype.then=function(i,o){var l=this;return this.thenCore(i,o,function(u,d){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,d).then(function(h){return l.updateProgress(1),h})})},a.prototype.thenCore=function(i,o,l){l=l||Promise.prototype.then,i&&(i=i.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),d=l.call(u,i,o);return a.convert(d,this.__proto__)},a.prototype.thenExternal=function(i,o){return Promise.prototype.then.call(this,i,o)},a.prototype.thenList=function(i){var o=this;return i.forEach(function(l){o=o.thenCore(l)}),o},a.prototype.catch=function(i){i&&(i=i.bind(this));var o=Promise.prototype.catch.call(this,i);return a.convert(o,this)},a.prototype.catchExternal=function(i){return Promise.prototype.catch.call(this,i)},a.prototype.error=function(i){return this.then(function(){throw new Error(i)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,lr.getPageSize=function(i,o,l){if(qn(i)==="object"){var u=i;i=u.orientation,o=u.unit||o,l=u.format||l}o=o||"mm",l=l||"a4",i=(""+(i||"P")).toLowerCase();var d,h=(""+l).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var g,b=0,y=0;if(m.hasOwnProperty(h))b=m[h][1]/d,y=m[h][0]/d;else try{b=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(i==="p"||i==="portrait")i="p",y>b&&(g=y,y=b,b=g);else{if(i!=="l"&&i!=="landscape")throw"Invalid orientation: "+i;i="l",b>y&&(g=y,y=b,b=g)}return{width:y,height:b,unit:o,k:d,orientation:i}},t.html=function(i,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(ES):null;var l=new a(o);return o.worker?l:l.from(i).doCallback()}}(lr.API),lr.API.addJS=function(t){return o6=t,this.internal.events.subscribe("postPutResources",function(){Qv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Qv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),i6=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+o6+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Qv!==void 0&&i6!==void 0&&this.internal.out("/Names <</JavaScript "+Qv+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),a=0;a<s.length;a++){var i=s[a],o=n.exec(i);if(o!=null){var l=o[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(i)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(a=0;a<u;a++){var h=r.internal.newObject();d.push(h);var m=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var g=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<d.length;a++)r.internal.write("(page_"+(a+1)+")"+d[a]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+g+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,a){var i={title:s,options:a,children:[]};return n==null&&(n=this.root),n.children.push(i),i},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var i=n.children[a];this.objStart(i),this.line("/Title "+this.makeString(i.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1])));var o=this.count=this.count_r({count:0},i);if(o>0&&this.line("/Count "+o),i.options&&i.options.pageNumber){var l=r.internal.getPageInfo(i.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var a=0;a<s.children.length;a++)n.count++,this.count_r(n,s.children[a]);return n.count}}])}(lr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,a,i,o){var l,u=this.decode.DCT_DECODE,d=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=i||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(l=function(h){for(var m,g=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,y={width:0,height:0,numcomponents:1},_=4;_<b;_+=2){if(_+=g,e.indexOf(h.charCodeAt(_+1))!==-1){m=256*h.charCodeAt(_+5)+h.charCodeAt(_+6),y={width:256*h.charCodeAt(_+7)+h.charCodeAt(_+8),height:m,numcomponents:h.charCodeAt(_+9)};break}g=256*h.charCodeAt(_+2)+h.charCodeAt(_+3)}return y}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:r,width:l.width,height:l.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:s}}return d}}(lr.API);var R0,Hv,l6,c6,u6,Lle=function(){var t,e,r;function n(a){var i,o,l,u,d,h,m,g,b,y,_,T,k,D;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(i=this.readUInt32(),b=(function(){var M,P;for(P=[],M=0;M<4;++M)P.push(String.fromCharCode(this.data[this.pos++]));return P}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(i);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*d/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,i-=4),a=(h!=null?h.data:void 0)||this.imgData,T=0;0<=i?T<i:T>i;0<=i?++T:--T)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(i),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(k=0;0<=y?k<y:k>y;0<=y?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(i)[0];break;case 2:this.transparency.rgb=this.read(i)}break;case"tEXt":m=(_=this.read(i)).indexOf(0),g=String.fromCharCode.apply(String,_.slice(0,m)),this.text[g]=String.fromCharCode.apply(String,_.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(D=this.colorType)===4||D===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=i}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(a){var i,o;for(o=[],i=0;0<=a?i<a:i>a;0<=a?++i:--i)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(a){var i=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*i),l=0,u=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function d(h,m,g,b){var y,_,T,k,D,M,P,L,C,E,B,O,R,F,Q,H,ne,J,re,G,q,W=Math.ceil((u.width-h)/g),ie=Math.ceil((u.height-m)/b),j=u.width==W&&u.height==ie;for(F=i*W,O=j?o:new Uint8Array(F*ie),M=a.length,R=0,_=0;R<ie&&l<M;){switch(a[l++]){case 0:for(k=ne=0;ne<F;k=ne+=1)O[_++]=a[l++];break;case 1:for(k=J=0;J<F;k=J+=1)y=a[l++],D=k<i?0:O[_-i],O[_++]=(y+D)%256;break;case 2:for(k=re=0;re<F;k=re+=1)y=a[l++],T=(k-k%i)/i,Q=R&&O[(R-1)*F+T*i+k%i],O[_++]=(Q+y)%256;break;case 3:for(k=G=0;G<F;k=G+=1)y=a[l++],T=(k-k%i)/i,D=k<i?0:O[_-i],Q=R&&O[(R-1)*F+T*i+k%i],O[_++]=(y+Math.floor((D+Q)/2))%256;break;case 4:for(k=q=0;q<F;k=q+=1)y=a[l++],T=(k-k%i)/i,D=k<i?0:O[_-i],R===0?Q=H=0:(Q=O[(R-1)*F+T*i+k%i],H=T&&O[(R-1)*F+(T-1)*i+k%i]),P=D+Q-H,L=Math.abs(P-D),E=Math.abs(P-Q),B=Math.abs(P-H),C=L<=E&&L<=B?D:E<=B?Q:H,O[_++]=(y+C)%256;break;default:throw new Error("Invalid filter algorithm: "+a[l-1])}if(!j){var Y=((m+R*b)*u.width+h)*i,ee=R*F;for(k=0;k<W;k+=1){for(var te=0;te<i;te+=1)o[Y++]=O[ee++];Y+=(g-1)*i}}R++}}return a=fle(a),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},n.prototype.decodePalette=function(){var a,i,o,l,u,d,h,m,g;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),l=0,a=0,i=h=0,m=o.length;h<m;i=h+=3)u[l++]=o[i],u[l++]=o[i+1],u[l++]=o[i+2],u[l++]=(g=d[a++])!=null?g:255;return u},n.prototype.copyToImageData=function(a,i){var o,l,u,d,h,m,g,b,y,_,T;if(l=this.colors,y=null,o=this.hasAlphaChannel,this.palette.length&&(y=(T=this._decodedPalette)!=null?T:this._decodedPalette=this.decodePalette(),l=4,o=!0),b=(u=a.data||a).length,h=y||i,d=m=0,l===1)for(;d<b;)g=y?4*i[d/4]:m,_=h[g++],u[d++]=_,u[d++]=_,u[d++]=_,u[d++]=o?h[g++]:255,m=g;else for(;d<b;)g=y?4*i[d/4]:m,u[d++]=h[g++],u[d++]=h[g++],u[d++]=h[g++],u[d++]=o?h[g++]:255,m=g},n.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(Er)==="[object Window]"){try{e=Er.document.createElement("canvas"),r=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),t=function(a){var i;if(s()===!0)return r.width=a.width,r.height=a.height,r.clearRect(0,0,a.width,a.height),r.putImageData(a,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(a){var i,o,l,u,d,h,m,g;if(this.animation){for(g=[],o=d=0,h=(m=this.animation.frames).length;d<h;o=++d)i=m[o],l=a.createImageData(i.width,i.height),u=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(l,u),i.imageData=l,g.push(i.image=t(l));return g}},n.prototype.renderFrame=function(a,i){var o,l,u;return o=(l=this.animation.frames)[i],u=l[i-1],i===0&&a.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?a.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&a.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&a.clearRect(o.xOffset,o.yOffset,o.width,o.height),a.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(a){var i,o,l,u,d,h,m=this;return o=0,h=this.animation,u=h.numFrames,l=h.frames,d=h.numPlays,(i=function(){var g,b;if(g=o++%u,b=l[g],m.renderFrame(a,g),u>1&&o/u<d)return m.animation._timeout=setTimeout(i,b.delay)})()},n.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},n.prototype.render=function(a){var i,o;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,i=a.getContext("2d"),this.animation?(this.decodeFrames(i),this.animate(i)):(o=i.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),i.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Ule(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],a=s>>7,i=1<<(7&s)+1;t[e++],t[e++];var o=null,l=null;a&&(o=e,l=i,e+=3*i);var u=!0,d=[],h=0,m=null,g=0,b=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,b=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=t[e++];h=t[e++]|t[e++]<<8,m=t[e++],(1&y)==0&&(m=null),g=y>>2&7,e++;break;case 254:for(;;){if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var _=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,M=t[e++],P=M>>6&1,L=1<<(7&M)+1,C=o,E=l,B=!1;M>>7&&(B=!0,C=e,E=L,e+=3*L);var O=e;for(e++;;){var R;if(!((R=t[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}d.push({x:_,y:T,width:k,height:D,has_local_palette:B,palette_offset:C,palette_size:E,data_offset:O,data_length:e-O,transparent_index:m,interlaced:!!P,delay:h,disposal:g});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return b},this.frameInfo=function(F){if(F<0||F>=d.length)throw new Error("Frame index out of range.");return d[F]},this.decodeAndBlitFrameBGRA=function(F,Q){var H=this.frameInfo(F),ne=H.width*H.height,J=new Uint8Array(ne);A6(t,H.data_offset,J,ne);var re=H.palette_offset,G=H.transparent_index;G===null&&(G=256);var q=H.width,W=r-q,ie=q,j=4*(H.y*r+H.x),Y=4*((H.y+H.height)*r+H.x),ee=j,te=4*W;H.interlaced===!0&&(te+=4*r*7);for(var ce=8,be=0,he=J.length;be<he;++be){var fe=J[be];if(ie===0&&(ie=q,(ee+=te)>=Y&&(te=4*W+4*r*(ce-1),ee=j+(q+W)*(ce<<1),ce>>=1)),fe===G)ee+=4;else{var ge=t[re+3*fe],de=t[re+3*fe+1],oe=t[re+3*fe+2];Q[ee++]=oe,Q[ee++]=de,Q[ee++]=ge,Q[ee++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(F,Q){var H=this.frameInfo(F),ne=H.width*H.height,J=new Uint8Array(ne);A6(t,H.data_offset,J,ne);var re=H.palette_offset,G=H.transparent_index;G===null&&(G=256);var q=H.width,W=r-q,ie=q,j=4*(H.y*r+H.x),Y=4*((H.y+H.height)*r+H.x),ee=j,te=4*W;H.interlaced===!0&&(te+=4*r*7);for(var ce=8,be=0,he=J.length;be<he;++be){var fe=J[be];if(ie===0&&(ie=q,(ee+=te)>=Y&&(te=4*W+4*r*(ce-1),ee=j+(q+W)*(ce<<1),ce>>=1)),fe===G)ee+=4;else{var ge=t[re+3*fe],de=t[re+3*fe+1],oe=t[re+3*fe+2];Q[ee++]=ge,Q[ee++]=de,Q[ee++]=oe,Q[ee++]=255}--ie}}}function A6(t,e,r,n){for(var s=t[e++],a=1<<s,i=a+1,o=i+1,l=s+1,u=(1<<l)-1,d=0,h=0,m=0,g=t[e++],b=new Int32Array(4096),y=null;;){for(;d<16&&g!==0;)h|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var _=h&u;if(h>>=l,d-=l,_!==a){if(_===i)break;for(var T=_<o?_:y,k=0,D=T;D>a;)D=b[D]>>8,++k;var M=D;if(m+k+(T!==_?1:0)>n)return void as.log("Warning, gif stream longer than expected.");r[m++]=M;var P=m+=k;for(T!==_&&(r[m++]=M),D=T;k--;)D=b[D],r[--P]=255&D,D>>=8;y!==null&&o<4096&&(b[o++]=y<<8|M,o>=u+1&&l<12&&(++l,u=u<<1|1)),y=_}else o=i+1,u=(1<<(l=s+1))-1,y=null}return m!==n&&as.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function EE(t){var e,r,n,s,a,i=Math.floor,o=new Array(64),l=new Array(64),u=new Array(64),d=new Array(64),h=new Array(65535),m=new Array(65535),g=new Array(64),b=new Array(64),y=[],_=0,T=7,k=new Array(64),D=new Array(64),M=new Array(64),P=new Array(256),L=new Array(2048),C=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],F=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Q=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function J(j,Y){for(var ee=0,te=0,ce=new Array,be=1;be<=16;be++){for(var he=1;he<=j[be];he++)ce[Y[te]]=[],ce[Y[te]][0]=ee,ce[Y[te]][1]=be,te++,ee++;ee*=2}return ce}function re(j){for(var Y=j[0],ee=j[1]-1;ee>=0;)Y&1<<ee&&(_|=1<<T),ee--,--T<0&&(_==255?(G(255),G(0)):G(_),T=7,_=0)}function G(j){y.push(j)}function q(j){G(j>>8&255),G(255&j)}function W(j,Y,ee,te,ce){for(var be,he=ce[0],fe=ce[240],ge=function($e,ut){var Et,lt,Dt,zt,Jt,Rt,Ot,qt,It,Ft,pt=0;for(It=0;It<8;++It){Et=$e[pt],lt=$e[pt+1],Dt=$e[pt+2],zt=$e[pt+3],Jt=$e[pt+4],Rt=$e[pt+5],Ot=$e[pt+6];var br=Et+(qt=$e[pt+7]),Zt=Et-qt,hn=lt+Ot,vr=lt-Ot,Ur=Dt+Rt,Dn=Dt-Rt,Fr=zt+Jt,da=zt-Jt,an=br+Fr,ns=br-Fr,gs=hn+Ur,jr=hn-Ur;$e[pt]=an+gs,$e[pt+4]=an-gs;var nr=.707106781*(jr+ns);$e[pt+2]=ns+nr,$e[pt+6]=ns-nr;var Gr=.382683433*((an=da+Dn)-(jr=vr+Zt)),fa=.5411961*an+Gr,Wn=1.306562965*jr+Gr,_s=.707106781*(gs=Dn+vr),Ba=Zt+_s,Gt=Zt-_s;$e[pt+5]=Gt+fa,$e[pt+3]=Gt-fa,$e[pt+1]=Ba+Wn,$e[pt+7]=Ba-Wn,pt+=8}for(pt=0,It=0;It<8;++It){Et=$e[pt],lt=$e[pt+8],Dt=$e[pt+16],zt=$e[pt+24],Jt=$e[pt+32],Rt=$e[pt+40],Ot=$e[pt+48];var mn=Et+(qt=$e[pt+56]),on=Et-qt,Rn=lt+Ot,jn=lt-Ot,Yn=Dt+Rt,me=Dt-Rt,Be=zt+Jt,_e=zt-Jt,Se=mn+Be,Te=mn-Be,ke=Rn+Yn,Ke=Rn-Yn;$e[pt]=Se+ke,$e[pt+32]=Se-ke;var nt=.707106781*(Ke+Te);$e[pt+16]=Te+nt,$e[pt+48]=Te-nt;var Ve=.382683433*((Se=_e+me)-(Ke=jn+on)),Ye=.5411961*Se+Ve,Ze=1.306562965*Ke+Ve,wt=.707106781*(ke=me+jn),Bt=on+wt,Qt=on-wt;$e[pt+40]=Qt+Ye,$e[pt+24]=Qt-Ye,$e[pt+8]=Bt+Ze,$e[pt+56]=Bt-Ze,pt++}for(It=0;It<64;++It)Ft=$e[It]*ut[It],g[It]=Ft>0?Ft+.5|0:Ft-.5|0;return g}(j,Y),de=0;de<64;++de)b[C[de]]=ge[de];var oe=b[0]-ee;ee=b[0],oe==0?re(te[0]):(re(te[m[be=32767+oe]]),re(h[be]));for(var Ue=63;Ue>0&&b[Ue]==0;)Ue--;if(Ue==0)return re(he),ee;for(var tt,Fe=1;Fe<=Ue;){for(var Ee=Fe;b[Fe]==0&&Fe<=Ue;)++Fe;var De=Fe-Ee;if(De>=16){tt=De>>4;for(var Qe=1;Qe<=tt;++Qe)re(fe);De&=15}be=32767+b[Fe],re(ce[(De<<4)+m[be]]),re(h[be]),Fe++}return Ue!=63&&re(he),ee}function ie(j){j=Math.min(Math.max(j,1),100),a!=j&&(function(Y){for(var ee=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],te=0;te<64;te++){var ce=i((ee[te]*Y+50)/100);ce=Math.min(Math.max(ce,1),255),o[C[te]]=ce}for(var be=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var fe=i((be[he]*Y+50)/100);fe=Math.min(Math.max(fe,1),255),l[C[he]]=fe}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],de=0,oe=0;oe<8;oe++)for(var Ue=0;Ue<8;Ue++)u[de]=1/(o[C[de]]*ge[oe]*ge[Ue]*8),d[de]=1/(l[C[de]]*ge[oe]*ge[Ue]*8),de++}(j<50?Math.floor(5e3/j):Math.floor(200-2*j)),a=j)}this.encode=function(j,Y){Y&&ie(Y),y=new Array,_=0,T=7,q(65496),q(65504),q(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),q(1),q(1),G(0),G(0),function(){q(65499),q(132),G(0);for(var lt=0;lt<64;lt++)G(o[lt]);G(1);for(var Dt=0;Dt<64;Dt++)G(l[Dt])}(),function(lt,Dt){q(65472),q(17),G(8),q(Dt),q(lt),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)}(j.width,j.height),function(){q(65476),q(418),G(0);for(var lt=0;lt<16;lt++)G(E[lt+1]);for(var Dt=0;Dt<=11;Dt++)G(B[Dt]);G(16);for(var zt=0;zt<16;zt++)G(O[zt+1]);for(var Jt=0;Jt<=161;Jt++)G(R[Jt]);G(1);for(var Rt=0;Rt<16;Rt++)G(F[Rt+1]);for(var Ot=0;Ot<=11;Ot++)G(Q[Ot]);G(17);for(var qt=0;qt<16;qt++)G(H[qt+1]);for(var It=0;It<=161;It++)G(ne[It])}(),q(65498),q(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var ee=0,te=0,ce=0;_=0,T=7,this.encode.displayName="_encode_";for(var be,he,fe,ge,de,oe,Ue,tt,Fe,Ee=j.data,De=j.width,Qe=j.height,$e=4*De,ut=0;ut<Qe;){for(be=0;be<$e;){for(de=$e*ut+be,Ue=-1,tt=0,Fe=0;Fe<64;Fe++)oe=de+(tt=Fe>>3)*$e+(Ue=4*(7&Fe)),ut+tt>=Qe&&(oe-=$e*(ut+1+tt-Qe)),be+Ue>=$e&&(oe-=be+Ue-$e+4),he=Ee[oe++],fe=Ee[oe++],ge=Ee[oe++],k[Fe]=(L[he]+L[fe+256>>0]+L[ge+512>>0]>>16)-128,D[Fe]=(L[he+768>>0]+L[fe+1024>>0]+L[ge+1280>>0]>>16)-128,M[Fe]=(L[he+1280>>0]+L[fe+1536>>0]+L[ge+1792>>0]>>16)-128;ee=W(k,u,ee,e,n),te=W(D,d,te,r,s),ce=W(M,d,ce,r,s),be+=32}ut+=8}if(T>=0){var Et=[];Et[1]=T+1,Et[0]=(1<<T+1)-1,re(Et)}return q(65497),new Uint8Array(y)},t=t||50,function(){for(var j=String.fromCharCode,Y=0;Y<256;Y++)P[Y]=j(Y)}(),e=J(E,B),r=J(F,Q),n=J(O,R),s=J(H,ne),function(){for(var j=1,Y=2,ee=1;ee<=15;ee++){for(var te=j;te<Y;te++)m[32767+te]=ee,h[32767+te]=[],h[32767+te][1]=ee,h[32767+te][0]=te;for(var ce=-(Y-1);ce<=-j;ce++)m[32767+ce]=ee,h[32767+ce]=[],h[32767+ce][1]=ee,h[32767+ce][0]=Y-1+ce;j<<=1,Y<<=1}}(),function(){for(var j=0;j<256;j++)L[j]=19595*j,L[j+256>>0]=38470*j,L[j+512>>0]=7471*j+32768,L[j+768>>0]=-11059*j,L[j+1024>>0]=-21709*j,L[j+1280>>0]=32768*j+8421375,L[j+1536>>0]=-27439*j,L[j+1792>>0]=-5329*j}(),ie(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function bc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function d6(t){function e(E){if(!E)throw Error("assert :P")}function r(E,B,O){for(var R=0;4>R;R++)if(E[B+R]!=O.charCodeAt(R))return!0;return!1}function n(E,B,O,R,F){for(var Q=0;Q<F;Q++)E[B+Q]=O[R+Q]}function s(E,B,O,R){for(var F=0;F<R;F++)E[B+F]=O}function a(E){return new Int32Array(E)}function i(E,B){for(var O=[],R=0;R<E;R++)O.push(new B);return O}function o(E,B){var O=[];return function R(F,Q,H){for(var ne=H[Q],J=0;J<ne&&(F.push(H.length>Q+1?[]:new B),!(H.length<Q+1));J++)R(F[J],Q+1,H)}(O,0,E),O}var l=function(){var E=this;function B(S,U){for(var K=1<<U-1>>>0;S&K;)K>>>=1;return K?(S&K-1)+K:S}function O(S,U,K,se,ue){e(!(se%K));do S[U+(se-=K)]=ue;while(0<se)}function R(S,U,K,se,ue){if(e(2328>=ue),512>=ue)var pe=a(512);else if((pe=a(ue))==null)return 0;return function(xe,ve,Ce,Ne,Me,Xe){var We,Ge,xt=ve,it=1<<Ce,Pe=a(16),Oe=a(16);for(e(Me!=0),e(Ne!=null),e(xe!=null),e(0<Ce),Ge=0;Ge<Me;++Ge){if(15<Ne[Ge])return 0;++Pe[Ne[Ge]]}if(Pe[0]==Me)return 0;for(Oe[1]=0,We=1;15>We;++We){if(Pe[We]>1<<We)return 0;Oe[We+1]=Oe[We]+Pe[We]}for(Ge=0;Ge<Me;++Ge)We=Ne[Ge],0<Ne[Ge]&&(Xe[Oe[We]++]=Ge);if(Oe[15]==1)return(Ne=new F).g=0,Ne.value=Xe[0],O(xe,xt,1,it,Ne),it;var At,yt=-1,ht=it-1,$t=0,Pt=1,sr=1,Vt=1<<Ce;for(Ge=0,We=1,Me=2;We<=Ce;++We,Me<<=1){if(Pt+=sr<<=1,0>(sr-=Pe[We]))return 0;for(;0<Pe[We];--Pe[We])(Ne=new F).g=We,Ne.value=Xe[Ge++],O(xe,xt+$t,Me,Vt,Ne),$t=B($t,We)}for(We=Ce+1,Me=2;15>=We;++We,Me<<=1){if(Pt+=sr<<=1,0>(sr-=Pe[We]))return 0;for(;0<Pe[We];--Pe[We]){if(Ne=new F,($t&ht)!=yt){for(xt+=Vt,At=1<<(yt=We)-Ce;15>yt&&!(0>=(At-=Pe[yt]));)++yt,At<<=1;it+=Vt=1<<(At=yt-Ce),xe[ve+(yt=$t&ht)].g=At+Ce,xe[ve+yt].value=xt-ve-yt}Ne.g=We-Ce,Ne.value=Xe[Ge++],O(xe,xt+($t>>Ce),Me,Vt,Ne),$t=B($t,We)}}return Pt!=2*Oe[15]-1?0:it}(S,U,K,se,ue,pe)}function F(){this.value=this.g=0}function Q(){this.value=this.g=0}function H(){this.G=i(5,F),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Ys,Q)}function ne(S,U,K,se){e(S!=null),e(U!=null),e(2147483648>se),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=U,S.pa=K,S.Jd=U,S.Yc=K+se,S.Zc=4<=se?K+se-4+1:K,be(S)}function J(S,U){for(var K=0;0<U--;)K|=fe(S,128)<<U;return K}function re(S,U){var K=J(S,U);return he(S)?-K:K}function G(S,U,K,se){var ue,pe=0;for(e(S!=null),e(U!=null),e(4294967288>se),S.Sb=se,S.Ra=0,S.u=0,S.h=0,4<se&&(se=4),ue=0;ue<se;++ue)pe+=U[K+ue]<<8*ue;S.Ra=pe,S.bb=se,S.oa=U,S.pa=K}function q(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<Xu-8>>>0,++S.bb,S.u-=8;ee(S)&&(S.h=1,S.u=0)}function W(S,U){if(e(0<=U),!S.h&&U<=Ju){var K=Y(S)&$c[U];return S.u+=U,q(S),K}return S.h=1,S.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Y(S){return S.Ra>>>(S.u&Xu-1)>>>0}function ee(S){return e(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>Xu}function te(S,U){S.u=U,S.h=ee(S)}function ce(S){S.u>=rd&&(e(S.u>=rd),q(S))}function be(S){e(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(e(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function he(S){return J(S,1)}function fe(S,U){var K=S.Ca;0>S.b&&be(S);var se=S.b,ue=K*U>>>8,pe=(S.I>>>se>ue)+0;for(pe?(K-=ue,S.I-=ue+1<<se>>>0):K=ue+1,se=K,ue=0;256<=se;)ue+=8,se>>=8;return se=7^ue+Ci[se],S.b-=se,S.Ca=(K<<se)-1,pe}function ge(S,U,K){S[U+0]=K>>24&255,S[U+1]=K>>16&255,S[U+2]=K>>8&255,S[U+3]=K>>0&255}function de(S,U){return S[U+0]<<0|S[U+1]<<8}function oe(S,U){return de(S,U)|S[U+2]<<16}function Ue(S,U){return de(S,U)|de(S,U+2)<<16}function tt(S,U){var K=1<<U;return e(S!=null),e(0<U),S.X=a(K),S.X==null?0:(S.Mb=32-U,S.Xa=U,1)}function Fe(S,U){e(S!=null),e(U!=null),e(S.Xa==U.Xa),n(U.X,0,S.X,0,1<<U.Xa)}function Ee(){this.X=[],this.Xa=this.Mb=0}function De(S,U,K,se){e(K!=null),e(se!=null);var ue=K[0],pe=se[0];return ue==0&&(ue=(S*pe+U/2)/U),pe==0&&(pe=(U*ue+S/2)/S),0>=ue||0>=pe?0:(K[0]=ue,se[0]=pe,1)}function Qe(S,U){return S+(1<<U)-1>>>U}function $e(S,U){return((4278255360&S)+(4278255360&U)>>>0&4278255360)+((16711935&S)+(16711935&U)>>>0&16711935)>>>0}function ut(S,U){E[U]=function(K,se,ue,pe,xe,ve,Ce){var Ne;for(Ne=0;Ne<xe;++Ne){var Me=E[S](ve[Ce+Ne-1],ue,pe+Ne);ve[Ce+Ne]=$e(K[se+Ne],Me)}}}function Et(){this.ud=this.hd=this.jd=0}function lt(S,U){return((4278124286&(S^U))>>>1)+(S&U)>>>0}function Dt(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function zt(S,U){return Dt(S+(S-U+.5>>1))}function Jt(S,U,K){return Math.abs(U-K)-Math.abs(S-K)}function Rt(S,U,K,se,ue,pe,xe){for(se=pe[xe-1],K=0;K<ue;++K)pe[xe+K]=se=$e(S[U+K],se)}function Ot(S,U,K,se,ue){var pe;for(pe=0;pe<K;++pe){var xe=S[U+pe],ve=xe>>8&255,Ce=16711935&(Ce=(Ce=16711935&xe)+((ve<<16)+ve));se[ue+pe]=(4278255360&xe)+Ce>>>0}}function qt(S,U){U.jd=S>>0&255,U.hd=S>>8&255,U.ud=S>>16&255}function It(S,U,K,se,ue,pe){var xe;for(xe=0;xe<se;++xe){var ve=U[K+xe],Ce=ve>>>8,Ne=ve,Me=255&(Me=(Me=ve>>>16)+((S.jd<<24>>24)*(Ce<<24>>24)>>>5));Ne=255&(Ne=(Ne=Ne+((S.hd<<24>>24)*(Ce<<24>>24)>>>5))+((S.ud<<24>>24)*(Me<<24>>24)>>>5)),ue[pe+xe]=(4278255360&ve)+(Me<<16)+Ne}}function Ft(S,U,K,se,ue){E[U]=function(pe,xe,ve,Ce,Ne,Me,Xe,We,Ge){for(Ce=Xe;Ce<We;++Ce)for(Xe=0;Xe<Ge;++Xe)Ne[Me++]=ue(ve[se(pe[xe++])])},E[S]=function(pe,xe,ve,Ce,Ne,Me,Xe){var We=8>>pe.b,Ge=pe.Ea,xt=pe.K[0],it=pe.w;if(8>We)for(pe=(1<<pe.b)-1,it=(1<<We)-1;xe<ve;++xe){var Pe,Oe=0;for(Pe=0;Pe<Ge;++Pe)Pe&pe||(Oe=se(Ce[Ne++])),Me[Xe++]=ue(xt[Oe&it]),Oe>>=We}else E["VP8LMapColor"+K](Ce,Ne,xt,it,Me,Xe,xe,ve,Ge)}}function pt(S,U,K,se,ue){for(K=U+K;U<K;){var pe=S[U++];se[ue++]=pe>>16&255,se[ue++]=pe>>8&255,se[ue++]=pe>>0&255}}function br(S,U,K,se,ue){for(K=U+K;U<K;){var pe=S[U++];se[ue++]=pe>>16&255,se[ue++]=pe>>8&255,se[ue++]=pe>>0&255,se[ue++]=pe>>24&255}}function Zt(S,U,K,se,ue){for(K=U+K;U<K;){var pe=(xe=S[U++])>>16&240|xe>>12&15,xe=xe>>0&240|xe>>28&15;se[ue++]=pe,se[ue++]=xe}}function hn(S,U,K,se,ue){for(K=U+K;U<K;){var pe=(xe=S[U++])>>16&248|xe>>13&7,xe=xe>>5&224|xe>>3&31;se[ue++]=pe,se[ue++]=xe}}function vr(S,U,K,se,ue){for(K=U+K;U<K;){var pe=S[U++];se[ue++]=pe>>0&255,se[ue++]=pe>>8&255,se[ue++]=pe>>16&255}}function Ur(S,U,K,se,ue,pe){if(pe==0)for(K=U+K;U<K;)ge(se,((pe=S[U++])[0]>>24|pe[1]>>8&65280|pe[2]<<8&16711680|pe[3]<<24)>>>0),ue+=32;else n(se,ue,S,U,K)}function Dn(S,U){E[U][0]=E[S+"0"],E[U][1]=E[S+"1"],E[U][2]=E[S+"2"],E[U][3]=E[S+"3"],E[U][4]=E[S+"4"],E[U][5]=E[S+"5"],E[U][6]=E[S+"6"],E[U][7]=E[S+"7"],E[U][8]=E[S+"8"],E[U][9]=E[S+"9"],E[U][10]=E[S+"10"],E[U][11]=E[S+"11"],E[U][12]=E[S+"12"],E[U][13]=E[S+"13"],E[U][14]=E[S+"0"],E[U][15]=E[S+"0"]}function Fr(S){return S==Mf||S==su||S==cc||S==id}function da(){this.eb=[],this.size=this.A=this.fb=0}function an(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ns(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new da,this.f.kb=new an,this.sd=null}function gs(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function jr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function nr(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function Gr(S,U){var K=S.T,se=U.ba.f.RGBA,ue=se.eb,pe=se.fb+S.ka*se.A,xe=xa[U.ba.S],ve=S.y,Ce=S.O,Ne=S.f,Me=S.N,Xe=S.ea,We=S.W,Ge=U.cc,xt=U.dc,it=U.Mc,Pe=U.Nc,Oe=S.ka,At=S.ka+S.T,yt=S.U,ht=yt+1>>1;for(Oe==0?xe(ve,Ce,null,null,Ne,Me,Xe,We,Ne,Me,Xe,We,ue,pe,null,null,yt):(xe(U.ec,U.fc,ve,Ce,Ge,xt,it,Pe,Ne,Me,Xe,We,ue,pe-se.A,ue,pe,yt),++K);Oe+2<At;Oe+=2)Ge=Ne,xt=Me,it=Xe,Pe=We,Me+=S.Rc,We+=S.Rc,pe+=2*se.A,xe(ve,(Ce+=2*S.fa)-S.fa,ve,Ce,Ge,xt,it,Pe,Ne,Me,Xe,We,ue,pe-se.A,ue,pe,yt);return Ce+=S.fa,S.j+At<S.o?(n(U.ec,U.fc,ve,Ce,yt),n(U.cc,U.dc,Ne,Me,ht),n(U.Mc,U.Nc,Xe,We,ht),K--):1&At||xe(ve,Ce,null,null,Ne,Me,Xe,We,Ne,Me,Xe,We,ue,pe+se.A,null,null,yt),K}function fa(S,U,K){var se=S.F,ue=[S.J];if(se!=null){var pe=S.U,xe=U.ba.S,ve=xe==nA||xe==cc;U=U.ba.f.RGBA;var Ce=[0],Ne=S.ka;Ce[0]=S.T,S.Kb&&(Ne==0?--Ce[0]:(--Ne,ue[0]-=S.width),S.j+S.ka+S.T==S.o&&(Ce[0]=S.o-S.j-Ne));var Me=U.eb;Ne=U.fb+Ne*U.A,S=Wr(se,ue[0],S.width,pe,Ce,Me,Ne+(ve?0:3),U.A),e(K==Ce),S&&Fr(xe)&&Zi(Me,Ne,ve,pe,Ce,U.A)}return 0}function Wn(S){var U=S.ma,K=U.ba.S,se=11>K,ue=K==ad||K==Uf||K==nA||K==lc||K==12||Fr(K);if(U.memory=null,U.Ib=null,U.Jb=null,U.Nd=null,!Kc(U.Oa,S,ue?11:12))return 0;if(ue&&Fr(K)&&St(),S.da)alert("todo:use_scaling");else{if(se){if(U.Ib=nr,S.Kb){if(K=S.U+1>>1,U.memory=a(S.U+2*K),U.memory==null)return 0;U.ec=U.memory,U.fc=0,U.cc=U.ec,U.dc=U.fc+S.U,U.Mc=U.cc,U.Nc=U.dc+K,U.Ib=Gr,St()}}else alert("todo:EmitYUV");ue&&(U.Jb=fa,se&&ze())}if(se&&!R1){for(S=0;256>S;++S)jb[S]=89858*(S-128)+Xs>>Nl,Of[S]=-22014*(S-128)+Xs,xp[S]=-45773*(S-128),Zs[S]=113618*(S-128)+Xs>>Nl;for(S=ou;S<u0;++S)U=76283*(S-16)+Xs>>Nl,Qf[S-ou]=Tn(U,255),vp[S-ou]=Tn(U+8>>4,15);R1=1}return 1}function _s(S){var U=S.ma,K=S.U,se=S.T;return e(!(1&S.ka)),0>=K||0>=se?0:(K=U.Ib(S,U),U.Jb!=null&&U.Jb(S,U,K),U.Dc+=K,1)}function Ba(S){S.ma.memory=null}function Gt(S,U,K,se){return W(S,8)!=47?0:(U[0]=W(S,14)+1,K[0]=W(S,14)+1,se[0]=W(S,1),W(S,3)!=0?0:!S.h)}function mn(S,U){if(4>S)return S+1;var K=S-2>>1;return(2+(1&S)<<K)+W(U,K)+1}function on(S,U){return 120<U?U-120:1<=(K=((K=Ac[U-1])>>4)*S+(8-(15&K)))?K:1;var K}function Rn(S,U,K){var se=Y(K),ue=S[U+=255&se].g-8;return 0<ue&&(te(K,K.u+8),se=Y(K),U+=S[U].value,U+=se&(1<<ue)-1),te(K,K.u+S[U].g),S[U].value}function jn(S,U,K){return K.g+=S.g,K.value+=S.value<<U>>>0,e(8>=K.g),S.g}function Yn(S,U,K){var se=S.xc;return e((U=se==0?0:S.vc[S.md*(K>>se)+(U>>se)])<S.Wb),S.Ya[U]}function me(S,U,K,se){var ue=S.ab,pe=S.c*U,xe=S.C;U=xe+U;var ve=K,Ce=se;for(se=S.Ta,K=S.Ua;0<ue--;){var Ne=S.gc[ue],Me=xe,Xe=U,We=ve,Ge=Ce,xt=(Ce=se,ve=K,Ne.Ea);switch(e(Me<Xe),e(Xe<=Ne.nc),Ne.hc){case 2:n0(We,Ge,(Xe-Me)*xt,Ce,ve);break;case 0:var it=Me,Pe=Xe,Oe=Ce,At=ve,yt=(Vt=Ne).Ea;it==0&&(pp(We,Ge,null,null,1,Oe,At),Rt(We,Ge+1,0,0,yt-1,Oe,At+1),Ge+=yt,At+=yt,++it);for(var ht=1<<Vt.b,$t=ht-1,Pt=Qe(yt,Vt.b),sr=Vt.K,Vt=Vt.w+(it>>Vt.b)*Pt;it<Pe;){var vn=sr,Nn=Vt,Kr=1;for(Rf(We,Ge,Oe,At-yt,1,Oe,At);Kr<yt;){var Hr=(Kr&~$t)+ht;Hr>yt&&(Hr=yt),(0,ac[vn[Nn++]>>8&15])(We,Ge+ +Kr,Oe,At+Kr-yt,Hr-Kr,Oe,At+Kr),Kr=Hr}Ge+=yt,At+=yt,++it&$t||(Vt+=Pt)}Xe!=Ne.nc&&n(Ce,ve-xt,Ce,ve+(Xe-Me-1)*xt,xt);break;case 1:for(xt=We,Pe=Ge,yt=(We=Ne.Ea)-(At=We&~(Oe=(Ge=1<<Ne.b)-1)),it=Qe(We,Ne.b),ht=Ne.K,Ne=Ne.w+(Me>>Ne.b)*it;Me<Xe;){for($t=ht,Pt=Ne,sr=new Et,Vt=Pe+At,vn=Pe+We;Pe<Vt;)qt($t[Pt++],sr),Yc(sr,xt,Pe,Ge,Ce,ve),Pe+=Ge,ve+=Ge;Pe<vn&&(qt($t[Pt++],sr),Yc(sr,xt,Pe,yt,Ce,ve),Pe+=yt,ve+=yt),++Me&Oe||(Ne+=it)}break;case 3:if(We==Ce&&Ge==ve&&0<Ne.b){for(Pe=Ce,We=xt=ve+(Xe-Me)*xt-(At=(Xe-Me)*Qe(Ne.Ea,Ne.b)),Ge=Ce,Oe=ve,it=[],At=(yt=At)-1;0<=At;--At)it[At]=Ge[Oe+At];for(At=yt-1;0<=At;--At)Pe[We+At]=it[At];xo(Ne,Me,Xe,Ce,xt,Ce,ve)}else xo(Ne,Me,Xe,We,Ge,Ce,ve)}ve=se,Ce=K}Ce!=K&&n(se,K,ve,Ce,pe)}function Be(S,U){var K=S.V,se=S.Ba+S.c*S.C,ue=U-S.C;if(e(U<=S.l.o),e(16>=ue),0<ue){var pe=S.l,xe=S.Ta,ve=S.Ua,Ce=pe.width;if(me(S,ue,K,se),ue=ve=[ve],e((K=S.C)<(se=U)),e(pe.v<pe.va),se>pe.o&&(se=pe.o),K<pe.j){var Ne=pe.j-K;K=pe.j,ue[0]+=Ne*Ce}if(K>=se?K=0:(ue[0]+=4*pe.v,pe.ka=K-pe.j,pe.U=pe.va-pe.v,pe.T=se-K,K=1),K){if(ve=ve[0],11>(K=S.ca).S){var Me=K.f.RGBA,Xe=(se=K.S,ue=pe.U,pe=pe.T,Ne=Me.eb,Me.A),We=pe;for(Me=Me.fb+S.Ma*Me.A;0<We--;){var Ge=xe,xt=ve,it=ue,Pe=Ne,Oe=Me;switch(se){case za:ri(Ge,xt,it,Pe,Oe);break;case ad:Ra(Ge,xt,it,Pe,Oe);break;case Mf:Ra(Ge,xt,it,Pe,Oe),Zi(Pe,Oe,0,it,1,0);break;case El:Ho(Ge,xt,it,Pe,Oe);break;case Uf:Ur(Ge,xt,it,Pe,Oe,1);break;case su:Ur(Ge,xt,it,Pe,Oe,1),Zi(Pe,Oe,0,it,1,0);break;case nA:Ur(Ge,xt,it,Pe,Oe,0);break;case cc:Ur(Ge,xt,it,Pe,Oe,0),Zi(Pe,Oe,1,it,1,0);break;case lc:Jc(Ge,xt,it,Pe,Oe);break;case id:Jc(Ge,xt,it,Pe,Oe),$r(Pe,Oe,it,1,0);break;case a0:Ei(Ge,xt,it,Pe,Oe);break;default:e(0)}ve+=Ce,Me+=Xe}S.Ma+=pe}else alert("todo:EmitRescaledRowsYUVA");e(S.Ma<=K.height)}}S.C=U,e(S.C<=S.i)}function _e(S){var U;if(0<S.ua)return 0;for(U=0;U<S.Wb;++U){var K=S.Ya[U].G,se=S.Ya[U].H;if(0<K[1][se[1]+0].g||0<K[2][se[2]+0].g||0<K[3][se[3]+0].g)return 0}return 1}function Se(S,U,K,se,ue,pe){if(S.Z!=0){var xe=S.qd,ve=S.rd;for(e(Sl[S.Z]!=null);U<K;++U)Sl[S.Z](xe,ve,se,ue,se,ue,pe),xe=se,ve=ue,ue+=pe;S.qd=xe,S.rd=ve}}function Te(S,U){var K=S.l.ma,se=K.Z==0||K.Z==1?S.l.j:S.C;if(se=S.C<se?se:S.C,e(U<=S.l.o),U>se){var ue=S.l.width,pe=K.ca,xe=K.tb+ue*se,ve=S.V,Ce=S.Ba+S.c*se,Ne=S.gc;e(S.ab==1),e(Ne[0].hc==3),Wc(Ne[0],se,U,ve,Ce,pe,xe),Se(K,se,U,pe,xe,ue)}S.C=S.Ma=U}function ke(S,U,K,se,ue,pe,xe){var ve=S.$/se,Ce=S.$%se,Ne=S.m,Me=S.s,Xe=K+S.$,We=Xe;ue=K+se*ue;var Ge=K+se*pe,xt=280+Me.ua,it=S.Pb?ve:16777216,Pe=0<Me.ua?Me.Wa:null,Oe=Me.wc,At=Xe<Ge?Yn(Me,Ce,ve):null;e(S.C<pe),e(Ge<=ue);var yt=!1;e:for(;;){for(;yt||Xe<Ge;){var ht=0;if(ve>=it){var $t=Xe-K;e((it=S).Pb),it.wd=it.m,it.xd=$t,0<it.s.ua&&Fe(it.s.Wa,it.s.vb),it=ve+I1}if(Ce&Oe||(At=Yn(Me,Ce,ve)),e(At!=null),At.Qb&&(U[Xe]=At.qb,yt=!0),!yt)if(ce(Ne),At.jc){ht=Ne,$t=U;var Pt=Xe,sr=At.pd[Y(ht)&Ys-1];e(At.jc),256>sr.g?(te(ht,ht.u+sr.g),$t[Pt]=sr.value,ht=0):(te(ht,ht.u+sr.g-256),e(256<=sr.value),ht=sr.value),ht==0&&(yt=!0)}else ht=Rn(At.G[0],At.H[0],Ne);if(Ne.h)break;if(yt||256>ht){if(!yt)if(At.nd)U[Xe]=(At.qb|ht<<8)>>>0;else{if(ce(Ne),yt=Rn(At.G[1],At.H[1],Ne),ce(Ne),$t=Rn(At.G[2],At.H[2],Ne),Pt=Rn(At.G[3],At.H[3],Ne),Ne.h)break;U[Xe]=(Pt<<24|yt<<16|ht<<8|$t)>>>0}if(yt=!1,++Xe,++Ce>=se&&(Ce=0,++ve,xe!=null&&ve<=pe&&!(ve%16)&&xe(S,ve),Pe!=null))for(;We<Xe;)ht=U[We++],Pe.X[(506832829*ht&4294967295)>>>Pe.Mb]=ht}else if(280>ht){if(ht=mn(ht-256,Ne),$t=Rn(At.G[4],At.H[4],Ne),ce(Ne),$t=on(se,$t=mn($t,Ne)),Ne.h)break;if(Xe-K<$t||ue-Xe<ht)break e;for(Pt=0;Pt<ht;++Pt)U[Xe+Pt]=U[Xe+Pt-$t];for(Xe+=ht,Ce+=ht;Ce>=se;)Ce-=se,++ve,xe!=null&&ve<=pe&&!(ve%16)&&xe(S,ve);if(e(Xe<=ue),Ce&Oe&&(At=Yn(Me,Ce,ve)),Pe!=null)for(;We<Xe;)ht=U[We++],Pe.X[(506832829*ht&4294967295)>>>Pe.Mb]=ht}else{if(!(ht<xt))break e;for(yt=ht-280,e(Pe!=null);We<Xe;)ht=U[We++],Pe.X[(506832829*ht&4294967295)>>>Pe.Mb]=ht;ht=Xe,e(!(yt>>>($t=Pe).Xa)),U[ht]=$t.X[yt],yt=!0}yt||e(Ne.h==ee(Ne))}if(S.Pb&&Ne.h&&Xe<ue)e(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Fe(S.s.vb,S.s.Wa);else{if(Ne.h)break e;xe!=null&&xe(S,ve>pe?pe:ve),S.a=0,S.$=Xe-K}return 1}return S.a=3,0}function Ke(S){e(S!=null),S.vc=null,S.yc=null,S.Ya=null;var U=S.Wa;U!=null&&(U.X=null),S.vb=null,e(S!=null)}function nt(){var S=new ed;return S==null?null:(S.a=0,S.xb=od,Dn("Predictor","VP8LPredictors"),Dn("Predictor","VP8LPredictors_C"),Dn("PredictorAdd","VP8LPredictorsAdd"),Dn("PredictorAdd","VP8LPredictorsAdd_C"),n0=Ot,Yc=It,ri=pt,Ra=br,Jc=Zt,Ei=hn,Ho=vr,E.VP8LMapColor32b=pa,E.VP8LMapColor8b=Lf,S)}function Ve(S,U,K,se,ue){var pe=1,xe=[S],ve=[U],Ce=se.m,Ne=se.s,Me=null,Xe=0;e:for(;;){if(K)for(;pe&&W(Ce,1);){var We=xe,Ge=ve,xt=se,it=1,Pe=xt.m,Oe=xt.gc[xt.ab],At=W(Pe,2);if(xt.Oc&1<<At)pe=0;else{switch(xt.Oc|=1<<At,Oe.hc=At,Oe.Ea=We[0],Oe.nc=Ge[0],Oe.K=[null],++xt.ab,e(4>=xt.ab),At){case 0:case 1:Oe.b=W(Pe,3)+2,it=Ve(Qe(Oe.Ea,Oe.b),Qe(Oe.nc,Oe.b),0,xt,Oe.K),Oe.K=Oe.K[0];break;case 3:var yt,ht=W(Pe,8)+1,$t=16<ht?0:4<ht?1:2<ht?2:3;if(We[0]=Qe(Oe.Ea,$t),Oe.b=$t,yt=it=Ve(ht,1,0,xt,Oe.K)){var Pt,sr=ht,Vt=Oe,vn=1<<(8>>Vt.b),Nn=a(vn);if(Nn==null)yt=0;else{var Kr=Vt.K[0],Hr=Vt.w;for(Nn[0]=Vt.K[0][0],Pt=1;Pt<1*sr;++Pt)Nn[Pt]=$e(Kr[Hr+Pt],Nn[Pt-1]);for(;Pt<4*vn;++Pt)Nn[Pt]=0;Vt.K[0]=null,Vt.K[0]=Nn,yt=1}}it=yt;break;case 2:break;default:e(0)}pe=it}}if(xe=xe[0],ve=ve[0],pe&&W(Ce,1)&&!(pe=1<=(Xe=W(Ce,4))&&11>=Xe)){se.a=3;break e}var Un;if(Un=pe)t:{var Bn,Ir,Qn,hr=se,Cr=xe,gn=ve,yn=Xe,va=K,ea=hr.m,Ns=hr.s,Bs=[null],Os=1,bo=0,kn=aA[yn];r:for(;;){if(va&&W(ea,1)){var Qs=W(ea,3)+2,Go=Qe(Cr,Qs),lu=Qe(gn,Qs),lA=Go*lu;if(!Ve(Go,lu,0,hr,Bs))break r;for(Bs=Bs[0],Ns.xc=Qs,Bn=0;Bn<lA;++Bn){var cu=Bs[Bn]>>8&65535;Bs[Bn]=cu,cu>=Os&&(Os=cu+1)}}if(ea.h)break r;for(Ir=0;5>Ir;++Ir){var is=eo[Ir];!Ir&&0<yn&&(is+=1<<yn),bo<is&&(bo=is)}var Hf=i(Os*kn,F),A0=Os,si=i(A0,H);if(si==null)var us=null;else e(65536>=A0),us=si;var cA=a(bo);if(us==null||cA==null||Hf==null){hr.a=1;break r}var uu=Hf;for(Bn=Qn=0;Bn<Os;++Bn){var Si=us[Bn],Au=Si.G,Ti=Si.H,Vf=0,cd=1,d0=0;for(Ir=0;5>Ir;++Ir){is=eo[Ir],Au[Ir]=uu,Ti[Ir]=Qn,!Ir&&0<yn&&(is+=1<<yn);s:{var zf,f0=is,Gf=hr,ud=cA,M1=uu,P1=Qn,qf=0,mc=Gf.m,Qb=W(mc,1);if(s(ud,0,0,f0),Qb){var j1=W(mc,1)+1,O1=W(mc,1),yp=W(mc,O1==0?1:8);ud[yp]=1,j1==2&&(ud[yp=W(mc,8)]=1);var Ad=1}else{var wp=a(19),bp=W(mc,4)+4;if(19<bp){Gf.a=3;var Kf=0;break s}for(zf=0;zf<bp;++zf)wp[uc[zf]]=W(mc,3);var h0=void 0,dd=void 0,Q1=Gf,H1=wp,pc=f0,$f=ud,m0=0,qo=Q1.m,fd=8,Cp=i(128,F);n:for(;R(Cp,0,7,H1,19);){if(W(qo,1)){var V1=2+2*W(qo,3);if((h0=2+W(qo,V1))>pc)break n}else h0=pc;for(dd=0;dd<pc&&h0--;){ce(qo);var Ep=Cp[0+(127&Y(qo))];te(qo,qo.u+Ep.g);var uA=Ep.value;if(16>uA)$f[dd++]=uA,uA!=0&&(fd=uA);else{var z1=uA==16,_p=uA-16,Sp=wo[_p],Tp=W(qo,i0[_p])+Sp;if(dd+Tp>pc)break n;for(var G1=z1?fd:0;0<Tp--;)$f[dd++]=G1}}m0=1;break n}m0||(Q1.a=3),Ad=m0}(Ad=Ad&&!mc.h)&&(qf=R(M1,P1,8,ud,f0)),Ad&&qf!=0?Kf=qf:(Gf.a=3,Kf=0)}if(Kf==0)break r;if(cd&&sA[Ir]==1&&(cd=uu[Qn].g==0),Vf+=uu[Qn].g,Qn+=Kf,3>=Ir){var AA,p0=cA[0];for(AA=1;AA<is;++AA)cA[AA]>p0&&(p0=cA[AA]);d0+=p0}}if(Si.nd=cd,Si.Qb=0,cd&&(Si.qb=(Au[3][Ti[3]+0].value<<24|Au[1][Ti[1]+0].value<<16|Au[2][Ti[2]+0].value)>>>0,Vf==0&&256>Au[0][Ti[0]+0].value&&(Si.Qb=1,Si.qb+=Au[0][Ti[0]+0].value<<8)),Si.jc=!Si.Qb&&6>d0,Si.jc){var Wf,gc=Si;for(Wf=0;Wf<Ys;++Wf){var Bl=Wf,xc=gc.pd[Bl],Yf=gc.G[0][gc.H[0]+Bl];256<=Yf.value?(xc.g=Yf.g+256,xc.value=Yf.value):(xc.g=0,xc.value=0,Bl>>=jn(Yf,8,xc),Bl>>=jn(gc.G[1][gc.H[1]+Bl],16,xc),Bl>>=jn(gc.G[2][gc.H[2]+Bl],0,xc),jn(gc.G[3][gc.H[3]+Bl],24,xc))}}}Ns.vc=Bs,Ns.Wb=Os,Ns.Ya=us,Ns.yc=Hf,Un=1;break t}Un=0}if(!(pe=Un)){se.a=3;break e}if(0<Xe){if(Ne.ua=1<<Xe,!tt(Ne.Wa,Xe)){se.a=1,pe=0;break e}}else Ne.ua=0;var Jf=se,Np=xe,q1=ve,Bp=Jf.s,kp=Bp.xc;if(Jf.c=Np,Jf.i=q1,Bp.md=Qe(Np,kp),Bp.wc=kp==0?-1:(1<<kp)-1,K){se.xb=D1;break e}if((Me=a(xe*ve))==null){se.a=1,pe=0;break e}pe=(pe=ke(se,Me,0,xe,ve,ve,null))&&!Ce.h;break e}return pe?(ue!=null?ue[0]=Me:(e(Me==null),e(K)),se.$=0,K||Ke(Ne)):Ke(Ne),pe}function Ye(S,U){var K=S.c*S.i,se=K+U+16*U;return e(S.c<=U),S.V=a(se),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+K+U,1)}function Ze(S,U){var K=S.C,se=U-K,ue=S.V,pe=S.Ba+S.c*K;for(e(U<=S.l.o);0<se;){var xe=16<se?16:se,ve=S.l.ma,Ce=S.l.width,Ne=Ce*xe,Me=ve.ca,Xe=ve.tb+Ce*K,We=S.Ta,Ge=S.Ua;me(S,xe,ue,pe),Xn(We,Ge,Me,Xe,Ne),Se(ve,K,K+xe,Me,Xe,Ce),se-=xe,ue+=xe*S.c,K+=xe}e(K==U),S.C=S.Ma=U}function wt(){this.ub=this.yd=this.td=this.Rb=0}function Bt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Qt(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Nt(){this.Yb=function(){var S=[];return function U(K,se,ue){for(var pe=ue[se],xe=0;xe<pe&&(K.push(ue.length>se+1?[]:0),!(ue.length<se+1));xe++)U(K[xe],se+1,ue)}(S,0,[3,11]),S}()}function Lt(){this.jb=a(3),this.Wc=o([4,8],Nt),this.Xc=o([4,17],Nt)}function fr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Or(){this.ld=this.La=this.dd=this.tc=0}function Qr(){this.Na=this.la=0}function qr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ls(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function gi(){this.uc=this.M=this.Nb=0,this.wa=Array(new Or),this.Y=0,this.ya=Array(new Ls),this.aa=0,this.l=new Ws}function Us(){this.y=a(16),this.f=a(8),this.ea=a(8)}function ha(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new wt,this.Kc=new Bt,this.ed=new fr,this.Qa=new Qt,this.Ic=this.$c=this.Aa=0,this.D=new gi,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,ie),this.ia=0,this.pb=i(4,qr),this.Pa=new Lt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Us),this.Hd=0,this.rb=Array(new Qr),this.sb=0,this.wa=Array(new Or),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ls),this.L=this.aa=0,this.gd=o([4,2],Or),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ws(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ka(){var S=new ha;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,Js||(Js=YA)),S}function Jn(S,U,K){return S.a==0&&(S.a=U,S.sc=K,S.cb=0),0}function ma(S,U,K){return 3<=K&&S[U+0]==157&&S[U+1]==1&&S[U+2]==42}function Oc(S,U){if(S==null)return 0;if(S.a=0,S.sc="OK",U==null)return Jn(S,2,"null VP8Io passed to VP8GetHeaders()");var K=U.data,se=U.w,ue=U.ha;if(4>ue)return Jn(S,7,"Truncated header.");var pe=K[se+0]|K[se+1]<<8|K[se+2]<<16,xe=S.Od;if(xe.Rb=!(1&pe),xe.td=pe>>1&7,xe.yd=pe>>4&1,xe.ub=pe>>5,3<xe.td)return Jn(S,3,"Incorrect keyframe parameters.");if(!xe.yd)return Jn(S,4,"Frame not displayable.");se+=3,ue-=3;var ve=S.Kc;if(xe.Rb){if(7>ue)return Jn(S,7,"cannot parse picture header");if(!ma(K,se,ue))return Jn(S,3,"Bad code word");ve.c=16383&(K[se+4]<<8|K[se+3]),ve.Td=K[se+4]>>6,ve.i=16383&(K[se+6]<<8|K[se+5]),ve.Ud=K[se+6]>>6,se+=7,ue-=7,S.za=ve.c+15>>4,S.Ub=ve.i+15>>4,U.width=ve.c,U.height=ve.i,U.Da=0,U.j=0,U.v=0,U.va=U.width,U.o=U.height,U.da=0,U.ib=U.width,U.hb=U.height,U.U=U.width,U.T=U.height,s((pe=S.Pa).jb,0,255,pe.jb.length),e((pe=S.Qa)!=null),pe.Cb=0,pe.Bb=0,pe.Fb=1,s(pe.Zb,0,0,pe.Zb.length),s(pe.Lb,0,0,pe.Lb)}if(xe.ub>ue)return Jn(S,7,"bad partition length");ne(pe=S.m,K,se,xe.ub),se+=xe.ub,ue-=xe.ub,xe.Rb&&(ve.Ld=he(pe),ve.Kd=he(pe)),ve=S.Qa;var Ce,Ne=S.Pa;if(e(pe!=null),e(ve!=null),ve.Cb=he(pe),ve.Cb){if(ve.Bb=he(pe),he(pe)){for(ve.Fb=he(pe),Ce=0;4>Ce;++Ce)ve.Zb[Ce]=he(pe)?re(pe,7):0;for(Ce=0;4>Ce;++Ce)ve.Lb[Ce]=he(pe)?re(pe,6):0}if(ve.Bb)for(Ce=0;3>Ce;++Ce)Ne.jb[Ce]=he(pe)?J(pe,8):255}else ve.Bb=0;if(pe.Ka)return Jn(S,3,"cannot parse segment header");if((ve=S.ed).zd=he(pe),ve.Tb=J(pe,6),ve.wb=J(pe,3),ve.Pc=he(pe),ve.Pc&&he(pe)){for(Ne=0;4>Ne;++Ne)he(pe)&&(ve.vd[Ne]=re(pe,6));for(Ne=0;4>Ne;++Ne)he(pe)&&(ve.od[Ne]=re(pe,6))}if(S.L=ve.Tb==0?0:ve.zd?1:2,pe.Ka)return Jn(S,3,"cannot parse filter header");var Me=ue;if(ue=Ce=se,se=Ce+Me,ve=Me,S.Xb=(1<<J(S.m,2))-1,Me<3*(Ne=S.Xb))K=7;else{for(Ce+=3*Ne,ve-=3*Ne,Me=0;Me<Ne;++Me){var Xe=K[ue+0]|K[ue+1]<<8|K[ue+2]<<16;Xe>ve&&(Xe=ve),ne(S.Jc[+Me],K,Ce,Xe),Ce+=Xe,ve-=Xe,ue+=3}ne(S.Jc[+Ne],K,Ce,ve),K=Ce<se?0:5}if(K!=0)return Jn(S,K,"cannot parse partitions");for(K=J(Ce=S.m,7),ue=he(Ce)?re(Ce,4):0,se=he(Ce)?re(Ce,4):0,ve=he(Ce)?re(Ce,4):0,Ne=he(Ce)?re(Ce,4):0,Ce=he(Ce)?re(Ce,4):0,Me=S.Qa,Xe=0;4>Xe;++Xe){if(Me.Cb){var We=Me.Zb[Xe];Me.Fb||(We+=K)}else{if(0<Xe){S.pb[Xe]=S.pb[0];continue}We=K}var Ge=S.pb[Xe];Ge.Sc[0]=Pf[Tn(We+ue,127)],Ge.Sc[1]=jf[Tn(We+0,127)],Ge.Eb[0]=2*Pf[Tn(We+se,127)],Ge.Eb[1]=101581*jf[Tn(We+ve,127)]>>16,8>Ge.Eb[1]&&(Ge.Eb[1]=8),Ge.Qc[0]=Pf[Tn(We+Ne,117)],Ge.Qc[1]=jf[Tn(We+Ce,127)],Ge.lc=We+Ce}if(!xe.Rb)return Jn(S,4,"Not a key frame.");for(he(pe),xe=S.Pa,K=0;4>K;++K){for(ue=0;8>ue;++ue)for(se=0;3>se;++se)for(ve=0;11>ve;++ve)Ne=fe(pe,iA[K][ue][se][ve])?J(pe,8):_l[K][ue][se][ve],xe.Wc[K][ue].Yb[se][ve]=Ne;for(ue=0;17>ue;++ue)xe.Xc[K][ue]=xe.Wc[K][F1[ue]]}return S.kc=he(pe),S.kc&&(S.Bd=J(pe,8)),S.cb=1}function YA(S,U,K,se,ue,pe,xe){var ve=U[ue].Yb[K];for(K=0;16>ue;++ue){if(!fe(S,ve[K+0]))return ue;for(;!fe(S,ve[K+1]);)if(ve=U[++ue].Yb[0],K=0,ue==16)return 16;var Ce=U[ue+1].Yb;if(fe(S,ve[K+2])){var Ne=S,Me=0;if(fe(Ne,(We=ve)[(Xe=K)+3]))if(fe(Ne,We[Xe+6])){for(ve=0,Xe=2*(Me=fe(Ne,We[Xe+8]))+(We=fe(Ne,We[Xe+9+Me])),Me=0,We=ys[Xe];We[ve];++ve)Me+=Me+fe(Ne,We[ve]);Me+=3+(8<<Xe)}else fe(Ne,We[Xe+7])?(Me=7+2*fe(Ne,165),Me+=fe(Ne,145)):Me=5+fe(Ne,159);else Me=fe(Ne,We[Xe+4])?3+fe(Ne,We[Xe+5]):2;ve=Ce[2]}else Me=1,ve=Ce[1];Ce=xe+Cn[ue],0>(Ne=S).b&&be(Ne);var Xe,We=Ne.b,Ge=(Xe=Ne.Ca>>1)-(Ne.I>>We)>>31;--Ne.b,Ne.Ca+=Ge,Ne.Ca|=1,Ne.I-=(Xe+1&Ge)<<We,pe[Ce]=((Me^Ge)-Ge)*se[(0<ue)+0]}return 16}function ul(S){var U=S.rb[S.sb-1];U.la=0,U.Na=0,s(S.zc,0,0,S.zc.length),S.ja=0}function zu(S,U){if(S==null)return 0;if(U==null)return Jn(S,2,"NULL VP8Io parameter in VP8Decode().");if(!S.cb&&!Oc(S,U))return 0;if(e(S.cb),U.ac==null||U.ac(U)){U.ob&&(S.L=0);var K=hc[S.L];if(S.L==2?(S.yb=0,S.zb=0):(S.yb=U.v-K>>4,S.zb=U.j-K>>4,0>S.yb&&(S.yb=0),0>S.zb&&(S.zb=0)),S.Va=U.o+15+K>>4,S.Hb=U.va+15+K>>4,S.Hb>S.za&&(S.Hb=S.za),S.Va>S.Ub&&(S.Va=S.Ub),0<S.L){var se=S.ed;for(K=0;4>K;++K){var ue;if(S.Qa.Cb){var pe=S.Qa.Lb[K];S.Qa.Fb||(pe+=se.Tb)}else pe=se.Tb;for(ue=0;1>=ue;++ue){var xe=S.gd[K][ue],ve=pe;if(se.Pc&&(ve+=se.vd[0],ue&&(ve+=se.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var Ce=ve;0<se.wb&&(Ce=4<se.wb?Ce>>2:Ce>>1)>9-se.wb&&(Ce=9-se.wb),1>Ce&&(Ce=1),xe.dd=Ce,xe.tc=2*ve+Ce,xe.ld=40<=ve?2:15<=ve?1:0}else xe.tc=0;xe.La=ue}}}K=0}else Jn(S,6,"Frame setup failed"),K=S.a;if(K=K==0){if(K){S.$c=0,0<S.Aa||(S.Ic=L1);e:{K=S.Ic,se=4*(Ce=S.za);var Ne=32*Ce,Me=Ce+1,Xe=0<S.L?Ce*(0<S.Aa?2:1):0,We=(S.Aa==2?2:1)*Ce;if((xe=se+832+(ue=3*(16*K+hc[S.L])/2*Ne)+(pe=S.Fa!=null&&0<S.Fa.length?S.Kc.c*S.Kc.i:0))!=xe)K=0;else{if(xe>S.Vb){if(S.Vb=0,S.Ec=a(xe),S.Fc=0,S.Ec==null){K=Jn(S,1,"no memory during frame initialization.");break e}S.Vb=xe}xe=S.Ec,ve=S.Fc,S.Ac=xe,S.Bc=ve,ve+=se,S.Gd=i(Ne,Us),S.Hd=0,S.rb=i(Me+1,Qr),S.sb=1,S.wa=Xe?i(Xe,Or):null,S.Y=0,S.D.Nb=0,S.D.wa=S.wa,S.D.Y=S.Y,0<S.Aa&&(S.D.Y+=Ce),e(!0),S.oc=xe,S.pc=ve,ve+=832,S.ya=i(We,Ls),S.aa=0,S.D.ya=S.ya,S.D.aa=S.aa,S.Aa==2&&(S.D.aa+=Ce),S.R=16*Ce,S.B=8*Ce,Ce=(Ne=hc[S.L])*S.R,Ne=Ne/2*S.B,S.sa=xe,S.ta=ve+Ce,S.qa=S.sa,S.ra=S.ta+16*K*S.R+Ne,S.Ha=S.qa,S.Ia=S.ra+8*K*S.B+Ne,S.$c=0,ve+=ue,S.mb=pe?xe:null,S.nb=pe?ve:null,e(ve+pe<=S.Fc+S.Vb),ul(S),s(S.Ac,S.Bc,0,se),K=1}}if(K){if(U.ka=0,U.y=S.sa,U.O=S.ta,U.f=S.qa,U.N=S.ra,U.ea=S.Ha,U.Vd=S.Ia,U.fa=S.R,U.Rc=S.B,U.F=null,U.J=0,!oc){for(K=-255;255>=K;++K)Ts[255+K]=0>K?-K:K;for(K=-1020;1020>=K;++K)vo[1020+K]=-128>K?-128:127<K?127:K;for(K=-112;112>=K;++K)ru[112+K]=-16>K?-16:15<K?15:K;for(K=-255;510>=K;++K)nu[255+K]=0>K?0:255<K?255:K;oc=1}bl=xi,Vo=dl,zo=co,js=Sn,_i=fl,xs=Al,Zu=gl,Cl=Oo,nd=zc,Xc=Wu,Zc=Vc,eu=ec,eA=tc,sd=xl,tu=Xi,ic=Ha,tA=Ps,vs=ZA,ni[0]=Oa,ni[1]=JA,ni[2]=fo,ni[3]=XA,ni[4]=vi,ni[5]=ho,ni[6]=ti,ni[7]=yi,ni[8]=jo,ni[9]=hl,dc[0]=uo,dc[1]=qu,dc[2]=Uo,dc[3]=Hc,dc[4]=On,dc[5]=Po,dc[6]=Ao,to[0]=mo,to[1]=Gu,to[2]=Ku,to[3]=wi,to[4]=en,to[5]=Ms,to[6]=ml,K=1}else K=0}K&&(K=function(Ge,xt){for(Ge.M=0;Ge.M<Ge.Va;++Ge.M){var it,Pe=Ge.Jc[Ge.M&Ge.Xb],Oe=Ge.m,At=Ge;for(it=0;it<At.za;++it){var yt=Oe,ht=At,$t=ht.Ac,Pt=ht.Bc+4*it,sr=ht.zc,Vt=ht.ya[ht.aa+it];if(ht.Qa.Bb?Vt.$b=fe(yt,ht.Pa.jb[0])?2+fe(yt,ht.Pa.jb[2]):fe(yt,ht.Pa.jb[1]):Vt.$b=0,ht.kc&&(Vt.Ad=fe(yt,ht.Bd)),Vt.Za=!fe(yt,145)+0,Vt.Za){var vn=Vt.Ob,Nn=0;for(ht=0;4>ht;++ht){var Kr,Hr=sr[0+ht];for(Kr=0;4>Kr;++Kr){Hr=gp[$t[Pt+Kr]][Hr];for(var Un=au[fe(yt,Hr[0])];0<Un;)Un=au[2*Un+fe(yt,Hr[Un])];Hr=-Un,$t[Pt+Kr]=Hr}n(vn,Nn,$t,Pt,4),Nn+=4,sr[0+ht]=Hr}}else Hr=fe(yt,156)?fe(yt,128)?1:3:fe(yt,163)?2:0,Vt.Ob[0]=Hr,s($t,Pt,Hr,4),s(sr,0,Hr,4);Vt.Dd=fe(yt,142)?fe(yt,114)?fe(yt,183)?1:3:2:0}if(At.m.Ka)return Jn(Ge,7,"Premature end-of-partition0 encountered.");for(;Ge.ja<Ge.za;++Ge.ja){if(At=Pe,yt=(Oe=Ge).rb[Oe.sb-1],$t=Oe.rb[Oe.sb+Oe.ja],it=Oe.ya[Oe.aa+Oe.ja],Pt=Oe.kc?it.Ad:0)yt.la=$t.la=0,it.Za||(yt.Na=$t.Na=0),it.Hc=0,it.Gc=0,it.ia=0;else{var Bn,Ir;if(yt=$t,$t=At,Pt=Oe.Pa.Xc,sr=Oe.ya[Oe.aa+Oe.ja],Vt=Oe.pb[sr.$b],ht=sr.ad,vn=0,Nn=Oe.rb[Oe.sb-1],Hr=Kr=0,s(ht,vn,0,384),sr.Za)var Qn=0,hr=Pt[3];else{Un=a(16);var Cr=yt.Na+Nn.Na;if(Cr=Js($t,Pt[1],Cr,Vt.Eb,0,Un,0),yt.Na=Nn.Na=(0<Cr)+0,1<Cr)bl(Un,0,ht,vn);else{var gn=Un[0]+3>>3;for(Un=0;256>Un;Un+=16)ht[vn+Un]=gn}Qn=1,hr=Pt[0]}var yn=15&yt.la,va=15&Nn.la;for(Un=0;4>Un;++Un){var ea=1&va;for(gn=Ir=0;4>gn;++gn)yn=yn>>1|(ea=(Cr=Js($t,hr,Cr=ea+(1&yn),Vt.Sc,Qn,ht,vn))>Qn)<<7,Ir=Ir<<2|(3<Cr?3:1<Cr?2:ht[vn+0]!=0),vn+=16;yn>>=4,va=va>>1|ea<<7,Kr=(Kr<<8|Ir)>>>0}for(hr=yn,Qn=va>>4,Bn=0;4>Bn;Bn+=2){for(Ir=0,yn=yt.la>>4+Bn,va=Nn.la>>4+Bn,Un=0;2>Un;++Un){for(ea=1&va,gn=0;2>gn;++gn)Cr=ea+(1&yn),yn=yn>>1|(ea=0<(Cr=Js($t,Pt[2],Cr,Vt.Qc,0,ht,vn)))<<3,Ir=Ir<<2|(3<Cr?3:1<Cr?2:ht[vn+0]!=0),vn+=16;yn>>=2,va=va>>1|ea<<5}Hr|=Ir<<4*Bn,hr|=yn<<4<<Bn,Qn|=(240&va)<<Bn}yt.la=hr,Nn.la=Qn,sr.Hc=Kr,sr.Gc=Hr,sr.ia=43690&Hr?0:Vt.ia,Pt=!(Kr|Hr)}if(0<Oe.L&&(Oe.wa[Oe.Y+Oe.ja]=Oe.gd[it.$b][it.Za],Oe.wa[Oe.Y+Oe.ja].La|=!Pt),At.Ka)return Jn(Ge,7,"Premature end-of-file encountered.")}if(ul(Ge),Oe=xt,At=1,it=(Pe=Ge).D,yt=0<Pe.L&&Pe.M>=Pe.zb&&Pe.M<=Pe.Va,Pe.Aa==0)e:{if(it.M=Pe.M,it.uc=yt,bi(Pe,it),At=1,it=(Ir=Pe.D).Nb,yt=(Hr=hc[Pe.L])*Pe.R,$t=Hr/2*Pe.B,Un=16*it*Pe.R,gn=8*it*Pe.B,Pt=Pe.sa,sr=Pe.ta-yt+Un,Vt=Pe.qa,ht=Pe.ra-$t+gn,vn=Pe.Ha,Nn=Pe.Ia-$t+gn,va=(yn=Ir.M)==0,Kr=yn>=Pe.Va-1,Pe.Aa==2&&bi(Pe,Ir),Ir.uc)for(ea=(Cr=Pe).D.M,e(Cr.D.uc),Ir=Cr.yb;Ir<Cr.Hb;++Ir){Qn=Ir,hr=ea;var Ns=(Bs=(is=Cr).D).Nb;Bn=is.R;var Bs=Bs.wa[Bs.Y+Qn],Os=is.sa,bo=is.ta+16*Ns*Bn+16*Qn,kn=Bs.dd,Qs=Bs.tc;if(Qs!=0)if(e(3<=Qs),is.L==1)0<Qn&&ic(Os,bo,Bn,Qs+4),Bs.La&&vs(Os,bo,Bn,Qs),0<hr&&tu(Os,bo,Bn,Qs+4),Bs.La&&tA(Os,bo,Bn,Qs);else{var Go=is.B,lu=is.qa,lA=is.ra+8*Ns*Go+8*Qn,cu=is.Ha,is=is.Ia+8*Ns*Go+8*Qn;Ns=Bs.ld,0<Qn&&(Cl(Os,bo,Bn,Qs+4,kn,Ns),Xc(lu,lA,cu,is,Go,Qs+4,kn,Ns)),Bs.La&&(eu(Os,bo,Bn,Qs,kn,Ns),sd(lu,lA,cu,is,Go,Qs,kn,Ns)),0<hr&&(Zu(Os,bo,Bn,Qs+4,kn,Ns),nd(lu,lA,cu,is,Go,Qs+4,kn,Ns)),Bs.La&&(Zc(Os,bo,Bn,Qs,kn,Ns),eA(lu,lA,cu,is,Go,Qs,kn,Ns))}}if(Pe.ia&&alert("todo:DitherRow"),Oe.put!=null){if(Ir=16*yn,yn=16*(yn+1),va?(Oe.y=Pe.sa,Oe.O=Pe.ta+Un,Oe.f=Pe.qa,Oe.N=Pe.ra+gn,Oe.ea=Pe.Ha,Oe.W=Pe.Ia+gn):(Ir-=Hr,Oe.y=Pt,Oe.O=sr,Oe.f=Vt,Oe.N=ht,Oe.ea=vn,Oe.W=Nn),Kr||(yn-=Hr),yn>Oe.o&&(yn=Oe.o),Oe.F=null,Oe.J=null,Pe.Fa!=null&&0<Pe.Fa.length&&Ir<yn&&(Oe.J=qc(Pe,Oe,Ir,yn-Ir),Oe.F=Pe.mb,Oe.F==null&&Oe.F.length==0)){At=Jn(Pe,3,"Could not decode alpha data.");break e}Ir<Oe.j&&(Hr=Oe.j-Ir,Ir=Oe.j,e(!(1&Hr)),Oe.O+=Pe.R*Hr,Oe.N+=Pe.B*(Hr>>1),Oe.W+=Pe.B*(Hr>>1),Oe.F!=null&&(Oe.J+=Oe.width*Hr)),Ir<yn&&(Oe.O+=Oe.v,Oe.N+=Oe.v>>1,Oe.W+=Oe.v>>1,Oe.F!=null&&(Oe.J+=Oe.v),Oe.ka=Ir-Oe.j,Oe.U=Oe.va-Oe.v,Oe.T=yn-Ir,At=Oe.put(Oe))}it+1!=Pe.Ic||Kr||(n(Pe.sa,Pe.ta-yt,Pt,sr+16*Pe.R,yt),n(Pe.qa,Pe.ra-$t,Vt,ht+8*Pe.B,$t),n(Pe.Ha,Pe.Ia-$t,vn,Nn+8*Pe.B,$t))}if(!At)return Jn(Ge,6,"Output aborted.")}return 1}(S,U)),U.bc!=null&&U.bc(U),K&=1}return K?(S.cb=0,K):0}function Ia(S,U,K,se,ue){ue=S[U+K+32*se]+(ue>>3),S[U+K+32*se]=-256&ue?0>ue?0:255:ue}function Qc(S,U,K,se,ue,pe){Ia(S,U,0,K,se+ue),Ia(S,U,1,K,se+pe),Ia(S,U,2,K,se-pe),Ia(S,U,3,K,se-ue)}function pn(S){return(20091*S>>16)+S}function Fa(S,U,K,se){var ue,pe=0,xe=a(16);for(ue=0;4>ue;++ue){var ve=S[U+0]+S[U+8],Ce=S[U+0]-S[U+8],Ne=(35468*S[U+4]>>16)-pn(S[U+12]),Me=pn(S[U+4])+(35468*S[U+12]>>16);xe[pe+0]=ve+Me,xe[pe+1]=Ce+Ne,xe[pe+2]=Ce-Ne,xe[pe+3]=ve-Me,pe+=4,U++}for(ue=pe=0;4>ue;++ue)ve=(S=xe[pe+0]+4)+xe[pe+8],Ce=S-xe[pe+8],Ne=(35468*xe[pe+4]>>16)-pn(xe[pe+12]),Ia(K,se,0,0,ve+(Me=pn(xe[pe+4])+(35468*xe[pe+12]>>16))),Ia(K,se,1,0,Ce+Ne),Ia(K,se,2,0,Ce-Ne),Ia(K,se,3,0,ve-Me),pe++,se+=32}function Al(S,U,K,se){var ue=S[U+0]+4,pe=35468*S[U+4]>>16,xe=pn(S[U+4]),ve=35468*S[U+1]>>16;Qc(K,se,0,ue+xe,S=pn(S[U+1]),ve),Qc(K,se,1,ue+pe,S,ve),Qc(K,se,2,ue-pe,S,ve),Qc(K,se,3,ue-xe,S,ve)}function dl(S,U,K,se,ue){Fa(S,U,K,se),ue&&Fa(S,U+16,K,se+4)}function co(S,U,K,se){Vo(S,U+0,K,se,1),Vo(S,U+32,K,se+128,1)}function Sn(S,U,K,se){var ue;for(S=S[U+0]+4,ue=0;4>ue;++ue)for(U=0;4>U;++U)Ia(K,se,U,ue,S)}function fl(S,U,K,se){S[U+0]&&js(S,U+0,K,se),S[U+16]&&js(S,U+16,K,se+4),S[U+32]&&js(S,U+32,K,se+128),S[U+48]&&js(S,U+48,K,se+128+4)}function xi(S,U,K,se){var ue,pe=a(16);for(ue=0;4>ue;++ue){var xe=S[U+0+ue]+S[U+12+ue],ve=S[U+4+ue]+S[U+8+ue],Ce=S[U+4+ue]-S[U+8+ue],Ne=S[U+0+ue]-S[U+12+ue];pe[0+ue]=xe+ve,pe[8+ue]=xe-ve,pe[4+ue]=Ne+Ce,pe[12+ue]=Ne-Ce}for(ue=0;4>ue;++ue)xe=(S=pe[0+4*ue]+3)+pe[3+4*ue],ve=pe[1+4*ue]+pe[2+4*ue],Ce=pe[1+4*ue]-pe[2+4*ue],Ne=S-pe[3+4*ue],K[se+0]=xe+ve>>3,K[se+16]=Ne+Ce>>3,K[se+32]=xe-ve>>3,K[se+48]=Ne-Ce>>3,se+=64}function Lo(S,U,K){var se,ue=U-32,pe=ga,xe=255-S[ue-1];for(se=0;se<K;++se){var ve,Ce=pe,Ne=xe+S[U-1];for(ve=0;ve<K;++ve)S[U+ve]=Ce[Ne+S[ue+ve]];U+=32}}function JA(S,U){Lo(S,U,4)}function Gu(S,U){Lo(S,U,8)}function qu(S,U){Lo(S,U,16)}function Uo(S,U){var K;for(K=0;16>K;++K)n(S,U+32*K,S,U-32,16)}function Hc(S,U){var K;for(K=16;0<K;--K)s(S,U,S[U-1],16),U+=32}function Mo(S,U,K){var se;for(se=0;16>se;++se)s(U,K+32*se,S,16)}function uo(S,U){var K,se=16;for(K=0;16>K;++K)se+=S[U-1+32*K]+S[U+K-32];Mo(se>>5,S,U)}function On(S,U){var K,se=8;for(K=0;16>K;++K)se+=S[U-1+32*K];Mo(se>>4,S,U)}function Po(S,U){var K,se=8;for(K=0;16>K;++K)se+=S[U+K-32];Mo(se>>4,S,U)}function Ao(S,U){Mo(128,S,U)}function pr(S,U,K){return S+2*U+K+2>>2}function fo(S,U){var K,se=U-32;for(se=new Uint8Array([pr(S[se-1],S[se+0],S[se+1]),pr(S[se+0],S[se+1],S[se+2]),pr(S[se+1],S[se+2],S[se+3]),pr(S[se+2],S[se+3],S[se+4])]),K=0;4>K;++K)n(S,U+32*K,se,0,se.length)}function XA(S,U){var K=S[U-1],se=S[U-1+32],ue=S[U-1+64],pe=S[U-1+96];ge(S,U+0,16843009*pr(S[U-1-32],K,se)),ge(S,U+32,16843009*pr(K,se,ue)),ge(S,U+64,16843009*pr(se,ue,pe)),ge(S,U+96,16843009*pr(ue,pe,pe))}function Oa(S,U){var K,se=4;for(K=0;4>K;++K)se+=S[U+K-32]+S[U-1+32*K];for(se>>=3,K=0;4>K;++K)s(S,U+32*K,se,4)}function vi(S,U){var K=S[U-1+0],se=S[U-1+32],ue=S[U-1+64],pe=S[U-1-32],xe=S[U+0-32],ve=S[U+1-32],Ce=S[U+2-32],Ne=S[U+3-32];S[U+0+96]=pr(se,ue,S[U-1+96]),S[U+1+96]=S[U+0+64]=pr(K,se,ue),S[U+2+96]=S[U+1+64]=S[U+0+32]=pr(pe,K,se),S[U+3+96]=S[U+2+64]=S[U+1+32]=S[U+0+0]=pr(xe,pe,K),S[U+3+64]=S[U+2+32]=S[U+1+0]=pr(ve,xe,pe),S[U+3+32]=S[U+2+0]=pr(Ce,ve,xe),S[U+3+0]=pr(Ne,Ce,ve)}function ti(S,U){var K=S[U+1-32],se=S[U+2-32],ue=S[U+3-32],pe=S[U+4-32],xe=S[U+5-32],ve=S[U+6-32],Ce=S[U+7-32];S[U+0+0]=pr(S[U+0-32],K,se),S[U+1+0]=S[U+0+32]=pr(K,se,ue),S[U+2+0]=S[U+1+32]=S[U+0+64]=pr(se,ue,pe),S[U+3+0]=S[U+2+32]=S[U+1+64]=S[U+0+96]=pr(ue,pe,xe),S[U+3+32]=S[U+2+64]=S[U+1+96]=pr(pe,xe,ve),S[U+3+64]=S[U+2+96]=pr(xe,ve,Ce),S[U+3+96]=pr(ve,Ce,Ce)}function ho(S,U){var K=S[U-1+0],se=S[U-1+32],ue=S[U-1+64],pe=S[U-1-32],xe=S[U+0-32],ve=S[U+1-32],Ce=S[U+2-32],Ne=S[U+3-32];S[U+0+0]=S[U+1+64]=pe+xe+1>>1,S[U+1+0]=S[U+2+64]=xe+ve+1>>1,S[U+2+0]=S[U+3+64]=ve+Ce+1>>1,S[U+3+0]=Ce+Ne+1>>1,S[U+0+96]=pr(ue,se,K),S[U+0+64]=pr(se,K,pe),S[U+0+32]=S[U+1+96]=pr(K,pe,xe),S[U+1+32]=S[U+2+96]=pr(pe,xe,ve),S[U+2+32]=S[U+3+96]=pr(xe,ve,Ce),S[U+3+32]=pr(ve,Ce,Ne)}function yi(S,U){var K=S[U+0-32],se=S[U+1-32],ue=S[U+2-32],pe=S[U+3-32],xe=S[U+4-32],ve=S[U+5-32],Ce=S[U+6-32],Ne=S[U+7-32];S[U+0+0]=K+se+1>>1,S[U+1+0]=S[U+0+64]=se+ue+1>>1,S[U+2+0]=S[U+1+64]=ue+pe+1>>1,S[U+3+0]=S[U+2+64]=pe+xe+1>>1,S[U+0+32]=pr(K,se,ue),S[U+1+32]=S[U+0+96]=pr(se,ue,pe),S[U+2+32]=S[U+1+96]=pr(ue,pe,xe),S[U+3+32]=S[U+2+96]=pr(pe,xe,ve),S[U+3+64]=pr(xe,ve,Ce),S[U+3+96]=pr(ve,Ce,Ne)}function hl(S,U){var K=S[U-1+0],se=S[U-1+32],ue=S[U-1+64],pe=S[U-1+96];S[U+0+0]=K+se+1>>1,S[U+2+0]=S[U+0+32]=se+ue+1>>1,S[U+2+32]=S[U+0+64]=ue+pe+1>>1,S[U+1+0]=pr(K,se,ue),S[U+3+0]=S[U+1+32]=pr(se,ue,pe),S[U+3+32]=S[U+1+64]=pr(ue,pe,pe),S[U+3+64]=S[U+2+64]=S[U+0+96]=S[U+1+96]=S[U+2+96]=S[U+3+96]=pe}function jo(S,U){var K=S[U-1+0],se=S[U-1+32],ue=S[U-1+64],pe=S[U-1+96],xe=S[U-1-32],ve=S[U+0-32],Ce=S[U+1-32],Ne=S[U+2-32];S[U+0+0]=S[U+2+32]=K+xe+1>>1,S[U+0+32]=S[U+2+64]=se+K+1>>1,S[U+0+64]=S[U+2+96]=ue+se+1>>1,S[U+0+96]=pe+ue+1>>1,S[U+3+0]=pr(ve,Ce,Ne),S[U+2+0]=pr(xe,ve,Ce),S[U+1+0]=S[U+3+32]=pr(K,xe,ve),S[U+1+32]=S[U+3+64]=pr(se,K,xe),S[U+1+64]=S[U+3+96]=pr(ue,se,K),S[U+1+96]=pr(pe,ue,se)}function Ku(S,U){var K;for(K=0;8>K;++K)n(S,U+32*K,S,U-32,8)}function wi(S,U){var K;for(K=0;8>K;++K)s(S,U,S[U-1],8),U+=32}function Qa(S,U,K){var se;for(se=0;8>se;++se)s(U,K+32*se,S,8)}function mo(S,U){var K,se=8;for(K=0;8>K;++K)se+=S[U+K-32]+S[U-1+32*K];Qa(se>>4,S,U)}function Ms(S,U){var K,se=4;for(K=0;8>K;++K)se+=S[U+K-32];Qa(se>>3,S,U)}function en(S,U){var K,se=4;for(K=0;8>K;++K)se+=S[U-1+32*K];Qa(se>>3,S,U)}function ml(S,U){Qa(128,S,U)}function po(S,U,K){var se=S[U-K],ue=S[U+0],pe=3*(ue-se)+s0[1020+S[U-2*K]-S[U+K]],xe=rA[112+(pe+4>>3)];S[U-K]=ga[255+se+rA[112+(pe+3>>3)]],S[U+0]=ga[255+ue-xe]}function $u(S,U,K,se){var ue=S[U+0],pe=S[U+K];return yo[255+S[U-2*K]-S[U-K]]>se||yo[255+pe-ue]>se}function Xl(S,U,K,se){return 4*yo[255+S[U-K]-S[U+0]]+yo[255+S[U-2*K]-S[U+K]]<=se}function Zl(S,U,K,se,ue){var pe=S[U-3*K],xe=S[U-2*K],ve=S[U-K],Ce=S[U+0],Ne=S[U+K],Me=S[U+2*K],Xe=S[U+3*K];return 4*yo[255+ve-Ce]+yo[255+xe-Ne]>se?0:yo[255+S[U-4*K]-pe]<=ue&&yo[255+pe-xe]<=ue&&yo[255+xe-ve]<=ue&&yo[255+Xe-Me]<=ue&&yo[255+Me-Ne]<=ue&&yo[255+Ne-Ce]<=ue}function Xi(S,U,K,se){var ue=2*se+1;for(se=0;16>se;++se)Xl(S,U+se,K,ue)&&po(S,U+se,K)}function Ha(S,U,K,se){var ue=2*se+1;for(se=0;16>se;++se)Xl(S,U+se*K,1,ue)&&po(S,U+se*K,1)}function Ps(S,U,K,se){var ue;for(ue=3;0<ue;--ue)Xi(S,U+=4*K,K,se)}function ZA(S,U,K,se){var ue;for(ue=3;0<ue;--ue)Ha(S,U+=4,K,se)}function pl(S,U,K,se,ue,pe,xe,ve){for(pe=2*pe+1;0<ue--;){if(Zl(S,U,K,pe,xe))if($u(S,U,K,ve))po(S,U,K);else{var Ce=S,Ne=U,Me=K,Xe=Ce[Ne-2*Me],We=Ce[Ne-Me],Ge=Ce[Ne+0],xt=Ce[Ne+Me],it=Ce[Ne+2*Me],Pe=27*(At=s0[1020+3*(Ge-We)+s0[1020+Xe-xt]])+63>>7,Oe=18*At+63>>7,At=9*At+63>>7;Ce[Ne-3*Me]=ga[255+Ce[Ne-3*Me]+At],Ce[Ne-2*Me]=ga[255+Xe+Oe],Ce[Ne-Me]=ga[255+We+Pe],Ce[Ne+0]=ga[255+Ge-Pe],Ce[Ne+Me]=ga[255+xt-Oe],Ce[Ne+2*Me]=ga[255+it-At]}U+=se}}function Da(S,U,K,se,ue,pe,xe,ve){for(pe=2*pe+1;0<ue--;){if(Zl(S,U,K,pe,xe))if($u(S,U,K,ve))po(S,U,K);else{var Ce=S,Ne=U,Me=K,Xe=Ce[Ne-Me],We=Ce[Ne+0],Ge=Ce[Ne+Me],xt=rA[112+((it=3*(We-Xe))+4>>3)],it=rA[112+(it+3>>3)],Pe=xt+1>>1;Ce[Ne-2*Me]=ga[255+Ce[Ne-2*Me]+Pe],Ce[Ne-Me]=ga[255+Xe+it],Ce[Ne+0]=ga[255+We-xt],Ce[Ne+Me]=ga[255+Ge-Pe]}U+=se}}function gl(S,U,K,se,ue,pe){pl(S,U,K,1,16,se,ue,pe)}function Oo(S,U,K,se,ue,pe){pl(S,U,1,K,16,se,ue,pe)}function Vc(S,U,K,se,ue,pe){var xe;for(xe=3;0<xe;--xe)Da(S,U+=4*K,K,1,16,se,ue,pe)}function ec(S,U,K,se,ue,pe){var xe;for(xe=3;0<xe;--xe)Da(S,U+=4,1,K,16,se,ue,pe)}function zc(S,U,K,se,ue,pe,xe,ve){pl(S,U,ue,1,8,pe,xe,ve),pl(K,se,ue,1,8,pe,xe,ve)}function Wu(S,U,K,se,ue,pe,xe,ve){pl(S,U,1,ue,8,pe,xe,ve),pl(K,se,1,ue,8,pe,xe,ve)}function tc(S,U,K,se,ue,pe,xe,ve){Da(S,U+4*ue,ue,1,8,pe,xe,ve),Da(K,se+4*ue,ue,1,8,pe,xe,ve)}function xl(S,U,K,se,ue,pe,xe,ve){Da(S,U+4,1,ue,8,pe,xe,ve),Da(K,se+4,1,ue,8,pe,xe,ve)}function rc(){this.ba=new ns,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new jr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Gc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function nc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function vl(){this.ua=0,this.Wa=new Ee,this.vb=new Ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new F}function ed(){this.xb=this.a=0,this.l=new Ws,this.ca=new ns,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new vl,this.ab=0,this.gc=i(4,nc),this.Oc=0}function Qo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ws,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function yl(S,U,K,se,ue,pe,xe){for(S=S==null?0:S[U+0],U=0;U<xe;++U)ue[pe+U]=S+K[se+U]&255,S=ue[pe+U]}function sc(S,U,K,se,ue,pe,xe){var ve;if(S==null)yl(null,null,K,se,ue,pe,xe);else for(ve=0;ve<xe;++ve)ue[pe+ve]=S[U+ve]+K[se+ve]&255}function Va(S,U,K,se,ue,pe,xe){if(S==null)yl(null,null,K,se,ue,pe,xe);else{var ve,Ce=S[U+0],Ne=Ce,Me=Ce;for(ve=0;ve<xe;++ve)Ne=Me+(Ce=S[U+ve])-Ne,Me=K[se+ve]+(-256&Ne?0>Ne?0:255:Ne)&255,Ne=Ce,ue[pe+ve]=Me}}function qc(S,U,K,se){var ue=U.width,pe=U.o;if(e(S!=null&&U!=null),0>K||0>=se||K+se>pe)return null;if(!S.Cc){if(S.ga==null){var xe;if(S.ga=new Qo,(xe=S.ga==null)||(xe=U.width*U.o,e(S.Gb.length==0),S.Gb=a(xe),S.Uc=0,S.Gb==null?xe=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,xe=1),xe=!xe),!xe){xe=S.ga;var ve=S.Fa,Ce=S.P,Ne=S.qc,Me=S.mb,Xe=S.nb,We=Ce+1,Ge=Ne-1,xt=xe.l;if(e(ve!=null&&Me!=null&&U!=null),Sl[0]=null,Sl[1]=yl,Sl[2]=sc,Sl[3]=Va,xe.ca=Me,xe.tb=Xe,xe.c=U.width,xe.i=U.height,e(0<xe.c&&0<xe.i),1>=Ne)U=0;else if(xe.$a=ve[Ce+0]>>0&3,xe.Z=ve[Ce+0]>>2&3,xe.Lc=ve[Ce+0]>>4&3,Ce=ve[Ce+0]>>6&3,0>xe.$a||1<xe.$a||4<=xe.Z||1<xe.Lc||Ce)U=0;else if(xt.put=_s,xt.ac=Wn,xt.bc=Ba,xt.ma=xe,xt.width=U.width,xt.height=U.height,xt.Da=U.Da,xt.v=U.v,xt.va=U.va,xt.j=U.j,xt.o=U.o,xe.$a)e:{e(xe.$a==1),U=nt();t:for(;;){if(U==null){U=0;break e}if(e(xe!=null),xe.mc=U,U.c=xe.c,U.i=xe.i,U.l=xe.l,U.l.ma=xe,U.l.width=xe.c,U.l.height=xe.i,U.a=0,G(U.m,ve,We,Ge),!Ve(xe.c,xe.i,1,U,null)||(U.ab==1&&U.gc[0].hc==3&&_e(U.s)?(xe.ic=1,ve=U.c*U.i,U.Ta=null,U.Ua=0,U.V=a(ve),U.Ba=0,U.V==null?(U.a=1,U=0):U=1):(xe.ic=0,U=Ye(U,xe.c)),!U))break t;U=1;break e}xe.mc=null,U=0}else U=Ge>=xe.c*xe.i;xe=!U}if(xe)return null;S.ga.Lc!=1?S.Ga=0:se=pe-K}e(S.ga!=null),e(K+se<=pe);e:{if(U=(ve=S.ga).c,pe=ve.l.o,ve.$a==0){if(We=S.rc,Ge=S.Vc,xt=S.Fa,Ce=S.P+1+K*U,Ne=S.mb,Me=S.nb+K*U,e(Ce<=S.P+S.qc),ve.Z!=0)for(e(Sl[ve.Z]!=null),xe=0;xe<se;++xe)Sl[ve.Z](We,Ge,xt,Ce,Ne,Me,U),We=Ne,Ge=Me,Me+=U,Ce+=U;else for(xe=0;xe<se;++xe)n(Ne,Me,xt,Ce,U),We=Ne,Ge=Me,Me+=U,Ce+=U;S.rc=We,S.Vc=Ge}else{if(e(ve.mc!=null),U=K+se,e((xe=ve.mc)!=null),e(U<=xe.i),xe.C>=U)U=1;else if(ve.ic||ze(),ve.ic){ve=xe.V,We=xe.Ba,Ge=xe.c;var it=xe.i,Pe=(xt=1,Ce=xe.$/Ge,Ne=xe.$%Ge,Me=xe.m,Xe=xe.s,xe.$),Oe=Ge*it,At=Ge*U,yt=Xe.wc,ht=Pe<At?Yn(Xe,Ne,Ce):null;e(Pe<=Oe),e(U<=it),e(_e(Xe));t:for(;;){for(;!Me.h&&Pe<At;){if(Ne&yt||(ht=Yn(Xe,Ne,Ce)),e(ht!=null),ce(Me),256>(it=Rn(ht.G[0],ht.H[0],Me)))ve[We+Pe]=it,++Pe,++Ne>=Ge&&(Ne=0,++Ce<=U&&!(Ce%16)&&Te(xe,Ce));else{if(!(280>it)){xt=0;break t}it=mn(it-256,Me);var $t,Pt=Rn(ht.G[4],ht.H[4],Me);if(ce(Me),!(Pe>=(Pt=on(Ge,Pt=mn(Pt,Me)))&&Oe-Pe>=it)){xt=0;break t}for($t=0;$t<it;++$t)ve[We+Pe+$t]=ve[We+Pe+$t-Pt];for(Pe+=it,Ne+=it;Ne>=Ge;)Ne-=Ge,++Ce<=U&&!(Ce%16)&&Te(xe,Ce);Pe<At&&Ne&yt&&(ht=Yn(Xe,Ne,Ce))}e(Me.h==ee(Me))}Te(xe,Ce>U?U:Ce);break t}!xt||Me.h&&Pe<Oe?(xt=0,xe.a=Me.h?5:3):xe.$=Pe,U=xt}else U=ke(xe,xe.V,xe.Ba,xe.c,xe.i,U,Ze);if(!U){se=0;break e}}K+se>=pe&&(S.Cc=1),se=1}if(!se)return null;if(S.Cc&&((se=S.ga)!=null&&(se.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+K*ue}function z(S,U,K,se,ue,pe){for(;0<ue--;){var xe,ve=S,Ce=U+(K?1:0),Ne=S,Me=U+(K?0:3);for(xe=0;xe<se;++xe){var Xe=Ne[Me+4*xe];Xe!=255&&(Xe*=32897,ve[Ce+4*xe+0]=ve[Ce+4*xe+0]*Xe>>23,ve[Ce+4*xe+1]=ve[Ce+4*xe+1]*Xe>>23,ve[Ce+4*xe+2]=ve[Ce+4*xe+2]*Xe>>23)}U+=pe}}function Ae(S,U,K,se,ue){for(;0<se--;){var pe;for(pe=0;pe<K;++pe){var xe=S[U+2*pe+0],ve=15&(Ne=S[U+2*pe+1]),Ce=4369*ve,Ne=(240&Ne|Ne>>4)*Ce>>16;S[U+2*pe+0]=(240&xe|xe>>4)*Ce>>16&240|(15&xe|xe<<4)*Ce>>16>>4&15,S[U+2*pe+1]=240&Ne|ve}U+=ue}}function Ie(S,U,K,se,ue,pe,xe,ve){var Ce,Ne,Me=255;for(Ne=0;Ne<ue;++Ne){for(Ce=0;Ce<se;++Ce){var Xe=S[U+Ce];pe[xe+4*Ce]=Xe,Me&=Xe}U+=K,xe+=ve}return Me!=255}function Le(S,U,K,se,ue){var pe;for(pe=0;pe<ue;++pe)K[se+pe]=S[U+pe]>>8}function ze(){Zi=z,$r=Ae,Wr=Ie,Xn=Le}function ot(S,U,K){E[S]=function(se,ue,pe,xe,ve,Ce,Ne,Me,Xe,We,Ge,xt,it,Pe,Oe,At,yt){var ht,$t=yt-1>>1,Pt=ve[Ce+0]|Ne[Me+0]<<16,sr=Xe[We+0]|Ge[xt+0]<<16;e(se!=null);var Vt=3*Pt+sr+131074>>2;for(U(se[ue+0],255&Vt,Vt>>16,it,Pe),pe!=null&&(Vt=3*sr+Pt+131074>>2,U(pe[xe+0],255&Vt,Vt>>16,Oe,At)),ht=1;ht<=$t;++ht){var vn=ve[Ce+ht]|Ne[Me+ht]<<16,Nn=Xe[We+ht]|Ge[xt+ht]<<16,Kr=Pt+vn+sr+Nn+524296,Hr=Kr+2*(vn+sr)>>3;Vt=Hr+Pt>>1,Pt=(Kr=Kr+2*(Pt+Nn)>>3)+vn>>1,U(se[ue+2*ht-1],255&Vt,Vt>>16,it,Pe+(2*ht-1)*K),U(se[ue+2*ht-0],255&Pt,Pt>>16,it,Pe+(2*ht-0)*K),pe!=null&&(Vt=Kr+sr>>1,Pt=Hr+Nn>>1,U(pe[xe+2*ht-1],255&Vt,Vt>>16,Oe,At+(2*ht-1)*K),U(pe[xe+2*ht+0],255&Pt,Pt>>16,Oe,At+(2*ht+0)*K)),Pt=vn,sr=Nn}1&yt||(Vt=3*Pt+sr+131074>>2,U(se[ue+yt-1],255&Vt,Vt>>16,it,Pe+(yt-1)*K),pe!=null&&(Vt=3*sr+Pt+131074>>2,U(pe[xe+yt-1],255&Vt,Vt>>16,Oe,At+(yt-1)*K)))}}function St(){xa[za]=fc,xa[ad]=Tl,xa[El]=iu,xa[Uf]=o0,xa[nA]=l0,xa[lc]=ld,xa[a0]=c0,xa[Mf]=Tl,xa[su]=o0,xa[cc]=l0,xa[id]=ld}function Ht(S){return S&-16384?0>S?0:255:S>>Pb}function N(S,U){return Ht((19077*S>>8)+(26149*U>>8)-14234)}function X(S,U,K){return Ht((19077*S>>8)-(6419*U>>8)-(13320*K>>8)+8708)}function ae(S,U){return Ht((19077*S>>8)+(33050*U>>8)-17685)}function ye(S,U,K,se,ue){se[ue+0]=N(S,K),se[ue+1]=X(S,U,K),se[ue+2]=ae(S,U)}function He(S,U,K,se,ue){se[ue+0]=ae(S,U),se[ue+1]=X(S,U,K),se[ue+2]=N(S,K)}function et(S,U,K,se,ue){var pe=X(S,U,K);U=pe<<3&224|ae(S,U)>>3,se[ue+0]=248&N(S,K)|pe>>5,se[ue+1]=U}function Tt(S,U,K,se,ue){var pe=240&ae(S,U)|15;se[ue+0]=240&N(S,K)|X(S,U,K)>>4,se[ue+1]=pe}function gr(S,U,K,se,ue){se[ue+0]=255,ye(S,U,K,se,ue+1)}function tn(S,U,K,se,ue){He(S,U,K,se,ue),se[ue+3]=255}function kr(S,U,K,se,ue){ye(S,U,K,se,ue),se[ue+3]=255}function Tn(S,U){return 0>S?0:S>U?U:S}function Ln(S,U,K){E[S]=function(se,ue,pe,xe,ve,Ce,Ne,Me,Xe){for(var We=Me+(-2&Xe)*K;Me!=We;)U(se[ue+0],pe[xe+0],ve[Ce+0],Ne,Me),U(se[ue+1],pe[xe+0],ve[Ce+0],Ne,Me+K),ue+=2,++xe,++Ce,Me+=2*K;1&Xe&&U(se[ue+0],pe[xe+0],ve[Ce+0],Ne,Me)}}function go(S,U,K){return K==0?S==0?U==0?6:5:U==0?4:0:K}function Ss(S,U,K,se,ue){switch(S>>>30){case 3:Vo(U,K,se,ue,0);break;case 2:xs(U,K,se,ue);break;case 1:js(U,K,se,ue)}}function bi(S,U){var K,se,ue=U.M,pe=U.Nb,xe=S.oc,ve=S.pc+40,Ce=S.oc,Ne=S.pc+584,Me=S.oc,Xe=S.pc+600;for(K=0;16>K;++K)xe[ve+32*K-1]=129;for(K=0;8>K;++K)Ce[Ne+32*K-1]=129,Me[Xe+32*K-1]=129;for(0<ue?xe[ve-1-32]=Ce[Ne-1-32]=Me[Xe-1-32]=129:(s(xe,ve-32-1,127,21),s(Ce,Ne-32-1,127,9),s(Me,Xe-32-1,127,9)),se=0;se<S.za;++se){var We=U.ya[U.aa+se];if(0<se){for(K=-1;16>K;++K)n(xe,ve+32*K-4,xe,ve+32*K+12,4);for(K=-1;8>K;++K)n(Ce,Ne+32*K-4,Ce,Ne+32*K+4,4),n(Me,Xe+32*K-4,Me,Xe+32*K+4,4)}var Ge=S.Gd,xt=S.Hd+se,it=We.ad,Pe=We.Hc;if(0<ue&&(n(xe,ve-32,Ge[xt].y,0,16),n(Ce,Ne-32,Ge[xt].f,0,8),n(Me,Xe-32,Ge[xt].ea,0,8)),We.Za){var Oe=xe,At=ve-32+16;for(0<ue&&(se>=S.za-1?s(Oe,At,Ge[xt].y[15],4):n(Oe,At,Ge[xt+1].y,0,4)),K=0;4>K;K++)Oe[At+128+K]=Oe[At+256+K]=Oe[At+384+K]=Oe[At+0+K];for(K=0;16>K;++K,Pe<<=2)Oe=xe,At=ve+oA[K],ni[We.Ob[K]](Oe,At),Ss(Pe,it,16*+K,Oe,At)}else if(Oe=go(se,ue,We.Ob[0]),dc[Oe](xe,ve),Pe!=0)for(K=0;16>K;++K,Pe<<=2)Ss(Pe,it,16*+K,xe,ve+oA[K]);for(K=We.Gc,Oe=go(se,ue,We.Dd),to[Oe](Ce,Ne),to[Oe](Me,Xe),Pe=it,Oe=Ce,At=Ne,255&(We=K>>0)&&(170&We?zo(Pe,256,Oe,At):_i(Pe,256,Oe,At)),We=Me,Pe=Xe,255&(K>>=8)&&(170&K?zo(it,320,We,Pe):_i(it,320,We,Pe)),ue<S.Ub-1&&(n(Ge[xt].y,0,xe,ve+480,16),n(Ge[xt].f,0,Ce,Ne+224,8),n(Ge[xt].ea,0,Me,Xe+224,8)),K=8*pe*S.B,Ge=S.sa,xt=S.ta+16*se+16*pe*S.R,it=S.qa,We=S.ra+8*se+K,Pe=S.Ha,Oe=S.Ia+8*se+K,K=0;16>K;++K)n(Ge,xt+K*S.R,xe,ve+32*K,16);for(K=0;8>K;++K)n(it,We+K*S.B,Ce,Ne+32*K,8),n(Pe,Oe+K*S.B,Me,Xe+32*K,8)}}function wl(S,U,K,se,ue,pe,xe,ve,Ce){var Ne=[0],Me=[0],Xe=0,We=Ce!=null?Ce.kd:0,Ge=Ce??new Gc;if(S==null||12>K)return 7;Ge.data=S,Ge.w=U,Ge.ha=K,U=[U],K=[K],Ge.gb=[Ge.gb];e:{var xt=U,it=K,Pe=Ge.gb;if(e(S!=null),e(it!=null),e(Pe!=null),Pe[0]=0,12<=it[0]&&!r(S,xt[0],"RIFF")){if(r(S,xt[0]+8,"WEBP")){Pe=3;break e}var Oe=Ue(S,xt[0]+4);if(12>Oe||4294967286<Oe){Pe=3;break e}if(We&&Oe>it[0]-8){Pe=7;break e}Pe[0]=Oe,xt[0]+=12,it[0]-=12}Pe=0}if(Pe!=0)return Pe;for(Oe=0<Ge.gb[0],K=K[0];;){e:{var At=S;it=U,Pe=K;var yt=Ne,ht=Me,$t=xt=[0];if((Vt=Xe=[Xe])[0]=0,8>Pe[0])Pe=7;else{if(!r(At,it[0],"VP8X")){if(Ue(At,it[0]+4)!=10){Pe=3;break e}if(18>Pe[0]){Pe=7;break e}var Pt=Ue(At,it[0]+8),sr=1+oe(At,it[0]+12);if(2147483648<=sr*(At=1+oe(At,it[0]+15))){Pe=3;break e}$t!=null&&($t[0]=Pt),yt!=null&&(yt[0]=sr),ht!=null&&(ht[0]=At),it[0]+=18,Pe[0]-=18,Vt[0]=1}Pe=0}}if(Xe=Xe[0],xt=xt[0],Pe!=0)return Pe;if(it=!!(2&xt),!Oe&&Xe)return 3;if(pe!=null&&(pe[0]=!!(16&xt)),xe!=null&&(xe[0]=it),ve!=null&&(ve[0]=0),xe=Ne[0],xt=Me[0],Xe&&it&&Ce==null){Pe=0;break}if(4>K){Pe=7;break}if(Oe&&Xe||!Oe&&!Xe&&!r(S,U[0],"ALPH")){K=[K],Ge.na=[Ge.na],Ge.P=[Ge.P],Ge.Sa=[Ge.Sa];e:{Pt=S,Pe=U,Oe=K;var Vt=Ge.gb;yt=Ge.na,ht=Ge.P,$t=Ge.Sa,sr=22,e(Pt!=null),e(Oe!=null),At=Pe[0];var vn=Oe[0];for(e(yt!=null),e($t!=null),yt[0]=null,ht[0]=null,$t[0]=0;;){if(Pe[0]=At,Oe[0]=vn,8>vn){Pe=7;break e}var Nn=Ue(Pt,At+4);if(4294967286<Nn){Pe=3;break e}var Kr=8+Nn+1&-2;if(sr+=Kr,0<Vt&&sr>Vt){Pe=3;break e}if(!r(Pt,At,"VP8 ")||!r(Pt,At,"VP8L")){Pe=0;break e}if(vn[0]<Kr){Pe=7;break e}r(Pt,At,"ALPH")||(yt[0]=Pt,ht[0]=At+8,$t[0]=Nn),At+=Kr,vn-=Kr}}if(K=K[0],Ge.na=Ge.na[0],Ge.P=Ge.P[0],Ge.Sa=Ge.Sa[0],Pe!=0)break}K=[K],Ge.Ja=[Ge.Ja],Ge.xa=[Ge.xa];e:if(Vt=S,Pe=U,Oe=K,yt=Ge.gb[0],ht=Ge.Ja,$t=Ge.xa,Pt=Pe[0],At=!r(Vt,Pt,"VP8 "),sr=!r(Vt,Pt,"VP8L"),e(Vt!=null),e(Oe!=null),e(ht!=null),e($t!=null),8>Oe[0])Pe=7;else{if(At||sr){if(Vt=Ue(Vt,Pt+4),12<=yt&&Vt>yt-12){Pe=3;break e}if(We&&Vt>Oe[0]-8){Pe=7;break e}ht[0]=Vt,Pe[0]+=8,Oe[0]-=8,$t[0]=sr}else $t[0]=5<=Oe[0]&&Vt[Pt+0]==47&&!(Vt[Pt+4]>>5),ht[0]=Oe[0];Pe=0}if(K=K[0],Ge.Ja=Ge.Ja[0],Ge.xa=Ge.xa[0],U=U[0],Pe!=0)break;if(4294967286<Ge.Ja)return 3;if(ve==null||it||(ve[0]=Ge.xa?2:1),xe=[xe],xt=[xt],Ge.xa){if(5>K){Pe=7;break}ve=xe,We=xt,it=pe,S==null||5>K?S=0:5<=K&&S[U+0]==47&&!(S[U+4]>>5)?(Oe=[0],Vt=[0],yt=[0],G(ht=new j,S,U,K),Gt(ht,Oe,Vt,yt)?(ve!=null&&(ve[0]=Oe[0]),We!=null&&(We[0]=Vt[0]),it!=null&&(it[0]=yt[0]),S=1):S=0):S=0}else{if(10>K){Pe=7;break}ve=xt,S==null||10>K||!ma(S,U+3,K-3)?S=0:(We=S[U+0]|S[U+1]<<8|S[U+2]<<16,it=16383&(S[U+7]<<8|S[U+6]),S=16383&(S[U+9]<<8|S[U+8]),1&We||3<(We>>1&7)||!(We>>4&1)||We>>5>=Ge.Ja||!it||!S?S=0:(xe&&(xe[0]=it),ve&&(ve[0]=S),S=1))}if(!S||(xe=xe[0],xt=xt[0],Xe&&(Ne[0]!=xe||Me[0]!=xt)))return 3;Ce!=null&&(Ce[0]=Ge,Ce.offset=U-Ce.w,e(4294967286>U-Ce.w),e(Ce.offset==Ce.ha-K));break}return Pe==0||Pe==7&&Xe&&Ce==null?(pe!=null&&(pe[0]|=Ge.na!=null&&0<Ge.na.length),se!=null&&(se[0]=xe),ue!=null&&(ue[0]=xt),0):Pe}function Kc(S,U,K){var se=U.width,ue=U.height,pe=0,xe=0,ve=se,Ce=ue;if(U.Da=S!=null&&0<S.Da,U.Da&&(ve=S.cd,Ce=S.bd,pe=S.v,xe=S.j,11>K||(pe&=-2,xe&=-2),0>pe||0>xe||0>=ve||0>=Ce||pe+ve>se||xe+Ce>ue))return 0;if(U.v=pe,U.j=xe,U.va=pe+ve,U.o=xe+Ce,U.U=ve,U.T=Ce,U.da=S!=null&&0<S.da,U.da){if(!De(ve,Ce,K=[S.ib],pe=[S.hb]))return 0;U.ib=K[0],U.hb=pe[0]}return U.ob=S!=null&&S.ob,U.Kb=S==null||!S.Sd,U.da&&(U.ob=U.ib<3*se/4&&U.hb<3*ue/4,U.Kb=0),1}function td(S){if(S==null)return 2;if(11>S.S){var U=S.f.RGBA;U.fb+=(S.height-1)*U.A,U.A=-U.A}else U=S.f.kb,S=S.height,U.O+=(S-1)*U.fa,U.fa=-U.fa,U.N+=(S-1>>1)*U.Ab,U.Ab=-U.Ab,U.W+=(S-1>>1)*U.Db,U.Db=-U.Db,U.F!=null&&(U.J+=(S-1)*U.lb,U.lb=-U.lb);return 0}function Yu(S,U,K,se){if(se==null||0>=S||0>=U)return 2;if(K!=null){if(K.Da){var ue=K.cd,pe=K.bd,xe=-2&K.v,ve=-2&K.j;if(0>xe||0>ve||0>=ue||0>=pe||xe+ue>S||ve+pe>U)return 2;S=ue,U=pe}if(K.da){if(!De(S,U,ue=[K.ib],pe=[K.hb]))return 2;S=ue[0],U=pe[0]}}se.width=S,se.height=U;e:{var Ce=se.width,Ne=se.height;if(S=se.S,0>=Ce||0>=Ne||!(S>=za&&13>S))S=2;else{if(0>=se.Rd&&se.sd==null){xe=pe=ue=U=0;var Me=(ve=Ce*U1[S])*Ne;if(11>S||(pe=(Ne+1)/2*(U=(Ce+1)/2),S==12&&(xe=(ue=Ce)*Ne)),(Ne=a(Me+2*pe+xe))==null){S=1;break e}se.sd=Ne,11>S?((Ce=se.f.RGBA).eb=Ne,Ce.fb=0,Ce.A=ve,Ce.size=Me):((Ce=se.f.kb).y=Ne,Ce.O=0,Ce.fa=ve,Ce.Fd=Me,Ce.f=Ne,Ce.N=0+Me,Ce.Ab=U,Ce.Cd=pe,Ce.ea=Ne,Ce.W=0+Me+pe,Ce.Db=U,Ce.Ed=pe,S==12&&(Ce.F=Ne,Ce.J=0+Me+2*pe),Ce.Tc=xe,Ce.lb=ue)}if(U=1,ue=se.S,pe=se.width,xe=se.height,ue>=za&&13>ue)if(11>ue)S=se.f.RGBA,U&=(ve=Math.abs(S.A))*(xe-1)+pe<=S.size,U&=ve>=pe*U1[ue],U&=S.eb!=null;else{S=se.f.kb,ve=(pe+1)/2,Me=(xe+1)/2,Ce=Math.abs(S.fa),Ne=Math.abs(S.Ab);var Xe=Math.abs(S.Db),We=Math.abs(S.lb),Ge=We*(xe-1)+pe;U&=Ce*(xe-1)+pe<=S.Fd,U&=Ne*(Me-1)+ve<=S.Cd,U=(U&=Xe*(Me-1)+ve<=S.Ed)&Ce>=pe&Ne>=ve&Xe>=ve,U&=S.y!=null,U&=S.f!=null,U&=S.ea!=null,ue==12&&(U&=We>=pe,U&=Ge<=S.Tc,U&=S.F!=null)}else U=0;S=U?0:2}}return S!=0||K!=null&&K.fd&&(S=td(se)),S}var Ys=64,$c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ju=24,Xu=32,rd=8,Ci=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ut("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(S){return S},E.Predictor2=function(S,U,K){return U[K+0]},E.Predictor3=function(S,U,K){return U[K+1]},E.Predictor4=function(S,U,K){return U[K-1]},E.Predictor5=function(S,U,K){return lt(lt(S,U[K+1]),U[K+0])},E.Predictor6=function(S,U,K){return lt(S,U[K-1])},E.Predictor7=function(S,U,K){return lt(S,U[K+0])},E.Predictor8=function(S,U,K){return lt(U[K-1],U[K+0])},E.Predictor9=function(S,U,K){return lt(U[K+0],U[K+1])},E.Predictor10=function(S,U,K){return lt(lt(S,U[K-1]),lt(U[K+0],U[K+1]))},E.Predictor11=function(S,U,K){var se=U[K+0];return 0>=Jt(se>>24&255,S>>24&255,(U=U[K-1])>>24&255)+Jt(se>>16&255,S>>16&255,U>>16&255)+Jt(se>>8&255,S>>8&255,U>>8&255)+Jt(255&se,255&S,255&U)?se:S},E.Predictor12=function(S,U,K){var se=U[K+0];return(Dt((S>>24&255)+(se>>24&255)-((U=U[K-1])>>24&255))<<24|Dt((S>>16&255)+(se>>16&255)-(U>>16&255))<<16|Dt((S>>8&255)+(se>>8&255)-(U>>8&255))<<8|Dt((255&S)+(255&se)-(255&U)))>>>0},E.Predictor13=function(S,U,K){var se=U[K-1];return(zt((S=lt(S,U[K+0]))>>24&255,se>>24&255)<<24|zt(S>>16&255,se>>16&255)<<16|zt(S>>8&255,se>>8&255)<<8|zt(S>>0&255,se>>0&255))>>>0};var pp=E.PredictorAdd0;E.PredictorAdd1=Rt,ut("Predictor2","PredictorAdd2"),ut("Predictor3","PredictorAdd3"),ut("Predictor4","PredictorAdd4"),ut("Predictor5","PredictorAdd5"),ut("Predictor6","PredictorAdd6"),ut("Predictor7","PredictorAdd7"),ut("Predictor8","PredictorAdd8"),ut("Predictor9","PredictorAdd9"),ut("Predictor10","PredictorAdd10"),ut("Predictor11","PredictorAdd11"),ut("Predictor12","PredictorAdd12"),ut("Predictor13","PredictorAdd13");var Rf=E.PredictorAdd2;Ft("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),Ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var n0,xo=E.ColorIndexInverseTransform,pa=E.MapARGB,Wc=E.VP8LColorIndexInverseTransformAlpha,Lf=E.MapAlpha,ac=E.VP8LPredictorsAdd=[];ac.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var Yc,ri,Ra,Jc,Ei,Ho,bl,Vo,xs,zo,js,_i,Zu,Cl,nd,Xc,Zc,eu,eA,sd,tu,ic,tA,vs,Zi,$r,Wr,Xn,Ts=a(511),vo=a(2041),ru=a(225),nu=a(767),oc=0,s0=vo,rA=ru,ga=nu,yo=Ts,za=0,ad=1,El=2,Uf=3,nA=4,lc=5,a0=6,Mf=7,su=8,cc=9,id=10,i0=[2,3,7],wo=[3,3,11],eo=[280,256,256,256,40],sA=[0,1,1,1,0],uc=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ac=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],aA=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],I1=8,Pf=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],jf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Js=null,ys=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Cn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],au=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],_l=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],iA=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],F1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],dc=[],ni=[],to=[],D1=1,od=2,Sl=[],xa=[];ot("UpsampleRgbLinePair",ye,3),ot("UpsampleBgrLinePair",He,3),ot("UpsampleRgbaLinePair",kr,4),ot("UpsampleBgraLinePair",tn,4),ot("UpsampleArgbLinePair",gr,4),ot("UpsampleRgba4444LinePair",Tt,2),ot("UpsampleRgb565LinePair",et,2);var fc=E.UpsampleRgbLinePair,iu=E.UpsampleBgrLinePair,Tl=E.UpsampleRgbaLinePair,o0=E.UpsampleBgraLinePair,l0=E.UpsampleArgbLinePair,ld=E.UpsampleRgba4444LinePair,c0=E.UpsampleRgb565LinePair,Nl=16,Xs=1<<Nl-1,ou=-227,u0=482,Pb=6,R1=0,jb=a(256),Zs=a(256),xp=a(256),Of=a(256),Qf=a(u0-ou),vp=a(u0-ou);Ln("YuvToRgbRow",ye,3),Ln("YuvToBgrRow",He,3),Ln("YuvToRgbaRow",kr,4),Ln("YuvToBgraRow",tn,4),Ln("YuvToArgbRow",gr,4),Ln("YuvToRgba4444Row",Tt,2),Ln("YuvToRgb565Row",et,2);var oA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],hc=[0,2,8],Ob=[8,7,6,4,4,2,2,2,1,1,1,1],L1=1;this.WebPDecodeRGBA=function(S,U,K,se,ue){var pe=ad,xe=new rc,ve=new ns;xe.ba=ve,ve.S=pe,ve.width=[ve.width],ve.height=[ve.height];var Ce=ve.width,Ne=ve.height,Me=new gs;if(Me==null||S==null)var Xe=2;else e(Me!=null),Xe=wl(S,U,K,Me.width,Me.height,Me.Pd,Me.Qd,Me.format,null);if(Xe!=0?Ce=0:(Ce!=null&&(Ce[0]=Me.width[0]),Ne!=null&&(Ne[0]=Me.height[0]),Ce=1),Ce){ve.width=ve.width[0],ve.height=ve.height[0],se!=null&&(se[0]=ve.width),ue!=null&&(ue[0]=ve.height);e:{if(se=new Ws,(ue=new Gc).data=S,ue.w=U,ue.ha=K,ue.kd=1,U=[0],e(ue!=null),((S=wl(ue.data,ue.w,ue.ha,null,null,null,U,null,ue))==0||S==7)&&U[0]&&(S=4),(U=S)==0){if(e(xe!=null),se.data=ue.data,se.w=ue.w+ue.offset,se.ha=ue.ha-ue.offset,se.put=_s,se.ac=Wn,se.bc=Ba,se.ma=xe,ue.xa){if((S=nt())==null){xe=1;break e}if(function(We,Ge){var xt=[0],it=[0],Pe=[0];t:for(;;){if(We==null)return 0;if(Ge==null)return We.a=2,0;if(We.l=Ge,We.a=0,G(We.m,Ge.data,Ge.w,Ge.ha),!Gt(We.m,xt,it,Pe)){We.a=3;break t}if(We.xb=od,Ge.width=xt[0],Ge.height=it[0],!Ve(xt[0],it[0],1,We,null))break t;return 1}return e(We.a!=0),0}(S,se)){if(se=(U=Yu(se.width,se.height,xe.Oa,xe.ba))==0){t:{se=S;r:for(;;){if(se==null){se=0;break t}if(e(se.s.yc!=null),e(se.s.Ya!=null),e(0<se.s.Wb),e((K=se.l)!=null),e((ue=K.ma)!=null),se.xb!=0){if(se.ca=ue.ba,se.tb=ue.tb,e(se.ca!=null),!Kc(ue.Oa,K,Uf)){se.a=2;break r}if(!Ye(se,K.width)||K.da)break r;if((K.da||Fr(se.ca.S))&&ze(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&ze()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!tt(se.s.vb,se.s.Wa.Xa)){se.a=1;break r}se.xb=0}if(!ke(se,se.V,se.Ba,se.c,se.i,K.o,Be))break r;ue.Dc=se.Ma,se=1;break t}e(se.a!=0),se=0}se=!se}se&&(U=S.a)}else U=S.a}else{if((S=new ka)==null){xe=1;break e}if(S.Fa=ue.na,S.P=ue.P,S.qc=ue.Sa,Oc(S,se)){if((U=Yu(se.width,se.height,xe.Oa,xe.ba))==0){if(S.Aa=0,K=xe.Oa,e((ue=S)!=null),K!=null){if(0<(Ce=0>(Ce=K.Md)?0:100<Ce?255:255*Ce/100)){for(Ne=Me=0;4>Ne;++Ne)12>(Xe=ue.pb[Ne]).lc&&(Xe.ia=Ce*Ob[0>Xe.lc?0:Xe.lc]>>3),Me|=Xe.ia;Me&&(alert("todo:VP8InitRandom"),ue.ia=1)}ue.Ga=K.Id,100<ue.Ga?ue.Ga=100:0>ue.Ga&&(ue.Ga=0)}zu(S,se)||(U=S.a)}}else U=S.a}U==0&&xe.Oa!=null&&xe.Oa.fd&&(U=td(xe.ba))}xe=U}pe=xe!=0?null:11>pe?ve.f.RGBA.eb:ve.f.kb.y}else pe=null;return pe};var U1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(E,B){for(var O="",R=0;R<4;R++)O+=String.fromCharCode(E[B++]);return O}function d(E,B){return(E[B+0]<<0|E[B+1]<<8|E[B+2]<<16)>>>0}function h(E,B){return(E[B+0]<<0|E[B+1]<<8|E[B+2]<<16|E[B+3]<<24)>>>0}new l;var m=[0],g=[0],b=[],y=new l,_=t,T=function(E,B){var O={},R=0,F=!1,Q=0,H=0;if(O.frames=[],!function(Y,ee,te,ce){for(var be=0;be<ce;be++)if(Y[ee+be]!=te.charCodeAt(be))return!0;return!1}(E,B,"RIFF",4)){var ne,J;for(h(E,B+=4),B+=8;B<E.length;){var re=u(E,B),G=h(E,B+=4);B+=4;var q=G+(1&G);switch(re){case"VP8 ":case"VP8L":O.frames[R]===void 0&&(O.frames[R]={}),(j=O.frames[R]).src_off=F?H:B-8,j.src_size=Q+G+8,R++,F&&(F=!1,Q=0,H=0);break;case"VP8X":(j=O.header={}).feature_flags=E[B];var W=B+4;j.canvas_width=1+d(E,W),W+=3,j.canvas_height=1+d(E,W),W+=3;break;case"ALPH":F=!0,Q=q+8,H=B-8;break;case"ANIM":(j=O.header).bgcolor=h(E,B),W=B+4,j.loop_count=(ne=E)[(J=W)+0]<<0|ne[J+1]<<8,W+=2;break;case"ANMF":var ie,j;(j=O.frames[R]={}).offset_x=2*d(E,B),B+=3,j.offset_y=2*d(E,B),B+=3,j.width=1+d(E,B),B+=3,j.height=1+d(E,B),B+=3,j.duration=d(E,B),B+=3,ie=E[B++],j.dispose=1&ie,j.blend=ie>>1&1}re!="ANMF"&&(B+=q)}return O}}(_,0);T.response=_,T.rgbaoutput=!0,T.dataurl=!1;var k=T.header?T.header:null,D=T.frames?T.frames:null;if(k){k.loop_counter=k.loop_count,m=[k.canvas_height],g=[k.canvas_width];for(var M=0;M<D.length&&D[M].blend!=0;M++);}var P=D[0],L=y.WebPDecodeRGBA(_,P.src_off,P.src_size,g,m);P.rgba=L,P.imgwidth=g[0],P.imgheight=m[0];for(var C=0;C<g[0]*m[0]*4;C++)b[C]=L[C];return this.width=g,this.height=m,this.data=b,this}(function(t){var e=function(){return typeof xS=="function"},r=function(m,g,b,y){var _=4,T=i;switch(y){case t.image_compression.FAST:_=1,T=a;break;case t.image_compression.MEDIUM:_=6,T=o;break;case t.image_compression.SLOW:_=9,T=l}m=n(m,g,b,T);var k=xS(m,{level:_});return t.__addimage__.arrayBufferToBinaryString(k)},n=function(m,g,b,y){for(var _,T,k,D=m.length/g,M=new Uint8Array(m.length+D),P=d(),L=0;L<D;L+=1){if(k=L*g,_=m.subarray(k,k+g),y)M.set(y(_,b,T),k+L);else{for(var C,E=P.length,B=[];C<E;C+=1)B[C]=P[C](_,b,T);var O=h(B.concat());M.set(B[O],k+L)}T=_}return M},s=function(m){var g=Array.apply([],m);return g.unshift(0),g},a=function(m,g){var b,y=[],_=m.length;y[0]=1;for(var T=0;T<_;T+=1)b=m[T-g]||0,y[T+1]=m[T]-b+256&255;return y},i=function(m,g,b){var y,_=[],T=m.length;_[0]=2;for(var k=0;k<T;k+=1)y=b&&b[k]||0,_[k+1]=m[k]-y+256&255;return _},o=function(m,g,b){var y,_,T=[],k=m.length;T[0]=3;for(var D=0;D<k;D+=1)y=m[D-g]||0,_=b&&b[D]||0,T[D+1]=m[D]+256-(y+_>>>1)&255;return T},l=function(m,g,b){var y,_,T,k,D=[],M=m.length;D[0]=4;for(var P=0;P<M;P+=1)y=m[P-g]||0,_=b&&b[P]||0,T=b&&b[P-g]||0,k=u(y,_,T),D[P+1]=m[P]-k+256&255;return D},u=function(m,g,b){if(m===g&&g===b)return m;var y=Math.abs(g-b),_=Math.abs(m-b),T=Math.abs(m+g-b-b);return y<=_&&y<=T?m:_<=T?g:b},d=function(){return[s,a,i,o,l]},h=function(m){var g=m.map(function(b){return b.reduce(function(y,_){return y+Math.abs(_)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(m,g,b,y){var _,T,k,D,M,P,L,C,E,B,O,R,F,Q,H,ne=this.decode.FLATE_DECODE,J="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(k=new Lle(m)).imgData,T=k.bits,_=k.colorSpace,M=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){E=(C=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,O=new Uint8Array(E*k.colors),B=new Uint8Array(E);var re,G=k.pixelBitlength-k.bits;for(Q=0,H=0;Q<E;Q++){for(F=C[Q],re=0;re<G;)O[H++]=F>>>re&255,re+=k.bits;B[Q]=F>>>re&255}}if(k.bits===16){E=(C=new Uint32Array(k.decodePixels().buffer)).length,O=new Uint8Array(E*(32/k.pixelBitlength)*k.colors),B=new Uint8Array(E*(32/k.pixelBitlength)),R=k.colors>1,Q=0,H=0;for(var q=0;Q<E;)F=C[Q++],O[H++]=F>>>0&255,R&&(O[H++]=F>>>16&255,F=C[Q++],O[H++]=F>>>0&255),B[q++]=F>>>16&255;T=8}y!==t.image_compression.NONE&&e()?(m=r(O,k.width*k.colors,k.colors,y),L=r(B,k.width,1,y)):(m=O,L=B,ne=void 0)}if(k.colorType===3&&(_=this.color_spaces.INDEXED,P=k.palette,k.transparency.indexed)){var W=k.transparency.indexed,ie=0;for(Q=0,E=W.length;Q<E;++Q)ie+=W[Q];if((ie/=255)===E-1&&W.indexOf(0)!==-1)D=[W.indexOf(0)];else if(ie!==E){for(C=k.decodePixels(),B=new Uint8Array(C.length),Q=0,E=C.length;Q<E;Q++)B[Q]=W[C[Q]];L=r(B,k.width,1)}}var j=function(Y){var ee;switch(Y){case t.image_compression.FAST:ee=11;break;case t.image_compression.MEDIUM:ee=13;break;case t.image_compression.SLOW:ee=14;break;default:ee=12}return ee}(y);return ne===this.decode.FLATE_DECODE&&(J="/Predictor "+j+" "),J+="/Colors "+M+" /BitsPerComponent "+T+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(L&&this.__addimage__.isArrayBuffer(L)||this.__addimage__.isArrayBufferView(L))&&(L=this.__addimage__.arrayBufferToBinaryString(L)),{alias:b,data:m,index:g,filter:ne,decodeParameters:J,transparency:D,palette:P,sMask:L,predictor:j,width:k.width,height:k.height,bitsPerComponent:T,colorSpace:_}}}})(lr.API),function(t){t.processGIF89A=function(e,r,n,s){var a=new Ule(e),i=a.width,o=a.height,l=[];a.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:i,height:o},d=new EE(100).encode(u,100);return t.processJPEG.call(this,d,r,n,s)},t.processGIF87A=t.processGIF89A}(lr.API),bc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},bc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){as.log("bit decode error:"+r)}},bc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+8*s*4,o=0;o<8&&8*s+o<this.width;o++){var l=this.palette[a>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}r!==0&&(this.pos+=4-r)}},bc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var a=this.datav.getUint8(this.pos++,!0),i=n*this.width*4+2*s*4,o=a>>4,l=15&a,u=this.palette[o];if(this.data[i]=u.blue,this.data[i+1]=u.green,this.data[i+2]=u.red,this.data[i+3]=255,2*s+1>=this.width)break;u=this.palette[l],this.data[i+4]=u.blue,this.data[i+4+1]=u.green,this.data[i+4+2]=u.red,this.data[i+4+3]=255}e!==0&&(this.pos+=4-e)}},bc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(s<this.palette.length){var i=this.palette[s];this.data[a]=i.red,this.data[a+1]=i.green,this.data[a+2]=i.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},bc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(a&e)/e*255|0,o=(a>>5&e)/e*255|0,l=(a>>10&e)/e*255|0,u=a>>15?255:0,d=n*this.width*4+4*s;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=u}this.pos+=t}},bc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,l=(i>>5&r)/r*255|0,u=(i>>11)/e*255|0,d=s*this.width*4+4*a;this.data[d]=u,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=t}},bc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=e*this.width*4+4*r;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=n,this.data[i+3]=255}this.pos+=this.width%4}},bc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=a,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=i}},bc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var a=new bc(e,!1),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new EE(100).encode(l,100);return t.processJPEG.call(this,u,r,n,s)}}(lr.API),d6.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var a=new d6(e),i=a.width,o=a.height,l={data:a.getData(),width:i,height:o},u=new EE(100).encode(l,100);return t.processJPEG.call(this,u,r,n,s)}}(lr.API),lr.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,a=new Uint8Array(s/4*3),i=new Uint8Array(s/4),o=0,l=0,u=0;u<s;u+=4){var d=n[u],h=n[u+1],m=n[u+2],g=n[u+3];a[o++]=d,a[o++]=h,a[o++]=m,i[l++]=g}var b=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:b,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},lr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},R0=lr.API,Hv=R0.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),i=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:s.metadata.Unicode.widths,l=o.fof?o.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,d=u.fof?u.fof:1,h=e.doKerning!==!1,m=0,g=t.length,b=0,y=o[0]||l,_=[];for(r=0;r<g;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?_.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+i*(1e3/a)||0)/1e3):(m=h&&qn(u[n])==="object"&&!isNaN(parseInt(u[n][b],10))?u[n][b]/d:0,_.push((o[n]||y)/l+m)),b=n;return _},l6=R0.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return R0.processArabic&&(t=R0.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:Hv.apply(this,arguments).reduce(function(a,i){return a+i},0)},c6=function(t,e,r,n){for(var s=[],a=0,i=t.length,o=0;a!==i&&o+e[a]<r;)o+=e[a],a++;s.push(t.slice(0,a));var l=a;for(o=0;a!==i;)o+e[a]>n&&(s.push(t.slice(l,a)),o=0,l=a),o+=e[a],a++;return l!==a&&s.push(t.slice(l,a)),s},u6=function(t,e,r){r||(r={});var n,s,a,i,o,l,u,d=[],h=[d],m=r.textIndent||0,g=0,b=0,y=t.split(" "),_=Hv.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?y[0].length+2:r.lineIndent||0){var T=Array(l).join(" "),k=[];y.map(function(M){(M=M.split(/\s*\n/)).length>1?k=k.concat(M.map(function(P,L){return(L&&P.length?`
`:"")+P})):k.push(M[0])}),y=k,l=l6.apply(this,[T,r])}for(a=0,i=y.length;a<i;a++){var D=0;if(n=y[a],l&&n[0]==`
`&&(n=n.substr(1),D=1),m+g+(b=(s=Hv.apply(this,[n,r])).reduce(function(M,P){return M+P},0))>e||D){if(b>e){for(o=c6.apply(this,[n,s,e-(m+g),e]),d.push(o.shift()),d=[o.pop()];o.length;)h.push([o.shift()]);b=s.slice(n.length-(d[0]?d[0].length:0)).reduce(function(M,P){return M+P},0)}else d=[n];h.push(d),m=b+l,g=_}else d.push(n),m+=g+b,g=_}return u=l?function(M,P){return(P?T:"")+M.join(" ")}:function(M){return M.join(" ")},h.map(u)},R0.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var h=this.internal.getFont(d.fontName,d.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var i=1*this.internal.scaleFactor*e/s;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=r.lineIndent;var o,l,u=[];for(o=0,l=n.length;o<l;o++)u=u.concat(u6.apply(this,[n[o],i,a]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",r={},n={},s=0;s<e.length;s++)r[e[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=e[s];var a=function(h){return"0x"+parseInt(h,10).toString(16)},i=t.__fontmetrics__.compress=function(h){var m,g,b,y,_=["{"];for(var T in h){if(m=h[T],isNaN(parseInt(T,10))?g="'"+T+"'":(T=parseInt(T,10),g=(g=a(T).slice(2)).slice(0,-1)+n[g.slice(-1)]),typeof m=="number")m<0?(b=a(m).slice(3),y="-"):(b=a(m).slice(2),y=""),b=y+b.slice(0,-1)+n[b.slice(-1)];else{if(qn(m)!=="object")throw new Error("Don't know what to do with value type "+qn(m)+".");b=i(m)}_.push(g+b)}return _.push("}"),_.join("")},o=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,g,b,y,_={},T=1,k=_,D=[],M="",P="",L=h.length-1,C=1;C<L;C+=1)(y=h[C])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(y):y=="{"?(D.push([k,b]),k={},b=void 0):y=="}"?((g=D.pop())[0][g[1]]=k,b=void 0,k=g[0]):y=="-"?T=-1:b===void 0?r.hasOwnProperty(y)?(M+=r[y],b=parseInt(M,16)*T,T=1,M=""):M+=y:r.hasOwnProperty(y)?(P+=r[y],k[b]=parseInt(P,16)*T,T=1,b=void 0,P=""):P+=y;return _},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var m=h.font,g=d.Unicode[m.postScriptName];g&&(m.metadata.Unicode={},m.metadata.Unicode.widths=g.widths,m.metadata.Unicode.kerning=g.kerning);var b=u.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(lr.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),a=0;a<n;a++)s[a]=r.charCodeAt(a);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,a=r.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(i,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Kg(o)),i.metadata=t.API.TTFFont.open(o),i.metadata.Unicode=i.metadata.Unicode||{encoding:{},kerning:{},widths:[]},i.metadata.glyIdsUsed=[0]})(s,n)}}])}(lr),function(t){function e(){return(Er.canvg?Promise.resolve(Er.canvg):wx(()=>import("./index.es-DiML0Dc2.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}lr.API.addSvgAsImage=function(r,n,s,a,i,o,l,u){if(isNaN(n)||isNaN(s))throw as.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(i))throw as.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=i;var h=d.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(b){return b.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(b){return b.render(m)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),n,s,a,i,l,u)})}}(),lr.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},lr.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,a,i={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(i),l=[],u=0,d=0,h=0;function m(b,y){var _,T=!1;for(_=0;_<b.length;_+=1)b[_]===y&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(i)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=o.length;for(h=0;h<g;h+=1)r[o[h]].value=r[o[h]].defaultValue,r[o[h]].explicitSet=!1}if(qn(t)==="object"){for(s in t)if(a=t[s],m(o,s)&&a!==void 0){if(r[s].type==="boolean"&&typeof a=="boolean")r[s].value=a;else if(r[s].type==="name"&&m(r[s].valueSet,a))r[s].value=a;else if(r[s].type==="integer"&&Number.isInteger(a))r[s].value=a;else if(r[s].type==="array"){for(u=0;u<a.length;u+=1)if(n=!0,a[u].length===1&&typeof a[u][0]=="number")l.push(String(a[u]-1));else if(a[u].length>1){for(d=0;d<a[u].length;d+=1)typeof a[u][d]!="number"&&(n=!1);n===!0&&l.push([a[u][0]-1,a[u][1]-1].join(" "))}r[s].value="["+l.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,y=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?y.push("/"+b+" /"+r[b].value):y.push("/"+b+" "+r[b].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=a.length+i.length+o.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+a+i+o+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(lr.API),function(t){var e=t.API,r=e.pdfEscape16=function(a,i){for(var o,l=i.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],h=0,m=a.length;h<m;++h){if(o=i.metadata.characterToGlyph(a.charCodeAt(h)),i.metadata.glyIdsUsed.push(o),i.metadata.toUnicode[o]=a.charCodeAt(h),l.indexOf(o)==-1&&(l.push(o),l.push([parseInt(i.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},n=function(a){var i,o,l,u,d,h,m;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,m=(o=Object.keys(a).sort(function(g,b){return g-b})).length;h<m;h++)i=o[h],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),a[i]!==void 0&&a[i]!==null&&typeof a[i].toString=="function"&&(u=("0000"+a[i].toString(16)).slice(-4),i=("0000"+(+i).toString(16)).slice(-4),l.push("<"+i+"><"+u+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="Identity-H"){for(var h=o.metadata.Unicode.widths,m=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),g="",b=0;b<m.length;b++)g+=String.fromCharCode(m[b]);var y=u();d({data:g,addLength1:!0,objectId:y}),l("endobj");var _=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),l("endobj");var T=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+nm(o.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/Flags "+o.metadata.flags),l("/StemV "+o.metadata.stemV),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l(">>"),l("endobj");var k=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+nm(o.fontName)),l("/FontDescriptor "+T+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+o.encoding+")"),l(">>"),l(">>"),l("endobj"),o.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+_+" 0 R"),l("/BaseFont /"+nm(o.fontName)),l("/Encoding /"+o.encoding),l("/DescendantFonts ["+k+" 0 R]"),l(">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(i){var o=i.font,l=i.out,u=i.newObject,d=i.putStream;if(o.metadata instanceof t.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var h=o.metadata.rawData,m="",g=0;g<h.length;g++)m+=String.fromCharCode(h[g]);var b=u();d({data:m,addLength1:!0,objectId:b}),l("endobj");var y=u();d({data:n(o.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var _=u();l("<<"),l("/Descent "+o.metadata.decender),l("/CapHeight "+o.metadata.capHeight),l("/StemV "+o.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+b+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(o.metadata.bbox)),l("/FontName /"+nm(o.fontName)),l("/ItalicAngle "+o.metadata.italicAngle),l("/Ascent "+o.metadata.ascender),l(">>"),l("endobj"),o.objectNumber=u();for(var T=0;T<o.metadata.hmtx.widths.length;T++)o.metadata.hmtx.widths[T]=parseInt(o.metadata.hmtx.widths[T]*(1e3/o.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+nm(o.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),l("endobj"),o.isAlreadyPutted=!0}})(a)}]);var s=function(a){var i,o=a.text||"",l=a.x,u=a.y,d=a.options||{},h=a.mutex||{},m=h.pdfEscape,g=h.activeFontKey,b=h.fonts,y=g,_="",T=0,k="",D=b[y].encoding;if(b[y].encoding!=="Identity-H")return{text:o,x:l,y:u,options:d,mutex:h};for(k=o,y=g,Array.isArray(o)&&(k=o[0]),T=0;T<k.length;T+=1)b[y].metadata.hasOwnProperty("cmap")&&(i=b[y].metadata.cmap.unicode.codeMap[k[T].charCodeAt(0)]),i||k[T].charCodeAt(0)<256&&b[y].metadata.hasOwnProperty("Unicode")?_+=k[T]:_+="";var M="";return parseInt(y.slice(1))<14||D==="WinAnsiEncoding"?M=m(_,y).split("").map(function(P){return P.charCodeAt(0).toString(16)}).join(""):D==="Identity-H"&&(M=r(_,b[y])),h.isHex=!0,{text:M,x:l,y:u,options:d,mutex:h}};e.events.push(["postProcessText",function(a){var i=a.text||"",o=[],l={text:i,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(i)){var u=0;for(u=0;u<i.length;u+=1)Array.isArray(i[u])&&i[u].length===3?o.push([s(Object.assign({},l,{text:i[u][0]})).text,i[u][1],i[u][2]]):o.push(s(Object.assign({},l,{text:i[u]})).text);a.text=o}else a.text=s(Object.assign({},l,{text:i})).text}])}(lr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(lr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,a,i,o,l,u,d,h=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,D=0;this.__bidiEngine__={};var M=function(R){var F=R.charCodeAt(),Q=F>>8,H=y[Q];return H!==void 0?h[256*H+(255&F)]:Q===252||Q===253?"AL":T.test(Q)?"L":Q===8?"R":"N"},P=function(R){for(var F,Q=0;Q<R.length;Q++){if((F=M(R.charAt(Q)))==="L")return!1;if(F==="R")return!0}return!1},L=function(R,F,Q,H){var ne,J,re,G,q=F[H];switch(q){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(q="AN");break;case"AL":k=!0,q="R";break;case"WS":q="N";break;case"CS":H<1||H+1>=F.length||(ne=Q[H-1])!=="EN"&&ne!=="AN"||(J=F[H+1])!=="EN"&&J!=="AN"?q="N":k&&(J="AN"),q=J===ne?J:"N";break;case"ES":q=(ne=H>0?Q[H-1]:"B")==="EN"&&H+1<F.length&&F[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&Q[H-1]==="EN"){q="EN";break}if(k){q="N";break}for(re=H+1,G=F.length;re<G&&F[re]==="ET";)re++;q=re<G&&F[re]==="EN"?"EN":"N";break;case"NSM":if(i&&!o){for(G=F.length,re=H+1;re<G&&F[re]==="NSM";)re++;if(re<G){var W=R[H],ie=W>=1425&&W<=2303||W===64286;if(ne=F[re],ie&&(ne==="R"||ne==="AL")){q="R";break}}}q=H<1||(ne=F[H-1])==="B"?"N":Q[H-1];break;case"B":k=!1,s=!0,q=D;break;case"S":a=!0,q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":q="N"}return q},C=function(R,F,Q){var H=R.split("");return Q&&E(H,Q,{hiLevel:D}),H.reverse(),F&&F.reverse(),H.join("")},E=function(R,F,Q){var H,ne,J,re,G,q=-1,W=R.length,ie=0,j=[],Y=D?g:m,ee=[];for(k=!1,s=!1,a=!1,ne=0;ne<W;ne++)ee[ne]=M(R[ne]);for(J=0;J<W;J++){if(G=ie,j[J]=L(R,ee,j,J),H=240&(ie=Y[G][b[j[J]]]),ie&=15,F[J]=re=Y[ie][5],H>0)if(H===16){for(ne=q;ne<J;ne++)F[ne]=1;q=-1}else q=-1;if(Y[ie][6])q===-1&&(q=J);else if(q>-1){for(ne=q;ne<J;ne++)F[ne]=re;q=-1}ee[J]==="B"&&(F[J]=0),Q.hiLevel|=re}a&&function(te,ce,be){for(var he=0;he<be;he++)if(te[he]==="S"){ce[he]=D;for(var fe=he-1;fe>=0&&te[fe]==="WS";fe--)ce[fe]=D}}(ee,F,W)},B=function(R,F,Q,H,ne){if(!(ne.hiLevel<R)){if(R===1&&D===1&&!s)return F.reverse(),void(Q&&Q.reverse());for(var J,re,G,q,W=F.length,ie=0;ie<W;){if(H[ie]>=R){for(G=ie+1;G<W&&H[G]>=R;)G++;for(q=ie,re=G-1;q<re;q++,re--)J=F[q],F[q]=F[re],F[re]=J,Q&&(J=Q[q],Q[q]=Q[re],Q[re]=J);ie=G}ie++}}},O=function(R,F,Q){var H=R.split(""),ne={hiLevel:D};return Q||(Q=[]),E(H,Q,ne),function(J,re,G){if(G.hiLevel!==0&&d)for(var q,W=0;W<J.length;W++)re[W]===1&&(q=_.indexOf(J[W]))>=0&&(J[W]=_[q+1])}(H,Q,ne),B(2,H,F,Q,ne),B(1,H,F,Q,ne),H.join("")};return this.__bidiEngine__.doBidiReorder=function(R,F,Q){if(function(ne,J){if(J)for(var re=0;re<ne.length;re++)J[re]=re;o===void 0&&(o=P(ne)),u===void 0&&(u=P(ne))}(R,F),i||!l||u)if(i&&l&&o^u)D=o?1:0,R=C(R,F,Q);else if(!i&&l&&u)D=o?1:0,R=O(R,F,Q),R=C(R,F);else if(!i||o||l||u){if(i&&!l&&o^u)R=C(R,F),o?(D=0,R=O(R,F,Q)):(D=1,R=O(R,F,Q),R=C(R,F));else if(i&&o&&!l&&u)D=1,R=O(R,F,Q),R=C(R,F);else if(!i&&!l&&o^u){var H=d;o?(D=1,R=O(R,F,Q),D=0,d=!1,R=O(R,F,Q),d=H):(D=0,R=O(R,F,Q),R=C(R,F),D=1,d=!1,R=O(R,F,Q),d=H,R=C(R,F))}}else D=0,R=O(R,F,Q);else D=o?1:0,R=O(R,F,Q);return R},this.__bidiEngine__.setOptions=function(R){R&&(i=R.isInputVisual,l=R.isOutputVisual,o=R.isInputRtl,u=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text,a=(n.x,n.y,n.options||{}),i=(n.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var o=0;for(i=[],o=0;o<s.length;o+=1)Object.prototype.toString.call(s[o])==="[object Array]"?i.push([r.doBidiReorder(s[o][0]),s[o][1],s[o][2]]):i.push([r.doBidiReorder(s[o])]);n.text=i}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(lr),lr.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new bf(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Jle(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new Mle(this.contents),this.head=new jle(this),this.name=new zle(this),this.cmap=new DP(this),this.toUnicode={},this.hhea=new Ole(this),this.maxp=new Gle(this),this.hmtx=new qle(this),this.post=new Hle(this),this.os2=new Qle(this),this.loca=new Yle(this),this.glyf=new Kle(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var i,o,l,u;for(u=[],i=0,o=(l=this.bbox).length;i<o;i++)e=l[i],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,a,i,o;for(i=0,a=0,o=(e=""+e).length;0<=o?a<o:a>o;a=0<=o?++a:--a)s=e.charCodeAt(a),i+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return i*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var Mc,bf=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,a,i,o,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^a)+65536*(255^i)+256*(255^o)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*a+65536*i+256*o+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,a;for(a=[],n=0,s=e.length;n<s;n++)r=e[n],a.push(this.writeByte(r));return a},t}(),Mle=function(){var t;function e(r){var n,s,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,a,i,o,l,u,d,h,m,g,b,y;for(y in g=Object.keys(r).length,l=Math.log(2),h=16*Math.floor(Math.log(g)/l),i=Math.floor(h/l),d=16*g-h,(s=new bf).writeInt(this.scalarType),s.writeShort(g),s.writeShort(h),s.writeShort(i),s.writeShort(d),a=16*g,u=s.pos+a,o=null,b=[],r)for(m=r[y],s.writeString(y),s.writeInt(t(m)),s.writeInt(u),s.writeInt(m.length),b=b.concat(m),y==="head"&&(o=u),u+=m.length;u%4;)b.push(0),u++;return s.write(b),n=2981146554-t(s.data),s.pos=o+8,s.writeUInt32(n),s.data},t=function(r){var n,s,a,i;for(r=RP.call(r);r.length%4;)r.push(0);for(a=new bf(r),s=0,n=0,i=r.length;n<i;n=n+=4)s+=a.readUInt32();return 4294967295&s},e}(),Ple={}.hasOwnProperty,Pu=function(t,e){for(var r in e)Ple.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};Mc=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var jle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pu(e,Mc),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var n;return(n=new bf).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},e}(),f6=function(){function t(e,r){var n,s,a,i,o,l,u,d,h,m,g,b,y,_,T,k,D;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),m=g/2,e.pos+=6,a=function(){var M,P;for(P=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)P.push(e.readUInt16());return P}(),e.pos+=2,y=function(){var M,P;for(P=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)P.push(e.readUInt16());return P}(),u=function(){var M,P;for(P=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)P.push(e.readUInt16());return P}(),d=function(){var M,P;for(P=[],l=M=0;0<=m?M<m:M>m;l=0<=m?++M:--M)P.push(e.readUInt16());return P}(),s=(this.length-e.pos+this.offset)/2,o=function(){var M,P;for(P=[],l=M=0;0<=s?M<s:M>s;l=0<=s?++M:--M)P.push(e.readUInt16());return P}(),l=T=0,D=a.length;T<D;l=++T)for(_=a[l],n=k=b=y[l];b<=_?k<=_:k>=_;n=b<=_?++k:--k)d[l]===0?i=n+u[l]:(i=o[d[l]/2+(n-b)-(m-l)]||0)!==0&&(i+=u[l]),this.codeMap[n]=65535&i}e.pos=h}return t.encode=function(e,r){var n,s,a,i,o,l,u,d,h,m,g,b,y,_,T,k,D,M,P,L,C,E,B,O,R,F,Q,H,ne,J,re,G,q,W,ie,j,Y,ee,te,ce,be,he,fe,ge,de,oe;switch(H=new bf,i=Object.keys(e).sort(function(Ue,tt){return Ue-tt}),r){case"macroman":for(y=0,_=function(){var Ue=[];for(b=0;b<256;++b)Ue.push(0);return Ue}(),k={0:0},a={},ne=0,q=i.length;ne<q;ne++)k[fe=e[s=i[ne]]]==null&&(k[fe]=++y),a[s]={old:e[s],new:k[e[s]]},_[s]=k[e[s]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(_),{charMap:a,subtable:H.data,maxGlyphID:y+1};case"unicode":for(F=[],h=[],D=0,k={},n={},T=u=null,J=0,W=i.length;J<W;J++)k[P=e[s=i[J]]]==null&&(k[P]=++D),n[s]={old:P,new:k[P]},o=k[P]-s,T!=null&&o===u||(T&&h.push(T),F.push(s),u=o),T=s;for(T&&h.push(T),h.push(65535),F.push(65535),O=2*(B=F.length),E=2*Math.pow(Math.log(B)/Math.LN2,2),m=Math.log(E/2)/Math.LN2,C=2*B-E,l=[],L=[],g=[],b=re=0,ie=F.length;re<ie;b=++re){if(R=F[b],d=h[b],R===65535){l.push(0),L.push(0);break}if(R-(Q=n[R].new)>=32768)for(l.push(0),L.push(2*(g.length+B-b)),s=G=R;R<=d?G<=d:G>=d;s=R<=d?++G:--G)g.push(n[s].new);else l.push(Q-R),L.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*B+2*g.length),H.writeUInt16(0),H.writeUInt16(O),H.writeUInt16(E),H.writeUInt16(m),H.writeUInt16(C),be=0,j=h.length;be<j;be++)s=h[be],H.writeUInt16(s);for(H.writeUInt16(0),he=0,Y=F.length;he<Y;he++)s=F[he],H.writeUInt16(s);for(ge=0,ee=l.length;ge<ee;ge++)o=l[ge],H.writeUInt16(o);for(de=0,te=L.length;de<te;de++)M=L[de],H.writeUInt16(M);for(oe=0,ce=g.length;oe<ce;oe++)y=g[oe],H.writeUInt16(y);return{charMap:n,subtable:H.data,maxGlyphID:D+1}}},t}(),DP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pu(e,Mc),e.prototype.tag="cmap",e.prototype.parse=function(r){var n,s,a;for(r.pos=this.offset,this.version=r.readUInt16(),a=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)n=new f6(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(r,n){var s,a;return n==null&&(n="macroman"),s=f6.encode(r,n),(a=new bf).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},e}(),Ole=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pu(e,Mc),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e}(),Qle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pu(e,Mc),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e}(),Hle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pu(e,Mc),e.prototype.tag="post",e.prototype.parse=function(r){var n,s,a;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var i;for(s=r.readUInt16(),this.glyphNameIndex=[],i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],a=[];r.pos<this.offset+this.length;)n=r.readByte(),a.push(this.names.push(r.readString(n)));return a;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(r.readUInt32());return u}).call(this)}},e}(),Vle=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pu(e,Mc),e.prototype.tag="name",e.prototype.parse=function(r){var n,s,a,i,o,l,u,d,h,m,g;for(r.pos=this.offset,r.readShort(),n=r.readShort(),l=r.readShort(),s=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+l+r.readShort()});for(u={},i=h=0,m=s.length;h<m;i=++h)a=s[i],r.pos=a.offset,d=r.readString(a.length),o=new Vle(d,a),u[g=a.nameID]==null&&(u[g]=[]),u[a.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),Gle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pu(e,Mc),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e}(),qle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pu(e,Mc),e.prototype.tag="hmtx",e.prototype.parse=function(r){var n,s,a,i,o,l,u;for(r.pos=this.offset,this.metrics=[],n=0,l=this.file.hhea.numberOfMetrics;0<=l?n<l:n>l;n=0<=l?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,h;for(h=[],n=d=0;0<=a?d<a:d>a;n=0<=a?++d:--d)h.push(r.readInt16());return h}(),this.widths=(function(){var d,h,m,g;for(g=[],d=0,h=(m=this.metrics).length;d<h;d++)i=m[d],g.push(i.advance);return g}).call(this),s=this.widths[this.widths.length-1],u=[],n=o=0;0<=a?o<a:o>a;n=0<=a?++o:--o)u.push(this.widths.push(s));return u},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e}(),RP=[].slice,Kle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pu(e,Mc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var n,s,a,i,o,l,u,d,h,m;return r in this.cache?this.cache[r]:(i=this.file.loca,n=this.file.contents,s=i.indexOf(r),(a=i.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,o=(l=new bf(n.read(a))).readShort(),d=l.readShort(),m=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[r]=o===-1?new Wle(l,d,m,u,h):new $le(l,o,d,m,u,h),this.cache[r]))},e.prototype.encode=function(r,n,s){var a,i,o,l,u;for(o=[],i=[],l=0,u=n.length;l<u;l++)a=r[n[l]],i.push(o.length),a&&(o=o.concat(a.encode(s)));return i.push(o.length),{table:o,offsets:i}},e}(),$le=function(){function t(e,r,n,s,a,i){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=a,this.yMax=i,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),Wle=function(){function t(e,r,n,s,a){var i,o;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],i=this.raw;o=i.readShort(),this.glyphOffsets.push(i.pos),this.glyphIDs.push(i.readUInt16()),32&o;)i.pos+=1&o?4:2,128&o?i.pos+=8:64&o?i.pos+=4:8&o&&(i.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new bf(RP.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),Yle=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Pu(e,Mc),e.prototype.tag="loca",e.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=2)i.push(2*r.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],s=0,a=this.length;s<a;s+=4)i.push(r.readUInt32());return i}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<s.length;++o)if(s[o]=a,i<n.length&&n[i]==o){++i,s[o]=a;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(a+=u)}for(var d=new Array(4*s.length),h=0;h<s.length;++h)d[4*h+3]=255&s[h],d[4*h+2]=(65280&s[h])>>8,d[4*h+1]=(16711680&s[h])>>16,d[4*h]=(4278190080&s[h])>>24;return d},e}(),Jle=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,a;for(r in s=this.font.cmap.tables[0].codeMap,e={},a=this.subset)n=a[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,a,i,o,l;for(s={},i=0,o=e.length;i<o;i++)s[a=e[i]]=this.font.glyf.glyphFor(a);for(a in r=[],s)(n=s[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in l=this.glyphsFor(r))n=l[a],s[a]=n;return s},t.prototype.encode=function(e,r){var n,s,a,i,o,l,u,d,h,m,g,b,y,_,T;for(s in n=DP.encode(this.generateCmap(),"unicode"),i=this.glyphsFor(e),g={0:0},T=n.charMap)g[(l=T[s]).old]=l.new;for(b in m=n.maxGlyphID,i)b in g||(g[b]=m++);return d=function(k){var D,M;for(D in M={},k)M[k[D]]=D;return M}(g),h=Object.keys(d).sort(function(k,D){return k-D}),y=function(){var k,D,M;for(M=[],k=0,D=h.length;k<D;k++)o=h[k],M.push(d[o]);return M}(),a=this.font.glyf.encode(i,y,g),u=this.font.loca.encode(a.offsets,y),_={cmap:this.font.cmap.raw(),glyf:a.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},t}();lr.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,a,i;if(Array.isArray(r))return"["+function(){var o,l,u;for(u=[],o=0,l=r.length;o<l;o++)n=r[o],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in a=["<<"],r)i=r[s],a.push("/"+s+" "+e.convert(i));return a.push(">>"),a.join(`
`)}return""+r},e}();function LP(t,e,r,n,s){n=n||{};var a=1.15,i=s.internal.scaleFactor,o=s.internal.getFontSize()/i,l=s.getLineHeightFactor?s.getLineHeightFactor():a,u=o*l,d=/\r\n|\r|\n/g,h="",m=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(h=typeof t=="string"?t.split(d):t,m=h.length||1),r+=o*(2-a),n.valign==="middle"?r-=m/2*u:n.valign==="bottom"&&(r-=m*u),n.halign==="center"||n.halign==="right"){var g=o;if(n.halign==="center"&&(g*=.5),h&&m>=1){for(var b=0;b<h.length;b++)s.text(h[b],e-s.getStringUnitWidth(h[b])*g,r),r+=u;return s}e-=s.getStringUnitWidth(t)*g}return n.halign==="justify"?s.text(t,e,r,{maxWidth:n.maxWidth||100,align:"justify"}):s.text(t,e,r),s}var h6={},Em=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=e:h6=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,r){var n,s,a;r===void 0&&(r=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(e.font&&(l=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(l,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!r){var d=t.unifyColor(e.fillColor);d&&(n=this.jsPDFDocument).setFillColor.apply(n,d),d=t.unifyColor(e.textColor),d&&(s=this.jsPDFDocument).setTextColor.apply(s,d),d=t.unifyColor(e.lineColor),d&&(a=this.jsPDFDocument).setDrawColor.apply(a,d),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,r,n){return this.jsPDFDocument.splitTextToSize(e,r,n)},t.prototype.rect=function(e,r,n,s,a){return this.jsPDFDocument.rect(e,r,n,s,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return h6||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),_S=function(t,e){return _S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},_S(t,e)};function UP(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_S(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var MP=function(t){UP(e,t);function e(r){var n=t.call(this)||this;return n._element=r,n}return e}(Array);function Xle(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function Zle(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function F2(t,e,r){r.applyStyles(e,!0);var n=Array.isArray(t)?t:[t],s=n.map(function(a){return r.getTextWidth(a)}).reduce(function(a,i){return Math.max(a,i)},0);return s}function PP(t,e,r,n){var s=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:s,lineColor:a});var i=jP(s,!1);i&&t.rect(r.x,r.y,e.getWidth(t.pageSize().width),n.y-r.y,i)}function jP(t,e){var r=t>0,n=e||e===0;return r&&n?"DF":r?"S":n?"F":null}function tb(t,e){var r,n,s,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(r=t.left)!==null&&r!==void 0?r:e,top:(n=t.top)!==null&&n!==void 0?n:e,right:(s=t.right)!==null&&s!==void 0?s:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function OP(t,e){var r=tb(e.settings.margin,0);return t.pageSize().width-(r.left+r.right)}function ece(t,e,r,n,s){var a={},i=1.3333333333333333,o=_E(e,function(D){return s.getComputedStyle(D).backgroundColor});o!=null&&(a.fillColor=o);var l=_E(e,function(D){return s.getComputedStyle(D).color});l!=null&&(a.textColor=l);var u=rce(n,r);u&&(a.cellPadding=u);var d="borderTopColor",h=i*r,m=n.borderTopWidth;if(n.borderBottomWidth===m&&n.borderRightWidth===m&&n.borderLeftWidth===m){var g=(parseFloat(m)||0)/h;g&&(a.lineWidth=g)}else a.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/h,right:(parseFloat(n.borderRightWidth)||0)/h,bottom:(parseFloat(n.borderBottomWidth)||0)/h,left:(parseFloat(n.borderLeftWidth)||0)/h},a.lineWidth.top||(a.lineWidth.right?d="borderRightColor":a.lineWidth.bottom?d="borderBottomColor":a.lineWidth.left&&(d="borderLeftColor"));var b=_E(e,function(D){return s.getComputedStyle(D)[d]});b!=null&&(a.lineColor=b);var y=["left","right","center","justify"];y.indexOf(n.textAlign)!==-1&&(a.halign=n.textAlign),y=["middle","bottom","top"],y.indexOf(n.verticalAlign)!==-1&&(a.valign=n.verticalAlign);var _=parseInt(n.fontSize||"");isNaN(_)||(a.fontSize=_/i);var T=tce(n);T&&(a.fontStyle=T);var k=(n.fontFamily||"").toLowerCase();return t.indexOf(k)!==-1&&(a.font=k),a}function tce(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function _E(t,e){var r=QP(t,e);if(!r)return null;var n=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var s=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],a=parseInt(n[4]);return a===0||isNaN(s[0])||isNaN(s[1])||isNaN(s[2])?null:s}function QP(t,e){var r=e(t);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?t.parentElement==null?null:QP(t.parentElement,e):r}function rce(t,e){var r=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],n=96/(72/e),s=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=r.map(function(o){return parseInt(o||"0")/n}),i=tb(a,0);return s>i.top&&(i.top=s),s>i.bottom&&(i.bottom=s),i}function HP(t,e,r,n,s){var a,i;n===void 0&&(n=!1),s===void 0&&(s=!1);var o;typeof e=="string"?o=r.document.querySelector(e):o=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),d=[],h=[],m=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:d,body:h,foot:m};for(var g=0;g<o.rows.length;g++){var b=o.rows[g],y=(i=(a=b==null?void 0:b.parentElement)===null||a===void 0?void 0:a.tagName)===null||i===void 0?void 0:i.toLowerCase(),_=nce(l,u,r,b,n,s);_&&(y==="thead"?d.push(_):y==="tfoot"?m.push(_):h.push(_))}return{head:d,body:h,foot:m}}function nce(t,e,r,n,s,a){for(var i=new MP(n),o=0;o<n.cells.length;o++){var l=n.cells[o],u=r.getComputedStyle(l);if(s||u.display!=="none"){var d=void 0;a&&(d=ece(t,l,e,u,r)),i.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:d,_element:l,content:sce(l)})}}var h=r.getComputedStyle(n);if(i.length>0&&(s||h.display!=="none"))return i}function sce(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),e.innerText||e.textContent||""}function ace(t,e,r){for(var n=0,s=[t,e,r];n<s.length;n++){var a=s[n];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function _A(t,e,r,n,s){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!=null)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(a[l]=o[l])}return a}function VP(t,e){var r=new Em(t),n=r.getDocumentOptions(),s=r.getGlobalOptions();ace(s,n,e);var a=_A({},s,n,e),i;typeof window<"u"&&(i=window);var o=ice(s,n,e),l=oce(s,n,e),u=lce(r,a),d=uce(r,a,i);return{id:e.tableId,content:d,hooks:l,styles:o,settings:u}}function ice(t,e,r){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(l){if(l==="columnStyles"){var u=t[l],d=e[l],h=r[l];n.columnStyles=_A({},u,d,h)}else{var m=[t,e,r],g=m.map(function(b){return b[l]||{}});n[l]=_A({},g[0],g[1],g[2])}},a=0,i=Object.keys(n);a<i.length;a++){var o=i[a];s(o)}return n}function oce(t,e,r){for(var n=[t,e,r],s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,i=n;a<i.length;a++){var o=i[a];o.didParseCell&&s.didParseCell.push(o.didParseCell),o.willDrawCell&&s.willDrawCell.push(o.willDrawCell),o.didDrawCell&&s.didDrawCell.push(o.didDrawCell),o.willDrawPage&&s.willDrawPage.push(o.willDrawPage),o.didDrawPage&&s.didDrawPage.push(o.didDrawPage)}return s}function lce(t,e){var r,n,s,a,i,o,l,u,d,h,m,g,b=tb(e.margin,40/t.scaleFactor()),y=(r=cce(t,e.startY))!==null&&r!==void 0?r:b.top,_;e.showFoot===!0?_="everyPage":e.showFoot===!1?_="never":_=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var T;e.showHead===!0?T="everyPage":e.showHead===!1?T="never":T=(s=e.showHead)!==null&&s!==void 0?s:"everyPage";var k=(a=e.useCss)!==null&&a!==void 0?a:!1,D=e.theme||(k?"plain":"striped"),M=!!e.horizontalPageBreak,P=(i=e.horizontalPageBreakRepeat)!==null&&i!==void 0?i:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:k,theme:D,startY:y,margin:b,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(d=e.tableWidth)!==null&&d!==void 0?d:"auto",showHead:T,showFoot:_,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(m=e.tableLineColor)!==null&&m!==void 0?m:200,horizontalPageBreak:M,horizontalPageBreakRepeat:P,horizontalPageBreakBehaviour:(g=e.horizontalPageBreakBehaviour)!==null&&g!==void 0?g:"afterAllRows"}}function cce(t,e){var r=t.getLastAutoTable(),n=t.scaleFactor(),s=t.pageNumber(),a=!1;if(r&&r.startPageNumber){var i=r.startPageNumber+r.pageNumber-1;a=i===s}return typeof e=="number"?e:(e==null||e===!1)&&a&&(r==null?void 0:r.finalY)!=null?r.finalY+20/n:null}function uce(t,e,r){var n=e.head||[],s=e.body||[],a=e.foot||[];if(e.html){var i=e.includeHiddenHtml;if(r){var o=HP(t,e.html,r,i,e.useCss)||{};n=o.head||n,s=o.body||n,a=o.foot||n}else console.error("Cannot parse html in non browser environment")}var l=e.columns||Ace(n,s,a);return{columns:l,head:n,body:s,foot:a}}function Ace(t,e,r){var n=t[0]||e[0]||r[0]||[],s=[];return Object.keys(n).filter(function(a){return a!=="_element"}).forEach(function(a){var i=1,o;Array.isArray(n)?o=n[parseInt(a)]:o=n[a],typeof o=="object"&&!Array.isArray(o)&&(i=(o==null?void 0:o.colSpan)||1);for(var l=0;l<i;l++){var u=void 0;Array.isArray(n)?u=s.length:u=a+(l>0?"_".concat(l):"");var d={dataKey:u};s.push(d)}}),s}var SS=function(){function t(e,r,n){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=n,this.doc=e.getDocument()}return t}(),dce=function(t){UP(e,t);function e(r,n,s,a,i,o){var l=t.call(this,r,n,o)||this;return l.cell=s,l.row=a,l.column=i,l.section=a.section,l}return e}(SS),fce=function(){function t(e,r){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(r,n){return r+n.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,r,n,s,a,i){for(var o=0,l=r;o<l.length;o++){var u=l[o],d=new dce(e,this,n,s,a,i),h=u(d)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,r){e.applyStyles(e.userStyles);for(var n=0,s=this.hooks.didDrawPage;n<s.length;n++){var a=s[n];a(new SS(e,this,r))}},t.prototype.callWillDrawPageHooks=function(e,r){for(var n=0,s=this.hooks.willDrawPage;n<s.length;n++){var a=s[n];a(new SS(e,this,r))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(s,a){return s+a.wrappedWidth},0);return r}else{var n=this.settings.margin;return e-n.left-n.right}},t}(),zP=function(){function t(e,r,n,s,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof MP&&(this.raw=e._element,this.element=e._element),this.index=r,this.section=n,this.cells=s,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var r=this;return e.reduce(function(n,s){var a;return Math.max(n,((a=r.cells[s.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var r=this;return e.filter(function(n){var s=r.cells[n.index];return s?s.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,r){return this.getMaxCellHeight(r)<=e},t.prototype.getMinimumRowHeight=function(e,r){var n=this;return e.reduce(function(s,a){var i=n.cells[a.index];if(!i)return 0;var o=r.getLineHeight(i.styles.fontSize),l=i.padding("vertical"),u=l+o;return u>s?u:s},0)},t}(),GP=function(){function t(e,r,n){var s;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=n,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(s=e.content)!==null&&s!==void 0?s:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var i=a!=null?""+a:"",o=/\r\n|\r|\n/g;this.text=i.split(o)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");e=this.y+r/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var s=this.width-this.padding("horizontal");n=this.x+s/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},t.prototype.getContentHeight=function(e,r){r===void 0&&(r=1.15);var n=Array.isArray(this.text)?this.text.length:1,s=this.styles.fontSize/e*r,a=n*s+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var r=tb(this.styles.cellPadding,0);return e==="vertical"?r.top+r.bottom:e==="horizontal"?r.left+r.right:r[e]},t}(),hce=function(){function t(e,r,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=r,this.index=n}return t.prototype.getMaxCustomCellWidth=function(e){for(var r=0,n=0,s=e.allRows();n<s.length;n++){var a=s[n],i=a.cells[this.index];i&&typeof i.styles.cellWidth=="number"&&(r=Math.max(r,i.styles.cellWidth))}return r},t}();function mce(t,e){pce(t,e);var r=[],n=0;e.columns.forEach(function(a){var i=a.getMaxCustomCellWidth(e);i?a.width=i:(a.width=a.wrappedWidth,r.push(a)),n+=a.width});var s=e.getWidth(t.pageSize().width)-n;s&&(s=TS(r,s,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),s&&(s=TS(r,s,function(a){return a.minWidth})),s=Math.abs(s),!e.settings.horizontalPageBreak&&s>.1/t.scaleFactor()&&(s=s<1?s:Math.round(s),console.warn("Of the table content, ".concat(s," units width could not fit page"))),xce(e),vce(e,t),gce(e)}function pce(t,e){var r=t.scaleFactor(),n=e.settings.horizontalPageBreak,s=OP(t,e);e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){var d=e.hooks.didParseCell;e.callCellHooks(t,d,u,a,l,null);var h=u.padding("horizontal");u.contentWidth=F2(u.text,u.styles,t)+h;var m=F2(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=m+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>s?(u.minWidth=s,u.wrappedWidth=s):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var g=10/r;u.minWidth=u.styles.minCellWidth||g,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(a){for(var i=0,o=e.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var d=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=d.cellWidth||d.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function TS(t,e,r){for(var n=e,s=t.reduce(function(g,b){return g+b.wrappedWidth},0),a=0;a<t.length;a++){var i=t[a],o=i.wrappedWidth/s,l=n*o,u=i.width+l,d=r(i),h=u<d?d:u;e-=h-i.width,i.width=h}if(e=Math.round(e*1e10)/1e10,e){var m=t.filter(function(g){return e<0?g.width>r(g):!0});m.length&&(e=TS(m,e,r))}return e}function gce(t){for(var e={},r=1,n=t.allRows(),s=0;s<n.length;s++)for(var a=n[s],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=e[l.index];if(r>1)r--,delete a.cells[l.index];else if(u)u.cell.height+=a.height,r=u.cell.colSpan,delete a.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var d=a.cells[l.index];if(!d)continue;if(d.height=a.height,d.rowSpan>1){var h=n.length-s,m=d.rowSpan>h?h:d.rowSpan;e[l.index]={cell:d,left:m,row:a}}}}}function xce(t){for(var e=t.allRows(),r=0;r<e.length;r++)for(var n=e[r],s=null,a=0,i=0,o=0;o<t.columns.length;o++){var l=t.columns[o];if(i-=1,i>1&&t.columns[o+1])a+=l.width,delete n.cells[l.index];else if(s){var u=s;delete n.cells[l.index],s=null,u.width=l.width+a}else{var u=n.cells[l.index];if(!u)continue;if(i=u.colSpan,a=0,u.colSpan>1){s=u,a+=l.width;continue}u.width=l.width+a}}}function vce(t,e){for(var r={count:0,height:0},n=0,s=t.allRows();n<s.length;n++){for(var a=s[n],i=0,o=t.columns;i<o.length;i++){var l=o[i],u=a.cells[l.index];if(u){e.applyStyles(u.styles,!0);var d=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,d+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=m6(u.text,d,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=m6(u.text,d,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,d);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var m=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<m*u.rowSpan?r={height:m,count:u.rowSpan}:r&&r.count>0&&r.height>m&&(m=r.height),m>a.height&&(a.height=m)}}r.count--}}function m6(t,e,r,n,s){return t.map(function(a){return yce(a,e,r,n,s)})}function yce(t,e,r,n,s){var a=1e4*n.scaleFactor();if(e=Math.ceil(e*a)/a,e>=F2(t,r,n))return t;for(;e<F2(t+s,r,n)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+s}function qP(t,e){var r=new Em(t),n=wce(e,r.scaleFactor()),s=new fce(e,n);return mce(r,s),r.applyStyles(r.userStyles),s}function wce(t,e){var r=t.content,n=Cce(r.columns);if(r.head.length===0){var s=p6(n,"head");s&&r.head.push(s)}if(r.foot.length===0){var s=p6(n,"foot");s&&r.foot.push(s)}var a=t.settings.theme,i=t.styles;return{columns:n,head:SE("head",r.head,n,i,a,e),body:SE("body",r.body,n,i,a,e),foot:SE("foot",r.foot,n,i,a,e)}}function SE(t,e,r,n,s,a){var i={},o=e.map(function(l,u){for(var d=0,h={},m=0,g=0,b=0,y=r;b<y.length;b++){var _=y[b];if(i[_.index]==null||i[_.index].left===0)if(g===0){var T=void 0;Array.isArray(l)?T=l[_.index-m-d]:T=l[_.dataKey];var k={};typeof T=="object"&&!Array.isArray(T)&&(k=(T==null?void 0:T.styles)||{});var D=Ece(t,_,u,s,n,a,k),M=new GP(T,D,t);h[_.dataKey]=M,h[_.index]=M,g=M.colSpan-1,i[_.index]={left:M.rowSpan-1,times:g}}else g--,m++;else i[_.index].left--,g=i[_.index].times,d++}return new zP(l,u,t,h)});return o}function p6(t,e){var r={};return t.forEach(function(n){if(n.raw!=null){var s=bce(e,n.raw);s!=null&&(r[n.dataKey]=s)}}),Object.keys(r).length>0?r:null}function bce(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function Cce(t){return t.map(function(e,r){var n,s;return typeof e=="object"?s=(n=e.dataKey)!==null&&n!==void 0?n:r:s=r,new hce(s,e,r)})}function Ece(t,e,r,n,s,a,i){var o=Zle(n),l;t==="head"?l=s.headStyles:t==="body"?l=s.bodyStyles:t==="foot"&&(l=s.footStyles);var u=_A({},o.table,o[t],s.styles,l),d=s.columnStyles[e.dataKey]||s.columnStyles[e.index]||{},h=t==="body"?d:{},m=t==="body"&&r%2===0?_A({},o.alternateRow,s.alternateRowStyles):{},g=Xle(a),b=_A({},g,u,m,h);return _A(b,i)}function _ce(t,e,r){var n;r===void 0&&(r={});var s=OP(t,e),a=new Map,i=[],o=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(m){var g=e.columns.find(function(b){return b.dataKey===m||b.index===m});g&&!a.has(g.index)&&(a.set(g.index,!0),i.push(g.index),o.push(e.columns[g.index]),s-=g.wrappedWidth)});for(var u=!0,d=(n=r==null?void 0:r.start)!==null&&n!==void 0?n:0;d<e.columns.length;){if(a.has(d)){d++;continue}var h=e.columns[d].wrappedWidth;if(u||s>=h)u=!1,i.push(d),o.push(e.columns[d]),s-=h;else break;d++}return{colIndexes:i,columns:o,lastIndex:d-1}}function Sce(t,e){for(var r=[],n=0;n<e.columns.length;n++){var s=_ce(t,e,{start:n});s.columns.length&&(r.push(s),n=s.lastIndex)}return r}function KP(t,e){var r=e.settings,n=r.startY,s=r.margin,a={x:s.left,y:n},i=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+s.bottom+i;if(r.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(m,g){return m+g.height},0);o+=u}var d=new Em(t);(r.pageBreak==="always"||r.startY!=null&&o>d.pageSize().height)&&(WP(d),a.y=s.top),e.callWillDrawPageHooks(d,a);var h=_A({},a);e.startPageNumber=d.pageNumber(),r.horizontalPageBreak?Tce(d,e,h,a):(d.applyStyles(d.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(m){return PA(d,e,m,a,e.columns)}),d.applyStyles(d.userStyles),e.body.forEach(function(m,g){var b=g===e.body.length-1;D2(d,e,m,b,h,a,e.columns)}),d.applyStyles(d.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(m){return PA(d,e,m,a,e.columns)})),PP(d,e,h,a),e.callEndPageHooks(d,a),e.finalY=a.y,t.lastAutoTable=e,d.applyStyles(d.userStyles)}function Tce(t,e,r,n){var s=Sce(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")s.forEach(function(u,d){t.applyStyles(t.userStyles),d>0?$g(t,e,r,n,u.columns,!0):g6(t,e,n,u.columns),Nce(t,e,r,n,u.columns),TE(t,e,n,u.columns)});else for(var i=-1,o=s[0],l=function(){var u=i;if(o){t.applyStyles(t.userStyles);var d=o.columns;i>=0?$g(t,e,r,n,d,!0):g6(t,e,n,d),u=x6(t,e,i+1,n,d),TE(t,e,n,d)}var h=u-i;s.slice(1).forEach(function(m){t.applyStyles(t.userStyles),$g(t,e,r,n,m.columns,!0),x6(t,e,i+1,n,m.columns,h),TE(t,e,n,m.columns)}),i=u};i<e.body.length-1;)l()}function g6(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showHead==="firstPage"||s.showHead==="everyPage")&&e.head.forEach(function(a){return PA(t,e,a,r,n)})}function Nce(t,e,r,n,s){t.applyStyles(t.userStyles),e.body.forEach(function(a,i){var o=i===e.body.length-1;D2(t,e,a,o,r,n,s)})}function x6(t,e,r,n,s,a){t.applyStyles(t.userStyles),a=a??e.body.length;var i=Math.min(r+a,e.body.length),o=-1;return e.body.slice(r,i).forEach(function(l,u){var d=r+u===e.body.length-1,h=$P(t,e,d,n);l.canEntireRowFit(h,s)&&(PA(t,e,l,n,s),o=r+u)}),o}function TE(t,e,r,n){var s=e.settings;t.applyStyles(t.userStyles),(s.showFoot==="lastPage"||s.showFoot==="everyPage")&&e.foot.forEach(function(a){return PA(t,e,a,r,n)})}function Bce(t,e,r){var n=r.getLineHeight(t.styles.fontSize),s=t.padding("vertical"),a=Math.floor((e-s)/n);return Math.max(0,a)}function kce(t,e,r,n){var s={};t.spansMultiplePages=!0,t.height=0;for(var a=0,i=0,o=r.columns;i<o.length;i++){var l=o[i],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var d=new GP(u.raw,u.styles,u.section);d=_A(d,u),d.text=[];var h=Bce(u,e,n);u.text.length>h&&(d.text=u.text.splice(h,u.text.length));var m=n.scaleFactor(),g=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(m,g),u.contentHeight>=e&&(u.contentHeight=e,d.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),d.contentHeight=d.getContentHeight(m,g),d.contentHeight>a&&(a=d.contentHeight),s[l.index]=d}}var b=new zP(t.raw,-1,t.section,s,!0);b.height=a;for(var y=0,_=r.columns;y<_.length;y++){var l=_[y],d=b.cells[l.index];d&&(d.height=b.height);var u=t.cells[l.index];u&&(u.height=t.height)}return b}function Ice(t,e,r,n){var s=t.pageSize().height,a=n.settings.margin,i=a.top+a.bottom,o=s-i;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var l=e.getMinimumRowHeight(n.columns,t),u=l<r;if(l>o)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var d=e.hasRowSpan(n.columns),h=e.getMaxCellHeight(n.columns)>o;return h?(d&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(d||n.settings.rowPageBreak==="avoid")}function D2(t,e,r,n,s,a,i){var o=$P(t,e,n,a);if(r.canEntireRowFit(o,i))PA(t,e,r,a,i);else if(Ice(t,r,o,e)){var l=kce(r,o,e,t);PA(t,e,r,a,i),$g(t,e,s,a,i),D2(t,e,l,n,s,a,i)}else $g(t,e,s,a,i),D2(t,e,r,n,s,a,i)}function PA(t,e,r,n,s){n.x=e.settings.margin.left;for(var a=0,i=s;a<i.length;a++){var o=i[a],l=r.cells[o.index];if(!l){n.x+=o.width;continue}t.applyStyles(l.styles),l.x=n.x,l.y=n.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,r,o,n);if(u===!1){n.x+=o.width;continue}Fce(t,l,n);var d=l.getTextPos();LP(l.text,d.x,d.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,r,o,n),n.x+=o.width}n.y+=r.height}function Fce(t,e,r){var n=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof n.lineWidth=="number"){var s=jP(n.lineWidth,n.fillColor);s&&t.rect(e.x,r.y,e.width,e.height,s)}else typeof n.lineWidth=="object"&&(n.fillColor&&t.rect(e.x,r.y,e.width,e.height,"F"),Dce(t,e,r,n.lineWidth))}function Dce(t,e,r,n){var s,a,i,o;n.top&&(s=r.x,a=r.y,i=r.x+e.width,o=r.y,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),l(n.top,s,a,i,o)),n.bottom&&(s=r.x,a=r.y+e.height,i=r.x+e.width,o=r.y+e.height,n.right&&(i+=.5*n.right),n.left&&(s-=.5*n.left),l(n.bottom,s,a,i,o)),n.left&&(s=r.x,a=r.y,i=r.x,o=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.left,s,a,i,o)),n.right&&(s=r.x+e.width,a=r.y,i=r.x+e.width,o=r.y+e.height,n.top&&(a-=.5*n.top),n.bottom&&(o+=.5*n.bottom),l(n.right,s,a,i,o));function l(u,d,h,m,g){t.getDocument().setLineWidth(u),t.getDocument().line(d,h,m,g,"S")}}function $P(t,e,r,n){var s=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&r)&&(s+=e.getFootHeight(e.columns)),t.pageSize().height-n.y-s}function $g(t,e,r,n,s,a){s===void 0&&(s=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(o){return PA(t,e,o,n,s)}),e.callEndPageHooks(t,n);var i=e.settings.margin;PP(t,e,r,n),WP(t),e.pageNumber++,n.x=i.left,n.y=i.top,r.y=i.top,e.callWillDrawPageHooks(t,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return PA(t,e,o,n,s)}),t.applyStyles(t.userStyles))}function WP(t){var e=t.pageNumber();t.setPage(e+1);var r=t.pageNumber();return r===e?(t.addPage(),!0):!1}function Rce(t){t.API.autoTable=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],s=VP(this,n),a=qP(this,s);return KP(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,r,n,s){LP(e,r,n,s,this)},t.API.autoTableSetDefaults=function(e){return Em.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,r){Em.setDefaults(e,r)},t.API.autoTableHtmlToJson=function(e,r){var n;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var s=new Em(this),a=HP(s,e,window,r,!1),i=a.head,o=a.body,l=((n=i[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:l,rows:o,data:o}}}var NE;function il(t,e){var r=VP(t,e),n=qP(t,r);KP(t,n)}try{if(typeof window<"u"&&window){var v6=window,y6=v6.jsPDF||((NE=v6.jspdf)===null||NE===void 0?void 0:NE.jsPDF);y6&&Rce(y6)}}catch(t){console.error("Could not apply autoTable plugin",t)}const V4="evaluaciones_pruebas",z4="evaluaciones_rubricas_estaticas",G4="evaluaciones_rubricas_interactivas",Lce="usuarios",rb=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion}},Uce=t=>{const e=Yt(kt(vt,V4),Pr("fechaCreacion","desc"));return mr(e,n=>{t(n.docs.map(s=>rb(s)))},n=>{console.error("Error al suscribirse a las pruebas:",n),t([])})},Mce=async t=>{try{const{id:e,...r}=t,n=ur(vt,V4,e);await pi(n,{...r,fechaCreacion:or.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la prueba:",e),new Error("No se pudo guardar la prueba.")}},Pce=async t=>{try{await Ta(ur(vt,V4,t))}catch(e){throw console.error("Error al eliminar la prueba:",e),new Error("No se pudo eliminar la prueba.")}},jce=t=>{const e=Yt(kt(vt,z4),Pr("fechaCreacion","desc"));return mr(e,n=>{t(n.docs.map(s=>rb(s)))},n=>{console.error("Error al suscribirse a las rúbricas estáticas:",n),t([])})},Oce=async t=>{try{const{id:e,...r}=t,n=ur(vt,z4,e);await pi(n,{...r,fechaCreacion:or.fromDate(new Date(r.fechaCreacion))})}catch(e){throw console.error("Error al guardar la rúbrica estática:",e),new Error("No se pudo guardar la rúbrica.")}},Qce=async t=>{try{await Ta(ur(vt,z4,t))}catch(e){throw console.error("Error al eliminar la rúbrica estática:",e),new Error("No se pudo eliminar la rúbrica.")}},Hce=t=>{const e=Yt(kt(vt,G4));return mr(e,n=>{t(n.docs.map(s=>rb(s)))},n=>{console.error("Error al suscribirse a las rúbricas interactivas:",n),t([])})},Vce=async t=>{try{const{id:e,...r}=t,n=ur(vt,G4,e);await pi(n,r)}catch(e){throw console.error("Error al guardar la rúbrica interactiva:",e),new Error("No se pudo guardar la rúbrica interactiva.")}},zce=async t=>{try{return(await ps(kt(vt,G4),t)).id}catch(e){throw console.error("Error al crear la rúbrica interactiva:",e),new Error("No se pudo crear la rúbrica interactiva.")}},Gce=t=>{const e=Yt(kt(vt,Lce));return mr(e,n=>{t(n.docs.map(s=>rb(s)))},n=>{console.error("Error al suscribirse a los usuarios:",n),t([])})},qce=["Selección múltiple","Verdadero o Falso","Desarrollo","Términos pareados","Comprensión de lectura"],w6={"Selección múltiple":[5,10,15],"Verdadero o Falso":[5,10,15],"Términos pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de lectura":[1,2,3]},Jy=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Kce=({open:t})=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:t?c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59"}):c.jsxs(c.Fragment,{children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),$ce=({item:t,index:e,showAnswers:r})=>{const n=Z.useMemo(()=>t.tipo==="Términos pareados"?[...t.pares.map(s=>s.definicion)].sort(()=>Math.random()-.5):[],[t]);return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[e+1,". ",t.pregunta," (",t.puntaje," pts)"]}),t.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:t.habilidadBloom})]}),t.tipo==="Selección múltiple"&&c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:t.opciones.map((s,a)=>{const i=r&&a===t.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${i?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+a),") ",s]})]},a)})}),t.tipo==="Desarrollo"&&c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"}),t.tipo==="Verdadero o Falso"&&c.jsxs("div",{className:"mt-2 ml-4 flex items-center gap-4",children:[c.jsx("span",{children:"V ___ F ___"}),r&&c.jsxs("span",{className:"font-bold p-1 rounded bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-300",children:["Respuesta: ",t.respuestaCorrecta?"VERDADERO":"FALSO"]})]}),t.tipo==="Términos pareados"&&c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna A: Concepto"}),c.jsx("div",{className:"space-y-2",children:t.pares.map((s,a)=>c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700 p-3 rounded-lg min-h-[50px] flex items-center",children:[a+1,". ",s.concepto]},a))})]}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-bold text-center mb-2",children:"Columna B: Definición"}),c.jsx("div",{className:"space-y-2",children:n.map((s,a)=>c.jsx("div",{className:"bg-sky-100 dark:bg-sky-900/50 p-3 rounded-lg min-h-[50px] flex items-center",children:s},a))})]})]}),r&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/30 rounded-lg border border-green-200 dark:border-green-700",children:[c.jsx("h4",{className:"font-bold text-green-800 dark:text-green-200",children:"Respuestas Correctas:"}),c.jsx("ul",{className:"list-disc list-inside mt-2 text-sm text-slate-700 dark:text-slate-300",children:t.pares.map((s,a)=>c.jsxs("li",{children:[c.jsx("strong",{children:s.concepto})," → ",s.definicion]},a))})]})]}),t.tipo==="Comprensión de lectura"&&c.jsxs("div",{className:"ml-4 mt-2 space-y-4",children:[c.jsx("div",{className:"p-4 bg-slate-100 dark:bg-slate-700/50 rounded-md whitespace-pre-wrap",children:t.texto}),t.preguntas.map((s,a)=>{if(s.tipo==="Selección múltiple"){const i=s;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"ml-4 mt-2 space-y-2",children:i.opciones.map((o,l)=>{const u=r&&l===i.respuestaCorrecta;return c.jsxs("div",{className:`flex items-center gap-2 p-1 rounded ${u?"bg-green-100 dark:bg-green-900/50":""}`,children:[c.jsx("div",{className:"w-5 h-5 border rounded-full"}),c.jsxs("span",{children:[String.fromCharCode(65+l),") ",o]})]},l)})})]},s.id)}if(s.tipo==="Desarrollo"){const i=s;return c.jsxs("div",{className:"pt-2",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("p",{className:"font-semibold flex-grow pr-4",children:[a+1,". ",i.pregunta," (",i.puntaje," pts)"]}),i.habilidadBloom&&c.jsx("span",{className:"flex-shrink-0 text-xs font-semibold bg-slate-200 text-slate-700 dark:bg-slate-700 dark:text-slate-300 px-2 py-1 rounded-full",children:i.habilidadBloom})]}),c.jsx("div",{className:"mt-2 p-2 border rounded-md min-h-[96px] bg-slate-50 dark:bg-slate-700/50"})]},s.id)}return null})]})]},t.id)},Wce=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState(null),[s,a]=Z.useState(!1),[i,o]=Z.useState(!1),[l,u]=Z.useState(null),[d,h]=Z.useState(!1),m={nombre:"",asignatura:ol[0],nivel:_2[0],contenido:"",tiposActividad:{},dificultad:"Intermedio",isNee:!1,selectedNee:[]},[g,b]=Z.useState(m);Z.useEffect(()=>{const C=Uce(e);return()=>C()},[]);const y=C=>{const{name:E,value:B}=C.target;b(O=>({...O,[E]:B}))},_=C=>{b(E=>{const B={...E.tiposActividad};return B[C]?delete B[C]:B[C]=w6[C][0],{...E,tiposActividad:B}})},T=(C,E)=>{b(B=>({...B,tiposActividad:{...B.tiposActividad,[C]:E}}))},k=C=>{b(E=>{const B=E.selectedNee.includes(C)?E.selectedNee.filter(O=>O!==C):[...E.selectedNee,C];return{...E,selectedNee:B}})},D=async C=>{if(C.preventDefault(),!g.nombre.trim()||!g.contenido.trim()||Object.keys(g.tiposActividad).length===0){u("Nombre, Contenido y al menos un tipo de actividad son obligatorios.");return}a(!0),u(null);const E=Object.entries(g.tiposActividad).map(([R,F])=>`- ${F} ítem(s) de tipo '${R}'`).join(`
`),B=g.isNee&&g.selectedNee.length>0?`
            **Adaptación CRÍTICA para Necesidades Educativas Especiales (NEE):**
            Adapta esta prueba para estudiantes con las siguientes características: ${g.selectedNee.join(", ")}.
            Esto implica las siguientes modificaciones OBLIGATORIAS:
            - Usa un lenguaje claro, simple y directo en todas las preguntas e instrucciones.
            - Evita preguntas con doble negación o estructuras gramaticales complejas.
            - En preguntas de desarrollo, desglosa la pregunta en partes más pequeñas si es posible.
            - Para 'Comprensión de Lectura', usa textos más cortos (100-150 palabras) y con vocabulario accesible.
            - Para 'Selección Múltiple', asegúrate de que los distractores sean claramente incorrectos y no ambiguos.`:"",O=`
            Eres un experto en evaluación educativa para la educación media en Chile.
            Genera una prueba o guía de trabajo completa en formato JSON estructurado.
            
            Información base:
            - Nombre de la prueba: ${g.nombre}
            - Asignatura: ${g.asignatura}
            - Nivel: ${g.nivel}
            - Contenido a evaluar: "${g.contenido}"
            - Tipos y cantidad de ítems solicitados:
              ${E}
            - Nivel de Dificultad General: ${g.dificultad}. 'Fácil' implica preguntas directas y de recuerdo. 'Intermedio' incluye aplicación y análisis simple. 'Avanzado' requiere síntesis, evaluación y resolución de problemas complejos.
            
            ${B}

            Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json. El objeto debe contener:
            1. 'objetivo': Un objetivo de aprendizaje claro para la evaluación.
            2. 'instruccionesGenerales': Instrucciones claras para el estudiante.
            3. 'actividades': Un array de objetos, donde cada objeto es una actividad por cada tipo de ítem solicitado. Cada actividad debe tener:
               - 'id': Un UUID generado por ti.
               - 'titulo': Un título descriptivo (ej: "Actividad 1: Selección Múltiple").
               - 'instrucciones': Instrucciones para esa actividad específica.
               - 'items': Un array de preguntas con la cantidad exacta solicitada. Cada pregunta (item) debe tener:
                   - 'id': Un UUID generado por ti.
                   - 'tipo': El tipo de ítem.
                   - 'pregunta': El enunciado de la pregunta.
                   - 'puntaje': Un puntaje numérico.
                   - 'habilidadBloom': La habilidad principal de la Taxonomía de Bloom que se trabaja (ej: Analizar, Crear, Evaluar).
                   - Campos adicionales según el tipo:
                       - Para 'Selección múltiple': 'opciones' (array de EXACTAMENTE 4 strings sin la letra de la alternativa) y 'respuestaCorrecta' (índice numérico de la respuesta correcta, de 0 a 3).
                       - Para 'Verdadero o Falso': 'respuestaCorrecta' (booleano).
                       - Para 'Términos pareados': 'pares' (array de objetos con 'concepto' y 'definicion').
                       - Para 'Comprensión de lectura': 'texto' (un string que DEBE contener un texto original y coherente de 150 a 250 palabras, generado por ti, sobre el contenido a evaluar) y 'preguntas' (un array de sub-preguntas basadas en el texto que acabas de generar, las cuales pueden ser 'Selección múltiple' o 'Desarrollo', y cada una debe tener su propia 'id', 'pregunta', 'puntaje', 'habilidadBloom', etc.).
                       - Para 'Desarrollo': no necesita campos adicionales.
        `;try{Wl("Evaluación - Pruebas");const R="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",re=(await(await new $i(R).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(O)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(re);let q=0;G.actividades.forEach(ie=>{ie.items.forEach(j=>{q+=j.puntaje||0,j.tipo==="Comprensión de lectura"&&j.preguntas&&j.preguntas.forEach(Y=>{q+=Y.puntaje||0})})});const W={id:crypto.randomUUID(),fechaCreacion:new Date().toISOString(),nombre:g.nombre,asignatura:g.asignatura,nivel:g.nivel,contenidoOriginal:g.contenido,tiposActividadOriginal:g.tiposActividad,objetivo:G.objetivo,instruccionesGenerales:G.instruccionesGenerales,puntajeIdeal:q,actividades:G.actividades,dificultad:g.dificultad,...g.isNee&&{adaptacionNEE:g.selectedNee}};n(W),h(!1)}catch(R){console.error(R),u("Error al generar la prueba con IA. Revisa la consola para más detalles.")}finally{a(!1)}},M=async()=>{if(r)try{await Mce(r),alert("Prueba guardada con éxito.")}catch(C){console.error(C),alert("No se pudo guardar la prueba.")}},P=async C=>{if(window.confirm("¿Eliminar esta prueba?"))try{await Pce(C),(r==null?void 0:r.id)===C&&n(null)}catch(E){console.error(E),alert("No se pudo eliminar la prueba.")}},L=async C=>{o(!0);const E=new lr("p","mm","a4"),B=20,O=E.internal.pageSize.getHeight(),R=E.internal.pageSize.getWidth(),F=R-B*2;let Q=B;const H=re=>{re.setFillColor(230,230,230),re.rect(0,0,R,25,"F"),re.setFontSize(9),re.setTextColor(0,0,0),re.text("LICEO INDUSTRIAL DE RECOLETA",B,15,{align:"left"}),re.text("SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA",R-B,15,{align:"right"})};H(E),Q=30,E.setTextColor(0,0,0),E.setFont("helvetica","bold"),E.setFontSize(16),E.text(C.nombre,R/2,Q,{align:"center"}),Q+=10,il(E,{startY:Q,body:[[{content:"Asignatura:",styles:{fontStyle:"bold"}},C.asignatura,{content:"Puntaje Ideal:",styles:{fontStyle:"bold"}},C.puntajeIdeal.toString()],[{content:"Nivel:",styles:{fontStyle:"bold"}},C.nivel,"",""],[{content:"OA:",styles:{fontStyle:"bold",valign:"top"}},{content:C.objetivo,colSpan:3}],[{content:"Instrucciones:",styles:{fontStyle:"bold",valign:"top"}},{content:C.instruccionesGenerales,colSpan:3}]],theme:"grid",styles:{fontSize:10,cellPadding:2,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},columnStyles:{0:{cellWidth:30},2:{cellWidth:30}},didDrawPage:re=>{H(E)}}),Q=E.lastAutoTable.finalY+10;const ne=re=>{Q+re>O-B&&(E.addPage(),H(E),Q=B+15,E.setTextColor(0,0,0))},J=(re,G)=>{E.setFont("helvetica",G.isBold?"bold":"normal"),E.setFontSize(G.fontSize);const q=Array.isArray(re)?re.join(`
`):re;return E.getTextDimensions(q,{maxWidth:G.width}).h};for(const re of C.actividades){let G=J(re.titulo,{fontSize:12,width:F,isBold:!0})+J(re.instrucciones,{fontSize:10,width:F})+12;ne(G),E.setFont("helvetica","bold"),E.setFontSize(12),E.setTextColor(0,0,0),E.text(re.titulo,B,Q),Q+=8,E.setFont("helvetica","normal"),E.setFontSize(10);const q=E.splitTextToSize(re.instrucciones,F);E.text(q,B,Q),Q+=q.length*(10*.35*1.15)+4;for(const[W,ie]of re.items.entries()){let j=0;const Y=`${W+1}. ${ie.pregunta} (${ie.puntaje} pts)`;switch(j+=J(Y,{fontSize:10,width:F,isBold:!0}),ie.tipo){case"Selección múltiple":ie.opciones.forEach(ce=>{j+=J(ce,{fontSize:10,width:F-5})+3}),j+=7;break;case"Verdadero o Falso":j+=10;break;case"Desarrollo":j+=30;break;case"Términos pareados":j+=ie.pares.length*12+20;break;case"Comprensión de lectura":const te=ie;j+=J(te.texto,{fontSize:10,width:F-10})+10,te.preguntas.forEach(ce=>{const be=`${ce.pregunta} (${ce.puntaje} pts)`;j+=J(be,{fontSize:10,width:F-5,isBold:!0}),ce.tipo==="Selección múltiple"?(ce.opciones.forEach(he=>{j+=J(he,{fontSize:10,width:F-10})+3}),j+=7):ce.tipo==="Desarrollo"&&(j+=30),j+=5}),j+=15;break}ne(j),E.setFont("helvetica","bold"),E.setFontSize(10),E.setTextColor(0,0,0);const ee=E.splitTextToSize(Y,F);if(E.text(ee,B,Q),Q+=ee.length*5+4,E.setFont("helvetica","normal"),ie.tipo==="Selección múltiple")ie.opciones.forEach((te,ce)=>{E.text(`${String.fromCharCode(65+ce)}) ${te}`,B+5,Q),Q+=7});else if(ie.tipo==="Verdadero o Falso")E.text("V ______    F ______",B+5,Q),Q+=10;else if(ie.tipo==="Desarrollo")E.setDrawColor(200,200,200),E.setFillColor(245,245,245),E.rect(B,Q,F,25,"FD"),Q+=30;else if(ie.tipo==="Términos pareados"){const te=[...ie.pares.map(be=>be.definicion)].sort(()=>Math.random()-.5),ce=ie.pares.map((be,he)=>[`${he+1}. ${be.concepto}`,`(   ) ${te[he]}`]);il(E,{startY:Q,head:[["Columna A: Concepto","Columna B: Definición"]],body:ce,theme:"grid",styles:{fontSize:9,textColor:[0,0,0],lineColor:[0,0,0],lineWidth:.1},headStyles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0]},didDrawPage:be=>H(E)}),Q=E.lastAutoTable.finalY+10}else if(ie.tipo==="Comprensión de lectura"){const te=ie;E.setFillColor(240,240,240),E.setDrawColor(200,200,200);const ce=E.splitTextToSize(te.texto,F-10),be=ce.length*(10*.35*1.15)+8;E.rect(B,Q,F,be,"FD"),Q+=4,E.setFont("helvetica","normal"),E.setFontSize(10),E.setTextColor(0,0,0),E.text(ce,B+5,Q),Q+=be;for(const[he,fe]of te.preguntas.entries()){const ge=`${he+1}. ${fe.pregunta} (${fe.puntaje} pts)`;E.setFont("helvetica","bold");const de=E.splitTextToSize(ge,F-5);E.text(de,B+5,Q),Q+=de.length*5+4,E.setFont("helvetica","normal"),fe.tipo==="Selección múltiple"?fe.opciones.forEach((oe,Ue)=>{E.text(`${String.fromCharCode(65+Ue)}) ${oe}`,B+10,Q),Q+=7}):fe.tipo==="Desarrollo"&&(E.setDrawColor(200,200,200),E.setFillColor(245,245,245),E.rect(B+5,Q,F-5,25,"FD"),Q+=30)}}Q+=5}}E.save(`${C.nombre.replace(/\s/g,"_")}.pdf`),o(!1)};return r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("button",{onClick:()=>n(null),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:()=>h(!d),className:"bg-slate-100 text-slate-700 font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-slate-200 dark:bg-slate-700 dark:text-slate-200 dark:hover:bg-slate-600",children:[c.jsx(Kce,{open:!d})," ",c.jsxs("span",{children:[d?"Ocultar":"Mostrar"," Respuestas"]})]}),c.jsx("button",{onClick:M,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Guardar Prueba"}),c.jsxs("button",{onClick:()=>L(r),disabled:i,className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2",children:[i?"...":c.jsx(vM,{})," PDF"]})]})]}),c.jsxs("div",{className:"border rounded-lg p-8 bg-slate-50 dark:bg-slate-900/50",children:[c.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-600 dark:text-slate-400",children:[c.jsx("span",{children:"LICEO INDUSTRIAL DE RECOLETA"}),c.jsx("span",{children:"SUBDIRECCIÓN DE GESTIÓN PEDAGÓGICA"})]}),c.jsx("h2",{className:"text-center text-2xl font-bold my-4 text-slate-800 dark:text-slate-200",children:r.nombre}),c.jsxs("div",{className:"space-y-4 text-sm text-slate-700 dark:text-slate-300 border p-4 rounded-lg bg-white dark:bg-slate-800",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Asignatura:"})," ",r.asignatura]}),c.jsxs("p",{className:"text-right",children:[c.jsx("strong",{children:"Puntaje Ideal:"})," ",r.puntajeIdeal]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Nivel:"})," ",r.nivel]})]}),c.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 pt-2",children:[c.jsxs("span",{className:"font-semibold bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-200 px-2 py-1 rounded-full text-xs",children:["Dificultad: ",r.dificultad||"Intermedio"]}),r.adaptacionNEE&&r.adaptacionNEE.length>0&&c.jsxs("span",{className:"font-semibold bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300 px-2 py-1 rounded-full text-xs",children:["Adaptado para NEE: ",r.adaptacionNEE.join(", ")]})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",r.objetivo]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Instrucciones Generales:"})," ",r.instruccionesGenerales]})]}),r.actividades.map(C=>c.jsxs("div",{className:"mt-8 bg-white dark:bg-slate-800 p-6 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-lg font-bold border-b pb-2 mb-4 dark:border-slate-600",children:C.titulo}),c.jsx("p",{className:"italic text-sm mb-4",children:C.instrucciones}),c.jsx("div",{className:"space-y-6",children:C.items.map((E,B)=>c.jsx($ce,{item:E,index:B,showAnswers:d},E.id))})]},C.id))]})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Generar Nueva Prueba o Guía"}),c.jsxs("form",{onSubmit:D,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-1 block",children:["Nombre de la Prueba/Guía ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",name:"nombre",value:g.nombre,onChange:y,placeholder:"Ej: Guía N°1 - La Célula",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",required:!0})]}),c.jsx("div",{}),c.jsx("select",{name:"asignatura",value:g.asignatura,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:ol.map(C=>c.jsx("option",{children:C},C))}),c.jsx("select",{name:"nivel",value:g.nivel,onChange:y,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:_2.map(C=>c.jsx("option",{children:C},C))})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 mb-2 block",children:"Dificultad de la Prueba"}),c.jsx("div",{className:"flex rounded-lg shadow-sm",children:["Fácil","Intermedio","Avanzado"].map((C,E)=>c.jsx("button",{type:"button",onClick:()=>b(B=>({...B,dificultad:C})),className:`w-1/3 px-4 py-2 text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-opacity-50
                                            ${E===0?"rounded-l-lg":""} ${E===2?"rounded-r-lg":""}
                                            ${g.dificultad===C?"bg-amber-500 text-white z-10":"bg-slate-200 hover:bg-slate-300 text-slate-800 dark:bg-slate-700 dark:hover:bg-slate-600 dark:text-slate-200"}`,children:C},C))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:g.isNee,onChange:C=>b(E=>({...E,isNee:C.target.checked,selectedNee:C.target.checked?E.selectedNee:[]})),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 border-slate-300 dark:bg-slate-600 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300",children:"Adaptar para Necesidades Educativas Especiales (NEE)"})]}),g.isNee&&c.jsxs("div",{className:"p-3 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-600 animate-fade-in",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Seleccione Dificultades de Aprendizaje"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-32 overflow-y-auto",children:S2.map(C=>c.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded hover:bg-slate-100 dark:hover:bg-slate-600 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:g.selectedNee.includes(C),onChange:()=>k(C),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:C})]},C))})]})]})]}),c.jsx("textarea",{name:"contenido",value:g.contenido,onChange:y,placeholder:"Contenido a evaluar...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"space-y-3",children:qce.map(C=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300 dark:border-slate-700 dark:has-[:checked]:bg-amber-900/20 dark:has-[:checked]:border-amber-700",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:!!g.tiposActividad[C],onChange:()=>_(C),className:"h-5 w-5 rounded text-amber-500 focus:ring-amber-400 bg-slate-200 dark:bg-slate-600 border-slate-300 dark:border-slate-500"}),c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 flex-grow",children:C})]}),g.tiposActividad[C]&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Cantidad:"}),w6[C].map(E=>c.jsx("button",{type:"button",onClick:()=>T(C,E),className:`px-3 py-1 rounded-full font-semibold text-xs transition-colors ${g.tiposActividad[C]===E?"bg-amber-500 text-white":"bg-slate-200 hover:bg-slate-300 dark:bg-slate-600 dark:hover:bg-slate-500"}`,children:E},E))]})]},C))}),l&&c.jsx("p",{className:"text-red-500 text-sm",children:l}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:s,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:s?"Generando...":"Generar Prueba"})})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Pruebas Guardadas"}),c.jsx("div",{className:"space-y-2",children:t.length>0?t.map(C=>c.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:C.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[C.asignatura," - ",C.nivel," (",new Date(C.fechaCreacion).toLocaleDateString(),")"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>n(C),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Ver"}),c.jsx("button",{onClick:()=>P(C.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},C.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-4",children:"No hay pruebas guardadas."})})]})]})},Yce=({rubricas:t,onSave:e,onDelete:r,onCreate:n})=>{const[s,a]=Z.useState(null),[i,o]=Z.useState("list"),[l,u]=Z.useState(!1),[d,h]=Z.useState(""),m=async(P,L)=>{if(!P.trim()||!L.trim()){alert("El título y la descripción son obligatorios.");return}u(!0);const C=`Crea una rúbrica de evaluación detallada sobre "${P}" con el propósito de "${L}". Genera entre 3 y 5 dimensiones de evaluación. Para cada dimensión, crea un descriptor para 4 niveles: Insuficiente, Suficiente, Competente, y Avanzado. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,E={type:"ARRAY",items:{type:"OBJECT",properties:{dimension:{type:"STRING"},insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["dimension","insuficiente","suficiente","competente","avanzado"]}};try{Wl("Evaluación - Rúbricas");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=(await(await new $i(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:E}})).response).text(),ne=JSON.parse(H),J={id:crypto.randomUUID(),titulo:P,descripcion:L,fechaCreacion:new Date().toISOString(),dimensiones:ne.map(re=>({id:crypto.randomUUID(),nombre:re.dimension,niveles:{insuficiente:re.insuficiente,suficiente:re.suficiente,competente:re.competente,avanzado:re.avanzado}}))};a(J)}catch(B){console.error(B),alert("Error al generar la rúbrica con IA.")}finally{u(!1)}},g=async()=>{if(!d.trim()||!s)return;const P=crypto.randomUUID(),L={id:P,nombre:d,niveles:{insuficiente:"",suficiente:"",competente:"",avanzado:""},isLoading:!0};a(B=>B?{...B,dimensiones:[...B.dimensiones,L]}:null),h("");const C=`Para una rúbrica sobre "${s.titulo}", genera los descriptores para los 4 niveles de logro (Insuficiente, Suficiente, Competente, Avanzado) para la nueva dimensión: "${d}". Considera las dimensiones existentes como contexto: ${s.dimensiones.map(B=>B.nombre).join(", ")}. Tu respuesta DEBE ser un único objeto JSON válido sin texto introductorio, explicaciones, ni el bloque \`\`\`json.`,E={type:"OBJECT",properties:{insuficiente:{type:"STRING"},suficiente:{type:"STRING"},competente:{type:"STRING"},avanzado:{type:"STRING"}},required:["insuficiente","suficiente","competente","avanzado"]};try{Wl("Evaluación - Rúbricas (Añadir Dimensión)");const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",H=(await(await new $i(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent({contents:[{parts:[{text:C}]}],generationConfig:{responseMimeType:"application/json",responseSchema:E}})).response).text(),ne=JSON.parse(H);a(J=>J?{...J,dimensiones:J.dimensiones.map(re=>re.id===P?{...re,niveles:ne,isLoading:!1}:re)}:null)}catch(B){console.error("Error generating dimension descriptors:",B),alert("No se pudieron generar los descriptores."),a(O=>O?{...O,dimensiones:O.dimensiones.filter(R=>R.id!==P)}:null)}},b=()=>{if(!s)return;t.some(L=>L.id===s.id)?e(s):n(s),o("list"),a(null)},y=P=>{a(P),o("form")},_=()=>{a({id:crypto.randomUUID(),titulo:"",descripcion:"",fechaCreacion:new Date().toISOString(),dimensiones:[]}),o("form")},T=(P,L,C)=>{s&&a(E=>E?{...E,dimensiones:E.dimensiones.map(B=>B.id!==P?B:L==="nombre"?{...B,nombre:C}:{...B,niveles:{...B.niveles,[L]:C}})}:null)},k=(P,L)=>{a(C=>C?{...C,[P]:L}:null)},D=P=>{s&&a(L=>L?{...L,dimensiones:L.dimensiones.filter(C=>C.id!==P)}:null)},M=()=>{if(!s)return null;const P="w-full p-2 border border-slate-300 rounded-lg shadow-sm focus:ring-amber-500 focus:border-amber-500 dark:bg-slate-700 dark:border-slate-600",L=`${P} resize-none text-sm`;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Crear Rúbrica de Aprendizaje"}),c.jsx("button",{onClick:()=>o("list"),className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Título de la Rúbrica"}),c.jsx("input",{value:s.titulo,onChange:C=>k("titulo",C.target.value),placeholder:"Ej. Rúbrica de Presentaciones Orales",className:`${P} mt-1`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-700 dark:text-slate-300",children:"Descripción de la Rúbrica"}),c.jsx("textarea",{value:s.descripcion,onChange:C=>k("descripcion",C.target.value),placeholder:"Describe el propósito y los criterios de evaluación de esta rúbrica.",rows:3,className:`${P} mt-1`})]})]}),s.dimensiones.length===0&&c.jsx("div",{className:"text-center py-4",children:c.jsx("button",{onClick:()=>m(s.titulo,s.descripcion),disabled:l||!s.titulo||!s.descripcion,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:l?"Generando...":"✨ Generar Rúbrica con IA"})}),s.dimensiones.length>0&&c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200",children:"Dimensiones a Evaluar"}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full text-sm",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50",children:c.jsx("tr",{children:["Dimensión","Insuficiente","Suficiente","Competente","Avanzado",""].map(C=>c.jsx("th",{className:"p-3 text-left font-semibold text-slate-600 dark:text-slate-300",children:C},C))})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.dimensiones.map(C=>c.jsxs("tr",{children:[c.jsx("td",{className:"p-2 w-1/5",children:c.jsx("textarea",{value:C.nombre,onChange:E=>T(C.id,"nombre",E.target.value),rows:4,className:L})}),Object.keys(C.niveles).map(E=>c.jsx("td",{className:"p-2 w-1/5",children:C.isLoading?c.jsx("div",{className:"flex justify-center items-center h-full",children:c.jsx("div",{className:"w-5 h-5 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"})}):c.jsx("textarea",{value:C.niveles[E],onChange:B=>T(C.id,E,B.target.value),rows:4,className:L})},E)),c.jsx("td",{className:"p-2 w-[5%] text-center align-middle",children:c.jsx("button",{onClick:()=>D(C.id),className:"text-red-500 hover:text-red-700 p-1 rounded-full text-lg",children:"🗑️"})})]},C.id))})]})}),c.jsxs("div",{className:"flex items-end gap-2 pt-2",children:[c.jsxs("div",{className:"flex-grow",children:[c.jsx("label",{className:"text-sm font-medium",children:"Añadir Dimensión"}),c.jsx("input",{value:d,onChange:C=>h(C.target.value),placeholder:"Escribe el nombre de la nueva dimensión...",className:`${P} mt-1`})]}),c.jsx("button",{onClick:g,disabled:!d.trim(),className:"bg-slate-200 dark:bg-slate-600 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 h-10 disabled:opacity-50",children:"Generar con IA"})]})]}),c.jsx("div",{className:"flex justify-end pt-6 border-t dark:border-slate-700",children:c.jsx("button",{onClick:b,className:"bg-amber-500 text-white font-bold py-2.5 px-6 rounded-lg hover:bg-amber-600",children:"Guardar Rúbrica"})})]})};return i==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Rúbricas"}),c.jsx("button",{onClick:_,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:"Crear Nueva"})]}),t.length>0?t.map(P=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:P.titulo}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-lg",children:P.descripcion})]}),c.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[c.jsx("button",{onClick:()=>y(P),className:"text-sm font-semibold text-blue-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>r(P.id),className:"text-sm font-semibold text-red-600 hover:underline",children:"Eliminar"})]})]},P.id)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-center py-4",children:"No hay rúbricas guardadas."})]}):M()},Jce=({allUsers:t,rubricasEstaticas:e})=>{const[r,n]=Z.useState([]),[s,a]=Z.useState(null),[i,o]=Z.useState(null),[l,u]=Z.useState({rubricaEstaticaId:"",curso:""}),[d,h]=Z.useState(null);Z.useEffect(()=>{const k=Hce(n);return()=>k()},[]);const m=async k=>{k.preventDefault();const D=e.find(P=>P.id===l.rubricaEstaticaId);if(!D||!l.curso){alert("Debe seleccionar una rúbrica y un curso.");return}const M={nombre:D.titulo,curso:l.curso,asignatura:"N/A",rubricaEstaticaId:D.id,resultados:{}};try{await zce(M),u({rubricaEstaticaId:"",curso:""})}catch(P){console.error(P),alert("No se pudo crear la evaluación con rúbrica.")}},g=k=>{a(k),o(JSON.parse(JSON.stringify(k)))},b=(k,D,M)=>{i&&o(P=>{if(!P)return null;const L=JSON.parse(JSON.stringify(P));return L.resultados[k]||(L.resultados[k]={puntajes:{},feedback:""}),L.resultados[k].puntajes[D]=M,L})},y=async()=>{if(i)try{await Vce(i),a(i),alert("Cambios guardados.")}catch(k){console.error(k),alert("No se pudieron guardar los cambios.")}},_=Z.useCallback(k=>{const D=i,M=e.find(O=>O.id===(D==null?void 0:D.rubricaEstaticaId));if(!D||!M)return{score:0,maxScore:0,grade:"N/A"};const P=M.dimensiones.length*4,L=D.resultados[k];if(!L)return{score:0,maxScore:P,grade:"1.0"};const C=Object.values(L.puntajes).reduce((O,R)=>O+R,0),E=1+6*(C/P),B=P>0?E.toFixed(1):"1.0";return{score:C,maxScore:P,grade:B}},[i,e]),T=async k=>{if(!i)return;const D=e.find(C=>C.id===i.rubricaEstaticaId),M=i.resultados[k];if(!D||!M||Object.keys(M.puntajes).length===0){alert("El estudiante no tiene puntajes para generar feedback.");return}h(k);const L=`Genera una retroalimentación constructiva para un estudiante basada en estos puntajes de rúbrica (de 1 a 4): ${D.dimensiones.map(C=>`${C.nombre}: ${M.puntajes[C.id]||"N/A"}/4`).join("; ")}. El nombre de la evaluación es "${D.titulo}". Destaca fortalezas y sugiere 1-2 áreas de mejora concretas. Sé breve y motivador.`;try{Wl("Evaluación - Rúbricas Interactivas (Feedback)");const C="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=(await(await new $i(C).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(L)).response).text();o(Q=>{if(!Q)return null;const H=JSON.parse(JSON.stringify(Q));return H.resultados[k].feedback=F.replace(/(\*\*|\*)/g,""),H})}catch(C){console.error(C),alert("Error al generar feedback.")}finally{h(null)}};if(s&&i){const k=e.find(M=>M.id===s.rubricaEstaticaId),D=t.filter(M=>M.profile===jt.ESTUDIANTE&&Jy(M.curso||"")===s.curso).map(M=>M.nombreCompleto).sort();return k?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:s.nombre}),c.jsx("p",{className:"text-slate-500",children:s.curso})]}),c.jsx("button",{onClick:()=>a(null),className:"font-semibold text-slate-600",children:"← Volver"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"p-2 border dark:border-slate-600 sticky left-0 bg-slate-100 dark:bg-slate-700 z-10 w-48",children:"Estudiante"}),k.dimensiones.map(M=>c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:M.nombre},M.id)),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Puntaje"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm",children:"Nota"}),c.jsx("th",{className:"p-2 border dark:border-slate-600 text-sm w-64",children:"Retroalimentación"})]})}),c.jsx("tbody",{children:D.map(M=>{var E;const{score:P,maxScore:L,grade:C}=_(M);return c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"p-2 border dark:border-slate-600 font-semibold sticky left-0 bg-white dark:bg-slate-800 w-48",children:M}),k.dimensiones.map(B=>c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center",children:c.jsx("div",{className:"flex justify-center gap-1",children:[1,2,3,4].map(O=>{var R;return c.jsx("button",{onClick:()=>b(M,B.id,O),className:`w-7 h-7 rounded-md font-semibold transition-colors ${((R=i.resultados[M])==null?void 0:R.puntajes[B.id])===O?"bg-amber-400 text-white":"bg-slate-200 dark:bg-slate-600 hover:bg-slate-300"}`,children:O},O)})})},B.id)),c.jsxs("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:[P,"/",L]}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-center font-bold",children:C}),c.jsx("td",{className:"p-2 border dark:border-slate-600 text-sm",children:c.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[c.jsx("p",{className:"text-xs w-full",children:((E=i.resultados[M])==null?void 0:E.feedback)||"Sin generar"}),c.jsx("button",{onClick:()=>T(M),disabled:d===M,className:"text-xs bg-sky-100 text-sky-700 font-semibold px-2 py-1 rounded-md w-full disabled:opacity-50",children:d===M?"...":"Generar IA"})]})})]},M)})})]})}),c.jsx("div",{className:"mt-6 flex justify-end",children:c.jsx("button",{onClick:y,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios"})})]}):c.jsxs("div",{children:["Error: Rúbrica base no encontrada. ",c.jsx("button",{onClick:()=>a(null),children:"Volver"})]})}return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear Evaluación con Rúbrica"}),c.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsxs("select",{value:l.rubricaEstaticaId,onChange:k=>u({...l,rubricaEstaticaId:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione una Rúbrica Guardada"}),e.map(k=>c.jsx("option",{value:k.id,children:k.titulo},k.id))]}),c.jsxs("select",{value:l.curso,onChange:k=>u({...l,curso:k.target.value}),className:"w-full border-slate-300 rounded-md dark:bg-slate-700",required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un Curso"}),ca.map(k=>c.jsx("option",{value:k,children:k},k))]}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear Evaluación"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Evaluaciones Creadas"}),c.jsx("div",{className:"space-y-2",children:r.map(k=>c.jsxs("button",{onClick:()=>g(k),className:"w-full text-left p-3 rounded-md bg-slate-50 dark:bg-slate-700 hover:bg-slate-100 dark:hover:bg-slate-600",children:[c.jsx("p",{className:"font-semibold",children:k.nombre}),c.jsx("p",{className:"text-sm text-slate-500",children:k.curso})]},k.id))})]})]})},Xce=({allUsers:t})=>{const[e,r]=Z.useState(""),n=Z.useMemo(()=>Array.from(new Set(t.filter(a=>a.profile===jt.ESTUDIANTE&&a.curso).map(a=>Jy(a.curso)))).sort(),[t]),s=Z.useMemo(()=>{const a=t.filter(i=>i.profile===jt.ESTUDIANTE);return e?a.filter(i=>Jy(i.curso||"")===e).sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto)):a.sort((i,o)=>i.nombreCompleto.localeCompare(o.nombreCompleto))},[t,e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Nóminas de Cursos"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:["Este es un visor de las nóminas de estudiantes. Para agregar, editar o eliminar estudiantes, utilice el módulo de ",c.jsx("strong",{className:"font-semibold",children:"Administración"}),"."]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Filtrar por Curso"}),c.jsxs("select",{id:"curso-filter",value:e,onChange:a=>r(a.target.value),className:"w-full max-w-xs border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Mostrar Todos los Estudiantes"}),n.map(a=>c.jsx("option",{value:a,children:a},a))]})]}),c.jsx("div",{className:"overflow-x-auto border rounded-lg dark:border-slate-700 max-h-[60vh]",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700/50 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Nombre Completo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Curso"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Email"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:s.length>0?s.map(a=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:a.nombreCompleto}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:Jy(a.curso||"")}),c.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:a.email})]},a.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500 dark:text-slate-400",children:"No hay estudiantes que coincidan con el filtro."})})})]})})]})},Zce=()=>{const[t,e]=Z.useState("pruebas"),[r,n]=Z.useState([]),[s,a]=Z.useState([]),[i,o]=Z.useState(!0);Z.useEffect(()=>{o(!0);const h=Gce(n),m=jce(g=>{a(g),o(!1)});return()=>{h(),m()}},[]);const l=async h=>{try{await Oce(h)}catch(m){console.error(m),alert("No se pudo guardar la rúbrica.")}},u=async h=>{try{await Qce(h)}catch(m){console.error(m),alert("No se pudo eliminar la rúbrica.")}},d=({tabName:h,label:m})=>c.jsx("button",{onClick:()=>e(h),className:`${t===h?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:m});return i?c.jsx("div",{className:"text-center py-10",children:"Cargando módulo de evaluaciones..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluación de Aprendizajes"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(d,{tabName:"pruebas",label:"Pruebas y Guías"}),c.jsx(d,{tabName:"rubricas",label:"Generador de Rúbricas"}),c.jsx(d,{tabName:"rubricasInteractivas",label:"Rúbricas Interactivas"}),c.jsx(d,{tabName:"nominas",label:"Gestión de Nóminas"})]})}),c.jsxs("div",{className:"mt-6",children:[t==="pruebas"&&c.jsx(Wce,{}),t==="rubricas"&&c.jsx(Yce,{rubricas:s,onSave:l,onDelete:u,onCreate:l}),t==="rubricasInteractivas"&&c.jsx(Jce,{allUsers:r,rubricasEstaticas:s}),t==="nominas"&&c.jsx(Xce,{allUsers:r})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var R2={};R2.version="0.18.5";var YP=1252,eue=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],q4={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},K4=function(t){eue.indexOf(t)!=-1&&(YP=q4[0]=t)};function tue(){K4(1252)}var Bc=function(t){K4(t)};function $4(){Bc(1200),tue()}function b6(t){for(var e=[],r=0,n=t.length;r<n;++r)e[r]=t.charCodeAt(r);return e}function rue(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return e.join("")}function JP(t){for(var e=[],r=0;r<t.length>>1;++r)e[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return e.join("")}var _g=function(t){var e=t.charCodeAt(0),r=t.charCodeAt(1);return e==255&&r==254?rue(t.slice(2)):e==254&&r==255?JP(t.slice(2)):e==65279?t.slice(1):t},Vv=function(e){return String.fromCharCode(e)},C6=function(e){return String.fromCharCode(e)},Ex,Yd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function _x(t){for(var e="",r=0,n=0,s=0,a=0,i=0,o=0,l=0,u=0;u<t.length;)r=t.charCodeAt(u++),a=r>>2,n=t.charCodeAt(u++),i=(r&3)<<4|n>>4,s=t.charCodeAt(u++),o=(n&15)<<2|s>>6,l=s&63,isNaN(n)?o=l=64:isNaN(s)&&(l=64),e+=Yd.charAt(a)+Yd.charAt(i)+Yd.charAt(o)+Yd.charAt(l);return e}function ll(t){var e="",r=0,n=0,s=0,a=0,i=0,o=0,l=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<t.length;)a=Yd.indexOf(t.charAt(u++)),i=Yd.indexOf(t.charAt(u++)),r=a<<2|i>>4,e+=String.fromCharCode(r),o=Yd.indexOf(t.charAt(u++)),n=(i&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),l=Yd.indexOf(t.charAt(u++)),s=(o&3)<<6|l,l!==64&&(e+=String.fromCharCode(s));return e}var Jr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),KA=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,r){return r?new Buffer(e,r):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Cf(t){return Jr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function E6(t){return Jr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var rl=function(e){return Jr?KA(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)&255})};function nb(t){if(typeof ArrayBuffer>"u")return rl(t);for(var e=new ArrayBuffer(t.length),r=new Uint8Array(e),n=0;n!=t.length;++n)r[n]=t.charCodeAt(n)&255;return e}function If(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],r=0;r<t.length;++r)e[r]=String.fromCharCode(t[r]);return e.join("")}function nue(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function W4(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return W4(new Uint8Array(t));for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=t[r];return e}var Xa=Jr?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:KA(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,r=0;for(e=0;e<t.length;++e)r+=t[e].length;var n=new Uint8Array(r),s=0;for(e=0,r=0;e<t.length;r+=s,++e)if(s=t[e].length,t[e]instanceof Uint8Array)n.set(t[e],r);else{if(typeof t[e]=="string")throw"wtf";n.set(new Uint8Array(t[e]),r)}return n}return[].concat.apply([],t.map(function(a){return Array.isArray(a)?a:[].slice.call(a)}))};function sue(t){for(var e=[],r=0,n=t.length+250,s=Cf(t.length+255),a=0;a<t.length;++a){var i=t.charCodeAt(a);if(i<128)s[r++]=i;else if(i<2048)s[r++]=192|i>>6&31,s[r++]=128|i&63;else if(i>=55296&&i<57344){i=(i&1023)+64;var o=t.charCodeAt(++a)&1023;s[r++]=240|i>>8&7,s[r++]=128|i>>2&63,s[r++]=128|o>>6&15|(i&3)<<4,s[r++]=128|o&63}else s[r++]=224|i>>12&15,s[r++]=128|i>>6&63,s[r++]=128|i&63;r>n&&(e.push(s.slice(0,r)),r=0,s=Cf(65535),n=65530)}return e.push(s.slice(0,r)),Xa(e)}var oo=/\u0000/g,Sg=/[\u0001-\u0006]/g;function _m(t){for(var e="",r=t.length-1;r>=0;)e+=t.charAt(r--);return e}function kc(t,e){var r=""+t;return r.length>=e?r:zs("0",e-r.length)+r}function Y4(t,e){var r=""+t;return r.length>=e?r:zs(" ",e-r.length)+r}function L2(t,e){var r=""+t;return r.length>=e?r:r+zs(" ",e-r.length)}function aue(t,e){var r=""+Math.round(t);return r.length>=e?r:zs("0",e-r.length)+r}function iue(t,e){var r=""+t;return r.length>=e?r:zs("0",e-r.length)+r}var _6=Math.pow(2,32);function L0(t,e){if(t>_6||t<-_6)return aue(t,e);var r=Math.round(t);return iue(r,e)}function U2(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var S6=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],BE=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function oue(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var wr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},T6={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},lue={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function M2(t,e,r){for(var n=t<0?-1:1,s=t*n,a=0,i=1,o=0,l=1,u=0,d=0,h=Math.floor(s);u<e&&(h=Math.floor(s),o=h*i+a,d=h*u+l,!(s-h<5e-8));)s=1/(s-h),a=i,i=o,l=u,u=d;if(d>e&&(u>e?(d=l,o=a):(d=u,o=i)),!r)return[0,n*o,d];var m=Math.floor(n*o/d);return[m,n*o-m*d,d]}function fh(t,e,r){if(t>2958465||t<0)return null;var n=t|0,s=Math.floor(86400*(t-n)),a=0,i=[],o={D:n,T:s,u:86400*(t-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++s==86400&&(o.T=s=0,++n,++o.D)),n===60)i=r?[1317,10,29]:[1900,2,29],a=3;else if(n===0)i=r?[1317,8,29]:[1900,1,0],a=6;else{n>60&&--n;var l=new Date(1900,0,1);l.setDate(l.getDate()+n-1),i=[l.getFullYear(),l.getMonth()+1,l.getDate()],a=l.getDay(),n<60&&(a=(a+6)%7),r&&(a=hue(l,i))}return o.y=i[0],o.m=i[1],o.d=i[2],o.S=s%60,s=Math.floor(s/60),o.M=s%60,s=Math.floor(s/60),o.H=s,o.q=a,o}var XP=new Date(1899,11,31,0,0,0),cue=XP.getTime(),uue=new Date(1900,2,1,0,0,0);function ZP(t,e){var r=t.getTime();return e?r-=1461*24*60*60*1e3:t>=uue&&(r+=1440*60*1e3),(r-(cue+(t.getTimezoneOffset()-XP.getTimezoneOffset())*6e4))/(1440*60*1e3)}function J4(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Aue(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function due(t){var e=t<0?12:11,r=J4(t.toFixed(12));return r.length<=e||(r=t.toPrecision(10),r.length<=e)?r:t.toExponential(5)}function fue(t){var e=J4(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function Sx(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return e>=-4&&e<=-1?r=t.toPrecision(10+e):Math.abs(e)<=9?r=due(t):e===10?r=t.toFixed(10).substr(0,12):r=fue(t),J4(Aue(r.toUpperCase()))}function Rh(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Sx(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Yl(14,ZP(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function hue(t,e){e[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function mue(t,e,r,n){var s="",a=0,i=0,o=r.y,l,u=0;switch(t){case 98:o=r.y+543;case 121:switch(e.length){case 1:case 2:l=o%100,u=2;break;default:l=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:l=r.m,u=e.length;break;case 3:return BE[r.m-1][1];case 5:return BE[r.m-1][0];default:return BE[r.m-1][2]}break;case 100:switch(e.length){case 1:case 2:l=r.d,u=e.length;break;case 3:return S6[r.q][0];default:return S6[r.q][1]}break;case 104:switch(e.length){case 1:case 2:l=1+(r.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:l=r.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:l=r.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return r.u===0&&(e=="s"||e=="ss")?kc(r.S,e.length):(n>=2?i=n===3?1e3:100:i=n===1?10:1,a=Math.round(i*(r.S+r.u)),a>=60*i&&(a=0),e==="s"?a===0?"0":""+a/i:(s=kc(a,2+n),e==="ss"?s.substr(0,2):"."+s.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":l=r.D*24+r.H;break;case"[m]":case"[mm]":l=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":l=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:l=o,u=1;break}var d=u>0?kc(l,u):"";return d}function Jd(t){var e=3;if(t.length<=e)return t;for(var r=t.length%e,n=t.substr(0,r);r!=t.length;r+=e)n+=(n.length>0?",":"")+t.substr(r,e);return n}var ej=/%/g;function pue(t,e,r){var n=e.replace(ej,""),s=e.length-n.length;return kA(t,n,r*Math.pow(10,2*s))+zs("%",s)}function gue(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return kA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function tj(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+tj(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),r.indexOf("e")===-1){var i=Math.floor(Math.log(e)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var rj=/# (\?+)( ?)\/( ?)(\d+)/;function xue(t,e,r){var n=parseInt(t[4],10),s=Math.round(e*n),a=Math.floor(s/n),i=s-a*n,o=n;return r+(a===0?"":""+a)+" "+(i===0?zs(" ",t[1].length+1+t[4].length):Y4(i,t[1].length)+t[2]+"/"+t[3]+kc(o,t[4].length))}function vue(t,e,r){return r+(e===0?"":""+e)+zs(" ",t[1].length+2+t[4].length)}var nj=/^#*0*\.([0#]+)/,sj=/\).*[0#]/,aj=/\(###\) ###\\?-####/;function no(t){for(var e="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(r)}return e}function N6(t,e){var r=Math.pow(10,e);return""+Math.round(t*r)/r}function B6(t,e){var r=t-Math.floor(t),n=Math.pow(10,e);return e<(""+Math.round(r*n)).length?0:Math.round(r*n)}function yue(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function wue(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function Rl(t,e,r){if(t.charCodeAt(0)===40&&!e.match(sj)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Rl("n",n,r):"("+Rl("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return gue(t,e,r);if(e.indexOf("%")!==-1)return pue(t,e,r);if(e.indexOf("E")!==-1)return tj(e,r);if(e.charCodeAt(0)===36)return"$"+Rl(t,e.substr(e.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+L0(l,e.length);if(e.match(/^[#?]+$/))return s=L0(r,0),s==="0"&&(s=""),s.length>e.length?s:no(e.substr(0,e.length-s.length))+s;if(a=e.match(rj))return xue(a,l,u);if(e.match(/^#+0+$/))return u+L0(l,e.length-e.indexOf("0"));if(a=e.match(nj))return s=N6(r,a[1].length).replace(/^([^\.]+)$/,"$1."+no(a[1])).replace(/\.$/,"."+no(a[1])).replace(/\.(\d*)$/,function(b,y){return"."+y+zs("0",no(a[1]).length-y.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+N6(l,a[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+Jd(L0(l,0));if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Rl(t,e,-r):Jd(""+(Math.floor(r)+yue(r,a[1].length)))+"."+kc(B6(r,a[1].length),a[1].length);if(a=e.match(/^#,#*,#0/))return Rl(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=_m(Rl(t,e.replace(/[\\-]/g,""),r)),i=0,_m(_m(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<s.length?s.charAt(i++):b==="0"?"0":""}));if(e.match(aj))return s=Rl(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=M2(l,Math.pow(10,i)-1,!1),s=""+u,d=kA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=L2(o[2],i),d.length<a[4].length&&(d=no(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=M2(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Y4(o[1],i)+a[2]+"/"+a[3]+L2(o[2],i):zs(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=L0(r,0),e.length<=s.length?s:no(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,m=e.length-s.length-h;return no(e.substr(0,h)+s+e.substr(e.length-m))}if(a=e.match(/^00,000\.([#0]*0)$/))return i=B6(r,a[1].length),r<0?"-"+Rl(t,e,-r):Jd(wue(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?kc(0,3-b.length):"")+b})+"."+kc(i,a[1].length);switch(e){case"###,##0.00":return Rl(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var g=Jd(L0(l,0));return g!=="0"?u+g:"";case"###,###.00":return Rl(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Rl(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function bue(t,e,r){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return kA(t,e.substr(0,n),r/Math.pow(10,3*(e.length-n)))}function Cue(t,e,r){var n=e.replace(ej,""),s=e.length-n.length;return kA(t,n,r*Math.pow(10,2*s))+zs("%",s)}function ij(t,e){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+ij(t,-e);var s=t.indexOf(".");s===-1&&(s=t.indexOf("E"));var a=Math.floor(Math.log(e)*Math.LOG10E)%s;if(a<0&&(a+=s),r=(e/Math.pow(10,a)).toPrecision(n+1+(s+a)%s),!r.match(/[Ee]/)){var i=Math.floor(Math.log(e)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(i-r.length+a):r+="E+"+(i-a),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,l,u,d){return l+u+d.substr(0,(s+a)%s)+"."+d.substr(a)+"E"})}else r=e.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function yu(t,e,r){if(t.charCodeAt(0)===40&&!e.match(sj)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?yu("n",n,r):"("+yu("n",n,-r)+")"}if(e.charCodeAt(e.length-1)===44)return bue(t,e,r);if(e.indexOf("%")!==-1)return Cue(t,e,r);if(e.indexOf("E")!==-1)return ij(e,r);if(e.charCodeAt(0)===36)return"$"+yu(t,e.substr(e.charAt(1)==" "?2:1),r);var s,a,i,o,l=Math.abs(r),u=r<0?"-":"";if(e.match(/^00+$/))return u+kc(l,e.length);if(e.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>e.length?s:no(e.substr(0,e.length-s.length))+s;if(a=e.match(rj))return vue(a,l,u);if(e.match(/^#+0+$/))return u+kc(l,e.length-e.indexOf("0"));if(a=e.match(nj))return s=(""+r).replace(/^([^\.]+)$/,"$1."+no(a[1])).replace(/\.$/,"."+no(a[1])),s=s.replace(/\.(\d*)$/,function(b,y){return"."+y+zs("0",no(a[1]).length-y.length)}),e.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),a=e.match(/^(0*)\.(#*)$/))return u+(""+l).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,a[1].length?"0.":".");if(a=e.match(/^#{1,3},##0(\.?)$/))return u+Jd(""+l);if(a=e.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+yu(t,e,-r):Jd(""+r)+"."+zs("0",a[1].length);if(a=e.match(/^#,#*,#0/))return yu(t,e.replace(/^#,#*,/,""),r);if(a=e.match(/^([0#]+)(\\?-([0#]+))+$/))return s=_m(yu(t,e.replace(/[\\-]/g,""),r)),i=0,_m(_m(e.replace(/\\/g,"")).replace(/[0#]/g,function(b){return i<s.length?s.charAt(i++):b==="0"?"0":""}));if(e.match(aj))return s=yu(t,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var d="";if(a=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(a[4].length,7),o=M2(l,Math.pow(10,i)-1,!1),s=""+u,d=kA("n",a[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),s+=d+a[2]+"/"+a[3],d=L2(o[2],i),d.length<a[4].length&&(d=no(a[4].substr(a[4].length-d.length))+d),s+=d,s;if(a=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return i=Math.min(Math.max(a[1].length,a[4].length),7),o=M2(l,Math.pow(10,i)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Y4(o[1],i)+a[2]+"/"+a[3]+L2(o[2],i):zs(" ",2*i+1+a[2].length+a[3].length));if(a=e.match(/^[#0?]+$/))return s=""+r,e.length<=s.length?s:no(e.substr(0,e.length-s.length))+s;if(a=e.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(a[2].length,10)).replace(/([^0])0+$/,"$1"),i=s.indexOf(".");var h=e.indexOf(".")-i,m=e.length-s.length-h;return no(e.substr(0,h)+s+e.substr(e.length-m))}if(a=e.match(/^00,000\.([#0]*0)$/))return r<0?"-"+yu(t,e,-r):Jd(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?kc(0,3-b.length):"")+b})+"."+kc(0,a[1].length);switch(e){case"###,###":case"##,###":case"#,###":var g=Jd(""+l);return g!=="0"?u+g:"";default:if(e.match(/\.[0#?]*$/))return yu(t,e.slice(0,e.lastIndexOf(".")),r)+no(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function kA(t,e,r){return(r|0)===r?yu(t,e,r):Rl(t,e,r)}function Eue(t){for(var e=[],r=!1,n=0,s=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=t.substr(s,n-s),s=n+1}if(e[e.length]=t.substr(s),r===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var oj=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Ap(t){for(var e=0,r="",n="";e<t.length;)switch(r=t.charAt(e)){case"G":U2(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(n=r;t.charAt(e++)!=="]"&&e<t.length;)n+=t.charAt(e);if(n.match(oj))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++e))>-1||r=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===r;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function _ue(t,e,r,n){for(var s=[],a="",i=0,o="",l="t",u,d,h,m="H";i<t.length;)switch(o=t.charAt(i)){case"G":if(!U2(t,i))throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"G",v:"General"},i+=7;break;case'"':for(a="";(h=t.charCodeAt(++i))!==34&&i<t.length;)a+=String.fromCharCode(h);s[s.length]={t:"t",v:a},++i;break;case"\\":var g=t.charAt(++i),b=g==="("||g===")"?g:"t";s[s.length]={t:b,v:g},++i;break;case"_":s[s.length]={t:"t",v:" "},i+=2;break;case"@":s[s.length]={t:"T",v:e},++i;break;case"B":case"b":if(t.charAt(i+1)==="1"||t.charAt(i+1)==="2"){if(u==null&&(u=fh(e,r,t.charAt(i+1)==="2"),u==null))return"";s[s.length]={t:"X",v:t.substr(i,2)},l=o,i+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=fh(e,r),u==null))return"";for(a=o;++i<t.length&&t.charAt(i).toLowerCase()===o;)a+=o;o==="m"&&l.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=m),s[s.length]={t:o,v:a},l=o;break;case"A":case"a":case"上":var y={t:o,v:o};if(u==null&&(u=fh(e,r)),t.substr(i,3).toUpperCase()==="A/P"?(u!=null&&(y.v=u.H>=12?"P":"A"),y.t="T",m="h",i+=3):t.substr(i,5).toUpperCase()==="AM/PM"?(u!=null&&(y.v=u.H>=12?"PM":"AM"),y.t="T",i+=5,m="h"):t.substr(i,5).toUpperCase()==="上午/下午"?(u!=null&&(y.v=u.H>=12?"下午":"上午"),y.t="T",i+=5,m="h"):(y.t="t",++i),u==null&&y.t==="T")return"";s[s.length]=y,l=o;break;case"[":for(a=o;t.charAt(i++)!=="]"&&i<t.length;)a+=t.charAt(i);if(a.slice(-1)!=="]")throw'unterminated "[" block: |'+a+"|";if(a.match(oj)){if(u==null&&(u=fh(e,r),u==null))return"";s[s.length]={t:"Z",v:a.toLowerCase()},l=a.charAt(1)}else a.indexOf("$")>-1&&(a=(a.match(/\$([^-\[\]]*)/)||[])[1]||"$",Ap(t)||(s[s.length]={t:"t",v:a}));break;case".":if(u!=null){for(a=o;++i<t.length&&(o=t.charAt(i))==="0";)a+=o;s[s.length]={t:"s",v:a};break}case"0":case"#":for(a=o;++i<t.length&&"0#?.,E+-%".indexOf(o=t.charAt(i))>-1;)a+=o;s[s.length]={t:"n",v:a};break;case"?":for(a=o;t.charAt(++i)===o;)a+=o;s[s.length]={t:o,v:a},l=o;break;case"*":++i,(t.charAt(i)==" "||t.charAt(i)=="*")&&++i;break;case"(":case")":s[s.length]={t:n===1?"t":o,v:o},++i;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(a=o;i<t.length&&"0123456789".indexOf(t.charAt(++i))>-1;)a+=t.charAt(i);s[s.length]={t:"D",v:a};break;case" ":s[s.length]={t:o,v:o},++i;break;case"$":s[s.length]={t:"t",v:"$"},++i;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+t);s[s.length]={t:"t",v:o},++i;break}var _=0,T=0,k;for(i=s.length-1,l="t";i>=0;--i)switch(s[i].t){case"h":case"H":s[i].t=m,l="h",_<1&&(_=1);break;case"s":(k=s[i].v.match(/\.0+$/))&&(T=Math.max(T,k[0].length-1)),_<3&&(_=3);case"d":case"y":case"M":case"e":l=s[i].t;break;case"m":l==="s"&&(s[i].t="M",_<2&&(_=2));break;case"X":break;case"Z":_<1&&s[i].v.match(/[Hh]/)&&(_=1),_<2&&s[i].v.match(/[Mm]/)&&(_=2),_<3&&s[i].v.match(/[Ss]/)&&(_=3)}switch(_){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var D="",M;for(i=0;i<s.length;++i)switch(s[i].t){case"t":case"T":case" ":case"D":break;case"X":s[i].v="",s[i].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[i].v=mue(s[i].t.charCodeAt(0),s[i].v,u,T),s[i].t="t";break;case"n":case"?":for(M=i+1;s[M]!=null&&((o=s[M].t)==="?"||o==="D"||(o===" "||o==="t")&&s[M+1]!=null&&(s[M+1].t==="?"||s[M+1].t==="t"&&s[M+1].v==="/")||s[i].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(s[M].v==="/"||s[M].v===" "&&s[M+1]!=null&&s[M+1].t=="?"));)s[i].v+=s[M].v,s[M]={v:"",t:";"},++M;D+=s[i].v,i=M-1;break;case"G":s[i].t="t",s[i].v=Rh(e,r);break}var P="",L,C;if(D.length>0){D.charCodeAt(0)==40?(L=e<0&&D.charCodeAt(0)===45?-e:e,C=kA("n",D,L)):(L=e<0&&n>1?-e:e,C=kA("n",D,L),L<0&&s[0]&&s[0].t=="t"&&(C=C.substr(1),s[0].v="-"+s[0].v)),M=C.length-1;var E=s.length;for(i=0;i<s.length;++i)if(s[i]!=null&&s[i].t!="t"&&s[i].v.indexOf(".")>-1){E=i;break}var B=s.length;if(E===s.length&&C.indexOf("E")===-1){for(i=s.length-1;i>=0;--i)s[i]==null||"n?".indexOf(s[i].t)===-1||(M>=s[i].v.length-1?(M-=s[i].v.length,s[i].v=C.substr(M+1,s[i].v.length)):M<0?s[i].v="":(s[i].v=C.substr(0,M+1),M=-1),s[i].t="t",B=i);M>=0&&B<s.length&&(s[B].v=C.substr(0,M+1)+s[B].v)}else if(E!==s.length&&C.indexOf("E")===-1){for(M=C.indexOf(".")-1,i=E;i>=0;--i)if(!(s[i]==null||"n?".indexOf(s[i].t)===-1)){for(d=s[i].v.indexOf(".")>-1&&i===E?s[i].v.indexOf(".")-1:s[i].v.length-1,P=s[i].v.substr(d+1);d>=0;--d)M>=0&&(s[i].v.charAt(d)==="0"||s[i].v.charAt(d)==="#")&&(P=C.charAt(M--)+P);s[i].v=P,s[i].t="t",B=i}for(M>=0&&B<s.length&&(s[B].v=C.substr(0,M+1)+s[B].v),M=C.indexOf(".")+1,i=E;i<s.length;++i)if(!(s[i]==null||"n?(".indexOf(s[i].t)===-1&&i!==E)){for(d=s[i].v.indexOf(".")>-1&&i===E?s[i].v.indexOf(".")+1:0,P=s[i].v.substr(0,d);d<s[i].v.length;++d)M<C.length&&(P+=C.charAt(M++));s[i].v=P,s[i].t="t",B=i}}}for(i=0;i<s.length;++i)s[i]!=null&&"n?".indexOf(s[i].t)>-1&&(L=n>1&&e<0&&i>0&&s[i-1].v==="-"?-e:e,s[i].v=kA(s[i].t,s[i].v,L),s[i].t="t");var O="";for(i=0;i!==s.length;++i)s[i]!=null&&(O+=s[i].v);return O}var k6=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function I6(t,e){if(e==null)return!1;var r=parseFloat(e[2]);switch(e[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function Sue(t,e){var r=Eue(t),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof e!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var a=e>0?r[0]:e<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,a];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var i=r[0].match(k6),o=r[1].match(k6);return I6(e,i)?[n,r[0]]:I6(e,o)?[n,r[1]]:[n,r[i!=null&&o!=null?2:1]]}return[n,a]}function Yl(t,e,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:wr)[t],n==null&&(n=r.table&&r.table[T6[t]]||wr[T6[t]]),n==null&&(n=lue[t]||"General");break}if(U2(n,0))return Rh(e,r);e instanceof Date&&(e=ZP(e,r.date1904));var s=Sue(n,e);if(U2(s[1]))return Rh(e,r);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return _ue(s[1],e,r,s[0])}function IA(t,e){if(typeof e!="number"){e=+e||-1;for(var r=0;r<392;++r){if(wr[r]==null){e<0&&(e=r);continue}if(wr[r]==t){e=r;break}}e<0&&(e=391)}return wr[e]=t,e}function sb(t){for(var e=0;e!=392;++e)t[e]!==void 0&&IA(t[e],e)}function dp(){wr=oue()}var Tue={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},lj=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Nue(t){var e=typeof t=="number"?wr[t]:t;return e=e.replace(lj,"(\\d+)"),new RegExp("^"+e+"$")}function Bue(t,e,r){var n=-1,s=-1,a=-1,i=-1,o=-1,l=-1;(e.match(lj)||[]).forEach(function(h,m){var g=parseInt(r[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=g;break;case"d":a=g;break;case"h":i=g;break;case"s":l=g;break;case"m":i>=0?o=g:s=g;break}}),l>=0&&o==-1&&s>=0&&(o=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(a>=1?a:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(i>=0?i:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2);return i==-1&&o==-1&&l==-1?u:n==-1&&s==-1&&a==-1?d:u+"T"+d}var kue=function(){var t={};t.version="1.2.0";function e(){for(var C=0,E=new Array(256),B=0;B!=256;++B)C=B,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,C=C&1?-306674912^C>>>1:C>>>1,E[B]=C;return typeof Int32Array<"u"?new Int32Array(E):E}var r=e();function n(C){var E=0,B=0,O=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(O=0;O!=256;++O)R[O]=C[O];for(O=0;O!=256;++O)for(B=C[O],E=256+O;E<4096;E+=256)B=R[E]=B>>>8^C[B&255];var F=[];for(O=1;O!=16;++O)F[O-1]=typeof Int32Array<"u"?R.subarray(O*256,O*256+256):R.slice(O*256,O*256+256);return F}var s=n(r),a=s[0],i=s[1],o=s[2],l=s[3],u=s[4],d=s[5],h=s[6],m=s[7],g=s[8],b=s[9],y=s[10],_=s[11],T=s[12],k=s[13],D=s[14];function M(C,E){for(var B=E^-1,O=0,R=C.length;O<R;)B=B>>>8^r[(B^C.charCodeAt(O++))&255];return~B}function P(C,E){for(var B=E^-1,O=C.length-15,R=0;R<O;)B=D[C[R++]^B&255]^k[C[R++]^B>>8&255]^T[C[R++]^B>>16&255]^_[C[R++]^B>>>24]^y[C[R++]]^b[C[R++]]^g[C[R++]]^m[C[R++]]^h[C[R++]]^d[C[R++]]^u[C[R++]]^l[C[R++]]^o[C[R++]]^i[C[R++]]^a[C[R++]]^r[C[R++]];for(O+=15;R<O;)B=B>>>8^r[(B^C[R++])&255];return~B}function L(C,E){for(var B=E^-1,O=0,R=C.length,F=0,Q=0;O<R;)F=C.charCodeAt(O++),F<128?B=B>>>8^r[(B^F)&255]:F<2048?(B=B>>>8^r[(B^(192|F>>6&31))&255],B=B>>>8^r[(B^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,Q=C.charCodeAt(O++)&1023,B=B>>>8^r[(B^(240|F>>8&7))&255],B=B>>>8^r[(B^(128|F>>2&63))&255],B=B>>>8^r[(B^(128|Q>>6&15|(F&3)<<4))&255],B=B>>>8^r[(B^(128|Q&63))&255]):(B=B>>>8^r[(B^(224|F>>12&15))&255],B=B>>>8^r[(B^(128|F>>6&63))&255],B=B>>>8^r[(B^(128|F&63))&255]);return~B}return t.table=r,t.bstr=M,t.buf=P,t.str=L,t}(),Ar=function(){var e={};e.version="1.2.1";function r(me,Be){for(var _e=me.split("/"),Se=Be.split("/"),Te=0,ke=0,Ke=Math.min(_e.length,Se.length);Te<Ke;++Te){if(ke=_e[Te].length-Se[Te].length)return ke;if(_e[Te]!=Se[Te])return _e[Te]<Se[Te]?-1:1}return _e.length-Se.length}function n(me){if(me.charAt(me.length-1)=="/")return me.slice(0,-1).indexOf("/")===-1?me:n(me.slice(0,-1));var Be=me.lastIndexOf("/");return Be===-1?me:me.slice(0,Be+1)}function s(me){if(me.charAt(me.length-1)=="/")return s(me.slice(0,-1));var Be=me.lastIndexOf("/");return Be===-1?me:me.slice(Be+1)}function a(me,Be){typeof Be=="string"&&(Be=new Date(Be));var _e=Be.getHours();_e=_e<<6|Be.getMinutes(),_e=_e<<5|Be.getSeconds()>>>1,me.write_shift(2,_e);var Se=Be.getFullYear()-1980;Se=Se<<4|Be.getMonth()+1,Se=Se<<5|Be.getDate(),me.write_shift(2,Se)}function i(me){var Be=me.read_shift(2)&65535,_e=me.read_shift(2)&65535,Se=new Date,Te=_e&31;_e>>>=5;var ke=_e&15;_e>>>=4,Se.setMilliseconds(0),Se.setFullYear(_e+1980),Se.setMonth(ke-1),Se.setDate(Te);var Ke=Be&31;Be>>>=5;var nt=Be&63;return Be>>>=6,Se.setHours(Be),Se.setMinutes(nt),Se.setSeconds(Ke<<1),Se}function o(me){Ai(me,0);for(var Be={},_e=0;me.l<=me.length-4;){var Se=me.read_shift(2),Te=me.read_shift(2),ke=me.l+Te,Ke={};switch(Se){case 21589:_e=me.read_shift(1),_e&1&&(Ke.mtime=me.read_shift(4)),Te>5&&(_e&2&&(Ke.atime=me.read_shift(4)),_e&4&&(Ke.ctime=me.read_shift(4))),Ke.mtime&&(Ke.mt=new Date(Ke.mtime*1e3));break}me.l=ke,Be[Se]=Ke}return Be}var l;function u(){return l||(l={})}function d(me,Be){if(me[0]==80&&me[1]==75)return an(me,Be);if((me[0]|32)==109&&(me[1]|32)==105)return Ba(me,Be);if(me.length<512)throw new Error("CFB file size "+me.length+" < 512");var _e=3,Se=512,Te=0,ke=0,Ke=0,nt=0,Ve=0,Ye=[],Ze=me.slice(0,512);Ai(Ze,0);var wt=h(Ze);switch(_e=wt[0],_e){case 3:Se=512;break;case 4:Se=4096;break;case 0:if(wt[1]==0)return an(me,Be);default:throw new Error("Major Version: Expected 3 or 4 saw "+_e)}Se!==512&&(Ze=me.slice(0,Se),Ai(Ze,28));var Bt=me.slice(0,Se);m(Ze,_e);var Qt=Ze.read_shift(4,"i");if(_e===3&&Qt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Qt);Ze.l+=4,Ke=Ze.read_shift(4,"i"),Ze.l+=4,Ze.chk("00100000","Mini Stream Cutoff Size: "),nt=Ze.read_shift(4,"i"),Te=Ze.read_shift(4,"i"),Ve=Ze.read_shift(4,"i"),ke=Ze.read_shift(4,"i");for(var Nt=-1,Lt=0;Lt<109&&(Nt=Ze.read_shift(4,"i"),!(Nt<0));++Lt)Ye[Lt]=Nt;var fr=g(me,Se);_(Ve,ke,fr,Se,Ye);var Or=k(fr,Ke,Ye,Se);Or[Ke].name="!Directory",Te>0&&nt!==Q&&(Or[nt].name="!MiniFAT"),Or[Ye[0]].name="!FAT",Or.fat_addrs=Ye,Or.ssz=Se;var Qr={},qr=[],Ls=[],gi=[];D(Ke,Or,fr,qr,Te,Qr,Ls,nt),b(Ls,gi,qr),qr.shift();var Us={FileIndex:Ls,FullPaths:gi};return Be&&Be.raw&&(Us.raw={header:Bt,sectors:fr}),Us}function h(me){if(me[me.l]==80&&me[me.l+1]==75)return[0,0];me.chk(H,"Header Signature: "),me.l+=16;var Be=me.read_shift(2,"u");return[me.read_shift(2,"u"),Be]}function m(me,Be){var _e=9;switch(me.l+=2,_e=me.read_shift(2)){case 9:if(Be!=3)throw new Error("Sector Shift: Expected 9 saw "+_e);break;case 12:if(Be!=4)throw new Error("Sector Shift: Expected 12 saw "+_e);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+_e)}me.chk("0600","Mini Sector Shift: "),me.chk("000000000000","Reserved: ")}function g(me,Be){for(var _e=Math.ceil(me.length/Be)-1,Se=[],Te=1;Te<_e;++Te)Se[Te-1]=me.slice(Te*Be,(Te+1)*Be);return Se[_e-1]=me.slice(_e*Be),Se}function b(me,Be,_e){for(var Se=0,Te=0,ke=0,Ke=0,nt=0,Ve=_e.length,Ye=[],Ze=[];Se<Ve;++Se)Ye[Se]=Ze[Se]=Se,Be[Se]=_e[Se];for(;nt<Ze.length;++nt)Se=Ze[nt],Te=me[Se].L,ke=me[Se].R,Ke=me[Se].C,Ye[Se]===Se&&(Te!==-1&&Ye[Te]!==Te&&(Ye[Se]=Ye[Te]),ke!==-1&&Ye[ke]!==ke&&(Ye[Se]=Ye[ke])),Ke!==-1&&(Ye[Ke]=Se),Te!==-1&&Se!=Ye[Se]&&(Ye[Te]=Ye[Se],Ze.lastIndexOf(Te)<nt&&Ze.push(Te)),ke!==-1&&Se!=Ye[Se]&&(Ye[ke]=Ye[Se],Ze.lastIndexOf(ke)<nt&&Ze.push(ke));for(Se=1;Se<Ve;++Se)Ye[Se]===Se&&(ke!==-1&&Ye[ke]!==ke?Ye[Se]=Ye[ke]:Te!==-1&&Ye[Te]!==Te&&(Ye[Se]=Ye[Te]));for(Se=1;Se<Ve;++Se)if(me[Se].type!==0){if(nt=Se,nt!=Ye[nt])do nt=Ye[nt],Be[Se]=Be[nt]+"/"+Be[Se];while(nt!==0&&Ye[nt]!==-1&&nt!=Ye[nt]);Ye[Se]=-1}for(Be[0]+="/",Se=1;Se<Ve;++Se)me[Se].type!==2&&(Be[Se]+="/")}function y(me,Be,_e){for(var Se=me.start,Te=me.size,ke=[],Ke=Se;_e&&Te>0&&Ke>=0;)ke.push(Be.slice(Ke*F,Ke*F+F)),Te-=F,Ke=uh(_e,Ke*4);return ke.length===0?ct(0):Xa(ke).slice(0,me.size)}function _(me,Be,_e,Se,Te){var ke=Q;if(me===Q){if(Be!==0)throw new Error("DIFAT chain shorter than expected")}else if(me!==-1){var Ke=_e[me],nt=(Se>>>2)-1;if(!Ke)return;for(var Ve=0;Ve<nt&&(ke=uh(Ke,Ve*4))!==Q;++Ve)Te.push(ke);_(uh(Ke,Se-4),Be-1,_e,Se,Te)}}function T(me,Be,_e,Se,Te){var ke=[],Ke=[];Te||(Te=[]);var nt=Se-1,Ve=0,Ye=0;for(Ve=Be;Ve>=0;){Te[Ve]=!0,ke[ke.length]=Ve,Ke.push(me[Ve]);var Ze=_e[Math.floor(Ve*4/Se)];if(Ye=Ve*4&nt,Se<4+Ye)throw new Error("FAT boundary crossed: "+Ve+" 4 "+Se);if(!me[Ze])break;Ve=uh(me[Ze],Ye)}return{nodes:ke,data:V6([Ke])}}function k(me,Be,_e,Se){var Te=me.length,ke=[],Ke=[],nt=[],Ve=[],Ye=Se-1,Ze=0,wt=0,Bt=0,Qt=0;for(Ze=0;Ze<Te;++Ze)if(nt=[],Bt=Ze+Be,Bt>=Te&&(Bt-=Te),!Ke[Bt]){Ve=[];var Nt=[];for(wt=Bt;wt>=0;){Nt[wt]=!0,Ke[wt]=!0,nt[nt.length]=wt,Ve.push(me[wt]);var Lt=_e[Math.floor(wt*4/Se)];if(Qt=wt*4&Ye,Se<4+Qt)throw new Error("FAT boundary crossed: "+wt+" 4 "+Se);if(!me[Lt]||(wt=uh(me[Lt],Qt),Nt[wt]))break}ke[Bt]={nodes:nt,data:V6([Ve])}}return ke}function D(me,Be,_e,Se,Te,ke,Ke,nt){for(var Ve=0,Ye=Se.length?2:0,Ze=Be[me].data,wt=0,Bt=0,Qt;wt<Ze.length;wt+=128){var Nt=Ze.slice(wt,wt+128);Ai(Nt,64),Bt=Nt.read_shift(2),Qt=sT(Nt,0,Bt-Ye),Se.push(Qt);var Lt={name:Qt,type:Nt.read_shift(1),color:Nt.read_shift(1),L:Nt.read_shift(4,"i"),R:Nt.read_shift(4,"i"),C:Nt.read_shift(4,"i"),clsid:Nt.read_shift(16),state:Nt.read_shift(4,"i"),start:0,size:0},fr=Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2);fr!==0&&(Lt.ct=M(Nt,Nt.l-8));var Or=Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2)+Nt.read_shift(2);Or!==0&&(Lt.mt=M(Nt,Nt.l-8)),Lt.start=Nt.read_shift(4,"i"),Lt.size=Nt.read_shift(4,"i"),Lt.size<0&&Lt.start<0&&(Lt.size=Lt.type=0,Lt.start=Q,Lt.name=""),Lt.type===5?(Ve=Lt.start,Te>0&&Ve!==Q&&(Be[Ve].name="!StreamData")):Lt.size>=4096?(Lt.storage="fat",Be[Lt.start]===void 0&&(Be[Lt.start]=T(_e,Lt.start,Be.fat_addrs,Be.ssz)),Be[Lt.start].name=Lt.name,Lt.content=Be[Lt.start].data.slice(0,Lt.size)):(Lt.storage="minifat",Lt.size<0?Lt.size=0:Ve!==Q&&Lt.start!==Q&&Be[Ve]&&(Lt.content=y(Lt,Be[Ve].data,(Be[nt]||{}).data))),Lt.content&&Ai(Lt.content,0),ke[Qt]=Lt,Ke.push(Lt)}}function M(me,Be){return new Date((tl(me,Be+4)/1e7*Math.pow(2,32)+tl(me,Be)/1e7-11644473600)*1e3)}function P(me,Be){return u(),d(l.readFileSync(me),Be)}function L(me,Be){var _e=Be&&Be.type;switch(_e||Jr&&Buffer.isBuffer(me)&&(_e="buffer"),_e||"base64"){case"file":return P(me,Be);case"base64":return d(rl(ll(me)),Be);case"binary":return d(rl(me),Be)}return d(me,Be)}function C(me,Be){var _e=Be||{},Se=_e.root||"Root Entry";if(me.FullPaths||(me.FullPaths=[]),me.FileIndex||(me.FileIndex=[]),me.FullPaths.length!==me.FileIndex.length)throw new Error("inconsistent CFB structure");me.FullPaths.length===0&&(me.FullPaths[0]=Se+"/",me.FileIndex[0]={name:Se,type:5}),_e.CLSID&&(me.FileIndex[0].clsid=_e.CLSID),E(me)}function E(me){var Be="Sh33tJ5";if(!Ar.find(me,"/"+Be)){var _e=ct(4);_e[0]=55,_e[1]=_e[3]=50,_e[2]=54,me.FileIndex.push({name:Be,type:2,content:_e,size:4,L:69,R:69,C:69}),me.FullPaths.push(me.FullPaths[0]+Be),B(me)}}function B(me,Be){C(me);for(var _e=!1,Se=!1,Te=me.FullPaths.length-1;Te>=0;--Te){var ke=me.FileIndex[Te];switch(ke.type){case 0:Se?_e=!0:(me.FileIndex.pop(),me.FullPaths.pop());break;case 1:case 2:case 5:Se=!0,isNaN(ke.R*ke.L*ke.C)&&(_e=!0),ke.R>-1&&ke.L>-1&&ke.R==ke.L&&(_e=!0);break;default:_e=!0;break}}if(!(!_e&&!Be)){var Ke=new Date(1987,1,19),nt=0,Ve=Object.create?Object.create(null):{},Ye=[];for(Te=0;Te<me.FullPaths.length;++Te)Ve[me.FullPaths[Te]]=!0,me.FileIndex[Te].type!==0&&Ye.push([me.FullPaths[Te],me.FileIndex[Te]]);for(Te=0;Te<Ye.length;++Te){var Ze=n(Ye[Te][0]);Se=Ve[Ze],Se||(Ye.push([Ze,{name:s(Ze).replace("/",""),type:1,clsid:J,ct:Ke,mt:Ke,content:null}]),Ve[Ze]=!0)}for(Ye.sort(function(Qt,Nt){return r(Qt[0],Nt[0])}),me.FullPaths=[],me.FileIndex=[],Te=0;Te<Ye.length;++Te)me.FullPaths[Te]=Ye[Te][0],me.FileIndex[Te]=Ye[Te][1];for(Te=0;Te<Ye.length;++Te){var wt=me.FileIndex[Te],Bt=me.FullPaths[Te];if(wt.name=s(Bt).replace("/",""),wt.L=wt.R=wt.C=-(wt.color=1),wt.size=wt.content?wt.content.length:0,wt.start=0,wt.clsid=wt.clsid||J,Te===0)wt.C=Ye.length>1?1:-1,wt.size=0,wt.type=5;else if(Bt.slice(-1)=="/"){for(nt=Te+1;nt<Ye.length&&n(me.FullPaths[nt])!=Bt;++nt);for(wt.C=nt>=Ye.length?-1:nt,nt=Te+1;nt<Ye.length&&n(me.FullPaths[nt])!=n(Bt);++nt);wt.R=nt>=Ye.length?-1:nt,wt.type=1}else n(me.FullPaths[Te+1]||"")==n(Bt)&&(wt.R=Te+1),wt.type=2}}}function O(me,Be){var _e=Be||{};if(_e.fileType=="mad")return Gt(me,_e);switch(B(me),_e.fileType){case"zip":return gs(me,_e)}var Se=function(Qt){for(var Nt=0,Lt=0,fr=0;fr<Qt.FileIndex.length;++fr){var Or=Qt.FileIndex[fr];if(Or.content){var Qr=Or.content.length;Qr>0&&(Qr<4096?Nt+=Qr+63>>6:Lt+=Qr+511>>9)}}for(var qr=Qt.FullPaths.length+3>>2,Ls=Nt+7>>3,gi=Nt+127>>7,Us=Ls+Lt+qr+gi,ha=Us+127>>7,Ws=ha<=109?0:Math.ceil((ha-109)/127);Us+ha+Ws+127>>7>ha;)Ws=++ha<=109?0:Math.ceil((ha-109)/127);var ka=[1,Ws,ha,gi,qr,Lt,Nt,0];return Qt.FileIndex[0].size=Nt<<6,ka[7]=(Qt.FileIndex[0].start=ka[0]+ka[1]+ka[2]+ka[3]+ka[4]+ka[5])+(ka[6]+7>>3),ka}(me),Te=ct(Se[7]<<9),ke=0,Ke=0;{for(ke=0;ke<8;++ke)Te.write_shift(1,ne[ke]);for(ke=0;ke<8;++ke)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),ke=0;ke<3;++ke)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,Se[2]),Te.write_shift(4,Se[0]+Se[1]+Se[2]+Se[3]-1),Te.write_shift(4,0),Te.write_shift(4,4096),Te.write_shift(4,Se[3]?Se[0]+Se[1]+Se[2]-1:Q),Te.write_shift(4,Se[3]),Te.write_shift(-4,Se[1]?Se[0]-1:Q),Te.write_shift(4,Se[1]),ke=0;ke<109;++ke)Te.write_shift(-4,ke<Se[2]?Se[1]+ke:-1)}if(Se[1])for(Ke=0;Ke<Se[1];++Ke){for(;ke<236+Ke*127;++ke)Te.write_shift(-4,ke<Se[2]?Se[1]+ke:-1);Te.write_shift(-4,Ke===Se[1]-1?Q:Ke+1)}var nt=function(Qt){for(Ke+=Qt;ke<Ke-1;++ke)Te.write_shift(-4,ke+1);Qt&&(++ke,Te.write_shift(-4,Q))};for(Ke=ke=0,Ke+=Se[1];ke<Ke;++ke)Te.write_shift(-4,re.DIFSECT);for(Ke+=Se[2];ke<Ke;++ke)Te.write_shift(-4,re.FATSECT);nt(Se[3]),nt(Se[4]);for(var Ve=0,Ye=0,Ze=me.FileIndex[0];Ve<me.FileIndex.length;++Ve)Ze=me.FileIndex[Ve],Ze.content&&(Ye=Ze.content.length,!(Ye<4096)&&(Ze.start=Ke,nt(Ye+511>>9)));for(nt(Se[6]+7>>3);Te.l&511;)Te.write_shift(-4,re.ENDOFCHAIN);for(Ke=ke=0,Ve=0;Ve<me.FileIndex.length;++Ve)Ze=me.FileIndex[Ve],Ze.content&&(Ye=Ze.content.length,!(!Ye||Ye>=4096)&&(Ze.start=Ke,nt(Ye+63>>6)));for(;Te.l&511;)Te.write_shift(-4,re.ENDOFCHAIN);for(ke=0;ke<Se[4]<<2;++ke){var wt=me.FullPaths[ke];if(!wt||wt.length===0){for(Ve=0;Ve<17;++Ve)Te.write_shift(4,0);for(Ve=0;Ve<3;++Ve)Te.write_shift(4,-1);for(Ve=0;Ve<12;++Ve)Te.write_shift(4,0);continue}Ze=me.FileIndex[ke],ke===0&&(Ze.start=Ze.size?Ze.start-1:Q);var Bt=ke===0&&_e.root||Ze.name;if(Ye=2*(Bt.length+1),Te.write_shift(64,Bt,"utf16le"),Te.write_shift(2,Ye),Te.write_shift(1,Ze.type),Te.write_shift(1,Ze.color),Te.write_shift(-4,Ze.L),Te.write_shift(-4,Ze.R),Te.write_shift(-4,Ze.C),Ze.clsid)Te.write_shift(16,Ze.clsid,"hex");else for(Ve=0;Ve<4;++Ve)Te.write_shift(4,0);Te.write_shift(4,Ze.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,Ze.start),Te.write_shift(4,Ze.size),Te.write_shift(4,0)}for(ke=1;ke<me.FileIndex.length;++ke)if(Ze=me.FileIndex[ke],Ze.size>=4096)if(Te.l=Ze.start+1<<9,Jr&&Buffer.isBuffer(Ze.content))Ze.content.copy(Te,Te.l,0,Ze.size),Te.l+=Ze.size+511&-512;else{for(Ve=0;Ve<Ze.size;++Ve)Te.write_shift(1,Ze.content[Ve]);for(;Ve&511;++Ve)Te.write_shift(1,0)}for(ke=1;ke<me.FileIndex.length;++ke)if(Ze=me.FileIndex[ke],Ze.size>0&&Ze.size<4096)if(Jr&&Buffer.isBuffer(Ze.content))Ze.content.copy(Te,Te.l,0,Ze.size),Te.l+=Ze.size+63&-64;else{for(Ve=0;Ve<Ze.size;++Ve)Te.write_shift(1,Ze.content[Ve]);for(;Ve&63;++Ve)Te.write_shift(1,0)}if(Jr)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function R(me,Be){var _e=me.FullPaths.map(function(Ve){return Ve.toUpperCase()}),Se=_e.map(function(Ve){var Ye=Ve.split("/");return Ye[Ye.length-(Ve.slice(-1)=="/"?2:1)]}),Te=!1;Be.charCodeAt(0)===47?(Te=!0,Be=_e[0].slice(0,-1)+Be):Te=Be.indexOf("/")!==-1;var ke=Be.toUpperCase(),Ke=Te===!0?_e.indexOf(ke):Se.indexOf(ke);if(Ke!==-1)return me.FileIndex[Ke];var nt=!ke.match(Sg);for(ke=ke.replace(oo,""),nt&&(ke=ke.replace(Sg,"!")),Ke=0;Ke<_e.length;++Ke)if((nt?_e[Ke].replace(Sg,"!"):_e[Ke]).replace(oo,"")==ke||(nt?Se[Ke].replace(Sg,"!"):Se[Ke]).replace(oo,"")==ke)return me.FileIndex[Ke];return null}var F=64,Q=-2,H="d0cf11e0a1b11ae1",ne=[208,207,17,224,161,177,26,225],J="00000000000000000000000000000000",re={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Q,FREESECT:-1,HEADER_SIGNATURE:H,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:J,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function G(me,Be,_e){u();var Se=O(me,_e);l.writeFileSync(Be,Se)}function q(me){for(var Be=new Array(me.length),_e=0;_e<me.length;++_e)Be[_e]=String.fromCharCode(me[_e]);return Be.join("")}function W(me,Be){var _e=O(me,Be);switch(Be&&Be.type||"buffer"){case"file":return u(),l.writeFileSync(Be.filename,_e),_e;case"binary":return typeof _e=="string"?_e:q(_e);case"base64":return _x(typeof _e=="string"?_e:q(_e));case"buffer":if(Jr)return Buffer.isBuffer(_e)?_e:KA(_e);case"array":return typeof _e=="string"?rl(_e):_e}return _e}var ie;function j(me){try{var Be=me.InflateRaw,_e=new Be;if(_e._processChunk(new Uint8Array([3,0]),_e._finishFlushFlag),_e.bytesRead)ie=me;else throw new Error("zlib does not expose bytesRead")}catch(Se){console.error("cannot use native zlib: "+(Se.message||Se))}}function Y(me,Be){if(!ie)return Fr(me,Be);var _e=ie.InflateRaw,Se=new _e,Te=Se._processChunk(me.slice(me.l),Se._finishFlushFlag);return me.l+=Se.bytesRead,Te}function ee(me){return ie?ie.deflateRawSync(me):Ft(me)}var te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],be=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function he(me){var Be=(me<<1|me<<11)&139536|(me<<5|me<<15)&558144;return(Be>>16|Be>>8|Be)&255}for(var fe=typeof Uint8Array<"u",ge=fe?new Uint8Array(256):[],de=0;de<256;++de)ge[de]=he(de);function oe(me,Be){var _e=ge[me&255];return Be<=8?_e>>>8-Be:(_e=_e<<8|ge[me>>8&255],Be<=16?_e>>>16-Be:(_e=_e<<8|ge[me>>16&255],_e>>>24-Be))}function Ue(me,Be){var _e=Be&7,Se=Be>>>3;return(me[Se]|(_e<=6?0:me[Se+1]<<8))>>>_e&3}function tt(me,Be){var _e=Be&7,Se=Be>>>3;return(me[Se]|(_e<=5?0:me[Se+1]<<8))>>>_e&7}function Fe(me,Be){var _e=Be&7,Se=Be>>>3;return(me[Se]|(_e<=4?0:me[Se+1]<<8))>>>_e&15}function Ee(me,Be){var _e=Be&7,Se=Be>>>3;return(me[Se]|(_e<=3?0:me[Se+1]<<8))>>>_e&31}function De(me,Be){var _e=Be&7,Se=Be>>>3;return(me[Se]|(_e<=1?0:me[Se+1]<<8))>>>_e&127}function Qe(me,Be,_e){var Se=Be&7,Te=Be>>>3,ke=(1<<_e)-1,Ke=me[Te]>>>Se;return _e<8-Se||(Ke|=me[Te+1]<<8-Se,_e<16-Se)||(Ke|=me[Te+2]<<16-Se,_e<24-Se)||(Ke|=me[Te+3]<<24-Se),Ke&ke}function $e(me,Be,_e){var Se=Be&7,Te=Be>>>3;return Se<=5?me[Te]|=(_e&7)<<Se:(me[Te]|=_e<<Se&255,me[Te+1]=(_e&7)>>8-Se),Be+3}function ut(me,Be,_e){var Se=Be&7,Te=Be>>>3;return _e=(_e&1)<<Se,me[Te]|=_e,Be+1}function Et(me,Be,_e){var Se=Be&7,Te=Be>>>3;return _e<<=Se,me[Te]|=_e&255,_e>>>=8,me[Te+1]=_e,Be+8}function lt(me,Be,_e){var Se=Be&7,Te=Be>>>3;return _e<<=Se,me[Te]|=_e&255,_e>>>=8,me[Te+1]=_e&255,me[Te+2]=_e>>>8,Be+16}function Dt(me,Be){var _e=me.length,Se=2*_e>Be?2*_e:Be+5,Te=0;if(_e>=Be)return me;if(Jr){var ke=E6(Se);if(me.copy)me.copy(ke);else for(;Te<me.length;++Te)ke[Te]=me[Te];return ke}else if(fe){var Ke=new Uint8Array(Se);if(Ke.set)Ke.set(me);else for(;Te<_e;++Te)Ke[Te]=me[Te];return Ke}return me.length=Se,me}function zt(me){for(var Be=new Array(me),_e=0;_e<me;++_e)Be[_e]=0;return Be}function Jt(me,Be,_e){var Se=1,Te=0,ke=0,Ke=0,nt=0,Ve=me.length,Ye=fe?new Uint16Array(32):zt(32);for(ke=0;ke<32;++ke)Ye[ke]=0;for(ke=Ve;ke<_e;++ke)me[ke]=0;Ve=me.length;var Ze=fe?new Uint16Array(Ve):zt(Ve);for(ke=0;ke<Ve;++ke)Ye[Te=me[ke]]++,Se<Te&&(Se=Te),Ze[ke]=0;for(Ye[0]=0,ke=1;ke<=Se;++ke)Ye[ke+16]=nt=nt+Ye[ke-1]<<1;for(ke=0;ke<Ve;++ke)nt=me[ke],nt!=0&&(Ze[ke]=Ye[nt+16]++);var wt=0;for(ke=0;ke<Ve;++ke)if(wt=me[ke],wt!=0)for(nt=oe(Ze[ke],Se)>>Se-wt,Ke=(1<<Se+4-wt)-1;Ke>=0;--Ke)Be[nt|Ke<<wt]=wt&15|ke<<4;return Se}var Rt=fe?new Uint16Array(512):zt(512),Ot=fe?new Uint16Array(32):zt(32);if(!fe){for(var qt=0;qt<512;++qt)Rt[qt]=0;for(qt=0;qt<32;++qt)Ot[qt]=0}(function(){for(var me=[],Be=0;Be<32;Be++)me.push(5);Jt(me,Ot,32);var _e=[];for(Be=0;Be<=143;Be++)_e.push(8);for(;Be<=255;Be++)_e.push(9);for(;Be<=279;Be++)_e.push(7);for(;Be<=287;Be++)_e.push(8);Jt(_e,Rt,288)})();var It=function(){for(var Be=fe?new Uint8Array(32768):[],_e=0,Se=0;_e<be.length-1;++_e)for(;Se<be[_e+1];++Se)Be[Se]=_e;for(;Se<32768;++Se)Be[Se]=29;var Te=fe?new Uint8Array(259):[];for(_e=0,Se=0;_e<ce.length-1;++_e)for(;Se<ce[_e+1];++Se)Te[Se]=_e;function ke(nt,Ve){for(var Ye=0;Ye<nt.length;){var Ze=Math.min(65535,nt.length-Ye),wt=Ye+Ze==nt.length;for(Ve.write_shift(1,+wt),Ve.write_shift(2,Ze),Ve.write_shift(2,~Ze&65535);Ze-- >0;)Ve[Ve.l++]=nt[Ye++]}return Ve.l}function Ke(nt,Ve){for(var Ye=0,Ze=0,wt=fe?new Uint16Array(32768):[];Ze<nt.length;){var Bt=Math.min(65535,nt.length-Ze);if(Bt<10){for(Ye=$e(Ve,Ye,+(Ze+Bt==nt.length)),Ye&7&&(Ye+=8-(Ye&7)),Ve.l=Ye/8|0,Ve.write_shift(2,Bt),Ve.write_shift(2,~Bt&65535);Bt-- >0;)Ve[Ve.l++]=nt[Ze++];Ye=Ve.l*8;continue}Ye=$e(Ve,Ye,+(Ze+Bt==nt.length)+2);for(var Qt=0;Bt-- >0;){var Nt=nt[Ze];Qt=(Qt<<5^Nt)&32767;var Lt=-1,fr=0;if((Lt=wt[Qt])&&(Lt|=Ze&-32768,Lt>Ze&&(Lt-=32768),Lt<Ze))for(;nt[Lt+fr]==nt[Ze+fr]&&fr<250;)++fr;if(fr>2){Nt=Te[fr],Nt<=22?Ye=Et(Ve,Ye,ge[Nt+1]>>1)-1:(Et(Ve,Ye,3),Ye+=5,Et(Ve,Ye,ge[Nt-23]>>5),Ye+=3);var Or=Nt<8?0:Nt-4>>2;Or>0&&(lt(Ve,Ye,fr-ce[Nt]),Ye+=Or),Nt=Be[Ze-Lt],Ye=Et(Ve,Ye,ge[Nt]>>3),Ye-=3;var Qr=Nt<4?0:Nt-2>>1;Qr>0&&(lt(Ve,Ye,Ze-Lt-be[Nt]),Ye+=Qr);for(var qr=0;qr<fr;++qr)wt[Qt]=Ze&32767,Qt=(Qt<<5^nt[Ze])&32767,++Ze;Bt-=fr-1}else Nt<=143?Nt=Nt+48:Ye=ut(Ve,Ye,1),Ye=Et(Ve,Ye,ge[Nt]),wt[Qt]=Ze&32767,++Ze}Ye=Et(Ve,Ye,0)-1}return Ve.l=(Ye+7)/8|0,Ve.l}return function(Ve,Ye){return Ve.length<8?ke(Ve,Ye):Ke(Ve,Ye)}}();function Ft(me){var Be=ct(50+Math.floor(me.length*1.1)),_e=It(me,Be);return Be.slice(0,_e)}var pt=fe?new Uint16Array(32768):zt(32768),br=fe?new Uint16Array(32768):zt(32768),Zt=fe?new Uint16Array(128):zt(128),hn=1,vr=1;function Ur(me,Be){var _e=Ee(me,Be)+257;Be+=5;var Se=Ee(me,Be)+1;Be+=5;var Te=Fe(me,Be)+4;Be+=4;for(var ke=0,Ke=fe?new Uint8Array(19):zt(19),nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ve=1,Ye=fe?new Uint8Array(8):zt(8),Ze=fe?new Uint8Array(8):zt(8),wt=Ke.length,Bt=0;Bt<Te;++Bt)Ke[te[Bt]]=ke=tt(me,Be),Ve<ke&&(Ve=ke),Ye[ke]++,Be+=3;var Qt=0;for(Ye[0]=0,Bt=1;Bt<=Ve;++Bt)Ze[Bt]=Qt=Qt+Ye[Bt-1]<<1;for(Bt=0;Bt<wt;++Bt)(Qt=Ke[Bt])!=0&&(nt[Bt]=Ze[Qt]++);var Nt=0;for(Bt=0;Bt<wt;++Bt)if(Nt=Ke[Bt],Nt!=0){Qt=ge[nt[Bt]]>>8-Nt;for(var Lt=(1<<7-Nt)-1;Lt>=0;--Lt)Zt[Qt|Lt<<Nt]=Nt&7|Bt<<3}var fr=[];for(Ve=1;fr.length<_e+Se;)switch(Qt=Zt[De(me,Be)],Be+=Qt&7,Qt>>>=3){case 16:for(ke=3+Ue(me,Be),Be+=2,Qt=fr[fr.length-1];ke-- >0;)fr.push(Qt);break;case 17:for(ke=3+tt(me,Be),Be+=3;ke-- >0;)fr.push(0);break;case 18:for(ke=11+De(me,Be),Be+=7;ke-- >0;)fr.push(0);break;default:fr.push(Qt),Ve<Qt&&(Ve=Qt);break}var Or=fr.slice(0,_e),Qr=fr.slice(_e);for(Bt=_e;Bt<286;++Bt)Or[Bt]=0;for(Bt=Se;Bt<30;++Bt)Qr[Bt]=0;return hn=Jt(Or,pt,286),vr=Jt(Qr,br,30),Be}function Dn(me,Be){if(me[0]==3&&!(me[1]&3))return[Cf(Be),2];for(var _e=0,Se=0,Te=E6(Be||1<<18),ke=0,Ke=Te.length>>>0,nt=0,Ve=0;(Se&1)==0;){if(Se=tt(me,_e),_e+=3,Se>>>1)Se>>1==1?(nt=9,Ve=5):(_e=Ur(me,_e),nt=hn,Ve=vr);else{_e&7&&(_e+=8-(_e&7));var Ye=me[_e>>>3]|me[(_e>>>3)+1]<<8;if(_e+=32,Ye>0)for(!Be&&Ke<ke+Ye&&(Te=Dt(Te,ke+Ye),Ke=Te.length);Ye-- >0;)Te[ke++]=me[_e>>>3],_e+=8;continue}for(;;){!Be&&Ke<ke+32767&&(Te=Dt(Te,ke+32767),Ke=Te.length);var Ze=Qe(me,_e,nt),wt=Se>>>1==1?Rt[Ze]:pt[Ze];if(_e+=wt&15,wt>>>=4,(wt>>>8&255)===0)Te[ke++]=wt;else{if(wt==256)break;wt-=257;var Bt=wt<8?0:wt-4>>2;Bt>5&&(Bt=0);var Qt=ke+ce[wt];Bt>0&&(Qt+=Qe(me,_e,Bt),_e+=Bt),Ze=Qe(me,_e,Ve),wt=Se>>>1==1?Ot[Ze]:br[Ze],_e+=wt&15,wt>>>=4;var Nt=wt<4?0:wt-2>>1,Lt=be[wt];for(Nt>0&&(Lt+=Qe(me,_e,Nt),_e+=Nt),!Be&&Ke<Qt&&(Te=Dt(Te,Qt+100),Ke=Te.length);ke<Qt;)Te[ke]=Te[ke-Lt],++ke}}}return Be?[Te,_e+7>>>3]:[Te.slice(0,ke),_e+7>>>3]}function Fr(me,Be){var _e=me.slice(me.l||0),Se=Dn(_e,Be);return me.l+=Se[1],Se[0]}function da(me,Be){if(me)typeof console<"u"&&console.error(Be);else throw new Error(Be)}function an(me,Be){var _e=me;Ai(_e,0);var Se=[],Te=[],ke={FileIndex:Se,FullPaths:Te};C(ke,{root:Be.root});for(var Ke=_e.length-4;(_e[Ke]!=80||_e[Ke+1]!=75||_e[Ke+2]!=5||_e[Ke+3]!=6)&&Ke>=0;)--Ke;_e.l=Ke+4,_e.l+=4;var nt=_e.read_shift(2);_e.l+=6;var Ve=_e.read_shift(4);for(_e.l=Ve,Ke=0;Ke<nt;++Ke){_e.l+=20;var Ye=_e.read_shift(4),Ze=_e.read_shift(4),wt=_e.read_shift(2),Bt=_e.read_shift(2),Qt=_e.read_shift(2);_e.l+=8;var Nt=_e.read_shift(4),Lt=o(_e.slice(_e.l+wt,_e.l+wt+Bt));_e.l+=wt+Bt+Qt;var fr=_e.l;_e.l=Nt+4,ns(_e,Ye,Ze,ke,Lt),_e.l=fr}return ke}function ns(me,Be,_e,Se,Te){me.l+=2;var ke=me.read_shift(2),Ke=me.read_shift(2),nt=i(me);if(ke&8257)throw new Error("Unsupported ZIP encryption");for(var Ve=me.read_shift(4),Ye=me.read_shift(4),Ze=me.read_shift(4),wt=me.read_shift(2),Bt=me.read_shift(2),Qt="",Nt=0;Nt<wt;++Nt)Qt+=String.fromCharCode(me[me.l++]);if(Bt){var Lt=o(me.slice(me.l,me.l+Bt));(Lt[21589]||{}).mt&&(nt=Lt[21589].mt),((Te||{})[21589]||{}).mt&&(nt=Te[21589].mt)}me.l+=Bt;var fr=me.slice(me.l,me.l+Ye);switch(Ke){case 8:fr=Y(me,Ze);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ke)}var Or=!1;ke&8&&(Ve=me.read_shift(4),Ve==134695760&&(Ve=me.read_shift(4),Or=!0),Ye=me.read_shift(4),Ze=me.read_shift(4)),Ye!=Be&&da(Or,"Bad compressed size: "+Be+" != "+Ye),Ze!=_e&&da(Or,"Bad uncompressed size: "+_e+" != "+Ze),on(Se,Qt,fr,{unsafe:!0,mt:nt})}function gs(me,Be){var _e=Be||{},Se=[],Te=[],ke=ct(1),Ke=_e.compression?8:0,nt=0,Ve=0,Ye=0,Ze=0,wt=0,Bt=me.FullPaths[0],Qt=Bt,Nt=me.FileIndex[0],Lt=[],fr=0;for(Ve=1;Ve<me.FullPaths.length;++Ve)if(Qt=me.FullPaths[Ve].slice(Bt.length),Nt=me.FileIndex[Ve],!(!Nt.size||!Nt.content||Qt=="Sh33tJ5")){var Or=Ze,Qr=ct(Qt.length);for(Ye=0;Ye<Qt.length;++Ye)Qr.write_shift(1,Qt.charCodeAt(Ye)&127);Qr=Qr.slice(0,Qr.l),Lt[wt]=kue.buf(Nt.content,0);var qr=Nt.content;Ke==8&&(qr=ee(qr)),ke=ct(30),ke.write_shift(4,67324752),ke.write_shift(2,20),ke.write_shift(2,nt),ke.write_shift(2,Ke),Nt.mt?a(ke,Nt.mt):ke.write_shift(4,0),ke.write_shift(-4,Lt[wt]),ke.write_shift(4,qr.length),ke.write_shift(4,Nt.content.length),ke.write_shift(2,Qr.length),ke.write_shift(2,0),Ze+=ke.length,Se.push(ke),Ze+=Qr.length,Se.push(Qr),Ze+=qr.length,Se.push(qr),ke=ct(46),ke.write_shift(4,33639248),ke.write_shift(2,0),ke.write_shift(2,20),ke.write_shift(2,nt),ke.write_shift(2,Ke),ke.write_shift(4,0),ke.write_shift(-4,Lt[wt]),ke.write_shift(4,qr.length),ke.write_shift(4,Nt.content.length),ke.write_shift(2,Qr.length),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(4,0),ke.write_shift(4,Or),fr+=ke.l,Te.push(ke),fr+=Qr.length,Te.push(Qr),++wt}return ke=ct(22),ke.write_shift(4,101010256),ke.write_shift(2,0),ke.write_shift(2,0),ke.write_shift(2,wt),ke.write_shift(2,wt),ke.write_shift(4,fr),ke.write_shift(4,Ze),ke.write_shift(2,0),Xa([Xa(Se),Xa(Te),ke])}var jr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function nr(me,Be){if(me.ctype)return me.ctype;var _e=me.name||"",Se=_e.match(/\.([^\.]+)$/);return Se&&jr[Se[1]]||Be&&(Se=(_e=Be).match(/[\.\\]([^\.\\])+$/),Se&&jr[Se[1]])?jr[Se[1]]:"application/octet-stream"}function Gr(me){for(var Be=_x(me),_e=[],Se=0;Se<Be.length;Se+=76)_e.push(Be.slice(Se,Se+76));return _e.join(`\r
`)+`\r
`}function fa(me){var Be=me.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ye){var Ze=Ye.charCodeAt(0).toString(16).toUpperCase();return"="+(Ze.length==1?"0"+Ze:Ze)});Be=Be.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Be.charAt(0)==`
`&&(Be="=0D"+Be.slice(1)),Be=Be.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var _e=[],Se=Be.split(`\r
`),Te=0;Te<Se.length;++Te){var ke=Se[Te];if(ke.length==0){_e.push("");continue}for(var Ke=0;Ke<ke.length;){var nt=76,Ve=ke.slice(Ke,Ke+nt);Ve.charAt(nt-1)=="="?nt--:Ve.charAt(nt-2)=="="?nt-=2:Ve.charAt(nt-3)=="="&&(nt-=3),Ve=ke.slice(Ke,Ke+nt),Ke+=nt,Ke<ke.length&&(Ve+="="),_e.push(Ve)}}return _e.join(`\r
`)}function Wn(me){for(var Be=[],_e=0;_e<me.length;++_e){for(var Se=me[_e];_e<=me.length&&Se.charAt(Se.length-1)=="=";)Se=Se.slice(0,Se.length-1)+me[++_e];Be.push(Se)}for(var Te=0;Te<Be.length;++Te)Be[Te]=Be[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(ke){return String.fromCharCode(parseInt(ke.slice(1),16))});return rl(Be.join(`\r
`))}function _s(me,Be,_e){for(var Se="",Te="",ke="",Ke,nt=0;nt<10;++nt){var Ve=Be[nt];if(!Ve||Ve.match(/^\s*$/))break;var Ye=Ve.match(/^(.*?):\s*([^\s].*)$/);if(Ye)switch(Ye[1].toLowerCase()){case"content-location":Se=Ye[2].trim();break;case"content-type":ke=Ye[2].trim();break;case"content-transfer-encoding":Te=Ye[2].trim();break}}switch(++nt,Te.toLowerCase()){case"base64":Ke=rl(ll(Be.slice(nt).join("")));break;case"quoted-printable":Ke=Wn(Be.slice(nt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var Ze=on(me,Se.slice(_e.length),Ke,{unsafe:!0});ke&&(Ze.ctype=ke)}function Ba(me,Be){if(q(me.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var _e=Be&&Be.root||"",Se=(Jr&&Buffer.isBuffer(me)?me.toString("binary"):q(me)).split(`\r
`),Te=0,ke="";for(Te=0;Te<Se.length;++Te)if(ke=Se[Te],!!/^Content-Location:/i.test(ke)&&(ke=ke.slice(ke.indexOf("file")),_e||(_e=ke.slice(0,ke.lastIndexOf("/")+1)),ke.slice(0,_e.length)!=_e))for(;_e.length>0&&(_e=_e.slice(0,_e.length-1),_e=_e.slice(0,_e.lastIndexOf("/")+1),ke.slice(0,_e.length)!=_e););var Ke=(Se[1]||"").match(/boundary="(.*?)"/);if(!Ke)throw new Error("MAD cannot find boundary");var nt="--"+(Ke[1]||""),Ve=[],Ye=[],Ze={FileIndex:Ve,FullPaths:Ye};C(Ze);var wt,Bt=0;for(Te=0;Te<Se.length;++Te){var Qt=Se[Te];Qt!==nt&&Qt!==nt+"--"||(Bt++&&_s(Ze,Se.slice(wt,Te),_e),wt=Te)}return Ze}function Gt(me,Be){var _e=Be||{},Se=_e.boundary||"SheetJS";Se="------="+Se;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Se.slice(2)+'"',"","",""],ke=me.FullPaths[0],Ke=ke,nt=me.FileIndex[0],Ve=1;Ve<me.FullPaths.length;++Ve)if(Ke=me.FullPaths[Ve].slice(ke.length),nt=me.FileIndex[Ve],!(!nt.size||!nt.content||Ke=="Sh33tJ5")){Ke=Ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(fr){return"_x"+fr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(fr){return"_u"+fr.charCodeAt(0).toString(16)+"_"});for(var Ye=nt.content,Ze=Jr&&Buffer.isBuffer(Ye)?Ye.toString("binary"):q(Ye),wt=0,Bt=Math.min(1024,Ze.length),Qt=0,Nt=0;Nt<=Bt;++Nt)(Qt=Ze.charCodeAt(Nt))>=32&&Qt<128&&++wt;var Lt=wt>=Bt*4/5;Te.push(Se),Te.push("Content-Location: "+(_e.root||"file:///C:/SheetJS/")+Ke),Te.push("Content-Transfer-Encoding: "+(Lt?"quoted-printable":"base64")),Te.push("Content-Type: "+nr(nt,Ke)),Te.push(""),Te.push(Lt?fa(Ze):Gr(Ze))}return Te.push(Se+`--\r
`),Te.join(`\r
`)}function mn(me){var Be={};return C(Be,me),Be}function on(me,Be,_e,Se){var Te=Se&&Se.unsafe;Te||C(me);var ke=!Te&&Ar.find(me,Be);if(!ke){var Ke=me.FullPaths[0];Be.slice(0,Ke.length)==Ke?Ke=Be:(Ke.slice(-1)!="/"&&(Ke+="/"),Ke=(Ke+Be).replace("//","/")),ke={name:s(Be),type:2},me.FileIndex.push(ke),me.FullPaths.push(Ke),Te||Ar.utils.cfb_gc(me)}return ke.content=_e,ke.size=_e?_e.length:0,Se&&(Se.CLSID&&(ke.clsid=Se.CLSID),Se.mt&&(ke.mt=Se.mt),Se.ct&&(ke.ct=Se.ct)),ke}function Rn(me,Be){C(me);var _e=Ar.find(me,Be);if(_e){for(var Se=0;Se<me.FileIndex.length;++Se)if(me.FileIndex[Se]==_e)return me.FileIndex.splice(Se,1),me.FullPaths.splice(Se,1),!0}return!1}function jn(me,Be,_e){C(me);var Se=Ar.find(me,Be);if(Se){for(var Te=0;Te<me.FileIndex.length;++Te)if(me.FileIndex[Te]==Se)return me.FileIndex[Te].name=s(_e),me.FullPaths[Te]=_e,!0}return!1}function Yn(me){B(me,!0)}return e.find=R,e.read=L,e.parse=d,e.write=W,e.writeFile=G,e.utils={cfb_new:mn,cfb_add:on,cfb_del:Rn,cfb_mov:jn,cfb_gc:Yn,ReadShift:Wg,CheckField:kj,prep_blob:Ai,bconcat:Xa,use_zlib:j,_deflateRaw:Ft,_inflateRaw:Fr,consts:re},e}();function Iue(t){return typeof t=="string"?nb(t):Array.isArray(t)?nue(t):t}function g1(t,e,r){if(typeof Deno<"u"){if(r&&typeof e=="string")switch(r){case"utf8":e=new TextEncoder(r).encode(e);break;case"binary":e=nb(e);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(t,e)}var n=r=="utf8"?_u(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,t);if(typeof Blob<"u"){var s=new Blob([Iue(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,t);if(typeof saveAs<"u")return saveAs(s,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var a=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),chrome.downloads.download({url:a,filename:t,saveAs:!0});var i=document.createElement("a");if(i.download!=null)return i.download=t,i.href=a,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(a)},6e4),a}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(t);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=If(e)),o.write(e),o.close(),e}catch(l){if(!l.message||!l.message.match(/onstruct/))throw l}throw new Error("cannot save file "+t)}function Fue(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var r=e.read();return e.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function $s(t){for(var e=Object.keys(t),r=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(t,e[n])&&r.push(e[n]);return r}function F6(t,e){for(var r=[],n=$s(t),s=0;s!==n.length;++s)r[t[n[s]][e]]==null&&(r[t[n[s]][e]]=n[s]);return r}function ab(t){for(var e=[],r=$s(t),n=0;n!==r.length;++n)e[t[r[n]]]=r[n];return e}function ib(t){for(var e=[],r=$s(t),n=0;n!==r.length;++n)e[t[r[n]]]=parseInt(r[n],10);return e}function Due(t){for(var e=[],r=$s(t),n=0;n!==r.length;++n)e[t[r[n]]]==null&&(e[t[r[n]]]=[]),e[t[r[n]]].push(r[n]);return e}var P2=new Date(1899,11,30,0,0,0);function ja(t,e){var r=t.getTime(),n=P2.getTime()+(t.getTimezoneOffset()-P2.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var cj=new Date,Rue=P2.getTime()+(cj.getTimezoneOffset()-P2.getTimezoneOffset())*6e4,D6=cj.getTimezoneOffset();function ob(t){var e=new Date;return e.setTime(t*24*60*60*1e3+Rue),e.getTimezoneOffset()!==D6&&e.setTime(e.getTime()+(e.getTimezoneOffset()-D6)*6e4),e}function Lue(t){var e=0,r=0,n=!1,s=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var a=1;a!=s.length;++a)if(s[a]){switch(r=1,a>3&&(n=!0),s[a].slice(s[a].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[a].slice(s[a].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=r*parseInt(s[a],10)}return e}var R6=new Date("2017-02-19T19:06:09.000Z"),uj=isNaN(R6.getFullYear())?new Date("2/19/17"):R6,Uue=uj.getFullYear()==2017;function hs(t,e){var r=new Date(t);if(Uue)return e>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):e<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(uj.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=t.match(/\d+/g)||["2017","2","19","0","0","0"],a=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return t.indexOf("Z")>-1&&(a=new Date(a.getTime()-a.getTimezoneOffset()*60*1e3)),a}function Lh(t,e){if(Jr&&Buffer.isBuffer(t)){if(e){if(t[0]==255&&t[1]==254)return _u(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return _u(JP(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return _u(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return _u(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(a){return r[a]||a})}catch{}for(var n=[],s=0;s!=t.length;++s)n.push(String.fromCharCode(t[s]));return n.join("")}function ms(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=ms(t[r]));return e}function zs(t,e){for(var r="";r.length<e;)r+=t;return r}function Ic(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,a){return r=-r,a}),!isNaN(e=Number(n)))?e/r:e}var Mue=["january","february","march","april","may","june","july","august","september","october","november","december"];function Hm(t){var e=new Date(t),r=new Date(NaN),n=e.getYear(),s=e.getMonth(),a=e.getDate();if(isNaN(a))return r;var i=t.toLowerCase();if(i.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(i=i.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),i.length>3&&Mue.indexOf(i)==-1)return r}else if(i.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||a>1)&&n!=101?e:t.match(/[^-0-9:,\/\\]/)?r:e}var Pue=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(t||typeof n=="string")return r.split(n);for(var a=r.split(n),i=[a[0]],o=1;o<a.length;++o)i.push(s),i.push(a[o]);return i}}();function Aj(t){return t?t.content&&t.type?Lh(t.content,!0):t.data?_g(t.data):t.asNodeBuffer&&Jr?_g(t.asNodeBuffer().toString("binary")):t.asBinary?_g(t.asBinary()):t._data&&t._data.getContent?_g(Lh(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function dj(t){if(!t)return null;if(t.data)return b6(t.data);if(t.asNodeBuffer&&Jr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?b6(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function jue(t){return t&&t.name.slice(-4)===".bin"?dj(t):Aj(t)}function Ml(t,e){for(var r=t.FullPaths||$s(t.files),n=e.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),a=0;a<r.length;++a){var i=r[a].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==i||s==i)return t.files?t.files[r[a]]:t.FileIndex[a]}return null}function X4(t,e){var r=Ml(t,e);if(r==null)throw new Error("Cannot find file "+e+" in zip");return r}function ba(t,e,r){if(!r)return jue(X4(t,e));if(!e)return null;try{return ba(t,e)}catch{return null}}function nl(t,e,r){if(!r)return Aj(X4(t,e));if(!e)return null;try{return nl(t,e)}catch{return null}}function Oue(t,e,r){return dj(X4(t,e))}function L6(t){for(var e=t.FullPaths||$s(t.files),r=[],n=0;n<e.length;++n)e[n].slice(-1)!="/"&&r.push(e[n].replace(/^Root Entry[\/]/,""));return r.sort()}function zr(t,e,r){if(t.FullPaths){if(typeof r=="string"){var n;return Jr?n=KA(r):n=sue(r),Ar.utils.cfb_add(t,e,n)}Ar.utils.cfb_add(t,e,r)}else t.file(e,r)}function Z4(){return Ar.utils.cfb_new()}function fj(t,e){switch(e.type){case"base64":return Ar.read(t,{type:"base64"});case"binary":return Ar.read(t,{type:"binary"});case"buffer":case"array":return Ar.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function Tg(t,e){if(t.charAt(0)=="/")return t.slice(1);var r=e.split("/");e.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Aa=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Que=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,U6=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,Hue=/<[^>]*>/g,Ji=Aa.match(U6)?U6:Hue,Vue=/<\w*:/,zue=/<(\/?)\w+:/;function Br(t,e,r){for(var n={},s=0,a=0;s!==t.length&&!((a=t.charCodeAt(s))===32||a===10||a===13);++s);if(e||(n[0]=t.slice(0,s)),s===t.length)return n;var i=t.match(Que),o=0,l="",u=0,d="",h="",m=1;if(i)for(u=0;u!=i.length;++u){for(h=i[u],a=0;a!=h.length&&h.charCodeAt(a)!==61;++a);for(d=h.slice(0,a).trim();h.charCodeAt(a+1)==32;)++a;for(m=(s=h.charCodeAt(a+1))==34||s==39?1:0,l=h.slice(a+1+m,h.length-m),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),n[d]=l,n[d.toLowerCase()]=l;else{var g=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(n[g]&&d.slice(o-3,o)=="ext")continue;n[g]=l,n[g.toLowerCase()]=l}}return n}function ju(t){return t.replace(zue,"<$1")}var hj={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},eT=ab(hj),En=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",a=s.indexOf("<![CDATA[");if(a==-1)return s.replace(t,function(o,l){return hj[o]||String.fromCharCode(parseInt(l,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,l){return String.fromCharCode(parseInt(l,16))});var i=s.indexOf("]]>");return r(s.slice(0,a))+s.slice(a+9,i)+r(s.slice(i+3))}}(),tT=/[&<>'"]/g,Gue=/[\u0000-\u0008\u000b-\u001f]/g;function Kn(t){var e=t+"";return e.replace(tT,function(r){return eT[r]}).replace(Gue,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function M6(t){return Kn(t).replace(/ /g,"_x0020_")}var mj=/[\u0000-\u001f]/g;function rT(t){var e=t+"";return e.replace(tT,function(r){return eT[r]}).replace(/\n/g,"<br/>").replace(mj,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function que(t){var e=t+"";return e.replace(tT,function(r){return eT[r]}).replace(mj,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var P6=function(){var t=/&#(\d+);/g;function e(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,e)}}();function Kue(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function ds(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function kE(t){for(var e="",r=0,n=0,s=0,a=0,i=0,o=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){e+=String.fromCharCode(n);continue}if(s=t.charCodeAt(r++),n>191&&n<224){i=(n&31)<<6,i|=s&63,e+=String.fromCharCode(i);continue}if(a=t.charCodeAt(r++),n<240){e+=String.fromCharCode((n&15)<<12|(s&63)<<6|a&63);continue}i=t.charCodeAt(r++),o=((n&7)<<18|(s&63)<<12|(a&63)<<6|i&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function j6(t){var e=Cf(2*t.length),r,n,s=1,a=0,i=0,o;for(n=0;n<t.length;n+=s)s=1,(o=t.charCodeAt(n))<128?r=o:o<224?(r=(o&31)*64+(t.charCodeAt(n+1)&63),s=2):o<240?(r=(o&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),s=3):(s=4,r=(o&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,i=55296+(r>>>10&1023),r=56320+(r&1023)),i!==0&&(e[a++]=i&255,e[a++]=i>>>8,i=0),e[a++]=r%256,e[a++]=r>>>8;return e.slice(0,a).toString("ucs2")}function O6(t){return KA(t,"binary").toString("utf8")}var zv="foo bar bazâð£",rs=Jr&&(O6(zv)==kE(zv)&&O6||j6(zv)==kE(zv)&&j6)||kE,_u=Jr?function(t){return KA(t,"utf8").toString("binary")}:function(t){for(var e=[],r=0,n=0,s=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=t.charCodeAt(r++)-56320+(n<<10),e.push(String.fromCharCode(240+(s>>18&7))),e.push(String.fromCharCode(144+(s>>12&63))),e.push(String.fromCharCode(128+(s>>6&63))),e.push(String.fromCharCode(128+(s&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},Tx=function(){var t={};return function(r,n){var s=r+"|"+(n||"");return t[s]?t[s]:t[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),pj=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<t.length;++s)n=n.replace(t[s][0],t[s][1]);return n}}(),$ue=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Wue=/<\/?(?:vt:)?variant>/g,Yue=/<(?:vt:)([^>]*)>([\s\S]*)</;function Q6(t,e){var r=Br(t),n=t.match($ue(r.baseType))||[],s=[];if(n.length!=r.size){if(e.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(a){var i=a.replace(Wue,"").match(Yue);i&&s.push({v:rs(i[2]),t:i[1]})}),s}var gj=/(^\s|\s$|\n)/;function fi(t,e){return"<"+t+(e.match(gj)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function Nx(t){return $s(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function Ut(t,e,r){return"<"+t+(r!=null?Nx(r):"")+(e!=null?(e.match(gj)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function NS(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(r){if(e)throw r}return""}function Jue(t,e){switch(typeof t){case"string":var r=Ut("vt:lpwstr",Kn(t));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Ut((t|0)==t?"vt:i4":"vt:r8",Kn(String(t)));case"boolean":return Ut("vt:bool",t?"true":"false")}if(t instanceof Date)return Ut("vt:filetime",NS(t));throw new Error("Unable to serialize "+t)}function nT(t){if(Jr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return rs(If(W4(t)));throw new Error("Bad input format: expected Buffer or string")}var Bx=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ma={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Jh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],el={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Xue(t,e){for(var r=1-2*(t[e+7]>>>7),n=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),s=t[e+6]&15,a=5;a>=0;--a)s=s*256+t[e+a];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Zue(t,e,r){var n=(e<0||1/e==-1/0?1:0)<<7,s=0,a=0,i=n?-e:e;isFinite(i)?i==0?s=a=0:(s=Math.floor(Math.log(i)/Math.LN2),a=i*Math.pow(2,52-s),s<=-1023&&(!isFinite(a)||a<Math.pow(2,52))?s=-1022:(a-=Math.pow(2,52),s+=1023)):(s=2047,a=isNaN(e)?26985:0);for(var o=0;o<=5;++o,a/=256)t[r+o]=a&255;t[r+6]=(s&15)<<4|a&15,t[r+7]=s>>4|n}var H6=function(t){for(var e=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var s=0,a=t[0][n].length;s<a;s+=r)e.push.apply(e,t[0][n].slice(s,s+r));return e},V6=Jr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:KA(e)})):H6(t)}:H6,z6=function(t,e,r){for(var n=[],s=e;s<r;s+=2)n.push(String.fromCharCode(SA(t,s)));return n.join("").replace(oo,"")},sT=Jr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("utf16le",e,r).replace(oo,""):z6(t,e,r)}:z6,G6=function(t,e,r){for(var n=[],s=e;s<e+r;++s)n.push(("0"+t[s].toString(16)).slice(-2));return n.join("")},xj=Jr?function(t,e,r){return Buffer.isBuffer(t)?t.toString("hex",e,e+r):G6(t,e,r)}:G6,q6=function(t,e,r){for(var n=[],s=e;s<r;s++)n.push(String.fromCharCode(sm(t,s)));return n.join("")},x1=Jr?function(e,r,n){return Buffer.isBuffer(e)?e.toString("utf8",r,n):q6(e,r,n)}:q6,vj=function(t,e){var r=tl(t,e);return r>0?x1(t,e+4,e+4+r-1):""},yj=vj,wj=function(t,e){var r=tl(t,e);return r>0?x1(t,e+4,e+4+r-1):""},bj=wj,Cj=function(t,e){var r=2*tl(t,e);return r>0?x1(t,e+4,e+4+r-1):""},Ej=Cj,_j=function(e,r){var n=tl(e,r);return n>0?sT(e,r+4,r+4+n):""},Sj=_j,Tj=function(t,e){var r=tl(t,e);return r>0?x1(t,e+4,e+4+r):""},Nj=Tj,Bj=function(t,e){return Xue(t,e)},j2=Bj,aT=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Jr&&(yj=function(e,r){if(!Buffer.isBuffer(e))return vj(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},bj=function(e,r){if(!Buffer.isBuffer(e))return wj(e,r);var n=e.readUInt32LE(r);return n>0?e.toString("utf8",r+4,r+4+n-1):""},Ej=function(e,r){if(!Buffer.isBuffer(e))return Cj(e,r);var n=2*e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n-1)},Sj=function(e,r){if(!Buffer.isBuffer(e))return _j(e,r);var n=e.readUInt32LE(r);return e.toString("utf16le",r+4,r+4+n)},Nj=function(e,r){if(!Buffer.isBuffer(e))return Tj(e,r);var n=e.readUInt32LE(r);return e.toString("utf8",r+4,r+4+n)},j2=function(e,r){return Buffer.isBuffer(e)?e.readDoubleLE(r):Bj(e,r)},aT=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var sm=function(t,e){return t[e]},SA=function(t,e){return t[e+1]*256+t[e]},eAe=function(t,e){var r=t[e+1]*256+t[e];return r<32768?r:(65535-r+1)*-1},tl=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},uh=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},tAe=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function Wg(t,e){var r="",n,s,a=[],i,o,l,u;switch(e){case"dbcs":if(u=this.l,Jr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(l=0;l<t;++l)r+=String.fromCharCode(SA(this,u)),u+=2;t*=2;break;case"utf8":r=x1(this,this.l,this.l+t);break;case"utf16le":t*=2,r=sT(this,this.l,this.l+t);break;case"wstr":return Wg.call(this,t,"dbcs");case"lpstr-ansi":r=yj(this,this.l),t=4+tl(this,this.l);break;case"lpstr-cp":r=bj(this,this.l),t=4+tl(this,this.l);break;case"lpwstr":r=Ej(this,this.l),t=4+2*tl(this,this.l);break;case"lpp4":t=4+tl(this,this.l),r=Sj(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+tl(this,this.l),r=Nj(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(i=sm(this,this.l+t++))!==0;)a.push(Vv(i));r=a.join("");break;case"_wstr":for(t=0,r="";(i=SA(this,this.l+t))!==0;)a.push(Vv(i)),t+=2;t+=2,r=a.join("");break;case"dbcs-cont":for(r="",u=this.l,l=0;l<t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=sm(this,u),this.l=u+1,o=Wg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Vv(SA(this,u))),u+=2}r=a.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,l=0;l!=t;++l){if(this.lens&&this.lens.indexOf(u)!==-1)return i=sm(this,u),this.l=u+1,o=Wg.call(this,t-l,i?"dbcs-cont":"sbcs-cont"),a.join("")+o;a.push(Vv(sm(this,u))),u+=1}r=a.join("");break;default:switch(t){case 1:return n=sm(this,this.l),this.l++,n;case 2:return n=(e==="i"?eAe:SA)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(n=(t>0?uh:tAe)(this,this.l),this.l+=4,n):(s=tl(this,this.l),this.l+=4,s);case 8:case-8:if(e==="f")return t==8?s=j2(this,this.l):s=j2([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;t=8;case 16:r=xj(this,this.l,t);break}}return this.l+=t,r}var rAe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24&255},nAe=function(t,e,r){t[r]=e&255,t[r+1]=e>>8&255,t[r+2]=e>>16&255,t[r+3]=e>>24&255},sAe=function(t,e,r){t[r]=e&255,t[r+1]=e>>>8&255};function aAe(t,e,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=e.length;++s)sAe(this,e.charCodeAt(s),this.l+2*s);n=2*e.length}else if(r==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=e.length;++s)this[this.l+s]=e.charCodeAt(s)&255;n=e.length}else if(r==="hex"){for(;s<t;++s)this[this.l++]=parseInt(e.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var a=Math.min(this.l+t,this.length);for(s=0;s<Math.min(e.length,t);++s){var i=e.charCodeAt(s);this[this.l++]=i&255,this[this.l++]=i>>8}for(;this.l<a;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,rAe(this,e,this.l);break;case 8:if(n=8,r==="f"){Zue(this,e,this.l);break}case 16:break;case-4:n=4,nAe(this,e,this.l);break}return this.l+=n,this}function kj(t,e){var r=xj(this,this.l,t.length>>1);if(r!==t)throw new Error(e+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Ai(t,e){t.l=e,t.read_shift=Wg,t.chk=kj,t.write_shift=aAe}function Wi(t,e){t.l+=e}function ct(t){var e=Cf(t);return Ai(e,0),e}function $A(t,e,r){if(t){var n,s,a;Ai(t,t.l||0);for(var i=t.length,o=0,l=0;t.l<i;){o=t.read_shift(1),o&128&&(o=(o&127)+((t.read_shift(1)&127)<<7));var u=Lx[o]||Lx[65535];for(n=t.read_shift(1),a=n&127,s=1;s<4&&n&128;++s)a+=((n=t.read_shift(1))&127)<<7*s;l=t.l+a;var d=u.f&&u.f(t,a,r);if(t.l=l,e(d,u,o))return}}}function Io(){var t=[],e=Jr?256:2048,r=function(u){var d=ct(u);return Ai(d,0),d},n=r(e),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},a=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,e)))},i=function(){return s(),Xa(t)},o=function(u){s(),n=u,n.l==null&&(n.l=n.length),a(e)};return{next:a,push:o,end:i,_bufs:t}}function _t(t,e,r,n){var s=+e,a;if(!isNaN(s)){n||(n=Lx[s].p||(r||[]).length||0),a=1+(s>=128?1:0)+1,n>=128&&++a,n>=16384&&++a,n>=2097152&&++a;var i=t.next(a);s<=127?i.write_shift(1,s):(i.write_shift(1,(s&127)+128),i.write_shift(1,s>>7));for(var o=0;o!=4;++o)if(n>=128)i.write_shift(1,(n&127)+128),n>>=7;else{i.write_shift(1,n);break}n>0&&aT(r)&&t.push(r)}}function Yg(t,e,r){var n=ms(t);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function K6(t,e,r){var n=ms(t);return n.s=Yg(n.s,e.s,r),n.e=Yg(n.e,e.s,r),n}function Jg(t,e){if(t.cRel&&t.c<0)for(t=ms(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=ms(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var r=_r(t);return!t.cRel&&t.cRel!=null&&(r=lAe(r)),!t.rRel&&t.rRel!=null&&(r=iAe(r)),r}function IE(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Is(t.s.c)+":"+(t.e.cRel?"":"$")+Is(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+ua(t.s.r)+":"+(t.e.rRel?"":"$")+ua(t.e.r):Jg(t.s,e.biff)+":"+Jg(t.e,e.biff)}function iT(t){return parseInt(oAe(t),10)-1}function ua(t){return""+(t+1)}function iAe(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function oAe(t){return t.replace(/\$(\d+)$/,"$1")}function oT(t){for(var e=cAe(t),r=0,n=0;n!==e.length;++n)r=26*r+e.charCodeAt(n)-64;return r-1}function Is(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function lAe(t){return t.replace(/^([A-Z])/,"$$$1")}function cAe(t){return t.replace(/^\$([A-Z])/,"$1")}function uAe(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Fs(t){for(var e=0,r=0,n=0;n<t.length;++n){var s=t.charCodeAt(n);s>=48&&s<=57?e=10*e+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:e-1}}function _r(t){for(var e=t.c+1,r="";e;e=(e-1)/26|0)r=String.fromCharCode((e-1)%26+65)+r;return r+(t.r+1)}function Do(t){var e=t.indexOf(":");return e==-1?{s:Fs(t),e:Fs(t)}:{s:Fs(t.slice(0,e)),e:Fs(t.slice(e+1))}}function Mr(t,e){return typeof e>"u"||typeof e=="number"?Mr(t.s,t.e):(typeof t!="string"&&(t=_r(t)),typeof e!="string"&&(e=_r(e)),t==e?t:t+":"+e)}function _n(t){var e={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,a=t.length;for(r=0;n<a&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.s.c=--r,r=0;n<a&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(e.s.r=--r,n===a||s!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,r=0;n!=a&&!((s=t.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(e.e.c=--r,r=0;n!=a&&!((s=t.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return e.e.r=--r,e}function $6(t,e){var r=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=Yl(t.z,r?ja(e):e)}catch{}try{return t.w=Yl((t.XF||{}).numFmtId||(r?14:0),r?ja(e):e)}catch{return""+e}}function jA(t,e,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?WA[t.v]||t.v:e==null?$6(t,t.v):$6(t,e))}function Ff(t,e){var r=e&&e.sheet?e.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function Ij(t,e,r){var n=r||{},s=t?Array.isArray(t):n.dense,a=t||(s?[]:{}),i=0,o=0;if(a&&n.origin!=null){if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Fs(n.origin):n.origin;i=l.r,o=l.c}a["!ref"]||(a["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(a["!ref"]){var d=_n(a["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),i==-1&&(u.e.r=i=d.e.r+1)}for(var h=0;h!=e.length;++h)if(e[h]){if(!Array.isArray(e[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=e[h].length;++m)if(!(typeof e[h][m]>"u")){var g={v:e[h][m]},b=i+h,y=o+m;if(u.s.r>b&&(u.s.r=b),u.s.c>y&&(u.s.c=y),u.e.r<b&&(u.e.r=b),u.e.c<y&&(u.e.c=y),e[h][m]&&typeof e[h][m]=="object"&&!Array.isArray(e[h][m])&&!(e[h][m]instanceof Date))g=e[h][m];else if(Array.isArray(g.v)&&(g.f=e[h][m][1],g.v=g.v[0]),g.v===null)if(g.f)g.t="n";else if(n.nullError)g.t="e",g.v=0;else if(n.sheetStubs)g.t="z";else continue;else typeof g.v=="number"?g.t="n":typeof g.v=="boolean"?g.t="b":g.v instanceof Date?(g.z=n.dateNF||wr[14],n.cellDates?(g.t="d",g.w=Yl(g.z,ja(g.v))):(g.t="n",g.v=ja(g.v),g.w=Yl(g.z,g.v))):g.t="s";if(s)a[b]||(a[b]=[]),a[b][y]&&a[b][y].z&&(g.z=a[b][y].z),a[b][y]=g;else{var _=_r({c:y,r:b});a[_]&&a[_].z&&(g.z=a[_].z),a[_]=g}}}return u.s.c<1e7&&(a["!ref"]=Mr(u)),a}function fp(t,e){return Ij(null,t,e)}function AAe(t){return t.read_shift(4,"i")}function Fc(t,e){return e||(e=ct(4)),e.write_shift(4,t),e}function qi(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function Za(t,e){var r=!1;return e==null&&(r=!0,e=ct(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}function dAe(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function fAe(t,e){return e||(e=ct(4)),e.write_shift(2,0),e.write_shift(2,0),e}function lT(t,e){var r=t.l,n=t.read_shift(1),s=qi(t),a=[],i={t:s,h:s};if((n&1)!==0){for(var o=t.read_shift(4),l=0;l!=o;++l)a.push(dAe(t));i.r=a}else i.r=[{ich:0,ifnt:0}];return t.l=r+e,i}function hAe(t,e){var r=!1;return e==null&&(r=!0,e=ct(15+4*t.t.length)),e.write_shift(1,0),Za(t.t,e),r?e.slice(0,e.l):e}var mAe=lT;function pAe(t,e){var r=!1;return e==null&&(r=!0,e=ct(23+4*t.t.length)),e.write_shift(1,1),Za(t.t,e),e.write_shift(4,1),fAe({},e),r?e.slice(0,e.l):e}function Jl(t){var e=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:r}}function Xh(t,e){return e==null&&(e=ct(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function Zh(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function e0(t,e){return e==null&&(e=ct(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var gAe=qi,Fj=Za;function cT(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function O2(t,e){var r=!1;return e==null&&(r=!0,e=ct(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),r?e.slice(0,e.l):e}var xAe=qi,BS=cT,uT=O2;function AT(t){var e=t.slice(t.l,t.l+4),r=e[0]&1,n=e[0]&2;t.l+=4;var s=n===0?j2([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):uh(e,0)>>2;return r?s/100:s}function Dj(t,e){e==null&&(e=ct(4));var r=0,n=0,s=t*100;if(t==(t|0)&&t>=-536870912&&t<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)e.write_shift(-4,((r?s:t)<<2)+(r+2));else throw new Error("unsupported RkNumber "+t)}function Rj(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function vAe(t,e){return e||(e=ct(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var t0=Rj,hp=vAe;function zi(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function Uh(t,e){return(e||ct(8)).write_shift(8,t,"f")}function yAe(t){var e={},r=t.read_shift(1),n=r>>>1,s=t.read_shift(1),a=t.read_shift(2,"i"),i=t.read_shift(1),o=t.read_shift(1),l=t.read_shift(1);switch(t.l++,n){case 0:e.auto=1;break;case 1:e.index=s;var u=wh[s];u&&(e.rgb=Ix(u));break;case 2:e.rgb=Ix([i,o,l]);break;case 3:e.theme=s;break}return a!=0&&(e.tint=a>0?a/32767:a/32768),e}function Q2(t,e){if(e||(e=ct(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var r=t.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),e.write_shift(2,r),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=t.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function wAe(t){var e=t.read_shift(1);t.l++;var r={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return r}function bAe(t,e){e||(e=ct(2));var r=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,r),e.write_shift(1,0),e}function Lj(t,e){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function CAe(t){return Lj(t,1)}function EAe(t){return Lj(t,2)}var dT=2,_o=3,Gv=11,W6=12,H2=19,qv=64,_Ae=65,SAe=71,TAe=4108,NAe=4126,Ya=80,Uj=81,BAe=[Ya,Uj],kS={1:{n:"CodePage",t:dT},2:{n:"Category",t:Ya},3:{n:"PresentationFormat",t:Ya},4:{n:"ByteCount",t:_o},5:{n:"LineCount",t:_o},6:{n:"ParagraphCount",t:_o},7:{n:"SlideCount",t:_o},8:{n:"NoteCount",t:_o},9:{n:"HiddenCount",t:_o},10:{n:"MultimediaClipCount",t:_o},11:{n:"ScaleCrop",t:Gv},12:{n:"HeadingPairs",t:TAe},13:{n:"TitlesOfParts",t:NAe},14:{n:"Manager",t:Ya},15:{n:"Company",t:Ya},16:{n:"LinksUpToDate",t:Gv},17:{n:"CharacterCount",t:_o},19:{n:"SharedDoc",t:Gv},22:{n:"HyperlinksChanged",t:Gv},23:{n:"AppVersion",t:_o,p:"version"},24:{n:"DigSig",t:_Ae},26:{n:"ContentType",t:Ya},27:{n:"ContentStatus",t:Ya},28:{n:"Language",t:Ya},29:{n:"Version",t:Ya},255:{},2147483648:{n:"Locale",t:H2},2147483651:{n:"Behavior",t:H2},1919054434:{}},IS={1:{n:"CodePage",t:dT},2:{n:"Title",t:Ya},3:{n:"Subject",t:Ya},4:{n:"Author",t:Ya},5:{n:"Keywords",t:Ya},6:{n:"Comments",t:Ya},7:{n:"Template",t:Ya},8:{n:"LastAuthor",t:Ya},9:{n:"RevNumber",t:Ya},10:{n:"EditTime",t:qv},11:{n:"LastPrinted",t:qv},12:{n:"CreatedDate",t:qv},13:{n:"ModifiedDate",t:qv},14:{n:"PageCount",t:_o},15:{n:"WordCount",t:_o},16:{n:"CharCount",t:_o},17:{n:"Thumbnail",t:SAe},18:{n:"Application",t:Ya},19:{n:"DocSecurity",t:_o},255:{},2147483648:{n:"Locale",t:H2},2147483651:{n:"Behavior",t:H2},1919054434:{}},Y6={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},kAe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function IAe(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var FAe=IAe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),wh=ms(FAe),WA={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Mj={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},FS={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Kv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function fT(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function DAe(t){var e=fT();if(!t||!t.match)return e;var r={};if((t.match(Ji)||[]).forEach(function(n){var s=Br(n);switch(s[0].replace(Vue,"<")){case"<?xml":break;case"<Types":e.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":e[FS[s.ContentType]]!==void 0&&e[FS[s.ContentType]].push(s.PartName);break}}),e.xmlns!==Ma.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=r,delete e.calcchains,e}function Pj(t,e){var r=Due(FS),n=[],s;n[n.length]=Aa,n[n.length]=Ut("Types",null,{xmlns:Ma.CT,"xmlns:xsd":Ma.xsd,"xmlns:xsi":Ma.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(l){return Ut("Default",null,{Extension:l[0],ContentType:l[1]})}));var a=function(l){t[l]&&t[l].length>0&&(s=t[l][0],n[n.length]=Ut("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Kv[l][e.bookType]||Kv[l].xlsx}))},i=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Ut("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:Kv[l][e.bookType]||Kv[l].xlsx})})},o=function(l){(t[l]||[]).forEach(function(u){n[n.length]=Ut("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[l][0]})})};return a("workbooks"),i("sheets"),i("charts"),o("themes"),["strs","styles"].forEach(a),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),i("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var sn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function kx(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function Xg(t,e){var r={"!id":{}};if(!t)return r;e.charAt(0)!=="/"&&(e="/"+e);var n={};return(t.match(Ji)||[]).forEach(function(s){var a=Br(s);if(a[0]==="<Relationship"){var i={};i.Type=a.Type,i.Target=a.Target,i.Id=a.Id,a.TargetMode&&(i.TargetMode=a.TargetMode);var o=a.TargetMode==="External"?a.Target:Tg(a.Target,e);r[o]=i,n[a.Id]=i}}),r["!id"]=n,r}function Sm(t){var e=[Aa,Ut("Relationships",null,{xmlns:Ma.RELS})];return $s(t["!id"]).forEach(function(r){e[e.length]=Ut("Relationship",null,t["!id"][r])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Gn(t,e,r,n,s,a){if(s||(s={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,s.Id="rId"+e,s.Type=n,s.Target=r,[sn.HLINK,sn.XPATH,sn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),t["!id"][s.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][s.Id]=s,t[("/"+s.Target).replace("//","/")]=s,e}var RAe="application/vnd.oasis.opendocument.spreadsheet";function LAe(t,e){for(var r=nT(t),n,s;n=Bx.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Br(n[0],!1),s.path=="/"&&s.type!==RAe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw n}}function UAe(t){var e=[Aa];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<t.length;++r)e.push('  <manifest:file-entry manifest:full-path="'+t[r][0]+'" manifest:media-type="'+t[r][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function J6(t,e,r){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function MAe(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function PAe(t){var e=[Aa];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=t.length;++r)e.push(J6(t[r][0],t[r][1])),e.push(MAe("",t[r][0]));return e.push(J6("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function jj(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+R2.version+"</meta:generator></office:meta></office:document-meta>"}var $l=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],jAe=function(){for(var t=new Array($l.length),e=0;e<$l.length;++e){var r=$l[e],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[e]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function Oj(t){var e={};t=rs(t);for(var r=0;r<$l.length;++r){var n=$l[r],s=t.match(jAe[r]);s!=null&&s.length>0&&(e[n[1]]=En(s[1])),n[2]==="date"&&e[n[1]]&&(e[n[1]]=hs(e[n[1]]))}return e}function FE(t,e,r,n,s){s[t]!=null||e==null||e===""||(s[t]=e,e=Kn(e),n[n.length]=r?Ut(t,e,r):fi(t,e))}function Qj(t,e){var r=e||{},n=[Aa,Ut("cp:coreProperties",null,{"xmlns:cp":Ma.CORE_PROPS,"xmlns:dc":Ma.dc,"xmlns:dcterms":Ma.dcterms,"xmlns:dcmitype":Ma.dcmitype,"xmlns:xsi":Ma.xsi})],s={};if(!t&&!r.Props)return n.join("");t&&(t.CreatedDate!=null&&FE("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:NS(t.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),t.ModifiedDate!=null&&FE("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:NS(t.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var a=0;a!=$l.length;++a){var i=$l[a],o=r.Props&&r.Props[i[1]]!=null?r.Props[i[1]]:t?t[i[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&FE(i[0],o,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var bh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Hj=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Vj(t,e,r,n){var s=[];if(typeof t=="string")s=Q6(t,n);else for(var a=0;a<t.length;++a)s=s.concat(t[a].map(function(d){return{v:d}}));var i=typeof e=="string"?Q6(e,n).map(function(d){return d.v}):e,o=0,l=0;if(i.length>0)for(var u=0;u!==s.length;u+=2){switch(l=+s[u+1].v,s[u].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=l,r.SheetNames=i.slice(o,o+l);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=l,r.DefinedNames=i.slice(o,o+l);break;case"Charts":case"Diagramme":r.Chartsheets=l,r.ChartNames=i.slice(o,o+l);break}o+=l}}function OAe(t,e,r){var n={};return e||(e={}),t=rs(t),bh.forEach(function(s){var a=(t.match(Tx(s[0]))||[])[1];switch(s[2]){case"string":a&&(e[s[1]]=En(a));break;case"bool":e[s[1]]=a==="true";break;case"raw":var i=t.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));i&&i.length>0&&(n[s[1]]=i[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Vj(n.HeadingPairs,n.TitlesOfParts,e,r),e}function zj(t){var e=[],r=Ut;return t||(t={}),t.Application="SheetJS",e[e.length]=Aa,e[e.length]=Ut("Properties",null,{xmlns:Ma.EXT_PROPS,"xmlns:vt":Ma.vt}),bh.forEach(function(n){if(t[n[1]]!==void 0){var s;switch(n[2]){case"string":s=Kn(String(t[n[1]]));break;case"bool":s=t[n[1]]?"true":"false";break}s!==void 0&&(e[e.length]=r(n[0],s))}}),e[e.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=r("TitlesOfParts",r("vt:vector",t.SheetNames.map(function(n){return"<vt:lpstr>"+Kn(n)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var QAe=/<[^>]+>[^<]*/g;function HAe(t,e){var r={},n="",s=t.match(QAe);if(s)for(var a=0;a!=s.length;++a){var i=s[a],o=Br(i);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":n=En(o.name);break;case"</property>":n=null;break;default:if(i.indexOf("<vt:")===0){var l=i.split(">"),u=l[0].slice(4),d=l[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=En(d);break;case"bool":r[n]=ds(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(d,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(d);break;case"filetime":case"date":r[n]=hs(d);break;case"cy":case"error":r[n]=En(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",i,u,l)}}else if(i.slice(0,2)!=="</"){if(e.WTF)throw new Error(i)}}}return r}function Gj(t){var e=[Aa,Ut("Properties",null,{xmlns:Ma.CUST_PROPS,"xmlns:vt":Ma.vt})];if(!t)return e.join("");var r=1;return $s(t).forEach(function(s){++r,e[e.length]=Ut("property",Jue(t[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Kn(s)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var DS={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},DE;function VAe(t,e,r){DE||(DE=ab(DS)),e=DE[e]||e,t[e]=r}function zAe(t,e){var r=[];return $s(DS).map(function(n){for(var s=0;s<$l.length;++s)if($l[s][1]==n)return $l[s];for(s=0;s<bh.length;++s)if(bh[s][1]==n)return bh[s];throw n}).forEach(function(n){if(t[n[1]]!=null){var s=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:t[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(fi(DS[n[1]]||n[1],s))}}),Ut("DocumentProperties",r.join(""),{xmlns:el.o})}function GAe(t,e){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return t&&$s(t).forEach(function(a){if(Object.prototype.hasOwnProperty.call(t,a)){for(var i=0;i<$l.length;++i)if(a==$l[i][1])return;for(i=0;i<bh.length;++i)if(a==bh[i][1])return;for(i=0;i<r.length;++i)if(a==r[i])return;var o=t[a],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o=String(o),s.push(Ut(M6(a),o,{"dt:dt":l}))}}),e&&$s(e).forEach(function(a){if(Object.prototype.hasOwnProperty.call(e,a)&&!(t&&Object.prototype.hasOwnProperty.call(t,a))){var i=e[a],o="string";typeof i=="number"?(o="float",i=String(i)):i===!0||i===!1?(o="boolean",i=i?"1":"0"):i instanceof Date?(o="dateTime.tz",i=i.toISOString()):i=String(i),s.push(Ut(M6(a),i,{"dt:dt":o}))}}),"<"+n+' xmlns="'+el.o+'">'+s.join("")+"</"+n+">"}function hT(t){var e=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function qAe(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,r=e.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var a=n/Math.pow(2,32)|0;a>0&&(n=n%Math.pow(2,32),s+=a);var i=ct(8);return i.write_shift(4,n),i.write_shift(4,s),i}function qj(t,e,r){var n=t.l,s=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return s}function Kj(t,e,r){var n=t.read_shift(0,"lpwstr");return n}function $j(t,e,r){return e===31?Kj(t):qj(t,e,r)}function RS(t,e,r){return $j(t,e,r===!1?0:4)}function KAe(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return $j(t,e,0)}function $Ae(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n){var s=t.l;r[n]=t.read_shift(0,"lpwstr").replace(oo,""),t.l-s&2&&(t.l+=2)}return r}function WAe(t){for(var e=t.read_shift(4),r=[],n=0;n!=e;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(oo,"");return r}function YAe(t){var e=t.l,r=V2(t,Uj);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var n=V2(t,_o);return[r,n]}function JAe(t){for(var e=t.read_shift(4),r=[],n=0;n<e/2;++n)r.push(YAe(t));return r}function X6(t,e){for(var r=t.read_shift(4),n={},s=0;s!=r;++s){var a=t.read_shift(4),i=t.read_shift(4);n[a]=t.read_shift(i,e===1200?"utf16le":"utf8").replace(oo,"").replace(Sg,"!"),e===1200&&i%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function Wj(t){var e=t.read_shift(4),r=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),r}function XAe(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function V2(t,e,r){var n=t.read_shift(2),s,a=r||{};if(t.l+=2,e!==W6&&n!==e&&BAe.indexOf(e)===-1&&!((e&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+e+" saw "+n);switch(e===W6?n:e){case 2:return s=t.read_shift(2,"i"),a.raw||(t.l+=2),s;case 3:return s=t.read_shift(4,"i"),s;case 11:return t.read_shift(4)!==0;case 19:return s=t.read_shift(4),s;case 30:return qj(t,n,4).replace(oo,"");case 31:return Kj(t);case 64:return hT(t);case 65:return Wj(t);case 71:return XAe(t);case 80:return RS(t,n,!a.raw).replace(oo,"");case 81:return KAe(t,n).replace(oo,"");case 4108:return JAe(t);case 4126:case 4127:return n==4127?$Ae(t):WAe(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+n)}}function Z6(t,e){var r=ct(4),n=ct(4);switch(r.write_shift(4,t==80?31:t),t){case 3:n.write_shift(-4,e);break;case 5:n=ct(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=qAe(e);break;case 31:case 80:for(n=ct(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return Xa([r,n])}function eD(t,e){var r=t.l,n=t.read_shift(4),s=t.read_shift(4),a=[],i=0,o=0,l=-1,u={};for(i=0;i!=s;++i){var d=t.read_shift(4),h=t.read_shift(4);a[i]=[d,h+r]}a.sort(function(k,D){return k[1]-D[1]});var m={};for(i=0;i!=s;++i){if(t.l!==a[i][1]){var g=!0;if(i>0&&e)switch(e[a[i-1][0]].t){case 2:t.l+2===a[i][1]&&(t.l+=2,g=!1);break;case 80:t.l<=a[i][1]&&(t.l=a[i][1],g=!1);break;case 4108:t.l<=a[i][1]&&(t.l=a[i][1],g=!1);break}if((!e||i==0)&&t.l<=a[i][1]&&(g=!1,t.l=a[i][1]),g)throw new Error("Read Error: Expected address "+a[i][1]+" at "+t.l+" :"+i)}if(e){var b=e[a[i][0]];if(m[b.n]=V2(t,b.t,{raw:!0}),b.p==="version"&&(m[b.n]=String(m[b.n]>>16)+"."+("0000"+String(m[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(m[b.n]){case 0:m[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Bc(o=m[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[b.n])}}else if(a[i][0]===1){if(o=m.CodePage=V2(t,dT),Bc(o),l!==-1){var y=t.l;t.l=a[l][1],u=X6(t,o),t.l=y}}else if(a[i][0]===0){if(o===0){l=i,t.l=a[i+1][1];continue}u=X6(t,o)}else{var _=u[a[i][0]],T;switch(t[t.l]){case 65:t.l+=4,T=Wj(t);break;case 30:t.l+=4,T=RS(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,T=RS(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,T=t.read_shift(4,"i");break;case 19:t.l+=4,T=t.read_shift(4);break;case 5:t.l+=4,T=t.read_shift(8,"f");break;case 11:t.l+=4,T=na(t,4);break;case 64:t.l+=4,T=hs(hT(t));break;default:throw new Error("unparsed value: "+t[t.l])}m[_]=T}}return t.l=r+n,m}var Yj=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function ZAe(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function tD(t,e,r){var n=ct(8),s=[],a=[],i=8,o=0,l=ct(8),u=ct(8);if(l.write_shift(4,2),l.write_shift(4,1200),u.write_shift(4,1),a.push(l),s.push(u),i+=8+l.length,!e){u=ct(8),u.write_shift(4,0),s.unshift(u);var d=[ct(4)];for(d[0].write_shift(4,t.length),o=0;o<t.length;++o){var h=t[o][0];for(l=ct(8+2*(h.length+1)+(h.length%2?0:2)),l.write_shift(4,o+2),l.write_shift(4,h.length+1),l.write_shift(0,h,"dbcs");l.l!=l.length;)l.write_shift(1,0);d.push(l)}l=Xa(d),a.unshift(l),i+=8+l.length}for(o=0;o<t.length;++o)if(!(e&&!e[t[o][0]])&&!(Yj.indexOf(t[o][0])>-1||Hj.indexOf(t[o][0])>-1)&&t[o][1]!=null){var m=t[o][1],g=0;if(e){g=+e[t[o][0]];var b=r[g];if(b.p=="version"&&typeof m=="string"){var y=m.split(".");m=(+y[0]<<16)+(+y[1]||0)}l=Z6(b.t,m)}else{var _=ZAe(m);_==-1&&(_=31,m=String(m)),l=Z6(_,m)}a.push(l),u=ct(8),u.write_shift(4,e?g:2+o),s.push(u),i+=8+l.length}var T=8*(a.length+1);for(o=0;o<a.length;++o)s[o].write_shift(4,T),T+=a[o].length;return n.write_shift(4,i),n.write_shift(4,a.length),Xa([n].concat(s).concat(a))}function rD(t,e,r){var n=t.content;if(!n)return{};Ai(n,0);var s,a,i,o,l=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),d=n.read_shift(16);if(d!==Ar.utils.consts.HEADER_CLSID&&d!==r)throw new Error("Bad PropertySet CLSID "+d);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(a=n.read_shift(16),o=n.read_shift(4),s===1&&o!==n.l)throw new Error("Length mismatch: "+o+" !== "+n.l);s===2&&(i=n.read_shift(16),l=n.read_shift(4));var h=eD(n,e),m={SystemIdentifier:u};for(var g in h)m[g]=h[g];if(m.FMTID=a,s===1)return m;if(l-n.l==2&&(n.l+=2),n.l!==l)throw new Error("Length mismatch 2: "+n.l+" !== "+l);var b;try{b=eD(n,null)}catch{}for(g in b)m[g]=b[g];return m.FMTID=[a,i],m}function nD(t,e,r,n,s,a){var i=ct(s?68:48),o=[i];i.write_shift(2,65534),i.write_shift(2,0),i.write_shift(4,842412599),i.write_shift(16,Ar.utils.consts.HEADER_CLSID,"hex"),i.write_shift(4,s?2:1),i.write_shift(16,e,"hex"),i.write_shift(4,s?68:48);var l=tD(t,r,n);if(o.push(l),s){var u=tD(s,null,null);i.write_shift(16,a,"hex"),i.write_shift(4,68+l.length),o.push(u)}return Xa(o)}function Dd(t,e){return t.read_shift(e),null}function ede(t,e){e||(e=ct(t));for(var r=0;r<t;++r)e.write_shift(1,0);return e}function tde(t,e,r){for(var n=[],s=t.l+e;t.l<s;)n.push(r(t,s-t.l));if(s!==t.l)throw new Error("Slurp error");return n}function na(t,e){return t.read_shift(e)===1}function so(t,e){return e||(e=ct(2)),e.write_shift(2,+!!t),e}function Ca(t){return t.read_shift(2,"u")}function jl(t,e){return e||(e=ct(2)),e.write_shift(2,t),e}function Jj(t,e){return tde(t,e,Ca)}function rde(t){var e=t.read_shift(1),r=t.read_shift(1);return r===1?e:e===1}function Xj(t,e,r){return r||(r=ct(2)),r.write_shift(1,e=="e"?+t:+!!t),r.write_shift(1,e=="e"?1:0),r}function v1(t,e,r){var n=t.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var a=t.read_shift(1);a&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var i=n?t.read_shift(n,s):"";return i}function nde(t){var e=t.read_shift(2),r=t.read_shift(1),n=r&4,s=r&8,a=1+(r&1),i=0,o,l={};s&&(i=t.read_shift(2)),n&&(o=t.read_shift(4));var u=a==2?"dbcs-cont":"sbcs-cont",d=e===0?"":t.read_shift(e,u);return s&&(t.l+=4*i),n&&(t.l+=o),l.t=d,s||(l.raw="<t>"+l.t+"</t>",l.r=l.t),l}function sde(t){var e=t.t||"",r=ct(3);r.write_shift(2,e.length),r.write_shift(1,1);var n=ct(2*e.length);n.write_shift(2*e.length,e,"utf16le");var s=[r,n];return Xa(s)}function Mh(t,e,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(e,"cpstr");if(r.biff>=12)return t.read_shift(e,"dbcs-cont")}var s=t.read_shift(1);return s===0?n=t.read_shift(e,"sbcs-cont"):n=t.read_shift(e,"dbcs-cont"),n}function y1(t,e,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):Mh(t,n,r)}function r0(t,e,r){if(r.biff>5)return y1(t,e,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function Zj(t,e,r){return r||(r=ct(3+2*t.length)),r.write_shift(2,t.length),r.write_shift(1,1),r.write_shift(31,t,"utf16le"),r}function ade(t){var e=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[e,r]}function ide(t){var e=t.read_shift(4),r=t.l,n=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var s=t.read_shift((n?e-24:e)>>1,"utf16le").replace(oo,"");return n&&(t.l+=24),s}function ode(t){for(var e=t.read_shift(2),r="";e-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=t.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var a=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var i=t.read_shift(a>>1,"utf16le").replace(oo,"");return r+i}function lde(t,e){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return ide(t);case"0303000000000000c000000000000046":return ode(t);default:throw new Error("Unsupported Moniker "+r)}}function $v(t){var e=t.read_shift(4),r=e>0?t.read_shift(e,"utf16le").replace(oo,""):"";return r}function sD(t,e){e||(e=ct(6+t.length*2)),e.write_shift(4,1+t.length);for(var r=0;r<t.length;++r)e.write_shift(2,t.charCodeAt(r));return e.write_shift(2,0),e}function cde(t,e){var r=t.l+e,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=t.read_shift(2);t.l+=2;var a,i,o,l,u="",d,h;s&16&&(a=$v(t,r-t.l)),s&128&&(i=$v(t,r-t.l)),(s&257)===257&&(o=$v(t,r-t.l)),(s&257)===1&&(l=lde(t,r-t.l)),s&8&&(u=$v(t,r-t.l)),s&32&&(d=t.read_shift(16)),s&64&&(h=hT(t)),t.l=r;var m=i||o||l||"";m&&u&&(m+="#"+u),m||(m="#"+u),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var g={Target:m};return d&&(g.guid=d),h&&(g.time=h),a&&(g.Tooltip=a),g}function ude(t){var e=ct(512),r=0,n=t.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),a=s>-1?31:23;switch(n.charAt(0)){case"#":a=28;break;case".":a&=-3;break}e.write_shift(4,2),e.write_shift(4,a);var i=[8,6815827,6619237,4849780,83];for(r=0;r<i.length;++r)e.write_shift(4,i[r]);if(a==28)n=n.slice(1),sD(n,e);else if(a&2){for(i="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));var o=s>-1?n.slice(0,s):n;for(e.write_shift(4,2*(o.length+1)),r=0;r<o.length;++r)e.write_shift(2,o.charCodeAt(r));e.write_shift(2,0),a&8&&sD(s>-1?n.slice(s+1):"",e)}else{for(i="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<i.length;++r)e.write_shift(1,parseInt(i[r],16));for(var l=0;n.slice(l*3,l*3+3)=="../"||n.slice(l*3,l*3+3)=="..\\";)++l;for(e.write_shift(2,l),e.write_shift(4,n.length-3*l+1),r=0;r<n.length-3*l;++r)e.write_shift(1,n.charCodeAt(r+3*l)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),r=0;r<6;++r)e.write_shift(4,0)}return e.slice(0,e.l)}function eO(t){var e=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),s=t.read_shift(1);return[e,r,n,s]}function tO(t,e){var r=eO(t);return r[3]=0,r}function Ou(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:e,c:r,ixfe:n}}function Ph(t,e,r,n){return n||(n=ct(6)),n.write_shift(2,t),n.write_shift(2,e),n.write_shift(2,r||0),n}function Ade(t){var e=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:e,flags:r}}function dde(t,e,r){return e===0?"":r0(t,e,r)}function fde(t,e,r){var n=r.biff>8?4:2,s=t.read_shift(n),a=t.read_shift(n,"i"),i=t.read_shift(n,"i");return[s,a,i]}function rO(t){var e=t.read_shift(2),r=AT(t);return[e,r]}function hde(t,e,r){t.l+=4,e-=4;var n=t.l+e,s=v1(t,e,r),a=t.read_shift(2);if(n-=t.l,a!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+a);return t.l+=a,s}function lb(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2);return{s:{c:n,r:e},e:{c:s,r}}}function nO(t,e){return e||(e=ct(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function sO(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),s=t.read_shift(1);return{s:{c:n,r:e},e:{c:s,r}}}var mde=sO;function aO(t){t.l+=4;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,e,n]}function pde(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function gde(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function Ri(t){t.l+=2,t.l+=t.read_shift(2)}var xde={0:Ri,4:Ri,5:Ri,6:Ri,7:gde,8:Ri,9:Ri,10:Ri,11:Ri,12:Ri,13:pde,14:Ri,15:Ri,16:Ri,17:Ri,18:Ri,19:Ri,20:Ri,21:aO};function vde(t,e){for(var r=t.l+e,n=[];t.l<r;){var s=t.read_shift(2);t.l-=2;try{n.push(xde[s](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Wv(t,e){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),e-=2,e>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(e),r}function mT(t,e,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var a=ct(s);return a.write_shift(2,n),a.write_shift(2,e),s>4&&a.write_shift(2,29282),s>6&&a.write_shift(2,1997),s>8&&(a.write_shift(2,49161),a.write_shift(2,1),a.write_shift(2,1798),a.write_shift(2,0)),a}function yde(t,e){return e===0||t.read_shift(2),1200}function wde(t,e,r){if(r.enc)return t.l+=e,"";var n=t.l,s=r0(t,0,r);return t.read_shift(e+n-t.l),s}function bde(t,e){var r=!e||e.biff==8,n=ct(r?112:54);for(n.write_shift(e.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Cde(t,e,r){var n=r&&r.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Ede(t,e,r){var n=t.read_shift(4),s=t.read_shift(1)&3,a=t.read_shift(1);switch(a){case 0:a="Worksheet";break;case 1:a="Macrosheet";break;case 2:a="Chartsheet";break;case 6:a="VBAModule";break}var i=v1(t,0,r);return i.length===0&&(i="Sheet1"),{pos:n,hs:s,dt:a,name:i}}function _de(t,e){var r=!e||e.biff>=8?2:1,n=ct(8+r*t.name.length);n.write_shift(4,t.pos),n.write_shift(1,t.hs||0),n.write_shift(1,t.dt),n.write_shift(1,t.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(r*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function Sde(t,e){for(var r=t.l+e,n=t.read_shift(4),s=t.read_shift(4),a=[],i=0;i!=s&&t.l<r;++i)a.push(nde(t));return a.Count=n,a.Unique=s,a}function Tde(t,e){var r=ct(8);r.write_shift(4,t.Count),r.write_shift(4,t.Unique);for(var n=[],s=0;s<t.length;++s)n[s]=sde(t[s]);var a=Xa([r].concat(n));return a.parts=[r.length].concat(n.map(function(i){return i.length})),a}function Nde(t,e){var r={};return r.dsst=t.read_shift(2),t.l+=e-2,r}function Bde(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(e.level=n&7),n&32&&(e.hidden=!0),n&64&&(e.hpt=r/20),e}function kde(t){var e=Ade(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var r=t.read_shift(4);return r!==0}function Ide(t){return t.read_shift(2),t.read_shift(4)}function aD(t,e,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var s=t.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var a={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[a,s]}function Fde(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2);return{Pos:[e,r],Dim:[n,s],Flags:a,CurTab:i,FirstTab:o,Selected:l,TabRatio:u}}function Dde(){var t=ct(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function Rde(t,e,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function Lde(t){var e=ct(18),r=1718;return t&&t.RTL&&(r|=64),e.write_shift(2,r),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function Ude(){}function Mde(t,e,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=v1(t,0,r),n}function Pde(t,e){var r=t.name||"Arial",n=e&&e.biff==5,s=n?15+r.length:16+2*r.length,a=ct(s);return a.write_shift(2,t.sz*20),a.write_shift(4,0),a.write_shift(2,400),a.write_shift(4,0),a.write_shift(2,0),a.write_shift(1,r.length),n||a.write_shift(1,1),a.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),a}function jde(t){var e=Ou(t);return e.isst=t.read_shift(4),e}function Ode(t,e,r,n){var s=ct(10);return Ph(t,e,n,s),s.write_shift(4,r),s}function Qde(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+e,s=Ou(t);r.biff==2&&t.l++;var a=y1(t,n-t.l,r);return s.val=a,s}function Hde(t,e,r,n,s){var a=!s||s.biff==8,i=ct(8+ +a+(1+a)*r.length);return Ph(t,e,n,i),i.write_shift(2,r.length),a&&i.write_shift(1,1),i.write_shift((1+a)*r.length,r,a?"utf16le":"sbcs"),i}function Vde(t,e,r){var n=t.read_shift(2),s=r0(t,0,r);return[n,s]}function zde(t,e,r,n){var s=r&&r.biff==5;n||(n=ct(s?3+e.length:5+2*e.length)),n.write_shift(2,t),n.write_shift(s?1:2,e.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*e.length,e,s?"sbcs":"utf16le");var a=n.length>n.l?n.slice(0,n.l):n;return a.l==null&&(a.l=a.length),a}var Gde=r0;function iD(t,e,r){var n=t.l+e,s=r.biff==8||!r.biff?4:2,a=t.read_shift(s),i=t.read_shift(s),o=t.read_shift(2),l=t.read_shift(2);return t.l=n,{s:{r:a,c:o},e:{r:i,c:l}}}function qde(t,e){var r=e.biff==8||!e.biff?4:2,n=ct(2*r+6);return n.write_shift(r,t.s.r),n.write_shift(r,t.e.r+1),n.write_shift(2,t.s.c),n.write_shift(2,t.e.c+1),n.write_shift(2,0),n}function Kde(t){var e=t.read_shift(2),r=t.read_shift(2),n=rO(t);return{r:e,c:r,ixfe:n[0],rknum:n[1]}}function $de(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),a=[];t.l<r;)a.push(rO(t));if(t.l!==r)throw new Error("MulRK read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:i,rkrec:a}}function Wde(t,e){for(var r=t.l+e-2,n=t.read_shift(2),s=t.read_shift(2),a=[];t.l<r;)a.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var i=t.read_shift(2);if(a.length!=i-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:i,ixfe:a}}function Yde(t,e,r,n){var s={},a=t.read_shift(4),i=t.read_shift(4),o=t.read_shift(4),l=t.read_shift(2);return s.patternType=kAe[o>>26],n.cellStyles&&(s.alc=a&7,s.fWrap=a>>3&1,s.alcV=a>>4&7,s.fJustLast=a>>7&1,s.trot=a>>8&255,s.cIndent=a>>16&15,s.fShrinkToFit=a>>20&1,s.iReadOrder=a>>22&2,s.fAtrNum=a>>26&1,s.fAtrFnt=a>>27&1,s.fAtrAlc=a>>28&1,s.fAtrBdr=a>>29&1,s.fAtrPat=a>>30&1,s.fAtrProt=a>>31&1,s.dgLeft=i&15,s.dgRight=i>>4&15,s.dgTop=i>>8&15,s.dgBottom=i>>12&15,s.icvLeft=i>>16&127,s.icvRight=i>>23&127,s.grbitDiag=i>>30&3,s.icvTop=o&127,s.icvBottom=o>>7&127,s.icvDiag=o>>14&127,s.dgDiag=o>>21&15,s.icvFore=l&127,s.icvBack=l>>7&127,s.fsxButton=l>>14&1),s}function Jde(t,e,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,e-=6,n.data=Yde(t,e,n.fStyle,r),n}function oD(t,e,r,n){var s=r&&r.biff==5;n||(n=ct(s?16:20)),n.write_shift(2,0),t.style?(n.write_shift(2,t.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,t.numFmtId||0),n.write_shift(2,e<<4));var a=0;return t.numFmtId>0&&s&&(a|=1024),n.write_shift(4,a),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function Xde(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function Zde(t){var e=ct(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function lD(t,e,r){var n=Ou(t);(r.biff==2||e==9)&&++t.l;var s=rde(t);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function efe(t,e,r,n,s,a){var i=ct(8);return Ph(t,e,n,i),Xj(r,a,i),i}function tfe(t,e,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ou(t),s=zi(t);return n.val=s,n}function rfe(t,e,r,n){var s=ct(14);return Ph(t,e,n,s),Uh(r,s),s}var cD=dde;function nfe(t,e,r){var n=t.l+e,s=t.read_shift(2),a=t.read_shift(2);if(r.sbcch=a,a==1025||a==14849)return[a,s];if(a<1||a>255)throw new Error("Unexpected SupBook type: "+a);for(var i=Mh(t,a),o=[];n>t.l;)o.push(y1(t));return[a,s,i,o]}function uD(t,e,r){var n=t.read_shift(2),s,a={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=hde(t,e-2,r)),a.body=s||t.read_shift(e-2),typeof s=="string"&&(a.Name=s),a}var sfe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function AD(t,e,r){var n=t.l+e,s=t.read_shift(2),a=t.read_shift(1),i=t.read_shift(1),o=t.read_shift(r&&r.biff==2?1:2),l=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),l=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var u=Mh(t,i,r);s&32&&(u=sfe[u.charCodeAt(0)]);var d=n-t.l;r&&r.biff==2&&--d;var h=n==t.l||o===0||!(d>0)?[]:vpe(t,d,r,o);return{chKey:a,Name:u,itab:l,rgce:h}}function iO(t,e,r){if(r.biff<8)return afe(t,e,r);for(var n=[],s=t.l+e,a=t.read_shift(r.biff>8?4:2);a--!==0;)n.push(fde(t,r.biff>8?12:6,r));if(t.l!=s)throw new Error("Bad ExternSheet: "+t.l+" != "+s);return n}function afe(t,e,r){t[t.l+1]==3&&t[t.l]++;var n=v1(t,e,r);return n.charCodeAt(0)==3?n.slice(1):n}function ife(t,e,r){if(r.biff<8){t.l+=e;return}var n=t.read_shift(2),s=t.read_shift(2),a=Mh(t,n,r),i=Mh(t,s,r);return[a,i]}function ofe(t,e,r){var n=sO(t);t.l++;var s=t.read_shift(1);return e-=8,[ype(t,e,r),s,n]}function dD(t,e,r){var n=mde(t);switch(r.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[n,gpe(t,e,r)]}function lfe(t){var e=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[e,r,n]}function cfe(t,e,r){if(!(r.biff<8)){var n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2),i=t.read_shift(2),o=r0(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:s},o,i,a]}}function ufe(t,e,r){return cfe(t,e,r)}function Afe(t,e){for(var r=[],n=t.read_shift(2);n--;)r.push(lb(t));return r}function dfe(t){var e=ct(2+t.length*8);e.write_shift(2,t.length);for(var r=0;r<t.length;++r)nO(t[r],e);return e}function ffe(t,e,r){if(r&&r.biff<8)return mfe(t,e,r);var n=aO(t),s=vde(t,e-22,n[1]);return{cmo:n,ft:s}}var hfe={8:function(t,e){var r=t.l+e;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var s=t.read_shift(1);return t.l+=s,t.l=r,{fmt:n}}};function mfe(t,e,r){t.l+=4;var n=t.read_shift(2),s=t.read_shift(2),a=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var i=[];return i.push((hfe[n]||Wi)(t,e,r)),{cmo:[s,n,a],ft:i}}function pfe(t,e,r){var n=t.l,s="";try{t.l+=4;var a=(r.lastobj||{cmo:[0,0]}).cmo[1],i;[0,5,7,11,12,14].indexOf(a)==-1?t.l+=6:i=ade(t,6,r);var o=t.read_shift(2);t.read_shift(2),Ca(t,2);var l=t.read_shift(2);t.l+=l;for(var u=1;u<t.lens.length-1;++u){if(t.l-n!=t.lens[u])throw new Error("TxO: bad continue record");var d=t[t.l],h=Mh(t,t.lens[u+1]-t.lens[u]-1);if(s+=h,s.length>=(d?o:2*o))break}if(s.length!==o&&s.length!==o*2)throw new Error("cchText: "+o+" != "+s.length);return t.l=n+e,{t:s}}catch{return t.l=n+e,{t:s}}}function gfe(t,e){var r=lb(t);t.l+=16;var n=cde(t,e-24);return[r,n]}function xfe(t){var e=ct(24),r=Fs(t[0]);e.write_shift(2,r.r),e.write_shift(2,r.r),e.write_shift(2,r.c),e.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)e.write_shift(1,parseInt(n[s],16));return Xa([e,ude(t[1])])}function vfe(t,e){t.read_shift(2);var r=lb(t),n=t.read_shift((e-10)/2,"dbcs-cont");return n=n.replace(oo,""),[r,n]}function yfe(t){var e=t[1].Tooltip,r=ct(10+2*(e.length+1));r.write_shift(2,2048);var n=Fs(t[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<e.length;++s)r.write_shift(2,e.charCodeAt(s));return r.write_shift(2,0),r}function wfe(t){var e=[0,0],r;return r=t.read_shift(2),e[0]=Y6[r]||r,r=t.read_shift(2),e[1]=Y6[r]||r,e}function bfe(t){return t||(t=ct(4)),t.write_shift(2,1),t.write_shift(2,1),t}function Cfe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(tO(t));return r}function Efe(t){for(var e=t.read_shift(2),r=[];e-- >0;)r.push(tO(t));return r}function _fe(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function oO(t,e,r){if(!r.cellStyles)return Wi(t,e);var n=r&&r.biff>=12?4:2,s=t.read_shift(n),a=t.read_shift(n),i=t.read_shift(n),o=t.read_shift(n),l=t.read_shift(2);n==2&&(t.l+=2);var u={s,e:a,w:i,ixfe:o,flags:l};return(r.biff>=5||!r.biff)&&(u.level=l>>8&7),u}function Sfe(t,e){var r=ct(12);r.write_shift(2,e),r.write_shift(2,e),r.write_shift(2,t.width*256),r.write_shift(2,0);var n=0;return t.hidden&&(n|=1),r.write_shift(1,n),n=t.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function Tfe(t,e){var r={};return e<32||(t.l+=16,r.header=zi(t),r.footer=zi(t),t.l+=2),r}function Nfe(t,e,r){var n={area:!1};if(r.biff!=5)return t.l+=e,n;var s=t.read_shift(1);return t.l+=3,s&16&&(n.area=!0),n}function Bfe(t){for(var e=ct(2*t),r=0;r<t;++r)e.write_shift(2,r+1);return e}var kfe=Ou,Ife=Jj,Ffe=y1;function Dfe(t){var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s={fmt:e,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,s}function Rfe(t,e,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ou(t);++t.l;var s=r0(t,e-7,r);return n.t="str",n.val=s,n}function Lfe(t){var e=Ou(t);++t.l;var r=zi(t);return e.t="n",e.val=r,e}function Ufe(t,e,r){var n=ct(15);return E1(n,t,e),n.write_shift(8,r,"f"),n}function Mfe(t){var e=Ou(t);++t.l;var r=t.read_shift(2);return e.t="n",e.val=r,e}function Pfe(t,e,r){var n=ct(9);return E1(n,t,e),n.write_shift(2,r),n}function jfe(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function Ofe(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function Qfe(t,e,r){var n=t.l+e,s=Ou(t),a=t.read_shift(2),i=Mh(t,a,r);return t.l=n,s.t="str",s.val=i,s}var Hfe=[2,3,48,49,131,139,140,245],LS=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=ab({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(o,l){var u=[],d=Cf(1);switch(l.type){case"base64":d=rl(ll(o));break;case"binary":d=rl(o);break;case"buffer":case"array":d=o;break}Ai(d,0);var h=d.read_shift(1),m=!!(h&136),g=!1,b=!1;switch(h){case 2:break;case 3:break;case 48:g=!0,m=!0;break;case 49:g=!0,m=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var y=0,_=521;h==2&&(y=d.read_shift(2)),d.l+=3,h!=2&&(y=d.read_shift(4)),y>1048576&&(y=1e6),h!=2&&(_=d.read_shift(2));var T=d.read_shift(2),k=l.codepage||1252;h!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=t[d[d.l]]),d.l+=1,d.l+=2),b&&(d.l+=36);for(var D=[],M={},P=Math.min(d.length,h==2?521:_-10-(g?264:0)),L=b?32:11;d.l<P&&d[d.l]!=13;)switch(M={},M.name=Ex.utils.decode(k,d.slice(d.l,d.l+L)).replace(/[\u0000\r\n].*$/g,""),d.l+=L,M.type=String.fromCharCode(d.read_shift(1)),h!=2&&!b&&(M.offset=d.read_shift(4)),M.len=d.read_shift(1),h==2&&(M.offset=d.read_shift(2)),M.dec=d.read_shift(1),M.name.length&&D.push(M),h!=2&&(d.l+=b?13:14),M.type){case"B":(!g||M.len!=8)&&l.WTF&&console.log("Skipping "+M.name+":"+M.type);break;case"G":case"P":l.WTF&&console.log("Skipping "+M.name+":"+M.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+M.type)}if(d[d.l]!==13&&(d.l=_-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=_;var C=0,E=0;for(u[0]=[],E=0;E!=D.length;++E)u[0][E]=D[E].name;for(;y-- >0;){if(d[d.l]===42){d.l+=T;continue}for(++d.l,u[++C]=[],E=0,E=0;E!=D.length;++E){var B=d.slice(d.l,d.l+D[E].len);d.l+=D[E].len,Ai(B,0);var O=Ex.utils.decode(k,B);switch(D[E].type){case"C":O.trim().length&&(u[C][E]=O.replace(/\s+$/,""));break;case"D":O.length===8?u[C][E]=new Date(+O.slice(0,4),+O.slice(4,6)-1,+O.slice(6,8)):u[C][E]=O;break;case"F":u[C][E]=parseFloat(O.trim());break;case"+":case"I":u[C][E]=b?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(O.trim().toUpperCase()){case"Y":case"T":u[C][E]=!0;break;case"N":case"F":u[C][E]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+O+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));u[C][E]="##MEMO##"+(b?parseInt(O.trim(),10):B.read_shift(4));break;case"N":O=O.replace(/\u0000/g,"").trim(),O&&O!="."&&(u[C][E]=+O||0);break;case"@":u[C][E]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":u[C][E]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":u[C][E]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[C][E]=-B.read_shift(-8,"f");break;case"B":if(g&&D[E].len==8){u[C][E]=B.read_shift(8,"f");break}case"G":case"P":B.l+=D[E].len;break;case"0":if(D[E].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+D[E].type)}}}if(h!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return l&&l.sheetRows&&(u=u.slice(0,l.sheetRows)),l.DBF=D,u}function n(o,l){var u=l||{};u.dateNF||(u.dateNF="yyyymmdd");var d=fp(r(o,u),u);return d["!cols"]=u.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete u.DBF,d}function s(o,l){try{return Ff(n(o,l),l)}catch(u){if(l&&l.WTF)throw u}return{SheetNames:[],Sheets:{}}}var a={B:8,C:250,L:1,D:8,"?":0,"":0};function i(o,l){var u=l||{};if(+u.codepage>=0&&Bc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Io(),h=q2(o,{header:1,raw:!0,cellDates:!0}),m=h[0],g=h.slice(1),b=o["!cols"]||[],y=0,_=0,T=0,k=1;for(y=0;y<m.length;++y){if(((b[y]||{}).DBF||{}).name){m[y]=b[y].DBF.name,++T;continue}if(m[y]!=null){if(++T,typeof m[y]=="number"&&(m[y]=m[y].toString(10)),typeof m[y]!="string")throw new Error("DBF Invalid column name "+m[y]+" |"+typeof m[y]+"|");if(m.indexOf(m[y])!==y){for(_=0;_<1024;++_)if(m.indexOf(m[y]+"_"+_)==-1){m[y]+="_"+_;break}}}}var D=_n(o["!ref"]),M=[],P=[],L=[];for(y=0;y<=D.e.c-D.s.c;++y){var C="",E="",B=0,O=[];for(_=0;_<g.length;++_)g[_][y]!=null&&O.push(g[_][y]);if(O.length==0||m[y]==null){M[y]="?";continue}for(_=0;_<O.length;++_){switch(typeof O[_]){case"number":E="B";break;case"string":E="C";break;case"boolean":E="L";break;case"object":E=O[_]instanceof Date?"D":"C";break;default:E="C"}B=Math.max(B,String(O[_]).length),C=C&&C!=E?"C":E}B>250&&(B=250),E=((b[y]||{}).DBF||{}).type,E=="C"&&b[y].DBF.len>B&&(B=b[y].DBF.len),C=="B"&&E=="N"&&(C="N",L[y]=b[y].DBF.dec,B=b[y].DBF.len),P[y]=C=="C"||E=="N"?B:a[C]||0,k+=P[y],M[y]=C}var R=d.next(32);for(R.write_shift(4,318902576),R.write_shift(4,g.length),R.write_shift(2,296+32*T),R.write_shift(2,k),y=0;y<4;++y)R.write_shift(4,0);for(R.write_shift(4,0|(+e[YP]||3)<<8),y=0,_=0;y<m.length;++y)if(m[y]!=null){var F=d.next(32),Q=(m[y].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);F.write_shift(1,Q,"sbcs"),F.write_shift(1,M[y]=="?"?"C":M[y],"sbcs"),F.write_shift(4,_),F.write_shift(1,P[y]||a[M[y]]||0),F.write_shift(1,L[y]||0),F.write_shift(1,2),F.write_shift(4,0),F.write_shift(1,0),F.write_shift(4,0),F.write_shift(4,0),_+=P[y]||a[M[y]]||0}var H=d.next(264);for(H.write_shift(4,13),y=0;y<65;++y)H.write_shift(4,0);for(y=0;y<g.length;++y){var ne=d.next(k);for(ne.write_shift(1,0),_=0;_<m.length;++_)if(m[_]!=null)switch(M[_]){case"L":ne.write_shift(1,g[y][_]==null?63:g[y][_]?84:70);break;case"B":ne.write_shift(8,g[y][_]||0,"f");break;case"N":var J="0";for(typeof g[y][_]=="number"&&(J=g[y][_].toFixed(L[_]||0)),T=0;T<P[_]-J.length;++T)ne.write_shift(1,32);ne.write_shift(1,J,"sbcs");break;case"D":g[y][_]?(ne.write_shift(4,("0000"+g[y][_].getFullYear()).slice(-4),"sbcs"),ne.write_shift(2,("00"+(g[y][_].getMonth()+1)).slice(-2),"sbcs"),ne.write_shift(2,("00"+g[y][_].getDate()).slice(-2),"sbcs")):ne.write_shift(8,"00000000","sbcs");break;case"C":var re=String(g[y][_]!=null?g[y][_]:"").slice(0,P[_]);for(ne.write_shift(1,re,"sbcs"),T=0;T<P[_]-re.length;++T)ne.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:s,to_sheet:n,from_sheet:i}}(),lO=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+$s(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,g){var b=t[g];return typeof b=="number"?C6(b):b},n=function(m,g,b){var y=g.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return y==59?m:C6(y)};t["|"]=254;function s(m,g){switch(g.type){case"base64":return a(ll(m),g);case"binary":return a(m,g);case"buffer":return a(Jr&&Buffer.isBuffer(m)?m.toString("binary"):If(m),g);case"array":return a(Lh(m),g)}throw new Error("Unrecognized type "+g.type)}function a(m,g){var b=m.split(/[\n\r]+/),y=-1,_=-1,T=0,k=0,D=[],M=[],P=null,L={},C=[],E=[],B=[],O=0,R;for(+g.codepage>=0&&Bc(+g.codepage);T!==b.length;++T){O=0;var F=b[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,r),Q=F.replace(/;;/g,"\0").split(";").map(function(te){return te.replace(/\u0000/g,";")}),H=Q[0],ne;if(F.length>0)switch(H){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Q[1].charAt(0)=="P"&&M.push(F.slice(3).replace(/;;/g,";"));break;case"C":var J=!1,re=!1,G=!1,q=!1,W=-1,ie=-1;for(k=1;k<Q.length;++k)switch(Q[k].charAt(0)){case"A":break;case"X":_=parseInt(Q[k].slice(1))-1,re=!0;break;case"Y":for(y=parseInt(Q[k].slice(1))-1,re||(_=0),R=D.length;R<=y;++R)D[R]=[];break;case"K":ne=Q[k].slice(1),ne.charAt(0)==='"'?ne=ne.slice(1,ne.length-1):ne==="TRUE"?ne=!0:ne==="FALSE"?ne=!1:isNaN(Ic(ne))?isNaN(Hm(ne).getDate())||(ne=hs(ne)):(ne=Ic(ne),P!==null&&Ap(P)&&(ne=ob(ne))),J=!0;break;case"E":q=!0;var j=Tm(Q[k].slice(1),{r:y,c:_});D[y][_]=[D[y][_],j];break;case"S":G=!0,D[y][_]=[D[y][_],"S5S"];break;case"G":break;case"R":W=parseInt(Q[k].slice(1))-1;break;case"C":ie=parseInt(Q[k].slice(1))-1;break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+F)}if(J&&(D[y][_]&&D[y][_].length==2?D[y][_][0]=ne:D[y][_]=ne,P=null),G){if(q)throw new Error("SYLK shared formula cannot have own formula");var Y=W>-1&&D[W][ie];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");D[y][_][1]=SO(Y[1],{r:y-W,c:_-ie})}break;case"F":var ee=0;for(k=1;k<Q.length;++k)switch(Q[k].charAt(0)){case"X":_=parseInt(Q[k].slice(1))-1,++ee;break;case"Y":for(y=parseInt(Q[k].slice(1))-1,R=D.length;R<=y;++R)D[R]=[];break;case"M":O=parseInt(Q[k].slice(1))/20;break;case"F":break;case"G":break;case"P":P=M[parseInt(Q[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=Q[k].slice(1).split(" "),R=parseInt(B[0],10);R<=parseInt(B[1],10);++R)O=parseInt(B[2],10),E[R-1]=O===0?{hidden:!0}:{wch:O},Ef(E[R-1]);break;case"C":_=parseInt(Q[k].slice(1))-1,E[_]||(E[_]={});break;case"R":y=parseInt(Q[k].slice(1))-1,C[y]||(C[y]={}),O>0?(C[y].hpt=O,C[y].hpx=zm(O)):O===0&&(C[y].hidden=!0);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+F)}ee<1&&(P=null);break;default:if(g&&g.WTF)throw new Error("SYLK bad record "+F)}}return C.length>0&&(L["!rows"]=C),E.length>0&&(L["!cols"]=E),g&&g.sheetRows&&(D=D.slice(0,g.sheetRows)),[D,L]}function i(m,g){var b=s(m,g),y=b[0],_=b[1],T=fp(y,g);return $s(_).forEach(function(k){T[k]=_[k]}),T}function o(m,g){return Ff(i(m,g),g)}function l(m,g,b,y){var _="C;Y"+(b+1)+";X"+(y+1)+";K";switch(m.t){case"n":_+=m.v||0,m.f&&!m.F&&(_+=";E"+wT(m.f,{r:b,c:y}));break;case"b":_+=m.v?"TRUE":"FALSE";break;case"e":_+=m.w||m.v;break;case"d":_+='"'+(m.w||m.v)+'"';break;case"s":_+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return _}function u(m,g){g.forEach(function(b,y){var _="F;W"+(y+1)+" "+(y+1)+" ";b.hidden?_+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=Fx(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=Dx(b.wpx)),typeof b.wch=="number"&&(_+=Math.round(b.wch))),_.charAt(_.length-1)!=" "&&m.push(_)})}function d(m,g){g.forEach(function(b,y){var _="F;";b.hidden?_+="M0;":b.hpt?_+="M"+20*b.hpt+";":b.hpx&&(_+="M"+20*Rx(b.hpx)+";"),_.length>2&&m.push(_+"R"+(y+1))})}function h(m,g){var b=["ID;PWXL;N;E"],y=[],_=_n(m["!ref"]),T,k=Array.isArray(m),D=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),m["!cols"]&&u(b,m["!cols"]),m["!rows"]&&d(b,m["!rows"]),b.push("B;Y"+(_.e.r-_.s.r+1)+";X"+(_.e.c-_.s.c+1)+";D"+[_.s.c,_.s.r,_.e.c,_.e.r].join(" "));for(var M=_.s.r;M<=_.e.r;++M)for(var P=_.s.c;P<=_.e.c;++P){var L=_r({r:M,c:P});T=k?(m[M]||[])[P]:m[L],!(!T||T.v==null&&(!T.f||T.F))&&y.push(l(T,m,M,P))}return b.join(D)+D+y.join(D)+D+"E"+D}return{to_workbook:o,to_sheet:i,from_sheet:h}}(),cO=function(){function t(a,i){switch(i.type){case"base64":return e(ll(a),i);case"binary":return e(a,i);case"buffer":return e(Jr&&Buffer.isBuffer(a)?a.toString("binary"):If(a),i);case"array":return e(Lh(a),i)}throw new Error("Unrecognized type "+i.type)}function e(a,i){for(var o=a.split(`
`),l=-1,u=-1,d=0,h=[];d!==o.length;++d){if(o[d].trim()==="BOT"){h[++l]=[],u=0;continue}if(!(l<0)){var m=o[d].trim().split(","),g=m[0],b=m[1];++d;for(var y=o[d]||"";(y.match(/["]/g)||[]).length&1&&d<o.length-1;)y+=`
`+o[++d];switch(y=y.trim(),+g){case-1:if(y==="BOT"){h[++l]=[],u=0;continue}else if(y!=="EOD")throw new Error("Unrecognized DIF special command "+y);break;case 0:y==="TRUE"?h[l][u]=!0:y==="FALSE"?h[l][u]=!1:isNaN(Ic(b))?isNaN(Hm(b).getDate())?h[l][u]=b:h[l][u]=hs(b):h[l][u]=Ic(b),++u;break;case 1:y=y.slice(1,y.length-1),y=y.replace(/""/g,'"'),y&&y.match(/^=".*"$/)&&(y=y.slice(2,-1)),h[l][u++]=y!==""?y:null;break}if(y==="EOD")break}}return i&&i.sheetRows&&(h=h.slice(0,i.sheetRows)),h}function r(a,i){return fp(t(a,i),i)}function n(a,i){return Ff(r(a,i),i)}var s=function(){var a=function(l,u,d,h,m){l.push(u),l.push(d+","+h),l.push('"'+m.replace(/"/g,'""')+'"')},i=function(l,u,d,h){l.push(u+","+d),l.push(u==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(l){var u=[],d=_n(l["!ref"]),h,m=Array.isArray(l);a(u,"TABLE",0,1,"sheetjs"),a(u,"VECTORS",0,d.e.r-d.s.r+1,""),a(u,"TUPLES",0,d.e.c-d.s.c+1,""),a(u,"DATA",0,0,"");for(var g=d.s.r;g<=d.e.r;++g){i(u,-1,0,"BOT");for(var b=d.s.c;b<=d.e.c;++b){var y=_r({r:g,c:b});if(h=m?(l[g]||[])[b]:l[y],!h){i(u,1,0,"");continue}switch(h.t){case"n":var _=h.w;!_&&h.v!=null&&(_=h.v),_==null?h.f&&!h.F?i(u,1,0,"="+h.f):i(u,1,0,""):i(u,0,_,"V");break;case"b":i(u,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":i(u,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Yl(h.z||wr[14],ja(hs(h.v)))),i(u,0,h.w,"V");break;default:i(u,1,0,"")}}}i(u,-1,0,"EOD");var T=`\r
`,k=u.join(T);return k}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),uO=function(){function t(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,m){for(var g=h.split(`
`),b=-1,y=-1,_=0,T=[];_!==g.length;++_){var k=g[_].trim().split(":");if(k[0]==="cell"){var D=Fs(k[1]);if(T.length<=D.r)for(b=T.length;b<=D.r;++b)T[b]||(T[b]=[]);switch(b=D.r,y=D.c,k[2]){case"t":T[b][y]=t(k[3]);break;case"v":T[b][y]=+k[3];break;case"vtf":var M=k[k.length-1];case"vtc":switch(k[3]){case"nl":T[b][y]=!!+k[4];break;default:T[b][y]=+k[4];break}k[2]=="vtf"&&(T[b][y]=[T[b][y],M])}}}return m&&m.sheetRows&&(T=T.slice(0,m.sheetRows)),T}function n(h,m){return fp(r(h,m),m)}function s(h,m){return Ff(n(h,m),m)}var a=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),i=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),l="--SocialCalcSpreadsheetControlSave--";function u(h){if(!h||!h["!ref"])return"";for(var m=[],g=[],b,y="",_=Do(h["!ref"]),T=Array.isArray(h),k=_.s.r;k<=_.e.r;++k)for(var D=_.s.c;D<=_.e.c;++D)if(y=_r({r:k,c:D}),b=T?(h[k]||[])[D]:h[y],!(!b||b.v==null||b.t==="z")){switch(g=["cell",y,"t"],b.t){case"s":case"str":g.push(e(b.v));break;case"n":b.f?(g[2]="vtf",g[3]="n",g[4]=b.v,g[5]=e(b.f)):(g[2]="v",g[3]=b.v);break;case"b":g[2]="vt"+(b.f?"f":"c"),g[3]="nl",g[4]=b.v?"1":"0",g[5]=e(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var M=ja(hs(b.v));g[2]="vtc",g[3]="nd",g[4]=""+M,g[5]=b.w||Yl(b.z||wr[14],M);break;case"e":continue}m.push(g.join(":"))}return m.push("sheet:c:"+(_.e.c-_.s.c+1)+":r:"+(_.e.r-_.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function d(h){return[a,i,o,i,u(h),l].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:d}}(),Vm=function(){function t(d,h,m,g,b){b.raw?h[m][g]=d:d===""||(d==="TRUE"?h[m][g]=!0:d==="FALSE"?h[m][g]=!1:isNaN(Ic(d))?isNaN(Hm(d).getDate())?h[m][g]=d:h[m][g]=hs(d):h[m][g]=Ic(d))}function e(d,h){var m=h||{},g=[];if(!d||d.length===0)return g;for(var b=d.split(/[\r\n]/),y=b.length-1;y>=0&&b[y].length===0;)--y;for(var _=10,T=0,k=0;k<=y;++k)T=b[k].indexOf(" "),T==-1?T=b[k].length:T++,_=Math.max(_,T);for(k=0;k<=y;++k){g[k]=[];var D=0;for(t(b[k].slice(0,_).trim(),g,k,D,m),D=1;D<=(b[k].length-_)/10+1;++D)t(b[k].slice(_+(D-1)*10,_+D*10).trim(),g,k,D,m)}return m.sheetRows&&(g=g.slice(0,m.sheetRows)),g}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(d){for(var h={},m=!1,g=0,b=0;g<d.length;++g)(b=d.charCodeAt(g))==34?m=!m:!m&&b in r&&(h[b]=(h[b]||0)+1);b=[];for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g]);if(!b.length){h=n;for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&b.push([h[g],g])}return b.sort(function(y,_){return y[0]-_[0]||n[y[1]]-n[_[1]]}),r[b.pop()[1]]||44}function a(d,h){var m=h||{},g="",b=m.dense?[]:{},y={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(g=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(g=d.charAt(4),d=d.slice(6)):g=s(d.slice(0,1024)):m&&m.FS?g=m.FS:g=s(d.slice(0,1024));var _=0,T=0,k=0,D=0,M=0,P=g.charCodeAt(0),L=!1,C=0,E=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var B=m.dateNF!=null?Nue(m.dateNF):null;function O(){var R=d.slice(D,M),F={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)F.t="z";else if(m.raw)F.t="s",F.v=R;else if(R.trim().length===0)F.t="s",F.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(F.t="s",F.v=R.slice(2,-1).replace(/""/g,'"')):nme(R)?(F.t="n",F.f=R.slice(1)):(F.t="s",F.v=R);else if(R=="TRUE")F.t="b",F.v=!0;else if(R=="FALSE")F.t="b",F.v=!1;else if(!isNaN(k=Ic(R)))F.t="n",m.cellText!==!1&&(F.w=R),F.v=k;else if(!isNaN(Hm(R).getDate())||B&&R.match(B)){F.z=m.dateNF||wr[14];var Q=0;B&&R.match(B)&&(R=Bue(R,m.dateNF,R.match(B)||[]),Q=1),m.cellDates?(F.t="d",F.v=hs(R,Q)):(F.t="n",F.v=ja(hs(R,Q))),m.cellText!==!1&&(F.w=Yl(F.z,F.v instanceof Date?ja(F.v):F.v)),m.cellNF||delete F.z}else F.t="s",F.v=R;if(F.t=="z"||(m.dense?(b[_]||(b[_]=[]),b[_][T]=F):b[_r({c:T,r:_})]=F),D=M+1,E=d.charCodeAt(D),y.e.c<T&&(y.e.c=T),y.e.r<_&&(y.e.r=_),C==P)++T;else if(T=0,++_,m.sheetRows&&m.sheetRows<=_)return!0}e:for(;M<d.length;++M)switch(C=d.charCodeAt(M)){case 34:E===34&&(L=!L);break;case P:case 10:case 13:if(!L&&O())break e;break}return M-D>0&&O(),b["!ref"]=Mr(y),b}function i(d,h){return!(h&&h.PRN)||h.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?a(d,h):fp(e(d,h),h)}function o(d,h){var m="",g=h.type=="string"?[0,0,0,0]:BT(d,h);switch(h.type){case"base64":m=ll(d);break;case"binary":m=d;break;case"buffer":h.codepage==65001?m=d.toString("utf8"):h.codepage&&typeof Ex<"u"||(m=Jr&&Buffer.isBuffer(d)?d.toString("binary"):If(d));break;case"array":m=Lh(d);break;case"string":m=d;break;default:throw new Error("Unrecognized type "+h.type)}return g[0]==239&&g[1]==187&&g[2]==191?m=rs(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=rs(m):h.type=="binary"&&typeof Ex<"u",m.slice(0,19)=="socialcalc:version:"?uO.to_sheet(h.type=="string"?m:rs(m),h):i(m,h)}function l(d,h){return Ff(o(d,h),h)}function u(d){for(var h=[],m=_n(d["!ref"]),g,b=Array.isArray(d),y=m.s.r;y<=m.e.r;++y){for(var _=[],T=m.s.c;T<=m.e.c;++T){var k=_r({r:y,c:T});if(g=b?(d[y]||[])[T]:d[k],!g||g.v==null){_.push("          ");continue}for(var D=(g.w||(jA(g),g.w)||"").slice(0,10);D.length<10;)D+=" ";_.push(D+(T===0?" ":""))}h.push(_.join(""))}return h.join(`
`)}return{to_workbook:l,to_sheet:o,from_sheet:u}}();function Vfe(t,e){var r=e||{},n=!!r.WTF;r.WTF=!0;try{var s=lO.to_workbook(t,r);return r.WTF=n,s}catch(a){if(r.WTF=n,!a.message.match(/SYLK bad record ID/)&&n)throw a;return Vm.to_workbook(t,e)}}var Ch=function(){function t(j,Y,ee){if(j){Ai(j,j.l||0);for(var te=ee.Enum||W;j.l<j.length;){var ce=j.read_shift(2),be=te[ce]||te[65535],he=j.read_shift(2),fe=j.l+he,ge=be.f&&be.f(j,he,ee);if(j.l=fe,Y(ge,be,ce))return}}}function e(j,Y){switch(Y.type){case"base64":return r(rl(ll(j)),Y);case"binary":return r(rl(j),Y);case"buffer":case"array":return r(j,Y)}throw"Unsupported type "+Y.type}function r(j,Y){if(!j)return j;var ee=Y||{},te=ee.dense?[]:{},ce="Sheet1",be="",he=0,fe={},ge=[],de=[],oe={s:{r:0,c:0},e:{r:0,c:0}},Ue=ee.sheetRows||0;if(j[2]==0&&(j[3]==8||j[3]==9)&&j.length>=16&&j[14]==5&&j[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(j[2]==2)ee.Enum=W,t(j,function(De,Qe,$e){switch($e){case 0:ee.vers=De,De>=4096&&(ee.qpro=!0);break;case 6:oe=De;break;case 204:De&&(be=De);break;case 222:be=De;break;case 15:case 51:ee.qpro||(De[1].v=De[1].v.slice(1));case 13:case 14:case 16:$e==14&&(De[2]&112)==112&&(De[2]&15)>1&&(De[2]&15)<15&&(De[1].z=ee.dateNF||wr[14],ee.cellDates&&(De[1].t="d",De[1].v=ob(De[1].v))),ee.qpro&&De[3]>he&&(te["!ref"]=Mr(oe),fe[ce]=te,ge.push(ce),te=ee.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},he=De[3],ce=be||"Sheet"+(he+1),be="");var ut=ee.dense?(te[De[0].r]||[])[De[0].c]:te[_r(De[0])];if(ut){ut.t=De[1].t,ut.v=De[1].v,De[1].z!=null&&(ut.z=De[1].z),De[1].f!=null&&(ut.f=De[1].f);break}ee.dense?(te[De[0].r]||(te[De[0].r]=[]),te[De[0].r][De[0].c]=De[1]):te[_r(De[0])]=De[1];break}},ee);else if(j[2]==26||j[2]==14)ee.Enum=ie,j[2]==14&&(ee.qpro=!0,j.l=0),t(j,function(De,Qe,$e){switch($e){case 204:ce=De;break;case 22:De[1].v=De[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(De[3]>he&&(te["!ref"]=Mr(oe),fe[ce]=te,ge.push(ce),te=ee.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},he=De[3],ce="Sheet"+(he+1)),Ue>0&&De[0].r>=Ue)break;ee.dense?(te[De[0].r]||(te[De[0].r]=[]),te[De[0].r][De[0].c]=De[1]):te[_r(De[0])]=De[1],oe.e.c<De[0].c&&(oe.e.c=De[0].c),oe.e.r<De[0].r&&(oe.e.r=De[0].r);break;case 27:De[14e3]&&(de[De[14e3][0]]=De[14e3][1]);break;case 1537:de[De[0]]=De[1],De[0]==he&&(ce=De[1]);break}},ee);else throw new Error("Unrecognized LOTUS BOF "+j[2]);if(te["!ref"]=Mr(oe),fe[be||ce]=te,ge.push(be||ce),!de.length)return{SheetNames:ge,Sheets:fe};for(var tt={},Fe=[],Ee=0;Ee<de.length;++Ee)fe[ge[Ee]]?(Fe.push(de[Ee]||ge[Ee]),tt[de[Ee]]=fe[de[Ee]]||fe[ge[Ee]]):(Fe.push(de[Ee]),tt[de[Ee]]={"!ref":"A1"});return{SheetNames:Fe,Sheets:tt}}function n(j,Y){var ee=Y||{};if(+ee.codepage>=0&&Bc(+ee.codepage),ee.type=="string")throw new Error("Cannot write WK1 to JS string");var te=Io(),ce=_n(j["!ref"]),be=Array.isArray(j),he=[];Mt(te,0,a(1030)),Mt(te,6,l(ce));for(var fe=Math.min(ce.e.r,8191),ge=ce.s.r;ge<=fe;++ge)for(var de=ua(ge),oe=ce.s.c;oe<=ce.e.c;++oe){ge===ce.s.r&&(he[oe]=Is(oe));var Ue=he[oe]+de,tt=be?(j[ge]||[])[oe]:j[Ue];if(!(!tt||tt.t=="z"))if(tt.t=="n")(tt.v|0)==tt.v&&tt.v>=-32768&&tt.v<=32767?Mt(te,13,g(ge,oe,tt.v)):Mt(te,14,y(ge,oe,tt.v));else{var Fe=jA(tt);Mt(te,15,h(ge,oe,Fe.slice(0,239)))}}return Mt(te,1),te.end()}function s(j,Y){var ee=Y||{};if(+ee.codepage>=0&&Bc(+ee.codepage),ee.type=="string")throw new Error("Cannot write WK3 to JS string");var te=Io();Mt(te,0,i(j));for(var ce=0,be=0;ce<j.SheetNames.length;++ce)(j.Sheets[j.SheetNames[ce]]||{})["!ref"]&&Mt(te,27,q(j.SheetNames[ce],be++));var he=0;for(ce=0;ce<j.SheetNames.length;++ce){var fe=j.Sheets[j.SheetNames[ce]];if(!(!fe||!fe["!ref"])){for(var ge=_n(fe["!ref"]),de=Array.isArray(fe),oe=[],Ue=Math.min(ge.e.r,8191),tt=ge.s.r;tt<=Ue;++tt)for(var Fe=ua(tt),Ee=ge.s.c;Ee<=ge.e.c;++Ee){tt===ge.s.r&&(oe[Ee]=Is(Ee));var De=oe[Ee]+Fe,Qe=de?(fe[tt]||[])[Ee]:fe[De];if(!(!Qe||Qe.t=="z"))if(Qe.t=="n")Mt(te,23,O(tt,Ee,he,Qe.v));else{var $e=jA(Qe);Mt(te,22,C(tt,Ee,he,$e.slice(0,239)))}}++he}}return Mt(te,1),te.end()}function a(j){var Y=ct(2);return Y.write_shift(2,j),Y}function i(j){var Y=ct(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var ee=0,te=0,ce=0,be=0;be<j.SheetNames.length;++be){var he=j.SheetNames[be],fe=j.Sheets[he];if(!(!fe||!fe["!ref"])){++ce;var ge=Do(fe["!ref"]);ee<ge.e.r&&(ee=ge.e.r),te<ge.e.c&&(te=ge.e.c)}}return ee>8191&&(ee=8191),Y.write_shift(2,ee),Y.write_shift(1,ce),Y.write_shift(1,te),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function o(j,Y,ee){var te={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&ee.qpro?(te.s.c=j.read_shift(1),j.l++,te.s.r=j.read_shift(2),te.e.c=j.read_shift(1),j.l++,te.e.r=j.read_shift(2),te):(te.s.c=j.read_shift(2),te.s.r=j.read_shift(2),Y==12&&ee.qpro&&(j.l+=2),te.e.c=j.read_shift(2),te.e.r=j.read_shift(2),Y==12&&ee.qpro&&(j.l+=2),te.s.c==65535&&(te.s.c=te.e.c=te.s.r=te.e.r=0),te)}function l(j){var Y=ct(8);return Y.write_shift(2,j.s.c),Y.write_shift(2,j.s.r),Y.write_shift(2,j.e.c),Y.write_shift(2,j.e.r),Y}function u(j,Y,ee){var te=[{c:0,r:0},{t:"n",v:0},0,0];return ee.qpro&&ee.vers!=20768?(te[0].c=j.read_shift(1),te[3]=j.read_shift(1),te[0].r=j.read_shift(2),j.l+=2):(te[2]=j.read_shift(1),te[0].c=j.read_shift(2),te[0].r=j.read_shift(2)),te}function d(j,Y,ee){var te=j.l+Y,ce=u(j,Y,ee);if(ce[1].t="s",ee.vers==20768){j.l++;var be=j.read_shift(1);return ce[1].v=j.read_shift(be,"utf8"),ce}return ee.qpro&&j.l++,ce[1].v=j.read_shift(te-j.l,"cstr"),ce}function h(j,Y,ee){var te=ct(7+ee.length);te.write_shift(1,255),te.write_shift(2,Y),te.write_shift(2,j),te.write_shift(1,39);for(var ce=0;ce<te.length;++ce){var be=ee.charCodeAt(ce);te.write_shift(1,be>=128?95:be)}return te.write_shift(1,0),te}function m(j,Y,ee){var te=u(j,Y,ee);return te[1].v=j.read_shift(2,"i"),te}function g(j,Y,ee){var te=ct(7);return te.write_shift(1,255),te.write_shift(2,Y),te.write_shift(2,j),te.write_shift(2,ee,"i"),te}function b(j,Y,ee){var te=u(j,Y,ee);return te[1].v=j.read_shift(8,"f"),te}function y(j,Y,ee){var te=ct(13);return te.write_shift(1,255),te.write_shift(2,Y),te.write_shift(2,j),te.write_shift(8,ee,"f"),te}function _(j,Y,ee){var te=j.l+Y,ce=u(j,Y,ee);if(ce[1].v=j.read_shift(8,"f"),ee.qpro)j.l=te;else{var be=j.read_shift(2);M(j.slice(j.l,j.l+be),ce),j.l+=be}return ce}function T(j,Y,ee){var te=Y&32768;return Y&=-32769,Y=(te?j:0)+(Y>=8192?Y-16384:Y),(te?"":"$")+(ee?Is(Y):ua(Y))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},D=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function M(j,Y){Ai(j,0);for(var ee=[],te=0,ce="",be="",he="",fe="";j.l<j.length;){var ge=j[j.l++];switch(ge){case 0:ee.push(j.read_shift(8,"f"));break;case 1:be=T(Y[0].c,j.read_shift(2),!0),ce=T(Y[0].r,j.read_shift(2),!1),ee.push(be+ce);break;case 2:{var de=T(Y[0].c,j.read_shift(2),!0),oe=T(Y[0].r,j.read_shift(2),!1);be=T(Y[0].c,j.read_shift(2),!0),ce=T(Y[0].r,j.read_shift(2),!1),ee.push(de+oe+":"+be+ce)}break;case 3:if(j.l<j.length){console.error("WK1 premature formula end");return}break;case 4:ee.push("("+ee.pop()+")");break;case 5:ee.push(j.read_shift(2));break;case 6:{for(var Ue="";ge=j[j.l++];)Ue+=String.fromCharCode(ge);ee.push('"'+Ue.replace(/"/g,'""')+'"')}break;case 8:ee.push("-"+ee.pop());break;case 23:ee.push("+"+ee.pop());break;case 22:ee.push("NOT("+ee.pop()+")");break;case 20:case 21:fe=ee.pop(),he=ee.pop(),ee.push(["AND","OR"][ge-20]+"("+he+","+fe+")");break;default:if(ge<32&&D[ge])fe=ee.pop(),he=ee.pop(),ee.push(he+D[ge]+fe);else if(k[ge]){if(te=k[ge][1],te==69&&(te=j[j.l++]),te>ee.length){console.error("WK1 bad formula parse 0x"+ge.toString(16)+":|"+ee.join("|")+"|");return}var tt=ee.slice(-te);ee.length-=te,ee.push(k[ge][0]+"("+tt.join(",")+")")}else return ge<=7?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=24?console.error("WK1 unsupported op "+ge.toString(16)):ge<=30?console.error("WK1 invalid opcode "+ge.toString(16)):ge<=115?console.error("WK1 unsupported function opcode "+ge.toString(16)):console.error("WK1 unrecognized opcode "+ge.toString(16))}}ee.length==1?Y[1].f=""+ee[0]:console.error("WK1 bad formula parse |"+ee.join("|")+"|")}function P(j){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=j.read_shift(2),Y[3]=j[j.l++],Y[0].c=j[j.l++],Y}function L(j,Y){var ee=P(j);return ee[1].t="s",ee[1].v=j.read_shift(Y-4,"cstr"),ee}function C(j,Y,ee,te){var ce=ct(6+te.length);ce.write_shift(2,j),ce.write_shift(1,ee),ce.write_shift(1,Y),ce.write_shift(1,39);for(var be=0;be<te.length;++be){var he=te.charCodeAt(be);ce.write_shift(1,he>=128?95:he)}return ce.write_shift(1,0),ce}function E(j,Y){var ee=P(j);ee[1].v=j.read_shift(2);var te=ee[1].v>>1;if(ee[1].v&1)switch(te&7){case 0:te=(te>>3)*5e3;break;case 1:te=(te>>3)*500;break;case 2:te=(te>>3)/20;break;case 3:te=(te>>3)/200;break;case 4:te=(te>>3)/2e3;break;case 5:te=(te>>3)/2e4;break;case 6:te=(te>>3)/16;break;case 7:te=(te>>3)/64;break}return ee[1].v=te,ee}function B(j,Y){var ee=P(j),te=j.read_shift(4),ce=j.read_shift(4),be=j.read_shift(2);if(be==65535)return te===0&&ce===3221225472?(ee[1].t="e",ee[1].v=15):te===0&&ce===3489660928?(ee[1].t="e",ee[1].v=42):ee[1].v=0,ee;var he=be&32768;return be=(be&32767)-16446,ee[1].v=(1-he*2)*(ce*Math.pow(2,be+32)+te*Math.pow(2,be)),ee}function O(j,Y,ee,te){var ce=ct(14);if(ce.write_shift(2,j),ce.write_shift(1,ee),ce.write_shift(1,Y),te==0)return ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(2,65535),ce;var be=0,he=0,fe=0,ge=0;return te<0&&(be=1,te=-te),he=Math.log2(te)|0,te/=Math.pow(2,he-31),ge=te>>>0,(ge&2147483648)==0&&(te/=2,++he,ge=te>>>0),te-=ge,ge|=2147483648,ge>>>=0,te*=Math.pow(2,32),fe=te>>>0,ce.write_shift(4,fe),ce.write_shift(4,ge),he+=16383+(be?32768:0),ce.write_shift(2,he),ce}function R(j,Y){var ee=B(j);return j.l+=Y-14,ee}function F(j,Y){var ee=P(j),te=j.read_shift(4);return ee[1].v=te>>6,ee}function Q(j,Y){var ee=P(j),te=j.read_shift(8,"f");return ee[1].v=te,ee}function H(j,Y){var ee=Q(j);return j.l+=Y-10,ee}function ne(j,Y){return j[j.l+Y-1]==0?j.read_shift(Y,"cstr"):""}function J(j,Y){var ee=j[j.l++];ee>Y-1&&(ee=Y-1);for(var te="";te.length<ee;)te+=String.fromCharCode(j[j.l++]);return te}function re(j,Y,ee){if(!(!ee.qpro||Y<21)){var te=j.read_shift(1);j.l+=17,j.l+=1,j.l+=2;var ce=j.read_shift(Y-21,"cstr");return[te,ce]}}function G(j,Y){for(var ee={},te=j.l+Y;j.l<te;){var ce=j.read_shift(2);if(ce==14e3){for(ee[ce]=[0,""],ee[ce][0]=j.read_shift(2);j[j.l];)ee[ce][1]+=String.fromCharCode(j[j.l]),j.l++;j.l++}}return ee}function q(j,Y){var ee=ct(5+j.length);ee.write_shift(2,14e3),ee.write_shift(2,Y);for(var te=0;te<j.length;++te){var ce=j.charCodeAt(te);ee[ee.l++]=ce>127?95:ce}return ee[ee.l++]=0,ee}var W={0:{n:"BOF",f:Ca},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:_},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ne},222:{n:"SHEETNAMELP",f:J},65535:{n:""}},ie={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:L},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:E},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:G},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:F},38:{n:"??"},39:{n:"NUMBER27",f:Q},40:{n:"FORMULA28",f:H},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ne},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:re},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:e}}();function zfe(t){var e={},r=t.match(Ji),n=0,s=!1;if(r)for(;n!=r.length;++n){var a=Br(r[n]);switch(a[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!a.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(a.val=="1")break;e.cp=q4[parseInt(a.val,10)];break;case"<outline":if(!a.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=a.val;break;case"<sz":e.sz=a.val;break;case"<strike":if(!a.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!a.val)break;switch(a.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(a.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(a.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":a.rgb&&(e.color=a.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=a.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=a.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(a[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+a[0])}}return e}var Gfe=function(){var t=Tx("t"),e=Tx("rPr");function r(a){var i=a.match(t);if(!i)return{t:"s",v:""};var o={t:"s",v:En(i[1])},l=a.match(e);return l&&(o.s=zfe(l[1])),o}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(i){return i.replace(n,"").split(s).map(r).filter(function(o){return o.v})}}(),qfe=function(){var e=/(\r\n|\n)/g;function r(s,a,i){var o=[];s.u&&o.push("text-decoration: underline;"),s.uval&&o.push("text-underline-style:"+s.uval+";"),s.sz&&o.push("font-size:"+s.sz+"pt;"),s.outline&&o.push("text-effect: outline;"),s.shadow&&o.push("text-shadow: auto;"),a.push('<span style="'+o.join("")+'">'),s.b&&(a.push("<b>"),i.push("</b>")),s.i&&(a.push("<i>"),i.push("</i>")),s.strike&&(a.push("<s>"),i.push("</s>"));var l=s.valign||"";return l=="superscript"||l=="super"?l="sup":l=="subscript"&&(l="sub"),l!=""&&(a.push("<"+l+">"),i.push("</"+l+">")),i.push("</span>"),s}function n(s){var a=[[],s.v,[]];return s.v?(s.s&&r(s.s,a[0],a[2]),a[0].join("")+a[1].replace(e,"<br/>")+a[2].join("")):""}return function(a){return a.map(n).join("")}}(),Kfe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,$fe=/<(?:\w+:)?r>/,Wfe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function pT(t,e){var r=e?e.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=En(rs(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=rs(t),r&&(n.h=rT(n.t))):t.match($fe)&&(n.r=rs(t),n.t=En(rs((t.replace(Wfe,"").match(Kfe)||[]).join("").replace(Ji,""))),r&&(n.h=qfe(Gfe(n.r)))),n):{t:""}}var Yfe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Jfe=/<(?:\w+:)?(?:si|sstItem)>/g,Xfe=/<\/(?:\w+:)?(?:si|sstItem)>/;function Zfe(t,e){var r=[],n="";if(!t)return r;var s=t.match(Yfe);if(s){n=s[2].replace(Jfe,"").split(Xfe);for(var a=0;a!=n.length;++a){var i=pT(n[a].trim(),e);i!=null&&(r[r.length]=i)}s=Br(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var ehe=/^\s|\s$|[\t\n\r]/;function AO(t,e){if(!e.bookSST)return"";var r=[Aa];r[r.length]=Ut("sst",null,{xmlns:Jh[0],count:t.Count,uniqueCount:t.Unique});for(var n=0;n!=t.length;++n)if(t[n]!=null){var s=t[n],a="<si>";s.r?a+=s.r:(a+="<t",s.t||(s.t=""),s.t.match(ehe)&&(a+=' xml:space="preserve"'),a+=">"+Kn(s.t)+"</t>"),a+="</si>",r[r.length]=a}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function the(t){return[t.read_shift(4),t.read_shift(4)]}function rhe(t,e){var r=[],n=!1;return $A(t,function(a,i,o){switch(o){case 159:r.Count=a[0],r.Unique=a[1];break;case 19:r.push(a);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(i.T,!n||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function nhe(t,e){return e||(e=ct(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var she=hAe;function ahe(t){var e=Io();_t(e,159,nhe(t));for(var r=0;r<t.length;++r)_t(e,19,she(t[r]));return _t(e,160),e.end()}function dO(t){for(var e=[],r=t.split(""),n=0;n<r.length;++n)e[n]=r[n].charCodeAt(0);return e}function FA(t,e){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),r}function ihe(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=FA(t,4),e.U=FA(t,4),e.W=FA(t,4),e}function ohe(t){for(var e=t.read_shift(4),r=t.l+e-4,n={},s=t.read_shift(4),a=[];s-- >0;)a.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=a,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function lhe(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(ohe(t));return e}function che(t){var e=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function uhe(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=FA(t,4),e.U=FA(t,4),e.W=FA(t,4),e}function Ahe(t){var e=uhe(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function fO(t,e){var r=t.l+e,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function hO(t,e){var r={},n=t.l+e;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function dhe(t){var e=FA(t);switch(e.Minor){case 2:return[e.Minor,fhe(t)];case 3:return[e.Minor,hhe()];case 4:return[e.Minor,mhe(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function fhe(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=fO(t,r),s=hO(t,t.length-t.l);return{t:"Std",h:n,v:s}}function hhe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function mhe(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(Ji,function(a){var i=Br(a);switch(ju(i[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){n[o]=i[o]});break;case"<dataIntegrity":n.encryptedHmacKey=i.encryptedHmacKey,n.encryptedHmacValue=i.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=i.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(i);break;default:throw i[0]}}),n}function phe(t,e){var r={},n=r.EncryptionVersionInfo=FA(t,4);if(e-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),e-=4;var s=t.read_shift(4);return e-=4,r.EncryptionHeader=fO(t,s),e-=s,r.EncryptionVerifier=hO(t,e),r}function ghe(t){var e={},r=e.EncryptionVersionInfo=FA(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function gT(t){var e=0,r,n=dO(t),s=n.length+1,a,i,o,l,u;for(r=Cf(s),r[0]=n.length,a=1;a!=s;++a)r[a]=n[a-1];for(a=s-1;a>=0;--a)i=r[a],o=(e&16384)===0?0:1,l=e<<1&32767,u=o|l,e=u^i;return e^52811}var mO=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(i){return(i/2|i*128)&255},s=function(i,o){return n(i^o)},a=function(i){for(var o=e[i.length-1],l=104,u=i.length-1;u>=0;--u)for(var d=i[u],h=0;h!=7;++h)d&64&&(o^=r[l]),d*=2,--l;return o};return function(i){for(var o=dO(i),l=a(o),u=o.length,d=Cf(16),h=0;h!=16;++h)d[h]=0;var m,g,b;for((u&1)===1&&(m=l>>8,d[u]=s(t[0],m),--u,m=l&255,g=o[o.length-1],d[u]=s(g,m));u>0;)--u,m=l>>8,d[u]=s(o[u],m),--u,m=l&255,d[u]=s(o[u],m);for(u=15,b=15-o.length;b>0;)m=l>>8,d[u]=s(t[b],m),--u,--b,m=l&255,d[u]=s(o[u],m),--u,--b;return d}}(),xhe=function(t,e,r,n,s){s||(s=e),n||(n=mO(t));var a,i;for(a=0;a!=e.length;++a)i=e[a],i^=n[r],i=(i>>5|i<<3)&255,s[a]=i,++r;return[s,r,n]},vhe=function(t){var e=0,r=mO(t);return function(n){var s=xhe("",n,e,r);return e=s[1],s[0]}};function yhe(t,e,r,n){var s={key:Ca(t),verificationBytes:Ca(t)};return r.password&&(s.verifier=gT(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=vhe(r.password)),s}function whe(t,e,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=ghe(t):n.Data=phe(t,e),n}function bhe(t,e,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?whe(t,e-2,n):yhe(t,r.biff>=8?e:e-2,r,n),n}var pO=function(){function t(s,a){switch(a.type){case"base64":return e(ll(s),a);case"binary":return e(s,a);case"buffer":return e(Jr&&Buffer.isBuffer(s)?s.toString("binary"):If(s),a);case"array":return e(Lh(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){var i=a||{},o=i.dense?[]:{},l=s.match(/\\trowd.*?\\row\b/g);if(!l.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}};return l.forEach(function(d,h){Array.isArray(o)&&(o[h]=[]);for(var m=/\\\w+\b/g,g=0,b,y=-1;b=m.exec(d);){switch(b[0]){case"\\cell":var _=d.slice(g,m.lastIndex-b[0].length);if(_[0]==" "&&(_=_.slice(1)),++y,_.length){var T={v:_,t:"s"};Array.isArray(o)?o[h][y]=T:o[_r({r:h,c:y})]=T}break}g=m.lastIndex}y>u.e.c&&(u.e.c=y)}),o["!ref"]=Mr(u),o}function r(s,a){return Ff(t(s,a),a)}function n(s){for(var a=["{\\rtf1\\ansi"],i=_n(s["!ref"]),o,l=Array.isArray(s),u=i.s.r;u<=i.e.r;++u){a.push("\\trowd\\trautofit1");for(var d=i.s.c;d<=i.e.c;++d)a.push("\\cellx"+(d+1));for(a.push("\\pard\\intbl"),d=i.s.c;d<=i.e.c;++d){var h=_r({r:u,c:d});o=l?(s[u]||[])[d]:s[h],!(!o||o.v==null&&(!o.f||o.F))&&(a.push(" "+(o.w||(jA(o),o.w))),a.push("\\cell"))}a.push("\\pard\\intbl\\row")}return a.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function Che(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Ix(t){for(var e=0,r=1;e!=3;++e)r=r*256+(t[e]>255?255:t[e]<0?0:t[e]);return r.toString(16).toUpperCase().slice(1)}function Ehe(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,s=Math.max(e,r,n),a=Math.min(e,r,n),i=s-a;if(i===0)return[0,0,e];var o=0,l=0,u=s+a;switch(l=i/(u>1?2-u:u),s){case e:o=((r-n)/i+6)%6;break;case r:o=(n-e)/i+2;break;case n:o=(e-r)/i+4;break}return[o/6,l,u/2]}function _he(t){var e=t[0],r=t[1],n=t[2],s=r*2*(n<.5?n:1-n),a=n-s/2,i=[a,a,a],o=6*e,l;if(r!==0)switch(o|0){case 0:case 6:l=s*o,i[0]+=s,i[1]+=l;break;case 1:l=s*(2-o),i[0]+=l,i[1]+=s;break;case 2:l=s*(o-2),i[1]+=s,i[2]+=l;break;case 3:l=s*(4-o),i[1]+=l,i[2]+=s;break;case 4:l=s*(o-4),i[2]+=s,i[0]+=l;break;case 5:l=s*(6-o),i[2]+=l,i[0]+=s;break}for(var u=0;u!=3;++u)i[u]=Math.round(i[u]*255);return i}function z2(t,e){if(e===0)return t;var r=Ehe(Che(t));return e<0?r[2]=r[2]*(1+e):r[2]=1-(1-r[2])*(1-e),Ix(_he(r))}var gO=6,She=15,The=1,Qi=gO;function Fx(t){return Math.floor((t+Math.round(128/Qi)/256)*Qi)}function Dx(t){return Math.floor((t-5)/Qi*100+.5)/100}function G2(t){return Math.round((t*Qi+5)/Qi*256)/256}function RE(t){return G2(Dx(Fx(t)))}function xT(t){var e=Math.abs(t-RE(t)),r=Qi;if(e>.005)for(Qi=The;Qi<She;++Qi)Math.abs(t-RE(t))<=e&&(e=Math.abs(t-RE(t)),r=Qi);Qi=r}function Ef(t){t.width?(t.wpx=Fx(t.width),t.wch=Dx(t.wpx),t.MDW=Qi):t.wpx?(t.wch=Dx(t.wpx),t.width=G2(t.wch),t.MDW=Qi):typeof t.wch=="number"&&(t.width=G2(t.wch),t.wpx=Fx(t.width),t.MDW=Qi),t.customWidth&&delete t.customWidth}var Nhe=96,xO=Nhe;function Rx(t){return t*96/xO}function zm(t){return t*xO/96}var Bhe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function khe(t,e,r,n){e.Borders=[];var s={},a=!1;(t[0].match(Ji)||[]).forEach(function(i){var o=Br(i);switch(ju(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},o.diagonalUp&&(s.diagonalUp=ds(o.diagonalUp)),o.diagonalDown&&(s.diagonalDown=ds(o.diagonalDown)),e.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in borders")}})}function Ihe(t,e,r,n){e.Fills=[];var s={},a=!1;(t[0].match(Ji)||[]).forEach(function(i){var o=Br(i);switch(ju(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},e.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":o.patternType&&(s.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),o.indexed&&(s.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(s.bgColor.theme=parseInt(o.theme,10)),o.tint&&(s.bgColor.tint=parseFloat(o.tint)),o.rgb&&(s.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),o.theme&&(s.fgColor.theme=parseInt(o.theme,10)),o.tint&&(s.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(s.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fills")}})}function Fhe(t,e,r,n){e.Fonts=[];var s={},a=!1;(t[0].match(Ji)||[]).forEach(function(i){var o=Br(i);switch(ju(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(s),s={};break;case"<name":o.val&&(s.name=rs(o.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=o.val?ds(o.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=o.val?ds(o.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(o.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=o.val?ds(o.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=o.val?ds(o.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=o.val?ds(o.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=o.val?ds(o.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=o.val?ds(o.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":o.val&&(s.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(s.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(s.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(s.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=q4[parseInt(o.val,10)];break;case"<color":if(s.color||(s.color={}),o.auto&&(s.color.auto=ds(o.auto)),o.rgb)s.color.rgb=o.rgb.slice(-6);else if(o.indexed){s.color.index=parseInt(o.indexed,10);var l=wh[s.color.index];s.color.index==81&&(l=wh[1]),l||(l=wh[1]),s.color.rgb=l[0].toString(16)+l[1].toString(16)+l[2].toString(16)}else o.theme&&(s.color.theme=parseInt(o.theme,10),o.tint&&(s.color.tint=parseFloat(o.tint)),o.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=z2(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":a=!0;break;case"</AlternateContent>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(n&&n.WTF&&!a)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Dhe(t,e,r){e.NumberFmt=[];for(var n=$s(wr),s=0;s<n.length;++s)e.NumberFmt[n[s]]=wr[n[s]];var a=t[0].match(Ji);if(a)for(s=0;s<a.length;++s){var i=Br(a[s]);switch(ju(i[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=En(rs(i.formatCode)),l=parseInt(i.numFmtId,10);if(e.NumberFmt[l]=o,l>0){if(l>392){for(l=392;l>60&&e.NumberFmt[l]!=null;--l);e.NumberFmt[l]=o}IA(o,l)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+i[0]+" in numFmts")}}}function Rhe(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)t[n]!=null&&(e[e.length]=Ut("numFmt",null,{numFmtId:n,formatCode:Kn(t[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Ut("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Yv=["numFmtId","fillId","fontId","borderId","xfId"],Jv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Lhe(t,e,r){e.CellXf=[];var n,s=!1;(t[0].match(Ji)||[]).forEach(function(a){var i=Br(a),o=0;switch(ju(i[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=i,delete n[0],o=0;o<Yv.length;++o)n[Yv[o]]&&(n[Yv[o]]=parseInt(n[Yv[o]],10));for(o=0;o<Jv.length;++o)n[Jv[o]]&&(n[Jv[o]]=ds(n[Jv[o]]));if(e.NumberFmt&&n.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[n.numFmtId]==e.NumberFmt[o]){n.numFmtId=o;break}}e.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var l={};i.vertical&&(l.vertical=i.vertical),i.horizontal&&(l.horizontal=i.horizontal),i.textRotation!=null&&(l.textRotation=i.textRotation),i.indent&&(l.indent=i.indent),i.wrapText&&(l.wrapText=ds(i.wrapText)),n.alignment=l;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+i[0]+" in cellXfs")}})}function Uhe(t){var e=[];return e[e.length]=Ut("cellXfs",null),t.forEach(function(r){e[e.length]=Ut("xf",null,r)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Ut("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Mhe=function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,a=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,l,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=o.match(e))&&Dhe(h,d,u),(h=o.match(s))&&Fhe(h,d,l,u),(h=o.match(n))&&Ihe(h,d,l,u),(h=o.match(a))&&khe(h,d,l,u),(h=o.match(r))&&Lhe(h,d,u),d}}();function vO(t,e){var r=[Aa,Ut("styleSheet",null,{xmlns:Jh[0],"xmlns:vt":Ma.vt})],n;return t.SSF&&(n=Rhe(t.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Uhe(e.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Phe(t,e){var r=t.read_shift(2),n=qi(t);return[r,n]}function jhe(t,e,r){r||(r=ct(6+4*e.length)),r.write_shift(2,t),Za(e,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Ohe(t,e,r){var n={};n.sz=t.read_shift(2)/20;var s=wAe(t);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var a=t.read_shift(2);switch(a===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var i=t.read_shift(1);i!=0&&(n.underline=i);var o=t.read_shift(1);o>0&&(n.family=o);var l=t.read_shift(1);switch(l>0&&(n.charset=l),t.l++,n.color=yAe(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=qi(t),n}function Qhe(t,e){e||(e=ct(153)),e.write_shift(2,t.sz*20),bAe(t,e),e.write_shift(2,t.bold?700:400);var r=0;t.vertAlign=="superscript"?r=1:t.vertAlign=="subscript"&&(r=2),e.write_shift(2,r),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),Q2(t.color,e);var n=0;return n=2,e.write_shift(1,n),Za(t.name,e),e.length>e.l?e.slice(0,e.l):e}var Hhe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],LE,Vhe=Wi;function fD(t,e){e||(e=ct(84)),LE||(LE=ab(Hhe));var r=LE[t.patternType];r==null&&(r=40),e.write_shift(4,r);var n=0;if(r!=40)for(Q2({auto:1},e),Q2({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function zhe(t,e){var r=t.l+e,n=t.read_shift(2),s=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:s}}function yO(t,e,r){r||(r=ct(16)),r.write_shift(2,e||0),r.write_shift(2,t.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function ig(t,e){return e||(e=ct(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var Ghe=Wi;function qhe(t,e){return e||(e=ct(51)),e.write_shift(1,0),ig(null,e),ig(null,e),ig(null,e),ig(null,e),ig(null,e),e.length>e.l?e.slice(0,e.l):e}function Khe(t,e){return e||(e=ct(52)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),O2(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function $he(t,e,r){var n=ct(2052);return n.write_shift(4,t),O2(e,n),O2(r,n),n.length>n.l?n.slice(0,n.l):n}function Whe(t,e,r){var n={};n.NumberFmt=[];for(var s in wr)n.NumberFmt[s]=wr[s];n.CellXf=[],n.Fonts=[];var a=[],i=!1;return $A(t,function(l,u,d){switch(d){case 44:n.NumberFmt[l[0]]=l[1],IA(l[1],l[0]);break;case 43:n.Fonts.push(l),l.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(l.color.rgb=z2(e.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:a[a.length-1]==617&&n.CellXf.push(l);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:a.push(d),i=!0;break;case 38:a.pop(),i=!1;break;default:if(u.T>0)a.push(d);else if(u.T<0)a.pop();else if(!i||r.WTF&&a[a.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function Yhe(t,e){if(e){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&++r}),r!=0&&(_t(t,615,Fc(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&_t(t,44,jhe(s,e[s]))}),_t(t,616))}}function Jhe(t){var e=1;_t(t,611,Fc(e)),_t(t,43,Qhe({sz:12,color:{theme:1},name:"Calibri",family:2})),_t(t,612)}function Xhe(t){var e=2;_t(t,603,Fc(e)),_t(t,45,fD({patternType:"none"})),_t(t,45,fD({patternType:"gray125"})),_t(t,604)}function Zhe(t){var e=1;_t(t,613,Fc(e)),_t(t,46,qhe()),_t(t,614)}function e0e(t){var e=1;_t(t,626,Fc(e)),_t(t,47,yO({numFmtId:0},65535)),_t(t,627)}function t0e(t,e){_t(t,617,Fc(e.length)),e.forEach(function(r){_t(t,47,yO(r,0))}),_t(t,618)}function r0e(t){var e=1;_t(t,619,Fc(e)),_t(t,48,Khe({xfId:0,name:"Normal"})),_t(t,620)}function n0e(t){var e=0;_t(t,505,Fc(e)),_t(t,506)}function s0e(t){var e=0;_t(t,508,$he(e,"TableStyleMedium9","PivotStyleMedium4")),_t(t,509)}function a0e(t,e){var r=Io();return _t(r,278),Yhe(r,t.SSF),Jhe(r),Xhe(r),Zhe(r),e0e(r),t0e(r,e.cellXfs),r0e(r),n0e(r),s0e(r),_t(r,279),r.end()}var i0e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function o0e(t,e,r){e.themeElements.clrScheme=[];var n={};(t[0].match(Ji)||[]).forEach(function(s){var a=Br(s);switch(a[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=a.val;break;case"<a:sysClr":n.rgb=a.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":a[0].charAt(1)==="/"?(e.themeElements.clrScheme[i0e.indexOf(a[0])]=n,n={}):n.name=a[0].slice(3,a[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+a[0]+" in clrScheme")}})}function l0e(){}function c0e(){}var u0e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,A0e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,d0e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function f0e(t,e,r){e.themeElements={};var n;[["clrScheme",u0e,o0e],["fontScheme",A0e,l0e],["fmtScheme",d0e,c0e]].forEach(function(s){if(!(n=t.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,e,r)})}var h0e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function wO(t,e){(!t||t.length===0)&&(t=vT());var r,n={};if(!(r=t.match(h0e)))throw new Error("themeElements not found in theme");return f0e(r[0],n,e),n.raw=t,n}function vT(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var r=[Aa];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function m0e(t,e,r){var n=t.l+e,s=t.read_shift(4);if(s!==124226){if(!r.cellStyles){t.l=n;return}var a=t.slice(t.l);t.l=n;var i;try{i=fj(a,{type:"array"})}catch{return}var o=nl(i,"theme/theme/theme1.xml",!0);if(o)return wO(o,r)}}function p0e(t){return t.read_shift(4)}function g0e(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=x0e(t,4);break;case 2:e.xclrValue=eO(t);break;case 3:e.xclrValue=p0e(t);break;case 4:t.l+=4;break}return t.l+=8,e}function x0e(t,e){return Wi(t,e)}function v0e(t,e){return Wi(t,e)}function y0e(t){var e=t.read_shift(2),r=t.read_shift(2)-4,n=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=g0e(t);break;case 6:n[1]=v0e(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+r)}return n}function w0e(t,e){var r=t.l+e;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var s=t.read_shift(2),a=[];s-- >0;)a.push(y0e(t,r-t.l));return{ixfe:n,ext:a}}function b0e(t,e){e.forEach(function(r){r[0]})}function C0e(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:qi(t)}}function E0e(t){var e=ct(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),Za(t.name,e),e.slice(0,e.l)}function _0e(t){for(var e=[],r=t.read_shift(4);r-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function S0e(t){var e=ct(4+8*t.length);e.write_shift(4,t.length);for(var r=0;r<t.length;++r)e.write_shift(4,t[r][0]),e.write_shift(4,t[r][1]);return e}function T0e(t,e){var r=ct(8+2*e.length);return r.write_shift(4,t),Za(e,r),r.slice(0,r.l)}function N0e(t){return t.l+=4,t.read_shift(4)!=0}function B0e(t,e){var r=ct(8);return r.write_shift(4,t),r.write_shift(4,1),r}function k0e(t,e,r){var n={Types:[],Cell:[],Value:[]},s=r||{},a=[],i=!1,o=2;return $A(t,function(l,u,d){switch(d){case 335:n.Types.push({name:l.name});break;case 51:l.forEach(function(h){o==1?n.Cell.push({type:n.Types[h[0]-1].name,index:h[1]}):o==0&&n.Value.push({type:n.Types[h[0]-1].name,index:h[1]})});break;case 337:o=l?1:0;break;case 338:o=2;break;case 35:a.push(d),i=!0;break;case 36:a.pop(),i=!1;break;default:if(!u.T){if(!i||s.WTF&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),n}function I0e(){var t=Io();return _t(t,332),_t(t,334,Fc(1)),_t(t,335,E0e({name:"XLDAPR",version:12e4,flags:3496657072})),_t(t,336),_t(t,339,T0e(1,"XLDAPR")),_t(t,52),_t(t,35,Fc(514)),_t(t,4096,Fc(0)),_t(t,4097,jl(1)),_t(t,36),_t(t,53),_t(t,340),_t(t,337,B0e(1)),_t(t,51,S0e([[1,0]])),_t(t,338),_t(t,333),t.end()}function F0e(t,e,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var s=!1,a=2,i;return t.replace(Ji,function(o){var l=Br(o);switch(ju(l[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:l.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==l.name&&(i=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":a==1?n.Cell.push({type:n.Types[l.t-1].name,index:+l.v}):a==0&&n.Value.push({type:n.Types[l.t-1].name,index:+l.v});break;case"</rc>":break;case"<cellMetadata":a=1;break;case"</cellMetadata>":a=2;break;case"<valueMetadata":a=0;break;case"</valueMetadata>":a=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!i)break;i.offsets||(i.offsets=[]),i.offsets.push(+l.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+l[0]+" in metadata")}return o}),n}function bO(){var t=[Aa];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function D0e(t){var e=[];if(!t)return e;var r=1;return(t.match(Ji)||[]).forEach(function(n){var s=Br(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,e.push(s);break}}),e}function R0e(t){var e={};e.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),e.r=_r(r);var n=t.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}function L0e(t,e,r){var n=[];return $A(t,function(a,i,o){switch(o){case 63:n.push(a);break;default:if(!i.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),n}function U0e(t,e,r,n){if(!t)return t;var s=n||{},a=!1;$A(t,function(o,l,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:a=!0;break;case 36:a=!1;break;default:if(!l.T){if(!a||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function M0e(t,e){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][r].Target}var um=1024;function CO(t,e){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Ut("xml",null,{"xmlns:v":el.v,"xmlns:o":el.o,"xmlns:x":el.x,"xmlns:mv":el.mv}).replace(/\/>/,">"),Ut("o:shapelayout",Ut("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"}),Ut("v:shapetype",[Ut("v:stroke",null,{joinstyle:"miter"}),Ut("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];um<t*1e3;)um+=1e3;return e.forEach(function(a){var i=Fs(a[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var l=o.type=="gradient"?Ut("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Ut("v:fill",l,o),d={on:"t",obscured:"t"};++um,s=s.concat(["<v:shape"+Nx({id:"_x0000_s"+um,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(a[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Ut("v:shadow",null,d),Ut("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",fi("x:Anchor",[i.c+1,0,i.r+1,0,i.c+3,20,i.r+5,20].join(",")),fi("x:AutoFill","False"),fi("x:Row",String(i.r)),fi("x:Column",String(i.c)),a[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function hD(t,e,r,n){var s=Array.isArray(t),a;e.forEach(function(i){var o=Fs(i.ref);if(s?(t[o.r]||(t[o.r]=[]),a=t[o.r][o.c]):a=t[i.ref],!a){a={t:"z"},s?t[o.r][o.c]=a:t[i.ref]=a;var l=_n(t["!ref"]||"BDWGO1000001:A1");l.s.r>o.r&&(l.s.r=o.r),l.e.r<o.r&&(l.e.r=o.r),l.s.c>o.c&&(l.s.c=o.c),l.e.c<o.c&&(l.e.c=o.c);var u=Mr(l);u!==t["!ref"]&&(t["!ref"]=u)}a.c||(a.c=[]);var d={a:i.author,t:i.t,r:i.r,T:r};i.h&&(d.h=i.h);for(var h=a.c.length-1;h>=0;--h){if(!r&&a.c[h].T)return;r&&!a.c[h].T&&a.c.splice(h,1)}if(r&&n){for(h=0;h<n.length;++h)if(d.a==n[h].id){d.a=n[h].name||d.a;break}}a.c.push(d)})}function P0e(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&r.push(o[1])}});var a=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return a&&a[1]&&a[1].split(/<\/\w*:?comment>/).forEach(function(i){if(!(i===""||i.trim()==="")){var o=i.match(/<(?:\w+:)?comment[^>]*>/);if(o){var l=Br(o[0]),u={author:l.authorId&&r[l.authorId]||"sheetjsghost",ref:l.ref,guid:l.guid},d=Fs(l.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var h=i.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&pT(h[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=m.h),n.push(u)}}}}),n}function EO(t){var e=[Aa,Ut("comments",null,{xmlns:Jh[0]})],r=[];return e.push("<authors>"),t.forEach(function(n){n[1].forEach(function(s){var a=Kn(s.a);r.indexOf(a)==-1&&(r.push(a),e.push("<author>"+a+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),e.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(n){var s=0,a=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(l){l.a&&(s=r.indexOf(Kn(l.a))),a.push(l.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),a.length<=1)e.push(fi("t",Kn(a[0]||"")));else{for(var i=`Comment:
    `+a[0]+`
`,o=1;o<a.length;++o)i+=`Reply:
    `+a[o]+`
`;e.push(fi("t",Kn(i)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function j0e(t,e){var r=[],n=!1,s={},a=0;return t.replace(Ji,function(o,l){var u=Br(o);switch(ju(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":a=l+o.length;break;case"</text>":s.t=t.slice(a,l).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),r}function O0e(t,e,r){var n=[Aa,Ut("ThreadedComments",null,{xmlns:Ma.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(s){var a="";(s[1]||[]).forEach(function(i,o){if(!i.T){delete i.ID;return}i.a&&e.indexOf(i.a)==-1&&e.push(i.a);var l={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};o==0?a=l.id:l.parentId=a,i.ID=l.id,i.a&&(l.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(i.a)).slice(-12)+"}"),n.push(Ut("threadedComment",fi("text",i.t||""),l))})}),n.push("</ThreadedComments>"),n.join("")}function Q0e(t,e){var r=[],n=!1;return t.replace(Ji,function(a){var i=Br(a);switch(ju(i[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:i.displayname,id:i.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&e.WTF)throw new Error("unrecognized "+i[0]+" in threaded comments")}return a}),r}function H0e(t){var e=[Aa,Ut("personList",null,{xmlns:Ma.TCMNT,"xmlns:x":Jh[0]}).replace(/[\/]>/,">")];return t.forEach(function(r,n){e.push(Ut("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),e.push("</personList>"),e.join("")}function V0e(t){var e={};e.iauthor=t.read_shift(4);var r=t0(t);return e.rfx=r.s,e.ref=_r(r.s),t.l+=16,e}function z0e(t,e){return e==null&&(e=ct(36)),e.write_shift(4,t[1].iauthor),hp(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var G0e=qi;function q0e(t){return Za(t.slice(0,54))}function K0e(t,e){var r=[],n=[],s={},a=!1;return $A(t,function(o,l,u){switch(u){case 632:n.push(o);break;case 635:s=o;break;case 637:s.t=o.t,s.h=o.h,s.r=o.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,e.sheetRows&&s.rfx&&e.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!l.T){if(!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function $0e(t){var e=Io(),r=[];return _t(e,628),_t(e,630),t.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),_t(e,632,q0e(s.a)))})}),_t(e,631),_t(e,633),t.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var a={s:Fs(n[0]),e:Fs(n[0])};_t(e,635,z0e([a,s])),s.t&&s.t.length>0&&_t(e,637,pAe(s)),_t(e,636),delete s.iauthor})}),_t(e,634),_t(e,629),e.end()}var W0e="application/vnd.ms-office.vbaProject";function Y0e(t){var e=Ar.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Ar.utils.cfb_add(e,s,t.FileIndex[n].content)}}),Ar.write(e)}function J0e(t,e){e.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Ar.utils.cfb_add(t,s,e.FileIndex[n].content)}})}var _O=["xlsb","xlsm","xlam","biff8","xla"];function X0e(){return{"!type":"dialog"}}function Z0e(){return{"!type":"dialog"}}function eme(){return{"!type":"macro"}}function tme(){return{"!type":"macro"}}var Tm=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function r(n,s,a,i){var o=!1,l=!1;a.length==0?l=!0:a.charAt(0)=="["&&(l=!0,a=a.slice(1,-1)),i.length==0?o=!0:i.charAt(0)=="["&&(o=!0,i=i.slice(1,-1));var u=a.length>0?parseInt(a,10)|0:0,d=i.length>0?parseInt(i,10)|0:0;return o?d+=e.c:--d,l?u+=e.r:--u,s+(o?"":"$")+Is(d)+(l?"":"$")+ua(u)}return function(s,a){return e=a,s.replace(t,r)}}(),yT=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,wT=function(){return function(e,r){return e.replace(yT,function(n,s,a,i,o,l){var u=oT(i)-(a?0:r.c),d=iT(l)-(o?0:r.r),h=d==0?"":o?d+1:"["+d+"]",m=u==0?"":a?u+1:"["+u+"]";return s+"R"+h+"C"+m})}}();function SO(t,e){return t.replace(yT,function(r,n,s,a,i,o){return n+(s=="$"?s+a:Is(oT(a)+e.c))+(i=="$"?i+o:ua(iT(o)+e.r))})}function rme(t,e,r){var n=Do(e),s=n.s,a=Fs(r),i={r:a.r-s.r,c:a.c-s.c};return SO(t,i)}function nme(t){return t.length!=1}function mD(t){return t.replace(/_xlfn\./g,"")}function ya(t){t.l+=1}function _f(t,e){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function TO(t,e,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return NO(t);r.biff==12&&(n=4)}var s=t.read_shift(n),a=t.read_shift(n),i=_f(t),o=_f(t);return{s:{r:s,c:i[0],cRel:i[1],rRel:i[2]},e:{r:a,c:o[0],cRel:o[1],rRel:o[2]}}}function NO(t){var e=_f(t),r=_f(t),n=t.read_shift(1),s=t.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function sme(t,e,r){if(r.biff<8)return NO(t);var n=t.read_shift(r.biff==12?4:2),s=t.read_shift(r.biff==12?4:2),a=_f(t),i=_f(t);return{s:{r:n,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:i[0],cRel:i[1],rRel:i[2]}}}function BO(t,e,r){if(r&&r.biff>=2&&r.biff<=5)return ame(t);var n=t.read_shift(r&&r.biff==12?4:2),s=_f(t);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function ame(t){var e=_f(t),r=t.read_shift(1);return{r:e[0],c:r,cRel:e[1],rRel:e[2]}}function ime(t){var e=t.read_shift(2),r=t.read_shift(2);return{r:e,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function ome(t,e,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return lme(t);var s=t.read_shift(n>=12?4:2),a=t.read_shift(2),i=(a&16384)>>14,o=(a&32768)>>15;if(a&=16383,o==1)for(;s>524287;)s-=1048576;if(i==1)for(;a>8191;)a=a-16384;return{r:s,c:a,cRel:i,rRel:o}}function lme(t){var e=t.read_shift(2),r=t.read_shift(1),n=(e&32768)>>15,s=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),s==1&&r>=128&&(r=r-256),{r:e,c:r,cRel:s,rRel:n}}function cme(t,e,r){var n=(t[t.l++]&96)>>5,s=TO(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function ume(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2,"i"),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}var i=TO(t,a,r);return[n,s,i]}function Ame(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function dme(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),a=8;if(r)switch(r.biff){case 5:t.l+=12,a=6;break;case 12:a=12;break}return t.l+=a,[n,s]}function fme(t,e,r){var n=(t[t.l++]&96)>>5,s=sme(t,e-1,r);return[n,s]}function hme(t,e,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function pD(t){var e=t[t.l+1]&1,r=1;return t.l+=4,[e,r]}function mme(t,e,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),s=[],a=0;a<=n;++a)s.push(t.read_shift(r&&r.biff==2?1:2));return s}function pme(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function gme(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function xme(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function vme(t,e,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function kO(t){var e=t.read_shift(1),r=t.read_shift(1);return[e,r]}function yme(t){return t.read_shift(2),kO(t)}function wme(t){return t.read_shift(2),kO(t)}function bme(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=BO(t,0,r);return[n,s]}function Cme(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=ome(t,0,r);return[n,s]}function Eme(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var a=BO(t,0,r);return[n,s,a]}function _me(t,e,r){var n=(t[t.l]&96)>>5;t.l+=1;var s=t.read_shift(r&&r.biff<=3?1:2);return[Npe[s],DO[s],n]}function Sme(t,e,r){var n=t[t.l++],s=t.read_shift(1),a=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:Tme(t);return[s,(a[0]===0?DO:Tpe)[a[1]]]}function Tme(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Nme(t,e,r){t.l+=r&&r.biff==2?3:4}function Bme(t,e,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function kme(t){return t.l++,WA[t.read_shift(1)]}function Ime(t){return t.l++,t.read_shift(2)}function Fme(t){return t.l++,t.read_shift(1)!==0}function Dme(t){return t.l++,zi(t)}function Rme(t,e,r){return t.l++,v1(t,e-1,r)}function Lme(t,e){var r=[t.read_shift(1)];if(e==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=na(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:r[1]=WA[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=zi(t);break;case 2:r[1]=r0(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Ume(t,e,r){for(var n=t.read_shift(r.biff==12?4:2),s=[],a=0;a!=n;++a)s.push((r.biff==12?t0:lb)(t));return s}function Mme(t,e,r){var n=0,s=0;r.biff==12?(n=t.read_shift(4),s=t.read_shift(4)):(s=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var a=0,i=[];a!=n&&(i[a]=[]);++a)for(var o=0;o!=s;++o)i[a][o]=Lme(t,r.biff);return i}function Pme(t,e,r){var n=t.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,a=t.read_shift(s);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,a]}function jme(t,e,r){if(r.biff==5)return Ome(t);var n=t.read_shift(1)>>>5&3,s=t.read_shift(2),a=t.read_shift(4);return[n,s,a]}function Ome(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[e,r,n]}function Qme(t,e,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Hme(t,e,r){var n=t.read_shift(1)>>>5&3,s=t.read_shift(r&&r.biff==2?1:2);return[n,s]}function Vme(t,e,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function zme(t,e,r){var n=(t[t.l++]&96)>>5,s=t.read_shift(2),a=4;if(r)switch(r.biff){case 5:a=15;break;case 12:a=6;break}return t.l+=a,[n,s]}var Gme=Wi,qme=Wi,Kme=Wi;function w1(t,e,r){return t.l+=2,[ime(t)]}function bT(t){return t.l+=6,[]}var $me=w1,Wme=bT,Yme=bT,Jme=w1;function IO(t){return t.l+=2,[Ca(t),t.read_shift(2)&1]}var Xme=w1,Zme=IO,epe=bT,tpe=w1,rpe=w1,npe=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function spe(t){t.l+=2;var e=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),s=t.read_shift(2),a=t.read_shift(2),i=npe[r>>2&31];return{ixti:e,coltype:r&3,rt:i,idx:n,c:s,C:a}}function ape(t){return t.l+=2,[t.read_shift(4)]}function ipe(t,e,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function ope(t,e,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function lpe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function cpe(t){var e=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[e,r]}function upe(t){return t.l+=4,[0,0]}var gD={1:{n:"PtgExp",f:Bme},2:{n:"PtgTbl",f:Kme},3:{n:"PtgAdd",f:ya},4:{n:"PtgSub",f:ya},5:{n:"PtgMul",f:ya},6:{n:"PtgDiv",f:ya},7:{n:"PtgPower",f:ya},8:{n:"PtgConcat",f:ya},9:{n:"PtgLt",f:ya},10:{n:"PtgLe",f:ya},11:{n:"PtgEq",f:ya},12:{n:"PtgGe",f:ya},13:{n:"PtgGt",f:ya},14:{n:"PtgNe",f:ya},15:{n:"PtgIsect",f:ya},16:{n:"PtgUnion",f:ya},17:{n:"PtgRange",f:ya},18:{n:"PtgUplus",f:ya},19:{n:"PtgUminus",f:ya},20:{n:"PtgPercent",f:ya},21:{n:"PtgParen",f:ya},22:{n:"PtgMissArg",f:ya},23:{n:"PtgStr",f:Rme},26:{n:"PtgSheet",f:ipe},27:{n:"PtgEndSheet",f:ope},28:{n:"PtgErr",f:kme},29:{n:"PtgBool",f:Fme},30:{n:"PtgInt",f:Ime},31:{n:"PtgNum",f:Dme},32:{n:"PtgArray",f:hme},33:{n:"PtgFunc",f:_me},34:{n:"PtgFuncVar",f:Sme},35:{n:"PtgName",f:Pme},36:{n:"PtgRef",f:bme},37:{n:"PtgArea",f:cme},38:{n:"PtgMemArea",f:Qme},39:{n:"PtgMemErr",f:Gme},40:{n:"PtgMemNoMem",f:qme},41:{n:"PtgMemFunc",f:Hme},42:{n:"PtgRefErr",f:Vme},43:{n:"PtgAreaErr",f:Ame},44:{n:"PtgRefN",f:Cme},45:{n:"PtgAreaN",f:fme},46:{n:"PtgMemAreaN",f:lpe},47:{n:"PtgMemNoMemN",f:cpe},57:{n:"PtgNameX",f:jme},58:{n:"PtgRef3d",f:Eme},59:{n:"PtgArea3d",f:ume},60:{n:"PtgRefErr3d",f:zme},61:{n:"PtgAreaErr3d",f:dme},255:{}},Ape={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},dpe={1:{n:"PtgElfLel",f:IO},2:{n:"PtgElfRw",f:tpe},3:{n:"PtgElfCol",f:$me},6:{n:"PtgElfRwV",f:rpe},7:{n:"PtgElfColV",f:Jme},10:{n:"PtgElfRadical",f:Xme},11:{n:"PtgElfRadicalS",f:epe},13:{n:"PtgElfColS",f:Wme},15:{n:"PtgElfColSV",f:Yme},16:{n:"PtgElfRadicalLel",f:Zme},25:{n:"PtgList",f:spe},29:{n:"PtgSxName",f:ape},255:{}},fpe={0:{n:"PtgAttrNoop",f:upe},1:{n:"PtgAttrSemi",f:vme},2:{n:"PtgAttrIf",f:gme},4:{n:"PtgAttrChoose",f:mme},8:{n:"PtgAttrGoto",f:pme},16:{n:"PtgAttrSum",f:Nme},32:{n:"PtgAttrBaxcel",f:pD},33:{n:"PtgAttrBaxcel",f:pD},64:{n:"PtgAttrSpace",f:yme},65:{n:"PtgAttrSpaceSemi",f:wme},128:{n:"PtgAttrIfError",f:xme},255:{}};function b1(t,e,r,n){if(n.biff<8)return Wi(t,e);for(var s=t.l+e,a=[],i=0;i!==r.length;++i)switch(r[i][0]){case"PtgArray":r[i][1]=Mme(t,0,n),a.push(r[i][1]);break;case"PtgMemArea":r[i][2]=Ume(t,r[i][1],n),a.push(r[i][2]);break;case"PtgExp":n&&n.biff==12&&(r[i][1][1]=t.read_shift(4),a.push(r[i][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[i][0]}return e=s-t.l,e!==0&&a.push(Wi(t,e)),a}function C1(t,e,r){for(var n=t.l+e,s,a,i=[];n!=t.l;)e=n-t.l,a=t[t.l],s=gD[a]||gD[Ape[a]],(a===24||a===25)&&(s=(a===24?dpe:fpe)[t[t.l+1]]),!s||!s.f?Wi(t,e):i.push([s.n,s.f(t,e,r)]);return i}function hpe(t){for(var e=[],r=0;r<t.length;++r){for(var n=t[r],s=[],a=0;a<n.length;++a){var i=n[a];if(i)switch(i[0]){case 2:s.push('"'+i[1].replace(/"/g,'""')+'"');break;default:s.push(i[1])}else s.push("")}e.push(s.join(","))}return e.join(";")}var mpe={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ppe(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function FO(t,e,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[e];if(r.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(t[n[0]][0]){case 357:return s=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(a){return a.Name}).join(";;");default:return t[n[0]][0][3]?(s=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function xD(t,e,r){var n=FO(t,e,r);return n=="#REF"?n:ppe(n,r)}function Pi(t,e,r,n,s){var a=s&&s.biff||8,i={s:{c:0,r:0}},o=[],l,u,d,h=0,m=0,g,b="";if(!t[0]||!t[0][0])return"";for(var y=-1,_="",T=0,k=t[0].length;T<k;++T){var D=t[0][T];switch(D[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(l=o.pop(),u=o.pop(),y>=0){switch(t[0][y][1][0]){case 0:_=zs(" ",t[0][y][1][1]);break;case 1:_=zs("\r",t[0][y][1][1]);break;default:if(_="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}u=u+_,y=-1}o.push(u+mpe[D[0]]+l);break;case"PtgIsect":l=o.pop(),u=o.pop(),o.push(u+" "+l);break;case"PtgUnion":l=o.pop(),u=o.pop(),o.push(u+","+l);break;case"PtgRange":l=o.pop(),u=o.pop(),o.push(u+":"+l);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=Yg(D[1][1],i,s),o.push(Jg(d,a));break;case"PtgRefN":d=r?Yg(D[1][1],r,s):D[1][1],o.push(Jg(d,a));break;case"PtgRef3d":h=D[1][1],d=Yg(D[1][2],i,s),b=xD(n,h,s),o.push(b+"!"+Jg(d,a));break;case"PtgFunc":case"PtgFuncVar":var M=D[1][0],P=D[1][1];M||(M=0),M&=127;var L=M==0?[]:o.slice(-M);o.length-=M,P==="User"&&(P=L.shift()),o.push(P+"("+L.join(",")+")");break;case"PtgBool":o.push(D[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(D[1]);break;case"PtgNum":o.push(String(D[1]));break;case"PtgStr":o.push('"'+D[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(D[1]);break;case"PtgAreaN":g=K6(D[1][1],r?{s:r}:i,s),o.push(IE(g,s));break;case"PtgArea":g=K6(D[1][1],i,s),o.push(IE(g,s));break;case"PtgArea3d":h=D[1][1],g=D[1][2],b=xD(n,h,s),o.push(b+"!"+IE(g,s));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=D[1][2];var C=(n.names||[])[m-1]||(n[0]||[])[m],E=C?C.Name:"SH33TJSNAME"+String(m);E&&E.slice(0,6)=="_xlfn."&&!s.xlfn&&(E=E.slice(6)),o.push(E);break;case"PtgNameX":var B=D[1][1];m=D[1][2];var O;if(s.biff<=5)B<0&&(B=-B),n[B]&&(O=n[B][m]);else{var R="";if(((n[B]||[])[0]||[])[0]==14849||(((n[B]||[])[0]||[])[0]==1025?n[B][m]&&n[B][m].itab>0&&(R=n.SheetNames[n[B][m].itab-1]+"!"):R=n.SheetNames[m-1]+"!"),n[B]&&n[B][m])R+=n[B][m].Name;else if(n[0]&&n[0][m])R+=n[0][m].Name;else{var F=(FO(n,B,s)||"").split(";;");F[m-1]?R=F[m-1]:R+="SH33TJSERRX"}o.push(R);break}O||(O={Name:"SH33TJSERRY"}),o.push(O.Name);break;case"PtgParen":var Q="(",H=")";if(y>=0){switch(_="",t[0][y][1][0]){case 2:Q=zs(" ",t[0][y][1][1])+Q;break;case 3:Q=zs("\r",t[0][y][1][1])+Q;break;case 4:H=zs(" ",t[0][y][1][1])+H;break;case 5:H=zs("\r",t[0][y][1][1])+H;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][y][1][0])}y=-1}o.push(Q+o.pop()+H);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:D[1][1],r:D[1][0]};var ne={c:r.c,r:r.r};if(n.sharedf[_r(d)]){var J=n.sharedf[_r(d)];o.push(Pi(J,i,ne,n,s))}else{var re=!1;for(l=0;l!=n.arrayf.length;++l)if(u=n.arrayf[l],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Pi(u[1],i,ne,n,s)),re=!0;break}re||o.push(D[1])}break;case"PtgArray":o.push("{"+hpe(D[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":y=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+D[1].idx+"[#"+D[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(D));default:throw new Error("Unrecognized Formula Token: "+String(D))}var G=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&y>=0&&G.indexOf(t[0][T][0])==-1){D=t[0][y];var q=!0;switch(D[1][0]){case 4:q=!1;case 0:_=zs(" ",D[1][1]);break;case 5:q=!1;case 1:_=zs("\r",D[1][1]);break;default:if(_="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+D[1][0])}o.push((q?_:"")+o.pop()+(q?"":_)),y=-1}}if(o.length>1&&s.WTF)throw new Error("bad formula stack");return o[0]}function gpe(t,e,r){var n=t.l+e,s=r.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Wi(t,e-2)];var o=C1(t,i,r);return e!==i+s&&(a=b1(t,e-i-s,o,r)),t.l=n,[o,a]}function xpe(t,e,r){var n=t.l+e,s=r.biff==2?1:2,a,i=t.read_shift(s);if(i==65535)return[[],Wi(t,e-2)];var o=C1(t,i,r);return e!==i+s&&(a=b1(t,e-i-s,o,r)),t.l=n,[o,a]}function vpe(t,e,r,n){var s=t.l+e,a=C1(t,n,r),i;return s!==t.l&&(i=b1(t,s-t.l,a,r)),[a,i]}function ype(t,e,r){var n=t.l+e,s,a=t.read_shift(2),i=C1(t,a,r);return a==65535?[[],Wi(t,e-2)]:(e!==a+2&&(s=b1(t,n-a-2,i,r)),[i,s])}function wpe(t){var e;if(SA(t,t.l+6)!==65535)return[zi(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function bpe(t){if(t==null){var e=ct(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return Uh(t);return Uh(0)}function UE(t,e,r){var n=t.l+e,s=Ou(t);r.biff==2&&++t.l;var a=wpe(t),i=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var o=xpe(t,n-t.l,r);return{cell:s,val:a[0],formula:o,shared:i>>3&1,tt:a[1]}}function Cpe(t,e,r,n,s){var a=Ph(e,r,s),i=bpe(t.v),o=ct(6),l=33;o.write_shift(2,l),o.write_shift(4,0);for(var u=ct(t.bf.length),d=0;d<t.bf.length;++d)u[d]=t.bf[d];var h=Xa([a,i,o,u]);return h}function cb(t,e,r){var n=t.read_shift(4),s=C1(t,n,r),a=t.read_shift(4),i=a>0?b1(t,a,s,r):null;return[s,i]}var Epe=cb,ub=cb,_pe=cb,Spe=cb,Tpe={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},DO={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Npe={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function vD(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function Bpe(t){var e="of:="+t.replace(yT,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function ME(t){var e=t.split(":"),r=e[0].split(".")[0];return[r,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function kpe(t){return t.replace(/\./,"!")}var Zg={},Nm={},ex=typeof Map<"u";function CT(t,e,r){var n=0,s=t.length;if(r){if(ex?r.has(e):Object.prototype.hasOwnProperty.call(r,e)){for(var a=ex?r.get(e):r[e];n<a.length;++n)if(t[a[n]].t===e)return t.Count++,a[n]}}else for(;n<s;++n)if(t[n].t===e)return t.Count++,n;return t[s]={t:e},t.Count++,t.Unique++,r&&(ex?(r.has(e)||r.set(e,[]),r.get(e).push(s)):(Object.prototype.hasOwnProperty.call(r,e)||(r[e]=[]),r[e].push(s))),s}function Ab(t,e){var r={min:t+1,max:t+1},n=-1;return e.MDW&&(Qi=e.MDW),e.width!=null?r.customWidth=1:e.wpx!=null?n=Dx(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(r.width=G2(n),r.customWidth=1):e.width!=null&&(r.width=e.width),e.hidden&&(r.hidden=!0),e.level!=null&&(r.outlineLevel=r.level=e.level),r}function Eh(t,e){if(t){var r=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Df(t,e,r){var n=r.revssf[e.z!=null?e.z:"General"],s=60,a=t.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){IA(e.z,s),r.ssf[s]=e.z,r.revssf[e.z]=n=s;break}}for(s=0;s!=a;++s)if(t[s].numFmtId===n)return s;return t[a]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},a}function RO(t,e,r,n,s,a){try{n.cellNF&&(t.z=wr[e])}catch(o){if(n.WTF)throw o}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=hs(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(wr[e]==null&&IA(Tue[e]||"General",e),t.t==="e")t.w=t.w||WA[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Sx(t.v);else if(t.t==="d"){var i=ja(t.v);(i|0)===i?t.w=i.toString(10):t.w=Sx(i)}else{if(t.v===void 0)return"";t.w=Rh(t.v,Nm)}else t.t==="d"?t.w=Yl(e,ja(t.v),Nm):t.w=Yl(e,t.v,Nm)}catch(o){if(n.WTF)throw o}if(n.cellStyles&&r!=null)try{t.s=a.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=z2(s.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=s.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=z2(s.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=s.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(o){if(n.WTF&&a.Fills)throw o}}}function Ipe(t,e,r){if(t&&t["!ref"]){var n=_n(t["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+t["!ref"])}}function Fpe(t,e){var r=_n(e);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Mr(r))}var Dpe=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Rpe=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Lpe=/<(?:\w:)?hyperlink [^>]*>/mg,Upe=/"(\w*:\w*)"/,Mpe=/<(?:\w:)?col\b[^>]*[\/]?>/g,Ppe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,jpe=/<(?:\w:)?pageMargins[^>]*\/>/g,LO=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Ope=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Qpe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Hpe(t,e,r,n,s,a,i){if(!t)return t;n||(n={"!id":{}});var o=e.dense?[]:{},l={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",h=t.match(Rpe);h?(u=t.slice(0,h.index),d=t.slice(h.index+h[0].length)):u=d=t;var m=u.match(LO);m?ET(m[0],o,s,r):(m=u.match(Ope))&&zpe(m[0],m[1]||"",o,s,r);var g=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(g>0){var b=u.slice(g,g+50).match(Upe);b&&Fpe(o,b[1])}var y=u.match(Qpe);y&&y[1]&&nge(y[1],s);var _=[];if(e.cellStyles){var T=u.match(Mpe);T&&Xpe(_,T)}h&&ige(h[1],o,e,l,a,i);var k=d.match(Ppe);k&&(o["!autofilter"]=ege(k[0]));var D=[],M=d.match(Dpe);if(M)for(g=0;g!=M.length;++g)D[g]=_n(M[g].slice(M[g].indexOf('"')+1));var P=d.match(Lpe);P&&Wpe(o,P,n);var L=d.match(jpe);if(L&&(o["!margins"]=Ype(Br(L[0]))),!o["!ref"]&&l.e.c>=l.s.c&&l.e.r>=l.s.r&&(o["!ref"]=Mr(l)),e.sheetRows>0&&o["!ref"]){var C=_n(o["!ref"]);e.sheetRows<=+C.e.r&&(C.e.r=e.sheetRows-1,C.e.r>l.e.r&&(C.e.r=l.e.r),C.e.r<C.s.r&&(C.s.r=C.e.r),C.e.c>l.e.c&&(C.e.c=l.e.c),C.e.c<C.s.c&&(C.s.c=C.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Mr(C))}return _.length>0&&(o["!cols"]=_),D.length>0&&(o["!merges"]=D),o}function Vpe(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',r=0;r!=t.length;++r)e+='<mergeCell ref="'+Mr(t[r])+'"/>';return e+"</mergeCells>"}function ET(t,e,r,n){var s=Br(t);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=En(rs(s.codeName)))}function zpe(t,e,r,n,s){ET(t.slice(0,t.indexOf(">")),r,n,s)}function Gpe(t,e,r,n,s){var a=!1,i={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var l=e.SheetNames[r];try{e.Workbook&&(l=e.Workbook.Sheets[r].CodeName||l)}catch{}a=!0,i.codeName=_u(Kn(l))}if(t&&t["!outline"]){var u={summaryBelow:1,summaryRight:1};t["!outline"].above&&(u.summaryBelow=0),t["!outline"].left&&(u.summaryRight=0),o=(o||"")+Ut("outlinePr",null,u)}!a&&!o||(s[s.length]=Ut("sheetPr",o,i))}var qpe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Kpe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function $pe(t){var e={sheet:1};return qpe.forEach(function(r){t[r]!=null&&t[r]&&(e[r]="1")}),Kpe.forEach(function(r){t[r]!=null&&!t[r]&&(e[r]="0")}),t.password&&(e.password=gT(t.password).toString(16).toUpperCase()),Ut("sheetProtection",null,e)}function Wpe(t,e,r){for(var n=Array.isArray(t),s=0;s!=e.length;++s){var a=Br(rs(e[s]),!0);if(!a.ref)return;var i=((r||{})["!id"]||[])[a.id];i?(a.Target=i.Target,a.location&&(a.Target+="#"+En(a.location))):(a.Target="#"+En(a.location),i={Target:a.Target,TargetMode:"Internal"}),a.Rel=i,a.tooltip&&(a.Tooltip=a.tooltip,delete a.tooltip);for(var o=_n(a.ref),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=_r({c:u,r:l});n?(t[l]||(t[l]=[]),t[l][u]||(t[l][u]={t:"z",v:void 0}),t[l][u].l=a):(t[d]||(t[d]={t:"z",v:void 0}),t[d].l=a)}}}function Ype(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(e[r]=parseFloat(t[r]))}),e}function Jpe(t){return Eh(t),Ut("pageMargins",null,t)}function Xpe(t,e){for(var r=!1,n=0;n!=e.length;++n){var s=Br(e[n],!0);s.hidden&&(s.hidden=ds(s.hidden));var a=parseInt(s.min,10)-1,i=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,xT(s.width)),Ef(s);a<=i;)t[a++]=ms(s)}}function Zpe(t,e){for(var r=["<cols>"],n,s=0;s!=e.length;++s)(n=e[s])&&(r[r.length]=Ut("col",null,Ab(s,n)));return r[r.length]="</cols>",r.join("")}function ege(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function tge(t,e,r,n){var s=typeof t.ref=="string"?t.ref:Mr(t.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var a=r.Workbook.Names,i=Do(s);i.s.r==i.e.r&&(i.e.r=Do(e["!ref"]).e.r,s=Mr(i));for(var o=0;o<a.length;++o){var l=a[o];if(l.Name=="_xlnm._FilterDatabase"&&l.Sheet==n){l.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return o==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Ut("autoFilter",null,{ref:s})}var rge=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function nge(t,e){e.Views||(e.Views=[{}]),(t.match(rge)||[]).forEach(function(r,n){var s=Br(r);e.Views[n]||(e.Views[n]={}),+s.zoomScale&&(e.Views[n].zoom=+s.zoomScale),ds(s.rightToLeft)&&(e.Views[n].RTL=!0)})}function sge(t,e,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Ut("sheetViews",Ut("sheetView",null,s),{})}function age(t,e,r,n){if(t.c&&r["!comments"].push([e,t.c]),t.v===void 0&&typeof t.f!="string"||t.t==="z"&&!t.f)return"";var s="",a=t.t,i=t.v;if(t.t!=="z")switch(t.t){case"b":s=t.v?"1":"0";break;case"n":s=""+t.v;break;case"e":s=WA[t.v];break;case"d":n&&n.cellDates?s=hs(t.v,-1).toISOString():(t=ms(t),t.t="n",s=""+(t.v=ja(hs(t.v)))),typeof t.z>"u"&&(t.z=wr[14]);break;default:s=t.v;break}var o=fi("v",Kn(s)),l={r:e},u=Df(n.cellXfs,t,n);switch(u!==0&&(l.s=u),t.t){case"n":break;case"d":l.t="d";break;case"b":l.t="b";break;case"e":l.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=fi("v",""+CT(n.Strings,t.v,n.revStrings)),l.t="s";break}l.t="str";break}if(t.t!=a&&(t.t=a,t.v=i),typeof t.f=="string"&&t.f){var d=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;o=Ut("f",Kn(t.f),d)+(t.v!=null?o:"")}return t.l&&r["!links"].push([e,t.l]),t.D&&(l.cm=1),Ut("c",o,l)}var ige=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,a=Tx("v"),i=Tx("f");return function(l,u,d,h,m,g){for(var b=0,y="",_=[],T=[],k=0,D=0,M=0,P="",L,C,E=0,B=0,O,R,F=0,Q=0,H=Array.isArray(g.CellXf),ne,J=[],re=[],G=Array.isArray(u),q=[],W={},ie=!1,j=!!d.sheetStubs,Y=l.split(e),ee=0,te=Y.length;ee!=te;++ee){y=Y[ee].trim();var ce=y.length;if(ce!==0){var be=0;e:for(b=0;b<ce;++b)switch(y[b]){case">":if(y[b-1]!="/"){++b;break e}if(d&&d.cellStyles){if(C=Br(y.slice(be,b),!0),E=C.r!=null?parseInt(C.r,10):E+1,B=-1,d.sheetRows&&d.sheetRows<E)continue;W={},ie=!1,C.ht&&(ie=!0,W.hpt=parseFloat(C.ht),W.hpx=zm(W.hpt)),C.hidden=="1"&&(ie=!0,W.hidden=!0),C.outlineLevel!=null&&(ie=!0,W.level=+C.outlineLevel),ie&&(q[E-1]=W)}break;case"<":be=b;break}if(be>=b)break;if(C=Br(y.slice(be,b),!0),E=C.r!=null?parseInt(C.r,10):E+1,B=-1,!(d.sheetRows&&d.sheetRows<E)){h.s.r>E-1&&(h.s.r=E-1),h.e.r<E-1&&(h.e.r=E-1),d&&d.cellStyles&&(W={},ie=!1,C.ht&&(ie=!0,W.hpt=parseFloat(C.ht),W.hpx=zm(W.hpt)),C.hidden=="1"&&(ie=!0,W.hidden=!0),C.outlineLevel!=null&&(ie=!0,W.level=+C.outlineLevel),ie&&(q[E-1]=W)),_=y.slice(b).split(t);for(var he=0;he!=_.length&&_[he].trim().charAt(0)=="<";++he);for(_=_.slice(he),b=0;b!=_.length;++b)if(y=_[b].trim(),y.length!==0){if(T=y.match(r),k=b,D=0,M=0,y="<c "+(y.slice(0,1)=="<"?">":"")+y,T!=null&&T.length===2){for(k=0,P=T[1],D=0;D!=P.length&&!((M=P.charCodeAt(D)-64)<1||M>26);++D)k=26*k+M;--k,B=k}else++B;for(D=0;D!=y.length&&y.charCodeAt(D)!==62;++D);if(++D,C=Br(y.slice(0,D),!0),C.r||(C.r=_r({r:E-1,c:B})),P=y.slice(D),L={t:""},(T=P.match(a))!=null&&T[1]!==""&&(L.v=En(T[1])),d.cellFormula){if((T=P.match(i))!=null&&T[1]!==""){if(L.f=En(rs(T[1])).replace(/\r\n/g,`
`),d.xlfn||(L.f=mD(L.f)),T[0].indexOf('t="array"')>-1)L.F=(P.match(s)||[])[1],L.F.indexOf(":")>-1&&J.push([_n(L.F),L.F]);else if(T[0].indexOf('t="shared"')>-1){R=Br(T[0]);var fe=En(rs(T[1]));d.xlfn||(fe=mD(fe)),re[parseInt(R.si,10)]=[R,fe,C.r]}}else(T=P.match(/<f[^>]*\/>/))&&(R=Br(T[0]),re[R.si]&&(L.f=rme(re[R.si][1],re[R.si][2],C.r)));var ge=Fs(C.r);for(D=0;D<J.length;++D)ge.r>=J[D][0].s.r&&ge.r<=J[D][0].e.r&&ge.c>=J[D][0].s.c&&ge.c<=J[D][0].e.c&&(L.F=J[D][1])}if(C.t==null&&L.v===void 0)if(L.f||L.F)L.v=0,L.t="n";else if(j)L.t="z";else continue;else L.t=C.t||"n";switch(h.s.c>B&&(h.s.c=B),h.e.c<B&&(h.e.c=B),L.t){case"n":if(L.v==""||L.v==null){if(!j)continue;L.t="z"}else L.v=parseFloat(L.v);break;case"s":if(typeof L.v>"u"){if(!j)continue;L.t="z"}else O=Zg[parseInt(L.v,10)],L.v=O.t,L.r=O.r,d.cellHTML&&(L.h=O.h);break;case"str":L.t="s",L.v=L.v!=null?rs(L.v):"",d.cellHTML&&(L.h=rT(L.v));break;case"inlineStr":T=P.match(n),L.t="s",T!=null&&(O=pT(T[1]))?(L.v=O.t,d.cellHTML&&(L.h=O.h)):L.v="";break;case"b":L.v=ds(L.v);break;case"d":d.cellDates?L.v=hs(L.v,1):(L.v=ja(hs(L.v,1)),L.t="n");break;case"e":(!d||d.cellText!==!1)&&(L.w=L.v),L.v=Mj[L.v];break}if(F=Q=0,ne=null,H&&C.s!==void 0&&(ne=g.CellXf[C.s],ne!=null&&(ne.numFmtId!=null&&(F=ne.numFmtId),d.cellStyles&&ne.fillId!=null&&(Q=ne.fillId))),RO(L,F,Q,d,m,g),d.cellDates&&H&&L.t=="n"&&Ap(wr[F])&&(L.t="d",L.v=ob(L.v)),C.cm&&d.xlmeta){var de=(d.xlmeta.Cell||[])[+C.cm-1];de&&de.type=="XLDAPR"&&(L.D=!0)}if(G){var oe=Fs(C.r);u[oe.r]||(u[oe.r]=[]),u[oe.r][oe.c]=L}else u[C.r]=L}}}}q.length>0&&(u["!rows"]=q)}}();function oge(t,e,r,n){var s=[],a=[],i=_n(t["!ref"]),o="",l,u="",d=[],h=0,m=0,g=t["!rows"],b=Array.isArray(t),y={r:u},_,T=-1;for(m=i.s.c;m<=i.e.c;++m)d[m]=Is(m);for(h=i.s.r;h<=i.e.r;++h){for(a=[],u=ua(h),m=i.s.c;m<=i.e.c;++m){l=d[m]+u;var k=b?(t[h]||[])[m]:t[l];k!==void 0&&(o=age(k,l,t,e))!=null&&a.push(o)}(a.length>0||g&&g[h])&&(y={r:u},g&&g[h]&&(_=g[h],_.hidden&&(y.hidden=1),T=-1,_.hpx?T=Rx(_.hpx):_.hpt&&(T=_.hpt),T>-1&&(y.ht=T,y.customHeight=1),_.level&&(y.outlineLevel=_.level)),s[s.length]=Ut("row",a.join(""),y))}if(g)for(;h<g.length;++h)g&&g[h]&&(y={r:h+1},_=g[h],_.hidden&&(y.hidden=1),T=-1,_.hpx?T=Rx(_.hpx):_.hpt&&(T=_.hpt),T>-1&&(y.ht=T,y.customHeight=1),_.level&&(y.outlineLevel=_.level),s[s.length]=Ut("row","",y));return s.join("")}function UO(t,e,r,n){var s=[Aa,Ut("worksheet",null,{xmlns:Jh[0],"xmlns:r":Ma.r})],a=r.SheetNames[t],i=0,o="",l=r.Sheets[a];l==null&&(l={});var u=l["!ref"]||"A1",d=_n(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Mr(d)}n||(n={}),l["!comments"]=[];var h=[];Gpe(l,r,t,e,s),s[s.length]=Ut("dimension",null,{ref:u}),s[s.length]=sge(l,e,t,r),e.sheetFormat&&(s[s.length]=Ut("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),l["!cols"]!=null&&l["!cols"].length>0&&(s[s.length]=Zpe(l,l["!cols"])),s[i=s.length]="<sheetData/>",l["!links"]=[],l["!ref"]!=null&&(o=oge(l,e),o.length>0&&(s[s.length]=o)),s.length>i+1&&(s[s.length]="</sheetData>",s[i]=s[i].replace("/>",">")),l["!protect"]&&(s[s.length]=$pe(l["!protect"])),l["!autofilter"]!=null&&(s[s.length]=tge(l["!autofilter"],l,r,t)),l["!merges"]!=null&&l["!merges"].length>0&&(s[s.length]=Vpe(l["!merges"]));var m=-1,g,b=-1;return l["!links"].length>0&&(s[s.length]="<hyperlinks>",l["!links"].forEach(function(y){y[1].Target&&(g={ref:y[0]},y[1].Target.charAt(0)!="#"&&(b=Gn(n,-1,Kn(y[1].Target).replace(/#.*$/,""),sn.HLINK),g["r:id"]="rId"+b),(m=y[1].Target.indexOf("#"))>-1&&(g.location=Kn(y[1].Target.slice(m+1))),y[1].Tooltip&&(g.tooltip=Kn(y[1].Tooltip)),s[s.length]=Ut("hyperlink",null,g))}),s[s.length]="</hyperlinks>"),delete l["!links"],l["!margins"]!=null&&(s[s.length]=Jpe(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(s[s.length]=fi("ignoredErrors",Ut("ignoredError",null,{numberStoredAsText:1,sqref:u}))),h.length>0&&(b=Gn(n,-1,"../drawings/drawing"+(t+1)+".xml",sn.DRAW),s[s.length]=Ut("drawing",null,{"r:id":"rId"+b}),l["!drawing"]=h),l["!comments"].length>0&&(b=Gn(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",sn.VML),s[s.length]=Ut("legacyDrawing",null,{"r:id":"rId"+b}),l["!legacy"]=b),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function lge(t,e){var r={},n=t.l+e;r.r=t.read_shift(4),t.l+=4;var s=t.read_shift(2);t.l+=1;var a=t.read_shift(1);return t.l=n,a&7&&(r.level=a&7),a&16&&(r.hidden=!0),a&32&&(r.hpt=s/20),r}function cge(t,e,r){var n=ct(145),s=(r["!rows"]||[])[t]||{};n.write_shift(4,t),n.write_shift(4,0);var a=320;s.hpx?a=Rx(s.hpx)*20:s.hpt&&(a=s.hpt*20),n.write_shift(2,a),n.write_shift(1,0);var i=0;s.level&&(i|=s.level),s.hidden&&(i|=16),(s.hpx||s.hpt)&&(i|=32),n.write_shift(1,i),n.write_shift(1,0);var o=0,l=n.l;n.l+=4;for(var u={r:t,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var h=-1,m=-1,g=d<<10;g<d+1<<10;++g){u.c=g;var b=Array.isArray(r)?(r[u.r]||[])[u.c]:r[_r(u)];b&&(h<0&&(h=g),m=g)}h<0||(++o,n.write_shift(4,h),n.write_shift(4,m))}var y=n.l;return n.l=l,n.write_shift(4,o),n.l=y,n.length>n.l?n.slice(0,n.l):n}function uge(t,e,r,n){var s=cge(n,r,e);(s.length>17||(e["!rows"]||[])[n])&&_t(t,0,s)}var Age=t0,dge=hp;function fge(){}function hge(t,e){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=gAe(t),r}function mge(t,e,r){r==null&&(r=ct(84+4*t.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return Q2({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Fj(t,r),r.slice(0,r.l)}function pge(t){var e=Jl(t);return[e]}function gge(t,e,r){return r==null&&(r=ct(8)),Xh(e,r)}function xge(t){var e=Zh(t);return[e]}function vge(t,e,r){return r==null&&(r=ct(4)),e0(e,r)}function yge(t){var e=Jl(t),r=t.read_shift(1);return[e,r,"b"]}function wge(t,e,r){return r==null&&(r=ct(9)),Xh(e,r),r.write_shift(1,t.v?1:0),r}function bge(t){var e=Zh(t),r=t.read_shift(1);return[e,r,"b"]}function Cge(t,e,r){return r==null&&(r=ct(5)),e0(e,r),r.write_shift(1,t.v?1:0),r}function Ege(t){var e=Jl(t),r=t.read_shift(1);return[e,r,"e"]}function _ge(t,e,r){return r==null&&(r=ct(9)),Xh(e,r),r.write_shift(1,t.v),r}function Sge(t){var e=Zh(t),r=t.read_shift(1);return[e,r,"e"]}function Tge(t,e,r){return r==null&&(r=ct(8)),e0(e,r),r.write_shift(1,t.v),r.write_shift(2,0),r.write_shift(1,0),r}function Nge(t){var e=Jl(t),r=t.read_shift(4);return[e,r,"s"]}function Bge(t,e,r){return r==null&&(r=ct(12)),Xh(e,r),r.write_shift(4,e.v),r}function kge(t){var e=Zh(t),r=t.read_shift(4);return[e,r,"s"]}function Ige(t,e,r){return r==null&&(r=ct(8)),e0(e,r),r.write_shift(4,e.v),r}function Fge(t){var e=Jl(t),r=zi(t);return[e,r,"n"]}function Dge(t,e,r){return r==null&&(r=ct(16)),Xh(e,r),Uh(t.v,r),r}function MO(t){var e=Zh(t),r=zi(t);return[e,r,"n"]}function Rge(t,e,r){return r==null&&(r=ct(12)),e0(e,r),Uh(t.v,r),r}function Lge(t){var e=Jl(t),r=AT(t);return[e,r,"n"]}function Uge(t,e,r){return r==null&&(r=ct(12)),Xh(e,r),Dj(t.v,r),r}function Mge(t){var e=Zh(t),r=AT(t);return[e,r,"n"]}function Pge(t,e,r){return r==null&&(r=ct(8)),e0(e,r),Dj(t.v,r),r}function jge(t){var e=Jl(t),r=lT(t);return[e,r,"is"]}function Oge(t){var e=Jl(t),r=qi(t);return[e,r,"str"]}function Qge(t,e,r){return r==null&&(r=ct(12+4*t.v.length)),Xh(e,r),Za(t.v,r),r.length>r.l?r.slice(0,r.l):r}function Hge(t){var e=Zh(t),r=qi(t);return[e,r,"str"]}function Vge(t,e,r){return r==null&&(r=ct(8+4*t.v.length)),e0(e,r),Za(t.v,r),r.length>r.l?r.slice(0,r.l):r}function zge(t,e,r){var n=t.l+e,s=Jl(t);s.r=r["!row"];var a=t.read_shift(1),i=[s,a,"b"];if(r.cellFormula){t.l+=2;var o=ub(t,n-t.l,r);i[3]=Pi(o,null,s,r.supbooks,r)}else t.l=n;return i}function Gge(t,e,r){var n=t.l+e,s=Jl(t);s.r=r["!row"];var a=t.read_shift(1),i=[s,a,"e"];if(r.cellFormula){t.l+=2;var o=ub(t,n-t.l,r);i[3]=Pi(o,null,s,r.supbooks,r)}else t.l=n;return i}function qge(t,e,r){var n=t.l+e,s=Jl(t);s.r=r["!row"];var a=zi(t),i=[s,a,"n"];if(r.cellFormula){t.l+=2;var o=ub(t,n-t.l,r);i[3]=Pi(o,null,s,r.supbooks,r)}else t.l=n;return i}function Kge(t,e,r){var n=t.l+e,s=Jl(t);s.r=r["!row"];var a=qi(t),i=[s,a,"str"];if(r.cellFormula){t.l+=2;var o=ub(t,n-t.l,r);i[3]=Pi(o,null,s,r.supbooks,r)}else t.l=n;return i}var $ge=t0,Wge=hp;function Yge(t,e){return e==null&&(e=ct(4)),e.write_shift(4,t),e}function Jge(t,e){var r=t.l+e,n=t0(t),s=cT(t),a=qi(t),i=qi(t),o=qi(t);t.l=r;var l={rfx:n,relId:s,loc:a,display:o};return i&&(l.Tooltip=i),l}function Xge(t,e){var r=ct(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));hp({s:Fs(t[0]),e:Fs(t[0])},r),uT("rId"+e,r);var n=t[1].Target.indexOf("#"),s=n==-1?"":t[1].Target.slice(n+1);return Za(s||"",r),Za(t[1].Tooltip||"",r),Za("",r),r.slice(0,r.l)}function Zge(){}function exe(t,e,r){var n=t.l+e,s=Rj(t),a=t.read_shift(1),i=[s];if(i[2]=a,r.cellFormula){var o=Epe(t,n-t.l,r);i[1]=o}else t.l=n;return i}function txe(t,e,r){var n=t.l+e,s=t0(t),a=[s];if(r.cellFormula){var i=Spe(t,n-t.l,r);a[1]=i,t.l=n}else t.l=n;return a}function rxe(t,e,r){r==null&&(r=ct(18));var n=Ab(t,e);r.write_shift(-4,t),r.write_shift(-4,t),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return e.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),e.level&&(s|=e.level<<8),r.write_shift(2,s),r}var PO=["left","right","top","bottom","header","footer"];function nxe(t){var e={};return PO.forEach(function(r){e[r]=zi(t)}),e}function sxe(t,e){return e==null&&(e=ct(48)),Eh(t),PO.forEach(function(r){Uh(t[r],e)}),e}function axe(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function ixe(t,e,r){r==null&&(r=ct(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function oxe(t){var e=ct(24);return e.write_shift(4,4),e.write_shift(4,1),hp(t,e),e}function lxe(t,e){return e==null&&(e=ct(66)),e.write_shift(2,t.password?gT(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?e.write_shift(4,t[r[0]]!=null&&!t[r[0]]?1:0):e.write_shift(4,t[r[0]]!=null&&t[r[0]]?0:1)}),e}function cxe(){}function uxe(){}function Axe(t,e,r,n,s,a,i){if(!t)return t;var o=e||{};n||(n={"!id":{}});var l=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,g,b,y,_,T,k,D,M,P,L=[];o.biff=12,o["!row"]=0;var C=0,E=!1,B=[],O={},R=o.supbooks||s.supbooks||[[]];if(R.sharedf=O,R.arrayf=B,R.SheetNames=s.SheetNames||s.Sheets.map(function(G){return G.name}),!o.supbooks&&(o.supbooks=R,s.Names))for(var F=0;F<s.Names.length;++F)R[0][F+1]=s.Names[F];var Q=[],H=[],ne=!1;Lx[16]={n:"BrtShortReal",f:MO};var J;if($A(t,function(q,W,ie){if(!m)switch(ie){case 148:u=q;break;case 0:g=q,o.sheetRows&&o.sheetRows<=g.r&&(m=!0),M=ua(_=g.r),o["!row"]=g.r,(q.hidden||q.hpt||q.level!=null)&&(q.hpt&&(q.hpx=zm(q.hpt)),H[q.r]=q);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:q[2]},q[2]){case"n":b.v=q[1];break;case"s":D=Zg[q[1]],b.v=D.t,b.r=D.r;break;case"b":b.v=!!q[1];break;case"e":b.v=q[1],o.cellText!==!1&&(b.w=WA[b.v]);break;case"str":b.t="s",b.v=q[1];break;case"is":b.t="s",b.v=q[1].t;break}if((y=i.CellXf[q[0].iStyleRef])&&RO(b,y.numFmtId,null,o,a,i),T=q[0].c==-1?T+1:q[0].c,o.dense?(l[_]||(l[_]=[]),l[_][T]=b):l[Is(T)+M]=b,o.cellFormula){for(E=!1,C=0;C<B.length;++C){var j=B[C];g.r>=j[0].s.r&&g.r<=j[0].e.r&&T>=j[0].s.c&&T<=j[0].e.c&&(b.F=Mr(j[0]),E=!0)}!E&&q.length>3&&(b.f=q[3])}if(d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),o.cellDates&&y&&b.t=="n"&&Ap(wr[y.numFmtId])){var Y=fh(b.v);Y&&(b.t="d",b.v=new Date(Y.y,Y.m-1,Y.d,Y.H,Y.M,Y.S,Y.u))}J&&(J.type=="XLDAPR"&&(b.D=!0),J=void 0);break;case 1:case 12:if(!o.sheetStubs||h)break;b={t:"z",v:void 0},T=q[0].c==-1?T+1:q[0].c,o.dense?(l[_]||(l[_]=[]),l[_][T]=b):l[Is(T)+M]=b,d.s.r>g.r&&(d.s.r=g.r),d.s.c>T&&(d.s.c=T),d.e.r<g.r&&(d.e.r=g.r),d.e.c<T&&(d.e.c=T),J&&(J.type=="XLDAPR"&&(b.D=!0),J=void 0);break;case 176:L.push(q);break;case 49:J=((o.xlmeta||{}).Cell||[])[q-1];break;case 494:var ee=n["!id"][q.relId];for(ee?(q.Target=ee.Target,q.loc&&(q.Target+="#"+q.loc),q.Rel=ee):q.relId==""&&(q.Target="#"+q.loc),_=q.rfx.s.r;_<=q.rfx.e.r;++_)for(T=q.rfx.s.c;T<=q.rfx.e.c;++T)o.dense?(l[_]||(l[_]=[]),l[_][T]||(l[_][T]={t:"z",v:void 0}),l[_][T].l=q):(k=_r({c:T,r:_}),l[k]||(l[k]={t:"z",v:void 0}),l[k].l=q);break;case 426:if(!o.cellFormula)break;B.push(q),P=o.dense?l[_][T]:l[Is(T)+M],P.f=Pi(q[1],d,{r:g.r,c:T},R,o),P.F=Mr(q[0]);break;case 427:if(!o.cellFormula)break;O[_r(q[0].s)]=q[1],P=o.dense?l[_][T]:l[Is(T)+M],P.f=Pi(q[1],d,{r:g.r,c:T},R,o);break;case 60:if(!o.cellStyles)break;for(;q.e>=q.s;)Q[q.e--]={width:q.w/256,hidden:!!(q.flags&1),level:q.level},ne||(ne=!0,xT(q.w/256)),Ef(Q[q.e+1]);break;case 161:l["!autofilter"]={ref:Mr(q)};break;case 476:l["!margins"]=q;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),q.name&&(s.Sheets[r].CodeName=q.name),(q.above||q.left)&&(l["!outline"]={above:q.above,left:q.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),q.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!W.T){if(!h||o.WTF)throw new Error("Unexpected record 0x"+ie.toString(16))}}},o),delete o.supbooks,delete o["!row"],!l["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(l["!ref"]=Mr(u||d)),o.sheetRows&&l["!ref"]){var re=_n(l["!ref"]);o.sheetRows<=+re.e.r&&(re.e.r=o.sheetRows-1,re.e.r>d.e.r&&(re.e.r=d.e.r),re.e.r<re.s.r&&(re.s.r=re.e.r),re.e.c>d.e.c&&(re.e.c=d.e.c),re.e.c<re.s.c&&(re.s.c=re.e.c),l["!fullref"]=l["!ref"],l["!ref"]=Mr(re))}return L.length>0&&(l["!merges"]=L),Q.length>0&&(l["!cols"]=Q),H.length>0&&(l["!rows"]=H),l}function dxe(t,e,r,n,s,a,i){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=ms(e),e.z=e.z||wr[14],e.v=ja(hs(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var l={r,c:n};switch(l.s=Df(s.cellXfs,e,s),e.l&&a["!links"].push([_r(l),e.l]),e.c&&a["!comments"].push([_r(l),e.c]),e.t){case"s":case"str":return s.bookSST?(o=CT(s.Strings,e.v,s.revStrings),l.t="s",l.v=o,i?_t(t,18,Ige(e,l)):_t(t,7,Bge(e,l))):(l.t="str",i?_t(t,17,Vge(e,l)):_t(t,6,Qge(e,l))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?i?_t(t,13,Pge(e,l)):_t(t,2,Uge(e,l)):i?_t(t,16,Rge(e,l)):_t(t,5,Dge(e,l)),!0;case"b":return l.t="b",i?_t(t,15,Cge(e,l)):_t(t,4,wge(e,l)),!0;case"e":return l.t="e",i?_t(t,14,Tge(e,l)):_t(t,3,_ge(e,l)),!0}return i?_t(t,12,vge(e,l)):_t(t,1,gge(e,l)),!0}function fxe(t,e,r,n){var s=_n(e["!ref"]||"A1"),a,i="",o=[];_t(t,145);var l=Array.isArray(e),u=s.e.r;e["!rows"]&&(u=Math.max(s.e.r,e["!rows"].length-1));for(var d=s.s.r;d<=u;++d){i=ua(d),uge(t,e,s,d);var h=!1;if(d<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){d===s.s.r&&(o[m]=Is(m)),a=o[m]+i;var g=l?(e[d]||[])[m]:e[a];if(!g){h=!1;continue}h=dxe(t,g,d,m,n,e,h)}}_t(t,146)}function hxe(t,e){!e||!e["!merges"]||(_t(t,177,Yge(e["!merges"].length)),e["!merges"].forEach(function(r){_t(t,176,Wge(r))}),_t(t,178))}function mxe(t,e){!e||!e["!cols"]||(_t(t,390),e["!cols"].forEach(function(r,n){r&&_t(t,60,rxe(n,r))}),_t(t,391))}function pxe(t,e){!e||!e["!ref"]||(_t(t,648),_t(t,649,oxe(_n(e["!ref"]))),_t(t,650))}function gxe(t,e,r){e["!links"].forEach(function(n){if(n[1].Target){var s=Gn(r,-1,n[1].Target.replace(/#.*$/,""),sn.HLINK);_t(t,494,Xge(n,s))}}),delete e["!links"]}function xxe(t,e,r,n){if(e["!comments"].length>0){var s=Gn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",sn.VML);_t(t,551,uT("rId"+s)),e["!legacy"]=s}}function vxe(t,e,r,n){if(e["!autofilter"]){var s=e["!autofilter"],a=typeof s.ref=="string"?s.ref:Mr(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Do(a);o.s.r==o.e.r&&(o.e.r=Do(e["!ref"]).e.r,a=Mr(o));for(var l=0;l<i.length;++l){var u=i[l];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+a;break}}l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+a}),_t(t,161,hp(_n(a))),_t(t,162)}}function yxe(t,e,r){_t(t,133),_t(t,137,ixe(e,r)),_t(t,138),_t(t,134)}function wxe(t,e){e["!protect"]&&_t(t,535,lxe(e["!protect"]))}function bxe(t,e,r,n){var s=Io(),a=r.SheetNames[t],i=r.Sheets[a]||{},o=a;try{r&&r.Workbook&&(o=r.Workbook.Sheets[t].CodeName||o)}catch{}var l=_n(i["!ref"]||"A1");if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575)}return i["!links"]=[],i["!comments"]=[],_t(s,129),(r.vbaraw||i["!outline"])&&_t(s,147,mge(o,i["!outline"])),_t(s,148,dge(l)),yxe(s,i,r.Workbook),mxe(s,i),fxe(s,i,t,e),wxe(s,i),vxe(s,i,r,t),hxe(s,i),gxe(s,i,n),i["!margins"]&&_t(s,476,sxe(i["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&pxe(s,i),xxe(s,i,t,n),_t(s,130),s.end()}function Cxe(t){var e=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(a){var i=a.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);i&&(e[+i[1]]=r?+i[2]:i[2])});var s=En((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(a){n=a.replace(/<.*?>/g,"")}),[e,s,n]}function Exe(t,e,r,n,s,a){var i=a||{"!type":"chart"};if(!t)return a;var o=0,l=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=Cxe(h);d.s.r=d.s.c=0,d.e.c=o,u=Is(o),m[0].forEach(function(g,b){i[u+ua(b)]={t:"n",v:g,z:m[1]},l=b}),d.e.r<l&&(d.e.r=l),++o}),o>0&&(i["!ref"]=Mr(d)),i}function _xe(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i,o=t.match(LO);return o&&ET(o[0],a,s,r),(i=t.match(/drawing r:id="(.*?)"/))&&(a["!rel"]=i[1]),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}function Sxe(t,e){t.l+=10;var r=qi(t);return{name:r}}function Txe(t,e,r,n,s){if(!t)return t;n||(n={"!id":{}});var a={"!type":"chart","!drawel":null,"!rel":""},i=!1;return $A(t,function(l,u,d){switch(d){case 550:a["!rel"]=l;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),l.name&&(s.Sheets[r].CodeName=l.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!i||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),n["!id"][a["!rel"]]&&(a["!drawel"]=n["!id"][a["!rel"]]),a}var _T=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Nxe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Bxe=[],kxe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function yD(t,e){for(var r=0;r!=t.length;++r)for(var n=t[r],s=0;s!=e.length;++s){var a=e[s];if(n[a[0]]==null)n[a[0]]=a[1];else switch(a[2]){case"bool":typeof n[a[0]]=="string"&&(n[a[0]]=ds(n[a[0]]));break;case"int":typeof n[a[0]]=="string"&&(n[a[0]]=parseInt(n[a[0]],10));break}}}function wD(t,e){for(var r=0;r!=e.length;++r){var n=e[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=ds(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function jO(t){wD(t.WBProps,_T),wD(t.CalcPr,kxe),yD(t.WBView,Nxe),yD(t.Sheets,Bxe),Nm.date1904=ds(t.WBProps.date1904)}function Ixe(t){return!t.Workbook||!t.Workbook.WBProps?"false":ds(t.Workbook.WBProps.date1904)?"true":"false"}var Fxe="][*?/\\".split("");function OO(t,e){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Fxe.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Dxe(t,e,r){t.forEach(function(n,s){OO(n);for(var a=0;a<s;++a)if(n==t[a])throw new Error("Duplicate Sheet Name: "+n);if(r){var i=e&&e[s]&&e[s].CodeName||n;if(i.charCodeAt(0)==95&&i.length>22)throw new Error("Bad Code Name: Worksheet"+i)}})}function Rxe(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];Dxe(t.SheetNames,e,!!t.vbaraw);for(var r=0;r<t.SheetNames.length;++r)Ipe(t.Sheets[t.SheetNames[r]],t.SheetNames[r],r)}var Lxe=/<\w+:workbook/;function Uxe(t,e){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",a={},i=0;if(t.replace(Ji,function(l,u){var d=Br(l);switch(ju(d[0])){case"<?xml":break;case"<workbook":l.match(Lxe)&&(s="xmlns"+l.match(/<(\w+):/)[1]),r.xmlns=d[s];break;case"</workbook>":break;case"<fileVersion":delete d[0],r.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":_T.forEach(function(h){if(d[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=ds(d[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(d[h[0]],10);break;default:r.WBProps[h[0]]=d[h[0]]}}),d.codeName&&(r.WBProps.CodeName=rs(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],r.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=En(rs(d.name)),delete d[0],r.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":a={},a.Name=rs(d.name),d.comment&&(a.Comment=d.comment),d.localSheetId&&(a.Sheet=+d.localSheetId),ds(d.hidden||"0")&&(a.Hidden=!0),i=u+l.length;break;case"</definedName>":a.Ref=En(rs(t.slice(i,u))),r.Names.push(a);break;case"<definedName/>":break;case"<calcPr":delete d[0],r.CalcPr=d;break;case"<calcPr/>":delete d[0],r.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return l}),Jh.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return jO(r),r}function QO(t){var e=[Aa];e[e.length]=Ut("workbook",null,{xmlns:Jh[0],"xmlns:r":Ma.r});var r=t.Workbook&&(t.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(_T.forEach(function(o){t.Workbook.WBProps[o[0]]!=null&&t.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=t.Workbook.WBProps[o[0]])}),t.Workbook.WBProps.CodeName&&(n.codeName=t.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=Ut("workbookPr",null,n);var s=t.Workbook&&t.Workbook.Sheets||[],a=0;if(s&&s[0]&&s[0].Hidden){for(e[e.length]="<bookViews>",a=0;a!=t.SheetNames.length&&!(!s[a]||!s[a].Hidden);++a);a==t.SheetNames.length&&(a=0),e[e.length]='<workbookView firstSheet="'+a+'" activeTab="'+a+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",a=0;a!=t.SheetNames.length;++a){var i={name:Kn(t.SheetNames[a].slice(0,31))};if(i.sheetId=""+(a+1),i["r:id"]="rId"+(a+1),s[a])switch(s[a].Hidden){case 1:i.state="hidden";break;case 2:i.state="veryHidden";break}e[e.length]=Ut("sheet",null,i)}return e[e.length]="</sheets>",r&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(o){var l={name:o.Name};o.Comment&&(l.comment=o.Comment),o.Sheet!=null&&(l.localSheetId=""+o.Sheet),o.Hidden&&(l.hidden="1"),o.Ref&&(e[e.length]=Ut("definedName",Kn(o.Ref),l))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Mxe(t,e){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=BS(t),r.name=qi(t),r}function Pxe(t,e){return e||(e=ct(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),uT(t.strRelID,e),Za(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function jxe(t,e){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var s=e>8?qi(t):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Oxe(t,e){e||(e=ct(72));var r=0;return t&&t.filterPrivacy&&(r|=8),e.write_shift(4,r),e.write_shift(4,0),Fj(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Qxe(t,e){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=e-8,r}function Hxe(t,e,r){var n=t.l+e;t.l+=4,t.l+=1;var s=t.read_shift(4),a=xAe(t),i=_pe(t,0,r),o=cT(t);t.l=n;var l={Name:a,Ptg:i};return s<268435455&&(l.Sheet=s),o&&(l.Comment=o),l}function Vxe(t,e){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;e||(e={}),e.biff=12;var a=[],i=[[]];return i.SheetNames=[],i.XTI=[],Lx[16]={n:"BrtFRTArchID$",f:Qxe},$A(t,function(l,u,d){switch(d){case 156:i.SheetNames.push(l.name),r.Sheets.push(l);break;case 153:r.WBProps=l;break;case 39:l.Sheet!=null&&(e.SID=l.Sheet),l.Ref=Pi(l.Ptg,null,null,i,e),delete e.SID,delete l.Ptg,a.push(l);break;case 1036:break;case 357:case 358:case 355:case 667:i[0].length?i.push([d,l]):i[0]=[d,l],i[i.length-1].XTI=[];break;case 362:i.length===0&&(i[0]=[],i[0].XTI=[]),i[i.length-1].XTI=i[i.length-1].XTI.concat(l),i.XTI=i.XTI.concat(l);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(d),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(d),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||e.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),jO(r),r.Names=a,r.supbooks=i,r}function zxe(t,e){_t(t,143);for(var r=0;r!=e.SheetNames.length;++r){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[r]&&e.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:e.SheetNames[r]};_t(t,156,Pxe(s))}_t(t,144)}function Gxe(t,e){e||(e=ct(127));for(var r=0;r!=4;++r)e.write_shift(4,0);return Za("SheetJS",e),Za(R2.version,e),Za(R2.version,e),Za("7262",e),e.length>e.l?e.slice(0,e.l):e}function qxe(t,e){e||(e=ct(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var r=120;return e.write_shift(1,r),e.length>e.l?e.slice(0,e.l):e}function Kxe(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var r=e.Workbook.Sheets,n=0,s=-1,a=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&a==-1&&(a=n);a>s||(_t(t,135),_t(t,158,qxe(s)),_t(t,136))}}function $xe(t,e){var r=Io();return _t(r,131),_t(r,128,Gxe()),_t(r,153,Oxe(t.Workbook&&t.Workbook.WBProps||null)),Kxe(r,t),zxe(r,t),_t(r,132),r.end()}function Wxe(t,e,r){return e.slice(-4)===".bin"?Vxe(t,r):Uxe(t,r)}function Yxe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?Axe(t,n,r,s,a,i,o):Hpe(t,n,r,s,a,i,o)}function Jxe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?Txe(t,n,r,s,a):_xe(t,n,r,s,a)}function Xxe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?eme():tme()}function Zxe(t,e,r,n,s,a,i,o){return e.slice(-4)===".bin"?X0e():Z0e()}function e1e(t,e,r,n){return e.slice(-4)===".bin"?Whe(t,r,n):Mhe(t,r,n)}function t1e(t,e,r){return wO(t,r)}function r1e(t,e,r){return e.slice(-4)===".bin"?rhe(t,r):Zfe(t,r)}function n1e(t,e,r){return e.slice(-4)===".bin"?K0e(t,r):P0e(t,r)}function s1e(t,e,r){return e.slice(-4)===".bin"?L0e(t):D0e(t)}function a1e(t,e,r,n){return r.slice(-4)===".bin"?U0e(t,e,r,n):void 0}function i1e(t,e,r){return e.slice(-4)===".bin"?k0e(t,e,r):F0e(t,e,r)}function o1e(t,e,r){return(e.slice(-4)===".bin"?$xe:QO)(t)}function l1e(t,e,r,n,s){return(e.slice(-4)===".bin"?bxe:UO)(t,r,n,s)}function c1e(t,e,r){return(e.slice(-4)===".bin"?a0e:vO)(t,r)}function u1e(t,e,r){return(e.slice(-4)===".bin"?ahe:AO)(t,r)}function A1e(t,e,r){return(e.slice(-4)===".bin"?$0e:EO)(t)}function d1e(t){return(t.slice(-4)===".bin"?I0e:bO)()}var HO=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,VO=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Cc(t,e){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=t.match(HO),a,i,o,l;if(s)for(l=0;l!=s.length;++l)a=s[l].match(VO),(i=a[1].indexOf(":"))===-1?n[a[1]]=a[2].slice(1,a[2].length-1):(a[1].slice(0,6)==="xmlns:"?o="xmlns"+a[1].slice(6):o=a[1].slice(i+1),n[o]=a[2].slice(1,a[2].length-1));return n}function f1e(t){var e=t.split(/\s+/),r={};if(e.length===1)return r;var n=t.match(HO),s,a,i,o;if(n)for(o=0;o!=n.length;++o)s=n[o].match(VO),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?i="xmlns"+s[1].slice(6):i=s[1].slice(a+1),r[i]=s[2].slice(1,s[2].length-1));return r}var tx;function h1e(t,e){var r=tx[t]||En(t);return r==="General"?Rh(e):Yl(r,e)}function m1e(t,e,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=ds(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=hs(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[En(e)]=s}function p1e(t,e,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||WA[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Sx(t.v):t.w=Rh(t.v):t.w=h1e(e||"General",t.v)}catch(a){if(r.WTF)throw a}try{var n=tx[e]||e||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Ap(n)){var s=fh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(a){if(r.WTF)throw a}}}function g1e(t,e,r){if(r.cellStyles&&e.Interior){var n=e.Interior;n.Pattern&&(n.patternType=Bhe[n.Pattern]||n.Pattern)}t[e.ID]=e}function x1e(t,e,r,n,s,a,i,o,l,u){var d="General",h=n.StyleID,m={};u=u||{};var g=[],b=0;for(h===void 0&&o&&(h=o.StyleID),h===void 0&&i&&(h=i.StyleID);a[h]!==void 0&&(a[h].nf&&(d=a[h].nf),a[h].Interior&&g.push(a[h].Interior),!!a[h].Parent);)h=a[h].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=ds(t);break;case"String":n.t="s",n.r=P6(En(t)),n.v=t.indexOf("<")>-1?En(e||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(hs(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=En(t):n.v<60&&(n.v=n.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Mj[t],u.cellText!==!1&&(n.w=t);break;default:t==""&&e==""?n.t="z":(n.t="s",n.v=P6(e||t));break}if(p1e(n,d,u),u.cellFormula!==!1)if(n.Formula){var y=En(n.Formula);y.charCodeAt(0)==61&&(y=y.slice(1)),n.f=Tm(y,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Tm("RC:RC",s):n.ArrayRange&&(n.F=Tm(n.ArrayRange,s),l.push([_n(n.F),n.F]))}else for(b=0;b<l.length;++b)s.r>=l[b][0].s.r&&s.r<=l[b][0].e.r&&s.c>=l[b][0].s.c&&s.c<=l[b][0].e.c&&(n.F=l[b][1]);u.cellStyles&&(g.forEach(function(_){!m.patternType&&_.patternType&&(m.patternType=_.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function v1e(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function PE(t,e){var r=e||{};dp();var n=_g(nT(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=rs(n));var s=n.slice(0,1024).toLowerCase(),a=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var i=ms(r);return i.type="string",Vm.to_workbook(n,i)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Qe){s.indexOf("<"+Qe)>=0&&(a=!0)}),a)return sve(n,r);tx={"General Number":"General","General Date":wr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":wr[15],"Short Date":wr[14],"Long Time":wr[19],"Medium Time":wr[18],"Short Time":wr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:wr[2],Standard:wr[4],Percent:wr[10],Scientific:wr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,l=[],u,d={},h=[],m=r.dense?[]:{},g="",b={},y={},_=Cc('<Data ss:Type="String">'),T=0,k=0,D=0,M={s:{r:2e6,c:2e6},e:{r:0,c:0}},P={},L={},C="",E=0,B=[],O={},R={},F=0,Q=[],H=[],ne={},J=[],re,G=!1,q=[],W=[],ie={},j=0,Y=0,ee={Sheets:[],WBProps:{date1904:!1}},te={};Bx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var ce="";o=Bx.exec(n);)switch(o[3]=(ce=o[3]).toLowerCase()){case"data":if(ce=="data"){if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break}if(l[l.length-1][1])break;o[1]==="/"?x1e(n.slice(T,o.index),C,_,l[l.length-1][0]=="comment"?ne:b,{c:k,r:D},P,J[k],y,q,r):(C="",_=Cc(o[0]),T=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(H.length>0&&(b.c=H),(!r.sheetRows||r.sheetRows>D)&&b.v!==void 0&&(r.dense?(m[D]||(m[D]=[]),m[D][k]=b):m[Is(k)+ua(D)]=b),b.HRef&&(b.l={Target:En(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(j=k+(parseInt(b.MergeAcross,10)|0),Y=D+(parseInt(b.MergeDown,10)|0),B.push({s:{c:k,r:D},e:{c:j,r:Y}})),!r.sheetStubs)b.MergeAcross?k=j+1:++k;else if(b.MergeAcross||b.MergeDown){for(var be=k;be<=j;++be)for(var he=D;he<=Y;++he)(be>k||he>D)&&(r.dense?(m[he]||(m[he]=[]),m[he][be]={t:"z"}):m[Is(be)+ua(he)]={t:"z"});k=j+1}else++k;else b=f1e(o[0]),b.Index&&(k=+b.Index-1),k<M.s.c&&(M.s.c=k),k>M.e.c&&(M.e.c=k),o[0].slice(-2)==="/>"&&++k,H=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(D<M.s.r&&(M.s.r=D),D>M.e.r&&(M.e.r=D),o[0].slice(-2)==="/>"&&(y=Cc(o[0]),y.Index&&(D=+y.Index-1)),k=0,++D):(y=Cc(o[0]),y.Index&&(D=+y.Index-1),ie={},(y.AutoFitHeight=="0"||y.Height)&&(ie.hpx=parseInt(y.Height,10),ie.hpt=Rx(ie.hpx),W[D]=ie),y.Hidden=="1"&&(ie.hidden=!0,W[D]=ie));break;case"worksheet":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));h.push(g),M.s.r<=M.e.r&&M.s.c<=M.e.c&&(m["!ref"]=Mr(M),r.sheetRows&&r.sheetRows<=M.e.r&&(m["!fullref"]=m["!ref"],M.e.r=r.sheetRows-1,m["!ref"]=Mr(M))),B.length&&(m["!merges"]=B),J.length>0&&(m["!cols"]=J),W.length>0&&(m["!rows"]=W),d[g]=m}else M={s:{r:2e6,c:2e6},e:{r:0,c:0}},D=k=0,l.push([o[3],!1]),u=Cc(o[0]),g=En(u.Name),m=r.dense?[]:{},B=[],q=[],W=[],te={name:g,Hidden:0},ee.Sheets.push(te);break;case"table":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;l.push([o[3],!1]),J=[],G=!1}break;case"style":o[1]==="/"?g1e(P,L,r):L=Cc(o[0]);break;case"numberformat":L.nf=En(Cc(o[0]).Format||"General"),tx[L.nf]&&(L.nf=tx[L.nf]);for(var fe=0;fe!=392&&wr[fe]!=L.nf;++fe);if(fe==392){for(fe=57;fe!=392;++fe)if(wr[fe]==null){IA(L.nf,fe);break}}break;case"column":if(l[l.length-1][0]!=="table")break;if(re=Cc(o[0]),re.Hidden&&(re.hidden=!0,delete re.Hidden),re.Width&&(re.wpx=parseInt(re.Width,10)),!G&&re.wpx>10){G=!0,Qi=gO;for(var ge=0;ge<J.length;++ge)J[ge]&&Ef(J[ge])}G&&Ef(re),J[re.Index-1||J.length]=re;for(var de=0;de<+re.Span;++de)J[J.length]=ms(re);break;case"namedrange":if(o[1]==="/")break;ee.Names||(ee.Names=[]);var oe=Br(o[0]),Ue={Name:oe.Name,Ref:Tm(oe.RefersTo.slice(1),{r:0,c:0})};ee.Sheets.length>0&&(Ue.Sheet=ee.Sheets.length-1),ee.Names.push(Ue);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?C+=n.slice(E,o.index):E=o.index+o[0].length;break;case"interior":if(!r.cellStyles)break;L.Interior=Cc(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?VAe(O,ce,n.slice(F,o.index)):F=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else l.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));v1e(ne),H.push(ne)}else l.push([o[3],!1]),u=Cc(o[0]),ne={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var tt=Cc(o[0]);m["!autofilter"]={ref:Tm(tt.Range).replace(/\$/g,"")},l.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=l.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&l.push([o[3],!0]);break;case"null":break;default:if(l.length==0&&o[3]=="document"||l.length==0&&o[3]=="uof")return SD(n,r);var Fe=!0;switch(l[l.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Fe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Fe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":ee.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Fe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Fe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(n.slice(F,o.index)){case"SheetHidden":te.Hidden=1;break;case"SheetVeryHidden":te.Hidden=2;break}else F=o.index+o[0].length;break;case"header":m["!margins"]||Eh(m["!margins"]={},"xlml"),isNaN(+Br(o[0]).Margin)||(m["!margins"].header=+Br(o[0]).Margin);break;case"footer":m["!margins"]||Eh(m["!margins"]={},"xlml"),isNaN(+Br(o[0]).Margin)||(m["!margins"].footer=+Br(o[0]).Margin);break;case"pagemargins":var Ee=Br(o[0]);m["!margins"]||Eh(m["!margins"]={},"xlml"),isNaN(+Ee.Top)||(m["!margins"].top=+Ee.Top),isNaN(+Ee.Left)||(m["!margins"].left=+Ee.Left),isNaN(+Ee.Right)||(m["!margins"].right=+Ee.Right),isNaN(+Ee.Bottom)||(m["!margins"].bottom=+Ee.Bottom);break;case"displayrighttoleft":ee.Views||(ee.Views=[]),ee.Views[0]||(ee.Views[0]={}),ee.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Fe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Fe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Fe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Fe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Fe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Fe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Fe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Fe=!1}break;case"smarttags":break;default:Fe=!1;break}if(Fe||o[3].match(/!\[CDATA/))break;if(!l[l.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+l.join("|");if(l[l.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?m1e(R,ce,Q,n.slice(F,o.index)):(Q=o,F=o.index+o[0].length);break}if(r.WTF)throw"Unrecognized tag: "+o[3]+"|"+l.join("|")}var De={};return!r.bookSheets&&!r.bookProps&&(De.Sheets=d),De.SheetNames=h,De.Workbook=ee,De.SSF=ms(wr),De.Props=O,De.Custprops=R,De}function US(t,e){switch(TT(e=e||{}),e.type||"base64"){case"base64":return PE(ll(t),e);case"binary":case"buffer":case"file":return PE(t,e);case"array":return PE(If(t),e)}}function y1e(t,e){var r=[];return t.Props&&r.push(zAe(t.Props,e)),t.Custprops&&r.push(GAe(t.Props,t.Custprops)),r.join("")}function w1e(){return""}function b1e(t,e){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,s){var a=[];a.push(Ut("NumberFormat",null,{"ss:Format":Kn(wr[n.numFmtId])}));var i={"ss:ID":"s"+(21+s)};r.push(Ut("Style",a.join(""),i))}),Ut("Styles",r.join(""))}function zO(t){return Ut("NamedRange",null,{"ss:Name":t.Name,"ss:RefersTo":"="+wT(t.Ref,{r:0,c:0})})}function C1e(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,r=[],n=0;n<e.length;++n){var s=e[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(zO(s)))}return Ut("Names",r.join(""))}function E1e(t,e,r,n){if(!t||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,a=[],i=0;i<s.length;++i){var o=s[i];o.Sheet==r&&(o.Name.match(/^_xlfn\./)||a.push(zO(o)))}return a.join("")}function _1e(t,e,r,n){if(!t)return"";var s=[];if(t["!margins"]&&(s.push("<PageSetup>"),t["!margins"].header&&s.push(Ut("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&s.push(Ut("Footer",null,{"x:Margin":t["!margins"].footer})),s.push(Ut("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(Ut("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var a=0;a<r&&!(n.Workbook.Sheets[a]&&!n.Workbook.Sheets[a].Hidden);++a);a==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),t["!protect"]&&(s.push(fi("ProtectContents","True")),t["!protect"].objects&&s.push(fi("ProtectObjects","True")),t["!protect"].scenarios&&s.push(fi("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?s.push(fi("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&s.push(fi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(i){t["!protect"][i[0]]&&s.push("<"+i[1]+"/>")})),s.length==0?"":Ut("WorksheetOptions",s.join(""),{xmlns:el.x})}function S1e(t){return t.map(function(e){var r=Kue(e.t||""),n=Ut("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Ut("Comment",n,{"ss:Author":e.a})}).join("")}function T1e(t,e,r,n,s,a,i){if(!t||t.v==null&&t.f==null)return"";var o={};if(t.f&&(o["ss:Formula"]="="+Kn(wT(t.f,i))),t.F&&t.F.slice(0,e.length)==e){var l=Fs(t.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(l.r==i.r?"":"["+(l.r-i.r)+"]")+"C"+(l.c==i.c?"":"["+(l.c-i.c)+"]")}if(t.l&&t.l.Target&&(o["ss:HRef"]=Kn(t.l.Target),t.l.Tooltip&&(o["x:HRefScreenTip"]=Kn(t.l.Tooltip))),r["!merges"])for(var u=r["!merges"],d=0;d!=u.length;++d)u[d].s.c!=i.c||u[d].s.r!=i.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var h="",m="";switch(t.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",m=String(t.v);break;case"b":h="Boolean",m=t.v?"1":"0";break;case"e":h="Error",m=WA[t.v];break;case"d":h="DateTime",m=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||wr[14]);break;case"s":h="String",m=que(t.v||"");break}var g=Df(n.cellXfs,t,n);o["ss:StyleID"]="s"+(21+g),o["ss:Index"]=i.c+1;var b=t.v!=null?m:"",y=t.t=="z"?"":'<Data ss:Type="'+h+'">'+b+"</Data>";return(t.c||[]).length>0&&(y+=S1e(t.c)),Ut("Cell",y,o)}function N1e(t,e){var r='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=zm(e.hpt)),e.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(r+=' ss:Hidden="1"')),r+">"}function B1e(t,e,r,n){if(!t["!ref"])return"";var s=_n(t["!ref"]),a=t["!merges"]||[],i=0,o=[];t["!cols"]&&t["!cols"].forEach(function(_,T){Ef(_);var k=!!_.width,D=Ab(T,_),M={"ss:Index":T+1};k&&(M["ss:Width"]=Fx(D.width)),_.hidden&&(M["ss:Hidden"]="1"),o.push(Ut("Column",null,M))});for(var l=Array.isArray(t),u=s.s.r;u<=s.e.r;++u){for(var d=[N1e(u,(t["!rows"]||[])[u])],h=s.s.c;h<=s.e.c;++h){var m=!1;for(i=0;i!=a.length;++i)if(!(a[i].s.c>h)&&!(a[i].s.r>u)&&!(a[i].e.c<h)&&!(a[i].e.r<u)){(a[i].s.c!=h||a[i].s.r!=u)&&(m=!0);break}if(!m){var g={r:u,c:h},b=_r(g),y=l?(t[u]||[])[h]:t[b];d.push(T1e(y,b,t,e,r,n,g))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function k1e(t,e,r){var n=[],s=r.SheetNames[t],a=r.Sheets[s],i=a?E1e(a,e,t,r):"";return i.length>0&&n.push("<Names>"+i+"</Names>"),i=a?B1e(a,e,t,r):"",i.length>0&&n.push("<Table>"+i+"</Table>"),n.push(_1e(a,e,t,r)),n.join("")}function I1e(t,e){e||(e={}),t.SSF||(t.SSF=ms(wr)),t.SSF&&(dp(),sb(t.SSF),e.revssf=ib(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],Df(e.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(y1e(t,e)),r.push(w1e()),r.push(""),r.push("");for(var n=0;n<t.SheetNames.length;++n)r.push(Ut("Worksheet",k1e(n,e,t),{"ss:Name":Kn(t.SheetNames[n])}));return r[2]=b1e(t,e),r[3]=C1e(t),Aa+Ut("Workbook",r.join(""),{xmlns:el.ss,"xmlns:o":el.o,"xmlns:x":el.x,"xmlns:ss":el.ss,"xmlns:dt":el.dt,"xmlns:html":el.html})}function F1e(t){var e={},r=t.content;if(r.l=28,e.AnsiUserType=r.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=CAe(r),r.length-r.l<=4)return e;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,e.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(e.UnicodeClipboardFormat=EAe(r),n=r.read_shift(4),n==0||n>40))return e;r.l-=4,e.Reserved2=r.read_shift(0,"lpwstr")}var D1e=[60,1084,2066,2165,2175];function R1e(t,e,r,n,s){var a=n,i=[],o=r.slice(r.l,r.l+a);if(s&&s.enc&&s.enc.insitu&&o.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(o)}i.push(o),r.l+=a;for(var l=SA(r,r.l),u=MS[l],d=0;u!=null&&D1e.indexOf(l)>-1;)a=SA(r,r.l+2),d=r.l+4,l==2066?d+=4:(l==2165||l==2175)&&(d+=12),o=r.slice(d,r.l+4+a),i.push(o),r.l+=4+a,u=MS[l=SA(r,r.l)];var h=Xa(i);Ai(h,0);var m=0;h.lens=[];for(var g=0;g<i.length;++g)h.lens.push(m),m+=i[g].length;if(h.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+h.length+" < "+n;return e.f(h,h.length,s)}function gu(t,e,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=wr[n])}catch(a){if(e.WTF)throw a}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||WA[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Sx(t.v):t.w=Rh(t.v):t.w=Yl(n,t.v,{date1904:!!r,dateNF:e&&e.dateNF})}catch(a){if(e.WTF)throw a}if(e.cellDates&&n&&t.t=="n"&&Ap(wr[n]||String(n))){var s=fh(t.v);s&&(t.t="d",t.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Xv(t,e,r){return{v:t,ixfe:e,t:r}}function L1e(t,e){var r={opts:{}},n={},s=e.dense?[]:{},a={},i={},o=null,l=[],u="",d={},h,m="",g,b,y,_,T={},k=[],D,M,P=[],L=[],C={Sheets:[],WBProps:{date1904:!1},Views:[{}]},E={},B=function(Ft){return Ft<8?wh[Ft]:Ft<64&&L[Ft-8]||wh[Ft]},O=function(Ft,pt,br){var Zt=pt.XF.data;if(!(!Zt||!Zt.patternType||!br||!br.cellStyles)){pt.s={},pt.s.patternType=Zt.patternType;var hn;(hn=Ix(B(Zt.icvFore)))&&(pt.s.fgColor={rgb:hn}),(hn=Ix(B(Zt.icvBack)))&&(pt.s.bgColor={rgb:hn})}},R=function(Ft,pt,br){if(!(ie>1)&&!(br.sheetRows&&Ft.r>=br.sheetRows)){if(br.cellStyles&&pt.XF&&pt.XF.data&&O(Ft,pt,br),delete pt.ixfe,delete pt.XF,h=Ft,m=_r(Ft),(!i||!i.s||!i.e)&&(i={s:{r:0,c:0},e:{r:0,c:0}}),Ft.r<i.s.r&&(i.s.r=Ft.r),Ft.c<i.s.c&&(i.s.c=Ft.c),Ft.r+1>i.e.r&&(i.e.r=Ft.r+1),Ft.c+1>i.e.c&&(i.e.c=Ft.c+1),br.cellFormula&&pt.f){for(var Zt=0;Zt<k.length;++Zt)if(!(k[Zt][0].s.c>Ft.c||k[Zt][0].s.r>Ft.r)&&!(k[Zt][0].e.c<Ft.c||k[Zt][0].e.r<Ft.r)){pt.F=Mr(k[Zt][0]),(k[Zt][0].s.c!=Ft.c||k[Zt][0].s.r!=Ft.r)&&delete pt.f,pt.f&&(pt.f=""+Pi(k[Zt][1],i,Ft,q,F));break}}br.dense?(s[Ft.r]||(s[Ft.r]=[]),s[Ft.r][Ft.c]=pt):s[m]=pt}},F={enc:!1,sbcch:0,snames:[],sharedf:T,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(F.password=e.password);var Q,H=[],ne=[],J=[],re=[],G=!1,q=[];q.SheetNames=F.snames,q.sharedf=F.sharedf,q.arrayf=F.arrayf,q.names=[],q.XTI=[];var W=0,ie=0,j=0,Y=[],ee=[],te;F.codepage=1200,Bc(1200);for(var ce=!1;t.l<t.length-1;){var be=t.l,he=t.read_shift(2);if(he===0&&W===10)break;var fe=t.l===t.length?0:t.read_shift(2),ge=MS[he];if(ge&&ge.f){if(e.bookSheets&&W===133&&he!==133)break;if(W=he,ge.r===2||ge.r==12){var de=t.read_shift(2);if(fe-=2,!F.enc&&de!==he&&((de&255)<<8|de>>8)!==he)throw new Error("rt mismatch: "+de+"!="+he);ge.r==12&&(t.l+=10,fe-=10)}var oe={};if(he===10?oe=ge.f(t,fe,F):oe=R1e(he,ge,t,fe,F),ie==0&&[9,521,1033,2057].indexOf(W)===-1)continue;switch(he){case 34:r.opts.Date1904=C.WBProps.date1904=oe;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(F.enc||(t.l=0),F.enc=oe,!e.password)throw new Error("File is password-protected");if(oe.valid==null)throw new Error("Encryption scheme unsupported");if(!oe.valid)throw new Error("Password is incorrect");break;case 92:F.lastuser=oe;break;case 66:var Ue=Number(oe);switch(Ue){case 21010:Ue=1200;break;case 32768:Ue=1e4;break;case 32769:Ue=1252;break}Bc(F.codepage=Ue),ce=!0;break;case 317:F.rrtabid=oe;break;case 25:F.winlocked=oe;break;case 439:r.opts.RefreshAll=oe;break;case 12:r.opts.CalcCount=oe;break;case 16:r.opts.CalcDelta=oe;break;case 17:r.opts.CalcIter=oe;break;case 13:r.opts.CalcMode=oe;break;case 14:r.opts.CalcPrecision=oe;break;case 95:r.opts.CalcSaveRecalc=oe;break;case 15:F.CalcRefMode=oe;break;case 2211:r.opts.FullCalc=oe;break;case 129:oe.fDialog&&(s["!type"]="dialog"),oe.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),oe.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:P.push(oe);break;case 430:q.push([oe]),q[q.length-1].XTI=[];break;case 35:case 547:q[q.length-1].push(oe);break;case 24:case 536:te={Name:oe.Name,Ref:Pi(oe.rgce,i,null,q,F)},oe.itab>0&&(te.Sheet=oe.itab-1),q.names.push(te),q[0]||(q[0]=[],q[0].XTI=[]),q[q.length-1].push(oe),oe.Name=="_xlnm._FilterDatabase"&&oe.itab>0&&oe.rgce&&oe.rgce[0]&&oe.rgce[0][0]&&oe.rgce[0][0][0]=="PtgArea3d"&&(ee[oe.itab-1]={ref:Mr(oe.rgce[0][0][1][2])});break;case 22:F.ExternCount=oe;break;case 23:q.length==0&&(q[0]=[],q[0].XTI=[]),q[q.length-1].XTI=q[q.length-1].XTI.concat(oe),q.XTI=q.XTI.concat(oe);break;case 2196:if(F.biff<8)break;te!=null&&(te.Comment=oe[1]);break;case 18:s["!protect"]=oe;break;case 19:oe!==0&&F.WTF&&console.error("Password verifier: "+oe);break;case 133:a[oe.pos]=oe,F.snames.push(oe.name);break;case 10:{if(--ie)break;if(i.e){if(i.e.r>0&&i.e.c>0){if(i.e.r--,i.e.c--,s["!ref"]=Mr(i),e.sheetRows&&e.sheetRows<=i.e.r){var tt=i.e.r;i.e.r=e.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=Mr(i),i.e.r=tt}i.e.r++,i.e.c++}H.length>0&&(s["!merges"]=H),ne.length>0&&(s["!objects"]=ne),J.length>0&&(s["!cols"]=J),re.length>0&&(s["!rows"]=re),C.Sheets.push(E)}u===""?d=s:n[u]=s,s=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(F.biff===8&&(F.biff={9:2,521:3,1033:4}[he]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[oe.BIFFVer]||8),F.biffguess=oe.BIFFVer==0,oe.BIFFVer==0&&oe.dt==4096&&(F.biff=5,ce=!0,Bc(F.codepage=28591)),F.biff==8&&oe.BIFFVer==0&&oe.dt==16&&(F.biff=2),ie++)break;if(s=e.dense?[]:{},F.biff<8&&!ce&&(ce=!0,Bc(F.codepage=e.codepage||1252)),F.biff<5||oe.BIFFVer==0&&oe.dt==4096){u===""&&(u="Sheet1"),i={s:{r:0,c:0},e:{r:0,c:0}};var Fe={pos:t.l-fe,name:u};a[Fe.pos]=Fe,F.snames.push(u)}else u=(a[be]||{name:""}).name;oe.dt==32&&(s["!type"]="chart"),oe.dt==64&&(s["!type"]="macro"),H=[],ne=[],F.arrayf=k=[],J=[],re=[],G=!1,E={Hidden:(a[be]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(e.dense?(s[oe.r]||[])[oe.c]:s[_r({c:oe.c,r:oe.r})])&&++oe.c,D={ixfe:oe.ixfe,XF:P[oe.ixfe]||{},v:oe.val,t:"n"},j>0&&(D.z=Y[D.ixfe>>8&63]),gu(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e);break;case 5:case 517:D={ixfe:oe.ixfe,XF:P[oe.ixfe],v:oe.val,t:oe.t},j>0&&(D.z=Y[D.ixfe>>8&63]),gu(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e);break;case 638:D={ixfe:oe.ixfe,XF:P[oe.ixfe],v:oe.rknum,t:"n"},j>0&&(D.z=Y[D.ixfe>>8&63]),gu(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e);break;case 189:for(var Ee=oe.c;Ee<=oe.C;++Ee){var De=oe.rkrec[Ee-oe.c][0];D={ixfe:De,XF:P[De],v:oe.rkrec[Ee-oe.c][1],t:"n"},j>0&&(D.z=Y[D.ixfe>>8&63]),gu(D,e,r.opts.Date1904),R({c:Ee,r:oe.r},D,e)}break;case 6:case 518:case 1030:{if(oe.val=="String"){o=oe;break}if(D=Xv(oe.val,oe.cell.ixfe,oe.tt),D.XF=P[D.ixfe],e.cellFormula){var Qe=oe.formula;if(Qe&&Qe[0]&&Qe[0][0]&&Qe[0][0][0]=="PtgExp"){var $e=Qe[0][0][1][0],ut=Qe[0][0][1][1],Et=_r({r:$e,c:ut});T[Et]?D.f=""+Pi(oe.formula,i,oe.cell,q,F):D.F=((e.dense?(s[$e]||[])[ut]:s[Et])||{}).F}else D.f=""+Pi(oe.formula,i,oe.cell,q,F)}j>0&&(D.z=Y[D.ixfe>>8&63]),gu(D,e,r.opts.Date1904),R(oe.cell,D,e),o=oe}break;case 7:case 519:if(o)o.val=oe,D=Xv(oe,o.cell.ixfe,"s"),D.XF=P[D.ixfe],e.cellFormula&&(D.f=""+Pi(o.formula,i,o.cell,q,F)),j>0&&(D.z=Y[D.ixfe>>8&63]),gu(D,e,r.opts.Date1904),R(o.cell,D,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(oe);var lt=_r(oe[0].s);if(g=e.dense?(s[oe[0].s.r]||[])[oe[0].s.c]:s[lt],e.cellFormula&&g){if(!o||!lt||!g)break;g.f=""+Pi(oe[1],i,oe[0],q,F),g.F=Mr(oe[0])}}break;case 1212:{if(!e.cellFormula)break;if(m){if(!o)break;T[_r(o.cell)]=oe[0],g=e.dense?(s[o.cell.r]||[])[o.cell.c]:s[_r(o.cell)],(g||{}).f=""+Pi(oe[0],i,h,q,F)}}break;case 253:D=Xv(l[oe.isst].t,oe.ixfe,"s"),l[oe.isst].h&&(D.h=l[oe.isst].h),D.XF=P[D.ixfe],j>0&&(D.z=Y[D.ixfe>>8&63]),gu(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e);break;case 513:e.sheetStubs&&(D={ixfe:oe.ixfe,XF:P[oe.ixfe],t:"z"},j>0&&(D.z=Y[D.ixfe>>8&63]),gu(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e));break;case 190:if(e.sheetStubs)for(var Dt=oe.c;Dt<=oe.C;++Dt){var zt=oe.ixfe[Dt-oe.c];D={ixfe:zt,XF:P[zt],t:"z"},j>0&&(D.z=Y[D.ixfe>>8&63]),gu(D,e,r.opts.Date1904),R({c:Dt,r:oe.r},D,e)}break;case 214:case 516:case 4:D=Xv(oe.val,oe.ixfe,"s"),D.XF=P[D.ixfe],j>0&&(D.z=Y[D.ixfe>>8&63]),gu(D,e,r.opts.Date1904),R({c:oe.c,r:oe.r},D,e);break;case 0:case 512:ie===1&&(i=oe);break;case 252:l=oe;break;case 1054:if(F.biff==4){Y[j++]=oe[1];for(var Jt=0;Jt<j+163&&wr[Jt]!=oe[1];++Jt);Jt>=163&&IA(oe[1],j+163)}else IA(oe[1],oe[0]);break;case 30:{Y[j++]=oe;for(var Rt=0;Rt<j+163&&wr[Rt]!=oe;++Rt);Rt>=163&&IA(oe,j+163)}break;case 229:H=H.concat(oe);break;case 93:ne[oe.cmo[0]]=F.lastobj=oe;break;case 438:F.lastobj.TxO=oe;break;case 127:F.lastobj.ImData=oe;break;case 440:for(_=oe[0].s.r;_<=oe[0].e.r;++_)for(y=oe[0].s.c;y<=oe[0].e.c;++y)g=e.dense?(s[_]||[])[y]:s[_r({c:y,r:_})],g&&(g.l=oe[1]);break;case 2048:for(_=oe[0].s.r;_<=oe[0].e.r;++_)for(y=oe[0].s.c;y<=oe[0].e.c;++y)g=e.dense?(s[_]||[])[y]:s[_r({c:y,r:_})],g&&g.l&&(g.l.Tooltip=oe[1]);break;case 28:{if(F.biff<=5&&F.biff>=2)break;g=e.dense?(s[oe[0].r]||[])[oe[0].c]:s[_r(oe[0])];var Ot=ne[oe[2]];g||(e.dense?(s[oe[0].r]||(s[oe[0].r]=[]),g=s[oe[0].r][oe[0].c]={t:"z"}):g=s[_r(oe[0])]={t:"z"},i.e.r=Math.max(i.e.r,oe[0].r),i.s.r=Math.min(i.s.r,oe[0].r),i.e.c=Math.max(i.e.c,oe[0].c),i.s.c=Math.min(i.s.c,oe[0].c)),g.c||(g.c=[]),b={a:oe[1],t:Ot.TxO.t},g.c.push(b)}break;case 2173:b0e(P[oe.ixfe],oe.ext);break;case 125:{if(!F.cellStyles)break;for(;oe.e>=oe.s;)J[oe.e--]={width:oe.w/256,level:oe.level||0,hidden:!!(oe.flags&1)},G||(G=!0,xT(oe.w/256)),Ef(J[oe.e+1])}break;case 520:{var qt={};oe.level!=null&&(re[oe.r]=qt,qt.level=oe.level),oe.hidden&&(re[oe.r]=qt,qt.hidden=!0),oe.hpt&&(re[oe.r]=qt,qt.hpt=oe.hpt,qt.hpx=zm(oe.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Eh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[he]]=oe;break;case 161:s["!margins"]||Eh(s["!margins"]={}),s["!margins"].header=oe.header,s["!margins"].footer=oe.footer;break;case 574:oe.RTL&&(C.Views[0].RTL=!0);break;case 146:L=oe;break;case 2198:Q=oe;break;case 140:M=oe;break;case 442:u?E.CodeName=oe||E.name:C.WBProps.CodeName=oe||"ThisWorkbook";break}}else ge||console.error("Missing Info for XLS Record 0x"+he.toString(16)),t.l+=fe}return r.SheetNames=$s(a).sort(function(It,Ft){return Number(It)-Number(Ft)}).map(function(It){return a[It].name}),e.bookSheets||(r.Sheets=n),!r.SheetNames.length&&d["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=d)):r.Preamble=d,r.Sheets&&ee.forEach(function(It,Ft){r.Sheets[r.SheetNames[Ft]]["!autofilter"]=It}),r.Strings=l,r.SSF=ms(wr),F.enc&&(r.Encryption=F.enc),Q&&(r.Themes=Q),r.Metadata={},M!==void 0&&(r.Metadata.Country=M),q.names.length>0&&(C.Names=q.names),r.Workbook=C,r}var rx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function U1e(t,e,r){var n=Ar.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=rD(n,kS,rx.DSI);for(var a in s)e[a]=s[a]}catch(u){if(r.WTF)throw u}var i=Ar.find(t,"/!SummaryInformation");if(i&&i.size>0)try{var o=rD(i,IS,rx.SI);for(var l in o)e[l]==null&&(e[l]=o[l])}catch(u){if(r.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(Vj(e.HeadingPairs,e.TitlesOfParts,e,r),delete e.HeadingPairs,delete e.TitlesOfParts)}function M1e(t,e){var r=[],n=[],s=[],a=0,i,o=F6(kS,"n"),l=F6(IS,"n");if(t.Props)for(i=$s(t.Props),a=0;a<i.length;++a)(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],t.Props[i[a]]]);if(t.Custprops)for(i=$s(t.Custprops),a=0;a<i.length;++a)Object.prototype.hasOwnProperty.call(t.Props||{},i[a])||(Object.prototype.hasOwnProperty.call(o,i[a])?r:Object.prototype.hasOwnProperty.call(l,i[a])?n:s).push([i[a],t.Custprops[i[a]]]);var u=[];for(a=0;a<s.length;++a)Yj.indexOf(s[a][0])>-1||Hj.indexOf(s[a][0])>-1||s[a][1]!=null&&u.push(s[a]);n.length&&Ar.utils.cfb_add(e,"/SummaryInformation",nD(n,rx.SI,l,IS)),(r.length||u.length)&&Ar.utils.cfb_add(e,"/DocumentSummaryInformation",nD(r,rx.DSI,o,kS,u.length?u:null,rx.UDI))}function GO(t,e){e||(e={}),TT(e),$4(),e.codepage&&K4(e.codepage);var r,n;if(t.FullPaths){if(Ar.find(t,"/encryption"))throw new Error("File is password-protected");r=Ar.find(t,"!CompObj"),n=Ar.find(t,"/Workbook")||Ar.find(t,"/Book")}else{switch(e.type){case"base64":t=rl(ll(t));break;case"binary":t=rl(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Ai(t,0),n={content:t}}var s,a;if(r&&F1e(r),e.bookProps&&!e.bookSheets)s={};else{var i=Jr?"buffer":"array";if(n&&n.content)s=L1e(n.content,e);else if((a=Ar.find(t,"PerfectOffice_MAIN"))&&a.content)s=Ch.to_workbook(a.content,(e.type=i,e));else if((a=Ar.find(t,"NativeContent_MAIN"))&&a.content)s=Ch.to_workbook(a.content,(e.type=i,e));else throw(a=Ar.find(t,"MN0"))&&a.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&Ar.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Y0e(t))}var o={};return t.FullPaths&&U1e(t,o,e),s.Props=s.Custprops=o,e.bookFiles&&(s.cfb=t),s}function P1e(t,e){var r=e||{},n=Ar.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Ar.utils.cfb_add(n,s,qO(t,r)),r.biff==8&&(t.Props||t.Custprops)&&M1e(t,n),r.biff==8&&t.vbaraw&&J0e(n,Ar.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),n}var Lx={0:{f:lge},1:{f:pge},2:{f:Lge},3:{f:Ege},4:{f:yge},5:{f:Fge},6:{f:Oge},7:{f:Nge},8:{f:Kge},9:{f:qge},10:{f:zge},11:{f:Gge},12:{f:xge},13:{f:Mge},14:{f:Sge},15:{f:bge},16:{f:MO},17:{f:Hge},18:{f:kge},19:{f:lT},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Hxe},40:{},42:{},43:{f:Ohe},44:{f:Phe},45:{f:Vhe},46:{f:Ghe},47:{f:zhe},48:{},49:{f:AAe},50:{},51:{f:_0e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:oO},62:{f:jge},63:{f:R0e},64:{f:cxe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Wi,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:axe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:hge},148:{f:Age,p:16},151:{f:Zge},152:{},153:{f:jxe},154:{},155:{},156:{f:Mxe},157:{},158:{},159:{T:1,f:the},160:{T:-1},161:{T:1,f:t0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:$ge},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:C0e},336:{T:-1},337:{f:N0e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:BS},357:{},358:{},359:{},360:{T:1},361:{},362:{f:iO},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:exe},427:{f:txe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:nxe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:fge},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Jge},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:BS},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:G0e},633:{T:1},634:{T:-1},635:{T:1,f:V0e},636:{T:-1},637:{f:mAe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Sxe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:uxe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},MS={6:{f:UE},10:{f:Dd},12:{f:Ca},13:{f:Ca},14:{f:na},15:{f:na},16:{f:zi},17:{f:na},18:{f:na},19:{f:Ca},20:{f:cD},21:{f:cD},23:{f:iO},24:{f:AD},25:{f:na},26:{},27:{},28:{f:ufe},29:{},34:{f:na},35:{f:uD},38:{f:zi},39:{f:zi},40:{f:zi},41:{f:zi},42:{f:na},43:{f:na},47:{f:bhe},49:{f:Mde},51:{f:Ca},60:{},61:{f:Fde},64:{f:na},65:{f:Ude},66:{f:Ca},77:{},80:{},81:{},82:{},85:{f:Ca},89:{},90:{},91:{},92:{f:wde},93:{f:ffe},94:{},95:{f:na},96:{},97:{},99:{f:na},125:{f:oO},128:{f:Xde},129:{f:Cde},130:{f:Ca},131:{f:na},132:{f:na},133:{f:Ede},134:{},140:{f:wfe},141:{f:Ca},144:{},146:{f:Efe},151:{},152:{},153:{},154:{},155:{},156:{f:Ca},157:{},158:{},160:{f:Ife},161:{f:Tfe},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:$de},190:{f:Wde},193:{f:Dd},197:{},198:{},199:{},200:{},201:{},202:{f:na},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ca},220:{},221:{f:na},222:{},224:{f:Jde},225:{f:yde},226:{f:Dd},227:{},229:{f:Afe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:Sde},253:{f:jde},255:{f:Nde},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:Jj},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:na},353:{f:Dd},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:nfe},431:{f:na},432:{},433:{},434:{},437:{},438:{f:pfe},439:{f:na},440:{f:gfe},441:{},442:{f:y1},443:{},444:{f:Ca},445:{},446:{},448:{f:Dd},449:{f:Ide,r:2},450:{f:Dd},512:{f:iD},513:{f:kfe},515:{f:tfe},516:{f:Qde},517:{f:lD},519:{f:Ffe},520:{f:Bde},523:{},545:{f:dD},549:{f:aD},566:{},574:{f:Rde},638:{f:Kde},659:{},1048:{},1054:{f:Vde},1084:{},1212:{f:ofe},2048:{f:vfe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Wv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Dd},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:_fe,r:12},2173:{f:w0e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:na,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:ife,r:12},2197:{},2198:{f:m0e,r:12},2199:{},2200:{},2201:{},2202:{f:lfe,r:12},2203:{f:Dd},2204:{},2205:{},2206:{},2207:{},2211:{f:kde},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ca},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Nfe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Cfe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:iD},1:{},2:{f:Mfe},3:{f:Lfe},4:{f:Rfe},5:{f:lD},7:{f:jfe},8:{},9:{f:Wv},11:{},22:{f:Ca},30:{f:Gde},31:{},32:{},33:{f:dD},36:{},37:{f:aD},50:{f:Ofe},62:{},52:{},67:{},68:{f:Ca},69:{},86:{},126:{},127:{f:Dfe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Qfe},223:{},234:{},354:{},421:{},518:{f:UE},521:{f:Wv},536:{f:AD},547:{f:uD},561:{},579:{},1030:{f:UE},1033:{f:Wv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Mt(t,e,r,n){var s=e;if(!isNaN(s)){var a=n||(r||[]).length||0,i=t.next(4);i.write_shift(2,s),i.write_shift(2,a),a>0&&aT(r)&&t.push(r)}}function j1e(t,e,r,n){var s=(r||[]).length||0;if(s<=8224)return Mt(t,e,r,s);var a=e;if(!isNaN(a)){for(var i=r.parts||[],o=0,l=0,u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;var d=t.next(4);for(d.write_shift(2,a),d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u;l<s;){for(d=t.next(4),d.write_shift(2,60),u=0;u+(i[o]||8224)<=8224;)u+=i[o]||8224,o++;d.write_shift(2,u),t.push(r.slice(l,l+u)),l+=u}}}function E1(t,e,r){return t||(t=ct(7)),t.write_shift(2,e),t.write_shift(2,r),t.write_shift(2,0),t.write_shift(1,0),t}function O1e(t,e,r,n){var s=ct(9);return E1(s,t,e),Xj(r,n||"b",s),s}function Q1e(t,e,r){var n=ct(8+2*r.length);return E1(n,t,e),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function H1e(t,e,r,n){if(e.v!=null)switch(e.t){case"d":case"n":var s=e.t=="d"?ja(hs(e.v)):e.v;s==(s|0)&&s>=0&&s<65536?Mt(t,2,Pfe(r,n,s)):Mt(t,3,Ufe(r,n,s));return;case"b":case"e":Mt(t,5,O1e(r,n,e.v,e.t));return;case"s":case"str":Mt(t,4,Q1e(r,n,(e.v||"").slice(0,255)));return}Mt(t,1,E1(null,r,n))}function V1e(t,e,r,n){var s=Array.isArray(e),a=_n(e["!ref"]||"A1"),i,o="",l=[];if(a.e.c>255||a.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");a.e.c=Math.min(a.e.c,255),a.e.r=Math.min(a.e.c,16383),i=Mr(a)}for(var u=a.s.r;u<=a.e.r;++u){o=ua(u);for(var d=a.s.c;d<=a.e.c;++d){u===a.s.r&&(l[d]=Is(d)),i=l[d]+o;var h=s?(e[u]||[])[d]:e[i];h&&H1e(t,h,u,d)}}}function z1e(t,e){for(var r=e||{},n=Io(),s=0,a=0;a<t.SheetNames.length;++a)t.SheetNames[a]==r.sheet&&(s=a);if(s==0&&r.sheet&&t.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return Mt(n,r.biff==4?1033:r.biff==3?521:9,mT(t,16,r)),V1e(n,t.Sheets[t.SheetNames[s]],s,r),Mt(n,10),n.end()}function G1e(t,e,r){Mt(t,49,Pde({sz:12,name:"Arial"},r))}function q1e(t,e,r){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)e[s]!=null&&Mt(t,1054,zde(s,e[s],r))})}function K1e(t,e){var r=ct(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),Mt(t,2151,r),r=ct(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),nO(_n(e["!ref"]||"A1"),r),r.write_shift(4,4),Mt(t,2152,r)}function $1e(t,e){for(var r=0;r<16;++r)Mt(t,224,oD({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){Mt(t,224,oD(n,0,e))})}function W1e(t,e){for(var r=0;r<e["!links"].length;++r){var n=e["!links"][r];Mt(t,440,xfe(n)),n[1].Tooltip&&Mt(t,2048,yfe(n))}delete e["!links"]}function Y1e(t,e){if(e){var r=0;e.forEach(function(n,s){++r<=256&&n&&Mt(t,125,Sfe(Ab(s,n),s))})}}function J1e(t,e,r,n,s){var a=16+Df(s.cellXfs,e,s);if(e.v==null&&!e.bf){Mt(t,513,Ph(r,n,a));return}if(e.bf)Mt(t,6,Cpe(e,r,n,s,a));else switch(e.t){case"d":case"n":var i=e.t=="d"?ja(hs(e.v)):e.v;Mt(t,515,rfe(r,n,i,a));break;case"b":case"e":Mt(t,517,efe(r,n,e.v,a,s,e.t));break;case"s":case"str":if(s.bookSST){var o=CT(s.Strings,e.v,s.revStrings);Mt(t,253,Ode(r,n,o,a))}else Mt(t,516,Hde(r,n,(e.v||"").slice(0,255),a,s));break;default:Mt(t,513,Ph(r,n,a))}}function X1e(t,e,r){var n=Io(),s=r.SheetNames[t],a=r.Sheets[s]||{},i=(r||{}).Workbook||{},o=(i.Sheets||[])[t]||{},l=Array.isArray(a),u=e.biff==8,d,h="",m=[],g=_n(a["!ref"]||"A1"),b=u?65536:16384;if(g.e.c>255||g.e.r>=b){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:IV16384");g.e.c=Math.min(g.e.c,255),g.e.r=Math.min(g.e.c,b-1)}Mt(n,2057,mT(r,16,e)),Mt(n,13,jl(1)),Mt(n,12,jl(100)),Mt(n,15,so(!0)),Mt(n,17,so(!1)),Mt(n,16,Uh(.001)),Mt(n,95,so(!0)),Mt(n,42,so(!1)),Mt(n,43,so(!1)),Mt(n,130,jl(1)),Mt(n,128,Zde()),Mt(n,131,so(!1)),Mt(n,132,so(!1)),u&&Y1e(n,a["!cols"]),Mt(n,512,qde(g,e)),u&&(a["!links"]=[]);for(var y=g.s.r;y<=g.e.r;++y){h=ua(y);for(var _=g.s.c;_<=g.e.c;++_){y===g.s.r&&(m[_]=Is(_)),d=m[_]+h;var T=l?(a[y]||[])[_]:a[d];T&&(J1e(n,T,y,_,e),u&&T.l&&a["!links"].push([d,T.l]))}}var k=o.CodeName||o.name||s;return u&&Mt(n,574,Lde((i.Views||[])[0])),u&&(a["!merges"]||[]).length&&Mt(n,229,dfe(a["!merges"])),u&&W1e(n,a),Mt(n,442,Zj(k)),u&&K1e(n,a),Mt(n,10),n.end()}function Z1e(t,e,r){var n=Io(),s=(t||{}).Workbook||{},a=s.Sheets||[],i=s.WBProps||{},o=r.biff==8,l=r.biff==5;if(Mt(n,2057,mT(t,5,r)),r.bookType=="xla"&&Mt(n,135),Mt(n,225,o?jl(1200):null),Mt(n,193,ede(2)),l&&Mt(n,191),l&&Mt(n,192),Mt(n,226),Mt(n,92,bde("SheetJS",r)),Mt(n,66,jl(o?1200:1252)),o&&Mt(n,353,jl(0)),o&&Mt(n,448),Mt(n,317,Bfe(t.SheetNames.length)),o&&t.vbaraw&&Mt(n,211),o&&t.vbaraw){var u=i.CodeName||"ThisWorkbook";Mt(n,442,Zj(u))}Mt(n,156,jl(17)),Mt(n,25,so(!1)),Mt(n,18,so(!1)),Mt(n,19,jl(0)),o&&Mt(n,431,so(!1)),o&&Mt(n,444,jl(0)),Mt(n,61,Dde()),Mt(n,64,so(!1)),Mt(n,141,jl(0)),Mt(n,34,so(Ixe(t)=="true")),Mt(n,14,so(!0)),o&&Mt(n,439,so(!1)),Mt(n,218,jl(0)),G1e(n,t,r),q1e(n,t.SSF,r),$1e(n,r),o&&Mt(n,352,so(!1));var d=n.end(),h=Io();o&&Mt(h,140,bfe()),o&&r.Strings&&j1e(h,252,Tde(r.Strings)),Mt(h,10);var m=h.end(),g=Io(),b=0,y=0;for(y=0;y<t.SheetNames.length;++y)b+=(o?12:11)+(o?2:1)*t.SheetNames[y].length;var _=d.length+b+m.length;for(y=0;y<t.SheetNames.length;++y){var T=a[y]||{};Mt(g,133,_de({pos:_,hs:T.Hidden||0,dt:0,name:t.SheetNames[y]},r)),_+=e[y].length}var k=g.end();if(b!=k.length)throw new Error("BS8 "+b+" != "+k.length);var D=[];return d.length&&D.push(d),k.length&&D.push(k),m.length&&D.push(m),Xa(D)}function eve(t,e){var r=e||{},n=[];t&&!t.SSF&&(t.SSF=ms(wr)),t&&t.SSF&&(dp(),sb(t.SSF),r.revssf=ib(t.SSF),r.revssf[t.SSF[65535]]=0,r.ssf=t.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,NT(r),r.cellXfs=[],Df(r.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var s=0;s<t.SheetNames.length;++s)n[n.length]=X1e(s,r,t);return n.unshift(Z1e(t,n,r)),Xa(n)}function qO(t,e){for(var r=0;r<=t.SheetNames.length;++r){var n=t.Sheets[t.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Do(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var a=e||{};switch(a.biff||2){case 8:case 5:return eve(t,e);case 4:case 3:case 2:return z1e(t,e)}throw new Error("invalid type "+a.bookType+" for BIFF")}function bD(t,e){var r=e||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var s=t.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var a=t.match(/<\/table/i),i=s.index,o=a&&a.index||t.length,l=Pue(t.slice(i,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,h=0,m=0,g={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(i=0;i<l.length;++i){var y=l[i].trim(),_=y.slice(0,3).toLowerCase();if(_=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}d=0;continue}if(!(_!="<td"&&_!="<th")){var T=y.split(/<\/t[dh]>/i);for(o=0;o<T.length;++o){var k=T[o].trim();if(k.match(/<t[dh]/i)){for(var D=k,M=0;D.charAt(0)=="<"&&(M=D.indexOf(">"))>-1;)D=D.slice(M+1);for(var P=0;P<b.length;++P){var L=b[P];L.s.c==d&&L.s.r<u&&u<=L.e.r&&(d=L.e.c+1,P=-1)}var C=Br(k.slice(0,k.indexOf(">")));m=C.colspan?+C.colspan:1,((h=+C.rowspan)>1||m>1)&&b.push({s:{r:u,c:d},e:{r:u+(h||1)-1,c:d+m-1}});var E=C.t||C["data-t"]||"";if(!D.length){d+=m;continue}if(D=pj(D),g.s.r>u&&(g.s.r=u),g.e.r<u&&(g.e.r=u),g.s.c>d&&(g.s.c=d),g.e.c<d&&(g.e.c=d),!D.length){d+=m;continue}var B={t:"s",v:D};r.raw||!D.trim().length||E=="s"||(D==="TRUE"?B={t:"b",v:!0}:D==="FALSE"?B={t:"b",v:!1}:isNaN(Ic(D))?isNaN(Hm(D).getDate())||(B={t:"d",v:hs(D)},r.cellDates||(B={t:"n",v:ja(B.v)}),B.z=r.dateNF||wr[14]):B={t:"n",v:Ic(D)}),r.dense?(n[u]||(n[u]=[]),n[u][d]=B):n[_r({r:u,c:d})]=B,d+=m}}}}return n["!ref"]=Mr(g),b.length&&(n["!merges"]=b),n}function tve(t,e,r,n){for(var s=t["!merges"]||[],a=[],i=e.s.c;i<=e.e.c;++i){for(var o=0,l=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>i)&&!(s[u].e.r<r||s[u].e.c<i)){if(s[u].s.r<r||s[u].s.c<i){o=-1;break}o=s[u].e.r-s[u].s.r+1,l=s[u].e.c-s[u].s.c+1;break}if(!(o<0)){var d=_r({r,c:i}),h=n.dense?(t[r]||[])[i]:t[d],m=h&&h.v!=null&&(h.h||rT(h.w||(jA(h),h.w)||""))||"",g={};o>1&&(g.rowspan=o),l>1&&(g.colspan=l),n.editable?m='<span contenteditable="true">'+m+"</span>":h&&(g["data-t"]=h&&h.t||"z",h.v!=null&&(g["data-v"]=h.v),h.z!=null&&(g["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),g.id=(n.id||"sjs")+"-"+d,a.push(Ut("td",m,g))}}var b="<tr>";return b+a.join("")+"</tr>"}var rve='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',nve="</body></html>";function sve(t,e){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Ff(bD(r[0],e),e);var n=FT();return r.forEach(function(s,a){DT(n,bD(s,e),"Sheet"+(a+1))}),n}function ave(t,e,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function KO(t,e){var r=e||{},n=r.header!=null?r.header:rve,s=r.footer!=null?r.footer:nve,a=[n],i=Do(t["!ref"]);r.dense=Array.isArray(t),a.push(ave(t,i,r));for(var o=i.s.r;o<=i.e.r;++o)a.push(tve(t,i,o,r));return a.push("</table>"+s),a.join("")}function $O(t,e,r){var n=r||{},s=0,a=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var i=typeof n.origin=="string"?Fs(n.origin):n.origin;s=i.r,a=i.c}var o=e.getElementsByTagName("tr"),l=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:s,c:a}};if(t["!ref"]){var d=Do(t["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),s==-1&&(u.e.r=s=d.e.r+1)}var h=[],m=0,g=t["!rows"]||(t["!rows"]=[]),b=0,y=0,_=0,T=0,k=0,D=0;for(t["!cols"]||(t["!cols"]=[]);b<o.length&&y<l;++b){var M=o[b];if(CD(M)){if(n.display)continue;g[y]={hidden:!0}}var P=M.children;for(_=T=0;_<P.length;++_){var L=P[_];if(!(n.display&&CD(L))){var C=L.hasAttribute("data-v")?L.getAttribute("data-v"):L.hasAttribute("v")?L.getAttribute("v"):pj(L.innerHTML),E=L.getAttribute("data-z")||L.getAttribute("z");for(m=0;m<h.length;++m){var B=h[m];B.s.c==T+a&&B.s.r<y+s&&y+s<=B.e.r&&(T=B.e.c+1-a,m=-1)}D=+L.getAttribute("colspan")||1,((k=+L.getAttribute("rowspan")||1)>1||D>1)&&h.push({s:{r:y+s,c:T+a},e:{r:y+s+(k||1)-1,c:T+a+(D||1)-1}});var O={t:"s",v:C},R=L.getAttribute("data-t")||L.getAttribute("t")||"";C!=null&&(C.length==0?O.t=R||"z":n.raw||C.trim().length==0||R=="s"||(C==="TRUE"?O={t:"b",v:!0}:C==="FALSE"?O={t:"b",v:!1}:isNaN(Ic(C))?isNaN(Hm(C).getDate())||(O={t:"d",v:hs(C)},n.cellDates||(O={t:"n",v:ja(O.v)}),O.z=n.dateNF||wr[14]):O={t:"n",v:Ic(C)})),O.z===void 0&&E!=null&&(O.z=E);var F="",Q=L.getElementsByTagName("A");if(Q&&Q.length)for(var H=0;H<Q.length&&!(Q[H].hasAttribute("href")&&(F=Q[H].getAttribute("href"),F.charAt(0)!="#"));++H);F&&F.charAt(0)!="#"&&(O.l={Target:F}),n.dense?(t[y+s]||(t[y+s]=[]),t[y+s][T+a]=O):t[_r({c:T+a,r:y+s})]=O,u.e.c<T+a&&(u.e.c=T+a),T+=D}}++y}return h.length&&(t["!merges"]=(t["!merges"]||[]).concat(h)),u.e.r=Math.max(u.e.r,y-1+s),t["!ref"]=Mr(u),y>=l&&(t["!fullref"]=Mr((u.e.r=o.length-b+y-1+s,u))),t}function WO(t,e){var r=e||{},n=r.dense?[]:{};return $O(n,t,e)}function ive(t,e){return Ff(WO(t,e),e)}function CD(t){var e="",r=ove(t);return r&&(e=r(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function ove(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function lve(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=En(e.replace(/<[^>]*>/g,""));return[r]}var ED={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function YO(t,e){var r=e||{},n=nT(t),s=[],a,i,o={name:""},l="",u=0,d,h,m={},g=[],b=r.dense?[]:{},y,_,T={value:""},k="",D=0,M=[],P=-1,L=-1,C={s:{r:1e6,c:1e7},e:{r:0,c:0}},E=0,B={},O=[],R={},F=0,Q=0,H=[],ne=1,J=1,re=[],G={Names:[]},q={},W=["",""],ie=[],j={},Y="",ee=0,te=!1,ce=!1,be=0;for(Bx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");y=Bx.exec(n);)switch(y[3]=y[3].replace(/_.*$/,"")){case"table":case"工作表":y[1]==="/"?(C.e.c>=C.s.c&&C.e.r>=C.s.r?b["!ref"]=Mr(C):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=C.e.r&&(b["!fullref"]=b["!ref"],C.e.r=r.sheetRows-1,b["!ref"]=Mr(C)),O.length&&(b["!merges"]=O),H.length&&(b["!rows"]=H),d.name=d.名称||d.name,typeof JSON<"u"&&JSON.stringify(d),g.push(d.name),m[d.name]=b,ce=!1):y[0].charAt(y[0].length-2)!=="/"&&(d=Br(y[0],!1),P=L=-1,C.s.r=C.s.c=1e7,C.e.r=C.e.c=0,b=r.dense?[]:{},O=[],H=[],ce=!0);break;case"table-row-group":y[1]==="/"?--E:++E;break;case"table-row":case"行":if(y[1]==="/"){P+=ne,ne=1;break}if(h=Br(y[0],!1),h.行号?P=h.行号-1:P==-1&&(P=0),ne=+h["number-rows-repeated"]||1,ne<10)for(be=0;be<ne;++be)E>0&&(H[P+be]={level:E});L=-1;break;case"covered-table-cell":y[1]!=="/"&&++L,r.sheetStubs&&(r.dense?(b[P]||(b[P]=[]),b[P][L]={t:"z"}):b[_r({r:P,c:L})]={t:"z"}),k="",M=[];break;case"table-cell":case"数据":if(y[0].charAt(y[0].length-2)==="/")++L,T=Br(y[0],!1),J=parseInt(T["number-columns-repeated"]||"1",10),_={t:"z",v:null},T.formula&&r.cellFormula!=!1&&(_.f=vD(En(T.formula))),(T.数据类型||T["value-type"])=="string"&&(_.t="s",_.v=En(T["string-value"]||""),r.dense?(b[P]||(b[P]=[]),b[P][L]=_):b[_r({r:P,c:L})]=_),L+=J-1;else if(y[1]!=="/"){++L,k="",D=0,M=[],J=1;var he=ne?P+ne-1:P;if(L>C.e.c&&(C.e.c=L),L<C.s.c&&(C.s.c=L),P<C.s.r&&(C.s.r=P),he>C.e.r&&(C.e.r=he),T=Br(y[0],!1),ie=[],j={},_={t:T.数据类型||T["value-type"],v:null},r.cellFormula)if(T.formula&&(T.formula=En(T.formula)),T["number-matrix-columns-spanned"]&&T["number-matrix-rows-spanned"]&&(F=parseInt(T["number-matrix-rows-spanned"],10)||0,Q=parseInt(T["number-matrix-columns-spanned"],10)||0,R={s:{r:P,c:L},e:{r:P+F-1,c:L+Q-1}},_.F=Mr(R),re.push([R,_.F])),T.formula)_.f=vD(T.formula);else for(be=0;be<re.length;++be)P>=re[be][0].s.r&&P<=re[be][0].e.r&&L>=re[be][0].s.c&&L<=re[be][0].e.c&&(_.F=re[be][1]);switch((T["number-columns-spanned"]||T["number-rows-spanned"])&&(F=parseInt(T["number-rows-spanned"],10)||0,Q=parseInt(T["number-columns-spanned"],10)||0,R={s:{r:P,c:L},e:{r:P+F-1,c:L+Q-1}},O.push(R)),T["number-columns-repeated"]&&(J=parseInt(T["number-columns-repeated"],10)),_.t){case"boolean":_.t="b",_.v=ds(T["boolean-value"]);break;case"float":_.t="n",_.v=parseFloat(T.value);break;case"percentage":_.t="n",_.v=parseFloat(T.value);break;case"currency":_.t="n",_.v=parseFloat(T.value);break;case"date":_.t="d",_.v=hs(T["date-value"]),r.cellDates||(_.t="n",_.v=ja(_.v)),_.z="m/d/yy";break;case"time":_.t="n",_.v=Lue(T["time-value"])/86400,r.cellDates&&(_.t="d",_.v=ob(_.v)),_.z="HH:MM:SS";break;case"number":_.t="n",_.v=parseFloat(T.数据数值);break;default:if(_.t==="string"||_.t==="text"||!_.t)_.t="s",T["string-value"]!=null&&(k=En(T["string-value"]),M=[]);else throw new Error("Unsupported value type "+_.t)}}else{if(te=!1,_.t==="s"&&(_.v=k||"",M.length&&(_.R=M),te=D==0),q.Target&&(_.l=q),ie.length>0&&(_.c=ie,ie=[]),k&&r.cellText!==!1&&(_.w=k),te&&(_.t="z",delete _.v),(!te||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=P))for(var fe=0;fe<ne;++fe){if(J=parseInt(T["number-columns-repeated"]||"1",10),r.dense)for(b[P+fe]||(b[P+fe]=[]),b[P+fe][L]=fe==0?_:ms(_);--J>0;)b[P+fe][L+J]=ms(_);else for(b[_r({r:P+fe,c:L})]=_;--J>0;)b[_r({r:P+fe,c:L+J})]=ms(_);C.e.c<=L&&(C.e.c=L)}J=parseInt(T["number-columns-repeated"]||"1",10),L+=J-1,J=0,_={},k="",M=[]}q={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!0]);break;case"annotation":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a;j.t=k,M.length&&(j.R=M),j.a=Y,ie.push(j)}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);Y="",ee=0,k="",D=0,M=[];break;case"creator":y[1]==="/"?Y=n.slice(ee,y.index):ee=y.index+y[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(y[1]==="/"){if((a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&s.push([y[3],!1]);k="",D=0,M=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(y[1]==="/"){if(B[o.name]=l,(a=s.pop())[0]!==y[3])throw"Bad state: "+a}else y[0].charAt(y[0].length-2)!=="/"&&(l="",o=Br(y[0],!1),s.push([y[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Br(y[0],!1),l+=ED[y[3]][i.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":i=Br(y[0],!1),l+=ED[y[3]][i.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(y[0].slice(-2)==="/>")break;if(y[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":l+=n.slice(u,y.index);break}else u=y.index+y[0].length;break;case"named-range":i=Br(y[0],!1),W=ME(i["cell-range-address"]);var ge={Name:i.name,Ref:W[0]+"!"+W[1]};ce&&(ge.Sheet=g.length),G.Names.push(ge);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(y[1]==="/"&&(!T||!T["string-value"])){var de=lve(n.slice(D,y.index));k=(k.length>0?k+`
`:"")+de[0]}else Br(y[0],!1),D=y.index+y[0].length;break;case"s":break;case"database-range":if(y[1]==="/")break;try{W=ME(Br(y[0])["target-range-address"]),m[W[0]]["!autofilter"]={ref:W[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(y[1]!=="/"){if(q=Br(y[0],!1),!q.href)break;q.Target=En(q.href),delete q.href,q.Target.charAt(0)=="#"&&q.Target.indexOf(".")>-1?(W=ME(q.Target.slice(1)),q.Target="#"+W[0]+"!"+W[1]):q.Target.match(/^\.\.[\\\/]/)&&(q.Target=q.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(y[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(y)}}var oe={Sheets:m,SheetNames:g,Workbook:G};return r.bookSheets&&delete oe.Sheets,oe}function _D(t,e){e=e||{},Ml(t,"META-INF/manifest.xml")&&LAe(ba(t,"META-INF/manifest.xml"),e);var r=nl(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=YO(rs(r),e);return Ml(t,"meta.xml")&&(n.Props=Oj(ba(t,"meta.xml"))),n}function SD(t,e){return YO(t,e)}var cve=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Nx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return Aa+e}}(),TD=function(){var t=function(a){return Kn(a).replace(/  +/g,function(i){return'<text:s text:c="'+i.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(a,i,o){var l=[];l.push('      <table:table table:name="'+Kn(i.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,h=Do(a["!ref"]||"A1"),m=a["!merges"]||[],g=0,b=Array.isArray(a);if(a["!cols"])for(d=0;d<=h.e.c;++d)l.push("        <table:table-column"+(a["!cols"][d]?' table:style-name="co'+a["!cols"][d].ods+'"':"")+`></table:table-column>
`);var y="",_=a["!rows"]||[];for(u=0;u<h.s.r;++u)y=_[u]?' table:style-name="ro'+_[u].ods+'"':"",l.push("        <table:table-row"+y+`></table:table-row>
`);for(;u<=h.e.r;++u){for(y=_[u]?' table:style-name="ro'+_[u].ods+'"':"",l.push("        <table:table-row"+y+`>
`),d=0;d<h.s.c;++d)l.push(e);for(;d<=h.e.c;++d){var T=!1,k={},D="";for(g=0;g!=m.length;++g)if(!(m[g].s.c>d)&&!(m[g].s.r>u)&&!(m[g].e.c<d)&&!(m[g].e.r<u)){(m[g].s.c!=d||m[g].s.r!=u)&&(T=!0),k["table:number-columns-spanned"]=m[g].e.c-m[g].s.c+1,k["table:number-rows-spanned"]=m[g].e.r-m[g].s.r+1;break}if(T){l.push(r);continue}var M=_r({r:u,c:d}),P=b?(a[u]||[])[d]:a[M];if(P&&P.f&&(k["table:formula"]=Kn(Bpe(P.f)),P.F&&P.F.slice(0,M.length)==M)){var L=Do(P.F);k["table:number-matrix-columns-spanned"]=L.e.c-L.s.c+1,k["table:number-matrix-rows-spanned"]=L.e.r-L.s.r+1}if(!P){l.push(e);continue}switch(P.t){case"b":D=P.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=P.v?"true":"false";break;case"n":D=P.w||String(P.v||0),k["office:value-type"]="float",k["office:value"]=P.v||0;break;case"s":case"str":D=P.v==null?"":P.v,k["office:value-type"]="string";break;case"d":D=P.w||hs(P.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=hs(P.v).toISOString(),k["table:style-name"]="ce1";break;default:l.push(e);continue}var C=t(D);if(P.l&&P.l.Target){var E=P.l.Target;E=E.charAt(0)=="#"?"#"+kpe(E.slice(1)):E,E.charAt(0)!="#"&&!E.match(/^\w+:/)&&(E="../"+E),C=Ut("text:a",C,{"xlink:href":E.replace(/&/g,"&amp;")})}l.push("          "+Ut("table:table-cell",Ut("text:p",C,{}),k)+`
`)}l.push(`        </table:table-row>
`)}return l.push(`      </table:table>
`),l.join("")},s=function(a,i){a.push(` <office:automatic-styles>
`),a.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),a.push(`   <number:month number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:day number:style="long"/>
`),a.push(`   <number:text>/</number:text>
`),a.push(`   <number:year/>
`),a.push(`  </number:date-style>
`);var o=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var h=u["!cols"][d];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Ef(h),h.ods=o;var m=u["!cols"][d].wpx+"px";a.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),a.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),a.push(`  </style:style>
`),++o}}});var l=0;i.SheetNames.map(function(u){return i.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=l;var h=u["!rows"][d].hpx+"px";a.push('  <style:style style:name="ro'+l+`" style:family="table-row">
`),a.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),a.push(`  </style:style>
`),++l}}}),a.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),a.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),a.push(`  </style:style>
`),a.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),a.push(` </office:automatic-styles>
`)};return function(i,o){var l=[Aa],u=Nx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Nx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(l.push("<office:document"+u+d+`>
`),l.push(jj().replace(/office:document-meta/g,"office:meta"))):l.push("<office:document-content"+u+`>
`),s(l,i),l.push(`  <office:body>
`),l.push(`    <office:spreadsheet>
`);for(var h=0;h!=i.SheetNames.length;++h)l.push(n(i.Sheets[i.SheetNames[h]],i,h));return l.push(`    </office:spreadsheet>
`),l.push(`  </office:body>
`),o.bookType=="fods"?l.push("</office:document>"):l.push("</office:document-content>"),l.join("")}}();function JO(t,e){if(e.bookType=="fods")return TD(t,e);var r=Z4(),n="",s=[],a=[];return n="mimetype",zr(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",zr(r,n,TD(t,e)),s.push([n,"text/xml"]),a.push([n,"ContentFile"]),n="styles.xml",zr(r,n,cve(t,e)),s.push([n,"text/xml"]),a.push([n,"StylesFile"]),n="meta.xml",zr(r,n,Aa+jj()),s.push([n,"text/xml"]),a.push([n,"MetadataFile"]),n="manifest.rdf",zr(r,n,PAe(a)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",zr(r,n,UAe(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function jh(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function PS(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):rs(If(t))}function uve(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):rl(_u(t))}function Ave(t,e){e:for(var r=0;r<=t.length-e.length;++r){for(var n=0;n<e.length;++n)if(t[r+n]!=e[n])continue e;return!0}return!1}function Sf(t){var e=t.reduce(function(s,a){return s+a.length},0),r=new Uint8Array(e),n=0;return t.forEach(function(s){r.set(s,n),n+=s.length}),r}function ND(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function dve(t,e){for(var r=(t[e+15]&127)<<7|t[e+14]>>1,n=t[e+14]&1,s=e+13;s>=e;--s)n=n*256+t[s];return(t[e+15]&128?-n:n)*Math.pow(10,r-6176)}function fve(t,e,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);t[e+15]|=n>>7,t[e+14]|=(n&127)<<1;for(var a=0;s>=1;++a,s/=256)t[e+a]=s&255;t[e+15]|=r>=0?0:128}function Ux(t,e){var r=e?e[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return e&&(e[0]=r),n}function zn(t){var e=new Uint8Array(7);e[0]=t&127;var r=1;e:if(t>127){if(e[r-1]|=128,e[r]=t>>7&127,++r,t<=16383||(e[r-1]|=128,e[r]=t>>14&127,++r,t<=2097151)||(e[r-1]|=128,e[r]=t>>21&127,++r,t<=268435455)||(e[r-1]|=128,e[r]=t/256>>>21&127,++r,t<=34359738367)||(e[r-1]|=128,e[r]=t/65536>>>21&127,++r,t<=4398046511103))break e;e[r-1]|=128,e[r]=t/16777216>>>21&127,++r}return e.slice(0,r)}function Ks(t){var e=0,r=t[e]&127;e:if(t[e++]>=128){if(r|=(t[e]&127)<<7,t[e++]<128||(r|=(t[e]&127)<<14,t[e++]<128)||(r|=(t[e]&127)<<21,t[e++]<128))break e;r|=(t[e]&127)<<28}return r}function Fn(t){for(var e=[],r=[0];r[0]<t.length;){var n=r[0],s=Ux(t,r),a=s&7;s=Math.floor(s/8);var i=0,o;if(s==0)break;switch(a){case 0:{for(var l=r[0];t[r[0]++]>=128;);o=t.slice(l,r[0])}break;case 5:i=4,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 1:i=8,o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 2:i=Ux(t,r),o=t.slice(r[0],r[0]+i),r[0]+=i;break;case 3:case 4:default:throw new Error("PB Type ".concat(a," for Field ").concat(s," at offset ").concat(n))}var u={data:o,type:a};e[s]==null?e[s]=[u]:e[s].push(u)}return e}function li(t){var e=[];return t.forEach(function(r,n){r.forEach(function(s){s.data&&(e.push(zn(n*8+s.type)),s.type==2&&e.push(zn(s.data.length)),e.push(s.data))})}),Sf(e)}function ST(t,e){return(t==null?void 0:t.map(function(r){return e(r.data)}))||[]}function Ll(t){for(var e,r=[],n=[0];n[0]<t.length;){var s=Ux(t,n),a=Fn(t.slice(n[0],n[0]+s));n[0]+=s;var i={id:Ks(a[1][0].data),messages:[]};a[2].forEach(function(o){var l=Fn(o.data),u=Ks(l[3][0].data);i.messages.push({meta:l,data:t.slice(n[0],n[0]+u)}),n[0]+=u}),(e=a[3])!=null&&e[0]&&(i.merge=Ks(a[3][0].data)>>>0>0),r.push(i)}return r}function U0(t){var e=[];return t.forEach(function(r){var n=[];n[1]=[{data:zn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:zn(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(i){s.push(i.data),i.meta[3]=[{type:0,data:zn(i.data.length)}],n[2].push({data:li(i.meta),type:2})});var a=li(n);e.push(zn(a.length)),e.push(a),s.forEach(function(i){return e.push(i)})}),Sf(e)}function hve(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=Ux(e,r),s=[];r[0]<e.length;){var a=e[r[0]]&3;if(a==0){var i=e[r[0]++]>>2;if(i<60)++i;else{var o=i-59;i=e[r[0]],o>1&&(i|=e[r[0]+1]<<8),o>2&&(i|=e[r[0]+2]<<16),o>3&&(i|=e[r[0]+3]<<24),i>>>=0,i++,r[0]+=o}s.push(e.slice(r[0],r[0]+i)),r[0]+=i;continue}else{var l=0,u=0;if(a==1?(u=(e[r[0]]>>2&7)+4,l=(e[r[0]++]&224)<<3,l|=e[r[0]++]):(u=(e[r[0]++]>>2)+1,a==2?(l=e[r[0]]|e[r[0]+1]<<8,r[0]+=2):(l=(e[r[0]]|e[r[0]+1]<<8|e[r[0]+2]<<16|e[r[0]+3]<<24)>>>0,r[0]+=4)),s=[Sf(s)],l==0)throw new Error("Invalid offset 0");if(l>s[0].length)throw new Error("Invalid offset beyond length");if(u>=l)for(s.push(s[0].slice(-l)),u-=l;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-l,-l+u))}}var d=Sf(s);if(d.length!=n)throw new Error("Unexpected length: ".concat(d.length," != ").concat(n));return d}function Ul(t){for(var e=[],r=0;r<t.length;){var n=t[r++],s=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,e.push(hve(n,t.slice(r,r+s))),r+=s}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Sf(e)}function M0(t){for(var e=[],r=0;r<t.length;){var n=Math.min(t.length-r,268435455),s=new Uint8Array(4);e.push(s);var a=zn(n),i=a.length;e.push(a),n<=60?(i++,e.push(new Uint8Array([n-1<<2]))):n<=256?(i+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(i+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(i+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(i+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(t.slice(r,r+n)),i+=n,s[0]=0,s[1]=i&255,s[2]=i>>8&255,s[3]=i>>16&255,r+=n}return Sf(e)}function mve(t,e,r,n){var s=jh(t),a=s.getUint32(4,!0),i=(n>1?12:8)+ND(a&(n>1?3470:398))*4,o=-1,l=-1,u=NaN,d=new Date(2001,0,1);a&512&&(o=s.getUint32(i,!0),i+=4),i+=ND(a&(n>1?12288:4096))*4,a&16&&(l=s.getUint32(i,!0),i+=4),a&32&&(u=s.getFloat64(i,!0),i+=8),a&64&&(d.setTime(d.getTime()+s.getFloat64(i,!0)*1e3),i+=8);var h;switch(t[2]){case 0:break;case 2:h={t:"n",v:u};break;case 3:h={t:"s",v:e[l]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else if(l>-1)h={t:"s",v:e[l]};else if(!isNaN(u))h={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return h}function pve(t,e,r){var n=jh(t),s=n.getUint32(8,!0),a=12,i=-1,o=-1,l=NaN,u=NaN,d=new Date(2001,0,1);s&1&&(l=dve(t,a),a+=16),s&2&&(u=n.getFloat64(a,!0),a+=8),s&4&&(d.setTime(d.getTime()+n.getFloat64(a,!0)*1e3),a+=8),s&8&&(o=n.getUint32(a,!0),a+=4),s&16&&(i=n.getUint32(a,!0),a+=4);var h;switch(t[1]){case 0:break;case 2:h={t:"n",v:l};break;case 3:h={t:"s",v:e[o]};break;case 5:h={t:"d",v:d};break;case 6:h={t:"b",v:u>0};break;case 7:h={t:"n",v:u/86400};break;case 8:h={t:"e",v:0};break;case 9:if(i>-1)h={t:"s",v:r[i]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)));break;case 10:h={t:"n",v:l};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(s&31," : ").concat(t.slice(0,4)))}return h}function jE(t,e){var r=new Uint8Array(32),n=jh(r),s=12,a=0;switch(r[0]=5,t.t){case"n":r[1]=2,fve(r,s,t.v),a|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,t.v?1:0,!0),a|=2,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[1]=3,n.setUint32(s,e.indexOf(t.v),!0),a|=8,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(8,a,!0),r.slice(0,s)}function OE(t,e){var r=new Uint8Array(32),n=jh(r),s=12,a=0;switch(r[0]=3,t.t){case"n":r[2]=2,n.setFloat64(s,t.v,!0),a|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,t.v?1:0,!0),a|=32,s+=8;break;case"s":if(e.indexOf(t.v)==-1)throw new Error("Value ".concat(t.v," missing from SST!"));r[2]=3,n.setUint32(s,e.indexOf(t.v),!0),a|=16,s+=4;break;default:throw"unsupported cell type "+t.t}return n.setUint32(4,a,!0),r.slice(0,s)}function gve(t,e,r){switch(t[0]){case 0:case 1:case 2:case 3:return mve(t,e,r,t[0]);case 5:return pve(t,e,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Mi(t){var e=Fn(t);return Ux(e[1][0].data)}function BD(t,e){var r=Fn(e.data),n=Ks(r[1][0].data),s=r[3],a=[];return(s||[]).forEach(function(i){var o=Fn(i.data),l=Ks(o[1][0].data)>>>0;switch(n){case 1:a[l]=PS(o[3][0].data);break;case 8:{var u=t[Mi(o[9][0].data)][0],d=Fn(u.data),h=t[Mi(d[1][0].data)][0],m=Ks(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var g=Fn(h.data);a[l]=g[3].map(function(b){return PS(b.data)}).join("")}break}}),a}function xve(t,e){var r,n,s,a,i,o,l,u,d,h,m,g,b,y,_=Fn(t),T=Ks(_[1][0].data)>>>0,k=Ks(_[2][0].data)>>>0,D=((n=(r=_[8])==null?void 0:r[0])==null?void 0:n.data)&&Ks(_[8][0].data)>0||!1,M,P;if((a=(s=_[7])==null?void 0:s[0])!=null&&a.data&&e!=0)M=(o=(i=_[7])==null?void 0:i[0])==null?void 0:o.data,P=(u=(l=_[6])==null?void 0:l[0])==null?void 0:u.data;else if((h=(d=_[4])==null?void 0:d[0])!=null&&h.data&&e!=1)M=(g=(m=_[4])==null?void 0:m[0])==null?void 0:g.data,P=(y=(b=_[3])==null?void 0:b[0])==null?void 0:y.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var L=D?4:1,C=jh(M),E=[],B=0;B<M.length/2;++B){var O=C.getUint16(B*2,!0);O<65535&&E.push([B,O])}if(E.length!=k)throw"Expected ".concat(k," cells, found ").concat(E.length);var R=[];for(B=0;B<E.length-1;++B)R[E[B][0]]=P.subarray(E[B][1]*L,E[B+1][1]*L);return E.length>=1&&(R[E[E.length-1][0]]=P.subarray(E[E.length-1][1]*L)),{R:T,cells:R}}function vve(t,e){var r,n=Fn(e.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?Ks(n[7][0].data)>>>0>0?1:0:-1,a=ST(n[5],function(i){return xve(i,s)});return{nrows:Ks(n[4][0].data)>>>0,data:a.reduce(function(i,o){return i[o.R]||(i[o.R]=[]),o.cells.forEach(function(l,u){if(i[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));i[o.R][u]=l}),i},[])}}function yve(t,e,r){var n,s=Fn(e.data),a={s:{r:0,c:0},e:{r:0,c:0}};if(a.e.r=(Ks(s[6][0].data)>>>0)-1,a.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(a.e.c=(Ks(s[7][0].data)>>>0)-1,a.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=Mr(a);var i=Fn(s[4][0].data),o=BD(t,t[Mi(i[4][0].data)][0]),l=(n=i[17])!=null&&n[0]?BD(t,t[Mi(i[17][0].data)][0]):[],u=Fn(i[3][0].data),d=0;u[1].forEach(function(h){var m=Fn(h.data),g=t[Mi(m[2][0].data)][0],b=Ks(g.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var y=vve(t,g);y.data.forEach(function(_,T){_.forEach(function(k,D){var M=_r({r:d+T,c:D}),P=gve(k,o,l);P&&(r[M]=P)})}),d+=y.nrows})}function wve(t,e){var r=Fn(e.data),n={"!ref":"A1"},s=t[Mi(r[2][0].data)],a=Ks(s[0].meta[1][0].data);if(a!=6001)throw new Error("6000 unexpected reference to ".concat(a));return yve(t,s[0],n),n}function bve(t,e){var r,n=Fn(e.data),s={name:(r=n[1])!=null&&r[0]?PS(n[1][0].data):"",sheets:[]},a=ST(n[2],Mi);return a.forEach(function(i){t[i].forEach(function(o){var l=Ks(o.meta[1][0].data);l==6e3&&s.sheets.push(wve(t,o))})}),s}function Cve(t,e){var r=FT(),n=Fn(e.data),s=ST(n[1],Mi);if(s.forEach(function(a){t[a].forEach(function(i){var o=Ks(i.meta[1][0].data);if(o==2){var l=bve(t,i);l.sheets.forEach(function(u,d){DT(r,u,d==0?l.name:l.name+"_"+d,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function QE(t){var e,r,n,s,a={},i=[];if(t.FullPaths.forEach(function(l){if(l.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(l){if(l.name.match(/\.iwa$/)){var u;try{u=Ul(l.content)}catch(h){return console.log("?? "+l.content.length+" "+(h.message||h))}var d;try{d=Ll(u)}catch(h){return console.log("## "+(h.message||h))}d.forEach(function(h){a[h.id]=h.messages,i.push(h.id)})}}),!i.length)throw new Error("File has no messages");var o=((s=(n=(r=(e=a==null?void 0:a[1])==null?void 0:e[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&Ks(a[1][0].meta[1][0].data)==1&&a[1][0];if(o||i.forEach(function(l){a[l].forEach(function(u){var d=Ks(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Cve(a,o)}function Eve(t,e,r){var n,s,a,i;if(!((n=t[6])!=null&&n[0])||!((s=t[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var o=((i=(a=t[8])==null?void 0:a[0])==null?void 0:i.data)&&Ks(t[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var l=0,u=jh(t[7][0].data),d=0,h=[],m=jh(t[4][0].data),g=0,b=[],y=0;y<e.length;++y){if(e[y]==null){u.setUint16(y*2,65535,!0),m.setUint16(y*2,65535);continue}u.setUint16(y*2,d,!0),m.setUint16(y*2,g,!0);var _,T;switch(typeof e[y]){case"string":_=jE({t:"s",v:e[y]},r),T=OE({t:"s",v:e[y]},r);break;case"number":_=jE({t:"n",v:e[y]},r),T=OE({t:"n",v:e[y]},r);break;case"boolean":_=jE({t:"b",v:e[y]},r),T=OE({t:"b",v:e[y]},r);break;default:throw new Error("Unsupported value "+e[y])}h.push(_),d+=_.length,b.push(T),g+=T.length,++l}for(t[2][0].data=zn(l);y<t[7][0].data.length/2;++y)u.setUint16(y*2,65535,!0),m.setUint16(y*2,65535,!0);return t[6][0].data=Sf(h),t[3][0].data=Sf(b),l}function _ve(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=t.Sheets[t.SheetNames[0]];t.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Do(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(Mr(n)));var a=q2(r,{range:n,header:1}),i=["~Sh33tJ5~"];a.forEach(function(Y){return Y.forEach(function(ee){typeof ee=="string"&&i.push(ee)})});var o={},l=[],u=Ar.read(e.numbers,{type:"base64"});u.FileIndex.map(function(Y,ee){return[Y,u.FullPaths[ee]]}).forEach(function(Y){var ee=Y[0],te=Y[1];if(ee.type==2&&ee.name.match(/\.iwa/)){var ce=ee.content,be=Ul(ce),he=Ll(be);he.forEach(function(fe){l.push(fe.id),o[fe.id]={deps:[],location:te,type:Ks(fe.messages[0].meta[1][0].data)}})}}),l.sort(function(Y,ee){return Y-ee});var d=l.filter(function(Y){return Y>1}).map(function(Y){return[Y,zn(Y)]});u.FileIndex.map(function(Y,ee){return[Y,u.FullPaths[ee]]}).forEach(function(Y){var ee=Y[0];if(Y[1],!!ee.name.match(/\.iwa/)){var te=Ll(Ul(ee.content));te.forEach(function(ce){ce.messages.forEach(function(be){d.forEach(function(he){ce.messages.some(function(fe){return Ks(fe.meta[1][0].data)!=11006&&Ave(fe.data,he[1])})&&o[he[0]].deps.push(ce.id)})})})}});for(var h=Ar.find(u,o[1].location),m=Ll(Ul(h.content)),g,b=0;b<m.length;++b){var y=m[b];y.id==1&&(g=y)}var _=Mi(Fn(g.messages[0].data)[1][0].data);for(h=Ar.find(u,o[_].location),m=Ll(Ul(h.content)),b=0;b<m.length;++b)y=m[b],y.id==_&&(g=y);for(_=Mi(Fn(g.messages[0].data)[2][0].data),h=Ar.find(u,o[_].location),m=Ll(Ul(h.content)),b=0;b<m.length;++b)y=m[b],y.id==_&&(g=y);for(_=Mi(Fn(g.messages[0].data)[2][0].data),h=Ar.find(u,o[_].location),m=Ll(Ul(h.content)),b=0;b<m.length;++b)y=m[b],y.id==_&&(g=y);var T=Fn(g.messages[0].data);{T[6][0].data=zn(n.e.r+1),T[7][0].data=zn(n.e.c+1);var k=Mi(T[46][0].data),D=Ar.find(u,o[k].location),M=Ll(Ul(D.content));{for(var P=0;P<M.length&&M[P].id!=k;++P);if(M[P].id!=k)throw"Bad ColumnRowUIDMapArchive";var L=Fn(M[P].messages[0].data);L[1]=[],L[2]=[],L[3]=[];for(var C=0;C<=n.e.c;++C){var E=[];E[1]=E[2]=[{type:0,data:zn(C+420690)}],L[1].push({type:2,data:li(E)}),L[2].push({type:0,data:zn(C)}),L[3].push({type:0,data:zn(C)})}L[4]=[],L[5]=[],L[6]=[];for(var B=0;B<=n.e.r;++B)E=[],E[1]=E[2]=[{type:0,data:zn(B+726270)}],L[4].push({type:2,data:li(E)}),L[5].push({type:0,data:zn(B)}),L[6].push({type:0,data:zn(B)});M[P].messages[0].data=li(L)}D.content=M0(U0(M)),D.size=D.content.length,delete T[46];var O=Fn(T[4][0].data);{O[7][0].data=zn(n.e.r+1);var R=Fn(O[1][0].data),F=Mi(R[2][0].data);D=Ar.find(u,o[F].location),M=Ll(Ul(D.content));{if(M[0].id!=F)throw"Bad HeaderStorageBucket";var Q=Fn(M[0].messages[0].data);for(B=0;B<a.length;++B){var H=Fn(Q[2][0].data);H[1][0].data=zn(B),H[4][0].data=zn(a[B].length),Q[2][B]={type:Q[2][0].type,data:li(H)}}M[0].messages[0].data=li(Q)}D.content=M0(U0(M)),D.size=D.content.length;var ne=Mi(O[2][0].data);D=Ar.find(u,o[ne].location),M=Ll(Ul(D.content));{if(M[0].id!=ne)throw"Bad HeaderStorageBucket";for(Q=Fn(M[0].messages[0].data),C=0;C<=n.e.c;++C)H=Fn(Q[2][0].data),H[1][0].data=zn(C),H[4][0].data=zn(n.e.r+1),Q[2][C]={type:Q[2][0].type,data:li(H)};M[0].messages[0].data=li(Q)}D.content=M0(U0(M)),D.size=D.content.length;var J=Mi(O[4][0].data);(function(){for(var Y=Ar.find(u,o[J].location),ee=Ll(Ul(Y.content)),te,ce=0;ce<ee.length;++ce){var be=ee[ce];be.id==J&&(te=be)}var he=Fn(te.messages[0].data);{he[3]=[];var fe=[];i.forEach(function(oe,Ue){fe[1]=[{type:0,data:zn(Ue)}],fe[2]=[{type:0,data:zn(1)}],fe[3]=[{type:2,data:uve(oe)}],he[3].push({type:2,data:li(fe)})})}te.messages[0].data=li(he);var ge=U0(ee),de=M0(ge);Y.content=de,Y.size=Y.content.length})();var re=Fn(O[3][0].data);{var G=re[1][0];delete re[2];var q=Fn(G.data);{var W=Mi(q[2][0].data);(function(){for(var Y=Ar.find(u,o[W].location),ee=Ll(Ul(Y.content)),te,ce=0;ce<ee.length;++ce){var be=ee[ce];be.id==W&&(te=be)}var he=Fn(te.messages[0].data);{delete he[6],delete re[7];var fe=new Uint8Array(he[5][0].data);he[5]=[];for(var ge=0,de=0;de<=n.e.r;++de){var oe=Fn(fe);ge+=Eve(oe,a[de],i),oe[1][0].data=zn(de),he[5].push({data:li(oe),type:2})}he[1]=[{type:0,data:zn(n.e.c+1)}],he[2]=[{type:0,data:zn(n.e.r+1)}],he[3]=[{type:0,data:zn(ge)}],he[4]=[{type:0,data:zn(n.e.r+1)}]}te.messages[0].data=li(he);var Ue=U0(ee),tt=M0(Ue);Y.content=tt,Y.size=Y.content.length})()}G.data=li(q)}O[3][0].data=li(re)}T[4][0].data=li(O)}g.messages[0].data=li(T);var ie=U0(m),j=M0(ie);return h.content=j,h.size=h.content.length,u}function XO(t){return function(r){for(var n=0;n!=t.length;++n){var s=t[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function TT(t){XO([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function NT(t){XO([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function Sve(t){return sn.WS.indexOf(t)>-1?"sheet":t==sn.CS?"chart":t==sn.DS?"dialog":t==sn.MS?"macro":t&&t.length?t:"sheet"}function Tve(t,e){if(!t)return 0;try{t=e.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,Sve(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function Nve(t,e,r,n,s,a,i,o,l,u,d,h){try{a[n]=Xg(nl(t,r,!0),e);var m=ba(t,e),g;switch(o){case"sheet":g=Yxe(m,e,s,l,a[n],u,d,h);break;case"chart":if(g=Jxe(m,e,s,l,a[n],u,d,h),!g||!g["!drawel"])break;var b=Tg(g["!drawel"].Target,e),y=kx(b),_=M0e(nl(t,b,!0),Xg(nl(t,y,!0),b)),T=Tg(_,b),k=kx(T);g=Exe(nl(t,T,!0),T,l,Xg(nl(t,k,!0),T),u,g);break;case"macro":g=Xxe(m,e,s,l,a[n],u,d,h);break;case"dialog":g=Zxe(m,e,s,l,a[n],u,d,h);break;default:throw new Error("Unrecognized sheet type "+o)}i[n]=g;var D=[];a&&a[n]&&$s(a[n]).forEach(function(M){var P="";if(a[n][M].Type==sn.CMNT){P=Tg(a[n][M].Target,e);var L=n1e(ba(t,P,!0),P,l);if(!L||!L.length)return;hD(g,L,!1)}a[n][M].Type==sn.TCMNT&&(P=Tg(a[n][M].Target,e),D=D.concat(j0e(ba(t,P,!0),l)))}),D&&D.length&&hD(g,D,!0,l.people||[])}catch(M){if(l.WTF)throw M}}function Dl(t){return t.charAt(0)=="/"?t.slice(1):t}function Bve(t,e){if(dp(),e=e||{},TT(e),Ml(t,"META-INF/manifest.xml")||Ml(t,"objectdata.xml"))return _D(t,e);if(Ml(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof QE<"u"){if(t.FileIndex)return QE(t);var r=Ar.utils.cfb_new();return L6(t).forEach(function(H){zr(r,H,Oue(t,H))}),QE(r)}throw new Error("Unsupported NUMBERS file")}if(!Ml(t,"[Content_Types].xml"))throw Ml(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ml(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=L6(t),s=DAe(nl(t,"[Content_Types].xml")),a=!1,i,o;if(s.workbooks.length===0&&(o="xl/workbook.xml",ba(t,o,!0)&&s.workbooks.push(o)),s.workbooks.length===0){if(o="xl/workbook.bin",!ba(t,o,!0))throw new Error("Could not find workbook");s.workbooks.push(o),a=!0}s.workbooks[0].slice(-3)=="bin"&&(a=!0);var l={},u={};if(!e.bookSheets&&!e.bookProps){if(Zg=[],s.sst)try{Zg=r1e(ba(t,Dl(s.sst)),s.sst,e)}catch(H){if(e.WTF)throw H}e.cellStyles&&s.themes.length&&(l=t1e(nl(t,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],e)),s.style&&(u=e1e(ba(t,Dl(s.style)),s.style,l,e))}s.links.map(function(H){try{var ne=Xg(nl(t,kx(Dl(H))),H);return a1e(ba(t,Dl(H)),ne,H,e)}catch{}});var d=Wxe(ba(t,Dl(s.workbooks[0])),s.workbooks[0],e),h={},m="";s.coreprops.length&&(m=ba(t,Dl(s.coreprops[0]),!0),m&&(h=Oj(m)),s.extprops.length!==0&&(m=ba(t,Dl(s.extprops[0]),!0),m&&OAe(m,h,e)));var g={};(!e.bookSheets||e.bookProps)&&s.custprops.length!==0&&(m=nl(t,Dl(s.custprops[0]),!0),m&&(g=HAe(m,e)));var b={};if((e.bookSheets||e.bookProps)&&(d.Sheets?i=d.Sheets.map(function(ne){return ne.name}):h.Worksheets&&h.SheetNames.length>0&&(i=h.SheetNames),e.bookProps&&(b.Props=h,b.Custprops=g),e.bookSheets&&typeof i<"u"&&(b.SheetNames=i),e.bookSheets?b.SheetNames:e.bookProps))return b;i={};var y={};e.bookDeps&&s.calcchain&&(y=s1e(ba(t,Dl(s.calcchain)),s.calcchain));var _=0,T={},k,D;{var M=d.Sheets;h.Worksheets=M.length,h.SheetNames=[];for(var P=0;P!=M.length;++P)h.SheetNames[P]=M[P].name}var L=a?"bin":"xml",C=s.workbooks[0].lastIndexOf("/"),E=(s.workbooks[0].slice(0,C+1)+"_rels/"+s.workbooks[0].slice(C+1)+".rels").replace(/^\//,"");Ml(t,E)||(E="xl/_rels/workbook."+L+".rels");var B=Xg(nl(t,E,!0),E.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(e.xlmeta=i1e(ba(t,Dl(s.metadata[0])),s.metadata[0],e)),(s.people||[]).length>=1&&(e.people=Q0e(ba(t,Dl(s.people[0])),e)),B&&(B=Tve(B,d.Sheets));var O=ba(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(_=0;_!=h.Worksheets;++_){var R="sheet";if(B&&B[_]?(k="xl/"+B[_][1].replace(/[\/]?xl\//,""),Ml(t,k)||(k=B[_][1]),Ml(t,k)||(k=E.replace(/_rels\/.*$/,"")+B[_][1]),R=B[_][2]):(k="xl/worksheets/sheet"+(_+1-O)+"."+L,k=k.replace(/sheet0\./,"sheet.")),D=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(_!=e.sheets)continue e;break;case"string":if(h.SheetNames[_].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var F=!1,Q=0;Q!=e.sheets.length;++Q)typeof e.sheets[Q]=="number"&&e.sheets[Q]==_&&(F=1),typeof e.sheets[Q]=="string"&&e.sheets[Q].toLowerCase()==h.SheetNames[_].toLowerCase()&&(F=1);if(!F)continue e}}Nve(t,k,D,h.SheetNames[_],_,T,i,R,e,d,l,u)}return b={Directory:s,Workbook:d,Props:h,Custprops:g,Deps:y,Sheets:i,SheetNames:h.SheetNames,Strings:Zg,Styles:u,Themes:l,SSF:ms(wr)},e&&e.bookFiles&&(t.files?(b.keys=n,b.files=t.files):(b.keys=[],b.files={},t.FullPaths.forEach(function(H,ne){H=H.replace(/^Root Entry[\/]/,""),b.keys.push(H),b.files[H]=t.FileIndex[ne]}))),e&&e.bookVBA&&(s.vba.length>0?b.vbaraw=ba(t,Dl(s.vba[0]),!0):s.defaults&&s.defaults.bin===W0e&&(b.vbaraw=ba(t,"xl/vbaProject.bin",!0))),b}function kve(t,e){var r=e||{},n="Workbook",s=Ar.find(t,n);try{if(n="/!DataSpaces/Version",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(ihe(s.content),n="/!DataSpaces/DataSpaceMap",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var a=lhe(s.content);if(a.length!==1||a[0].comps.length!==1||a[0].comps[0].t!==0||a[0].name!=="StrongEncryptionDataSpace"||a[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=che(s.content);if(i.length!=1||i[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);Ahe(s.content)}catch{}if(n="/EncryptionInfo",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=dhe(s.content);if(n="/EncryptedPackage",s=Ar.find(t,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],s.content,r.password||"",r);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Ive(t,e){return e.bookType=="ods"?JO(t,e):e.bookType=="numbers"?_ve(t,e):e.bookType=="xlsb"?Fve(t,e):Dve(t,e)}function Fve(t,e){um=1024,t&&!t.SSF&&(t.SSF=ms(wr)),t&&t.SSF&&(dp(),sb(t.SSF),e.revssf=ib(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,ex?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r=e.bookType=="xlsb"?"bin":"xml",n=_O.indexOf(e.bookType)>-1,s=fT();NT(e=e||{});var a=Z4(),i="",o=0;if(e.cellXfs=[],Df(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",zr(a,i,Qj(t.Props,e)),s.coreprops.push(i),Gn(e.rels,2,i,sn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}for(t.Props.Worksheets=t.Props.SheetNames.length,zr(a,i,zj(t.Props)),s.extprops.push(i),Gn(e.rels,3,i,sn.EXT_PROPS),t.Custprops!==t.Props&&$s(t.Custprops||{}).length>0&&(i="docProps/custom.xml",zr(a,i,Gj(t.Custprops)),s.custprops.push(i),Gn(e.rels,4,i,sn.CUST_PROPS)),o=1;o<=t.SheetNames.length;++o){var d={"!id":{}},h=t.Sheets[t.SheetNames[o-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,zr(a,i,l1e(o-1,i,e,t,d)),s.sheets.push(i),Gn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,sn.WS[0])}if(h){var g=h["!comments"],b=!1,y="";g&&g.length>0&&(y="xl/comments"+o+"."+r,zr(a,y,A1e(g,y)),s.comments.push(y),Gn(d,-1,"../comments"+o+"."+r,sn.CMNT),b=!0),h["!legacy"]&&b&&zr(a,"xl/drawings/vmlDrawing"+o+".vml",CO(o,h["!comments"])),delete h["!comments"],delete h["!legacy"]}d["!id"].rId1&&zr(a,kx(i),Sm(d))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,zr(a,i,u1e(e.Strings,i,e)),s.strs.push(i),Gn(e.wbrels,-1,"sharedStrings."+r,sn.SST)),i="xl/workbook."+r,zr(a,i,o1e(t,i)),s.workbooks.push(i),Gn(e.rels,1,i,sn.WB),i="xl/theme/theme1.xml",zr(a,i,vT(t.Themes,e)),s.themes.push(i),Gn(e.wbrels,-1,"theme/theme1.xml",sn.THEME),i="xl/styles."+r,zr(a,i,c1e(t,i,e)),s.styles.push(i),Gn(e.wbrels,-1,"styles."+r,sn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",zr(a,i,t.vbaraw),s.vba.push(i),Gn(e.wbrels,-1,"vbaProject.bin",sn.VBA)),i="xl/metadata."+r,zr(a,i,d1e(i)),s.metadata.push(i),Gn(e.wbrels,-1,"metadata."+r,sn.XLMETA),zr(a,"[Content_Types].xml",Pj(s,e)),zr(a,"_rels/.rels",Sm(e.rels)),zr(a,"xl/_rels/workbook."+r+".rels",Sm(e.wbrels)),delete e.revssf,delete e.ssf,a}function Dve(t,e){um=1024,t&&!t.SSF&&(t.SSF=ms(wr)),t&&t.SSF&&(dp(),sb(t.SSF),e.revssf=ib(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,ex?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var r="xml",n=_O.indexOf(e.bookType)>-1,s=fT();NT(e=e||{});var a=Z4(),i="",o=0;if(e.cellXfs=[],Df(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),i="docProps/core.xml",zr(a,i,Qj(t.Props,e)),s.coreprops.push(i),Gn(e.rels,2,i,sn.CORE_PROPS),i="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var l=[],u=0;u<t.SheetNames.length;++u)(t.Workbook.Sheets[u]||{}).Hidden!=2&&l.push(t.SheetNames[u]);t.Props.SheetNames=l}t.Props.Worksheets=t.Props.SheetNames.length,zr(a,i,zj(t.Props)),s.extprops.push(i),Gn(e.rels,3,i,sn.EXT_PROPS),t.Custprops!==t.Props&&$s(t.Custprops||{}).length>0&&(i="docProps/custom.xml",zr(a,i,Gj(t.Custprops)),s.custprops.push(i),Gn(e.rels,4,i,sn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=t.SheetNames.length;++o){var h={"!id":{}},m=t.Sheets[t.SheetNames[o-1]],g=(m||{})["!type"]||"sheet";switch(g){case"chart":default:i="xl/worksheets/sheet"+o+"."+r,zr(a,i,UO(o-1,e,t,h)),s.sheets.push(i),Gn(e.wbrels,-1,"worksheets/sheet"+o+"."+r,sn.WS[0])}if(m){var b=m["!comments"],y=!1,_="";if(b&&b.length>0){var T=!1;b.forEach(function(k){k[1].forEach(function(D){D.T==!0&&(T=!0)})}),T&&(_="xl/threadedComments/threadedComment"+o+"."+r,zr(a,_,O0e(b,d,e)),s.threadedcomments.push(_),Gn(h,-1,"../threadedComments/threadedComment"+o+"."+r,sn.TCMNT)),_="xl/comments"+o+"."+r,zr(a,_,EO(b)),s.comments.push(_),Gn(h,-1,"../comments"+o+"."+r,sn.CMNT),y=!0}m["!legacy"]&&y&&zr(a,"xl/drawings/vmlDrawing"+o+".vml",CO(o,m["!comments"])),delete m["!comments"],delete m["!legacy"]}h["!id"].rId1&&zr(a,kx(i),Sm(h))}return e.Strings!=null&&e.Strings.length>0&&(i="xl/sharedStrings."+r,zr(a,i,AO(e.Strings,e)),s.strs.push(i),Gn(e.wbrels,-1,"sharedStrings."+r,sn.SST)),i="xl/workbook."+r,zr(a,i,QO(t)),s.workbooks.push(i),Gn(e.rels,1,i,sn.WB),i="xl/theme/theme1.xml",zr(a,i,vT(t.Themes,e)),s.themes.push(i),Gn(e.wbrels,-1,"theme/theme1.xml",sn.THEME),i="xl/styles."+r,zr(a,i,vO(t,e)),s.styles.push(i),Gn(e.wbrels,-1,"styles."+r,sn.STY),t.vbaraw&&n&&(i="xl/vbaProject.bin",zr(a,i,t.vbaraw),s.vba.push(i),Gn(e.wbrels,-1,"vbaProject.bin",sn.VBA)),i="xl/metadata."+r,zr(a,i,bO()),s.metadata.push(i),Gn(e.wbrels,-1,"metadata."+r,sn.XLMETA),d.length>1&&(i="xl/persons/person.xml",zr(a,i,H0e(d)),s.people.push(i),Gn(e.wbrels,-1,"persons/person.xml",sn.PEOPLE)),zr(a,"[Content_Types].xml",Pj(s,e)),zr(a,"_rels/.rels",Sm(e.rels)),zr(a,"xl/_rels/workbook."+r+".rels",Sm(e.wbrels)),delete e.revssf,delete e.ssf,a}function BT(t,e){var r="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=ll(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Rve(t,e){return Ar.find(t,"EncryptedPackage")?kve(t,e):GO(t,e)}function Lve(t,e){var r,n=t,s=e||{};return s.type||(s.type=Jr&&Buffer.isBuffer(t)?"buffer":"base64"),r=fj(n,s),Bve(r,s)}function ZO(t,e){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return US(t.slice(r),e);default:break e}return Vm.to_workbook(t,e)}function Uve(t,e){var r="",n=BT(t,e);switch(e.type){case"base64":r=ll(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Lh(t);break;default:throw new Error("Unrecognized type "+e.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=rs(r)),e.type="binary",ZO(r,e)}function Mve(t,e){var r=t;return e.type=="base64"&&(r=ll(r)),r=Ex.utils.decode(1200,r.slice(2),"str"),e.type="binary",ZO(r,e)}function Pve(t){return t.match(/[^\x00-\x7F]/)?_u(t):t}function HE(t,e,r,n){return n?(r.type="string",Vm.to_workbook(t,r)):Vm.to_workbook(e,r)}function Mx(t,e){$4();var r=e||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Mx(new Uint8Array(t),(r=ms(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,s=[0,0,0,0],a=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Nm={},r.dateNF&&(Nm.dateNF=r.dateNF),r.type||(r.type=Jr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=Jr?"buffer":"binary",n=Fue(t),typeof Uint8Array<"u"&&!Jr&&(r.type="array")),r.type=="string"&&(a=!0,r.type="binary",r.codepage=65001,n=Pve(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var i=new ArrayBuffer(3),o=new Uint8Array(i);if(o.foo="bar",!o.foo)return r=ms(r),r.type="array",Mx(W4(n),r)}switch((s=BT(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Rve(Ar.read(n,r),r);break;case 9:if(s[1]<=8)return GO(n,r);break;case 60:return US(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Vfe(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return cO.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Lve(n,r):HE(t,n,r,a);case 239:return s[3]===60?US(n,r):HE(t,n,r,a);case 255:if(s[1]===254)return Mve(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Ch.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Ch.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return LS.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return pO.to_workbook(n,r);break;case 10:case 13:case 32:return Uve(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return Hfe.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?LS.to_workbook(n,r):HE(t,n,r,a)}function e7(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return g1(e.file,Ar.write(t,{type:Jr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Ar.write(t,e)}function jve(t,e){var r=ms(e||{}),n=Ive(t,r);return Ove(n,r)}function Ove(t,e){var r={},n=Jr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(r.compression="DEFLATE"),e.password)r.type=n;else switch(e.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var s=t.FullPaths?Ar.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!e.compression}):t.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(e.type=="binary"||e.type=="base64")return s;s=new Uint8Array(nb(s))}return e.password&&typeof encrypt_agile<"u"?e7(encrypt_agile(s,e.password),e):e.type==="file"?g1(e.file,s):e.type=="string"?rs(s):s}function Qve(t,e){var r=e||{},n=P1e(t,r);return e7(n,r)}function wu(t,e,r){r||(r="");var n=r+t;switch(e.type){case"base64":return _x(_u(n));case"binary":return _u(n);case"string":return t;case"file":return g1(e.file,n,"utf8");case"buffer":return Jr?KA(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):wu(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Hve(t,e){switch(e.type){case"base64":return _x(t);case"binary":return t;case"string":return t;case"file":return g1(e.file,t,"binary");case"buffer":return Jr?KA(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Zv(t,e){switch(e.type){case"string":case"base64":case"binary":for(var r="",n=0;n<t.length;++n)r+=String.fromCharCode(t[n]);return e.type=="base64"?_x(r):e.type=="string"?rs(r):r;case"file":return g1(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function t7(t,e){$4(),Rxe(t);var r=ms(e||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=t7(t,r);return r.type="array",nb(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=t.SheetNames.indexOf(r.sheet),!t.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return wu(I1e(t,r),r);case"slk":case"sylk":return wu(lO.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"htm":case"html":return wu(KO(t.Sheets[t.SheetNames[s]],r),r);case"txt":return Hve(r7(t.Sheets[t.SheetNames[s]],r),r);case"csv":return wu(IT(t.Sheets[t.SheetNames[s]],r),r,"\uFEFF");case"dif":return wu(cO.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"dbf":return Zv(LS.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"prn":return wu(Vm.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"rtf":return wu(pO.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"eth":return wu(uO.from_sheet(t.Sheets[t.SheetNames[s]],r),r);case"fods":return wu(JO(t,r),r);case"wk1":return Zv(Ch.sheet_to_wk1(t.Sheets[t.SheetNames[s]],r),r);case"wk3":return Zv(Ch.book_to_wk3(t,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Zv(qO(t,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),Qve(t,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return jve(t,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function Vve(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(t.bookType=r.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function kT(t,e,r){var n={};return n.type="file",n.file=e,Vve(n),t7(t,n)}function zve(t,e,r,n,s,a,i,o){var l=ua(r),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),h=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!i||t[r])for(var g=e.s.c;g<=e.e.c;++g){var b=i?t[r][g]:t[n[g]+l];if(b===void 0||b.t===void 0){if(u===void 0)continue;a[g]!=null&&(m[a[g]]=u);continue}var y=b.v;switch(b.t){case"z":if(y==null)break;continue;case"e":y=y==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(a[g]!=null){if(y==null)if(b.t=="e"&&y===null)m[a[g]]=null;else if(u!==void 0)m[a[g]]=u;else if(d&&y===null)m[a[g]]=null;else continue;else m[a[g]]=d&&(b.t!=="n"||b.t==="n"&&o.rawNumbers!==!1)?y:jA(b,y,o);y!=null&&(h=!1)}}return{row:m,isempty:h}}function q2(t,e){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,a=[],i=0,o="",l={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:t["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof d){case"string":l=_n(d);break;case"number":l=_n(t["!ref"]),l.s.r=d;break;default:l=d}n>0&&(s=0);var h=ua(l.s.r),m=[],g=[],b=0,y=0,_=Array.isArray(t),T=l.s.r,k=0,D={};_&&!t[T]&&(t[T]=[]);var M=u.skipHidden&&t["!cols"]||[],P=u.skipHidden&&t["!rows"]||[];for(k=l.s.c;k<=l.e.c;++k)if(!(M[k]||{}).hidden)switch(m[k]=Is(k),r=_?t[T][k]:t[m[k]+h],n){case 1:a[k]=k-l.s.c;break;case 2:a[k]=m[k];break;case 3:a[k]=u.header[k-l.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),o=i=jA(r,null,u),y=D[i]||0,!y)D[i]=1;else{do o=i+"_"+y++;while(D[o]);D[i]=y,D[o]=1}a[k]=o}for(T=l.s.r+s;T<=l.e.r;++T)if(!(P[T]||{}).hidden){var L=zve(t,l,T,m,n,a,_,u);(L.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(g[b++]=L.row)}return g.length=b,g}var kD=/"/g;function Gve(t,e,r,n,s,a,i,o){for(var l=!0,u=[],d="",h=ua(r),m=e.s.c;m<=e.e.c;++m)if(n[m]){var g=o.dense?(t[r]||[])[m]:t[n[m]+h];if(g==null)d="";else if(g.v!=null){l=!1,d=""+(o.rawNumbers&&g.t=="n"?g.v:jA(g,null,o));for(var b=0,y=0;b!==d.length;++b)if((y=d.charCodeAt(b))===s||y===a||y===34||o.forceQuotes){d='"'+d.replace(kD,'""')+'"';break}d=="ID"&&(d='"ID"')}else g.f!=null&&!g.F?(l=!1,d="="+g.f,d.indexOf(",")>=0&&(d='"'+d.replace(kD,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&l?null:u.join(i)}function IT(t,e){var r=[],n=e??{};if(t==null||t["!ref"]==null)return"";var s=_n(t["!ref"]),a=n.FS!==void 0?n.FS:",",i=a.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,l=o.charCodeAt(0),u=new RegExp((a=="|"?"\\|":a)+"+$"),d="",h=[];n.dense=Array.isArray(t);for(var m=n.skipHidden&&t["!cols"]||[],g=n.skipHidden&&t["!rows"]||[],b=s.s.c;b<=s.e.c;++b)(m[b]||{}).hidden||(h[b]=Is(b));for(var y=0,_=s.s.r;_<=s.e.r;++_)(g[_]||{}).hidden||(d=Gve(t,s,_,h,i,l,a,n),d!=null&&(n.strip&&(d=d.replace(u,"")),(d||n.blankrows!==!1)&&r.push((y++?o:"")+d)));return delete n.dense,r.join("")}function r7(t,e){e||(e={}),e.FS="	",e.RS=`
`;var r=IT(t,e);return r}function qve(t){var e="",r,n="";if(t==null||t["!ref"]==null)return[];var s=_n(t["!ref"]),a="",i=[],o,l=[],u=Array.isArray(t);for(o=s.s.c;o<=s.e.c;++o)i[o]=Is(o);for(var d=s.s.r;d<=s.e.r;++d)for(a=ua(d),o=s.s.c;o<=s.e.c;++o)if(e=i[o]+a,r=u?(t[d]||[])[o]:t[e],n="",r!==void 0){if(r.F!=null){if(e=r.F,!r.f)continue;n=r.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}l[l.length]=e+"="+n}return l}function n7(t,e,r){var n=r||{},s=+!n.skipHeader,a=t||{},i=0,o=0;if(a&&n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var l=typeof n.origin=="string"?Fs(n.origin):n.origin;i=l.r,o=l.c}var u,d={s:{c:0,r:0},e:{c:o,r:i+e.length-1+s}};if(a["!ref"]){var h=_n(a["!ref"]);d.e.c=Math.max(d.e.c,h.e.c),d.e.r=Math.max(d.e.r,h.e.r),i==-1&&(i=h.e.r+1,d.e.r=i+e.length-1+s)}else i==-1&&(i=0,d.e.r=e.length-1+s);var m=n.header||[],g=0;e.forEach(function(y,_){$s(y).forEach(function(T){(g=m.indexOf(T))==-1&&(m[g=m.length]=T);var k=y[T],D="z",M="",P=_r({c:o+g,r:i+_+s});u=Px(a,P),k&&typeof k=="object"&&!(k instanceof Date)?a[P]=k:(typeof k=="number"?D="n":typeof k=="boolean"?D="b":typeof k=="string"?D="s":k instanceof Date?(D="d",n.cellDates||(D="n",k=ja(k)),M=n.dateNF||wr[14]):k===null&&n.nullError&&(D="e",k=0),u?(u.t=D,u.v=k,delete u.w,delete u.R,M&&(u.z=M)):a[P]=u={t:D,v:k},M&&(u.z=M))})}),d.e.c=Math.max(d.e.c,o+m.length-1);var b=ua(i);if(s)for(g=0;g<m.length;++g)a[Is(g+o)+b]={t:"s",v:m[g]};return a["!ref"]=Mr(d),a}function Kve(t,e){return n7(null,t,e)}function Px(t,e,r){if(typeof e=="string"){if(Array.isArray(t)){var n=Fs(e);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?Px(t,_r(e)):Px(t,_r({r:e,c:r||0}))}function $ve(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var r=t.SheetNames.indexOf(e);if(r>-1)return r;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function FT(){return{SheetNames:[],Sheets:{}}}function DT(t,e,r,n){var s=1;if(!r)for(;s<=65535&&t.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var a=r.match(/(^.*?)(\d+)$/);s=a&&+a[2]||0;var i=a&&a[1]||r;for(++s;s<=65535&&t.SheetNames.indexOf(r=i+s)!=-1;++s);}if(OO(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=e,r}function Wve(t,e,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=$ve(t,e);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function Yve(t,e){return t.z=e,t}function s7(t,e,r){return e?(t.l={Target:e},r&&(t.l.Tooltip=r)):delete t.l,t}function Jve(t,e,r){return s7(t,"#"+e,r)}function Xve(t,e,r){t.c||(t.c=[]),t.c.push({t:e,a:r||"SheetJS"})}function Zve(t,e,r,n){for(var s=typeof e!="string"?e:_n(e),a=typeof e=="string"?e:Mr(e),i=s.s.r;i<=s.e.r;++i)for(var o=s.s.c;o<=s.e.c;++o){var l=Px(t,i,o);l.t="n",l.F=a,delete l.v,i==s.s.r&&o==s.s.c&&(l.f=r,n&&(l.D=!0))}return t}var Vl={encode_col:Is,encode_row:ua,encode_cell:_r,encode_range:Mr,decode_col:oT,decode_row:iT,split_cell:uAe,decode_cell:Fs,decode_range:Do,format_cell:jA,sheet_add_aoa:Ij,sheet_add_json:n7,sheet_add_dom:$O,aoa_to_sheet:fp,json_to_sheet:Kve,table_to_sheet:WO,table_to_book:ive,sheet_to_csv:IT,sheet_to_txt:r7,sheet_to_json:q2,sheet_to_html:KO,sheet_to_formulae:qve,sheet_to_row_object_array:q2,sheet_get_cell:Px,book_new:FT,book_append_sheet:DT,book_set_sheet_visibility:Wve,cell_set_number_format:Yve,cell_set_hyperlink:s7,cell_set_internal_link:Jve,cell_add_comment:Xve,sheet_set_array_formula:Zve,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const eye=async()=>{try{const t=new Date,e=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=["usuarios","acompanamientos","anuncios","acciones","analisis","apiLogs"];let n=0,s=0;const a=[];for(const l of r)try{const u=kt(Zr,l),d=await Cs(u),h=d.size;n+=h,a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:h});let m=0;d.docs.forEach(g=>{const b=g.data();b.createdAt&&new Date(b.createdAt)>=e&&m++}),s+=m}catch(u){console.warn(`Error accediendo a colección ${l}:`,u),a.push({label:l.charAt(0).toUpperCase()+l.slice(1),value:0})}const i=[];try{const l=kt(Zr,"apiLogs"),u=new Date(t.getTime()-10080*60*1e3),d=Yt(l,Xr("timestamp",">=",u.toISOString()),Pr("timestamp","desc")),h=await Cs(d),m={};h.docs.forEach(g=>{const b=g.data(),y=new Date(b.timestamp).toLocaleDateString("es-CL");m[y]=(m[y]||0)+1}),Object.entries(m).sort(([g],[b])=>new Date(g).getTime()-new Date(b).getTime()).forEach(([g,b])=>{i.push({label:g,value:b})})}catch(l){console.warn("Error calculando actividad diaria:",l)}const o=Math.floor(s*2.5);return{documentsCreatedToday:s,readsToday:o,writesToday:s,totalDocuments:n,collectionsActivity:a.sort((l,u)=>u.value-l.value),dailyActivity:i}}catch(t){return console.error("Error al obtener estadísticas de Firestore:",t),{documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]}}},ID=500,P0=({title:t,value:e,description:r,alert:n})=>c.jsxs("div",{className:`p-5 rounded-xl border ${n?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-700":"bg-slate-50 border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:t}),c.jsx("p",{className:`text-3xl font-bold mt-2 ${n?"text-red-600 dark:text-red-400":"text-slate-800 dark:text-slate-200"}`,children:e}),r&&c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:r})]}),VE=({title:t,data:e,colorClass:r})=>{const n=Z.useMemo(()=>Math.max(...e.map(s=>s.value),1),[e]);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md h-full",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:t}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(s=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:s.label}),c.jsx("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:s.value})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-3",children:c.jsx("div",{className:`${r} h-3 rounded-full transition-all duration-500 ease-out`,style:{width:`${s.value/n*100}%`}})})]},s.label)):c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm text-center py-8",children:"No hay datos para mostrar."})})]})},tye=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState(!0),[s,a]=Z.useState(null),[i,o]=Z.useState({documentsCreatedToday:0,readsToday:0,writesToday:0,totalDocuments:0,collectionsActivity:[],dailyActivity:[]});Z.useEffect(()=>{n(!0);const h=goe(b=>{e(b),n(!1)}),m=async()=>{try{const b=await eye();o(b)}catch(b){console.error("Error al cargar estadísticas de Firestore:",b)}};m();const g=setInterval(m,300*1e3);return()=>{h(),clearInterval(g)}},[]);const{stats:l,userStats:u,moduleStats:d}=Z.useMemo(()=>{const h=new Date,m=new Date(h.getFullYear(),h.getMonth(),h.getDate()).getTime(),g=m-h.getDay()*24*60*60*1e3,b=new Date(h.getFullYear(),h.getMonth(),1).getTime(),y={today:0,week:0,month:0},_={},T={};t.forEach(M=>{const P=new Date(M.timestamp).getTime();P>=m&&y.today++,P>=g&&y.week++,P>=b&&y.month++;const L=M.userEmail||"Desconocido";_[L]||(_[L]={email:L,today:0,month:0,total:0}),_[L].total++,P>=m&&_[L].today++,P>=b&&_[L].month++,T[M.module]=(T[M.module]||0)+1});const k=Object.values(_).sort((M,P)=>P.total-M.total),D=Object.entries(T).map(([M,P])=>({label:M,value:P})).sort((M,P)=>P.value-M.value);return{stats:y,userStats:k,moduleStats:D}},[t]);return c.jsxs("div",{className:"space-y-8",children:[s&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:s}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Llamadas a la API de IA"}),r&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando estadísticas..."}),!r&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No hay registros de llamadas a la API en la nube."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsx(P0,{title:"Llamadas Hoy",value:r?"--":l.today,description:`Límite recomendado: ${ID}`,alert:l.today>ID}),c.jsx(P0,{title:"Llamadas esta Semana",value:r?"--":l.week}),c.jsx(P0,{title:"Llamadas este Mes",value:r?"--":l.month})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(VE,{title:"Uso por Módulo",data:d,colorClass:"bg-sky-500"}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl",children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Uso por Usuario"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Usuario"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Hoy"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Mes"}),c.jsx("th",{className:"px-4 py-2 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Total"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:!r&&u.length>0?u.map(h=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:h.email}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:h.today}),c.jsx("td",{className:"px-4 py-2 text-center text-sm",children:h.month}),c.jsx("td",{className:"px-4 py-2 text-center text-sm font-bold",children:h.total})]},h.email)):c.jsx("tr",{children:c.jsx("td",{colSpan:4,className:"text-center py-6 text-slate-500",children:r?"Cargando...":"No hay registros."})})})]})})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Monitor de Almacenamiento Firestore"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mb-4",children:"Estadísticas de uso de Firestore (simuladas)."}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx(P0,{title:"Documentos Creados (Hoy)",value:i.documentsCreatedToday,description:"Nuevos documentos"}),c.jsx(P0,{title:"Lecturas de Firestore (Hoy)",value:i.readsToday,description:"Operaciones de lectura"}),c.jsx(P0,{title:"Total de Documentos",value:i.totalDocuments,description:"En todas las colecciones"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mt-8",children:[c.jsx(VE,{title:"Actividad por Colección",data:i.collectionsActivity,colorClass:"bg-green-500"}),c.jsx(VE,{title:"Actividad Diaria (Últimos 7 días)",data:i.dailyActivity,colorClass:"bg-purple-500"})]})]})]})};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rye="type.googleapis.com/google.protobuf.Int64Value",nye="type.googleapis.com/google.protobuf.UInt64Value";function a7(t,e){const r={};for(const n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}function K2(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>K2(e));if(typeof t=="function"||typeof t=="object")return a7(t,e=>K2(e));throw new Error("Data cannot be encoded in JSON: "+t)}function Gm(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case rye:case nye:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>Gm(e)):typeof t=="function"||typeof t=="object"?a7(t,e=>Gm(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bo extends Mu{constructor(e,r,n){super(`${RT}/${e}`,r||""),this.details=n,Object.setPrototypeOf(this,Bo.prototype)}}function sye(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function $2(t,e){let r=sye(t),n=r,s;try{const a=e&&e.error;if(a){const i=a.status;if(typeof i=="string"){if(!FD[i])return new Bo("internal","internal");r=FD[i],n=i}const o=a.message;typeof o=="string"&&(n=o),s=a.details,s!==void 0&&(s=Gm(s))}}catch{}return r==="ok"?null:new Bo(r,n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aye{constructor(e,r,n,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Ql(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||r.get().then(a=>this.auth=a,()=>{}),this.messaging||n.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),n=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:n,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="us-central1",iye=/^data: (.*?)(?:\n|$)/;function oye(t){let e=null;return{promise:new Promise((r,n)=>{e=setTimeout(()=>{n(new Bo("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class lye{constructor(e,r,n,s,a=jS,i=(...o)=>fetch(...o)){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new aye(e,r,n,s),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(a);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=jS}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function cye(t,e,r){const n=Hh(e);t.emulatorOrigin=`http${n?"s":""}://${e}:${r}`,n&&(k5(t.emulatorOrigin),I5("Functions",!0))}function uye(t,e,r){const n=s=>dye(t,e,s,{});return n.stream=(s,a)=>hye(t,e,s,a),n}async function Aye(t,e,r,n){r["Content-Type"]="application/json";let s;try{s=await n(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function i7(t,e){const r={},n=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return n.authToken&&(r.Authorization="Bearer "+n.authToken),n.messagingToken&&(r["Firebase-Instance-ID-Token"]=n.messagingToken),n.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=n.appCheckToken),r}function dye(t,e,r,n){const s=t._url(e);return fye(t,s,r,n)}async function fye(t,e,r,n){r=K2(r);const s={data:r},a=await i7(t,n),i=n.timeout||7e4,o=oye(i),l=await Promise.race([Aye(e,s,a,t.fetchImpl),o.promise,t.cancelAllRequests]);if(o.cancel(),!l)throw new Bo("cancelled","Firebase Functions instance was deleted.");const u=$2(l.status,l.json);if(u)throw u;if(!l.json)throw new Bo("internal","Response is not valid JSON object.");let d=l.json.data;if(typeof d>"u"&&(d=l.json.result),typeof d>"u")throw new Bo("internal","Response is missing data field.");return{data:Gm(d)}}function hye(t,e,r,n){const s=t._url(e);return mye(t,s,r,n||{})}async function mye(t,e,r,n){var m;r=K2(r);const s={data:r},a=await i7(t,n);a["Content-Type"]="application/json",a.Accept="text/event-stream";let i;try{i=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(s),headers:a,signal:n==null?void 0:n.signal})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const y=new Bo("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const b=$2(0,null);return{data:Promise.reject(b),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(b)}}}}}}let o,l;const u=new Promise((g,b)=>{o=g,l=b});(m=n==null?void 0:n.signal)==null||m.addEventListener("abort",()=>{const g=new Bo("cancelled","Request was cancelled.");l(g)});const d=i.body.getReader(),h=pye(d,o,l,n==null?void 0:n.signal);return{stream:{[Symbol.asyncIterator](){const g=h.getReader();return{async next(){const{value:b,done:y}=await g.read();return{value:b,done:y}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:u}}function pye(t,e,r,n){const s=(i,o)=>{const l=i.match(iye);if(!l)return;const u=l[1];try{const d=JSON.parse(u);if("result"in d){e(Gm(d.result));return}if("message"in d){o.enqueue(Gm(d.message));return}if("error"in d){const h=$2(0,d);o.error(h),r(h);return}}catch(d){if(d instanceof Bo){o.error(d),r(d);return}}},a=new TextDecoder;return new ReadableStream({start(i){let o="";return l();async function l(){if(n!=null&&n.aborted){const u=new Bo("cancelled","Request was cancelled");return i.error(u),r(u),Promise.resolve()}try{const{value:u,done:d}=await t.read();if(d){o.trim()&&s(o.trim(),i),i.close();return}if(n!=null&&n.aborted){const m=new Bo("cancelled","Request was cancelled");i.error(m),r(m),await t.cancel();return}o+=a.decode(u,{stream:!0});const h=o.split(`
`);o=h.pop()||"";for(const m of h)m.trim()&&s(m.trim(),i);return l()}catch(u){const d=u instanceof Bo?u:$2(0,null);i.error(d),r(d)}}},cancel(){return t.cancel()}})}const DD="@firebase/functions",RD="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gye="auth-internal",xye="app-check-internal",vye="messaging-internal";function yye(t){const e=(r,{instanceIdentifier:n})=>{const s=r.getProvider("app").getImmediate(),a=r.getProvider(gye),i=r.getProvider(vye),o=r.getProvider(xye);return new lye(s,a,i,o,n)};Nh(new hf(RT,e,"PUBLIC").setMultipleInstances(!0)),Su(DD,RD,t),Su(DD,RD,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function og(t=L5(),e=jS){const n=yw(Es(t),RT).getImmediate({identifier:e}),s=XL("functions");return s&&wye(n,...s),n}function wye(t,e,r){cye(Es(t),e,r)}function j0(t,e,r){return uye(Es(t),e)}yye();const LD=kt(Zr,"usuarios");async function o7(){try{console.log("🔍 [DEBUG] Obteniendo usuarios de Firestore..."),console.log("🔍 [DEBUG] Collection ref:",LD);const t=await Cs(LD);if(console.log(`📊 [DEBUG] Encontrados ${t.docs.length} documentos en la colección usuarios`),t.empty)return console.log("⚠️  [DEBUG] La colección usuarios está vacía"),[];const e=t.docs.map(r=>{const n=r.data();return console.log("👤 [DEBUG] Usuario encontrado:",{id:r.id,...n}),{id:r.id,...n}});return console.log("✅ [DEBUG] Usuarios procesados correctamente:",e.length),console.log("✅ [DEBUG] Lista completa de usuarios:",e),e}catch(t){throw console.error("❌ [DEBUG] Error al obtener usuarios:",t),console.error("❌ [DEBUG] Error details:",{code:t.code,message:t.message,stack:t.stack}),t}}const UD=Object.values(jt),zE=t=>t?t.trim().toLowerCase().replace(/°/g,"º").replace(/\s+(medio|básico|basico)/g,"").replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º").replace(/^(\d)(?![º])/,"$1º").replace(/\s+/g,"").toUpperCase():"",bye=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState(!1),[s,a]=Z.useState("Usuarios"),[i,o]=Z.useState({nombreCompleto:"",email:"",rut:"",profile:jt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),[l,u]=Z.useState(null),[d,h]=Z.useState(""),[m,g]=Z.useState(""),[b,y]=Z.useState(""),[_,T]=Z.useState(null),[k,D]=Z.useState(null),[M,P]=Z.useState(null),L=Z.useCallback(async()=>{n(!0);try{const G=await o7();e(G)}catch(G){console.error("Error al cargar usuarios",G),T("No se pudieron cargar los usuarios.")}finally{n(!1)}},[]);Z.useEffect(()=>{L()},[L]);const C=Z.useCallback(G=>{const{name:q,value:W}=G.target;o(ie=>({...ie,[q]:W,curso:q==="profile"&&W!==jt.ESTUDIANTE?"":ie.curso,cursos:q==="profile"&&W!==jt.PROFESORADO?[]:ie.cursos,asignaturas:q==="profile"&&W!==jt.PROFESORADO?[]:ie.asignaturas}))},[]),E=Z.useCallback((G,q)=>{o(W=>{const ie=W[G]||[],j=ie.includes(q)?ie.filter(Y=>Y!==q):[...ie,q];return{...W,[G]:j}})},[]),B=Z.useCallback(()=>{o({nombreCompleto:"",email:"",rut:"",profile:jt.PROFESORADO,password:"",curso:"",cursos:[],asignaturas:[]}),u(null),T(null)},[]),O=Z.useCallback(async G=>{G.preventDefault(),T(null);const{nombreCompleto:q,email:W,profile:ie,curso:j,password:Y}=i;if(!q.trim()||!W.trim()){T("Nombre Completo y Email son obligatorios.");return}if(ie===jt.ESTUDIANTE&&!j){T('El campo "Curso" es obligatorio para Estudiantes.');return}if(!l&&!(Y!=null&&Y.trim())){T("La contraseña es obligatoria al crear un nuevo usuario.");return}const ee=og();try{if(l){const te=j0(ee,"updateUser"),ce={...i,password:(Y==null?void 0:Y.trim())||void 0,curso:ie===jt.ESTUDIANTE?zE(j||""):void 0};await te(ce)}else{const te=j0(ee,"createUser"),ce={...i,curso:ie===jt.ESTUDIANTE?zE(j||""):void 0};await te(ce)}await L(),B()}catch(te){console.error("Error al guardar usuario:",te),T(te.message||"Error al guardar el usuario.")}},[i,l,L,B]),R=Z.useCallback(G=>{u(G.email),o({nombreCompleto:G.nombreCompleto,email:G.email,rut:G.rut||"",profile:G.profile,password:"",curso:G.curso||"",cursos:G.cursos||[],asignaturas:G.asignaturas||[]}),setTimeout(()=>{const q=document.querySelector("form");q&&q.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)},[]),F=Z.useCallback(async G=>{if(window.confirm(`¿Está seguro de que desea eliminar al usuario ${G}? Esta acción es irreversible.`))try{const q=og();await j0(q,"deleteUser")({email:G}),await L()}catch(q){console.error("Error al eliminar usuario:",q),T(q.message||"No se pudo borrar el usuario.")}},[L]),Q=async G=>{var Y;const q=(Y=G.target.files)==null?void 0:Y[0];if(!q)return;D({message:"Procesando archivo...",isError:!1});const W=og(),ie=j0(W,"createUser"),j=new FileReader;j.onload=async ee=>{var te;try{const ce=new Uint8Array((te=ee.target)==null?void 0:te.result),be=Mx(ce,{type:"array"}),he=be.Sheets[be.SheetNames[0]],fe=Vl.sheet_to_json(he);if(fe.length===0){D({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ge=fe.map(Fe=>{const Ee=Fe.Nombre||Fe.nombre,De=Fe.Correo||Fe.correo||Fe.Email||Fe.email,Qe=Fe.Curso||Fe.curso,$e=Fe.RUT||Fe.rut;return!Ee||!De||!Qe?Promise.resolve({email:De||"Sin email",error:"Datos incompletos"}):ie({nombreCompleto:String(Ee).trim(),email:String(De).trim(),profile:jt.ESTUDIANTE,curso:zE(String(Qe).trim()),rut:$e?String($e).trim():"",password:"recoleta"}).catch(ut=>({email:De,error:ut.message}))}),de=await Promise.all(ge),oe=de.filter(Fe=>!Fe.error).length,Ue=de.filter(Fe=>Fe.error);let tt=`Carga completada. ${oe} estudiantes agregados.`;Ue.length>0&&(tt+=` ${Ue.length} fallaron.`,console.error("Errores en carga masiva:",Ue)),D({message:tt,isError:Ue.length>0}),await L()}catch(ce){D({message:`Error: ${ce.message}`,isError:!0})}},j.readAsArrayBuffer(q),G.target.value=""},H=async G=>{var Y;const q=(Y=G.target.files)==null?void 0:Y[0];if(!q)return;P({message:"Procesando archivo...",isError:!1});const W=og(),ie=j0(W,"createUser"),j=new FileReader;j.onload=async ee=>{var te;try{const ce=new Uint8Array((te=ee.target)==null?void 0:te.result),be=Mx(ce,{type:"array"}),he=be.Sheets[be.SheetNames[0]],fe=Vl.sheet_to_json(he);if(fe.length===0){P({message:"El archivo está vacío o no tiene el formato correcto.",isError:!0});return}const ge=fe.map(Fe=>{const Ee=Fe.Nombre||Fe.nombre,De=Fe.Correo||Fe.correo||Fe.Email||Fe.email,Qe=Fe.Perfil||Fe.perfil||Fe.Profile||Fe.profile,$e=Fe.RUT||Fe.rut;return!Ee||!De||!Qe?Promise.resolve({email:De||"Sin email",error:"Datos incompletos"}):ie({nombreCompleto:String(Ee).trim(),email:String(De).trim(),profile:Qe,rut:$e?String($e).trim():"",password:"recoleta"}).catch(ut=>({email:De,error:ut.message}))}),de=await Promise.all(ge),oe=de.filter(Fe=>!Fe.error).length,Ue=de.filter(Fe=>Fe.error);let tt=`Carga completada. ${oe} usuarios agregados.`;Ue.length>0&&(tt+=` ${Ue.length} fallaron.`,console.error("Errores en carga masiva:",Ue)),P({message:tt,isError:Ue.length>0}),await L()}catch(ce){P({message:`Error: ${ce.message}`,isError:!0})}},j.readAsArrayBuffer(q),G.target.value=""},ne="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",J=Z.useMemo(()=>Array.from(new Set(t.filter(G=>G.profile===jt.ESTUDIANTE&&G.curso).map(G=>G.curso))).sort(),[t]),re=Z.useMemo(()=>t.filter(G=>(d===""||G.nombreCompleto.toLowerCase().includes(d.toLowerCase())||G.email.toLowerCase().includes(d.toLowerCase()))&&(m===""||G.profile===m)&&(b===""||G.curso===b)),[t,d,m,b]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Administración"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx("button",{onClick:()=>a("Usuarios"),className:`${s==="Usuarios"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Gestión de Usuarios"}),c.jsx("button",{onClick:()=>a("Monitor de Uso"),className:`${s==="Monitor de Uso"?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm focus:outline-none`,children:"Monitor de Uso"})]})}),s==="Usuarios"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Carga Masiva"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Estudiantes (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:Q,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Curso"}),k&&c.jsx("p",{className:`text-sm mt-2 ${k.isError?"text-red-600":"text-green-600"}`,children:k.message})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-2",children:"Cargar Personal (Excel)"}),c.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:H,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 dark:file:bg-amber-900 dark:file:text-amber-300"}),c.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Columnas requeridas: Nombre, Correo, Perfil"}),M&&c.jsx("p",{className:`text-sm mt-2 ${M.isError?"text-red-600":"text-green-600"}`,children:M.message})]})]})]}),c.jsxs("div",{id:"formulario-usuario",className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:l?"Editando usuario":"Agregar nuevo usuario"}),c.jsxs("form",{onSubmit:O,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Completo"}),c.jsx("input",{type:"text",name:"nombreCompleto",value:i.nombreCompleto,onChange:C,className:ne,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Email"}),c.jsx("input",{type:"email",name:"email",value:i.email,onChange:C,className:ne,required:!0,readOnly:!!l})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contraseña"}),c.jsx("input",{type:"password",name:"password",value:i.password||"",onChange:C,placeholder:l?"Dejar en blanco para no cambiar":"Contraseña temporal",className:ne})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT (Opcional)"}),c.jsx("input",{type:"text",name:"rut",value:i.rut||"",onChange:C,placeholder:"12.345.678-9",className:ne})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Perfil de Usuario"}),c.jsx("select",{name:"profile",value:i.profile,onChange:C,className:ne,required:!0,children:UD.map(G=>c.jsx("option",{value:G,children:G},G))})]}),i.profile===jt.ESTUDIANTE&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:i.curso,onChange:C,className:ne,required:!0,children:[c.jsx("option",{value:"",children:"Seleccione un curso"}),ca.map(G=>c.jsx("option",{value:G,children:G},G))]})]})]}),i.profile===jt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border-l-4 border-blue-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-blue-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📚"}),"Asignación de Cursos"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ca.map(G=>{var q;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-blue-50 dark:hover:bg-blue-800/20",children:[c.jsx("input",{type:"checkbox",checked:((q=i.cursos)==null?void 0:q.includes(G))||!1,onChange:()=>E("cursos",G),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:G})]},G)})})]}),i.profile===jt.PROFESORADO&&c.jsxs("div",{className:"mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border-l-4 border-green-400",children:[c.jsxs("h3",{className:"text-lg font-medium text-slate-800 dark:text-slate-200 mb-4 flex items-center",children:[c.jsx("span",{className:"bg-green-500 text-white px-2 py-1 rounded text-sm mr-2",children:"📖"}),"Asignación de Asignaturas"]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:ol.map(G=>{var q;return c.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-white dark:bg-slate-700 p-2 rounded border hover:bg-green-50 dark:hover:bg-green-800/20",children:[c.jsx("input",{type:"checkbox",checked:((q=i.asignaturas)==null?void 0:q.includes(G))||!1,onChange:()=>E("asignaturas",G),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),c.jsx("span",{className:"text-sm text-slate-700 dark:text-slate-300 font-medium",children:G})]},G)})})]}),_&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:_}),c.jsxs("div",{className:"pt-4 flex justify-end items-center gap-4 flex-wrap",children:[l&&c.jsx("button",{type:"button",onClick:B,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:async()=>{try{console.log("🔧 Agregando custom claim...");const G=og(),W=await j0(G,"addCustomClaim")({email:"fernando.sagredo@industrialderecoleta.cl",profile:"SUBDIRECCION"});console.log("✅ Custom claim agregado:",W),T("✅ Custom claim agregado exitosamente")}catch(G){console.error("❌ Error al agregar custom claim:",G),T(`Error: ${G.message}`)}},className:"bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 text-sm",children:"🔧 Claim"}),c.jsx("button",{type:"button",onClick:async()=>{var G,q,W,ie,j;try{const{auth:Y}=await wx(async()=>{const{auth:ce}=await Promise.resolve().then(()=>kY);return{auth:ce}},void 0);console.log("🔍 Usuario actual:",(G=Y.currentUser)==null?void 0:G.email);const ee=await((q=Y.currentUser)==null?void 0:q.getIdToken(!0));console.log("🔑 Token refreshed:",!!ee);const te=await((W=Y.currentUser)==null?void 0:W.getIdTokenResult());console.log("📋 Claims completos:",te==null?void 0:te.claims),console.log("👤 Profile claim:",(ie=te==null?void 0:te.claims)==null?void 0:ie.profile),((j=te==null?void 0:te.claims)==null?void 0:j.profile)==="SUBDIRECCION"?T("✅ Custom claim FUNCIONANDO - Ya puedes crear/editar usuarios"):T(`❌ Custom claim faltante. Claims: ${JSON.stringify(te==null?void 0:te.claims)}`)}catch(Y){console.error("❌ Error verificando token:",Y),T(`Error verificando token: ${Y.message}`)}},className:"bg-blue-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-600 text-sm",children:"🔍 Token"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:l?"Actualizar Usuario":"Agregar Usuario"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Listado de Usuarios"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[c.jsx("div",{children:c.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:d,onChange:G=>h(G.target.value),className:ne})}),c.jsx("div",{children:c.jsxs("select",{value:m,onChange:G=>g(G.target.value),className:ne,children:[c.jsx("option",{value:"",children:"Todos los perfiles"}),UD.map(G=>c.jsx("option",{value:G,children:G},G))]})}),c.jsx("div",{children:c.jsxs("select",{value:b,onChange:G=>y(G.target.value),className:ne,children:[c.jsx("option",{value:"",children:"Todos los cursos"}),J.map(G=>c.jsx("option",{value:G,children:G},G))]})})]}),r?c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500",children:"Cargando usuarios..."})}):c.jsxs("div",{className:"overflow-x-auto",children:[c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Nombre"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Perfil"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Curso/Asignaciones"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-300 uppercase tracking-wider",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:re.map(G=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-900 dark:text-slate-100",children:G.nombreCompleto}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:G.email}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-300",children:c.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${G.profile===jt.ESTUDIANTE?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":G.profile===jt.PROFESORADO?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"}`,children:G.profile})}),c.jsxs("td",{className:"px-4 py-4 text-sm text-slate-500 dark:text-slate-300",children:[G.profile===jt.ESTUDIANTE&&c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-700 rounded dark:bg-slate-600 dark:text-slate-300",children:G.curso||"Sin curso"}),G.profile===jt.PROFESORADO&&c.jsxs("div",{className:"space-y-1",children:[G.cursos&&G.cursos.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Cursos:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[G.cursos.slice(0,3).map(q=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded dark:bg-blue-900 dark:text-blue-300",children:q},q)),G.cursos.length>3&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",G.cursos.length-3]})]})]}),G.asignaturas&&G.asignaturas.length>0&&c.jsxs("div",{children:[c.jsx("span",{className:"text-xs font-medium text-slate-600 dark:text-slate-400",children:"Asignaturas:"}),c.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[G.asignaturas.slice(0,2).map(q=>c.jsx("span",{className:"inline-flex px-2 py-1 text-xs bg-green-100 text-green-700 rounded dark:bg-green-900 dark:text-green-300",children:q},q)),G.asignaturas.length>2&&c.jsxs("span",{className:"inline-flex px-2 py-1 text-xs bg-slate-100 text-slate-600 rounded dark:bg-slate-600 dark:text-slate-400",children:["+",G.asignaturas.length-2]})]})]}),(!G.cursos||G.cursos.length===0)&&(!G.asignaturas||G.asignaturas.length===0)&&c.jsx("span",{className:"text-xs text-slate-400 italic",children:"Sin asignaciones"})]}),G.profile!==jt.ESTUDIANTE&&G.profile!==jt.PROFESORADO&&c.jsx("span",{className:"text-xs text-slate-400",children:"-"})]}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-center space-x-2",children:[c.jsx("button",{onClick:()=>R(G),title:"Editar",className:"text-yellow-600 hover:text-yellow-800 p-1 rounded-full hover:bg-yellow-100 dark:hover:bg-yellow-900/40",children:"✏️"}),c.jsx("button",{onClick:()=>F(G.email),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},G.email))})]}),re.length===0&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:t.length===0?"No hay usuarios registrados.":"No se encontraron usuarios con los filtros aplicados."})})]})]})]}),s==="Monitor de Uso"&&c.jsx(tye,{})]})},qm="seguimiento_dual_records",Cye=t=>{const e=t.data(),r=n=>n&&typeof n.toDate=="function"?n.toDate().toISOString().split("T")[0]:n;return{id:t.id,...e,fechaDesvinculacion:r(e.fechaDesvinculacion),fecha1raSupervision1erSemestre:r(e.fecha1raSupervision1erSemestre),fecha2daSupervision1erSemestre:r(e.fecha2daSupervision1erSemestre),fecha1raSupervision2doSemestre:r(e.fecha1raSupervision2doSemestre),fecha2daSupervision2doSemestre:r(e.fecha2daSupervision2doSemestre),fechaSupervisionExcepcional:r(e.fechaSupervisionExcepcional)}},Eye=t=>{const e=Yt(kt(vt,qm),Pr("nombreEstudiante","asc"));return mr(e,n=>{const s=n.docs.map(a=>Cye(a));t(s)},n=>{console.error("Error al suscribirse a los registros de seguimiento:",n),t([])})},W2=t=>{const e={...t};return["fechaDesvinculacion","fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaSupervisionExcepcional"].forEach(n=>{e[n]&&typeof e[n]=="string"&&(e[n]=or.fromDate(new Date(e[n]+"T00:00:00")))}),e},_ye=async t=>{try{const e=W2(t);return(await ps(kt(vt,qm),e)).id}catch(e){throw console.error("Error al crear el registro:",e),new Error("No se pudo crear el registro de seguimiento.")}},MD=async(t,e)=>{try{const r=ur(vt,qm,t),n=W2(e);await pi(r,n,{merge:!0})}catch(r){throw console.error("Error al actualizar el registro:",r),new Error("No se pudo actualizar el registro.")}},Sye=async t=>{try{const e=ur(vt,qm,t);await Ta(e)}catch(e){throw console.error("Error al eliminar el registro:",e),new Error("No se pudo eliminar el registro.")}},Tye=async t=>{const e=zw(vt),r=kt(vt,qm);let n=0,s=0;for(const a of t){const i=Yt(r,Xr("rutEstudiante","==",a.rutEstudiante)),o=await Cs(i);if(o.empty){const l=ur(r);e.set(l,W2(a)),s++}else{const l=o.docs[0].id,u=ur(vt,qm,l);e.set(u,W2(a),{merge:!0}),n++}}return await e.commit(),{updated:n,created:s}},Nye={Vinculado:"bg-green-100 text-green-800 dark:bg-green-900/40 dark:text-green-300",Desvinculado:"bg-red-100 text-red-800 dark:bg-red-900/40 dark:text-red-300","En proceso":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/40 dark:text-yellow-300",Empresa:"bg-purple-100 text-purple-800 dark:bg-purple-900/40 dark:text-purple-300"},Bye=t=>{if(!t||t===""||t==="N/A"||t==="Pendiente")return null;try{if(typeof t=="number"){const e=new Date(1900,0,1),r=new Date(e.getTime()+(t-2)*24*60*60*1e3);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}if(t instanceof Date)return isNaN(t.getTime())?null:t.toISOString().split("T")[0];if(typeof t=="string"){const e=t.trim();if(e==="")return null;const r=new Date(e);return isNaN(r.getTime())?null:r.toISOString().split("T")[0]}return null}catch(e){return console.warn("Error parsing date:",t,e),null}},kye=t=>{if(typeof t=="boolean")return t;if(typeof t=="string"){const e=t.toLowerCase().trim();return["true","verdadero","sí","si","yes","1","x"].includes(e)}return typeof t=="number"?t===1:!1},Iye=({record:t,onSave:e,onClose:r})=>{const[n,s]=Z.useState(t),a="w-full border-slate-300 rounded-md dark:bg-slate-700 dark:border-slate-600 dark:text-white",i=l=>{const{name:u,value:d,type:h,checked:m}=l.target;s(g=>({...g,[u]:h==="checkbox"?m:d}))},o=()=>{e(n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 flex items-center justify-center p-4",onClick:r,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl animate-fade-in-up",onClick:l=>l.stopPropagation(),children:[c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Supervisión"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:t.nombreEstudiante})]})]}),c.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-4 text-slate-700 dark:text-slate-300",children:[c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"1er Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s1-${t.id}`,type:"date",name:"fecha1raSupervision1erSemestre",value:n.fecha1raSupervision1erSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision1erSemestre",checked:!!n.realizada1raSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s1-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s1-${t.id}`,type:"date",name:"fecha2daSupervision1erSemestre",value:n.fecha2daSupervision1erSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision1erSemestre",checked:!!n.realizada2daSupervision1erSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"2do Semestre"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f1s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 1ra Supervisión"}),c.jsx("input",{id:`f1s2-${t.id}`,type:"date",name:"fecha1raSupervision2doSemestre",value:n.fecha1raSupervision2doSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada1raSupervision2doSemestre",checked:!!n.realizada1raSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]}),c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`f2s2-${t.id}`,className:"text-sm font-medium",children:"Fecha 2da Supervisión"}),c.jsx("input",{id:`f2s2-${t.id}`,type:"date",name:"fecha2daSupervision2doSemestre",value:n.fecha2daSupervision2doSemestre||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizada2daSupervision2doSemestre",checked:!!n.realizada2daSupervision2doSemestre,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Supervisión Excepcional"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4 mt-2",children:[c.jsxs("div",{className:"space-y-1",children:[c.jsx("label",{htmlFor:`fex-${t.id}`,className:"text-sm font-medium",children:"Fecha Supervisión"}),c.jsx("input",{id:`fex-${t.id}`,type:"date",name:"fechaSupervisionExcepcional",value:n.fechaSupervisionExcepcional||"",onChange:i,className:a})]}),c.jsxs("label",{className:"flex items-center gap-2 pt-6",children:[c.jsx("input",{type:"checkbox",name:"realizadaSupervisionExcepcional",checked:!!n.realizadaSupervisionExcepcional,onChange:i,className:"h-5 w-5 rounded text-amber-500"}),c.jsx("span",{children:"Realizada"})]})]})]}),c.jsxs("fieldset",{className:"border p-4 rounded-lg dark:border-slate-600",children:[c.jsx("legend",{className:"font-semibold text-lg px-2",children:"Maestro Guía (Empresa)"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-2",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-nombre-${t.id}`,className:"text-sm font-medium",children:"Nombre Maestro Guía"}),c.jsx("input",{id:`mg-nombre-${t.id}`,type:"text",name:"nombreMaestroGuia",value:n.nombreMaestroGuia||"",onChange:i,className:a+" mt-1"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:`mg-contacto-${t.id}`,className:"text-sm font-medium",children:"Contacto (Email/Teléfono)"}),c.jsx("input",{id:`mg-contacto-${t.id}`,type:"text",name:"contactoMaestroGuia",value:n.contactoMaestroGuia||"",onChange:i,className:a+" mt-1"})]})]})]})]})]}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:r,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Cerrar"}),c.jsx("button",{type:"button",onClick:o,className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Cambios"})]})]})})},Fye=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState(!0),s=Z.useMemo(()=>({nombreEstudiante:"",rutEstudiante:"",curso:vh[0],profesorTutorEmpresa:"",rutEmpresa:"",nombreEmpresa:"",direccionEmpresa:"",comuna:"",estado:fE[0],fechaDesvinculacion:"",motivoDesvinculacion:""}),[]),[a,i]=Z.useState(s),[o,l]=Z.useState(null),[u,d]=Z.useState(""),[h,m]=Z.useState({curso:"",empresa:"",estado:"",comuna:"",profesor:""}),[g,b]=Z.useState(null),[y,_]=Z.useState(null),[T,k]=Z.useState(!1),[D,M]=Z.useState(null);Z.useEffect(()=>{n(!0);const G=Eye(q=>{e(q),n(!1)});return()=>G()},[]);const P=Z.useCallback(G=>{const{name:q,value:W}=G.target;i(ie=>({...ie,[q]:W}))},[]),L=Z.useCallback(G=>{const{name:q,value:W}=G.target;m(ie=>({...ie,[q]:W}))},[]),C=Z.useCallback(()=>{i(s),l(null),b(null)},[s]),E=async G=>{G.preventDefault(),b(null);const W=["nombreEstudiante","rutEstudiante","nombreEmpresa"].find(ie=>{var j;return!((j=a[ie])!=null&&j.trim())});if(W){b(`El campo '${W}' es obligatorio.`);return}try{o?await MD(o,a):await _ye(a),C()}catch(ie){console.error(ie),b("No se pudo guardar el registro.")}},B=Z.useCallback(G=>{window.scrollTo({top:0,behavior:"smooth"}),l(G.id),i(G)},[]),O=async G=>{if(window.confirm("¿Está seguro de que desea eliminar este registro?"))try{await Sye(G)}catch(q){console.error(q),b("No se pudo eliminar el registro.")}},R=G=>{M(G),k(!0)},F=()=>{M(null),k(!1)},Q=async G=>{try{await MD(G.id,G),F()}catch(q){console.error(q),alert("No se pudieron guardar los cambios de supervisión.")}},H=()=>{const G=["Nombre","RUT","Curso 2025","Profesor Tutor","1° Visita 1° Semestre","Realizada 1° Visita S1","2° Visita 1° Semestre","Realizada 2° Visita S1","Visita Emergencia 1° Semestre","3° Visita","Realizada 3° Visita S2","4° Visita","Realizada 4° Visita S2","Empresa","RUT-Empresa","Dirección","Comuna","Estado","Fecha de Desvinculación","Motivo Desvinculación","Maestro Guía","Correo maestro guía"],q=Vl.aoa_to_sheet([G]),W=Vl.book_new();Vl.book_append_sheet(W,q,"Plantilla"),kT(W,"Plantilla_Seguimiento_Dual.xlsx")},ne=G=>{var ie;const q=(ie=G.target.files)==null?void 0:ie[0];if(!q)return;_({message:"Procesando archivo...",isError:!1});const W=new FileReader;W.onload=async j=>{var Y;try{const ee=new Uint8Array((Y=j.target)==null?void 0:Y.result),te=Mx(ee,{type:"array",cellDates:!0,dateNF:"yyyy-mm-dd"}),ce=te.SheetNames[0],be=te.Sheets[ce],he=Vl.sheet_to_json(be,{raw:!1,dateNF:"yyyy-mm-dd"});if(he.length===0)throw new Error("El archivo está vacío.");const fe={nombre:"nombreEstudiante",rut:"rutEstudiante","curso 2025":"curso","profesor tutor":"profesorTutorEmpresa","1° visita 1° semestre":"fecha1raSupervision1erSemestre","realizada 1° visita s1":"realizada1raSupervision1erSemestre","2° visita 1° semestre":"fecha2daSupervision1erSemestre","realizada 2° visita s1":"realizada2daSupervision1erSemestre","visita emergencia 1° semestre":"fechaSupervisionExcepcional","3° visita":"fecha1raSupervision2doSemestre","realizada 3° visita s2":"realizada1raSupervision2doSemestre","4° visita":"fecha2daSupervision2doSemestre","realizada 4° visita s2":"realizada2daSupervision2doSemestre",empresa:"nombreEmpresa","rut-empresa":"rutEmpresa",dirección:"direccionEmpresa",comuna:"comuna",estado:"estado","fecha de desvinculación":"fechaDesvinculacion","motivo desvinculación":"motivoDesvinculacion","maestro guía":"nombreMaestroGuia","correo maestro guía":"contactoMaestroGuia"},ge=Object.keys(he[0]).map(tt=>tt.trim().toLowerCase()),oe=["nombre","rut","curso 2025","empresa","estado"].find(tt=>!ge.includes(tt));if(oe)throw new Error(`Falta la columna requerida: '${oe}'`);const Ue=he.map((tt,Fe)=>{try{const Ee={};for(const De in tt){const Qe=fe[De.trim().toLowerCase()];if(Qe){let $e=tt[De];["fecha1raSupervision1erSemestre","fecha2daSupervision1erSemestre","fechaSupervisionExcepcional","fecha1raSupervision2doSemestre","fecha2daSupervision2doSemestre","fechaDesvinculacion"].includes(Qe)?($e=Bye($e),$e&&(Ee[Qe]=$e)):Qe.includes("realizada")?Ee[Qe]=kye($e):$e!=null&&$e!==""&&(Ee[Qe]=String($e).trim())}}return!Ee.nombreEstudiante||!Ee.rutEstudiante?(console.warn(`Fila ${Fe+2}: Faltan campos requeridos`),null):Ee}catch(Ee){return console.error(`Error procesando fila ${Fe+2}:`,Ee),null}}).filter(tt=>tt!==null);if(console.log("Registros procesados:",Ue),Ue.length>0){const{updated:tt,created:Fe}=await Tye(Ue);_({message:`Carga exitosa. ${Fe} registros creados, ${tt} actualizados.`,isError:!1})}else _({message:"No se encontraron registros válidos para procesar. Verifique el formato del archivo.",isError:!0})}catch(ee){console.error("Error completo:",ee),_({message:`Error al procesar el archivo: ${ee.message}. Verifique que las fechas estén en formato correcto.`,isError:!0})}},W.readAsArrayBuffer(q)},J="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",re=Z.useMemo(()=>t.filter(G=>(u===""||G.nombreEstudiante.toLowerCase().includes(u.toLowerCase())||G.nombreEmpresa.toLowerCase().includes(u.toLowerCase())||G.rutEstudiante.includes(u))&&(h.curso===""||G.curso===h.curso)&&(h.empresa===""||G.nombreEmpresa===h.empresa)&&(h.estado===""||G.estado===h.estado)&&(h.comuna===""||G.comuna===h.comuna)&&(h.profesor===""||G.profesorTutorEmpresa===h.profesor)).sort((G,q)=>G.nombreEstudiante.localeCompare(q.nombreEstudiante)),[t,u,h]);return Z.useMemo(()=>{const G=new Set,q=new Set;return t.forEach(W=>{W.nombreEmpresa&&G.add(W.nombreEmpresa),W.comuna&&q.add(W.comuna)}),{empresas:Array.from(G).sort(),comunas:Array.from(q).sort()}},[t]),r?c.jsx("div",{className:"text-center py-10",children:"Cargando registros..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo Gestión Pedagógica LIR",className:"w-12 h-12 object-contain"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento de Práctica Dual"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:o?"Editando registro existente.":"Registre un nuevo estudiante en práctica."})]})]}),c.jsxs("form",{onSubmit:E,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Estudiante"}),c.jsx("input",{type:"text",name:"nombreEstudiante",value:a.nombreEstudiante,onChange:P,className:J,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Estudiante"}),c.jsx("input",{type:"text",name:"rutEstudiante",value:a.rutEstudiante,onChange:P,className:J,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsx("select",{name:"curso",value:a.curso,onChange:P,className:J,required:!0,children:vh.map(G=>c.jsx("option",{value:G,children:G},G))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Profesor Tutor"}),c.jsxs("select",{name:"profesorTutorEmpresa",value:a.profesorTutorEmpresa,onChange:P,className:J,children:[c.jsx("option",{value:"",children:"Seleccione un profesor"}),eS.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Empresa"}),c.jsx("input",{type:"text",name:"nombreEmpresa",value:a.nombreEmpresa,onChange:P,className:J,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"RUT Empresa"}),c.jsx("input",{type:"text",name:"rutEmpresa",value:a.rutEmpresa,onChange:P,className:J})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Dirección Empresa"}),c.jsx("input",{type:"text",name:"direccionEmpresa",value:a.direccionEmpresa,onChange:P,className:J})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Comuna"}),c.jsx("input",{type:"text",name:"comuna",value:a.comuna,onChange:P,className:J})]}),c.jsxs("div",{className:"lg:col-span-4",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Estado"}),c.jsx("select",{name:"estado",value:a.estado,onChange:P,className:J,children:fE.map(G=>c.jsx("option",{value:G,children:G},G))})]})]}),a.estado==="Desvinculado"&&c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4 border border-red-200 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Fecha de Desvinculación"}),c.jsx("input",{type:"date",name:"fechaDesvinculacion",value:a.fechaDesvinculacion||"",onChange:P,className:`${J} border-red-300`})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-red-700 dark:text-red-300 mb-1",children:"Motivo de Desvinculación"}),c.jsx("input",{type:"text",name:"motivoDesvinculacion",value:a.motivoDesvinculacion||"",onChange:P,className:`${J} border-red-300`})]})]}),g&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:g}),c.jsxs("div",{className:"flex justify-end items-center gap-4",children:[o&&c.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900",children:o?"Actualizar":"Agregar"})]})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Carga Masiva"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start",children:[c.jsx("button",{onClick:H,className:"bg-green-100 text-green-700 font-semibold py-2 px-4 rounded-lg hover:bg-green-200",children:"Descargar Plantilla Excel"}),c.jsx("input",{type:"file",onChange:ne,accept:".xlsx, .xls",className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]}),y&&c.jsx("p",{className:`text-sm p-2 rounded-md mt-4 ${y.isError?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:y.message})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:"https://res.cloudinary.com/dwncmu1wu/image/upload/v1754320187/ChatGPT_Image_4_ago_2025_11_09_32_a.m._nb456n.png",alt:"Logo LIR",className:"w-8 h-8 object-contain"}),c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Estudiantes"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por estudiante, empresa o RUT...",value:u,onChange:G=>d(G.target.value),className:`${J} md:col-span-2 lg:col-span-1`}),c.jsxs("select",{name:"curso",value:h.curso,onChange:L,className:J,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),vh.map(G=>c.jsx("option",{children:G},G))]}),c.jsxs("select",{name:"estado",value:h.estado,onChange:L,className:J,children:[c.jsx("option",{value:"",children:"Todos los Estados"}),fE.map(G=>c.jsx("option",{children:G},G))]}),c.jsxs("select",{name:"profesor",value:h.profesor,onChange:L,className:J,children:[c.jsx("option",{value:"",children:"Todos los Profesores"}),eS.map(G=>c.jsx("option",{children:G},G))]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Empresa"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Profesor Tutor"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:re.map(G=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700",children:[c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-200",children:G.nombreEstudiante}),c.jsx("div",{className:"text-sm text-slate-500 dark:text-slate-400",children:G.curso})]}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.nombreEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:G.profesorTutorEmpresa}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Nye[G.estado]}`,children:G.estado})}),c.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-center text-sm space-x-2",children:[c.jsx("button",{onClick:()=>R(G),className:"text-blue-600 hover:underline",children:"Supervisión"}),c.jsx("button",{onClick:()=>B(G),className:"text-yellow-600 hover:underline",children:"Editar"}),c.jsx("button",{onClick:()=>O(G.id),className:"text-red-600 hover:underline",children:"Eliminar"})]})]},G.id))})]})})]}),T&&D&&c.jsx(Iye,{record:D,onClose:F,onSave:Q})]})},l7="actividades_remotas",Dye="respuestas_actividades",Rye="usuarios",LT=t=>{var r,n,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},Lye=t=>{const e=Yt(kt(vt,l7),Pr("fechaCreacion","desc"));return mr(e,n=>{const s=n.docs.map(a=>LT(a));t(s)},n=>{console.error("Error al suscribirse a las actividades:",n),t([])})},Uye=async t=>{try{const e={...t,fechaCreacion:or.fromDate(new Date),plazoEntrega:or.fromDate(new Date(t.plazoEntrega+"T00:00:00"))};return(await ps(kt(vt,l7),e)).id}catch(e){throw console.error("Error al crear la actividad:",e),new Error("No se pudo crear la actividad.")}},Mye=t=>{const e=Yt(kt(vt,Dye));return mr(e,n=>{const s=n.docs.map(a=>LT(a));t(s)},n=>{console.error("Error al suscribirse a las respuestas:",n),t([])})},Pye=t=>{const e=Yt(kt(vt,Rye));return mr(e,n=>{const s=n.docs.map(a=>LT(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},GE={Quiz:[5,10,15],"Términos Pareados":[5,10,15],Desarrollo:[1,2,3],"Comprensión de Lectura":[1,2,3]},jye=t=>new Promise((e,r)=>{const n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=s=>r(s)}),Oye=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState([]),[s,a]=Z.useState([]),[i,o]=Z.useState(null),[l,u]=Z.useState(!1),[d,h]=Z.useState(!1),[m,g]=Z.useState(!0),[b,y]=Z.useState(null),[_,T]=Z.useState(""),[k,D]=Z.useState(null),[M,P]=Z.useState([]),L={asignatura:ol[0],nivel:_2[0],contenido:"",plazoEntrega:new Date().toISOString().split("T")[0],tipos:[],cantidadPreguntas:{},cursosDestino:[],estudiantesDestino:[],recursos:{instrucciones:"",enlaces:"",archivos:[]}},[C,E]=Z.useState(L);Z.useEffect(()=>{g(!0);const he=Lye(e),fe=Mye(n),ge=Pye(de=>{a(de),g(!1)});return()=>{he(),fe(),ge()}},[]);const B=he=>{E(fe=>({...fe,[he.target.name]:he.target.value}))},O=he=>{E(fe=>({...fe,recursos:{...fe.recursos,[he.target.name]:he.target.value}}))},R=he=>{he.target.files&&P(Array.from(he.target.files))},F=he=>{E(fe=>{const ge=fe.tipos.includes(he)?fe.tipos.filter(oe=>oe!==he):[...fe.tipos,he],de={...fe.cantidadPreguntas};return ge.includes(he)?de[he]||(de[he]=GE[he][0]):delete de[he],{...fe,tipos:ge,cantidadPreguntas:de}})},Q=(he,fe)=>{E(ge=>({...ge,cantidadPreguntas:{...ge.cantidadPreguntas,[he]:fe}}))},H=he=>{E(fe=>{var de;const ge=(de=fe.cursosDestino)!=null&&de.includes(he)?fe.cursosDestino.filter(oe=>oe!==he):[...fe.cursosDestino||[],he];return{...fe,cursosDestino:ge}})},ne=he=>{E(fe=>{var de;const ge=(de=fe.estudiantesDestino)!=null&&de.includes(he)?fe.estudiantesDestino.filter(oe=>oe!==he):[...fe.estudiantesDestino||[],he];return{...fe,estudiantesDestino:ge}})},J=()=>{const{tipos:he,contenido:fe,asignatura:ge,nivel:de,cantidadPreguntas:oe}=C;let Ue=`Eres un experto diseñador de actividades pedagógicas. Genera un objeto JSON que se ajuste al esquema, sin texto adicional.

Contenido base: "${fe}"
Asignatura: ${ge}
Nivel: ${de}

Genera los siguientes elementos:
- **introduccion**: Una breve introducción motivadora para el estudiante sobre el tema: "${fe}".
- **actividades**: Un objeto que contiene las actividades. Cada actividad es una propiedad con su nombre como clave:
`;return he.forEach(tt=>{const Fe=oe[tt]||GE[tt][0];switch(tt){case"Quiz":Ue+=`- **Quiz**: Un array de ${Fe} objetos. Cada objeto debe tener: "pregunta" (string), "opciones" (array de 4 strings) y "respuestaCorrecta" (string).
`;break;case"Comprensión de Lectura":Ue+=`- **Comprensión de Lectura**: Un array de ${Fe} objetos. Cada objeto debe tener "texto" (string de 150-200 palabras) y "preguntas" (un array de 4 objetos, cada uno con "pregunta", "opciones" y "respuestaCorrecta").
`;break;case"Términos Pareados":Ue+=`- **Términos Pareados**: Un array de ${Fe} objetos. Cada objeto debe tener "concepto" (string) y "definicion" (string).
`;break;case"Desarrollo":Ue+=`- **Desarrollo**: Un array de ${Fe} objetos. Cada objeto debe tener una clave "pregunta" (string con la pregunta) y una clave "rubrica" (string con la rúbrica de evaluación).
`;break}}),Ue};function re(he,fe){if(he==="Desarrollo"){if(Array.isArray(fe))return fe.map(ge=>{if(typeof ge=="string"){const de=ge.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return de?{pregunta:de[1].trim(),rubrica:de[2].trim()}:{pregunta:ge.trim(),rubrica:""}}return ge&&typeof ge=="object"?{pregunta:ge.pregunta||ge.Pregunta||ge.texto||"",rubrica:ge.rubrica||ge.Rubrica||ge.rúbrica||ge.Rúbrica||""}:{pregunta:String(ge),rubrica:""}});if(typeof fe=="string")return fe.split(/\n\n|\n- |\d+\. /).map(ge=>{const de=ge.match(/^(.*?)(?:R[úu]brica:|RUBRICA:|Rubrica:)(.*)$/is);return de?{pregunta:de[1].trim(),rubrica:de[2].trim()}:{pregunta:ge.trim(),rubrica:""}}).filter(ge=>ge.pregunta)}if(he==="Términos Pareados"){if(Array.isArray(fe))return fe.map((ge,de)=>{if(typeof ge=="string"){const oe=ge.match(/^(.+?)[\s:-–]+(.+)$/);return oe?{id:de,concepto:oe[1].trim(),definicion:oe[2].trim()}:{id:de,concepto:ge.trim(),definicion:""}}return ge&&typeof ge=="object"?{id:de,concepto:ge.concepto||ge.termino||"",definicion:ge.definicion||ge.significado||""}:{id:de,concepto:String(ge),definicion:""}});if(typeof fe=="object"&&fe!==null)return Object.entries(fe).map(([ge,de],oe)=>({id:oe,concepto:ge,definicion:de}));if(typeof fe=="string")return fe.split(/\n|;/).map((ge,de)=>{const oe=ge.match(/^(.+?)[\s:-–]+(.+)$/);return oe?{id:de,concepto:oe[1].trim(),definicion:oe[2].trim()}:{id:de,concepto:ge.trim(),definicion:""}}).filter(ge=>ge.concepto)}if(he==="Comprensión de Lectura"){if(fe&&typeof fe=="object"&&Array.isArray(fe.preguntas))return{texto:fe.texto||"",preguntas:fe.preguntas.map(ge=>({pregunta:ge.pregunta||ge.Pregunta||"",opciones:ge.opciones||ge.Opciones||[],respuestaCorrecta:ge.respuestaCorrecta||ge.respuesta||""}))};if(Array.isArray(fe)){const ge=fe.find(de=>de&&typeof de=="object"&&"texto"in de&&"preguntas"in de);return ge?{texto:ge.texto||"",preguntas:(ge.preguntas||[]).map(de=>({pregunta:de.pregunta||de.Pregunta||"",opciones:de.opciones||de.Opciones||[],respuestaCorrecta:de.respuestaCorrecta||de.respuesta||""}))}:{texto:fe.map(de=>typeof de=="string"?de:JSON.stringify(de)).join(`
`),preguntas:[]}}if(typeof fe=="string"){const[ge,de]=fe.split(/Preguntas:|\nPreguntas:/i);let oe=[];return de&&(oe=de.split(/\n- |\n\d+\. /).filter(Boolean).map(Ue=>{const tt=Ue.split(/Opciones:|\nOpciones:/i),Fe=tt[0].trim();let Ee=[],De="";tt[1]&&(Ee=tt[1].split(/;|\n|,/).map($e=>$e.trim()).filter(Boolean));const Qe=Ue.match(/Respuesta\s*correcta\s*:?\s*(.*)/i);return Qe&&(De=Qe[1].trim()),{pregunta:Fe,opciones:Ee,respuestaCorrecta:De}})),{texto:(ge==null?void 0:ge.trim())||fe,preguntas:oe}}}return fe}const G=async he=>{var fe;if(he.preventDefault(),!C.contenido.trim()||C.tipos.length===0){y("Contenido y al menos un tipo de actividad son obligatorios.");return}h(!0),y(null);try{const ge=await Promise.all(M.map(async lt=>({nombre:lt.name,url:await jye(lt)}))),de="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",Ue=new $i(de).getGenerativeModel({model:"gemini-1.5-flash-latest"}),tt=J(),Qe=(await(await(await Ue.generateContent(tt)).response).text()).replace(/^```json\s*|```\s*$/g,""),$e=JSON.parse(Qe),ut={};for(const lt of C.tipos)ut[lt]=re(lt,(fe=$e.actividades)==null?void 0:fe[lt]);const Et={id:"",fechaCreacion:new Date().toISOString(),...C,recursos:{...C.recursos,archivos:ge},introduccion:$e.introduccion,generatedContent:ut};D(Et)}catch(ge){console.error("Error al generar actividad con IA",ge),y("Error al generar la actividad. Por favor, revise el contenido e inténtelo de nuevo. Detalle: "+ge.message)}finally{h(!1)}},q=async()=>{if(k)try{await Uye(k),E(L),P([]),u(!1),D(null)}catch(he){console.error("Error al guardar la actividad:",he),y("No se pudo guardar la actividad en la base de datos.")}},W=Z.useMemo(()=>{var ge,de;if(!i||!s)return[];const he=s.filter(oe=>{var Ue;return oe.profile===jt.ESTUDIANTE&&((Ue=i.cursosDestino)==null?void 0:Ue.includes(oe.curso||""))}).map(oe=>oe.nombreCompleto),fe=i.estudiantesDestino||[];if(!((ge=i.cursosDestino)!=null&&ge.length)&&!((de=i.estudiantesDestino)!=null&&de.length)){const oe=i.nivel.charAt(0);return s.filter(Ue=>{var tt;return Ue.profile===jt.ESTUDIANTE&&((tt=Ue.curso)==null?void 0:tt.startsWith(oe))}).map(Ue=>Ue.nombreCompleto).sort()}return Array.from(new Set([...he,...fe])).sort()},[i,s]),ie=Z.useMemo(()=>r.filter(he=>he.actividadId===(i==null?void 0:i.id)),[r,i]),j=Z.useMemo(()=>s.filter(he=>he.profile===jt.ESTUDIANTE).sort((he,fe)=>he.nombreCompleto.localeCompare(fe.nombreCompleto)),[s]),Y=Z.useMemo(()=>_.trim()?j.filter(he=>he.nombreCompleto.toLowerCase().includes(_.toLowerCase())):j,[j,_]),ee=()=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:[i==null?void 0:i.asignatura," - ",i==null?void 0:i.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:["Nivel: ",i==null?void 0:i.nivel," | Plazo: ",i==null?void 0:i.plazoEntrega]})]}),c.jsx("button",{onClick:()=>o(null),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsxs("div",{className:"mt-6 border-t dark:border-slate-700 pt-6",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-700 dark:text-slate-300 mb-4",children:"Resultados de Estudiantes"}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estudiante"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Estado"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Puntaje"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha Completado"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:W.map(he=>{const fe=ie.find(ge=>ge.estudianteId===he);return c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200",children:he}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:fe?c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-green-100 text-green-800",children:"Completado"}):c.jsx("span",{className:"px-2 py-1 font-semibold text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pendiente"})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:fe?`${fe.puntaje}/${fe.puntajeMaximo}`:"-"}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600",children:fe?new Date(fe.fechaCompletado).toLocaleString("es-CL"):"-"})]},he)})})]})})]})]}),te=()=>{var he,fe;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nueva Actividad Remota"}),c.jsx("button",{onClick:()=>u(!1),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver al listado"})]}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Complete el formulario y la IA generará una actividad interactiva para sus estudiantes."}),c.jsxs("form",{onSubmit:G,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Asignatura"}),c.jsx("select",{name:"asignatura",value:C.asignatura,onChange:B,className:"w-full border-slate-300 rounded-md shadow-sm",children:ol.map(ge=>c.jsx("option",{value:ge,children:ge},ge))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Nivel"}),c.jsx("select",{name:"nivel",value:C.nivel,onChange:B,className:"w-full border-slate-300 rounded-md shadow-sm",children:_2.map(ge=>c.jsx("option",{value:ge,children:ge},ge))})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Recursos de Aprendizaje (Opcional)"}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Instrucciones de estudio"}),c.jsx("textarea",{name:"instrucciones",value:(he=C.recursos)==null?void 0:he.instrucciones,onChange:O,placeholder:"Ej: Lee el siguiente texto y luego responde...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Enlaces (videos, documentos, etc.)"}),c.jsx("textarea",{name:"enlaces",value:(fe=C.recursos)==null?void 0:fe.enlaces,onChange:O,placeholder:"Pega un enlace por línea...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-1",children:"Adjuntar archivos (PDF, imágenes, etc.)"}),c.jsx("input",{type:"file",multiple:!0,onChange:R,className:"block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100"})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg space-y-4 bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-700 dark:text-slate-300",children:"Destinatarios"}),c.jsx("p",{className:"text-sm text-slate-500",children:"Seleccione cursos o estudiantes. Si no selecciona ninguno, la actividad será visible para todo el nivel."}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Cursos"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:ca.map(ge=>{var de;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(de=C.cursosDestino)==null?void 0:de.includes(ge),onChange:()=>H(ge),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700",children:ge})]},ge)})})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Estudiantes"}),c.jsx("input",{type:"text",placeholder:"Buscar...",value:_,onChange:ge=>T(ge.target.value),className:"w-full border-slate-300 rounded-md shadow-sm mb-2"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 max-h-40 overflow-y-auto p-2 bg-white rounded",children:Y.map(ge=>{var de;return c.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-slate-100 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:(de=C.estudiantesDestino)==null?void 0:de.includes(ge.nombreCompleto),onChange:()=>ne(ge.nombreCompleto),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 truncate",title:ge.nombreCompleto,children:ge.nombreCompleto})]},ge.id)})})]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-slate-600 mb-2",children:"Tipos de Actividad"}),c.jsx("div",{className:"space-y-3",children:ZY.map(ge=>c.jsxs("div",{className:"p-3 border rounded-lg has-[:checked]:bg-amber-50 has-[:checked]:border-amber-300",children:[c.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[c.jsx("input",{type:"checkbox",checked:C.tipos.includes(ge),onChange:()=>F(ge),className:"h-4 w-4 rounded text-amber-500 focus:ring-amber-400"}),c.jsx("span",{className:"text-sm font-medium text-slate-700 flex-grow",children:ge})]}),C.tipos.includes(ge)&&c.jsxs("div",{className:"mt-3 pl-8 flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-slate-500",children:"Cantidad:"}),GE[ge].map(de=>c.jsx("button",{type:"button",onClick:()=>Q(ge,de),className:`px-3 py-1 rounded-full font-semibold text-xs ${C.cantidadPreguntas[ge]===de?"bg-amber-500 text-white":"bg-slate-200"}`,children:de},de))]})]},ge))})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsxs("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 mb-1",children:["Contenido ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("textarea",{name:"contenido",value:C.contenido,onChange:B,required:!0,rows:4,placeholder:"Ingrese los temas, conceptos clave o el texto base...",className:"w-full border-slate-300 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"plazoEntrega",className:"block text-sm font-medium text-slate-600 mb-1",children:"Plazo de Entrega"}),c.jsx("input",{type:"date",name:"plazoEntrega",value:C.plazoEntrega,onChange:B,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm"})]})]}),b&&c.jsx("p",{className:"text-red-600 bg-red-100 p-3 rounded-md mt-4",children:b}),c.jsx("div",{className:"pt-4 text-right",children:c.jsx("button",{type:"submit",disabled:d,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:d?c.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Generar y Previsualizar"})})]})]})},ce=()=>{var he;return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"Previsualización de la Actividad"}),c.jsx("p",{className:"text-slate-500 mt-1 mb-6",children:"Revisa el contenido generado. Si todo está correcto, confirma para asignar la actividad."}),c.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto p-4 bg-slate-50 rounded-lg border",children:[c.jsxs("div",{className:"p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-sky-800 mb-2",children:"Introducción para el Estudiante"}),c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:k==null?void 0:k.introduccion})]}),(k==null?void 0:k.recursos)&&(k.recursos.instrucciones||k.recursos.enlaces||((he=k.recursos.archivos)==null?void 0:he.length))&&c.jsxs("div",{className:"p-4 bg-indigo-50 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h3",{className:"font-bold text-indigo-800 mb-2",children:"Recursos de Aprendizaje"}),c.jsxs("div",{className:"space-y-3",children:[k.recursos.instrucciones&&c.jsx("p",{className:"text-slate-700 whitespace-pre-wrap",children:k.recursos.instrucciones}),k.recursos.enlaces&&c.jsx("div",{children:k.recursos.enlaces.split(`
`).map((fe,ge)=>fe.trim()&&c.jsx("a",{href:fe,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline truncate",children:fe},ge))}),k.recursos.archivos&&k.recursos.archivos.length>0&&c.jsx("ul",{className:"list-disc list-inside",children:k.recursos.archivos.map(fe=>c.jsx("li",{className:"text-slate-700",children:fe.nombre},fe.nombre))})]})]}),k==null?void 0:k.tipos.map(fe=>{const ge=k.generatedContent[fe];return ge?c.jsxs("div",{className:"p-4 border rounded-lg bg-white",children:[c.jsx("h3",{className:"text-xl font-bold mb-4",children:fe}),c.jsxs("div",{className:"space-y-4 text-sm",children:[fe==="Quiz"&&Array.isArray(ge)&&ge.map((de,oe)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[oe+1,". ",de.pregunta]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:de.opciones.map((Ue,tt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+tt),"."]})," ",Ue]},tt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",de.respuestaCorrecta]})]},oe)),fe==="Comprensión de Lectura"&&ge&&typeof ge=="object"&&Array.isArray(ge.preguntas)&&c.jsxs("div",{children:[c.jsx("p",{className:"whitespace-pre-wrap bg-slate-100 p-3 rounded-md mb-4",children:ge.texto}),ge.preguntas.map((de,oe)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[oe+1,". ",de.pregunta]}),c.jsx("ul",{className:"list-none pl-5 mt-2 space-y-1",children:de.opciones.map((Ue,tt)=>c.jsxs("li",{children:[c.jsxs("strong",{children:[String.fromCharCode(65+tt),"."]})," ",Ue]},tt))}),c.jsxs("p",{className:"text-xs text-green-600 font-semibold mt-2 p-1 bg-green-50 rounded inline-block",children:["R: ",de.respuestaCorrecta]})]},oe))]}),fe==="Términos Pareados"&&Array.isArray(ge)&&c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border border-slate-200",children:[c.jsx("thead",{className:"bg-slate-100",children:c.jsxs("tr",{children:[c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Concepto"}),c.jsx("th",{className:"text-left font-semibold p-2 border-b",children:"Definición"})]})}),c.jsx("tbody",{children:ge.map(de=>c.jsxs("tr",{className:"border-b last:border-b-0 hover:bg-slate-50",children:[c.jsx("td",{className:"p-2 align-top font-semibold text-slate-800",children:de.concepto}),c.jsx("td",{className:"p-2 align-top text-slate-700",children:de.definicion})]},de.id))})]})}),fe==="Desarrollo"&&Array.isArray(ge)&&ge.map((de,oe)=>c.jsxs("div",{className:"border-t pt-3 first:border-t-0",children:[c.jsxs("p",{className:"font-semibold",children:[oe+1,". ",de.pregunta]}),c.jsxs("p",{className:"text-sm text-slate-600 mt-2 p-2 bg-slate-100 rounded-md",children:[c.jsx("strong",{className:"font-semibold",children:"Rúbrica:"})," ",de.rubrica]})]},oe)),(fe==="Quiz"||fe==="Términos Pareados"||fe==="Desarrollo")&&!Array.isArray(ge)&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',c.jsx("strong",{children:fe}),'" no tiene el formato de array esperado. La IA pudo haber devuelto una respuesta en un formato no válido.']}),fe==="Comprensión de Lectura"&&(!ge||typeof ge!="object"||!Array.isArray(ge.preguntas))&&c.jsxs("div",{className:"text-red-600 text-sm p-3 bg-red-50 border border-red-200 rounded-md",children:['El contenido generado para "',c.jsx("strong",{children:"Comprensión de Lectura"}),'" no tiene el formato de objeto con preguntas esperado.']})]})]},fe):null})]}),c.jsxs("div",{className:"pt-6 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>D(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-6 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:q,className:"bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700",children:"Confirmar y Asignar"})]})]})},be=()=>c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Actividades Remotas"}),c.jsx("button",{onClick:()=>u(!0),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nueva"})]}),c.jsx("div",{className:"space-y-4",children:t.length>0?t.map(he=>{var de,oe;const fe=[];(de=he.cursosDestino)!=null&&de.length&&fe.push(`Cursos: ${he.cursosDestino.join(", ")}`),(oe=he.estudiantesDestino)!=null&&oe.length&&fe.push(`Estudiantes: ${he.estudiantesDestino.length}`);const ge=fe.length?fe.join(" | "):`Todo ${he.nivel}`;return c.jsx("div",{className:"p-4 border rounded-lg bg-slate-50 hover:bg-slate-100 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[he.asignatura," - ",he.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Destino: ",ge," | Creado: ",new Date(he.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("button",{onClick:()=>o(he),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Resultados"})]})},he.id)}):c.jsx("p",{className:"text-slate-500 text-center py-6",children:'No hay actividades creadas. Haga clic en "Crear Nueva" para comenzar.'})})]});return m?c.jsx("div",{className:"text-center py-10",children:"Cargando datos..."}):c.jsx("div",{className:"animate-fade-in",children:k?ce():i?ee():l?te():be()})},Qye="actividades_remotas",c7="respuestas_actividades",u7=t=>{var r,n,s,a,i,o;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,plazoEntrega:((a=(s=e.plazoEntrega)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.plazoEntrega,fechaCompletado:((o=(i=e.fechaCompletado)==null?void 0:i.toDate)==null?void 0:o.call(i).toISOString())||e.fechaCompletado}},Hye=(t,e)=>{if(!t.curso)return e([]),()=>{};const r=t.curso.charAt(0),n=Yt(kt(vt,Qye),Pr("fechaCreacion","desc"));return mr(n,s=>{const i=s.docs.map(o=>u7(o)).filter(o=>{var h,m,g,b;const l=!((h=o.cursosDestino)!=null&&h.length)&&!((m=o.estudiantesDestino)!=null&&m.length),u=((g=o.cursosDestino)==null?void 0:g.includes(t.curso))??!1,d=((b=o.estudiantesDestino)==null?void 0:b.includes(t.nombreCompleto))??!1;return u||d?!0:l?o.nivel.charAt(0)===r:!1});e(i)},s=>{console.error("Error al suscribirse a actividades disponibles:",s),e([])})},Vye=(t,e)=>{const r=Yt(kt(vt,c7),Xr("estudianteId","==",t));return mr(r,n=>{const s=n.docs.map(a=>u7(a));e(s)},n=>{console.error("Error al suscribirse a las respuestas del estudiante:",n),e([])})},zye=async t=>{try{const e={...t,fechaCompletado:or.fromDate(new Date)};return(await ps(kt(vt,c7),e)).id}catch(e){throw console.error("Error al guardar la respuesta:",e),new Error("No se pudo guardar la respuesta.")}},Gye=t=>[...t].sort(()=>Math.random()-.5),qye=(t,e)=>{if(e===0)return"1.0";const n=e*.6;let s;return t>=n?s=4+(t-n)*3/(e-n):s=1+t*3/(n||1),s=Math.max(1,Math.min(7,s)),s.toFixed(1)},PD=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Kye=({actividad:t,onComplete:e,currentUser:r})=>{var k,D,M,P;const[n,s]=Z.useState({}),[a,i]=Z.useState(!1),[o,l]=Z.useState(!1),[u,d]=Z.useState(!1),[h,m]=Z.useState({}),g=`progress-${r.id}-${t.id}`;Z.useEffect(()=>{const L={};t.tipos.forEach(C=>{if(C==="Términos Pareados"){const E=t.generatedContent[C];E&&(L[C]=Gye(E.map(B=>B.definicion)))}}),m(L);try{const C=localStorage.getItem(g);C&&s(JSON.parse(C))}catch(C){console.error("Could not load saved progress",C)}},[t,g]);const b=(L,C)=>{s(E=>({...E,[L]:C}))},y=()=>{l(!0),d(!1),setTimeout(()=>{try{localStorage.setItem(g,JSON.stringify(n)),d(!0),setTimeout(()=>d(!1),2e3)}catch(L){console.error("Could not save progress",L),alert("Error al guardar el progreso.")}finally{l(!1)}},500)},_=async()=>{i(!0);let L=0,C=0;const E=[],B={},O="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let R=null;R=new $i(O);for(const Q of t.tipos){const H=t.generatedContent[Q],ne=n[Q];if(Q==="Quiz"||Q==="Comprensión de Lectura"){const J=Q==="Quiz"?H:H.preguntas,re=ne||{};let G=0,q=0;J.forEach((W,ie)=>{q+=1,re[ie]===W.respuestaCorrecta&&(G+=1)}),L+=G,C+=q,E.push(`${Q}: ${G}/${q} correctas.`),B[Q]={puntaje:G,puntajeMaximo:q}}else if(Q==="Términos Pareados"){const J=H,re=ne||{};let G=0,q=0;J.forEach(W=>{q+=2,re[W.id]===W.definicion&&(G+=2)}),L+=G,C+=q,E.push(`${Q}: ${G/2}/${J.length} correctas.`),B[Q]={puntaje:G,puntajeMaximo:q}}else if(Q==="Desarrollo"){const J=H,re=ne||{};let G=0,q=0;for(let W=0;W<J.length;W++){const ie=J[W];if(q+=3,!R){E.push(`${Q} #${W+1}: No se pudo evaluar automáticamente.`);continue}try{Wl("Autoaprendizaje - Evaluar Desarrollo");const j=R.getGenerativeModel({model:"gemini-1.5-flash-latest"}),Y=`Evalúa la siguiente respuesta de un estudiante a la pregunta de desarrollo, basándote en la rúbrica proporcionada.
                        Pregunta: "${ie.pregunta}".
                        Rúbrica: "${ie.rubrica}".
                        Respuesta del estudiante: "${re[W]||""}".
                        
                        Tu respuesta DEBE ser un objeto JSON con dos claves:
                        1. "puntaje": un número entero de 0 a 3.
                        2. "feedback": una frase corta y constructiva para el estudiante.`,be=(await(await j.generateContent(Y)).response).text().replace(/^```json\s*|```\s*$/g,""),he=JSON.parse(be),fe=Math.max(0,Math.min(3,parseInt(he.puntaje,10)||0));G+=fe,E.push(`${Q} #${W+1}: Puntaje ${fe}/3. (${he.feedback})`)}catch(j){console.error("Error evaluating development question:",j),E.push(`${Q} #${W+1}: No se pudo evaluar automáticamente.`)}}L+=G,C+=q,B[Q]={puntaje:G,puntajeMaximo:q}}}let F;if(R){const Q=`
                Un estudiante ha completado una actividad sobre "${t.contenido}".
                Su puntaje total fue ${L} de ${C}.
                Detalle por sección: ${JSON.stringify(B)}
                Respuestas de desarrollo: ${JSON.stringify(n.Desarrollo||{})}
                
                Genera una retroalimentación detallada y constructiva en español. La respuesta DEBE ser un objeto JSON con la siguiente estructura:
                {
                  "resumenGeneral": "Un párrafo breve y motivador sobre el desempeño general.",
                  "areasDeFortaleza": ["Un array de 2 o 3 strings destacando lo que hizo bien."],
                  "areasDeMejora": ["Un array de 2 o 3 strings con áreas a mejorar."],
                  "planDeMejora": [{ "paso": "Repasar conceptos clave", "detalle": "Una sugerencia concreta."}],
                  "feedbackPorSeccion": { "Quiz": "Feedback específico para esta sección." }
                }
            `;try{Wl("Autoaprendizaje - Retroalimentación Detallada");const G=(await(await R.getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,"");F=JSON.parse(G)}catch(H){console.error("Error generating detailed feedback:",H)}}e({respuestas:n,puntaje:L,puntajeMaximo:C,retroalimentacion:`¡Buen trabajo! Tu puntaje total es ${L} de ${C}.`,calificacion:qye(L,C),puntajesPorSeccion:B},F),localStorage.removeItem(g),i(!1)},T=t.recursos&&(t.recursos.instrucciones||t.recursos.enlaces||((k=t.recursos.archivos)==null?void 0:k.length));return c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"p-4 bg-sky-50 dark:bg-sky-900/30 border-l-4 border-sky-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-sky-800 dark:text-sky-200 mb-2",children:"¡Hola!"}),c.jsx("p",{className:"text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:t.introduccion})]}),T&&c.jsxs("div",{className:"p-4 bg-indigo-50 dark:bg-indigo-900/30 border-l-4 border-indigo-400 rounded-r-lg",children:[c.jsx("h2",{className:"text-xl font-bold text-indigo-800 dark:text-indigo-200 mb-3",children:"Material de Estudio"}),c.jsxs("div",{className:"space-y-4",children:[((D=t.recursos)==null?void 0:D.instrucciones)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Instrucciones:"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 whitespace-pre-wrap",children:t.recursos.instrucciones})]}),((M=t.recursos)==null?void 0:M.enlaces)&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Enlaces:"}),t.recursos.enlaces.split(`
`).map((L,C)=>L.trim()&&c.jsx("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-500 hover:underline truncate",children:L},C))]}),((P=t.recursos)==null?void 0:P.archivos)&&t.recursos.archivos.length>0&&c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-slate-700 dark:text-slate-300",children:"Archivos:"}),c.jsx("ul",{className:"list-disc list-inside",children:t.recursos.archivos.map((L,C)=>c.jsx("li",{children:c.jsx("a",{href:L.url,download:L.nombre,className:"text-blue-500 hover:underline",children:L.nombre})},C))})]})]})]}),t.tipos.map(L=>{const C=t.generatedContent[L];if(!C)return null;switch(L){case"Quiz":case"Comprensión de Lectura":{const E=L==="Quiz",B=C,O=E?B:B.preguntas;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:L}),!E&&c.jsx("div",{className:"mb-4 whitespace-pre-wrap bg-slate-50 dark:bg-slate-700/50 p-3 rounded text-slate-700 dark:text-slate-300",children:B.texto}),c.jsx("div",{className:"space-y-6",children:O.map((R,F)=>c.jsxs("div",{children:[c.jsxs("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:[F+1,". ",R.pregunta]}),c.jsx("div",{className:"mt-2 space-y-2",children:R.opciones.map((Q,H)=>{var ne;return c.jsxs("label",{className:"flex items-center gap-3 p-3 rounded hover:bg-slate-100 dark:hover:bg-slate-700 cursor-pointer text-slate-600 dark:text-slate-300",children:[c.jsx("input",{type:"radio",name:`q-${L}-${F}-${t.id}`,value:Q,checked:((ne=n[L])==null?void 0:ne[F])===Q,onChange:()=>b(L,{...n[L]||{},[F]:Q}),className:"h-5 w-5 text-amber-500 focus:ring-amber-400"}),c.jsx("span",{children:Q})]},H)})})]},`${L}-${F}`))})]},L)}case"Términos Pareados":{const E=C,B=h[L]||[];return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:L}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Concepto"}),E.map(O=>c.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-700 rounded h-14 flex items-center justify-center text-center font-medium text-slate-700 dark:text-slate-300",children:O.concepto},O.id))]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("h4",{className:"font-semibold text-center text-slate-600 dark:text-slate-400",children:"Definición"}),E.map(O=>{var R;return c.jsx("div",{className:"h-14 flex items-center",children:c.jsxs("select",{value:((R=n[L])==null?void 0:R[O.id])||"",onChange:F=>b(L,{...n[L]||{},[O.id]:F.target.value}),className:"w-full h-full border-slate-300 rounded-md shadow-sm text-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300",children:[c.jsx("option",{value:"",children:"Seleccionar definición..."}),B.map((F,Q)=>c.jsx("option",{value:F,children:F},Q))]})},O.id)})]})]})]},L)}case"Desarrollo":{const E=C;return c.jsxs("div",{className:"p-4 border rounded-lg bg-white dark:bg-slate-800",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:L}),E.map((B,O)=>{var R;return c.jsxs("div",{className:"mb-6",children:[c.jsx("p",{className:"font-semibold mb-2 text-slate-700 dark:text-slate-300",children:B.pregunta}),c.jsxs("p",{className:"text-sm italic text-slate-500 dark:text-slate-400 mb-4",children:[c.jsx("strong",{children:"Rúbrica:"})," ",B.rubrica]}),c.jsx("textarea",{value:((R=n[L])==null?void 0:R[O])||"",onChange:F=>b(L,{...n[L]||{},[O]:F.target.value}),rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-slate-300"})]},O)})]},L)}default:return null}}),c.jsxs("div",{className:"text-right mt-8 flex justify-end gap-4",children:[c.jsx("button",{onClick:y,disabled:a||o||u,className:"bg-sky-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-sky-700 disabled:bg-slate-400 disabled:cursor-not-allowed flex items-center justify-center min-w-[200px] transition-colors duration-200",children:o?c.jsxs(c.Fragment,{children:[c.jsx(PD,{})," Guardando..."]}):u?"✓ Guardado":"Guardar Progreso"}),c.jsx("button",{onClick:_,disabled:a||o,className:"bg-slate-800 text-white font-bold py-3 px-8 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:a?c.jsxs(c.Fragment,{children:[c.jsx(PD,{})," Evaluando..."]}):"Entregar Actividad"})]})]})},$ye=({currentUser:t})=>{const[e,r]=Z.useState([]),[n,s]=Z.useState([]),[a,i]=Z.useState(null),[o,l]=Z.useState("list"),[u,d]=Z.useState(null),[h,m]=Z.useState(null),[g,b]=Z.useState(!0);Z.useEffect(()=>{b(!0);const k=Hye(t,r),D=Vye(t.nombreCompleto,M=>{s(M),b(!1)});return()=>{k(),D()}},[t]);const y=k=>{m(k)},_=()=>{h&&(i(h),l("activity"),m(null))},T=Z.useCallback(async(k,D)=>{if(!a)return;const M={actividadId:a.id,estudianteId:t.nombreCompleto,fechaCompletado:new Date().toISOString(),...k,retroalimentacionDetallada:D};try{const P=await zye(M);d({...M,id:P}),l("result")}catch(P){console.error("Error saving submission:",P),alert("No se pudo guardar tu respuesta. El error fue: "+P.message)}},[a,t.nombreCompleto]);if(g)return c.jsx("div",{className:"text-center py-10",children:"Cargando actividades..."});if(o==="activity"&&a)return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("h1",{className:"text-3xl font-bold text-slate-800",children:[a.asignatura,": ",a.tipos.join(", ")]}),c.jsxs("p",{className:"text-slate-500 mb-6",children:["Plazo: ",a.plazoEntrega]}),c.jsx(Kye,{actividad:a,onComplete:T,currentUser:t})]});if(o==="result"&&u){const k=u.retroalimentacionDetallada,D=u.puntajesPorSeccion||{},M=(P,L)=>{const C=L>0?P/L:0;return C<.4?"bg-red-100 text-red-800":C<.7?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800",children:"Retroalimentación de la Actividad"}),k?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Retroalimentación General"}),c.jsx("p",{className:"text-slate-600 mb-6",children:k.resumenGeneral}),c.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-lg mb-6",children:[c.jsx("span",{className:"text-lg font-bold",children:"Puntaje Total:"}),c.jsxs("span",{className:`px-4 py-2 text-xl font-bold rounded-full ${M(u.puntaje,u.puntajeMaximo)}`,children:[u.puntaje," / ",u.puntajeMaximo]})]}),c.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-green-600 mb-2",children:"✓ Áreas de Fortaleza"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:k.areasDeFortaleza.map((P,L)=>c.jsx("li",{children:P},L))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-red-600 mb-2",children:"✗ Áreas de Mejora"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-slate-600",children:k.areasDeMejora.map((P,L)=>c.jsx("li",{children:P},L))})]})]})]}),c.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Object.entries(D).map(([P,{puntaje:L,puntajeMaximo:C}])=>{var E;return c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("h3",{className:"text-xl font-bold",children:P}),c.jsxs("span",{className:`px-3 py-1 text-sm font-bold rounded-full ${M(L,C)}`,children:[L," / ",C]})]}),c.jsx("p",{className:"text-slate-500 text-sm",children:(E=k.feedbackPorSeccion)==null?void 0:E[P]})]},P)})}),c.jsxs("div",{className:"p-6 bg-white rounded-lg shadow-md border",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Plan de Mejora Sugerido"}),c.jsx("div",{className:"space-y-4",children:k.planDeMejora.map((P,L)=>c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"bg-blue-500 text-white rounded-full h-8 w-8 flex-shrink-0 flex items-center justify-center font-bold mt-1",children:"✓"}),c.jsxs("div",{children:[c.jsx("h4",{className:"font-semibold",children:P.paso}),c.jsx("p",{className:"text-slate-600 text-sm",children:P.detalle})]})]},L))})]})]}):c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md text-center",children:[c.jsx("h2",{className:"text-3xl font-bold text-green-600 mb-4",children:"¡Actividad Completada!"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 max-w-sm mx-auto my-8",children:[c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Puntaje"}),c.jsxs("p",{className:"text-2xl font-bold",children:[u.puntaje," / ",u.puntajeMaximo]})]}),c.jsxs("div",{className:"p-4 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-sm text-slate-500",children:"Calificación"}),c.jsx("p",{className:"text-2xl font-bold",children:u.calificacion})]})]}),c.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg text-left",children:[c.jsx("h3",{className:"font-bold text-blue-800 mb-2",children:"Retroalimentación"}),c.jsx("p",{className:"text-blue-700 whitespace-pre-wrap",children:u.retroalimentacion})]})]}),c.jsx("button",{onClick:()=>{l("list"),d(null)},className:"w-full mt-4 bg-slate-800 text-white font-bold py-3 px-6 rounded-lg hover:bg-slate-700",children:"Volver a Actividades"})]})}return c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-lg w-full animate-fade-in-up",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Confirmar inicio de actividad"}),c.jsxs("p",{className:"mt-4 text-slate-600",children:["¿Estás seguro de que deseas comenzar esta actividad? ",c.jsx("strong",{children:"Tendrás solo una oportunidad para responder."})]}),c.jsx("p",{className:"mt-2 text-sm text-slate-500",children:"Sin embargo, puedes guardar tu progreso antes de enviarlo. Una vez enviado, no habrá una segunda oportunidad."}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{onClick:()=>m(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Sí, comenzar"})]})]})}),c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Auto-aprendizaje"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Completa las actividades remotas asignadas por tus profesores."}),c.jsx("div",{className:"space-y-4",children:e.length>0?e.map(k=>{const D=n.find(P=>P.actividadId===k.id),M=!!D;return c.jsx("div",{className:`p-4 border rounded-lg ${M?"bg-green-50":"bg-slate-50"}`,children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800",children:[k.asignatura," - ",k.tipos.join(", ")]}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Plazo: ",k.plazoEntrega]})]}),M?c.jsxs("div",{className:"text-right",children:[c.jsx("button",{onClick:()=>{d(D),l("result")},className:"font-semibold text-blue-700 hover:underline",children:"Ver Resultados"}),c.jsxs("p",{className:"text-sm text-slate-600",children:["Puntaje: ",D.puntaje,"/",D.puntajeMaximo]})]}):c.jsx("button",{onClick:()=>y(k),className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Comenzar"})]})},k.id)}):c.jsx("p",{className:"text-center text-slate-500 py-10",children:"No hay actividades disponibles en este momento."})})]})},db="estudiantes_inclusion",Wye="usuarios",A7=t=>{const e=t.data();return{id:t.id,...e}},Yye=t=>{const e=Yt(kt(vt,db));return mr(e,n=>{const s=n.docs.map(a=>A7(a));t(s)},n=>{console.error("Error al suscribirse a estudiantes de inclusión:",n),t([])})},Jye=t=>{const e=Yt(kt(vt,Wye));return mr(e,n=>{const s=n.docs.map(a=>A7(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},Xye=async t=>{try{return(await ps(kt(vt,db),t)).id}catch(e){throw console.error("Error al agregar estudiante a inclusión:",e),new Error("No se pudo agregar al estudiante.")}},Zye=async(t,e)=>{try{const{id:r,...n}=e,s=ur(vt,db,t);await pi(s,n)}catch(r){throw console.error("Error al actualizar estudiante de inclusión:",r),new Error("No se pudo actualizar la ficha del estudiante.")}},e2e=async t=>{try{const e=ur(vt,db,t);await Ta(e)}catch(e){throw console.error("Error al eliminar estudiante de inclusión:",e),new Error("No se pudo eliminar al estudiante.")}},t2e=({student:t,onClose:e,onSave:r,profesores:n})=>{const[s,a]=Z.useState("intervenciones"),[i,o]=Z.useState(t);Z.useEffect(()=>{o(t)},[t]);const[l,u]=Z.useState(null),d={responsable:"",accion:"",observaciones:""},[h,m]=Z.useState(d),[g,b]=Z.useState({trimestre:"T1",meta:""}),[y,_]=Z.useState({titulo:"",fecha:new Date().toISOString().split("T")[0]}),[T,k]=Z.useState(null),[D,M]=Z.useState(!1),P={motivo:"",acuerdos:"",asistentes:""},[L,C]=Z.useState(P),E=()=>{r(i),e()},B=()=>{if(!h.responsable||!h.accion){alert("Responsable y Acción son campos obligatorios.");return}let de;l?de=(i.intervenciones||[]).map(Ue=>Ue.id===l.id?{...Ue,...h}:Ue):de=[{id:crypto.randomUUID(),fecha:new Date().toISOString(),...h},...i.intervenciones||[]];const oe=de.sort((Ue,tt)=>new Date(tt.fecha).getTime()-new Date(Ue.fecha).getTime());o(Ue=>({...Ue,intervenciones:oe})),m(d),u(null)},O=de=>{u(de),m({responsable:de.responsable,accion:de.accion,observaciones:de.observaciones})},R=de=>{window.confirm("¿Eliminar esta intervención?")&&o(oe=>({...oe,intervenciones:(oe.intervenciones||[]).filter(Ue=>Ue.id!==de)}))},F=de=>{const{name:oe,value:Ue}=de.target;o(tt=>({...tt,[oe]:Ue,fechaActualizacionApoyos:new Date().toISOString()}))},Q=()=>{if(!g.meta.trim())return;const de={...g,id:crypto.randomUUID(),cumplida:!1};o(oe=>({...oe,metasProgreso:[...oe.metasProgreso||[],de]})),b({trimestre:"T1",meta:""})},H=de=>{o(oe=>({...oe,metasProgreso:(oe.metasProgreso||[]).map(Ue=>Ue.id===de?{...Ue,cumplida:!Ue.cumplida}:Ue)}))},ne=de=>{o(oe=>({...oe,metasProgreso:(oe.metasProgreso||[]).filter(Ue=>Ue.id!==de)}))},J=Z.useMemo(()=>{const de=i.metasProgreso||[];if(de.length===0)return{percent:0,color:"bg-slate-300"};const oe=de.filter(Fe=>Fe.cumplida).length,Ue=Math.round(oe/de.length*100),tt=Ue<40?"bg-red-500":Ue<75?"bg-yellow-500":"bg-green-500";return{percent:Ue,color:tt}},[i.metasProgreso]),re=Z.useMemo(()=>{if(!i.fechaActualizacionApoyos)return!0;const de=new Date(i.fechaActualizacionApoyos),oe=new Date;return oe.setMonth(oe.getMonth()-3),de<oe},[i.fechaActualizacionApoyos]),G=()=>{if(!y.titulo.trim()||!y.fecha)return;const de={...y,id:crypto.randomUUID(),resuelta:!1};o(oe=>({...oe,alertas:[...oe.alertas||[],de].sort((Ue,tt)=>new Date(Ue.fecha).getTime()-new Date(tt.fecha).getTime())})),_({titulo:"",fecha:new Date().toISOString().split("T")[0]})},q=de=>{o(oe=>({...oe,alertas:(oe.alertas||[]).map(Ue=>Ue.id===de?{...Ue,resuelta:!Ue.resuelta}:Ue)}))},W=de=>{o(oe=>({...oe,alertas:(oe.alertas||[]).filter(Ue=>Ue.id!==de)}))},ie=de=>{de.target.files&&de.target.files[0]&&k(de.target.files[0])},j=()=>{if(!T)return;M(!0);const de=new FileReader;de.readAsDataURL(T),de.onloadend=()=>{const oe={id:crypto.randomUUID(),nombre:T.name,url:de.result,fechaSubida:new Date().toISOString()};o(Ue=>({...Ue,archivos:[oe,...Ue.archivos||[]]})),k(null),M(!1)},de.onerror=()=>{alert("Error al leer el archivo."),M(!1)}},Y=de=>{window.confirm("¿Eliminar este archivo?")&&o(oe=>({...oe,archivos:(oe.archivos||[]).filter(Ue=>Ue.id!==de)}))},ee=()=>{if(!L.motivo.trim()||!L.asistentes.trim()){alert("Motivo y asistentes son obligatorios.");return}const de={...L,id:crypto.randomUUID(),fecha:new Date().toISOString()};o(oe=>({...oe,reuniones:[de,...oe.reuniones||[]].sort((Ue,tt)=>new Date(tt.fecha).getTime()-new Date(Ue.fecha).getTime())})),C(P)},te=de=>{window.confirm("¿Eliminar este registro de reunión?")&&o(oe=>({...oe,reuniones:(oe.reuniones||[]).filter(Ue=>Ue.id!==de)}))},ce=()=>{var $e,ut,Et;const de=new lr("p","mm","a4"),oe=20,Ue=de.internal.pageSize.getWidth(),tt=de.internal.pageSize.getHeight();let Fe=oe;const Ee=lt=>{lt.setFontSize(10),lt.setTextColor(100),lt.text("Ficha de Seguimiento - Módulo Inclusión",oe,15)};Ee(de),de.setFontSize(18),de.setFont("helvetica","bold"),de.setTextColor(40),de.text(i.nombre,oe,Fe+10),Fe+=15,de.setFontSize(11),de.setFont("helvetica","normal"),de.setTextColor(80),de.text(`Curso: ${i.curso}`,oe,Fe),de.text(`Dificultad: ${i.dificultad}`,oe,Fe+6),Fe+=15;const De=lt=>{Fe+lt>tt-oe&&(de.addPage(),Ee(de),Fe=oe)},Qe=lt=>{De(15),de.setFontSize(14),de.setFont("helvetica","bold"),de.text(lt,oe,Fe),Fe+=10};if(($e=i.intervenciones)!=null&&$e.length&&(Qe("Historial de Intervenciones"),il(de,{startY:Fe,head:[["Fecha","Responsable","Acción","Observaciones"]],body:i.intervenciones.map(lt=>[new Date(lt.fecha).toLocaleDateString("es-CL"),lt.responsable,lt.accion,lt.observaciones||""]),theme:"grid",didDrawPage:lt=>Ee(de)}),Fe=de.lastAutoTable.finalY+10),i.adaptacionesCurriculares||i.apoyosRecibidos){De(30),Qe("Seguimiento y Apoyos"),de.setFontSize(11),de.setFont("helvetica","normal");const lt=`Adaptaciones: ${i.adaptacionesCurriculares||"No registradas."}
Apoyos: ${i.apoyosRecibidos||"No registrados."}`,Dt=de.splitTextToSize(lt,Ue-oe*2);de.text(Dt,oe,Fe),Fe+=Dt.length*5+10}(ut=i.metasProgreso)!=null&&ut.length&&(De(30),Qe("Metas de Progreso"),il(de,{startY:Fe,head:[["Trimestre","Meta","Estado"]],body:i.metasProgreso.map(lt=>[lt.trimestre,lt.meta,lt.cumplida?"Cumplida":"Pendiente"]),theme:"grid",didDrawPage:lt=>Ee(de)}),Fe=de.lastAutoTable.finalY+10),(Et=i.reuniones)!=null&&Et.length&&(Qe("Reuniones con Apoderados"),il(de,{startY:Fe,head:[["Fecha","Motivo","Acuerdos","Asistentes"]],body:i.reuniones.map(lt=>[new Date(lt.fecha).toLocaleDateString("es-CL"),lt.motivo,lt.acuerdos,lt.asistentes]),theme:"grid",didDrawPage:lt=>Ee(de)})),de.save(`Ficha_Inclusion_${i.nombre.replace(/\s/g,"_")}.pdf`)},be=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:l?"Editando Intervención":"Registrar Nueva Intervención"}),c.jsxs("select",{value:h.responsable,onChange:de=>m(oe=>({...oe,responsable:de.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione Responsable..."}),n.map(de=>c.jsx("option",{value:de,children:de},de))]}),c.jsx("textarea",{value:h.accion,onChange:de=>m(oe=>({...oe,accion:de.target.value})),placeholder:"Acción realizada...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:h.observaciones,onChange:de=>m(oe=>({...oe,observaciones:de.target.value})),placeholder:"Observaciones adicionales...",rows:2,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"flex justify-end gap-2",children:[l&&c.jsx("button",{onClick:()=>{u(null),m(d)},className:"text-sm bg-slate-200 dark:bg-slate-600 px-3 py-1 rounded-md",children:"Cancelar Edición"}),c.jsx("button",{onClick:B,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:l?"Actualizar":"Guardar"})]})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.intervenciones||[]).map(de=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:de.accion}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:de.observaciones}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(de.fecha).toLocaleString("es-CL")," - ",de.responsable]})]}),c.jsxs("div",{className:"flex-shrink-0 ml-4 flex gap-2",children:[c.jsx("button",{onClick:()=>O(de),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>R(de.id),className:"text-red-500",children:"🗑️"})]})]})},de.id))})]}),he=()=>c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Adaptaciones y Apoyos"}),re&&c.jsx("span",{title:"Información no actualizada en los últimos 3 meses",className:"text-yellow-500 text-xl",children:"⚠️"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Adaptaciones Curriculares Implementadas"}),c.jsx("textarea",{name:"adaptacionesCurriculares",value:i.adaptacionesCurriculares||"",onChange:F,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Apoyos Recibidos (PIE, dupla, etc.)"}),c.jsx("textarea",{name:"apoyosRecibidos",value:i.apoyosRecibidos||"",onChange:F,rows:3,className:"w-full mt-1 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Indicadores de Progreso"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:["Progreso Anual de Metas: ",J.percent,"%"]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-4 dark:bg-slate-700",children:c.jsx("div",{className:`${J.color} h-4 rounded-full transition-all duration-500`,style:{width:`${J.percent}%`}})})]}),c.jsxs("div",{className:"flex gap-2 items-end pt-2",children:[c.jsxs("select",{value:g.trimestre,onChange:de=>b(oe=>({...oe,trimestre:de.target.value})),className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"T1",children:"T1"}),c.jsx("option",{value:"T2",children:"T2"}),c.jsx("option",{value:"T3",children:"T3"})]}),c.jsx("input",{value:g.meta,onChange:de=>b(oe=>({...oe,meta:de.target.value})),placeholder:"Definir nueva meta trimestral...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:Q,className:"bg-slate-200 dark:bg-slate-600 px-3 py-2 rounded-md font-semibold text-sm",children:"Agregar"})]}),c.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:(i.metasProgreso||[]).map(de=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("input",{type:"checkbox",checked:de.cumplida,onChange:()=>H(de.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${de.cumplida?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[c.jsxs("strong",{children:[de.trimestre,":"]})," ",de.meta]}),c.jsx("button",{onClick:()=>ne(de.id),className:"text-red-500 text-sm",children:"🗑️"})]},de.id))})]})]}),fe=()=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Alertas y Recordatorios"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Agendar Nueva Alerta"}),c.jsx("input",{type:"text",value:y.titulo,onChange:de=>_(oe=>({...oe,titulo:de.target.value})),placeholder:"Título de la alerta",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("input",{type:"date",value:y.fecha,onChange:de=>_(oe=>({...oe,fecha:de.target.value})),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700"}),c.jsx("button",{onClick:G,className:"w-full text-sm bg-amber-500 text-white font-semibold px-3 py-1.5 rounded-md",children:"Agendar"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.alertas||[]).map(de=>c.jsxs("div",{className:"flex items-center gap-2 p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("input",{type:"checkbox",checked:de.resuelta,onChange:()=>q(de.id),className:"h-5 w-5 rounded text-amber-500"}),c.jsxs("span",{className:`flex-grow text-sm ${de.resuelta?"line-through text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:[de.titulo," (",new Date(de.fecha+"T12:00:00").toLocaleDateString(),")"]}),c.jsx("button",{onClick:()=>W(de.id),className:"text-red-500 text-sm",children:"🗑️"})]},de.id))})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Archivos Adjuntos"}),c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h5",{className:"font-medium",children:"Subir Nuevo Archivo"}),c.jsx("input",{type:"file",onChange:ie,className:"w-full text-sm"}),c.jsx("button",{onClick:j,disabled:!T||D,className:"w-full text-sm bg-blue-500 text-white font-semibold px-3 py-1.5 rounded-md disabled:bg-slate-400",children:D?"Subiendo...":"Subir"})]}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(i.archivos||[]).map(de=>c.jsxs("div",{className:"flex justify-between items-center p-2 bg-white dark:bg-slate-800 rounded border dark:border-slate-600",children:[c.jsx("a",{href:de.url,download:de.nombre,className:"text-sm text-blue-600 hover:underline truncate",children:de.nombre}),c.jsx("button",{onClick:()=>Y(de.id),className:"text-red-500 text-sm ml-2",children:"🗑️"})]},de.id))})]})]}),ge=()=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-slate-700/50 rounded-lg border dark:border-slate-600 space-y-3",children:[c.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-200",children:"Registrar Nueva Reunión"}),c.jsx("input",{value:L.motivo,onChange:de=>C(oe=>({...oe,motivo:de.target.value})),placeholder:"Motivo de la reunión...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("textarea",{value:L.acuerdos,onChange:de=>C(oe=>({...oe,acuerdos:de.target.value})),placeholder:"Acuerdos...",rows:3,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{value:L.asistentes,onChange:de=>C(oe=>({...oe,asistentes:de.target.value})),placeholder:"Asistentes (separados por coma)...",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("div",{className:"text-right",children:c.jsx("button",{onClick:ee,className:"text-sm bg-amber-500 text-white font-semibold px-3 py-1 rounded-md",children:"Guardar Reunión"})})]}),c.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:(i.reuniones||[]).map(de=>c.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-semibold text-slate-800 dark:text-slate-200",children:de.motivo}),c.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[c.jsx("strong",{children:"Acuerdos:"})," ",de.acuerdos]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-2",children:[new Date(de.fecha).toLocaleString("es-CL")," - Asistentes: ",de.asistentes]})]}),c.jsx("button",{onClick:()=>te(de.id),className:"text-red-500 flex-shrink-0 ml-4",children:"🗑️"})]})},de.id))})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:de=>de.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:["Ficha de Seguimiento: ",t.nombre]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.curso," - ",t.dificultad]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:ce,className:"text-sm bg-red-100 text-red-700 font-semibold px-3 py-1.5 rounded-md hover:bg-red-200",children:"Exportar PDF"}),c.jsx("button",{onClick:e,className:"text-2xl text-slate-500 hover:text-slate-800",children:"×"})]})]}),c.jsx("div",{className:"border-b dark:border-slate-700 px-4",children:c.jsx("nav",{className:"-mb-px flex space-x-6",children:["intervenciones","seguimiento","reuniones","alertas"].map(de=>c.jsx("button",{onClick:()=>a(de),className:`${s===de?"border-amber-500 text-amber-600":"border-transparent text-slate-500 hover:text-slate-700"} whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm capitalize`,children:de==="alertas"?"Alertas y Archivos":de==="seguimiento"?"Seguimiento y Metas":de},de))})}),c.jsxs("div",{className:"p-6 overflow-y-auto flex-grow bg-slate-50 dark:bg-slate-900/50",children:[s==="intervenciones"&&be(),s==="seguimiento"&&he(),s==="reuniones"&&ge(),s==="alertas"&&fe()]}),c.jsxs("div",{className:"bg-slate-100 dark:bg-slate-700/50 px-6 py-4 rounded-b-xl flex justify-end gap-3 mt-auto",children:[c.jsx("button",{onClick:e,className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cerrar"}),c.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar Cambios y Cerrar"})]})]})})},r2e=({student:t,onClose:e,onConfirm:r})=>{const[n,s]=Z.useState(S2[0]),a=()=>{r(t,n)};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-lg p-6 animate-fade-in-up",onClick:i=>i.stopPropagation(),children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:["Agregar a ",t.nombreCompleto," al PIE"]}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Por favor, seleccione la dificultad de aprendizaje principal para este estudiante."}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"dificultad",className:"block text-sm font-medium text-slate-700 dark:text-slate-300",children:"Dificultad de Aprendizaje"}),c.jsx("select",{id:"dificultad",value:n,onChange:i=>s(i.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:S2.map(i=>c.jsx("option",{value:i,children:i},i))})]}),c.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[c.jsx("button",{type:"button",onClick:e,className:"bg-slate-200 dark:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Cancelar"}),c.jsx("button",{type:"button",onClick:a,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Confirmar e Ingresar"})]})]})})},jD=({currentUser:t})=>{const[e,r]=Z.useState([]),[n,s]=Z.useState([]),[a,i]=Z.useState(!0),[o,l]=Z.useState(null),[u,d]=Z.useState(null),[h,m]=Z.useState(""),[g,b]=Z.useState(""),[y,_]=Z.useState("");Z.useEffect(()=>{i(!0);const E=Yye(O=>{r(O),i(!1)}),B=Jye(O=>{s(O)});return()=>{E(),B()}},[]);const T=async(E,B)=>{if(e.some(R=>R.nombre===E.nombreCompleto)){alert("Este estudiante ya está en el programa de inclusión.");return}const O={nombre:E.nombreCompleto,curso:E.curso||"",dificultad:B,intervenciones:[],metasProgreso:[],alertas:[],archivos:[],reuniones:[],adaptacionesCurriculares:"",apoyosRecibidos:"",fechaActualizacionApoyos:new Date().toISOString()};try{await Xye(O)}catch(R){console.error("Error al agregar estudiante:",R),alert("Hubo un error al agregar al estudiante al programa.")}},k=async E=>{try{await Zye(E.id,E)}catch(B){console.error("Error al actualizar la ficha:",B),alert("Hubo un error al guardar los cambios en la ficha.")}},D=async E=>{if(window.confirm("¿Está seguro de que desea eliminar a este estudiante del programa de inclusión? Esta acción es irreversible."))try{await e2e(E),(o==null?void 0:o.id)===E&&l(null)}catch(B){console.error("Error al eliminar estudiante:",B),alert("Hubo un error al eliminar al estudiante.")}},M=E=>{if(L.length===0){alert("No hay datos para exportar.");return}const B=L.map(O=>{var R;return{Nombre:O.nombre,Curso:O.curso,Dificultad:O.dificultad,"N° Intervenciones":((R=O.intervenciones)==null?void 0:R.length)||0,"Alertas Pendientes":(O.alertas||[]).filter(F=>!F.resuelta).length}});if(E==="xlsx"){const O=Vl.json_to_sheet(B),R=Vl.book_new();Vl.book_append_sheet(R,O,"Estudiantes_Inclusion"),kT(R,"Estudiantes_Inclusion.xlsx")}else{const O=new lr;O.text("Listado de Estudiantes - Programa de Inclusión",14,15),il(O,{startY:20,head:[Object.keys(B[0])],body:B.map(Object.values)}),O.save("Estudiantes_Inclusion.pdf")}},P=Z.useMemo(()=>n.filter(E=>{var B;return E.profile===jt.ESTUDIANTE&&(((B=t.cursos)==null?void 0:B.includes(E.curso||""))||t.profile===jt.SUBDIRECCION)}).filter(E=>!e.some(B=>B.nombre===E.nombreCompleto)),[n,e,t]),L=Z.useMemo(()=>e.filter(E=>E.nombre.toLowerCase().includes(h.toLowerCase())&&(g===""||E.curso===g)&&(y===""||E.dificultad===y)).sort((E,B)=>E.nombre.localeCompare(B.nombre)),[e,h,g,y]),C=Z.useMemo(()=>n.filter(E=>E.profile===jt.PROFESORADO).map(E=>E.nombreCompleto).sort(),[n]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Programa de Inclusión Escolar (PIE)"}),a?c.jsx("div",{className:"text-center py-10",children:"Cargando datos del programa..."}):c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsxs("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:["Estudiantes en PIE (",L.length,")"]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>M("xlsx"),className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:()=>M("pdf"),className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[c.jsx("input",{type:"text",placeholder:"Buscar por nombre...",value:h,onChange:E=>m(E.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("select",{value:g,onChange:E=>b(E.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),ca.map(E=>c.jsx("option",{children:E},E))]}),c.jsxs("select",{value:y,onChange:E=>_(E.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Todas las Dificultades"}),S2.map(E=>c.jsx("option",{children:E},E))]})]}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:L.map(E=>c.jsxs("div",{className:"p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:E.nombre}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[E.curso," - ",E.dificultad]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>l(E),className:"text-blue-600 hover:text-blue-800 font-semibold text-sm",children:"Ver Ficha"}),c.jsx("button",{onClick:()=>D(E.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full text-lg",children:"🗑️"})]})]},E.id))})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Agregar Estudiante desde Nómina"}),c.jsx("ul",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:P.map(E=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-200",children:E.nombreCompleto}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:E.curso})]}),c.jsx("button",{onClick:()=>d(E),className:"text-2xl text-green-500 hover:text-green-700",children:"+"})]},E.id))})]})]}),u&&c.jsx(r2e,{student:u,onClose:()=>d(null),onConfirm:(E,B)=>{T(E,B),d(null)}}),o&&c.jsx(t2e,{student:o,onClose:()=>l(null),onSave:k,profesores:C})]})},d7="asistencia_dual",n2e=t=>{var r,n;const e=t.data();return{id:t.id,...e,fechaHora:((n=(r=e.fechaHora)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaHora}},s2e=(t,e)=>{const r=Yt(kt(vt,d7),Xr("emailEstudiante","==",t),Pr("fechaHora","desc"));return mr(r,s=>{const a=s.docs.map(i=>n2e(i));e(a)},s=>{console.error("Error subscribing to personal attendance:",s),e([])})},a2e=async t=>{try{const e={...t,fechaHora:or.fromDate(new Date(t.fechaHora))};await ps(kt(vt,d7),e)}catch(e){throw console.error("Error adding attendance record:",e),new Error("Could not save the attendance record.")}},i2e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm.707-10.293a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L9.414 11H13a1 1 0 100-2H9.414l1.293-1.293z",clipRule:"evenodd"})}),o2e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-3.707-4.293a1 1 0 001.414 1.414L10 12.414l2.293 2.293a1 1 0 001.414-1.414L11.414 11l2.293-2.293a1 1 0 00-1.414-1.414L10 9.586 7.707 7.293a1 1 0 00-1.414 1.414L8.586 11 6.293 13.293a1 1 0 000 1.414z",clipRule:"evenodd"})}),l2e=({currentUser:t})=>{const[e,r]=Z.useState(t.curso||""),[n,s]=Z.useState([]),[a,i]=Z.useState(!1),[o,l]=Z.useState(!0),[u,d]=Z.useState(null);Z.useEffect(()=>{if(!t.email){l(!1);return}l(!0);const m=s2e(t.email,g=>{s(g),l(!1)});return()=>m()},[t.email]);const h=m=>{if(!e){d({text:"Por favor, seleccione su curso antes de marcar.",type:"error"});return}i(!0),d(null),navigator.geolocation.getCurrentPosition(async g=>{const b={nombreEstudiante:t.nombreCompleto,emailEstudiante:t.email,curso:e,tipo:m,fechaHora:new Date().toISOString(),ubicacion:{latitud:g.coords.latitude,longitud:g.coords.longitude}};try{await a2e(b),d({text:`¡Marca de ${m} registrada con éxito!`,type:"success"})}catch(y){console.error("Error saving record to Firestore:",y),d({text:"No se pudo guardar el registro en la nube.",type:"error"})}finally{i(!1)}},g=>{console.error("Geolocation error:",g);let b="No se pudo obtener la ubicación.";switch(g.code){case g.PERMISSION_DENIED:b="Permiso de ubicación denegado. Por favor, habilite la ubicación en su navegador y dispositivo.";break;case g.POSITION_UNAVAILABLE:b="La información de ubicación no está disponible en este momento. Verifique su conexión y GPS.";break;case g.TIMEOUT:b="La solicitud de ubicación ha tardado demasiado. Inténtelo de nuevo en un lugar con mejor señal.";break;default:b=`Ocurrió un error desconocido al obtener la ubicación (código: ${g.code}).`;break}d({text:b,type:"error"}),i(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Asistencia a Empresa"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Registre su entrada y salida de la empresa de práctica."}),c.jsxs("div",{className:"space-y-4 max-w-md mx-auto",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Seleccione su curso"}),c.jsxs("select",{id:"curso",value:e,onChange:m=>r(m.target.value),className:"w-full border-slate-300 rounded-md shadow-sm text-lg p-2 dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"-- Mi curso --"}),vh.map(m=>c.jsx("option",{value:m,children:m},m))]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[c.jsx("button",{onClick:()=>h("Entrada"),disabled:a||!e,className:"bg-green-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-green-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Entrada"}),c.jsx("button",{onClick:()=>h("Salida"),disabled:a||!e,className:"bg-red-600 text-white font-bold py-4 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400 flex items-center justify-center text-xl transition-all",children:"Salida"})]}),a&&c.jsxs("div",{className:"text-center text-slate-600 dark:text-slate-400 pt-4 flex items-center justify-center gap-2",children:[c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c.jsx("span",{children:"Obteniendo ubicación..."})]}),u&&c.jsx("div",{className:`text-center p-3 rounded-md mt-4 ${u.type==="success"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:u.text})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Mi Historial de Asistencia"}),c.jsx("div",{className:"overflow-x-auto max-h-96",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Fecha y Hora"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Tipo"}),c.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:"Curso"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o?c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"Cargando historial..."})}):n.length>0?n.map(m=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/50",children:[c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:new Date(m.fechaHora).toLocaleString("es-CL")}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:c.jsxs("span",{className:`px-3 py-1 inline-flex items-center gap-1.5 text-xs leading-5 font-semibold rounded-full ${m.tipo==="Entrada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[m.tipo==="Entrada"?c.jsx(i2e,{}):c.jsx(o2e,{}),m.tipo]})}),c.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-slate-600 dark:text-slate-300",children:m.curso})]},m.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:3,className:"px-6 py-10 text-center text-slate-500",children:"No tienes marcas de asistencia registradas."})})})]})})]})]})},c2e=async()=>{try{console.log("🔍 Debugging users collection...");const t=kt(Zr,"users"),e=Yt(t,BA(10)),r=await Cs(e),n={exists:!0,totalDocs:r.size,sampleDocs:[],fieldAnalysis:{}},s=new Set;return r.forEach((a,i)=>{const o=a.data(),l={id:a.id,data:o,fields:Object.keys(o)};n.sampleDocs.push(l),Object.keys(o).forEach(u=>s.add(u))}),n.fieldAnalysis={allFields:Array.from(s),commonFields:Array.from(s).filter(a=>n.sampleDocs.filter(o=>a in o.data).length>n.sampleDocs.length*.5)},console.log("Users collection debug result:",n),n}catch(t){return console.error("Error debugging users collection:",t),{exists:!1,error:t instanceof Error?t.message:"Unknown error"}}},u2e=async(t,e)=>{var l,u,d;const r=new Date(t,e,1),n=new Date(t,e+1,0,23,59,59,999),s=or.fromDate(r),a=or.fromDate(n),i=["asistenciaDual","asistenciaEmpresa","asistencia","attendance","checkins"],o={};for(const h of i)try{const m=kt(Zr,h);try{const g=Yt(m,Xr("fechaHora",">=",s),Xr("fechaHora","<=",a)),b=await Cs(g);o[h]={exists:!0,hasDateField:!0,count:b.size,sampleDoc:((l=b.docs[0])==null?void 0:l.data())||null}}catch{const b=["fecha","timestamp","createdAt"];let y=!1;for(const _ of b)try{const T=Yt(m,Xr(_,">=",s),Xr(_,"<=",a)),k=await Cs(T);o[h]={exists:!0,hasDateField:_,count:k.size,sampleDoc:((u=k.docs[0])==null?void 0:u.data())||null},y=!0;break}catch{continue}if(!y){const _=Yt(m,Pr("__name__"),BA(5)),T=await Cs(_);o[h]={exists:!0,hasDateField:!1,count:T.size,sampleDoc:((d=T.docs[0])==null?void 0:d.data())||null,note:"No date field found for filtering"}}}}catch(m){o[h]={exists:!1,error:m instanceof Error?m.message:"Unknown error"}}return console.log("Debug Asistencia Collections:",o),o},A2e=(t,e,r,n)=>{try{const s=new Date(t,e,1);s.setHours(0,0,0,0);const a=new Date(t,e+1,0);a.setHours(23,59,59,999),console.log(`🔍 Buscando registros entre: ${s.toISOString()} y ${a.toISOString()}`),console.log(`📅 Mes actual: ${t}-${(e+1).toString().padStart(2,"0")}`);const i=or.fromDate(s),o=or.fromDate(a),l=[],u=new Map,d=()=>{const m=Array.from(u.values());console.log(`📊 Total registros encontrados: ${m.length}`),m.length>0&&console.log("📅 Registros por día:",m.reduce((g,b)=>{let y;b.fechaHora instanceof Date?y=b.fechaHora:typeof b.fechaHora=="string"?y=new Date(b.fechaHora):y=new Date;const _=y.getDate();return g[_]=(g[_]||0)+1,g},{})),r(m)};return["asistencia_dual","asistenciaEmpresa","asistencia_empresa","asistenciaDual","asistencia"].forEach(m=>{try{console.log(`🔍 Configurando suscripción para: ${m}`);const g=kt(Zr,m),b=Yt(g,Xr("fechaHora",">=",i),Xr("fechaHora","<=",o),Pr("fechaHora","desc")),y=mr(b,_=>{console.log(`📋 ${m}: ${_.size} documentos encontrados con filtro`),_.size>0?(console.log(`✅ Registros encontrados en ${m}:`),Array.from(u.keys()).filter(k=>k.startsWith(`${m}_`)).forEach(k=>u.delete(k)),_.docs.forEach((k,D)=>{var M;if(D<5){const P=k.data();let L;(M=P.fechaHora)!=null&&M.toDate?L=P.fechaHora.toDate():typeof P.fechaHora=="string"?L=new Date(P.fechaHora):L=new Date,console.log(`   ${D+1}. ${P.emailEstudiante} - ${L.toLocaleString()} - ${P.tipo}`),console.log(`      📅 Fecha original: ${P.fechaHora} (tipo: ${typeof P.fechaHora})`)}}),_.forEach(k=>{var C;const D=k.data();let M;(C=D.fechaHora)!=null&&C.toDate?M=D.fechaHora.toDate():typeof D.fechaHora=="string"?M=new Date(D.fechaHora):D.fechaHora instanceof Date?M=D.fechaHora:D.fechaHora?M=new Date(D.fechaHora):M=new Date;const P={id:k.id,emailEstudiante:D.emailEstudiante||D.email||"",nombreEstudiante:D.nombreEstudiante||D.nombre||"",curso:D.curso||"",fechaHora:M,tipo:D.tipo,ubicacion:D.ubicacion||null,observaciones:D.observaciones||"",...D},L=`${m}_${k.id}`;u.set(L,P)}),d()):console.log(`⚪ ${m}: vacía, manteniendo datos existentes`)},_=>{console.warn(`⚠️ Error con filtro en ${m}:`,_),console.log(`🔄 Intentando estrategia alternativa en ${m}...`);const T=Yt(g,BA(200)),k=mr(T,M=>{if(console.log(`📋 ${m} (sin filtro): ${M.size} documentos`),M.size>0){const L=M.docs[0].data();console.log(`📄 Estructura en ${m}:`,Object.keys(L)),console.log("📄 Primer documento:",L)}const P=M.docs.filter(L=>{var B;const C=L.data();if(!C.fechaHora)return!1;let E;return(B=C.fechaHora)!=null&&B.toDate?E=C.fechaHora.toDate():typeof C.fechaHora=="string"?E=new Date(C.fechaHora):C.fechaHora instanceof Date?E=C.fechaHora:E=new Date(C.fechaHora),E>=s&&E<=a});console.log(`📅 ${m}: ${P.length} registros después de filtro manual`),P.length>0&&(Array.from(u.keys()).filter(C=>C.startsWith(`${m}_`)).forEach(C=>u.delete(C)),P.forEach(C=>{var F;const E=C.data();let B;(F=E.fechaHora)!=null&&F.toDate?B=E.fechaHora.toDate():typeof E.fechaHora=="string"?B=new Date(E.fechaHora):E.fechaHora instanceof Date?B=E.fechaHora:B=new Date(E.fechaHora);const O={id:C.id,emailEstudiante:E.emailEstudiante||E.email||"",nombreEstudiante:E.nombreEstudiante||E.nombre||"",curso:E.curso||"",fechaHora:B,tipo:E.tipo,ubicacion:E.ubicacion||null,observaciones:E.observaciones||"",...E},R=`${m}_${C.id}`;u.set(R,O)}),d())}),D=l.findIndex(M=>M===y);D>=0?l[D]=k:l.push(k)});l.push(y)}catch(g){console.warn(`❌ Error configurando ${m}:`,g)}}),()=>{l.forEach(m=>{try{m()}catch(g){console.warn("Error unsubscribing:",g)}})}}catch(s){return console.error("Error setting up subscribeToAsistenciaByMonth:",s),n&&n(new Error(`Error al configurar suscripción: ${s instanceof Error?s.message:"Error desconocido"}`)),()=>{}}},d2e=(t,e)=>{try{console.log("🔍 Buscando usuarios en múltiples colecciones...");const r=["usuarios","users"],n=[],s=new Map,a=()=>{const o=Array.from(s.values());console.log(`📊 Total usuarios encontrados: ${o.length}`);const l=o.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("👥 Usuarios por perfil:",l);const u=o.filter(d=>d.profile===jt.ESTUDIANTE);console.log(`🎓 Estudiantes encontrados: ${u.length}`),u.forEach(d=>{console.log(`   - ${d.nombreCompleto} (${d.curso}) - ${d.email}`)}),t(o)};let i=!1;return r.forEach(o=>{try{const l=kt(Zr,o),u=Yt(l),d=mr(u,h=>{h.size>0?(console.log(`✅ Encontrados ${h.size} usuarios en colección: ${o}`),i=!0,Array.from(s.keys()).filter(g=>g.startsWith(`${o}_`)).forEach(g=>s.delete(g)),h.forEach(g=>{var b,y,_,T;try{const k=g.data(),D=k.email||k.userEmail||k.mail||k.correo||"",M=k.nombreCompleto||k.displayName||k.name||k.nombre||k.fullName||"",P=k.curso||k.course||k.class||k.grade||"";let L=k.profile||k.role||k.tipo||k.userType||jt.ESTUDIANTE;if(typeof L=="string"){const B=L.toLowerCase();B.includes("estudiante")||B.includes("student")||B.includes("alumno")?L=jt.ESTUDIANTE:B.includes("coordinador")||B.includes("coordinator")?L=jt.COORDINADOR_TP:B.includes("profesor")||B.includes("teacher")||B.includes("docente")?L=jt.PROFESOR:(B.includes("subdireccion")||B.includes("subdir"))&&(L=jt.COORDINADOR_TP)}const C={id:g.id,email:D,nombreCompleto:M,curso:P,profile:L,activo:k.activo!==!1,fechaCreacion:((y=(b=k.fechaCreacion)==null?void 0:b.toDate)==null?void 0:y.call(b))||new Date(k.fechaCreacion)||new Date,ultimaActividad:((T=(_=k.ultimaActividad)==null?void 0:_.toDate)==null?void 0:T.call(_))||new Date(k.ultimaActividad)||new Date,...k},E=`${o}_${g.id}`;s.set(E,C)}catch(k){console.warn(`Error procesando documento ${g.id} en ${o}:`,k)}}),a()):console.log(`⚪ Colección ${o}: vacía`)},h=>{console.warn(`⚠️ Error en colección ${o}:`,h)});n.push(d)}catch(l){console.warn(`❌ Error configurando ${o}:`,l)}}),setTimeout(()=>{i||(console.error("❌ No se encontraron usuarios en ninguna colección"),e&&e(new Error("No se encontraron colecciones de usuarios con datos")))},3e3),()=>{n.forEach(o=>{try{o()}catch(l){console.warn("Error unsubscribing:",l)}})}}catch(r){return console.error("Error setting up multi-collection users subscription:",r),e&&e(new Error(`Error al configurar suscripción multi-colección: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},f2e=(t,e)=>{try{console.log("Setting up users subscription...");const r=kt(Zr,"users"),n=Yt(r);return mr(n,a=>{console.log(`Raw users snapshot size: ${a.size}`);const i=[];a.forEach(d=>{var h,m,g,b;try{const y=d.data();console.log(`Processing user doc ${d.id}:`,y);const _=y.email||y.userEmail||y.mail||"",T=y.nombreCompleto||y.displayName||y.name||y.nombre||"",k=y.curso||y.course||y.class||"";let D=y.profile||y.role||y.tipo||jt.ESTUDIANTE;if(typeof D=="string"){const P=D.toLowerCase();P.includes("estudiante")||P.includes("student")||P.includes("alumno")?D=jt.ESTUDIANTE:P.includes("coordinador")||P.includes("coordinator")?D=jt.COORDINADOR_TP:P.includes("profesor")||P.includes("teacher")||P.includes("docente")?D=jt.PROFESOR:(P.includes("subdireccion")||P.includes("subdir"))&&(D=jt.COORDINADOR_TP)}const M={id:d.id,email:_,nombreCompleto:T,curso:k,profile:D,activo:y.activo!==!1,fechaCreacion:((m=(h=y.fechaCreacion)==null?void 0:h.toDate)==null?void 0:m.call(h))||new Date(y.fechaCreacion)||new Date,ultimaActividad:((b=(g=y.ultimaActividad)==null?void 0:g.toDate)==null?void 0:b.call(g))||new Date(y.ultimaActividad)||new Date,...y};i.push(M)}catch(y){console.warn(`Error processing user document ${d.id}:`,y)}}),i.sort((d,h)=>d.nombreCompleto.localeCompare(h.nombreCompleto)),console.log(`Processed ${i.length} users successfully`);const o=i.reduce((d,h)=>(d[h.profile]=(d[h.profile]||0)+1,d),{});console.log("Users by profile:",o);const l=i.filter(d=>d.profile===jt.ESTUDIANTE);console.log(`Estudiantes: ${l.length}`);const u=l.filter(d=>d.curso);console.log(`Estudiantes con curso: ${u.length}`),t(i)},a=>{console.error("Error in subscribeToAllUsers:",a),e&&e(new Error(`Error al cargar usuarios: ${a.message}`))})}catch(r){return console.error("Error setting up subscribeToAllUsers:",r),e&&e(new Error(`Error al configurar suscripción de usuarios: ${r instanceof Error?r.message:"Error desconocido"}`)),()=>{}}},ey=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},h2e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),m2e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:c.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H9.5l3.5 3.5L11.59 18 6 12.41 11.59 7 13 8.41 9.5 11H17v2z"})}),p2e=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState([]),[s,a]=Z.useState(!0),[i,o]=Z.useState(null),[l,u]=Z.useState(new Date),[d,h]=Z.useState("todos"),[m,g]=Z.useState("");Z.useEffect(()=>{a(!0),o(null);const L=l.getFullYear(),C=l.getMonth();console.log("=== INICIANDO CARGA DE DATOS ==="),console.log("Año:",L,"Mes:",C);let E=!1,B=!1;const O=()=>{E&&B&&(console.log("=== CARGA COMPLETA ==="),a(!1))};(async()=>{console.log("🧪 INICIANDO PRUEBA DIRECTA SIMPLE...");try{const F=kt(Zr,"asistencia_dual"),Q=Yt(F,BA(5)),H=await Cs(Q);if(console.log(`✅ asistencia_dual - Documentos encontrados: ${H.size}`),H.size>0)H.docs.forEach((ne,J)=>{const re=ne.data();console.log(`   ${J+1}. ${ne.id.slice(0,8)} - ${re.emailEstudiante} - ${re.tipo}`),console.log("      Fecha original:",re.fechaHora),console.log("      Todos los campos:",Object.keys(re))});else{console.log("❌ No se encontraron documentos en asistencia_dual");const ne=["asistenciaEmpresa","asistencia_empresa"];for(const J of ne)try{const re=kt(Zr,J),G=Yt(re,BA(3)),q=await Cs(G);if(console.log(`📋 ${J}: ${q.size} documentos`),q.size>0){const W=q.docs[0].data();console.log("   Estructura:",Object.keys(W)),console.log("   Email:",W.emailEstudiante||W.email),console.log("   Fecha:",W.fechaHora||W.fecha)}}catch(re){console.log(`❌ ${J}: ${re instanceof Error?re.message:"Error"}`)}}}catch(F){console.error("❌ Error en prueba directa:",F),F.code==="permission-denied"?(console.log("🔒 PROBLEMA: Permisos de Firestore denegados"),console.log("💡 Ve a Firebase Console → Firestore → Rules y verifica los permisos")):F.code==="failed-precondition"&&(console.log("📊 PROBLEMA: Faltan índices en Firestore"),console.log("💡 Ve a Firebase Console → Firestore → Indexes"))}})(),u2e(L,C).then(F=>{console.log("🔍 Debug info for collections:",F),Object.entries(F).forEach(([Q,H])=>{if(H.exists&&H.totalDocs>0){if(console.log(`
📋 COLECCIÓN ${Q.toUpperCase()}:`),console.log(`   📊 Total documentos: ${H.totalDocs}`),console.log(`   📅 Documentos del período: ${H.count}`),console.log(`   🔑 Campo de fecha: ${H.hasDateField}`),H.sampleDoc){console.log("   📄 Documento ejemplo:",H.sampleDoc);const ne=H.sampleDoc,J=ne.emailEstudiante||ne.email||ne.userEmail||ne.correo||"NO ENCONTRADO",re=ne.tipo||ne.type||ne.action||ne.tipoRegistro||"NO ENCONTRADO",G=ne.fechaHora||ne.fecha||ne.timestamp||ne.createdAt||"NO ENCONTRADO";console.log(`   📧 Email estudiante: ${J}`),console.log(`   📝 Tipo registro: ${re}`),console.log(`   📅 Fecha: ${G}`),console.log("   🗂️ Todos los campos:",Object.keys(ne))}H.filteredDocs&&H.filteredDocs.length>0&&(console.log("   📋 Registros del período encontrados:",H.filteredDocs.length),H.filteredDocs.forEach((ne,J)=>{J<3&&console.log(`      ${J+1}. ID: ${ne.id}`,ne.data)}))}else H.exists?console.log(`⚪ Colección ${Q}: vacía`):console.log(`❌ Colección ${Q}: no existe`)})}).catch(F=>{console.error("Debug error:",F)}),c2e().then(F=>{console.log("🔍 Debug info for users:",F),(!F.exists||F.totalDocs===0)&&(console.log('⚠️ Colección "users" vacía o no existe. Buscando alternativas...'),["usuarios","estudiantes","profiles","accounts","members"].forEach(async H=>{var ne;try{const J=kt(Zr,H),re=Yt(J,BA(5)),G=await Cs(re);G.size>0?(console.log(`✅ Encontrada colección alternativa: ${H} con ${G.size} documentos`),console.log("Documento muestra:",(ne=G.docs[0])==null?void 0:ne.data())):console.log(`❌ Colección ${H}: vacía`)}catch{console.log(`❌ Colección ${H}: no existe`)}}))}).catch(F=>{console.error("Users debug error:",F)});try{console.log("Configurando suscripción a asistencia...");const F=A2e(L,C,H=>{if(console.log("✅ Received registros:",H.length),H.length>0){console.log("📋 ANÁLISIS DE REGISTROS RECIBIDOS:"),console.log("Sample registro:",H[0]);const ne=[...new Set(H.map(ie=>ie.emailEstudiante).filter(Boolean))];console.log("📧 Emails de estudiantes en registros:",ne);const J=[...new Set(H.map(ie=>ie.tipo).filter(Boolean))];console.log("📝 Tipos de registro encontrados:",J);const re=H.reduce((ie,j)=>{const Y=new Date(j.fechaHora).getDate();return ie[Y]||(ie[Y]=[]),ie[Y].push(j),ie},{});console.log("📅 Registros por día del mes:",Object.keys(re).map(ie=>({dia:parseInt(ie),cantidad:re[parseInt(ie)].length})));const G=r.map(ie=>ie.email).filter(Boolean);console.log("👥 Emails de estudiantes cargados:",G);const q=ne.filter(ie=>G.includes(ie)),W=ne.filter(ie=>!G.includes(ie));console.log("✅ Emails que coinciden:",q),console.log("❌ Emails que NO coinciden:",W)}else console.log("⚠️ No se encontraron registros de asistencia para el período");e(H),E=!0,O()},H=>{console.error("❌ Error fetching asistencia:",H),o("Error al cargar datos de asistencia: "+H.message),E=!0,O()});console.log("Configurando suscripción a usuarios...");const Q=d2e(H=>{if(console.log("✅ Received users (multi-collection):",H.length),H.length>0){console.log("Sample user:",H[0]);const ne=H.filter(J=>J.profile===jt.ESTUDIANTE&&J.curso);console.log("Dual students found:",ne.length),ne.forEach(J=>{console.log(`- ${J.nombreCompleto} (${J.curso}) - ${J.email}`)})}n(H),B=!0,O()},H=>{console.error("❌ Error fetching users (multi-collection):",H),console.log("🔄 Intentando con función original de usuarios...");const ne=f2e(J=>{console.log("✅ Received users (fallback):",J.length),n(J),B=!0,O()},J=>{console.error("❌ Error en fallback también:",J),o("Error al cargar estudiantes: "+H.message),B=!0,O()})});return()=>{console.log("Limpiando suscripciones..."),F&&F(),Q&&Q()}}catch(F){console.error("❌ Error setting up subscriptions:",F),o("Error al inicializar conexiones: "+(F instanceof Error?F.message:"Error desconocido")),a(!1)}},[l]);const{monthDays:b,monthName:y,year:_}=Z.useMemo(()=>{const L=l.getFullYear(),C=l.getMonth();return{monthDays:new Date(L,C+1,0).getDate(),monthName:l.toLocaleString("es-CL",{month:"long"}),year:L}},[l]),T=Z.useMemo(()=>{let L=r.filter(C=>C.profile===jt.ESTUDIANTE&&C.curso&&vh.includes(ey(C.curso)));if(d!=="todos"&&(L=L.filter(C=>ey(C.curso||"")===d)),m&&(L=L.filter(C=>C.nombreCompleto.toLowerCase().includes(m.toLowerCase()))),t.length>0){const C=[...new Set(t.map(O=>O.emailEstudiante).filter(Boolean))],E=L.map(O=>O.email),B=C.filter(O=>!E.includes(O));if(B.length>0){console.log("📝 Agregando estudiantes faltantes con registros:",B);const R=B.map(F=>{const Q=t.find(H=>H.emailEstudiante===F);return{id:F,email:F,nombreCompleto:(Q==null?void 0:Q.nombreEstudiante)||F.split("@")[0],curso:(Q==null?void 0:Q.curso)||"3ºC",profile:jt.ESTUDIANTE,activo:!0,fechaCreacion:new Date,ultimaActividad:new Date}}).filter(F=>{const Q=d==="todos"||ey(F.curso)===d,H=!m||F.nombreCompleto.toLowerCase().includes(m.toLowerCase());return Q&&H&&vh.includes(ey(F.curso))});L=[...L,...R]}}return console.log(`👥 Estudiantes filtrados para mostrar: ${L.length}`),L.forEach(C=>{console.log(`   - ${C.nombreCompleto} (${C.curso}) - ${C.email}`)}),L.sort((C,E)=>C.nombreCompleto.localeCompare(E.nombreCompleto))},[r,d,m,t]),k=Z.useMemo(()=>{console.log("🔄 Procesando datos de asistencia para la tabla..."),console.log(`📊 Total registros a procesar: ${t.length}`),console.log(`👥 Estudiantes disponibles: ${T.length}`);const L=new Map;return t.length===0?(console.log("⚠️ No hay registros para procesar aún"),L):(t.forEach((C,E)=>{const B=C.emailEstudiante;if(!B)return;let O;if(C.fechaHora instanceof Date)O=C.fechaHora;else if(C.fechaHora&&typeof C.fechaHora=="object"&&"toDate"in C.fechaHora)O=C.fechaHora.toDate();else if(typeof C.fechaHora=="string")O=new Date(C.fechaHora);else{console.warn("Fecha no válida en registro:",C);return}const R=O.getDate(),F=O.getMonth(),Q=O.getFullYear();E<3&&console.log(`📅 Registro ${E+1}:`,{email:B,tipo:C.tipo,fechaOriginal:C.fechaHora,fechaProcesada:O.toLocaleString(),año:Q,mes:F,día:R}),L.has(B)||L.set(B,new Map);const H=L.get(B);H.has(R)||H.set(R,{});const ne=H.get(R);C.tipo==="Entrada"?(!ne.entrada||O<new Date(ne.entrada.fechaHora))&&(ne.entrada=C):C.tipo==="Salida"&&(!ne.salida||O>new Date(ne.salida.fechaHora))&&(ne.salida=C)}),console.log("📋 Datos de asistencia procesados:",{estudiantesConRegistros:L.size,estudiantes:Array.from(L.keys()),registrosPorEstudiante:Array.from(L.entries()).map(([C,E])=>({email:C,dias:Array.from(E.keys()),totalRegistros:Array.from(E.values()).reduce((B,O)=>B+(O.entrada?1:0)+(O.salida?1:0),0)}))}),L)},[t]),D=L=>{u(C=>{const E=new Date(C);return E.setMonth(E.getMonth()+L),E})},M=L=>{L!=null&&L.latitud&&(L!=null&&L.longitud)&&window.open(`https://www.google.com/maps?q=${L.latitud},${L.longitud}`,"_blank")},P=["D","L","M","M","J","V","S"];return i?c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:c.jsx("div",{className:"text-red-600 bg-red-100 dark:bg-red-900/30 p-4 rounded-md",children:i})}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Asistencia Dual Mensual"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2",children:[c.jsx("button",{onClick:()=>D(-1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes anterior",children:"←"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-200 capitalize w-48 text-center",children:`${y} ${_}`}),c.jsx("button",{onClick:()=>D(1),disabled:s,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":"Mes siguiente",children:"→"})]}),c.jsxs("select",{value:d,onChange:L=>h(L.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[c.jsx("option",{value:"todos",children:"Todos los Cursos"}),vh.map(L=>c.jsx("option",{value:L,children:L},L))]}),c.jsx("input",{type:"text",placeholder:"Buscar estudiante...",value:m,onChange:L=>g(L.target.value),disabled:s,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 disabled:opacity-50 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),s?c.jsxs("div",{className:"text-center text-amber-600 py-10",children:[c.jsx("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600 mb-4"}),c.jsx("div",{children:"Cargando datos de asistencia..."})]}):c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full border-collapse border border-slate-200 dark:border-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"sticky left-0 bg-slate-100 dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-semibold w-48",children:"Estudiante"}),Array.from({length:b},(L,C)=>{const B=new Date(_,l.getMonth(),C+1).getDay(),O=B===0||B===6;return c.jsxs("th",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-xs w-16 ${O?"bg-slate-100 dark:bg-slate-700/50":""}`,children:[c.jsx("div",{className:"font-semibold",children:P[B]}),c.jsx("div",{children:C+1})]},C)})]})}),c.jsx("tbody",{children:T.length>0?T.map(L=>c.jsxs("tr",{className:"hover:bg-slate-50 dark:hover:bg-slate-700/30",children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-800 z-10 p-2 border-r border-b border-slate-200 dark:border-slate-600 text-sm font-medium whitespace-nowrap",children:L.nombreCompleto}),Array.from({length:b},(C,E)=>{var Q;const B=E+1,O=(Q=k.get(L.email))==null?void 0:Q.get(B),R=new Date(_,l.getMonth(),E+1),F=R.getDay()===0||R.getDay()===6;return L.email==="alexis.robles@industrialderecoleta.cl"&&B===2&&console.log("🔍 Verificando día 2 para Alexis:",{email:L.email,day:B,hasDataForStudent:k.has(L.email),studentDayRecords:O,allAttendanceKeys:Array.from(k.keys()),daysForStudent:k.get(L.email)?Array.from(k.get(L.email).keys()):[]}),c.jsx("td",{className:`p-1 border-r border-b border-slate-200 dark:border-slate-600 text-center align-middle ${F?"bg-slate-100 dark:bg-slate-700/50":""}`,children:c.jsxs("div",{className:"flex justify-center items-center gap-1.5 h-full",children:[(O==null?void 0:O.entrada)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var H;return M((H=O.entrada)==null?void 0:H.ubicacion)},children:[c.jsx(h2e,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(O.entrada.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]}),(O==null?void 0:O.salida)&&c.jsxs("div",{className:"group relative cursor-pointer",onClick:()=>{var H;return M((H=O.salida)==null?void 0:H.ubicacion)},children:[c.jsx(m2e,{}),c.jsx("span",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 w-max px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-20",children:new Date(O.salida.fechaHora).toLocaleTimeString("es-CL",{hour:"2-digit",minute:"2-digit"})})]})]})},B)})]},L.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:b+1,className:"text-center p-8 text-slate-500",children:"No hay estudiantes en el curso seleccionado o que coincidan con la búsqueda."})})})]})})]})},fb="evaluaciones_formativas",hb="calificaciones_formativas",UT="trabajos_grupales_formativos",g2e="usuarios",MT=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},x2e=(t,e,r)=>{const n=Yt(kt(vt,fb),Xr("curso","==",t),Xr("asignatura","==",e),Pr("fecha","asc"));return mr(n,s=>{r(s.docs.map(a=>MT(a)))},s=>{console.error("Error al suscribirse a evaluaciones:",s),r([])})},v2e=async(t,e)=>{const r=zw(vt),n=ur(kt(vt,fb));r.set(n,{...t,fecha:or.fromDate(new Date(t.fecha+"T00:00:00"))});const s=ur(vt,hb,n.id);return r.set(s,e),await r.commit(),n.id},y2e=async(t,e)=>{const r=ur(vt,fb,t);await pi(r,e,{merge:!0})},w2e=async t=>{const e=zw(vt);e.delete(ur(vt,fb,t)),e.delete(ur(vt,hb,t)),await e.commit()},b2e=(t,e)=>{if(t.length===0)return e({}),()=>{};const r=t.map(n=>{const s=ur(vt,hb,n);return mr(s,a=>{a.exists()&&e({[n]:a.data()})})});return()=>r.forEach(n=>n())},C2e=async(t,e)=>{const r=ur(vt,hb,t);await pi(r,e,{merge:!0})},E2e=(t,e,r)=>{const n=Yt(kt(vt,UT),Xr("curso","==",t),Xr("asignatura","==",e),Pr("fechaPresentacion","desc"));return mr(n,s=>{r(s.docs.map(a=>MT(a)))},s=>{console.error("Error al suscribirse a trabajos grupales:",s),r([])})},_2e=async t=>{const e={...t,fechaPresentacion:or.fromDate(new Date(t.fechaPresentacion+"T00:00:00"))};await ps(kt(vt,UT),e)},S2e=async(t,e)=>{const r=ur(vt,UT,t);await pi(r,e,{merge:!0})},T2e=t=>{const e=Yt(kt(vt,g2e));return mr(e,r=>{t(r.docs.map(n=>MT(n)))},r=>{console.error("Error al suscribirse a usuarios:",r),t([])})},f7=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},Y2={"Lengua y Literatura":"📚",Matemática:"➗",Inglés:"🇬🇧",Filosofía:"🤔","Historia y Geografía":"🌍","Educación Ciudadana":"🏛️",Ciencias:"🔬","Ciencias para la Ciudadanía":"💡",Artes:"🎨",Música:"🎵","Educación Física":"🏃‍♂️",Orientación:"🧭","Mecánica Industrial":"⚙️","Mecánica Automotriz":"🚗",Emprendimiento:"💼",Tecnología:"💻","Pensamiento Lógico":"🧠","Competencia Lectora":"📖",Default:"✏️"},h7=t=>t.startsWith("1º")?{bg:"bg-blue-500",text:"text-white",border:"border-blue-700",spine:"bg-blue-800"}:t.startsWith("2º")?{bg:"bg-green-500",text:"text-white",border:"border-green-700",spine:"bg-green-800"}:t.startsWith("3º")?{bg:"bg-yellow-400",text:"text-yellow-900",border:"border-yellow-600",spine:"bg-yellow-700"}:t.startsWith("4º")?{bg:"bg-red-500",text:"text-white",border:"border-red-700",spine:"bg-red-800"}:{bg:"bg-slate-500",text:"text-white",border:"border-slate-700",spine:"bg-slate-800"},N2e=({cursos:t,onSelect:e})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione un Libro de Clases"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Cada libro representa un curso y contiene sus evaluaciones formativas."}),t.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6",children:t.map(r=>{const n=h7(r);return c.jsxs("div",{className:"space-y-2 text-center",children:[c.jsxs("button",{onClick:()=>e(r),className:`relative w-full h-48 rounded-md shadow-lg ${n.bg} ${n.border} border-b-4 transform hover:-translate-y-2 transition-transform duration-300 group`,children:[c.jsx("div",{className:`absolute top-0 left-0 w-6 h-full ${n.spine} rounded-l-md`}),c.jsxs("div",{className:`flex flex-col items-center justify-center h-full p-2 ${n.text}`,children:[c.jsx("span",{className:"font-bold text-2xl drop-shadow-sm",children:r.slice(0,2)}),c.jsx("span",{className:"font-black text-5xl drop-shadow-md",children:r.slice(2)})]})]}),c.jsx("p",{className:"font-semibold text-slate-700 dark:text-slate-300",children:r})]},r)})}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene cursos asignados."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador para que le asigne cursos a su perfil."})]})]}),B2e=({curso:t,asignaturas:e,onSelect:r,onBack:n})=>{const s=h7(t);return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800 dark:hover:text-slate-200",children:"← Volver a Cursos"}),c.jsxs("div",{className:`p-2 rounded-md ${s.bg} ${s.text} font-bold`,children:["Libro de Clases: ",t]})]}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Seleccione una Asignatura"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Elija la asignatura para ver o agregar calificaciones."}),e.length>0?c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:e.map(a=>c.jsxs("button",{onClick:()=>r(a),className:"flex items-center gap-3 p-4 rounded-lg bg-slate-100 hover:bg-amber-100 dark:bg-slate-700 dark:hover:bg-amber-900/50 transition-colors",children:[c.jsx("span",{className:"text-2xl",children:Y2[a]||Y2.Default}),c.jsx("span",{className:"font-semibold text-slate-800 dark:text-slate-200 text-left",children:a})]},a))}):c.jsxs("div",{className:"text-center py-10 bg-slate-100 rounded-lg",children:[c.jsx("p",{className:"text-slate-500",children:"No tiene asignaturas asignadas."}),c.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Contacte a un administrador."})]})]})},k2e=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[s,a]=Z.useState([]),[i,o]=Z.useState({}),[l,u]=Z.useState({fecha:new Date().toISOString().split("T")[0],nombreActividad:""}),[d,h]=Z.useState(null),[m,g]=Z.useState(null),[b,y]=Z.useState(!0),_=Z.useMemo(()=>r.filter(E=>E.profile===jt.ESTUDIANTE&&f7(E.curso||"")===t).map(E=>E.nombreCompleto).sort((E,B)=>E.localeCompare(B)),[r,t]);Z.useEffect(()=>{y(!0);const E=x2e(t,e,B=>{a(B);const O=B.map(F=>F.id),R=b2e(O,F=>{o(Q=>({...Q,...F}))});return y(!1),()=>R()});return()=>E()},[t,e]);const T=E=>{const{name:B,value:O}=E.target;d?h(R=>R?{...R,[B]:O}:null):u(R=>({...R,[B]:O}))},k=async E=>{if(E.preventDefault(),g(null),!l.nombreActividad.trim()){g("El nombre de la actividad es obligatorio.");return}const B={asignatura:e,curso:t,...l},O=_.reduce((R,F)=>(R[F]="trabajado",R),{});try{await v2e(B,O),u({fecha:new Date().toISOString().split("T")[0],nombreActividad:""})}catch(R){console.error(R),g("No se pudo crear la evaluación.")}},D=(E,B)=>{var Q;const R=(((Q=i[E])==null?void 0:Q[B])||"trabajado")==="trabajado"?"no trabajado":"trabajado",F={...i,[E]:{...i[E]||{},[B]:R}};o(F),C2e(E,{[B]:R}).catch(H=>{console.error("Error updating grade:",H)})},M=E=>h(E),P=async()=>{if(d)try{await y2e(d.id,{nombreActividad:d.nombreActividad,fecha:d.fecha}),h(null)}catch(E){console.error(E),g("No se pudo guardar la edición.")}},L=async E=>{if(window.confirm("¿Eliminar esta evaluación y todas sus calificaciones?"))try{await w2e(E)}catch(B){console.error(B),g("No se pudo eliminar la evaluación.")}},C=Z.useCallback(E=>{if(s.length===0)return"-";let B=0,O=0;return s.forEach(R=>{var Q;const F=(Q=i[R.id])==null?void 0:Q[E];F==="trabajado"?(B+=7,O++):F==="no trabajado"&&(B+=2,O++)}),O===0?"-":(B/O).toFixed(1)},[i,s]);return b?c.jsx("div",{className:"text-center py-10",children:"Cargando calificaciones..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("form",{onSubmit:k,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold col-span-full text-slate-700 dark:text-slate-200",children:"Crear Nueva Evaluación"}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"nombreActividad",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre Actividad"}),c.jsx("input",{id:"nombreActividad",type:"text",name:"nombreActividad",value:l.nombreActividad,onChange:T,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"w-full",children:[c.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Fecha"}),c.jsx("input",{id:"fecha",type:"date",name:"fecha",value:l.fecha,onChange:T,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"w-full",children:c.jsx("button",{type:"submit",className:"w-full bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700 h-10",children:"Crear"})}),m&&c.jsx("p",{className:"text-red-500 text-sm col-span-full",children:m})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{scope:"col",className:"sticky left-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-48",children:"Estudiante"}),s.map(E=>c.jsx("th",{scope:"col",className:"px-3 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase w-36",children:(d==null?void 0:d.id)===E.id?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsx("input",{type:"text",name:"nombreActividad",value:d.nombreActividad,onChange:T,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("input",{type:"date",name:"fecha",value:d.fecha,onChange:T,className:"text-xs p-1 w-full dark:bg-slate-600"}),c.jsx("button",{onClick:P,className:"text-xs bg-green-200 text-green-800 rounded px-1",children:"✓"})]}):c.jsxs("div",{className:"flex flex-col items-center",children:[c.jsx("span",{className:"font-semibold",children:E.nombreActividad}),c.jsx("span",{className:"font-normal text-slate-500",children:E.fecha}),c.jsxs("div",{className:"flex gap-2 mt-1",children:[c.jsx("button",{onClick:()=>M(E),className:"text-blue-500 hover:text-blue-700",children:"✏️"}),c.jsx("button",{onClick:()=>L(E.id),className:"text-red-500 hover:text-red-700",children:"🗑️"})]})]})},E.id)),c.jsx("th",{scope:"col",className:"sticky right-0 bg-slate-100 dark:bg-slate-800 px-4 py-3 text-center text-xs font-medium text-slate-600 dark:text-slate-300 uppercase z-10 w-24",children:"Promedio"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-900 divide-y divide-slate-200 dark:divide-slate-700",children:_.map(E=>c.jsxs("tr",{children:[c.jsx("td",{className:"sticky left-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-medium text-slate-800 dark:text-slate-200 w-48",children:E}),s.map(B=>{var F;const R=((F=i[B.id])==null?void 0:F[E])==="trabajado";return c.jsx("td",{className:"px-2 py-1 whitespace-nowrap w-36 text-center",children:c.jsx("button",{onClick:()=>D(B.id,E),className:`text-3xl transition-opacity duration-200 ${R?"opacity-100":"opacity-20"}`,children:Y2[e]||Y2.Default})},B.id)}),c.jsx("td",{className:"sticky right-0 bg-white dark:bg-slate-900 px-4 py-2 whitespace-nowrap text-sm font-bold text-slate-800 dark:text-slate-200 w-24 text-center",children:C(E)})]},E))})]})})]})},I2e=({curso:t,asignatura:e,allUsers:r,onBack:n})=>{const[s,a]=Z.useState([]),[i,o]=Z.useState(null),[l,u]=Z.useState({nombre:"",fecha:new Date().toISOString().split("T")[0]}),[d,h]=Z.useState({}),[m,g]=Z.useState(2),b=Z.useMemo(()=>r.filter(M=>M.profile===jt.ESTUDIANTE&&f7(M.curso||"")===t).sort((M,P)=>M.nombreCompleto.localeCompare(P.nombreCompleto)),[r,t]);Z.useEffect(()=>{const M=E2e(t,e,a);return()=>M()},[t,e]),Z.useEffect(()=>{if(i){const M={};i.grupos.forEach(P=>{P.integrantes.forEach(L=>{M[L.nombre]={groupNumber:String(P.numero),role:L.rol||""}})}),h(M)}else h({})},[i]);const y=async M=>{if(M.preventDefault(),!l.nombre.trim())return;const P={curso:t,asignatura:e,nombreActividad:l.nombre,fechaPresentacion:l.fecha,grupos:[]};try{await _2e(P),u({nombre:"",fecha:new Date().toISOString().split("T")[0]})}catch(L){console.error(L),alert("No se pudo crear la actividad grupal.")}},_=async()=>{if(!i)return;const M=new Map;for(const L of b){const C=d[L.nombreCompleto];if(C&&C.groupNumber){const E=parseInt(C.groupNumber,10);isNaN(E)||(M.has(E)||M.set(E,[]),M.get(E).push({nombre:L.nombreCompleto,rol:C.role||void 0}))}}const P=Array.from(M.entries()).map(([L,C])=>({numero:L,integrantes:C})).sort((L,C)=>L.numero-C.numero);try{await S2e(i.id,{grupos:P}),alert("Grupos guardados con éxito.")}catch(L){console.error(L),alert("No se pudieron guardar los grupos.")}},T=()=>{if(m<2){alert("Debe haber al menos 2 grupos.");return}const M=[...b].sort(()=>Math.random()-.5),P={};M.forEach((L,C)=>{var E;P[L.nombreCompleto]={groupNumber:String(C%m+1),role:((E=d[L.nombreCompleto])==null?void 0:E.role)||""}}),h(P)},k=(M,P,L)=>{h(C=>({...C,[M]:{...C[M]||{groupNumber:"",role:""},[P]:L}}))},D=Z.useMemo(()=>{const M=new Map;return Object.entries(d).forEach(([P,L])=>{L.groupNumber&&(M.has(L.groupNumber)||M.set(L.groupNumber,[]),M.get(L.groupNumber).push({nombre:P,rol:L.role}))}),Array.from(M.entries()).sort((P,L)=>parseInt(P[0])-parseInt(L[0]))},[d]);return i?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>o(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a Actividades"}),c.jsx("h2",{className:"text-2xl font-bold",children:i.nombreActividad})]}),c.jsx("button",{onClick:_,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Guardar Grupos"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"md:col-span-1 space-y-4",children:[c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Auto-asignación"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"number",value:m,onChange:M=>g(parseInt(M.target.value,10)),min:"2",className:"w-20 border-slate-300 rounded"}),c.jsx("button",{onClick:T,className:"flex-1 bg-slate-200 font-semibold py-2 px-3 rounded",children:"Asignar"})]})]}),c.jsxs("div",{className:"p-4 border rounded-lg h-[60vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Nómina del Curso"}),c.jsx("table",{className:"w-full text-sm",children:c.jsx("tbody",{children:b.map(M=>{var P;return c.jsxs("tr",{children:[c.jsx("td",{className:"py-1 pr-2",children:M.nombreCompleto}),c.jsx("td",{className:"py-1",children:c.jsx("input",{type:"number",value:((P=d[M.nombreCompleto])==null?void 0:P.groupNumber)||"",onChange:L=>k(M.nombreCompleto,"groupNumber",L.target.value),className:"w-16 p-1 border rounded text-center",placeholder:"N°"})})]},M.id)})})})]})]}),c.jsxs("div",{className:"md:col-span-2 p-4 border rounded-lg h-[70vh] overflow-y-auto",children:[c.jsx("h3",{className:"font-semibold mb-2",children:"Grupos Formados"}),c.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:D.map(([M,P])=>c.jsxs("div",{className:"p-3 bg-slate-50 rounded-lg border",children:[c.jsxs("h4",{className:"font-bold border-b pb-1 mb-2",children:["Grupo ",M]}),c.jsx("ul",{className:"space-y-2",children:P.map(L=>c.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[c.jsx("span",{className:"flex-1 truncate",children:L.nombre}),c.jsxs("select",{value:L.rol||"",onChange:C=>k(L.nombre,"role",C.target.value),className:"p-1 border rounded text-xs w-32",children:[c.jsx("option",{value:"",children:"-- Asignar Rol --"}),yM.map(C=>c.jsx("option",{value:C,children:C},C))]})]},L.nombre))})]},M))})]})]})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("button",{onClick:n,className:"text-slate-500 hover:text-slate-800",children:"← Volver a Asignaturas"}),c.jsxs("div",{className:"bg-slate-100 p-2 rounded-md font-bold text-slate-800",children:[t," / ",e]})]}),c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Crear Actividad Grupal"}),c.jsxs("form",{onSubmit:y,className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[c.jsx("input",{value:l.nombre,onChange:M=>u({...l,nombre:M.target.value}),placeholder:"Nombre de la actividad",className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("input",{type:"date",value:l.fecha,onChange:M=>u({...l,fecha:M.target.value}),className:"w-full border-slate-300 rounded-md",required:!0}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg",children:"Crear"})]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"Actividades Creadas"}),s.map(M=>c.jsxs("button",{onClick:()=>o(M),className:"w-full text-left p-3 bg-white dark:bg-slate-700 hover:bg-slate-100 rounded-md border",children:[c.jsx("p",{className:"font-bold",children:M.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Fecha: ",M.fechaPresentacion]})]},M.id))]})]})},F2e=({currentUser:t})=>{const[e,r]=Z.useState("calificaciones"),[n,s]=Z.useState(null),[a,i]=Z.useState(null),[o,l]=Z.useState([]),[u,d]=Z.useState(!0);Z.useEffect(()=>{d(!0);const y=T2e(_=>{l(_),d(!1)});return()=>y()},[]);const h=Z.useMemo(()=>t.cursos||[],[t.cursos]),m=Z.useMemo(()=>t.asignaturas||[],[t.asignaturas]),g=({tab:y,label:_})=>c.jsx("button",{onClick:()=>r(y),className:`${e===y?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200 dark:hover:border-slate-600"} whitespace-nowrap py-4 px-3 border-b-2 font-medium text-sm transition-colors focus:outline-none`,children:_}),b=()=>{if(u)return c.jsx("div",{className:"text-center py-10",children:"Cargando datos de usuario..."});if(!n)return c.jsx(N2e,{cursos:h,onSelect:s});if(!a)return c.jsx(B2e,{curso:n,asignaturas:m,onSelect:i,onBack:()=>s(null)});if(e==="calificaciones")return c.jsx(k2e,{curso:n,asignatura:a,allUsers:o,onBack:()=>i(null)});if(e==="grupos")return c.jsx(I2e,{curso:n,asignatura:a,allUsers:o,onBack:()=>i(null)})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Evaluaciones Formativas"}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700",children:c.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[c.jsx(g,{tab:"calificaciones",label:"Calificaciones"}),c.jsx(g,{tab:"grupos",label:"Trabajos Grupales"})]})}),c.jsx("div",{className:"mt-6",children:b()})]})},_1="acompanamientos",D2e=async()=>{try{const t=Yt(kt(Zr,_1),Pr("fecha","desc"));return(await Cs(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener acompañamientos:",t),new Error("No se pudieron cargar los registros de acompañamiento")}},R2e=async t=>{try{return{id:(await ps(kt(Zr,_1),{...t,fecha:t.fecha||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear acompañamiento:",e),new Error("No se pudo crear el registro de acompañamiento")}},L2e=async(t,e)=>{try{const r=ur(Zr,_1,t);await ip(r,{...e,updatedAt:new Date().toISOString()})}catch(r){throw console.error("Error al actualizar acompañamiento:",r,"ID:",t),new Error("No se pudo actualizar el registro de acompañamiento")}},U2e=async t=>{try{const e=ur(Zr,_1,t);await Ta(e)}catch(e){throw console.error("Error al eliminar acompañamiento:",e,"ID:",t),new Error("No se pudo eliminar el registro de acompañamiento")}},M2e=async t=>{try{const e=Yt(kt(Zr,_1),Xr("docente","==",t),Pr("fecha","desc"));return(await Cs(e)).docs.map(n=>({id:n.id,...n.data()}))}catch(e){throw console.error("Error al obtener acompañamientos por docente:",e),new Error("No se pudieron cargar los acompañamientos del docente")}},P2e=async()=>{try{const t=ur(Zr,"configuracion","rubricaAcompanamiento"),e=await GA(t);return e.exists()?e.data().rubrica:null}catch(t){return console.error("Error al obtener rúbrica personalizada:",t),null}},j2e=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState([]),[s,a]=Z.useState(!1),[i,o]=Z.useState(!1),[l,u]=Z.useState(null),[d,h]=Z.useState("list"),[m,g]=Z.useState(null),[b,y]=Z.useState(!1),[_,T]=Z.useState(!1),k=zg,D=Z.useMemo(()=>({fecha:new Date().toISOString(),docente:"",curso:"",asignatura:"",bloques:"",rubricaResultados:{},observacionesGenerales:"",retroalimentacionConsolidada:""}),[]),[M,P]=Z.useState(D),L=Z.useCallback(async()=>{a(!0);try{const G=await D2e();e(G),u(null)}catch(G){console.error("Error al cargar acompañamientos desde Firestore",G),u("No se pudieron cargar los registros de acompañamiento desde la nube.")}finally{a(!1)}},[]),C=Z.useCallback(async()=>{o(!0);try{const q=(await o7()).filter(W=>W.profile===jt.PROFESORADO).map(W=>W.nombreCompleto).sort();n(q)}catch(G){console.error("Error al cargar profesores desde Firestore",G),u("No se pudieron cargar la lista de profesores desde la nube.")}finally{o(!1)}},[]);Z.useEffect(()=>{L(),C()},[L,C]);const E=G=>{P(q=>({...q,[G.target.name]:G.target.value}))},B=(G,q)=>{P(W=>({...W,rubricaResultados:{...W.rubricaResultados,[G]:q}}))},O=async()=>{y(!0);const{rubricaResultados:G,observacionesGenerales:q}=M;let W=`Resultados de la Rúbrica:
`;k.forEach(j=>{j.criteria.forEach(Y=>{const ee=G[Y.name];if(ee&&Y.levels[ee-1]){const te=Y.levels[ee-1];W+=`- Criterio: "${Y.name}" | Nivel: ${ee} (${te})
`}})}),W+=`
Observaciones Generales del Evaluador:
${q||"No se proveyeron observaciones adicionales."}`;const ie=`
            Eres un asesor pedagógico experto. Tu tarea es generar una retroalimentación formal, técnica y constructiva para un docente, basada en una observación de clase.
            La retroalimentación debe ser estructurada y usar un lenguaje pedagógico preciso.

            A continuación, los datos de la observación:
            ${W}

            Genera una retroalimentación que incluya obligatoriamente los siguientes puntos en formato Markdown:
            - ## Fortalezas Observadas: Destaca 2 o 3 puntos positivos clave, conectándolos con los criterios de la rúbrica.
            - ## Áreas de Mejora: Identifica 2 o 3 aspectos donde el docente puede mejorar, explicando el porqué con base en la evidencia.
            - ## Sugerencias y Pasos a Seguir: Ofrece recomendaciones concretas, prácticas y accionables que el docente pueda implementar.
        `;try{Wl("Acompañamiento - Consolidar Feedback");const ee=(await new bx({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}).models.generateContent({model:"gemini-2.5-flash",contents:ie})).text.replace(/(\*\*|\*)/g,"");P(te=>({...te,retroalimentacionConsolidada:ee}))}catch(j){console.error("Error al generar retroalimentación con IA",j),alert("No se pudo generar la retroalimentación. Inténtelo de nuevo.")}finally{y(!1)}},R=async()=>{const G=m;if(!G)return;T(!0);const q=t.find(ge=>ge.id===G);if(!q){T(!1);return}const W=new lr({orientation:"p",unit:"mm",format:"a4"}),ie=20,j=W.internal.pageSize.getWidth(),Y=W.internal.pageSize.getHeight(),ee=j-ie*2;let te=ie;const ce=ge=>{ge.setFont("helvetica","bold"),ge.setFontSize(10),ge.setTextColor(100),ge.text("LICEO INDUSTRIAL DE RECOLETA",j/2,15,{align:"center"})};ce(W),W.setFont("helvetica","bold"),W.setFontSize(18),W.setTextColor(40),W.text("Informe de Acompañamiento Docente",j/2,te+10,{align:"center"}),te+=25,il(W,{startY:te,body:[[{content:"Docente:",styles:{fontStyle:"bold"}},q.docente],[{content:"Fecha:",styles:{fontStyle:"bold"}},new Date(q.fecha).toLocaleDateString("es-CL")],[{content:"Asignatura:",styles:{fontStyle:"bold"}},q.asignatura],[{content:"Curso:",styles:{fontStyle:"bold"}},q.curso]],theme:"plain",styles:{fontSize:11,cellPadding:2,textColor:[50,50,50]},columnStyles:{0:{cellWidth:35}}}),te=W.lastAutoTable.finalY+10;const be=[],he=["Débil","Incipiente","Satisfactorio","Avanzado"];k.forEach(ge=>{be.push([{content:ge.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40],halign:"left"}}]),ge.criteria.forEach(de=>{const oe=q.rubricaResultados[de.name],Ue=oe?he[oe-1]:"No evaluado";be.push([de.name,Ue])})}),il(W,{startY:te,head:[["Indicador","Nivel de Logro"]],body:be,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},didDrawPage:ge=>{ge.pageNumber>1&&ce(W)}}),te=W.lastAutoTable.finalY+15;const fe=(ge,de)=>{te>Y-ie-10&&(W.addPage(),ce(W),te=ie),W.setFont("helvetica",de.style),W.setFontSize(de.size);const oe=W.splitTextToSize(ge,ee),Ue=oe.length*(de.size*.352778*1.15);te+Ue>Y-ie&&(W.addPage(),ce(W),te=ie),W.text(oe,ie,te,{align:"left"}),te+=Ue+(de.isTitle?5:8)};q.retroalimentacionConsolidada?q.retroalimentacionConsolidada.split(/(?=## )/).forEach(de=>{if(de.trim()){const oe=de.trim().split(`
`),Ue=oe[0].replace("## ",""),tt=oe.slice(1).join(`
`).trim();fe(Ue,{size:14,style:"bold",isTitle:!0}),fe(tt,{size:11,style:"normal",isTitle:!1})}}):(fe("Retroalimentación Consolidada",{size:14,style:"bold",isTitle:!0}),fe("No se ha generado retroalimentación.",{size:11,style:"normal",isTitle:!1})),W.save(`Acompanamiento_${q.docente.replace(/\s/g,"_")}_${new Date(q.fecha).toLocaleDateString("es-CL")}.pdf`),T(!1)},F=async G=>{if(G.preventDefault(),!M.docente||!M.curso||!M.asignatura){alert("Docente, curso y asignatura son campos obligatorios.");return}try{let q=m;if(m)await L2e(m,M);else{const W=await R2e(M);g(W.id),P({...M}),q=W.id}await L(),q&&alert("¡Guardado correctamente!")}catch(q){console.error("Error al guardar acompañamiento:",q),u("Error al guardar el registro en la nube.")}},Q=()=>{P(D),g(null),h("form"),u(null)},H=G=>{P(G),g(G.id),h("form"),u(null)},ne=async G=>{if(window.confirm("¿Está seguro de que desea eliminar este registro de acompañamiento?"))try{await U2e(G),await L()}catch(q){console.error("Error al eliminar acompañamiento:",q),u("No se pudo eliminar el registro en la nube.")}},J=()=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Registros de Acompañamiento"}),c.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),s&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando registros desde la nube..."}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:l}),!s&&t.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg",children:"No hay registros de acompañamiento en la nube."}),c.jsx("div",{className:"space-y-4",children:!s&&t.length>0&&t.map(G=>c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:G.docente}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[G.curso," - ",G.asignatura]}),c.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(G.fecha).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:()=>H(G),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Ver y Editar"}),c.jsx("button",{onClick:()=>ne(G.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]},G.id))})]}),re=()=>c.jsx("div",{className:"animate-fade-in",children:c.jsxs("form",{onSubmit:F,className:"space-y-8",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:m?"Editando Acompañamiento":"Nuevo Acompañamiento Docente"}),c.jsx("button",{type:"button",onClick:()=>h("list"),className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold",children:"← Volver al listado"})]}),l&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md",children:l}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50 dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"docente",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Docente"}),c.jsxs("select",{name:"docente",value:M.docente,onChange:E,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",disabled:i,children:[c.jsx("option",{value:"",children:i?"Cargando...":"Seleccione"}),r.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"curso",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Curso"}),c.jsxs("select",{name:"curso",value:M.curso,onChange:E,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),ca.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asignatura",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asignatura"}),c.jsxs("select",{name:"asignatura",value:M.asignatura,onChange:E,required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione"}),ol.map(G=>c.jsx("option",{value:G,children:G},G))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"bloques",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Bloques Horarios"}),c.jsx("input",{type:"text",name:"bloques",value:M.bloques,onChange:E,placeholder:"Ej: 3-4",className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsx("div",{className:"overflow-x-auto border border-slate-200 dark:border-slate-700 rounded-lg",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-100 dark:bg-slate-700",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-1/12",children:"Dominio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-3/12",children:"Criterio"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Débil (1)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Incipiente (2)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Satisfactorio (3)"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-600 dark:text-slate-300 uppercase tracking-wider w-2/12",children:"Avanzado (4)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:k.map(G=>c.jsx(dt.Fragment,{children:G.criteria.map((q,W)=>c.jsxs("tr",{children:[W===0&&c.jsx("td",{rowSpan:G.criteria.length,className:"px-3 py-4 align-top text-sm font-semibold text-slate-800 dark:text-slate-200 border-r dark:border-slate-600",children:G.domain}),c.jsx("td",{className:"px-3 py-4 align-top text-sm font-medium text-slate-700 dark:text-slate-300 border-r dark:border-slate-600",children:q.name}),q.levels.map((ie,j)=>{const Y=j+1,ee=M.rubricaResultados[q.name]===Y;return c.jsx("td",{onClick:()=>B(q.name,Y),className:`px-3 py-4 align-top text-sm text-slate-600 dark:text-slate-300 border-r dark:border-slate-600 cursor-pointer transition-colors ${ee?"bg-amber-100 dark:bg-amber-900/30":"hover:bg-amber-50 dark:hover:bg-slate-700"}`,children:ie},Y)})]},q.name))},G.domain))})]})}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"observacionesGenerales",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Observaciones Generales"}),c.jsx("textarea",{name:"observacionesGenerales",value:M.observacionesGenerales,onChange:E,rows:5,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("label",{htmlFor:"retroalimentacionConsolidada",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Retroalimentación Consolidada"}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("textarea",{name:"retroalimentacionConsolidada",value:M.retroalimentacionConsolidada,onChange:E,rows:8,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",placeholder:"Haga clic en 'Consolidar' para generar la retroalimentación aquí..."}),c.jsx("button",{type:"button",onClick:O,disabled:b,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 disabled:bg-slate-400",children:b?"...":"Consolidar"})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 pt-4 border-t dark:border-slate-700",children:[c.jsx("button",{type:"button",onClick:R,disabled:!m||_,className:"bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 disabled:bg-slate-400",children:_?"...":"Exportar PDF"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Guardar Acompañamiento"})]})]})});return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Acompañamiento Docente"}),c.jsx("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:d==="list"?J():re()})]})},PT="mensajes_internos",O2e="usuarios",m7="mensajes_read_status",p7=t=>{var r,n;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fecha}},Q2e=(t,e)=>{const r=Yt(kt(vt,PT),Xr("participants","array-contains",t),Pr("fecha","desc"));return mr(r,s=>{const a=s.docs.map(i=>p7(i));e(a)},s=>{console.error("Error al suscribirse a los mensajes:",s),e([])})},H2e=async t=>{try{const e={...t,participants:[t.de,t.para],fecha:or.fromDate(new Date)};await ps(kt(vt,PT),e)}catch(e){throw console.error("Error al enviar el mensaje:",e),new Error("No se pudo enviar el mensaje.")}},V2e=async t=>{try{const e=ur(vt,PT,t);await Ta(e)}catch(e){throw console.error("Error al eliminar el mensaje:",e),new Error("No se pudo eliminar el mensaje.")}},z2e=(t,e)=>{const r=ur(vt,m7,t);return mr(r,s=>{s.exists()?e(s.data()):e({announcements:[],messages:[]})},s=>{console.error("Error al suscribirse al estado de lectura:",s),e({announcements:[],messages:[]})})},G2e=async(t,e)=>{try{const r=ur(vt,m7,t);await pi(r,{messages:NY(e)},{merge:!0})}catch(r){throw console.error("Error al marcar mensaje como leído:",r),new Error("No se pudo actualizar el estado de lectura.")}},q2e=t=>{const e=Yt(kt(vt,O2e),Pr("nombreCompleto","asc"));return mr(e,n=>{const s=n.docs.map(a=>p7(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},K2e=({currentUser:t,refreshUnreadCount:e})=>{const[r,n]=Z.useState("inbox"),[s,a]=Z.useState([]),[i,o]=Z.useState([]),[l,u]=Z.useState(null),[d,h]=Z.useState({announcements:[],messages:[]}),[m,g]=Z.useState(!0),b={para:"",asunto:"",cuerpo:""},[y,_]=Z.useState(b);Z.useEffect(()=>{if(!t.id||!t.email){g(!1);return}g(!0);const C=Q2e(t.email,O=>{a(O),g(!1)}),E=q2e(o),B=z2e(t.id,O=>{h(O),e()});return()=>{C(),E(),B()}},[t.id,t.email,e]);const T=C=>{u(C),r==="inbox"&&!d.messages.includes(C.id)&&G2e(t.id,C.id).catch(E=>{console.error("Failed to mark message as read:",E)})},k=async C=>{if(C.preventDefault(),!y.para||!y.asunto.trim()||!y.cuerpo.trim()){alert("Destinatario, asunto y cuerpo son obligatorios.");return}const E={de:t.email,para:y.para,asunto:y.asunto,cuerpo:y.cuerpo};try{await H2e(E),_(b),n("sent")}catch(B){console.error("Error sending message:",B),alert("No se pudo enviar el mensaje. Inténtelo de nuevo.")}},D=async C=>{if(window.confirm("¿Está seguro de que desea eliminar este mensaje? Esta acción es irreversible."))try{await V2e(C),u(null)}catch(E){console.error("Error deleting message:",E),alert("No se pudo eliminar el mensaje.")}},M=C=>{_({para:C.de,asunto:`Re: ${C.asunto}`,cuerpo:`

--- Mensaje Original ---
De: ${C.de}
Fecha: ${new Date(C.fecha).toLocaleString("es-CL")}

${C.cuerpo}`}),n("compose")},P=Z.useMemo(()=>s.filter(C=>C.para===t.email),[s,t.email]),L=Z.useMemo(()=>s.filter(C=>C.de===t.email),[s,t.email]);return m?c.jsx("div",{className:"flex items-center justify-center h-full",children:"Cargando mensajería..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-900 rounded-xl shadow-md flex overflow-hidden min-h-[75vh]",children:[c.jsxs("aside",{className:"w-1/4 md:w-1/5 border-r bg-slate-50 dark:bg-slate-800 flex flex-col",children:[c.jsx("div",{className:"p-4 border-b dark:border-slate-700",children:c.jsx("button",{onClick:()=>{n("compose"),u(null),_(b)},className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Redactar"})}),c.jsxs("nav",{className:"p-2 space-y-1",children:[c.jsx("button",{onClick:()=>{n("inbox"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="inbox"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Recibidos"}),c.jsx("button",{onClick:()=>{n("sent"),u(null)},className:`w-full text-left px-4 py-2 rounded-md font-semibold ${r==="sent"?"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:"Enviados"})]})]}),r!=="compose"&&c.jsx("div",{className:"w-1/3 md:w-2/5 border-r dark:border-slate-700 overflow-y-auto",children:(r==="inbox"?P:L).map(C=>{const E=r==="inbox"&&!d.messages.includes(C.id);return c.jsxs("div",{onClick:()=>T(C),className:`p-4 border-b dark:border-slate-700 cursor-pointer ${(l==null?void 0:l.id)===C.id?"bg-amber-50 dark:bg-amber-900/20":"hover:bg-slate-50 dark:hover:bg-slate-800"}`,children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsx("p",{className:`font-bold truncate ${E?"text-slate-800 dark:text-slate-200":"text-slate-600 dark:text-slate-400"}`,children:r==="inbox"?C.de:`Para: ${C.para}`}),E&&c.jsx("span",{className:"h-2.5 w-2.5 bg-blue-500 rounded-full flex-shrink-0 ml-2 mt-1"})]}),c.jsx("p",{className:`truncate text-sm ${E?"text-slate-700 dark:text-slate-300 font-semibold":"text-slate-500 dark:text-slate-400"}`,children:C.asunto}),c.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:new Date(C.fecha).toLocaleString("es-CL")})]},C.id)})}),c.jsx("main",{className:"flex-1 p-6 overflow-y-auto",children:r==="compose"?c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Nuevo Mensaje"}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"para",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Para:"}),c.jsxs("select",{id:"para",value:y.para,onChange:C=>_({...y,para:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{value:"",children:"Seleccione un destinatario..."}),i.filter(C=>C.email!==t.email).map(C=>c.jsxs("option",{value:C.email,children:[C.nombreCompleto," (",C.email,")"]},C.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"asunto",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Asunto:"}),c.jsx("input",{type:"text",id:"asunto",value:y.asunto,onChange:C=>_({...y,asunto:C.target.value}),required:!0,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"cuerpo",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Cuerpo del Mensaje:"}),c.jsx("textarea",{id:"cuerpo",value:y.cuerpo,onChange:C=>_({...y,cuerpo:C.target.value}),required:!0,rows:12,className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Enviar Mensaje"})})]})]}):l?c.jsxs("div",{children:[c.jsxs("div",{className:"border-b dark:border-slate-700 pb-4 mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:l.asunto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"De:"})," ",l.de," ",c.jsx("br",{}),c.jsx("strong",{children:"Para:"})," ",l.para," ",c.jsx("br",{}),c.jsx("strong",{children:"Fecha:"})," ",new Date(l.fecha).toLocaleString("es-CL")]})]}),c.jsx("div",{className:"whitespace-pre-wrap text-slate-700 dark:text-slate-300",children:l.cuerpo}),c.jsxs("div",{className:"mt-8 pt-4 border-t dark:border-slate-700 flex gap-2",children:[r==="inbox"&&c.jsx("button",{onClick:()=>M(l),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200 dark:hover:bg-slate-500",children:"Responder"}),c.jsx("button",{onClick:()=>D(l.id),className:"bg-red-100 text-red-700 font-semibold py-2 px-4 rounded-lg hover:bg-red-200 dark:bg-red-900/40 dark:text-red-300 dark:hover:bg-red-900/60",children:"Eliminar"})]})]}):c.jsx("div",{className:"flex items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:c.jsx("p",{children:"Seleccione un mensaje para leerlo."})})})]})};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var OS=function(t,e){return OS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},OS(t,e)};function Pc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");OS(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var QS=function(){return QS=Object.assign||function(e){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},QS.apply(this,arguments)};function ro(t,e,r,n){function s(a){return a instanceof r?a:new r(function(i){i(a)})}return new(r||(r=Promise))(function(a,i){function o(d){try{u(n.next(d))}catch(h){i(h)}}function l(d){try{u(n.throw(d))}catch(h){i(h)}}function u(d){d.done?a(d.value):s(d.value).then(o,l)}u((n=n.apply(t,[])).next())})}function Li(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,s,a,i;return i={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function o(u){return function(d){return l([u,d])}}function l(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(a=u[0]&2?s.return:u[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,u[1])).done)return a;switch(s=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){r.label=u[1];break}if(u[0]===6&&r.label<a[1]){r.label=a[1],a=u;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(u);break}a[2]&&r.ops.pop(),r.trys.pop();continue}u=e.call(t,r)}catch(d){u=[6,d],s=0}finally{n=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function ty(t,e,r){if(arguments.length===2)for(var n=0,s=e.length,a;n<s;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||e)}var OA=function(){function t(e,r,n,s){this.left=e,this.top=r,this.width=n,this.height=s}return t.prototype.add=function(e,r,n,s){return new t(this.left+e,this.top+r,this.width+n,this.height+s)},t.fromClientRect=function(e,r){return new t(r.left+e.windowBounds.left,r.top+e.windowBounds.top,r.width,r.height)},t.fromDOMRectList=function(e,r){var n=Array.from(r).find(function(s){return s.width!==0});return n?new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),mb=function(t,e){return OA.fromClientRect(t,e.getBoundingClientRect())},$2e=function(t){var e=t.body,r=t.documentElement;if(!e||!r)throw new Error("Unable to get document size");var n=Math.max(Math.max(e.scrollWidth,r.scrollWidth),Math.max(e.offsetWidth,r.offsetWidth),Math.max(e.clientWidth,r.clientWidth)),s=Math.max(Math.max(e.scrollHeight,r.scrollHeight),Math.max(e.offsetHeight,r.offsetHeight),Math.max(e.clientHeight,r.clientHeight));return new OA(0,0,n,s)},pb=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},sa=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,a="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},OD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W2e=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ry=0;ry<OD.length;ry++)W2e[OD.charCodeAt(ry)]=ry;var QD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ng=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ny=0;ny<QD.length;ny++)Ng[QD.charCodeAt(ny)]=ny;var Y2e=function(t){var e=t.length*.75,r=t.length,n,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)a=Ng[t.charCodeAt(n)],i=Ng[t.charCodeAt(n+1)],o=Ng[t.charCodeAt(n+2)],l=Ng[t.charCodeAt(n+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return u},J2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},X2e=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},_h=5,jT=11,qE=2,Z2e=jT-_h,g7=65536>>_h,ewe=1<<_h,KE=ewe-1,twe=1024>>_h,rwe=g7+twe,nwe=rwe,swe=32,awe=nwe+swe,iwe=65536>>jT,owe=1<<Z2e,lwe=owe-1,HD=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},cwe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},uwe=function(t,e){var r=Y2e(t),n=Array.isArray(r)?X2e(r):new Uint32Array(r),s=Array.isArray(r)?J2e(r):new Uint16Array(r),a=24,i=HD(s,a/2,n[4]/2),o=n[5]===2?HD(s,(a+n[4])/2):cwe(n,Math.ceil((a+n[4])/4));return new Awe(n[0],n[1],n[2],n[3],i,o)},Awe=function(){function t(e,r,n,s,a,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>_h],r=(r<<qE)+(e&KE),this.data[r];if(e<=65535)return r=this.index[g7+(e-55296>>_h)],r=(r<<qE)+(e&KE),this.data[r];if(e<this.highStart)return r=awe-iwe+(e>>jT),r=this.index[r],r+=e>>_h&lwe,r=this.index[r],r=(r<<qE)+(e&KE),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),VD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dwe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var sy=0;sy<VD.length;sy++)dwe[VD.charCodeAt(sy)]=sy;var fwe="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",zD=50,hwe=1,x7=2,v7=3,mwe=4,pwe=5,GD=7,y7=8,qD=9,Xd=10,HS=11,KD=12,VS=13,gwe=14,Bg=15,zS=16,ay=17,lg=18,xwe=19,$D=20,GS=21,cg=22,$E=23,O0=24,Zo=25,kg=26,Ig=27,Q0=28,vwe=29,Ah=30,ywe=31,iy=32,oy=33,qS=34,KS=35,$S=36,jx=37,WS=38,Xy=39,Zy=40,WE=41,w7=42,wwe=43,bwe=[9001,65288],b7="!",un="×",ly="÷",YS=uwe(fwe),yA=[Ah,$S],JS=[hwe,x7,v7,pwe],C7=[Xd,y7],WD=[Ig,kg],Cwe=JS.concat(C7),YD=[WS,Xy,Zy,qS,KS],Ewe=[Bg,VS],_we=function(t,e){e===void 0&&(e="strict");var r=[],n=[],s=[];return t.forEach(function(a,i){var o=YS.get(a);if(o>zD?(s.push(!0),o-=zD):s.push(!1),["normal","auto","loose"].indexOf(e)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return n.push(i),r.push(zS);if(o===mwe||o===HS){if(i===0)return n.push(i),r.push(Ah);var l=r[i-1];return Cwe.indexOf(l)===-1?(n.push(n[i-1]),r.push(l)):(n.push(i),r.push(Ah))}if(n.push(i),o===ywe)return r.push(e==="strict"?GS:jx);if(o===w7||o===vwe)return r.push(Ah);if(o===wwe)return a>=131072&&a<=196605||a>=196608&&a<=262141?r.push(jx):r.push(Ah);r.push(o)}),[n,r,s]},YE=function(t,e,r,n){var s=n[r];if(Array.isArray(t)?t.indexOf(s)!==-1:t===s)for(var a=r;a<=n.length;){a++;var i=n[a];if(i===e)return!0;if(i!==Xd)break}if(s===Xd)for(var a=r;a>0;){a--;var o=n[a];if(Array.isArray(t)?t.indexOf(o)!==-1:t===o)for(var l=r;l<=n.length;){l++;var i=n[l];if(i===e)return!0;if(i!==Xd)break}if(o!==Xd)break}return!1},JD=function(t,e){for(var r=t;r>=0;){var n=e[r];if(n===Xd)r--;else return n}return 0},Swe=function(t,e,r,n,s){if(r[n]===0)return un;var a=n-1;if(Array.isArray(s)&&s[a]===!0)return un;var i=a-1,o=a+1,l=e[a],u=i>=0?e[i]:0,d=e[o];if(l===x7&&d===v7)return un;if(JS.indexOf(l)!==-1)return b7;if(JS.indexOf(d)!==-1||C7.indexOf(d)!==-1)return un;if(JD(a,e)===y7)return ly;if(YS.get(t[a])===HS||(l===iy||l===oy)&&YS.get(t[o])===HS||l===GD||d===GD||l===qD||[Xd,VS,Bg].indexOf(l)===-1&&d===qD||[ay,lg,xwe,O0,Q0].indexOf(d)!==-1||JD(a,e)===cg||YE($E,cg,a,e)||YE([ay,lg],GS,a,e)||YE(KD,KD,a,e))return un;if(l===Xd)return ly;if(l===$E||d===$E)return un;if(d===zS||l===zS)return ly;if([VS,Bg,GS].indexOf(d)!==-1||l===gwe||u===$S&&Ewe.indexOf(l)!==-1||l===Q0&&d===$S||d===$D||yA.indexOf(d)!==-1&&l===Zo||yA.indexOf(l)!==-1&&d===Zo||l===Ig&&[jx,iy,oy].indexOf(d)!==-1||[jx,iy,oy].indexOf(l)!==-1&&d===kg||yA.indexOf(l)!==-1&&WD.indexOf(d)!==-1||WD.indexOf(l)!==-1&&yA.indexOf(d)!==-1||[Ig,kg].indexOf(l)!==-1&&(d===Zo||[cg,Bg].indexOf(d)!==-1&&e[o+1]===Zo)||[cg,Bg].indexOf(l)!==-1&&d===Zo||l===Zo&&[Zo,Q0,O0].indexOf(d)!==-1)return un;if([Zo,Q0,O0,ay,lg].indexOf(d)!==-1)for(var h=a;h>=0;){var m=e[h];if(m===Zo)return un;if([Q0,O0].indexOf(m)!==-1)h--;else break}if([Ig,kg].indexOf(d)!==-1)for(var h=[ay,lg].indexOf(l)!==-1?i:a;h>=0;){var m=e[h];if(m===Zo)return un;if([Q0,O0].indexOf(m)!==-1)h--;else break}if(WS===l&&[WS,Xy,qS,KS].indexOf(d)!==-1||[Xy,qS].indexOf(l)!==-1&&[Xy,Zy].indexOf(d)!==-1||[Zy,KS].indexOf(l)!==-1&&d===Zy||YD.indexOf(l)!==-1&&[$D,kg].indexOf(d)!==-1||YD.indexOf(d)!==-1&&l===Ig||yA.indexOf(l)!==-1&&yA.indexOf(d)!==-1||l===O0&&yA.indexOf(d)!==-1||yA.concat(Zo).indexOf(l)!==-1&&d===cg&&bwe.indexOf(t[o])===-1||yA.concat(Zo).indexOf(d)!==-1&&l===lg)return un;if(l===WE&&d===WE){for(var g=r[a],b=1;g>0&&(g--,e[g]===WE);)b++;if(b%2!==0)return un}return l===iy&&d===oy?un:ly},Twe=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var r=_we(t,e.lineBreak),n=r[0],s=r[1],a=r[2];(e.wordBreak==="break-all"||e.wordBreak==="break-word")&&(s=s.map(function(o){return[Zo,Ah,w7].indexOf(o)!==-1?jx:o}));var i=e.wordBreak==="keep-all"?a.map(function(o,l){return o&&t[l]>=19968&&t[l]<=40959}):void 0;return[n,s,i]},Nwe=function(){function t(e,r,n,s){this.codePoints=e,this.required=r===b7,this.start=n,this.end=s}return t.prototype.slice=function(){return sa.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),Bwe=function(t,e){var r=pb(t),n=Twe(r,e),s=n[0],a=n[1],i=n[2],o=r.length,l=0,u=0;return{next:function(){if(u>=o)return{done:!0,value:null};for(var d=un;u<o&&(d=Swe(r,a,s,++u,i))===un;);if(d!==un||u===o){var h=new Nwe(r,d,l,u);return l=u,{value:h,done:!1}}return{done:!0,value:null}}}},kwe=1,Iwe=2,S1=4,XD=8,J2=10,ZD=47,nx=92,Fwe=9,Dwe=32,cy=34,ug=61,Rwe=35,Lwe=36,Uwe=37,uy=39,Ay=40,Ag=41,Mwe=95,To=45,Pwe=33,jwe=60,Owe=62,Qwe=64,Hwe=91,Vwe=93,zwe=61,Gwe=123,dy=63,qwe=125,eR=124,Kwe=126,$we=128,tR=65533,JE=42,hh=43,Wwe=44,Ywe=58,Jwe=59,Ox=46,Xwe=0,Zwe=8,ebe=11,tbe=14,rbe=31,nbe=127,xu=-1,E7=48,_7=97,S7=101,sbe=102,abe=117,ibe=122,T7=65,N7=69,B7=70,obe=85,lbe=90,ji=function(t){return t>=E7&&t<=57},cbe=function(t){return t>=55296&&t<=57343},H0=function(t){return ji(t)||t>=T7&&t<=B7||t>=_7&&t<=sbe},ube=function(t){return t>=_7&&t<=ibe},Abe=function(t){return t>=T7&&t<=lbe},dbe=function(t){return ube(t)||Abe(t)},fbe=function(t){return t>=$we},fy=function(t){return t===J2||t===Fwe||t===Dwe},X2=function(t){return dbe(t)||fbe(t)||t===Mwe},rR=function(t){return X2(t)||ji(t)||t===To},hbe=function(t){return t>=Xwe&&t<=Zwe||t===ebe||t>=tbe&&t<=rbe||t===nbe},jd=function(t,e){return t!==nx?!1:e!==J2},hy=function(t,e,r){return t===To?X2(e)||jd(e,r):X2(t)?!0:!!(t===nx&&jd(t,e))},XE=function(t,e,r){return t===hh||t===To?ji(e)?!0:e===Ox&&ji(r):ji(t===Ox?e:t)},mbe=function(t){var e=0,r=1;(t[e]===hh||t[e]===To)&&(t[e]===To&&(r=-1),e++);for(var n=[];ji(t[e]);)n.push(t[e++]);var s=n.length?parseInt(sa.apply(void 0,n),10):0;t[e]===Ox&&e++;for(var a=[];ji(t[e]);)a.push(t[e++]);var i=a.length,o=i?parseInt(sa.apply(void 0,a),10):0;(t[e]===N7||t[e]===S7)&&e++;var l=1;(t[e]===hh||t[e]===To)&&(t[e]===To&&(l=-1),e++);for(var u=[];ji(t[e]);)u.push(t[e++]);var d=u.length?parseInt(sa.apply(void 0,u),10):0;return r*(s+o*Math.pow(10,-i))*Math.pow(10,l*d)},pbe={type:2},gbe={type:3},xbe={type:4},vbe={type:13},ybe={type:8},wbe={type:21},bbe={type:9},Cbe={type:10},Ebe={type:11},_be={type:12},Sbe={type:14},my={type:23},Tbe={type:1},Nbe={type:25},Bbe={type:24},kbe={type:26},Ibe={type:27},Fbe={type:28},Dbe={type:29},Rbe={type:31},XS={type:32},k7=function(){function t(){this._value=[]}return t.prototype.write=function(e){this._value=this._value.concat(pb(e))},t.prototype.read=function(){for(var e=[],r=this.consumeToken();r!==XS;)e.push(r),r=this.consumeToken();return e},t.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case cy:return this.consumeStringToken(cy);case Rwe:var r=this.peekCodePoint(0),n=this.peekCodePoint(1),s=this.peekCodePoint(2);if(rR(r)||jd(n,s)){var a=hy(r,n,s)?Iwe:kwe,i=this.consumeName();return{type:5,value:i,flags:a}}break;case Lwe:if(this.peekCodePoint(0)===ug)return this.consumeCodePoint(),vbe;break;case uy:return this.consumeStringToken(uy);case Ay:return pbe;case Ag:return gbe;case JE:if(this.peekCodePoint(0)===ug)return this.consumeCodePoint(),Sbe;break;case hh:if(XE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case Wwe:return xbe;case To:var o=e,l=this.peekCodePoint(0),u=this.peekCodePoint(1);if(XE(o,l,u))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(hy(o,l,u))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(l===To&&u===Owe)return this.consumeCodePoint(),this.consumeCodePoint(),Bbe;break;case Ox:if(XE(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case ZD:if(this.peekCodePoint(0)===JE)for(this.consumeCodePoint();;){var d=this.consumeCodePoint();if(d===JE&&(d=this.consumeCodePoint(),d===ZD))return this.consumeToken();if(d===xu)return this.consumeToken()}break;case Ywe:return kbe;case Jwe:return Ibe;case jwe:if(this.peekCodePoint(0)===Pwe&&this.peekCodePoint(1)===To&&this.peekCodePoint(2)===To)return this.consumeCodePoint(),this.consumeCodePoint(),Nbe;break;case Qwe:var h=this.peekCodePoint(0),m=this.peekCodePoint(1),g=this.peekCodePoint(2);if(hy(h,m,g)){var i=this.consumeName();return{type:7,value:i}}break;case Hwe:return Fbe;case nx:if(jd(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case Vwe:return Dbe;case zwe:if(this.peekCodePoint(0)===ug)return this.consumeCodePoint(),ybe;break;case Gwe:return Ebe;case qwe:return _be;case abe:case obe:var b=this.peekCodePoint(0),y=this.peekCodePoint(1);return b===hh&&(H0(y)||y===dy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case eR:if(this.peekCodePoint(0)===ug)return this.consumeCodePoint(),bbe;if(this.peekCodePoint(0)===eR)return this.consumeCodePoint(),wbe;break;case Kwe:if(this.peekCodePoint(0)===ug)return this.consumeCodePoint(),Cbe;break;case xu:return XS}return fy(e)?(this.consumeWhiteSpace(),Rbe):ji(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):X2(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:sa(e)}},t.prototype.consumeCodePoint=function(){var e=this._value.shift();return typeof e>"u"?-1:e},t.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},t.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},t.prototype.consumeUnicodeRangeToken=function(){for(var e=[],r=this.consumeCodePoint();H0(r)&&e.length<6;)e.push(r),r=this.consumeCodePoint();for(var n=!1;r===dy&&e.length<6;)e.push(r),r=this.consumeCodePoint(),n=!0;if(n){var s=parseInt(sa.apply(void 0,e.map(function(l){return l===dy?E7:l})),16),a=parseInt(sa.apply(void 0,e.map(function(l){return l===dy?B7:l})),16);return{type:30,start:s,end:a}}var i=parseInt(sa.apply(void 0,e),16);if(this.peekCodePoint(0)===To&&H0(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];H0(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var a=parseInt(sa.apply(void 0,o),16);return{type:30,start:i,end:a}}else return{type:30,start:i,end:i}},t.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return e.toLowerCase()==="url"&&this.peekCodePoint(0)===Ay?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Ay?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},t.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===xu)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===uy||r===cy){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===xu||this.peekCodePoint(0)===Ag)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),my)}for(;;){var s=this.consumeCodePoint();if(s===xu||s===Ag)return{type:22,value:sa.apply(void 0,e)};if(fy(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===xu||this.peekCodePoint(0)===Ag?(this.consumeCodePoint(),{type:22,value:sa.apply(void 0,e)}):(this.consumeBadUrlRemnants(),my);if(s===cy||s===uy||s===Ay||hbe(s))return this.consumeBadUrlRemnants(),my;if(s===nx)if(jd(s,this.peekCodePoint(0)))e.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),my;else e.push(s)}},t.prototype.consumeWhiteSpace=function(){for(;fy(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(e===Ag||e===xu)return;jd(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(e){for(var r=5e4,n="";e>0;){var s=Math.min(r,e);n+=sa.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),n},t.prototype.consumeStringToken=function(e){var r="",n=0;do{var s=this._value[n];if(s===xu||s===void 0||s===e)return r+=this.consumeStringSlice(n),{type:0,value:r};if(s===J2)return this._value.splice(0,n),Tbe;if(s===nx){var a=this._value[n+1];a!==xu&&a!==void 0&&(a===J2?(r+=this.consumeStringSlice(n),n=-1,this._value.shift()):jd(s,a)&&(r+=this.consumeStringSlice(n),r+=sa(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},t.prototype.consumeNumber=function(){var e=[],r=S1,n=this.peekCodePoint(0);for((n===hh||n===To)&&e.push(this.consumeCodePoint());ji(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(n===Ox&&ji(s))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=XD;ji(this.peekCodePoint(0));)e.push(this.consumeCodePoint());n=this.peekCodePoint(0),s=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((n===N7||n===S7)&&((s===hh||s===To)&&ji(a)||ji(s)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),r=XD;ji(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[mbe(e),r]},t.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),r=e[0],n=e[1],s=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);if(hy(s,a,i)){var o=this.consumeName();return{type:15,number:r,flags:n,unit:o}}return s===Uwe?(this.consumeCodePoint(),{type:16,number:r,flags:n}):{type:17,number:r,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(H0(e)){for(var r=sa(e);H0(this.peekCodePoint(0))&&r.length<6;)r+=sa(this.consumeCodePoint());fy(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(r,16);return n===0||cbe(n)||n>1114111?tR:n}return e===xu?tR:e},t.prototype.consumeName=function(){for(var e="";;){var r=this.consumeCodePoint();if(rR(r))e+=sa(r);else if(jd(r,this.peekCodePoint(0)))e+=sa(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),e}},t}(),I7=function(){function t(e){this._tokens=e}return t.create=function(e){var r=new k7;return r.write(e),new t(r.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var e=this.consumeToken();e.type===31;)e=this.consumeToken();if(e.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var r=this.consumeComponentValue();do e=this.consumeToken();while(e.type===31);if(e.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var e=[];;){var r=this.consumeComponentValue();if(r.type===32)return e;e.push(r),e.push()}},t.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},t.prototype.consumeSimpleBlock=function(e){for(var r={type:e,values:[]},n=this.consumeToken();;){if(n.type===32||Ube(n,e))return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(e){for(var r={name:e.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return r;this.reconsumeToken(n),r.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var e=this._tokens.shift();return typeof e>"u"?XS:e},t.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},t}(),T1=function(t){return t.type===15},mp=function(t){return t.type===17},ts=function(t){return t.type===20},Lbe=function(t){return t.type===0},ZS=function(t,e){return ts(t)&&t.value===e},F7=function(t){return t.type!==31},Km=function(t){return t.type!==31&&t.type!==4},Qu=function(t){var e=[],r=[];return t.forEach(function(n){if(n.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");e.push(r),r=[];return}n.type!==31&&r.push(n)}),r.length&&e.push(r),e},Ube=function(t,e){return e===11&&t.type===12||e===28&&t.type===29?!0:e===2&&t.type===3},Tf=function(t){return t.type===17||t.type===15},Ea=function(t){return t.type===16||Tf(t)},D7=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},hi={type:17,number:0,flags:S1},OT={type:16,number:50,flags:S1},Zd={type:16,number:100,flags:S1},Fg=function(t,e,r){var n=t[0],s=t[1];return[cs(n,e),cs(typeof s<"u"?s:n,r)]},cs=function(t,e){if(t.type===16)return t.number/100*e;if(T1(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},R7="deg",L7="grad",U7="rad",M7="turn",gb={name:"angle",parse:function(t,e){if(e.type===15)switch(e.unit){case R7:return Math.PI*e.number/180;case L7:return Math.PI/200*e.number;case U7:return e.number;case M7:return Math.PI*2*e.number}throw new Error("Unsupported angle type")}},P7=function(t){return t.type===15&&(t.unit===R7||t.unit===L7||t.unit===U7||t.unit===M7)},j7=function(t){var e=t.filter(ts).map(function(r){return r.value}).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[hi,hi];case"to top":case"bottom":return zl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[hi,Zd];case"to right":case"left":return zl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Zd,Zd];case"to bottom":case"top":return zl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Zd,hi];case"to left":case"right":return zl(270)}return 0},zl=function(t){return Math.PI*t/180},lf={name:"color",parse:function(t,e){if(e.type===18){var r=Mbe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return r(t,e.values)}if(e.type===5){if(e.value.length===3){var n=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3);return ef(parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(e.value.length===4){var n=e.value.substring(0,1),s=e.value.substring(1,2),a=e.value.substring(2,3),i=e.value.substring(3,4);return ef(parseInt(n+n,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(i+i,16)/255)}if(e.value.length===6){var n=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6);return ef(parseInt(n,16),parseInt(s,16),parseInt(a,16),1)}if(e.value.length===8){var n=e.value.substring(0,2),s=e.value.substring(2,4),a=e.value.substring(4,6),i=e.value.substring(6,8);return ef(parseInt(n,16),parseInt(s,16),parseInt(a,16),parseInt(i,16)/255)}}if(e.type===20){var o=DA[e.value.toUpperCase()];if(typeof o<"u")return o}return DA.TRANSPARENT}},cf=function(t){return(255&t)===0},$a=function(t){var e=255&t,r=255&t>>8,n=255&t>>16,s=255&t>>24;return e<255?"rgba("+s+","+n+","+r+","+e/255+")":"rgb("+s+","+n+","+r+")"},ef=function(t,e,r,n){return(t<<24|e<<16|r<<8|Math.round(n*255)<<0)>>>0},nR=function(t,e){if(t.type===17)return t.number;if(t.type===16){var r=e===3?1:255;return e===3?t.number/100*r:Math.round(t.number/100*r)}return 0},sR=function(t,e){var r=e.filter(Km);if(r.length===3){var n=r.map(nR),s=n[0],a=n[1],i=n[2];return ef(s,a,i,1)}if(r.length===4){var o=r.map(nR),s=o[0],a=o[1],i=o[2],l=o[3];return ef(s,a,i,l)}return 0};function ZE(t,e,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(e-t)*r*6+t:r<1/2?e:r<2/3?(e-t)*6*(2/3-r)+t:t}var aR=function(t,e){var r=e.filter(Km),n=r[0],s=r[1],a=r[2],i=r[3],o=(n.type===17?zl(n.number):gb.parse(t,n))/(Math.PI*2),l=Ea(s)?s.number/100:0,u=Ea(a)?a.number/100:0,d=typeof i<"u"&&Ea(i)?cs(i,1):1;if(l===0)return ef(u*255,u*255,u*255,1);var h=u<=.5?u*(l+1):u+l-u*l,m=u*2-h,g=ZE(m,h,o+1/3),b=ZE(m,h,o),y=ZE(m,h,o-1/3);return ef(g*255,b*255,y*255,d)},Mbe={hsl:aR,hsla:aR,rgb:sR,rgba:sR},sx=function(t,e){return lf.parse(t,I7.create(e).parseComponentValue())},DA={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Pbe={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(ts(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},jbe={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xb=function(t,e){var r=lf.parse(t,e[0]),n=e[1];return n&&Ea(n)?{color:r,stop:n}:{color:r,stop:null}},iR=function(t,e){var r=t[0],n=t[t.length-1];r.stop===null&&(r.stop=hi),n.stop===null&&(n.stop=Zd);for(var s=[],a=0,i=0;i<t.length;i++){var o=t[i].stop;if(o!==null){var l=cs(o,e);l>a?s.push(l):s.push(a),a=l}else s.push(null)}for(var u=null,i=0;i<s.length;i++){var d=s[i];if(d===null)u===null&&(u=i);else if(u!==null){for(var h=i-u,m=s[u-1],g=(d-m)/(h+1),b=1;b<=h;b++)s[u+b-1]=g*b;u=null}}return t.map(function(y,_){var T=y.color;return{color:T,stop:Math.max(Math.min(1,s[_]/e),0)}})},Obe=function(t,e,r){var n=e/2,s=r/2,a=cs(t[0],e)-n,i=s-cs(t[1],r);return(Math.atan2(i,a)+Math.PI*2)%(Math.PI*2)},Qbe=function(t,e,r){var n=typeof t=="number"?t:Obe(t,e,r),s=Math.abs(e*Math.sin(n))+Math.abs(r*Math.cos(n)),a=e/2,i=r/2,o=s/2,l=Math.sin(n-Math.PI/2)*o,u=Math.cos(n-Math.PI/2)*o;return[s,a-u,a+u,i-l,i+l]},Ec=function(t,e){return Math.sqrt(t*t+e*e)},oR=function(t,e,r,n,s){var a=[[0,0],[0,e],[t,0],[t,e]];return a.reduce(function(i,o){var l=o[0],u=o[1],d=Ec(r-l,n-u);return(s?d<i.optimumDistance:d>i.optimumDistance)?{optimumCorner:o,optimumDistance:d}:i},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},Hbe=function(t,e,r,n,s){var a=0,i=0;switch(t.size){case 0:t.shape===0?a=i=Math.min(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(a=Math.min(Math.abs(e),Math.abs(e-n)),i=Math.min(Math.abs(r),Math.abs(r-s)));break;case 2:if(t.shape===0)a=i=Math.min(Ec(e,r),Ec(e,r-s),Ec(e-n,r),Ec(e-n,r-s));else if(t.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-s))/Math.min(Math.abs(e),Math.abs(e-n)),l=oR(n,s,e,r,!0),u=l[0],d=l[1];a=Ec(u-e,(d-r)/o),i=o*a}break;case 1:t.shape===0?a=i=Math.max(Math.abs(e),Math.abs(e-n),Math.abs(r),Math.abs(r-s)):t.shape===1&&(a=Math.max(Math.abs(e),Math.abs(e-n)),i=Math.max(Math.abs(r),Math.abs(r-s)));break;case 3:if(t.shape===0)a=i=Math.max(Ec(e,r),Ec(e,r-s),Ec(e-n,r),Ec(e-n,r-s));else if(t.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-s))/Math.max(Math.abs(e),Math.abs(e-n)),h=oR(n,s,e,r,!1),u=h[0],d=h[1];a=Ec(u-e,(d-r)/o),i=o*a}break}return Array.isArray(t.size)&&(a=cs(t.size[0],n),i=t.size.length===2?cs(t.size[1],s):a),[a,i]},Vbe=function(t,e){var r=zl(180),n=[];return Qu(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&i.value==="to"){r=j7(s);return}else if(P7(i)){r=gb.parse(t,i);return}}var o=xb(t,s);n.push(o)}),{angle:r,stops:n,type:1}},py=function(t,e){var r=zl(180),n=[];return Qu(e).forEach(function(s,a){if(a===0){var i=s[0];if(i.type===20&&["top","left","right","bottom"].indexOf(i.value)!==-1){r=j7(s);return}else if(P7(i)){r=(gb.parse(t,i)+zl(270))%zl(360);return}}var o=xb(t,s);n.push(o)}),{angle:r,stops:n,type:1}},zbe=function(t,e){var r=zl(180),n=[],s=1,a=0,i=3,o=[];return Qu(e).forEach(function(l,u){var d=l[0];if(u===0){if(ts(d)&&d.value==="linear"){s=1;return}else if(ts(d)&&d.value==="radial"){s=2;return}}if(d.type===18){if(d.name==="from"){var h=lf.parse(t,d.values[0]);n.push({stop:hi,color:h})}else if(d.name==="to"){var h=lf.parse(t,d.values[0]);n.push({stop:Zd,color:h})}else if(d.name==="color-stop"){var m=d.values.filter(Km);if(m.length===2){var h=lf.parse(t,m[1]),g=m[0];mp(g)&&n.push({stop:{type:16,number:g.number*100,flags:g.flags},color:h})}}}}),s===1?{angle:(r+zl(180))%zl(360),stops:n,type:s}:{size:i,shape:a,stops:n,position:o,type:s}},O7="closest-side",Q7="farthest-side",H7="closest-corner",V7="farthest-corner",z7="circle",G7="ellipse",q7="cover",K7="contain",Gbe=function(t,e){var r=0,n=3,s=[],a=[];return Qu(e).forEach(function(i,o){var l=!0;if(o===0){var u=!1;l=i.reduce(function(h,m){if(u)if(ts(m))switch(m.value){case"center":return a.push(OT),h;case"top":case"left":return a.push(hi),h;case"right":case"bottom":return a.push(Zd),h}else(Ea(m)||Tf(m))&&a.push(m);else if(ts(m))switch(m.value){case z7:return r=0,!1;case G7:return r=1,!1;case"at":return u=!0,!1;case O7:return n=0,!1;case q7:case Q7:return n=1,!1;case K7:case H7:return n=2,!1;case V7:return n=3,!1}else if(Tf(m)||Ea(m))return Array.isArray(n)||(n=[]),n.push(m),!1;return h},l)}if(l){var d=xb(t,i);s.push(d)}}),{size:n,shape:r,stops:s,position:a,type:2}},gy=function(t,e){var r=0,n=3,s=[],a=[];return Qu(e).forEach(function(i,o){var l=!0;if(o===0?l=i.reduce(function(d,h){if(ts(h))switch(h.value){case"center":return a.push(OT),!1;case"top":case"left":return a.push(hi),!1;case"right":case"bottom":return a.push(Zd),!1}else if(Ea(h)||Tf(h))return a.push(h),!1;return d},l):o===1&&(l=i.reduce(function(d,h){if(ts(h))switch(h.value){case z7:return r=0,!1;case G7:return r=1,!1;case K7:case O7:return n=0,!1;case Q7:return n=1,!1;case H7:return n=2,!1;case q7:case V7:return n=3,!1}else if(Tf(h)||Ea(h))return Array.isArray(n)||(n=[]),n.push(h),!1;return d},l)),l){var u=xb(t,i);s.push(u)}}),{size:n,shape:r,stops:s,position:a,type:2}},qbe=function(t){return t.type===1},Kbe=function(t){return t.type===2},QT={name:"image",parse:function(t,e){if(e.type===22){var r={url:e.value,type:0};return t.cache.addImage(e.value),r}if(e.type===18){var n=$7[e.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return n(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function $be(t){return!(t.type===20&&t.value==="none")&&(t.type!==18||!!$7[t.name])}var $7={"linear-gradient":Vbe,"-moz-linear-gradient":py,"-ms-linear-gradient":py,"-o-linear-gradient":py,"-webkit-linear-gradient":py,"radial-gradient":Gbe,"-moz-radial-gradient":gy,"-ms-radial-gradient":gy,"-o-radial-gradient":gy,"-webkit-radial-gradient":gy,"-webkit-gradient":zbe},Wbe={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e.filter(function(n){return Km(n)&&$be(n)}).map(function(n){return QT.parse(t,n)})}},Ybe={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map(function(r){if(ts(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Jbe={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return Qu(e).map(function(r){return r.filter(Ea)}).map(D7)}},Xbe={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return Qu(e).map(function(r){return r.filter(ts).map(function(n){return n.value}).join(" ")}).map(Zbe)}},Zbe=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Bm;(function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"})(Bm||(Bm={}));var eCe={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return Qu(e).map(function(r){return r.filter(tCe)})}},tCe=function(t){return ts(t)||Ea(t)},vb=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},rCe=vb("top"),nCe=vb("right"),sCe=vb("bottom"),aCe=vb("left"),yb=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(e,r){return D7(r.filter(Ea))}}},iCe=yb("top-left"),oCe=yb("top-right"),lCe=yb("bottom-right"),cCe=yb("bottom-left"),wb=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},uCe=wb("top"),ACe=wb("right"),dCe=wb("bottom"),fCe=wb("left"),bb=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return T1(r)?r.number:0}}},hCe=bb("top"),mCe=bb("right"),pCe=bb("bottom"),gCe=bb("left"),xCe={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},vCe={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},yCe={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(ts).reduce(function(r,n){return r|wCe(n.value)},0)}},wCe=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},bCe={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},CCe={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return e.type===20&&e.value==="normal"?0:e.type===17||e.type===15?e.number:0}},Z2;(function(t){t.NORMAL="normal",t.STRICT="strict"})(Z2||(Z2={}));var ECe={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return Z2.STRICT;case"normal":default:return Z2.NORMAL}}},_Ce={name:"line-height",initialValue:"normal",prefix:!1,type:4},lR=function(t,e){return ts(t)&&t.value==="normal"?1.2*e:t.type===17?e*t.number:Ea(t)?cs(t,e):e},SCe={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return e.type===20&&e.value==="none"?null:QT.parse(t,e)}},TCe={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},e5={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Cb=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},NCe=Cb("top"),BCe=Cb("right"),kCe=Cb("bottom"),ICe=Cb("left"),FCe={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(ts).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},DCe={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},Eb=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},RCe=Eb("top"),LCe=Eb("right"),UCe=Eb("bottom"),MCe=Eb("left"),PCe={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},jCe={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},OCe={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&ZS(e[0],"none")?[]:Qu(e).map(function(r){for(var n={color:DA.TRANSPARENT,offsetX:hi,offsetY:hi,blur:hi},s=0,a=0;a<r.length;a++){var i=r[a];Tf(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:n.blur=i,s++):n.color=lf.parse(t,i)}return n})}},QCe={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},HCe={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(e.type===20&&e.value==="none")return null;if(e.type===18){var r=GCe[e.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return r(e.values)}return null}},VCe=function(t){var e=t.filter(function(r){return r.type===17}).map(function(r){return r.number});return e.length===6?e:null},zCe=function(t){var e=t.filter(function(l){return l.type===17}).map(function(l){return l.number}),r=e[0],n=e[1];e[2],e[3];var s=e[4],a=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var i=e[12],o=e[13];return e[14],e[15],e.length===16?[r,n,s,a,i,o]:null},GCe={matrix:VCe,matrix3d:zCe},cR={type:16,number:50,flags:S1},qCe=[cR,cR],KCe={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var r=e.filter(Ea);return r.length!==2?qCe:[r[0],r[1]]}},$Ce={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},ax;(function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"})(ax||(ax={}));var WCe={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return ax.BREAK_ALL;case"keep-all":return ax.KEEP_ALL;case"normal":default:return ax.NORMAL}}},YCe={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(e.type===20)return{auto:!0,order:0};if(mp(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},W7={name:"time",parse:function(t,e){if(e.type===15)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},JCe={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return mp(e)?e.number:1}},XCe={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ZCe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(ts).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},eEe={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var r=[],n=[];return e.forEach(function(s){switch(s.type){case 20:case 0:r.push(s.value);break;case 17:r.push(s.number.toString());break;case 4:n.push(r.join(" ")),r.length=0;break}}),r.length&&n.push(r.join(" ")),n.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},tEe={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},rEe={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(mp(e))return e.number;if(ts(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},nEe={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(ts).map(function(r){return r.value})}},sEe={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Ua=function(t,e){return(t&e)!==0},aEe={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(e.length===0)return[];var r=e[0];return r.type===20&&r.value==="none"?[]:e}},iEe={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;for(var n=[],s=e.filter(F7),a=0;a<s.length;a++){var i=s[a],o=s[a+1];if(i.type===20){var l=o&&mp(o)?o.number:1;n.push({counter:i.value,increment:l})}}return n}},oEe={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return[];for(var r=[],n=e.filter(F7),s=0;s<n.length;s++){var a=n[s],i=n[s+1];if(ts(a)&&a.value!=="none"){var o=i&&mp(i)?i.number:0;r.push({counter:a.value,reset:o})}}return r}},lEe={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(T1).map(function(r){return W7.parse(t,r)})}},cEe={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(e.length===0)return null;var r=e[0];if(r.type===20&&r.value==="none")return null;var n=[],s=e.filter(Lbe);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var i=s[a].value,o=s[a+1].value;n.push({open:i,close:o})}return n}},uR=function(t,e,r){if(!t)return"";var n=t[Math.min(e,t.length-1)];return n?r?n.open:n.close:""},uEe={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.length===1&&ZS(e[0],"none")?[]:Qu(e).map(function(r){for(var n={color:255,offsetX:hi,offsetY:hi,blur:hi,spread:hi,inset:!1},s=0,a=0;a<r.length;a++){var i=r[a];ZS(i,"inset")?n.inset=!0:Tf(i)?(s===0?n.offsetX=i:s===1?n.offsetY=i:s===2?n.blur=i:n.spread=i,s++):n.color=lf.parse(t,i)}return n})}},AEe={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var r=[0,1,2],n=[];return e.filter(ts).forEach(function(s){switch(s.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),r.forEach(function(s){n.indexOf(s)===-1&&n.push(s)}),n}},dEe={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},fEe={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return T1(e)?e.number:0}},hEe=function(){function t(e,r){var n,s;this.animationDuration=Xt(e,lEe,r.animationDuration),this.backgroundClip=Xt(e,Pbe,r.backgroundClip),this.backgroundColor=Xt(e,jbe,r.backgroundColor),this.backgroundImage=Xt(e,Wbe,r.backgroundImage),this.backgroundOrigin=Xt(e,Ybe,r.backgroundOrigin),this.backgroundPosition=Xt(e,Jbe,r.backgroundPosition),this.backgroundRepeat=Xt(e,Xbe,r.backgroundRepeat),this.backgroundSize=Xt(e,eCe,r.backgroundSize),this.borderTopColor=Xt(e,rCe,r.borderTopColor),this.borderRightColor=Xt(e,nCe,r.borderRightColor),this.borderBottomColor=Xt(e,sCe,r.borderBottomColor),this.borderLeftColor=Xt(e,aCe,r.borderLeftColor),this.borderTopLeftRadius=Xt(e,iCe,r.borderTopLeftRadius),this.borderTopRightRadius=Xt(e,oCe,r.borderTopRightRadius),this.borderBottomRightRadius=Xt(e,lCe,r.borderBottomRightRadius),this.borderBottomLeftRadius=Xt(e,cCe,r.borderBottomLeftRadius),this.borderTopStyle=Xt(e,uCe,r.borderTopStyle),this.borderRightStyle=Xt(e,ACe,r.borderRightStyle),this.borderBottomStyle=Xt(e,dCe,r.borderBottomStyle),this.borderLeftStyle=Xt(e,fCe,r.borderLeftStyle),this.borderTopWidth=Xt(e,hCe,r.borderTopWidth),this.borderRightWidth=Xt(e,mCe,r.borderRightWidth),this.borderBottomWidth=Xt(e,pCe,r.borderBottomWidth),this.borderLeftWidth=Xt(e,gCe,r.borderLeftWidth),this.boxShadow=Xt(e,uEe,r.boxShadow),this.color=Xt(e,xCe,r.color),this.direction=Xt(e,vCe,r.direction),this.display=Xt(e,yCe,r.display),this.float=Xt(e,bCe,r.cssFloat),this.fontFamily=Xt(e,eEe,r.fontFamily),this.fontSize=Xt(e,tEe,r.fontSize),this.fontStyle=Xt(e,sEe,r.fontStyle),this.fontVariant=Xt(e,nEe,r.fontVariant),this.fontWeight=Xt(e,rEe,r.fontWeight),this.letterSpacing=Xt(e,CCe,r.letterSpacing),this.lineBreak=Xt(e,ECe,r.lineBreak),this.lineHeight=Xt(e,_Ce,r.lineHeight),this.listStyleImage=Xt(e,SCe,r.listStyleImage),this.listStylePosition=Xt(e,TCe,r.listStylePosition),this.listStyleType=Xt(e,e5,r.listStyleType),this.marginTop=Xt(e,NCe,r.marginTop),this.marginRight=Xt(e,BCe,r.marginRight),this.marginBottom=Xt(e,kCe,r.marginBottom),this.marginLeft=Xt(e,ICe,r.marginLeft),this.opacity=Xt(e,JCe,r.opacity);var a=Xt(e,FCe,r.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=Xt(e,DCe,r.overflowWrap),this.paddingTop=Xt(e,RCe,r.paddingTop),this.paddingRight=Xt(e,LCe,r.paddingRight),this.paddingBottom=Xt(e,UCe,r.paddingBottom),this.paddingLeft=Xt(e,MCe,r.paddingLeft),this.paintOrder=Xt(e,AEe,r.paintOrder),this.position=Xt(e,jCe,r.position),this.textAlign=Xt(e,PCe,r.textAlign),this.textDecorationColor=Xt(e,XCe,(n=r.textDecorationColor)!==null&&n!==void 0?n:r.color),this.textDecorationLine=Xt(e,ZCe,(s=r.textDecorationLine)!==null&&s!==void 0?s:r.textDecoration),this.textShadow=Xt(e,OCe,r.textShadow),this.textTransform=Xt(e,QCe,r.textTransform),this.transform=Xt(e,HCe,r.transform),this.transformOrigin=Xt(e,KCe,r.transformOrigin),this.visibility=Xt(e,$Ce,r.visibility),this.webkitTextStrokeColor=Xt(e,dEe,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Xt(e,fEe,r.webkitTextStrokeWidth),this.wordBreak=Xt(e,WCe,r.wordBreak),this.zIndex=Xt(e,YCe,r.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},t.prototype.isTransparent=function(){return cf(this.backgroundColor)},t.prototype.isTransformed=function(){return this.transform!==null},t.prototype.isPositioned=function(){return this.position!==0},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==0},t.prototype.isInlineLevel=function(){return Ua(this.display,4)||Ua(this.display,33554432)||Ua(this.display,268435456)||Ua(this.display,536870912)||Ua(this.display,67108864)||Ua(this.display,134217728)},t}(),mEe=function(){function t(e,r){this.content=Xt(e,aEe,r.content),this.quotes=Xt(e,cEe,r.quotes)}return t}(),AR=function(){function t(e,r){this.counterIncrement=Xt(e,iEe,r.counterIncrement),this.counterReset=Xt(e,oEe,r.counterReset)}return t}(),Xt=function(t,e,r){var n=new k7,s=r!==null&&typeof r<"u"?r.toString():e.initialValue;n.write(s);var a=new I7(n.read());switch(e.type){case 2:var i=a.parseComponentValue();return e.parse(t,ts(i)?i.value:e.initialValue);case 0:return e.parse(t,a.parseComponentValue());case 1:return e.parse(t,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(e.format){case"angle":return gb.parse(t,a.parseComponentValue());case"color":return lf.parse(t,a.parseComponentValue());case"image":return QT.parse(t,a.parseComponentValue());case"length":var o=a.parseComponentValue();return Tf(o)?o:hi;case"length-percentage":var l=a.parseComponentValue();return Ea(l)?l:hi;case"time":return W7.parse(t,a.parseComponentValue())}break}},pEe="data-html2canvas-debug",gEe=function(t){var e=t.getAttribute(pEe);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},t5=function(t,e){var r=gEe(t);return r===1||e===r},Hu=function(){function t(e,r){if(this.context=e,this.textNodes=[],this.elements=[],this.flags=0,t5(r,3))debugger;this.styles=new hEe(e,window.getComputedStyle(r,null)),s5(r)&&(this.styles.animationDuration.some(function(n){return n>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=mb(this.context,r),t5(r,4)&&(this.flags|=16)}return t}(),xEe="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",dR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var xy=0;xy<dR.length;xy++)Dg[dR.charCodeAt(xy)]=xy;var vEe=function(t){var e=t.length*.75,r=t.length,n,s=0,a,i,o,l;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(e):new Array(e),d=Array.isArray(u)?u:new Uint8Array(u);for(n=0;n<r;n+=4)a=Dg[t.charCodeAt(n)],i=Dg[t.charCodeAt(n+1)],o=Dg[t.charCodeAt(n+2)],l=Dg[t.charCodeAt(n+3)],d[s++]=a<<2|i>>4,d[s++]=(i&15)<<4|o>>2,d[s++]=(o&3)<<6|l&63;return u},yEe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r.push(t[n+1]<<8|t[n]);return r},wEe=function(t){for(var e=t.length,r=[],n=0;n<e;n+=4)r.push(t[n+3]<<24|t[n+2]<<16|t[n+1]<<8|t[n]);return r},Sh=5,HT=11,e_=2,bEe=HT-Sh,Y7=65536>>Sh,CEe=1<<Sh,t_=CEe-1,EEe=1024>>Sh,_Ee=Y7+EEe,SEe=_Ee,TEe=32,NEe=SEe+TEe,BEe=65536>>HT,kEe=1<<bEe,IEe=kEe-1,fR=function(t,e,r){return t.slice?t.slice(e,r):new Uint16Array(Array.prototype.slice.call(t,e,r))},FEe=function(t,e,r){return t.slice?t.slice(e,r):new Uint32Array(Array.prototype.slice.call(t,e,r))},DEe=function(t,e){var r=vEe(t),n=Array.isArray(r)?wEe(r):new Uint32Array(r),s=Array.isArray(r)?yEe(r):new Uint16Array(r),a=24,i=fR(s,a/2,n[4]/2),o=n[5]===2?fR(s,(a+n[4])/2):FEe(n,Math.ceil((a+n[4])/4));return new REe(n[0],n[1],n[2],n[3],i,o)},REe=function(){function t(e,r,n,s,a,i){this.initialValue=e,this.errorValue=r,this.highStart=n,this.highValueIndex=s,this.index=a,this.data=i}return t.prototype.get=function(e){var r;if(e>=0){if(e<55296||e>56319&&e<=65535)return r=this.index[e>>Sh],r=(r<<e_)+(e&t_),this.data[r];if(e<=65535)return r=this.index[Y7+(e-55296>>Sh)],r=(r<<e_)+(e&t_),this.data[r];if(e<this.highStart)return r=NEe-BEe+(e>>HT),r=this.index[r],r+=e>>Sh&IEe,r=this.index[r],r=(r<<e_)+(e&t_),this.data[r];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),hR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",LEe=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var vy=0;vy<hR.length;vy++)LEe[hR.charCodeAt(vy)]=vy;var UEe=1,r_=2,n_=3,mR=4,pR=5,MEe=7,gR=8,s_=9,a_=10,xR=11,vR=12,yR=13,wR=14,i_=15,PEe=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){var a=t.charCodeAt(r++);(a&64512)===56320?e.push(((s&1023)<<10)+(a&1023)+65536):(e.push(s),r--)}else e.push(s)}return e},jEe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var r=t.length;if(!r)return"";for(var n=[],s=-1,a="";++s<r;){var i=t[s];i<=65535?n.push(i):(i-=65536,n.push((i>>10)+55296,i%1024+56320)),(s+1===r||n.length>16384)&&(a+=String.fromCharCode.apply(String,n),n.length=0)}return a},OEe=DEe(xEe),Pl="×",o_="÷",QEe=function(t){return OEe.get(t)},HEe=function(t,e,r){var n=r-2,s=e[n],a=e[r-1],i=e[r];if(a===r_&&i===n_)return Pl;if(a===r_||a===n_||a===mR||i===r_||i===n_||i===mR)return o_;if(a===gR&&[gR,s_,xR,vR].indexOf(i)!==-1||(a===xR||a===s_)&&(i===s_||i===a_)||(a===vR||a===a_)&&i===a_||i===yR||i===pR||i===MEe||a===UEe)return Pl;if(a===yR&&i===wR){for(;s===pR;)s=e[--n];if(s===wR)return Pl}if(a===i_&&i===i_){for(var o=0;s===i_;)o++,s=e[--n];if(o%2===0)return Pl}return o_},VEe=function(t){var e=PEe(t),r=e.length,n=0,s=0,a=e.map(QEe);return{next:function(){if(n>=r)return{done:!0,value:null};for(var i=Pl;n<r&&(i=HEe(e,a,++n))===Pl;);if(i!==Pl||n===r){var o=jEe.apply(null,e.slice(s,n));return s=n,{value:o,done:!1}}return{done:!0,value:null}}}},zEe=function(t){for(var e=VEe(t),r=[],n;!(n=e.next()).done;)n.value&&r.push(n.value.slice());return r},GEe=function(t){var e=123;if(t.createRange){var r=t.createRange();if(r.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height=e+"px",n.style.display="block",t.body.appendChild(n),r.selectNode(n);var s=r.getBoundingClientRect(),a=Math.round(s.height);if(t.body.removeChild(n),a===e)return!0}}return!1},qEe=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var r=t.createRange();e.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=e.firstChild,s=pb(n.data).map(function(l){return sa(l)}),a=0,i={},o=s.every(function(l,u){r.setStart(n,a),r.setEnd(n,a+l.length);var d=r.getBoundingClientRect();a+=l.length;var h=d.x>i.x||d.y>i.y;return i=d,u===0?!0:h});return t.body.removeChild(e),o},KEe=function(){return typeof new Image().crossOrigin<"u"},$Ee=function(){return typeof new XMLHttpRequest().responseType=="string"},WEe=function(t){var e=new Image,r=t.createElement("canvas"),n=r.getContext("2d");if(!n)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(e,0,0),r.toDataURL()}catch{return!1}return!0},bR=function(t){return t[0]===0&&t[1]===255&&t[2]===0&&t[3]===255},YEe=function(t){var e=t.createElement("canvas"),r=100;e.width=r,e.height=r;var n=e.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,r,r);var s=new Image,a=e.toDataURL();s.src=a;var i=r5(r,r,0,0,s);return n.fillStyle="red",n.fillRect(0,0,r,r),CR(i).then(function(o){n.drawImage(o,0,0);var l=n.getImageData(0,0,r,r).data;n.fillStyle="red",n.fillRect(0,0,r,r);var u=t.createElement("div");return u.style.backgroundImage="url("+a+")",u.style.height=r+"px",bR(l)?CR(r5(r,r,0,0,u)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),bR(n.getImageData(0,0,r,r).data)}).catch(function(){return!1})},r5=function(t,e,r,n,s){var a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg"),o=document.createElementNS(a,"foreignObject");return i.setAttributeNS(null,"width",t.toString()),i.setAttributeNS(null,"height",e.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),i.appendChild(o),o.appendChild(s),i},CR=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){return e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},ci={get SUPPORT_RANGE_BOUNDS(){var t=GEe(document);return Object.defineProperty(ci,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=ci.SUPPORT_RANGE_BOUNDS&&qEe(document);return Object.defineProperty(ci,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=WEe(document);return Object.defineProperty(ci,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t=typeof Array.from=="function"&&typeof window.fetch=="function"?YEe(document):Promise.resolve(!1);return Object.defineProperty(ci,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=KEe();return Object.defineProperty(ci,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=$Ee();return Object.defineProperty(ci,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(ci,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(ci,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},ix=function(){function t(e,r){this.text=e,this.bounds=r}return t}(),JEe=function(t,e,r,n){var s=e_e(e,r),a=[],i=0;return s.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(ci.SUPPORT_RANGE_BOUNDS){var l=ER(n,i,o.length).getClientRects();if(l.length>1){var u=VT(o),d=0;u.forEach(function(m){a.push(new ix(m,OA.fromDOMRectList(t,ER(n,d+i,m.length).getClientRects()))),d+=m.length})}else a.push(new ix(o,OA.fromDOMRectList(t,l)))}else{var h=n.splitText(o.length);a.push(new ix(o,XEe(t,n))),n=h}else ci.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));i+=o.length}),a},XEe=function(t,e){var r=e.ownerDocument;if(r){var n=r.createElement("html2canvaswrapper");n.appendChild(e.cloneNode(!0));var s=e.parentNode;if(s){s.replaceChild(n,e);var a=mb(t,n);return n.firstChild&&s.replaceChild(n.firstChild,n),a}}return OA.EMPTY},ER=function(t,e,r){var n=t.ownerDocument;if(!n)throw new Error("Node has no owner document");var s=n.createRange();return s.setStart(t,e),s.setEnd(t,e+r),s},VT=function(t){if(ci.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map(function(r){return r.segment})}return zEe(t)},ZEe=function(t,e){if(ci.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(t)).map(function(n){return n.segment})}return r_e(t,e)},e_e=function(t,e){return e.letterSpacing!==0?VT(t):ZEe(t,e)},t_e=[32,160,4961,65792,65793,4153,4241],r_e=function(t,e){for(var r=Bwe(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap==="break-word"?"break-word":e.wordBreak}),n=[],s,a=function(){if(s.value){var i=s.value.slice(),o=pb(i),l="";o.forEach(function(u){t_e.indexOf(u)===-1?l+=sa(u):(l.length&&n.push(l),n.push(sa(u)),l="")}),l.length&&n.push(l)}};!(s=r.next()).done;)a();return n},n_e=function(){function t(e,r,n){this.text=s_e(r.data,n.textTransform),this.textBounds=JEe(e,this.text,n,r)}return t}(),s_e=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(a_e,i_e);case 2:return t.toUpperCase();default:return t}},a_e=/(^|\s|:|-|\(|\))([a-z])/g,i_e=function(t,e,r){return t.length>0?e+r.toUpperCase():t},J7=function(t){Pc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.src=n.currentSrc||n.src,s.intrinsicWidth=n.naturalWidth,s.intrinsicHeight=n.naturalHeight,s.context.cache.addImage(s.src),s}return e}(Hu),X7=function(t){Pc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n,s.intrinsicWidth=n.width,s.intrinsicHeight=n.height,s}return e}(Hu),Z7=function(t){Pc(e,t);function e(r,n){var s=t.call(this,r,n)||this,a=new XMLSerializer,i=mb(r,n);return n.setAttribute("width",i.width+"px"),n.setAttribute("height",i.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(n)),s.intrinsicWidth=n.width.baseVal.value,s.intrinsicHeight=n.height.baseVal.value,s.context.cache.addImage(s.svg),s}return e}(Hu),eQ=function(t){Pc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Hu),n5=function(t){Pc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.start=n.start,s.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,s}return e}(Hu),o_e=[{type:15,flags:0,unit:"px",number:3}],l_e=[{type:16,flags:0,number:50}],c_e=function(t){return t.width>t.height?new OA(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new OA(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},u_e=function(t){var e=t.type===A_e?new Array(t.value.length+1).join("•"):t.value;return e.length===0?t.placeholder||"":e},ew="checkbox",tw="radio",A_e="password",_R=707406591,zT=function(t){Pc(e,t);function e(r,n){var s=t.call(this,r,n)||this;switch(s.type=n.type.toLowerCase(),s.checked=n.checked,s.value=u_e(n),(s.type===ew||s.type===tw)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=c_e(s.bounds)),s.type){case ew:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=o_e;break;case tw:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=l_e;break}return s}return e}(Hu),tQ=function(t){Pc(e,t);function e(r,n){var s=t.call(this,r,n)||this,a=n.options[n.selectedIndex||0];return s.value=a&&a.text||"",s}return e}(Hu),rQ=function(t){Pc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.value=n.value,s}return e}(Hu),nQ=function(t){Pc(e,t);function e(r,n){var s=t.call(this,r,n)||this;s.src=n.src,s.width=parseInt(n.width,10)||0,s.height=parseInt(n.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){s.tree=aQ(r,n.contentWindow.document.documentElement);var a=n.contentWindow.document.documentElement?sx(r,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):DA.TRANSPARENT,i=n.contentWindow.document.body?sx(r,getComputedStyle(n.contentWindow.document.body).backgroundColor):DA.TRANSPARENT;s.backgroundColor=cf(a)?cf(i)?s.styles.backgroundColor:i:a}}catch{}return s}return e}(Hu),d_e=["OL","UL","MENU"],e2=function(t,e,r,n){for(var s=e.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,iQ(s)&&s.data.trim().length>0)r.textNodes.push(new n_e(t,s,r.styles));else if(Am(s))if(uQ(s)&&s.assignedNodes)s.assignedNodes().forEach(function(o){return e2(t,o,r,n)});else{var i=sQ(t,s);i.styles.isVisible()&&(f_e(s,i,n)?i.flags|=4:h_e(i.styles)&&(i.flags|=2),d_e.indexOf(s.tagName)!==-1&&(i.flags|=8),r.elements.push(i),s.slot,s.shadowRoot?e2(t,s.shadowRoot,i,n):!rw(s)&&!oQ(s)&&!nw(s)&&e2(t,s,i,n))}},sQ=function(t,e){return a5(e)?new J7(t,e):lQ(e)?new X7(t,e):oQ(e)?new Z7(t,e):m_e(e)?new eQ(t,e):p_e(e)?new n5(t,e):g_e(e)?new zT(t,e):nw(e)?new tQ(t,e):rw(e)?new rQ(t,e):cQ(e)?new nQ(t,e):new Hu(t,e)},aQ=function(t,e){var r=sQ(t,e);return r.flags|=4,e2(t,e,r,r),r},f_e=function(t,e,r){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||GT(t)&&r.styles.isTransparent()},h_e=function(t){return t.isPositioned()||t.isFloating()},iQ=function(t){return t.nodeType===Node.TEXT_NODE},Am=function(t){return t.nodeType===Node.ELEMENT_NODE},s5=function(t){return Am(t)&&typeof t.style<"u"&&!t2(t)},t2=function(t){return typeof t.className=="object"},m_e=function(t){return t.tagName==="LI"},p_e=function(t){return t.tagName==="OL"},g_e=function(t){return t.tagName==="INPUT"},x_e=function(t){return t.tagName==="HTML"},oQ=function(t){return t.tagName==="svg"},GT=function(t){return t.tagName==="BODY"},lQ=function(t){return t.tagName==="CANVAS"},SR=function(t){return t.tagName==="VIDEO"},a5=function(t){return t.tagName==="IMG"},cQ=function(t){return t.tagName==="IFRAME"},TR=function(t){return t.tagName==="STYLE"},v_e=function(t){return t.tagName==="SCRIPT"},rw=function(t){return t.tagName==="TEXTAREA"},nw=function(t){return t.tagName==="SELECT"},uQ=function(t){return t.tagName==="SLOT"},NR=function(t){return t.tagName.indexOf("-")>0},y_e=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(e){var r=this.counters[e];return r&&r.length?r[r.length-1]:1},t.prototype.getCounterValues=function(e){var r=this.counters[e];return r||[]},t.prototype.pop=function(e){var r=this;e.forEach(function(n){return r.counters[n].pop()})},t.prototype.parse=function(e){var r=this,n=e.counterIncrement,s=e.counterReset,a=!0;n!==null&&n.forEach(function(o){var l=r.counters[o.counter];l&&o.increment!==0&&(a=!1,l.length||l.push(1),l[Math.max(0,l.length-1)]+=o.increment)});var i=[];return a&&s.forEach(function(o){var l=r.counters[o.counter];i.push(o.counter),l||(l=r.counters[o.counter]=[]),l.push(o.reset)}),i},t}(),BR={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},kR={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},w_e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},b_e={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},V0=function(t,e,r,n,s,a){return t<e||t>r?Qx(t,s,a.length>0):n.integers.reduce(function(i,o,l){for(;t>=o;)t-=o,i+=n.values[l];return i},"")+a},AQ=function(t,e,r,n){var s="";do r||t--,s=n(t)+s,t/=e;while(t*e>=e);return s},ra=function(t,e,r,n,s){var a=r-e+1;return(t<0?"-":"")+(AQ(Math.abs(t),a,n,function(i){return sa(Math.floor(i%a)+e)})+s)},sh=function(t,e,r){r===void 0&&(r=". ");var n=e.length;return AQ(Math.abs(t),n,!1,function(s){return e[Math.floor(s%n)]})+r},am=1,Ud=2,Md=4,Rg=8,wA=function(t,e,r,n,s,a){if(t<-9999||t>9999)return Qx(t,4,s.length>0);var i=Math.abs(t),o=s;if(i===0)return e[0]+o;for(var l=0;i>0&&l<=4;l++){var u=i%10;u===0&&Ua(a,am)&&o!==""?o=e[u]+o:u>1||u===1&&l===0||u===1&&l===1&&Ua(a,Ud)||u===1&&l===1&&Ua(a,Md)&&t>100||u===1&&l>1&&Ua(a,Rg)?o=e[u]+(l>0?r[l-1]:"")+o:u===1&&l>0&&(o=r[l-1]+o),i=Math.floor(i/10)}return(t<0?n:"")+o},IR="十百千萬",FR="拾佰仟萬",DR="マイナス",l_="마이너스",Qx=function(t,e,r){var n=r?". ":"",s=r?"、":"",a=r?", ":"",i=r?" ":"";switch(e){case 0:return"•"+i;case 1:return"◦"+i;case 2:return"◾"+i;case 5:var o=ra(t,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return sh(t,"〇一二三四五六七八九",s);case 6:return V0(t,1,3999,BR,3,n).toLowerCase();case 7:return V0(t,1,3999,BR,3,n);case 8:return ra(t,945,969,!1,n);case 9:return ra(t,97,122,!1,n);case 10:return ra(t,65,90,!1,n);case 11:return ra(t,1632,1641,!0,n);case 12:case 49:return V0(t,1,9999,kR,3,n);case 35:return V0(t,1,9999,kR,3,n).toLowerCase();case 13:return ra(t,2534,2543,!0,n);case 14:case 30:return ra(t,6112,6121,!0,n);case 15:return sh(t,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return sh(t,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return wA(t,"零一二三四五六七八九",IR,"負",s,Ud|Md|Rg);case 47:return wA(t,"零壹貳參肆伍陸柒捌玖",FR,"負",s,am|Ud|Md|Rg);case 42:return wA(t,"零一二三四五六七八九",IR,"负",s,Ud|Md|Rg);case 41:return wA(t,"零壹贰叁肆伍陆柒捌玖",FR,"负",s,am|Ud|Md|Rg);case 26:return wA(t,"〇一二三四五六七八九","十百千万",DR,s,0);case 25:return wA(t,"零壱弐参四伍六七八九","拾百千万",DR,s,am|Ud|Md);case 31:return wA(t,"영일이삼사오육칠팔구","십백천만",l_,a,am|Ud|Md);case 33:return wA(t,"零一二三四五六七八九","十百千萬",l_,a,0);case 32:return wA(t,"零壹貳參四五六七八九","拾百千",l_,a,am|Ud|Md);case 18:return ra(t,2406,2415,!0,n);case 20:return V0(t,1,19999,b_e,3,n);case 21:return ra(t,2790,2799,!0,n);case 22:return ra(t,2662,2671,!0,n);case 22:return V0(t,1,10999,w_e,3,n);case 23:return sh(t,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return sh(t,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return ra(t,3302,3311,!0,n);case 28:return sh(t,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return sh(t,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return ra(t,3792,3801,!0,n);case 37:return ra(t,6160,6169,!0,n);case 38:return ra(t,4160,4169,!0,n);case 39:return ra(t,2918,2927,!0,n);case 40:return ra(t,1776,1785,!0,n);case 43:return ra(t,3046,3055,!0,n);case 44:return ra(t,3174,3183,!0,n);case 45:return ra(t,3664,3673,!0,n);case 46:return ra(t,3872,3881,!0,n);case 3:default:return ra(t,48,57,!0,n)}},dQ="data-html2canvas-ignore",RR=function(){function t(e,r,n){if(this.context=e,this.options=n,this.scrolledElements=[],this.referenceElement=r,this.counters=new y_e,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(e,r){var n=this,s=C_e(e,r);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var a=e.defaultView.pageXOffset,i=e.defaultView.pageYOffset,o=s.contentWindow,l=o.document,u=S_e(s).then(function(){return ro(n,void 0,void 0,function(){var d,h;return Li(this,function(m){switch(m.label){case 0:return this.scrolledElements.forEach(k_e),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),d=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:l.fonts&&l.fonts.ready?[4,l.fonts.ready]:[3,2];case 1:m.sent(),m.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,__e(l)]:[3,4];case 3:m.sent(),m.label=4;case 4:return typeof d=="function"?[2,Promise.resolve().then(function(){return d(l,h)}).then(function(){return s})]:[2,s]}})})});return l.open(),l.write(N_e(document.doctype)+"<html></html>"),B_e(this.referenceElement.ownerDocument,a,i),l.replaceChild(l.adoptNode(this.documentElement),l.documentElement),l.close(),u},t.prototype.createElementClone=function(e){if(t5(e,2))debugger;if(lQ(e))return this.createCanvasClone(e);if(SR(e))return this.createVideoClone(e);if(TR(e))return this.createStyleClone(e);var r=e.cloneNode(!1);return a5(r)&&(a5(e)&&e.currentSrc&&e.currentSrc!==e.src&&(r.src=e.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),NR(r)?this.createCustomElementClone(r):r},t.prototype.createCustomElementClone=function(e){var r=document.createElement("html2canvascustomelement");return c_(e.style,r),r},t.prototype.createStyleClone=function(e){try{var r=e.sheet;if(r&&r.cssRules){var n=[].slice.call(r.cssRules,0).reduce(function(a,i){return i&&typeof i.cssText=="string"?a+i.cssText:a},""),s=e.cloneNode(!1);return s.textContent=n,s}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return e.cloneNode(!1)},t.prototype.createCanvasClone=function(e){var r;if(this.options.inlineImages&&e.ownerDocument){var n=e.ownerDocument.createElement("img");try{return n.src=e.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var s=e.cloneNode(!1);try{s.width=e.width,s.height=e.height;var a=e.getContext("2d"),i=s.getContext("2d");if(i)if(!this.options.allowTaint&&a)i.putImageData(a.getImageData(0,0,e.width,e.height),0,0);else{var o=(r=e.getContext("webgl2"))!==null&&r!==void 0?r:e.getContext("webgl");if(o){var l=o.getContextAttributes();(l==null?void 0:l.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}i.drawImage(e,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",e)}return s},t.prototype.createVideoClone=function(e){var r=e.ownerDocument.createElement("canvas");r.width=e.offsetWidth,r.height=e.offsetHeight;var n=r.getContext("2d");try{return n&&(n.drawImage(e,0,0,r.width,r.height),this.options.allowTaint||n.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",e)}var s=e.ownerDocument.createElement("canvas");return s.width=e.offsetWidth,s.height=e.offsetHeight,s},t.prototype.appendChildNode=function(e,r,n){(!Am(r)||!v_e(r)&&!r.hasAttribute(dQ)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!Am(r)||!TR(r))&&e.appendChild(this.cloneNode(r,n))},t.prototype.cloneChildNodes=function(e,r,n){for(var s=this,a=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;a;a=a.nextSibling)if(Am(a)&&uQ(a)&&typeof a.assignedNodes=="function"){var i=a.assignedNodes();i.length&&i.forEach(function(o){return s.appendChildNode(r,o,n)})}else this.appendChildNode(r,a,n)},t.prototype.cloneNode=function(e,r){if(iQ(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var n=e.ownerDocument.defaultView;if(n&&Am(e)&&(s5(e)||t2(e))){var s=this.createElementClone(e);s.style.transitionProperty="none";var a=n.getComputedStyle(e),i=n.getComputedStyle(e,":before"),o=n.getComputedStyle(e,":after");this.referenceElement===e&&s5(s)&&(this.clonedReferenceElement=s),GT(s)&&D_e(s);var l=this.counters.parse(new AR(this.context,a)),u=this.resolvePseudoContent(e,s,i,ox.BEFORE);NR(e)&&(r=!0),SR(e)||this.cloneChildNodes(e,s,r),u&&s.insertBefore(u,s.firstChild);var d=this.resolvePseudoContent(e,s,o,ox.AFTER);return d&&s.appendChild(d),this.counters.pop(l),(a&&(this.options.copyStyles||t2(e))&&!cQ(e)||r)&&c_(a,s),(e.scrollTop!==0||e.scrollLeft!==0)&&this.scrolledElements.push([s,e.scrollLeft,e.scrollTop]),(rw(e)||nw(e))&&(rw(s)||nw(s))&&(s.value=e.value),s}return e.cloneNode(!1)},t.prototype.resolvePseudoContent=function(e,r,n,s){var a=this;if(n){var i=n.content,o=r.ownerDocument;if(!(!o||!i||i==="none"||i==="-moz-alt-content"||n.display==="none")){this.counters.parse(new AR(this.context,n));var l=new mEe(this.context,n),u=o.createElement("html2canvaspseudoelement");c_(n,u),l.content.forEach(function(h){if(h.type===0)u.appendChild(o.createTextNode(h.value));else if(h.type===22){var m=o.createElement("img");m.src=h.value,m.style.opacity="1",u.appendChild(m)}else if(h.type===18){if(h.name==="attr"){var g=h.values.filter(ts);g.length&&u.appendChild(o.createTextNode(e.getAttribute(g[0].value)||""))}else if(h.name==="counter"){var b=h.values.filter(Km),y=b[0],_=b[1];if(y&&ts(y)){var T=a.counters.getCounterValue(y.value),k=_&&ts(_)?e5.parse(a.context,_.value):3;u.appendChild(o.createTextNode(Qx(T,k,!1)))}}else if(h.name==="counters"){var D=h.values.filter(Km),y=D[0],M=D[1],_=D[2];if(y&&ts(y)){var P=a.counters.getCounterValues(y.value),L=_&&ts(_)?e5.parse(a.context,_.value):3,C=M&&M.type===0?M.value:"",E=P.map(function(R){return Qx(R,L,!1)}).join(C);u.appendChild(o.createTextNode(E))}}}else if(h.type===20)switch(h.value){case"open-quote":u.appendChild(o.createTextNode(uR(l.quotes,a.quoteDepth++,!0)));break;case"close-quote":u.appendChild(o.createTextNode(uR(l.quotes,--a.quoteDepth,!1)));break;default:u.appendChild(o.createTextNode(h.value))}}),u.className=i5+" "+o5;var d=s===ox.BEFORE?" "+i5:" "+o5;return t2(r)?r.className.baseValue+=d:r.className+=d,u}}},t.destroy=function(e){return e.parentNode?(e.parentNode.removeChild(e),!0):!1},t}(),ox;(function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"})(ox||(ox={}));var C_e=function(t,e){var r=t.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=e.width.toString(),r.height=e.height.toString(),r.scrolling="no",r.setAttribute(dQ,"true"),t.body.appendChild(r),r},E_e=function(t){return new Promise(function(e){if(t.complete){e();return}if(!t.src){e();return}t.onload=e,t.onerror=e})},__e=function(t){return Promise.all([].slice.call(t.images,0).map(E_e))},S_e=function(t){return new Promise(function(e,r){var n=t.contentWindow;if(!n)return r("No window assigned for iframe");var s=n.document;n.onload=t.onload=function(){n.onload=t.onload=null;var a=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(a),e(t))},50)}})},T_e=["all","d","content"],c_=function(t,e){for(var r=t.length-1;r>=0;r--){var n=t.item(r);T_e.indexOf(n)===-1&&e.style.setProperty(n,t.getPropertyValue(n))}return e},N_e=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},B_e=function(t,e,r){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||r!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,r)},k_e=function(t){var e=t[0],r=t[1],n=t[2];e.scrollLeft=r,e.scrollTop=n},I_e=":before",F_e=":after",i5="___html2canvas___pseudoelement_before",o5="___html2canvas___pseudoelement_after",LR=`{
    content: "" !important;
    display: none !important;
}`,D_e=function(t){R_e(t,"."+i5+I_e+LR+`
         .`+o5+F_e+LR)},R_e=function(t,e){var r=t.ownerDocument;if(r){var n=r.createElement("style");n.textContent=e,t.appendChild(n)}},fQ=function(){function t(){}return t.getOrigin=function(e){var r=t._link;return r?(r.href=e,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),L_e=function(){function t(e,r){this.context=e,this._options=r,this._cache={}}return t.prototype.addImage=function(e){var r=Promise.resolve();return this.has(e)||(A_(e)||j_e(e))&&(this._cache[e]=this.loadImage(e)).catch(function(){}),r},t.prototype.match=function(e){return this._cache[e]},t.prototype.loadImage=function(e){return ro(this,void 0,void 0,function(){var r,n,s,a,i=this;return Li(this,function(o){switch(o.label){case 0:return r=fQ.isSameOrigin(e),n=!u_(e)&&this._options.useCORS===!0&&ci.SUPPORT_CORS_IMAGES&&!r,s=!u_(e)&&!r&&!A_(e)&&typeof this._options.proxy=="string"&&ci.SUPPORT_CORS_XHR&&!n,!r&&this._options.allowTaint===!1&&!u_(e)&&!A_(e)&&!s&&!n?[2]:(a=e,s?[4,this.proxy(a)]:[3,2]);case 1:a=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise(function(l,u){var d=new Image;d.onload=function(){return l(d)},d.onerror=u,(O_e(a)||n)&&(d.crossOrigin="anonymous"),d.src=a,d.complete===!0&&setTimeout(function(){return l(d)},500),i._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+i._options.imageTimeout+"ms) loading image")},i._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},t.prototype.has=function(e){return typeof this._cache[e]<"u"},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(e){var r=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var s=e.substring(0,256);return new Promise(function(a,i){var o=ci.SUPPORT_RESPONSE_TYPE?"blob":"text",l=new XMLHttpRequest;l.onload=function(){if(l.status===200)if(o==="text")a(l.response);else{var h=new FileReader;h.addEventListener("load",function(){return a(h.result)},!1),h.addEventListener("error",function(m){return i(m)},!1),h.readAsDataURL(l.response)}else i("Failed to proxy resource "+s+" with status code "+l.status)},l.onerror=i;var u=n.indexOf("?")>-1?"&":"?";if(l.open("GET",""+n+u+"url="+encodeURIComponent(e)+"&responseType="+o),o!=="text"&&l instanceof XMLHttpRequest&&(l.responseType=o),r._options.imageTimeout){var d=r._options.imageTimeout;l.timeout=d,l.ontimeout=function(){return i("Timed out ("+d+"ms) proxying "+s)}}l.send()})},t}(),U_e=/^data:image\/svg\+xml/i,M_e=/^data:image\/.*;base64,/i,P_e=/^data:image\/.*/i,j_e=function(t){return ci.SUPPORT_SVG_DRAWING||!Q_e(t)},u_=function(t){return P_e.test(t)},O_e=function(t){return M_e.test(t)},A_=function(t){return t.substr(0,4)==="blob"},Q_e=function(t){return t.substr(-3).toLowerCase()==="svg"||U_e.test(t)},Wt=function(){function t(e,r){this.type=0,this.x=e,this.y=r}return t.prototype.add=function(e,r){return new t(this.x+e,this.y+r)},t}(),z0=function(t,e,r){return new Wt(t.x+(e.x-t.x)*r,t.y+(e.y-t.y)*r)},yy=function(){function t(e,r,n,s){this.type=1,this.start=e,this.startControl=r,this.endControl=n,this.end=s}return t.prototype.subdivide=function(e,r){var n=z0(this.start,this.startControl,e),s=z0(this.startControl,this.endControl,e),a=z0(this.endControl,this.end,e),i=z0(n,s,e),o=z0(s,a,e),l=z0(i,o,e);return r?new t(this.start,n,i,l):new t(l,o,a,this.end)},t.prototype.add=function(e,r){return new t(this.start.add(e,r),this.startControl.add(e,r),this.endControl.add(e,r),this.end.add(e,r))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),Ol=function(t){return t.type===1},H_e=function(){function t(e){var r=e.styles,n=e.bounds,s=Fg(r.borderTopLeftRadius,n.width,n.height),a=s[0],i=s[1],o=Fg(r.borderTopRightRadius,n.width,n.height),l=o[0],u=o[1],d=Fg(r.borderBottomRightRadius,n.width,n.height),h=d[0],m=d[1],g=Fg(r.borderBottomLeftRadius,n.width,n.height),b=g[0],y=g[1],_=[];_.push((a+l)/n.width),_.push((b+h)/n.width),_.push((i+y)/n.height),_.push((u+m)/n.height);var T=Math.max.apply(Math,_);T>1&&(a/=T,i/=T,l/=T,u/=T,h/=T,m/=T,b/=T,y/=T);var k=n.width-l,D=n.height-m,M=n.width-h,P=n.height-y,L=r.borderTopWidth,C=r.borderRightWidth,E=r.borderBottomWidth,B=r.borderLeftWidth,O=cs(r.paddingTop,e.bounds.width),R=cs(r.paddingRight,e.bounds.width),F=cs(r.paddingBottom,e.bounds.width),Q=cs(r.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||i>0?bs(n.left+B/3,n.top+L/3,a-B/3,i-L/3,Mn.TOP_LEFT):new Wt(n.left+B/3,n.top+L/3),this.topRightBorderDoubleOuterBox=a>0||i>0?bs(n.left+k,n.top+L/3,l-C/3,u-L/3,Mn.TOP_RIGHT):new Wt(n.left+n.width-C/3,n.top+L/3),this.bottomRightBorderDoubleOuterBox=h>0||m>0?bs(n.left+M,n.top+D,h-C/3,m-E/3,Mn.BOTTOM_RIGHT):new Wt(n.left+n.width-C/3,n.top+n.height-E/3),this.bottomLeftBorderDoubleOuterBox=b>0||y>0?bs(n.left+B/3,n.top+P,b-B/3,y-E/3,Mn.BOTTOM_LEFT):new Wt(n.left+B/3,n.top+n.height-E/3),this.topLeftBorderDoubleInnerBox=a>0||i>0?bs(n.left+B*2/3,n.top+L*2/3,a-B*2/3,i-L*2/3,Mn.TOP_LEFT):new Wt(n.left+B*2/3,n.top+L*2/3),this.topRightBorderDoubleInnerBox=a>0||i>0?bs(n.left+k,n.top+L*2/3,l-C*2/3,u-L*2/3,Mn.TOP_RIGHT):new Wt(n.left+n.width-C*2/3,n.top+L*2/3),this.bottomRightBorderDoubleInnerBox=h>0||m>0?bs(n.left+M,n.top+D,h-C*2/3,m-E*2/3,Mn.BOTTOM_RIGHT):new Wt(n.left+n.width-C*2/3,n.top+n.height-E*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||y>0?bs(n.left+B*2/3,n.top+P,b-B*2/3,y-E*2/3,Mn.BOTTOM_LEFT):new Wt(n.left+B*2/3,n.top+n.height-E*2/3),this.topLeftBorderStroke=a>0||i>0?bs(n.left+B/2,n.top+L/2,a-B/2,i-L/2,Mn.TOP_LEFT):new Wt(n.left+B/2,n.top+L/2),this.topRightBorderStroke=a>0||i>0?bs(n.left+k,n.top+L/2,l-C/2,u-L/2,Mn.TOP_RIGHT):new Wt(n.left+n.width-C/2,n.top+L/2),this.bottomRightBorderStroke=h>0||m>0?bs(n.left+M,n.top+D,h-C/2,m-E/2,Mn.BOTTOM_RIGHT):new Wt(n.left+n.width-C/2,n.top+n.height-E/2),this.bottomLeftBorderStroke=b>0||y>0?bs(n.left+B/2,n.top+P,b-B/2,y-E/2,Mn.BOTTOM_LEFT):new Wt(n.left+B/2,n.top+n.height-E/2),this.topLeftBorderBox=a>0||i>0?bs(n.left,n.top,a,i,Mn.TOP_LEFT):new Wt(n.left,n.top),this.topRightBorderBox=l>0||u>0?bs(n.left+k,n.top,l,u,Mn.TOP_RIGHT):new Wt(n.left+n.width,n.top),this.bottomRightBorderBox=h>0||m>0?bs(n.left+M,n.top+D,h,m,Mn.BOTTOM_RIGHT):new Wt(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=b>0||y>0?bs(n.left,n.top+P,b,y,Mn.BOTTOM_LEFT):new Wt(n.left,n.top+n.height),this.topLeftPaddingBox=a>0||i>0?bs(n.left+B,n.top+L,Math.max(0,a-B),Math.max(0,i-L),Mn.TOP_LEFT):new Wt(n.left+B,n.top+L),this.topRightPaddingBox=l>0||u>0?bs(n.left+Math.min(k,n.width-C),n.top+L,k>n.width+C?0:Math.max(0,l-C),Math.max(0,u-L),Mn.TOP_RIGHT):new Wt(n.left+n.width-C,n.top+L),this.bottomRightPaddingBox=h>0||m>0?bs(n.left+Math.min(M,n.width-B),n.top+Math.min(D,n.height-E),Math.max(0,h-C),Math.max(0,m-E),Mn.BOTTOM_RIGHT):new Wt(n.left+n.width-C,n.top+n.height-E),this.bottomLeftPaddingBox=b>0||y>0?bs(n.left+B,n.top+Math.min(P,n.height-E),Math.max(0,b-B),Math.max(0,y-E),Mn.BOTTOM_LEFT):new Wt(n.left+B,n.top+n.height-E),this.topLeftContentBox=a>0||i>0?bs(n.left+B+Q,n.top+L+O,Math.max(0,a-(B+Q)),Math.max(0,i-(L+O)),Mn.TOP_LEFT):new Wt(n.left+B+Q,n.top+L+O),this.topRightContentBox=l>0||u>0?bs(n.left+Math.min(k,n.width+B+Q),n.top+L+O,k>n.width+B+Q?0:l-B+Q,u-(L+O),Mn.TOP_RIGHT):new Wt(n.left+n.width-(C+R),n.top+L+O),this.bottomRightContentBox=h>0||m>0?bs(n.left+Math.min(M,n.width-(B+Q)),n.top+Math.min(D,n.height+L+O),Math.max(0,h-(C+R)),m-(E+F),Mn.BOTTOM_RIGHT):new Wt(n.left+n.width-(C+R),n.top+n.height-(E+F)),this.bottomLeftContentBox=b>0||y>0?bs(n.left+B+Q,n.top+P,Math.max(0,b-(B+Q)),y-(E+F),Mn.BOTTOM_LEFT):new Wt(n.left+B+Q,n.top+n.height-(E+F))}return t}(),Mn;(function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Mn||(Mn={}));var bs=function(t,e,r,n,s){var a=4*((Math.sqrt(2)-1)/3),i=r*a,o=n*a,l=t+r,u=e+n;switch(s){case Mn.TOP_LEFT:return new yy(new Wt(t,u),new Wt(t,u-o),new Wt(l-i,e),new Wt(l,e));case Mn.TOP_RIGHT:return new yy(new Wt(t,e),new Wt(t+i,e),new Wt(l,u-o),new Wt(l,u));case Mn.BOTTOM_RIGHT:return new yy(new Wt(l,e),new Wt(l,e+o),new Wt(t+i,u),new Wt(t,u));case Mn.BOTTOM_LEFT:default:return new yy(new Wt(l,u),new Wt(l-i,u),new Wt(t,e+o),new Wt(t,e))}},sw=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},V_e=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},aw=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},z_e=function(){function t(e,r,n){this.offsetX=e,this.offsetY=r,this.matrix=n,this.type=0,this.target=6}return t}(),wy=function(){function t(e,r){this.path=e,this.target=r,this.type=1}return t}(),G_e=function(){function t(e){this.opacity=e,this.type=2,this.target=6}return t}(),q_e=function(t){return t.type===0},hQ=function(t){return t.type===1},K_e=function(t){return t.type===2},UR=function(t,e){return t.length===e.length?t.some(function(r,n){return r===e[n]}):!1},$_e=function(t,e,r,n,s){return t.map(function(a,i){switch(i){case 0:return a.add(e,r);case 1:return a.add(e+n,r);case 2:return a.add(e+n,r+s);case 3:return a.add(e,r+s)}return a})},mQ=function(){function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),pQ=function(){function t(e,r){if(this.container=e,this.parent=r,this.effects=[],this.curves=new H_e(this.container),this.container.styles.opacity<1&&this.effects.push(new G_e(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new z_e(n,s,a))}if(this.container.styles.overflowX!==0){var i=sw(this.curves),o=aw(this.curves);UR(i,o)?this.effects.push(new wy(i,6)):(this.effects.push(new wy(i,2)),this.effects.push(new wy(o,4)))}}return t.prototype.getEffects=function(e){for(var r=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,s=this.effects.slice(0);n;){var a=n.effects.filter(function(l){return!hQ(l)});if(r||n.container.styles.position!==0||!n.parent){if(s.unshift.apply(s,a),r=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var i=sw(n.curves),o=aw(n.curves);UR(i,o)||s.unshift(new wy(o,6))}}else s.unshift.apply(s,a);n=n.parent}return s.filter(function(l){return Ua(l.target,e)})},t}(),l5=function(t,e,r,n){t.container.elements.forEach(function(s){var a=Ua(s.flags,4),i=Ua(s.flags,2),o=new pQ(s,t);Ua(s.styles.display,2048)&&n.push(o);var l=Ua(s.flags,8)?[]:n;if(a||i){var u=a||s.styles.isPositioned()?r:e,d=new mQ(o);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var h=s.styles.zIndex.order;if(h<0){var m=0;u.negativeZIndex.some(function(b,y){return h>b.element.container.styles.zIndex.order?(m=y,!1):m>0}),u.negativeZIndex.splice(m,0,d)}else if(h>0){var g=0;u.positiveZIndex.some(function(b,y){return h>=b.element.container.styles.zIndex.order?(g=y+1,!1):g>0}),u.positiveZIndex.splice(g,0,d)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(d)}else s.styles.isFloating()?u.nonPositionedFloats.push(d):u.nonPositionedInlineLevel.push(d);l5(o,d,a?d:r,l)}else s.styles.isInlineLevel()?e.inlineLevel.push(o):e.nonInlineLevel.push(o),l5(o,e,r,l);Ua(s.flags,8)&&gQ(s,l)})},gQ=function(t,e){for(var r=t instanceof n5?t.start:1,n=t instanceof n5?t.reversed:!1,s=0;s<e.length;s++){var a=e[s];a.container instanceof eQ&&typeof a.container.value=="number"&&a.container.value!==0&&(r=a.container.value),a.listValue=Qx(r,a.container.styles.listStyleType,!0),r+=n?-1:1}},W_e=function(t){var e=new pQ(t,null),r=new mQ(e),n=[];return l5(e,r,r,n),gQ(e.container,n),r},MR=function(t,e){switch(e){case 0:return Gl(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Gl(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Gl(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Gl(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},Y_e=function(t,e){switch(e){case 0:return Gl(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return Gl(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return Gl(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return Gl(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},J_e=function(t,e){switch(e){case 0:return Gl(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return Gl(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return Gl(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return Gl(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},X_e=function(t,e){switch(e){case 0:return by(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return by(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return by(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return by(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},by=function(t,e){var r=[];return Ol(t)?r.push(t.subdivide(.5,!1)):r.push(t),Ol(e)?r.push(e.subdivide(.5,!0)):r.push(e),r},Gl=function(t,e,r,n){var s=[];return Ol(t)?s.push(t.subdivide(.5,!1)):s.push(t),Ol(r)?s.push(r.subdivide(.5,!0)):s.push(r),Ol(n)?s.push(n.subdivide(.5,!0).reverse()):s.push(n),Ol(e)?s.push(e.subdivide(.5,!1).reverse()):s.push(e),s},xQ=function(t){var e=t.bounds,r=t.styles;return e.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},iw=function(t){var e=t.styles,r=t.bounds,n=cs(e.paddingLeft,r.width),s=cs(e.paddingRight,r.width),a=cs(e.paddingTop,r.width),i=cs(e.paddingBottom,r.width);return r.add(n+e.borderLeftWidth,a+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+n+s),-(e.borderTopWidth+e.borderBottomWidth+a+i))},Z_e=function(t,e){return t===0?e.bounds:t===2?iw(e):xQ(e)},eSe=function(t,e){return t===0?e.bounds:t===2?iw(e):xQ(e)},d_=function(t,e,r){var n=Z_e(im(t.styles.backgroundOrigin,e),t),s=eSe(im(t.styles.backgroundClip,e),t),a=tSe(im(t.styles.backgroundSize,e),r,n),i=a[0],o=a[1],l=Fg(im(t.styles.backgroundPosition,e),n.width-i,n.height-o),u=rSe(im(t.styles.backgroundRepeat,e),l,a,n,s),d=Math.round(n.left+l[0]),h=Math.round(n.top+l[1]);return[u,d,h,i,o]},G0=function(t){return ts(t)&&t.value===Bm.AUTO},Cy=function(t){return typeof t=="number"},tSe=function(t,e,r){var n=e[0],s=e[1],a=e[2],i=t[0],o=t[1];if(!i)return[0,0];if(Ea(i)&&o&&Ea(o))return[cs(i,r.width),cs(o,r.height)];var l=Cy(a);if(ts(i)&&(i.value===Bm.CONTAIN||i.value===Bm.COVER)){if(Cy(a)){var u=r.width/r.height;return u<a!=(i.value===Bm.COVER)?[r.width,r.width/a]:[r.height*a,r.height]}return[r.width,r.height]}var d=Cy(n),h=Cy(s),m=d||h;if(G0(i)&&(!o||G0(o))){if(d&&h)return[n,s];if(!l&&!m)return[r.width,r.height];if(m&&l){var g=d?n:s*a,b=h?s:n/a;return[g,b]}var y=d?n:r.width,_=h?s:r.height;return[y,_]}if(l){var T=0,k=0;return Ea(i)?T=cs(i,r.width):Ea(o)&&(k=cs(o,r.height)),G0(i)?T=k*a:(!o||G0(o))&&(k=T/a),[T,k]}var D=null,M=null;if(Ea(i)?D=cs(i,r.width):o&&Ea(o)&&(M=cs(o,r.height)),D!==null&&(!o||G0(o))&&(M=d&&h?D/n*s:r.height),M!==null&&G0(i)&&(D=d&&h?M/s*n:r.width),D!==null&&M!==null)return[D,M];throw new Error("Unable to calculate background-size for element")},im=function(t,e){var r=t[e];return typeof r>"u"?t[0]:r},rSe=function(t,e,r,n,s){var a=e[0],i=e[1],o=r[0],l=r[1];switch(t){case 2:return[new Wt(Math.round(n.left),Math.round(n.top+i)),new Wt(Math.round(n.left+n.width),Math.round(n.top+i)),new Wt(Math.round(n.left+n.width),Math.round(l+n.top+i)),new Wt(Math.round(n.left),Math.round(l+n.top+i))];case 3:return[new Wt(Math.round(n.left+a),Math.round(n.top)),new Wt(Math.round(n.left+a+o),Math.round(n.top)),new Wt(Math.round(n.left+a+o),Math.round(n.height+n.top)),new Wt(Math.round(n.left+a),Math.round(n.height+n.top))];case 1:return[new Wt(Math.round(n.left+a),Math.round(n.top+i)),new Wt(Math.round(n.left+a+o),Math.round(n.top+i)),new Wt(Math.round(n.left+a+o),Math.round(n.top+i+l)),new Wt(Math.round(n.left+a),Math.round(n.top+i+l))];default:return[new Wt(Math.round(s.left),Math.round(s.top)),new Wt(Math.round(s.left+s.width),Math.round(s.top)),new Wt(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Wt(Math.round(s.left),Math.round(s.height+s.top))]}},nSe="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",PR="Hidden Text",sSe=function(){function t(e){this._data={},this._document=e}return t.prototype.parseMetrics=function(e,r){var n=this._document.createElement("div"),s=this._document.createElement("img"),a=this._document.createElement("span"),i=this._document.body;n.style.visibility="hidden",n.style.fontFamily=e,n.style.fontSize=r,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",i.appendChild(n),s.src=nSe,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",a.style.fontFamily=e,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(PR)),n.appendChild(a),n.appendChild(s);var o=s.offsetTop-a.offsetTop+2;n.removeChild(a),n.appendChild(this._document.createTextNode(PR)),n.style.lineHeight="normal",s.style.verticalAlign="super";var l=s.offsetTop-n.offsetTop+2;return i.removeChild(n),{baseline:o,middle:l}},t.prototype.getMetrics=function(e,r){var n=e+" "+r;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(e,r)),this._data[n]},t}(),vQ=function(){function t(e,r){this.context=e,this.options=r}return t}(),aSe=1e4,iSe=function(t){Pc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s._activeEffects=[],s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),n.canvas||(s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px"),s.fontMetrics=new sSe(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),s}return e.prototype.applyEffects=function(r){for(var n=this;this._activeEffects.length;)this.popEffect();r.forEach(function(s){return n.applyEffect(s)})},e.prototype.applyEffect=function(r){this.ctx.save(),K_e(r)&&(this.ctx.globalAlpha=r.opacity),q_e(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),hQ(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(r){return ro(this,void 0,void 0,function(){var n;return Li(this,function(s){switch(s.label){case 0:return n=r.element.container.styles,n.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},e.prototype.renderNode=function(r){return ro(this,void 0,void 0,function(){return Li(this,function(n){switch(n.label){case 0:if(Ua(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(r)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},e.prototype.renderTextWithLetterSpacing=function(r,n,s){var a=this;if(n===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+s);else{var i=VT(r.text);i.reduce(function(o,l){return a.ctx.fillText(l,o,r.bounds.top+s),o+a.ctx.measureText(l).width},r.bounds.left)}},e.prototype.createFontStyle=function(r){var n=r.fontVariant.filter(function(i){return i==="normal"||i==="small-caps"}).join(""),s=ASe(r.fontFamily).join(", "),a=T1(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,n,r.fontWeight,a,s].join(" "),s,a]},e.prototype.renderTextNode=function(r,n){return ro(this,void 0,void 0,function(){var s,a,i,o,l,u,d,h,m=this;return Li(this,function(g){return s=this.createFontStyle(n),a=s[0],i=s[1],o=s[2],this.ctx.font=a,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",l=this.fontMetrics.getMetrics(i,o),u=l.baseline,d=l.middle,h=n.paintOrder,r.textBounds.forEach(function(b){h.forEach(function(y){switch(y){case 0:m.ctx.fillStyle=$a(n.color),m.renderTextWithLetterSpacing(b,n.letterSpacing,u);var _=n.textShadow;_.length&&b.text.trim().length&&(_.slice(0).reverse().forEach(function(T){m.ctx.shadowColor=$a(T.color),m.ctx.shadowOffsetX=T.offsetX.number*m.options.scale,m.ctx.shadowOffsetY=T.offsetY.number*m.options.scale,m.ctx.shadowBlur=T.blur.number,m.renderTextWithLetterSpacing(b,n.letterSpacing,u)}),m.ctx.shadowColor="",m.ctx.shadowOffsetX=0,m.ctx.shadowOffsetY=0,m.ctx.shadowBlur=0),n.textDecorationLine.length&&(m.ctx.fillStyle=$a(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(T){switch(T){case 1:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+u),b.bounds.width,1);break;case 2:m.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:m.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+d),b.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&b.text.trim().length&&(m.ctx.strokeStyle=$a(n.webkitTextStrokeColor),m.ctx.lineWidth=n.webkitTextStrokeWidth,m.ctx.lineJoin=window.chrome?"miter":"round",m.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+u)),m.ctx.strokeStyle="",m.ctx.lineWidth=0,m.ctx.lineJoin="miter";break}})}),[2]})})},e.prototype.renderReplacedElement=function(r,n,s){if(s&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var a=iw(r),i=aw(n);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,r.intrinsicWidth,r.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(r){return ro(this,void 0,void 0,function(){var n,s,a,i,o,l,k,k,u,d,h,m,M,g,b,P,y,_,T,k,D,M,P;return Li(this,function(L){switch(L.label){case 0:this.applyEffects(r.getEffects(4)),n=r.container,s=r.curves,a=n.styles,i=0,o=n.textNodes,L.label=1;case 1:return i<o.length?(l=o[i],[4,this.renderTextNode(l,a)]):[3,4];case 2:L.sent(),L.label=3;case 3:return i++,[3,1];case 4:if(!(n instanceof J7))return[3,8];L.label=5;case 5:return L.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return k=L.sent(),this.renderReplacedElement(n,s,k),[3,8];case 7:return L.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof X7&&this.renderReplacedElement(n,s,n.canvas),!(n instanceof Z7))return[3,12];L.label=9;case 9:return L.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return k=L.sent(),this.renderReplacedElement(n,s,k),[3,12];case 11:return L.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof nQ&&n.tree?(u=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,u.render(n.tree)]):[3,14];case 13:d=L.sent(),n.width&&n.height&&this.ctx.drawImage(d,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),L.label=14;case 14:if(n instanceof zT&&(h=Math.min(n.bounds.width,n.bounds.height),n.type===ew?n.checked&&(this.ctx.save(),this.path([new Wt(n.bounds.left+h*.39363,n.bounds.top+h*.79),new Wt(n.bounds.left+h*.16,n.bounds.top+h*.5549),new Wt(n.bounds.left+h*.27347,n.bounds.top+h*.44071),new Wt(n.bounds.left+h*.39694,n.bounds.top+h*.5649),new Wt(n.bounds.left+h*.72983,n.bounds.top+h*.23),new Wt(n.bounds.left+h*.84,n.bounds.top+h*.34085),new Wt(n.bounds.left+h*.39363,n.bounds.top+h*.79)]),this.ctx.fillStyle=$a(_R),this.ctx.fill(),this.ctx.restore()):n.type===tw&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+h/2,n.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=$a(_R),this.ctx.fill(),this.ctx.restore())),oSe(n)&&n.value.length){switch(m=this.createFontStyle(a),M=m[0],g=m[1],b=this.fontMetrics.getMetrics(M,g).baseline,this.ctx.font=M,this.ctx.fillStyle=$a(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=cSe(n.styles.textAlign),P=iw(n),y=0,n.styles.textAlign){case 1:y+=P.width/2;break;case 2:y+=P.width;break}_=P.add(y,0,0,-P.height/2+1),this.ctx.save(),this.path([new Wt(P.left,P.top),new Wt(P.left+P.width,P.top),new Wt(P.left+P.width,P.top+P.height),new Wt(P.left,P.top+P.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ix(n.value,_),a.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Ua(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(T=n.styles.listStyleImage,T.type!==0)return[3,18];k=void 0,D=T.url,L.label=15;case 15:return L.trys.push([15,17,,18]),[4,this.context.cache.match(D)];case 16:return k=L.sent(),this.ctx.drawImage(k,n.bounds.left-(k.width+10),n.bounds.top),[3,18];case 17:return L.sent(),this.context.logger.error("Error loading list-style-image "+D),[3,18];case 18:return[3,20];case 19:r.listValue&&n.styles.listStyleType!==-1&&(M=this.createFontStyle(a)[0],this.ctx.font=M,this.ctx.fillStyle=$a(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",P=new OA(n.bounds.left,n.bounds.top+cs(n.styles.paddingTop,n.bounds.width),n.bounds.width,lR(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ix(r.listValue,P),a.letterSpacing,lR(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),L.label=20;case 20:return[2]}})})},e.prototype.renderStackContent=function(r){return ro(this,void 0,void 0,function(){var n,s,T,a,i,T,o,l,T,u,d,T,h,m,T,g,b,T,y,_,T;return Li(this,function(k){switch(k.label){case 0:if(Ua(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:k.sent(),n=0,s=r.negativeZIndex,k.label=2;case 2:return n<s.length?(T=s[n],[4,this.renderStack(T)]):[3,5];case 3:k.sent(),k.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:k.sent(),a=0,i=r.nonInlineLevel,k.label=7;case 7:return a<i.length?(T=i[a],[4,this.renderNode(T)]):[3,10];case 8:k.sent(),k.label=9;case 9:return a++,[3,7];case 10:o=0,l=r.nonPositionedFloats,k.label=11;case 11:return o<l.length?(T=l[o],[4,this.renderStack(T)]):[3,14];case 12:k.sent(),k.label=13;case 13:return o++,[3,11];case 14:u=0,d=r.nonPositionedInlineLevel,k.label=15;case 15:return u<d.length?(T=d[u],[4,this.renderStack(T)]):[3,18];case 16:k.sent(),k.label=17;case 17:return u++,[3,15];case 18:h=0,m=r.inlineLevel,k.label=19;case 19:return h<m.length?(T=m[h],[4,this.renderNode(T)]):[3,22];case 20:k.sent(),k.label=21;case 21:return h++,[3,19];case 22:g=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,k.label=23;case 23:return g<b.length?(T=b[g],[4,this.renderStack(T)]):[3,26];case 24:k.sent(),k.label=25;case 25:return g++,[3,23];case 26:y=0,_=r.positiveZIndex,k.label=27;case 27:return y<_.length?(T=_[y],[4,this.renderStack(T)]):[3,30];case 28:k.sent(),k.label=29;case 29:return y++,[3,27];case 30:return[2]}})})},e.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},e.prototype.formatPath=function(r){var n=this;r.forEach(function(s,a){var i=Ol(s)?s.start:s;a===0?n.ctx.moveTo(i.x,i.y):n.ctx.lineTo(i.x,i.y),Ol(s)&&n.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},e.prototype.renderRepeat=function(r,n,s,a){this.path(r),this.ctx.fillStyle=n,this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},e.prototype.resizeImage=function(r,n,s){var a;if(r.width===n&&r.height===s)return r;var i=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,o=i.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,s);var l=o.getContext("2d");return l.drawImage(r,0,0,r.width,r.height,0,0,n,s),o},e.prototype.renderBackgroundImage=function(r){return ro(this,void 0,void 0,function(){var n,s,a,i,o,l;return Li(this,function(u){switch(u.label){case 0:n=r.styles.backgroundImage.length-1,s=function(d){var h,m,g,O,J,re,Q,H,E,b,O,J,re,Q,H,y,_,T,k,D,M,P,L,C,E,B,O,R,F,Q,H,ne,J,re,G,q,W,ie,j,Y,ee,te;return Li(this,function(ce){switch(ce.label){case 0:if(d.type!==0)return[3,5];h=void 0,m=d.url,ce.label=1;case 1:return ce.trys.push([1,3,,4]),[4,a.context.cache.match(m)];case 2:return h=ce.sent(),[3,4];case 3:return ce.sent(),a.context.logger.error("Error loading background-image "+m),[3,4];case 4:return h&&(g=d_(r,n,[h.width,h.height,h.width/h.height]),O=g[0],J=g[1],re=g[2],Q=g[3],H=g[4],E=a.ctx.createPattern(a.resizeImage(h,Q,H),"repeat"),a.renderRepeat(O,E,J,re)),[3,6];case 5:qbe(d)?(b=d_(r,n,[null,null,null]),O=b[0],J=b[1],re=b[2],Q=b[3],H=b[4],y=Qbe(d.angle,Q,H),_=y[0],T=y[1],k=y[2],D=y[3],M=y[4],P=document.createElement("canvas"),P.width=Q,P.height=H,L=P.getContext("2d"),C=L.createLinearGradient(T,D,k,M),iR(d.stops,_).forEach(function(be){return C.addColorStop(be.stop,$a(be.color))}),L.fillStyle=C,L.fillRect(0,0,Q,H),Q>0&&H>0&&(E=a.ctx.createPattern(P,"repeat"),a.renderRepeat(O,E,J,re))):Kbe(d)&&(B=d_(r,n,[null,null,null]),O=B[0],R=B[1],F=B[2],Q=B[3],H=B[4],ne=d.position.length===0?[OT]:d.position,J=cs(ne[0],Q),re=cs(ne[ne.length-1],H),G=Hbe(d,J,re,Q,H),q=G[0],W=G[1],q>0&&W>0&&(ie=a.ctx.createRadialGradient(R+J,F+re,0,R+J,F+re,q),iR(d.stops,q*2).forEach(function(be){return ie.addColorStop(be.stop,$a(be.color))}),a.path(O),a.ctx.fillStyle=ie,q!==W?(j=r.bounds.left+.5*r.bounds.width,Y=r.bounds.top+.5*r.bounds.height,ee=W/q,te=1/ee,a.ctx.save(),a.ctx.translate(j,Y),a.ctx.transform(1,0,0,ee,0,0),a.ctx.translate(-j,-Y),a.ctx.fillRect(R,te*(F-Y)+Y,Q,H*te),a.ctx.restore()):a.ctx.fill())),ce.label=6;case 6:return n--,[2]}})},a=this,i=0,o=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return i<o.length?(l=o[i],[5,s(l)]):[3,4];case 2:u.sent(),u.label=3;case 3:return i++,[3,1];case 4:return[2]}})})},e.prototype.renderSolidBorder=function(r,n,s){return ro(this,void 0,void 0,function(){return Li(this,function(a){return this.path(MR(s,n)),this.ctx.fillStyle=$a(r),this.ctx.fill(),[2]})})},e.prototype.renderDoubleBorder=function(r,n,s,a){return ro(this,void 0,void 0,function(){var i,o;return Li(this,function(l){switch(l.label){case 0:return n<3?[4,this.renderSolidBorder(r,s,a)]:[3,2];case 1:return l.sent(),[2];case 2:return i=Y_e(a,s),this.path(i),this.ctx.fillStyle=$a(r),this.ctx.fill(),o=J_e(a,s),this.path(o),this.ctx.fill(),[2]}})})},e.prototype.renderNodeBackgroundAndBorders=function(r){return ro(this,void 0,void 0,function(){var n,s,a,i,o,l,u,d,h=this;return Li(this,function(m){switch(m.label){case 0:return this.applyEffects(r.getEffects(2)),n=r.container.styles,s=!cf(n.backgroundColor)||n.backgroundImage.length,a=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],i=lSe(im(n.backgroundClip,0),r.curves),s||n.boxShadow.length?(this.ctx.save(),this.path(i),this.ctx.clip(),cf(n.backgroundColor)||(this.ctx.fillStyle=$a(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:m.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(g){h.ctx.save();var b=sw(r.curves),y=g.inset?0:aSe,_=$_e(b,-y+(g.inset?1:-1)*g.spread.number,(g.inset?1:-1)*g.spread.number,g.spread.number*(g.inset?-2:2),g.spread.number*(g.inset?-2:2));g.inset?(h.path(b),h.ctx.clip(),h.mask(_)):(h.mask(b),h.ctx.clip(),h.path(_)),h.ctx.shadowOffsetX=g.offsetX.number+y,h.ctx.shadowOffsetY=g.offsetY.number,h.ctx.shadowColor=$a(g.color),h.ctx.shadowBlur=g.blur.number,h.ctx.fillStyle=g.inset?$a(g.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),m.label=2;case 2:o=0,l=0,u=a,m.label=3;case 3:return l<u.length?(d=u[l],d.style!==0&&!cf(d.color)&&d.width>0?d.style!==2?[3,5]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return m.sent(),[3,11];case 5:return d.style!==3?[3,7]:[4,this.renderDashedDottedBorder(d.color,d.width,o,r.curves,3)];case 6:return m.sent(),[3,11];case 7:return d.style!==4?[3,9]:[4,this.renderDoubleBorder(d.color,d.width,o,r.curves)];case 8:return m.sent(),[3,11];case 9:return[4,this.renderSolidBorder(d.color,o,r.curves)];case 10:m.sent(),m.label=11;case 11:o++,m.label=12;case 12:return l++,[3,3];case 13:return[2]}})})},e.prototype.renderDashedDottedBorder=function(r,n,s,a,i){return ro(this,void 0,void 0,function(){var o,l,u,d,h,m,g,b,y,_,T,k,D,M,P,L,P,L;return Li(this,function(C){return this.ctx.save(),o=X_e(a,s),l=MR(a,s),i===2&&(this.path(l),this.ctx.clip()),Ol(l[0])?(u=l[0].start.x,d=l[0].start.y):(u=l[0].x,d=l[0].y),Ol(l[1])?(h=l[1].end.x,m=l[1].end.y):(h=l[1].x,m=l[1].y),s===0||s===2?g=Math.abs(u-h):g=Math.abs(d-m),this.ctx.beginPath(),i===3?this.formatPath(o):this.formatPath(l.slice(0,2)),b=n<3?n*3:n*2,y=n<3?n*2:n,i===3&&(b=n,y=n),_=!0,g<=b*2?_=!1:g<=b*2+y?(T=g/(2*b+y),b*=T,y*=T):(k=Math.floor((g+y)/(b+y)),D=(g-k*b)/(k-1),M=(g-(k+1)*b)/k,y=M<=0||Math.abs(y-D)<Math.abs(y-M)?D:M),_&&(i===3?this.ctx.setLineDash([0,b+y]):this.ctx.setLineDash([b,y])),i===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=$a(r),this.ctx.stroke(),this.ctx.setLineDash([]),i===2&&(Ol(l[0])&&(P=l[3],L=l[0],this.ctx.beginPath(),this.formatPath([new Wt(P.end.x,P.end.y),new Wt(L.start.x,L.start.y)]),this.ctx.stroke()),Ol(l[1])&&(P=l[1],L=l[2],this.ctx.beginPath(),this.formatPath([new Wt(P.end.x,P.end.y),new Wt(L.start.x,L.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},e.prototype.render=function(r){return ro(this,void 0,void 0,function(){var n;return Li(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=$a(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=W_e(r),[4,this.renderStack(n)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},e}(vQ),oSe=function(t){return t instanceof rQ||t instanceof tQ?!0:t instanceof zT&&t.type!==tw&&t.type!==ew},lSe=function(t,e){switch(t){case 0:return sw(e);case 2:return V_e(e);case 1:default:return aw(e)}},cSe=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},uSe=["-apple-system","system-ui"],ASe=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter(function(e){return uSe.indexOf(e)===-1}):t},dSe=function(t){Pc(e,t);function e(r,n){var s=t.call(this,r,n)||this;return s.canvas=n.canvas?n.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=n,s.canvas.width=Math.floor(n.width*n.scale),s.canvas.height=Math.floor(n.height*n.scale),s.canvas.style.width=n.width+"px",s.canvas.style.height=n.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-n.x,-n.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),s}return e.prototype.render=function(r){return ro(this,void 0,void 0,function(){var n,s;return Li(this,function(a){switch(a.label){case 0:return n=r5(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,fSe(n)];case 1:return s=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=$a(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},e}(vQ),fSe=function(t){return new Promise(function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(t))})},hSe=function(){function t(e){var r=e.id,n=e.enabled;this.id=r,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,ty([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,ty([this.id,this.getTime()+"ms"],e))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,ty([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,ty([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},t.instances={},t}(),mSe=function(){function t(e,r){var n;this.windowBounds=r,this.instanceName="#"+t.instanceCount++,this.logger=new hSe({id:this.instanceName,enabled:e.logging}),this.cache=(n=e.cache)!==null&&n!==void 0?n:new L_e(this,e)}return t.instanceCount=1,t}(),yQ=function(t,e){return e===void 0&&(e={}),pSe(t,e)};typeof window<"u"&&fQ.setContext(window);var pSe=function(t,e){return ro(void 0,void 0,void 0,function(){var r,n,s,a,i,o,l,u,d,h,m,g,b,y,_,T,k,D,M,P,C,L,C,E,B,O,R,F,Q,H,ne,J,re,G,q,W,ie,j,Y,ee;return Li(this,function(te){switch(te.label){case 0:if(!t||typeof t!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=t.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(n=r.defaultView,!n)throw new Error("Document is not attached to a Window");return s={allowTaint:(E=e.allowTaint)!==null&&E!==void 0?E:!1,imageTimeout:(B=e.imageTimeout)!==null&&B!==void 0?B:15e3,proxy:e.proxy,useCORS:(O=e.useCORS)!==null&&O!==void 0?O:!1},a=QS({logging:(R=e.logging)!==null&&R!==void 0?R:!0,cache:e.cache},s),i={windowWidth:(F=e.windowWidth)!==null&&F!==void 0?F:n.innerWidth,windowHeight:(Q=e.windowHeight)!==null&&Q!==void 0?Q:n.innerHeight,scrollX:(H=e.scrollX)!==null&&H!==void 0?H:n.pageXOffset,scrollY:(ne=e.scrollY)!==null&&ne!==void 0?ne:n.pageYOffset},o=new OA(i.scrollX,i.scrollY,i.windowWidth,i.windowHeight),l=new mSe(a,o),u=(J=e.foreignObjectRendering)!==null&&J!==void 0?J:!1,d={allowTaint:(re=e.allowTaint)!==null&&re!==void 0?re:!1,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:u,copyStyles:u},l.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),h=new RR(l,t,d),m=h.clonedReferenceElement,m?[4,h.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return g=te.sent(),b=GT(m)||x_e(m)?$2e(m.ownerDocument):mb(l,m),y=b.width,_=b.height,T=b.left,k=b.top,D=gSe(l,m,e.backgroundColor),M={canvas:e.canvas,backgroundColor:D,scale:(q=(G=e.scale)!==null&&G!==void 0?G:n.devicePixelRatio)!==null&&q!==void 0?q:1,x:((W=e.x)!==null&&W!==void 0?W:0)+T,y:((ie=e.y)!==null&&ie!==void 0?ie:0)+k,width:(j=e.width)!==null&&j!==void 0?j:Math.ceil(y),height:(Y=e.height)!==null&&Y!==void 0?Y:Math.ceil(_)},u?(l.logger.debug("Document cloned, using foreign object rendering"),C=new dSe(l,M),[4,C.render(m)]):[3,3];case 2:return P=te.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+T+","+k+" with size "+y+"x"+_+" using computed rendering"),l.logger.debug("Starting DOM parsing"),L=aQ(l,m),D===L.styles.backgroundColor&&(L.styles.backgroundColor=DA.TRANSPARENT),l.logger.debug("Starting renderer for element at "+M.x+","+M.y+" with size "+M.width+"x"+M.height),C=new iSe(l,M),[4,C.render(L)];case 4:P=te.sent(),te.label=5;case 5:return(!((ee=e.removeContainer)!==null&&ee!==void 0)||ee)&&(RR.destroy(g)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,P]}})})},gSe=function(t,e,r){var n=e.ownerDocument,s=n.documentElement?sx(t,getComputedStyle(n.documentElement).backgroundColor):DA.TRANSPARENT,a=n.body?sx(t,getComputedStyle(n.body).backgroundColor):DA.TRANSPARENT,i=typeof r=="string"?sx(t,r):r===null?DA.TRANSPARENT:4294967295;return e===n.documentElement?cf(s)?cf(a)?i:a:s:i};const xSe=Object.freeze(Object.defineProperty({__proto__:null,default:yQ},Symbol.toStringTag,{value:"Module"})),_b="proyectos_interdisciplinarios",wQ="entregas_interdisciplinarias",vSe="usuarios",qT=t=>{const e=t.data();return{id:t.id,...e}},ySe=t=>{const e=Yt(kt(vt,_b),Pr("nombreProyecto","asc"));return mr(e,n=>{const s=n.docs.map(a=>qT(a));t(s)},n=>{console.error("Error al suscribirse a las planificaciones:",n),t([])})},wSe=async t=>{try{return(await ps(kt(vt,_b),t)).id}catch(e){throw console.error("Error al crear la planificación:",e),new Error("No se pudo crear la planificación.")}},jR=async(t,e)=>{try{const{id:r,...n}=e,s=ur(vt,_b,t);await pi(s,n)}catch(r){throw console.error("Error al actualizar la planificación:",r),new Error("No se pudo actualizar la planificación.")}},bSe=async t=>{try{const e=ur(vt,_b,t);await Ta(e)}catch(e){throw console.error("Error al eliminar la planificación:",e),new Error("No se pudo eliminar la planificación.")}},CSe=(t,e)=>{const r=Yt(kt(vt,wQ),Xr("planificacionId","==",t));return mr(r,s=>{const a=s.docs.map(i=>qT(i));e(a)},s=>{console.error("Error al suscribirse a las entregas:",s),e([])})},OR=async(t,e)=>{try{const r=ur(vt,wQ,t);await pi(r,{feedbackProfesor:e,fechaFeedback:or.fromDate(new Date)},{merge:!0})}catch(r){throw console.error("Error al guardar la retroalimentación:",r),new Error("No se pudo guardar la retroalimentación.")}},ESe=t=>{const e=Yt(kt(vt,vSe));return mr(e,n=>{const s=n.docs.map(a=>qT(a));t(s)},n=>{console.error("Error al suscribirse a todos los usuarios:",n),t([])})},_Se=({planificaciones:t,onActivityUpdate:e})=>{const[r,n]=Z.useState(null),s=Z.useMemo(()=>{const l=[];return t.forEach(u=>{(u.actividades||[]).forEach(d=>l.push({...d,planId:u.id,type:"activity"})),(u.fechasClave||[]).forEach(d=>l.push({id:d.id,planId:u.id,type:"keyDate",nombre:d.nombre,fechaInicio:d.fecha,fechaFin:d.fecha,responsables:u.docentesResponsables,asignaturaPrincipal:"Milestone"}))}),l.sort((u,d)=>new Date(u.fechaInicio).getTime()-new Date(d.fechaInicio).getTime())},[t]),a=Z.useCallback(l=>{if(l.type==="keyDate")return{text:"Fecha Clave",color:"bg-slate-200 text-slate-800 dark:bg-slate-700 dark:text-slate-300"};const u=new Date;u.setHours(0,0,0,0);const d=new Date(`${l.fechaInicio}T00:00:00`),h=new Date(`${l.fechaFin}T00:00:00`);return h<u?{text:"Completado",color:"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"}:d<=u&&h>=u?{text:"En Progreso",color:"bg-blue-100 text-blue-800 dark:bg-blue-900/50 dark:text-blue-300"}:{text:"Planificado",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/50 dark:text-yellow-300"}},[]),i=({name:l})=>{const u=(l||"").split(" ").map(g=>g[0]).join("").toUpperCase(),d=g=>{let b=0;for(let y=0;y<g.length;y++)b=g.charCodeAt(y)+((b<<5)-b);return b},h=["bg-pink-100 text-pink-800 dark:bg-pink-900/50 dark:text-pink-300","bg-indigo-100 text-indigo-800 dark:bg-indigo-900/50 dark:text-indigo-300","bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300","bg-orange-100 text-orange-800 dark:bg-orange-900/50 dark:text-orange-300","bg-purple-100 text-purple-800 dark:bg-purple-900/50 dark:text-purple-300","bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300","bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300"],m=Math.abs(d(l))%h.length;return c.jsx("div",{className:`w-9 h-9 rounded-full ${h[m]} flex items-center justify-center font-bold text-sm ring-2 ring-white dark:ring-slate-800`,children:u.slice(0,2)})},o=({data:l,onClose:u,onSave:d})=>{const[h,m]=Z.useState(l.activity),g=y=>{m({...h,[y.target.name]:y.target.value})},b=()=>{d(l.planId,h),u()};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-lg p-6 animate-fade-in-up",children:[c.jsx("h3",{className:"text-xl font-bold mb-4 text-slate-800 dark:text-slate-200",children:"Editar Actividad"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Nombre"}),c.jsx("input",{name:"nombre",value:h.nombre,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Responsables"}),c.jsx("input",{name:"responsables",value:h.responsables,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Inicio"}),c.jsx("input",{type:"date",name:"fechaInicio",value:h.fechaInicio,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("label",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:"Fecha Fin"}),c.jsx("input",{type:"date",name:"fechaFin",value:h.fechaFin,onChange:g,className:"w-full mt-1 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600"})]})]})]}),c.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsx("button",{onClick:u,className:"px-4 py-2 bg-slate-200 dark:bg-slate-600 rounded-md font-semibold",children:"Cancelar"}),c.jsx("button",{onClick:b,className:"px-4 py-2 bg-amber-500 text-white rounded-md font-semibold",children:"Guardar"})]})]})})};return s.length===0?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-8",children:"No hay actividades para mostrar. Cree una planificación primero."})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-lg",children:[c.jsx("h2",{className:"text-3xl font-bold text-slate-900 dark:text-slate-200",children:"Cronograma del Proyecto"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1 mb-6",children:"Visualice el progreso y las dependencias del proyecto."}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"border-b border-slate-200 dark:border-slate-700",children:[c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Tarea"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Estado"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Fecha de Fin"}),c.jsx("th",{className:"px-6 py-3 text-left text-sm font-semibold text-slate-600 dark:text-slate-400 uppercase tracking-wider",children:"Asignado"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 dark:divide-slate-700",children:s.map(l=>{const u=a(l),d=l.type==="activity";return c.jsxs("tr",{className:`${d?"hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer":""}`,onClick:()=>d&&n({planId:l.planId,activity:l}),children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-medium text-slate-900 dark:text-slate-200",children:l.nombre}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`px-3 py-1 inline-flex text-sm leading-5 font-semibold rounded-full ${u.color}`,children:u.text})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaInicio}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base text-slate-600 dark:text-slate-400",children:l.fechaFin}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx(i,{name:l.responsables||"N/A"})})]},l.id)})})]})}),r&&c.jsx(o,{data:r,onClose:()=>n(null),onSave:e})]})},SSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),TSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 21a6 6 0 006-5.197M15 12a4 4 0 110-8 4 4 0 010 8z"})}),NSe=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),c.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 14l9-5-9-5-9 5 9 5zm0 0v6"})]}),BSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),kSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),ISe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6H8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),FSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),DSe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),c5=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Rd=({icon:t,label:e,children:r,aiButton:n})=>c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-4 rounded-xl shadow-sm border dark:border-slate-700",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-3 text-slate-500 dark:text-slate-400 font-medium",children:[t,c.jsx("span",{children:e})]}),n]}),r]}),RSe=({initialPlan:t,onSave:e,onCancel:r})=>{const[n,s]=Z.useState(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]}),[a,i]=Z.useState({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""}),[o,l]=Z.useState({nombre:"",fecha:""}),[u,d]=Z.useState({instrucciones:"",fechaEntrega:"",recursoUrl:""}),[h,m]=Z.useState(!1),[g,b]=Z.useState(!1),[y,_]=Z.useState(!1);Z.useEffect(()=>{s(t||{id:"",nombreProyecto:"",descripcionProyecto:"",asignaturas:[],cursos:[],docentesResponsables:"",objetivos:"",actividades:[],fechasClave:[],indicadoresLogro:"",tareas:[]})},[t]);const T=async E=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}E==="objetivos"?m(!0):b(!0);const B="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE";let O="";E==="objetivos"?O=`Basado en la siguiente descripción de un proyecto escolar interdisciplinario, genera 3 a 5 objetivos de aprendizaje claros, medibles y concisos. La respuesta debe ser solo el texto de los objetivos, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"`:O=`Basado en la siguiente descripción y objetivos de un proyecto escolar interdisciplinario, genera una lista de 5 a 7 indicadores de logro concretos y observables que permitan evaluar el cumplimiento de los objetivos. La respuesta debe ser solo el texto de los indicadores, formateado en una lista con guiones.
            Descripción del Proyecto: "${n.descripcionProyecto}"
            Objetivos (si existen): "${n.objetivos||"Aún no definidos, genéralos a partir de la descripción."}"`;try{const ne=(await(await new $i(B).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(O)).response).text();s(J=>({...J,[E]:ne.replace(/(\*\*|\*)/g,"")}))}catch(R){console.error(`Error al generar ${E}`,R),alert(`Hubo un error al generar los ${E}. Inténtelo de nuevo.`)}finally{E==="objetivos"?m(!1):b(!1)}},k=async()=>{if(!n.descripcionProyecto.trim()){alert("Por favor, ingrese una descripción del proyecto para usar la IA.");return}_(!0);const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",B=`
            Basado en la descripción de un proyecto escolar, genera una estructura completa. La respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            Descripción del proyecto: "${n.descripcionProyecto}"
            Docentes responsables: "${n.docentesResponsables}"
            Asignaturas involucradas: "${n.asignaturas.join(", ")}"

            El JSON debe tener tres claves: 'actividades', 'fechasClave', y 'tareas'.
            1. 'actividades': Un array de 3 a 5 objetos. Cada objeto debe tener: "nombre" (string), "fechaInicio" (string "YYYY-MM-DD"), "fechaFin" (string "YYYY-MM-DD"), y "responsables" (string, uno de los docentes).
            2. 'fechasClave': Un array de 2 a 3 objetos (hitos importantes). Cada objeto debe tener: "nombre" (string) y "fecha" (string "YYYY-MM-DD").
            3. 'tareas': Un array de 2 a 3 objetos (tareas para estudiantes). Cada objeto debe tener: "instrucciones" (string detallado) y "fechaEntrega" (string "YYYY-MM-DD").
            Las fechas deben ser lógicas y secuenciales. Asume que el proyecto comienza hoy.
        `;try{const ne=(await(await new $i(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(ne);s(re=>{var G,q,W;return{...re,actividades:((G=J.actividades)==null?void 0:G.map(ie=>({...ie,id:crypto.randomUUID()})))||re.actividades,fechasClave:((q=J.fechasClave)==null?void 0:q.map(ie=>({...ie,id:crypto.randomUUID()})))||re.fechasClave,tareas:((W=J.tareas)==null?void 0:W.map((ie,j)=>({...ie,id:crypto.randomUUID(),numero:j+1})))||re.tareas}})}catch(O){console.error("Error al generar la estructura del proyecto:",O),alert("No se pudo generar la estructura del proyecto. Intente de nuevo.")}finally{_(!1)}},D=E=>{s(B=>({...B,[E.target.name]:E.target.value}))},M=(E,B)=>{s(O=>{const R=O[E],F=R.includes(B)?R.filter(Q=>Q!==B):[...R,B];return{...O,[E]:F}})},P=()=>{if(!a.nombre||!a.fechaInicio||!a.fechaFin){alert("Nombre y fechas son obligatorios para la actividad.");return}s(E=>({...E,actividades:[...E.actividades||[],{...a,id:crypto.randomUUID()}]})),i({nombre:"",fechaInicio:"",fechaFin:"",responsables:"",asignaturaPrincipal:""})},L=()=>{!o.nombre||!o.fecha||(s(E=>({...E,fechasClave:[...E.fechasClave||[],{...o,id:crypto.randomUUID()}]})),l({nombre:"",fecha:""}))},C=()=>{var B;if(!u.instrucciones||!u.fechaEntrega){alert("Instrucciones y fecha son obligatorios para la tarea.");return}const E={id:crypto.randomUUID(),numero:(((B=n.tareas)==null?void 0:B.length)||0)+1,...u};s(O=>({...O,tareas:[...O.tareas||[],E]})),d({instrucciones:"",fechaEntrega:"",recursoUrl:""})};return c.jsxs("div",{className:"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8",children:[c.jsx("div",{className:"text-center mb-12",children:c.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-slate-800 dark:text-slate-200",children:t?"Editando Proyecto":"Nuevo Proyecto Interdisciplinario"})}),c.jsxs("div",{className:"space-y-6",children:[c.jsx(Rd,{icon:c.jsx(SSe,{}),label:"Nombre del Proyecto",children:c.jsx("input",{name:"nombreProyecto",value:n.nombreProyecto,onChange:D,placeholder:"Ingrese el nombre del proyecto...",className:"w-full mt-1 bg-transparent text-lg font-semibold focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Rd,{icon:c.jsx(TSe,{}),label:"Profesores",children:c.jsx("input",{name:"docentesResponsables",value:n.docentesResponsables,onChange:D,placeholder:"Ingrese nombres separados por comas...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Rd,{icon:c.jsx(NSe,{}),label:"Cursos",children:c.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-2 mt-2",children:ca.map(E=>c.jsx("button",{type:"button",onClick:()=>M("cursos",E),className:`w-full text-center p-2 rounded-md text-sm transition-colors ${n.cursos.includes(E)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:E},E))})}),c.jsx(Rd,{icon:c.jsx(BSe,{}),label:"Asignaturas",children:c.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2 mt-2",children:ol.map(E=>c.jsx("button",{type:"button",onClick:()=>M("asignaturas",E),className:`w-full text-left p-2 rounded-md text-sm transition-colors ${n.asignaturas.includes(E)?"bg-amber-500 text-white font-semibold":"bg-slate-100 hover:bg-slate-200 dark:bg-slate-700 dark:hover:bg-slate-600"}`,children:E},E))})}),c.jsx(Rd,{icon:c.jsx(kSe,{}),label:"Descripción del Proyecto",children:c.jsx("textarea",{name:"descripcionProyecto",value:n.descripcionProyecto,onChange:D,placeholder:"Detalle aquí la metodología, el producto final esperado y el propósito del proyecto. Esta información es clave para la IA.",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[100px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Rd,{icon:c.jsx(ISe,{}),label:"Objetivos",aiButton:c.jsx("button",{type:"button",onClick:()=>T("objetivos"),disabled:!n.descripcionProyecto.trim()||h,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(c5,{})}),children:h?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"objetivos",value:n.objetivos,onChange:D,placeholder:"Liste los objetivos de aprendizaje...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Rd,{icon:c.jsx(FSe,{}),label:"Indicadores de Éxito",aiButton:c.jsx("button",{type:"button",onClick:()=>T("indicadoresLogro"),disabled:!n.descripcionProyecto.trim()||g,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 disabled:opacity-50",title:"Generar con IA",children:c.jsx(c5,{})}),children:g?c.jsx("div",{className:"p-4 text-center",children:"Generando..."}):c.jsx("textarea",{name:"indicadoresLogro",value:n.indicadoresLogro,onChange:D,placeholder:"Liste los indicadores de logro o evaluación...",className:"w-full mt-1 bg-transparent focus:ring-0 border-none p-0 min-h-[80px] resize-none dark:text-slate-200 placeholder:text-slate-400"})}),c.jsx(Rd,{icon:c.jsx(DSe,{}),label:"Carta Gantt",children:c.jsxs("div",{className:"space-y-4 mt-2",children:[c.jsx("div",{className:"text-center border-b pb-4 mb-4 dark:border-slate-700",children:c.jsx("button",{type:"button",onClick:k,disabled:y||!n.descripcionProyecto,className:"bg-sky-500 text-white font-semibold py-2 px-5 rounded-lg disabled:bg-slate-400 flex items-center gap-2 mx-auto",children:y?"Generando...":"✨ Sugerir Estructura con IA"})}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Actividades"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-2 items-end",children:[c.jsx("input",{value:a.nombre,onChange:E=>i({...a,nombre:E.target.value}),placeholder:"Nombre",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:a.fechaInicio,onChange:E=>i({...a,fechaInicio:E.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("input",{type:"date",value:a.fechaFin,onChange:E=>i({...a,fechaFin:E.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:P,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.actividades.map(E=>c.jsx("li",{children:E.nombre},E.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Fechas Clave (Hitos)"}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 items-end",children:[c.jsx("input",{value:o.nombre,onChange:E=>l({...o,nombre:E.target.value}),placeholder:"Hito",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 col-span-1"}),c.jsx("input",{type:"date",value:o.fecha,onChange:E=>l({...o,fecha:E.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:L,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:n.fechasClave.map(E=>c.jsxs("li",{children:[E.nombre," (",E.fecha,")"]},E.id))})]}),c.jsxs("div",{className:"space-y-2 p-3 bg-slate-100 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("h4",{className:"text-sm font-semibold",children:"Tareas para Estudiantes"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2 items-end",children:[c.jsx("input",{value:u.instrucciones,onChange:E=>d({...u,instrucciones:E.target.value}),placeholder:"Instrucciones",className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600 md:col-span-2"}),c.jsx("input",{type:"date",value:u.fechaEntrega,onChange:E=>d({...u,fechaEntrega:E.target.value}),className:"w-full p-1 border rounded bg-white dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{type:"button",onClick:C,className:"bg-slate-200 dark:bg-slate-600 p-2 rounded h-8 text-sm font-semibold",children:"Agregar"})]}),c.jsx("ul",{className:"text-xs",children:(n.tareas||[]).map(E=>c.jsxs("li",{children:[E.numero,". ",E.instrucciones]},E.id))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4 pt-6",children:[c.jsx("button",{onClick:r,className:"px-8 py-3 bg-slate-200 text-slate-700 rounded-lg font-semibold hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Cancelar"}),c.jsx("button",{onClick:()=>e(n),className:"px-8 py-3 bg-slate-800 text-white rounded-lg font-semibold hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:t?"Guardar Cambios":"Guardar Proyecto"})]})]})]})},QR=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState(!0),[s,a]=Z.useState("list"),[i,o]=Z.useState(null),[l,u]=Z.useState(null),[d,h]=Z.useState(null);Z.useEffect(()=>{n(!0);const D=ySe(M=>{e(M),n(!1)});return()=>D()},[]);const m=Z.useCallback(async(D,M)=>{const P=t.find(L=>L.id===D);if(P){const L={...P,actividades:(P.actividades||[]).map(C=>C.id===M.id?M:C)};await jR(D,L)}},[t]),g=async D=>{try{"id"in D&&D.id?await jR(D.id,D):await wSe(D),a("list"),o(null)}catch(M){console.error("Error al guardar la planificación:",M),alert("No se pudo guardar la planificación.")}},b=D=>{o(D),a("form")},y=async D=>{if(console.log("ID recibido por handleDelete:",D),!D){console.error("handleDelete fue llamado con un ID inválido:",D),alert("Error: No se puede eliminar un proyecto sin un ID válido.");return}if(window.confirm("¿Está seguro de eliminar esta planificación?"))try{await bSe(D)}catch(M){console.error("Error al eliminar la planificación:",M),alert("No se pudo eliminar la planificación.")}},_=()=>{o(null),a("form")},T=async D=>{u(D.id);const M=new lr("p","mm","a4"),P=15,L=M.internal.pageSize.getWidth(),C=M.internal.pageSize.getHeight(),E=L-P*2;let B=P;const O=22,R=14,F=11,Q=()=>{M.setFont("helvetica","normal"),M.setFontSize(9),M.setTextColor(150),M.text("Proyecto Interdisciplinario",P,12),M.text("Liceo Industrial de Recoleta",L-P,12,{align:"right"}),M.setDrawColor(220),M.line(P,15,L-P,15)},H=q=>{B+q>C-P&&(M.addPage(),Q(),B=P+15)},ne=(q,W)=>{if(!W||Array.isArray(W)&&W.length===0||typeof W=="string"&&!W.trim())return;const ie=10;M.setFontSize(F);const j=Array.isArray(W)?W.join(", "):String(W),Y=M.splitTextToSize(j,E),ee=Y.length*(F*.35*1.15);H(ie+ee+12),M.setFont("helvetica","bold"),M.setFontSize(R),M.setTextColor(40),M.text(q,P,B),B+=6,M.setDrawColor(200),M.line(P,B,P+30,B),B+=8,M.setFont("helvetica","normal"),M.setFontSize(F),M.setTextColor(80),M.text(Y,P,B),B+=ee+12};Q(),B=P+20,M.setFont("helvetica","bold"),M.setFontSize(O),M.setTextColor(0);const J=M.splitTextToSize(D.nombreProyecto,E);if(M.text(J,P,B),B+=J.length*(O*.4)+10,il(M,{startY:B,body:[[{content:"Docentes Responsables:",styles:{fontStyle:"bold"}},D.docentesResponsables],[{content:"Cursos Involucrados:",styles:{fontStyle:"bold"}},D.cursos.join(", ")],[{content:"Asignaturas:",styles:{fontStyle:"bold"}},D.asignaturas.join(", ")]],theme:"grid",styles:{fontSize:F,cellPadding:3,lineColor:[220,220,220]},columnStyles:{0:{cellWidth:50,fontStyle:"bold"}}}),B=M.lastAutoTable.finalY+15,ne("Descripción del Proyecto",D.descripcionProyecto),ne("Objetivos de Aprendizaje",D.objetivos),ne("Indicadores de Logro",D.indicadoresLogro),D.tareas&&D.tareas.length>0){const q=D.tareas.map(ie=>[ie.numero.toString(),ie.instrucciones,ie.fechaEntrega]),W=(q.length+1)*10+15;H(W+15),M.setFont("helvetica","bold"),M.setFontSize(R),M.setTextColor(40),M.text("Tareas para Estudiantes",P,B),B+=10,il(M,{startY:B,head:[["#","Instrucciones","Fecha de Entrega"]],body:q,theme:"striped",headStyles:{fillColor:[52,73,94]}}),B=M.lastAutoTable.finalY+15}const re=document.getElementById("gantt-container-vertical");if(re)try{const W=(await yQ(re,{scale:2,backgroundColor:"#ffffff"})).toDataURL("image/png");M.addPage(),Q(),B=P+15,M.setFont("helvetica","bold"),M.setFontSize(R),M.setTextColor(40),M.text("Cronograma del Proyecto",P,B),B+=10;const ie=M.getImageProperties(W),j=E,Y=ie.height*j/ie.width;M.addImage(W,"PNG",P,B,j,Y)}catch(q){console.error("Error generating timeline image:",q)}const G=M.internal.pages.length-1;for(let q=1;q<=G;q++)M.setPage(q),M.setFont("helvetica","normal"),M.setFontSize(9),M.setTextColor(150),M.text(`Página ${q} de ${G}`,L-P,M.internal.pageSize.getHeight()-10,{align:"right"});M.save(`Proyecto_${D.nombreProyecto.replace(/\s/g,"_")}.pdf`),u(null)},k=({plan:D,onBack:M})=>{var ne,J;const[P,L]=Z.useState([]),[C,E]=Z.useState([]),[B,O]=Z.useState(((ne=D.tareas)==null?void 0:ne[0])||null),[R,F]=Z.useState(null);Z.useEffect(()=>{const re=ESe(L),G=CSe(D.id,E);return()=>{re(),G()}},[D.id]);const Q=Z.useMemo(()=>P.filter(re=>re.profile===jt.ESTUDIANTE&&D.cursos.includes(re.curso||"")).sort((re,G)=>re.nombreCompleto.localeCompare(G.nombreCompleto)),[P,D.cursos]),H=async re=>{var W;F(re.id);const G="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",q=`
                Eres un profesor asistente. Genera una retroalimentación constructiva para la entrega de un estudiante.
                - Instrucciones de la tarea: "${B==null?void 0:B.instrucciones}"
                - Comentario del estudiante: "${re.observacionesEstudiante||"No dejó comentarios."}"
                - Enlace entregado: "${re.enlaceUrl||"No aplica"}"
                - Archivo entregado: "${((W=re.archivoAdjunto)==null?void 0:W.nombre)||"No aplica"}"
                
                La retroalimentación debe ser breve (2-3 frases), motivadora, y enfocada en cómo podría mejorar.
            `;try{const te=(await(await new $i(G).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(q)).response).text().replace(/(\*\*|\*)/g,"");await OR(re.id,te)}catch(ie){console.error("Error al generar feedback con IA:",ie),alert("No se pudo generar la retroalimentación.")}finally{F(null)}};return B?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsxs("h2",{className:"text-2xl font-bold text-slate-800",children:["Entregas de Tareas: ",D.nombreProyecto]}),c.jsx("button",{onClick:M,className:"font-semibold",children:"← Volver a Proyectos"})]}),c.jsx("select",{value:B.id,onChange:re=>{var G;return O(((G=D.tareas)==null?void 0:G.find(q=>q.id===re.target.value))||null)},className:"mb-4 p-2 border rounded-md dark:bg-slate-700 dark:border-slate-600",children:(J=D.tareas)==null?void 0:J.map(re=>c.jsxs("option",{value:re.id,children:["Tarea ",re.numero,": ",re.instrucciones]},re.id))}),c.jsx("div",{className:"space-y-3 max-h-[60vh] overflow-y-auto",children:Q.map(re=>{const G=C.find(q=>q.tareaId===B.id&&q.estudianteId===re.id);return c.jsxs("div",{className:"p-4 border rounded-lg bg-slate-50 dark:bg-slate-700/50",children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[re.nombreCompleto," - ",G!=null&&G.completada?c.jsx("span",{className:"text-green-600",children:"Entregado"}):c.jsx("span",{className:"text-red-600",children:"Pendiente"})]}),G?c.jsxs("div",{className:"text-sm mt-2 space-y-2",children:[G.observacionesEstudiante&&c.jsxs("p",{children:[c.jsx("strong",{children:"Comentario:"})," ",G.observacionesEstudiante]}),G.enlaceUrl&&c.jsxs("p",{children:[c.jsx("strong",{children:"Enlace:"})," ",c.jsx("a",{href:G.enlaceUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline",children:G.enlaceUrl})]}),G.archivoAdjunto&&c.jsxs("p",{children:[c.jsx("strong",{children:"Archivo:"})," ",c.jsx("a",{href:G.archivoAdjunto.url,download:G.archivoAdjunto.nombre,className:"text-blue-500 hover:underline",children:G.archivoAdjunto.nombre})]}),c.jsxs("div",{className:"flex items-end gap-2",children:[c.jsx("textarea",{placeholder:"Escribir retroalimentación...",defaultValue:G.feedbackProfesor||"",onBlur:q=>OR(G.id,q.target.value),rows:2,className:"w-full mt-2 p-1 border rounded-md dark:bg-slate-700 dark:border-slate-600 flex-grow"},G.id),c.jsx("button",{onClick:()=>H(G),disabled:R===G.id,className:"p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-600 disabled:opacity-50",title:"Generar Feedback con IA",children:R===G.id?"...":c.jsx(c5,{})})]})]}):c.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"El estudiante aún no ha realizado la entrega."})]},re.id)})})]}):c.jsx("div",{className:"text-center p-8",children:"Este proyecto no tiene tareas asignadas."})};return r?c.jsx("div",{className:"text-center py-10",children:"Cargando proyectos..."}):d?c.jsx(k,{plan:d,onBack:()=>h(null)}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[s==="list"?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Proyectos Interdisciplinarios"}),c.jsx("button",{onClick:_,className:"bg-slate-800 text-white font-bold py-2 px-5 rounded-lg hover:bg-slate-700 dark:bg-amber-500 dark:text-slate-900 dark:hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"space-y-4",children:t.map(D=>(console.log("Inspeccionando objeto plan:",D),c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:D.nombreProyecto}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Cursos: ",(D.cursos||[]).join(", ")]})]}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.jsx("button",{onClick:()=>h(D),className:"text-green-600 hover:text-green-800 dark:text-green-400 font-semibold text-sm",children:"Ver Entregas"}),c.jsx("button",{onClick:()=>T(D),disabled:l===D.id,className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 font-semibold text-sm disabled:opacity-50",children:l===D.id?"Exportando...":"Exportar PDF"}),c.jsx("button",{onClick:()=>b(D),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 font-semibold text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>y(D.id),title:"Eliminar",className:"text-red-600 hover:text-red-800 p-1 rounded-full hover:bg-red-100 dark:hover:bg-red-900/40",children:"🗑️"})]})]})},D.id)))})]}):c.jsx(RSe,{initialPlan:i,onSave:g,onCancel:()=>{a("list"),o(null)}}),t.length>0&&c.jsx("div",{id:"gantt-container-vertical",children:c.jsx(_Se,{planificaciones:t,onActivityUpdate:m})})]})},f_="pañolMaquinas",HR="pañolRegistros",LSe=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState([]),s={fecha:new Date().toISOString().split("T")[0],curso:"",profesorResponsable:"",maquinaId:"",totalHoras:0,observaciones:""},[a,i]=Z.useState(s),[o,l]=Z.useState(null),u={nombre:"",especialidad:"Industrial"},[d,h]=Z.useState(u),[m,g]=Z.useState(null),[b,y]=Z.useState({maquinaId:"",curso:"",profesor:"",fecha:""});Z.useEffect(()=>{try{const F=localStorage.getItem(f_);if(F&&JSON.parse(F).length>0)e(JSON.parse(F));else{const H=[{id:crypto.randomUUID(),nombre:"Torno",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Fresadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora MIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Soldadora TIG",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Torno CNC",especialidad:"Industrial"},{id:crypto.randomUUID(),nombre:"Elevador",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Compresor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Rectificadora",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta de motor",especialidad:"Automotriz"},{id:crypto.randomUUID(),nombre:"Maqueta hidráulica",especialidad:"Automotriz"}];e(H),localStorage.setItem(f_,JSON.stringify(H))}const Q=localStorage.getItem(HR);Q&&n(JSON.parse(Q))}catch(F){console.error("Error al cargar datos de Pañol desde localStorage",F)}},[]);const _=Z.useCallback(F=>{e(F),localStorage.setItem(f_,JSON.stringify(F))},[]),T=Z.useCallback(F=>{n(F),localStorage.setItem(HR,JSON.stringify(F))},[]),k=F=>{F.preventDefault(),d.nombre.trim()&&(_(m?t.map(Q=>Q.id===m.id?{...m,...d}:Q):[{...d,id:crypto.randomUUID()},...t]),h(u),g(null))},D=Z.useCallback(F=>{if(r.some(Q=>Q.maquinaId===F)){alert("No se puede eliminar una máquina con registros de uso. Elimine los registros primero.");return}window.confirm("¿Eliminar esta máquina?")&&_(t.filter(Q=>Q.id!==F))},[t,r,_]),M=F=>{F.preventDefault();const Q=o||a;if(!Q.curso||!Q.profesorResponsable.trim()||!Q.maquinaId||Q.totalHoras<=0){alert("Curso, Profesor, Máquina y un Total de Horas mayor a cero son obligatorios.");return}T(o?r.map(H=>H.id===o.id?o:H):[{...a,id:crypto.randomUUID()},...r]),i(s),l(null)},P=Z.useCallback(F=>{window.confirm("¿Eliminar este registro de uso?")&&T(r.filter(Q=>Q.id!==F))},[r,T]),L=Z.useMemo(()=>r.filter(F=>(b.maquinaId===""||F.maquinaId===b.maquinaId)&&(b.curso===""||F.curso===b.curso)&&(b.profesor===""||F.profesorResponsable.toLowerCase().includes(b.profesor.toLowerCase()))&&(b.fecha===""||F.fecha===b.fecha)).sort((F,Q)=>new Date(Q.fecha).getTime()-new Date(F.fecha).getTime()),[r,b]),C=Z.useMemo(()=>new Map(t.map(F=>[F.id,F])),[t]),E=()=>{const F=L.map(ne=>{var J,re;return{Fecha:ne.fecha,Curso:ne.curso,Profesor:ne.profesorResponsable,Máquina:((J=C.get(ne.maquinaId))==null?void 0:J.nombre)||"N/A",Especialidad:((re=C.get(ne.maquinaId))==null?void 0:re.especialidad)||"N/A","Total Horas":ne.totalHoras,Observaciones:ne.observaciones}}),Q=Vl.json_to_sheet(F),H=Vl.book_new();Vl.book_append_sheet(H,Q,"RegistrosPañol"),kT(H,"Registros_Pañol.xlsx")},B=()=>{const F=new lr;il(F,{head:[["Fecha","Curso","Profesor","Máquina","Especialidad","Total Horas","Observaciones"]],body:L.map(Q=>{var H,ne;return[Q.fecha,Q.curso,Q.profesorResponsable,((H=C.get(Q.maquinaId))==null?void 0:H.nombre)||"N/A",((ne=C.get(Q.maquinaId))==null?void 0:ne.especialidad)||"N/A",Q.totalHoras,Q.observaciones]}),margin:{top:20,right:10,bottom:20,left:10},didDrawPage:Q=>{F.setFontSize(10),F.setFont("helvetica","bold"),F.text("LICEO INDUSTRIAL DE RECOLETA",Q.settings.margin.left,15)}}),F.save("Registros_Pañol.pdf")},O="w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600 dark:text-white dark:placeholder-slate-400",R=()=>{const F=o||a,Q=o?l:i;return c.jsxs("form",{onSubmit:M,className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Fecha"}),c.jsx("input",{name:"fecha",type:"date",value:F.fecha,onChange:H=>Q({...F,fecha:H.target.value}),className:O,required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Curso"}),c.jsxs("select",{name:"curso",value:F.curso,onChange:H=>Q({...F,curso:H.target.value}),className:O,required:!0,children:[c.jsx("option",{value:"",children:"Curso"}),ca.map(H=>c.jsx("option",{children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Profesor"}),c.jsxs("select",{name:"profesorResponsable",value:F.profesorResponsable,onChange:H=>Q({...F,profesorResponsable:H.target.value}),className:O,required:!0,children:[c.jsx("option",{value:"",children:"Profesor Responsable"}),eS.map(H=>c.jsx("option",{value:H,children:H},H))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Máquina"}),c.jsxs("select",{name:"maquinaId",value:F.maquinaId,onChange:H=>Q({...F,maquinaId:H.target.value}),className:O,required:!0,children:[c.jsx("option",{value:"",children:"Máquina"}),t.map(H=>c.jsx("option",{value:H.id,children:H.nombre},H.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Total de Horas"}),c.jsx("input",{name:"totalHoras",type:"number",value:F.totalHoras,onChange:H=>Q({...F,totalHoras:Number(H.target.value)}),className:O,required:!0,min:"0.5",step:"0.5"})]}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("label",{className:"text-sm font-medium",children:"Observaciones"}),c.jsx("textarea",{name:"observaciones",value:F.observaciones,onChange:H=>Q({...F,observaciones:H.target.value}),placeholder:"Observaciones...",className:`${O}`,rows:1})]})]}),c.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o&&c.jsx("button",{type:"button",onClick:()=>l(null),className:"bg-slate-200 text-slate-700 font-semibold py-2 px-4 rounded-lg",children:"Cancelar"}),c.jsx("button",{type:"submit",className:"bg-slate-800 text-white font-bold py-2 px-4 rounded-lg hover:bg-slate-700",children:o?"Actualizar":"Registrar"})]})]})};return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Pañol: Registro de Uso de Máquinas"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:o?`Editando Registro #${o.id.substring(0,4)}`:"Nuevo Registro de Uso"}),R()]}),c.jsxs("div",{className:"lg:col-span-1 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Administrar Máquinas"}),c.jsxs("form",{onSubmit:k,className:"flex gap-2 mb-4",children:[c.jsx("input",{value:d.nombre,onChange:F=>h({...d,nombre:F.target.value}),placeholder:"Nombre máquina",className:O}),c.jsxs("select",{value:d.especialidad,onChange:F=>h({...d,especialidad:F.target.value}),className:O,children:[c.jsx("option",{value:"Industrial",children:"Industrial"}),c.jsx("option",{value:"Automotriz",children:"Automotriz"})]}),c.jsx("button",{type:"submit",className:"bg-slate-200 p-2 rounded-lg font-bold",children:m?"✓":"+"})]}),c.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:t.map(F=>c.jsxs("li",{className:"flex justify-between items-center bg-slate-50 dark:bg-slate-700 p-2 rounded",children:[c.jsxs("span",{children:[F.nombre," ",c.jsxs("span",{className:"text-xs text-slate-500",children:["(",F.especialidad,")"]})]}),c.jsxs("div",{className:"space-x-2",children:[c.jsx("button",{onClick:()=>{g(F),h(F)},className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>D(F.id),className:"text-red-500",children:"🗑️"})]})]},F.id))})]}),c.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Historial de Uso"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:E,className:"text-sm bg-green-100 text-green-700 font-semibold py-1 px-3 rounded-lg",children:"Excel"}),c.jsx("button",{onClick:B,className:"text-sm bg-red-100 text-red-700 font-semibold py-1 px-3 rounded-lg",children:"PDF"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-4",children:[c.jsx("input",{type:"date",value:b.fecha,onChange:F=>y({...b,fecha:F.target.value}),className:O}),c.jsxs("select",{value:b.curso,onChange:F=>y({...b,curso:F.target.value}),className:O,children:[c.jsx("option",{value:"",children:"Todos los Cursos"}),ca.map(F=>c.jsx("option",{children:F},F))]}),c.jsxs("select",{value:b.maquinaId,onChange:F=>y({...b,maquinaId:F.target.value}),className:O,children:[c.jsx("option",{value:"",children:"Todas las Máquinas"}),t.map(F=>c.jsx("option",{value:F.id,children:F.nombre},F.id))]}),c.jsx("input",{value:b.profesor,onChange:F=>y({...b,profesor:F.target.value}),placeholder:"Buscar profesor...",className:O})]}),c.jsx("div",{className:"max-h-96 overflow-y-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Fecha"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Máquina"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Profesor"}),c.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-slate-500 uppercase",children:"Total Horas"}),c.jsx("th",{className:"px-3 py-2 text-center text-xs font-medium text-slate-500 uppercase",children:"Acciones"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:L.map(F=>{var Q;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:F.fecha}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium",children:((Q=C.get(F.maquinaId))==null?void 0:Q.nombre)||"N/A"}),c.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:[F.profesorResponsable," (",F.curso,")"]}),c.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:F.totalHoras}),c.jsxs("td",{className:"px-3 py-2 text-center",children:[c.jsx("button",{onClick:()=>l(F),className:"text-blue-500",children:"✏️"}),c.jsx("button",{onClick:()=>P(F.id),className:"text-red-500 ml-2",children:"🗑️"})]})]},F.id)})})]})})]})]})]})};function lo(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let r=0,n;r<t.length;r++)(n=lo(t[r]))!==""&&(e+=(e&&" ")+n);else for(let r in t)t[r]&&(e+=(e&&" ")+r);return e}var h_={exports:{}},m_={},p_={exports:{}},g_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VR;function USe(){if(VR)return g_;VR=1;var t=Wx();function e(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:e,n=t.useState,s=t.useEffect,a=t.useLayoutEffect,i=t.useDebugValue;function o(h,m){var g=m(),b=n({inst:{value:g,getSnapshot:m}}),y=b[0].inst,_=b[1];return a(function(){y.value=g,y.getSnapshot=m,l(y)&&_({inst:y})},[h,g,m]),s(function(){return l(y)&&_({inst:y}),h(function(){l(y)&&_({inst:y})})},[h]),i(g),g}function l(h){var m=h.getSnapshot;h=h.value;try{var g=m();return!r(h,g)}catch{return!0}}function u(h,m){return m()}var d=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return g_.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:d,g_}var zR;function MSe(){return zR||(zR=1,p_.exports=USe()),p_.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GR;function PSe(){if(GR)return m_;GR=1;var t=Wx(),e=MSe();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,s=e.useSyncExternalStore,a=t.useRef,i=t.useEffect,o=t.useMemo,l=t.useDebugValue;return m_.useSyncExternalStoreWithSelector=function(u,d,h,m,g){var b=a(null);if(b.current===null){var y={hasValue:!1,value:null};b.current=y}else y=b.current;b=o(function(){function T(L){if(!k){if(k=!0,D=L,L=m(L),g!==void 0&&y.hasValue){var C=y.value;if(g(C,L))return M=C}return M=L}if(C=M,n(D,L))return C;var E=m(L);return g!==void 0&&g(C,E)?(D=L,C):(D=L,M=E)}var k=!1,D,M,P=h===void 0?null:h;return[function(){return T(d())},P===null?void 0:function(){return T(P())}]},[d,h,m,g]);var _=s(u,b[0],b[1]);return i(function(){y.hasValue=!0,y.value=_},[_]),l(_),_},m_}var qR;function jSe(){return qR||(qR=1,h_.exports=PSe()),h_.exports}var OSe=jSe();const QSe=B5(OSe),HSe={},KR=t=>{let e;const r=new Set,n=(d,h)=>{const m=typeof d=="function"?d(e):d;if(!Object.is(m,e)){const g=e;e=h??(typeof m!="object"||m===null)?m:Object.assign({},e,m),r.forEach(b=>b(e,g))}},s=()=>e,l={setState:n,getState:s,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(HSe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=e=t(n,s,l);return l},VSe=t=>t?KR(t):KR,{useDebugValue:zSe}=dt,{useSyncExternalStoreWithSelector:GSe}=QSe,qSe=t=>t;function bQ(t,e=qSe,r){const n=GSe(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return zSe(n),n}const $R=(t,e)=>{const r=VSe(t),n=(s,a=e)=>bQ(r,s,a);return Object.assign(n,r),n},KSe=(t,e)=>t?$R(t,e):$R;function Yi(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[n,s]of t)if(!Object.is(s,e.get(n)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(e,n)||!Object.is(t[n],e[n]))return!1;return!0}var $Se={value:()=>{}};function Sb(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new r2(r)}function r2(t){this._=t}function WSe(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",s=r.indexOf(".");if(s>=0&&(n=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}r2.prototype=Sb.prototype={constructor:r2,on:function(t,e){var r=this._,n=WSe(t+"",r),s,a=-1,i=n.length;if(arguments.length<2){for(;++a<i;)if((s=(t=n[a]).type)&&(s=YSe(r[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(s=(t=n[a]).type)r[s]=WR(r[s],t.name,e);else if(e==null)for(s in r)r[s]=WR(r[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new r2(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var r=new Array(s),n=0,s,a;n<s;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,s=a.length;n<s;++n)a[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],s=0,a=n.length;s<a;++s)n[s].value.apply(e,r)}};function YSe(t,e){for(var r=0,n=t.length,s;r<n;++r)if((s=t[r]).name===e)return s.value}function WR(t,e,r){for(var n=0,s=t.length;n<s;++n)if(t[n].name===e){t[n]=$Se,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var u5="http://www.w3.org/1999/xhtml";const YR={svg:"http://www.w3.org/2000/svg",xhtml:u5,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Tb(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),YR.hasOwnProperty(e)?{space:YR[e],local:t}:t}function JSe(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===u5&&e.documentElement.namespaceURI===u5?e.createElement(t):e.createElementNS(r,t)}}function XSe(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function CQ(t){var e=Tb(t);return(e.local?XSe:JSe)(e)}function ZSe(){}function KT(t){return t==null?ZSe:function(){return this.querySelector(t)}}function e5e(t){typeof t!="function"&&(t=KT(t));for(var e=this._groups,r=e.length,n=new Array(r),s=0;s<r;++s)for(var a=e[s],i=a.length,o=n[s]=new Array(i),l,u,d=0;d<i;++d)(l=a[d])&&(u=t.call(l,l.__data__,d,a))&&("__data__"in l&&(u.__data__=l.__data__),o[d]=u);return new cl(n,this._parents)}function t5e(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function r5e(){return[]}function EQ(t){return t==null?r5e:function(){return this.querySelectorAll(t)}}function n5e(t){return function(){return t5e(t.apply(this,arguments))}}function s5e(t){typeof t=="function"?t=n5e(t):t=EQ(t);for(var e=this._groups,r=e.length,n=[],s=[],a=0;a<r;++a)for(var i=e[a],o=i.length,l,u=0;u<o;++u)(l=i[u])&&(n.push(t.call(l,l.__data__,u,i)),s.push(l));return new cl(n,s)}function _Q(t){return function(){return this.matches(t)}}function SQ(t){return function(e){return e.matches(t)}}var a5e=Array.prototype.find;function i5e(t){return function(){return a5e.call(this.children,t)}}function o5e(){return this.firstElementChild}function l5e(t){return this.select(t==null?o5e:i5e(typeof t=="function"?t:SQ(t)))}var c5e=Array.prototype.filter;function u5e(){return Array.from(this.children)}function A5e(t){return function(){return c5e.call(this.children,t)}}function d5e(t){return this.selectAll(t==null?u5e:A5e(typeof t=="function"?t:SQ(t)))}function f5e(t){typeof t!="function"&&(t=_Q(t));for(var e=this._groups,r=e.length,n=new Array(r),s=0;s<r;++s)for(var a=e[s],i=a.length,o=n[s]=[],l,u=0;u<i;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new cl(n,this._parents)}function TQ(t){return new Array(t.length)}function h5e(){return new cl(this._enter||this._groups.map(TQ),this._parents)}function ow(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}ow.prototype={constructor:ow,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function m5e(t){return function(){return t}}function p5e(t,e,r,n,s,a){for(var i=0,o,l=e.length,u=a.length;i<u;++i)(o=e[i])?(o.__data__=a[i],n[i]=o):r[i]=new ow(t,a[i]);for(;i<l;++i)(o=e[i])&&(s[i]=o)}function g5e(t,e,r,n,s,a,i){var o,l,u=new Map,d=e.length,h=a.length,m=new Array(d),g;for(o=0;o<d;++o)(l=e[o])&&(m[o]=g=i.call(l,l.__data__,o,e)+"",u.has(g)?s[o]=l:u.set(g,l));for(o=0;o<h;++o)g=i.call(t,a[o],o,a)+"",(l=u.get(g))?(n[o]=l,l.__data__=a[o],u.delete(g)):r[o]=new ow(t,a[o]);for(o=0;o<d;++o)(l=e[o])&&u.get(m[o])===l&&(s[o]=l)}function x5e(t){return t.__data__}function v5e(t,e){if(!arguments.length)return Array.from(this,x5e);var r=e?g5e:p5e,n=this._parents,s=this._groups;typeof t!="function"&&(t=m5e(t));for(var a=s.length,i=new Array(a),o=new Array(a),l=new Array(a),u=0;u<a;++u){var d=n[u],h=s[u],m=h.length,g=y5e(t.call(d,d&&d.__data__,u,n)),b=g.length,y=o[u]=new Array(b),_=i[u]=new Array(b),T=l[u]=new Array(m);r(d,h,y,_,T,g,e);for(var k=0,D=0,M,P;k<b;++k)if(M=y[k]){for(k>=D&&(D=k+1);!(P=_[D])&&++D<b;);M._next=P||null}}return i=new cl(i,n),i._enter=o,i._exit=l,i}function y5e(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function w5e(){return new cl(this._exit||this._groups.map(TQ),this._parents)}function b5e(t,e,r){var n=this.enter(),s=this,a=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?a.remove():r(a),n&&s?n.merge(s).order():s}function C5e(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,s=r.length,a=n.length,i=Math.min(s,a),o=new Array(s),l=0;l<i;++l)for(var u=r[l],d=n[l],h=u.length,m=o[l]=new Array(h),g,b=0;b<h;++b)(g=u[b]||d[b])&&(m[b]=g);for(;l<s;++l)o[l]=r[l];return new cl(o,this._parents)}function E5e(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],s=n.length-1,a=n[s],i;--s>=0;)(i=n[s])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function _5e(t){t||(t=S5e);function e(h,m){return h&&m?t(h.__data__,m.__data__):!h-!m}for(var r=this._groups,n=r.length,s=new Array(n),a=0;a<n;++a){for(var i=r[a],o=i.length,l=s[a]=new Array(o),u,d=0;d<o;++d)(u=i[d])&&(l[d]=u);l.sort(e)}return new cl(s,this._parents).order()}function S5e(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function T5e(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function N5e(){return Array.from(this)}function B5e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],s=0,a=n.length;s<a;++s){var i=n[s];if(i)return i}return null}function k5e(){let t=0;for(const e of this)++t;return t}function I5e(){return!this.node()}function F5e(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var s=e[r],a=0,i=s.length,o;a<i;++a)(o=s[a])&&t.call(o,o.__data__,a,s);return this}function D5e(t){return function(){this.removeAttribute(t)}}function R5e(t){return function(){this.removeAttributeNS(t.space,t.local)}}function L5e(t,e){return function(){this.setAttribute(t,e)}}function U5e(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function M5e(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function P5e(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function j5e(t,e){var r=Tb(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?R5e:D5e:typeof e=="function"?r.local?P5e:M5e:r.local?U5e:L5e)(r,e))}function NQ(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function O5e(t){return function(){this.style.removeProperty(t)}}function Q5e(t,e,r){return function(){this.style.setProperty(t,e,r)}}function H5e(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function V5e(t,e,r){return arguments.length>1?this.each((e==null?O5e:typeof e=="function"?H5e:Q5e)(t,e,r??"")):$m(this.node(),t)}function $m(t,e){return t.style.getPropertyValue(e)||NQ(t).getComputedStyle(t,null).getPropertyValue(e)}function z5e(t){return function(){delete this[t]}}function G5e(t,e){return function(){this[t]=e}}function q5e(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function K5e(t,e){return arguments.length>1?this.each((e==null?z5e:typeof e=="function"?q5e:G5e)(t,e)):this.node()[t]}function BQ(t){return t.trim().split(/^|\s+/)}function $T(t){return t.classList||new kQ(t)}function kQ(t){this._node=t,this._names=BQ(t.getAttribute("class")||"")}kQ.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function IQ(t,e){for(var r=$T(t),n=-1,s=e.length;++n<s;)r.add(e[n])}function FQ(t,e){for(var r=$T(t),n=-1,s=e.length;++n<s;)r.remove(e[n])}function $5e(t){return function(){IQ(this,t)}}function W5e(t){return function(){FQ(this,t)}}function Y5e(t,e){return function(){(e.apply(this,arguments)?IQ:FQ)(this,t)}}function J5e(t,e){var r=BQ(t+"");if(arguments.length<2){for(var n=$T(this.node()),s=-1,a=r.length;++s<a;)if(!n.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?Y5e:e?$5e:W5e)(r,e))}function X5e(){this.textContent=""}function Z5e(t){return function(){this.textContent=t}}function e4e(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function t4e(t){return arguments.length?this.each(t==null?X5e:(typeof t=="function"?e4e:Z5e)(t)):this.node().textContent}function r4e(){this.innerHTML=""}function n4e(t){return function(){this.innerHTML=t}}function s4e(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function a4e(t){return arguments.length?this.each(t==null?r4e:(typeof t=="function"?s4e:n4e)(t)):this.node().innerHTML}function i4e(){this.nextSibling&&this.parentNode.appendChild(this)}function o4e(){return this.each(i4e)}function l4e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function c4e(){return this.each(l4e)}function u4e(t){var e=typeof t=="function"?t:CQ(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function A4e(){return null}function d4e(t,e){var r=typeof t=="function"?t:CQ(t),n=e==null?A4e:typeof e=="function"?e:KT(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function f4e(){var t=this.parentNode;t&&t.removeChild(this)}function h4e(){return this.each(f4e)}function m4e(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function p4e(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function g4e(t){return this.select(t?p4e:m4e)}function x4e(t){return arguments.length?this.property("__data__",t):this.node().__data__}function v4e(t){return function(e){t.call(this,e,this.__data__)}}function y4e(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function w4e(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,s=e.length,a;r<s;++r)a=e[r],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++n]=a;++n?e.length=n:delete this.__on}}}function b4e(t,e,r){return function(){var n=this.__on,s,a=v4e(e);if(n){for(var i=0,o=n.length;i<o;++i)if((s=n[i]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=r),s.value=e;return}}this.addEventListener(t.type,a,r),s={type:t.type,name:t.name,value:e,listener:a,options:r},n?n.push(s):this.__on=[s]}}function C4e(t,e,r){var n=y4e(t+""),s,a=n.length,i;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,d;l<u;++l)for(s=0,d=o[l];s<a;++s)if((i=n[s]).type===d.type&&i.name===d.name)return d.value}return}for(o=e?b4e:w4e,s=0;s<a;++s)this.each(o(n[s],e,r));return this}function DQ(t,e,r){var n=NQ(t),s=n.CustomEvent;typeof s=="function"?s=new s(e,r):(s=n.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function E4e(t,e){return function(){return DQ(this,t,e)}}function _4e(t,e){return function(){return DQ(this,t,e.apply(this,arguments))}}function S4e(t,e){return this.each((typeof e=="function"?_4e:E4e)(t,e))}function*T4e(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],s=0,a=n.length,i;s<a;++s)(i=n[s])&&(yield i)}var RQ=[null];function cl(t,e){this._groups=t,this._parents=e}function N1(){return new cl([[document.documentElement]],RQ)}function N4e(){return this}cl.prototype=N1.prototype={constructor:cl,select:e5e,selectAll:s5e,selectChild:l5e,selectChildren:d5e,filter:f5e,data:v5e,enter:h5e,exit:w5e,join:b5e,merge:C5e,selection:N4e,order:E5e,sort:_5e,call:T5e,nodes:N5e,node:B5e,size:k5e,empty:I5e,each:F5e,attr:j5e,style:V5e,property:K5e,classed:J5e,text:t4e,html:a4e,raise:o4e,lower:c4e,append:u4e,insert:d4e,remove:h4e,clone:g4e,datum:x4e,on:C4e,dispatch:S4e,[Symbol.iterator]:T4e};function Sc(t){return typeof t=="string"?new cl([[document.querySelector(t)]],[document.documentElement]):new cl([[t]],RQ)}function B4e(t){let e;for(;e=t.sourceEvent;)t=e;return t}function Cu(t,e){if(t=B4e(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const k4e={passive:!1},Hx={capture:!0,passive:!1};function x_(t){t.stopImmediatePropagation()}function km(t){t.preventDefault(),t.stopImmediatePropagation()}function LQ(t){var e=t.document.documentElement,r=Sc(t).on("dragstart.drag",km,Hx);"onselectstart"in e?r.on("selectstart.drag",km,Hx):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function UQ(t,e){var r=t.document.documentElement,n=Sc(t).on("dragstart.drag",null);e&&(n.on("click.drag",km,Hx),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Ey=t=>()=>t;function A5(t,{sourceEvent:e,subject:r,target:n,identifier:s,active:a,x:i,y:o,dx:l,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}A5.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function I4e(t){return!t.ctrlKey&&!t.button}function F4e(){return this.parentNode}function D4e(t,e){return e??{x:t.x,y:t.y}}function R4e(){return navigator.maxTouchPoints||"ontouchstart"in this}function L4e(){var t=I4e,e=F4e,r=D4e,n=R4e,s={},a=Sb("start","drag","end"),i=0,o,l,u,d,h=0;function m(M){M.on("mousedown.drag",g).filter(n).on("touchstart.drag",_).on("touchmove.drag",T,k4e).on("touchend.drag touchcancel.drag",k).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(M,P){if(!(d||!t.call(this,M,P))){var L=D(this,e.call(this,M,P),M,P,"mouse");L&&(Sc(M.view).on("mousemove.drag",b,Hx).on("mouseup.drag",y,Hx),LQ(M.view),x_(M),u=!1,o=M.clientX,l=M.clientY,L("start",M))}}function b(M){if(km(M),!u){var P=M.clientX-o,L=M.clientY-l;u=P*P+L*L>h}s.mouse("drag",M)}function y(M){Sc(M.view).on("mousemove.drag mouseup.drag",null),UQ(M.view,u),km(M),s.mouse("end",M)}function _(M,P){if(t.call(this,M,P)){var L=M.changedTouches,C=e.call(this,M,P),E=L.length,B,O;for(B=0;B<E;++B)(O=D(this,C,M,P,L[B].identifier,L[B]))&&(x_(M),O("start",M,L[B]))}}function T(M){var P=M.changedTouches,L=P.length,C,E;for(C=0;C<L;++C)(E=s[P[C].identifier])&&(km(M),E("drag",M,P[C]))}function k(M){var P=M.changedTouches,L=P.length,C,E;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),C=0;C<L;++C)(E=s[P[C].identifier])&&(x_(M),E("end",M,P[C]))}function D(M,P,L,C,E,B){var O=a.copy(),R=Cu(B||L,P),F,Q,H;if((H=r.call(M,new A5("beforestart",{sourceEvent:L,target:m,identifier:E,active:i,x:R[0],y:R[1],dx:0,dy:0,dispatch:O}),C))!=null)return F=H.x-R[0]||0,Q=H.y-R[1]||0,function ne(J,re,G){var q=R,W;switch(J){case"start":s[E]=ne,W=i++;break;case"end":delete s[E],--i;case"drag":R=Cu(G||re,P),W=i;break}O.call(J,M,new A5(J,{sourceEvent:re,subject:H,target:m,identifier:E,active:W,x:R[0]+F,y:R[1]+Q,dx:R[0]-q[0],dy:R[1]-q[1],dispatch:O}),C)}}return m.filter=function(M){return arguments.length?(t=typeof M=="function"?M:Ey(!!M),m):t},m.container=function(M){return arguments.length?(e=typeof M=="function"?M:Ey(M),m):e},m.subject=function(M){return arguments.length?(r=typeof M=="function"?M:Ey(M),m):r},m.touchable=function(M){return arguments.length?(n=typeof M=="function"?M:Ey(!!M),m):n},m.on=function(){var M=a.on.apply(a,arguments);return M===a?m:M},m.clickDistance=function(M){return arguments.length?(h=(M=+M)*M,m):Math.sqrt(h)},m}function WT(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function MQ(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function B1(){}var Vx=.7,lw=1/Vx,Im="\\s*([+-]?\\d+)\\s*",zx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ru="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",U4e=/^#([0-9a-f]{3,8})$/,M4e=new RegExp(`^rgb\\(${Im},${Im},${Im}\\)$`),P4e=new RegExp(`^rgb\\(${Ru},${Ru},${Ru}\\)$`),j4e=new RegExp(`^rgba\\(${Im},${Im},${Im},${zx}\\)$`),O4e=new RegExp(`^rgba\\(${Ru},${Ru},${Ru},${zx}\\)$`),Q4e=new RegExp(`^hsl\\(${zx},${Ru},${Ru}\\)$`),H4e=new RegExp(`^hsla\\(${zx},${Ru},${Ru},${zx}\\)$`),JR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};WT(B1,Gx,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:XR,formatHex:XR,formatHex8:V4e,formatHsl:z4e,formatRgb:ZR,toString:ZR});function XR(){return this.rgb().formatHex()}function V4e(){return this.rgb().formatHex8()}function z4e(){return PQ(this).formatHsl()}function ZR(){return this.rgb().formatRgb()}function Gx(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=U4e.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?eL(e):r===3?new ko(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?_y(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?_y(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=M4e.exec(t))?new ko(e[1],e[2],e[3],1):(e=P4e.exec(t))?new ko(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=j4e.exec(t))?_y(e[1],e[2],e[3],e[4]):(e=O4e.exec(t))?_y(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Q4e.exec(t))?nL(e[1],e[2]/100,e[3]/100,1):(e=H4e.exec(t))?nL(e[1],e[2]/100,e[3]/100,e[4]):JR.hasOwnProperty(t)?eL(JR[t]):t==="transparent"?new ko(NaN,NaN,NaN,0):null}function eL(t){return new ko(t>>16&255,t>>8&255,t&255,1)}function _y(t,e,r,n){return n<=0&&(t=e=r=NaN),new ko(t,e,r,n)}function G4e(t){return t instanceof B1||(t=Gx(t)),t?(t=t.rgb(),new ko(t.r,t.g,t.b,t.opacity)):new ko}function d5(t,e,r,n){return arguments.length===1?G4e(t):new ko(t,e,r,n??1)}function ko(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}WT(ko,d5,MQ(B1,{brighter(t){return t=t==null?lw:Math.pow(lw,t),new ko(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Vx:Math.pow(Vx,t),new ko(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ko(Th(this.r),Th(this.g),Th(this.b),cw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tL,formatHex:tL,formatHex8:q4e,formatRgb:rL,toString:rL}));function tL(){return`#${mh(this.r)}${mh(this.g)}${mh(this.b)}`}function q4e(){return`#${mh(this.r)}${mh(this.g)}${mh(this.b)}${mh((isNaN(this.opacity)?1:this.opacity)*255)}`}function rL(){const t=cw(this.opacity);return`${t===1?"rgb(":"rgba("}${Th(this.r)}, ${Th(this.g)}, ${Th(this.b)}${t===1?")":`, ${t})`}`}function cw(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Th(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function mh(t){return t=Th(t),(t<16?"0":"")+t.toString(16)}function nL(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Tc(t,e,r,n)}function PQ(t){if(t instanceof Tc)return new Tc(t.h,t.s,t.l,t.opacity);if(t instanceof B1||(t=Gx(t)),!t)return new Tc;if(t instanceof Tc)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,s=Math.min(e,r,n),a=Math.max(e,r,n),i=NaN,o=a-s,l=(a+s)/2;return o?(e===a?i=(r-n)/o+(r<n)*6:r===a?i=(n-e)/o+2:i=(e-r)/o+4,o/=l<.5?a+s:2-a-s,i*=60):o=l>0&&l<1?0:i,new Tc(i,o,l,t.opacity)}function K4e(t,e,r,n){return arguments.length===1?PQ(t):new Tc(t,e,r,n??1)}function Tc(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}WT(Tc,K4e,MQ(B1,{brighter(t){return t=t==null?lw:Math.pow(lw,t),new Tc(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Vx:Math.pow(Vx,t),new Tc(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,s=2*r-n;return new ko(v_(t>=240?t-240:t+120,s,n),v_(t,s,n),v_(t<120?t+240:t-120,s,n),this.opacity)},clamp(){return new Tc(sL(this.h),Sy(this.s),Sy(this.l),cw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=cw(this.opacity);return`${t===1?"hsl(":"hsla("}${sL(this.h)}, ${Sy(this.s)*100}%, ${Sy(this.l)*100}%${t===1?")":`, ${t})`}`}}));function sL(t){return t=(t||0)%360,t<0?t+360:t}function Sy(t){return Math.max(0,Math.min(1,t||0))}function v_(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const jQ=t=>()=>t;function $4e(t,e){return function(r){return t+r*e}}function W4e(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function Y4e(t){return(t=+t)==1?OQ:function(e,r){return r-e?W4e(e,r,t):jQ(isNaN(e)?r:e)}}function OQ(t,e){var r=e-t;return r?$4e(t,r):jQ(isNaN(t)?e:t)}const aL=function t(e){var r=Y4e(e);function n(s,a){var i=r((s=d5(s)).r,(a=d5(a)).r),o=r(s.g,a.g),l=r(s.b,a.b),u=OQ(s.opacity,a.opacity);return function(d){return s.r=i(d),s.g=o(d),s.b=l(d),s.opacity=u(d),s+""}}return n.gamma=t,n}(1);function Od(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var f5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,y_=new RegExp(f5.source,"g");function J4e(t){return function(){return t}}function X4e(t){return function(e){return t(e)+""}}function Z4e(t,e){var r=f5.lastIndex=y_.lastIndex=0,n,s,a,i=-1,o=[],l=[];for(t=t+"",e=e+"";(n=f5.exec(t))&&(s=y_.exec(e));)(a=s.index)>r&&(a=e.slice(r,a),o[i]?o[i]+=a:o[++i]=a),(n=n[0])===(s=s[0])?o[i]?o[i]+=s:o[++i]=s:(o[++i]=null,l.push({i,x:Od(n,s)})),r=y_.lastIndex;return r<e.length&&(a=e.slice(r),o[i]?o[i]+=a:o[++i]=a),o.length<2?l[0]?X4e(l[0].x):J4e(e):(e=l.length,function(u){for(var d=0,h;d<e;++d)o[(h=l[d]).i]=h.x(u);return o.join("")})}var iL=180/Math.PI,h5={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function QQ(t,e,r,n,s,a){var i,o,l;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(l=t*r+e*n)&&(r-=t*l,n-=e*l),(o=Math.sqrt(r*r+n*n))&&(r/=o,n/=o,l/=o),t*n<e*r&&(t=-t,e=-e,l=-l,i=-i),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*iL,skewX:Math.atan(l)*iL,scaleX:i,scaleY:o}}var Ty;function eTe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?h5:QQ(e.a,e.b,e.c,e.d,e.e,e.f)}function tTe(t){return t==null||(Ty||(Ty=document.createElementNS("http://www.w3.org/2000/svg","g")),Ty.setAttribute("transform",t),!(t=Ty.transform.baseVal.consolidate()))?h5:(t=t.matrix,QQ(t.a,t.b,t.c,t.d,t.e,t.f))}function HQ(t,e,r,n){function s(u){return u.length?u.pop()+" ":""}function a(u,d,h,m,g,b){if(u!==h||d!==m){var y=g.push("translate(",null,e,null,r);b.push({i:y-4,x:Od(u,h)},{i:y-2,x:Od(d,m)})}else(h||m)&&g.push("translate("+h+e+m+r)}function i(u,d,h,m){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),m.push({i:h.push(s(h)+"rotate(",null,n)-2,x:Od(u,d)})):d&&h.push(s(h)+"rotate("+d+n)}function o(u,d,h,m){u!==d?m.push({i:h.push(s(h)+"skewX(",null,n)-2,x:Od(u,d)}):d&&h.push(s(h)+"skewX("+d+n)}function l(u,d,h,m,g,b){if(u!==h||d!==m){var y=g.push(s(g)+"scale(",null,",",null,")");b.push({i:y-4,x:Od(u,h)},{i:y-2,x:Od(d,m)})}else(h!==1||m!==1)&&g.push(s(g)+"scale("+h+","+m+")")}return function(u,d){var h=[],m=[];return u=t(u),d=t(d),a(u.translateX,u.translateY,d.translateX,d.translateY,h,m),i(u.rotate,d.rotate,h,m),o(u.skewX,d.skewX,h,m),l(u.scaleX,u.scaleY,d.scaleX,d.scaleY,h,m),u=d=null,function(g){for(var b=-1,y=m.length,_;++b<y;)h[(_=m[b]).i]=_.x(g);return h.join("")}}}var rTe=HQ(eTe,"px, ","px)","deg)"),nTe=HQ(tTe,", ",")",")"),sTe=1e-12;function oL(t){return((t=Math.exp(t))+1/t)/2}function aTe(t){return((t=Math.exp(t))-1/t)/2}function iTe(t){return((t=Math.exp(2*t))-1)/(t+1)}const oTe=function t(e,r,n){function s(a,i){var o=a[0],l=a[1],u=a[2],d=i[0],h=i[1],m=i[2],g=d-o,b=h-l,y=g*g+b*b,_,T;if(y<sTe)T=Math.log(m/u)/e,_=function(C){return[o+C*g,l+C*b,u*Math.exp(e*C*T)]};else{var k=Math.sqrt(y),D=(m*m-u*u+n*y)/(2*u*r*k),M=(m*m-u*u-n*y)/(2*m*r*k),P=Math.log(Math.sqrt(D*D+1)-D),L=Math.log(Math.sqrt(M*M+1)-M);T=(L-P)/e,_=function(C){var E=C*T,B=oL(P),O=u/(r*k)*(B*iTe(e*E+P)-aTe(P));return[o+O*g,l+O*b,u*B/oL(e*E+P)]}}return _.duration=T*1e3*e/Math.SQRT2,_}return s.rho=function(a){var i=Math.max(.001,+a),o=i*i,l=o*o;return t(i,o,l)},s}(Math.SQRT2,2,4);var Wm=0,Lg=0,dg=0,VQ=1e3,uw,Ug,Aw=0,Oh=0,Nb=0,qx=typeof performance=="object"&&performance.now?performance:Date,zQ=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function YT(){return Oh||(zQ(lTe),Oh=qx.now()+Nb)}function lTe(){Oh=0}function dw(){this._call=this._time=this._next=null}dw.prototype=GQ.prototype={constructor:dw,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?YT():+r)+(e==null?0:+e),!this._next&&Ug!==this&&(Ug?Ug._next=this:uw=this,Ug=this),this._call=t,this._time=r,m5()},stop:function(){this._call&&(this._call=null,this._time=1/0,m5())}};function GQ(t,e,r){var n=new dw;return n.restart(t,e,r),n}function cTe(){YT(),++Wm;for(var t=uw,e;t;)(e=Oh-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Wm}function lL(){Oh=(Aw=qx.now())+Nb,Wm=Lg=0;try{cTe()}finally{Wm=0,ATe(),Oh=0}}function uTe(){var t=qx.now(),e=t-Aw;e>VQ&&(Nb-=e,Aw=t)}function ATe(){for(var t,e=uw,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:uw=r);Ug=t,m5(n)}function m5(t){if(!Wm){Lg&&(Lg=clearTimeout(Lg));var e=t-Oh;e>24?(t<1/0&&(Lg=setTimeout(lL,t-qx.now()-Nb)),dg&&(dg=clearInterval(dg))):(dg||(Aw=qx.now(),dg=setInterval(uTe,VQ)),Wm=1,zQ(lL))}}function cL(t,e,r){var n=new dw;return e=e==null?0:+e,n.restart(s=>{n.stop(),t(s+e)},e,r),n}var dTe=Sb("start","end","cancel","interrupt"),fTe=[],qQ=0,uL=1,p5=2,n2=3,AL=4,g5=5,s2=6;function Bb(t,e,r,n,s,a){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;hTe(t,r,{name:e,index:n,group:s,on:dTe,tween:fTe,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:qQ})}function JT(t,e){var r=jc(t,e);if(r.state>qQ)throw new Error("too late; already scheduled");return r}function Vu(t,e){var r=jc(t,e);if(r.state>n2)throw new Error("too late; already running");return r}function jc(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function hTe(t,e,r){var n=t.__transition,s;n[e]=r,r.timer=GQ(a,0,r.time);function a(u){r.state=uL,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var d,h,m,g;if(r.state!==uL)return l();for(d in n)if(g=n[d],g.name===r.name){if(g.state===n2)return cL(i);g.state===AL?(g.state=s2,g.timer.stop(),g.on.call("interrupt",t,t.__data__,g.index,g.group),delete n[d]):+d<e&&(g.state=s2,g.timer.stop(),g.on.call("cancel",t,t.__data__,g.index,g.group),delete n[d])}if(cL(function(){r.state===n2&&(r.state=AL,r.timer.restart(o,r.delay,r.time),o(u))}),r.state=p5,r.on.call("start",t,t.__data__,r.index,r.group),r.state===p5){for(r.state=n2,s=new Array(m=r.tween.length),d=0,h=-1;d<m;++d)(g=r.tween[d].value.call(t,t.__data__,r.index,r.group))&&(s[++h]=g);s.length=h+1}}function o(u){for(var d=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(l),r.state=g5,1),h=-1,m=s.length;++h<m;)s[h].call(t,d);r.state===g5&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=s2,r.timer.stop(),delete n[e];for(var u in n)return;delete t.__transition}}function a2(t,e){var r=t.__transition,n,s,a=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){a=!1;continue}s=n.state>p5&&n.state<g5,n.state=s2,n.timer.stop(),n.on.call(s?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}a&&delete t.__transition}}function mTe(t){return this.each(function(){a2(this,t)})}function pTe(t,e){var r,n;return function(){var s=Vu(this,t),a=s.tween;if(a!==r){n=r=a;for(var i=0,o=n.length;i<o;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}s.tween=n}}function gTe(t,e,r){var n,s;if(typeof r!="function")throw new Error;return function(){var a=Vu(this,t),i=a.tween;if(i!==n){s=(n=i).slice();for(var o={name:e,value:r},l=0,u=s.length;l<u;++l)if(s[l].name===e){s[l]=o;break}l===u&&s.push(o)}a.tween=s}}function xTe(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=jc(this.node(),r).tween,s=0,a=n.length,i;s<a;++s)if((i=n[s]).name===t)return i.value;return null}return this.each((e==null?pTe:gTe)(r,t,e))}function XT(t,e,r){var n=t._id;return t.each(function(){var s=Vu(this,n);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return jc(s,n).value[e]}}function KQ(t,e){var r;return(typeof e=="number"?Od:e instanceof Gx?aL:(r=Gx(e))?(e=r,aL):Z4e)(t,e)}function vTe(t){return function(){this.removeAttribute(t)}}function yTe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function wTe(t,e,r){var n,s=r+"",a;return function(){var i=this.getAttribute(t);return i===s?null:i===n?a:a=e(n=i,r)}}function bTe(t,e,r){var n,s=r+"",a;return function(){var i=this.getAttributeNS(t.space,t.local);return i===s?null:i===n?a:a=e(n=i,r)}}function CTe(t,e,r){var n,s,a;return function(){var i,o=r(this),l;return o==null?void this.removeAttribute(t):(i=this.getAttribute(t),l=o+"",i===l?null:i===n&&l===s?a:(s=l,a=e(n=i,o)))}}function ETe(t,e,r){var n,s,a;return function(){var i,o=r(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),l=o+"",i===l?null:i===n&&l===s?a:(s=l,a=e(n=i,o)))}}function _Te(t,e){var r=Tb(t),n=r==="transform"?nTe:KQ;return this.attrTween(t,typeof e=="function"?(r.local?ETe:CTe)(r,n,XT(this,"attr."+t,e)):e==null?(r.local?yTe:vTe)(r):(r.local?bTe:wTe)(r,n,e))}function STe(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function TTe(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function NTe(t,e){var r,n;function s(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&TTe(t,a)),r}return s._value=e,s}function BTe(t,e){var r,n;function s(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&STe(t,a)),r}return s._value=e,s}function kTe(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Tb(t);return this.tween(r,(n.local?NTe:BTe)(n,e))}function ITe(t,e){return function(){JT(this,t).delay=+e.apply(this,arguments)}}function FTe(t,e){return e=+e,function(){JT(this,t).delay=e}}function DTe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?ITe:FTe)(e,t)):jc(this.node(),e).delay}function RTe(t,e){return function(){Vu(this,t).duration=+e.apply(this,arguments)}}function LTe(t,e){return e=+e,function(){Vu(this,t).duration=e}}function UTe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?RTe:LTe)(e,t)):jc(this.node(),e).duration}function MTe(t,e){if(typeof e!="function")throw new Error;return function(){Vu(this,t).ease=e}}function PTe(t){var e=this._id;return arguments.length?this.each(MTe(e,t)):jc(this.node(),e).ease}function jTe(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Vu(this,t).ease=r}}function OTe(t){if(typeof t!="function")throw new Error;return this.each(jTe(this._id,t))}function QTe(t){typeof t!="function"&&(t=_Q(t));for(var e=this._groups,r=e.length,n=new Array(r),s=0;s<r;++s)for(var a=e[s],i=a.length,o=n[s]=[],l,u=0;u<i;++u)(l=a[u])&&t.call(l,l.__data__,u,a)&&o.push(l);return new QA(n,this._parents,this._name,this._id)}function HTe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,s=r.length,a=Math.min(n,s),i=new Array(n),o=0;o<a;++o)for(var l=e[o],u=r[o],d=l.length,h=i[o]=new Array(d),m,g=0;g<d;++g)(m=l[g]||u[g])&&(h[g]=m);for(;o<n;++o)i[o]=e[o];return new QA(i,this._parents,this._name,this._id)}function VTe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function zTe(t,e,r){var n,s,a=VTe(e)?JT:Vu;return function(){var i=a(this,t),o=i.on;o!==n&&(s=(n=o).copy()).on(e,r),i.on=s}}function GTe(t,e){var r=this._id;return arguments.length<2?jc(this.node(),r).on.on(t):this.each(zTe(r,t,e))}function qTe(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function KTe(){return this.on("end.remove",qTe(this._id))}function $Te(t){var e=this._name,r=this._id;typeof t!="function"&&(t=KT(t));for(var n=this._groups,s=n.length,a=new Array(s),i=0;i<s;++i)for(var o=n[i],l=o.length,u=a[i]=new Array(l),d,h,m=0;m<l;++m)(d=o[m])&&(h=t.call(d,d.__data__,m,o))&&("__data__"in d&&(h.__data__=d.__data__),u[m]=h,Bb(u[m],e,r,m,u,jc(d,r)));return new QA(a,this._parents,e,r)}function WTe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=EQ(t));for(var n=this._groups,s=n.length,a=[],i=[],o=0;o<s;++o)for(var l=n[o],u=l.length,d,h=0;h<u;++h)if(d=l[h]){for(var m=t.call(d,d.__data__,h,l),g,b=jc(d,r),y=0,_=m.length;y<_;++y)(g=m[y])&&Bb(g,e,r,y,m,b);a.push(m),i.push(d)}return new QA(a,i,e,r)}var YTe=N1.prototype.constructor;function JTe(){return new YTe(this._groups,this._parents)}function XTe(t,e){var r,n,s;return function(){var a=$m(this,t),i=(this.style.removeProperty(t),$m(this,t));return a===i?null:a===r&&i===n?s:s=e(r=a,n=i)}}function $Q(t){return function(){this.style.removeProperty(t)}}function ZTe(t,e,r){var n,s=r+"",a;return function(){var i=$m(this,t);return i===s?null:i===n?a:a=e(n=i,r)}}function eNe(t,e,r){var n,s,a;return function(){var i=$m(this,t),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),$m(this,t))),i===l?null:i===n&&l===s?a:(s=l,a=e(n=i,o))}}function tNe(t,e){var r,n,s,a="style."+e,i="end."+a,o;return function(){var l=Vu(this,t),u=l.on,d=l.value[a]==null?o||(o=$Q(e)):void 0;(u!==r||s!==d)&&(n=(r=u).copy()).on(i,s=d),l.on=n}}function rNe(t,e,r){var n=(t+="")=="transform"?rTe:KQ;return e==null?this.styleTween(t,XTe(t,n)).on("end.style."+t,$Q(t)):typeof e=="function"?this.styleTween(t,eNe(t,n,XT(this,"style."+t,e))).each(tNe(this._id,t)):this.styleTween(t,ZTe(t,n,e),r).on("end.style."+t,null)}function nNe(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function sNe(t,e,r){var n,s;function a(){var i=e.apply(this,arguments);return i!==s&&(n=(s=i)&&nNe(t,i,r)),n}return a._value=e,a}function aNe(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,sNe(t,e,r??""))}function iNe(t){return function(){this.textContent=t}}function oNe(t){return function(){var e=t(this);this.textContent=e??""}}function lNe(t){return this.tween("text",typeof t=="function"?oNe(XT(this,"text",t)):iNe(t==null?"":t+""))}function cNe(t){return function(e){this.textContent=t.call(this,e)}}function uNe(t){var e,r;function n(){var s=t.apply(this,arguments);return s!==r&&(e=(r=s)&&cNe(s)),e}return n._value=t,n}function ANe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,uNe(t))}function dNe(){for(var t=this._name,e=this._id,r=WQ(),n=this._groups,s=n.length,a=0;a<s;++a)for(var i=n[a],o=i.length,l,u=0;u<o;++u)if(l=i[u]){var d=jc(l,e);Bb(l,t,r,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new QA(n,this._parents,t,r)}function fNe(){var t,e,r=this,n=r._id,s=r.size();return new Promise(function(a,i){var o={value:i},l={value:function(){--s===0&&a()}};r.each(function(){var u=Vu(this,n),d=u.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),s===0&&a()})}var hNe=0;function QA(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function WQ(){return++hNe}var bA=N1.prototype;QA.prototype={constructor:QA,select:$Te,selectAll:WTe,selectChild:bA.selectChild,selectChildren:bA.selectChildren,filter:QTe,merge:HTe,selection:JTe,transition:dNe,call:bA.call,nodes:bA.nodes,node:bA.node,size:bA.size,empty:bA.empty,each:bA.each,on:GTe,attr:_Te,attrTween:kTe,style:rNe,styleTween:aNe,text:lNe,textTween:ANe,remove:KTe,tween:xTe,delay:DTe,duration:UTe,ease:PTe,easeVarying:OTe,end:fNe,[Symbol.iterator]:bA[Symbol.iterator]};function mNe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var pNe={time:null,delay:0,duration:250,ease:mNe};function gNe(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function xNe(t){var e,r;t instanceof QA?(e=t._id,t=t._name):(e=WQ(),(r=pNe).time=YT(),t=t==null?null:t+"");for(var n=this._groups,s=n.length,a=0;a<s;++a)for(var i=n[a],o=i.length,l,u=0;u<o;++u)(l=i[u])&&Bb(l,t,e,u,i,r||gNe(l,e));return new QA(n,this._parents,t,e)}N1.prototype.interrupt=mTe;N1.prototype.transition=xNe;const Ny=t=>()=>t;function vNe(t,{sourceEvent:e,target:r,transform:n,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:s}})}function TA(t,e,r){this.k=t,this.x=e,this.y=r}TA.prototype={constructor:TA,scale:function(t){return t===1?this:new TA(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new TA(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var uf=new TA(1,0,0);TA.prototype;function w_(t){t.stopImmediatePropagation()}function fg(t){t.preventDefault(),t.stopImmediatePropagation()}function yNe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function wNe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function dL(){return this.__zoom||uf}function bNe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function CNe(){return navigator.maxTouchPoints||"ontouchstart"in this}function ENe(t,e,r){var n=t.invertX(e[0][0])-r[0][0],s=t.invertX(e[1][0])-r[1][0],a=t.invertY(e[0][1])-r[0][1],i=t.invertY(e[1][1])-r[1][1];return t.translate(s>n?(n+s)/2:Math.min(0,n)||Math.max(0,s),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function _Ne(){var t=yNe,e=wNe,r=ENe,n=bNe,s=CNe,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],o=250,l=oTe,u=Sb("start","zoom","end"),d,h,m,g=500,b=150,y=0,_=10;function T(H){H.property("__zoom",dL).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",O).filter(s).on("touchstart.zoom",R).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(H,ne,J,re){var G=H.selection?H.selection():H;G.property("__zoom",dL),H!==G?P(H,ne,J,re):G.interrupt().each(function(){L(this,arguments).event(re).start().zoom(null,typeof ne=="function"?ne.apply(this,arguments):ne).end()})},T.scaleBy=function(H,ne,J,re){T.scaleTo(H,function(){var G=this.__zoom.k,q=typeof ne=="function"?ne.apply(this,arguments):ne;return G*q},J,re)},T.scaleTo=function(H,ne,J,re){T.transform(H,function(){var G=e.apply(this,arguments),q=this.__zoom,W=J==null?M(G):typeof J=="function"?J.apply(this,arguments):J,ie=q.invert(W),j=typeof ne=="function"?ne.apply(this,arguments):ne;return r(D(k(q,j),W,ie),G,i)},J,re)},T.translateBy=function(H,ne,J,re){T.transform(H,function(){return r(this.__zoom.translate(typeof ne=="function"?ne.apply(this,arguments):ne,typeof J=="function"?J.apply(this,arguments):J),e.apply(this,arguments),i)},null,re)},T.translateTo=function(H,ne,J,re,G){T.transform(H,function(){var q=e.apply(this,arguments),W=this.__zoom,ie=re==null?M(q):typeof re=="function"?re.apply(this,arguments):re;return r(uf.translate(ie[0],ie[1]).scale(W.k).translate(typeof ne=="function"?-ne.apply(this,arguments):-ne,typeof J=="function"?-J.apply(this,arguments):-J),q,i)},re,G)};function k(H,ne){return ne=Math.max(a[0],Math.min(a[1],ne)),ne===H.k?H:new TA(ne,H.x,H.y)}function D(H,ne,J){var re=ne[0]-J[0]*H.k,G=ne[1]-J[1]*H.k;return re===H.x&&G===H.y?H:new TA(H.k,re,G)}function M(H){return[(+H[0][0]+ +H[1][0])/2,(+H[0][1]+ +H[1][1])/2]}function P(H,ne,J,re){H.on("start.zoom",function(){L(this,arguments).event(re).start()}).on("interrupt.zoom end.zoom",function(){L(this,arguments).event(re).end()}).tween("zoom",function(){var G=this,q=arguments,W=L(G,q).event(re),ie=e.apply(G,q),j=J==null?M(ie):typeof J=="function"?J.apply(G,q):J,Y=Math.max(ie[1][0]-ie[0][0],ie[1][1]-ie[0][1]),ee=G.__zoom,te=typeof ne=="function"?ne.apply(G,q):ne,ce=l(ee.invert(j).concat(Y/ee.k),te.invert(j).concat(Y/te.k));return function(be){if(be===1)be=te;else{var he=ce(be),fe=Y/he[2];be=new TA(fe,j[0]-he[0]*fe,j[1]-he[1]*fe)}W.zoom(null,be)}})}function L(H,ne,J){return!J&&H.__zooming||new C(H,ne)}function C(H,ne){this.that=H,this.args=ne,this.active=0,this.sourceEvent=null,this.extent=e.apply(H,ne),this.taps=0}C.prototype={event:function(H){return H&&(this.sourceEvent=H),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(H,ne){return this.mouse&&H!=="mouse"&&(this.mouse[1]=ne.invert(this.mouse[0])),this.touch0&&H!=="touch"&&(this.touch0[1]=ne.invert(this.touch0[0])),this.touch1&&H!=="touch"&&(this.touch1[1]=ne.invert(this.touch1[0])),this.that.__zoom=ne,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(H){var ne=Sc(this.that).datum();u.call(H,this.that,new vNe(H,{sourceEvent:this.sourceEvent,target:T,transform:this.that.__zoom,dispatch:u}),ne)}};function E(H,...ne){if(!t.apply(this,arguments))return;var J=L(this,ne).event(H),re=this.__zoom,G=Math.max(a[0],Math.min(a[1],re.k*Math.pow(2,n.apply(this,arguments)))),q=Cu(H);if(J.wheel)(J.mouse[0][0]!==q[0]||J.mouse[0][1]!==q[1])&&(J.mouse[1]=re.invert(J.mouse[0]=q)),clearTimeout(J.wheel);else{if(re.k===G)return;J.mouse=[q,re.invert(q)],a2(this),J.start()}fg(H),J.wheel=setTimeout(W,b),J.zoom("mouse",r(D(k(re,G),J.mouse[0],J.mouse[1]),J.extent,i));function W(){J.wheel=null,J.end()}}function B(H,...ne){if(m||!t.apply(this,arguments))return;var J=H.currentTarget,re=L(this,ne,!0).event(H),G=Sc(H.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",Y,!0),q=Cu(H,J),W=H.clientX,ie=H.clientY;LQ(H.view),w_(H),re.mouse=[q,this.__zoom.invert(q)],a2(this),re.start();function j(ee){if(fg(ee),!re.moved){var te=ee.clientX-W,ce=ee.clientY-ie;re.moved=te*te+ce*ce>y}re.event(ee).zoom("mouse",r(D(re.that.__zoom,re.mouse[0]=Cu(ee,J),re.mouse[1]),re.extent,i))}function Y(ee){G.on("mousemove.zoom mouseup.zoom",null),UQ(ee.view,re.moved),fg(ee),re.event(ee).end()}}function O(H,...ne){if(t.apply(this,arguments)){var J=this.__zoom,re=Cu(H.changedTouches?H.changedTouches[0]:H,this),G=J.invert(re),q=J.k*(H.shiftKey?.5:2),W=r(D(k(J,q),re,G),e.apply(this,ne),i);fg(H),o>0?Sc(this).transition().duration(o).call(P,W,re,H):Sc(this).call(T.transform,W,re,H)}}function R(H,...ne){if(t.apply(this,arguments)){var J=H.touches,re=J.length,G=L(this,ne,H.changedTouches.length===re).event(H),q,W,ie,j;for(w_(H),W=0;W<re;++W)ie=J[W],j=Cu(ie,this),j=[j,this.__zoom.invert(j),ie.identifier],G.touch0?!G.touch1&&G.touch0[2]!==j[2]&&(G.touch1=j,G.taps=0):(G.touch0=j,q=!0,G.taps=1+!!d);d&&(d=clearTimeout(d)),q&&(G.taps<2&&(h=j[0],d=setTimeout(function(){d=null},g)),a2(this),G.start())}}function F(H,...ne){if(this.__zooming){var J=L(this,ne).event(H),re=H.changedTouches,G=re.length,q,W,ie,j;for(fg(H),q=0;q<G;++q)W=re[q],ie=Cu(W,this),J.touch0&&J.touch0[2]===W.identifier?J.touch0[0]=ie:J.touch1&&J.touch1[2]===W.identifier&&(J.touch1[0]=ie);if(W=J.that.__zoom,J.touch1){var Y=J.touch0[0],ee=J.touch0[1],te=J.touch1[0],ce=J.touch1[1],be=(be=te[0]-Y[0])*be+(be=te[1]-Y[1])*be,he=(he=ce[0]-ee[0])*he+(he=ce[1]-ee[1])*he;W=k(W,Math.sqrt(be/he)),ie=[(Y[0]+te[0])/2,(Y[1]+te[1])/2],j=[(ee[0]+ce[0])/2,(ee[1]+ce[1])/2]}else if(J.touch0)ie=J.touch0[0],j=J.touch0[1];else return;J.zoom("touch",r(D(W,ie,j),J.extent,i))}}function Q(H,...ne){if(this.__zooming){var J=L(this,ne).event(H),re=H.changedTouches,G=re.length,q,W;for(w_(H),m&&clearTimeout(m),m=setTimeout(function(){m=null},g),q=0;q<G;++q)W=re[q],J.touch0&&J.touch0[2]===W.identifier?delete J.touch0:J.touch1&&J.touch1[2]===W.identifier&&delete J.touch1;if(J.touch1&&!J.touch0&&(J.touch0=J.touch1,delete J.touch1),J.touch0)J.touch0[1]=this.__zoom.invert(J.touch0[0]);else if(J.end(),J.taps===2&&(W=Cu(W,this),Math.hypot(h[0]-W[0],h[1]-W[1])<_)){var ie=Sc(this).on("dblclick.zoom");ie&&ie.apply(this,arguments)}}}return T.wheelDelta=function(H){return arguments.length?(n=typeof H=="function"?H:Ny(+H),T):n},T.filter=function(H){return arguments.length?(t=typeof H=="function"?H:Ny(!!H),T):t},T.touchable=function(H){return arguments.length?(s=typeof H=="function"?H:Ny(!!H),T):s},T.extent=function(H){return arguments.length?(e=typeof H=="function"?H:Ny([[+H[0][0],+H[0][1]],[+H[1][0],+H[1][1]]]),T):e},T.scaleExtent=function(H){return arguments.length?(a[0]=+H[0],a[1]=+H[1],T):[a[0],a[1]]},T.translateExtent=function(H){return arguments.length?(i[0][0]=+H[0][0],i[1][0]=+H[1][0],i[0][1]=+H[0][1],i[1][1]=+H[1][1],T):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},T.constrain=function(H){return arguments.length?(r=H,T):r},T.duration=function(H){return arguments.length?(o=+H,T):o},T.interpolate=function(H){return arguments.length?(l=H,T):l},T.on=function(){var H=u.on.apply(u,arguments);return H===u?T:H},T.clickDistance=function(H){return arguments.length?(y=(H=+H)*H,T):Math.sqrt(y)},T.tapDistance=function(H){return arguments.length?(_=+H,T):_},T}KL();const kb=Z.createContext(null),SNe=kb.Provider,HA={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},YQ=HA.error001();function Rs(t,e){const r=Z.useContext(kb);if(r===null)throw new Error(YQ);return bQ(r,t,e)}const ei=()=>{const t=Z.useContext(kb);if(t===null)throw new Error(YQ);return Z.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},TNe=t=>t.userSelectionActive?"none":"all";function JQ({position:t,children:e,className:r,style:n,...s}){const a=Rs(TNe),i=`${t}`.split("-");return dt.createElement("div",{className:lo(["react-flow__panel",r,...i]),style:{...n,pointerEvents:a},...s},e)}function NNe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:dt.createElement(JQ,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},dt.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const BNe=({x:t,y:e,label:r,labelStyle:n={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:i=[2,4],labelBgBorderRadius:o=2,children:l,className:u,...d})=>{const h=Z.useRef(null),[m,g]=Z.useState({x:0,y:0,width:0,height:0}),b=lo(["react-flow__edge-textwrapper",u]);return Z.useEffect(()=>{if(h.current){const y=h.current.getBBox();g({x:y.x,y:y.y,width:y.width,height:y.height})}},[r]),typeof r>"u"||!r?null:dt.createElement("g",{transform:`translate(${t-m.width/2} ${e-m.height/2})`,className:b,visibility:m.width?"visible":"hidden",...d},s&&dt.createElement("rect",{width:m.width+2*i[0],x:-i[0],y:-i[1],height:m.height+2*i[1],className:"react-flow__edge-textbg",style:a,rx:o,ry:o}),dt.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:h,style:n},r),l)};var kNe=Z.memo(BNe);const ZT=t=>({width:t.offsetWidth,height:t.offsetHeight}),Ym=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),eN=(t={x:0,y:0},e)=>({x:Ym(t.x,e[0][0],e[1][0]),y:Ym(t.y,e[0][1],e[1][1])}),fL=(t,e,r)=>t<e?Ym(Math.abs(t-e),1,50)/50:t>r?-Ym(Math.abs(t-r),1,50)/50:0,XQ=(t,e)=>{const r=fL(t.x,35,e.width-35)*20,n=fL(t.y,35,e.height-35)*20;return[r,n]},ZQ=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},INe=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),tN=({x:t,y:e,width:r,height:n})=>({x:t,y:e,x2:t+r,y2:e+n}),FNe=({x:t,y:e,x2:r,y2:n})=>({x:t,y:e,width:r-t,height:n-e}),hL=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),x5=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),n=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*n)},DNe=t=>ql(t.width)&&ql(t.height)&&ql(t.x)&&ql(t.y),ql=t=>!isNaN(t)&&isFinite(t),qs=Symbol.for("internals"),eH=["Enter"," ","Escape"],RNe=(t,e)=>{},LNe=t=>"nativeEvent"in t;function v5(t){var s,a;const e=LNe(t)?t.nativeEvent:t,r=((a=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:a[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const tH=t=>"clientX"in t,Af=(t,e)=>{var a,i;const r=tH(t),n=r?t.clientX:(a=t.touches)==null?void 0:a[0].clientX,s=r?t.clientY:(i=t.touches)==null?void 0:i[0].clientY;return{x:n-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},fw=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},k1=({id:t,path:e,labelX:r,labelY:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g=20})=>dt.createElement(dt.Fragment,null,dt.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:m}),g&&dt.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:g,className:"react-flow__edge-interaction"}),s&&ql(r)&&ql(n)?dt.createElement(kNe,{x:r,y:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null);k1.displayName="BaseEdge";function hg(t,e,r){return r===void 0?r:n=>{const s=e().edges.find(a=>a.id===t);s&&r(n,{...s})}}function rH({sourceX:t,sourceY:e,targetX:r,targetY:n}){const s=Math.abs(r-t)/2,a=r<t?r+s:r-s,i=Math.abs(n-e)/2,o=n<e?n+i:n-i;return[a,o,s,i]}function nH({sourceX:t,sourceY:e,targetX:r,targetY:n,sourceControlX:s,sourceControlY:a,targetControlX:i,targetControlY:o}){const l=t*.125+s*.375+i*.375+r*.125,u=e*.125+a*.375+o*.375+n*.125,d=Math.abs(l-t),h=Math.abs(u-e);return[l,u,d,h]}var Qh;(function(t){t.Strict="strict",t.Loose="loose"})(Qh||(Qh={}));var ph;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ph||(ph={}));var Kx;(function(t){t.Partial="partial",t.Full="full"})(Kx||(Kx={}));var Kd;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Kd||(Kd={}));var hw;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(hw||(hw={}));var cr;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(cr||(cr={}));function mL({pos:t,x1:e,y1:r,x2:n,y2:s}){return t===cr.Left||t===cr.Right?[.5*(e+n),r]:[e,.5*(r+s)]}function sH({sourceX:t,sourceY:e,sourcePosition:r=cr.Bottom,targetX:n,targetY:s,targetPosition:a=cr.Top}){const[i,o]=mL({pos:r,x1:t,y1:e,x2:n,y2:s}),[l,u]=mL({pos:a,x1:n,y1:s,x2:t,y2:e}),[d,h,m,g]=nH({sourceX:t,sourceY:e,targetX:n,targetY:s,sourceControlX:i,sourceControlY:o,targetControlX:l,targetControlY:u});return[`M${t},${e} C${i},${o} ${l},${u} ${n},${s}`,d,h,m,g]}const rN=Z.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:s=cr.Bottom,targetPosition:a=cr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:y})=>{const[_,T,k]=sH({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:n,targetPosition:a});return dt.createElement(k1,{path:_,labelX:T,labelY:k,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:y})});rN.displayName="SimpleBezierEdge";const pL={[cr.Left]:{x:-1,y:0},[cr.Right]:{x:1,y:0},[cr.Top]:{x:0,y:-1},[cr.Bottom]:{x:0,y:1}},UNe=({source:t,sourcePosition:e=cr.Bottom,target:r})=>e===cr.Left||e===cr.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},gL=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function MNe({source:t,sourcePosition:e=cr.Bottom,target:r,targetPosition:n=cr.Top,center:s,offset:a}){const i=pL[e],o=pL[n],l={x:t.x+i.x*a,y:t.y+i.y*a},u={x:r.x+o.x*a,y:r.y+o.y*a},d=UNe({source:l,sourcePosition:e,target:u}),h=d.x!==0?"x":"y",m=d[h];let g=[],b,y;const _={x:0,y:0},T={x:0,y:0},[k,D,M,P]=rH({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(i[h]*o[h]===-1){b=s.x??k,y=s.y??D;const C=[{x:b,y:l.y},{x:b,y:u.y}],E=[{x:l.x,y},{x:u.x,y}];i[h]===m?g=h==="x"?C:E:g=h==="x"?E:C}else{const C=[{x:l.x,y:u.y}],E=[{x:u.x,y:l.y}];if(h==="x"?g=i.x===m?E:C:g=i.y===m?C:E,e===n){const Q=Math.abs(t[h]-r[h]);if(Q<=a){const H=Math.min(a-1,a-Q);i[h]===m?_[h]=(l[h]>t[h]?-1:1)*H:T[h]=(u[h]>r[h]?-1:1)*H}}if(e!==n){const Q=h==="x"?"y":"x",H=i[h]===o[Q],ne=l[Q]>u[Q],J=l[Q]<u[Q];(i[h]===1&&(!H&&ne||H&&J)||i[h]!==1&&(!H&&J||H&&ne))&&(g=h==="x"?C:E)}const B={x:l.x+_.x,y:l.y+_.y},O={x:u.x+T.x,y:u.y+T.y},R=Math.max(Math.abs(B.x-g[0].x),Math.abs(O.x-g[0].x)),F=Math.max(Math.abs(B.y-g[0].y),Math.abs(O.y-g[0].y));R>=F?(b=(B.x+O.x)/2,y=g[0].y):(b=g[0].x,y=(B.y+O.y)/2)}return[[t,{x:l.x+_.x,y:l.y+_.y},...g,{x:u.x+T.x,y:u.y+T.y},r],b,y,M,P]}function PNe(t,e,r,n){const s=Math.min(gL(t,e)/2,gL(e,r)/2,n),{x:a,y:i}=e;if(t.x===a&&a===r.x||t.y===i&&i===r.y)return`L${a} ${i}`;if(t.y===i){const u=t.x<r.x?-1:1,d=t.y<r.y?1:-1;return`L ${a+s*u},${i}Q ${a},${i} ${a},${i+s*d}`}const o=t.x<r.x?1:-1,l=t.y<r.y?-1:1;return`L ${a},${i+s*l}Q ${a},${i} ${a+s*o},${i}`}function y5({sourceX:t,sourceY:e,sourcePosition:r=cr.Bottom,targetX:n,targetY:s,targetPosition:a=cr.Top,borderRadius:i=5,centerX:o,centerY:l,offset:u=20}){const[d,h,m,g,b]=MNe({source:{x:t,y:e},sourcePosition:r,target:{x:n,y:s},targetPosition:a,center:{x:o,y:l},offset:u});return[d.reduce((_,T,k)=>{let D="";return k>0&&k<d.length-1?D=PNe(d[k-1],T,d[k+1],i):D=`${k===0?"M":"L"}${T.x} ${T.y}`,_+=D,_},""),h,m,g,b]}const Ib=Z.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,sourcePosition:h=cr.Bottom,targetPosition:m=cr.Top,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:_})=>{const[T,k,D]=y5({sourceX:t,sourceY:e,sourcePosition:h,targetX:r,targetY:n,targetPosition:m,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return dt.createElement(k1,{path:T,labelX:k,labelY:D,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:g,markerStart:b,interactionWidth:_})});Ib.displayName="SmoothStepEdge";const nN=Z.memo(t=>{var e;return dt.createElement(Ib,{...t,pathOptions:Z.useMemo(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});nN.displayName="StepEdge";function jNe({sourceX:t,sourceY:e,targetX:r,targetY:n}){const[s,a,i,o]=rH({sourceX:t,sourceY:e,targetX:r,targetY:n});return[`M ${t},${e}L ${r},${n}`,s,a,i,o]}const sN=Z.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g})=>{const[b,y,_]=jNe({sourceX:t,sourceY:e,targetX:r,targetY:n});return dt.createElement(k1,{path:b,labelX:y,labelY:_,label:s,labelStyle:a,labelShowBg:i,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:m,interactionWidth:g})});sN.displayName="StraightEdge";function By(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function xL({pos:t,x1:e,y1:r,x2:n,y2:s,c:a}){switch(t){case cr.Left:return[e-By(e-n,a),r];case cr.Right:return[e+By(n-e,a),r];case cr.Top:return[e,r-By(r-s,a)];case cr.Bottom:return[e,r+By(s-r,a)]}}function aH({sourceX:t,sourceY:e,sourcePosition:r=cr.Bottom,targetX:n,targetY:s,targetPosition:a=cr.Top,curvature:i=.25}){const[o,l]=xL({pos:r,x1:t,y1:e,x2:n,y2:s,c:i}),[u,d]=xL({pos:a,x1:n,y1:s,x2:t,y2:e,c:i}),[h,m,g,b]=nH({sourceX:t,sourceY:e,targetX:n,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${e} C${o},${l} ${u},${d} ${n},${s}`,h,m,g,b]}const mw=Z.memo(({sourceX:t,sourceY:e,targetX:r,targetY:n,sourcePosition:s=cr.Bottom,targetPosition:a=cr.Top,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,pathOptions:y,interactionWidth:_})=>{const[T,k,D]=aH({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:n,targetPosition:a,curvature:y==null?void 0:y.curvature});return dt.createElement(k1,{path:T,labelX:k,labelY:D,label:i,labelStyle:o,labelShowBg:l,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:h,style:m,markerEnd:g,markerStart:b,interactionWidth:_})});mw.displayName="BezierEdge";const aN=Z.createContext(null),ONe=aN.Provider;aN.Consumer;const QNe=()=>Z.useContext(aN),HNe=t=>"id"in t&&"source"in t&&"target"in t,VNe=({source:t,sourceHandle:e,target:r,targetHandle:n})=>`reactflow__edge-${t}${e||""}-${r}${n||""}`,w5=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("&")}`,zNe=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),GNe=(t,e)=>{if(!t.source||!t.target)return e;let r;return HNe(t)?r={...t}:r={...t,id:VNe(t)},zNe(r,e)?e:e.concat(r)},b5=({x:t,y:e},[r,n,s],a,[i,o])=>{const l={x:(t-r)/s,y:(e-n)/s};return a?{x:i*Math.round(l.x/i),y:o*Math.round(l.y/o)}:l},iH=({x:t,y:e},[r,n,s])=>({x:t*s+r,y:e*s+n}),Fm=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(t.width??0)*e[0],n=(t.height??0)*e[1],s={x:t.position.x-r,y:t.position.y-n};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-n}:s}},iN=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((n,s)=>{const{x:a,y:i}=Fm(s,e).positionAbsolute;return INe(n,tN({x:a,y:i,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return FNe(r)},oH=(t,e,[r,n,s]=[0,0,1],a=!1,i=!1,o=[0,0])=>{const l={x:(e.x-r)/s,y:(e.y-n)/s,width:e.width/s,height:e.height/s},u=[];return t.forEach(d=>{const{width:h,height:m,selectable:g=!0,hidden:b=!1}=d;if(i&&!g||b)return!1;const{positionAbsolute:y}=Fm(d,o),_={x:y.x,y:y.y,width:h||0,height:m||0},T=x5(l,_),k=typeof h>"u"||typeof m>"u"||h===null||m===null,D=a&&T>0,M=(h||0)*(m||0);(k||D||T>=M||d.dragging)&&u.push(d)}),u},lH=(t,e)=>{const r=t.map(n=>n.id);return e.filter(n=>r.includes(n.source)||r.includes(n.target))},cH=(t,e,r,n,s,a=.1)=>{const i=e/(t.width*(1+a)),o=r/(t.height*(1+a)),l=Math.min(i,o),u=Ym(l,n,s),d=t.x+t.width/2,h=t.y+t.height/2,m=e/2-d*u,g=r/2-h*u;return{x:m,y:g,zoom:u}},oh=(t,e=0)=>t.transition().duration(e);function vL(t,e,r,n){return(e[r]||[]).reduce((s,a)=>{var i,o;return`${t.id}-${a.id}-${r}`!==n&&s.push({id:a.id||null,type:r,nodeId:t.id,x:(((i=t.positionAbsolute)==null?void 0:i.x)??0)+a.x+a.width/2,y:(((o=t.positionAbsolute)==null?void 0:o.y)??0)+a.y+a.height/2}),s},[])}function qNe(t,e,r,n,s,a){const{x:i,y:o}=Af(t),u=e.elementsFromPoint(i,o).find(b=>b.classList.contains("react-flow__handle"));if(u){const b=u.getAttribute("data-nodeid");if(b){const y=oN(void 0,u),_=u.getAttribute("data-handleid"),T=a({nodeId:b,id:_,type:y});if(T){const k=s.find(D=>D.nodeId===b&&D.type===y&&D.id===_);return{handle:{id:_,type:y,nodeId:b,x:(k==null?void 0:k.x)||r.x,y:(k==null?void 0:k.y)||r.y},validHandleResult:T}}}}let d=[],h=1/0;if(s.forEach(b=>{const y=Math.sqrt((b.x-r.x)**2+(b.y-r.y)**2);if(y<=n){const _=a(b);y<=h&&(y<h?d=[{handle:b,validHandleResult:_}]:y===h&&d.push({handle:b,validHandleResult:_}),h=y)}}),!d.length)return{handle:null,validHandleResult:uH()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:b})=>b.isValid),g=d.some(({handle:b})=>b.type==="target");return d.find(({handle:b,validHandleResult:y})=>g?b.type==="target":m?y.isValid:!0)||d[0]}const KNe={source:null,target:null,sourceHandle:null,targetHandle:null},uH=()=>({handleDomNode:null,isValid:!1,connection:KNe,endHandle:null});function AH(t,e,r,n,s,a,i){const o=s==="target",l=i.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),u={...uH(),handleDomNode:l};if(l){const d=oN(void 0,l),h=l.getAttribute("data-nodeid"),m=l.getAttribute("data-handleid"),g=l.classList.contains("connectable"),b=l.classList.contains("connectableend"),y={source:o?h:r,sourceHandle:o?m:n,target:o?r:h,targetHandle:o?n:m};u.connection=y,g&&b&&(e===Qh.Strict?o&&d==="source"||!o&&d==="target":h!==r||m!==n)&&(u.endHandle={nodeId:h,handleId:m,type:d},u.isValid=a(y))}return u}function $Ne({nodes:t,nodeId:e,handleId:r,handleType:n}){return t.reduce((s,a)=>{if(a[qs]){const{handleBounds:i}=a[qs];let o=[],l=[];i&&(o=vL(a,i,"source",`${e}-${r}-${n}`),l=vL(a,i,"target",`${e}-${r}-${n}`)),s.push(...o,...l)}return s},[])}function oN(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function b_(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function WNe(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function dH({event:t,handleId:e,nodeId:r,onConnect:n,isTarget:s,getState:a,setState:i,isValidConnection:o,edgeUpdaterType:l,onReconnectEnd:u}){const d=ZQ(t.target),{connectionMode:h,domNode:m,autoPanOnConnect:g,connectionRadius:b,onConnectStart:y,panBy:_,getNodes:T,cancelConnection:k}=a();let D=0,M;const{x:P,y:L}=Af(t),C=d==null?void 0:d.elementFromPoint(P,L),E=oN(l,C),B=m==null?void 0:m.getBoundingClientRect();if(!B||!E)return;let O,R=Af(t,B),F=!1,Q=null,H=!1,ne=null;const J=$Ne({nodes:T(),nodeId:r,handleId:e,handleType:E}),re=()=>{if(!g)return;const[W,ie]=XQ(R,B);_({x:W,y:ie}),D=requestAnimationFrame(re)};i({connectionPosition:R,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:E,connectionStartHandle:{nodeId:r,handleId:e,type:E},connectionEndHandle:null}),y==null||y(t,{nodeId:r,handleId:e,handleType:E});function G(W){const{transform:ie}=a();R=Af(W,B);const{handle:j,validHandleResult:Y}=qNe(W,d,b5(R,ie,!1,[1,1]),b,J,ee=>AH(ee,h,r,e,s?"target":"source",o,d));if(M=j,F||(re(),F=!0),ne=Y.handleDomNode,Q=Y.connection,H=Y.isValid,i({connectionPosition:M&&H?iH({x:M.x,y:M.y},ie):R,connectionStatus:WNe(!!M,H),connectionEndHandle:Y.endHandle}),!M&&!H&&!ne)return b_(O);Q.source!==Q.target&&ne&&(b_(O),O=ne,ne.classList.add("connecting","react-flow__handle-connecting"),ne.classList.toggle("valid",H),ne.classList.toggle("react-flow__handle-valid",H))}function q(W){var ie,j;(M||ne)&&Q&&H&&(n==null||n(Q)),(j=(ie=a()).onConnectEnd)==null||j.call(ie,W),l&&(u==null||u(W)),b_(O),k(),cancelAnimationFrame(D),F=!1,H=!1,Q=null,ne=null,d.removeEventListener("mousemove",G),d.removeEventListener("mouseup",q),d.removeEventListener("touchmove",G),d.removeEventListener("touchend",q)}d.addEventListener("mousemove",G),d.addEventListener("mouseup",q),d.addEventListener("touchmove",G),d.addEventListener("touchend",q)}const yL=()=>!0,YNe=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),JNe=(t,e,r)=>n=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:i}=n;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===r||(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===r,clickConnecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===r}},fH=Z.forwardRef(({type:t="source",position:e=cr.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:i,onConnect:o,children:l,className:u,onMouseDown:d,onTouchStart:h,...m},g)=>{var B,O;const b=i||null,y=t==="target",_=ei(),T=QNe(),{connectOnClick:k,noPanClassName:D}=Rs(YNe,Yi),{connecting:M,clickConnecting:P}=Rs(JNe(T,b,t),Yi);T||(O=(B=_.getState()).onError)==null||O.call(B,"010",HA.error010());const L=R=>{const{defaultEdgeOptions:F,onConnect:Q,hasDefaultEdges:H}=_.getState(),ne={...F,...R};if(H){const{edges:J,setEdges:re}=_.getState();re(GNe(ne,J))}Q==null||Q(ne),o==null||o(ne)},C=R=>{if(!T)return;const F=tH(R);s&&(F&&R.button===0||!F)&&dH({event:R,handleId:b,nodeId:T,onConnect:L,isTarget:y,getState:_.getState,setState:_.setState,isValidConnection:r||_.getState().isValidConnection||yL}),F?d==null||d(R):h==null||h(R)},E=R=>{const{onClickConnectStart:F,onClickConnectEnd:Q,connectionClickStartHandle:H,connectionMode:ne,isValidConnection:J}=_.getState();if(!T||!H&&!s)return;if(!H){F==null||F(R,{nodeId:T,handleId:b,handleType:t}),_.setState({connectionClickStartHandle:{nodeId:T,type:t,handleId:b}});return}const re=ZQ(R.target),G=r||J||yL,{connection:q,isValid:W}=AH({nodeId:T,id:b,type:t},ne,H.nodeId,H.handleId||null,H.type,G,re);W&&L(q),Q==null||Q(R),_.setState({connectionClickStartHandle:null})};return dt.createElement("div",{"data-handleid":b,"data-nodeid":T,"data-handlepos":e,"data-id":`${T}-${b}-${t}`,className:lo(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",D,u,{source:!y,target:y,connectable:n,connectablestart:s,connectableend:a,connecting:P,connectionindicator:n&&(s&&!M||a&&M)}]),onMouseDown:C,onTouchStart:C,onClick:k?E:void 0,ref:g,...m},l)});fH.displayName="Handle";var Jm=Z.memo(fH);const hH=({data:t,isConnectable:e,targetPosition:r=cr.Top,sourcePosition:n=cr.Bottom})=>dt.createElement(dt.Fragment,null,dt.createElement(Jm,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,dt.createElement(Jm,{type:"source",position:n,isConnectable:e}));hH.displayName="DefaultNode";var C5=Z.memo(hH);const mH=({data:t,isConnectable:e,sourcePosition:r=cr.Bottom})=>dt.createElement(dt.Fragment,null,t==null?void 0:t.label,dt.createElement(Jm,{type:"source",position:r,isConnectable:e}));mH.displayName="InputNode";var pH=Z.memo(mH);const gH=({data:t,isConnectable:e,targetPosition:r=cr.Top})=>dt.createElement(dt.Fragment,null,dt.createElement(Jm,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label);gH.displayName="OutputNode";var xH=Z.memo(gH);const lN=()=>null;lN.displayName="GroupNode";const XNe=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),ky=t=>t.id;function ZNe(t,e){return Yi(t.selectedNodes.map(ky),e.selectedNodes.map(ky))&&Yi(t.selectedEdges.map(ky),e.selectedEdges.map(ky))}const vH=Z.memo(({onSelectionChange:t})=>{const e=ei(),{selectedNodes:r,selectedEdges:n}=Rs(XNe,ZNe);return Z.useEffect(()=>{const s={nodes:r,edges:n};t==null||t(s),e.getState().onSelectionChange.forEach(a=>a(s))},[r,n,t]),null});vH.displayName="SelectionListener";const eBe=t=>!!t.onSelectionChange;function tBe({onSelectionChange:t}){const e=Rs(eBe);return t||e?dt.createElement(vH,{onSelectionChange:t}):null}const rBe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function q0(t,e){Z.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function nn(t,e,r){Z.useEffect(()=>{typeof e<"u"&&r({[t]:e})},[e])}const nBe=({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:s,onConnectStart:a,onConnectEnd:i,onClickConnectStart:o,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:d,nodesFocusable:h,edgesFocusable:m,edgesUpdatable:g,elevateNodesOnSelect:b,minZoom:y,maxZoom:_,nodeExtent:T,onNodesChange:k,onEdgesChange:D,elementsSelectable:M,connectionMode:P,snapGrid:L,snapToGrid:C,translateExtent:E,connectOnClick:B,defaultEdgeOptions:O,fitView:R,fitViewOptions:F,onNodesDelete:Q,onEdgesDelete:H,onNodeDrag:ne,onNodeDragStart:J,onNodeDragStop:re,onSelectionDrag:G,onSelectionDragStart:q,onSelectionDragStop:W,noPanClassName:ie,nodeOrigin:j,rfId:Y,autoPanOnConnect:ee,autoPanOnNodeDrag:te,onError:ce,connectionRadius:be,isValidConnection:he,nodeDragThreshold:fe})=>{const{setNodes:ge,setEdges:de,setDefaultNodesAndEdges:oe,setMinZoom:Ue,setMaxZoom:tt,setTranslateExtent:Fe,setNodeExtent:Ee,reset:De}=Rs(rBe,Yi),Qe=ei();return Z.useEffect(()=>{const $e=n==null?void 0:n.map(ut=>({...ut,...O}));return oe(r,$e),()=>{De()}},[]),nn("defaultEdgeOptions",O,Qe.setState),nn("connectionMode",P,Qe.setState),nn("onConnect",s,Qe.setState),nn("onConnectStart",a,Qe.setState),nn("onConnectEnd",i,Qe.setState),nn("onClickConnectStart",o,Qe.setState),nn("onClickConnectEnd",l,Qe.setState),nn("nodesDraggable",u,Qe.setState),nn("nodesConnectable",d,Qe.setState),nn("nodesFocusable",h,Qe.setState),nn("edgesFocusable",m,Qe.setState),nn("edgesUpdatable",g,Qe.setState),nn("elementsSelectable",M,Qe.setState),nn("elevateNodesOnSelect",b,Qe.setState),nn("snapToGrid",C,Qe.setState),nn("snapGrid",L,Qe.setState),nn("onNodesChange",k,Qe.setState),nn("onEdgesChange",D,Qe.setState),nn("connectOnClick",B,Qe.setState),nn("fitViewOnInit",R,Qe.setState),nn("fitViewOnInitOptions",F,Qe.setState),nn("onNodesDelete",Q,Qe.setState),nn("onEdgesDelete",H,Qe.setState),nn("onNodeDrag",ne,Qe.setState),nn("onNodeDragStart",J,Qe.setState),nn("onNodeDragStop",re,Qe.setState),nn("onSelectionDrag",G,Qe.setState),nn("onSelectionDragStart",q,Qe.setState),nn("onSelectionDragStop",W,Qe.setState),nn("noPanClassName",ie,Qe.setState),nn("nodeOrigin",j,Qe.setState),nn("rfId",Y,Qe.setState),nn("autoPanOnConnect",ee,Qe.setState),nn("autoPanOnNodeDrag",te,Qe.setState),nn("onError",ce,Qe.setState),nn("connectionRadius",be,Qe.setState),nn("isValidConnection",he,Qe.setState),nn("nodeDragThreshold",fe,Qe.setState),q0(t,ge),q0(e,de),q0(y,Ue),q0(_,tt),q0(E,Fe),q0(T,Ee),null},wL={display:"none"},sBe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},yH="react-flow__node-desc",wH="react-flow__edge-desc",aBe="react-flow__aria-live",iBe=t=>t.ariaLiveMessage;function oBe({rfId:t}){const e=Rs(iBe);return dt.createElement("div",{id:`${aBe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:sBe},e)}function lBe({rfId:t,disableKeyboardA11y:e}){return dt.createElement(dt.Fragment,null,dt.createElement("div",{id:`${yH}-${t}`,style:wL},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),dt.createElement("div",{id:`${wH}-${t}`,style:wL},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&dt.createElement(oBe,{rfId:t}))}var $x=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,n]=Z.useState(!1),s=Z.useRef(!1),a=Z.useRef(new Set([])),[i,o]=Z.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=u.reduce((h,m)=>h.concat(...m),[]);return[u,d]}return[[],[]]},[t]);return Z.useEffect(()=>{const l=typeof document<"u"?document:null,u=(e==null?void 0:e.target)||l;if(t!==null){const d=g=>{if(s.current=g.ctrlKey||g.metaKey||g.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&v5(g))return!1;const y=CL(g.code,o);a.current.add(g[y]),bL(i,a.current,!1)&&(g.preventDefault(),n(!0))},h=g=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&v5(g))return!1;const y=CL(g.code,o);bL(i,a.current,!0)?(n(!1),a.current.clear()):a.current.delete(g[y]),g.key==="Meta"&&a.current.clear(),s.current=!1},m=()=>{a.current.clear(),n(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",h),window.addEventListener("blur",m),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",h),window.removeEventListener("blur",m)}}},[t,n]),r};function bL(t,e,r){return t.filter(n=>r||n.length===e.size).some(n=>n.every(s=>e.has(s)))}function CL(t,e){return e.includes(t)?"code":"key"}function bH(t,e,r,n){var o,l;const s=t.parentNode||t.parentId;if(!s)return r;const a=e.get(s),i=Fm(a,n);return bH(a,e,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(((o=a[qs])==null?void 0:o.z)??0)>(r.z??0)?((l=a[qs])==null?void 0:l.z)??0:r.z??0},n)}function CH(t,e,r){t.forEach(n=>{var a;const s=n.parentNode||n.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||r!=null&&r[n.id]){const{x:i,y:o,z:l}=bH(n,t,{...n.position,z:((a=n[qs])==null?void 0:a.z)??0},e);n.positionAbsolute={x:i,y:o},n[qs].z=l,r!=null&&r[n.id]&&(n[qs].isParent=!0)}})}function C_(t,e,r,n){const s=new Map,a={},i=n?1e3:0;return t.forEach(o=>{var g;const l=(ql(o.zIndex)?o.zIndex:0)+(o.selected?i:0),u=e.get(o.id),d={...o,positionAbsolute:{x:o.position.x,y:o.position.y}},h=o.parentNode||o.parentId;h&&(a[h]=!0);const m=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==o.type;Object.defineProperty(d,qs,{enumerable:!1,value:{handleBounds:m||(g=u==null?void 0:u[qs])==null?void 0:g.handleBounds,z:l}}),s.set(o.id,d)}),CH(s,r,a),s}function EH(t,e={}){const{getNodes:r,width:n,height:s,minZoom:a,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:h}=t(),m=e.initial&&!u&&d;if(o&&l&&(m||!e.initial)){const b=r().filter(_=>{var k;const T=e.includeHiddenNodes?_.width&&_.height:!_.hidden;return(k=e.nodes)!=null&&k.length?T&&e.nodes.some(D=>D.id===_.id):T}),y=b.every(_=>_.width&&_.height);if(b.length>0&&y){const _=iN(b,h),{x:T,y:k,zoom:D}=cH(_,n,s,e.minZoom??a,e.maxZoom??i,e.padding??.1),M=uf.translate(T,k).scale(D);return typeof e.duration=="number"&&e.duration>0?o.transform(oh(l,e.duration),M):o.transform(l,M),!0}}return!1}function cBe(t,e){return t.forEach(r=>{const n=e.get(r.id);n&&e.set(n.id,{...n,[qs]:n[qs],selected:r.selected})}),new Map(e)}function uBe(t,e){return e.map(r=>{const n=t.find(s=>s.id===r.id);return n&&(r.selected=n.selected),r})}function Iy({changedNodes:t,changedEdges:e,get:r,set:n}){const{nodeInternals:s,edges:a,onNodesChange:i,onEdgesChange:o,hasDefaultNodes:l,hasDefaultEdges:u}=r();t!=null&&t.length&&(l&&n({nodeInternals:cBe(t,s)}),i==null||i(t)),e!=null&&e.length&&(u&&n({edges:uBe(e,a)}),o==null||o(e))}const K0=()=>{},ABe={zoomIn:K0,zoomOut:K0,zoomTo:K0,getZoom:()=>1,setViewport:K0,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:K0,fitBounds:K0,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},dBe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),fBe=()=>{const t=ei(),{d3Zoom:e,d3Selection:r}=Rs(dBe,Yi);return Z.useMemo(()=>r&&e?{zoomIn:s=>e.scaleBy(oh(r,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(oh(r,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(oh(r,a==null?void 0:a.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[i,o,l]=t.getState().transform,u=uf.translate(s.x??i,s.y??o).scale(s.zoom??l);e.transform(oh(r,a==null?void 0:a.duration),u)},getViewport:()=>{const[s,a,i]=t.getState().transform;return{x:s,y:a,zoom:i}},fitView:s=>EH(t.getState,s),setCenter:(s,a,i)=>{const{width:o,height:l,maxZoom:u}=t.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,h=o/2-s*d,m=l/2-a*d,g=uf.translate(h,m).scale(d);e.transform(oh(r,i==null?void 0:i.duration),g)},fitBounds:(s,a)=>{const{width:i,height:o,minZoom:l,maxZoom:u}=t.getState(),{x:d,y:h,zoom:m}=cH(s,i,o,l,u,(a==null?void 0:a.padding)??.1),g=uf.translate(d,h).scale(m);e.transform(oh(r,a==null?void 0:a.duration),g)},project:s=>{const{transform:a,snapToGrid:i,snapGrid:o}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),b5(s,a,i,o)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:i,snapGrid:o,domNode:l}=t.getState();if(!l)return s;const{x:u,y:d}=l.getBoundingClientRect(),h={x:s.x-u,y:s.y-d};return b5(h,a,i,o)},flowToScreenPosition:s=>{const{transform:a,domNode:i}=t.getState();if(!i)return s;const{x:o,y:l}=i.getBoundingClientRect(),u=iH(s,a);return{x:u.x+o,y:u.y+l}},viewportInitialized:!0}:ABe,[e,r])};function Fb(){const t=fBe(),e=ei(),r=Z.useCallback(()=>e.getState().getNodes().map(y=>({...y})),[]),n=Z.useCallback(y=>e.getState().nodeInternals.get(y),[]),s=Z.useCallback(()=>{const{edges:y=[]}=e.getState();return y.map(_=>({..._}))},[]),a=Z.useCallback(y=>{const{edges:_=[]}=e.getState();return _.find(T=>T.id===y)},[]),i=Z.useCallback(y=>{const{getNodes:_,setNodes:T,hasDefaultNodes:k,onNodesChange:D}=e.getState(),M=_(),P=typeof y=="function"?y(M):y;if(k)T(P);else if(D){const L=P.length===0?M.map(C=>({type:"remove",id:C.id})):P.map(C=>({item:C,type:"reset"}));D(L)}},[]),o=Z.useCallback(y=>{const{edges:_=[],setEdges:T,hasDefaultEdges:k,onEdgesChange:D}=e.getState(),M=typeof y=="function"?y(_):y;if(k)T(M);else if(D){const P=M.length===0?_.map(L=>({type:"remove",id:L.id})):M.map(L=>({item:L,type:"reset"}));D(P)}},[]),l=Z.useCallback(y=>{const _=Array.isArray(y)?y:[y],{getNodes:T,setNodes:k,hasDefaultNodes:D,onNodesChange:M}=e.getState();if(D){const L=[...T(),..._];k(L)}else if(M){const P=_.map(L=>({item:L,type:"add"}));M(P)}},[]),u=Z.useCallback(y=>{const _=Array.isArray(y)?y:[y],{edges:T=[],setEdges:k,hasDefaultEdges:D,onEdgesChange:M}=e.getState();if(D)k([...T,..._]);else if(M){const P=_.map(L=>({item:L,type:"add"}));M(P)}},[]),d=Z.useCallback(()=>{const{getNodes:y,edges:_=[],transform:T}=e.getState(),[k,D,M]=T;return{nodes:y().map(P=>({...P})),edges:_.map(P=>({...P})),viewport:{x:k,y:D,zoom:M}}},[]),h=Z.useCallback(({nodes:y,edges:_})=>{const{nodeInternals:T,getNodes:k,edges:D,hasDefaultNodes:M,hasDefaultEdges:P,onNodesDelete:L,onEdgesDelete:C,onNodesChange:E,onEdgesChange:B}=e.getState(),O=(y||[]).map(ne=>ne.id),R=(_||[]).map(ne=>ne.id),F=k().reduce((ne,J)=>{const re=J.parentNode||J.parentId,G=!O.includes(J.id)&&re&&ne.find(W=>W.id===re);return(typeof J.deletable=="boolean"?J.deletable:!0)&&(O.includes(J.id)||G)&&ne.push(J),ne},[]),Q=D.filter(ne=>typeof ne.deletable=="boolean"?ne.deletable:!0),H=Q.filter(ne=>R.includes(ne.id));if(F||H){const ne=lH(F,Q),J=[...H,...ne],re=J.reduce((G,q)=>(G.includes(q.id)||G.push(q.id),G),[]);if((P||M)&&(P&&e.setState({edges:D.filter(G=>!re.includes(G.id))}),M&&(F.forEach(G=>{T.delete(G.id)}),e.setState({nodeInternals:new Map(T)}))),re.length>0&&(C==null||C(J),B&&B(re.map(G=>({id:G,type:"remove"})))),F.length>0&&(L==null||L(F),E)){const G=F.map(q=>({id:q.id,type:"remove"}));E(G)}}},[]),m=Z.useCallback(y=>{const _=DNe(y),T=_?null:e.getState().nodeInternals.get(y.id);return!_&&!T?[null,null,_]:[_?y:hL(T),T,_]},[]),g=Z.useCallback((y,_=!0,T)=>{const[k,D,M]=m(y);return k?(T||e.getState().getNodes()).filter(P=>{if(!M&&(P.id===D.id||!P.positionAbsolute))return!1;const L=hL(P),C=x5(L,k);return _&&C>0||C>=k.width*k.height}):[]},[]),b=Z.useCallback((y,_,T=!0)=>{const[k]=m(y);if(!k)return!1;const D=x5(k,_);return T&&D>0||D>=k.width*k.height},[]);return Z.useMemo(()=>({...t,getNodes:r,getNode:n,getEdges:s,getEdge:a,setNodes:i,setEdges:o,addNodes:l,addEdges:u,toObject:d,deleteElements:h,getIntersectingNodes:g,isNodeIntersecting:b}),[t,r,n,s,a,i,o,l,u,d,h,g,b])}const hBe={actInsideInputWithModifier:!1};var mBe=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=ei(),{deleteElements:n}=Fb(),s=$x(t,hBe),a=$x(e);Z.useEffect(()=>{if(s){const{edges:i,getNodes:o}=r.getState(),l=o().filter(d=>d.selected),u=i.filter(d=>d.selected);n({nodes:l,edges:u}),r.setState({nodesSelectionActive:!1})}},[s]),Z.useEffect(()=>{r.setState({multiSelectionActive:a})},[a])};function pBe(t){const e=ei();Z.useEffect(()=>{let r;const n=()=>{var a,i;if(!t.current)return;const s=ZT(t.current);(s.height===0||s.width===0)&&((i=(a=e.getState()).onError)==null||i.call(a,"004",HA.error004())),e.setState({width:s.width||500,height:s.height||500})};return n(),window.addEventListener("resize",n),t.current&&(r=new ResizeObserver(()=>n()),r.observe(t.current)),()=>{window.removeEventListener("resize",n),r&&t.current&&r.unobserve(t.current)}},[])}const cN={position:"absolute",width:"100%",height:"100%",top:0,left:0},gBe=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Fy=t=>({x:t.x,y:t.y,zoom:t.k}),$0=(t,e)=>t.target.closest(`.${e}`),EL=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),_L=t=>{const e=t.ctrlKey&&fw()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},xBe=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),vBe=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:n,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:l=ph.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:m,translateExtent:g,minZoom:b,maxZoom:y,zoomActivationKeyCode:_,preventScrolling:T=!0,children:k,noWheelClassName:D,noPanClassName:M})=>{const P=Z.useRef(),L=ei(),C=Z.useRef(!1),E=Z.useRef(!1),B=Z.useRef(null),O=Z.useRef({x:0,y:0,zoom:0}),{d3Zoom:R,d3Selection:F,d3ZoomHandler:Q,userSelectionActive:H}=Rs(xBe,Yi),ne=$x(_),J=Z.useRef(0),re=Z.useRef(!1),G=Z.useRef();return pBe(B),Z.useEffect(()=>{if(B.current){const q=B.current.getBoundingClientRect(),W=_Ne().scaleExtent([b,y]).translateExtent(g),ie=Sc(B.current).call(W),j=uf.translate(m.x,m.y).scale(Ym(m.zoom,b,y)),Y=[[0,0],[q.width,q.height]],ee=W.constrain()(j,Y,g);W.transform(ie,ee),W.wheelDelta(_L),L.setState({d3Zoom:W,d3Selection:ie,d3ZoomHandler:ie.on("wheel.zoom"),transform:[ee.x,ee.y,ee.k],domNode:B.current.closest(".react-flow")})}},[]),Z.useEffect(()=>{F&&R&&(i&&!ne&&!H?F.on("wheel.zoom",q=>{if($0(q,D))return!1;q.preventDefault(),q.stopImmediatePropagation();const W=F.property("__zoom").k||1;if(q.ctrlKey&&a){const he=Cu(q),fe=_L(q),ge=W*Math.pow(2,fe);R.scaleTo(F,ge,he,q);return}const ie=q.deltaMode===1?20:1;let j=l===ph.Vertical?0:q.deltaX*ie,Y=l===ph.Horizontal?0:q.deltaY*ie;!fw()&&q.shiftKey&&l!==ph.Vertical&&(j=q.deltaY*ie,Y=0),R.translateBy(F,-(j/W)*o,-(Y/W)*o,{internal:!0});const ee=Fy(F.property("__zoom")),{onViewportChangeStart:te,onViewportChange:ce,onViewportChangeEnd:be}=L.getState();clearTimeout(G.current),re.current||(re.current=!0,e==null||e(q,ee),te==null||te(ee)),re.current&&(t==null||t(q,ee),ce==null||ce(ee),G.current=setTimeout(()=>{r==null||r(q,ee),be==null||be(ee),re.current=!1},150))},{passive:!1}):typeof Q<"u"&&F.on("wheel.zoom",function(q,W){if(!T&&q.type==="wheel"&&!q.ctrlKey||$0(q,D))return null;q.preventDefault(),Q.call(this,q,W)},{passive:!1}))},[H,i,l,F,R,Q,ne,a,T,D,e,t,r]),Z.useEffect(()=>{R&&R.on("start",q=>{var j,Y;if(!q.sourceEvent||q.sourceEvent.internal)return null;J.current=(j=q.sourceEvent)==null?void 0:j.button;const{onViewportChangeStart:W}=L.getState(),ie=Fy(q.transform);C.current=!0,O.current=ie,((Y=q.sourceEvent)==null?void 0:Y.type)==="mousedown"&&L.setState({paneDragging:!0}),W==null||W(ie),e==null||e(q.sourceEvent,ie)})},[R,e]),Z.useEffect(()=>{R&&(H&&!C.current?R.on("zoom",null):H||R.on("zoom",q=>{var ie;const{onViewportChange:W}=L.getState();if(L.setState({transform:[q.transform.x,q.transform.y,q.transform.k]}),E.current=!!(n&&EL(h,J.current??0)),(t||W)&&!((ie=q.sourceEvent)!=null&&ie.internal)){const j=Fy(q.transform);W==null||W(j),t==null||t(q.sourceEvent,j)}}))},[H,R,t,h,n]),Z.useEffect(()=>{R&&R.on("end",q=>{if(!q.sourceEvent||q.sourceEvent.internal)return null;const{onViewportChangeEnd:W}=L.getState();if(C.current=!1,L.setState({paneDragging:!1}),n&&EL(h,J.current??0)&&!E.current&&n(q.sourceEvent),E.current=!1,(r||W)&&gBe(O.current,q.transform)){const ie=Fy(q.transform);O.current=ie,clearTimeout(P.current),P.current=setTimeout(()=>{W==null||W(ie),r==null||r(q.sourceEvent,ie)},i?150:0)}})},[R,i,h,r,n]),Z.useEffect(()=>{R&&R.filter(q=>{const W=ne||s,ie=a&&q.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&q.button===1&&q.type==="mousedown"&&($0(q,"react-flow__node")||$0(q,"react-flow__edge")))return!0;if(!h&&!W&&!i&&!u&&!a||H||!u&&q.type==="dblclick"||$0(q,D)&&q.type==="wheel"||$0(q,M)&&(q.type!=="wheel"||i&&q.type==="wheel"&&!ne)||!a&&q.ctrlKey&&q.type==="wheel"||!W&&!i&&!ie&&q.type==="wheel"||!h&&(q.type==="mousedown"||q.type==="touchstart")||Array.isArray(h)&&!h.includes(q.button)&&q.type==="mousedown")return!1;const j=Array.isArray(h)&&h.includes(q.button)||!q.button||q.button<=1;return(!q.ctrlKey||q.type==="wheel")&&j})},[H,R,s,a,i,u,h,d,ne]),dt.createElement("div",{className:"react-flow__renderer",ref:B,style:cN},k)},yBe=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function wBe(){const{userSelectionActive:t,userSelectionRect:e}=Rs(yBe,Yi);return t&&e?dt.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function SL(t,e){const r=e.parentNode||e.parentId,n=t.find(s=>s.id===r);if(n){const s=e.position.x+e.width-n.width,a=e.position.y+e.height-n.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,s>0&&(n.style.width+=s),a>0&&(n.style.height+=a),e.position.x<0){const i=Math.abs(e.position.x);n.position.x=n.position.x-i,n.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);n.position.y=n.position.y-i,n.style.height+=i,e.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function _H(t,e){if(t.some(n=>n.type==="reset"))return t.filter(n=>n.type==="reset").map(n=>n.item);const r=t.filter(n=>n.type==="add").map(n=>n.item);return e.reduce((n,s)=>{const a=t.filter(o=>o.id===s.id);if(a.length===0)return n.push(s),n;const i={...s};for(const o of a)if(o)switch(o.type){case"select":{i.selected=o.selected;break}case"position":{typeof o.position<"u"&&(i.position=o.position),typeof o.positionAbsolute<"u"&&(i.positionAbsolute=o.positionAbsolute),typeof o.dragging<"u"&&(i.dragging=o.dragging),i.expandParent&&SL(n,i);break}case"dimensions":{typeof o.dimensions<"u"&&(i.width=o.dimensions.width,i.height=o.dimensions.height),typeof o.updateStyle<"u"&&(i.style={...i.style||{},...o.dimensions}),typeof o.resizing=="boolean"&&(i.resizing=o.resizing),i.expandParent&&SL(n,i);break}case"remove":return n}return n.push(i),n},r)}function SH(t,e){return _H(t,e)}function bBe(t,e){return _H(t,e)}const Qd=(t,e)=>({id:t,type:"select",selected:e});function dm(t,e){return t.reduce((r,n)=>{const s=e.includes(n.id);return!n.selected&&s?(n.selected=!0,r.push(Qd(n.id,!0))):n.selected&&!s&&(n.selected=!1,r.push(Qd(n.id,!1))),r},[])}const E_=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},CBe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),TH=Z.memo(({isSelecting:t,selectionMode:e=Kx.Full,panOnDrag:r,onSelectionStart:n,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:l,onPaneMouseMove:u,onPaneMouseLeave:d,children:h})=>{const m=Z.useRef(null),g=ei(),b=Z.useRef(0),y=Z.useRef(0),_=Z.useRef(),{userSelectionActive:T,elementsSelectable:k,dragging:D}=Rs(CBe,Yi),M=()=>{g.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,y.current=0},P=Q=>{a==null||a(Q),g.getState().resetSelectedElements(),g.setState({nodesSelectionActive:!1})},L=Q=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){Q.preventDefault();return}i==null||i(Q)},C=o?Q=>o(Q):void 0,E=Q=>{const{resetSelectedElements:H,domNode:ne}=g.getState();if(_.current=ne==null?void 0:ne.getBoundingClientRect(),!k||!t||Q.button!==0||Q.target!==m.current||!_.current)return;const{x:J,y:re}=Af(Q,_.current);H(),g.setState({userSelectionRect:{width:0,height:0,startX:J,startY:re,x:J,y:re}}),n==null||n(Q)},B=Q=>{const{userSelectionRect:H,nodeInternals:ne,edges:J,transform:re,onNodesChange:G,onEdgesChange:q,nodeOrigin:W,getNodes:ie}=g.getState();if(!t||!_.current||!H)return;g.setState({userSelectionActive:!0,nodesSelectionActive:!1});const j=Af(Q,_.current),Y=H.startX??0,ee=H.startY??0,te={...H,x:j.x<Y?j.x:Y,y:j.y<ee?j.y:ee,width:Math.abs(j.x-Y),height:Math.abs(j.y-ee)},ce=ie(),be=oH(ne,te,re,e===Kx.Partial,!0,W),he=lH(be,J).map(ge=>ge.id),fe=be.map(ge=>ge.id);if(b.current!==fe.length){b.current=fe.length;const ge=dm(ce,fe);ge.length&&(G==null||G(ge))}if(y.current!==he.length){y.current=he.length;const ge=dm(J,he);ge.length&&(q==null||q(ge))}g.setState({userSelectionRect:te})},O=Q=>{if(Q.button!==0)return;const{userSelectionRect:H}=g.getState();!T&&H&&Q.target===m.current&&(P==null||P(Q)),g.setState({nodesSelectionActive:b.current>0}),M(),s==null||s(Q)},R=Q=>{T&&(g.setState({nodesSelectionActive:b.current>0}),s==null||s(Q)),M()},F=k&&(t||T);return dt.createElement("div",{className:lo(["react-flow__pane",{dragging:D,selection:t}]),onClick:F?void 0:E_(P,m),onContextMenu:E_(L,m),onWheel:E_(C,m),onMouseEnter:F?void 0:l,onMouseDown:F?E:void 0,onMouseMove:F?B:u,onMouseUp:F?O:void 0,onMouseLeave:F?R:d,ref:m,style:cN},h,dt.createElement(wBe,null))});TH.displayName="Pane";function NH(t,e){const r=t.parentNode||t.parentId;if(!r)return!1;const n=e.get(r);return n?n.selected?!0:NH(n,e):!1}function TL(t,e,r){let n=t;do{if(n!=null&&n.matches(e))return!0;if(n===r.current)return!1;n=n.parentElement}while(n);return!1}function EBe(t,e,r,n){return Array.from(t.values()).filter(s=>(s.selected||s.id===n)&&(!s.parentNode||s.parentId||!NH(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>{var a,i;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:r.y-(((i=s.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function _Be(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function BH(t,e,r,n,s=[0,0],a){const i=_Be(t,t.extent||n);let o=i;const l=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(l&&t.width&&t.height){const h=r.get(l),{x:m,y:g}=Fm(h,s).positionAbsolute;o=h&&ql(m)&&ql(g)&&ql(h.width)&&ql(h.height)?[[m+t.width*s[0],g+t.height*s[1]],[m+h.width-t.width+t.width*s[0],g+h.height-t.height+t.height*s[1]]]:o}else a==null||a("005",HA.error005()),o=i;else if(t.extent&&l&&t.extent!=="parent"){const h=r.get(l),{x:m,y:g}=Fm(h,s).positionAbsolute;o=[[t.extent[0][0]+m,t.extent[0][1]+g],[t.extent[1][0]+m,t.extent[1][1]+g]]}let u={x:0,y:0};if(l){const h=r.get(l);u=Fm(h,s).positionAbsolute}const d=o&&o!=="parent"?eN(e,o):e;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function __({nodeId:t,dragItems:e,nodeInternals:r}){const n=e.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?n.find(s=>s.id===t):n[0],n]}const NL=(t,e,r,n)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),i=e.getBoundingClientRect(),o={x:i.width*n[0],y:i.height*n[1]};return a.map(l=>{const u=l.getBoundingClientRect();return{id:l.getAttribute("data-handleid"),position:l.getAttribute("data-handlepos"),x:(u.left-i.left-o.x)/r,y:(u.top-i.top-o.y)/r,...ZT(l)}})};function mg(t,e,r){return r===void 0?r:n=>{const s=e().nodeInternals.get(t);s&&r(n,{...s})}}function E5({id:t,store:e,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:i,nodeInternals:o,onError:l}=e.getState(),u=o.get(t);if(!u){l==null||l("012",HA.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&i)&&(a({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=n==null?void 0:n.current)==null?void 0:d.blur()})):s([t])}function SBe(){const t=ei();return Z.useCallback(({sourceEvent:r})=>{const{transform:n,snapGrid:s,snapToGrid:a}=t.getState(),i=r.touches?r.touches[0].clientX:r.clientX,o=r.touches?r.touches[0].clientY:r.clientY,l={x:(i-n[0])/n[2],y:(o-n[1])/n[2]};return{xSnapped:a?s[0]*Math.round(l.x/s[0]):l.x,ySnapped:a?s[1]*Math.round(l.y/s[1]):l.y,...l}},[])}function S_(t){return(e,r,n)=>t==null?void 0:t(e,n)}function kH({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:n,nodeId:s,isSelectable:a,selectNodesOnDrag:i}){const o=ei(),[l,u]=Z.useState(!1),d=Z.useRef([]),h=Z.useRef({x:null,y:null}),m=Z.useRef(0),g=Z.useRef(null),b=Z.useRef({x:0,y:0}),y=Z.useRef(null),_=Z.useRef(!1),T=Z.useRef(!1),k=Z.useRef(!1),D=SBe();return Z.useEffect(()=>{if(t!=null&&t.current){const M=Sc(t.current),P=({x:E,y:B})=>{const{nodeInternals:O,onNodeDrag:R,onSelectionDrag:F,updateNodePositions:Q,nodeExtent:H,snapGrid:ne,snapToGrid:J,nodeOrigin:re,onError:G}=o.getState();h.current={x:E,y:B};let q=!1,W={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&H){const j=iN(d.current,re);W=tN(j)}if(d.current=d.current.map(j=>{const Y={x:E-j.distance.x,y:B-j.distance.y};J&&(Y.x=ne[0]*Math.round(Y.x/ne[0]),Y.y=ne[1]*Math.round(Y.y/ne[1]));const ee=[[H[0][0],H[0][1]],[H[1][0],H[1][1]]];d.current.length>1&&H&&!j.extent&&(ee[0][0]=j.positionAbsolute.x-W.x+H[0][0],ee[1][0]=j.positionAbsolute.x+(j.width??0)-W.x2+H[1][0],ee[0][1]=j.positionAbsolute.y-W.y+H[0][1],ee[1][1]=j.positionAbsolute.y+(j.height??0)-W.y2+H[1][1]);const te=BH(j,Y,O,ee,re,G);return q=q||j.position.x!==te.position.x||j.position.y!==te.position.y,j.position=te.position,j.positionAbsolute=te.positionAbsolute,j}),!q)return;Q(d.current,!0,!0),u(!0);const ie=s?R:S_(F);if(ie&&y.current){const[j,Y]=__({nodeId:s,dragItems:d.current,nodeInternals:O});ie(y.current,j,Y)}},L=()=>{if(!g.current)return;const[E,B]=XQ(b.current,g.current);if(E!==0||B!==0){const{transform:O,panBy:R}=o.getState();h.current.x=(h.current.x??0)-E/O[2],h.current.y=(h.current.y??0)-B/O[2],R({x:E,y:B})&&P(h.current)}m.current=requestAnimationFrame(L)},C=E=>{var re;const{nodeInternals:B,multiSelectionActive:O,nodesDraggable:R,unselectNodesAndEdges:F,onNodeDragStart:Q,onSelectionDragStart:H}=o.getState();T.current=!0;const ne=s?Q:S_(H);(!i||!a)&&!O&&s&&((re=B.get(s))!=null&&re.selected||F()),s&&a&&i&&E5({id:s,store:o,nodeRef:t});const J=D(E);if(h.current=J,d.current=EBe(B,R,J,s),ne&&d.current){const[G,q]=__({nodeId:s,dragItems:d.current,nodeInternals:B});ne(E.sourceEvent,G,q)}};if(e)M.on(".drag",null);else{const E=L4e().on("start",B=>{const{domNode:O,nodeDragThreshold:R}=o.getState();R===0&&C(B),k.current=!1;const F=D(B);h.current=F,g.current=(O==null?void 0:O.getBoundingClientRect())||null,b.current=Af(B.sourceEvent,g.current)}).on("drag",B=>{var Q,H;const O=D(B),{autoPanOnNodeDrag:R,nodeDragThreshold:F}=o.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(k.current=!0),!k.current){if(!_.current&&T.current&&R&&(_.current=!0,L()),!T.current){const ne=O.xSnapped-(((Q=h==null?void 0:h.current)==null?void 0:Q.x)??0),J=O.ySnapped-(((H=h==null?void 0:h.current)==null?void 0:H.y)??0);Math.sqrt(ne*ne+J*J)>F&&C(B)}(h.current.x!==O.xSnapped||h.current.y!==O.ySnapped)&&d.current&&T.current&&(y.current=B.sourceEvent,b.current=Af(B.sourceEvent,g.current),P(O))}}).on("end",B=>{if(!(!T.current||k.current)&&(u(!1),_.current=!1,T.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:O,nodeInternals:R,onNodeDragStop:F,onSelectionDragStop:Q}=o.getState(),H=s?F:S_(Q);if(O(d.current,!1,!1),H){const[ne,J]=__({nodeId:s,dragItems:d.current,nodeInternals:R});H(B.sourceEvent,ne,J)}}}).filter(B=>{const O=B.target;return!B.button&&(!r||!TL(O,`.${r}`,t))&&(!n||TL(O,n,t))});return M.call(E),()=>{M.on(".drag",null)}}}},[t,e,r,n,a,o,s,i,D]),l}function IH(){const t=ei();return Z.useCallback(r=>{const{nodeInternals:n,nodeExtent:s,updateNodePositions:a,getNodes:i,snapToGrid:o,snapGrid:l,onError:u,nodesDraggable:d}=t.getState(),h=i().filter(k=>k.selected&&(k.draggable||d&&typeof k.draggable>"u")),m=o?l[0]:5,g=o?l[1]:5,b=r.isShiftPressed?4:1,y=r.x*m*b,_=r.y*g*b,T=h.map(k=>{if(k.positionAbsolute){const D={x:k.positionAbsolute.x+y,y:k.positionAbsolute.y+_};o&&(D.x=l[0]*Math.round(D.x/l[0]),D.y=l[1]*Math.round(D.y/l[1]));const{positionAbsolute:M,position:P}=BH(k,D,n,s,void 0,u);k.position=P,k.positionAbsolute=M}return k});a(T,!0,!1)},[])}const Dm={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var pg=t=>{const e=({id:r,type:n,data:s,xPos:a,yPos:i,xPosOrigin:o,yPosOrigin:l,selected:u,onClick:d,onMouseEnter:h,onMouseMove:m,onMouseLeave:g,onContextMenu:b,onDoubleClick:y,style:_,className:T,isDraggable:k,isSelectable:D,isConnectable:M,isFocusable:P,selectNodesOnDrag:L,sourcePosition:C,targetPosition:E,hidden:B,resizeObserver:O,dragHandle:R,zIndex:F,isParent:Q,noDragClassName:H,noPanClassName:ne,initialized:J,disableKeyboardA11y:re,ariaLabel:G,rfId:q,hasHandleBounds:W})=>{const ie=ei(),j=Z.useRef(null),Y=Z.useRef(null),ee=Z.useRef(C),te=Z.useRef(E),ce=Z.useRef(n),be=D||k||d||h||m||g,he=IH(),fe=mg(r,ie.getState,h),ge=mg(r,ie.getState,m),de=mg(r,ie.getState,g),oe=mg(r,ie.getState,b),Ue=mg(r,ie.getState,y),tt=De=>{const{nodeDragThreshold:Qe}=ie.getState();if(D&&(!L||!k||Qe>0)&&E5({id:r,store:ie,nodeRef:j}),d){const $e=ie.getState().nodeInternals.get(r);$e&&d(De,{...$e})}},Fe=De=>{if(!v5(De)&&!re)if(eH.includes(De.key)&&D){const Qe=De.key==="Escape";E5({id:r,store:ie,unselect:Qe,nodeRef:j})}else k&&u&&Object.prototype.hasOwnProperty.call(Dm,De.key)&&(ie.setState({ariaLiveMessage:`Moved selected node ${De.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~i}`}),he({x:Dm[De.key].x,y:Dm[De.key].y,isShiftPressed:De.shiftKey}))};Z.useEffect(()=>()=>{Y.current&&(O==null||O.unobserve(Y.current),Y.current=null)},[]),Z.useEffect(()=>{if(j.current&&!B){const De=j.current;(!J||!W||Y.current!==De)&&(Y.current&&(O==null||O.unobserve(Y.current)),O==null||O.observe(De),Y.current=De)}},[B,J,W]),Z.useEffect(()=>{const De=ce.current!==n,Qe=ee.current!==C,$e=te.current!==E;j.current&&(De||Qe||$e)&&(De&&(ce.current=n),Qe&&(ee.current=C),$e&&(te.current=E),ie.getState().updateNodeDimensions([{id:r,nodeElement:j.current,forceUpdate:!0}]))},[r,n,C,E]);const Ee=kH({nodeRef:j,disabled:B||!k,noDragClassName:H,handleSelector:R,nodeId:r,isSelectable:D,selectNodesOnDrag:L});return B?null:dt.createElement("div",{className:lo(["react-flow__node",`react-flow__node-${n}`,{[ne]:k},T,{selected:u,selectable:D,parent:Q,dragging:Ee}]),ref:j,style:{zIndex:F,transform:`translate(${o}px,${l}px)`,pointerEvents:be?"all":"none",visibility:J?"visible":"hidden",..._},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:fe,onMouseMove:ge,onMouseLeave:de,onContextMenu:oe,onClick:tt,onDoubleClick:Ue,onKeyDown:P?Fe:void 0,tabIndex:P?0:void 0,role:P?"button":void 0,"aria-describedby":re?void 0:`${yH}-${q}`,"aria-label":G},dt.createElement(ONe,{value:r},dt.createElement(t,{id:r,data:s,type:n,xPos:a,yPos:i,selected:u,isConnectable:M,sourcePosition:C,targetPosition:E,dragging:Ee,dragHandle:R,zIndex:F})))};return e.displayName="NodeWrapper",Z.memo(e)};const TBe=t=>{const e=t.getNodes().filter(r=>r.selected);return{...iN(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function NBe({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const n=ei(),{width:s,height:a,x:i,y:o,transformString:l,userSelectionActive:u}=Rs(TBe,Yi),d=IH(),h=Z.useRef(null);if(Z.useEffect(()=>{var b;r||(b=h.current)==null||b.focus({preventScroll:!0})},[r]),kH({nodeRef:h}),u||!s||!a)return null;const m=t?b=>{const y=n.getState().getNodes().filter(_=>_.selected);t(b,y)}:void 0,g=b=>{Object.prototype.hasOwnProperty.call(Dm,b.key)&&d({x:Dm[b.key].x,y:Dm[b.key].y,isShiftPressed:b.shiftKey})};return dt.createElement("div",{className:lo(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},dt.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:g,style:{width:s,height:a,top:o,left:i}}))}var BBe=Z.memo(NBe);const kBe=t=>t.nodesSelectionActive,FH=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,deleteKeyCode:o,onMove:l,onMoveStart:u,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:m,selectionMode:g,onSelectionStart:b,onSelectionEnd:y,multiSelectionKeyCode:_,panActivationKeyCode:T,zoomActivationKeyCode:k,elementsSelectable:D,zoomOnScroll:M,zoomOnPinch:P,panOnScroll:L,panOnScrollSpeed:C,panOnScrollMode:E,zoomOnDoubleClick:B,panOnDrag:O,defaultViewport:R,translateExtent:F,minZoom:Q,maxZoom:H,preventScrolling:ne,onSelectionContextMenu:J,noWheelClassName:re,noPanClassName:G,disableKeyboardA11y:q})=>{const W=Rs(kBe),ie=$x(h),j=$x(T),Y=j||O,ee=j||L,te=ie||m&&Y!==!0;return mBe({deleteKeyCode:o,multiSelectionKeyCode:_}),dt.createElement(vBe,{onMove:l,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:D,zoomOnScroll:M,zoomOnPinch:P,panOnScroll:ee,panOnScrollSpeed:C,panOnScrollMode:E,zoomOnDoubleClick:B,panOnDrag:!ie&&Y,defaultViewport:R,translateExtent:F,minZoom:Q,maxZoom:H,zoomActivationKeyCode:k,preventScrolling:ne,noWheelClassName:re,noPanClassName:G},dt.createElement(TH,{onSelectionStart:b,onSelectionEnd:y,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:i,panOnDrag:Y,isSelecting:!!te,selectionMode:g},t,W&&dt.createElement(BBe,{onSelectionContextMenu:J,noPanClassName:G,disableKeyboardA11y:q})))};FH.displayName="FlowRenderer";var IBe=Z.memo(FH);function FBe(t){return Rs(Z.useCallback(r=>t?oH(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function DBe(t){const e={input:pg(t.input||pH),default:pg(t.default||C5),output:pg(t.output||xH),group:pg(t.group||lN)},r={},n=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=pg(t[a]||C5),s),r);return{...e,...n}}const RBe=({x:t,y:e,width:r,height:n,origin:s})=>!r||!n?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-r*s[0],y:e-n*s[1]},LBe=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),DH=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:n,elementsSelectable:s,updateNodeDimensions:a,onError:i}=Rs(LBe,Yi),o=FBe(t.onlyRenderVisibleElements),l=Z.useRef(),u=Z.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const m=h.map(g=>({id:g.target.getAttribute("data-id"),nodeElement:g.target,forceUpdate:!0}));a(m)});return l.current=d,d},[]);return Z.useEffect(()=>()=>{var d;(d=l==null?void 0:l.current)==null||d.disconnect()},[]),dt.createElement("div",{className:"react-flow__nodes",style:cN},o.map(d=>{var P,L,C;let h=d.type||"default";t.nodeTypes[h]||(i==null||i("003",HA.error003(h)),h="default");const m=t.nodeTypes[h]||t.nodeTypes.default,g=!!(d.draggable||e&&typeof d.draggable>"u"),b=!!(d.selectable||s&&typeof d.selectable>"u"),y=!!(d.connectable||r&&typeof d.connectable>"u"),_=!!(d.focusable||n&&typeof d.focusable>"u"),T=t.nodeExtent?eN(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,k=(T==null?void 0:T.x)??0,D=(T==null?void 0:T.y)??0,M=RBe({x:k,y:D,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return dt.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||cr.Bottom,targetPosition:d.targetPosition||cr.Top,hidden:d.hidden,xPos:k,yPos:D,xPosOrigin:M.x,yPosOrigin:M.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:g,isSelectable:b,isConnectable:y,isFocusable:_,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((P=d[qs])==null?void 0:P.z)??0,isParent:!!((L=d[qs])!=null&&L.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((C=d[qs])!=null&&C.handleBounds)})}))};DH.displayName="NodeRenderer";var UBe=Z.memo(DH);const MBe=(t,e,r)=>r===cr.Left?t-e:r===cr.Right?t+e:t,PBe=(t,e,r)=>r===cr.Top?t-e:r===cr.Bottom?t+e:t,BL="react-flow__edgeupdater",kL=({position:t,centerX:e,centerY:r,radius:n=10,onMouseDown:s,onMouseEnter:a,onMouseOut:i,type:o})=>dt.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:i,className:lo([BL,`${BL}-${o}`]),cx:MBe(e,n,t),cy:PBe(r,n,t),r:n,stroke:"transparent",fill:"transparent"}),jBe=()=>!0;var W0=t=>{const e=({id:r,className:n,type:s,data:a,onClick:i,onEdgeDoubleClick:o,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,style:_,source:T,target:k,sourceX:D,sourceY:M,targetX:P,targetY:L,sourcePosition:C,targetPosition:E,elementsSelectable:B,hidden:O,sourceHandleId:R,targetHandleId:F,onContextMenu:Q,onMouseEnter:H,onMouseMove:ne,onMouseLeave:J,reconnectRadius:re,onReconnect:G,onReconnectStart:q,onReconnectEnd:W,markerEnd:ie,markerStart:j,rfId:Y,ariaLabel:ee,isFocusable:te,isReconnectable:ce,pathOptions:be,interactionWidth:he,disableKeyboardA11y:fe})=>{const ge=Z.useRef(null),[de,oe]=Z.useState(!1),[Ue,tt]=Z.useState(!1),Fe=ei(),Ee=Z.useMemo(()=>`url('#${w5(j,Y)}')`,[j,Y]),De=Z.useMemo(()=>`url('#${w5(ie,Y)}')`,[ie,Y]);if(O)return null;const Qe=pt=>{var Dn;const{edges:br,addSelectedEdges:Zt,unselectNodesAndEdges:hn,multiSelectionActive:vr}=Fe.getState(),Ur=br.find(Fr=>Fr.id===r);Ur&&(B&&(Fe.setState({nodesSelectionActive:!1}),Ur.selected&&vr?(hn({nodes:[],edges:[Ur]}),(Dn=ge.current)==null||Dn.blur()):Zt([r])),i&&i(pt,Ur))},$e=hg(r,Fe.getState,o),ut=hg(r,Fe.getState,Q),Et=hg(r,Fe.getState,H),lt=hg(r,Fe.getState,ne),Dt=hg(r,Fe.getState,J),zt=(pt,br)=>{if(pt.button!==0)return;const{edges:Zt,isValidConnection:hn}=Fe.getState(),vr=br?k:T,Ur=(br?F:R)||null,Dn=br?"target":"source",Fr=hn||jBe,da=br,an=Zt.find(jr=>jr.id===r);tt(!0),q==null||q(pt,an,Dn);const ns=jr=>{tt(!1),W==null||W(jr,an,Dn)};dH({event:pt,handleId:Ur,nodeId:vr,onConnect:jr=>G==null?void 0:G(an,jr),isTarget:da,getState:Fe.getState,setState:Fe.setState,isValidConnection:Fr,edgeUpdaterType:Dn,onReconnectEnd:ns})},Jt=pt=>zt(pt,!0),Rt=pt=>zt(pt,!1),Ot=()=>oe(!0),qt=()=>oe(!1),It=!B&&!i,Ft=pt=>{var br;if(!fe&&eH.includes(pt.key)&&B){const{unselectNodesAndEdges:Zt,addSelectedEdges:hn,edges:vr}=Fe.getState();pt.key==="Escape"?((br=ge.current)==null||br.blur(),Zt({edges:[vr.find(Dn=>Dn.id===r)]})):hn([r])}};return dt.createElement("g",{className:lo(["react-flow__edge",`react-flow__edge-${s}`,n,{selected:l,animated:u,inactive:It,updating:de}]),onClick:Qe,onDoubleClick:$e,onContextMenu:ut,onMouseEnter:Et,onMouseMove:lt,onMouseLeave:Dt,onKeyDown:te?Ft:void 0,tabIndex:te?0:void 0,role:te?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":ee===null?void 0:ee||`Edge from ${T} to ${k}`,"aria-describedby":te?`${wH}-${Y}`:void 0,ref:ge},!Ue&&dt.createElement(t,{id:r,source:T,target:k,selected:l,animated:u,label:d,labelStyle:h,labelShowBg:m,labelBgStyle:g,labelBgPadding:b,labelBgBorderRadius:y,data:a,style:_,sourceX:D,sourceY:M,targetX:P,targetY:L,sourcePosition:C,targetPosition:E,sourceHandleId:R,targetHandleId:F,markerStart:Ee,markerEnd:De,pathOptions:be,interactionWidth:he}),ce&&dt.createElement(dt.Fragment,null,(ce==="source"||ce===!0)&&dt.createElement(kL,{position:C,centerX:D,centerY:M,radius:re,onMouseDown:Jt,onMouseEnter:Ot,onMouseOut:qt,type:"source"}),(ce==="target"||ce===!0)&&dt.createElement(kL,{position:E,centerX:P,centerY:L,radius:re,onMouseDown:Rt,onMouseEnter:Ot,onMouseOut:qt,type:"target"})))};return e.displayName="EdgeWrapper",Z.memo(e)};function OBe(t){const e={default:W0(t.default||mw),straight:W0(t.bezier||sN),step:W0(t.step||nN),smoothstep:W0(t.step||Ib),simplebezier:W0(t.simplebezier||rN)},r={},n=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=W0(t[a]||mw),s),r);return{...e,...n}}function IL(t,e,r=null){const n=((r==null?void 0:r.x)||0)+e.x,s=((r==null?void 0:r.y)||0)+e.y,a=(r==null?void 0:r.width)||e.width,i=(r==null?void 0:r.height)||e.height;switch(t){case cr.Top:return{x:n+a/2,y:s};case cr.Right:return{x:n+a,y:s+i/2};case cr.Bottom:return{x:n+a/2,y:s+i};case cr.Left:return{x:n,y:s+i/2}}}function FL(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const QBe=(t,e,r,n,s,a)=>{const i=IL(r,t,e),o=IL(a,n,s);return{sourceX:i.x,sourceY:i.y,targetX:o.x,targetY:o.y}};function HBe({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:n,targetWidth:s,targetHeight:a,width:i,height:o,transform:l}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+s),y2:Math.max(t.y+n,e.y+a)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=tN({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),h=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),m=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(h*m)>0}function DL(t){var n,s,a,i,o;const e=((n=t==null?void 0:t[qs])==null?void 0:n.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)||0,y:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const VBe=[{level:0,isMaxLevel:!0,edges:[]}];function zBe(t,e,r=!1){let n=-1;const s=t.reduce((i,o)=>{var d,h;const l=ql(o.zIndex);let u=l?o.zIndex:0;if(r){const m=e.get(o.target),g=e.get(o.source),b=o.selected||(m==null?void 0:m.selected)||(g==null?void 0:g.selected),y=Math.max(((d=g==null?void 0:g[qs])==null?void 0:d.z)||0,((h=m==null?void 0:m[qs])==null?void 0:h.z)||0,1e3);u=(l?o.zIndex:0)+(b?y:0)}return i[u]?i[u].push(o):i[u]=[o],n=u>n?u:n,i},{}),a=Object.entries(s).map(([i,o])=>{const l=+i;return{edges:o,level:l,isMaxLevel:l===n}});return a.length===0?VBe:a}function GBe(t,e,r){const n=Rs(Z.useCallback(s=>t?s.edges.filter(a=>{const i=e.get(a.source),o=e.get(a.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&HBe({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:o.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:o.width,targetHeight:o.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return zBe(n,e,r)}const qBe=({color:t="none",strokeWidth:e=1})=>dt.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),KBe=({color:t="none",strokeWidth:e=1})=>dt.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),RL={[hw.Arrow]:qBe,[hw.ArrowClosed]:KBe};function $Be(t){const e=ei();return Z.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(RL,t)?RL[t]:((a=(s=e.getState()).onError)==null||a.call(s,"009",HA.error009(t)),null)},[t])}const WBe=({id:t,type:e,color:r,width:n=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:i,orient:o="auto-start-reverse"})=>{const l=$Be(e);return l?dt.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${n}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:o,refX:"0",refY:"0"},dt.createElement(l,{color:r,strokeWidth:i})):null},YBe=({defaultColor:t,rfId:e})=>r=>{const n=[];return r.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const o=w5(i,e);n.includes(o)||(s.push({id:o,color:i.color||t,...i}),n.push(o))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},RH=({defaultColor:t,rfId:e})=>{const r=Rs(Z.useCallback(YBe({defaultColor:t,rfId:e}),[t,e]),(n,s)=>!(n.length!==s.length||n.some((a,i)=>a.id!==s[i].id)));return dt.createElement("defs",null,r.map(n=>dt.createElement(WBe,{id:n.id,key:n.id,type:n.type,color:n.color,width:n.width,height:n.height,markerUnits:n.markerUnits,strokeWidth:n.strokeWidth,orient:n.orient})))};RH.displayName="MarkerDefinitions";var JBe=Z.memo(RH);const XBe=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),LH=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:n,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:i,onEdgeMouseEnter:o,onEdgeMouseMove:l,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,children:_,disableKeyboardA11y:T})=>{const{edgesFocusable:k,edgesUpdatable:D,elementsSelectable:M,width:P,height:L,connectionMode:C,nodeInternals:E,onError:B}=Rs(XBe,Yi),O=GBe(e,E,r);return P?dt.createElement(dt.Fragment,null,O.map(({level:R,edges:F,isMaxLevel:Q})=>dt.createElement("svg",{key:R,style:{zIndex:R},width:P,height:L,className:"react-flow__edges react-flow__container"},Q&&dt.createElement(JBe,{defaultColor:t,rfId:n}),dt.createElement("g",null,F.map(H=>{const[ne,J,re]=DL(E.get(H.source)),[G,q,W]=DL(E.get(H.target));if(!re||!W)return null;let ie=H.type||"default";s[ie]||(B==null||B("011",HA.error011(ie)),ie="default");const j=s[ie]||s.default,Y=C===Qh.Strict?q.target:(q.target??[]).concat(q.source??[]),ee=FL(J.source,H.sourceHandle),te=FL(Y,H.targetHandle),ce=(ee==null?void 0:ee.position)||cr.Bottom,be=(te==null?void 0:te.position)||cr.Top,he=!!(H.focusable||k&&typeof H.focusable>"u"),fe=H.reconnectable||H.updatable,ge=typeof m<"u"&&(fe||D&&typeof fe>"u");if(!ee||!te)return B==null||B("008",HA.error008(ee,H)),null;const{sourceX:de,sourceY:oe,targetX:Ue,targetY:tt}=QBe(ne,ee,ce,G,te,be);return dt.createElement(j,{key:H.id,id:H.id,className:lo([H.className,a]),type:ie,data:H.data,selected:!!H.selected,animated:!!H.animated,hidden:!!H.hidden,label:H.label,labelStyle:H.labelStyle,labelShowBg:H.labelShowBg,labelBgStyle:H.labelBgStyle,labelBgPadding:H.labelBgPadding,labelBgBorderRadius:H.labelBgBorderRadius,style:H.style,source:H.source,target:H.target,sourceHandleId:H.sourceHandle,targetHandleId:H.targetHandle,markerEnd:H.markerEnd,markerStart:H.markerStart,sourceX:de,sourceY:oe,targetX:Ue,targetY:tt,sourcePosition:ce,targetPosition:be,elementsSelectable:M,onContextMenu:i,onMouseEnter:o,onMouseMove:l,onMouseLeave:u,onClick:d,onEdgeDoubleClick:h,onReconnect:m,onReconnectStart:g,onReconnectEnd:b,reconnectRadius:y,rfId:n,ariaLabel:H.ariaLabel,isFocusable:he,isReconnectable:ge,pathOptions:"pathOptions"in H?H.pathOptions:void 0,interactionWidth:H.interactionWidth,disableKeyboardA11y:T})})))),_):null};LH.displayName="EdgeRenderer";var ZBe=Z.memo(LH);const eke=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function tke({children:t}){const e=Rs(eke);return dt.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function rke(t){const e=Fb(),r=Z.useRef(!1);Z.useEffect(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const nke={[cr.Left]:cr.Right,[cr.Right]:cr.Left,[cr.Top]:cr.Bottom,[cr.Bottom]:cr.Top},UH=({nodeId:t,handleType:e,style:r,type:n=Kd.Bezier,CustomComponent:s,connectionStatus:a})=>{var L,C,E;const{fromNode:i,handleId:o,toX:l,toY:u,connectionMode:d}=Rs(Z.useCallback(B=>({fromNode:B.nodeInternals.get(t),handleId:B.connectionHandleId,toX:(B.connectionPosition.x-B.transform[0])/B.transform[2],toY:(B.connectionPosition.y-B.transform[1])/B.transform[2],connectionMode:B.connectionMode}),[t]),Yi),h=(L=i==null?void 0:i[qs])==null?void 0:L.handleBounds;let m=h==null?void 0:h[e];if(d===Qh.Loose&&(m=m||(h==null?void 0:h[e==="source"?"target":"source"])),!i||!m)return null;const g=o?m.find(B=>B.id===o):m[0],b=g?g.x+g.width/2:(i.width??0)/2,y=g?g.y+g.height/2:i.height??0,_=(((C=i.positionAbsolute)==null?void 0:C.x)??0)+b,T=(((E=i.positionAbsolute)==null?void 0:E.y)??0)+y,k=g==null?void 0:g.position,D=k?nke[k]:null;if(!k||!D)return null;if(s)return dt.createElement(s,{connectionLineType:n,connectionLineStyle:r,fromNode:i,fromHandle:g,fromX:_,fromY:T,toX:l,toY:u,fromPosition:k,toPosition:D,connectionStatus:a});let M="";const P={sourceX:_,sourceY:T,sourcePosition:k,targetX:l,targetY:u,targetPosition:D};return n===Kd.Bezier?[M]=aH(P):n===Kd.Step?[M]=y5({...P,borderRadius:0}):n===Kd.SmoothStep?[M]=y5(P):n===Kd.SimpleBezier?[M]=sH(P):M=`M${_},${T} ${l},${u}`,dt.createElement("path",{d:M,fill:"none",className:"react-flow__connection-path",style:r})};UH.displayName="ConnectionLine";const ske=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function ake({containerStyle:t,style:e,type:r,component:n}){const{nodeId:s,handleType:a,nodesConnectable:i,width:o,height:l,connectionStatus:u}=Rs(ske,Yi);return!(s&&a&&o&&i)?null:dt.createElement("svg",{style:t,width:o,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},dt.createElement("g",{className:lo(["react-flow__connection",u])},dt.createElement(UH,{nodeId:s,handleType:a,style:e,type:r,CustomComponent:n,connectionStatus:u})))}function LL(t,e){return Z.useRef(null),ei(),Z.useMemo(()=>e(t),[t])}const MH=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:n,onMoveEnd:s,onInit:a,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,onSelectionContextMenu:b,onSelectionStart:y,onSelectionEnd:_,connectionLineType:T,connectionLineStyle:k,connectionLineComponent:D,connectionLineContainerStyle:M,selectionKeyCode:P,selectionOnDrag:L,selectionMode:C,multiSelectionKeyCode:E,panActivationKeyCode:B,zoomActivationKeyCode:O,deleteKeyCode:R,onlyRenderVisibleElements:F,elementsSelectable:Q,selectNodesOnDrag:H,defaultViewport:ne,translateExtent:J,minZoom:re,maxZoom:G,preventScrolling:q,defaultMarkerColor:W,zoomOnScroll:ie,zoomOnPinch:j,panOnScroll:Y,panOnScrollSpeed:ee,panOnScrollMode:te,zoomOnDoubleClick:ce,panOnDrag:be,onPaneClick:he,onPaneMouseEnter:fe,onPaneMouseMove:ge,onPaneMouseLeave:de,onPaneScroll:oe,onPaneContextMenu:Ue,onEdgeContextMenu:tt,onEdgeMouseEnter:Fe,onEdgeMouseMove:Ee,onEdgeMouseLeave:De,onReconnect:Qe,onReconnectStart:$e,onReconnectEnd:ut,reconnectRadius:Et,noDragClassName:lt,noWheelClassName:Dt,noPanClassName:zt,elevateEdgesOnSelect:Jt,disableKeyboardA11y:Rt,nodeOrigin:Ot,nodeExtent:qt,rfId:It})=>{const Ft=LL(t,DBe),pt=LL(e,OBe);return rke(a),dt.createElement(IBe,{onPaneClick:he,onPaneMouseEnter:fe,onPaneMouseMove:ge,onPaneMouseLeave:de,onPaneContextMenu:Ue,onPaneScroll:oe,deleteKeyCode:R,selectionKeyCode:P,selectionOnDrag:L,selectionMode:C,onSelectionStart:y,onSelectionEnd:_,multiSelectionKeyCode:E,panActivationKeyCode:B,zoomActivationKeyCode:O,elementsSelectable:Q,onMove:r,onMoveStart:n,onMoveEnd:s,zoomOnScroll:ie,zoomOnPinch:j,zoomOnDoubleClick:ce,panOnScroll:Y,panOnScrollSpeed:ee,panOnScrollMode:te,panOnDrag:be,defaultViewport:ne,translateExtent:J,minZoom:re,maxZoom:G,onSelectionContextMenu:b,preventScrolling:q,noDragClassName:lt,noWheelClassName:Dt,noPanClassName:zt,disableKeyboardA11y:Rt},dt.createElement(tke,null,dt.createElement(ZBe,{edgeTypes:pt,onEdgeClick:o,onEdgeDoubleClick:u,onlyRenderVisibleElements:F,onEdgeContextMenu:tt,onEdgeMouseEnter:Fe,onEdgeMouseMove:Ee,onEdgeMouseLeave:De,onReconnect:Qe,onReconnectStart:$e,onReconnectEnd:ut,reconnectRadius:Et,defaultMarkerColor:W,noPanClassName:zt,elevateEdgesOnSelect:!!Jt,disableKeyboardA11y:Rt,rfId:It},dt.createElement(ake,{style:k,type:T,component:D,containerStyle:M})),dt.createElement("div",{className:"react-flow__edgelabel-renderer"}),dt.createElement(UBe,{nodeTypes:Ft,onNodeClick:i,onNodeDoubleClick:l,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:m,onNodeContextMenu:g,selectNodesOnDrag:H,onlyRenderVisibleElements:F,noPanClassName:zt,noDragClassName:lt,disableKeyboardA11y:Rt,nodeOrigin:Ot,nodeExtent:qt,rfId:It})))};MH.displayName="GraphView";var ike=Z.memo(MH);const _5=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ld={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:_5,nodeExtent:_5,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Qh.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:RNe,isValidConnection:void 0},oke=()=>KSe((t,e)=>({...Ld,setNodes:r=>{const{nodeInternals:n,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:C_(r,n,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:n={}}=e();t({edges:r.map(s=>({...n,...s}))})},setDefaultNodesAndEdges:(r,n)=>{const s=typeof r<"u",a=typeof n<"u",i=s?C_(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:i,edges:a?n:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:r=>{const{onNodesChange:n,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:i,fitViewOnInitOptions:o,domNode:l,nodeOrigin:u}=e(),d=l==null?void 0:l.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(h.transform),g=r.reduce((y,_)=>{const T=s.get(_.id);if(T!=null&&T.hidden)s.set(T.id,{...T,[qs]:{...T[qs],handleBounds:void 0}});else if(T){const k=ZT(_.nodeElement);!!(k.width&&k.height&&(T.width!==k.width||T.height!==k.height||_.forceUpdate))&&(s.set(T.id,{...T,[qs]:{...T[qs],handleBounds:{source:NL(".source",_.nodeElement,m,u),target:NL(".target",_.nodeElement,m,u)}},...k}),y.push({id:T.id,type:"dimensions",dimensions:k}))}return y},[]);CH(s,u);const b=i||a&&!i&&EH(e,{initial:!0,...o});t({nodeInternals:new Map(s),fitViewOnInitDone:b}),(g==null?void 0:g.length)>0&&(n==null||n(g))},updateNodePositions:(r,n=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),i=r.map(o=>{const l={id:o.id,type:"position",dragging:s};return n&&(l.positionAbsolute=o.positionAbsolute,l.position=o.position),l});a(i)},triggerNodeChanges:r=>{const{onNodesChange:n,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:i,getNodes:o,elevateNodesOnSelect:l}=e();if(r!=null&&r.length){if(a){const u=SH(r,o()),d=C_(u,s,i,l);t({nodeInternals:d})}n==null||n(r)}},addSelectedNodes:r=>{const{multiSelectionActive:n,edges:s,getNodes:a}=e();let i,o=null;n?i=r.map(l=>Qd(l,!0)):(i=dm(a(),r),o=dm(s,[])),Iy({changedNodes:i,changedEdges:o,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:n,edges:s,getNodes:a}=e();let i,o=null;n?i=r.map(l=>Qd(l,!0)):(i=dm(s,r),o=dm(a(),[])),Iy({changedNodes:o,changedEdges:i,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:n}={})=>{const{edges:s,getNodes:a}=e(),i=r||a(),o=n||s,l=i.map(d=>(d.selected=!1,Qd(d.id,!1))),u=o.map(d=>Qd(d.id,!1));Iy({changedNodes:l,changedEdges:u,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:n,maxZoom:s}=e();n==null||n.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:n,minZoom:s}=e();n==null||n.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:r=>{var n;(n=e().d3Zoom)==null||n.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:n}=e(),a=n().filter(o=>o.selected).map(o=>Qd(o.id,!1)),i=r.filter(o=>o.selected).map(o=>Qd(o.id,!1));Iy({changedNodes:a,changedEdges:i,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:n}=e();n.forEach(s=>{s.positionAbsolute=eN(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(n)})},panBy:r=>{const{transform:n,width:s,height:a,d3Zoom:i,d3Selection:o,translateExtent:l}=e();if(!i||!o||!r.x&&!r.y)return!1;const u=uf.translate(n[0]+r.x,n[1]+r.y).scale(n[2]),d=[[0,0],[s,a]],h=i==null?void 0:i.constrain()(u,d,l);return i.transform(o,h),n[0]!==h.x||n[1]!==h.y||n[2]!==h.k},cancelConnection:()=>t({connectionNodeId:Ld.connectionNodeId,connectionHandleId:Ld.connectionHandleId,connectionHandleType:Ld.connectionHandleType,connectionStatus:Ld.connectionStatus,connectionStartHandle:Ld.connectionStartHandle,connectionEndHandle:Ld.connectionEndHandle}),reset:()=>t({...Ld})}),Object.is),uN=({children:t})=>{const e=Z.useRef(null);return e.current||(e.current=oke()),dt.createElement(SNe,{value:e.current},t)};uN.displayName="ReactFlowProvider";const PH=({children:t})=>Z.useContext(kb)?dt.createElement(dt.Fragment,null,t):dt.createElement(uN,null,t);PH.displayName="ReactFlowWrapper";const lke={input:pH,default:C5,output:xH,group:lN},cke={default:mw,straight:sN,step:nN,smoothstep:Ib,simplebezier:rN},uke=[0,0],Ake=[15,15],dke={x:0,y:0,zoom:1},fke={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},jH=Z.forwardRef(({nodes:t,edges:e,defaultNodes:r,defaultEdges:n,className:s,nodeTypes:a=lke,edgeTypes:i=cke,onNodeClick:o,onEdgeClick:l,onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:_,onClickConnectEnd:T,onNodeMouseEnter:k,onNodeMouseMove:D,onNodeMouseLeave:M,onNodeContextMenu:P,onNodeDoubleClick:L,onNodeDragStart:C,onNodeDrag:E,onNodeDragStop:B,onNodesDelete:O,onEdgesDelete:R,onSelectionChange:F,onSelectionDragStart:Q,onSelectionDrag:H,onSelectionDragStop:ne,onSelectionContextMenu:J,onSelectionStart:re,onSelectionEnd:G,connectionMode:q=Qh.Strict,connectionLineType:W=Kd.Bezier,connectionLineStyle:ie,connectionLineComponent:j,connectionLineContainerStyle:Y,deleteKeyCode:ee="Backspace",selectionKeyCode:te="Shift",selectionOnDrag:ce=!1,selectionMode:be=Kx.Full,panActivationKeyCode:he="Space",multiSelectionKeyCode:fe=fw()?"Meta":"Control",zoomActivationKeyCode:ge=fw()?"Meta":"Control",snapToGrid:de=!1,snapGrid:oe=Ake,onlyRenderVisibleElements:Ue=!1,selectNodesOnDrag:tt=!0,nodesDraggable:Fe,nodesConnectable:Ee,nodesFocusable:De,nodeOrigin:Qe=uke,edgesFocusable:$e,edgesUpdatable:ut,elementsSelectable:Et,defaultViewport:lt=dke,minZoom:Dt=.5,maxZoom:zt=2,translateExtent:Jt=_5,preventScrolling:Rt=!0,nodeExtent:Ot,defaultMarkerColor:qt="#b1b1b7",zoomOnScroll:It=!0,zoomOnPinch:Ft=!0,panOnScroll:pt=!1,panOnScrollSpeed:br=.5,panOnScrollMode:Zt=ph.Free,zoomOnDoubleClick:hn=!0,panOnDrag:vr=!0,onPaneClick:Ur,onPaneMouseEnter:Dn,onPaneMouseMove:Fr,onPaneMouseLeave:da,onPaneScroll:an,onPaneContextMenu:ns,children:gs,onEdgeContextMenu:jr,onEdgeDoubleClick:nr,onEdgeMouseEnter:Gr,onEdgeMouseMove:fa,onEdgeMouseLeave:Wn,onEdgeUpdate:_s,onEdgeUpdateStart:Ba,onEdgeUpdateEnd:Gt,onReconnect:mn,onReconnectStart:on,onReconnectEnd:Rn,reconnectRadius:jn=10,edgeUpdaterRadius:Yn=10,onNodesChange:me,onEdgesChange:Be,noDragClassName:_e="nodrag",noWheelClassName:Se="nowheel",noPanClassName:Te="nopan",fitView:ke=!1,fitViewOptions:Ke,connectOnClick:nt=!0,attributionPosition:Ve,proOptions:Ye,defaultEdgeOptions:Ze,elevateNodesOnSelect:wt=!0,elevateEdgesOnSelect:Bt=!1,disableKeyboardA11y:Qt=!1,autoPanOnConnect:Nt=!0,autoPanOnNodeDrag:Lt=!0,connectionRadius:fr=20,isValidConnection:Or,onError:Qr,style:qr,id:Ls,nodeDragThreshold:gi,...Us},ha)=>{const Ws=Ls||"1";return dt.createElement("div",{...Us,style:{...qr,...fke},ref:ha,className:lo(["react-flow",s]),"data-testid":"rf__wrapper",id:Ls},dt.createElement(PH,null,dt.createElement(ike,{onInit:u,onMove:d,onMoveStart:h,onMoveEnd:m,onNodeClick:o,onEdgeClick:l,onNodeMouseEnter:k,onNodeMouseMove:D,onNodeMouseLeave:M,onNodeContextMenu:P,onNodeDoubleClick:L,nodeTypes:a,edgeTypes:i,connectionLineType:W,connectionLineStyle:ie,connectionLineComponent:j,connectionLineContainerStyle:Y,selectionKeyCode:te,selectionOnDrag:ce,selectionMode:be,deleteKeyCode:ee,multiSelectionKeyCode:fe,panActivationKeyCode:he,zoomActivationKeyCode:ge,onlyRenderVisibleElements:Ue,selectNodesOnDrag:tt,defaultViewport:lt,translateExtent:Jt,minZoom:Dt,maxZoom:zt,preventScrolling:Rt,zoomOnScroll:It,zoomOnPinch:Ft,zoomOnDoubleClick:hn,panOnScroll:pt,panOnScrollSpeed:br,panOnScrollMode:Zt,panOnDrag:vr,onPaneClick:Ur,onPaneMouseEnter:Dn,onPaneMouseMove:Fr,onPaneMouseLeave:da,onPaneScroll:an,onPaneContextMenu:ns,onSelectionContextMenu:J,onSelectionStart:re,onSelectionEnd:G,onEdgeContextMenu:jr,onEdgeDoubleClick:nr,onEdgeMouseEnter:Gr,onEdgeMouseMove:fa,onEdgeMouseLeave:Wn,onReconnect:mn??_s,onReconnectStart:on??Ba,onReconnectEnd:Rn??Gt,reconnectRadius:jn??Yn,defaultMarkerColor:qt,noDragClassName:_e,noWheelClassName:Se,noPanClassName:Te,elevateEdgesOnSelect:Bt,rfId:Ws,disableKeyboardA11y:Qt,nodeOrigin:Qe,nodeExtent:Ot}),dt.createElement(nBe,{nodes:t,edges:e,defaultNodes:r,defaultEdges:n,onConnect:g,onConnectStart:b,onConnectEnd:y,onClickConnectStart:_,onClickConnectEnd:T,nodesDraggable:Fe,nodesConnectable:Ee,nodesFocusable:De,edgesFocusable:$e,edgesUpdatable:ut,elementsSelectable:Et,elevateNodesOnSelect:wt,minZoom:Dt,maxZoom:zt,nodeExtent:Ot,onNodesChange:me,onEdgesChange:Be,snapToGrid:de,snapGrid:oe,connectionMode:q,translateExtent:Jt,connectOnClick:nt,defaultEdgeOptions:Ze,fitView:ke,fitViewOptions:Ke,onNodesDelete:O,onEdgesDelete:R,onNodeDragStart:C,onNodeDrag:E,onNodeDragStop:B,onSelectionDrag:H,onSelectionDragStart:Q,onSelectionDragStop:ne,noPanClassName:Te,nodeOrigin:Qe,rfId:Ws,autoPanOnConnect:Nt,autoPanOnNodeDrag:Lt,onError:Qr,connectionRadius:fr,isValidConnection:Or,nodeDragThreshold:gi}),dt.createElement(tBe,{onSelectionChange:F}),gs,dt.createElement(NNe,{proOptions:Ye,position:Ve}),dt.createElement(lBe,{rfId:Ws,disableKeyboardA11y:Qt})))});jH.displayName="ReactFlow";function OH(t){return e=>{const[r,n]=Z.useState(e),s=Z.useCallback(a=>n(i=>t(a,i)),[]);return[r,n,s]}}const hke=OH(SH),mke=OH(bBe);function pke(){return dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},dt.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function gke(){return dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},dt.createElement("path",{d:"M0 0h32v4.2H0z"}))}function xke(){return dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},dt.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function vke(){return dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},dt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function yke(){return dt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},dt.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Mg=({children:t,className:e,...r})=>dt.createElement("button",{type:"button",className:lo(["react-flow__controls-button",e]),...r},t);Mg.displayName="ControlButton";const wke=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),QH=({style:t,showZoom:e=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:i,onFitView:o,onInteractiveChange:l,className:u,children:d,position:h="bottom-left"})=>{const m=ei(),[g,b]=Z.useState(!1),{isInteractive:y,minZoomReached:_,maxZoomReached:T}=Rs(wke,Yi),{zoomIn:k,zoomOut:D,fitView:M}=Fb();if(Z.useEffect(()=>{b(!0)},[]),!g)return null;const P=()=>{k(),a==null||a()},L=()=>{D(),i==null||i()},C=()=>{M(s),o==null||o()},E=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),l==null||l(!y)};return dt.createElement(JQ,{className:lo(["react-flow__controls",u]),position:h,style:t,"data-testid":"rf__controls"},e&&dt.createElement(dt.Fragment,null,dt.createElement(Mg,{onClick:P,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:T},dt.createElement(pke,null)),dt.createElement(Mg,{onClick:L,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:_},dt.createElement(gke,null))),r&&dt.createElement(Mg,{className:"react-flow__controls-fitview",onClick:C,title:"fit view","aria-label":"fit view"},dt.createElement(xke,null)),n&&dt.createElement(Mg,{className:"react-flow__controls-interactive",onClick:E,title:"toggle interactivity","aria-label":"toggle interactivity"},y?dt.createElement(yke,null):dt.createElement(vke,null)),d)};QH.displayName="Controls";var bke=Z.memo(QH),Dc;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(Dc||(Dc={}));function Cke({color:t,dimensions:e,lineWidth:r}){return dt.createElement("path",{stroke:t,strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function Eke({color:t,radius:e}){return dt.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const _ke={[Dc.Dots]:"#91919a",[Dc.Lines]:"#eee",[Dc.Cross]:"#e2e2e2"},Ske={[Dc.Dots]:1,[Dc.Lines]:1,[Dc.Cross]:6},Tke=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function HH({id:t,variant:e=Dc.Dots,gap:r=20,size:n,lineWidth:s=1,offset:a=2,color:i,style:o,className:l}){const u=Z.useRef(null),{transform:d,patternId:h}=Rs(Tke,Yi),m=i||_ke[e],g=n||Ske[e],b=e===Dc.Dots,y=e===Dc.Cross,_=Array.isArray(r)?r:[r,r],T=[_[0]*d[2]||1,_[1]*d[2]||1],k=g*d[2],D=y?[k,k]:T,M=b?[k/a,k/a]:[D[0]/a,D[1]/a];return dt.createElement("svg",{className:lo(["react-flow__background",l]),style:{...o,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},dt.createElement("pattern",{id:h+t,x:d[0]%T[0],y:d[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`},b?dt.createElement(Eke,{color:m,radius:k/a}):dt.createElement(Cke,{dimensions:D,color:m,lineWidth:s})),dt.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}HH.displayName="Background";var Nke=Z.memo(HH);function Bke(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const r=document.implementation.createHTMLDocument(),n=r.createElement("base"),s=r.createElement("a");return r.head.appendChild(n),r.body.appendChild(s),e&&(n.href=e),s.href=t,s.href}const kke=(()=>{let t=0;const e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function df(t){const e=[];for(let r=0,n=t.length;r<n;r++)e.push(t[r]);return e}let Y0=null;function VH(t={}){return Y0||(t.includeStyleProperties?(Y0=t.includeStyleProperties,Y0):(Y0=df(window.getComputedStyle(document.documentElement)),Y0))}function pw(t,e){const n=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function Ike(t){const e=pw(t,"border-left-width"),r=pw(t,"border-right-width");return t.clientWidth+e+r}function Fke(t){const e=pw(t,"border-top-width"),r=pw(t,"border-bottom-width");return t.clientHeight+e+r}function zH(t,e={}){const r=e.width||Ike(t),n=e.height||Fke(t);return{width:r,height:n}}function Dke(){let t,e;try{e=process}catch{}const r=e&&e.env?e.env.devicePixelRatio:null;return r&&(t=parseInt(r,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}const Xo=16384;function Rke(t){(t.width>Xo||t.height>Xo)&&(t.width>Xo&&t.height>Xo?t.width>t.height?(t.height*=Xo/t.width,t.width=Xo):(t.width*=Xo/t.height,t.height=Xo):t.width>Xo?(t.height*=Xo/t.width,t.width=Xo):(t.width*=Xo/t.height,t.height=Xo))}function gw(t){return new Promise((e,r)=>{const n=new Image;n.onload=()=>{n.decode().then(()=>{requestAnimationFrame(()=>e(n))})},n.onerror=r,n.crossOrigin="anonymous",n.decoding="async",n.src=t})}async function Lke(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function Uke(t,e,r){const n="http://www.w3.org/2000/svg",s=document.createElementNS(n,"svg"),a=document.createElementNS(n,"foreignObject");return s.setAttribute("width",`${e}`),s.setAttribute("height",`${r}`),s.setAttribute("viewBox",`0 0 ${e} ${r}`),a.setAttribute("width","100%"),a.setAttribute("height","100%"),a.setAttribute("x","0"),a.setAttribute("y","0"),a.setAttribute("externalResourcesRequired","true"),s.appendChild(a),a.appendChild(t),Lke(s)}const Fo=(t,e)=>{if(t instanceof e)return!0;const r=Object.getPrototypeOf(t);return r===null?!1:r.constructor.name===e.name||Fo(r,e)};function Mke(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function Pke(t,e){return VH(e).map(r=>{const n=t.getPropertyValue(r),s=t.getPropertyPriority(r);return`${r}: ${n}${s?" !important":""};`}).join(" ")}function jke(t,e,r,n){const s=`.${t}:${e}`,a=r.cssText?Mke(r):Pke(r,n);return document.createTextNode(`${s}{${a}}`)}function UL(t,e,r,n){const s=window.getComputedStyle(t,r),a=s.getPropertyValue("content");if(a===""||a==="none")return;const i=kke();try{e.className=`${e.className} ${i}`}catch{return}const o=document.createElement("style");o.appendChild(jke(i,r,s,n)),e.appendChild(o)}function Oke(t,e,r){UL(t,e,":before",r),UL(t,e,":after",r)}const ML="application/font-woff",PL="image/jpeg",Qke={woff:ML,woff2:ML,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:PL,jpeg:PL,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Hke(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function AN(t){const e=Hke(t).toLowerCase();return Qke[e]||""}function Vke(t){return t.split(/,/)[1]}function S5(t){return t.search(/^(data:)/)!==-1}function zke(t,e){return`data:${e};base64,${t}`}async function GH(t,e,r){const n=await fetch(t,e);if(n.status===404)throw new Error(`Resource "${n.url}" not found`);const s=await n.blob();return new Promise((a,i)=>{const o=new FileReader;o.onerror=i,o.onloadend=()=>{try{a(r({res:n,result:o.result}))}catch(l){i(l)}},o.readAsDataURL(s)})}const T_={};function Gke(t,e,r){let n=t.replace(/\?.*/,"");return r&&(n=t),/ttf|otf|eot|woff2?/i.test(n)&&(n=n.replace(/.*\//,"")),e?`[${e}]${n}`:n}async function dN(t,e,r){const n=Gke(t,e,r.includeQueryParams);if(T_[n]!=null)return T_[n];r.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let s;try{const a=await GH(t,r.fetchRequestInit,({res:i,result:o})=>(e||(e=i.headers.get("Content-Type")||""),Vke(o)));s=zke(a,e)}catch(a){s=r.imagePlaceholder||"";let i=`Failed to fetch resource: ${t}`;a&&(i=typeof a=="string"?a:a.message),i&&console.warn(i)}return T_[n]=s,s}async function qke(t){const e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):gw(e)}async function Kke(t,e){if(t.currentSrc){const a=document.createElement("canvas"),i=a.getContext("2d");a.width=t.clientWidth,a.height=t.clientHeight,i==null||i.drawImage(t,0,0,a.width,a.height);const o=a.toDataURL();return gw(o)}const r=t.poster,n=AN(r),s=await dN(r,n,e);return gw(s)}async function $ke(t,e){var r;try{if(!((r=t==null?void 0:t.contentDocument)===null||r===void 0)&&r.body)return await Db(t.contentDocument.body,e,!0)}catch{}return t.cloneNode(!1)}async function Wke(t,e){return Fo(t,HTMLCanvasElement)?qke(t):Fo(t,HTMLVideoElement)?Kke(t,e):Fo(t,HTMLIFrameElement)?$ke(t,e):t.cloneNode(qH(t))}const Yke=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT",qH=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SVG";async function Jke(t,e,r){var n,s;if(qH(e))return e;let a=[];return Yke(t)&&t.assignedNodes?a=df(t.assignedNodes()):Fo(t,HTMLIFrameElement)&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?a=df(t.contentDocument.body.childNodes):a=df(((s=t.shadowRoot)!==null&&s!==void 0?s:t).childNodes),a.length===0||Fo(t,HTMLVideoElement)||await a.reduce((i,o)=>i.then(()=>Db(o,r)).then(l=>{l&&e.appendChild(l)}),Promise.resolve()),e}function Xke(t,e,r){const n=e.style;if(!n)return;const s=window.getComputedStyle(t);s.cssText?(n.cssText=s.cssText,n.transformOrigin=s.transformOrigin):VH(r).forEach(a=>{let i=s.getPropertyValue(a);a==="font-size"&&i.endsWith("px")&&(i=`${Math.floor(parseFloat(i.substring(0,i.length-2)))-.1}px`),Fo(t,HTMLIFrameElement)&&a==="display"&&i==="inline"&&(i="block"),a==="d"&&e.getAttribute("d")&&(i=`path(${e.getAttribute("d")})`),n.setProperty(a,i,s.getPropertyPriority(a))})}function Zke(t,e){Fo(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),Fo(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function e3e(t,e){if(Fo(t,HTMLSelectElement)){const r=e,n=Array.from(r.children).find(s=>t.value===s.getAttribute("value"));n&&n.setAttribute("selected","")}}function t3e(t,e,r){return Fo(e,Element)&&(Xke(t,e,r),Oke(t,e,r),Zke(t,e),e3e(t,e)),e}async function r3e(t,e){const r=t.querySelectorAll?t.querySelectorAll("use"):[];if(r.length===0)return t;const n={};for(let a=0;a<r.length;a++){const o=r[a].getAttribute("xlink:href");if(o){const l=t.querySelector(o),u=document.querySelector(o);!l&&u&&!n[o]&&(n[o]=await Db(u,e,!0))}}const s=Object.values(n);if(s.length){const a="http://www.w3.org/1999/xhtml",i=document.createElementNS(a,"svg");i.setAttribute("xmlns",a),i.style.position="absolute",i.style.width="0",i.style.height="0",i.style.overflow="hidden",i.style.display="none";const o=document.createElementNS(a,"defs");i.appendChild(o);for(let l=0;l<s.length;l++)o.appendChild(s[l]);t.appendChild(i)}return t}async function Db(t,e,r){return!r&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(n=>Wke(n,e)).then(n=>Jke(t,n,e)).then(n=>t3e(t,n,e)).then(n=>r3e(n,e))}const KH=/url\((['"]?)([^'"]+?)\1\)/g,n3e=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,s3e=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function a3e(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function i3e(t){const e=[];return t.replace(KH,(r,n,s)=>(e.push(s),r)),e.filter(r=>!S5(r))}async function o3e(t,e,r,n,s){try{const a=r?Bke(e,r):e,i=AN(e);let o;return s||(o=await dN(a,i,n)),t.replace(a3e(e),`$1${o}$3`)}catch{}return t}function l3e(t,{preferredFontFormat:e}){return e?t.replace(s3e,r=>{for(;;){const[n,,s]=n3e.exec(r)||[];if(!s)return"";if(s===e)return`src: ${n};`}}):t}function $H(t){return t.search(KH)!==-1}async function WH(t,e,r){if(!$H(t))return t;const n=l3e(t,r);return i3e(n).reduce((a,i)=>a.then(o=>o3e(o,i,e,r)),Promise.resolve(n))}async function J0(t,e,r){var n;const s=(n=e.style)===null||n===void 0?void 0:n.getPropertyValue(t);if(s){const a=await WH(s,null,r);return e.style.setProperty(t,a,e.style.getPropertyPriority(t)),!0}return!1}async function c3e(t,e){await J0("background",t,e)||await J0("background-image",t,e),await J0("mask",t,e)||await J0("-webkit-mask",t,e)||await J0("mask-image",t,e)||await J0("-webkit-mask-image",t,e)}async function u3e(t,e){const r=Fo(t,HTMLImageElement);if(!(r&&!S5(t.src))&&!(Fo(t,SVGImageElement)&&!S5(t.href.baseVal)))return;const n=r?t.src:t.href.baseVal,s=await dN(n,AN(n),e);await new Promise((a,i)=>{t.onload=a,t.onerror=e.onImageErrorHandler?(...l)=>{try{a(e.onImageErrorHandler(...l))}catch(u){i(u)}}:i;const o=t;o.decode&&(o.decode=a),o.loading==="lazy"&&(o.loading="eager"),r?(t.srcset="",t.src=s):t.href.baseVal=s})}async function A3e(t,e){const n=df(t.childNodes).map(s=>YH(s,e));await Promise.all(n).then(()=>t)}async function YH(t,e){Fo(t,Element)&&(await c3e(t,e),await u3e(t,e),await A3e(t,e))}function d3e(t,e){const{style:r}=t;e.backgroundColor&&(r.backgroundColor=e.backgroundColor),e.width&&(r.width=`${e.width}px`),e.height&&(r.height=`${e.height}px`);const n=e.style;return n!=null&&Object.keys(n).forEach(s=>{r[s]=n[s]}),t}const jL={};async function OL(t){let e=jL[t];if(e!=null)return e;const n=await(await fetch(t)).text();return e={url:t,cssText:n},jL[t]=e,e}async function QL(t,e){let r=t.cssText;const n=/url\(["']?([^"')]+)["']?\)/g,a=(r.match(/url\([^)]+\)/g)||[]).map(async i=>{let o=i.replace(n,"$1");return o.startsWith("https://")||(o=new URL(o,t.url).href),GH(o,e.fetchRequestInit,({result:l})=>(r=r.replace(i,`url(${l})`),[i,l]))});return Promise.all(a).then(()=>r)}function HL(t){if(t==null)return[];const e=[],r=/(\/\*[\s\S]*?\*\/)/gi;let n=t.replace(r,"");const s=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const l=s.exec(n);if(l===null)break;e.push(l[0])}n=n.replace(s,"");const a=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,i="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",o=new RegExp(i,"gi");for(;;){let l=a.exec(n);if(l===null){if(l=o.exec(n),l===null)break;a.lastIndex=o.lastIndex}else o.lastIndex=a.lastIndex;e.push(l[0])}return e}async function f3e(t,e){const r=[],n=[];return t.forEach(s=>{if("cssRules"in s)try{df(s.cssRules||[]).forEach((a,i)=>{if(a.type===CSSRule.IMPORT_RULE){let o=i+1;const l=a.href,u=OL(l).then(d=>QL(d,e)).then(d=>HL(d).forEach(h=>{try{s.insertRule(h,h.startsWith("@import")?o+=1:s.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:h,error:m})}})).catch(d=>{console.error("Error loading remote css",d.toString())});n.push(u)}})}catch(a){const i=t.find(o=>o.href==null)||document.styleSheets[0];s.href!=null&&n.push(OL(s.href).then(o=>QL(o,e)).then(o=>HL(o).forEach(l=>{i.insertRule(l,i.cssRules.length)})).catch(o=>{console.error("Error loading remote stylesheet",o)})),console.error("Error inlining remote css file",a)}}),Promise.all(n).then(()=>(t.forEach(s=>{if("cssRules"in s)try{df(s.cssRules||[]).forEach(a=>{r.push(a)})}catch(a){console.error(`Error while reading CSS rules from ${s.href}`,a)}}),r))}function h3e(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>$H(e.style.getPropertyValue("src")))}async function m3e(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");const r=df(t.ownerDocument.styleSheets),n=await f3e(r,e);return h3e(n)}function JH(t){return t.trim().replace(/["']/g,"")}function p3e(t){const e=new Set;function r(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(a=>{e.add(JH(a))}),Array.from(n.children).forEach(a=>{a instanceof HTMLElement&&r(a)})}return r(t),e}async function g3e(t,e){const r=await m3e(t,e),n=p3e(t);return(await Promise.all(r.filter(a=>n.has(JH(a.style.fontFamily))).map(a=>{const i=a.parentStyleSheet?a.parentStyleSheet.href:null;return WH(a.cssText,i,e)}))).join(`
`)}async function x3e(t,e){const r=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await g3e(t,e);if(r){const n=document.createElement("style"),s=document.createTextNode(r);n.appendChild(s),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)}}async function v3e(t,e={}){const{width:r,height:n}=zH(t,e),s=await Db(t,e,!0);return await x3e(s,e),await YH(s,e),d3e(s,e),await Uke(s,r,n)}async function y3e(t,e={}){const{width:r,height:n}=zH(t,e),s=await v3e(t,e),a=await gw(s),i=document.createElement("canvas"),o=i.getContext("2d"),l=e.pixelRatio||Dke(),u=e.canvasWidth||r,d=e.canvasHeight||n;return i.width=u*l,i.height=d*l,e.skipAutoScale||Rke(i),i.style.width=`${u}`,i.style.height=`${d}`,e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,i.width,i.height)),o.drawImage(a,0,0,i.width,i.height),i}async function Rb(t,e={}){return(await y3e(t,e)).toDataURL()}const XH="recursos_crucigramas",Lb="recursos_lineas_de_tiempo",Ub="recursos_mapas_mentales",ZH="recursos_sopas_de_letras",Mb=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,createdAt:((a=(s=e.createdAt)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.createdAt}},w3e=t=>{const e=Yt(kt(vt,XH),Pr("fechaCreacion","desc"));return mr(e,r=>{const n=r.docs.map(s=>Mb(s));t(n)},r=>{console.error("Error al suscribirse a los crucigramas:",r),t([])})},b3e=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,fechaCreacion:or.fromDate(new Date)};return(await ps(kt(vt,XH),r)).id}catch(r){throw console.error("Error al guardar el crucigrama:",r),new Error("No se pudo guardar el crucigrama.")}},C3e=t=>{const e=Yt(kt(vt,Lb),Pr("createdAt","desc"));return mr(e,r=>{const n=r.docs.map(s=>Mb(s));t(n)},r=>{console.error("Error al suscribirse a las líneas de tiempo:",r),t([])})},E3e=async(t,e)=>{try{const{id:r,...n}=t,s=ur(vt,Lb,r);await pi(s,{...n,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:or.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar la línea de tiempo:",r),new Error("No se pudo guardar la línea de tiempo.")}},_3e=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:or.fromDate(new Date)};return(await ps(kt(vt,Lb),r)).id}catch(r){throw console.error("Error al crear la línea de tiempo:",r),new Error("No se pudo crear la línea de tiempo.")}},S3e=async t=>{try{const e=ur(vt,Lb,t);await Ta(e)}catch(e){throw console.error("Error al eliminar la línea de tiempo:",e),new Error("No se pudo eliminar la línea de tiempo.")}},T3e=t=>{const e=Yt(kt(vt,Ub),Pr("createdAt","desc"));return mr(e,r=>{const n=r.docs.map(s=>Mb(s));t(n)},r=>{console.error("Error al suscribirse a los mapas mentales:",r),t([])})},N3e=async(t,e)=>{try{const{id:r,...n}=t,s=ur(vt,Ub,r);await pi(s,{...n,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:or.fromDate(new Date(n.createdAt||Date.now()))},{merge:!0})}catch(r){throw console.error("Error al guardar el mapa mental:",r),new Error("No se pudo guardar el mapa mental.")}},B3e=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:or.fromDate(new Date)};return(await ps(kt(vt,Ub),r)).id}catch(r){throw console.error("Error al crear el mapa mental:",r),new Error("No se pudo crear el mapa mental.")}},k3e=async t=>{try{const e=ur(vt,Ub,t);await Ta(e)}catch(e){throw console.error("Error al eliminar el mapa mental:",e),new Error("No se pudo eliminar el mapa mental.")}},I3e=t=>{const e=Yt(kt(vt,ZH),Pr("createdAt","desc"));return mr(e,r=>{const n=r.docs.map(s=>Mb(s));t(n)},r=>{console.error("Error al suscribirse a las sopas de letras:",r),t([])})},F3e=async(t,e)=>{try{const r={...t,creadorId:e.id,creadorNombre:e.nombreCompleto,createdAt:or.fromDate(new Date)};return(await ps(kt(vt,ZH),r)).id}catch(r){throw console.error("Error al guardar la sopa de letras:",r),new Error("No se pudo guardar la sopa de letras.")}},D3e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),R3e=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657l-4.243 4.243a1 1 0 01-1.414 0l-4.243-4.243a1 1 0 010-1.414l4.243-4.243a1 1 0 011.414 0l4.243 4.243a1 1 0 010 1.414z"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6"})]}),L3e=()=>c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 12h14"}),c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5l7 7-7 7"})]}),U3e=({data:t})=>{const e={"Concepto Clave":"bg-blue-100 border-blue-300 dark:bg-blue-900/30 dark:border-blue-700","Ejemplo Práctico":"bg-green-100 border-green-300 dark:bg-green-900/30 dark:border-green-700","Dato Interesante":"bg-yellow-100 border-yellow-300 dark:bg-yellow-900/30 dark:border-yellow-700","Pregunta Abierta":"bg-purple-100 border-purple-300 dark:bg-purple-900/30 dark:border-purple-700",default:"bg-white border-slate-300 dark:bg-slate-800 dark:border-slate-600"},r=e[t.type||"default"]||e.default;return c.jsxs("div",{className:`p-3 rounded-lg shadow-md border-2 ${r} flex items-center gap-3 min-w-[180px]`,children:[c.jsx(Jm,{type:"target",position:cr.Left,className:"w-2 h-2 !bg-slate-400"}),c.jsx("span",{className:"text-xl",children:t.icon||"🧠"}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:t.label}),t.type&&c.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:t.type})]}),c.jsx(Jm,{type:"source",position:cr.Right,className:"w-2 h-2 !bg-slate-400"})]})},T5=(t,e)=>!t.children||t.children.length===0?e:t.children.reduce((r,n)=>r+T5(n,e),0),N5=(t,e="tree")=>{const r=[],n=[];if(e==="tree"){const i=(o,l,u)=>{r.push({id:o.id,position:{x:l*280,y:u},data:{label:o.label,icon:o.icon,type:o.type},type:"custom"});const d=T5(o,100);let h=u-d/2+100/2;(o.children||[]).forEach(m=>{const g=T5(m,100),b=h+g/2-100/2;n.push({id:`e-${o.id}-${m.id}`,source:o.id,target:m.id,type:"smoothstep",animated:!0}),i(m,l+1,b),h+=g})};i(t,0,0)}else{r.push({id:t.id,position:{x:0,y:0},data:{label:t.label,icon:t.icon,type:t.type},type:"custom"});const i=300,o=500;(t.children||[]).forEach((l,u)=>{const d=u/t.children.length*2*Math.PI;r.push({id:l.id,position:{x:i*Math.cos(d),y:i*Math.sin(d)},data:{label:l.label,icon:l.icon,type:l.type},type:"custom"}),n.push({id:`e-${t.id}-${l.id}`,source:t.id,target:l.id,type:"smoothstep"}),(l.children||[]).forEach((h,m)=>{const g=d+(m-(l.children.length-1)/2)*.25;r.push({id:h.id,position:{x:o*Math.cos(g),y:o*Math.sin(g)},data:{label:h.label,icon:h.icon,type:h.type},type:"custom"}),n.push({id:`e-${l.id}-${h.id}`,source:l.id,target:h.id,type:"smoothstep"})})})}return{nodes:r,edges:n}},e9=({node:t,onUpdate:e,onAddChild:r,onDelete:n,level:s=0})=>{const a=["bg-blue-100/50 dark:bg-blue-900/20","bg-yellow-100/50 dark:bg-yellow-900/20","bg-green-100/50 dark:bg-green-900/20"],i=["border-blue-300 dark:border-blue-700","border-yellow-300 dark:border-yellow-700","border-green-300 dark:border-green-700"];return c.jsxs("div",{className:`pl-4 ${s>0?"border-l "+i[s-1%i.length]:""}`,children:[c.jsx("div",{className:`p-2 rounded-lg my-1 ${a[s%a.length]}`,children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:t.label,onChange:o=>e(t.id,o.target.value),className:"w-full bg-transparent focus:bg-white dark:focus:bg-slate-700 p-1 rounded border border-transparent focus:border-slate-300 dark:focus:border-slate-600 outline-none transition-colors"}),c.jsx("button",{onClick:()=>r(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"➕"}),s>0&&c.jsx("button",{onClick:()=>n(t.id),className:"p-1.5 rounded-full hover:bg-slate-300/50 dark:hover:bg-slate-600/50 transition-colors",children:"🗑️"})]})}),(t.children||[]).map(o=>c.jsx(e9,{node:o,onUpdate:e,onAddChild:r,onDelete:n,level:s+1},o.id))]})},M3e={custom:U3e},P3e=({mapData:t,onBack:e,onSave:r})=>{const[n,s]=Z.useState(t.treeData),[a,i]=Z.useState("tree"),[o,l]=Z.useState(!1),[u,d,h]=hke([]),[m,g,b]=mke([]),{fitView:y}=Fb();Z.useEffect(()=>{const{nodes:P,edges:L}=N5(n,a);d(P),g(L),setTimeout(()=>y({duration:300}),50)},[n,a,d,g,y]);const _=(P,L)=>{const C=JSON.parse(JSON.stringify(n)),E=B=>B.id===P?(B.label=L,!0):(B.children||[]).some(E);E(C),s(C)},T=P=>{const L=JSON.parse(JSON.stringify(n)),C=E=>E.id===P?(E.children||(E.children=[]),E.children.push({id:crypto.randomUUID(),label:"Nuevo Nodo",children:[]}),!0):(E.children||[]).some(C);C(L),s(L)},k=P=>{const L=JSON.parse(JSON.stringify(n)),C=E=>{const B=(E.children||[]).findIndex(O=>O.id===P);return B!==-1?(E.children.splice(B,1),!0):(E.children||[]).some(C)};C(L),s(L)},D=()=>{l(!0);const{nodes:P,edges:L}=N5(n,a);r({...t,treeData:n,nodes:P,edges:L}),setTimeout(()=>l(!1),1e3)},M=async P=>{const L=document.querySelector(".react-flow");L&&Rb(L,{backgroundColor:"#ffffff",cacheBust:!0,pixelRatio:2}).then(C=>{{const E=document.createElement("a");E.download=`${t.tema}.png`,E.href=C,E.click()}}).catch(C=>console.error("oops, something went wrong!",C))};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200 truncate pr-4",children:t.tema}),c.jsx("button",{onClick:e,className:"text-slate-600 dark:text-slate-300 hover:text-slate-900 dark:hover:text-white font-semibold flex-shrink-0",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsx("div",{className:"lg:col-span-2 w-full h-[70vh] rounded-lg border dark:border-slate-700 relative",children:c.jsxs(jH,{nodes:u,edges:m,onNodesChange:h,onEdgesChange:b,fitView:!0,nodeTypes:M3e,children:[c.jsx(bke,{}),c.jsx(Nke,{})]})}),c.jsxs("div",{className:"w-full h-[70vh] flex flex-col bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Editar"}),c.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b dark:border-slate-700 pb-2",children:[c.jsxs("button",{onClick:()=>i("tree"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="tree"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(R3e,{})," Vista en árbol"]}),c.jsxs("button",{onClick:()=>i("central"),className:`px-3 py-1.5 text-sm font-semibold rounded-md flex items-center gap-2 transition-colors ${a==="central"?"bg-blue-500 text-white":"hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[c.jsx(L3e,{})," Vista central"]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto pr-2",children:c.jsx(e9,{node:n,onUpdate:_,onAddChild:T,onDelete:k})}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>M(),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Exportar PNG"}),c.jsx("button",{onClick:D,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600 w-28",children:o?"Guardado!":"Guardar"})]})]})]})]})},j3e=({onBack:t,currentUser:e})=>{const[r,n]=Z.useState("list"),[s,a]=Z.useState([]),[i,o]=Z.useState(null),[l,u]=Z.useState(!1),[d,h]=Z.useState(!0),[m,g]=Z.useState(""),[b,y]=Z.useState(""),[_,T]=Z.useState("");Z.useEffect(()=>{h(!0);const C=T3e(E=>{a(E),h(!1)});return()=>C()},[]);const k=async C=>{if(C.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}u(!0);const E="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",B=`
            Basado en el tema central "${m}", y considerando el contenido adicional "${_}", genera una estructura jerárquica para un mapa mental con al menos 3 niveles de profundidad.
            
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            
            La estructura del JSON debe ser un objeto raíz con las siguientes claves:
            - "label": El tema central ("${m}").
            - "icon": Un emoji que represente el tema.
            - "type": La categoría, que para el nodo raíz debe ser "Concepto Clave".
            - "children": Un array de 2 a 4 nodos hijos.

            Cada nodo hijo (y sus descendientes) debe tener esta misma estructura:
            - "label": El texto del subtema.
            - "icon": Un emoji representativo.
            - "type": Una categoría descriptiva (ej: "Concepto Clave", "Ejemplo Práctico", "Dato Interesante", "Pregunta Abierta").
            - "children": Un array de nodos hijos, o un array vacío si es un nodo final.
        `;try{const ne=(await(await new $i(E).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(B)).response).text().replace(/^```json\s*|```\s*$/g,""),J=JSON.parse(ne),re=Y=>({id:crypto.randomUUID(),label:Y.label||"Sin etiqueta",icon:Y.icon||"🧠",type:Y.type||"default",children:(Y.children||[]).map(re)}),G=re(J),{nodes:q,edges:W}=N5(G),ie={tema:m,nivel:b,treeData:G,nodes:q,edges:W},j=await B3e(ie,e);o({...ie,id:j,createdAt:new Date().toISOString()}),n("editor")}catch(O){console.error("AI Generation Error:",O),alert("Hubo un error al generar el mapa mental. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{u(!1)}},D=async C=>{try{await N3e(C,e)}catch(E){console.error("Error saving mind map:",E),alert("No se pudo guardar el mapa mental.")}},M=C=>{o(C),n("editor")},P=async C=>{if(window.confirm("¿Eliminar este mapa mental?"))try{await k3e(C)}catch(E){console.error("Error deleting mind map:",E),alert("No se pudo eliminar el mapa mental.")}},L=()=>{switch(r){case"editor":return i?c.jsx(uN,{children:c.jsx(P3e,{mapData:i,onBack:()=>n("list"),onSave:D})}):null;case"config":return c.jsxs("div",{className:"max-w-2xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Nuevo Mapa Mental con IA"}),c.jsx("button",{onClick:()=>n("list"),className:"text-slate-600 hover:text-slate-900 font-semibold",children:"← Volver"})]}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:["Tema Central ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:m,onChange:C=>g(C.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"contenido",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Contenido o ideas clave (Opcional)"}),c.jsx("textarea",{id:"contenido",value:_,onChange:C=>T(C.target.value),rows:4,placeholder:"Añade más detalles para guiar a la IA...",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsx("div",{className:"flex justify-end pt-4",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[200px]",children:l?c.jsx(D3e,{}):"Generar Mapa con IA"})})]})]});case"list":default:return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Mapas Mentales"}),c.jsx("button",{onClick:()=>n("config"),className:"bg-amber-500 text-white font-bold py-2 px-5 rounded-lg hover:bg-amber-600",children:"Crear Nuevo"})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.length>0?s.map(C=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg shadow border dark:border-slate-700",children:[c.jsx("h3",{className:"font-bold text-lg truncate text-slate-800 dark:text-slate-200",children:C.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creado: ",new Date(C.createdAt).toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-4 flex gap-2",children:[c.jsx("button",{onClick:()=>M(C),className:"flex-1 bg-slate-200 dark:bg-slate-600 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Editar"}),c.jsx("button",{onClick:()=>P(C.id),className:"flex-1 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 font-semibold py-1.5 px-3 rounded-md text-sm",children:"Eliminar"})]})]},C.id)):c.jsx("p",{className:"col-span-full text-center text-slate-500 dark:text-slate-400 py-8",children:"No has creado ningún mapa mental todavía."})})]})}};return d?c.jsx("div",{className:"text-center py-10",children:"Cargando mapas mentales..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[c.jsx("span",{className:"text-4xl",children:"🧠"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mapas Mentales"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),L()]})},O3e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Q3e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),H3e=({onBack:t,currentUser:e})=>{const[r,n]=Z.useState([]),[s,a]=Z.useState("Media"),[i,o]=Z.useState(10),[l,u]=Z.useState(!1),[d,h]=Z.useState(Array(10).fill("")),[m,g]=Z.useState(""),[b,y]=Z.useState(null),[_,T]=Z.useState({ai:!1,puzzle:!1,data:!0}),k=Z.useRef(null);Z.useEffect(()=>{T(R=>({...R,data:!0}));const O=I3e(R=>{n(R),T(F=>({...F,data:!1}))});return()=>O()},[]),Z.useEffect(()=>{h(O=>{const R=Array(i).fill("");for(let F=0;F<Math.min(O.length,i);F++)R[F]=O[F];return R})},[i]);const D=(O,R)=>{const F=[...d];F[O]=R,h(F)},M=async()=>{if(m.trim()){T(O=>({...O,ai:!0}));try{const O="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",F=new $i(O).getGenerativeModel({model:"gemini-1.5-flash-latest"}),Q=`
                Genera una lista de ${i} palabras clave en español, estrictamente relacionadas con el tema "${m}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una sola clave: "palabras".
                El valor de "palabras" debe ser un array de ${i} strings.
                Cada string en el array debe ser una sola palabra, sin espacios ni caracteres especiales.
            `,re=(await(await F.generateContent(Q)).response).text().replace(/^```json\s*|```\s*$/g,""),G=JSON.parse(re);if(!G.palabras||!Array.isArray(G.palabras))throw new Error("La respuesta de la IA no contiene el array 'palabras' esperado.");const W=[...G.palabras.map(ie=>ie.toUpperCase().replace(/[^A-ZÑ]/g,"")).slice(0,i)];for(;W.length<i;)W.push("");h(W)}catch(O){console.error("Error generating words with AI:",O),alert("No se pudieron generar las palabras. La respuesta de la IA pudo tener un formato incorrecto. Inténtelo de nuevo.")}finally{T(O=>({...O,ai:!1}))}}},P=(O,R,F,Q,H,ne)=>{for(let J=0;J<O.length;J++){const re=F+J*H.y,G=Q+J*H.x;if(re<0||re>=ne||G<0||G>=ne||R[re][G]&&R[re][G]!==O[J])return!1}return!0},L=(O,R,F,Q,H)=>{for(let ne=0;ne<O.length;ne++)R[F+ne*H.y][Q+ne*H.x]=O[ne]},C=async()=>{T(re=>({...re,puzzle:!0})),y(null),await new Promise(re=>setTimeout(re,100));const O=d.map(re=>re.toUpperCase().replace(/[^A-ZÑ]/g,"")).filter(Boolean);if(O.length===0){alert("Por favor, ingrese al menos una palabra válida."),T(re=>({...re,puzzle:!1}));return}const R=Math.max(...O.map(re=>re.length));let F=Math.max(R,O.length)+2;s==="Media"&&(F+=3),s==="Difícil"&&(F+=5),F=Math.min(Math.max(F,10),25);const Q=Array(F).fill(null).map(()=>Array(F).fill(null)),H=[{x:1,y:0},{x:0,y:1},{x:1,y:1}];s!=="Fácil"&&H.push({x:1,y:-1}),s==="Difícil"&&H.push({x:-1,y:0},{x:0,y:-1},{x:-1,y:-1},{x:-1,y:1});for(const re of O.sort((G,q)=>q.length-G.length)){let G=!1;for(let q=0;q<100;q++){const W=H[Math.floor(Math.random()*H.length)],ie=Math.floor(Math.random()*F),j=Math.floor(Math.random()*F);if(P(re,Q,ie,j,W,F)){L(re,Q,ie,j,W),G=!0;break}}G||console.warn(`No se pudo colocar la palabra: ${re}`)}const ne=Q.map(re=>re.map(G=>G||"ABCDEFGHIJKLMNOPQRSTUVWXYZÑ"[Math.floor(Math.random()*27)])),J={tema:m||"Personalizado",grid:ne.map(re=>re.join("")),words:O.sort()};try{const re=await F3e(J,e);y({...J,id:re,createdAt:new Date().toISOString()})}catch(re){console.error("Error saving puzzle:",re),alert("No se pudo guardar la sopa de letras.")}finally{T(re=>({...re,puzzle:!1}))}},E=()=>{k.current&&Rb(k.current,{cacheBust:!0,backgroundColor:"white",quality:.95,pixelRatio:2}).then(O=>{const R=document.createElement("a");R.download="sopa-de-letras.png",R.href=O,R.click()}).catch(O=>{console.error("oops, something went wrong!",O),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})},B=()=>{var F;if(!b)return null;const O=((F=b.grid[0])==null?void 0:F.length)||1,R=b.grid.join("").split("");return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:k,className:"p-6 bg-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx("div",{className:"grid border-2 border-slate-700",style:{gridTemplateColumns:`repeat(${O}, minmax(0, 1fr))`},children:R.map((Q,H)=>c.jsx("div",{className:"flex items-center justify-center aspect-square border border-slate-300 font-mono font-bold text-lg text-slate-800",children:Q},H))})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-4 border-b-2 border-slate-700 pb-2",children:"PALABRAS A BUSCAR"}),c.jsx("ul",{className:"grid grid-cols-2 gap-x-4 gap-y-2 font-semibold text-slate-700",children:b.words.map(Q=>c.jsx("li",{children:Q},Q))})]})]})}),c.jsxs("div",{className:"flex justify-end gap-4",children:[c.jsx("button",{onClick:()=>y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otra"}),c.jsx("button",{onClick:E,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})};return _.data?c.jsx("div",{className:"text-center py-10",children:"Cargando..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🅰️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Sopa de Letras"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),!b&&c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Dificultad"}),c.jsxs("select",{value:s,onChange:O=>a(O.target.value),className:"w-full md:w-1/3 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600",children:[c.jsx("option",{children:"Fácil"}),c.jsx("option",{children:"Media"}),c.jsx("option",{children:"Difícil"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(O=>c.jsx("button",{onClick:()=>{o(O),u(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!l&&i===O?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:O},O)),c.jsx("button",{onClick:()=>u(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${l?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),l&&c.jsx("input",{type:"number",value:i,onChange:O=>o(parseInt(O.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:O=>g(O.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:M,disabled:_.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:_.ai?c.jsx(O3e,{}):c.jsxs(c.Fragment,{children:[c.jsx(Q3e,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:["Palabras ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-3",children:d.map((O,R)=>c.jsx("input",{type:"text",value:O,onChange:F=>D(R,F.target.value),placeholder:`Palabra ${R+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"},R))})]}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:C,disabled:_.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:_.puzzle?"Generando...":"Generar Sopa de Letras"})})]}),b&&B()]})},V3e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),z3e=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),G3e=({timeline:t,onSave:e,onBack:r})=>{const[n,s]=Z.useState(t),[a,i]=Z.useState(null),o=Z.useRef(null),l=(g,b,y)=>{s(_=>({..._,events:_.events.map(T=>T.id===g?{...T,[b]:y}:T)}))},u=()=>{const g={id:crypto.randomUUID(),date:new Date().getFullYear().toString(),description:"Nuevo hito",icon:"🗓️"},b=[...n.events,g].sort((y,_)=>parseInt(y.date)-parseInt(_.date));s(y=>({...y,events:b}))},d=g=>{s(b=>({...b,events:b.events.filter(y=>y.id!==g)}))},h=async g=>{if(!g.description.trim()){alert("Escribe al menos una idea en la descripción para que la IA la complete.");return}i(g.id);const b="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",y=`
            Para una línea de tiempo sobre "${n.tema}", toma la siguiente idea para un hito y mejórala.
            Idea del usuario: "${g.description}"

            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional, con tres claves:
            1. "date": El año o fecha más precisa y relevante para esta idea.
            2. "description": Una descripción concisa (máximo 15 palabras) para la línea de tiempo.
            3. "icon": Un único emoji que represente el hito.
        `;try{const P=(await(await new $i(b).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(y)).response).text().replace(/^```json\s*|```\s*$/g,""),L=JSON.parse(P);s(C=>({...C,events:C.events.map(E=>E.id===g.id?{...E,date:L.date,description:L.description,icon:L.icon}:E).sort((E,B)=>parseInt(E.date)-parseInt(B.date))}))}catch(_){console.error("Error al generar descripción del hito:",_),alert("No se pudo autocompletar el hito.")}finally{i(null)}},m=()=>{o.current&&Rb(o.current,{cacheBust:!0,backgroundColor:"#f1f5f9",quality:.95,pixelRatio:2}).then(g=>{const b=document.createElement("a");b.download=`linea-tiempo-${n.tema.replace(/\s+/g,"_")}.png`,b.href=g,b.click()}).catch(g=>{console.error("Error al generar la imagen:",g),alert("No se pudo generar la imagen. Inténtelo de nuevo.")})};return c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:n.tema}),c.jsx("button",{onClick:r,className:"text-sm font-semibold text-slate-500 hover:underline",children:"← Volver a la lista"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 bg-slate-100 dark:bg-slate-900 rounded-lg",children:c.jsxs("div",{ref:o,className:"relative p-10",children:[c.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1 h-full bg-slate-300 dark:bg-slate-600 rounded"}),c.jsx("div",{className:"relative",children:n.events.sort((g,b)=>parseInt(g.date)-parseInt(b.date)).map((g,b)=>{const y=b%2===0;return c.jsxs("div",{className:"mb-8 flex justify-between items-center w-full",children:[c.jsx("div",{className:"w-1/2",children:y&&c.jsx("div",{className:"text-right pr-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:g.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:g.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:g.description})]})})}),c.jsx("div",{className:"z-10 flex-shrink-0",children:c.jsx("div",{className:"w-5 h-5 bg-white dark:bg-slate-500 border-4 border-slate-400 dark:border-slate-300 rounded-full"})}),c.jsx("div",{className:"w-1/2",children:!y&&c.jsx("div",{className:"text-left pl-8",children:c.jsxs("div",{className:"p-4 bg-white dark:bg-slate-800 rounded-lg shadow-lg border dark:border-slate-700 inline-block max-w-xs",children:[c.jsx("p",{className:"text-2xl mb-1 text-center w-full",children:g.icon}),c.jsx("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:g.date}),c.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 break-words",children:g.description})]})})})]},g.id)})})]})}),c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg border dark:border-slate-700 h-[70vh] flex flex-col",children:[c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Editar Hitos"}),c.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2",children:n.events.map(g=>c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700 rounded-md border dark:border-slate-600 space-y-2",children:[c.jsx("input",{type:"text",value:g.date,onChange:b=>l(g.id,"date",b.target.value),placeholder:"Año/Fecha",className:"w-full bg-transparent font-semibold dark:text-slate-200"}),c.jsxs("div",{className:"flex items-start gap-2",children:[c.jsx("textarea",{value:g.description,onChange:b=>l(g.id,"description",b.target.value),placeholder:"Descripción",rows:2,className:"flex-grow w-full bg-transparent text-sm dark:text-slate-300"}),c.jsx("button",{onClick:()=>h(g),disabled:a===g.id,className:"p-2 rounded-md bg-slate-100 hover:bg-slate-200 dark:bg-slate-600 dark:hover:bg-slate-500 disabled:opacity-50",title:"Autocompletar con IA",children:a===g.id?c.jsx("div",{className:"w-4 h-4 border-2 border-slate-300 border-t-amber-500 rounded-full animate-spin"}):c.jsx(z3e,{})})]}),c.jsx("button",{onClick:()=>d(g.id),className:"text-xs text-red-500 hover:underline",children:"Eliminar"})]},g.id))}),c.jsxs("div",{className:"mt-4 pt-4 border-t dark:border-slate-700 flex flex-col gap-2",children:[c.jsx("button",{onClick:u,className:"w-full bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300 dark:bg-slate-600 dark:text-slate-200",children:"Añadir Hito"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:m,className:"flex-1 bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700",children:"Descargar PNG"}),c.jsx("button",{onClick:()=>e(n),className:"flex-1 bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Guardar"})]})]})]})]})]})},q3e=({onBack:t,currentUser:e})=>{const[r,n]=Z.useState("list"),[s,a]=Z.useState([]),[i,o]=Z.useState(null),[l,u]=Z.useState(!1),[d,h]=Z.useState(!0),[m,g]=Z.useState(""),[b,y]=Z.useState(""),[_,T]=Z.useState("");Z.useEffect(()=>{h(!0);const P=C3e(L=>{a(L),h(!1)});return()=>P()},[]);const k=async P=>{if(P.preventDefault(),!m.trim()){alert("El tema es obligatorio.");return}u(!0);const L="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",C=b&&_?`entre ${b} y ${_}`:b?`a partir de ${b}`:_?`hasta ${_}`:"",E=`
            Genera una línea de tiempo sobre el tema "${m}" ${C}.
            Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
            El objeto debe tener una clave "events", que es un array de 5 a 10 objetos.
            Cada objeto en el array "events" debe tener tres claves:
            1. "date": Un string con la fecha o el año del hito.
            2. "description": Un string con la descripción breve del hito (máximo 15 palabras).
            3. "icon": Un string con un único emoji que represente el hito.
            Ordena los eventos cronológicamente.
        `;try{const H=(await(await new $i(L).getGenerativeModel({model:"gemini-1.5-flash-latest"}).generateContent(E)).response).text().replace(/^```json\s*|```\s*$/g,""),ne=JSON.parse(H);if(!ne.events||!Array.isArray(ne.events))throw new Error("La respuesta de la IA no tiene el formato de eventos esperado.");const J={tema:m,fechaInicio:b,fechaFin:_,events:ne.events.map(G=>({id:crypto.randomUUID(),date:G.date||"Sin fecha",description:G.description||"Sin descripción",icon:G.icon||"🗓️"}))},re=await _3e(J,e);o({...J,id:re,createdAt:new Date().toISOString()}),n("editor")}catch(B){console.error("AI Generation Error:",B),alert("Hubo un error al generar la línea de tiempo. Por favor, revisa el formato del tema o inténtalo de nuevo.")}finally{u(!1)}},D=async P=>{try{await E3e(P,e),n("list"),o(null)}catch(L){console.error("Error saving timeline:",L),alert("No se pudo guardar la línea de tiempo.")}},M=async P=>{if(window.confirm("¿Eliminar esta línea de tiempo?"))try{await S3e(P)}catch(L){console.error("Error deleting timeline:",L),alert("No se pudo eliminar la línea de tiempo.")}};return r==="editor"&&i?c.jsx(G3e,{timeline:i,onSave:D,onBack:()=>n("list")}):d?c.jsx("div",{className:"text-center py-10",children:"Cargando líneas de tiempo..."}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"🕒"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),c.jsxs("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-800/50",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Crear nueva Línea de Tiempo"}),c.jsxs("form",{onSubmit:k,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsxs("label",{htmlFor:"tema",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:["Tema ",c.jsx("span",{className:"text-red-500",children:"*"})]}),c.jsx("input",{type:"text",id:"tema",value:m,onChange:P=>g(P.target.value),required:!0,className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaInicio",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Inicio (Opcional)"}),c.jsx("input",{type:"text",id:"fechaInicio",value:b,onChange:P=>y(P.target.value),placeholder:"Ej: 1947",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"fechaFin",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Fecha de Término (Opcional)"}),c.jsx("input",{type:"text",id:"fechaFin",value:_,onChange:P=>T(P.target.value),placeholder:"Ej: 1991",className:"w-full border-slate-300 dark:border-slate-600 dark:bg-slate-700 rounded-md shadow-sm"})]})]}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",disabled:l,className:"bg-amber-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-amber-600 disabled:bg-slate-400 flex items-center justify-center min-w-[180px]",children:l?c.jsx(V3e,{}):"Generar con IA"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:"Líneas de Tiempo Guardadas"}),s.length>0?s.map(P=>c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800/50 p-4 rounded-lg shadow-sm border dark:border-slate-700 flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-200",children:P.tema}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Creada: ",new Date(P.createdAt).toLocaleDateString("es-CL")]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{o(P),n("editor")},className:"text-sm font-semibold bg-slate-200 dark:bg-slate-600 py-1 px-3 rounded-md",children:"Editar"}),c.jsx("button",{onClick:()=>M(P.id),className:"text-sm font-semibold bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 py-1 px-3 rounded-md",children:"Eliminar"})]})]},P.id)):c.jsx("p",{className:"text-center text-slate-500 dark:text-slate-400 py-6",children:"No hay líneas de tiempo guardadas."})]})]})},K3e=()=>c.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),VL=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),$3e=({onBack:t,currentUser:e})=>{const[r,n]=Z.useState([]),[s,a]=Z.useState(10),[i,o]=Z.useState(!1),[l,u]=Z.useState(Array(10).fill("")),[d,h]=Z.useState(Array(10).fill("")),[m,g]=Z.useState(""),[b,y]=Z.useState(null),[_,T]=Z.useState(!1),[k,D]=Z.useState({ai:!1,puzzle:!1,data:!0}),[M,P]=Z.useState(null),L=Z.useRef(null);Z.useEffect(()=>{D(ne=>({...ne,data:!0}));const H=w3e(ne=>{const J=ne.map(re=>{const{grid_flat:G,grid_width:q,...W}=re,ie=[];if(G&&q>0)for(let j=0;j<G.length;j+=q)ie.push(G.slice(j,j+q));return{...W,grid:ie}});n(J),D(re=>({...re,data:!1}))});return()=>H()},[]),Z.useEffect(()=>{const H=s;u(ne=>Array.from({length:H},(J,re)=>ne[re]||"")),h(ne=>Array.from({length:H},(J,re)=>ne[re]||""))},[s]);const C=(H,ne)=>{const J=[...l];J[H]=ne,u(J)},E=(H,ne)=>{const J=[...d];J[H]=ne,h(J)},B=async()=>{if(m.trim()){D(H=>({...H,ai:!0}));try{const H="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",J=new $i(H).getGenerativeModel({model:"gemini-1.5-flash-latest"}),re=`
                Genera una lista de ${s} palabras y sus pistas correspondientes para un crucigrama, basado en el tema "${m}".
                Tu respuesta DEBE ser un único objeto JSON válido sin texto adicional ni bloques \`\`\`json.
                El objeto debe tener una clave "items", que es un array de ${s} objetos.
                Cada objeto en el array "items" debe tener dos claves:
                1. "word": Un string con la palabra (sin espacios y en mayúsculas).
                2. "clue": Un string con la pista para esa palabra.
            `;let ie=(await(await J.generateContent(re)).response).text().replace(/^```json\s*|```\s*$/g,"").trim();const j=ie.indexOf("{"),Y=ie.lastIndexOf("}");j!==-1&&Y!==-1&&(ie=ie.substring(j,Y+1)),ie=ie.replace(/},\s*([\r\n\s]*){/g,"}__SPLIT__{"),ie.includes("__SPLIT__")&&(ie=ie.replace(/("items"\s*:\s*\[)([\s\S]*?)(\])/m,(be,he,fe,ge)=>{const de=fe.split("__SPLIT__").map(oe=>oe.trim().replace(/,$/,""));return he+de.join(",")+ge})),ie=ie.replace(/,\s*]/g,"]");let ee;try{ee=JSON.parse(ie)}catch{console.error("Respuesta IA no es JSON válido:",ie),alert("La respuesta de la IA no es un JSON válido. Intenta de nuevo o ajusta el tema."),D(he=>({...he,ai:!1}));return}if(!ee.items||!Array.isArray(ee.items))throw new Error("La respuesta de la IA no contiene la lista de 'items' esperada.");const te=ee.items.map(be=>(be.word||"").toUpperCase().replace(/\s/g,"")),ce=ee.items.map(be=>be.clue||"");u(Array.from({length:s},(be,he)=>te[he]||"")),h(Array.from({length:s},(be,he)=>ce[he]||""))}catch(H){console.error("Error generating words/clues with AI:",H),alert("No se pudieron generar las palabras y pistas. Inténtelo de nuevo.")}finally{D(H=>({...H,ai:!1}))}}},O=async H=>{const ne=l[H];if(!ne||!ne.trim()){alert("Por favor, escribe una palabra antes de generar su pista.");return}P(H);try{const J="AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE",G=new $i(J).getGenerativeModel({model:"gemini-1.5-flash-latest"}),q=`Para un crucigrama con el tema "${m||"general"}", genera una pista concisa y creativa para la palabra "${ne}". La respuesta debe ser un único objeto JSON válido sin texto adicional, con una sola clave: "clue".`,Y=(await(await G.generateContent(q)).response).text().replace(/^```json\s*|```\s*$/g,""),ee=JSON.parse(Y);ee.clue&&E(H,ee.clue)}catch(J){console.error("Error generating clue with AI:",J),alert("No se pudo generar la pista.")}finally{P(null)}},R=Z.useCallback(()=>{try{const H=l.map((De,Qe)=>({word:De.toUpperCase().replace(/[^A-ZÑ]/g,""),clue:d[Qe]})).filter(De=>De.word.length>0);if(H.length===0)return alert("Por favor, ingrese al menos una palabra válida."),null;H.sort((De,Qe)=>Qe.word.length-De.word.length);const ne=H[0].word.length,J=Math.max(ne,H.length)*2;let re=Array.from({length:J},()=>Array(J).fill(null));const G=[],q=H.shift(),W=Math.floor(J/2),ie=Math.floor((J-q.word.length)/2);for(let De=0;De<q.word.length;De++)re[W][ie+De]=q.word[De];G.push({word:q.word,clue:q.clue,direction:"across",row:W,col:ie});for(const De of H){let Qe={score:-1,row:-1,col:-1,direction:"across"};for(const $e of G)for(let ut=0;ut<$e.word.length;ut++)for(let Et=0;Et<De.word.length;Et++)if($e.word[ut]===De.word[Et]){let lt=0,Dt,zt,Jt;$e.direction==="across"?(Jt="down",Dt=$e.row-Et,zt=$e.col+ut):(Jt="across",Dt=$e.row+ut,zt=$e.col-Et);let Rt=!0;for(let Ot=0;Ot<De.word.length;Ot++){const qt=Dt+(Jt==="down"?Ot:0),It=zt+(Jt==="across"?Ot:0);if(qt<0||qt>=J||It<0||It>=J){Rt=!1;break}const Ft=re[qt][It],pt=qt===$e.row+($e.direction==="down"?ut:0)&&It===$e.col+($e.direction==="across"?ut:0);if(Ft&&!pt){Rt=!1;break}if(Ft&&pt&&Ft!==De.word[Et]){Rt=!1;break}if(!pt){if(Jt==="across"&&(qt>0&&re[qt-1][It]||qt<J-1&&re[qt+1][It])){Rt=!1;break}if(Jt==="down"&&(It>0&&re[qt][It-1]||It<J-1&&re[qt][It+1])){Rt=!1;break}}Ft&&lt++}Rt&&lt>Qe.score&&(Qe={score:lt,row:Dt,col:zt,direction:Jt})}if(Qe.score>-1){for(let $e=0;$e<De.word.length;$e++){const ut=Qe.row+(Qe.direction==="down"?$e:0),Et=Qe.col+(Qe.direction==="across"?$e:0);re[ut][Et]=De.word[$e]}G.push({word:De.word,clue:De.clue,direction:Qe.direction,row:Qe.row,col:Qe.col})}}let j=J,Y=-1,ee=J,te=-1;G.forEach(De=>{j=Math.min(j,De.row),Y=Math.max(Y,De.row+(De.direction==="down"?De.word.length-1:0)),ee=Math.min(ee,De.col),te=Math.max(te,De.col+(De.direction==="across"?De.word.length-1:0))}),Y===-1&&(j=G[0].row,Y=G[0].row,ee=G[0].col,te=G[0].col+G[0].word.length-1);const ce=1,be=Math.max(0,j-ce),he=Math.min(J,Y+1+ce),fe=Math.max(0,ee-ce),ge=Math.min(J,te+1+ce),de=re.slice(be,he).map(De=>De.slice(fe,ge)),oe=G.map(De=>({...De,row:De.row-be,col:De.col-fe})).sort((De,Qe)=>De.row-Qe.row||De.col-Qe.col);let Ue=1;const tt=[],Fe=new Map;oe.forEach(De=>{const Qe=`${De.row},${De.col}`;Fe.has(Qe)||Fe.set(Qe,Ue++),tt.push({...De,number:Fe.get(Qe)})});const Ee=de.map(De=>De.map(Qe=>({char:Qe,number:null})));return tt.forEach(De=>{const Qe=`${De.row},${De.col}`;Ee[De.row]&&Ee[De.row][De.col]!==void 0&&(Ee[De.row][De.col].number=Fe.get(Qe))}),{grid:Ee,clues:{across:tt.filter(De=>De.direction==="across").sort((De,Qe)=>De.number-Qe.number),down:tt.filter(De=>De.direction==="down").sort((De,Qe)=>De.number-Qe.number)}}}catch(H){return console.error("Error generating crossword grid:",H),alert("Ocurrió un error inesperado al generar el crucigrama. Intente con palabras diferentes."),null}},[l,d]),F=async()=>{var ne;D(J=>({...J,puzzle:!0})),y(null),await new Promise(J=>setTimeout(J,100));const H=R();if(H){const J={creadorId:e.id,creadorNombre:e.nombreCompleto,tema:m||"Personalizado",grid:H.grid,clues:H.clues},re={...J,grid_flat:H.grid.flat().map(G=>G.char||""),grid_width:((ne=H.grid[0])==null?void 0:ne.length)||0};try{const G=await b3e(re,e);y({...J,id:G,fechaCreacion:new Date().toISOString()})}catch(G){console.error("Error saving puzzle:",G),alert("No se pudo guardar el crucigrama en la base de datos.")}}D(J=>({...J,puzzle:!1}))},Q=()=>{L.current&&(T(!1),setTimeout(()=>{Rb(L.current,{cacheBust:!0,backgroundColor:"#ffffff",pixelRatio:2}).then(H=>{const ne=document.createElement("a");ne.download="crucigrama.png",ne.href=H,ne.click()}).catch(H=>console.error("Error generating image",H))},100))};return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{className:"text-4xl",children:"✏️"}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Crucigramas"}),c.jsx("button",{onClick:t,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:underline",children:"← Volver a Recursos"})]})]}),b?c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{ref:L,className:"p-6 bg-white dark:bg-slate-900 text-black dark:text-white",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsx("div",{children:c.jsx("div",{className:"border border-black dark:border-white",style:{display:"grid",gridTemplateColumns:`repeat(${b.grid[0].length}, 2rem)`},children:b.grid.flat().map((H,ne)=>c.jsxs("div",{className:"relative w-8 h-8 border border-black dark:border-white flex items-center justify-center font-bold uppercase",style:{backgroundColor:H.char?"white":"black"},children:[H.number&&c.jsx("span",{className:"absolute top-0 left-0.5 text-[8px]",children:H.number}),_&&H.char&&c.jsx("span",{children:H.char})]},ne))})}),c.jsxs("div",{className:"text-sm",children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"HORIZONTALES"}),c.jsx("ul",{className:"space-y-1",children:b.clues.across.map(H=>c.jsxs("li",{children:[c.jsxs("strong",{children:[H.number,"."]})," ",H.clue]},`${H.word}-${H.clue}`))}),c.jsx("h3",{className:"font-bold text-lg mt-4 mb-2",children:"VERTICALES"}),c.jsx("ul",{className:"space-y-1",children:b.clues.down.map(H=>c.jsxs("li",{children:[c.jsxs("strong",{children:[H.number,"."]})," ",H.clue]},`${H.word}-${H.clue}`))})]})]})}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("label",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",checked:_,onChange:()=>T(!_),className:"h-5 w-5 rounded"}),c.jsx("span",{children:"Mostrar Solución"})]}),c.jsxs("div",{className:"flex gap-4",children:[c.jsx("button",{onClick:()=>y(null),className:"bg-slate-200 text-slate-700 font-bold py-2 px-4 rounded-lg hover:bg-slate-300",children:"Crear otro"}),c.jsx("button",{onClick:Q,className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-amber-600",children:"Descargar como PNG"})]})]})]}):c.jsxs("div",{className:"space-y-6 pt-4 border-t dark:border-slate-700",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2",children:"Número de palabras"}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[[5,10,15,20].map(H=>c.jsx("button",{onClick:()=>{a(H),o(!1)},className:`px-4 py-2 rounded-md font-semibold text-sm ${!i&&s===H?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:H},H)),c.jsx("button",{onClick:()=>o(!0),className:`px-4 py-2 rounded-md font-semibold text-sm ${i?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-700"}`,children:"Personalizado"}),i&&c.jsx("input",{type:"number",value:s,onChange:H=>a(parseInt(H.target.value,10)),min:"1",max:"30",className:"w-24 border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"ai-theme",className:"block text-sm font-medium text-slate-700 dark:text-slate-300 mb-1",children:"Completar palabras y pistas con IA (Opcional)"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{id:"ai-theme",type:"text",value:m,onChange:H=>g(H.target.value),placeholder:"Envía un tema...",className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:B,disabled:k.ai,className:"bg-sky-500 text-white font-semibold px-4 py-2 rounded-md flex items-center justify-center min-w-[120px]",children:k.ai?c.jsx(K3e,{}):c.jsxs(c.Fragment,{children:[c.jsx(VL,{}),c.jsx("span",{className:"ml-2",children:"Generar"})]})})]})]}),c.jsx("div",{className:"space-y-3",children:Array.from({length:s}).map((H,ne)=>c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[c.jsx("input",{type:"text",value:l[ne],onChange:J=>C(ne,J.target.value),placeholder:`Palabra ${ne+1}`,className:"border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsxs("div",{className:"md:col-span-2 flex items-center gap-2",children:[c.jsx("textarea",{value:d[ne],onChange:J=>E(ne,J.target.value),placeholder:`Pista ${ne+1}`,rows:1,className:"flex-grow border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"}),c.jsx("button",{onClick:()=>O(ne),disabled:M===ne,className:"p-2 bg-slate-200 dark:bg-slate-600 rounded-md hover:bg-slate-300 disabled:opacity-50",title:"Generar Pista con IA",children:M===ne?c.jsx("div",{className:"w-5 h-5 border-2 border-slate-400 border-t-amber-500 rounded-full animate-spin"}):c.jsx(VL,{})})]})]},ne))}),c.jsx("div",{className:"text-right pt-4",children:c.jsx("button",{onClick:F,disabled:k.puzzle,className:"bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 min-w-[200px]",children:k.puzzle?"Generando...":"Generar Crucigrama"})})]})]})},W3e=()=>{const[t,e]=Z.useState(null),[r,n]=Z.useState(!0);return Z.useEffect(()=>{const s=NU(iJ,async a=>{if(a&&a.email)try{const i=await xM(a.email);e(i)}catch(i){console.error("Error al obtener el perfil del usuario:",i),e(null)}else e(null);n(!1)});return()=>s()},[]),{currentUser:t,loading:r}},Y3e=[{id:"sopaDeLetras",icon:"🅰️",nombre:"Sopa de Letras",descripcion:"Crea y resuelve sopas de letras personalizadas para aprender palabras clave de cualquier asignatura."},{id:"mapasMentales",icon:"🧠",nombre:"Mapas Mentales",descripcion:"Organiza ideas y conceptos de forma visual para facilitar el estudio y la memoria."},{id:"crucigramas",icon:"✏️",nombre:"Crucigramas",descripcion:"Crea y resuelve crucigramas para reforzar vocabulario y conceptos clave."},{id:"lineasDeTiempo",icon:"🕒",nombre:"Líneas de Tiempo",descripcion:"Construye líneas de tiempo para comprender procesos, hechos históricos o secuencias."}],J3e=({recurso:t,onClick:e})=>c.jsxs("button",{onClick:e,className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300 ease-in-out cursor-pointer flex flex-col items-center text-center h-full",children:[c.jsx("div",{className:"text-6xl mb-4",children:t.icon}),c.jsx("h3",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:t.nombre}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm flex-grow",children:t.descripcion})]}),X3e=()=>{const[t,e]=Z.useState("menu"),{currentUser:r}=W3e(),n=()=>t!=="menu"&&!r?c.jsx("div",{className:"text-center p-8",children:"Cargando información de usuario..."}):t==="mapasMentales"?c.jsx(j3e,{onBack:()=>e("menu"),currentUser:r}):t==="sopaDeLetras"?c.jsx(H3e,{onBack:()=>e("menu"),currentUser:r}):t==="lineasDeTiempo"?c.jsx(q3e,{onBack:()=>e("menu"),currentUser:r}):t==="crucigramas"?c.jsx($3e,{onBack:()=>e("menu"),currentUser:r}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Recursos de Aprendizaje"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Seleccione una herramienta para crear una nueva actividad educativa para sus estudiantes."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Y3e.map(s=>c.jsx(J3e,{recurso:s,onClick:()=>e(s.id)},s.id))})]});return c.jsx("div",{className:"animate-fade-in space-y-6",children:n()})},Z3e="evaluaciones_formativas",eIe="calificaciones_formativas",t9="trabajos_grupales_formativos",r9=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fecha:((n=(r=e.fecha)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString().split("T")[0])||e.fecha,fechaPresentacion:((a=(s=e.fechaPresentacion)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString().split("T")[0])||e.fechaPresentacion}},tIe=(t,e)=>{const r=Yt(kt(vt,Z3e),Xr("curso","==",t));return mr(r,n=>{e(n.docs.map(s=>r9(s)))},n=>{console.error("Error subscribing to student evaluations:",n),e([])})},rIe=t=>{const e=Yt(kt(vt,eIe));return mr(e,r=>{const n={};r.forEach(s=>{n[s.id]=s.data()}),t(n)},r=>{console.error("Error subscribing to grades:",r),t({})})},nIe=(t,e)=>{const r=Yt(kt(vt,t9),Xr("curso","==",t));return mr(r,n=>{e(n.docs.map(s=>r9(s)))},n=>{console.error("Error subscribing to group projects:",n),e([])})},sIe=async t=>{try{const{id:e,...r}=t,n=ur(vt,t9,e);await pi(n,r)}catch(e){throw console.error("Error updating group project:",e),new Error("Could not update group project.")}},aIe=({currentUser:t})=>{const[e,r]=Z.useState([]),[n,s]=Z.useState({}),[a,i]=Z.useState([]),[o,l]=Z.useState(!0),[u,d]=Z.useState(null),[h,m]=Z.useState(!1),[g,b]=Z.useState(null),y=Z.useRef(null);Z.useEffect(()=>{if(!t.curso){l(!1);return}l(!0);const M=tIe(t.curso,r),P=rIe(s),L=nIe(t.curso,C=>{i(C),l(!1)});return()=>{M(),P(),L()}},[t.curso]);const _=Z.useMemo(()=>{if(!t.curso)return[];const P=e.filter(L=>L.curso===t.curso).reduce((L,C)=>((L[C.asignatura]=L[C.asignatura]||[]).push(C),L),{});return Object.entries(P).map(([L,C])=>{let E=0,B=0;const O=C.map(F=>{var ne;const Q=(ne=n[F.id])==null?void 0:ne[t.nombreCompleto];let H="No Trabajado";return Q==="trabajado"?(E+=7,B++,H="Trabajado"):Q==="no trabajado"&&(E+=2,B++,H="No Trabajado"),{id:F.id,nombreActividad:F.nombreActividad,fecha:F.fecha,estado:H}}).filter(F=>{var Q;return(Q=n[F.id])==null?void 0:Q[t.nombreCompleto]}),R=B>0?(E/B).toFixed(1):"N/A";return{asignatura:L,promedio:R,actividades:O.sort((F,Q)=>new Date(Q.fecha).getTime()-new Date(F.fecha).getTime())}}).filter(L=>L.actividades.length>0).sort((L,C)=>L.asignatura.localeCompare(C.asignatura))},[e,n,t]);Z.useEffect(()=>{if(_.reduce((B,O)=>B+O.actividades.length,0)===0){d(null);return}const P=_.reduce((B,O)=>{const R=parseFloat(O.promedio);return isNaN(R)?B:B+R},0),L=_.length>0?P/_.length:0,C=Uv.find(B=>L>=B.promedioMin&&L<=B.promedioMax)||null,E=Uv.filter(B=>L>=B.promedioMin);if(d({puntajeTotal:0,promedio:L,rangoActual:C,insigniasGanadas:E}),y.current!==null){const B=Uv.find(O=>y.current>=O.promedioMin&&y.current<=O.promedioMax)||null;C&&(!B||C.nombre!==B.nombre)&&b(C)}y.current=L},[_]);const T=Z.useMemo(()=>t.curso?a.filter(M=>M.curso===t.curso).map(M=>{const P=M.grupos.find(L=>L.integrantes.some(C=>C.nombre===t.nombreCompleto));return P?{...M,miGrupo:P}:null}).filter(M=>M!==null).sort((M,P)=>new Date(P.fechaPresentacion).getTime()-new Date(M.fechaPresentacion).getTime()):[],[a,t]),k=async(M,P)=>{const L=a.find(E=>E.id===M);if(!L)return;const C={...L,grupos:L.grupos.map(E=>E.integrantes.some(O=>O.nombre===t.nombreCompleto)?{...E,integrantes:E.integrantes.map(O=>O.nombre===t.nombreCompleto?{...O,rol:P||void 0}:O)}:E)};try{await sIe(C)}catch(E){console.error("Error updating role:",E),alert("No se pudo actualizar el rol.")}},D=M=>{const P=parseFloat(M);return isNaN(P)?"bg-slate-400":P<4?"bg-red-500":P<5.5?"bg-yellow-500":"bg-green-500"};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tu rendimiento..."}):c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[g&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4",onClick:()=>b(null),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md text-center p-8 animate-fade-in-up transform transition-all",onClick:M=>M.stopPropagation(),children:[c.jsx("div",{className:"text-8xl animate-bounce",children:g.emoji}),c.jsx("h2",{className:"text-3xl font-bold text-slate-800 mt-4",children:"¡Subiste de Rango!"}),c.jsx("p",{className:"text-2xl font-semibold text-amber-500 mt-2",children:g.nombre}),c.jsx("p",{className:"text-slate-600 mt-4",children:g.mensaje}),c.jsx("button",{onClick:()=>b(null),className:"mt-6 bg-slate-800 text-white font-bold py-2 px-6 rounded-lg hover:bg-slate-700",children:"¡Genial!"})]})}),h&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>m(!1),children:c.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg p-6 max-h-[80vh] flex flex-col",onClick:M=>M.stopPropagation(),children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Logros"}),c.jsx("div",{className:"overflow-y-auto space-y-3",children:Uv.map(M=>{const P=u==null?void 0:u.insigniasGanadas.some(L=>L.nombre===M.nombre);return c.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg border ${P?"bg-amber-50 border-amber-200":"bg-slate-100 border-slate-200 opacity-60"}`,children:[c.jsx("div",{className:"text-5xl",children:M.emoji}),c.jsxs("div",{children:[c.jsx("h3",{className:`font-bold ${P?"text-amber-700":"text-slate-600"}`,children:M.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:["Requisito: Promedio entre ",M.promedioMin," y ",M.promedioMax]})]})]},M.nombre)})})]})}),c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Mi Rendimiento Formativo"}),c.jsx("p",{className:"text-slate-500 mb-6",children:"Aquí puedes ver un resumen de tu trabajo en clases por cada asignatura."}),u&&u.rangoActual&&c.jsxs("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 text-white p-6 rounded-xl mb-8 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm opacity-80",children:"RANGO ACTUAL"}),c.jsx("h2",{className:"text-3xl font-bold",children:u.rangoActual.nombre}),c.jsx("button",{onClick:()=>m(!0),className:"mt-2 text-xs font-semibold bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full",children:"Ver todos los logros"})]}),c.jsxs("div",{className:"text-right",children:[c.jsx("div",{className:"text-7xl",children:u.rangoActual.emoji}),c.jsx("p",{className:"font-bold text-2xl mt-2",children:u.promedio.toFixed(1)}),c.jsx("p",{className:"text-sm opacity-80",children:"Promedio General"})]})]}),_.length>0?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(M=>c.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-5 flex flex-col",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800",children:M.asignatura}),c.jsx("p",{className:"text-sm text-slate-500",children:"Promedio Formativo"})]}),c.jsx("div",{className:`w-20 h-20 rounded-full flex items-center justify-center text-white font-bold text-3xl ${D(M.promedio)}`,children:M.promedio})]}),c.jsxs("div",{className:"flex-grow space-y-2 pt-4 border-t border-slate-200",children:[c.jsx("h3",{className:"text-sm font-semibold text-slate-600 mb-2",children:"Detalle de Actividades:"}),M.actividades.map(P=>c.jsxs("div",{className:"flex justify-between items-center text-sm bg-white p-2 rounded",children:[c.jsxs("div",{children:[c.jsx("p",{className:"font-medium text-slate-700",children:P.nombreActividad}),c.jsx("p",{className:"text-xs text-slate-500",children:new Date(P.fecha+"T12:00:00").toLocaleDateString("es-CL")})]}),c.jsx("span",{className:`font-semibold ${P.estado==="Trabajado"?"text-green-600":"text-red-600"}`,children:P.estado==="Trabajado"?"✅ Trabajado":"❌ No Trabajado"})]},P.id))]})]},M.asignatura))}):c.jsxs("div",{className:"text-center py-16 bg-slate-50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"📊"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"Aún sin registros"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"Todavía no tienes evaluaciones formativas registradas por tus profesores."})]})]}),T.length>0&&c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-4",children:"Mis Trabajos Grupales"}),c.jsx("div",{className:"space-y-4",children:T.map(M=>{const P=M.miGrupo.integrantes.filter(C=>C.nombre!==t.nombreCompleto&&C.rol).map(C=>C.rol),L=yM.filter(C=>!P.includes(C));return c.jsxs("div",{className:"p-4 border border-slate-200 rounded-lg bg-slate-50",children:[c.jsx("h3",{className:"font-bold text-slate-800",children:M.nombreActividad}),c.jsxs("p",{className:"text-sm text-slate-500",children:[M.asignatura," - Presentación: ",new Date(M.fechaPresentacion+"T12:00:00").toLocaleDateString("es-CL")]}),c.jsxs("div",{className:"mt-3 pt-3 border-t",children:[c.jsxs("h4",{className:"font-semibold text-sm",children:["Grupo ",M.miGrupo.numero]}),c.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-2",children:M.miGrupo.integrantes.map(C=>c.jsxs("li",{className:"grid grid-cols-2 items-center",children:[c.jsx("span",{className:C.nombre===t.nombreCompleto?"font-bold":"",children:C.nombre}),C.nombre===t.nombreCompleto?c.jsxs("select",{value:C.rol||"",onChange:E=>k(M.id,E.target.value),className:"text-sm p-1 border rounded w-full",children:[c.jsx("option",{value:"",children:"-- Seleccionar rol --"}),C.rol&&!L.includes(C.rol)&&c.jsx("option",{value:C.rol,children:C.rol}),L.map(E=>c.jsx("option",{value:E,children:E},E))]}):c.jsx("span",{className:"text-xs italic bg-slate-200 px-2 py-1 rounded-full",children:C.rol||"Sin rol"})]},C.nombre))})]})]},M.id)})})]})]})},iIe="proyectos_interdisciplinarios",n9="entregas_interdisciplinarias",s9=t=>{var r,n,s,a;const e=t.data();return{id:t.id,...e,fechaCreacion:((n=(r=e.fechaCreacion)==null?void 0:r.toDate)==null?void 0:n.call(r).toISOString())||e.fechaCreacion,fechaCompletado:((a=(s=e.fechaCompletado)==null?void 0:s.toDate)==null?void 0:a.call(s).toISOString())||e.fechaCompletado}},oIe=(t,e)=>{const r=Yt(kt(vt,iIe),Xr("cursos","array-contains",t));return mr(r,n=>{const s=n.docs.map(a=>s9(a));e(s)},n=>{console.error("Error al suscribirse a los proyectos:",n),e([])})},lIe=(t,e)=>{const r=Yt(kt(vt,n9),Xr("estudianteId","==",t));return mr(r,n=>{const s=n.docs.map(a=>s9(a));e(s)},n=>{console.error("Error al suscribirse a las entregas:",n),e([])})},cIe=async t=>{try{const{id:e,...r}=t,n=ur(vt,n9,e),s={...r,fechaCompletado:or.fromDate(new Date(r.fechaCompletado||Date.now()))};await pi(n,s,{merge:!0})}catch(e){throw console.error("Error al actualizar la entrega:",e),new Error("No se pudo guardar la entrega.")}},uIe=({currentUser:t})=>{const[e,r]=Z.useState([]),[n,s]=Z.useState([]),[a,i]=Z.useState(null),[o,l]=Z.useState(!0);Z.useEffect(()=>{if(!t.curso||!t.id){l(!1);return}l(!0);const h=oIe(t.curso,r),m=lIe(t.id,g=>{s(g),l(!1)});return()=>{h(),m()}},[t.curso,t.id]);const u=async h=>{try{await cIe(h)}catch(m){console.error("Failed to update submission:",m),alert("Hubo un error al guardar tu entrega.")}},d=({plan:h,tarea:m})=>{const g=Z.useMemo(()=>{const P=n.find(L=>L.planificacionId===h.id&&L.tareaId===m.id);return P||{id:`${h.id}_${m.id}_${t.id}`,planificacionId:h.id,tareaId:m.id,estudianteId:t.id,estudianteNombre:t.nombreCompleto,completada:!1}},[h.id,m.id,n]),[b,y]=Z.useState(!1),[_,T]=Z.useState({observaciones:g.observacionesEstudiante||"",enlace:g.enlaceUrl||""}),k=P=>{var C;const L=(C=P.target.files)==null?void 0:C[0];L&&(alert(`Simulación: Archivo "${L.name}" listo para subir.`),u({...g,archivoAdjunto:{nombre:L.name,url:`simulated/path/${L.name}`},fechaCompletado:new Date().toISOString()}))},D=()=>{u({...g,observacionesEstudiante:_.observaciones,enlaceUrl:_.enlace,fechaCompletado:new Date().toISOString()})},M=()=>{u({...g,completada:!g.completada,fechaCompletado:new Date().toISOString()})};return c.jsxs("div",{className:"p-3 bg-white dark:bg-slate-700/50 rounded-lg border dark:border-slate-600",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("input",{type:"checkbox",checked:g.completada,onChange:M,className:"mt-1 h-5 w-5 rounded text-amber-500 focus:ring-amber-400"}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("p",{className:`font-semibold ${g.completada?"line-through text-slate-500":"text-slate-800"}`,children:["Tarea ",m.numero,": ",m.instrucciones]}),c.jsxs("p",{className:"text-xs text-slate-500",children:["Fecha de entrega: ",m.fechaEntrega]}),m.recursoUrl&&c.jsx("a",{href:m.recursoUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-500 hover:underline",children:"Ver Recurso"})]}),c.jsx("button",{onClick:()=>y(!b),className:"text-sm font-semibold",children:b?"Ocultar":"Entregar"})]}),b&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t dark:border-slate-600 space-y-3 animate-fade-in-up",children:[c.jsx("textarea",{value:_.observaciones,onChange:P=>T({..._,observaciones:P.target.value}),onBlur:D,placeholder:"Añadir observaciones o comentarios...",rows:2,className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"url",value:_.enlace,onChange:P=>T({..._,enlace:P.target.value}),onBlur:D,placeholder:"Pegar un enlace (ej: Google Docs, video)...",className:"w-full text-sm p-1 border rounded"}),c.jsx("input",{type:"file",onChange:k,className:"text-sm"}),g.archivoAdjunto&&c.jsxs("p",{className:"text-xs text-green-600",children:["✓ Archivo subido: ",g.archivoAdjunto.nombre]})]}),g.feedbackProfesor&&c.jsxs("div",{className:"mt-3 pt-3 pl-8 border-t border-amber-300 bg-amber-50 dark:bg-amber-900/20 p-2 rounded",children:[c.jsx("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:"Retroalimentación del profesor:"}),c.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 whitespace-pre-wrap",children:g.feedbackProfesor})]})]})};return o?c.jsx("div",{className:"text-center py-10",children:"Cargando tus proyectos..."}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl shadow-md",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Mis Tareas Interdisciplinarias"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Revisa y completa las tareas de tus proyectos."})]}),e.length>0?e.map(h=>{const m=h.tareas||[],b=n.filter(_=>_.planificacionId===h.id).filter(_=>_.completada).length,y=m.length>0?b/m.length*100:0;return c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md",children:[c.jsxs("button",{onClick:()=>i(a===h.id?null:h.id),className:"w-full text-left",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:h.nombreProyecto}),c.jsxs("div",{className:"mt-2 space-y-1",children:[c.jsxs("div",{className:"flex justify-between text-sm font-medium text-slate-500",children:[c.jsx("span",{children:"Progreso"}),c.jsxs("span",{children:[Math.round(y),"%"]})]}),c.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:c.jsx("div",{className:"bg-amber-500 h-2.5 rounded-full",style:{width:`${y}%`}})})]})]}),a===h.id&&c.jsx("div",{className:"mt-4 pt-4 border-t space-y-3",children:m.length>0?m.map(_=>c.jsx(d,{plan:h,tarea:_},_.id)):c.jsx("p",{className:"text-slate-500 text-center",children:"Este proyecto aún no tiene tareas asignadas."})})]},h.id)}):c.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md",children:[c.jsx("span",{className:"text-5xl",children:"🎉"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700",children:"¡Todo al día!"}),c.jsx("p",{className:"text-slate-500 mt-2",children:"No tienes tareas de proyectos interdisciplinarios asignadas por el momento."})]})]})},AIe=({data:t})=>c.jsx("div",{className:"space-y-4",children:t.map((r,n)=>c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-300 truncate pr-2",children:r.label.replace("Dominio A: ","A: ").replace("Dominio B: ","B: ").replace("Dominio C: ","C: ")}),c.jsxs("span",{className:"font-semibold text-slate-600 dark:text-slate-400",children:[r.value.toFixed(2)," / 4.00"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:"bg-sky-500 h-4 rounded-full transition-all duration-500 ease-out",style:{width:`${r.value/4*100}%`}})})]},r.label+n))}),dIe=({currentUser:t})=>{const[e,r]=Z.useState([]),[n,s]=Z.useState(!1),[a,i]=Z.useState(null),[o,l]=Z.useState(null),[u,d]=Z.useState(zg),h=Z.useCallback(async()=>{s(!0);try{const _=(await M2e(t.nombreCompleto)).sort((T,k)=>new Date(k.fecha).getTime()-new Date(T.fecha).getTime());r(_),i(null)}catch(y){console.error("Error al cargar acompañamientos desde Firestore",y),i("No se pudieron cargar tus acompañamientos desde la nube.")}finally{s(!1)}},[t.nombreCompleto]),m=Z.useCallback(async()=>{try{const y=await P2e();y&&d(y)}catch(y){console.error("Error al cargar rúbrica personalizada",y)}},[]);Z.useEffect(()=>{h(),m()},[h,m]);const g=Z.useMemo(()=>{if(!o)return[];const y={};return u.forEach(_=>{y[_.domain]={total:0,count:0},_.criteria.forEach(T=>{const k=o.rubricaResultados[T.name];k&&(y[_.domain].total+=k,y[_.domain].count++)})}),Object.entries(y).map(([_,T])=>({label:_,value:T.count>0?T.total/T.count:0}))},[o,u]),b=y=>{const _=new lr;_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(100),_.text("LICEO INDUSTRIAL DE RECOLETA",_.internal.pageSize.getWidth()/2,15,{align:"center"}),_.setFont("helvetica","bold"),_.setFontSize(16),_.setTextColor(40),_.text("Informe de Acompañamiento Docente",_.internal.pageSize.getWidth()/2,25,{align:"center"}),_.setFontSize(12),_.setFont("helvetica","normal"),il(_,{startY:35,body:[["Docente:",y.docente],["Fecha:",new Date(y.fecha).toLocaleDateString("es-CL")],["Asignatura:",y.asignatura],["Curso:",y.curso],["Bloques:",y.bloques||"No especificado"]],theme:"plain",styles:{fontSize:11,cellPadding:2},columnStyles:{0:{cellWidth:35,fontStyle:"bold"}}});let T=_.lastAutoTable.finalY+15;if(Object.keys(y.rubricaResultados).length>0){const M=[],P=["Débil","Incipiente","Satisfactorio","Avanzado"];u.forEach(L=>{M.push([{content:L.domain,colSpan:2,styles:{fontStyle:"bold",fillColor:[220,220,220],textColor:[40,40,40]}}]),L.criteria.forEach(C=>{const E=y.rubricaResultados[C.name],B=E?P[E-1]:"No evaluado";M.push([C.name,B])})}),il(_,{startY:T,head:[["Indicador","Nivel de Logro"]],body:M,theme:"grid",headStyles:{fillColor:[44,62,80],textColor:255},styles:{fontSize:10}}),T=_.lastAutoTable.finalY+15}const k=(M,P)=>{if(!P)return;T>250&&(_.addPage(),T=20,_.setFont("helvetica","bold"),_.setFontSize(10),_.setTextColor(100),_.text("LICEO INDUSTRIAL DE RECOLETA",_.internal.pageSize.getWidth()/2,15,{align:"center"}),T=25),_.setFont("helvetica","bold"),_.setFontSize(14),_.setTextColor(40),_.text(M,14,T),T+=8,_.setFont("helvetica","normal"),_.setFontSize(11),_.setTextColor(60);const L=_.splitTextToSize(P.replace(/## /g,"").replace(/(\*\*|\*)/g,""),180);_.text(L,14,T),T+=L.length*5+10};k("Observaciones Generales",y.observacionesGenerales),k("Retroalimentación Consolidada",y.retroalimentacionConsolidada);const D=_.getNumberOfPages();for(let M=1;M<=D;M++)_.setPage(M),_.setFontSize(8),_.setTextColor(128),_.text(`Página ${M} de ${D}`,_.internal.pageSize.getWidth()/2,_.internal.pageSize.getHeight()-10,{align:"center"});_.save(`Acompanamiento_${t.nombreCompleto.replace(/\s/g,"_")}_${new Date(y.fecha).toLocaleDateString("es-CL").replace(/\//g,"-")}.pdf`)};return o?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsxs("div",{children:[c.jsx("button",{onClick:()=>l(null),className:"text-sm font-semibold text-slate-500 hover:underline mb-2",children:"← Volver a mi historial"}),c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:"Detalle del Acompañamiento"}),c.jsxs("p",{className:"text-slate-500 dark:text-slate-400",children:[new Date(o.fecha).toLocaleDateString("es-CL",{year:"numeric",month:"long",day:"numeric"})," | ",o.curso," - ",o.asignatura]})]}),c.jsxs("button",{onClick:()=>b(o),className:"bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center gap-2 hover:bg-red-700",children:[c.jsx(vM,{})," Exportar PDF"]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsx("div",{className:"lg:col-span-2 space-y-6",children:c.jsxs("div",{className:"prose dark:prose-invert max-w-none prose-slate",children:[c.jsx("h3",{children:"Retroalimentación Consolidada (IA)"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.retroalimentacionConsolidada||"No se ha generado retroalimentación."})}),c.jsx("h3",{children:"Observaciones Generales"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx("p",{className:"whitespace-pre-wrap",children:o.observacionesGenerales||"Sin observaciones."})})]})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Desempeño por Dominio"}),c.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-lg",children:c.jsx(AIe,{data:g})})]})]})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-2",children:"Mis Acompañamientos"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-6",children:"Aquí encontrarás el historial de tus observaciones de clase y la retroalimentación asociada."}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando tus acompañamientos desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),!n&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg mb-6",children:"No tienes acompañamientos registrados en la nube."}),c.jsx("div",{className:"space-y-4",children:!n&&e.length>0?e.map(y=>c.jsx("button",{onClick:()=>l(y),className:"w-full text-left p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50 hover:bg-amber-50 dark:hover:bg-amber-900/20 transition-colors",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsxs("p",{className:"font-bold text-slate-800 dark:text-slate-200",children:[y.curso," - ",y.asignatura]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Fecha: ",new Date(y.fecha).toLocaleDateString("es-CL"),y.bloques&&` | Bloques: ${y.bloques}`]}),Object.keys(y.rubricaResultados).length>0&&c.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1",children:["Evaluado en ",Object.keys(y.rubricaResultados).length," criterios"]})]}),c.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400 text-sm",children:"Ver Detalles"})]})},y.id)):!n&&c.jsxs("div",{className:"text-center py-16 bg-slate-50 dark:bg-slate-700/50 rounded-lg",children:[c.jsx("span",{className:"text-5xl",children:"👍"}),c.jsx("h2",{className:"mt-4 text-xl font-bold text-slate-700 dark:text-slate-300",children:"Sin Registros"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Aún no tienes acompañamientos de clase registrados."})]})})]})},fIe=t=>{console.log("🔄 Iniciando suscripción a todas las planificaciones...");try{const e=kt(Zr,"planificaciones"),r=Yt(e,Pr("fechaCreacion","desc"));return mr(r,s=>{const a=[];s.forEach(i=>{const o=i.data();a.push({id:i.id,...o})}),console.log("✅ Todas las planificaciones cargadas:",a.length),t(a)},s=>{throw console.error("❌ Error al cargar todas las planificaciones:",s),s})}catch(e){throw console.error("❌ Error al configurar suscripción a todas las planificaciones:",e),e}},hIe=(t,e)=>{if(console.log("🔄 Iniciando suscripción a planificaciones del usuario:",t),!t)throw console.error("❌ userId no proporcionado"),new Error("userId es requerido");try{const r=kt(Zr,"planificaciones"),n=Yt(r,Xr("userId","==",t),Pr("fechaCreacion","desc"));return mr(n,a=>{const i=[];a.forEach(o=>{const l=o.data();i.push({id:o.id,...l})}),console.log("✅ Planificaciones del usuario cargadas:",i.length),e(i)},a=>{throw console.error("❌ Error al cargar planificaciones del usuario:",a),a})}catch(r){throw console.error("❌ Error al configurar suscripción a planificaciones del usuario:",r),r}},mIe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:c.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),pIe=()=>c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),gIe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),xIe=({plan:t,onClose:e})=>{const r=s=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Objetivo de Aprendizaje:"})," ",s.objetivosAprendizaje]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Indicadores de Evaluación:"})," ",s.indicadoresEvaluacion]}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:[c.jsx("strong",{children:"Contenidos Clave:"})," ",s.contenidos]}),c.jsx("div",{className:"mt-2",children:c.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Unidad: ",typeof s.progreso=="number"?`${s.progreso}%`:"No registrado"]})})]}),c.jsxs("h3",{className:"text-lg font-bold text-slate-800 dark:text-slate-200 border-b pb-2",children:["Secuencia de Clases (",s.cantidadClases,")"]}),c.jsx("div",{className:"space-y-3 max-h-[40vh] overflow-y-auto pr-2",children:s.detallesLeccion.map((a,i)=>c.jsxs("div",{className:"p-3 border dark:border-slate-600 rounded-md bg-white dark:bg-slate-800",children:[c.jsxs("h4",{className:"font-semibold text-slate-700 dark:text-slate-300",children:["Clase ",i+1,": ",a.actividades]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-1 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("span",{children:[c.jsx("strong",{children:"Objetivo:"})," ",a.objetivosAprendizaje]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Contenidos:"})," ",a.contenidosConceptuales]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Habilidad (Bloom):"})," ",a.habilidadesBloom]}),c.jsxs("span",{children:[c.jsx("strong",{children:"Perfil de Egreso:"})," ",a.perfilEgreso]}),c.jsxs("span",{className:"md:col-span-2",children:[c.jsx("strong",{children:"Interdisciplinariedad:"})," ",a.asignaturasInterdisciplinariedad]})]})]},i))})]}),n=s=>c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"p-4 bg-slate-100 dark:bg-slate-700 rounded-lg",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Contenidos:"})," ",s.contenidos]}),c.jsx("div",{className:"mt-2",children:c.jsxs("span",{className:"inline-block bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-3 py-1 rounded-full text-sm font-semibold",children:["Avance de la Clase: ",typeof s.progreso=="number"?`${s.progreso}%`:"No registrado"]})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Inicio"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.inicio})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Desarrollo"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.desarrollo})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-200",children:"Cierre"}),c.jsx("p",{className:"p-3 bg-white dark:bg-slate-800 rounded-md border dark:border-slate-600 whitespace-pre-wrap",children:s.momentosClase.cierre})]})]})]});return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:e,children:c.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900 rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col animate-fade-in-up",onClick:s=>s.stopPropagation(),children:[c.jsxs("header",{className:"p-4 border-b dark:border-slate-700 flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200",children:t.tipo==="Unidad"?t.nombreUnidad:t.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:[t.asignatura," | ",t.nivel," | Autor: ",t.autor||"N/A"]})]}),c.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700",children:c.jsx(pIe,{})})]}),c.jsx("main",{className:"p-4 flex-1 overflow-y-auto",children:t.tipo==="Unidad"?r(t):n(t)})]})})},vIe=t=>{const[e,r]=Z.useState([]),[n,s]=Z.useState(!0),[a,i]=Z.useState(null),o=Z.useMemo(()=>(t==null?void 0:t.profile)==="SUBDIRECCION",[t]);return Z.useEffect(()=>{if(!(t!=null&&t.email)&&!(t!=null&&t.id)){i("Usuario no autenticado"),s(!1);return}console.log("🔄 Configurando suscripción a planificaciones..."),console.log("🔍 Usuario actual:",{email:t.email,id:t.id,profile:t.profile,canViewAll:o});try{let l;if(o)console.log("👑 Cargando todas las planificaciones (vista admin)"),l=fIe(u=>{console.log("✅ Planificaciones admin cargadas:",u.length),r(u),s(!1),i(null)});else{const u=t.email||t.id||"";console.log("👤 Cargando planificaciones del usuario:",u),l=hIe(u,d=>{console.log("✅ Planificaciones del usuario cargadas:",d.length),r(d),s(!1),i(null)})}return l}catch(l){console.error("❌ Error al configurar suscripción:",l),i(l instanceof Error?l.message:"Error al conectar con la base de datos"),s(!1)}},[t,o]),{planificaciones:e,loading:n,error:a,canViewAllPlans:o}},yIe=({currentUser:t})=>{console.log("🔍 SeguimientoCurricular - currentUser recibido:",t),console.log("🔍 currentUser.email:",t==null?void 0:t.email),console.log("🔍 currentUser.id:",t==null?void 0:t.id),console.log("🔍 currentUser.profile:",t==null?void 0:t.profile);const{planificaciones:e,loading:r,error:n,canViewAllPlans:s}=vIe(t),[a,i]=Z.useState("1º"),[o,l]=Z.useState(null),[u,d]=Z.useState(null),h=Z.useMemo(()=>{const y={"1º":"1º Medio","2º":"2º Medio","3º":"3º Medio","4º":"4º Medio"}[a];return e.filter(_=>_.nivel===y)},[e,a]),m=b=>{l(y=>y===b?null:b)},g=[{key:"1º",label:"1º Medio"},{key:"2º",label:"2º Medio"},{key:"3º",label:"3º Medio"},{key:"4º",label:"4º Medio"}];return!t||!t.email&&!t.id?c.jsx("div",{className:"flex justify-center items-center py-8",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-2",children:"Error: Usuario no autenticado"}),c.jsxs("p",{className:"text-sm text-slate-400",children:["Datos recibidos: ",JSON.stringify(t)]})]})}):r?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(gIe,{}),c.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Cargando planificaciones..."})]})})]}):n?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:"Seguimiento Curricular"}),c.jsx("div",{className:"flex justify-center items-center py-12",children:c.jsxs("div",{className:"text-center",children:[c.jsx("p",{className:"text-red-600 dark:text-red-400 mb-2",children:"Error al cargar las planificaciones"}),c.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n})]})})]}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 md:p-8 rounded-xl shadow-md animate-fade-in max-w-4xl mx-auto",children:[c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Seguimiento Curricular"}),s&&c.jsx("div",{className:"text-sm text-amber-600 dark:text-amber-400 font-medium",children:"👑 Vista administrativa - Todas las planificaciones"})]}),c.jsx("div",{className:"border-b border-slate-200 dark:border-slate-700 mb-6",children:c.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:g.map(b=>c.jsx("button",{onClick:()=>i(b.key),className:`${a===b.key?"border-amber-500 text-amber-600 dark:text-amber-400":"border-transparent text-slate-500 hover:text-slate-700 hover:border-slate-300 dark:text-slate-400 dark:hover:text-slate-200"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg transition-colors focus:outline-none`,children:b.label},b.key))})}),e.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-lg",children:"No hay planificaciones disponibles"}),c.jsx("p",{className:"text-sm text-slate-400 dark:text-slate-500 mt-2",children:s?"Ningún profesor ha creado planificaciones aún":"Crea planificaciones desde el módulo de Planificación"})]}):c.jsx("div",{className:"space-y-4",children:ol.map(b=>{const y=h.filter(T=>T.asignatura===b);if(y.length===0)return null;const _=o===b;return c.jsxs("div",{className:"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg",children:[c.jsxs("button",{onClick:()=>m(b),className:"w-full flex justify-between items-center p-4 text-left hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:"font-semibold text-slate-700 dark:text-slate-200",children:b}),c.jsxs("span",{className:"bg-amber-100 dark:bg-amber-900/30 text-amber-800 dark:text-amber-300 px-2 py-1 rounded-full text-xs font-medium",children:[y.length," planificación",y.length!==1?"es":""]})]}),c.jsx("span",{className:`transform transition-transform duration-200 ${_?"rotate-180":""}`,children:c.jsx(mIe,{})})]}),_&&c.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700 animate-fade-in-up",children:c.jsx("ul",{className:"space-y-3",children:y.map(T=>c.jsx("li",{children:c.jsx("button",{onClick:()=>d(T),className:"w-full text-left p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors group",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-slate-800 dark:text-slate-200 group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors",children:T.tipo==="Unidad"?T.nombreUnidad:T.nombreClase}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[c.jsx("span",{className:"font-medium",children:"Autor:"})," ",T.autor||"No especificado"]}),c.jsxs("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:["Creado: ",new Date(T.fechaCreacion).toLocaleDateString("es-CL")]})]}),c.jsx("div",{className:"ml-3",children:c.jsx("span",{className:`inline-flex px-2 py-1 rounded-full text-xs font-medium ${T.tipo==="Unidad"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"}`,children:T.tipo})})]})})},T.id))})})]},b)})})]}),u&&c.jsx(xIe,{plan:u,onClose:()=>d(null)})]})},fN="analisis",wIe=async()=>{try{const t=Yt(kt(Zr,fN),Pr("uploadDate","desc"));return(await Cs(t)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){throw console.error("Error al obtener análisis:",t),new Error("No se pudieron cargar los análisis taxonómicos")}},bIe=async t=>{try{return{id:(await ps(kt(Zr,fN),{...t,uploadDate:t.uploadDate||new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})).id,...t}}catch(e){throw console.error("Error al crear análisis:",e),new Error("No se pudo crear el análisis taxonómico")}},CIe=async t=>{try{const e=ur(Zr,fN,t);await Ta(e)}catch(e){throw console.error("Error al eliminar análisis:",e,"ID:",t),new Error("No se pudo eliminar el análisis taxonómico")}},zL=["Recordar","Comprender","Aplicar","Analizar","Evaluar","Crear"],GL={Recordar:"bg-sky-500",Comprender:"bg-blue-500",Aplicar:"bg-green-500",Analizar:"bg-yellow-500",Evaluar:"bg-orange-500",Crear:"bg-red-500"},EIe=()=>c.jsxs("svg",{className:"animate-spin h-5 w-5 text-slate-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[c.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),c.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),qL=({currentUser:t})=>{const[e,r]=Z.useState([]),[n,s]=Z.useState(!1),[a,i]=Z.useState(null),[o,l]=Z.useState(null),[u,d]=Z.useState(""),[h,m]=Z.useState(!1),[g,b]=Z.useState(null),[y,_]=Z.useState(null),T=Z.useCallback(async()=>{s(!0);try{const L=await wIe();r(L),i(null)}catch(L){console.error("Error al cargar análisis desde Firestore",L),i("No se pudieron cargar los análisis desde la nube.")}finally{s(!1)}},[]);Z.useEffect(()=>{T()},[T]);const k=async L=>{var E;const C=(E=L.target.files)==null?void 0:E[0];if(C){if(!["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"].includes(C.type)){i("Por favor, suba un archivo PDF o DOCX válido."),b(null),_(null),d("");return}b(C),d(C.name),i(null);const O=new FileReader;O.onloadend=()=>{const R=O.result.split(",")[1];if(!R){i("No se pudo procesar el archivo. Puede que esté vacío o corrupto."),_(null);return}_({mimeType:C.type,data:R})},O.onerror=()=>{i("Error al leer el archivo."),_(null)},O.readAsDataURL(C)}},D=async()=>{if(!u.trim()||!y){i("Debe subir un documento PDF o DOCX y asignarle un nombre para analizar.");return}m(!0),i(null);const L=`
            Eres un experto en pedagogía y en la Taxonomía de Bloom. Analiza el siguiente documento de una evaluación educativa.
            Tu tarea es:
            1. Identificar cada pregunta o ítem de evaluación en el documento.
            2. Clasificar cada pregunta en uno de los seis niveles de la Taxonomía de Bloom: Recordar, Comprender, Aplicar, Analizar, Evaluar, Crear.
            3. Devolver un objeto JSON estructurado con los resultados.
        `,C={type:xn.OBJECT,properties:{analysisResults:{type:xn.ARRAY,description:"Un array con cada pregunta identificada y su clasificación de Bloom.",items:{type:xn.OBJECT,properties:{question:{type:xn.STRING,description:"El texto exacto de la pregunta."},habilidadBloom:{type:xn.STRING,description:"El nivel de Bloom correspondiente.",enum:zL}},required:["question","habilidadBloom"]}},summary:{type:xn.OBJECT,description:"Un resumen con el conteo de preguntas por cada nivel de Bloom.",properties:{Recordar:{type:xn.INTEGER},Comprender:{type:xn.INTEGER},Aplicar:{type:xn.INTEGER},Analizar:{type:xn.INTEGER},Evaluar:{type:xn.INTEGER},Crear:{type:xn.INTEGER}}}},required:["analysisResults","summary"]};try{Wl("Análisis Taxonómico");const E=new bx({apiKey:"AIzaSyBwOEsVIeAjIhoJ5PKko5DvmJrcQTwJwHE"}),B={inlineData:{mimeType:y.mimeType,data:y.data}},O=await E.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{text:L},B]},config:{responseMimeType:"application/json",responseSchema:C}}),R=JSON.parse(O.text),F={documentName:u,uploadDate:new Date().toISOString(),userId:t.id,analysisResults:R.analysisResults,summary:R.summary},Q=await bIe(F);await T(),l(Q),d(""),b(null),_(null)}catch(E){console.error(E),i("Hubo un error al analizar el documento. Asegúrese de que el archivo no esté protegido o vacío. Inténtelo de nuevo.")}finally{m(!1)}},M=async L=>{if(window.confirm("¿Está seguro de eliminar este análisis?"))try{await CIe(L),await T(),(o==null?void 0:o.id)===L&&l(null)}catch(C){console.error("Error al eliminar análisis:",C),i("No se pudo eliminar el análisis en la nube.")}},P=Z.useMemo(()=>o?Object.values(o.summary).reduce((L,C)=>L+(C||0),0):0,[o]);return c.jsxs("div",{className:"space-y-8 animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200",children:"Análisis Taxonómico de Evaluaciones"}),n&&c.jsx("div",{className:"text-center text-amber-600 py-4",children:"Cargando análisis desde la nube..."}),a&&c.jsx("div",{className:"text-red-600 bg-red-100 p-3 rounded-md mb-4",children:a}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Analizar Nuevo Documento"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"file-upload",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Subir Archivo (.pdf, .docx)"}),c.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-slate-300 border-dashed rounded-md",children:c.jsxs("div",{className:"space-y-1 text-center",children:[c.jsx("svg",{className:"mx-auto h-12 w-12 text-slate-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:c.jsx("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),c.jsxs("div",{className:"flex text-sm text-slate-600 dark:text-slate-400",children:[c.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-white dark:bg-slate-800 rounded-md font-medium text-amber-600 hover:text-amber-500 focus-within:outline-none",children:[c.jsx("span",{children:"Cargue un archivo"}),c.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",onChange:k,accept:".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"})]}),c.jsx("p",{className:"pl-1",children:"o arrástrelo aquí"})]}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500",children:g?g.name:"PDF, DOCX hasta 10MB"})]})})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"documentName",className:"block text-sm font-medium text-slate-600 dark:text-slate-300 mb-1",children:"Nombre del Documento/Prueba"}),c.jsx("input",{type:"text",id:"documentName",value:u,onChange:L=>d(L.target.value),className:"w-full border-slate-300 rounded-md shadow-sm dark:bg-slate-700 dark:border-slate-600"})]}),c.jsx("button",{onClick:D,disabled:h||!y,className:"w-full bg-slate-800 text-white font-bold py-3 px-4 rounded-lg hover:bg-slate-700 disabled:bg-slate-400 flex items-center justify-center",children:h?c.jsx(EIe,{}):"Analizar con IA"})]})]}),c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-200 mb-4",children:"Historial de Análisis"}),!n&&e.length===0&&c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 text-yellow-700 p-4 rounded-lg text-sm",children:"No hay análisis guardados en la nube."}),c.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:!n&&e.length>0&&e.map(L=>c.jsxs("button",{onClick:()=>l(L),className:`w-full text-left p-3 rounded-md border ${(o==null?void 0:o.id)===L.id?"bg-amber-100 border-amber-300 dark:bg-amber-900/30 dark:border-amber-700":"bg-slate-50 hover:bg-slate-100 dark:bg-slate-700/50 dark:hover:bg-slate-700"}`,children:[c.jsx("p",{className:"font-semibold truncate",children:L.documentName}),c.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(L.uploadDate).toLocaleString("es-CL")})]},L.id))})]})]}),c.jsx("div",{className:"lg:col-span-2 bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:o?c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-slate-200",children:o.documentName}),c.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Analizado el ",new Date(o.uploadDate).toLocaleString("es-CL")]})]}),c.jsx("button",{onClick:()=>M(o.id),className:"text-red-500 hover:text-red-700 text-sm font-semibold",children:"Eliminar"})]}),c.jsxs("div",{children:[c.jsxs("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:["Consolidado Taxonómico (",P," preguntas)"]}),c.jsx("div",{className:"space-y-3",children:zL.map(L=>{const C=o.summary[L]||0,E=P>0?C/P*100:0;return c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[c.jsx("span",{className:"font-medium text-slate-600 dark:text-slate-300",children:L}),c.jsxs("span",{className:"font-semibold text-slate-500 dark:text-slate-400",children:[C," (",E.toFixed(0),"%)"]})]}),c.jsx("div",{className:"bg-slate-200 dark:bg-slate-700 rounded-full h-4",children:c.jsx("div",{className:`${GL[L]} h-4 rounded-full`,style:{width:`${E}%`}})})]},L)})})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-bold text-slate-700 dark:text-slate-300 mb-3",children:"Detalle del Análisis"}),c.jsx("div",{className:"overflow-x-auto max-h-96 border rounded-lg dark:border-slate-700",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 dark:divide-slate-700",children:[c.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700 sticky top-0",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase w-3/4",children:"Pregunta / Ítem"}),c.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 dark:text-slate-400 uppercase",children:"Habilidad (Bloom)"})]})}),c.jsx("tbody",{className:"bg-white dark:bg-slate-800 divide-y divide-slate-200 dark:divide-slate-700",children:o.analysisResults.map((L,C)=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-4 py-3 text-sm text-slate-600 dark:text-slate-300",children:L.question}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full text-white ${GL[L.habilidadBloom]}`,children:L.habilidadBloom})})]},C))})]})})]})]}):c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[c.jsx("span",{className:"text-6xl mb-4 text-slate-400",children:"📊"}),c.jsx("h2",{className:"text-xl font-bold text-slate-700 dark:text-slate-300",children:"Resultados del Análisis"}),c.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-sm mt-2",children:"Realice un nuevo análisis o seleccione uno del historial para ver los resultados aquí."})]})})]})]})},xw="empresas_practicas",_Ie="usuarios",a9=t=>{const e=t.data();return{id:t.id,...e}},SIe=t=>{const e=Yt(kt(vt,xw),Pr("nombre","asc"));return mr(e,r=>{const n=r.docs.map(s=>a9(s));t(n)},r=>console.error("Error al suscribirse a empresas:",r))},TIe=async t=>{const{calificaciones:e}=t,r=e.reduce((s,a)=>s+(a.score||0),0),n={...t,puntajeTotal:r};if("id"in t&&t.id){const{id:s,...a}=n,i=ur(vt,xw,s);return await pi(i,a,{merge:!0}),s}else return(await ps(kt(vt,xw),{...n,createdAt:TY()})).id},NIe=async t=>{const e=ur(vt,xw,t);await Ta(e)},BIe=t=>{const e=Yt(kt(vt,_Ie),Xr("profile","==",jt.ESTUDIANTE),Pr("nombreCompleto","asc"));return mr(e,r=>{const n=r.docs.map(s=>a9(s));t(n)},r=>console.error("Error al suscribirse a estudiantes:",r))},i9=[{elemento:"Cumplimiento legal y formalidad"},{elemento:"Contrato o convenio formal de práctica"},{elemento:"Condiciones de higiene y seguridad laboral"},{elemento:"Seguro escolar vigente"},{elemento:"Coherencia entre tareas asignadas y especialidad TP"},{elemento:"Tutor laboral designado"},{elemento:"Evaluación formativa en contexto laboral"},{elemento:"Igualdad de oportunidades para mujeres y grupos prioritarios"},{elemento:"Apoyo a estudiantes con necesidades educativas especiales"},{elemento:"Condiciones adecuadas para el aprendizaje"},{elemento:"Acceso a tecnologías y herramientas relevantes"},{elemento:"Participación en redes de colaboración TP"},{elemento:"Existencia de mecanismos de feedback y mejora"},{elemento:"Clima laboral respetuoso y ético"},{elemento:"Bienestar físico y psicológico del estudiante"}],kIe=()=>({nombre:"",rut:"",direccion:"",contacto:"",cupos:1,calificaciones:i9.map(t=>({...t,score:null})),estudiantesAsignados:[]}),IIe=()=>{const[t,e]=Z.useState([]),[r,n]=Z.useState([]),[s,a]=Z.useState("list"),[i,o]=Z.useState(null),[l,u]=Z.useState(!0);Z.useEffect(()=>{const T=SIe(e),k=BIe(D=>{n(D),u(!1)});return()=>{T(),k()}},[]);const d=async()=>{if(i)try{await TIe(i),a("list"),o(null)}catch(T){console.error("Error al guardar la empresa:",T),alert("No se pudo guardar la empresa.")}},h=async T=>{window.confirm("¿Está seguro de eliminar esta empresa? Se desasignarán los estudiantes.")&&await NIe(T)},m=(T,k)=>{o(D=>D?{...D,[T]:k}:null)},g=(T,k)=>{if(!i)return;const D=i.calificaciones.map(M=>M.elemento===T?{...M,score:k}:M);m("calificaciones",D)},b=T=>{if(!i||i.estudiantesAsignados.length>=i.cupos)return;const k=[...i.estudiantesAsignados,T];m("estudiantesAsignados",k)},y=T=>{if(!i)return;const k=i.estudiantesAsignados.filter(D=>D!==T);m("estudiantesAsignados",k)},_=Z.useMemo(()=>i?r.filter(T=>!i.estudiantesAsignados.includes(T.id)):[],[r,i]);return l?c.jsx("div",{className:"text-center p-8",children:"Cargando gestión de empresas..."}):s==="form"&&i?c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"id"in i?"Editando Empresa":"Nueva Empresa"}),c.jsx("button",{onClick:()=>a("list"),className:"font-semibold",children:"← Volver"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsx("input",{value:i.nombre,onChange:T=>m("nombre",T.target.value),placeholder:"Nombre Empresa",className:"input-style"}),c.jsx("input",{value:i.rut,onChange:T=>m("rut",T.target.value),placeholder:"RUT Empresa",className:"input-style"}),c.jsx("input",{value:i.direccion,onChange:T=>m("direccion",T.target.value),placeholder:"Dirección",className:"input-style"}),c.jsx("input",{value:i.contacto,onChange:T=>m("contacto",T.target.value),placeholder:"Contacto (Nombre, Email, Teléfono)",className:"input-style"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"Calificación de la Empresa"}),c.jsx("div",{className:"space-y-2",children:i.calificaciones.map(({elemento:T,score:k})=>c.jsxs("div",{className:"grid grid-cols-4 items-center gap-2 text-sm p-2 bg-slate-50 dark:bg-slate-700/50 rounded",children:[c.jsx("span",{className:"col-span-2 md:col-span-1",children:T}),c.jsx("div",{className:"col-span-2 md:col-span-3 flex justify-around",children:[1,2,3].map(D=>c.jsx("button",{onClick:()=>g(T,D),className:`px-3 py-1 rounded-full text-xs font-semibold ${k===D?"bg-amber-500 text-white":"bg-slate-200 dark:bg-slate-600"}`,children:D===1?"Insatisfactorio":D===2?"Regular":"Óptimo"},D))})]},T))})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg mb-2",children:"Cupos y Asignación de Estudiantes"}),c.jsx("label",{children:"Cantidad de cupos (1-20):"}),c.jsx("input",{type:"number",min:"1",max:"20",value:i.cupos,onChange:T=>m("cupos",parseInt(T.target.value,10)),className:"input-style w-24 ml-2"}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("h4",{className:"font-semibold",children:["Estudiantes Asignados (",i.estudiantesAsignados.length,"/",i.cupos,")"]}),c.jsx("ul",{className:"list-disc pl-5 my-2",children:i.estudiantesAsignados.map(T=>{const k=r.find(D=>D.id===T);return c.jsxs("li",{children:[k==null?void 0:k.nombreCompleto," ",c.jsx("button",{onClick:()=>y(T),className:"text-red-500 ml-2",children:"Quitar"})]},T)})}),i.estudiantesAsignados.length<i.cupos&&c.jsxs("select",{onChange:T=>b(T.target.value),value:"",className:"input-style",children:[c.jsx("option",{value:"",disabled:!0,children:"Asignar estudiante..."}),_.map(T=>c.jsx("option",{value:T.id,children:T.nombreCompleto},T.id))]})]})]}),c.jsx("button",{onClick:d,className:"w-full bg-amber-500 text-white font-bold py-2 rounded-lg",children:"Guardar Empresa"})]}):c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-md",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h1",{className:"text-3xl font-bold",children:"Gestión de Empresas para Prácticas TP"}),c.jsx("button",{onClick:()=>{o(kIe()),a("form")},className:"bg-amber-500 text-white font-bold py-2 px-4 rounded-lg",children:"Crear Nueva Empresa"})]}),c.jsx("div",{className:"space-y-3",children:t.map(T=>c.jsx("div",{className:"p-4 border dark:border-slate-700 rounded-lg bg-slate-50 dark:bg-slate-700/50",children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"font-bold text-lg",children:T.nombre}),c.jsxs("p",{className:"text-sm text-slate-500",children:[T.rut," | ",T.direccion]})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsxs("p",{className:"font-bold text-xl",children:[T.puntajeTotal||0," / ",i9.length*3]}),c.jsx("p",{className:"text-xs text-slate-500",children:"Puntaje"})]}),c.jsxs("div",{className:"text-center",children:[c.jsxs("p",{className:"font-bold text-xl",children:[T.estudiantesAsignados.length," / ",T.cupos]}),c.jsx("p",{className:"text-xs text-slate-500",children:"Cupos"})]}),c.jsx("button",{onClick:()=>{o(JSON.parse(JSON.stringify(T))),a("form")},className:"text-sm font-semibold",children:"Editar"}),c.jsx("button",{onClick:()=>h(T.id),className:"text-sm text-red-500",children:"Eliminar"})]})]})},T.id))})]})},FIe=t=>{if(!t)return"";let e=t.trim().toLowerCase();return e=e.replace(/°/g,"º"),e=e.replace(/\s+(medio|básico|basico)/g,""),e=e.replace(/(\d)(st|nd|rd|th|ro|do|to|er)/,"$1º"),e=e.replace(/^(\d)(?![º])/,"$1º"),e=e.replace(/\s+/g,"").toUpperCase(),e},DIe=({currentUser:t,onLogout:e,onUserUpdate:r,onChangeProfile:n,canChangeProfile:s,unreadMessagesCount:a,refreshUnreadCount:i})=>{const o=t.profile,l=Z.useMemo(()=>{const T=YY[o];return o!==jt.ESTUDIANTE?T:T.filter(k=>{if(k.name==="Asistencia a Empresa"){const D=FIe(t.curso||"");return D.startsWith("3º")||D.startsWith("4º")}return!0})},[o,t.curso]),[u,d]=Z.useState(null),[h,m]=Z.useState(!1);Z.useEffect(()=>{l&&l.length>0?d(l[0]):d(null)},[o,l]);const g=Z.useCallback(T=>{d(T),window.innerWidth<768&&m(!1)},[]),b=Z.useCallback(T=>{const k=l.find(D=>D.name===T);k&&g(k)},[l,g]),y=()=>c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-center h-16 border-b border-slate-700 px-4 flex-shrink-0",children:[c.jsx(RY,{}),c.jsx("span",{className:"ml-3 text-white font-bold text-xl whitespace-nowrap",children:"Gestión LIR"})]}),c.jsx("nav",{className:"flex-1 p-4 space-y-2 overflow-y-auto sidebar-scroll",children:l.map(T=>c.jsxs("button",{onClick:()=>g(T),className:`w-full flex items-center py-3 px-4 rounded-lg transition-colors duration-200 text-left ${(u==null?void 0:u.name)===T.name?"bg-slate-900 text-amber-400 font-semibold":"text-slate-300 hover:bg-slate-700 hover:text-white"}`,children:[T.icon,c.jsx("span",{className:"ml-4",children:T.name})]},T.name))})]}),_=()=>{if(!u)return c.jsx("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full flex items-center justify-center",children:c.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-xl",children:"Seleccione un módulo del menú para comenzar."})});if(u.name==="Calendario Académico")return c.jsx(Voe,{profile:o});if(u.name==="Muro de Anuncios")return c.jsx($oe,{currentUser:t});if(u.name==="Mensajería Interna")return c.jsx(K2e,{currentUser:t,refreshUnreadCount:i});if(u.name==="Generador de Actas")return c.jsx(ele,{});if(o===jt.SUBDIRECCION){if(u.name==="Dashboard")return c.jsx(_J,{currentUser:t});if(u.name==="Administración")return c.jsx(bye,{});if(u.name==="Seguimiento Curricular")return c.jsx(yIe,{currentUser:t});if(u.name==="Acompañamiento docente")return c.jsx(j2e,{currentUser:t});if(u.name==="Análisis Taxonómico")return c.jsx(qL,{currentUser:t});if(u.name==="Interdisciplinario")return c.jsx(QR,{});if(u.name==="Registro de inasistencias y reemplazos docentes")return c.jsx(yJ,{currentUser:t});if(u.name==="Crear horarios")return c.jsx(lX,{});if(u.name==="Seguimiento de acciones pedagógicas")return c.jsx(fX,{});if(u.name==="Inclusión")return c.jsx(jD,{currentUser:t})}if(o===jt.PROFESORADO){if(u.name==="Planificación")return c.jsx(Loe,{currentUser:t});if(u.name==="Mis Acompañamientos")return c.jsx(dIe,{currentUser:t});if(u.name==="Recursos de Aprendizaje")return c.jsx(X3e,{});if(u.name==="Análisis Taxonómico")return c.jsx(qL,{currentUser:t});if(u.name==="Interdisciplinario")return c.jsx(QR,{});if(u.name==="Inclusión")return c.jsx(jD,{currentUser:t});if(u.name==="Actividades Remotas")return c.jsx(Oye,{});if(u.name==="Evaluación de Aprendizajes")return c.jsx(Zce,{});if(u.name==="Evaluaciones Formativas")return c.jsx(F2e,{currentUser:t})}if(o===jt.COORDINACION_TP){if(u.name==="Seguimiento Dual")return c.jsx(Fye,{});if(u.name==="Asistencia Dual")return c.jsx(p2e,{});if(u.name==="Pañol")return c.jsx(LSe,{});if(u.name==="Gestión de Empresas")return c.jsx(IIe,{})}if(o===jt.ESTUDIANTE){if(u.name==="Auto-aprendizaje")return c.jsx($ye,{currentUser:t});if(u.name==="Evaluación Formativa")return c.jsx(aIe,{currentUser:t});if(u.name==="Tareas Interdisciplinarias")return c.jsx(uIe,{currentUser:t});if(u.name==="Asistencia a Empresa")return c.jsx(l2e,{currentUser:t})}return c.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md h-full w-full animate-fade-in",children:[c.jsx("h1",{className:"text-3xl font-bold text-slate-800 dark:text-slate-200 mb-6",children:u.name}),c.jsx("div",{className:"border-l-4 border-amber-400 pl-4",children:c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 text-lg",children:["Aquí irá la funcionalidad de ",c.jsx("span",{className:"font-semibold",children:u.name}),"."]})})]})};return c.jsxs("div",{className:"h-screen flex flex-col bg-slate-100",children:[c.jsx(sJ,{currentUser:t,onLogout:e,onNavigate:b,onUserUpdate:r,onChangeProfile:n,canChangeProfile:s,toggleSidebar:()=>m(!h),unreadMessagesCount:a,refreshUnreadCount:i}),c.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[h&&c.jsx("div",{onClick:()=>m(!1),className:"fixed inset-0 bg-black opacity-50 z-20 md:hidden"}),c.jsx("aside",{className:`fixed md:relative z-30 inset-y-0 left-0 w-72 bg-slate-800 text-white flex flex-col transform md:translate-x-0 ${h?"translate-x-0":"-translate-x-full"} transition-transform duration-300 ease-in-out`,children:c.jsx(y,{})}),c.jsx("main",{className:"flex-1 overflow-y-auto",children:c.jsx("div",{className:"p-6 md:p-8",children:_()})})]})]})},RIe=({onSelectProfile:t,isAdminView:e=!1})=>c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen p-4 bg-slate-100 dark:bg-slate-900",children:[c.jsxs("div",{className:"text-center mb-10",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(k4,{})}),c.jsx("h1",{className:"text-4xl font-bold text-slate-800 dark:text-slate-200 mt-2",children:"Gestión Pedagógica LIR"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2 text-lg",children:e?"Como administrador, seleccione el perfil que desea visualizar:":"Seleccione su perfil para continuar"})]}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 w-full max-w-6xl",children:WY.map(r=>c.jsxs("button",{onClick:()=>t(r.id),className:"group bg-white dark:bg-slate-800 p-8 rounded-xl shadow-md hover:shadow-xl hover:-translate-y-2 focus:outline-none focus:ring-4 focus:ring-amber-400 focus:ring-opacity-50 transition-all duration-300 ease-in-out flex flex-col items-center justify-center text-center",children:[c.jsx("div",{className:"text-slate-700 dark:text-slate-300 group-hover:text-amber-400 transition-colors duration-300",children:r.icon}),c.jsx("h2",{className:"text-xl font-semibold mt-4 text-slate-800 dark:text-slate-200",children:r.label})]},r.id))}),c.jsxs("footer",{className:"absolute bottom-4 text-slate-500 dark:text-slate-400 text-sm",children:["© ",new Date().getFullYear()," Liceo Industrial de Recoleta. Todos los derechos reservados."]})]}),LIe=()=>{const[t,e]=Z.useState(null),[r,n]=Z.useState(null),[s,a]=Z.useState(!0),[i,o]=Z.useState(null),[l,u]=Z.useState(!1),[d,h]=Z.useState(null);Z.useEffect(()=>{const k=NU(A1,async D=>{if(e(D),D)try{const M=await xM(D.email);M?(n(M),M.profile===jt.SUBDIRECCION&&u(!0)):(o("Usuario no encontrado en la base de datos. Contacte al administrador."),await lE())}catch{o("Error al conectar con la base de datos."),await lE()}else n(null),h(null),u(!1),o(null);a(!1)});return()=>k()},[]);const m=async(k,D)=>{if(o(null),!k.trim()||!D.trim()){o("Por favor ingrese email y contraseña");return}try{await IY(k.trim(),D)}catch(M){switch(M.code){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":o("Credenciales inválidas. Verifique su email y contraseña.");break;case"auth/too-many-requests":o("Demasiados intentos fallidos. Intente más tarde.");break;case"auth/network-request-failed":o("Error de conexión. Verifique su internet.");break;default:o("Ocurrió un error al intentar iniciar sesión.")}}},g=async k=>{try{await FY(k)}catch(D){console.error("Error al enviar email de recuperación:",D)}},b=k=>{h(k),u(!1)},y=()=>{u(!0),h(null)},_=async()=>{try{await lE()}catch(k){console.error("Error al cerrar sesión:",k)}};if(s)return c.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 dark:bg-slate-900",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"mb-4 flex justify-center items-center",children:c.jsx(k4,{})}),c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-500 mx-auto mb-4"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg font-medium",children:"Inicializando aplicación..."})]})});if(!t||!r)return c.jsx(eJ,{onLoginAttempt:m,onForgotPasswordRequest:g,error:i});if(l&&r.profile===jt.SUBDIRECCION)return c.jsx(RIe,{onSelectProfile:b,isAdminView:!0});const T=d||r.profile;return c.jsx(DIe,{currentUser:{...r,profile:T},onLogout:_,onChangeProfile:r.profile===jt.SUBDIRECCION?y:void 0,canChangeProfile:r.profile===jt.SUBDIRECCION})},o9=document.getElementById("root");if(!o9)throw new Error("Could not find root element to mount to");const UIe=vV.createRoot(o9);UIe.render(c.jsx(dt.StrictMode,{children:c.jsx(LIe,{})}));export{qn as _,MIe as c,B5 as g};
